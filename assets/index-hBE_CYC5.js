var zqe=Object.defineProperty;var Uqe=(e,t,n)=>t in e?zqe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Vqe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Bu=(e,t,n)=>(Uqe(e,typeof t!="symbol"?t+"":t,n),n);var iTn=Vqe((_2n,Iie)=>{function Hqe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qqe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var qbe={exports:{}},BL={},Wbe={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=Symbol.for("react.element"),Wqe=Symbol.for("react.portal"),Gqe=Symbol.for("react.fragment"),Yqe=Symbol.for("react.strict_mode"),Kqe=Symbol.for("react.profiler"),Xqe=Symbol.for("react.provider"),Qqe=Symbol.for("react.context"),Jqe=Symbol.for("react.forward_ref"),Zqe=Symbol.for("react.suspense"),eWe=Symbol.for("react.memo"),tWe=Symbol.for("react.lazy"),zie=Symbol.iterator;function nWe(e){return e===null||typeof e!="object"?null:(e=zie&&e[zie]||e["@@iterator"],typeof e=="function"?e:null)}var Gbe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ybe=Object.assign,Kbe={};function AE(e,t,n){this.props=e,this.context=t,this.refs=Kbe,this.updater=n||Gbe}AE.prototype.isReactComponent={};AE.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};AE.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xbe(){}Xbe.prototype=AE.prototype;function UW(e,t,n){this.props=e,this.context=t,this.refs=Kbe,this.updater=n||Gbe}var VW=UW.prototype=new Xbe;VW.constructor=UW;Ybe(VW,AE.prototype);VW.isPureReactComponent=!0;var Uie=Array.isArray,Qbe=Object.prototype.hasOwnProperty,HW={current:null},Jbe={key:!0,ref:!0,__self:!0,__source:!0};function Zbe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Qbe.call(t,r)&&!Jbe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:LA,type:e,key:s,ref:o,props:i,_owner:HW.current}}function rWe(e,t){return{$$typeof:LA,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qW(e){return typeof e=="object"&&e!==null&&e.$$typeof===LA}function iWe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vie=/\/+/g;function B8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iWe(""+e.key):t.toString(36)}function Fk(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case LA:case Wqe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+B8(o,0):r,Uie(i)?(n="",e!=null&&(n=e.replace(Vie,"$&/")+"/"),Fk(i,t,n,"",function(l){return l})):i!=null&&(qW(i)&&(i=rWe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Uie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+B8(s,a);o+=Fk(s,t,n,u,i)}else if(u=nWe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+B8(s,a++),o+=Fk(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function NO(e,t,n){if(e==null)return e;var r=[],i=0;return Fk(e,r,"","",function(s){return t.call(n,s,i++)}),r}function sWe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fa={current:null},Bk={transition:null},oWe={ReactCurrentDispatcher:Fa,ReactCurrentBatchConfig:Bk,ReactCurrentOwner:HW};Rn.Children={map:NO,forEach:function(e,t,n){NO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return NO(e,function(){t++}),t},toArray:function(e){return NO(e,function(t){return t})||[]},only:function(e){if(!qW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rn.Component=AE;Rn.Fragment=Gqe;Rn.Profiler=Kqe;Rn.PureComponent=UW;Rn.StrictMode=Yqe;Rn.Suspense=Zqe;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oWe;Rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ybe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=HW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Qbe.call(t,u)&&!Jbe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:LA,type:e.type,key:i,ref:s,props:r,_owner:o}};Rn.createContext=function(e){return e={$$typeof:Qqe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Xqe,_context:e},e.Consumer=e};Rn.createElement=Zbe;Rn.createFactory=function(e){var t=Zbe.bind(null,e);return t.type=e,t};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(e){return{$$typeof:Jqe,render:e}};Rn.isValidElement=qW;Rn.lazy=function(e){return{$$typeof:tWe,_payload:{_status:-1,_result:e},_init:sWe}};Rn.memo=function(e,t){return{$$typeof:eWe,type:e,compare:t===void 0?null:t}};Rn.startTransition=function(e){var t=Bk.transition;Bk.transition={};try{e()}finally{Bk.transition=t}};Rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rn.useCallback=function(e,t){return Fa.current.useCallback(e,t)};Rn.useContext=function(e){return Fa.current.useContext(e)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(e){return Fa.current.useDeferredValue(e)};Rn.useEffect=function(e,t){return Fa.current.useEffect(e,t)};Rn.useId=function(){return Fa.current.useId()};Rn.useImperativeHandle=function(e,t,n){return Fa.current.useImperativeHandle(e,t,n)};Rn.useInsertionEffect=function(e,t){return Fa.current.useInsertionEffect(e,t)};Rn.useLayoutEffect=function(e,t){return Fa.current.useLayoutEffect(e,t)};Rn.useMemo=function(e,t){return Fa.current.useMemo(e,t)};Rn.useReducer=function(e,t,n){return Fa.current.useReducer(e,t,n)};Rn.useRef=function(e){return Fa.current.useRef(e)};Rn.useState=function(e){return Fa.current.useState(e)};Rn.useSyncExternalStore=function(e,t,n){return Fa.current.useSyncExternalStore(e,t,n)};Rn.useTransition=function(){return Fa.current.useTransition()};Rn.version="18.2.0";Wbe.exports=Rn;var C=Wbe.exports;const M=bl(C),F1=Hqe({__proto__:null,default:M},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aWe=C,uWe=Symbol.for("react.element"),lWe=Symbol.for("react.fragment"),cWe=Object.prototype.hasOwnProperty,fWe=aWe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dWe={key:!0,ref:!0,__self:!0,__source:!0};function ewe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)cWe.call(t,r)&&!dWe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:uWe,type:e,key:s,ref:o,props:i,_owner:fWe.current}}BL.Fragment=lWe;BL.jsx=ewe;BL.jsxs=ewe;qbe.exports=BL;var I=qbe.exports,J7={},twe={exports:{}},wl={},nwe={exports:{}},rwe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,H){var U=j.length;j.push(H);e:for(;0<U;){var k=U-1>>>1,$=j[k];if(0<i($,H))j[k]=H,j[U]=$,U=k;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],U=j.pop();if(U!==H){j[0]=U;e:for(var k=0,$=j.length,q=$>>>1;k<q;){var F=2*(k+1)-1,B=j[F],Q=F+1,se=j[Q];if(0>i(B,U))Q<$&&0>i(se,B)?(j[k]=se,j[Q]=U,k=Q):(j[k]=B,j[F]=U,k=F);else if(Q<$&&0>i(se,U))j[k]=se,j[Q]=U,k=Q;else break e}}return H}function i(j,H){var U=j.sortIndex-H.sortIndex;return U!==0?U:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=j)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function b(j){if(m=!1,_(j),!p)if(n(u)!==null)p=!0,L(E);else{var H=n(l);H!==null&&V(b,H.startTime-j)}}function E(j,H){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var U=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||j&&!O());){var k=f.callback;if(typeof k=="function"){f.callback=null,d=f.priorityLevel;var $=k(f.expirationTime<=H);H=e.unstable_now(),typeof $=="function"?f.callback=$:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var F=n(l);F!==null&&V(b,F.startTime-H),q=!1}return q}finally{f=null,d=U,h=!1}}var w=!1,x=null,S=-1,P=5,A=-1;function O(){return!(e.unstable_now()-A<P)}function z(){if(x!==null){var j=e.unstable_now();A=j;var H=!0;try{H=x(!0,j)}finally{H?D():(w=!1,x=null)}}else w=!1}var D;if(typeof v=="function")D=function(){v(z)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,N=R.port2;R.port1.onmessage=z,D=function(){N.postMessage(null)}}else D=function(){g(z,0)};function L(j){x=j,w||(w=!0,D())}function V(j,H){S=g(function(){j(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var U=d;d=H;try{return j()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=d;d=j;try{return H()}finally{d=U}},e.unstable_scheduleCallback=function(j,H,U){var k=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?k+U:k):U=k,j){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=U+$,j={id:c++,callback:H,priorityLevel:j,startTime:U,expirationTime:$,sortIndex:-1},U>k?(j.sortIndex=U,t(l,j),n(u)===null&&j===n(l)&&(m?(y(S),S=-1):m=!0,V(b,U-k))):(j.sortIndex=$,t(u,j),p||h||(p=!0,L(E))),j},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(j){var H=d;return function(){var U=d;d=H;try{return j.apply(this,arguments)}finally{d=U}}}})(rwe);nwe.exports=rwe;var hWe=nwe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iwe=C,ul=hWe;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var swe=new Set,U2={};function Iv(e,t){fw(e,t),fw(e+"Capture",t)}function fw(e,t){for(U2[e]=t,e=0;e<t.length;e++)swe.add(t[e])}var Ap=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Z7=Object.prototype.hasOwnProperty,pWe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hie={},qie={};function mWe(e){return Z7.call(qie,e)?!0:Z7.call(Hie,e)?!1:pWe.test(e)?qie[e]=!0:(Hie[e]=!0,!1)}function gWe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yWe(e,t,n,r){if(t===null||typeof t>"u"||gWe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ba(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var So={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){So[e]=new Ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];So[t]=new Ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){So[e]=new Ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){So[e]=new Ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){So[e]=new Ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){So[e]=new Ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){So[e]=new Ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){So[e]=new Ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){So[e]=new Ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var WW=/[\-:]([a-z])/g;function GW(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(WW,GW);So[t]=new Ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(WW,GW);So[t]=new Ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(WW,GW);So[t]=new Ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){So[e]=new Ba(e,1,!1,e.toLowerCase(),null,!1,!1)});So.xlinkHref=new Ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){So[e]=new Ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function YW(e,t,n,r){var i=So.hasOwnProperty(t)?So[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yWe(t,n,i,r)&&(n=null),r||i===null?mWe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var em=iwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,DO=Symbol.for("react.element"),Q_=Symbol.for("react.portal"),J_=Symbol.for("react.fragment"),KW=Symbol.for("react.strict_mode"),ez=Symbol.for("react.profiler"),owe=Symbol.for("react.provider"),awe=Symbol.for("react.context"),XW=Symbol.for("react.forward_ref"),tz=Symbol.for("react.suspense"),nz=Symbol.for("react.suspense_list"),QW=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),uwe=Symbol.for("react.offscreen"),Wie=Symbol.iterator;function Vx(e){return e===null||typeof e!="object"?null:(e=Wie&&e[Wie]||e["@@iterator"],typeof e=="function"?e:null)}var xi=Object.assign,j8;function KS(e){if(j8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j8=t&&t[1]||""}return`
`+j8+e}var z8=!1;function U8(e,t){if(!e||z8)return"";z8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{z8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?KS(e):""}function vWe(e){switch(e.tag){case 5:return KS(e.type);case 16:return KS("Lazy");case 13:return KS("Suspense");case 19:return KS("SuspenseList");case 0:case 2:case 15:return e=U8(e.type,!1),e;case 11:return e=U8(e.type.render,!1),e;case 1:return e=U8(e.type,!0),e;default:return""}}function rz(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J_:return"Fragment";case Q_:return"Portal";case ez:return"Profiler";case KW:return"StrictMode";case tz:return"Suspense";case nz:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case awe:return(e.displayName||"Context")+".Consumer";case owe:return(e._context.displayName||"Context")+".Provider";case XW:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case QW:return t=e.displayName||null,t!==null?t:rz(e.type)||"Memo";case Mm:t=e._payload,e=e._init;try{return rz(e(t))}catch{}}return null}function _We(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rz(t);case 8:return t===KW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lwe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bWe(e){var t=lwe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function MO(e){e._valueTracker||(e._valueTracker=bWe(e))}function cwe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=lwe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function sR(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function iz(e,t){var n=t.checked;return xi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Wg(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fwe(e,t){t=t.checked,t!=null&&YW(e,"checked",t,!1)}function sz(e,t){fwe(e,t);var n=Wg(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oz(e,t.type,n):t.hasOwnProperty("defaultValue")&&oz(e,t.type,Wg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oz(e,t,n){(t!=="number"||sR(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var XS=Array.isArray;function Ab(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Wg(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function az(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return xi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(XS(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Wg(n)}}function dwe(e,t){var n=Wg(t.value),r=Wg(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hwe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uz(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hwe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var LO,pwe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(LO=LO||document.createElement("div"),LO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=LO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function V2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wWe=["Webkit","ms","Moz","O"];Object.keys(jT).forEach(function(e){wWe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jT[t]=jT[e]})});function mwe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jT.hasOwnProperty(e)&&jT[e]?(""+t).trim():t+"px"}function gwe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mwe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var EWe=xi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lz(e,t){if(t){if(EWe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function cz(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fz=null;function JW(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dz=null,Ib=null,Ob=null;function Qie(e){if(e=jA(e)){if(typeof dz!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=HL(t),dz(e.stateNode,e.type,t))}}function ywe(e){Ib?Ob?Ob.push(e):Ob=[e]:Ib=e}function vwe(){if(Ib){var e=Ib,t=Ob;if(Ob=Ib=null,Qie(e),t)for(e=0;e<t.length;e++)Qie(t[e])}}function _we(e,t){return e(t)}function bwe(){}var V8=!1;function wwe(e,t,n){if(V8)return e(t,n);V8=!0;try{return _we(e,t,n)}finally{V8=!1,(Ib!==null||Ob!==null)&&(bwe(),vwe())}}function H2(e,t){var n=e.stateNode;if(n===null)return null;var r=HL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var hz=!1;if(Ap)try{var Hx={};Object.defineProperty(Hx,"passive",{get:function(){hz=!0}}),window.addEventListener("test",Hx,Hx),window.removeEventListener("test",Hx,Hx)}catch{hz=!1}function xWe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var zT=!1,oR=null,aR=!1,pz=null,SWe={onError:function(e){zT=!0,oR=e}};function TWe(e,t,n,r,i,s,o,a,u){zT=!1,oR=null,xWe.apply(SWe,arguments)}function CWe(e,t,n,r,i,s,o,a,u){if(TWe.apply(this,arguments),zT){if(zT){var l=oR;zT=!1,oR=null}else throw Error(qe(198));aR||(aR=!0,pz=l)}}function Ov(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ewe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jie(e){if(Ov(e)!==e)throw Error(qe(188))}function AWe(e){var t=e.alternate;if(!t){if(t=Ov(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jie(i),e;if(s===r)return Jie(i),t;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function xwe(e){return e=AWe(e),e!==null?Swe(e):null}function Swe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Swe(e);if(t!==null)return t;e=e.sibling}return null}var Twe=ul.unstable_scheduleCallback,Zie=ul.unstable_cancelCallback,IWe=ul.unstable_shouldYield,OWe=ul.unstable_requestPaint,Wi=ul.unstable_now,PWe=ul.unstable_getCurrentPriorityLevel,ZW=ul.unstable_ImmediatePriority,Cwe=ul.unstable_UserBlockingPriority,uR=ul.unstable_NormalPriority,kWe=ul.unstable_LowPriority,Awe=ul.unstable_IdlePriority,jL=null,Sd=null;function $We(e){if(Sd&&typeof Sd.onCommitFiberRoot=="function")try{Sd.onCommitFiberRoot(jL,e,void 0,(e.current.flags&128)===128)}catch{}}var rf=Math.clz32?Math.clz32:DWe,RWe=Math.log,NWe=Math.LN2;function DWe(e){return e>>>=0,e===0?32:31-(RWe(e)/NWe|0)|0}var FO=64,BO=4194304;function QS(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lR(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=QS(a):(s&=o,s!==0&&(r=QS(s)))}else o=n&~i,o!==0?r=QS(o):s!==0&&(r=QS(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rf(t),i=1<<n,r|=e[n],t&=~i;return r}function MWe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LWe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-rf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=MWe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function mz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Iwe(){var e=FO;return FO<<=1,!(FO&4194240)&&(FO=64),e}function H8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function FA(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rf(t),e[t]=n}function FWe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function eG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var br=0;function Owe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pwe,tG,kwe,$we,Rwe,gz=!1,jO=[],vg=null,_g=null,bg=null,q2=new Map,W2=new Map,Wm=[],BWe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ese(e,t){switch(e){case"focusin":case"focusout":vg=null;break;case"dragenter":case"dragleave":_g=null;break;case"mouseover":case"mouseout":bg=null;break;case"pointerover":case"pointerout":q2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":W2.delete(t.pointerId)}}function qx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=jA(t),t!==null&&tG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function jWe(e,t,n,r,i){switch(t){case"focusin":return vg=qx(vg,e,t,n,r,i),!0;case"dragenter":return _g=qx(_g,e,t,n,r,i),!0;case"mouseover":return bg=qx(bg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return q2.set(s,qx(q2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,W2.set(s,qx(W2.get(s)||null,e,t,n,r,i)),!0}return!1}function Nwe(e){var t=Yy(e.target);if(t!==null){var n=Ov(t);if(n!==null){if(t=n.tag,t===13){if(t=Ewe(n),t!==null){e.blockedOn=t,Rwe(e.priority,function(){kwe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jk(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fz=r,n.target.dispatchEvent(r),fz=null}else return t=jA(n),t!==null&&tG(t),e.blockedOn=n,!1;t.shift()}return!0}function tse(e,t,n){jk(e)&&n.delete(t)}function zWe(){gz=!1,vg!==null&&jk(vg)&&(vg=null),_g!==null&&jk(_g)&&(_g=null),bg!==null&&jk(bg)&&(bg=null),q2.forEach(tse),W2.forEach(tse)}function Wx(e,t){e.blockedOn===t&&(e.blockedOn=null,gz||(gz=!0,ul.unstable_scheduleCallback(ul.unstable_NormalPriority,zWe)))}function G2(e){function t(i){return Wx(i,e)}if(0<jO.length){Wx(jO[0],e);for(var n=1;n<jO.length;n++){var r=jO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vg!==null&&Wx(vg,e),_g!==null&&Wx(_g,e),bg!==null&&Wx(bg,e),q2.forEach(t),W2.forEach(t),n=0;n<Wm.length;n++)r=Wm[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wm.length&&(n=Wm[0],n.blockedOn===null);)Nwe(n),n.blockedOn===null&&Wm.shift()}var Pb=em.ReactCurrentBatchConfig,cR=!0;function UWe(e,t,n,r){var i=br,s=Pb.transition;Pb.transition=null;try{br=1,nG(e,t,n,r)}finally{br=i,Pb.transition=s}}function VWe(e,t,n,r){var i=br,s=Pb.transition;Pb.transition=null;try{br=4,nG(e,t,n,r)}finally{br=i,Pb.transition=s}}function nG(e,t,n,r){if(cR){var i=yz(e,t,n,r);if(i===null)e9(e,t,r,fR,n),ese(e,r);else if(jWe(i,e,t,n,r))r.stopPropagation();else if(ese(e,r),t&4&&-1<BWe.indexOf(e)){for(;i!==null;){var s=jA(i);if(s!==null&&Pwe(s),s=yz(e,t,n,r),s===null&&e9(e,t,r,fR,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else e9(e,t,r,null,n)}}var fR=null;function yz(e,t,n,r){if(fR=null,e=JW(r),e=Yy(e),e!==null)if(t=Ov(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ewe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fR=e,null}function Dwe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PWe()){case ZW:return 1;case Cwe:return 4;case uR:case kWe:return 16;case Awe:return 536870912;default:return 16}default:return 16}}var ng=null,rG=null,zk=null;function Mwe(){if(zk)return zk;var e,t=rG,n=t.length,r,i="value"in ng?ng.value:ng.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return zk=i.slice(e,1<r?1-r:void 0)}function Uk(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zO(){return!0}function nse(){return!1}function El(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zO:nse,this.isPropagationStopped=nse,this}return xi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zO)},persist:function(){},isPersistent:zO}),t}var IE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iG=El(IE),BA=xi({},IE,{view:0,detail:0}),HWe=El(BA),q8,W8,Gx,zL=xi({},BA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gx&&(Gx&&e.type==="mousemove"?(q8=e.screenX-Gx.screenX,W8=e.screenY-Gx.screenY):W8=q8=0,Gx=e),q8)},movementY:function(e){return"movementY"in e?e.movementY:W8}}),rse=El(zL),qWe=xi({},zL,{dataTransfer:0}),WWe=El(qWe),GWe=xi({},BA,{relatedTarget:0}),G8=El(GWe),YWe=xi({},IE,{animationName:0,elapsedTime:0,pseudoElement:0}),KWe=El(YWe),XWe=xi({},IE,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QWe=El(XWe),JWe=xi({},IE,{data:0}),ise=El(JWe),ZWe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eGe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tGe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nGe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tGe[e])?!!t[e]:!1}function sG(){return nGe}var rGe=xi({},BA,{key:function(e){if(e.key){var t=ZWe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uk(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eGe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sG,charCode:function(e){return e.type==="keypress"?Uk(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uk(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iGe=El(rGe),sGe=xi({},zL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sse=El(sGe),oGe=xi({},BA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sG}),aGe=El(oGe),uGe=xi({},IE,{propertyName:0,elapsedTime:0,pseudoElement:0}),lGe=El(uGe),cGe=xi({},zL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fGe=El(cGe),dGe=[9,13,27,32],oG=Ap&&"CompositionEvent"in window,UT=null;Ap&&"documentMode"in document&&(UT=document.documentMode);var hGe=Ap&&"TextEvent"in window&&!UT,Lwe=Ap&&(!oG||UT&&8<UT&&11>=UT),ose=" ",ase=!1;function Fwe(e,t){switch(e){case"keyup":return dGe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bwe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Z_=!1;function pGe(e,t){switch(e){case"compositionend":return Bwe(t);case"keypress":return t.which!==32?null:(ase=!0,ose);case"textInput":return e=t.data,e===ose&&ase?null:e;default:return null}}function mGe(e,t){if(Z_)return e==="compositionend"||!oG&&Fwe(e,t)?(e=Mwe(),zk=rG=ng=null,Z_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lwe&&t.locale!=="ko"?null:t.data;default:return null}}var gGe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function use(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gGe[e.type]:t==="textarea"}function jwe(e,t,n,r){ywe(r),t=dR(t,"onChange"),0<t.length&&(n=new iG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var VT=null,Y2=null;function yGe(e){Qwe(e,0)}function UL(e){var t=nb(e);if(cwe(t))return e}function vGe(e,t){if(e==="change")return t}var zwe=!1;if(Ap){var Y8;if(Ap){var K8="oninput"in document;if(!K8){var lse=document.createElement("div");lse.setAttribute("oninput","return;"),K8=typeof lse.oninput=="function"}Y8=K8}else Y8=!1;zwe=Y8&&(!document.documentMode||9<document.documentMode)}function cse(){VT&&(VT.detachEvent("onpropertychange",Uwe),Y2=VT=null)}function Uwe(e){if(e.propertyName==="value"&&UL(Y2)){var t=[];jwe(t,Y2,e,JW(e)),wwe(yGe,t)}}function _Ge(e,t,n){e==="focusin"?(cse(),VT=t,Y2=n,VT.attachEvent("onpropertychange",Uwe)):e==="focusout"&&cse()}function bGe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return UL(Y2)}function wGe(e,t){if(e==="click")return UL(t)}function EGe(e,t){if(e==="input"||e==="change")return UL(t)}function xGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var df=typeof Object.is=="function"?Object.is:xGe;function K2(e,t){if(df(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Z7.call(t,i)||!df(e[i],t[i]))return!1}return!0}function fse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dse(e,t){var n=fse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fse(n)}}function Vwe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vwe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hwe(){for(var e=window,t=sR();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sR(e.document)}return t}function aG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SGe(e){var t=Hwe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vwe(n.ownerDocument.documentElement,n)){if(r!==null&&aG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dse(n,s);var o=dse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TGe=Ap&&"documentMode"in document&&11>=document.documentMode,eb=null,vz=null,HT=null,_z=!1;function hse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_z||eb==null||eb!==sR(r)||(r=eb,"selectionStart"in r&&aG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),HT&&K2(HT,r)||(HT=r,r=dR(vz,"onSelect"),0<r.length&&(t=new iG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=eb)))}function UO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tb={animationend:UO("Animation","AnimationEnd"),animationiteration:UO("Animation","AnimationIteration"),animationstart:UO("Animation","AnimationStart"),transitionend:UO("Transition","TransitionEnd")},X8={},qwe={};Ap&&(qwe=document.createElement("div").style,"AnimationEvent"in window||(delete tb.animationend.animation,delete tb.animationiteration.animation,delete tb.animationstart.animation),"TransitionEvent"in window||delete tb.transitionend.transition);function VL(e){if(X8[e])return X8[e];if(!tb[e])return e;var t=tb[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qwe)return X8[e]=t[n];return e}var Wwe=VL("animationend"),Gwe=VL("animationiteration"),Ywe=VL("animationstart"),Kwe=VL("transitionend"),Xwe=new Map,pse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function k0(e,t){Xwe.set(e,t),Iv(t,[e])}for(var Q8=0;Q8<pse.length;Q8++){var J8=pse[Q8],CGe=J8.toLowerCase(),AGe=J8[0].toUpperCase()+J8.slice(1);k0(CGe,"on"+AGe)}k0(Wwe,"onAnimationEnd");k0(Gwe,"onAnimationIteration");k0(Ywe,"onAnimationStart");k0("dblclick","onDoubleClick");k0("focusin","onFocus");k0("focusout","onBlur");k0(Kwe,"onTransitionEnd");fw("onMouseEnter",["mouseout","mouseover"]);fw("onMouseLeave",["mouseout","mouseover"]);fw("onPointerEnter",["pointerout","pointerover"]);fw("onPointerLeave",["pointerout","pointerover"]);Iv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var JS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IGe=new Set("cancel close invalid load scroll toggle".split(" ").concat(JS));function mse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,CWe(r,t,void 0,e),e.currentTarget=null}function Qwe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;mse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;mse(i,a,l),s=u}}}if(aR)throw e=pz,aR=!1,pz=null,e}function Wr(e,t){var n=t[Sz];n===void 0&&(n=t[Sz]=new Set);var r=e+"__bubble";n.has(r)||(Jwe(t,e,2,!1),n.add(r))}function Z8(e,t,n){var r=0;t&&(r|=4),Jwe(n,e,r,t)}var VO="_reactListening"+Math.random().toString(36).slice(2);function X2(e){if(!e[VO]){e[VO]=!0,swe.forEach(function(n){n!=="selectionchange"&&(IGe.has(n)||Z8(n,!1,e),Z8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[VO]||(t[VO]=!0,Z8("selectionchange",!1,t))}}function Jwe(e,t,n,r){switch(Dwe(t)){case 1:var i=UWe;break;case 4:i=VWe;break;default:i=nG}n=i.bind(null,t,n,e),i=void 0,!hz||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function e9(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yy(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}wwe(function(){var l=s,c=JW(n),f=[];e:{var d=Xwe.get(e);if(d!==void 0){var h=iG,p=e;switch(e){case"keypress":if(Uk(n)===0)break e;case"keydown":case"keyup":h=iGe;break;case"focusin":p="focus",h=G8;break;case"focusout":p="blur",h=G8;break;case"beforeblur":case"afterblur":h=G8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=rse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=WWe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=aGe;break;case Wwe:case Gwe:case Ywe:h=KWe;break;case Kwe:h=lGe;break;case"scroll":h=HWe;break;case"wheel":h=fGe;break;case"copy":case"cut":case"paste":h=QWe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=sse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=H2(v,y),b!=null&&m.push(Q2(v,b,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==fz&&(p=n.relatedTarget||n.fromElement)&&(Yy(p)||p[Ip]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Yy(p):null,p!==null&&(g=Ov(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=rse,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=sse,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:nb(h),_=p==null?d:nb(p),d=new m(b,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,b=null,Yy(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=p_(_))v++;for(_=0,b=y;b;b=p_(b))_++;for(;0<v-_;)m=p_(m),v--;for(;0<_-v;)y=p_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=p_(m),y=p_(y)}m=null}else m=null;h!==null&&gse(f,d,h,m,!1),p!==null&&g!==null&&gse(f,g,p,m,!0)}}e:{if(d=l?nb(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=vGe;else if(use(d))if(zwe)E=EGe;else{E=bGe;var w=_Ge}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=wGe);if(E&&(E=E(e,l))){jwe(f,E,n,c);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&oz(d,"number",d.value)}switch(w=l?nb(l):window,e){case"focusin":(use(w)||w.contentEditable==="true")&&(eb=w,vz=l,HT=null);break;case"focusout":HT=vz=eb=null;break;case"mousedown":_z=!0;break;case"contextmenu":case"mouseup":case"dragend":_z=!1,hse(f,n,c);break;case"selectionchange":if(TGe)break;case"keydown":case"keyup":hse(f,n,c)}var x;if(oG)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Z_?Fwe(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Lwe&&n.locale!=="ko"&&(Z_||S!=="onCompositionStart"?S==="onCompositionEnd"&&Z_&&(x=Mwe()):(ng=c,rG="value"in ng?ng.value:ng.textContent,Z_=!0)),w=dR(l,S),0<w.length&&(S=new ise(S,e,null,n,c),f.push({event:S,listeners:w}),x?S.data=x:(x=Bwe(n),x!==null&&(S.data=x)))),(x=hGe?pGe(e,n):mGe(e,n))&&(l=dR(l,"onBeforeInput"),0<l.length&&(c=new ise("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}Qwe(f,t)})}function Q2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=H2(e,n),s!=null&&r.unshift(Q2(e,s,i)),s=H2(e,t),s!=null&&r.push(Q2(e,s,i))),e=e.return}return r}function p_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=H2(n,s),u!=null&&o.unshift(Q2(n,u,a))):i||(u=H2(n,s),u!=null&&o.push(Q2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var OGe=/\r\n?/g,PGe=/\u0000|\uFFFD/g;function yse(e){return(typeof e=="string"?e:""+e).replace(OGe,`
`).replace(PGe,"")}function HO(e,t,n){if(t=yse(t),yse(e)!==t&&n)throw Error(qe(425))}function hR(){}var bz=null,wz=null;function Ez(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xz=typeof setTimeout=="function"?setTimeout:void 0,kGe=typeof clearTimeout=="function"?clearTimeout:void 0,vse=typeof Promise=="function"?Promise:void 0,$Ge=typeof queueMicrotask=="function"?queueMicrotask:typeof vse<"u"?function(e){return vse.resolve(null).then(e).catch(RGe)}:xz;function RGe(e){setTimeout(function(){throw e})}function t9(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),G2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);G2(t)}function wg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _se(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var OE=Math.random().toString(36).slice(2),rd="__reactFiber$"+OE,J2="__reactProps$"+OE,Ip="__reactContainer$"+OE,Sz="__reactEvents$"+OE,NGe="__reactListeners$"+OE,DGe="__reactHandles$"+OE;function Yy(e){var t=e[rd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ip]||n[rd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_se(e);e!==null;){if(n=e[rd])return n;e=_se(e)}return t}e=n,n=e.parentNode}return null}function jA(e){return e=e[rd]||e[Ip],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nb(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function HL(e){return e[J2]||null}var Tz=[],rb=-1;function $0(e){return{current:e}}function ei(e){0>rb||(e.current=Tz[rb],Tz[rb]=null,rb--)}function Ur(e,t){rb++,Tz[rb]=e.current,e.current=t}var Gg={},ra=$0(Gg),gu=$0(!1),B1=Gg;function dw(e,t){var n=e.type.contextTypes;if(!n)return Gg;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yu(e){return e=e.childContextTypes,e!=null}function pR(){ei(gu),ei(ra)}function bse(e,t,n){if(ra.current!==Gg)throw Error(qe(168));Ur(ra,t),Ur(gu,n)}function Zwe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(qe(108,_We(e)||"Unknown",i));return xi({},n,r)}function mR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gg,B1=ra.current,Ur(ra,e),Ur(gu,gu.current),!0}function wse(e,t,n){var r=e.stateNode;if(!r)throw Error(qe(169));n?(e=Zwe(e,t,B1),r.__reactInternalMemoizedMergedChildContext=e,ei(gu),ei(ra),Ur(ra,e)):ei(gu),Ur(gu,n)}var jh=null,qL=!1,n9=!1;function eEe(e){jh===null?jh=[e]:jh.push(e)}function MGe(e){qL=!0,eEe(e)}function R0(){if(!n9&&jh!==null){n9=!0;var e=0,t=br;try{var n=jh;for(br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jh=null,qL=!1}catch(i){throw jh!==null&&(jh=jh.slice(e+1)),Twe(ZW,R0),i}finally{br=t,n9=!1}}return null}var ib=[],sb=0,gR=null,yR=0,Ml=[],Ll=0,j1=null,Zh=1,ep="";function wy(e,t){ib[sb++]=yR,ib[sb++]=gR,gR=e,yR=t}function tEe(e,t,n){Ml[Ll++]=Zh,Ml[Ll++]=ep,Ml[Ll++]=j1,j1=e;var r=Zh;e=ep;var i=32-rf(r)-1;r&=~(1<<i),n+=1;var s=32-rf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zh=1<<32-rf(t)+i|n<<i|r,ep=s+e}else Zh=1<<s|n<<i|r,ep=e}function uG(e){e.return!==null&&(wy(e,1),tEe(e,1,0))}function lG(e){for(;e===gR;)gR=ib[--sb],ib[sb]=null,yR=ib[--sb],ib[sb]=null;for(;e===j1;)j1=Ml[--Ll],Ml[Ll]=null,ep=Ml[--Ll],Ml[Ll]=null,Zh=Ml[--Ll],Ml[Ll]=null}var rl=null,Ju=null,hi=!1,zc=null;function nEe(e,t){var n=Wl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ese(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rl=e,Ju=wg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rl=e,Ju=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=j1!==null?{id:Zh,overflow:ep}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rl=e,Ju=null,!0):!1;default:return!1}}function Cz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Az(e){if(hi){var t=Ju;if(t){var n=t;if(!Ese(e,t)){if(Cz(e))throw Error(qe(418));t=wg(n.nextSibling);var r=rl;t&&Ese(e,t)?nEe(r,n):(e.flags=e.flags&-4097|2,hi=!1,rl=e)}}else{if(Cz(e))throw Error(qe(418));e.flags=e.flags&-4097|2,hi=!1,rl=e}}}function xse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rl=e}function qO(e){if(e!==rl)return!1;if(!hi)return xse(e),hi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ez(e.type,e.memoizedProps)),t&&(t=Ju)){if(Cz(e))throw rEe(),Error(qe(418));for(;t;)nEe(e,t),t=wg(t.nextSibling)}if(xse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ju=wg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ju=null}}else Ju=rl?wg(e.stateNode.nextSibling):null;return!0}function rEe(){for(var e=Ju;e;)e=wg(e.nextSibling)}function hw(){Ju=rl=null,hi=!1}function cG(e){zc===null?zc=[e]:zc.push(e)}var LGe=em.ReactCurrentBatchConfig;function Dc(e,t){if(e&&e.defaultProps){t=xi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var vR=$0(null),_R=null,ob=null,fG=null;function dG(){fG=ob=_R=null}function hG(e){var t=vR.current;ei(vR),e._currentValue=t}function Iz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kb(e,t){_R=e,fG=ob=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fu=!0),e.firstContext=null)}function tc(e){var t=e._currentValue;if(fG!==e)if(e={context:e,memoizedValue:t,next:null},ob===null){if(_R===null)throw Error(qe(308));ob=e,_R.dependencies={lanes:0,firstContext:e}}else ob=ob.next=e;return t}var Ky=null;function pG(e){Ky===null?Ky=[e]:Ky.push(e)}function iEe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,pG(t)):(n.next=i.next,i.next=n),t.interleaved=n,Op(e,r)}function Op(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Lm=!1;function mG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sEe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Eg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Op(e,n)}return i=r.interleaved,i===null?(t.next=t,pG(r)):(t.next=i.next,i.next=t),r.interleaved=t,Op(e,n)}function Vk(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eG(e,n)}}function Sse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bR(e,t,n,r){var i=e.updateQueue;Lm=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=xi({},f,d);break e;case 2:Lm=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);U1|=o,e.lanes=o,e.memoizedState=f}}function Tse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var oEe=new iwe.Component().refs;function Oz(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:xi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var WL={isMounted:function(e){return(e=e._reactInternals)?Ov(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Aa(),i=Sg(e),s=dp(r,i);s.payload=t,n!=null&&(s.callback=n),t=Eg(e,s,i),t!==null&&(sf(t,e,i,r),Vk(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Aa(),i=Sg(e),s=dp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Eg(e,s,i),t!==null&&(sf(t,e,i,r),Vk(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Aa(),r=Sg(e),i=dp(n,r);i.tag=2,t!=null&&(i.callback=t),t=Eg(e,i,r),t!==null&&(sf(t,e,r,n),Vk(t,e,r))}};function Cse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!K2(n,r)||!K2(i,s):!0}function aEe(e,t,n){var r=!1,i=Gg,s=t.contextType;return typeof s=="object"&&s!==null?s=tc(s):(i=yu(t)?B1:ra.current,r=t.contextTypes,s=(r=r!=null)?dw(e,i):Gg),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=WL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ase(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&WL.enqueueReplaceState(t,t.state,null)}function Pz(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=oEe,mG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=tc(s):(s=yu(t)?B1:ra.current,i.context=dw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Oz(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&WL.enqueueReplaceState(i,i.state,null),bR(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Yx(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===oEe&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function WO(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ise(e){var t=e._init;return t(e._payload)}function uEe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Tg(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,b){return v===null||v.tag!==6?(v=l9(_,y.mode,b),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,b){var E=_.type;return E===J_?c(y,v,_.props.children,b,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Mm&&Ise(E)===v.type)?(b=i(v,_.props),b.ref=Yx(y,v,_),b.return=y,b):(b=Kk(_.type,_.key,_.props,null,y.mode,b),b.ref=Yx(y,v,_),b.return=y,b)}function l(y,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=c9(_,y.mode,b),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,b,E){return v===null||v.tag!==7?(v=y1(_,y.mode,b,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=l9(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case DO:return _=Kk(v.type,v.key,v.props,null,y.mode,_),_.ref=Yx(y,null,v),_.return=y,_;case Q_:return v=c9(v,y.mode,_),v.return=y,v;case Mm:var b=v._init;return f(y,b(v._payload),_)}if(XS(v)||Vx(v))return v=y1(v,y.mode,_,null),v.return=y,v;WO(y,v)}return null}function d(y,v,_,b){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case DO:return _.key===E?u(y,v,_,b):null;case Q_:return _.key===E?l(y,v,_,b):null;case Mm:return E=_._init,d(y,v,E(_._payload),b)}if(XS(_)||Vx(_))return E!==null?null:c(y,v,_,b,null);WO(y,_)}return null}function h(y,v,_,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,a(v,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case DO:return y=y.get(b.key===null?_:b.key)||null,u(v,y,b,E);case Q_:return y=y.get(b.key===null?_:b.key)||null,l(v,y,b,E);case Mm:var w=b._init;return h(y,v,_,w(b._payload),E)}if(XS(b)||Vx(b))return y=y.get(_)||null,c(v,y,b,E,null);WO(v,b)}return null}function p(y,v,_,b){for(var E=null,w=null,x=v,S=v=0,P=null;x!==null&&S<_.length;S++){x.index>S?(P=x,x=null):P=x.sibling;var A=d(y,x,_[S],b);if(A===null){x===null&&(x=P);break}e&&x&&A.alternate===null&&t(y,x),v=s(A,v,S),w===null?E=A:w.sibling=A,w=A,x=P}if(S===_.length)return n(y,x),hi&&wy(y,S),E;if(x===null){for(;S<_.length;S++)x=f(y,_[S],b),x!==null&&(v=s(x,v,S),w===null?E=x:w.sibling=x,w=x);return hi&&wy(y,S),E}for(x=r(y,x);S<_.length;S++)P=h(x,y,S,_[S],b),P!==null&&(e&&P.alternate!==null&&x.delete(P.key===null?S:P.key),v=s(P,v,S),w===null?E=P:w.sibling=P,w=P);return e&&x.forEach(function(O){return t(y,O)}),hi&&wy(y,S),E}function m(y,v,_,b){var E=Vx(_);if(typeof E!="function")throw Error(qe(150));if(_=E.call(_),_==null)throw Error(qe(151));for(var w=E=null,x=v,S=v=0,P=null,A=_.next();x!==null&&!A.done;S++,A=_.next()){x.index>S?(P=x,x=null):P=x.sibling;var O=d(y,x,A.value,b);if(O===null){x===null&&(x=P);break}e&&x&&O.alternate===null&&t(y,x),v=s(O,v,S),w===null?E=O:w.sibling=O,w=O,x=P}if(A.done)return n(y,x),hi&&wy(y,S),E;if(x===null){for(;!A.done;S++,A=_.next())A=f(y,A.value,b),A!==null&&(v=s(A,v,S),w===null?E=A:w.sibling=A,w=A);return hi&&wy(y,S),E}for(x=r(y,x);!A.done;S++,A=_.next())A=h(x,y,S,A.value,b),A!==null&&(e&&A.alternate!==null&&x.delete(A.key===null?S:A.key),v=s(A,v,S),w===null?E=A:w.sibling=A,w=A);return e&&x.forEach(function(z){return t(y,z)}),hi&&wy(y,S),E}function g(y,v,_,b){if(typeof _=="object"&&_!==null&&_.type===J_&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case DO:e:{for(var E=_.key,w=v;w!==null;){if(w.key===E){if(E=_.type,E===J_){if(w.tag===7){n(y,w.sibling),v=i(w,_.props.children),v.return=y,y=v;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Mm&&Ise(E)===w.type){n(y,w.sibling),v=i(w,_.props),v.ref=Yx(y,w,_),v.return=y,y=v;break e}n(y,w);break}else t(y,w);w=w.sibling}_.type===J_?(v=y1(_.props.children,y.mode,b,_.key),v.return=y,y=v):(b=Kk(_.type,_.key,_.props,null,y.mode,b),b.ref=Yx(y,v,_),b.return=y,y=b)}return o(y);case Q_:e:{for(w=_.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=c9(_,y.mode,b),v.return=y,y=v}return o(y);case Mm:return w=_._init,g(y,v,w(_._payload),b)}if(XS(_))return p(y,v,_,b);if(Vx(_))return m(y,v,_,b);WO(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=l9(_,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var pw=uEe(!0),lEe=uEe(!1),zA={},Td=$0(zA),Z2=$0(zA),eC=$0(zA);function Xy(e){if(e===zA)throw Error(qe(174));return e}function gG(e,t){switch(Ur(eC,t),Ur(Z2,e),Ur(Td,zA),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uz(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uz(t,e)}ei(Td),Ur(Td,t)}function mw(){ei(Td),ei(Z2),ei(eC)}function cEe(e){Xy(eC.current);var t=Xy(Td.current),n=uz(t,e.type);t!==n&&(Ur(Z2,e),Ur(Td,n))}function yG(e){Z2.current===e&&(ei(Td),ei(Z2))}var wi=$0(0);function wR(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var r9=[];function vG(){for(var e=0;e<r9.length;e++)r9[e]._workInProgressVersionPrimary=null;r9.length=0}var Hk=em.ReactCurrentDispatcher,i9=em.ReactCurrentBatchConfig,z1=0,Ei=null,ps=null,Ls=null,ER=!1,qT=!1,tC=0,FGe=0;function Io(){throw Error(qe(321))}function _G(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!df(e[n],t[n]))return!1;return!0}function bG(e,t,n,r,i,s){if(z1=s,Ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hk.current=e===null||e.memoizedState===null?UGe:VGe,e=n(r,i),qT){s=0;do{if(qT=!1,tC=0,25<=s)throw Error(qe(301));s+=1,Ls=ps=null,t.updateQueue=null,Hk.current=HGe,e=n(r,i)}while(qT)}if(Hk.current=xR,t=ps!==null&&ps.next!==null,z1=0,Ls=ps=Ei=null,ER=!1,t)throw Error(qe(300));return e}function wG(){var e=tC!==0;return tC=0,e}function qf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?Ei.memoizedState=Ls=e:Ls=Ls.next=e,Ls}function nc(){if(ps===null){var e=Ei.alternate;e=e!==null?e.memoizedState:null}else e=ps.next;var t=Ls===null?Ei.memoizedState:Ls.next;if(t!==null)Ls=t,ps=e;else{if(e===null)throw Error(qe(310));ps=e,e={memoizedState:ps.memoizedState,baseState:ps.baseState,baseQueue:ps.baseQueue,queue:ps.queue,next:null},Ls===null?Ei.memoizedState=Ls=e:Ls=Ls.next=e}return Ls}function nC(e,t){return typeof t=="function"?t(e):t}function s9(e){var t=nc(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=ps,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((z1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ei.lanes|=c,U1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,df(r,t.memoizedState)||(fu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ei.lanes|=s,U1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function o9(e){var t=nc(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);df(s,t.memoizedState)||(fu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function fEe(){}function dEe(e,t){var n=Ei,r=nc(),i=t(),s=!df(r.memoizedState,i);if(s&&(r.memoizedState=i,fu=!0),r=r.queue,EG(mEe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ls!==null&&Ls.memoizedState.tag&1){if(n.flags|=2048,rC(9,pEe.bind(null,n,r,i,t),void 0,null),Gs===null)throw Error(qe(349));z1&30||hEe(n,t,i)}return i}function hEe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ei.updateQueue,t===null?(t={lastEffect:null,stores:null},Ei.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pEe(e,t,n,r){t.value=n,t.getSnapshot=r,gEe(t)&&yEe(e)}function mEe(e,t,n){return n(function(){gEe(t)&&yEe(e)})}function gEe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!df(e,n)}catch{return!0}}function yEe(e){var t=Op(e,1);t!==null&&sf(t,e,1,-1)}function Ose(e){var t=qf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nC,lastRenderedState:e},t.queue=e,e=e.dispatch=zGe.bind(null,Ei,e),[t.memoizedState,e]}function rC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ei.updateQueue,t===null?(t={lastEffect:null,stores:null},Ei.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vEe(){return nc().memoizedState}function qk(e,t,n,r){var i=qf();Ei.flags|=e,i.memoizedState=rC(1|t,n,void 0,r===void 0?null:r)}function GL(e,t,n,r){var i=nc();r=r===void 0?null:r;var s=void 0;if(ps!==null){var o=ps.memoizedState;if(s=o.destroy,r!==null&&_G(r,o.deps)){i.memoizedState=rC(t,n,s,r);return}}Ei.flags|=e,i.memoizedState=rC(1|t,n,s,r)}function Pse(e,t){return qk(8390656,8,e,t)}function EG(e,t){return GL(2048,8,e,t)}function _Ee(e,t){return GL(4,2,e,t)}function bEe(e,t){return GL(4,4,e,t)}function wEe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function EEe(e,t,n){return n=n!=null?n.concat([e]):null,GL(4,4,wEe.bind(null,t,e),n)}function xG(){}function xEe(e,t){var n=nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_G(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function SEe(e,t){var n=nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_G(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function TEe(e,t,n){return z1&21?(df(n,t)||(n=Iwe(),Ei.lanes|=n,U1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fu=!0),e.memoizedState=n)}function BGe(e,t){var n=br;br=n!==0&&4>n?n:4,e(!0);var r=i9.transition;i9.transition={};try{e(!1),t()}finally{br=n,i9.transition=r}}function CEe(){return nc().memoizedState}function jGe(e,t,n){var r=Sg(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AEe(e))IEe(t,n);else if(n=iEe(e,t,n,r),n!==null){var i=Aa();sf(n,e,r,i),OEe(n,t,r)}}function zGe(e,t,n){var r=Sg(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AEe(e))IEe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,df(a,o)){var u=t.interleaved;u===null?(i.next=i,pG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=iEe(e,t,i,r),n!==null&&(i=Aa(),sf(n,e,r,i),OEe(n,t,r))}}function AEe(e){var t=e.alternate;return e===Ei||t!==null&&t===Ei}function IEe(e,t){qT=ER=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OEe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eG(e,n)}}var xR={readContext:tc,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useInsertionEffect:Io,useLayoutEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useMutableSource:Io,useSyncExternalStore:Io,useId:Io,unstable_isNewReconciler:!1},UGe={readContext:tc,useCallback:function(e,t){return qf().memoizedState=[e,t===void 0?null:t],e},useContext:tc,useEffect:Pse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qk(4194308,4,wEe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qk(4194308,4,e,t)},useInsertionEffect:function(e,t){return qk(4,2,e,t)},useMemo:function(e,t){var n=qf();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qf();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=jGe.bind(null,Ei,e),[r.memoizedState,e]},useRef:function(e){var t=qf();return e={current:e},t.memoizedState=e},useState:Ose,useDebugValue:xG,useDeferredValue:function(e){return qf().memoizedState=e},useTransition:function(){var e=Ose(!1),t=e[0];return e=BGe.bind(null,e[1]),qf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ei,i=qf();if(hi){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),Gs===null)throw Error(qe(349));z1&30||hEe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Pse(mEe.bind(null,r,s,e),[e]),r.flags|=2048,rC(9,pEe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=qf(),t=Gs.identifierPrefix;if(hi){var n=ep,r=Zh;n=(r&~(1<<32-rf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=FGe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VGe={readContext:tc,useCallback:xEe,useContext:tc,useEffect:EG,useImperativeHandle:EEe,useInsertionEffect:_Ee,useLayoutEffect:bEe,useMemo:SEe,useReducer:s9,useRef:vEe,useState:function(){return s9(nC)},useDebugValue:xG,useDeferredValue:function(e){var t=nc();return TEe(t,ps.memoizedState,e)},useTransition:function(){var e=s9(nC)[0],t=nc().memoizedState;return[e,t]},useMutableSource:fEe,useSyncExternalStore:dEe,useId:CEe,unstable_isNewReconciler:!1},HGe={readContext:tc,useCallback:xEe,useContext:tc,useEffect:EG,useImperativeHandle:EEe,useInsertionEffect:_Ee,useLayoutEffect:bEe,useMemo:SEe,useReducer:o9,useRef:vEe,useState:function(){return o9(nC)},useDebugValue:xG,useDeferredValue:function(e){var t=nc();return ps===null?t.memoizedState=e:TEe(t,ps.memoizedState,e)},useTransition:function(){var e=o9(nC)[0],t=nc().memoizedState;return[e,t]},useMutableSource:fEe,useSyncExternalStore:dEe,useId:CEe,unstable_isNewReconciler:!1};function gw(e,t){try{var n="",r=t;do n+=vWe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function a9(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var qGe=typeof WeakMap=="function"?WeakMap:Map;function PEe(e,t,n){n=dp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){TR||(TR=!0,zz=r),kz(e,t)},n}function kEe(e,t,n){n=dp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){kz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kz(e,t),typeof r!="function"&&(xg===null?xg=new Set([this]):xg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function kse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new qGe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=sYe.bind(null,e,t,n),t.then(e,e))}function $se(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dp(-1,1),t.tag=2,Eg(n,t,1))),n.lanes|=1),e)}var WGe=em.ReactCurrentOwner,fu=!1;function va(e,t,n,r){t.child=e===null?lEe(t,null,n,r):pw(t,e.child,n,r)}function Nse(e,t,n,r,i){n=n.render;var s=t.ref;return kb(t,i),r=bG(e,t,n,r,s,i),n=wG(),e!==null&&!fu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pp(e,t,i)):(hi&&n&&uG(t),t.flags|=1,va(e,t,r,i),t.child)}function Dse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!kG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,$Ee(e,t,s,r,i)):(e=Kk(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:K2,n(o,r)&&e.ref===t.ref)return Pp(e,t,i)}return t.flags|=1,e=Tg(s,r),e.ref=t.ref,e.return=t,t.child=e}function $Ee(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(K2(s,r)&&e.ref===t.ref)if(fu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(fu=!0);else return t.lanes=e.lanes,Pp(e,t,i)}return $z(e,t,n,r,i)}function REe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(ub,Hu),Hu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ur(ub,Hu),Hu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ur(ub,Hu),Hu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ur(ub,Hu),Hu|=r;return va(e,t,i,n),t.child}function NEe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $z(e,t,n,r,i){var s=yu(n)?B1:ra.current;return s=dw(t,s),kb(t,i),n=bG(e,t,n,r,s,i),r=wG(),e!==null&&!fu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pp(e,t,i)):(hi&&r&&uG(t),t.flags|=1,va(e,t,n,i),t.child)}function Mse(e,t,n,r,i){if(yu(n)){var s=!0;mR(t)}else s=!1;if(kb(t,i),t.stateNode===null)Wk(e,t),aEe(t,n,r),Pz(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=tc(l):(l=yu(n)?B1:ra.current,l=dw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Ase(t,o,r,l),Lm=!1;var d=t.memoizedState;o.state=d,bR(t,r,o,i),u=t.memoizedState,a!==r||d!==u||gu.current||Lm?(typeof c=="function"&&(Oz(t,n,c,r),u=t.memoizedState),(a=Lm||Cse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,sEe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Dc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=tc(u):(u=yu(n)?B1:ra.current,u=dw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Ase(t,o,r,u),Lm=!1,d=t.memoizedState,o.state=d,bR(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||gu.current||Lm?(typeof h=="function"&&(Oz(t,n,h,r),p=t.memoizedState),(l=Lm||Cse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Rz(e,t,n,r,s,i)}function Rz(e,t,n,r,i,s){NEe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&wse(t,n,!1),Pp(e,t,s);r=t.stateNode,WGe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=pw(t,e.child,null,s),t.child=pw(t,null,a,s)):va(e,t,a,s),t.memoizedState=r.state,i&&wse(t,n,!0),t.child}function DEe(e){var t=e.stateNode;t.pendingContext?bse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bse(e,t.context,!1),gG(e,t.containerInfo)}function Lse(e,t,n,r,i){return hw(),cG(i),t.flags|=256,va(e,t,n,r),t.child}var Nz={dehydrated:null,treeContext:null,retryLane:0};function Dz(e){return{baseLanes:e,cachePool:null,transitions:null}}function MEe(e,t,n){var r=t.pendingProps,i=wi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ur(wi,i&1),e===null)return Az(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=XL(o,r,0,null),e=y1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Dz(n),t.memoizedState=Nz,e):SG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return GGe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Tg(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Tg(a,s):(s=y1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Dz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Nz,r}return s=e.child,e=s.sibling,r=Tg(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function SG(e,t){return t=XL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function GO(e,t,n,r){return r!==null&&cG(r),pw(t,e.child,null,n),e=SG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GGe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=a9(Error(qe(422))),GO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=XL({mode:"visible",children:r.children},i,0,null),s=y1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&pw(t,e.child,null,o),t.child.memoizedState=Dz(o),t.memoizedState=Nz,s);if(!(t.mode&1))return GO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=a9(s,r,void 0),GO(e,t,o,r)}if(a=(o&e.childLanes)!==0,fu||a){if(r=Gs,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Op(e,i),sf(r,e,i,-1))}return PG(),r=a9(Error(qe(421))),GO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=oYe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ju=wg(i.nextSibling),rl=t,hi=!0,zc=null,e!==null&&(Ml[Ll++]=Zh,Ml[Ll++]=ep,Ml[Ll++]=j1,Zh=e.id,ep=e.overflow,j1=t),t=SG(t,r.children),t.flags|=4096,t)}function Fse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Iz(e.return,t,n)}function u9(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function LEe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(va(e,t,r.children,n),r=wi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fse(e,n,t);else if(e.tag===19)Fse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ur(wi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&wR(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),u9(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&wR(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}u9(t,!0,n,null,s);break;case"together":u9(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pp(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),U1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=Tg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function YGe(e,t,n){switch(t.tag){case 3:DEe(t),hw();break;case 5:cEe(t);break;case 1:yu(t.type)&&mR(t);break;case 4:gG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ur(vR,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ur(wi,wi.current&1),t.flags|=128,null):n&t.child.childLanes?MEe(e,t,n):(Ur(wi,wi.current&1),e=Pp(e,t,n),e!==null?e.sibling:null);Ur(wi,wi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return LEe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ur(wi,wi.current),r)break;return null;case 22:case 23:return t.lanes=0,REe(e,t,n)}return Pp(e,t,n)}var FEe,Mz,BEe,jEe;FEe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mz=function(){};BEe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xy(Td.current);var s=null;switch(n){case"input":i=iz(e,i),r=iz(e,r),s=[];break;case"select":i=xi({},i,{value:void 0}),r=xi({},r,{value:void 0}),s=[];break;case"textarea":i=az(e,i),r=az(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hR)}lz(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(U2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(U2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Wr("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};jEe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Kx(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function KGe(e,t,n){var r=t.pendingProps;switch(lG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oo(t),null;case 1:return yu(t.type)&&pR(),Oo(t),null;case 3:return r=t.stateNode,mw(),ei(gu),ei(ra),vG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zc!==null&&(Hz(zc),zc=null))),Mz(e,t),Oo(t),null;case 5:yG(t);var i=Xy(eC.current);if(n=t.type,e!==null&&t.stateNode!=null)BEe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qe(166));return Oo(t),null}if(e=Xy(Td.current),qO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[rd]=t,r[J2]=s,e=(t.mode&1)!==0,n){case"dialog":Wr("cancel",r),Wr("close",r);break;case"iframe":case"object":case"embed":Wr("load",r);break;case"video":case"audio":for(i=0;i<JS.length;i++)Wr(JS[i],r);break;case"source":Wr("error",r);break;case"img":case"image":case"link":Wr("error",r),Wr("load",r);break;case"details":Wr("toggle",r);break;case"input":Gie(r,s),Wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wr("invalid",r);break;case"textarea":Kie(r,s),Wr("invalid",r)}lz(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&HO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&HO(r.textContent,a,e),i=["children",""+a]):U2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wr("scroll",r)}switch(n){case"input":MO(r),Yie(r,s,!0);break;case"textarea":MO(r),Xie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hR)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hwe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[rd]=t,e[J2]=r,FEe(e,t,!1,!1),t.stateNode=e;e:{switch(o=cz(n,r),n){case"dialog":Wr("cancel",e),Wr("close",e),i=r;break;case"iframe":case"object":case"embed":Wr("load",e),i=r;break;case"video":case"audio":for(i=0;i<JS.length;i++)Wr(JS[i],e);i=r;break;case"source":Wr("error",e),i=r;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),i=r;break;case"details":Wr("toggle",e),i=r;break;case"input":Gie(e,r),i=iz(e,r),Wr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=xi({},r,{value:void 0}),Wr("invalid",e);break;case"textarea":Kie(e,r),i=az(e,r),Wr("invalid",e);break;default:i=r}lz(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?gwe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pwe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&V2(e,u):typeof u=="number"&&V2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(U2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Wr("scroll",e):u!=null&&YW(e,s,u,o))}switch(n){case"input":MO(e),Yie(e,r,!1);break;case"textarea":MO(e),Xie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Wg(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ab(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ab(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=hR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oo(t),null;case 6:if(e&&t.stateNode!=null)jEe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qe(166));if(n=Xy(eC.current),Xy(Td.current),qO(t)){if(r=t.stateNode,n=t.memoizedProps,r[rd]=t,(s=r.nodeValue!==n)&&(e=rl,e!==null))switch(e.tag){case 3:HO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&HO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rd]=t,t.stateNode=r}return Oo(t),null;case 13:if(ei(wi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(hi&&Ju!==null&&t.mode&1&&!(t.flags&128))rEe(),hw(),t.flags|=98560,s=!1;else if(s=qO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(qe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[rd]=t}else hw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oo(t),s=!1}else zc!==null&&(Hz(zc),zc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||wi.current&1?_s===0&&(_s=3):PG())),t.updateQueue!==null&&(t.flags|=4),Oo(t),null);case 4:return mw(),Mz(e,t),e===null&&X2(t.stateNode.containerInfo),Oo(t),null;case 10:return hG(t.type._context),Oo(t),null;case 17:return yu(t.type)&&pR(),Oo(t),null;case 19:if(ei(wi),s=t.memoizedState,s===null)return Oo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Kx(s,!1);else{if(_s!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=wR(e),o!==null){for(t.flags|=128,Kx(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ur(wi,wi.current&1|2),t.child}e=e.sibling}s.tail!==null&&Wi()>yw&&(t.flags|=128,r=!0,Kx(s,!1),t.lanes=4194304)}else{if(!r)if(e=wR(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Kx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hi)return Oo(t),null}else 2*Wi()-s.renderingStartTime>yw&&n!==1073741824&&(t.flags|=128,r=!0,Kx(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Wi(),t.sibling=null,n=wi.current,Ur(wi,r?n&1|2:n&1),t):(Oo(t),null);case 22:case 23:return OG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Hu&1073741824&&(Oo(t),t.subtreeFlags&6&&(t.flags|=8192)):Oo(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function XGe(e,t){switch(lG(t),t.tag){case 1:return yu(t.type)&&pR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mw(),ei(gu),ei(ra),vG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yG(t),null;case 13:if(ei(wi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));hw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ei(wi),null;case 4:return mw(),null;case 10:return hG(t.type._context),null;case 22:case 23:return OG(),null;case 24:return null;default:return null}}var YO=!1,Vo=!1,QGe=typeof WeakSet=="function"?WeakSet:Set,mt=null;function ab(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ki(e,t,r)}else n.current=null}function Lz(e,t,n){try{n()}catch(r){ki(e,t,r)}}var Bse=!1;function JGe(e,t){if(bz=cR,e=Hwe(),aG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wz={focusedElem:e,selectionRange:n},cR=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Dc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(b){ki(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return p=Bse,Bse=!1,p}function WT(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lz(t,n,s)}i=i.next}while(i!==r)}}function YL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zEe(e){var t=e.alternate;t!==null&&(e.alternate=null,zEe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rd],delete t[J2],delete t[Sz],delete t[NGe],delete t[DGe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UEe(e){return e.tag===5||e.tag===3||e.tag===4}function jse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UEe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hR));else if(r!==4&&(e=e.child,e!==null))for(Bz(e,t,n),e=e.sibling;e!==null;)Bz(e,t,n),e=e.sibling}function jz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(jz(e,t,n),e=e.sibling;e!==null;)jz(e,t,n),e=e.sibling}var oo=null,Lc=!1;function wm(e,t,n){for(n=n.child;n!==null;)VEe(e,t,n),n=n.sibling}function VEe(e,t,n){if(Sd&&typeof Sd.onCommitFiberUnmount=="function")try{Sd.onCommitFiberUnmount(jL,n)}catch{}switch(n.tag){case 5:Vo||ab(n,t);case 6:var r=oo,i=Lc;oo=null,wm(e,t,n),oo=r,Lc=i,oo!==null&&(Lc?(e=oo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):oo.removeChild(n.stateNode));break;case 18:oo!==null&&(Lc?(e=oo,n=n.stateNode,e.nodeType===8?t9(e.parentNode,n):e.nodeType===1&&t9(e,n),G2(e)):t9(oo,n.stateNode));break;case 4:r=oo,i=Lc,oo=n.stateNode.containerInfo,Lc=!0,wm(e,t,n),oo=r,Lc=i;break;case 0:case 11:case 14:case 15:if(!Vo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lz(n,t,o),i=i.next}while(i!==r)}wm(e,t,n);break;case 1:if(!Vo&&(ab(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ki(n,t,a)}wm(e,t,n);break;case 21:wm(e,t,n);break;case 22:n.mode&1?(Vo=(r=Vo)||n.memoizedState!==null,wm(e,t,n),Vo=r):wm(e,t,n);break;default:wm(e,t,n)}}function zse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new QGe),t.forEach(function(r){var i=aYe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:oo=a.stateNode,Lc=!1;break e;case 3:oo=a.stateNode.containerInfo,Lc=!0;break e;case 4:oo=a.stateNode.containerInfo,Lc=!0;break e}a=a.return}if(oo===null)throw Error(qe(160));VEe(s,o,i),oo=null,Lc=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){ki(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HEe(t,e),t=t.sibling}function HEe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tc(t,e),Mf(e),r&4){try{WT(3,e,e.return),YL(3,e)}catch(m){ki(e,e.return,m)}try{WT(5,e,e.return)}catch(m){ki(e,e.return,m)}}break;case 1:Tc(t,e),Mf(e),r&512&&n!==null&&ab(n,n.return);break;case 5:if(Tc(t,e),Mf(e),r&512&&n!==null&&ab(n,n.return),e.flags&32){var i=e.stateNode;try{V2(i,"")}catch(m){ki(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fwe(i,s),cz(a,o);var l=cz(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?gwe(i,f):c==="dangerouslySetInnerHTML"?pwe(i,f):c==="children"?V2(i,f):YW(i,c,f,l)}switch(a){case"input":sz(i,s);break;case"textarea":dwe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ab(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ab(i,!!s.multiple,s.defaultValue,!0):Ab(i,!!s.multiple,s.multiple?[]:"",!1))}i[J2]=s}catch(m){ki(e,e.return,m)}}break;case 6:if(Tc(t,e),Mf(e),r&4){if(e.stateNode===null)throw Error(qe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ki(e,e.return,m)}}break;case 3:if(Tc(t,e),Mf(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{G2(t.containerInfo)}catch(m){ki(e,e.return,m)}break;case 4:Tc(t,e),Mf(e);break;case 13:Tc(t,e),Mf(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(AG=Wi())),r&4&&zse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Vo=(l=Vo)||c,Tc(t,e),Vo=l):Tc(t,e),Mf(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(mt=e,c=e.child;c!==null;){for(f=mt=c;mt!==null;){switch(d=mt,h=d.child,d.tag){case 0:case 11:case 14:case 15:WT(4,d,d.return);break;case 1:ab(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ki(r,n,m)}}break;case 5:ab(d,d.return);break;case 22:if(d.memoizedState!==null){Vse(f);continue}}h!==null?(h.return=d,mt=h):Vse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=mwe("display",o))}catch(m){ki(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){ki(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tc(t,e),Mf(e),r&4&&zse(e);break;case 21:break;default:Tc(t,e),Mf(e)}}function Mf(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(UEe(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(V2(i,""),r.flags&=-33);var s=jse(e);jz(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=jse(e);Bz(e,a,o);break;default:throw Error(qe(161))}}catch(u){ki(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZGe(e,t,n){mt=e,qEe(e)}function qEe(e,t,n){for(var r=(e.mode&1)!==0;mt!==null;){var i=mt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||YO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Vo;a=YO;var l=Vo;if(YO=o,(Vo=u)&&!l)for(mt=i;mt!==null;)o=mt,u=o.child,o.tag===22&&o.memoizedState!==null?Hse(i):u!==null?(u.return=o,mt=u):Hse(i);for(;s!==null;)mt=s,qEe(s),s=s.sibling;mt=i,YO=a,Vo=l}Use(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mt=s):Use(e)}}function Use(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vo||YL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Vo)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Dc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Tse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&G2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Vo||t.flags&512&&Fz(t)}catch(d){ki(t,t.return,d)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function Vse(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function Hse(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{YL(4,t)}catch(u){ki(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){ki(t,i,u)}}var s=t.return;try{Fz(t)}catch(u){ki(t,s,u)}break;case 5:var o=t.return;try{Fz(t)}catch(u){ki(t,o,u)}}}catch(u){ki(t,t.return,u)}if(t===e){mt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,mt=a;break}mt=t.return}}var eYe=Math.ceil,SR=em.ReactCurrentDispatcher,TG=em.ReactCurrentOwner,Ql=em.ReactCurrentBatchConfig,Qn=0,Gs=null,is=null,vo=0,Hu=0,ub=$0(0),_s=0,iC=null,U1=0,KL=0,CG=0,GT=null,ru=null,AG=0,yw=1/0,Dh=null,TR=!1,zz=null,xg=null,KO=!1,rg=null,CR=0,YT=0,Uz=null,Gk=-1,Yk=0;function Aa(){return Qn&6?Wi():Gk!==-1?Gk:Gk=Wi()}function Sg(e){return e.mode&1?Qn&2&&vo!==0?vo&-vo:LGe.transition!==null?(Yk===0&&(Yk=Iwe()),Yk):(e=br,e!==0||(e=window.event,e=e===void 0?16:Dwe(e.type)),e):1}function sf(e,t,n,r){if(50<YT)throw YT=0,Uz=null,Error(qe(185));FA(e,n,r),(!(Qn&2)||e!==Gs)&&(e===Gs&&(!(Qn&2)&&(KL|=n),_s===4&&Gm(e,vo)),vu(e,r),n===1&&Qn===0&&!(t.mode&1)&&(yw=Wi()+500,qL&&R0()))}function vu(e,t){var n=e.callbackNode;LWe(e,t);var r=lR(e,e===Gs?vo:0);if(r===0)n!==null&&Zie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zie(n),t===1)e.tag===0?MGe(qse.bind(null,e)):eEe(qse.bind(null,e)),$Ge(function(){!(Qn&6)&&R0()}),n=null;else{switch(Owe(r)){case 1:n=ZW;break;case 4:n=Cwe;break;case 16:n=uR;break;case 536870912:n=Awe;break;default:n=uR}n=ZEe(n,WEe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function WEe(e,t){if(Gk=-1,Yk=0,Qn&6)throw Error(qe(327));var n=e.callbackNode;if($b()&&e.callbackNode!==n)return null;var r=lR(e,e===Gs?vo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=AR(e,r);else{t=r;var i=Qn;Qn|=2;var s=YEe();(Gs!==e||vo!==t)&&(Dh=null,yw=Wi()+500,g1(e,t));do try{rYe();break}catch(a){GEe(e,a)}while(!0);dG(),SR.current=s,Qn=i,is!==null?t=0:(Gs=null,vo=0,t=_s)}if(t!==0){if(t===2&&(i=mz(e),i!==0&&(r=i,t=Vz(e,i))),t===1)throw n=iC,g1(e,0),Gm(e,r),vu(e,Wi()),n;if(t===6)Gm(e,r);else{if(i=e.current.alternate,!(r&30)&&!tYe(i)&&(t=AR(e,r),t===2&&(s=mz(e),s!==0&&(r=s,t=Vz(e,s))),t===1))throw n=iC,g1(e,0),Gm(e,r),vu(e,Wi()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(qe(345));case 2:Ey(e,ru,Dh);break;case 3:if(Gm(e,r),(r&130023424)===r&&(t=AG+500-Wi(),10<t)){if(lR(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Aa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=xz(Ey.bind(null,e,ru,Dh),t);break}Ey(e,ru,Dh);break;case 4:if(Gm(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-rf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Wi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eYe(r/1960))-r,10<r){e.timeoutHandle=xz(Ey.bind(null,e,ru,Dh),r);break}Ey(e,ru,Dh);break;case 5:Ey(e,ru,Dh);break;default:throw Error(qe(329))}}}return vu(e,Wi()),e.callbackNode===n?WEe.bind(null,e):null}function Vz(e,t){var n=GT;return e.current.memoizedState.isDehydrated&&(g1(e,t).flags|=256),e=AR(e,t),e!==2&&(t=ru,ru=n,t!==null&&Hz(t)),e}function Hz(e){ru===null?ru=e:ru.push.apply(ru,e)}function tYe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!df(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gm(e,t){for(t&=~CG,t&=~KL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rf(t),r=1<<n;e[n]=-1,t&=~r}}function qse(e){if(Qn&6)throw Error(qe(327));$b();var t=lR(e,0);if(!(t&1))return vu(e,Wi()),null;var n=AR(e,t);if(e.tag!==0&&n===2){var r=mz(e);r!==0&&(t=r,n=Vz(e,r))}if(n===1)throw n=iC,g1(e,0),Gm(e,t),vu(e,Wi()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ey(e,ru,Dh),vu(e,Wi()),null}function IG(e,t){var n=Qn;Qn|=1;try{return e(t)}finally{Qn=n,Qn===0&&(yw=Wi()+500,qL&&R0())}}function V1(e){rg!==null&&rg.tag===0&&!(Qn&6)&&$b();var t=Qn;Qn|=1;var n=Ql.transition,r=br;try{if(Ql.transition=null,br=1,e)return e()}finally{br=r,Ql.transition=n,Qn=t,!(Qn&6)&&R0()}}function OG(){Hu=ub.current,ei(ub)}function g1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,kGe(n)),is!==null)for(n=is.return;n!==null;){var r=n;switch(lG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pR();break;case 3:mw(),ei(gu),ei(ra),vG();break;case 5:yG(r);break;case 4:mw();break;case 13:ei(wi);break;case 19:ei(wi);break;case 10:hG(r.type._context);break;case 22:case 23:OG()}n=n.return}if(Gs=e,is=e=Tg(e.current,null),vo=Hu=t,_s=0,iC=null,CG=KL=U1=0,ru=GT=null,Ky!==null){for(t=0;t<Ky.length;t++)if(n=Ky[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ky=null}return e}function GEe(e,t){do{var n=is;try{if(dG(),Hk.current=xR,ER){for(var r=Ei.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ER=!1}if(z1=0,Ls=ps=Ei=null,qT=!1,tC=0,TG.current=null,n===null||n.return===null){_s=1,iC=t,is=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=vo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=$se(o);if(h!==null){h.flags&=-257,Rse(h,o,a,s,t),h.mode&1&&kse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){kse(s,l,t),PG();break e}u=Error(qe(426))}}else if(hi&&a.mode&1){var g=$se(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Rse(g,o,a,s,t),cG(gw(u,a));break e}}s=u=gw(u,a),_s!==4&&(_s=2),GT===null?GT=[s]:GT.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=PEe(s,u,t);Sse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(xg===null||!xg.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=kEe(s,a,t);Sse(s,b);break e}}s=s.return}while(s!==null)}XEe(n)}catch(E){t=E,is===n&&n!==null&&(is=n=n.return);continue}break}while(!0)}function YEe(){var e=SR.current;return SR.current=xR,e===null?xR:e}function PG(){(_s===0||_s===3||_s===2)&&(_s=4),Gs===null||!(U1&268435455)&&!(KL&268435455)||Gm(Gs,vo)}function AR(e,t){var n=Qn;Qn|=2;var r=YEe();(Gs!==e||vo!==t)&&(Dh=null,g1(e,t));do try{nYe();break}catch(i){GEe(e,i)}while(!0);if(dG(),Qn=n,SR.current=r,is!==null)throw Error(qe(261));return Gs=null,vo=0,_s}function nYe(){for(;is!==null;)KEe(is)}function rYe(){for(;is!==null&&!IWe();)KEe(is)}function KEe(e){var t=JEe(e.alternate,e,Hu);e.memoizedProps=e.pendingProps,t===null?XEe(e):is=t,TG.current=null}function XEe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=XGe(n,t),n!==null){n.flags&=32767,is=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_s=6,is=null;return}}else if(n=KGe(n,t,Hu),n!==null){is=n;return}if(t=t.sibling,t!==null){is=t;return}is=t=e}while(t!==null);_s===0&&(_s=5)}function Ey(e,t,n){var r=br,i=Ql.transition;try{Ql.transition=null,br=1,iYe(e,t,n,r)}finally{Ql.transition=i,br=r}return null}function iYe(e,t,n,r){do $b();while(rg!==null);if(Qn&6)throw Error(qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(FWe(e,s),e===Gs&&(is=Gs=null,vo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||KO||(KO=!0,ZEe(uR,function(){return $b(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ql.transition,Ql.transition=null;var o=br;br=1;var a=Qn;Qn|=4,TG.current=null,JGe(e,n),HEe(n,e),SGe(wz),cR=!!bz,wz=bz=null,e.current=n,ZGe(n),OWe(),Qn=a,br=o,Ql.transition=s}else e.current=n;if(KO&&(KO=!1,rg=e,CR=i),s=e.pendingLanes,s===0&&(xg=null),$We(n.stateNode),vu(e,Wi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(TR)throw TR=!1,e=zz,zz=null,e;return CR&1&&e.tag!==0&&$b(),s=e.pendingLanes,s&1?e===Uz?YT++:(YT=0,Uz=e):YT=0,R0(),null}function $b(){if(rg!==null){var e=Owe(CR),t=Ql.transition,n=br;try{if(Ql.transition=null,br=16>e?16:e,rg===null)var r=!1;else{if(e=rg,rg=null,CR=0,Qn&6)throw Error(qe(331));var i=Qn;for(Qn|=4,mt=e.current;mt!==null;){var s=mt,o=s.child;if(mt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(mt=l;mt!==null;){var c=mt;switch(c.tag){case 0:case 11:case 15:WT(8,c,s)}var f=c.child;if(f!==null)f.return=c,mt=f;else for(;mt!==null;){c=mt;var d=c.sibling,h=c.return;if(zEe(c),c===l){mt=null;break}if(d!==null){d.return=h,mt=d;break}mt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}mt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,mt=o;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:WT(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,mt=y;break e}mt=s.return}}var v=e.current;for(mt=v;mt!==null;){o=mt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,mt=_;else e:for(o=v;mt!==null;){if(a=mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:YL(9,a)}}catch(E){ki(a,a.return,E)}if(a===o){mt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,mt=b;break e}mt=a.return}}if(Qn=i,R0(),Sd&&typeof Sd.onPostCommitFiberRoot=="function")try{Sd.onPostCommitFiberRoot(jL,e)}catch{}r=!0}return r}finally{br=n,Ql.transition=t}}return!1}function Wse(e,t,n){t=gw(n,t),t=PEe(e,t,1),e=Eg(e,t,1),t=Aa(),e!==null&&(FA(e,1,t),vu(e,t))}function ki(e,t,n){if(e.tag===3)Wse(e,e,n);else for(;t!==null;){if(t.tag===3){Wse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xg===null||!xg.has(r))){e=gw(n,e),e=kEe(t,e,1),t=Eg(t,e,1),e=Aa(),t!==null&&(FA(t,1,e),vu(t,e));break}}t=t.return}}function sYe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Aa(),e.pingedLanes|=e.suspendedLanes&n,Gs===e&&(vo&n)===n&&(_s===4||_s===3&&(vo&130023424)===vo&&500>Wi()-AG?g1(e,0):CG|=n),vu(e,t)}function QEe(e,t){t===0&&(e.mode&1?(t=BO,BO<<=1,!(BO&130023424)&&(BO=4194304)):t=1);var n=Aa();e=Op(e,t),e!==null&&(FA(e,t,n),vu(e,n))}function oYe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),QEe(e,n)}function aYe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(t),QEe(e,n)}var JEe;JEe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gu.current)fu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return fu=!1,YGe(e,t,n);fu=!!(e.flags&131072)}else fu=!1,hi&&t.flags&1048576&&tEe(t,yR,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wk(e,t),e=t.pendingProps;var i=dw(t,ra.current);kb(t,n),i=bG(null,t,r,e,i,n);var s=wG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yu(r)?(s=!0,mR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mG(t),i.updater=WL,t.stateNode=i,i._reactInternals=t,Pz(t,r,e,n),t=Rz(null,t,r,!0,s,n)):(t.tag=0,hi&&s&&uG(t),va(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=lYe(r),e=Dc(r,e),i){case 0:t=$z(null,t,r,e,n);break e;case 1:t=Mse(null,t,r,e,n);break e;case 11:t=Nse(null,t,r,e,n);break e;case 14:t=Dse(null,t,r,Dc(r.type,e),n);break e}throw Error(qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dc(r,i),$z(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dc(r,i),Mse(e,t,r,i,n);case 3:e:{if(DEe(t),e===null)throw Error(qe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,sEe(e,t),bR(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=gw(Error(qe(423)),t),t=Lse(e,t,r,n,i);break e}else if(r!==i){i=gw(Error(qe(424)),t),t=Lse(e,t,r,n,i);break e}else for(Ju=wg(t.stateNode.containerInfo.firstChild),rl=t,hi=!0,zc=null,n=lEe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hw(),r===i){t=Pp(e,t,n);break e}va(e,t,r,n)}t=t.child}return t;case 5:return cEe(t),e===null&&Az(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Ez(r,i)?o=null:s!==null&&Ez(r,s)&&(t.flags|=32),NEe(e,t),va(e,t,o,n),t.child;case 6:return e===null&&Az(t),null;case 13:return MEe(e,t,n);case 4:return gG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pw(t,null,r,n):va(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dc(r,i),Nse(e,t,r,i,n);case 7:return va(e,t,t.pendingProps,n),t.child;case 8:return va(e,t,t.pendingProps.children,n),t.child;case 12:return va(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ur(vR,r._currentValue),r._currentValue=o,s!==null)if(df(s.value,o)){if(s.children===i.children&&!gu.current){t=Pp(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=dp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Iz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Iz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}va(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,kb(t,n),i=tc(i),r=r(i),t.flags|=1,va(e,t,r,n),t.child;case 14:return r=t.type,i=Dc(r,t.pendingProps),i=Dc(r.type,i),Dse(e,t,r,i,n);case 15:return $Ee(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dc(r,i),Wk(e,t),t.tag=1,yu(r)?(e=!0,mR(t)):e=!1,kb(t,n),aEe(t,r,i),Pz(t,r,i,n),Rz(null,t,r,!0,e,n);case 19:return LEe(e,t,n);case 22:return REe(e,t,n)}throw Error(qe(156,t.tag))};function ZEe(e,t){return Twe(e,t)}function uYe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(e,t,n,r){return new uYe(e,t,n,r)}function kG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lYe(e){if(typeof e=="function")return kG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===XW)return 11;if(e===QW)return 14}return 2}function Tg(e,t){var n=e.alternate;return n===null?(n=Wl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kk(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")kG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case J_:return y1(n.children,i,s,t);case KW:o=8,i|=8;break;case ez:return e=Wl(12,n,t,i|2),e.elementType=ez,e.lanes=s,e;case tz:return e=Wl(13,n,t,i),e.elementType=tz,e.lanes=s,e;case nz:return e=Wl(19,n,t,i),e.elementType=nz,e.lanes=s,e;case uwe:return XL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case owe:o=10;break e;case awe:o=9;break e;case XW:o=11;break e;case QW:o=14;break e;case Mm:o=16,r=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=Wl(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function y1(e,t,n,r){return e=Wl(7,e,r,t),e.lanes=n,e}function XL(e,t,n,r){return e=Wl(22,e,r,t),e.elementType=uwe,e.lanes=n,e.stateNode={isHidden:!1},e}function l9(e,t,n){return e=Wl(6,e,null,t),e.lanes=n,e}function c9(e,t,n){return t=Wl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cYe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H8(0),this.expirationTimes=H8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $G(e,t,n,r,i,s,o,a,u){return e=new cYe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Wl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mG(s),e}function fYe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function exe(e){if(!e)return Gg;e=e._reactInternals;e:{if(Ov(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(yu(n))return Zwe(e,n,t)}return t}function txe(e,t,n,r,i,s,o,a,u){return e=$G(n,r,!0,e,i,s,o,a,u),e.context=exe(null),n=e.current,r=Aa(),i=Sg(n),s=dp(r,i),s.callback=t??null,Eg(n,s,i),e.current.lanes=i,FA(e,i,r),vu(e,r),e}function QL(e,t,n,r){var i=t.current,s=Aa(),o=Sg(i);return n=exe(n),t.context===null?t.context=n:t.pendingContext=n,t=dp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Eg(i,t,o),e!==null&&(sf(e,i,o,s),Vk(e,i,o)),o}function IR(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function RG(e,t){Gse(e,t),(e=e.alternate)&&Gse(e,t)}function dYe(){return null}var nxe=typeof reportError=="function"?reportError:function(e){console.error(e)};function NG(e){this._internalRoot=e}JL.prototype.render=NG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));QL(e,t,null,null)};JL.prototype.unmount=NG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;V1(function(){QL(null,e,null,null)}),t[Ip]=null}};function JL(e){this._internalRoot=e}JL.prototype.unstable_scheduleHydration=function(e){if(e){var t=$we();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wm.length&&t!==0&&t<Wm[n].priority;n++);Wm.splice(n,0,e),n===0&&Nwe(e)}};function DG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ZL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yse(){}function hYe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=IR(o);s.call(l)}}var o=txe(t,r,e,0,null,!1,!1,"",Yse);return e._reactRootContainer=o,e[Ip]=o.current,X2(e.nodeType===8?e.parentNode:e),V1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=IR(u);a.call(l)}}var u=$G(e,0,!1,null,null,!1,!1,"",Yse);return e._reactRootContainer=u,e[Ip]=u.current,X2(e.nodeType===8?e.parentNode:e),V1(function(){QL(t,u,n,r)}),u}function e6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=IR(o);a.call(u)}}QL(t,o,e,i)}else o=hYe(n,t,e,i,r);return IR(o)}Pwe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=QS(t.pendingLanes);n!==0&&(eG(t,n|1),vu(t,Wi()),!(Qn&6)&&(yw=Wi()+500,R0()))}break;case 13:V1(function(){var r=Op(e,1);if(r!==null){var i=Aa();sf(r,e,1,i)}}),RG(e,1)}};tG=function(e){if(e.tag===13){var t=Op(e,134217728);if(t!==null){var n=Aa();sf(t,e,134217728,n)}RG(e,134217728)}};kwe=function(e){if(e.tag===13){var t=Sg(e),n=Op(e,t);if(n!==null){var r=Aa();sf(n,e,t,r)}RG(e,t)}};$we=function(){return br};Rwe=function(e,t){var n=br;try{return br=e,t()}finally{br=n}};dz=function(e,t,n){switch(t){case"input":if(sz(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=HL(r);if(!i)throw Error(qe(90));cwe(r),sz(r,i)}}}break;case"textarea":dwe(e,n);break;case"select":t=n.value,t!=null&&Ab(e,!!n.multiple,t,!1)}};_we=IG;bwe=V1;var pYe={usingClientEntryPoint:!1,Events:[jA,nb,HL,ywe,vwe,IG]},Xx={findFiberByHostInstance:Yy,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mYe={bundleType:Xx.bundleType,version:Xx.version,rendererPackageName:Xx.rendererPackageName,rendererConfig:Xx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:em.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xwe(e),e===null?null:e.stateNode},findFiberByHostInstance:Xx.findFiberByHostInstance||dYe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var XO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!XO.isDisabled&&XO.supportsFiber)try{jL=XO.inject(mYe),Sd=XO}catch{}}wl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pYe;wl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DG(t))throw Error(qe(200));return fYe(e,t,null,n)};wl.createRoot=function(e,t){if(!DG(e))throw Error(qe(299));var n=!1,r="",i=nxe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=$G(e,1,!1,null,null,n,!1,r,i),e[Ip]=t.current,X2(e.nodeType===8?e.parentNode:e),new NG(t)};wl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=xwe(t),e=e===null?null:e.stateNode,e};wl.flushSync=function(e){return V1(e)};wl.hydrate=function(e,t,n){if(!ZL(t))throw Error(qe(200));return e6(null,e,t,!0,n)};wl.hydrateRoot=function(e,t,n){if(!DG(e))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nxe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=txe(t,null,e,1,n??null,i,!1,s,o),e[Ip]=t.current,X2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new JL(t)};wl.render=function(e,t,n){if(!ZL(t))throw Error(qe(200));return e6(null,e,t,!1,n)};wl.unmountComponentAtNode=function(e){if(!ZL(e))throw Error(qe(40));return e._reactRootContainer?(V1(function(){e6(null,null,e,!1,function(){e._reactRootContainer=null,e[Ip]=null})}),!0):!1};wl.unstable_batchedUpdates=IG;wl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ZL(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return e6(e,t,n,!1,r)};wl.version="18.2.0-next-9e3b772b8-20220608";function rxe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rxe)}catch(e){console.error(e)}}rxe(),twe.exports=wl;var Pv=twe.exports,Kse=Pv;J7.createRoot=Kse.createRoot,J7.hydrateRoot=Kse.hydrateRoot;const ixe=C.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),ja=()=>C.useContext(ixe);function gYe({children:e}){const[t,n]=M.useState(void 0),r=M.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return I.jsx(ixe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sC(){return sC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sC.apply(this,arguments)}var ig;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ig||(ig={}));const Xse="popstate";function yYe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return qz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:sxe(i)}return _Ye(t,n,null,e)}function os(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function MG(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vYe(){return Math.random().toString(36).substr(2,8)}function Qse(e,t){return{usr:e.state,key:e.key,idx:t}}function qz(e,t,n,r){return n===void 0&&(n=null),sC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?PE(t):t,{state:n,key:t&&t.key||r||vYe()})}function sxe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function PE(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _Ye(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ig.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(sC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=ig.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=ig.Push;let v=qz(m.location,g,y);n&&n(v,g),l=c()+1;let _=Qse(v,l),b=m.createHref(v);try{o.pushState(_,"",b)}catch{i.location.assign(b)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=ig.Replace;let v=qz(m.location,g,y);n&&n(v,g),l=c();let _=Qse(v,l),b=m.createHref(v);o.replaceState(_,"",b),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:sxe(g);return os(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Xse,f),u=g,()=>{i.removeEventListener(Xse,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Jse;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Jse||(Jse={}));function bYe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?PE(t):t,i=uxe(r.pathname||"/",n);if(i==null)return null;let s=oxe(e);wYe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=PYe(s[a],RYe(i));return o}function oxe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(os(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Cg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(os(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),oxe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:IYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of axe(s.path))i(s,o,u)}),t}function axe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=axe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function wYe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:OYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EYe=/^:\w+$/,xYe=3,SYe=2,TYe=1,CYe=10,AYe=-2,Zse=e=>e==="*";function IYe(e,t){let n=e.split("/"),r=n.length;return n.some(Zse)&&(r+=AYe),t&&(r+=SYe),n.filter(i=>!Zse(i)).reduce((i,s)=>i+(EYe.test(s)?xYe:s===""?TYe:CYe),r)}function OYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function PYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=kYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Cg([i,c.pathname]),pathnameBase:LYe(Cg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Cg([i,c.pathnameBase]))}return s}function kYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$Ye(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=NYe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function $Ye(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),MG(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function RYe(e){try{return decodeURI(e)}catch(t){return MG(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function NYe(e,t){try{return decodeURIComponent(e)}catch(n){return MG(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function uxe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function DYe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?PE(e):e;return{pathname:n?n.startsWith("/")?n:MYe(n,t):t,search:FYe(r),hash:BYe(i)}}function MYe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function f9(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lxe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cxe(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=PE(e):(i=sC({},e),os(!i.pathname||!i.pathname.includes("?"),f9("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),f9("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),f9("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=DYe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Cg=e=>e.join("/").replace(/\/\/+/g,"/"),LYe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FYe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BYe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jYe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fxe=["post","put","patch","delete"];new Set(fxe);const zYe=["get",...fxe];new Set(zYe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function UYe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const VYe=typeof Object.is=="function"?Object.is:UYe,{useState:HYe,useEffect:qYe,useLayoutEffect:WYe,useDebugValue:GYe}=F1;function YYe(e,t,n){const r=t(),[{inst:i},s]=HYe({inst:{value:r,getSnapshot:t}});return WYe(()=>{i.value=r,i.getSnapshot=t,d9(i)&&s({inst:i})},[e,r,t]),qYe(()=>(d9(i)&&s({inst:i}),e(()=>{d9(i)&&s({inst:i})})),[e]),GYe(r),r}function d9(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!VYe(n,r)}catch{return!0}}function KYe(e,t,n){return t()}const XYe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QYe=!XYe,JYe=QYe?KYe:YYe;"useSyncExternalStore"in F1&&(e=>e.useSyncExternalStore)(F1);const dxe=C.createContext(null),LG=C.createContext(null),t6=C.createContext(null),n6=C.createContext(null),N0=C.createContext({outlet:null,matches:[]}),hxe=C.createContext(null);function Wz(){return Wz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wz.apply(this,arguments)}function ZYe(e,t){let{relative:n}=t===void 0?{}:t;kE()||os(!1);let{basename:r,navigator:i}=C.useContext(t6),{hash:s,pathname:o,search:a}=nKe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Cg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function kE(){return C.useContext(n6)!=null}function UA(){return kE()||os(!1),C.useContext(n6).location}function tm(){kE()||os(!1);let{basename:e,navigator:t}=C.useContext(t6),{matches:n}=C.useContext(N0),{pathname:r}=UA(),i=JSON.stringify(lxe(n).map(a=>a.pathnameBase)),s=C.useRef(!1);return C.useEffect(()=>{s.current=!0}),C.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=cxe(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:Cg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const eKe=C.createContext(null);function tKe(e){let t=C.useContext(N0).outlet;return t&&C.createElement(eKe.Provider,{value:e},t)}function oC(){let{matches:e}=C.useContext(N0),t=e[e.length-1];return t?t.params:{}}function nKe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=C.useContext(N0),{pathname:i}=UA(),s=JSON.stringify(lxe(r).map(o=>o.pathnameBase));return C.useMemo(()=>cxe(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function pxe(e,t){kE()||os(!1);let{navigator:n}=C.useContext(t6),r=C.useContext(LG),{matches:i}=C.useContext(N0),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=UA(),l;if(t){var c;let m=typeof t=="string"?PE(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||os(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=bYe(e,{pathname:d}),p=oKe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Cg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Cg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?C.createElement(n6.Provider,{value:{location:Wz({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:ig.Pop}},p):p}function rKe(){let e=cKe(),t=jYe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,s)}class iKe extends C.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?C.createElement(N0.Provider,{value:this.props.routeContext},C.createElement(hxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sKe(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(dxe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(N0.Provider,{value:t},r)}function oKe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||os(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=C.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=C.createElement(rKe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=C.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),C.createElement(sKe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?C.createElement(iKe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var eoe;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(eoe||(eoe={}));var OR;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(OR||(OR={}));function aKe(e){let t=C.useContext(LG);return t||os(!1),t}function uKe(e){let t=C.useContext(N0);return t||os(!1),t}function lKe(e){let t=uKe(),n=t.matches[t.matches.length-1];return n.route.id||os(!1),n.route.id}function cKe(){var e;let t=C.useContext(hxe),n=aKe(OR.UseRouteError),r=lKe(OR.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function FG(e){let{to:t,replace:n,state:r,relative:i}=e;kE()||os(!1);let s=C.useContext(LG),o=tm();return C.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function fKe(e){return tKe(e.context)}function Rh(e){os(!1)}function dKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=ig.Pop,navigator:s,static:o=!1}=e;kE()&&os(!1);let a=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=PE(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=C.useMemo(()=>{let m=uxe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:C.createElement(t6.Provider,{value:u},C.createElement(n6.Provider,{children:n,value:p}))}function hKe(e){let{children:t,location:n}=e,r=C.useContext(dxe),i=r&&!t?r.router.routes:Gz(t);return pxe(i,n)}var toe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(toe||(toe={}));new Promise(()=>{});function Gz(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,Gz(r.props.children,s));return}r.type!==Rh&&os(!1),!r.props.index||!r.props.children||os(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gz(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function pKe(e,t){let n=Yz(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function mKe(e){let{basename:t,children:n,window:r}=e,i=C.useRef();i.current==null&&(i.current=yYe({window:r,v5Compat:!0}));let s=i.current,[o,a]=C.useState({action:s.action,location:s.location});return C.useLayoutEffect(()=>s.listen(a),[s]),C.createElement(dKe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var noe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(noe||(noe={}));var roe;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(roe||(roe={}));function BG(e){let t=C.useRef(Yz(e)),n=C.useRef(!1),r=UA(),i=C.useMemo(()=>pKe(r.search,n.current?null:t.current),[r.search]),s=tm(),o=C.useCallback((a,u)=>{const l=Yz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function PR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function gKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function yKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function vKe(e,t,n){return PR(e,n)===PR(t,n)}function mxe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=PR(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>vKe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=yKe(c,l,r),d=gKe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function _Ke(e,t,n){var r;return n?Array.from(((r=PR(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function jG(e){const t=C.createContext(null);return[({children:i,value:s})=>M.createElement(t.Provider,{value:s},i),()=>{const i=C.useContext(t);if(i===null)throw new Error(e);return i}]}function Yg(e){return Array.isArray(e)?e:[e]}function ioe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const bKe=()=>{};function wKe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||bKe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function tp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function EKe(){const[e,t]=C.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function gxe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function VA(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==M.Fragment:!1}function yxe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=yxe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function vxe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=yxe(t))&&(r&&(r+=" "),r+=n);return r}const xKe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function SKe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var TKe=Object.defineProperty,soe=Object.getOwnPropertySymbols,CKe=Object.prototype.hasOwnProperty,AKe=Object.prototype.propertyIsEnumerable,ooe=(e,t,n)=>t in e?TKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aoe=(e,t)=>{for(var n in t||(t={}))CKe.call(t,n)&&ooe(e,n,t[n]);if(soe)for(var n of soe(t))AKe.call(t,n)&&ooe(e,n,t[n]);return e};function IKe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:aoe({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:aoe({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function HA(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function zG(e){const t=HA(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function _xe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function OKe(e,...t){return`linear-gradient(${e}deg, ${_xe(t)})`}function PKe(...e){return`radial-gradient(circle, ${_xe(e)})`}function bxe(e){const t=zG(e),n=HA(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function UG(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function kKe(e){return t=>`@media (min-width: ${UG({size:t,sizes:e.breakpoints})}px)`}function $Ke(e){return t=>`@media (max-width: ${UG({size:t,sizes:e.breakpoints})-1}px)`}function RKe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function NKe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function DKe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function VG(e){return RKe(e)?NKe(e):e.startsWith("rgb")?DKe(e):{r:0,g:0,b:0,a:1}}function B_(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=VG(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function MKe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function LKe(e,t){const{r:n,g:r,b:i,a:s}=VG(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function FKe(e,t){const{r:n,g:r,b:i,a:s}=VG(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function BKe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function jKe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function zKe(e){const t=zG(e),n=HA(e),r=bxe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=jKe(s,e);switch(i){case"light":return{border:"transparent",background:B_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:B_(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:B_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?B_(t(s,5,a,!1),.05):B_(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function UKe(e){return t=>{const n=HA(e)(t);return e.colors[e.primaryColor][n]}}function VKe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Rs={fontStyles:SKe,themeColor:zG,focusStyles:IKe,linearGradient:OKe,radialGradient:PKe,smallerThan:$Ke,largerThan:kKe,rgba:B_,size:UG,cover:MKe,darken:LKe,lighten:FKe,radius:BKe,variant:zKe,primaryShade:HA,hover:VKe,gradient:bxe,primaryColor:UKe};var HKe=Object.defineProperty,qKe=Object.defineProperties,WKe=Object.getOwnPropertyDescriptors,uoe=Object.getOwnPropertySymbols,GKe=Object.prototype.hasOwnProperty,YKe=Object.prototype.propertyIsEnumerable,loe=(e,t,n)=>t in e?HKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KKe=(e,t)=>{for(var n in t||(t={}))GKe.call(t,n)&&loe(e,n,t[n]);if(uoe)for(var n of uoe(t))YKe.call(t,n)&&loe(e,n,t[n]);return e},XKe=(e,t)=>qKe(e,WKe(t));function QKe(e){return XKe(KKe({},e),{fn:{fontStyles:Rs.fontStyles(e),themeColor:Rs.themeColor(e),focusStyles:Rs.focusStyles(e),largerThan:Rs.largerThan(e),smallerThan:Rs.smallerThan(e),radialGradient:Rs.radialGradient,linearGradient:Rs.linearGradient,gradient:Rs.gradient(e),rgba:Rs.rgba,size:Rs.size,cover:Rs.cover,lighten:Rs.lighten,darken:Rs.darken,primaryShade:Rs.primaryShade(e),radius:Rs.radius(e),variant:Rs.variant(e),hover:Rs.hover,primaryColor:Rs.primaryColor(e)}})}const JKe=["xs","sm","md","lg","xl"],ZKe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:xKe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},wxe=QKe(ZKe);function eXe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function tXe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var nXe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(tXe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=eXe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Mo="-ms-",kR="-moz-",lr="-webkit-",Exe="comm",HG="rule",qG="decl",rXe="@import",xxe="@keyframes",iXe=Math.abs,r6=String.fromCharCode,sXe=Object.assign;function oXe(e,t){return fo(e,0)^45?(((t<<2^fo(e,0))<<2^fo(e,1))<<2^fo(e,2))<<2^fo(e,3):0}function Sxe(e){return e.trim()}function aXe(e,t){return(e=t.exec(e))?e[0]:e}function mr(e,t,n){return e.replace(t,n)}function Kz(e,t){return e.indexOf(t)}function fo(e,t){return e.charCodeAt(t)|0}function aC(e,t,n){return e.slice(t,n)}function ed(e){return e.length}function WG(e){return e.length}function QO(e,t){return t.push(e),e}function uXe(e,t){return e.map(t).join("")}var i6=1,vw=1,Txe=0,Eu=0,ns=0,$E="";function s6(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:i6,column:vw,length:o,return:""}}function Qx(e,t){return sXe(s6("",null,null,"",null,null,0),e,{length:-e.length},t)}function lXe(){return ns}function cXe(){return ns=Eu>0?fo($E,--Eu):0,vw--,ns===10&&(vw=1,i6--),ns}function il(){return ns=Eu<Txe?fo($E,Eu++):0,vw++,ns===10&&(vw=1,i6++),ns}function Cd(){return fo($E,Eu)}function Xk(){return Eu}function qA(e,t){return aC($E,e,t)}function uC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cxe(e){return i6=vw=1,Txe=ed($E=e),Eu=0,[]}function Axe(e){return $E="",e}function Qk(e){return Sxe(qA(Eu-1,Xz(e===91?e+2:e===40?e+1:e)))}function fXe(e){for(;(ns=Cd())&&ns<33;)il();return uC(e)>2||uC(ns)>3?"":" "}function dXe(e,t){for(;--t&&il()&&!(ns<48||ns>102||ns>57&&ns<65||ns>70&&ns<97););return qA(e,Xk()+(t<6&&Cd()==32&&il()==32))}function Xz(e){for(;il();)switch(ns){case e:return Eu;case 34:case 39:e!==34&&e!==39&&Xz(ns);break;case 40:e===41&&Xz(e);break;case 92:il();break}return Eu}function hXe(e,t){for(;il()&&e+ns!==57;)if(e+ns===84&&Cd()===47)break;return"/*"+qA(t,Eu-1)+"*"+r6(e===47?e:il())}function pXe(e){for(;!uC(Cd());)il();return qA(e,Eu)}function mXe(e){return Axe(Jk("",null,null,null,[""],e=Cxe(e),0,[0],e))}function Jk(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,E=s,w=r,x=_;g;)switch(p=v,v=il()){case 40:if(p!=108&&fo(x,f-1)==58){Kz(x+=mr(Qk(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:x+=Qk(v);break;case 9:case 10:case 13:case 32:x+=fXe(p);break;case 92:x+=dXe(Xk()-1,7);continue;case 47:switch(Cd()){case 42:case 47:QO(gXe(hXe(il(),Xk()),t,n),u);break;default:x+="/"}break;case 123*m:a[l++]=ed(x)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&ed(x)-f&&QO(h>32?foe(x+";",r,n,f-1):foe(mr(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(QO(w=coe(x,t,n,l,c,i,a,_,b=[],E=[],f),s),v===123)if(c===0)Jk(x,t,w,w,b,s,f,a,E);else switch(d===99&&fo(x,3)===110?100:d){case 100:case 109:case 115:Jk(e,w,w,r&&QO(coe(e,w,w,0,0,i,a,_,i,b=[],f),E),i,E,f,a,r?b:E);break;default:Jk(x,w,w,w,[""],E,0,a,E)}}l=c=h=0,m=y=1,_=x="",f=o;break;case 58:f=1+ed(x),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&cXe()==125)continue}switch(x+=r6(v),v*m){case 38:y=c>0?1:(x+="\f",-1);break;case 44:a[l++]=(ed(x)-1)*y,y=1;break;case 64:Cd()===45&&(x+=Qk(il())),d=Cd(),c=f=ed(_=x+=pXe(Xk())),v++;break;case 45:p===45&&ed(x)==2&&(m=0)}}return s}function coe(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=WG(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=aC(e,f+1,f=iXe(m=o[p])),_=e;y<h;++y)(_=Sxe(m>0?d[y]+" "+v:mr(v,/&\f/g,d[y])))&&(u[g++]=_);return s6(e,t,n,i===0?HG:a,u,l,c)}function gXe(e,t,n){return s6(e,t,n,Exe,r6(lXe()),aC(e,2,-2),0)}function foe(e,t,n,r){return s6(e,t,n,qG,aC(e,0,r),aC(e,r+1,-1),r)}function Rb(e,t){for(var n="",r=WG(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function yXe(e,t,n,r){switch(e.type){case rXe:case qG:return e.return=e.return||e.value;case Exe:return"";case xxe:return e.return=e.value+"{"+Rb(e.children,r)+"}";case HG:e.value=e.props.join(",")}return ed(n=Rb(e.children,r))?e.return=e.value+"{"+n+"}":""}function vXe(e){var t=WG(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function _Xe(e){return function(t){t.root||(t=t.return)&&e(t)}}function bXe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var wXe=function(t,n,r){for(var i=0,s=0;i=s,s=Cd(),i===38&&s===12&&(n[r]=1),!uC(s);)il();return qA(t,Eu)},EXe=function(t,n){var r=-1,i=44;do switch(uC(i)){case 0:i===38&&Cd()===12&&(n[r]=1),t[r]+=wXe(Eu-1,n,r);break;case 2:t[r]+=Qk(i);break;case 4:if(i===44){t[++r]=Cd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=r6(i)}while(i=il());return t},xXe=function(t,n){return Axe(EXe(Cxe(t),n))},doe=new WeakMap,SXe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!doe.get(r))&&!i){doe.set(t,!0);for(var s=[],o=xXe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},TXe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Ixe(e,t){switch(oXe(e,t)){case 5103:return lr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lr+e+kR+e+Mo+e+e;case 6828:case 4268:return lr+e+Mo+e+e;case 6165:return lr+e+Mo+"flex-"+e+e;case 5187:return lr+e+mr(e,/(\w+).+(:[^]+)/,lr+"box-$1$2"+Mo+"flex-$1$2")+e;case 5443:return lr+e+Mo+"flex-item-"+mr(e,/flex-|-self/,"")+e;case 4675:return lr+e+Mo+"flex-line-pack"+mr(e,/align-content|flex-|-self/,"")+e;case 5548:return lr+e+Mo+mr(e,"shrink","negative")+e;case 5292:return lr+e+Mo+mr(e,"basis","preferred-size")+e;case 6060:return lr+"box-"+mr(e,"-grow","")+lr+e+Mo+mr(e,"grow","positive")+e;case 4554:return lr+mr(e,/([^-])(transform)/g,"$1"+lr+"$2")+e;case 6187:return mr(mr(mr(e,/(zoom-|grab)/,lr+"$1"),/(image-set)/,lr+"$1"),e,"")+e;case 5495:case 3959:return mr(e,/(image-set\([^]*)/,lr+"$1$`$1");case 4968:return mr(mr(e,/(.+:)(flex-)?(.*)/,lr+"box-pack:$3"+Mo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lr+e+e;case 4095:case 3583:case 4068:case 2532:return mr(e,/(.+)-inline(.+)/,lr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ed(e)-1-t>6)switch(fo(e,t+1)){case 109:if(fo(e,t+4)!==45)break;case 102:return mr(e,/(.+:)(.+)-([^]+)/,"$1"+lr+"$2-$3$1"+kR+(fo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Kz(e,"stretch")?Ixe(mr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(fo(e,t+1)!==115)break;case 6444:switch(fo(e,ed(e)-3-(~Kz(e,"!important")&&10))){case 107:return mr(e,":",":"+lr)+e;case 101:return mr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+lr+(fo(e,14)===45?"inline-":"")+"box$3$1"+lr+"$2$3$1"+Mo+"$2box$3")+e}break;case 5936:switch(fo(e,t+11)){case 114:return lr+e+Mo+mr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lr+e+Mo+mr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lr+e+Mo+mr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return lr+e+Mo+e+e}return e}var CXe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case qG:t.return=Ixe(t.value,t.length);break;case xxe:return Rb([Qx(t,{value:mr(t.value,"@","@"+lr)})],i);case HG:if(t.length)return uXe(t.props,function(s){switch(aXe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rb([Qx(t,{props:[mr(s,/:(read-\w+)/,":"+kR+"$1")]})],i);case"::placeholder":return Rb([Qx(t,{props:[mr(s,/:(plac\w+)/,":"+lr+"input-$1")]}),Qx(t,{props:[mr(s,/:(plac\w+)/,":"+kR+"$1")]}),Qx(t,{props:[mr(s,/:(plac\w+)/,Mo+"input-$1")]})],i)}return""})}},AXe=[CXe],IXe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||AXe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[SXe,TXe];{var c,f=[yXe,_Xe(function(m){c.insert(m)})],d=vXe(l.concat(i,f)),h=function(g){return Rb(mXe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new nXe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};const Oxe=IXe;function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mi.apply(this,arguments)}var Pxe={exports:{}},Er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=typeof Symbol=="function"&&Symbol.for,GG=Qs?Symbol.for("react.element"):60103,YG=Qs?Symbol.for("react.portal"):60106,o6=Qs?Symbol.for("react.fragment"):60107,a6=Qs?Symbol.for("react.strict_mode"):60108,u6=Qs?Symbol.for("react.profiler"):60114,l6=Qs?Symbol.for("react.provider"):60109,c6=Qs?Symbol.for("react.context"):60110,KG=Qs?Symbol.for("react.async_mode"):60111,f6=Qs?Symbol.for("react.concurrent_mode"):60111,d6=Qs?Symbol.for("react.forward_ref"):60112,h6=Qs?Symbol.for("react.suspense"):60113,OXe=Qs?Symbol.for("react.suspense_list"):60120,p6=Qs?Symbol.for("react.memo"):60115,m6=Qs?Symbol.for("react.lazy"):60116,PXe=Qs?Symbol.for("react.block"):60121,kXe=Qs?Symbol.for("react.fundamental"):60117,$Xe=Qs?Symbol.for("react.responder"):60118,RXe=Qs?Symbol.for("react.scope"):60119;function xl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case GG:switch(e=e.type,e){case KG:case f6:case o6:case u6:case a6:case h6:return e;default:switch(e=e&&e.$$typeof,e){case c6:case d6:case m6:case p6:case l6:return e;default:return t}}case YG:return t}}}function kxe(e){return xl(e)===f6}Er.AsyncMode=KG;Er.ConcurrentMode=f6;Er.ContextConsumer=c6;Er.ContextProvider=l6;Er.Element=GG;Er.ForwardRef=d6;Er.Fragment=o6;Er.Lazy=m6;Er.Memo=p6;Er.Portal=YG;Er.Profiler=u6;Er.StrictMode=a6;Er.Suspense=h6;Er.isAsyncMode=function(e){return kxe(e)||xl(e)===KG};Er.isConcurrentMode=kxe;Er.isContextConsumer=function(e){return xl(e)===c6};Er.isContextProvider=function(e){return xl(e)===l6};Er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===GG};Er.isForwardRef=function(e){return xl(e)===d6};Er.isFragment=function(e){return xl(e)===o6};Er.isLazy=function(e){return xl(e)===m6};Er.isMemo=function(e){return xl(e)===p6};Er.isPortal=function(e){return xl(e)===YG};Er.isProfiler=function(e){return xl(e)===u6};Er.isStrictMode=function(e){return xl(e)===a6};Er.isSuspense=function(e){return xl(e)===h6};Er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===o6||e===f6||e===u6||e===a6||e===h6||e===OXe||typeof e=="object"&&e!==null&&(e.$$typeof===m6||e.$$typeof===p6||e.$$typeof===l6||e.$$typeof===c6||e.$$typeof===d6||e.$$typeof===kXe||e.$$typeof===$Xe||e.$$typeof===RXe||e.$$typeof===PXe)};Er.typeOf=xl;Pxe.exports=Er;var NXe=Pxe.exports,$xe=NXe,DXe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MXe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Rxe={};Rxe[$xe.ForwardRef]=DXe;Rxe[$xe.Memo]=MXe;var LXe=!0;function FXe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var BXe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||LXe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},Nxe=function(t,n,r){BXe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function jXe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var zXe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},UXe=/[A-Z]|^ms/g,VXe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dxe=function(t){return t.charCodeAt(1)===45},hoe=function(t){return t!=null&&typeof t!="boolean"},h9=bXe(function(e){return Dxe(e)?e:e.replace(UXe,"-$&").toLowerCase()}),poe=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(VXe,function(r,i,s){return td={name:i,styles:s,next:td},i})}return zXe[t]!==1&&!Dxe(t)&&typeof n=="number"&&n!==0?n+"px":n};function lC(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return td={name:n.name,styles:n.styles,next:td},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)td={name:r.name,styles:r.styles,next:td},r=r.next;var i=n.styles+";";return i}return HXe(e,t,n)}case"function":{if(e!==void 0){var s=td,o=n(e);return td=s,lC(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function HXe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=lC(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":hoe(o)&&(r+=h9(s)+":"+poe(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)hoe(o[a])&&(r+=h9(s)+":"+poe(s,o[a])+";");else{var u=lC(e,t,o);switch(s){case"animation":case"animationName":{r+=h9(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var moe=/label:\s*([^\s;\n{]+)\s*(;|$)/g,td,XG=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";td=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=lC(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=lC(r,n,t[a]),i&&(s+=o[a]);moe.lastIndex=0;for(var u="",l;(l=moe.exec(s))!==null;)u+="-"+l[1];var c=jXe(s)+u;return{name:c,styles:s,next:td}},qXe=F1.useInsertionEffect?F1.useInsertionEffect:!1,goe=qXe||C.useLayoutEffect,Mxe=C.createContext(typeof HTMLElement<"u"?Oxe({key:"css"}):null);Mxe.Provider;var WXe=function(t){return C.forwardRef(function(n,r){var i=C.useContext(Mxe);return t(n,i,r)})},GXe=C.createContext({}),YXe=WXe(function(e,t){var n=e.styles,r=XG([n],void 0,C.useContext(GXe)),i=C.useRef();return goe(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),goe(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&Nxe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function Lxe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return XG(t)}var KXe=function(){var t=Lxe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Fxe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var XXe=Object.defineProperty,yoe=Object.getOwnPropertySymbols,QXe=Object.prototype.hasOwnProperty,JXe=Object.prototype.propertyIsEnumerable,voe=(e,t,n)=>t in e?XXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p9=(e,t)=>{for(var n in t||(t={}))QXe.call(t,n)&&voe(e,n,t[n]);if(yoe)for(var n of yoe(t))JXe.call(t,n)&&voe(e,n,t[n]);return e};const Bxe=C.createContext({theme:wxe});function cs(){var e;return((e=C.useContext(Bxe))==null?void 0:e.theme)||wxe}function ZXe(e){const t=cs(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function jxe(){var e;return(e=C.useContext(Bxe))==null?void 0:e.emotionCache}function gt(e,t,n){var r;const s=(r=cs().components[e])==null?void 0:r.defaultProps;return p9(p9(p9({},t),s),Fxe(n))}const zxe=C.createContext({classNames:{},styles:{},unstyled:!1});function QG({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return M.createElement(zxe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function D0(){return C.useContext(zxe)}const eQe={app:100,modal:200,popover:300,overlay:400,max:9999};function za(e){return eQe[e]}function tQe(e,t){const n=C.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const nQe=Oxe({key:"mantine",prepend:!0});function rQe(){return jxe()||nQe}var iQe=Object.defineProperty,_oe=Object.getOwnPropertySymbols,sQe=Object.prototype.hasOwnProperty,oQe=Object.prototype.propertyIsEnumerable,boe=(e,t,n)=>t in e?iQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aQe=(e,t)=>{for(var n in t||(t={}))sQe.call(t,n)&&boe(e,n,t[n]);if(_oe)for(var n of _oe(t))oQe.call(t,n)&&boe(e,n,t[n]);return e};const m9="ref";function uQe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(m9 in n))return{args:e,ref:t};t=n[m9];const r=aQe({},n);return delete r[m9],{args:[r],ref:t}}const{cssFactory:lQe}=(()=>{function e(n,r,i){const s=[],o=FXe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=uQe(o),l=XG(u,r.registered);return Nxe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,vxe(o))}}return{cssFactory:t}})();function Uxe(){const e=rQe();return tQe(()=>lQe({cache:e}),[e])}function cQe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var fQe=Object.defineProperty,woe=Object.getOwnPropertySymbols,dQe=Object.prototype.hasOwnProperty,hQe=Object.prototype.propertyIsEnumerable,Eoe=(e,t,n)=>t in e?fQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g9=(e,t)=>{for(var n in t||(t={}))dQe.call(t,n)&&Eoe(e,n,t[n]);if(woe)for(var n of woe(t))hQe.call(t,n)&&Eoe(e,n,t[n]);return e};function pQe(e){return`__mantine-ref-${e||""}`}function xoe(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=g9(g9({},i[o]),s[o]):i[o]=g9({},s[o])}),i),{}):r(e)}function lt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=cs(),o=ZXe(i==null?void 0:i.name),a=jxe(),{css:u,cx:l}=Uxe(),c=t(s,r,pQe),f=xoe(i==null?void 0:i.styles,s,r),d=xoe(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:cQe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function Vxe({styles:e}){const t=cs();return M.createElement(YXe,{styles:Lxe(typeof e=="function"?e(t):e)})}var mQe=Object.defineProperty,gQe=Object.defineProperties,yQe=Object.getOwnPropertyDescriptors,Soe=Object.getOwnPropertySymbols,vQe=Object.prototype.hasOwnProperty,_Qe=Object.prototype.propertyIsEnumerable,Toe=(e,t,n)=>t in e?mQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jx=(e,t)=>{for(var n in t||(t={}))vQe.call(t,n)&&Toe(e,n,t[n]);if(Soe)for(var n of Soe(t))_Qe.call(t,n)&&Toe(e,n,t[n]);return e},Zx=(e,t)=>gQe(e,yQe(t));const eS={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},JO={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:Zx(Jx({},eS),{common:{transformOrigin:"center center"}}),"pop-bottom-left":Zx(Jx({},eS),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":Zx(Jx({},eS),{common:{transformOrigin:"bottom right"}}),"pop-top-left":Zx(Jx({},eS),{common:{transformOrigin:"top left"}}),"pop-top-right":Zx(Jx({},eS),{common:{transformOrigin:"top right"}})},Coe=["mousedown","touchstart"];function bQe(e,t,n){const r=C.useRef();return C.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Coe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Coe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function wQe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function EQe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function xQe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=C.useState(n?!1:EQe(e,t)),s=C.useRef();return C.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),wQe(s.current,o=>i(o.matches))},[e]),r}function of(e,t,n){return Math.min(Math.max(e,t),n)}const JG=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Es(e,t){const n=C.useRef(!1);C.useEffect(()=>()=>{n.current=!1},[]),C.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function ZG({opened:e,shouldReturnFocus:t=!0}){const n=C.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Es(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const SQe=/input|select|textarea|button|object/,Hxe="a, input, select, textarea, button, object, [tabindex]";function TQe(e){return e.style.display==="none"}function CQe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(TQe(n))return!1;n=n.parentNode}return!0}function qxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Qz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(qxe(e));return(SQe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&CQe(e)}function Wxe(e){const t=qxe(e);return(Number.isNaN(t)||t>=0)&&Qz(e)}function AQe(e){return Array.from(e.querySelectorAll(Hxe)).filter(Wxe)}function IQe(e,t){const n=AQe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function OQe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function eY(e=!0){const t=C.useRef(),n=C.useRef(null),r=C.useCallback(i=>{if(e&&i!==null&&(n.current=OQe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(Hxe));o=a.find(Wxe)||a.find(Qz)||null,!o&&Qz(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return C.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&IQe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const PQe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,kQe=M.useId||(()=>{});function $Qe(){const[e,t]=C.useState("");return JG(()=>{t(PQe())},[]),e}function RQe(){const e=kQe();return e?`mantine-${e.replace(/:/g,"")}`:""}function $u(e){return typeof e=="string"?e:RQe()||$Qe()}function Jz(e,t,n){C.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Gxe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Yxe(...e){return t=>{e.forEach(n=>Gxe(n,t))}}function Os(...e){return C.useCallback(Yxe(...e),e)}function Kxe(e,t,n="ltr"){const r=C.useRef(),i=C.useRef(!1),s=C.useRef(!1),o=C.useRef(0),[a,u]=C.useState(!1);return C.useEffect(()=>{i.current=!0},[]),C.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const b=r.current.getBoundingClientRect();if(b.width&&b.height){const E=of((v-b.left)/b.width,0,1);e({x:n==="ltr"?E:1-E,y:of((_-b.top)/b.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ia({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=C.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function g6(e,t){return xQe("(prefers-reduced-motion: reduce)",e,t)}const NQe=e=>e<.5?2*e*e:-1+(4-2*e)*e,DQe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},MQe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},LQe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function Xxe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=NQe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=C.useRef(0),u=C.useRef(0),l=C.useRef(!1),c=C.useRef(null),f=C.useRef(null),d=g6(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=C.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=MQe({parent:c.current,axis:t}))!=null?y:0,_=DQe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function b(){u.current===0&&(u.current=performance.now());const w=performance.now()-u.current,x=d||e===0?1:w/e,S=v+_*r(x);LQe({parent:c.current,axis:t,distance:S}),!l.current&&x<1?a.current=requestAnimationFrame(b):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}b()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return Jz("wheel",m,{passive:!0}),Jz("touchmove",m,{passive:!0}),C.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const FQe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function v1(){const e=C.useRef(0),t=C.useRef(null),[n,r]=C.useState(FQe),i=C.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return C.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function BQe(){const[e,{width:t,height:n}]=v1();return{ref:e,width:t,height:n}}function jQe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const zQe=({disableBodyPadding:e})=>{const t=e?null:jQe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function UQe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VQe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function HQe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function Qxe(e,t={disableBodyPadding:!1}){const[n,r]=C.useState(e||!1),i=C.useRef(0),{disableBodyPadding:s}=t,o=C.useRef(null),a=()=>{i.current=window.scrollY;const l=zQe({disableBodyPadding:s}),c=HQe();UQe(c,l),VQe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return C.useEffect(()=>(n?a():u(),u),[n]),C.useEffect(()=>{e!==void 0&&r(e)},[e]),C.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var qQe=Object.defineProperty,WQe=Object.defineProperties,GQe=Object.getOwnPropertyDescriptors,Aoe=Object.getOwnPropertySymbols,YQe=Object.prototype.hasOwnProperty,KQe=Object.prototype.propertyIsEnumerable,Ioe=(e,t,n)=>t in e?qQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XQe=(e,t)=>{for(var n in t||(t={}))YQe.call(t,n)&&Ioe(e,n,t[n]);if(Aoe)for(var n of Aoe(t))KQe.call(t,n)&&Ioe(e,n,t[n]);return e},QQe=(e,t)=>WQe(e,GQe(t));function JQe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return QQe(XQe({},n),{key:i})}function ZQe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function eJe(e){return t=>ZQe(JQe(e),t)}function tJe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{eJe(r)(n)&&(t.preventDefault(),i(n))})}}function nJe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function rJe(){return typeof window<"u"?nJe():"undetermined"}function iJe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n.type==="checkbox"?e(n.checked):e(n.value)}else e(t)}}function sJe(e){const[t,n]=C.useState(e);return[t,iJe(n)]}function lb(e,t){const[n,r]=C.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function oJe(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function sg(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var Ooe=Object.getOwnPropertySymbols,aJe=Object.prototype.hasOwnProperty,uJe=Object.prototype.propertyIsEnumerable,lJe=(e,t)=>{var n={};for(var r in e)aJe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ooe)for(var r of Ooe(e))t.indexOf(r)<0&&uJe.call(e,r)&&(n[r]=e[r]);return n};function Ef(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:P,tt:A,td:O,w:z,miw:D,maw:R,h:N,mih:L,mah:V,bgsz:j,bgp:H,bgr:U,bga:k,pos:$,top:q,left:F,bottom:B,right:Q,inset:se,display:ae}=t,ce=lJe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:Fxe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:P,tt:A,td:O,w:z,miw:D,maw:R,h:N,mih:L,mah:V,bgsz:j,bgp:H,bgr:U,bga:k,pos:$,top:q,left:F,bottom:B,right:Q,inset:se,display:ae}),rest:ce}}function cJe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function fJe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return cJe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function dJe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function hJe(e){return e}function pJe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const mJe=["-xs","-sm","-md","-lg","-xl"];function gJe(e,t){return mJe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const yJe={color:dJe,default:hJe,fontSize:pJe,spacing:gJe},vJe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var _Je=Object.defineProperty,Poe=Object.getOwnPropertySymbols,bJe=Object.prototype.hasOwnProperty,wJe=Object.prototype.propertyIsEnumerable,koe=(e,t,n)=>t in e?_Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$oe=(e,t)=>{for(var n in t||(t={}))bJe.call(t,n)&&koe(e,n,t[n]);if(Poe)for(var n of Poe(t))wJe.call(t,n)&&koe(e,n,t[n]);return e};function Zz(e,t,n=vJe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(fJe({value:e[s],getValue:yJe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=$oe($oe({},i[o]),s[o]):i[o]=s[o]}),i),{})}function Roe(e,t){return typeof e=="function"?e(t):e}function EJe(e,t,n){const r=cs(),{css:i,cx:s}=Uxe();return Array.isArray(e)?s(n,i(Zz(t,r)),e.map(o=>i(Roe(o,r)))):s(n,i(Roe(e,r)),i(Zz(t,r)))}var xJe=Object.defineProperty,$R=Object.getOwnPropertySymbols,Jxe=Object.prototype.hasOwnProperty,Zxe=Object.prototype.propertyIsEnumerable,Noe=(e,t,n)=>t in e?xJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SJe=(e,t)=>{for(var n in t||(t={}))Jxe.call(t,n)&&Noe(e,n,t[n]);if($R)for(var n of $R(t))Zxe.call(t,n)&&Noe(e,n,t[n]);return e},TJe=(e,t)=>{var n={};for(var r in e)Jxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$R)for(var r of $R(e))t.indexOf(r)<0&&Zxe.call(e,r)&&(n[r]=e[r]);return n};const eSe=C.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=TJe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=Ef(a),c=i||"div";return M.createElement(c,SJe({ref:t,className:EJe(o,u,r),style:s},l))});eSe.displayName="@mantine/core/Box";const st=eSe;var CJe=Object.defineProperty,AJe=Object.defineProperties,IJe=Object.getOwnPropertyDescriptors,Doe=Object.getOwnPropertySymbols,OJe=Object.prototype.hasOwnProperty,PJe=Object.prototype.propertyIsEnumerable,Moe=(e,t,n)=>t in e?CJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Loe=(e,t)=>{for(var n in t||(t={}))OJe.call(t,n)&&Moe(e,n,t[n]);if(Doe)for(var n of Doe(t))PJe.call(t,n)&&Moe(e,n,t[n]);return e},kJe=(e,t)=>AJe(e,IJe(t)),$Je=lt(e=>({root:kJe(Loe(Loe({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const RJe=$Je;var NJe=Object.defineProperty,RR=Object.getOwnPropertySymbols,tSe=Object.prototype.hasOwnProperty,nSe=Object.prototype.propertyIsEnumerable,Foe=(e,t,n)=>t in e?NJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DJe=(e,t)=>{for(var n in t||(t={}))tSe.call(t,n)&&Foe(e,n,t[n]);if(RR)for(var n of RR(t))nSe.call(t,n)&&Foe(e,n,t[n]);return e},MJe=(e,t)=>{var n={};for(var r in e)tSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RR)for(var r of RR(e))t.indexOf(r)<0&&nSe.call(e,r)&&(n[r]=e[r]);return n};const rSe=C.forwardRef((e,t)=>{const n=gt("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=MJe(n,["className","component","unstyled"]),{classes:a,cx:u}=RJe(null,{name:"UnstyledButton",unstyled:s});return M.createElement(st,DJe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});rSe.displayName="@mantine/core/UnstyledButton";const nm=rSe;var LJe=Object.defineProperty,FJe=Object.defineProperties,BJe=Object.getOwnPropertyDescriptors,NR=Object.getOwnPropertySymbols,iSe=Object.prototype.hasOwnProperty,sSe=Object.prototype.propertyIsEnumerable,Boe=(e,t,n)=>t in e?LJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cc=(e,t)=>{for(var n in t||(t={}))iSe.call(t,n)&&Boe(e,n,t[n]);if(NR)for(var n of NR(t))sSe.call(t,n)&&Boe(e,n,t[n]);return e},tS=(e,t)=>FJe(e,BJe(t)),jJe=(e,t)=>{var n={};for(var r in e)iSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NR)for(var r of NR(e))t.indexOf(r)<0&&sSe.call(e,r)&&(n[r]=e[r]);return n};function zJe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function y9(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function UJe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const Ch=typeof window<"u"&&window.requestAnimationFrame;function VJe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=C.useRef(null),o="0px",[a,u]=C.useState({}),l=g=>{Pv.flushSync(()=>u(g))},c=g=>{l(y=>Cc(Cc({},y),g))};function f(g){const y=e||zJe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:UJe(s),height:y9(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};C.useEffect(()=>{Ch(()=>{const{x:g,y}=h();i==="x"&&!r?l(Cc({},g)):i==="y"&&!r&&l(Cc({},y))})},[]),Es(()=>{i!=="x"&&Ch(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Ch(()=>{const g=y9(s);c(tS(Cc({},f(g)),{height:g}))})}:()=>{const g=y9(s);c(tS(Cc({},f(g)),{willChange:"height",height:g})),Ch(()=>c({height:o,overflow:"hidden"}))})},[r]),Es(()=>{i!=="y"&&Ch(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),Ch(()=>{c(tS(Cc({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(tS(Cc({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),Ch(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,b=jJe(y,["style","refKey"]);const E=b[_];return tS(Cc({"aria-hidden":!r},b),{[_]:Yxe(s,E),onTransitionEnd:p,style:Cc(Cc({boxSizing:"border-box"},v),a)})}return m}var HJe=Object.defineProperty,DR=Object.getOwnPropertySymbols,oSe=Object.prototype.hasOwnProperty,aSe=Object.prototype.propertyIsEnumerable,joe=(e,t,n)=>t in e?HJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZO=(e,t)=>{for(var n in t||(t={}))oSe.call(t,n)&&joe(e,n,t[n]);if(DR)for(var n of DR(t))aSe.call(t,n)&&joe(e,n,t[n]);return e},qJe=(e,t)=>{var n={};for(var r in e)oSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DR)for(var r of DR(e))t.indexOf(r)<0&&aSe.call(e,r)&&(n[r]=e[r]);return n};const WJe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},uSe=C.forwardRef((e,t)=>{const n=gt("Collapse",WJe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=qJe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=cs(),h=g6(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=Ef(f),v=VJe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?M.createElement(st,ZO({},y),r):null:M.createElement(st,ZO({},v(ZO(ZO({style:a,ref:t},y),g))),M.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});uSe.displayName="@mantine/core/Collapse";var GJe=Object.defineProperty,zoe=Object.getOwnPropertySymbols,YJe=Object.prototype.hasOwnProperty,KJe=Object.prototype.propertyIsEnumerable,Uoe=(e,t,n)=>t in e?GJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XJe=(e,t)=>{for(var n in t||(t={}))YJe.call(t,n)&&Uoe(e,n,t[n]);if(zoe)for(var n of zoe(t))KJe.call(t,n)&&Uoe(e,n,t[n]);return e};function QJe(e){return M.createElement("svg",XJe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),M.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var JJe=Object.defineProperty,ZJe=Object.defineProperties,eZe=Object.getOwnPropertyDescriptors,Voe=Object.getOwnPropertySymbols,tZe=Object.prototype.hasOwnProperty,nZe=Object.prototype.propertyIsEnumerable,Hoe=(e,t,n)=>t in e?JJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lSe=(e,t)=>{for(var n in t||(t={}))tZe.call(t,n)&&Hoe(e,n,t[n]);if(Voe)for(var n of Voe(t))nZe.call(t,n)&&Hoe(e,n,t[n]);return e},rZe=(e,t)=>ZJe(e,eZe(t));const ZS={xs:18,sm:22,md:28,lg:34,xl:44};function iZe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:lSe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var sZe=lt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:rZe(lSe({},iZe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:ZS}),minHeight:e.fn.size({size:n,sizes:ZS}),width:e.fn.size({size:n,sizes:ZS}),minWidth:e.fn.size({size:n,sizes:ZS}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})}));const oZe=sZe;var aZe=Object.defineProperty,MR=Object.getOwnPropertySymbols,cSe=Object.prototype.hasOwnProperty,fSe=Object.prototype.propertyIsEnumerable,qoe=(e,t,n)=>t in e?aZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uZe=(e,t)=>{for(var n in t||(t={}))cSe.call(t,n)&&qoe(e,n,t[n]);if(MR)for(var n of MR(t))fSe.call(t,n)&&qoe(e,n,t[n]);return e},lZe=(e,t)=>{var n={};for(var r in e)cSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MR)for(var r of MR(e))t.indexOf(r)<0&&fSe.call(e,r)&&(n[r]=e[r]);return n};function cZe(e){var t=e,{size:n,color:r}=t,i=lZe(t,["size","color"]);return M.createElement("svg",uZe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),M.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},M.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),M.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},M.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),M.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},M.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),M.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},M.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),M.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},M.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var fZe=Object.defineProperty,LR=Object.getOwnPropertySymbols,dSe=Object.prototype.hasOwnProperty,hSe=Object.prototype.propertyIsEnumerable,Woe=(e,t,n)=>t in e?fZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dZe=(e,t)=>{for(var n in t||(t={}))dSe.call(t,n)&&Woe(e,n,t[n]);if(LR)for(var n of LR(t))hSe.call(t,n)&&Woe(e,n,t[n]);return e},hZe=(e,t)=>{var n={};for(var r in e)dSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LR)for(var r of LR(e))t.indexOf(r)<0&&hSe.call(e,r)&&(n[r]=e[r]);return n};function pZe(e){var t=e,{size:n,color:r}=t,i=hZe(t,["size","color"]);return M.createElement("svg",dZe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),M.createElement("g",{fill:"none",fillRule:"evenodd"},M.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},M.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),M.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},M.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var mZe=Object.defineProperty,FR=Object.getOwnPropertySymbols,pSe=Object.prototype.hasOwnProperty,mSe=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?mZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gZe=(e,t)=>{for(var n in t||(t={}))pSe.call(t,n)&&Goe(e,n,t[n]);if(FR)for(var n of FR(t))mSe.call(t,n)&&Goe(e,n,t[n]);return e},yZe=(e,t)=>{var n={};for(var r in e)pSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FR)for(var r of FR(e))t.indexOf(r)<0&&mSe.call(e,r)&&(n[r]=e[r]);return n};function vZe(e){var t=e,{size:n,color:r}=t,i=yZe(t,["size","color"]);return M.createElement("svg",gZe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),M.createElement("circle",{cx:"15",cy:"15",r:"15"},M.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),M.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},M.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),M.createElement("circle",{cx:"105",cy:"15",r:"15"},M.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),M.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var _Ze=Object.defineProperty,BR=Object.getOwnPropertySymbols,gSe=Object.prototype.hasOwnProperty,ySe=Object.prototype.propertyIsEnumerable,Yoe=(e,t,n)=>t in e?_Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bZe=(e,t)=>{for(var n in t||(t={}))gSe.call(t,n)&&Yoe(e,n,t[n]);if(BR)for(var n of BR(t))ySe.call(t,n)&&Yoe(e,n,t[n]);return e},wZe=(e,t)=>{var n={};for(var r in e)gSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BR)for(var r of BR(e))t.indexOf(r)<0&&ySe.call(e,r)&&(n[r]=e[r]);return n};const v9={bars:cZe,oval:pZe,dots:vZe},EZe={xs:18,sm:22,md:36,lg:44,xl:58},xZe={size:"md"};function kv(e){const t=gt("Loader",xZe,e),{size:n,color:r,variant:i}=t,s=wZe(t,["size","color","variant"]),o=cs(),a=i in v9?i:o.loader;return M.createElement(st,bZe({role:"presentation",component:v9[a]||v9.bars,size:o.fn.size({size:n,sizes:EZe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}kv.displayName="@mantine/core/Loader";var SZe=Object.defineProperty,jR=Object.getOwnPropertySymbols,vSe=Object.prototype.hasOwnProperty,_Se=Object.prototype.propertyIsEnumerable,Koe=(e,t,n)=>t in e?SZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xoe=(e,t)=>{for(var n in t||(t={}))vSe.call(t,n)&&Koe(e,n,t[n]);if(jR)for(var n of jR(t))_Se.call(t,n)&&Koe(e,n,t[n]);return e},TZe=(e,t)=>{var n={};for(var r in e)vSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jR)for(var r of jR(e))t.indexOf(r)<0&&_Se.call(e,r)&&(n[r]=e[r]);return n};const CZe={color:"gray",size:"md",variant:"subtle",loading:!1},bSe=C.forwardRef((e,t)=>{const n=gt("ActionIcon",CZe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=TZe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=oZe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=M.createElement(kv,Xoe({color:v.color,size:y.fn.size({size:a,sizes:ZS})-12},f));return M.createElement(nm,Xoe({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});bSe.displayName="@mantine/core/ActionIcon";const cC=bSe;function wSe(e){const{children:t,target:n,className:r}=gt("Portal",{},e),i=cs(),[s,o]=C.useState(!1),a=C.useRef();return JG(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?Pv.createPortal(M.createElement("div",{className:r,dir:i.dir},t),a.current):null}wSe.displayName="@mantine/core/Portal";var AZe=Object.defineProperty,zR=Object.getOwnPropertySymbols,ESe=Object.prototype.hasOwnProperty,xSe=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?AZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IZe=(e,t)=>{for(var n in t||(t={}))ESe.call(t,n)&&Qoe(e,n,t[n]);if(zR)for(var n of zR(t))xSe.call(t,n)&&Qoe(e,n,t[n]);return e},OZe=(e,t)=>{var n={};for(var r in e)ESe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zR)for(var r of zR(e))t.indexOf(r)<0&&xSe.call(e,r)&&(n[r]=e[r]);return n};function RE(e){var t=e,{withinPortal:n=!0,children:r}=t,i=OZe(t,["withinPortal","children"]);return n?M.createElement(wSe,IZe({},i),r):M.createElement(M.Fragment,null,r)}RE.displayName="@mantine/core/OptionalPortal";var PZe=Object.defineProperty,kZe=Object.defineProperties,$Ze=Object.getOwnPropertyDescriptors,Joe=Object.getOwnPropertySymbols,RZe=Object.prototype.hasOwnProperty,NZe=Object.prototype.propertyIsEnumerable,Zoe=(e,t,n)=>t in e?PZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_9=(e,t)=>{for(var n in t||(t={}))RZe.call(t,n)&&Zoe(e,n,t[n]);if(Joe)for(var n of Joe(t))NZe.call(t,n)&&Zoe(e,n,t[n]);return e},eae=(e,t)=>kZe(e,$Ze(t));function DZe({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var MZe=lt((e,{color:t,radius:n,variant:r})=>({root:_9(eae(_9({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),DZe({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:eae(_9({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}}));const LZe=MZe;var FZe=Object.defineProperty,tae=Object.getOwnPropertySymbols,BZe=Object.prototype.hasOwnProperty,jZe=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?FZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zZe=(e,t)=>{for(var n in t||(t={}))BZe.call(t,n)&&nae(e,n,t[n]);if(tae)for(var n of tae(t))jZe.call(t,n)&&nae(e,n,t[n]);return e};function SSe(e){return M.createElement("svg",zZe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}SSe.displayName="@mantine/core/CloseIcon";var UZe=Object.defineProperty,UR=Object.getOwnPropertySymbols,TSe=Object.prototype.hasOwnProperty,CSe=Object.prototype.propertyIsEnumerable,rae=(e,t,n)=>t in e?UZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VZe=(e,t)=>{for(var n in t||(t={}))TSe.call(t,n)&&rae(e,n,t[n]);if(UR)for(var n of UR(t))CSe.call(t,n)&&rae(e,n,t[n]);return e},HZe=(e,t)=>{var n={};for(var r in e)TSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UR)for(var r of UR(e))t.indexOf(r)<0&&CSe.call(e,r)&&(n[r]=e[r]);return n};const qZe={xs:12,sm:14,md:16,lg:20,xl:24},WZe={size:"md"},ASe=C.forwardRef((e,t)=>{const n=gt("CloseButton",WZe,e),{iconSize:r,size:i="md"}=n,s=HZe(n,["iconSize","size"]),o=cs(),a=r||o.fn.size({size:i,sizes:qZe});return M.createElement(cC,VZe({size:i,ref:t},s),M.createElement(SSe,{width:a,height:a}))});ASe.displayName="@mantine/core/CloseButton";const rm=ASe;var GZe=Object.defineProperty,VR=Object.getOwnPropertySymbols,ISe=Object.prototype.hasOwnProperty,OSe=Object.prototype.propertyIsEnumerable,iae=(e,t,n)=>t in e?GZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YZe=(e,t)=>{for(var n in t||(t={}))ISe.call(t,n)&&iae(e,n,t[n]);if(VR)for(var n of VR(t))OSe.call(t,n)&&iae(e,n,t[n]);return e},KZe=(e,t)=>{var n={};for(var r in e)ISe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VR)for(var r of VR(e))t.indexOf(r)<0&&OSe.call(e,r)&&(n[r]=e[r]);return n};const XZe={variant:"light"},PSe=C.forwardRef((e,t)=>{const n=gt("Alert",XZe,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=KZe(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=LZe({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),b=$u(r),E=s&&`${b}-title`,w=`${b}-body`;return M.createElement(st,YZe({id:b,role:"alert","aria-labelledby":E,"aria-describedby":w,className:_(v.root,v[o],i),ref:t},y),M.createElement("div",{className:v.wrapper},c&&M.createElement("div",{className:v.icon},c),M.createElement("div",{className:v.body},s&&M.createElement("div",{className:v.title,"data-with-close-button":p||void 0},M.createElement("span",{id:E,className:v.label},s)),p&&M.createElement(rm,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),M.createElement("div",{id:w,className:v.message},a))))});PSe.displayName="@mantine/core/Alert";var QZe=Object.defineProperty,JZe=Object.defineProperties,ZZe=Object.getOwnPropertyDescriptors,sae=Object.getOwnPropertySymbols,eet=Object.prototype.hasOwnProperty,tet=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?QZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eP=(e,t)=>{for(var n in t||(t={}))eet.call(t,n)&&oae(e,n,t[n]);if(sae)for(var n of sae(t))tet.call(t,n)&&oae(e,n,t[n]);return e},net=(e,t)=>JZe(e,ZZe(t));function ret({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function iet({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function set(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var oet=lt((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:eP(net(eP(eP(eP({},e.fn.fontStyles()),e.fn.focusStyles()),set(i)),{color:iet({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:ret({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const aet=oet;var uet=Object.defineProperty,HR=Object.getOwnPropertySymbols,kSe=Object.prototype.hasOwnProperty,$Se=Object.prototype.propertyIsEnumerable,aae=(e,t,n)=>t in e?uet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cet=(e,t)=>{for(var n in t||(t={}))kSe.call(t,n)&&aae(e,n,t[n]);if(HR)for(var n of HR(t))$Se.call(t,n)&&aae(e,n,t[n]);return e},fet=(e,t)=>{var n={};for(var r in e)kSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HR)for(var r of HR(e))t.indexOf(r)<0&&$Se.call(e,r)&&(n[r]=e[r]);return n};const det={variant:"text"},RSe=C.forwardRef((e,t)=>{const n=gt("Text",det,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:b}=n,E=fet(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:w,cx:x}=aet({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return M.createElement(st,cet({ref:t,className:x(w.root,{[w.gradient]:l==="gradient"},r),component:b?"span":"div"},E))});RSe.displayName="@mantine/core/Text";const ct=RSe;var het=lt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}}));const pet=het;var met=Object.defineProperty,qR=Object.getOwnPropertySymbols,NSe=Object.prototype.hasOwnProperty,DSe=Object.prototype.propertyIsEnumerable,uae=(e,t,n)=>t in e?met(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lae=(e,t)=>{for(var n in t||(t={}))NSe.call(t,n)&&uae(e,n,t[n]);if(qR)for(var n of qR(t))DSe.call(t,n)&&uae(e,n,t[n]);return e},get=(e,t)=>{var n={};for(var r in e)NSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qR)for(var r of qR(e))t.indexOf(r)<0&&DSe.call(e,r)&&(n[r]=e[r]);return n};const yet={},MSe=C.forwardRef((e,t)=>{const n=gt("Anchor",yet,e),{component:r,className:i,unstyled:s}=n,o=get(n,["component","className","unstyled"]),{classes:a,cx:u}=pet(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return M.createElement(ct,lae(lae({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});MSe.displayName="@mantine/core/Anchor";const y6=MSe,LSe=C.createContext({}),vet=LSe.Provider;function FSe(){return C.useContext(LSe)}function v6(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var _et=Object.defineProperty,bet=Object.defineProperties,wet=Object.getOwnPropertyDescriptors,cae=Object.getOwnPropertySymbols,Eet=Object.prototype.hasOwnProperty,xet=Object.prototype.propertyIsEnumerable,fae=(e,t,n)=>t in e?_et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tP=(e,t)=>{for(var n in t||(t={}))Eet.call(t,n)&&fae(e,n,t[n]);if(cae)for(var n of cae(t))xet.call(t,n)&&fae(e,n,t[n]);return e},dae=(e,t)=>bet(e,wet(t)),Tet=lt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?v6(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:dae(tP(tP(dae(tP(tP({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const Cet=Tet;var Aet=Object.defineProperty,WR=Object.getOwnPropertySymbols,BSe=Object.prototype.hasOwnProperty,jSe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?Aet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pae=(e,t)=>{for(var n in t||(t={}))BSe.call(t,n)&&hae(e,n,t[n]);if(WR)for(var n of WR(t))jSe.call(t,n)&&hae(e,n,t[n]);return e},Iet=(e,t)=>{var n={};for(var r in e)BSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WR)for(var r of WR(e))t.indexOf(r)<0&&jSe.call(e,r)&&(n[r]=e[r]);return n};const tY=C.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=za("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=Iet(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=FSe(),{classes:b,cx:E,theme:w}=Cet({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),x=v6(r,w).reduce((S,[P,A])=>(S[`@media (min-width: ${P}px)`]={[`--mantine-${m}-width`]:`${A}px`},S),{});return M.createElement(st,pae({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:E(b.root,f)},v),p,M.createElement(Vxe,{styles:()=>({":root":pae({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},x)})}))});tY.displayName="@mantine/core/HorizontalSection";var Oet=Object.defineProperty,GR=Object.getOwnPropertySymbols,zSe=Object.prototype.hasOwnProperty,USe=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?Oet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pet=(e,t)=>{for(var n in t||(t={}))zSe.call(t,n)&&mae(e,n,t[n]);if(GR)for(var n of GR(t))USe.call(t,n)&&mae(e,n,t[n]);return e},ket=(e,t)=>{var n={};for(var r in e)zSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GR)for(var r of GR(e))t.indexOf(r)<0&&USe.call(e,r)&&(n[r]=e[r]);return n};const VSe=C.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=ket(n,["children","grow","sx"]);return M.createElement(st,Pet({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...Yg(s)]},o),r)});VSe.displayName="@mantine/core/Section";const HSe=VSe;var $et=Object.defineProperty,gae=Object.getOwnPropertySymbols,Ret=Object.prototype.hasOwnProperty,Net=Object.prototype.propertyIsEnumerable,yae=(e,t,n)=>t in e?$et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Det=(e,t)=>{for(var n in t||(t={}))Ret.call(t,n)&&yae(e,n,t[n]);if(gae)for(var n of gae(t))Net.call(t,n)&&yae(e,n,t[n]);return e};const Met={fixed:!1,position:{top:0,left:0},zIndex:za("app"),hiddenBreakpoint:"md",hidden:!1},KT=C.forwardRef((e,t)=>{const n=gt("Navbar",Met,e);return M.createElement(tY,Det({section:"navbar",__staticSelector:"Navbar",ref:t},n))});KT.Section=HSe;KT.displayName="@mantine/core/Navbar";var Let=Object.defineProperty,Fet=Object.defineProperties,Bet=Object.getOwnPropertyDescriptors,vae=Object.getOwnPropertySymbols,jet=Object.prototype.hasOwnProperty,zet=Object.prototype.propertyIsEnumerable,_ae=(e,t,n)=>t in e?Let(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b9=(e,t)=>{for(var n in t||(t={}))jet.call(t,n)&&_ae(e,n,t[n]);if(vae)for(var n of vae(t))zet.call(t,n)&&_ae(e,n,t[n]);return e},bae=(e,t)=>Fet(e,Bet(t)),Uet=lt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?v6(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:bae(b9(bae(b9(b9({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const Vet=Uet;var Het=Object.defineProperty,YR=Object.getOwnPropertySymbols,qSe=Object.prototype.hasOwnProperty,WSe=Object.prototype.propertyIsEnumerable,wae=(e,t,n)=>t in e?Het(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eae=(e,t)=>{for(var n in t||(t={}))qSe.call(t,n)&&wae(e,n,t[n]);if(YR)for(var n of YR(t))WSe.call(t,n)&&wae(e,n,t[n]);return e},qet=(e,t)=>{var n={};for(var r in e)qSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YR)for(var r of YR(e))t.indexOf(r)<0&&WSe.call(e,r)&&(n[r]=e[r]);return n};const GSe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=za("app"),section:d,unstyled:h,__staticSelector:p}=n,m=qet(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=FSe(),{classes:y,cx:v,theme:_}=Vet({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),b=typeof a=="object"&&a!==null?v6(a,_).reduce((E,[w,x])=>(E[`@media (min-width: ${w}px)`]={[`--mantine-${d}-height`]:`${x}px`},E),{}):null;return M.createElement(st,Eae({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,M.createElement(Vxe,{styles:()=>({":root":Eae({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},b)})}))});GSe.displayName="@mantine/core/VerticalSection";var Wet=Object.defineProperty,Get=Object.defineProperties,Yet=Object.getOwnPropertyDescriptors,xae=Object.getOwnPropertySymbols,Ket=Object.prototype.hasOwnProperty,Xet=Object.prototype.propertyIsEnumerable,Sae=(e,t,n)=>t in e?Wet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qet=(e,t)=>{for(var n in t||(t={}))Ket.call(t,n)&&Sae(e,n,t[n]);if(xae)for(var n of xae(t))Xet.call(t,n)&&Sae(e,n,t[n]);return e},Jet=(e,t)=>Get(e,Yet(t));const Zet={fixed:!1,position:{top:0,left:0,right:0},zIndex:za("app")},nY=C.forwardRef((e,t)=>{const n=gt("Header",Zet,e);return M.createElement(GSe,Jet(Qet({section:"header",__staticSelector:"Header"},n),{ref:t}))});nY.displayName="@mantine/core/Header";var ett=Object.defineProperty,Tae=Object.getOwnPropertySymbols,ttt=Object.prototype.hasOwnProperty,ntt=Object.prototype.propertyIsEnumerable,Cae=(e,t,n)=>t in e?ett(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rtt=(e,t)=>{for(var n in t||(t={}))ttt.call(t,n)&&Cae(e,n,t[n]);if(Tae)for(var n of Tae(t))ntt.call(t,n)&&Cae(e,n,t[n]);return e};const itt={fixed:!1,position:{top:0,right:0},zIndex:za("app"),hiddenBreakpoint:"md",hidden:!1},rY=C.forwardRef((e,t)=>{const n=gt("Aside",itt,e);return M.createElement(tY,rtt({section:"aside",__staticSelector:"Aside",ref:t},n))});rY.Section=HSe;rY.displayName="@mantine/core/Aside";var stt=Object.defineProperty,Aae=Object.getOwnPropertySymbols,ott=Object.prototype.hasOwnProperty,att=Object.prototype.propertyIsEnumerable,Iae=(e,t,n)=>t in e?stt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,utt=(e,t)=>{for(var n in t||(t={}))ott.call(t,n)&&Iae(e,n,t[n]);if(Aae)for(var n of Aae(t))att.call(t,n)&&Iae(e,n,t[n]);return e};function ltt(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var ctt=lt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:utt({flex:1,width:"100vw",boxSizing:"border-box"},ltt(t,e))}));const ftt=ctt;var dtt=Object.defineProperty,KR=Object.getOwnPropertySymbols,YSe=Object.prototype.hasOwnProperty,KSe=Object.prototype.propertyIsEnumerable,Oae=(e,t,n)=>t in e?dtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,htt=(e,t)=>{for(var n in t||(t={}))YSe.call(t,n)&&Oae(e,n,t[n]);if(KR)for(var n of KR(t))KSe.call(t,n)&&Oae(e,n,t[n]);return e},ptt=(e,t)=>{var n={};for(var r in e)YSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KR)for(var r of KR(e))t.indexOf(r)<0&&KSe.call(e,r)&&(n[r]=e[r]);return n};const mtt={fixed:!0,zIndex:za("app"),padding:"md"},WA=C.forwardRef((e,t)=>{const n=gt("AppShell",mtt,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=ptt(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:b}=ftt({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?M.createElement(M.Fragment,null,r):M.createElement(vet,{value:{fixed:u,zIndex:l}},M.createElement(st,htt({className:b(_.root,h),ref:t},v),s,M.createElement("div",{className:_.body},i,M.createElement("main",{className:_.main},r),a),o))});WA.displayName="@mantine/core/AppShell";const nP={xs:1,sm:2,md:3,lg:4,xl:5};function rP(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var gtt=lt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:nP})}px ${n} ${rP(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:nP})}px ${n} ${rP(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:nP}),borderTopColor:rP(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:nP}),borderLeftColor:rP(e,r),borderLeftStyle:n}}));const ytt=gtt;var vtt=Object.defineProperty,_tt=Object.defineProperties,btt=Object.getOwnPropertyDescriptors,XR=Object.getOwnPropertySymbols,XSe=Object.prototype.hasOwnProperty,QSe=Object.prototype.propertyIsEnumerable,Pae=(e,t,n)=>t in e?vtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kae=(e,t)=>{for(var n in t||(t={}))XSe.call(t,n)&&Pae(e,n,t[n]);if(XR)for(var n of XR(t))QSe.call(t,n)&&Pae(e,n,t[n]);return e},wtt=(e,t)=>_tt(e,btt(t)),Ett=(e,t)=>{var n={};for(var r in e)XSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XR)for(var r of XR(e))t.indexOf(r)<0&&QSe.call(e,r)&&(n[r]=e[r]);return n};const xtt={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},QR=C.forwardRef((e,t)=>{const n=gt("Divider",xtt,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=Ett(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=ytt({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,b=!(l!=null&&l.color);return M.createElement(st,kae({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&M.createElement(ct,wtt(kae({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:b})}),a))});QR.displayName="@mantine/core/Divider";var Stt=Object.defineProperty,Ttt=Object.defineProperties,Ctt=Object.getOwnPropertyDescriptors,$ae=Object.getOwnPropertySymbols,Att=Object.prototype.hasOwnProperty,Itt=Object.prototype.propertyIsEnumerable,Rae=(e,t,n)=>t in e?Stt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nae=(e,t)=>{for(var n in t||(t={}))Att.call(t,n)&&Rae(e,n,t[n]);if($ae)for(var n of $ae(t))Itt.call(t,n)&&Rae(e,n,t[n]);return e},Ott=(e,t)=>Ttt(e,Ctt(t)),Ptt=lt((e,{size:t})=>({item:Ott(Nae({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":Nae({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const ktt=Ptt;var $tt=Object.defineProperty,Dae=Object.getOwnPropertySymbols,Rtt=Object.prototype.hasOwnProperty,Ntt=Object.prototype.propertyIsEnumerable,Mae=(e,t,n)=>t in e?$tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dtt=(e,t)=>{for(var n in t||(t={}))Rtt.call(t,n)&&Mae(e,n,t[n]);if(Dae)for(var n of Dae(t))Ntt.call(t,n)&&Mae(e,n,t[n]);return e};function iY({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=ktt({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const b=(w,x)=>{const S=typeof i=="function"?i(w.value):!1;return M.createElement(c,Dtt({key:w.value,className:g.item,"data-disabled":w.disabled||void 0,"data-hovered":!w.disabled&&t===x||void 0,"data-selected":!w.disabled&&S||void 0,onMouseEnter:()=>a(x),id:`${s}-${x}`,role:"option",tabIndex:-1,"aria-selected":t===x,ref:P=>{l&&l.current&&(l.current[w.value]=P)},onMouseDown:w.disabled?null:P=>{P.preventDefault(),u(w)},disabled:w.disabled},w))};let E=null;if(e.forEach((w,x)=>{w.creatable?_=x:w.group?(E!==w.group&&(E=w.group,v.push(M.createElement("div",{className:g.separator,key:`__mantine-divider-${x}`},M.createElement(QR,{classNames:{label:g.separatorLabel},label:w.group})))),v.push(b(w,x))):y.push(b(w,x))}),h){const w=e[_];y.push(M.createElement("div",{key:oJe(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:x=>{x.preventDefault(),u(w)},tabIndex:-1,ref:x=>{l&&l.current&&(l.current[w.value]=x)}},p))}return v.length>0&&y.length>0&&y.unshift(M.createElement("div",{className:g.separator,key:"empty-group-separator"},M.createElement(QR,null))),v.length>0||y.length>0?M.createElement(M.Fragment,null,v,y):M.createElement(ct,{size:f,unstyled:m,className:g.nothingFound},d)}iY.displayName="@mantine/core/SelectItems";var Mtt=Object.defineProperty,JR=Object.getOwnPropertySymbols,JSe=Object.prototype.hasOwnProperty,ZSe=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?Mtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ltt=(e,t)=>{for(var n in t||(t={}))JSe.call(t,n)&&Lae(e,n,t[n]);if(JR)for(var n of JR(t))ZSe.call(t,n)&&Lae(e,n,t[n]);return e},Ftt=(e,t)=>{var n={};for(var r in e)JSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JR)for(var r of JR(e))t.indexOf(r)<0&&ZSe.call(e,r)&&(n[r]=e[r]);return n};const sY=C.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=Ftt(n,["label","value"]);return M.createElement("div",Ltt({ref:t},s),r||i)});sY.displayName="@mantine/core/DefaultItem";function Btt(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function eTe(...e){return t=>e.forEach(n=>Btt(n,t))}function $v(...e){return C.useCallback(eTe(...e),e)}const tTe=C.forwardRef((e,t)=>{const{children:n,...r}=e,i=C.Children.toArray(n),s=i.find(ztt);if(s){const o=s.props.children,a=i.map(u=>u===s?C.Children.count(o)>1?C.Children.only(null):C.isValidElement(o)?o.props.children:null:u);return C.createElement(eU,mi({},r,{ref:t}),C.isValidElement(o)?C.cloneElement(o,void 0,a):null)}return C.createElement(eU,mi({},r,{ref:t}),n)});tTe.displayName="Slot";const eU=C.forwardRef((e,t)=>{const{children:n,...r}=e;return C.isValidElement(n)?C.cloneElement(n,{...Utt(r,n.props),ref:eTe(t,n.ref)}):C.Children.count(n)>1?C.Children.only(null):null});eU.displayName="SlotClone";const jtt=({children:e})=>C.createElement(C.Fragment,null,e);function ztt(e){return C.isValidElement(e)&&e.type===jtt}function Utt(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const Vtt=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],GA=Vtt.reduce((e,t)=>{const n=C.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?tTe:t;return C.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),C.createElement(a,mi({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),tU=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{};function Htt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const YA=e=>{const{present:t,children:n}=e,r=qtt(t),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),s=$v(r.ref,i.ref);return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};YA.displayName="Presence";function qtt(e){const[t,n]=C.useState(),r=C.useRef({}),i=C.useRef(e),s=C.useRef("none"),o=e?"mounted":"unmounted",[a,u]=Htt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const l=iP(r.current);s.current=a==="mounted"?l:"none"},[a]),tU(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=iP(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),tU(()=>{if(t){const l=f=>{const h=iP(r.current).includes(f.animationName);f.target===t&&h&&Pv.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=iP(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function iP(e){return(e==null?void 0:e.animationName)||"none"}function Wtt(e,t=[]){let n=[];function r(s,o){const a=C.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=C.useMemo(()=>p,Object.values(p));return C.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=C.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>C.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,Gtt(i,...t)]}function Gtt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Ny(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const Ytt=C.createContext(void 0);function Ktt(e){const t=C.useContext(Ytt);return e||t||"ltr"}function Xtt(e,[t,n]){return Math.min(n,Math.max(t,e))}function _1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Qtt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const nTe="ScrollArea",[rTe,oTn]=Wtt(nTe),[Jtt,dc]=rTe(nTe),Ztt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=C.useState(null),[l,c]=C.useState(null),[f,d]=C.useState(null),[h,p]=C.useState(null),[m,g]=C.useState(null),[y,v]=C.useState(0),[_,b]=C.useState(0),[E,w]=C.useState(!1),[x,S]=C.useState(!1),P=$v(t,O=>u(O)),A=Ktt(i);return C.createElement(Jtt,{scope:n,type:r,dir:A,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:w,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:b},C.createElement(GA.div,mi({dir:A},o,{ref:P,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),ent="ScrollAreaViewport",tnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=dc(ent,n),o=C.useRef(null),a=$v(t,o,s.onViewportChange);return C.createElement(C.Fragment,null,C.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),C.createElement(GA.div,mi({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),C.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),im="ScrollAreaScrollbar",nnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=dc(im,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return C.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?C.createElement(rnt,mi({},r,{ref:t,forceMount:n})):i.type==="scroll"?C.createElement(int,mi({},r,{ref:t,forceMount:n})):i.type==="auto"?C.createElement(iTe,mi({},r,{ref:t,forceMount:n})):i.type==="always"?C.createElement(oY,mi({},r,{ref:t})):null}),rnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=dc(im,e.__scopeScrollArea),[s,o]=C.useState(!1);return C.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),C.createElement(YA,{present:n||s},C.createElement(iTe,mi({"data-state":s?"visible":"hidden"},r,{ref:t})))}),int=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=dc(im,e.__scopeScrollArea),s=e.orientation==="horizontal",o=b6(()=>u("SCROLL_END"),100),[a,u]=Qtt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),C.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),C.createElement(YA,{present:n||a!=="hidden"},C.createElement(oY,mi({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:_1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:_1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),iTe=C.forwardRef((e,t)=>{const n=dc(im,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=C.useState(!1),a=e.orientation==="horizontal",u=b6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return _w(n.viewport,u),_w(n.content,u),C.createElement(YA,{present:r||s},C.createElement(oY,mi({"data-state":s?"visible":"hidden"},i,{ref:t})))}),oY=C.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=dc(im,e.__scopeScrollArea),s=C.useRef(null),o=C.useRef(0),[a,u]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=uTe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return dnt(d,o.current,a,h)}return n==="horizontal"?C.createElement(snt,mi({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=Fae(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?C.createElement(ont,mi({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=Fae(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),snt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=dc(im,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=$v(t,u,s.onScrollbarXChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(oTe,mi({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":_6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),cTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:ZR(o.paddingLeft),paddingEnd:ZR(o.paddingRight)}})}}))}),ont=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=dc(im,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=$v(t,u,s.onScrollbarYChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(oTe,mi({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":_6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),cTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:ZR(o.paddingTop),paddingEnd:ZR(o.paddingBottom)}})}}))}),[ant,sTe]=rTe(im),oTe=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=dc(im,n),[p,m]=C.useState(null),g=$v(t,P=>m(P)),y=C.useRef(null),v=C.useRef(""),_=h.viewport,b=r.content-r.viewport,E=Ny(c),w=Ny(u),x=b6(f,10);function S(P){if(y.current){const A=P.clientX-y.current.left,O=P.clientY-y.current.top;l({x:A,y:O})}}return C.useEffect(()=>{const P=A=>{const O=A.target;(p==null?void 0:p.contains(O))&&E(A,b)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[_,p,b,E]),C.useEffect(w,[r,w]),_w(p,x),_w(h.content,x),C.createElement(ant,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:Ny(s),onThumbPointerUp:Ny(o),onThumbPositionChange:w,onThumbPointerDown:Ny(a)},C.createElement(GA.div,mi({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:_1(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(P))}),onPointerMove:_1(e.onPointerMove,S),onPointerUp:_1(e.onPointerUp,P=>{P.target.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),nU="ScrollAreaThumb",unt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sTe(nU,e.__scopeScrollArea);return C.createElement(YA,{present:n||i.hasThumb},C.createElement(lnt,mi({ref:t},r)))}),lnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=dc(nU,n),o=sTe(nU,n),{onThumbPositionChange:a}=o,u=$v(t,f=>o.onThumbChange(f)),l=C.useRef(),c=b6(()=>{l.current&&(l.current(),l.current=void 0)},100);return C.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=hnt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),C.createElement(GA.div,mi({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:_1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:_1(e.onPointerUp,o.onThumbPointerUp)}))}),aTe="ScrollAreaCorner",cnt=C.forwardRef((e,t)=>{const n=dc(aTe,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?C.createElement(fnt,mi({},e,{ref:t})):null}),fnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=dc(aTe,n),[s,o]=C.useState(0),[a,u]=C.useState(0),l=!!(s&&a);return _w(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),_w(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?C.createElement(GA.div,mi({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function ZR(e){return e?parseInt(e,10):0}function uTe(e,t){const n=e/t;return isNaN(n)?0:n}function _6(e){const t=uTe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function dnt(e,t,n,r="ltr"){const i=_6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return lTe([u,l],f)(e)}function Fae(e,t,n="ltr"){const r=_6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Xtt(e,u);return lTe([0,o],[0,a])(l)}function lTe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function cTe(e,t){return e>0&&e<t}const hnt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function b6(e,t){const n=Ny(e),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function _w(e,t){const n=Ny(t);tU(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const pnt=Ztt,mnt=tnt,Bae=nnt,jae=unt,gnt=cnt;var ynt=lt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const vnt=ynt;var _nt=Object.defineProperty,bnt=Object.defineProperties,wnt=Object.getOwnPropertyDescriptors,eN=Object.getOwnPropertySymbols,fTe=Object.prototype.hasOwnProperty,dTe=Object.prototype.propertyIsEnumerable,zae=(e,t,n)=>t in e?_nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hTe=(e,t)=>{for(var n in t||(t={}))fTe.call(t,n)&&zae(e,n,t[n]);if(eN)for(var n of eN(t))dTe.call(t,n)&&zae(e,n,t[n]);return e},Ent=(e,t)=>bnt(e,wnt(t)),pTe=(e,t)=>{var n={};for(var r in e)fTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eN)for(var r of eN(e))t.indexOf(r)<0&&dTe.call(e,r)&&(n[r]=e[r]);return n};const mTe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},w6=C.forwardRef((e,t)=>{const n=gt("ScrollArea",mTe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=pTe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=C.useState(!1),v=cs(),{classes:_,cx:b}=vnt({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return M.createElement(pnt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},M.createElement(st,hTe({className:b(_.root,i)},m),M.createElement(mnt,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:E})=>h({x:E.scrollLeft,y:E.scrollTop}):void 0},r),M.createElement(Bae,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},M.createElement(jae,{className:_.thumb})),M.createElement(Bae,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},M.createElement(jae,{className:_.thumb})),M.createElement(gnt,{className:_.corner})))}),gTe=C.forwardRef((e,t)=>{const n=gt("ScrollAreaAutosize",mTe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=pTe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return M.createElement(st,Ent(hTe({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...Yg(m)]}),M.createElement(st,{sx:{display:"flex",flexDirection:"column",flex:1}},M.createElement(w6,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});gTe.displayName="@mantine/core/ScrollAreaAutosize";w6.displayName="@mantine/core/ScrollArea";w6.Autosize=gTe;const yTe=w6;var xnt=Object.defineProperty,Snt=Object.defineProperties,Tnt=Object.getOwnPropertyDescriptors,tN=Object.getOwnPropertySymbols,vTe=Object.prototype.hasOwnProperty,_Te=Object.prototype.propertyIsEnumerable,Uae=(e,t,n)=>t in e?xnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vae=(e,t)=>{for(var n in t||(t={}))vTe.call(t,n)&&Uae(e,n,t[n]);if(tN)for(var n of tN(t))_Te.call(t,n)&&Uae(e,n,t[n]);return e},Cnt=(e,t)=>Snt(e,Tnt(t)),Ant=(e,t)=>{var n={};for(var r in e)vTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tN)for(var r of tN(e))t.indexOf(r)<0&&_Te.call(e,r)&&(n[r]=e[r]);return n};const E6=C.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Ant(n,["style"]);return M.createElement(yTe,Cnt(Vae({},i),{style:Vae({width:"100%"},r),viewportRef:t}),i.children)});E6.displayName="@mantine/core/SelectScrollArea";var Int=lt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const Ont=Int;function kp(e){return e.split("-")[0]}function KA(e){return e.split("-")[1]}function Rv(e){return["top","bottom"].includes(kp(e))?"x":"y"}function aY(e){return e==="y"?"height":"width"}function Hae(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=Rv(t),u=aY(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(kp(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(KA(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const Pnt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Hae(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:b,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Hae(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function uY(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function fC(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function lY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=uY(h),m=a[d?f==="floating"?"reference":"floating":f],g=fC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=fC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const bTe=Math.min,Fm=Math.max;function rU(e,t,n){return Fm(e,bTe(t,n))}const qae=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=uY(r),c={x:i,y:s},f=Rv(o),d=KA(o),h=aY(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let b=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;b===0&&(b=a.floating[h]);const E=y/2-v/2,w=l[m],x=b-p[h]-l[g],S=b/2-p[h]/2+E,P=rU(w,S,x),A=(d==="start"?l[m]:l[g])>0&&S!==P&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(A?S<w?w-S:x-S:0),data:{[f]:P,centerOffset:S-P}}}}),knt={left:"right",right:"left",bottom:"top",top:"bottom"};function nN(e){return e.replace(/left|right|bottom|top/g,t=>knt[t])}function $nt(e,t,n){n===void 0&&(n=!1);const r=KA(e),i=Rv(e),s=aY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=nN(o)),{main:o,cross:nN(o)}}const Rnt={start:"end",end:"start"};function Wae(e){return e.replace(/start|end/g,t=>Rnt[t])}const Nnt=["top","right","bottom","left"];Nnt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const wTe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=kp(r),g=f||(m===o||!h?[nN(o)]:function(S){const P=nN(S);return[Wae(S),P,Wae(P)]}(o)),y=[o,...g],v=await lY(t,p),_=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:S,cross:P}=$nt(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[S],v[P])}if(b=[...b,{placement:r,overflows:_}],!_.every(S=>S<=0)){var E,w;const S=((E=(w=i.flip)==null?void 0:w.index)!=null?E:0)+1,P=y[S];if(P)return{data:{index:S,overflows:b},reset:{placement:P}};let A="bottom";switch(d){case"bestFit":{var x;const O=(x=b.map(z=>[z,z.overflows.filter(D=>D>0).reduce((D,R)=>D+R,0)]).sort((z,D)=>z[1]-D[1])[0])==null?void 0:x[0].placement;O&&(A=O);break}case"initialPlacement":A=o}if(r!==A)return{reset:{placement:A}}}return{}}}},ETe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=kp(a),d=KA(a),h=Rv(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function xTe(e){return e==="x"?"y":"x"}const cY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await lY(t,u),f=Rv(kp(i)),d=xTe(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=rU(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=rU(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Dnt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=Rv(i),d=xTe(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const E=f==="y"?"height":"width",w=s.reference[f]-s.floating[E]+g.mainAxis,x=s.reference[f]+s.reference[E]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v,_,b;const E=f==="y"?"width":"height",w=["top","left"].includes(kp(i)),x=s.reference[d]-s.floating[E]+(w&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[E]+(w?0:(_=(b=o.offset)==null?void 0:b[d])!=null?_:0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[f]:h,[d]:p}}}},Mnt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await lY(t,a),l=kp(n),c=KA(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=Fm(u.left,0),p=Fm(u.right,0),m=Fm(u.top,0),g=Fm(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:Fm(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:Fm(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},STe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=fC(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=uY(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(Rv(r)==="x"){const w=d[0],x=d[d.length-1],S=kp(r)==="top",P=w.top,A=x.bottom,O=S?w.left:x.left,z=S?w.right:x.right;return{top:P,bottom:A,left:O,right:z,width:z-O,height:A-P,x:O,y:P}}const g=kp(r)==="left",y=Fm(...d.map(w=>w.right)),v=bTe(...d.map(w=>w.left)),_=d.filter(w=>g?w.left===v:w.right===y),b=_[0].top,E=_[_.length-1].bottom;return{top:b,bottom:E,left:v,right:y,width:y-v,height:E-b,x:v,y:b}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function TTe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function sm(e){if(e==null)return window;if(!TTe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Kg(e){return sm(e).getComputedStyle(e)}function Xg(e){return TTe(e)?"":e?(e.nodeName||"").toLowerCase():""}function CTe(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function $p(e){return e instanceof sm(e).HTMLElement}function hp(e){return e instanceof sm(e).Element}function Gae(e){return typeof ShadowRoot>"u"?!1:e instanceof sm(e).ShadowRoot||e instanceof ShadowRoot}function x6(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Kg(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function Lnt(e){return["table","td","th"].includes(Xg(e))}function iU(e){const t=/firefox/i.test(CTe()),n=Kg(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function ATe(){return!/^((?!chrome|android).)*safari/i.test(CTe())}function fY(e){return["html","body","#document"].includes(Xg(e))}const Yae=Math.min,XT=Math.max,rN=Math.round;function pp(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&$p(e)&&(u=e.offsetWidth>0&&rN(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&rN(a.height)/e.offsetHeight||1);const c=hp(e)?sm(e):window,f=!ATe()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function Ag(e){return(t=e,(t instanceof sm(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function S6(e){return hp(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ITe(e){return pp(Ag(e)).left+S6(e).scrollLeft}function Fnt(e,t,n){const r=$p(t),i=Ag(t),s=pp(e,r&&function(u){const l=pp(u);return rN(l.width)!==u.offsetWidth||rN(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((Xg(t)!=="body"||x6(i))&&(o=S6(t)),$p(t)){const u=pp(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=ITe(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function iN(e){if(Xg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(Gae(e)?e.host:null)||Ag(e);return Gae(t)?t.host:t}function Kae(e){return $p(e)&&Kg(e).position!=="fixed"?e.offsetParent:null}function Xae(e){const t=sm(e);let n=Kae(e);for(;n&&Lnt(n)&&Kg(n).position==="static";)n=Kae(n);return n&&(Xg(n)==="html"||Xg(n)==="body"&&Kg(n).position==="static"&&!iU(n))?t:n||function(r){let i=iN(r);for(;$p(i)&&!fY(i);){if(iU(i))return i;i=iN(i)}return null}(e)||t}function Qae(e){if($p(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=pp(e);return{width:t.width,height:t.height}}function OTe(e){const t=iN(e);return fY(t)?e.ownerDocument.body:$p(t)&&x6(t)?t:OTe(t)}function mp(e,t){var n;t===void 0&&(t=[]);const r=OTe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=sm(r),o=i?[s].concat(s.visualViewport||[],x6(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(mp(o))}function Jae(e,t,n){return t==="viewport"?fC(function(r,i){const s=sm(r),o=Ag(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=ATe();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):hp(t)?function(r,i){const s=pp(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):fC(function(r){var i;const s=Ag(r),o=S6(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=XT(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=XT(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+ITe(r);const f=-o.scrollTop;return Kg(a||s).direction==="rtl"&&(c+=XT(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(Ag(e)))}const Bnt={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=mp(l).filter(h=>hp(h)&&Xg(h)!=="body"),f=l,d=null;for(;hp(f)&&!fY(f);){const h=Kg(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!iU(f)?c=c.filter(p=>p!==f):d=h,f=iN(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=Jae(t,c,i);return l.top=XT(f.top,l.top),l.right=Yae(f.right,l.right),l.bottom=Yae(f.bottom,l.bottom),l.left=XT(f.left,l.left),l},Jae(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=$p(n),s=Ag(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((Xg(n)!=="body"||x6(s))&&(o=S6(n)),$p(n))){const u=pp(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:hp,getDimensions:Qae,getOffsetParent:Xae,getDocumentElement:Ag,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:Fnt(t,Xae(n),r),floating:{...Qae(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Kg(e).direction==="rtl"};function jnt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...hp(e)?mp(e):e.contextElement?mp(e.contextElement):[],...mp(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),hp(e)&&!a&&f.observe(e),hp(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?pp(e):null;return a&&function h(){const p=pp(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const znt=(e,t,n)=>Pnt(e,t,{platform:Bnt,...n});var sU=typeof document<"u"?C.useLayoutEffect:C.useEffect;function sN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!sN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!sN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Unt(e){const t=C.useRef(e);return sU(()=>{t.current=e}),t}function Vnt(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=C.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=C.useState(t);sN(a,t)||u(t);const l=C.useRef(null),c=C.useRef(null),f=C.useRef(null),d=C.useRef(s),h=Unt(i),p=C.useCallback(()=>{!l.current||!c.current||znt(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(b=>{m.current&&!sN(d.current,b)&&(d.current=b,Pv.flushSync(()=>{o(b)}))})},[a,n,r]);sU(()=>{m.current&&p()},[p]);const m=C.useRef(!1);sU(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=C.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const b=h.current(l.current,c.current,p);f.current=b}else p()},[p,h]),y=C.useCallback(b=>{l.current=b,g()},[g]),v=C.useCallback(b=>{c.current=b,g()},[g]),_=C.useMemo(()=>({reference:l,floating:c}),[]);return C.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const PTe=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?qae({element:t.current,padding:n}).fn(i):{}:t?qae({element:t,padding:n}).fn(i):{}}}};var bw=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Hnt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let w9=!1,qnt=0;const Zae=()=>"floating-ui-"+qnt++;function Wnt(){const[e,t]=C.useState(()=>w9?Zae():void 0);return bw(()=>{e==null&&t(Zae())},[]),C.useEffect(()=>{w9||(w9=!0)},[]),e}const eue=F1.useId,tue=eue??Wnt,Gnt=C.createContext(null),Ynt=C.createContext(null),kTe=()=>{var e,t;return(e=(t=C.useContext(Gnt))==null?void 0:t.id)!=null?e:null},dY=()=>C.useContext(Ynt);function Ym(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function $Te(e){var t;return(t=Ym(e).defaultView)!=null?t:window}function Qy(e){return e?e instanceof $Te(e).Element:!1}function Knt(e){return e?e instanceof $Te(e).HTMLElement:!1}const nue=F1.useInsertionEffect;function Xnt(e){const t=C.useRef(()=>{});return nue?nue(()=>{t.current=e}):t.current=e,C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function hY(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=C.useState(null),c=dY(),f=C.useRef(null),d=C.useRef({}),h=C.useState(()=>Hnt())[0],p=Vnt({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=Xnt(n),g=C.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=C.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);bw(()=>{const b=c==null?void 0:c.nodesRef.current.find(E=>E.id===a);b&&(b.context=y)});const{reference:v}=p,_=C.useCallback(b=>{(Qy(b)||b===null)&&(y.refs.domReference.current=b,l(b)),v(b)},[v,y.refs]);return C.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function E9(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const Qnt=function(e){e===void 0&&(e=[]);const t=e,n=C.useCallback(s=>E9(s,e,"reference"),t),r=C.useCallback(s=>E9(s,e,"floating"),t),i=C.useCallback(s=>E9(s,e,"item"),t);return C.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function x9(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function Jnt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function rue(e){const t=C.useRef(e);return bw(()=>{t.current=e}),t}function Znt(e){const t=C.useRef();return bw(()=>{t.current=e},[e]),t.current}function Zk(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const ert=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=dY(),m=kTe(),g=rue(i),y=rue(r),v=Znt(u),_=C.useRef(),b=C.useRef(),E=C.useRef(),w=C.useRef(),x=C.useRef(!0),S=C.useRef(!1),P=C.useCallback(()=>{var D;const R=(D=c.current.openEvent)==null?void 0:D.type;return(R==null?void 0:R.includes("mouse"))&&R!=="mousedown"},[c]);C.useEffect(()=>{if(!n)return;function D(){clearTimeout(b.current),clearTimeout(w.current),x.current=!0}return f.on("dismiss",D),()=>{f.off("dismiss",D)}},[n,f,d]),C.useEffect(()=>{if(!n||!g.current)return;function D(){P()&&l(!1)}const R=Ym(d.floating.current).documentElement;return R.addEventListener("mouseleave",D),()=>{R.removeEventListener("mouseleave",D)}},[d,l,n,g,c,P]);const A=C.useCallback(function(D){D===void 0&&(D=!0);const R=Zk(y.current,"close",_.current);R&&!E.current?(clearTimeout(b.current),b.current=setTimeout(()=>l(!1),R)):D&&(clearTimeout(b.current),l(!1))},[y,l]),O=C.useCallback(()=>{E.current&&(Ym(d.floating.current).removeEventListener("pointermove",E.current),E.current=void 0)},[d]),z=C.useCallback(()=>{Ym(d.floating.current).body.style.pointerEvents="",S.current=!1},[d]);return C.useEffect(()=>{if(!n)return;function D(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function R(H){if(clearTimeout(b.current),x.current=!1,s&&_.current!=="mouse"||o>0&&Zk(y.current,"open")===0)return;c.current.openEvent=H;const U=Zk(y.current,"open",_.current);U?b.current=setTimeout(()=>{l(!0)},U):l(!0)}function N(H){if(D())return;const U=Ym(d.floating.current);if(clearTimeout(w.current),g.current){clearTimeout(b.current),E.current&&U.removeEventListener("pointermove",E.current),E.current=g.current({...e,tree:p,x:H.clientX,y:H.clientY,onClose(){z(),O(),A()}}),U.addEventListener("pointermove",E.current);return}A()}function L(H){D()||g.current==null||g.current({...e,tree:p,x:H.clientX,y:H.clientY,leave:!0,onClose(){z(),O(),A()}})(H)}const V=d.floating.current,j=d.domReference.current;if(Qy(j))return u&&j.addEventListener("mouseleave",L),V==null||V.addEventListener("mouseleave",L),a&&j.addEventListener("mousemove",R,{once:!0}),j.addEventListener("mouseenter",R),j.addEventListener("mouseleave",N),()=>{u&&j.removeEventListener("mouseleave",L),V==null||V.removeEventListener("mouseleave",L),a&&j.removeEventListener("mousemove",R),j.removeEventListener("mouseenter",R),j.removeEventListener("mouseleave",N)}},[h.domReference,n,e,s,o,a,A,O,z,l,u,p,d,y,g,c]),bw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&P()){Ym(d.floating.current).body.style.pointerEvents="none",S.current=!0;const N=d.domReference.current,L=d.floating.current;if(Qy(N)&&L){var D,R;const V=p==null||(D=p.nodesRef.current.find(j=>j.id===m))==null||(R=D.context)==null?void 0:R.refs.floating.current;return V&&(V.style.pointerEvents=""),N.style.pointerEvents="auto",L.style.pointerEvents="auto",()=>{N.style.pointerEvents="",L.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,P]),bw(()=>{v&&!u&&(_.current=void 0,O(),z())}),C.useEffect(()=>()=>{O(),clearTimeout(b.current),clearTimeout(w.current),S.current&&z()},[n,O,z]),C.useMemo(()=>{if(!n)return{};function D(R){_.current=R.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove(){u||o===0||(clearTimeout(w.current),w.current=setTimeout(()=>{x.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(){A(!1)}}}},[n,o,u,l,A])},RTe=C.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),NTe=()=>C.useContext(RTe),trt=e=>{let{children:t,delay:n}=e;const[r,i]=C.useState({delay:n,initialDelay:n,currentId:null}),s=C.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return C.createElement(RTe.Provider,{value:C.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},nrt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=NTe();C.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:Zk(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),C.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},rrt=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=tue(),o=tue();return C.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function S9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const irt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},srt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ort=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=dY(),g=kTe()!=null,y=C.useRef(!1);return C.useEffect(()=>{if(!n||!a)return;function v(x){if(x.key==="Escape"){if(!p&&m&&x9(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(x){const S=y.current;if(y.current=!1,S)return;const P=Jnt(x);if(Qy(P)&&i.floating.current){var A;const z=(A=i.floating.current.ownerDocument.defaultView)!=null?A:window,D=P.scrollWidth>P.clientWidth,R=P.scrollHeight>P.clientHeight;let N=R&&x.offsetX>P.clientWidth;if(R&&z.getComputedStyle(P).direction==="rtl"&&(N=x.offsetX<=P.offsetWidth-P.clientWidth),N||D&&x.offsetY>P.clientHeight)return}const O=m&&x9(m.nodesRef.current,o).some(z=>{var D;return S9(x,(D=z.context)==null?void 0:D.refs.floating.current)});S9(x,i.floating.current)||S9(x,i.domReference.current)||O||!p&&m&&x9(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function b(){r(!1)}const E=Ym(i.floating.current);u&&E.addEventListener("keydown",v),l&&E.addEventListener(c,_);let w=[];return h&&(Qy(i.domReference.current)&&(w=mp(i.domReference.current)),Qy(i.floating.current)&&(w=w.concat(mp(i.floating.current))),!Qy(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(w=w.concat(mp(i.reference.current.contextElement)))),w=w.filter(x=>{var S;return x!==((S=E.defaultView)==null?void 0:S.visualViewport)}),w.forEach(x=>{x.addEventListener("scroll",b,{passive:!0})}),()=>{u&&E.removeEventListener("keydown",v),l&&E.removeEventListener(c,_),w.forEach(x=>{x.removeEventListener("scroll",b)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),C.useEffect(()=>{y.current=!1},[l,c]),C.useMemo(()=>a?{reference:{[irt[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[srt[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},art=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=C.useRef(""),c=C.useRef(!1),f=C.useRef();return C.useEffect(()=>{var d;if(!a)return;const p=(d=Ym(s.floating.current).defaultView)!=null?d:window;function m(){!n&&Knt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),C.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),C.useEffect(()=>()=>{clearTimeout(f.current)},[]),C.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function DTe({opened:e,floating:t,positionDependencies:n}){const[r,i]=C.useState(0);C.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return jnt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),Es(()=>{t.update()},n),Es(()=>{i(s=>s+1)},[e])}function urt(e){const t=[ETe(e.offset)];return e.middlewares.shift&&t.push(cY({limiter:Dnt()})),e.middlewares.flip&&t.push(wTe()),e.middlewares.inline&&t.push(STe()),t.push(PTe({element:e.arrowRef})),t}function lrt(e){const[t,n]=ia({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=hY({placement:e.position,middleware:[...urt(e),...e.width==="target"?[Mnt({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return DTe({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),Es(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const MTe={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[crt,LTe]=jG(MTe.context);var frt=Object.defineProperty,drt=Object.defineProperties,hrt=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,FTe=Object.prototype.hasOwnProperty,BTe=Object.prototype.propertyIsEnumerable,iue=(e,t,n)=>t in e?frt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sP=(e,t)=>{for(var n in t||(t={}))FTe.call(t,n)&&iue(e,n,t[n]);if(oN)for(var n of oN(t))BTe.call(t,n)&&iue(e,n,t[n]);return e},prt=(e,t)=>drt(e,hrt(t)),mrt=(e,t)=>{var n={};for(var r in e)FTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oN)for(var r of oN(e))t.indexOf(r)<0&&BTe.call(e,r)&&(n[r]=e[r]);return n};const jTe=C.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=mrt(n,["children","refProp","popupType"]);if(!VA(r))throw new Error(MTe.children);const a=o,u=LTe(),l=Os(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return C.cloneElement(r,sP(prt(sP(sP(sP({},a),c),u.targetProps),{className:vxe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});jTe.displayName="@mantine/core/PopoverTarget";var grt=lt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const yrt=grt;var vrt=Object.defineProperty,sue=Object.getOwnPropertySymbols,_rt=Object.prototype.hasOwnProperty,brt=Object.prototype.propertyIsEnumerable,oue=(e,t,n)=>t in e?vrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m_=(e,t)=>{for(var n in t||(t={}))_rt.call(t,n)&&oue(e,n,t[n]);if(sue)for(var n of sue(t))brt.call(t,n)&&oue(e,n,t[n]);return e};const aue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function zTe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in JO?m_(m_(m_({transitionProperty:JO[e].transitionProperty},i),JO[e].common),JO[e][aue[t]]):null:m_(m_(m_({transitionProperty:e.transitionProperty},i),e.common),e[aue[t]])}function UTe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=cs(),l=g6(),c=u.respectReducedMotion?l:!1,[f,d]=C.useState(r?"entered":"exited");let h=c?0:e;const p=C.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return Es(()=>{m(r)},[r]),C.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function XA({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=UTe({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?M.createElement(M.Fragment,null,i({})):null:f==="exited"?null:M.createElement(M.Fragment,null,i(zTe({transition:e,duration:c,state:f,timingFunction:d})))}XA.displayName="@mantine/core/Transition";function VTe({children:e,active:t=!0,refProp:n="ref"}){const r=eY(t),i=Os(r,e==null?void 0:e.ref);return VA(e)?C.cloneElement(e,{[n]:i}):e}VTe.displayName="@mantine/core/FocusTrap";var wrt=Object.defineProperty,Ert=Object.defineProperties,xrt=Object.getOwnPropertyDescriptors,uue=Object.getOwnPropertySymbols,Srt=Object.prototype.hasOwnProperty,Trt=Object.prototype.propertyIsEnumerable,lue=(e,t,n)=>t in e?wrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Em=(e,t)=>{for(var n in t||(t={}))Srt.call(t,n)&&lue(e,n,t[n]);if(uue)for(var n of uue(t))Trt.call(t,n)&&lue(e,n,t[n]);return e},oP=(e,t)=>Ert(e,xrt(t));function cue(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function fue(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const Crt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Art({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[Crt[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?oP(Em(Em({},c),cue(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?oP(Em(Em({},c),cue(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?oP(Em(Em({},c),fue(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?oP(Em(Em({},c),fue(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var Irt=Object.defineProperty,Ort=Object.defineProperties,Prt=Object.getOwnPropertyDescriptors,aN=Object.getOwnPropertySymbols,HTe=Object.prototype.hasOwnProperty,qTe=Object.prototype.propertyIsEnumerable,due=(e,t,n)=>t in e?Irt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,krt=(e,t)=>{for(var n in t||(t={}))HTe.call(t,n)&&due(e,n,t[n]);if(aN)for(var n of aN(t))qTe.call(t,n)&&due(e,n,t[n]);return e},$rt=(e,t)=>Ort(e,Prt(t)),Rrt=(e,t)=>{var n={};for(var r in e)HTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aN)for(var r of aN(e))t.indexOf(r)<0&&qTe.call(e,r)&&(n[r]=e[r]);return n};const pY=C.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=Rrt(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=cs();return u?M.createElement("div",$rt(krt({},f),{ref:t,style:Art({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});pY.displayName="@mantine/core/FloatingArrow";var Nrt=Object.defineProperty,Drt=Object.defineProperties,Mrt=Object.getOwnPropertyDescriptors,uN=Object.getOwnPropertySymbols,WTe=Object.prototype.hasOwnProperty,GTe=Object.prototype.propertyIsEnumerable,hue=(e,t,n)=>t in e?Nrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aP=(e,t)=>{for(var n in t||(t={}))WTe.call(t,n)&&hue(e,n,t[n]);if(uN)for(var n of uN(t))GTe.call(t,n)&&hue(e,n,t[n]);return e},pue=(e,t)=>Drt(e,Mrt(t)),Lrt=(e,t)=>{var n={};for(var r in e)WTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uN)for(var r of uN(e))t.indexOf(r)<0&&GTe.call(e,r)&&(n[r]=e[r]);return n};function YTe(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=Lrt(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=D0(),f=LTe(),{classes:d,cx:h}=yrt({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=ZG({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:M.createElement(RE,{withinPortal:f.withinPortal},M.createElement(XA,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return M.createElement(VTe,{active:f.trapFocus},M.createElement(st,aP(pue(aP({},m),{tabIndex:-1,ref:f.floating,style:pue(aP(aP({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:wKe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,M.createElement(pY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}YTe.displayName="@mantine/core/PopoverDropdown";function KTe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var mue=Object.getOwnPropertySymbols,Frt=Object.prototype.hasOwnProperty,Brt=Object.prototype.propertyIsEnumerable,jrt=(e,t)=>{var n={};for(var r in e)Frt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mue)for(var r of mue(e))t.indexOf(r)<0&&Brt.call(e,r)&&(n[r]=e[r]);return n};const zrt={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:za("popover"),__staticSelector:"Popover",width:"max-content"};function di(e){var t,n,r,i,s,o;const a=C.useRef(null),u=gt("Popover",zrt,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,unstyled:x,classNames:S,styles:P,closeOnClickOutside:A,withinPortal:O,closeOnEscape:z,clickOutsideEvents:D,trapFocus:R,onClose:N,onOpen:L,onChange:V,zIndex:j,radius:H,shadow:U,id:k,defaultOpened:$,exitTransitionDuration:q,__staticSelector:F,withRoles:B,disabled:Q,returnFocus:se}=u,ae=jrt(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ce,le]=C.useState(null),[ge,ue]=C.useState(null),Fe=$u(k),ke=cs(),Ge=lrt({middlewares:v,width:y,position:KTe(ke.dir,c),offset:f+(_?b/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:$,onChange:V,onOpen:L,onClose:N});bQe(()=>A&&Ge.onClose(),D,[ce,ge]);const Re=C.useCallback(Me=>{le(Me),Ge.floating.reference(Me)},[Ge.floating.reference]),Oe=C.useCallback(Me=>{ue(Me),Ge.floating.floating(Me)},[Ge.floating.floating]);return M.createElement(QG,{classNames:S,styles:P,unstyled:x,staticSelector:F},M.createElement(crt,{value:{returnFocus:se,disabled:Q,controlled:Ge.controlled,reference:Re,floating:Oe,x:Ge.floating.x,y:Ge.floating.y,arrowX:(r=(n=(t=Ge.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ge.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ge.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:q,width:y,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,placement:Ge.floating.placement,trapFocus:R,withinPortal:O,zIndex:j,radius:H,shadow:U,closeOnEscape:z,onClose:Ge.onClose,onToggle:Ge.onToggle,getTargetId:()=>`${Fe}-target`,getDropdownId:()=>`${Fe}-dropdown`,withRoles:B,targetProps:ae}},l))}di.Target=jTe;di.Dropdown=YTe;di.displayName="@mantine/core/Popover";var Urt=Object.defineProperty,lN=Object.getOwnPropertySymbols,XTe=Object.prototype.hasOwnProperty,QTe=Object.prototype.propertyIsEnumerable,gue=(e,t,n)=>t in e?Urt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vrt=(e,t)=>{for(var n in t||(t={}))XTe.call(t,n)&&gue(e,n,t[n]);if(lN)for(var n of lN(t))QTe.call(t,n)&&gue(e,n,t[n]);return e},Hrt=(e,t)=>{var n={};for(var r in e)XTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lN)for(var r of lN(e))t.indexOf(r)<0&&QTe.call(e,r)&&(n[r]=e[r]);return n};function qrt(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=Hrt(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Ont(null,{name:u,styles:l,classNames:c,unstyled:f});return M.createElement(di.Dropdown,Vrt({p:0,onMouseDown:p=>p.preventDefault()},d),M.createElement("div",{style:{maxHeight:i,display:"flex"}},M.createElement(st,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==E6?"auto":void 0},"data-combobox-popover":!0,ref:a},M.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function Ig({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return M.createElement(di,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}Ig.Target=di.Target;Ig.Dropdown=qrt;var Wrt=Object.defineProperty,Grt=Object.defineProperties,Yrt=Object.getOwnPropertyDescriptors,cN=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,ZTe=Object.prototype.propertyIsEnumerable,yue=(e,t,n)=>t in e?Wrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T9=(e,t)=>{for(var n in t||(t={}))JTe.call(t,n)&&yue(e,n,t[n]);if(cN)for(var n of cN(t))ZTe.call(t,n)&&yue(e,n,t[n]);return e},Krt=(e,t)=>Grt(e,Yrt(t)),Xrt=(e,t)=>{var n={};for(var r in e)JTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cN)for(var r of cN(e))t.indexOf(r)<0&&ZTe.call(e,r)&&(n[r]=e[r]);return n};function e2e(e,t,n){const r=gt(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x}=r,S=Xrt(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),P=$u(v),{systemStyles:A,rest:O}=Ef(S);return Krt(T9({},O),{classNames:u,styles:l,unstyled:f,wrapperProps:T9(T9({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:P,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x},y),A),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:P,size:_,__staticSelector:d,invalid:!!o}})}var Qrt=lt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const Jrt=Qrt;var Zrt=Object.defineProperty,fN=Object.getOwnPropertySymbols,t2e=Object.prototype.hasOwnProperty,n2e=Object.prototype.propertyIsEnumerable,vue=(e,t,n)=>t in e?Zrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eit=(e,t)=>{for(var n in t||(t={}))t2e.call(t,n)&&vue(e,n,t[n]);if(fN)for(var n of fN(t))n2e.call(t,n)&&vue(e,n,t[n]);return e},tit=(e,t)=>{var n={};for(var r in e)t2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fN)for(var r of fN(e))t.indexOf(r)<0&&n2e.call(e,r)&&(n[r]=e[r]);return n};const mY=C.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=tit(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=Jrt({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return M.createElement(st,eit({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&M.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});mY.displayName="@mantine/core/InputLabel";var nit=lt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const rit=nit;var iit=Object.defineProperty,dN=Object.getOwnPropertySymbols,r2e=Object.prototype.hasOwnProperty,i2e=Object.prototype.propertyIsEnumerable,_ue=(e,t,n)=>t in e?iit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sit=(e,t)=>{for(var n in t||(t={}))r2e.call(t,n)&&_ue(e,n,t[n]);if(dN)for(var n of dN(t))i2e.call(t,n)&&_ue(e,n,t[n]);return e},oit=(e,t)=>{var n={};for(var r in e)r2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dN)for(var r of dN(e))t.indexOf(r)<0&&i2e.call(e,r)&&(n[r]=e[r]);return n};const gY=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=oit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=rit({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return M.createElement(ct,sit({className:d(f.error,i),ref:t,role:"alert"},c),r)});gY.displayName="@mantine/core/InputError";var ait=lt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const uit=ait;var lit=Object.defineProperty,hN=Object.getOwnPropertySymbols,s2e=Object.prototype.hasOwnProperty,o2e=Object.prototype.propertyIsEnumerable,bue=(e,t,n)=>t in e?lit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cit=(e,t)=>{for(var n in t||(t={}))s2e.call(t,n)&&bue(e,n,t[n]);if(hN)for(var n of hN(t))o2e.call(t,n)&&bue(e,n,t[n]);return e},fit=(e,t)=>{var n={};for(var r in e)s2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hN)for(var r of hN(e))t.indexOf(r)<0&&o2e.call(e,r)&&(n[r]=e[r]);return n};const yY=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=fit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=uit({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return M.createElement(ct,cit({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});yY.displayName="@mantine/core/InputDescription";const a2e=C.createContext({offsetBottom:!1,offsetTop:!1}),dit=a2e.Provider,hit=()=>C.useContext(a2e);function pit(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var mit=Object.defineProperty,git=Object.defineProperties,yit=Object.getOwnPropertyDescriptors,wue=Object.getOwnPropertySymbols,vit=Object.prototype.hasOwnProperty,_it=Object.prototype.propertyIsEnumerable,Eue=(e,t,n)=>t in e?mit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bit=(e,t)=>{for(var n in t||(t={}))vit.call(t,n)&&Eue(e,n,t[n]);if(wue)for(var n of wue(t))_it.call(t,n)&&Eue(e,n,t[n]);return e},wit=(e,t)=>git(e,yit(t)),Eit=lt(e=>({root:wit(bit({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const xit=Eit;var Sit=Object.defineProperty,Tit=Object.defineProperties,Cit=Object.getOwnPropertyDescriptors,pN=Object.getOwnPropertySymbols,u2e=Object.prototype.hasOwnProperty,l2e=Object.prototype.propertyIsEnumerable,xue=(e,t,n)=>t in e?Sit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uy=(e,t)=>{for(var n in t||(t={}))u2e.call(t,n)&&xue(e,n,t[n]);if(pN)for(var n of pN(t))l2e.call(t,n)&&xue(e,n,t[n]);return e},Sue=(e,t)=>Tit(e,Cit(t)),Ait=(e,t)=>{var n={};for(var r in e)u2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&l2e.call(e,r)&&(n[r]=e[r]);return n};const Iit={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},c2e=C.forwardRef((e,t)=>{const n=gt("InputWrapper",Iit,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:b,withAsterisk:E}=n,w=Ait(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:x,cx:S}=xit(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),P={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},A=typeof E=="boolean"?E:o,O=i&&M.createElement(mY,uy(uy({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:A},P),f),i),z=l&&M.createElement(yY,Sue(uy(uy({key:"description"},d),P),{size:(d==null?void 0:d.size)||P.size}),l),D=M.createElement(C.Fragment,{key:"input"},y(s)),R=typeof u!="boolean"&&u&&M.createElement(gY,Sue(uy(uy({},h),P),{size:(h==null?void 0:h.size)||P.size,key:"error"}),u),N=b.map(L=>{switch(L){case"label":return O;case"input":return D;case"description":return z;case"error":return R;default:return null}});return M.createElement(dit,{value:pit(b,{hasDescription:!!z,hasError:!!R})},M.createElement(st,uy({className:S(x.root,r),ref:t},w),N))});c2e.displayName="@mantine/core/InputWrapper";var Oit=Object.defineProperty,Pit=Object.defineProperties,kit=Object.getOwnPropertyDescriptors,Tue=Object.getOwnPropertySymbols,$it=Object.prototype.hasOwnProperty,Rit=Object.prototype.propertyIsEnumerable,Cue=(e,t,n)=>t in e?Oit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C9=(e,t)=>{for(var n in t||(t={}))$it.call(t,n)&&Cue(e,n,t[n]);if(Tue)for(var n of Tue(t))Rit.call(t,n)&&Cue(e,n,t[n]);return e},Aue=(e,t)=>Pit(e,kit(t));const zo={xs:30,sm:36,md:42,lg:50,xl:60};function Nit({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Dit=lt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:zo}),paddingLeft:e.fn.size({size:t,sizes:zo})/3,paddingRight:a?o:e.fn.size({size:t,sizes:zo})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:C9(Aue(C9(Aue(C9({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:zo}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:zo})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Nit({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:zo})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:zo}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}});const Mit=Dit;var Lit=Object.defineProperty,Fit=Object.defineProperties,Bit=Object.getOwnPropertyDescriptors,mN=Object.getOwnPropertySymbols,f2e=Object.prototype.hasOwnProperty,d2e=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?Lit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uP=(e,t)=>{for(var n in t||(t={}))f2e.call(t,n)&&Iue(e,n,t[n]);if(mN)for(var n of mN(t))d2e.call(t,n)&&Iue(e,n,t[n]);return e},Oue=(e,t)=>Fit(e,Bit(t)),jit=(e,t)=>{var n={};for(var r in e)f2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&d2e.call(e,r)&&(n[r]=e[r]);return n};const zit={rightSectionWidth:36,size:"sm",variant:"default"},NE=C.forwardRef((e,t)=>{const n=gt("Input",zit,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:b,sx:E,unstyled:w,pointer:x}=n,S=jit(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:P,offsetTop:A}=hit(),{classes:O,cx:z}=Mit({radius:p,size:m,multiline:b,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:P,offsetTop:A,pointer:x},{classNames:y,styles:v,name:["Input",_],unstyled:w}),{systemStyles:D,rest:R}=Ef(S);return M.createElement(st,uP(uP({className:z(O.wrapper,r),sx:E,style:l},D),g),u&&M.createElement("div",{className:O.icon},u),M.createElement(st,Oue(uP({component:"input"},R),{ref:t,required:s,"aria-invalid":i,disabled:o,className:z(O[`${a}Variant`],O.input,{[O.withIcon]:u,[O.invalid]:i,[O.disabled]:o})})),d&&M.createElement("div",Oue(uP({},h),{className:O.rightSection}),d))});NE.displayName="@mantine/core/Input";NE.Wrapper=c2e;NE.Label=mY;NE.Description=yY;NE.Error=gY;const as=NE;var Uit=Object.defineProperty,Vit=Object.defineProperties,Hit=Object.getOwnPropertyDescriptors,Pue=Object.getOwnPropertySymbols,qit=Object.prototype.hasOwnProperty,Wit=Object.prototype.propertyIsEnumerable,kue=(e,t,n)=>t in e?Uit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A9=(e,t)=>{for(var n in t||(t={}))qit.call(t,n)&&kue(e,n,t[n]);if(Pue)for(var n of Pue(t))Wit.call(t,n)&&kue(e,n,t[n]);return e},Git=(e,t)=>Vit(e,Hit(t));const I9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Yit={xs:4,sm:4,md:6,lg:8,xl:10};function Kit({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:Yit});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var Xit=lt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in I9?I9[n]:I9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:A9(Git(A9(A9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),Kit({theme:e,variant:o,color:t,size:n,gradient:i}))}});const Qit=Xit;var Jit=Object.defineProperty,gN=Object.getOwnPropertySymbols,h2e=Object.prototype.hasOwnProperty,p2e=Object.prototype.propertyIsEnumerable,$ue=(e,t,n)=>t in e?Jit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zit=(e,t)=>{for(var n in t||(t={}))h2e.call(t,n)&&$ue(e,n,t[n]);if(gN)for(var n of gN(t))p2e.call(t,n)&&$ue(e,n,t[n]);return e},est=(e,t)=>{var n={};for(var r in e)h2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&p2e.call(e,r)&&(n[r]=e[r]);return n};const tst={variant:"light",size:"md",radius:"xl"},m2e=C.forwardRef((e,t)=>{const n=gt("Badge",tst,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=est(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=Qit({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return M.createElement(st,Zit({className:v(y.root,r),ref:t},g),l&&M.createElement("span",{className:y.leftSection},l),M.createElement("span",{className:y.inner},a),c&&M.createElement("span",{className:y.rightSection},c))});m2e.displayName="@mantine/core/Badge";const b1=m2e,nst={xs:12,sm:18,md:24,lg:34,xl:42};var rst=lt((e,{size:t,color:n,transitionDuration:r})=>{const i=e.fn.size({size:t,sizes:nst}),s=n||(e.colorScheme==="dark"?e.white:e.black);return{root:{borderRadius:e.radius.sm,width:`calc(${i}px + ${e.spacing.xs}px)`,height:`calc(${i}px + ${e.spacing.xs}px)`,padding:`calc(${e.spacing.xs}px / 2)`,cursor:"pointer"},burger:{position:"relative",userSelect:"none",boxSizing:"border-box","&, &::before, &::after":{display:"block",width:i,height:Math.ceil(i/12),backgroundColor:s,outline:"1px solid transparent",transitionProperty:"background-color, transform",transitionDuration:`${r}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},"&::before, &::after":{position:"absolute",content:'""',left:0},"&::before":{top:i/3*-1},"&::after":{top:i/3},"&[data-opened]":{backgroundColor:"transparent","&::before":{transform:`translateY(${i/3}px) rotate(45deg)`},"&::after":{transform:`translateY(-${i/3}px) rotate(-45deg)`}}}}});const ist=rst;var sst=Object.defineProperty,yN=Object.getOwnPropertySymbols,g2e=Object.prototype.hasOwnProperty,y2e=Object.prototype.propertyIsEnumerable,Rue=(e,t,n)=>t in e?sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ost=(e,t)=>{for(var n in t||(t={}))g2e.call(t,n)&&Rue(e,n,t[n]);if(yN)for(var n of yN(t))y2e.call(t,n)&&Rue(e,n,t[n]);return e},ast=(e,t)=>{var n={};for(var r in e)g2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&y2e.call(e,r)&&(n[r]=e[r]);return n};const ust={size:"md",transitionDuration:300},v2e=C.forwardRef((e,t)=>{const n=gt("Burger",ust,e),{className:r,opened:i,color:s,size:o,classNames:a,styles:u,transitionDuration:l}=n,c=ast(n,["className","opened","color","size","classNames","styles","transitionDuration"]),{classes:f,cx:d}=ist({color:s,size:o,transitionDuration:l},{classNames:a,styles:u,name:"Burger"});return M.createElement(nm,ost({className:d(f.root,r),ref:t},c),M.createElement("div",{"data-opened":i||void 0,className:f.burger}))});v2e.displayName="@mantine/core/Burger";var lst=lt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const cst=lst;var fst=Object.defineProperty,vN=Object.getOwnPropertySymbols,_2e=Object.prototype.hasOwnProperty,b2e=Object.prototype.propertyIsEnumerable,Nue=(e,t,n)=>t in e?fst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dst=(e,t)=>{for(var n in t||(t={}))_2e.call(t,n)&&Nue(e,n,t[n]);if(vN)for(var n of vN(t))b2e.call(t,n)&&Nue(e,n,t[n]);return e},hst=(e,t)=>{var n={};for(var r in e)_2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&b2e.call(e,r)&&(n[r]=e[r]);return n};const pst={orientation:"horizontal",buttonBorderWidth:1},w2e=C.forwardRef((e,t)=>{const n=gt("ButtonGroup",pst,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=hst(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=cst({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return M.createElement(st,dst({className:l(u.root,r),ref:t},a))});w2e.displayName="@mantine/core/ButtonGroup";var mst=Object.defineProperty,gst=Object.defineProperties,yst=Object.getOwnPropertyDescriptors,Due=Object.getOwnPropertySymbols,vst=Object.prototype.hasOwnProperty,_st=Object.prototype.propertyIsEnumerable,Mue=(e,t,n)=>t in e?mst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dy=(e,t)=>{for(var n in t||(t={}))vst.call(t,n)&&Mue(e,n,t[n]);if(Due)for(var n of Due(t))_st.call(t,n)&&Mue(e,n,t[n]);return e},oU=(e,t)=>gst(e,yst(t));const aU={xs:{height:zo.xs,paddingLeft:14,paddingRight:14},sm:{height:zo.sm,paddingLeft:18,paddingRight:18},md:{height:zo.md,paddingLeft:22,paddingRight:22},lg:{height:zo.lg,paddingLeft:26,paddingRight:26},xl:{height:zo.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function bst({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return aU[`compact-${t}`];const i=aU[t];return oU(Dy({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const wst=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function Est({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Dy({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var xst=lt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:oU(Dy(oU(Dy(Dy(Dy(Dy({},bst({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),wst(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),Est({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const Sst=xst;var Tst=Object.defineProperty,_N=Object.getOwnPropertySymbols,E2e=Object.prototype.hasOwnProperty,x2e=Object.prototype.propertyIsEnumerable,Lue=(e,t,n)=>t in e?Tst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fue=(e,t)=>{for(var n in t||(t={}))E2e.call(t,n)&&Lue(e,n,t[n]);if(_N)for(var n of _N(t))x2e.call(t,n)&&Lue(e,n,t[n]);return e},Cst=(e,t)=>{var n={};for(var r in e)E2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&x2e.call(e,r)&&(n[r]=e[r]);return n};const Ast={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},vY=C.forwardRef((e,t)=>{const n=gt("Button",Ast,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:b,styles:E,unstyled:w}=n,x=Cst(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:S,cx:P,theme:A}=Sst({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:w,classNames:b,styles:E}),O=A.fn.variant({color:s,variant:d}),z=M.createElement(kv,Fue({color:O.color,size:A.fn.size({size:i,sizes:aU}).height/2},v));return M.createElement(nm,Fue({className:P(S.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:w},x),M.createElement("div",{className:S.inner},(l||g&&y==="left")&&M.createElement("span",{className:P(S.icon,S.leftIcon)},g&&y==="left"?z:l),g&&y==="center"&&M.createElement("span",{className:S.centerLoader},z),M.createElement("span",{className:S.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&M.createElement("span",{className:P(S.icon,S.rightIcon)},g&&y==="right"?z:c)))});vY.displayName="@mantine/core/Button";vY.Group=w2e;const Yr=vY;var Ist=lt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}}));const Ost=Ist;var Pst=Object.defineProperty,bN=Object.getOwnPropertySymbols,S2e=Object.prototype.hasOwnProperty,T2e=Object.prototype.propertyIsEnumerable,Bue=(e,t,n)=>t in e?Pst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kst=(e,t)=>{for(var n in t||(t={}))S2e.call(t,n)&&Bue(e,n,t[n]);if(bN)for(var n of bN(t))T2e.call(t,n)&&Bue(e,n,t[n]);return e},$st=(e,t)=>{var n={};for(var r in e)S2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&T2e.call(e,r)&&(n[r]=e[r]);return n};const Rst={},C2e=C.forwardRef((e,t)=>{const n=gt("Paper",Rst,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=$st(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=Ost({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return M.createElement(st,kst({className:f(c.root,r),ref:t},l),i)});C2e.displayName="@mantine/core/Paper";const _Y=C2e,A2e=C.createContext({padding:0}),Nst=A2e.Provider,Dst=()=>C.useContext(A2e).padding;var Mst=lt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const Lst=Mst;var Fst=Object.defineProperty,wN=Object.getOwnPropertySymbols,I2e=Object.prototype.hasOwnProperty,O2e=Object.prototype.propertyIsEnumerable,jue=(e,t,n)=>t in e?Fst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bst=(e,t)=>{for(var n in t||(t={}))I2e.call(t,n)&&jue(e,n,t[n]);if(wN)for(var n of wN(t))O2e.call(t,n)&&jue(e,n,t[n]);return e},jst=(e,t)=>{var n={};for(var r in e)I2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&O2e.call(e,r)&&(n[r]=e[r]);return n};const P2e=C.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=jst(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=Lst({padding:Dst(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return M.createElement(st,Bst({className:l(u.cardSection,r),ref:t},a))});P2e.displayName="@mantine/core/CardSection";const k2e=P2e;var zst=lt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}}));const Ust=zst;var Vst=Object.defineProperty,EN=Object.getOwnPropertySymbols,$2e=Object.prototype.hasOwnProperty,R2e=Object.prototype.propertyIsEnumerable,zue=(e,t,n)=>t in e?Vst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hst=(e,t)=>{for(var n in t||(t={}))$2e.call(t,n)&&zue(e,n,t[n]);if(EN)for(var n of EN(t))R2e.call(t,n)&&zue(e,n,t[n]);return e},qst=(e,t)=>{var n={};for(var r in e)$2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&R2e.call(e,r)&&(n[r]=e[r]);return n};const Wst={p:"md"},bY=C.forwardRef((e,t)=>{const n=gt("Card",Wst,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=qst(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Ust(null,{name:"Card",unstyled:a}),f=C.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===k2e?C.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return M.createElement(Nst,{value:{padding:i}},M.createElement(_Y,Hst({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});bY.Section=k2e;bY.displayName="@mantine/core/Card";const T6=bY;var Gst=Object.defineProperty,xN=Object.getOwnPropertySymbols,N2e=Object.prototype.hasOwnProperty,D2e=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?Gst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yst=(e,t)=>{for(var n in t||(t={}))N2e.call(t,n)&&Uue(e,n,t[n]);if(xN)for(var n of xN(t))D2e.call(t,n)&&Uue(e,n,t[n]);return e},Kst=(e,t)=>{var n={};for(var r in e)N2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&D2e.call(e,r)&&(n[r]=e[r]);return n};const M2e=C.forwardRef((e,t)=>{const n=gt("Center",{},e),{inline:r,sx:i}=n,s=Kst(n,["inline","sx"]);return M.createElement(st,Yst({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...Yg(i)]},s))});M2e.displayName="@mantine/core/Center";const Rp=M2e,L2e=C.createContext(null),Xst=L2e.Provider,Qst=()=>C.useContext(L2e);function Jst(e){return C.Children.toArray(e).filter(Boolean)}const F2e={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var Zst=lt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:F2e[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const eot=Zst;var tot=Object.defineProperty,SN=Object.getOwnPropertySymbols,B2e=Object.prototype.hasOwnProperty,j2e=Object.prototype.propertyIsEnumerable,Vue=(e,t,n)=>t in e?tot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,not=(e,t)=>{for(var n in t||(t={}))B2e.call(t,n)&&Vue(e,n,t[n]);if(SN)for(var n of SN(t))j2e.call(t,n)&&Vue(e,n,t[n]);return e},rot=(e,t)=>{var n={};for(var r in e)B2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&j2e.call(e,r)&&(n[r]=e[r]);return n};const iot={position:"left",spacing:"md"},ll=C.forwardRef((e,t)=>{const n=gt("Group",iot,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=rot(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=Jst(o),{classes:h,cx:p}=eot({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return M.createElement(st,not({className:p(h.root,r),ref:t},f),d)});ll.displayName="@mantine/core/Group";var sot=lt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}}));const oot=sot;var aot=Object.defineProperty,TN=Object.getOwnPropertySymbols,z2e=Object.prototype.hasOwnProperty,U2e=Object.prototype.propertyIsEnumerable,Hue=(e,t,n)=>t in e?aot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uot=(e,t)=>{for(var n in t||(t={}))z2e.call(t,n)&&Hue(e,n,t[n]);if(TN)for(var n of TN(t))U2e.call(t,n)&&Hue(e,n,t[n]);return e},lot=(e,t)=>{var n={};for(var r in e)z2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&U2e.call(e,r)&&(n[r]=e[r]);return n};const cot={spacing:"md",align:"stretch",justify:"top"},gd=C.forwardRef((e,t)=>{const n=gt("Stack",cot,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=lot(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=oot({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return M.createElement(st,uot({className:c(l.root,i),ref:t},u))});gd.displayName="@mantine/core/Stack";function V2e({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?M.createElement(ll,{pt:t,spacing:e,role:i,unstyled:s},r):M.createElement(gd,{pt:t,spacing:e,role:i,unstyled:s},r)}var fot=Object.defineProperty,CN=Object.getOwnPropertySymbols,H2e=Object.prototype.hasOwnProperty,q2e=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?fot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wue=(e,t)=>{for(var n in t||(t={}))H2e.call(t,n)&&que(e,n,t[n]);if(CN)for(var n of CN(t))q2e.call(t,n)&&que(e,n,t[n]);return e},dot=(e,t)=>{var n={};for(var r in e)H2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&q2e.call(e,r)&&(n[r]=e[r]);return n};const hot={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},W2e=C.forwardRef((e,t)=>{const n=gt("CheckboxGroup",hot,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=dot(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=ia({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return M.createElement(Xst,{value:{value:h,onChange:m,size:l}},M.createElement(as.Wrapper,Wue(Wue({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),M.createElement(V2e,{spacing:u,orientation:a,offset:f},r)))});W2e.displayName="@mantine/core/CheckboxGroup";var pot=Object.defineProperty,AN=Object.getOwnPropertySymbols,G2e=Object.prototype.hasOwnProperty,Y2e=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?pot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uU=(e,t)=>{for(var n in t||(t={}))G2e.call(t,n)&&Gue(e,n,t[n]);if(AN)for(var n of AN(t))Y2e.call(t,n)&&Gue(e,n,t[n]);return e},mot=(e,t)=>{var n={};for(var r in e)G2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&Y2e.call(e,r)&&(n[r]=e[r]);return n};function got(e){return M.createElement("svg",uU({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function yot(e){var t=e,{indeterminate:n}=t,r=mot(t,["indeterminate"]);return n?M.createElement("svg",uU({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),M.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):M.createElement(got,uU({},r))}var vot=Object.defineProperty,_ot=Object.defineProperties,bot=Object.getOwnPropertyDescriptors,Yue=Object.getOwnPropertySymbols,wot=Object.prototype.hasOwnProperty,Eot=Object.prototype.propertyIsEnumerable,Kue=(e,t,n)=>t in e?vot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xot=(e,t)=>{for(var n in t||(t={}))wot.call(t,n)&&Kue(e,n,t[n]);if(Yue)for(var n of Yue(t))Eot.call(t,n)&&Kue(e,n,t[n]);return e},Sot=(e,t)=>_ot(e,bot(t));const Tot={xs:16,sm:20,md:24,lg:30,xl:36},Cot={xs:8,sm:10,md:14,lg:16,xl:20};var Aot=lt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:Tot}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:Cot}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:Sot(xot({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const Iot=Aot;var Oot=Object.defineProperty,Pot=Object.defineProperties,kot=Object.getOwnPropertyDescriptors,Xue=Object.getOwnPropertySymbols,$ot=Object.prototype.hasOwnProperty,Rot=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?Oot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Not=(e,t)=>{for(var n in t||(t={}))$ot.call(t,n)&&Que(e,n,t[n]);if(Xue)for(var n of Xue(t))Rot.call(t,n)&&Que(e,n,t[n]);return e},Dot=(e,t)=>Pot(e,kot(t));const Mot={xs:16,sm:20,md:24,lg:30,xl:36};var Lot=lt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:Dot(Not({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:Mot})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const Fot=Lot;var Bot=Object.defineProperty,IN=Object.getOwnPropertySymbols,K2e=Object.prototype.hasOwnProperty,X2e=Object.prototype.propertyIsEnumerable,Jue=(e,t,n)=>t in e?Bot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jot=(e,t)=>{for(var n in t||(t={}))K2e.call(t,n)&&Jue(e,n,t[n]);if(IN)for(var n of IN(t))X2e.call(t,n)&&Jue(e,n,t[n]);return e},zot=(e,t)=>{var n={};for(var r in e)K2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&X2e.call(e,r)&&(n[r]=e[r]);return n};function wY(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=zot(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=Fot({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return M.createElement(st,jot({className:y(g.root,r)},m),M.createElement("div",{className:y(g.body)},a,M.createElement("div",{className:g.labelWrapper},u&&M.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&M.createElement(as.Description,{className:g.description},l),d&&d!=="boolean"&&M.createElement(as.Error,{className:g.error},d))))}wY.displayName="@mantine/core/InlineInput";var Uot=Object.defineProperty,ON=Object.getOwnPropertySymbols,Q2e=Object.prototype.hasOwnProperty,J2e=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?Uot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lP=(e,t)=>{for(var n in t||(t={}))Q2e.call(t,n)&&Zue(e,n,t[n]);if(ON)for(var n of ON(t))J2e.call(t,n)&&Zue(e,n,t[n]);return e},Vot=(e,t)=>{var n={};for(var r in e)Q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&J2e.call(e,r)&&(n[r]=e[r]);return n};const Hot={size:"sm",transitionDuration:100,icon:yot,labelPosition:"right"},PN=C.forwardRef((e,t)=>{const n=gt("Checkbox",Hot,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:b,labelPosition:E,description:w,error:x}=n,S=Vot(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),P=Qst(),A=$u(f),{systemStyles:O,rest:z}=Ef(S),{classes:D}=Iot({size:(P==null?void 0:P.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:E,error:!!x,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:b}),R=P?{checked:P.value.includes(z.value),onChange:P.onChange}:{};return M.createElement(wY,lP(lP({className:r,sx:s,style:i,id:A,size:(P==null?void 0:P.size)||d,labelPosition:E,label:l,description:w,error:x,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:b,"data-checked":R.checked||void 0},O),p),M.createElement("div",{className:D.inner},M.createElement("input",lP(lP({id:A,ref:t,type:"checkbox",className:D.input,checked:o,disabled:a},z),R)),M.createElement(_,{indeterminate:c,className:D.icon})))});PN.displayName="@mantine/core/Checkbox";PN.Group=W2e;var qot=lt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}}));const Wot=qot;var Got=Object.defineProperty,kN=Object.getOwnPropertySymbols,Z2e=Object.prototype.hasOwnProperty,eCe=Object.prototype.propertyIsEnumerable,ele=(e,t,n)=>t in e?Got(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yot=(e,t)=>{for(var n in t||(t={}))Z2e.call(t,n)&&ele(e,n,t[n]);if(kN)for(var n of kN(t))eCe.call(t,n)&&ele(e,n,t[n]);return e},Kot=(e,t)=>{var n={};for(var r in e)Z2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&eCe.call(e,r)&&(n[r]=e[r]);return n};const Xot={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},om=C.forwardRef((e,t)=>{const n=gt("Container",Xot,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=Kot(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=Wot({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return M.createElement(st,Yot({className:c(l.root,r),ref:t},u))});om.displayName="@mantine/core/Container";var Qot=Object.defineProperty,Jot=Object.defineProperties,Zot=Object.getOwnPropertyDescriptors,tle=Object.getOwnPropertySymbols,eat=Object.prototype.hasOwnProperty,tat=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?Qot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nat=(e,t)=>{for(var n in t||(t={}))eat.call(t,n)&&nle(e,n,t[n]);if(tle)for(var n of tle(t))tat.call(t,n)&&nle(e,n,t[n]);return e},rat=(e,t)=>Jot(e,Zot(t));const cP={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function iat({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:cP})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:cP})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:cP})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:cP})};default:return null}}var sat=lt((e,{position:t,size:n,zIndex:r,withOverlay:i})=>({closeButton:{},overlay:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:i===!1?"none":void 0},drawer:rat(nat({},iat({position:t,size:n,theme:e})),{maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:i===!1?"auto":void 0}),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}}));const oat=sat;function EY({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=UTe({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?M.createElement(M.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=zTe({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return M.createElement(M.Fragment,null,i(h))}EY.displayName="@mantine/core/GroupedTransition";var aat=lt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}}));const uat=aat;var lat=Object.defineProperty,cat=Object.defineProperties,fat=Object.getOwnPropertyDescriptors,$N=Object.getOwnPropertySymbols,tCe=Object.prototype.hasOwnProperty,nCe=Object.prototype.propertyIsEnumerable,rle=(e,t,n)=>t in e?lat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O9=(e,t)=>{for(var n in t||(t={}))tCe.call(t,n)&&rle(e,n,t[n]);if($N)for(var n of $N(t))nCe.call(t,n)&&rle(e,n,t[n]);return e},dat=(e,t)=>cat(e,fat(t)),hat=(e,t)=>{var n={};for(var r in e)tCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&nCe.call(e,r)&&(n[r]=e[r]);return n};const pat={opacity:.6,color:"#fff",zIndex:za("modal"),radius:0,blur:0},rCe=C.forwardRef((e,t)=>{const n=gt("Overlay",pat,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=hat(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=uat({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>M.createElement(st,O9({ref:t,className:p(h.root,f),sx:[v=>dat(O9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...Yg(l)]},y));return i?M.createElement(st,O9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...Yg(l)]},d),g()):g(d)});rCe.displayName="@mantine/core/Overlay";const xY=rCe;var mat=Object.defineProperty,RN=Object.getOwnPropertySymbols,iCe=Object.prototype.hasOwnProperty,sCe=Object.prototype.propertyIsEnumerable,ile=(e,t,n)=>t in e?mat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gat=(e,t)=>{for(var n in t||(t={}))iCe.call(t,n)&&ile(e,n,t[n]);if(RN)for(var n of RN(t))sCe.call(t,n)&&ile(e,n,t[n]);return e},yat=(e,t)=>{var n={};for(var r in e)iCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&sCe.call(e,r)&&(n[r]=e[r]);return n};const vat={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},_at={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},bat={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:za("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function oCe(e){const t=gt("Drawer",bat,e),{className:n,opened:r,onClose:i,position:s,size:o,trapFocus:a,lockScroll:u,closeOnClickOutside:l,closeOnEscape:c,transition:f,transitionDuration:d,transitionTimingFunction:h,zIndex:p,overlayColor:m,overlayOpacity:g,children:y,withOverlay:v,shadow:_,padding:b,title:E,withCloseButton:w,closeButtonLabel:x,classNames:S,styles:P,target:A,withinPortal:O,overlayBlur:z,unstyled:D,withFocusReturn:R}=t,N=yat(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),{classes:L,cx:V,theme:j}=oat({size:o,position:s,zIndex:p,withOverlay:v},{classNames:S,styles:P,unstyled:D,name:"Drawer"}),H=eY(a&&r),[,U]=Qxe(),k=f||(j.dir==="rtl"?_at:vat)[s],$=typeof g=="number"?g:j.colorScheme==="dark"?.85:.75,q=F=>{F.key==="Escape"&&c&&i()};return C.useEffect(()=>{if(!a)return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[a]),ZG({opened:r,shouldReturnFocus:a&&R}),M.createElement(RE,{withinPortal:O,target:A},M.createElement(EY,{onExited:()=>U(!1),onEntered:()=>U(u&&!0),mounted:r,duration:d,timingFunction:h,transitions:{overlay:{duration:d/2,transition:"fade",timingFunction:"ease"},drawer:{duration:d,transition:k,timingFunction:h}}},F=>M.createElement(st,gat({className:V(L.root,n),role:"dialog","aria-modal":!0},N),M.createElement(_Y,{className:V(L.drawer,n),ref:H,style:F.drawer,radius:0,tabIndex:-1,onKeyDownCapture:B=>{var Q;((Q=B.target)==null?void 0:Q.getAttribute("data-mantine-stop-propagation"))!=="true"&&B.key==="Escape"&&c&&i()},shadow:_,p:b,unstyled:D},(E||w)&&M.createElement("div",{className:L.header},M.createElement(ct,{className:L.title,unstyled:D},E),w&&M.createElement(rm,{iconSize:16,onClick:i,"aria-label":x,className:L.closeButton,unstyled:D})),y),v&&M.createElement("div",{style:F.overlay},M.createElement(xY,{unstyled:D,blur:z,onMouseDown:()=>l&&i(),className:L.overlay,opacity:$,zIndex:0,color:m||(j.colorScheme==="dark"?j.colors.dark[9]:j.black)})))))}oCe.displayName="@mantine/core/Drawer";const wat={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var Eat=Object.defineProperty,xat=Object.defineProperties,Sat=Object.getOwnPropertyDescriptors,NN=Object.getOwnPropertySymbols,aCe=Object.prototype.hasOwnProperty,uCe=Object.prototype.propertyIsEnumerable,sle=(e,t,n)=>t in e?Eat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tat=(e,t)=>{for(var n in t||(t={}))aCe.call(t,n)&&sle(e,n,t[n]);if(NN)for(var n of NN(t))uCe.call(t,n)&&sle(e,n,t[n]);return e},Cat=(e,t)=>xat(e,Sat(t)),Aat=(e,t)=>{var n={};for(var r in e)aCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&uCe.call(e,r)&&(n[r]=e[r]);return n};const Iat={},qi=C.forwardRef((e,t)=>{const n=gt("Flex",Iat,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=Aat(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return M.createElement(st,Cat(Tat({},f),{sx:[{display:"flex"},d=>Zz({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,wat),...Yg(c)],ref:t}))});qi.displayName="@mantine/core/Flex";const lCe=C.createContext(null),Oat=lCe.Provider,Pat=()=>C.useContext(lCe);var kat=Object.defineProperty,ole=Object.getOwnPropertySymbols,$at=Object.prototype.hasOwnProperty,Rat=Object.prototype.propertyIsEnumerable,ale=(e,t,n)=>t in e?kat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nat=(e,t)=>{for(var n in t||(t={}))$at.call(t,n)&&ale(e,n,t[n]);if(ole)for(var n of ole(t))Rat.call(t,n)&&ale(e,n,t[n]);return e};const SY=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,cCe=(e,t,n)=>n||e==="auto"||e==="content"?"unset":SY(e,t),fCe=(e,t)=>{if(e)return e==="auto"||t?1:0},dCe=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function Dat({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return JKe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:SY(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:cCe(e[a],i,s),marginLeft:dCe(t[a],i),flexGrow:fCe(e[a],s)},o),{})}var Mat=lt((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E})=>({root:Nat({boxSizing:"border-box",flexGrow:fCe(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:dCe(r,l),flexBasis:SY(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:cCe(c,l,n)},Dat({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:b,xl:E},theme:e,columns:l,grow:n}))}));const Lat=Mat;var Fat=Object.defineProperty,DN=Object.getOwnPropertySymbols,hCe=Object.prototype.hasOwnProperty,pCe=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?Fat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bat=(e,t)=>{for(var n in t||(t={}))hCe.call(t,n)&&ule(e,n,t[n]);if(DN)for(var n of DN(t))pCe.call(t,n)&&ule(e,n,t[n]);return e},jat=(e,t)=>{var n={};for(var r in e)hCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&pCe.call(e,r)&&(n[r]=e[r]);return n};const zat={};function Uat(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const mCe=C.forwardRef((e,t)=>{const n=gt("Grid.Col",zat,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,className:w,id:x,unstyled:S}=n,P=jat(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),A=Pat();if(!A)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const O=i||A.columns,{classes:z,cx:D}=Lat({gutter:A.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,grow:A.grow,columns:A.columns,span:O},{unstyled:S,name:"Col"});return!Uat(O)||O>A.columns?null:M.createElement(st,Bat({className:D(z.root,w),ref:t},P),r)});mCe.displayName="@mantine/core/Col";var Vat=lt((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}}));const Hat=Vat;var qat=Object.defineProperty,MN=Object.getOwnPropertySymbols,gCe=Object.prototype.hasOwnProperty,yCe=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?qat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wat=(e,t)=>{for(var n in t||(t={}))gCe.call(t,n)&&lle(e,n,t[n]);if(MN)for(var n of MN(t))yCe.call(t,n)&&lle(e,n,t[n]);return e},Gat=(e,t)=>{var n={};for(var r in e)gCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&yCe.call(e,r)&&(n[r]=e[r]);return n};const Yat={gutter:"md",justify:"flex-start",align:"stretch",columns:12},du=C.forwardRef((e,t)=>{const n=gt("Grid",Yat,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=Gat(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=Hat({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return M.createElement(Oat,{value:{gutter:r,grow:s,columns:u}},M.createElement(st,Wat({className:p(h.root,l),ref:t},d),i))});du.Col=mCe;du.displayName="@mantine/core/Grid";function Kat({open:e,close:t,openDelay:n,closeDelay:r}){const i=C.useRef(-1),s=C.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return C.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var Xat=Object.defineProperty,cle=Object.getOwnPropertySymbols,Qat=Object.prototype.hasOwnProperty,Jat=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?Xat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zat=(e,t)=>{for(var n in t||(t={}))Qat.call(t,n)&&fle(e,n,t[n]);if(cle)for(var n of cle(t))Jat.call(t,n)&&fle(e,n,t[n]);return e};function eut(e){return M.createElement("svg",Zat({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var tut=Object.defineProperty,nut=Object.defineProperties,rut=Object.getOwnPropertyDescriptors,dle=Object.getOwnPropertySymbols,iut=Object.prototype.hasOwnProperty,sut=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?tut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ple=(e,t)=>{for(var n in t||(t={}))iut.call(t,n)&&hle(e,n,t[n]);if(dle)for(var n of dle(t))sut.call(t,n)&&hle(e,n,t[n]);return e},mle=(e,t)=>nut(e,rut(t)),out=lt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:mle(ple({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:mle(ple({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})}));const aut=out;var uut=Object.defineProperty,LN=Object.getOwnPropertySymbols,vCe=Object.prototype.hasOwnProperty,_Ce=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?uut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P9=(e,t)=>{for(var n in t||(t={}))vCe.call(t,n)&&gle(e,n,t[n]);if(LN)for(var n of LN(t))_Ce.call(t,n)&&gle(e,n,t[n]);return e},lut=(e,t)=>{var n={};for(var r in e)vCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&_Ce.call(e,r)&&(n[r]=e[r]);return n};const cut={fit:"cover",width:"100%",height:"auto",radius:0},Nv=C.forwardRef((e,t)=>{const n=gt("Image",cut,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=lut(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:b,cx:E}=aut({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[w,x]=C.useState(!s),S=f&&w;return Es(()=>{x(!1)},[s]),M.createElement(st,P9({className:E(b.root,r),ref:t,style:P9({width:a},v)},_),M.createElement("figure",{className:b.figure},M.createElement("div",{className:b.imageWrapper},M.createElement("img",P9({className:b.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:P=>{x(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(P)}},c)),S&&M.createElement("div",{className:b.placeholder,title:i},d||M.createElement("div",null,M.createElement(eut,{style:{width:40,height:40}})))),!!g&&M.createElement(ct,{component:"figcaption",size:"sm",align:"center",className:b.caption},g)))});Nv.displayName="@mantine/core/Image";function fut(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var dut=C.useLayoutEffect,hut=function(t){var n=C.useRef(t);return dut(function(){n.current=t}),n},yle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},put=function(t,n){var r=C.useRef();return C.useCallback(function(i){t.current=i,r.current&&yle(r.current,null),r.current=n,n&&yle(n,i)},[n])},vle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},_le=function(t){Object.keys(vle).forEach(function(n){t.style.setProperty(n,vle[n],"important")})},ju=null,mut=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function gut(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ju||(ju=document.createElement("textarea"),ju.setAttribute("tabindex","-1"),ju.setAttribute("aria-hidden","true"),_le(ju)),ju.parentNode===null&&document.body.appendChild(ju);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;ju.style[h]=o[h]}),_le(ju),ju.value=t;var u=mut(ju,e);ju.value="x";var l=ju.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var ble=function(){},yut=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},vut=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],_ut=!!document.documentElement.currentStyle,but=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=yut(vut,n),i=r.boxSizing;if(i==="")return null;_ut&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},wut=function(t){var n=hut(t);C.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},Eut=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?ble:o,u=t.onHeightChange,l=u===void 0?ble:u,c=fut(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=C.useRef(null),h=put(d,n),p=C.useRef(0),m=C.useRef(),g=function(){var _=d.current,b=r&&m.current?m.current:but(_);if(b){m.current=b;var E=gut(b,_.value||_.placeholder||"x",s,i),w=E[0],x=E[1];p.current!==w&&(p.current=w,_.style.setProperty("height",w+"px","important"),l(w,{rowHeight:x}))}},y=function(_){f||g(),a(_)};return C.useLayoutEffect(g),wut(g),C.createElement("textarea",mi({},c,{onChange:y,ref:h}))},xut=C.forwardRef(Eut);const Sut=xut;var Tut=lt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const Cut=Tut;var Aut=Object.defineProperty,Iut=Object.defineProperties,Out=Object.getOwnPropertyDescriptors,FN=Object.getOwnPropertySymbols,bCe=Object.prototype.hasOwnProperty,wCe=Object.prototype.propertyIsEnumerable,wle=(e,t,n)=>t in e?Aut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g_=(e,t)=>{for(var n in t||(t={}))bCe.call(t,n)&&wle(e,n,t[n]);if(FN)for(var n of FN(t))wCe.call(t,n)&&wle(e,n,t[n]);return e},k9=(e,t)=>Iut(e,Out(t)),Put=(e,t)=>{var n={};for(var r in e)bCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&wCe.call(e,r)&&(n[r]=e[r]);return n};const kut={autosize:!1,size:"sm",__staticSelector:"Textarea"},ECe=C.forwardRef((e,t)=>{const n=gt("Textarea",kut,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:b,labelProps:E,inputWrapperOrder:w,inputContainer:x,unstyled:S,withAsterisk:P}=n,A=Put(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),O=$u(l),{classes:z,cx:D}=Cut(),{systemStyles:R,rest:N}=Ef(A),L=g_({required:f,ref:t,invalid:!!a,id:O,classNames:k9(g_({},p),{input:D(z.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:S},N);return M.createElement(as.Wrapper,g_(g_({label:o,error:a,id:O,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:E,descriptionProps:b,inputContainer:x,inputWrapperOrder:w,unstyled:S,withAsterisk:P},R),h),r?M.createElement(as,k9(g_({},L),{component:Sut,maxRows:i,minRows:s})):M.createElement(as,k9(g_({},L),{component:"textarea",rows:s})))});ECe.displayName="@mantine/core/Textarea";const xCe=C.createContext(null);function $ut(){return C.useContext(xCe)||{}}var Rut=lt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}}));const Nut=Rut;var Dut=Object.defineProperty,BN=Object.getOwnPropertySymbols,SCe=Object.prototype.hasOwnProperty,TCe=Object.prototype.propertyIsEnumerable,Ele=(e,t,n)=>t in e?Dut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mut=(e,t)=>{for(var n in t||(t={}))SCe.call(t,n)&&Ele(e,n,t[n]);if(BN)for(var n of BN(t))TCe.call(t,n)&&Ele(e,n,t[n]);return e},Lut=(e,t)=>{var n={};for(var r in e)SCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&TCe.call(e,r)&&(n[r]=e[r]);return n};function CCe(e){var t=e,{className:n,children:r,icon:i}=t,s=Lut(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=$ut(),{classNames:d,styles:h,unstyled:p}=D0(),m=i||o,{classes:g,cx:y}=Nut({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return M.createElement(st,Mut({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),M.createElement("div",{className:g.itemWrapper},m&&M.createElement("span",{className:g.itemIcon},m),M.createElement("span",null,r)))}CCe.displayName="@mantine/core/ListItem";var Fut=Object.defineProperty,But=Object.defineProperties,jut=Object.getOwnPropertyDescriptors,xle=Object.getOwnPropertySymbols,zut=Object.prototype.hasOwnProperty,Uut=Object.prototype.propertyIsEnumerable,Sle=(e,t,n)=>t in e?Fut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vut=(e,t)=>{for(var n in t||(t={}))zut.call(t,n)&&Sle(e,n,t[n]);if(xle)for(var n of xle(t))Uut.call(t,n)&&Sle(e,n,t[n]);return e},Hut=(e,t)=>But(e,jut(t)),qut=lt((e,{withPadding:t,size:n,listStyleType:r})=>({root:Hut(Vut({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})}));const Wut=qut;var Gut=Object.defineProperty,jN=Object.getOwnPropertySymbols,ACe=Object.prototype.hasOwnProperty,ICe=Object.prototype.propertyIsEnumerable,Tle=(e,t,n)=>t in e?Gut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yut=(e,t)=>{for(var n in t||(t={}))ACe.call(t,n)&&Tle(e,n,t[n]);if(jN)for(var n of jN(t))ICe.call(t,n)&&Tle(e,n,t[n]);return e},Kut=(e,t)=>{var n={};for(var r in e)ACe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&ICe.call(e,r)&&(n[r]=e[r]);return n};const Xut={type:"unordered",size:"md",spacing:0},w1=C.forwardRef((e,t)=>{const n=gt("List",Xut,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=Kut(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=Wut({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return M.createElement(QG,{classNames:h,styles:d,unstyled:p},M.createElement(xCe.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},M.createElement(st,Yut({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});w1.Item=CCe;w1.displayName="@mantine/core/List";var Qut=lt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}});const Jut=Qut;var Zut=Object.defineProperty,elt=Object.defineProperties,tlt=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,OCe=Object.prototype.hasOwnProperty,PCe=Object.prototype.propertyIsEnumerable,Cle=(e,t,n)=>t in e?Zut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fP=(e,t)=>{for(var n in t||(t={}))OCe.call(t,n)&&Cle(e,n,t[n]);if(zN)for(var n of zN(t))PCe.call(t,n)&&Cle(e,n,t[n]);return e},nlt=(e,t)=>elt(e,tlt(t)),rlt=(e,t)=>{var n={};for(var r in e)OCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&PCe.call(e,r)&&(n[r]=e[r]);return n};const ilt={overlayOpacity:.75,transitionDuration:0,zIndex:za("overlay")},M0=C.forwardRef((e,t)=>{const n=gt("LoadingOverlay",ilt,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=rlt(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=Jut(null,{name:"LoadingOverlay",unstyled:m}),b=`calc(${c} + 1)`;return M.createElement(XA,{duration:u,exitDuration:l,mounted:i,transition:"fade"},E=>M.createElement(st,fP({className:v(y.root,r),style:nlt(fP(fP({},E),f),{zIndex:c}),ref:t},g),d?M.createElement("div",{style:{zIndex:b}},d):M.createElement(kv,fP({style:{zIndex:b}},s)),M.createElement(xY,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});M0.displayName="@mantine/core/LoadingOverlay";var slt=lt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}}));const olt=slt;var alt=Object.defineProperty,UN=Object.getOwnPropertySymbols,kCe=Object.prototype.hasOwnProperty,$Ce=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?alt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ult=(e,t)=>{for(var n in t||(t={}))kCe.call(t,n)&&Ale(e,n,t[n]);if(UN)for(var n of UN(t))$Ce.call(t,n)&&Ale(e,n,t[n]);return e},llt=(e,t)=>{var n={};for(var r in e)kCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&$Ce.call(e,r)&&(n[r]=e[r]);return n};function RCe(e){var t=e,{children:n,className:r}=t,i=llt(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=D0(),{classes:u,cx:l}=olt(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return M.createElement(st,ult({className:l(u.divider,r)},i))}RCe.displayName="@mantine/core/MenuDivider";const NCe={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[clt,TY]=jG(NCe.context);var flt=Object.defineProperty,VN=Object.getOwnPropertySymbols,DCe=Object.prototype.hasOwnProperty,MCe=Object.prototype.propertyIsEnumerable,Ile=(e,t,n)=>t in e?flt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dlt=(e,t)=>{for(var n in t||(t={}))DCe.call(t,n)&&Ile(e,n,t[n]);if(VN)for(var n of VN(t))MCe.call(t,n)&&Ile(e,n,t[n]);return e},hlt=(e,t)=>{var n={};for(var r in e)DCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&MCe.call(e,r)&&(n[r]=e[r]);return n};function LCe(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=hlt(t,["children","onMouseEnter","onMouseLeave"]);const o=C.useRef(),a=TY(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=tp(r,()=>a.trigger==="hover"&&a.openDropdown()),c=tp(i,()=>a.trigger==="hover"&&a.closeDropdown());return M.createElement(di.Dropdown,dlt({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),M.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}LCe.displayName="@mantine/core/MenuDropdown";var plt=Object.defineProperty,mlt=Object.defineProperties,glt=Object.getOwnPropertyDescriptors,Ole=Object.getOwnPropertySymbols,ylt=Object.prototype.hasOwnProperty,vlt=Object.prototype.propertyIsEnumerable,Ple=(e,t,n)=>t in e?plt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_lt=(e,t)=>{for(var n in t||(t={}))ylt.call(t,n)&&Ple(e,n,t[n]);if(Ole)for(var n of Ole(t))vlt.call(t,n)&&Ple(e,n,t[n]);return e},blt=(e,t)=>mlt(e,glt(t)),wlt=lt((e,{color:t,radius:n})=>({item:blt(_lt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const Elt=wlt;var xlt=Object.defineProperty,Slt=Object.defineProperties,Tlt=Object.getOwnPropertyDescriptors,HN=Object.getOwnPropertySymbols,FCe=Object.prototype.hasOwnProperty,BCe=Object.prototype.propertyIsEnumerable,kle=(e,t,n)=>t in e?xlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Clt=(e,t)=>{for(var n in t||(t={}))FCe.call(t,n)&&kle(e,n,t[n]);if(HN)for(var n of HN(t))BCe.call(t,n)&&kle(e,n,t[n]);return e},Alt=(e,t)=>Slt(e,Tlt(t)),Ilt=(e,t)=>{var n={};for(var r in e)FCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&BCe.call(e,r)&&(n[r]=e[r]);return n};const jCe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=Ilt(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=TY(),{classNames:f,styles:d,unstyled:h}=D0(),{classes:p,cx:m,theme:g}=Elt({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=C.useRef(),v=c.getItemIndex(y.current),_=l,b=tp(_.onMouseLeave,()=>c.setHovered(-1)),E=tp(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),w=tp(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),x=tp(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return M.createElement(st,Alt(Clt({component:"button",type:"button"},l),{tabIndex:-1,onFocus:x,className:m(p.item,i),ref:Os(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:b,onClick:w,onKeyDown:mxe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&M.createElement("div",{className:p.itemIcon},a),r&&M.createElement("div",{className:p.itemLabel},r),u&&M.createElement("div",{className:p.itemRightSection},u))});jCe.displayName="@mantine/core/MenuItem";const Olt=jCe;var Plt=lt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}}));const klt=Plt;var $lt=Object.defineProperty,qN=Object.getOwnPropertySymbols,zCe=Object.prototype.hasOwnProperty,UCe=Object.prototype.propertyIsEnumerable,$le=(e,t,n)=>t in e?$lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rlt=(e,t)=>{for(var n in t||(t={}))zCe.call(t,n)&&$le(e,n,t[n]);if(qN)for(var n of qN(t))UCe.call(t,n)&&$le(e,n,t[n]);return e},Nlt=(e,t)=>{var n={};for(var r in e)zCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&UCe.call(e,r)&&(n[r]=e[r]);return n};function VCe(e){var t=e,{children:n,className:r}=t,i=Nlt(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=D0(),{classes:u,cx:l}=klt(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return M.createElement(ct,Rlt({className:l(u.label,r)},i),n)}VCe.displayName="@mantine/core/MenuLabel";var Dlt=Object.defineProperty,WN=Object.getOwnPropertySymbols,HCe=Object.prototype.hasOwnProperty,qCe=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?Dlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mlt=(e,t)=>{for(var n in t||(t={}))HCe.call(t,n)&&Rle(e,n,t[n]);if(WN)for(var n of WN(t))qCe.call(t,n)&&Rle(e,n,t[n]);return e},Llt=(e,t)=>{var n={};for(var r in e)HCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&qCe.call(e,r)&&(n[r]=e[r]);return n};const WCe=C.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=Llt(n,["children","refProp"]);if(!VA(r))throw new Error(NCe.children);const o=TY(),a=tp(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=tp(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=tp(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return M.createElement(di.Target,Mlt({refProp:i,popupType:"menu",ref:t},s),C.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});WCe.displayName="@mantine/core/MenuTarget";var Flt=lt({dropdown:{padding:4}});const Blt=Flt;var jlt=Object.defineProperty,zlt=Object.defineProperties,Ult=Object.getOwnPropertyDescriptors,GN=Object.getOwnPropertySymbols,GCe=Object.prototype.hasOwnProperty,YCe=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?jlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dle=(e,t)=>{for(var n in t||(t={}))GCe.call(t,n)&&Nle(e,n,t[n]);if(GN)for(var n of GN(t))YCe.call(t,n)&&Nle(e,n,t[n]);return e},Mle=(e,t)=>zlt(e,Ult(t)),Vlt=(e,t)=>{var n={};for(var r in e)GCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&YCe.call(e,r)&&(n[r]=e[r]);return n};const Hlt={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function Fl(e){const t=gt("Menu",Hlt,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=Vlt(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:b}=Blt(),[E,{setHovered:w,resetHovered:x}]=EKe(),[S,P]=ia({value:s,defaultValue:o,finalValue:!1,onChange:a}),A=()=>{P(!1),S&&(i==null||i())},O=()=>{P(!0),!S&&(r==null||r())},z=()=>S?A():O(),{openDropdown:D,closeDropdown:R}=Kat({open:O,close:A,closeDelay:h,openDelay:d}),N=L=>_Ke("[data-menu-item]","[data-menu-dropdown]",L);return Es(()=>{x()},[S]),M.createElement(clt,{value:{opened:S,toggleDropdown:z,getItemIndex:N,hovered:E,setHovered:w,closeOnItemClick:u,closeDropdown:f==="click"?A:R,openDropdown:f==="click"?O:D,closeDropdownImmediately:A,loop:l,trigger:f,radius:y}},M.createElement(di,Mle(Dle({},v),{radius:y,opened:S,onChange:P,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:Mle(Dle({},p),{dropdown:b(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:A,onOpen:O}),n))}Fl.displayName="@mantine/core/Menu";Fl.Item=Olt;Fl.Label=VCe;Fl.Dropdown=LCe;Fl.Target=WCe;Fl.Divider=RCe;var qlt=Object.defineProperty,Lle=Object.getOwnPropertySymbols,Wlt=Object.prototype.hasOwnProperty,Glt=Object.prototype.propertyIsEnumerable,Fle=(e,t,n)=>t in e?qlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ylt=(e,t)=>{for(var n in t||(t={}))Wlt.call(t,n)&&Fle(e,n,t[n]);if(Lle)for(var n of Lle(t))Glt.call(t,n)&&Fle(e,n,t[n]);return e};const Klt={xs:320,sm:380,md:440,lg:620,xl:780};function Xlt(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var Qlt=lt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:Ylt({position:"relative",width:s?"100vw":e.fn.size({sizes:Klt,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},Xlt(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}}));const Jlt=Qlt;var Zlt=Object.defineProperty,YN=Object.getOwnPropertySymbols,KCe=Object.prototype.hasOwnProperty,XCe=Object.prototype.propertyIsEnumerable,Ble=(e,t,n)=>t in e?Zlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ect=(e,t)=>{for(var n in t||(t={}))KCe.call(t,n)&&Ble(e,n,t[n]);if(YN)for(var n of YN(t))XCe.call(t,n)&&Ble(e,n,t[n]);return e},tct=(e,t)=>{var n={};for(var r in e)KCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&XCe.call(e,r)&&(n[r]=e[r]);return n};const nct={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:za("modal"),exitTransitionDuration:0};function Og(e){const t=gt("Modal",nct,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:b,styles:E,closeOnClickOutside:w,trapFocus:x,closeOnEscape:S,centered:P,target:A,withinPortal:O,zIndex:z,overlayBlur:D,transitionTimingFunction:R,fullScreen:N,unstyled:L,lockScroll:V,withFocusReturn:j}=t,H=tct(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),U=$u(_),k=`${U}-title`,$=`${U}-body`,{classes:q,cx:F,theme:B}=Jlt({size:l,overflow:p,centered:P,zIndex:z,fullScreen:N},{unstyled:L,classNames:b,styles:E,name:"Modal"}),Q=eY(x&&r),se=C.useRef(null),ae=Os(Q,se),ce=typeof u=="number"?u:B.colorScheme==="dark"?.85:.75;Qxe(V&&r);const le=Fe=>{!x&&Fe.key==="Escape"&&S&&s()};C.useEffect(()=>{if(!x)return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[x]),ZG({opened:r,shouldReturnFocus:x&&j});const ge=C.useRef(null);Jz("mousedown",Fe=>{ge.current=Fe.target});const ue=()=>{ge.current===se.current&&w&&s()};return M.createElement(RE,{withinPortal:O,target:A},M.createElement(EY,{mounted:r,duration:c,exitDuration:f,timingFunction:R,transitions:{modal:{duration:c,transition:m||(N?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Fe=>M.createElement(M.Fragment,null,M.createElement(st,ect({id:U,className:F(q.root,n)},H),M.createElement("div",{style:Fe.overlay},M.createElement(xY,{className:q.overlay,sx:{position:"fixed"},zIndex:0,blur:D,color:h||(B.colorScheme==="dark"?B.colors.dark[9]:B.black),opacity:ce,unstyled:L})),M.createElement("div",{role:"presentation",className:q.inner,onClick:ue,onKeyDown:ke=>{var Ge;((Ge=ke.target)==null?void 0:Ge.getAttribute("data-mantine-stop-propagation"))!=="true"&&ke.key==="Escape"&&S&&s()},ref:ae},M.createElement(_Y,{className:q.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":k,"aria-describedby":$,"aria-modal":!0,tabIndex:-1,style:Fe.modal,unstyled:L,onClick:ke=>ke.stopPropagation()},(i||a)&&M.createElement("div",{className:q.header},M.createElement(ct,{id:k,className:q.title},i),a&&M.createElement(rm,{iconSize:16,onClick:s,"aria-label":d,className:q.close})),M.createElement("div",{id:$,className:q.body},o)))))))}Og.displayName="@mantine/core/Modal";const rct={xs:16,sm:22,md:26,lg:30,xl:36},ict={xs:10,sm:12,md:14,lg:16,xl:18};var sct=lt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:rct}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:ict}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const oct=sct;var act=Object.defineProperty,KN=Object.getOwnPropertySymbols,QCe=Object.prototype.hasOwnProperty,JCe=Object.prototype.propertyIsEnumerable,jle=(e,t,n)=>t in e?act(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uct=(e,t)=>{for(var n in t||(t={}))QCe.call(t,n)&&jle(e,n,t[n]);if(KN)for(var n of KN(t))JCe.call(t,n)&&jle(e,n,t[n]);return e},lct=(e,t)=>{var n={};for(var r in e)QCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&JCe.call(e,r)&&(n[r]=e[r]);return n};const zle={xs:16,sm:22,md:24,lg:26,xl:30};function ZCe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=lct(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=oct({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return M.createElement("div",uct({className:p(h.defaultValue,s)},d),M.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&M.createElement(rm,{"aria-hidden":!0,onMouseDown:o,size:zle[l],radius:2,color:"blue",variant:"transparent",iconSize:zle[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}ZCe.displayName="@mantine/core/MultiSelect/DefaultValue";function cct({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var fct=Object.defineProperty,XN=Object.getOwnPropertySymbols,eAe=Object.prototype.hasOwnProperty,tAe=Object.prototype.propertyIsEnumerable,Ule=(e,t,n)=>t in e?fct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vle=(e,t)=>{for(var n in t||(t={}))eAe.call(t,n)&&Ule(e,n,t[n]);if(XN)for(var n of XN(t))tAe.call(t,n)&&Ule(e,n,t[n]);return e},dct=(e,t)=>{var n={};for(var r in e)eAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&tAe.call(e,r)&&(n[r]=e[r]);return n};const hct={xs:14,sm:18,md:20,lg:24,xl:28};function nAe(e){var t=e,{size:n,error:r,style:i}=t,s=dct(t,["size","error","style"]);const o=cs(),a=o.fn.size({size:n,sizes:hct});return M.createElement("svg",Vle({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Vle({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),M.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function rAe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?M.createElement(rm,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):M.createElement(nAe,{error:i,size:r})}rAe.displayName="@mantine/core/SelectRightSection";var pct=Object.defineProperty,mct=Object.defineProperties,gct=Object.getOwnPropertyDescriptors,QN=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?pct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$9=(e,t)=>{for(var n in t||(t={}))iAe.call(t,n)&&Hle(e,n,t[n]);if(QN)for(var n of QN(t))sAe.call(t,n)&&Hle(e,n,t[n]);return e},qle=(e,t)=>mct(e,gct(t)),yct=(e,t)=>{var n={};for(var r in e)iAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&sAe.call(e,r)&&(n[r]=e[r]);return n};const vct={xs:24,sm:30,md:34,lg:44,xl:54};function oAe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=yct(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:vct}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&M.createElement(rAe,$9({},o)),styles:qle($9({},a),{rightSection:qle($9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var _ct=Object.defineProperty,bct=Object.defineProperties,wct=Object.getOwnPropertyDescriptors,Wle=Object.getOwnPropertySymbols,Ect=Object.prototype.hasOwnProperty,xct=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?_ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sct=(e,t)=>{for(var n in t||(t={}))Ect.call(t,n)&&Gle(e,n,t[n]);if(Wle)for(var n of Wle(t))xct.call(t,n)&&Gle(e,n,t[n]);return e},Tct=(e,t)=>bct(e,wct(t)),Cct=lt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:zo})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:Tct(Sct({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:zo})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const Act=Cct;var Ict=Object.defineProperty,Oct=Object.defineProperties,Pct=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,aAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,Yle=(e,t,n)=>t in e?Ict(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y_=(e,t)=>{for(var n in t||(t={}))aAe.call(t,n)&&Yle(e,n,t[n]);if(JN)for(var n of JN(t))uAe.call(t,n)&&Yle(e,n,t[n]);return e},Kle=(e,t)=>Oct(e,Pct(t)),kct=(e,t)=>{var n={};for(var r in e)aAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&uAe.call(e,r)&&(n[r]=e[r]);return n};function $ct(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Rct(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function Xle(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const Nct={size:"sm",valueComponent:ZCe,itemComponent:sY,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:$ct,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:Rct,switchDirectionOnFlip:!1,zIndex:za("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},lAe=C.forwardRef((e,t)=>{const n=gt("MultiSelect",Nct,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:b,transitionDuration:E,transitionTimingFunction:w,maxDropdownHeight:x,shadow:S,nothingFound:P,onFocus:A,onBlur:O,searchable:z,placeholder:D,filter:R,limit:N,clearSearchOnChange:L,clearable:V,clearSearchOnBlur:j,clearButtonLabel:H,variant:U,onSearchChange:k,searchValue:$,disabled:q,initiallyOpened:F,radius:B,icon:Q,rightSection:se,rightSectionWidth:ae,creatable:ce,getCreateLabel:le,shouldCreate:ge,onCreate:ue,sx:Fe,dropdownComponent:ke,onDropdownClose:Ge,onDropdownOpen:Re,maxSelectedValues:Oe,withinPortal:Me,switchDirectionOnFlip:Ut,zIndex:Qe,selectOnBlur:je,name:xt,dropdownPosition:et,errorProps:ft,labelProps:dt,descriptionProps:jt,clearButtonTabIndex:Dn,form:he,positionDependencies:_e,onKeyDown:Pe,unstyled:it,inputContainer:Ye,inputWrapperOrder:ut,readOnly:tt,withAsterisk:wt}=n,In=kct(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Wt,cx:Vt,theme:hr}=Act({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:it,name:"MultiSelect"}),{systemStyles:Yn,rest:Lu}=Ef(In),Lr=C.useRef(),fs=C.useRef(),ri=C.useRef({}),Ti=$u(_),[qr,yr]=C.useState(F),[_t,Fr]=C.useState(-1),[Ci,Qi]=C.useState("column"),[to,qa]=ia({value:$,defaultValue:"",finalValue:void 0,onChange:k}),[ne,J]=C.useState(!1),{scrollIntoView:ie,targetRef:ve,scrollableRef:ye}=Xxe({duration:0,offset:5,cancelable:!1,isList:!0}),yt=ce&&typeof le=="function";let Ae=null;const pt=m.map(bt=>typeof bt=="string"?{label:bt,value:bt}:bt),Bt=gxe({data:pt}),[At,Ht]=ia({value:Xle(h,m),defaultValue:Xle(p,m),finalValue:[],onChange:g}),fn=C.useRef(!!Oe&&Oe<At.length),Tr=bt=>{if(!tt){const wn=At.filter(Br=>Br!==bt);Ht(wn),Oe&&wn.length<Oe&&(fn.current=!1)}},zt=bt=>{qa(bt.currentTarget.value),!q&&!fn.current&&z&&yr(!0)},pr=bt=>{typeof A=="function"&&A(bt),!q&&!fn.current&&z&&yr(!0)},Xt=cct({data:Bt,searchable:z,searchValue:to,limit:N,filter:R,value:At}),er=(bt,wn,Br)=>{let $s=bt;for(;Br($s);)if($s=wn($s),!Xt[$s].disabled)return $s;return bt};Es(()=>{Fr(-1)},[to]),Es(()=>{!q&&At.length>m.length&&yr(!1),Oe&&At.length<Oe&&(fn.current=!1),Oe&&At.length>=Oe&&(fn.current=!0,yr(!1))},[At]);const ii=bt=>{if(!tt)if(L&&qa(""),At.includes(bt.value))Tr(bt.value);else{if(bt.creatable&&typeof ue=="function"){const wn=ue(bt.value);typeof wn<"u"&&wn!==null&&Ht(typeof wn=="string"?[...At,wn]:[...At,wn.value])}else Ht([...At,bt.value]);At.length===Oe-1&&(fn.current=!0,yr(!1)),_t===Xt.length-1&&Fr(Xt.length-2),Xt.length===1&&yr(!1)}},ds=bt=>{typeof O=="function"&&O(bt),je&&Xt[_t]&&qr&&ii(Xt[_t]),j&&qa(""),yr(!1)},zi=bt=>{if(ne||(Pe==null||Pe(bt),tt)||bt.key!=="Backspace"&&Oe&&fn.current)return;const wn=Ci==="column",Br=()=>{Fr(Wa=>{var W;const te=er(Wa,K=>K+1,K=>K<Xt.length-1);return qr&&(ve.current=ri.current[(W=Xt[te])==null?void 0:W.value],ie({alignment:wn?"end":"start"})),te})},$s=()=>{Fr(Wa=>{var W;const te=er(Wa,K=>K-1,K=>K>0);return qr&&(ve.current=ri.current[(W=Xt[te])==null?void 0:W.value],ie({alignment:wn?"start":"end"})),te})};switch(bt.key){case"ArrowUp":{bt.preventDefault(),yr(!0),wn?$s():Br();break}case"ArrowDown":{bt.preventDefault(),yr(!0),wn?Br():$s();break}case"Enter":{bt.preventDefault(),Xt[_t]&&qr?ii(Xt[_t]):yr(!0);break}case" ":{z||(bt.preventDefault(),Xt[_t]&&qr?ii(Xt[_t]):yr(!0));break}case"Backspace":{At.length>0&&to.length===0&&(Ht(At.slice(0,-1)),yr(!0),Oe&&(fn.current=!1));break}case"Home":{if(!z){bt.preventDefault(),qr||yr(!0);const Wa=Xt.findIndex(W=>!W.disabled);Fr(Wa),ie({alignment:wn?"end":"start"})}break}case"End":{if(!z){bt.preventDefault(),qr||yr(!0);const Wa=Xt.map(W=>!!W.disabled).lastIndexOf(!1);Fr(Wa),ie({alignment:wn?"end":"start"})}break}case"Escape":yr(!1)}},da=At.map(bt=>{let wn=Bt.find(Br=>Br.value===bt&&!Br.disabled);return!wn&&yt&&(wn={value:bt,label:bt}),wn}).filter(bt=>!!bt).map(bt=>M.createElement(y,Kle(y_({},bt),{variant:U,disabled:q,className:Wt.value,readOnly:tt,onRemove:wn=>{wn.preventDefault(),wn.stopPropagation(),Tr(bt.value)},key:bt.value,size:u,styles:f,classNames:c,radius:B}))),no=()=>{var bt;qa(""),Ht([]),(bt=Lr.current)==null||bt.focus(),Oe&&(fn.current=!1)};yt&&ge(to,Bt)&&(Ae=le(to),Xt.push({label:to,value:to,creatable:!0}));const vi=!tt&&(Xt.length>0?qr:qr&&!!P);return Es(()=>{const bt=vi?Re:Ge;typeof bt=="function"&&bt()},[vi]),M.createElement(as.Wrapper,y_(y_({required:s,id:Ti,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Fe,errorProps:ft,descriptionProps:jt,labelProps:dt,inputContainer:Ye,inputWrapperOrder:ut,unstyled:it,withAsterisk:wt},Yn),d),M.createElement(Ig,{opened:vi,transition:b,transitionDuration:E,shadow:"sm",withinPortal:Me,__staticSelector:"MultiSelect",onDirectionChange:Qi,switchDirectionOnFlip:Ut,zIndex:Qe,dropdownPosition:et,positionDependencies:_e,classNames:c,styles:f,unstyled:it},M.createElement(Ig.Target,null,M.createElement("div",{className:Wt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":qr&&vi?`${Ti}-items`:null,"aria-controls":Ti,"aria-expanded":qr,onMouseLeave:()=>Fr(-1),tabIndex:-1,ref:fs},M.createElement("input",{type:"hidden",name:xt,value:At.join(","),form:he,disabled:q}),M.createElement(as,y_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:U,disabled:q,invalid:!!l,required:s,radius:B,icon:Q,unstyled:it,onMouseDown:bt=>{var wn;bt.preventDefault(),!q&&!fn.current&&yr(!qr),(wn=Lr.current)==null||wn.focus()},classNames:Kle(y_({},c),{input:Vt({[Wt.input]:!z},c==null?void 0:c.input)})},oAe({theme:hr,rightSection:se,rightSectionWidth:ae,styles:f,size:u,shouldClear:V&&At.length>0,clearButtonLabel:H,onClear:no,error:l,disabled:q,clearButtonTabIndex:Dn,readOnly:tt})),M.createElement("div",{className:Wt.values},da,M.createElement("input",y_({ref:Os(t,Lr),type:"search",id:Ti,className:Vt(Wt.searchInput,{[Wt.searchInputPointer]:!z,[Wt.searchInputInputHidden]:!qr&&At.length>0||!z&&At.length>0,[Wt.searchInputEmpty]:At.length===0}),onKeyDown:zi,value:to,onChange:zt,onFocus:pr,onBlur:ds,readOnly:!z||fn.current||tt,placeholder:At.length===0?D:void 0,disabled:q,"data-mantine-stop-propagation":qr,autoComplete:"off",onCompositionStart:()=>J(!0),onCompositionEnd:()=>J(!1)},Lu)))))),M.createElement(Ig.Dropdown,{component:ke||E6,maxHeight:x,direction:Ci,id:Ti,innerRef:ye,__staticSelector:"MultiSelect",classNames:c,styles:f},M.createElement(iY,{data:Xt,hovered:_t,classNames:c,styles:f,uuid:Ti,__staticSelector:"MultiSelect",onItemHover:Fr,onItemSelect:ii,itemsRefs:ri,itemComponent:v,size:u,nothingFound:P,creatable:ce&&!!Ae,createLabel:Ae,unstyled:it}))))});lAe.displayName="@mantine/core/MultiSelect";var Dct=Object.defineProperty,Mct=Object.defineProperties,Lct=Object.getOwnPropertyDescriptors,Qle=Object.getOwnPropertySymbols,Fct=Object.prototype.hasOwnProperty,Bct=Object.prototype.propertyIsEnumerable,Jle=(e,t,n)=>t in e?Dct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zle=(e,t)=>{for(var n in t||(t={}))Fct.call(t,n)&&Jle(e,n,t[n]);if(Qle)for(var n of Qle(t))Bct.call(t,n)&&Jle(e,n,t[n]);return e},jct=(e,t)=>Mct(e,Lct(t)),zct=lt((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:jct(Zle({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Zle({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}});const Uct=zct;var Vct=Object.defineProperty,ZN=Object.getOwnPropertySymbols,cAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,ece=(e,t,n)=>t in e?Vct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hct=(e,t)=>{for(var n in t||(t={}))cAe.call(t,n)&&ece(e,n,t[n]);if(ZN)for(var n of ZN(t))fAe.call(t,n)&&ece(e,n,t[n]);return e},qct=(e,t)=>{var n={};for(var r in e)cAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&fAe.call(e,r)&&(n[r]=e[r]);return n};const Wct={variant:"light",childrenOffset:"lg"},dAe=C.forwardRef((e,t)=>{const n=gt("NavLink",Wct,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:b,disabled:E,onClick:w}=n,x=qct(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:S,cx:P}=Uct({color:d,variant:h,noWrap:p,childrenOffset:b,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[A,O]=ia({value:g,defaultValue:y,finalValue:!1,onChange:v}),z=!!m,D=R=>{z?(R.preventDefault(),w==null||w(R),O(!A)):w==null||w(R)};return M.createElement(M.Fragment,null,M.createElement(nm,Hct({ref:t,className:P(S.root,a),"data-active":f||void 0,onClick:D,unstyled:c,"data-expanded":A||void 0,"data-disabled":E||void 0,disabled:E},x),s&&M.createElement("span",{className:S.icon},s),M.createElement("span",{className:S.body},M.createElement(ct,{component:"span",size:"sm",className:S.label},r),M.createElement(ct,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:S.description},i)),(z||o)&&M.createElement("span",{className:S.rightSection,"data-rotate":A&&!_||void 0},z?o||M.createElement(QJe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),M.createElement(uSe,{in:A},M.createElement("div",{className:S.children},m)))});dAe.displayName="@mantine/core/NavLink";const hAe=dAe,Gct=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function tce({direction:e,size:t}){return M.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const pAe={xs:20,sm:24,md:30,lg:34,xl:36};var Yct=lt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:pAe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const Kct=Yct;var Xct=Object.defineProperty,Qct=Object.defineProperties,Jct=Object.getOwnPropertyDescriptors,eD=Object.getOwnPropertySymbols,mAe=Object.prototype.hasOwnProperty,gAe=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?Xct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R9=(e,t)=>{for(var n in t||(t={}))mAe.call(t,n)&&nce(e,n,t[n]);if(eD)for(var n of eD(t))gAe.call(t,n)&&nce(e,n,t[n]);return e},Zct=(e,t)=>Qct(e,Jct(t)),eft=(e,t)=>{var n={};for(var r in e)mAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&gAe.call(e,r)&&(n[r]=e[r]);return n};const tft={type:"text",size:"sm",__staticSelector:"TextInput"},C6=C.forwardRef((e,t)=>{const n=e2e("TextInput",tft,e),{inputProps:r,wrapperProps:i}=n,s=eft(n,["inputProps","wrapperProps"]);return M.createElement(as.Wrapper,R9({},i),M.createElement(as,Zct(R9(R9({},r),s),{ref:t})))});C6.displayName="@mantine/core/TextInput";var nft=Object.defineProperty,rft=Object.defineProperties,ift=Object.getOwnPropertyDescriptors,tD=Object.getOwnPropertySymbols,yAe=Object.prototype.hasOwnProperty,vAe=Object.prototype.propertyIsEnumerable,rce=(e,t,n)=>t in e?nft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sft=(e,t)=>{for(var n in t||(t={}))yAe.call(t,n)&&rce(e,n,t[n]);if(tD)for(var n of tD(t))vAe.call(t,n)&&rce(e,n,t[n]);return e},oft=(e,t)=>rft(e,ift(t)),aft=(e,t)=>{var n={};for(var r in e)yAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&vAe.call(e,r)&&(n[r]=e[r]);return n};const uft=e=>e||"",lft=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},ice={xs:10,sm:14,md:16,lg:18,xl:20},cft={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:uft,parser:lft,type:"text"},_Ae=C.forwardRef((e,t)=>{const n=gt("NumberInput",cft,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:b,removeTrailingZeros:E,defaultValue:w,noClampOnBlur:x,handlersRef:S,classNames:P,styles:A,size:O,rightSection:z,rightSectionWidth:D,formatter:R,parser:N,inputMode:L,unstyled:V,type:j}=n,H=aft(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:U,cx:k,theme:$}=Kct({radius:v,size:O},{classNames:P,styles:A,unstyled:V,name:"NumberInput"}),q=Ye=>{if(Ye===void 0)return;let ut=Ye.toFixed(b);return E&&b>0&&(ut=ut.replace(new RegExp(`[0]{0,${b}}$`),""),(ut.endsWith(".")||ut.endsWith(o))&&(ut=ut.slice(0,-1))),ut},[F,B]=C.useState(!1),[Q,se]=C.useState(typeof i=="number"?i:typeof w=="number"?w:void 0),ae=typeof i=="number"?i:Q,[ce,le]=C.useState(typeof ae=="number"?q(ae):""),ge=C.useRef(),ue=Ye=>{Ye!==Q&&!Number.isNaN(Ye)&&(typeof s=="function"&&s(Ye),se(Ye))},Fe=(Ye="")=>{let ut=typeof Ye=="number"?String(Ye):Ye;return o&&(ut=ut.replace(/\./g,o)),R(ut)},ke=Ye=>{let ut=Ye;return o&&(ut=ut.replace(new RegExp(`\\${o}`,"g"),".")),N(ut)},Ge=typeof a=="number"?a:-1/0,Re=typeof u=="number"?u:1/0,Oe=C.useRef();Oe.current=()=>{var Ye,ut,tt;if(Q===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(ut=q(l))!=null?ut:q(a))!=null?tt:"0");else{const wt=q(of(Q+c,Ge,Re));ue(parseFloat(wt)),le(wt)}};const Me=C.useRef();Me.current=()=>{var Ye,ut,tt;if(Q===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(ut=q(l))!=null?ut:q(a))!=null?tt:"0");else{const wt=q(of(Q-c,Ge,Re));ue(parseFloat(wt)),le(wt)}},Gxe(S,{increment:Oe.current,decrement:Me.current}),C.useEffect(()=>{typeof i=="number"&&!F&&(se(i),le(q(i))),w===void 0&&i===void 0&&!F&&(se(i),le(""))},[i]);const Ut=d!==void 0&&f!==void 0,Qe=C.useRef(null),je=C.useRef(0),xt=()=>{Qe.current&&window.clearTimeout(Qe.current),Qe.current=null,je.current=0},et=Ye=>{Ye?Oe.current():Me.current(),je.current+=1},ft=Ye=>{if(et(Ye),Ut){const ut=typeof f=="number"?f:f(je.current);Qe.current=window.setTimeout(()=>ft(Ye),ut)}},dt=(Ye,ut)=>{Ye.preventDefault(),ge.current.focus(),et(ut),Ut&&(Qe.current=window.setTimeout(()=>ft(ut),d))};C.useEffect(()=>(xt(),xt),[]);const jt=M.createElement("div",{className:U.rightSection},M.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae>=u,className:k(U.control,U.controlUp),onPointerDown:Ye=>{dt(Ye,!0)},onPointerUp:xt,onPointerLeave:xt},M.createElement(tce,{size:$.fn.size({size:O,sizes:ice}),direction:"up"})),M.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae<=a,className:k(U.control,U.controlDown),onPointerDown:Ye=>{dt(Ye,!1)},onPointerUp:xt,onPointerLeave:xt},M.createElement(tce,{size:$.fn.size({size:O,sizes:ice}),direction:"down"}))),Dn=Ye=>{if(Ye.nativeEvent.isComposing)return;const tt=Ye.target.value,wt=ke(tt);le(wt),tt===""||tt==="-"?ue(void 0):tt.trim()!==""&&!Number.isNaN(wt)&&ue(parseFloat(wt))},he=Ye=>{var ut;if(Ye.target.value==="")le(""),ue(void 0);else{let tt=Ye.target.value;(tt[0]===`${o}`||tt[0]===".")&&(tt=`0${tt}`);const wt=ke(tt),In=of(parseFloat(wt),Ge,Re);Number.isNaN(In)?le((ut=q(ae))!=null?ut:""):x||(le(q(In)),ue(parseFloat(q(In))))}B(!1),typeof h=="function"&&h(Ye)},_e=Ye=>{B(!0),typeof p=="function"&&p(Ye)},Pe=Ye=>{if(typeof m=="function"&&m(Ye),Ye.repeat&&Ut&&(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")){Ye.preventDefault();return}Ye.key==="ArrowUp"?dt(Ye,!0):Ye.key==="ArrowDown"&&dt(Ye,!1)},it=Ye=>{typeof g=="function"&&g(Ye),(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")&&xt()};return M.createElement(C6,oft(sft({},H),{type:j,variant:_,value:Fe(ce),disabled:r,ref:Os(ge,t),onChange:Dn,onBlur:he,onFocus:_e,onKeyDown:Pe,onKeyUp:it,rightSection:z||(r||y||_==="unstyled"?null:jt),rightSectionWidth:D||$.fn.size({size:O,sizes:pAe})+1,radius:v,max:u,min:a,step:c,size:O,styles:A,classNames:P,inputMode:L||Gct(c,b,rJe()),__staticSelector:"NumberInput",unstyled:V}))});_Ae.displayName="@mantine/core/NumberInput";const sce={xs:3,sm:5,md:8,lg:12,xl:16},fft=KXe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var dft=lt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:sce}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${fft} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:sce})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const hft=dft,bAe=C.createContext(!1),pft=bAe.Provider,mft=()=>C.useContext(bAe);function wAe({children:e,openDelay:t=0,closeDelay:n=0}){return M.createElement(pft,{value:!0},M.createElement(trt,{delay:{open:t,close:n}},e))}wAe.displayName="@mantine/core/TooltipGroup";var gft=Object.defineProperty,yft=Object.defineProperties,vft=Object.getOwnPropertyDescriptors,oce=Object.getOwnPropertySymbols,_ft=Object.prototype.hasOwnProperty,bft=Object.prototype.propertyIsEnumerable,ace=(e,t,n)=>t in e?gft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uce=(e,t)=>{for(var n in t||(t={}))_ft.call(t,n)&&ace(e,n,t[n]);if(oce)for(var n of oce(t))bft.call(t,n)&&ace(e,n,t[n]);return e},wft=(e,t)=>yft(e,vft(t));function Eft(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var xft=lt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:wft(uce(uce({},e.fn.fontStyles()),Eft(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const EAe=xft,xAe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function Sft({offset:e,position:t}){const[n,r]=C.useState(!1),i=C.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=hY({placement:t,middleware:[cY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=C.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return C.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=mp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var Tft=Object.defineProperty,Cft=Object.defineProperties,Aft=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,SAe=Object.prototype.hasOwnProperty,TAe=Object.prototype.propertyIsEnumerable,lce=(e,t,n)=>t in e?Tft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N9=(e,t)=>{for(var n in t||(t={}))SAe.call(t,n)&&lce(e,n,t[n]);if(nD)for(var n of nD(t))TAe.call(t,n)&&lce(e,n,t[n]);return e},D9=(e,t)=>Cft(e,Aft(t)),Ift=(e,t)=>{var n={};for(var r in e)SAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&TAe.call(e,r)&&(n[r]=e[r]);return n};const Oft={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:za("popover")};function CAe(e){var t;const n=gt("TooltipFloating",Oft,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,b=Ift(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:E,x:w,y:x,opened:S,boundaryRef:P,floating:A,setOpened:O}=Sft({offset:p,position:m}),{classes:z,cx:D}=EAe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!VA(r))throw new Error(xAe.children);const R=Os(P,r.ref),N=V=>{var j,H;(H=(j=r.props).onMouseEnter)==null||H.call(j,V),E(V),O(!0)},L=V=>{var j,H;(H=(j=r.props).onMouseLeave)==null||H.call(j,V),O(!1)};return _?M.createElement(M.Fragment,null,r):M.createElement(M.Fragment,null,M.createElement(RE,{withinPortal:s},M.createElement(st,D9(N9({},b),{ref:A,className:D(z.tooltip,a),style:D9(N9({},o),{zIndex:v,display:S?"block":"none",top:x??"",left:(t=Math.round(w))!=null?t:""})}),h)),C.cloneElement(r,D9(N9({},r.props),{[i]:R,onMouseEnter:N,onMouseLeave:L})))}CAe.displayName="@mantine/core/TooltipFloating";function Pft(e){const[t,n]=C.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=mft(),o=$u(),{delay:a,currentId:u,setCurrentId:l}=NTe(),c=C.useCallback(S=>{n(S),S&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:b}={}}}=hY({placement:e.position,open:i,onOpenChange:c,middleware:[ETe(e.offset),cY({padding:8}),wTe(),PTe({element:e.arrowRef}),...e.inline?[STe()]:[]]}),{getReferenceProps:E,getFloatingProps:w}=Qnt([ert(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),art(m,{enabled:e.events.focus,keyboardOnly:!0}),rrt(m,{role:"tooltip"}),ort(m,{enabled:typeof e.opened===void 0}),nrt(m,{id:o})]);return DTe({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),Es(()=>{var S;(S=e.onPositionChange)==null||S.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:b,reference:h,floating:p,getFloatingProps:w,getReferenceProps:E,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var kft=Object.defineProperty,$ft=Object.defineProperties,Rft=Object.getOwnPropertyDescriptors,rD=Object.getOwnPropertySymbols,AAe=Object.prototype.hasOwnProperty,IAe=Object.prototype.propertyIsEnumerable,cce=(e,t,n)=>t in e?kft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nS=(e,t)=>{for(var n in t||(t={}))AAe.call(t,n)&&cce(e,n,t[n]);if(rD)for(var n of rD(t))IAe.call(t,n)&&cce(e,n,t[n]);return e},Nft=(e,t)=>$ft(e,Rft(t)),Dft=(e,t)=>{var n={};for(var r in e)AAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&IAe.call(e,r)&&(n[r]=e[r]);return n};const Mft={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:za("popover"),positionDependencies:[]},A6=C.forwardRef((e,t)=>{const n=C.useRef(null),r=gt("Tooltip",Mft,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:b,arrowSize:E,arrowOffset:w,arrowRadius:x,offset:S,transition:P,transitionDuration:A,multiline:O,width:z,events:D,zIndex:R,disabled:N,positionDependencies:L,onClick:V,onMouseEnter:j,onMouseLeave:H,inline:U}=r,k=Dft(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:$,cx:q,theme:F}=EAe({radius:h,color:p,width:z,multiline:O},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),B=Pft({position:KTe(F.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:D,arrowRef:n,offset:S+(b?E/2:0),positionDependencies:[...L,i],inline:U});if(!VA(i))throw new Error(xAe.children);const Q=Os(B.reference,i.ref,t);return M.createElement(M.Fragment,null,M.createElement(RE,{withinPortal:d},M.createElement(XA,{mounted:!N&&B.opened,transition:P,duration:B.isGroupPhase?10:A},se=>{var ae,ce;return M.createElement(st,nS(nS({},k),B.getFloatingProps({ref:B.floating,className:$.tooltip,style:Nft(nS(nS({},v),se),{zIndex:R,top:(ae=B.y)!=null?ae:0,left:(ce=B.x)!=null?ce:0})})),a,M.createElement(pY,{ref:n,arrowX:B.arrowX,arrowY:B.arrowY,visible:b,withBorder:!1,position:B.placement,arrowSize:E,arrowOffset:w,arrowRadius:x,className:$.arrow}))})),C.cloneElement(i,B.getReferenceProps(nS({onClick:V,onMouseEnter:j,onMouseLeave:H,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:Q,className:q(_,i.props.className)},i.props))))});A6.Group=wAe;A6.Floating=CAe;A6.displayName="@mantine/core/Tooltip";const I6=A6;var Lft=Object.defineProperty,Fft=Object.defineProperties,Bft=Object.getOwnPropertyDescriptors,iD=Object.getOwnPropertySymbols,OAe=Object.prototype.hasOwnProperty,PAe=Object.prototype.propertyIsEnumerable,fce=(e,t,n)=>t in e?Lft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lU=(e,t)=>{for(var n in t||(t={}))OAe.call(t,n)&&fce(e,n,t[n]);if(iD)for(var n of iD(t))PAe.call(t,n)&&fce(e,n,t[n]);return e},kAe=(e,t)=>Fft(e,Bft(t)),dce=(e,t)=>{var n={};for(var r in e)OAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&PAe.call(e,r)&&(n[r]=e[r]);return n};function jft(e){return e.reduce((t,n)=>(t.sections.push(kAe(lU({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const zft={size:"md",radius:"sm",striped:!1,animate:!1,label:""},$Ae=C.forwardRef((e,t)=>{const n=gt("Progress",zft,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=dce(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=hft({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),b=Array.isArray(p)?jft(p).map((E,w)=>{var x=E,{tooltip:S,accumulated:P,value:A,label:O,color:z}=x,D=dce(x,["tooltip","accumulated","value","label","color"]);return M.createElement(I6.Floating,{label:S,disabled:!S,key:w},M.createElement(st,kAe(lU({},D),{className:v(y.bar,D.className),sx:{width:`${A}%`,left:`${P}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:z||_.primaryColor}).background}}),O&&M.createElement(ct,{className:y.label},O)))}):null;return M.createElement(st,lU({className:v(y.root,r),ref:t},g),b||M.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?M.createElement(ct,{className:y.label},c):""))});$Ae.displayName="@mantine/core/Progress";var Uft=Object.defineProperty,hce=Object.getOwnPropertySymbols,Vft=Object.prototype.hasOwnProperty,Hft=Object.prototype.propertyIsEnumerable,pce=(e,t,n)=>t in e?Uft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qft=(e,t)=>{for(var n in t||(t={}))Vft.call(t,n)&&pce(e,n,t[n]);if(hce)for(var n of hce(t))Hft.call(t,n)&&pce(e,n,t[n]);return e};function Wft(e){return M.createElement("svg",qft({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),M.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const RAe=C.createContext(null),Gft=RAe.Provider,Yft=()=>C.useContext(RAe);var Kft=Object.defineProperty,sD=Object.getOwnPropertySymbols,NAe=Object.prototype.hasOwnProperty,DAe=Object.prototype.propertyIsEnumerable,mce=(e,t,n)=>t in e?Kft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gce=(e,t)=>{for(var n in t||(t={}))NAe.call(t,n)&&mce(e,n,t[n]);if(sD)for(var n of sD(t))DAe.call(t,n)&&mce(e,n,t[n]);return e},Xft=(e,t)=>{var n={};for(var r in e)NAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&DAe.call(e,r)&&(n[r]=e[r]);return n};const Qft={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},MAe=C.forwardRef((e,t)=>{const n=gt("RadioGroup",Qft,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=Xft(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=ia({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return M.createElement(Gft,{value:{value:m,onChange:y,size:l,name:h}},M.createElement(as.Wrapper,gce(gce({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),M.createElement(V2e,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});MAe.displayName="@mantine/core/RadioGroup";var Jft=Object.defineProperty,Zft=Object.defineProperties,edt=Object.getOwnPropertyDescriptors,yce=Object.getOwnPropertySymbols,tdt=Object.prototype.hasOwnProperty,ndt=Object.prototype.propertyIsEnumerable,vce=(e,t,n)=>t in e?Jft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rdt=(e,t)=>{for(var n in t||(t={}))tdt.call(t,n)&&vce(e,n,t[n]);if(yce)for(var n of yce(t))ndt.call(t,n)&&vce(e,n,t[n]);return e},idt=(e,t)=>Zft(e,edt(t));const M9={xs:16,sm:20,md:24,lg:30,xl:36},dP={xs:6,sm:8,md:10,lg:14,xl:16};var sdt=lt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:dP,size:t}),height:e.fn.size({sizes:dP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:dP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:dP,size:t})/2}px)`},radio:idt(rdt({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:M9,size:t}),height:e.fn.size({sizes:M9,size:t}),borderRadius:e.fn.size({sizes:M9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}});const odt=sdt;var adt=Object.defineProperty,oD=Object.getOwnPropertySymbols,LAe=Object.prototype.hasOwnProperty,FAe=Object.prototype.propertyIsEnumerable,_ce=(e,t,n)=>t in e?adt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hP=(e,t)=>{for(var n in t||(t={}))LAe.call(t,n)&&_ce(e,n,t[n]);if(oD)for(var n of oD(t))FAe.call(t,n)&&_ce(e,n,t[n]);return e},udt=(e,t)=>{var n={};for(var r in e)LAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&FAe.call(e,r)&&(n[r]=e[r]);return n};const ldt={icon:Wft,transitionDuration:100,size:"sm",labelPosition:"right"},aD=C.forwardRef((e,t)=>{var n,r;const i=gt("Radio",ldt,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:b,description:E,error:w}=i,x=udt(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),S=Yft(),P=(n=S==null?void 0:S.size)!=null?n:l,A=e.size?l:P,{classes:O}=odt({color:d,size:A,transitionDuration:y,labelPosition:b,error:!!w},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:z,rest:D}=Ef(x),R=$u(a),N=S?{checked:S.value===D.value,name:(r=D.name)!=null?r:S.name,onChange:S.onChange}:{};return M.createElement(wY,hP(hP({className:s,sx:m,style:o,id:R,size:A,labelPosition:b,label:u,description:E,error:w,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":N.checked||void 0},z),v),M.createElement("div",{className:O.inner},M.createElement("input",hP(hP({ref:t,className:O.radio,type:"radio",id:R,disabled:f},D),N)),M.createElement(g,{className:O.icon,"aria-hidden":!0})))});aD.displayName="@mantine/core/Radio";aD.Group=MAe;var cdt=Object.defineProperty,fdt=Object.defineProperties,ddt=Object.getOwnPropertyDescriptors,bce=Object.getOwnPropertySymbols,hdt=Object.prototype.hasOwnProperty,pdt=Object.prototype.propertyIsEnumerable,wce=(e,t,n)=>t in e?cdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pP=(e,t)=>{for(var n in t||(t={}))hdt.call(t,n)&&wce(e,n,t[n]);if(bce)for(var n of bce(t))pdt.call(t,n)&&wce(e,n,t[n]);return e},mdt=(e,t)=>fdt(e,ddt(t));const e$=4,Ece={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var gdt=lt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:mdt(pP(pP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Ece[a in Ece?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:pP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:pP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:e$},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const ydt=gdt;var vdt=Object.defineProperty,uD=Object.getOwnPropertySymbols,BAe=Object.prototype.hasOwnProperty,jAe=Object.prototype.propertyIsEnumerable,xce=(e,t,n)=>t in e?vdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_dt=(e,t)=>{for(var n in t||(t={}))BAe.call(t,n)&&xce(e,n,t[n]);if(uD)for(var n of uD(t))jAe.call(t,n)&&xce(e,n,t[n]);return e},bdt=(e,t)=>{var n={};for(var r in e)BAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uD)for(var r of uD(e))t.indexOf(r)<0&&jAe.call(e,r)&&(n[r]=e[r]);return n};const wdt={disabled:!1,size:"sm",transitionDuration:200},zAe=C.forwardRef((e,t)=>{var n,r,i,s;const o=gt("SegmentedControl",wdt,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:b,defaultValue:E,orientation:w,unstyled:x}=o,S=bdt(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),P=cs(),A=g6(),O=P.respectReducedMotion?A:!1,z=l.map(ae=>typeof ae=="string"?{label:ae,value:ae}:ae),D=C.useRef(),[R,N]=C.useState(!1),[L,V]=ia({value:f,defaultValue:E,finalValue:Array.isArray(z)&&(s=(i=(n=z.find(ae=>!ae.disabled))==null?void 0:n.value)!=null?i:(r=z[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:j,cx:H}=ydt({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:O||!R,transitionDuration:y,transitionTimingFunction:v,orientation:w},{classNames:_,styles:b,unstyled:x,name:"SegmentedControl"}),[U,k]=C.useState({width:0,height:0,translate:[0,0]}),$=$u(c),q=C.useRef({}),[F,B]=v1();JG(()=>{D.current?N(!0):(D.current=!0,N(!1))}),C.useEffect(()=>{if(L in q.current&&F.current){const ae=q.current[L],ce=ae.getBoundingClientRect(),le=ae.offsetWidth/ce.width,ge=ce.width*le||0,ue=ce.height*le||0,Fe=B.width-ae.parentElement.offsetLeft+e$-ge,ke=ae.parentElement.offsetLeft-e$;k({width:ge,height:ue,translate:[P.dir==="rtl"?Fe:ke,ae.parentElement.offsetTop-e$]})}},[L,B]);const Q=z.map(ae=>M.createElement("div",{className:H(j.control,{[j.controlActive]:L===ae.value}),key:ae.value},M.createElement("input",{className:j.input,disabled:u||ae.disabled,type:"radio",name:$,value:ae.value,id:`${$}-${ae.value}`,checked:L===ae.value,onChange:()=>V(ae.value)}),M.createElement("label",{className:H(j.label,{[j.labelActive]:L===ae.value,[j.disabled]:u||ae.disabled}),htmlFor:`${$}-${ae.value}`,ref:ce=>{q.current[ae.value]=ce}},ae.label))),se=Os(F,t);return z.length===0?null:M.createElement(st,_dt({className:H(j.root,a),ref:se},S),typeof L=="string"&&R&&M.createElement(st,{component:"span",className:j.active,sx:{width:U.width,height:U.height,transform:`translate(${U.translate[0]}px, ${U.translate[1]}px )`}}),Q)});zAe.displayName="@mantine/core/SegmentedControl";function Edt({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var xdt=lt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const Sdt=xdt;var Tdt=Object.defineProperty,Cdt=Object.defineProperties,Adt=Object.getOwnPropertyDescriptors,lD=Object.getOwnPropertySymbols,UAe=Object.prototype.hasOwnProperty,VAe=Object.prototype.propertyIsEnumerable,Sce=(e,t,n)=>t in e?Tdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rS=(e,t)=>{for(var n in t||(t={}))UAe.call(t,n)&&Sce(e,n,t[n]);if(lD)for(var n of lD(t))VAe.call(t,n)&&Sce(e,n,t[n]);return e},L9=(e,t)=>Cdt(e,Adt(t)),Idt=(e,t)=>{var n={};for(var r in e)UAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lD)for(var r of lD(e))t.indexOf(r)<0&&VAe.call(e,r)&&(n[r]=e[r]);return n};function Odt(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Pdt(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const kdt={required:!1,size:"sm",shadow:"sm",itemComponent:sY,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:Odt,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:Pdt,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:za("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},CY=C.forwardRef((e,t)=>{const n=e2e("Select",kdt,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:b,filter:E,maxDropdownHeight:w,searchable:x,clearable:S,nothingFound:P,clearButtonLabel:A,limit:O,disabled:z,onSearchChange:D,searchValue:R,rightSection:N,rightSectionWidth:L,creatable:V,getCreateLabel:j,shouldCreate:H,selectOnBlur:U,onCreate:k,dropdownComponent:$,onDropdownClose:q,onDropdownOpen:F,withinPortal:B,switchDirectionOnFlip:Q,zIndex:se,name:ae,dropdownPosition:ce,allowDeselect:le,placeholder:ge,filterDataOnExactSearchMatch:ue,clearButtonTabIndex:Fe,form:ke,positionDependencies:Ge,readOnly:Re}=n,Oe=Idt(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:Me,cx:Ut,theme:Qe}=Sdt(),[je,xt]=C.useState(g),[et,ft]=C.useState(-1),dt=C.useRef(),jt=C.useRef({}),[Dn,he]=C.useState("column"),_e=Dn==="column",{scrollIntoView:Pe,targetRef:it,scrollableRef:Ye}=Xxe({duration:0,offset:5,cancelable:!1,isList:!0}),ut=le===void 0?S:le,tt=Ae=>{if(je!==Ae){xt(Ae);const pt=Ae?F:q;typeof pt=="function"&&pt()}},wt=V&&typeof j=="function";let In=null;const Wt=o.map(Ae=>typeof Ae=="string"?{label:Ae,value:Ae}:Ae),Vt=gxe({data:Wt}),[hr,Yn,Lu]=ia({value:a,defaultValue:u,finalValue:null,onChange:l}),Lr=Vt.find(Ae=>Ae.value===hr),[fs,ri]=ia({value:R,defaultValue:(Lr==null?void 0:Lr.label)||"",finalValue:void 0,onChange:D}),Ti=Ae=>{ri(Ae),x&&typeof D=="function"&&D(Ae)},qr=()=>{var Ae;Re||(Yn(null),Lu||Ti(""),(Ae=dt.current)==null||Ae.focus())};C.useEffect(()=>{const Ae=Vt.find(pt=>pt.value===hr);Ae?Ti(Ae.label):(!wt||!hr)&&Ti("")},[hr]),C.useEffect(()=>{Lr&&(!x||!je)&&Ti(Lr.label)},[Lr==null?void 0:Lr.label]);const yr=Ae=>{if(!Re)if(ut&&(Lr==null?void 0:Lr.value)===Ae.value)Yn(null),tt(!1);else{if(Ae.creatable&&typeof k=="function"){const pt=k(Ae.value);typeof pt<"u"&&pt!==null&&Yn(typeof pt=="string"?pt:pt.value)}else Yn(Ae.value);Lu||Ti(Ae.label),ft(-1),tt(!1),dt.current.focus()}},_t=Edt({data:Vt,searchable:x,limit:O,searchValue:fs,filter:E,filterDataOnExactSearchMatch:ue,value:hr});wt&&H(fs,_t)&&(In=j(fs),_t.push({label:fs,value:fs,creatable:!0}));const Fr=(Ae,pt,Bt)=>{let At=Ae;for(;Bt(At);)if(At=pt(At),!_t[At].disabled)return At;return Ae};Es(()=>{ft(-1)},[fs]);const Ci=hr?_t.findIndex(Ae=>Ae.value===hr):0,Qi=!Re&&(_t.length>0?je:je&&!!P),to=()=>{ft(Ae=>{var pt;const Bt=Fr(Ae,At=>At-1,At=>At>0);return it.current=jt.current[(pt=_t[Bt])==null?void 0:pt.value],Qi&&Pe({alignment:_e?"start":"end"}),Bt})},qa=()=>{ft(Ae=>{var pt;const Bt=Fr(Ae,At=>At+1,At=>At<_t.length-1);return it.current=jt.current[(pt=_t[Bt])==null?void 0:pt.value],Qi&&Pe({alignment:_e?"end":"start"}),Bt})},ne=()=>window.setTimeout(()=>{var Ae;it.current=jt.current[(Ae=_t[Ci])==null?void 0:Ae.value],Pe({alignment:_e?"end":"start"})},0);Es(()=>{Qi&&ne()},[Qi]);const J=Ae=>{switch(typeof f=="function"&&f(Ae),Ae.key){case"ArrowUp":{Ae.preventDefault(),je?_e?to():qa():(ft(Ci),tt(!0),ne());break}case"ArrowDown":{Ae.preventDefault(),je?_e?qa():to():(ft(Ci),tt(!0),ne());break}case"Home":{if(!x){Ae.preventDefault(),je||tt(!0);const pt=_t.findIndex(Bt=>!Bt.disabled);ft(pt),Qi&&Pe({alignment:_e?"end":"start"})}break}case"End":{if(!x){Ae.preventDefault(),je||tt(!0);const pt=_t.map(Bt=>!!Bt.disabled).lastIndexOf(!1);ft(pt),Qi&&Pe({alignment:_e?"end":"start"})}break}case"Escape":{Ae.preventDefault(),tt(!1),ft(-1);break}case" ":{x||(Ae.preventDefault(),_t[et]&&je?yr(_t[et]):(tt(!0),ft(Ci),ne()));break}case"Enter":x||Ae.preventDefault(),_t[et]&&je&&(Ae.preventDefault(),yr(_t[et]))}},ie=Ae=>{typeof d=="function"&&d(Ae);const pt=Vt.find(Bt=>Bt.value===hr);U&&_t[et]&&je&&yr(_t[et]),Ti((pt==null?void 0:pt.label)||""),tt(!1)},ve=Ae=>{typeof h=="function"&&h(Ae),x&&tt(!0)},ye=Ae=>{Re||(Ti(Ae.currentTarget.value),S&&Ae.currentTarget.value===""&&Yn(null),ft(-1),tt(!0))},yt=()=>{Re||(tt(!je),hr&&!je&&ft(Ci))};return M.createElement(as.Wrapper,L9(rS({},i),{__staticSelector:"Select"}),M.createElement(Ig,{opened:Qi,transition:p,transitionDuration:m,shadow:"sm",withinPortal:B,__staticSelector:"Select",onDirectionChange:he,switchDirectionOnFlip:Q,zIndex:se,dropdownPosition:ce,positionDependencies:Ge,classNames:_,styles:b,unstyled:v},M.createElement(Ig.Target,null,M.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":Qi?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":Qi,onMouseLeave:()=>ft(-1),tabIndex:-1},M.createElement("input",{type:"hidden",name:ae,value:hr||"",form:ke,disabled:z}),M.createElement(as,rS(L9(rS(rS({autoComplete:"off",type:"search"},r),Oe),{ref:Os(t,dt),onKeyDown:J,__staticSelector:"Select",value:fs,placeholder:ge,onChange:ye,"aria-autocomplete":"list","aria-controls":Qi?`${r.id}-items`:null,"aria-activedescendant":et>=0?`${r.id}-${et}`:null,onMouseDown:yt,onBlur:ie,onFocus:ve,readOnly:!x||Re,disabled:z,"data-mantine-stop-propagation":Qi,name:null,classNames:L9(rS({},_),{input:Ut({[Me.input]:!x},_==null?void 0:_.input)})}),oAe({theme:Qe,rightSection:N,rightSectionWidth:L,styles:b,size:r.size,shouldClear:S&&!!Lr,clearButtonLabel:A,onClear:qr,error:i.error,clearButtonTabIndex:Fe,disabled:z,readOnly:Re}))))),M.createElement(Ig.Dropdown,{component:$||E6,maxHeight:w,direction:Dn,id:r.id,innerRef:Ye,__staticSelector:"Select",classNames:_,styles:b},M.createElement(iY,{data:_t,hovered:et,classNames:_,styles:b,isItemSelected:Ae=>Ae===hr,uuid:r.id,__staticSelector:"Select",onItemHover:ft,onItemSelect:yr,itemsRefs:jt,itemComponent:c,size:r.size,nothingFound:P,creatable:wt&&!!In,createLabel:In,"aria-label":i.label,unstyled:v}))))});CY.displayName="@mantine/core/Select";function cD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function cU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var $dt=Object.defineProperty,Rdt=Object.defineProperties,Ndt=Object.getOwnPropertyDescriptors,Tce=Object.getOwnPropertySymbols,Ddt=Object.prototype.hasOwnProperty,Mdt=Object.prototype.propertyIsEnumerable,Cce=(e,t,n)=>t in e?$dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ldt=(e,t)=>{for(var n in t||(t={}))Ddt.call(t,n)&&Cce(e,n,t[n]);if(Tce)for(var n of Tce(t))Mdt.call(t,n)&&Cce(e,n,t[n]);return e},Fdt=(e,t)=>Rdt(e,Ndt(t));const au={xs:4,sm:6,md:8,lg:10,xl:12};var Bdt=lt((e,{size:t,disabled:n})=>({root:Fdt(Ldt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:au,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const jdt=Bdt;var zdt=Object.defineProperty,Udt=Object.defineProperties,Vdt=Object.getOwnPropertyDescriptors,Ace=Object.getOwnPropertySymbols,Hdt=Object.prototype.hasOwnProperty,qdt=Object.prototype.propertyIsEnumerable,Ice=(e,t,n)=>t in e?zdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wdt=(e,t)=>{for(var n in t||(t={}))Hdt.call(t,n)&&Ice(e,n,t[n]);if(Ace)for(var n of Ace(t))qdt.call(t,n)&&Ice(e,n,t[n]);return e},Gdt=(e,t)=>Udt(e,Vdt(t)),Ydt=lt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:Gdt(Wdt({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:au,size:n})*2,width:i||e.fn.size({sizes:au,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const Kdt=Ydt,fD=C.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:b,unstyled:E,thumbSize:w},x)=>{const{classes:S,cx:P,theme:A}=Kdt({color:a,size:c,disabled:b,thumbSize:w},{classNames:u,styles:l,unstyled:E,name:"Slider"}),[O,z]=C.useState(!1),D=p||s||O||v;return M.createElement(st,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:x,className:P(S.thumb,{[S.dragging]:s}),onFocus:()=>{z(!0),typeof g=="function"&&g()},onBlur:()=>{z(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:R=>R.stopPropagation(),style:{[A.dir==="rtl"?"right":"left"]:`${r}%`}},_,M.createElement(XA,{mounted:i!=null&&D,duration:d,transition:f,timingFunction:h||A.transitionTimingFunction},R=>M.createElement("div",{style:R,className:S.label},i)))});fD.displayName="@mantine/core/SliderThumb";function Xdt({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var Qdt=lt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:au})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:au,size:t}),width:e.fn.size({sizes:au,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:au,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));const Jdt=Qdt;function HAe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=Jdt({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>M.createElement(st,{className:h.markWrapper,sx:{left:`${cD({value:g.value,min:r,max:i})}%`},key:y},M.createElement("div",{className:p(h.mark,{[h.markFilled]:Xdt({mark:g,value:s,offset:u,inverted:d})})}),g.label&&M.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return M.createElement("div",null,m)}HAe.displayName="@mantine/core/SliderMarks";var Zdt=lt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:au,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:au}),marginLeft:e.fn.size({size:n,sizes:au}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:au}),left:-e.fn.size({size:n,sizes:au}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}}));const eht=Zdt;var tht=Object.defineProperty,nht=Object.defineProperties,rht=Object.getOwnPropertyDescriptors,dD=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable,Oce=(e,t,n)=>t in e?tht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iht=(e,t)=>{for(var n in t||(t={}))qAe.call(t,n)&&Oce(e,n,t[n]);if(dD)for(var n of dD(t))WAe.call(t,n)&&Oce(e,n,t[n]);return e},sht=(e,t)=>nht(e,rht(t)),oht=(e,t)=>{var n={};for(var r in e)qAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dD)for(var r of dD(e))t.indexOf(r)<0&&WAe.call(e,r)&&(n[r]=e[r]);return n};function AY(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=oht(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=eht({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return M.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},M.createElement(st,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:au})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:au})}px)`})}),u,M.createElement(HAe,sht(iht({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}AY.displayName="@mantine/core/SliderTrack";var aht=Object.defineProperty,uht=Object.defineProperties,lht=Object.getOwnPropertyDescriptors,hD=Object.getOwnPropertySymbols,GAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,Pce=(e,t,n)=>t in e?aht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cht=(e,t)=>{for(var n in t||(t={}))GAe.call(t,n)&&Pce(e,n,t[n]);if(hD)for(var n of hD(t))YAe.call(t,n)&&Pce(e,n,t[n]);return e},fht=(e,t)=>uht(e,lht(t)),dht=(e,t)=>{var n={};for(var r in e)GAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hD)for(var r of hD(e))t.indexOf(r)<0&&YAe.call(e,r)&&(n[r]=e[r]);return n};const IY=C.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=dht(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=jdt({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return M.createElement(st,fht(cht({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});IY.displayName="@mantine/core/SliderRoot";var hht=Object.defineProperty,pht=Object.defineProperties,mht=Object.getOwnPropertyDescriptors,pD=Object.getOwnPropertySymbols,KAe=Object.prototype.hasOwnProperty,XAe=Object.prototype.propertyIsEnumerable,kce=(e,t,n)=>t in e?hht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ght=(e,t)=>{for(var n in t||(t={}))KAe.call(t,n)&&kce(e,n,t[n]);if(pD)for(var n of pD(t))XAe.call(t,n)&&kce(e,n,t[n]);return e},yht=(e,t)=>pht(e,mht(t)),vht=(e,t)=>{var n={};for(var r in e)KAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pD)for(var r of pD(e))t.indexOf(r)<0&&XAe.call(e,r)&&(n[r]=e[r]);return n};const _ht={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},OY=C.forwardRef((e,t)=>{const n=gt("Slider",_ht,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,thumbChildren:P,disabled:A,unstyled:O,thumbSize:z,scale:D,inverted:R}=n,N=vht(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),L=cs(),[V,j]=C.useState(!1),[H,U]=ia({value:typeof o=="number"?of(o,f,d):o,defaultValue:typeof m=="number"?of(m,f,d):m,finalValue:of(0,f,d),onChange:a}),k=C.useRef(H),$=C.useRef(),q=cD({value:H,min:f,max:d}),F=D(H),B=typeof v=="function"?v(F):v,Q=C.useCallback(({x:ge})=>{if(!A){const ue=cU({value:ge,min:f,max:d,step:h,precision:p});U(ue),k.current=ue}},[A,f,d,h,p]),{ref:se,active:ae}=Kxe(Q,{onScrubEnd:()=>u==null?void 0:u(k.current)},L.dir),ce=ge=>{ge.stopPropagation()},le=ge=>{if(!A)switch(ge.key){case"ArrowUp":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(H+h,f),d);u==null||u(ue),U(ue);break}case"ArrowRight":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(L.dir==="rtl"?H-h:H+h,f),d);u==null||u(ue),U(ue);break}case"ArrowDown":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(H-h,f),d);u==null||u(ue),U(ue);break}case"ArrowLeft":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(L.dir==="rtl"?H+h:H-h,f),d);u==null||u(ue),U(ue);break}case"Home":{ge.preventDefault(),$.current.focus(),u==null||u(f),U(f);break}case"End":{ge.preventDefault(),$.current.focus(),u==null||u(d),U(d);break}}};return M.createElement(IY,yht(ght({},N),{size:l,ref:Os(se,t),onKeyDownCapture:le,onMouseDownCapture:()=>{var ge;return(ge=se.current)==null?void 0:ge.focus()},classNames:r,styles:i,disabled:A,unstyled:O}),M.createElement(AY,{inverted:R,offset:0,filled:q,marks:y,size:l,radius:c,color:s,min:f,max:d,value:F,onChange:U,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,classNames:r,styles:i,disabled:A,unstyled:O},M.createElement(fD,{max:d,min:f,value:F,position:q,dragging:ae,color:s,size:l,label:B,ref:$,onMouseDown:ce,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,classNames:r,styles:i,thumbLabel:x,showLabelOnHover:S&&V,disabled:A,unstyled:O,thumbSize:z},P)),M.createElement("input",{type:"hidden",name:g,value:F}))});OY.displayName="@mantine/core/Slider";function bht(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var wht=Object.defineProperty,Eht=Object.defineProperties,xht=Object.getOwnPropertyDescriptors,mD=Object.getOwnPropertySymbols,QAe=Object.prototype.hasOwnProperty,JAe=Object.prototype.propertyIsEnumerable,$ce=(e,t,n)=>t in e?wht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F9=(e,t)=>{for(var n in t||(t={}))QAe.call(t,n)&&$ce(e,n,t[n]);if(mD)for(var n of mD(t))JAe.call(t,n)&&$ce(e,n,t[n]);return e},B9=(e,t)=>Eht(e,xht(t)),Sht=(e,t)=>{var n={};for(var r in e)QAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mD)for(var r of mD(e))t.indexOf(r)<0&&JAe.call(e,r)&&(n[r]=e[r]);return n};const Tht={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},fU=C.forwardRef((e,t)=>{const n=gt("RangeSlider",Tht,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,thumbFromLabel:S,thumbToLabel:P,showLabelOnHover:A,thumbChildren:O,disabled:z,unstyled:D,thumbSize:R,scale:N,inverted:L}=n,V=Sht(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),j=cs(),[H,U]=C.useState(-1),[k,$]=C.useState(!1),[q,F]=ia({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),B=C.useRef(q),Q=C.useRef([]),se=C.useRef(void 0),ae=[cD({value:q[0],min:f,max:d}),cD({value:q[1],min:f,max:d})],ce=Qe=>{F(Qe),B.current=Qe};C.useEffect(()=>{Array.isArray(o)&&(B.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const le=(Qe,je,xt)=>{const et=[...B.current];et[je]=Qe,je===0&&(Qe>et[1]-(h-1e-9)&&(et[1]=Math.min(Qe+h,d)),Qe>(d-(h-1e-9)||f)&&(et[je]=B.current[je])),je===1&&(Qe<et[0]+h&&(et[0]=Math.max(Qe-h,f)),Qe<et[0]+h&&(et[je]=B.current[je])),ce(et),xt&&(u==null||u(B.current))},ge=Qe=>{if(!z){const je=cU({value:Qe,min:f,max:d,step:p,precision:m});le(je,se.current,!1)}},{ref:ue,active:Fe}=Kxe(({x:Qe})=>ge(Qe),{onScrubEnd:()=>u==null?void 0:u(B.current)},j.dir);function ke(Qe,je){Qe.stopPropagation(),se.current=je}const Ge=Qe=>{ue.current.focus();const je=ue.current.getBoundingClientRect(),xt=bht(Qe.nativeEvent),et=cU({value:xt-je.left,max:d,min:f,step:p,containerWidth:je.width}),ft=Math.abs(q[0]-et)>Math.abs(q[1]-et)?1:0,dt=j.dir==="ltr"?ft:ft===1?0:1;se.current=dt},Re=()=>H!==1&&H!==0?(U(0),0):H,Oe=Qe=>{if(!z)switch(Qe.key){case"ArrowUp":{Qe.preventDefault();const je=Re();Q.current[je].focus(),le(Math.min(Math.max(B.current[je]+p,f),d),je,!0);break}case"ArrowRight":{Qe.preventDefault();const je=Re();Q.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?B.current[je]-p:B.current[je]+p,f),d),je,!0);break}case"ArrowDown":{Qe.preventDefault();const je=Re();Q.current[je].focus(),le(Math.min(Math.max(B.current[je]-p,f),d),je,!0);break}case"ArrowLeft":{Qe.preventDefault();const je=Re();Q.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?B.current[je]+p:B.current[je]-p,f),d),je,!0);break}}},Me={max:d,min:f,color:s,size:l,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,onBlur:()=>U(-1),classNames:r,styles:i},Ut=Array.isArray(O);return M.createElement(IY,B9(F9({},V),{size:l,ref:Os(ue,t),onTouchStartCapture:Ge,onTouchEndCapture:()=>{se.current=-1},onMouseDownCapture:Ge,onMouseUpCapture:()=>{se.current=-1},onKeyDownCapture:Oe,styles:i,classNames:r,disabled:z,unstyled:D}),M.createElement(AY,{offset:ae[0],marksOffset:q[0],filled:ae[1]-ae[0],marks:v,inverted:L,size:l,radius:c,color:s,min:f,max:d,value:q[1],styles:i,classNames:r,onMouseEnter:A?()=>$(!0):void 0,onMouseLeave:A?()=>$(!1):void 0,onChange:Qe=>{const je=Math.abs(q[0]-Qe)>Math.abs(q[1]-Qe)?1:0,xt=[...q];xt[je]=Qe,ce(xt)},disabled:z,unstyled:D},M.createElement(fD,B9(F9({},Me),{value:N(q[0]),position:ae[0],dragging:Fe,label:typeof _=="function"?_(N(q[0])):_,ref:Qe=>{Q.current[0]=Qe},thumbLabel:S,onMouseDown:Qe=>ke(Qe,0),onFocus:()=>U(0),showLabelOnHover:A&&k,disabled:z,unstyled:D,thumbSize:R}),Ut?O[0]:O),M.createElement(fD,B9(F9({},Me),{thumbLabel:P,value:N(q[1]),position:ae[1],dragging:Fe,label:typeof _=="function"?_(N(q[1])):_,ref:Qe=>{Q.current[1]=Qe},onMouseDown:Qe=>ke(Qe,1),onFocus:()=>U(1),showLabelOnHover:A&&k,disabled:z,unstyled:D,thumbSize:R}),Ut?O[1]:O)),M.createElement("input",{type:"hidden",name:`${y}_from`,value:q[0]}),M.createElement("input",{type:"hidden",name:`${y}_to`,value:q[1]}))});fU.displayName="@mantine/core/RangeSlider";var Cht=Object.defineProperty,gD=Object.getOwnPropertySymbols,ZAe=Object.prototype.hasOwnProperty,eIe=Object.prototype.propertyIsEnumerable,Rce=(e,t,n)=>t in e?Cht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aht=(e,t)=>{for(var n in t||(t={}))ZAe.call(t,n)&&Rce(e,n,t[n]);if(gD)for(var n of gD(t))eIe.call(t,n)&&Rce(e,n,t[n]);return e},Iht=(e,t)=>{var n={};for(var r in e)ZAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gD)for(var r of gD(e))t.indexOf(r)<0&&eIe.call(e,r)&&(n[r]=e[r]);return n};const Oht={w:0,h:0},O6=C.forwardRef((e,t)=>{const n=gt("Space",Oht,e),{w:r,h:i,sx:s}=n,o=Iht(n,["w","h","sx"]);return M.createElement(st,Aht({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...Yg(s)]},o))});O6.displayName="@mantine/core/Space";var Pht=lt((e,{transitionDuration:t})=>({control:{},root:{position:"relative"},content:{display:"flex",flexDirection:"column",overflow:"hidden",transitionProperty:"max-height",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${t}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}}));const kht=Pht;var $ht=Object.defineProperty,yD=Object.getOwnPropertySymbols,tIe=Object.prototype.hasOwnProperty,nIe=Object.prototype.propertyIsEnumerable,Nce=(e,t,n)=>t in e?$ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rht=(e,t)=>{for(var n in t||(t={}))tIe.call(t,n)&&Nce(e,n,t[n]);if(yD)for(var n of yD(t))nIe.call(t,n)&&Nce(e,n,t[n]);return e},Nht=(e,t)=>{var n={};for(var r in e)tIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yD)for(var r of yD(e))t.indexOf(r)<0&&nIe.call(e,r)&&(n[r]=e[r]);return n};const Dht={maxHeight:100,transitionDuration:200,initialState:!1},rIe=C.forwardRef((e,t)=>{const n=gt("Spoiler",Dht,e),{className:r,children:i,maxHeight:s,hideLabel:o,showLabel:a,transitionDuration:u,controlRef:l,initialState:c,classNames:f,styles:d,unstyled:h}=n,p=Nht(n,["className","children","maxHeight","hideLabel","showLabel","transitionDuration","controlRef","initialState","classNames","styles","unstyled"]),{classes:m,cx:g}=kht({transitionDuration:u},{classNames:f,styles:d,unstyled:h,name:"Spoiler"}),[y,v]=C.useState(c),[_,b]=C.useState(c),{ref:E,height:w}=BQe(),x=y?o:a;return C.useEffect(()=>{b(s<w)},[w,s,i]),M.createElement(st,Rht({className:g(m.root,r),ref:t},p),M.createElement("div",{className:m.content,style:{maxHeight:y?w||void 0:s}},M.createElement("div",{ref:E},i)),_&&M.createElement(y6,{component:"button",ref:l,onClick:()=>v(S=>!S),className:m.control},x))});rIe.displayName="@mantine/core/Spoiler";var Mht=Object.defineProperty,Lht=Object.defineProperties,Fht=Object.getOwnPropertyDescriptors,Dce=Object.getOwnPropertySymbols,Bht=Object.prototype.hasOwnProperty,jht=Object.prototype.propertyIsEnumerable,Mce=(e,t,n)=>t in e?Mht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zht=(e,t)=>{for(var n in t||(t={}))Bht.call(t,n)&&Mce(e,n,t[n]);if(Dce)for(var n of Dce(t))jht.call(t,n)&&Mce(e,n,t[n]);return e},Uht=(e,t)=>Lht(e,Fht(t)),Vht=lt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:s,withColumnBorders:o})=>{const a=`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:Uht(zht({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:s?a:"","& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:e.fn.size({size:i,sizes:e.fontSizes}),padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},"& thead tr th":{borderBottom:a},"& tfoot tr th":{borderTop:a},"& tbody tr td":{padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`,borderBottom:a,fontSize:e.fn.size({size:i,sizes:e.fontSizes})},"& tbody tr:last-of-type td":{borderBottom:"none"},"& th + th, & td + td":{borderLeft:o?a:""},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const Hht=Vht;var qht=Object.defineProperty,Wht=Object.defineProperties,Ght=Object.getOwnPropertyDescriptors,vD=Object.getOwnPropertySymbols,iIe=Object.prototype.hasOwnProperty,sIe=Object.prototype.propertyIsEnumerable,Lce=(e,t,n)=>t in e?qht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yht=(e,t)=>{for(var n in t||(t={}))iIe.call(t,n)&&Lce(e,n,t[n]);if(vD)for(var n of vD(t))sIe.call(t,n)&&Lce(e,n,t[n]);return e},Kht=(e,t)=>Wht(e,Ght(t)),Xht=(e,t)=>{var n={};for(var r in e)iIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vD)for(var r of vD(e))t.indexOf(r)<0&&sIe.call(e,r)&&(n[r]=e[r]);return n};const Qht={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},oIe=C.forwardRef((e,t)=>{const n=gt("Table",Qht,e),{className:r,children:i,striped:s,highlightOnHover:o,captionSide:a,horizontalSpacing:u,verticalSpacing:l,fontSize:c,unstyled:f,withBorder:d,withColumnBorders:h}=n,p=Xht(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders"]),{classes:m,cx:g}=Hht({captionSide:a,verticalSpacing:l,horizontalSpacing:u,fontSize:c,withBorder:d,withColumnBorders:h},{unstyled:f,name:"Table"});return M.createElement(st,Kht(Yht({},p),{component:"table",ref:t,className:g(m.root,r),"data-striped":s||void 0,"data-hover":o||void 0}),i)});oIe.displayName="@mantine/core/Table";const dU={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[Jht,PY]=jG(dU.context);var Zht=Object.defineProperty,Fce=Object.getOwnPropertySymbols,ept=Object.prototype.hasOwnProperty,tpt=Object.prototype.propertyIsEnumerable,Bce=(e,t,n)=>t in e?Zht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,npt=(e,t)=>{for(var n in t||(t={}))ept.call(t,n)&&Bce(e,n,t[n]);if(Fce)for(var n of Fce(t))tpt.call(t,n)&&Bce(e,n,t[n]);return e};function rpt({variant:e,orientation:t,inverted:n,placement:r},i){const s=t==="vertical";return e==="default"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`2px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="outline"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`1px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="pills"?{gap:`calc(${i.spacing.sm}px / 2)`}:{}}var ipt=lt((e,t)=>{const n=t.orientation==="vertical";return{tabsList:npt({display:"flex",flexWrap:"wrap",flexDirection:n?"column":"row",justifyContent:F2e[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},rpt(t,e))}});const spt=ipt;var opt=Object.defineProperty,apt=Object.defineProperties,upt=Object.getOwnPropertyDescriptors,_D=Object.getOwnPropertySymbols,aIe=Object.prototype.hasOwnProperty,uIe=Object.prototype.propertyIsEnumerable,jce=(e,t,n)=>t in e?opt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lpt=(e,t)=>{for(var n in t||(t={}))aIe.call(t,n)&&jce(e,n,t[n]);if(_D)for(var n of _D(t))uIe.call(t,n)&&jce(e,n,t[n]);return e},cpt=(e,t)=>apt(e,upt(t)),fpt=(e,t)=>{var n={};for(var r in e)aIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_D)for(var r of _D(e))t.indexOf(r)<0&&uIe.call(e,r)&&(n[r]=e[r]);return n};const lIe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,grow:s=!1,position:o="left"}=n,a=fpt(n,["children","className","grow","position"]);const{orientation:u,variant:l,color:c,radius:f,inverted:d,placement:h}=PY(),{classNames:p,styles:m,unstyled:g}=D0(),{classes:y,cx:v}=spt({orientation:u,grow:s,variant:l,color:c,position:o,radius:f,inverted:d,placement:h},{name:"Tabs",unstyled:g,classNames:p,styles:m});return M.createElement(st,cpt(lpt({},a),{className:v(y.tabsList,i),ref:t,role:"tablist","aria-orientation":u}),r)});lIe.displayName="@mantine/core/TabsList";var dpt=lt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}}));const hpt=dpt;var ppt=Object.defineProperty,mpt=Object.defineProperties,gpt=Object.getOwnPropertyDescriptors,bD=Object.getOwnPropertySymbols,cIe=Object.prototype.hasOwnProperty,fIe=Object.prototype.propertyIsEnumerable,zce=(e,t,n)=>t in e?ppt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ypt=(e,t)=>{for(var n in t||(t={}))cIe.call(t,n)&&zce(e,n,t[n]);if(bD)for(var n of bD(t))fIe.call(t,n)&&zce(e,n,t[n]);return e},vpt=(e,t)=>mpt(e,gpt(t)),_pt=(e,t)=>{var n={};for(var r in e)cIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bD)for(var r of bD(e))t.indexOf(r)<0&&fIe.call(e,r)&&(n[r]=e[r]);return n};const dIe=C.forwardRef((e,t)=>{var n=e,{value:r,children:i,sx:s,className:o}=n,a=_pt(n,["value","children","sx","className"]);const u=PY(),{classNames:l,styles:c,unstyled:f}=D0(),{classes:d,cx:h}=hpt({orientation:u.orientation,variant:u.variant,color:u.color,radius:u.radius,inverted:u.inverted,placement:u.placement},{name:"Tabs",unstyled:f,classNames:l,styles:c}),p=u.value===r,m=u.keepMounted||p?i:null;return M.createElement(st,vpt(ypt({},a),{ref:t,sx:[{display:p?void 0:"none"},...Yg(s)],className:h(d.panel,o),role:"tabpanel",id:u.getPanelId(r),"aria-labelledby":u.getTabId(r)}),m)});dIe.displayName="@mantine/core/TabsPanel";var bpt=Object.defineProperty,wpt=Object.defineProperties,Ept=Object.getOwnPropertyDescriptors,Uce=Object.getOwnPropertySymbols,xpt=Object.prototype.hasOwnProperty,Spt=Object.prototype.propertyIsEnumerable,Vce=(e,t,n)=>t in e?bpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cb=(e,t)=>{for(var n in t||(t={}))xpt.call(t,n)&&Vce(e,n,t[n]);if(Uce)for(var n of Uce(t))Spt.call(t,n)&&Vce(e,n,t[n]);return e},Hce=(e,t)=>wpt(e,Ept(t));function Tpt(e,{variant:t,orientation:n,color:r,radius:i,inverted:s,placement:o}){const a=n==="vertical",u=e.fn.variant({color:r,variant:"filled"}),l=e.fn.radius(i),c=n==="vertical"?o==="left"?`${l}px 0 0 ${l}px`:` 0 ${l}px ${l}px 0`:s?`0 0 ${l}px ${l}px`:`${l}px ${l}px 0 0`;return t==="default"?Hce(cb({[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"2px solid transparent",[a?o==="left"?"marginRight":"marginLeft":s?"marginTop":"marginBottom"]:-2,borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":cb({borderColor:u.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:u.background}))}):t==="outline"?{borderRadius:c,border:"1px solid transparent",[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:a?0:s?"unset":-1,top:a?0:s?-1:"unset",[a?"width":"height"]:1,right:a?o==="left"?-1:"unset":0,left:a?o==="left"?"unset":-1:0}}}:t==="pills"?Hce(cb({borderRadius:e.fn.radius(i)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":cb({backgroundColor:u.background,color:e.white},e.fn.hover({backgroundColor:u.background}))}):{}}var Cpt=lt((e,t)=>({tabLabel:{},tab:cb({position:"relative",padding:`${e.spacing.xs}px ${e.spacing.md}px`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":cb({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},Tpt(e,t)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:7}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:7}}}));const Apt=Cpt;var Ipt=Object.defineProperty,Opt=Object.defineProperties,Ppt=Object.getOwnPropertyDescriptors,wD=Object.getOwnPropertySymbols,hIe=Object.prototype.hasOwnProperty,pIe=Object.prototype.propertyIsEnumerable,qce=(e,t,n)=>t in e?Ipt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kpt=(e,t)=>{for(var n in t||(t={}))hIe.call(t,n)&&qce(e,n,t[n]);if(wD)for(var n of wD(t))pIe.call(t,n)&&qce(e,n,t[n]);return e},$pt=(e,t)=>Opt(e,Ppt(t)),Rpt=(e,t)=>{var n={};for(var r in e)hIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wD)for(var r of wD(e))t.indexOf(r)<0&&pIe.call(e,r)&&(n[r]=e[r]);return n};const mIe=C.forwardRef((e,t)=>{var n=e,{value:r,children:i,onKeyDown:s,onClick:o,className:a,icon:u,rightSection:l,color:c}=n,f=Rpt(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]);const d=PY(),{classNames:h,styles:p,unstyled:m}=D0(),g=!!u,y=!!l,{theme:v,classes:_,cx:b}=Apt({withIcon:g||y&&!i,withRightSection:y||g&&!i,orientation:d.orientation,color:c||d.color,variant:d.variant,radius:d.radius,inverted:d.inverted,placement:d.placement},{name:"Tabs",unstyled:m,classNames:h,styles:p}),E=r===d.value,w=x=>{d.onTabChange(d.allowTabDeactivation&&r===d.value?null:r),o==null||o(x)};return M.createElement(nm,$pt(kpt({},f),{unstyled:m,className:b(_.tab,a),"data-active":E||void 0,ref:t,type:"button",role:"tab",id:d.getTabId(r),"aria-selected":E,tabIndex:E||d.value===null?0:-1,"aria-controls":d.getPanelId(r),onClick:w,onKeyDown:mxe({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:d.activateTabWithKeyboard,loop:d.loop,dir:v.dir,orientation:d.orientation,onKeyDown:s})}),u&&M.createElement("div",{className:_.tabIcon},u),i&&M.createElement("div",{className:_.tabLabel},i),l&&M.createElement("div",{className:_.tabRightSection},l))});mIe.displayName="@mantine/core/Tab";function gIe({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:s,id:o,activateTabWithKeyboard:a,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,placement:h,keepMounted:p=!0}){const m=$u(o),[g,y]=ia({value:t,defaultValue:e,finalValue:null,onChange:n});return M.createElement(Jht,{value:{placement:h,value:g,orientation:r,id:m,loop:s,activateTabWithKeyboard:a,getTabId:ioe(`${m}-tab`,dU.value),getPanelId:ioe(`${m}-panel`,dU.value),onTabChange:y,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,keepMounted:p}},i)}gIe.displayName="@mantine/core/TabsProvider";var Npt=lt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}}));const Dpt=Npt;var Mpt=Object.defineProperty,Lpt=Object.defineProperties,Fpt=Object.getOwnPropertyDescriptors,ED=Object.getOwnPropertySymbols,yIe=Object.prototype.hasOwnProperty,vIe=Object.prototype.propertyIsEnumerable,Wce=(e,t,n)=>t in e?Mpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bpt=(e,t)=>{for(var n in t||(t={}))yIe.call(t,n)&&Wce(e,n,t[n]);if(ED)for(var n of ED(t))vIe.call(t,n)&&Wce(e,n,t[n]);return e},jpt=(e,t)=>Lpt(e,Fpt(t)),zpt=(e,t)=>{var n={};for(var r in e)yIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ED)for(var r of ED(e))t.indexOf(r)<0&&vIe.call(e,r)&&(n[r]=e[r]);return n};const Upt={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Nl=C.forwardRef((e,t)=>{const n=gt("Tabs",Upt,e),{defaultValue:r,value:i,orientation:s,loop:o,activateTabWithKeyboard:a,allowTabDeactivation:u,children:l,id:c,onTabChange:f,variant:d,color:h,className:p,unstyled:m,classNames:g,styles:y,radius:v,inverted:_,keepMounted:b,placement:E}=n,w=zpt(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:x,cx:S}=Dpt({orientation:s,color:h,variant:d,radius:v,inverted:_,placement:E},{unstyled:m,name:"Tabs",classNames:g,styles:y});return M.createElement(QG,{classNames:g,styles:y,unstyled:m},M.createElement(gIe,{activateTabWithKeyboard:a,defaultValue:r,orientation:s,onTabChange:f,value:i,id:c,loop:o,allowTabDeactivation:u,color:h,variant:d,radius:v,inverted:_,keepMounted:b,placement:E},M.createElement(st,jpt(Bpt({},w),{className:S(x.root,p),id:c,ref:t}),l)))});Nl.List=lIe;Nl.Tab=mIe;Nl.Panel=dIe;Nl.displayName="@mantine/core/Tabs";var Vpt=Object.defineProperty,Hpt=Object.defineProperties,qpt=Object.getOwnPropertyDescriptors,Gce=Object.getOwnPropertySymbols,Wpt=Object.prototype.hasOwnProperty,Gpt=Object.prototype.propertyIsEnumerable,Yce=(e,t,n)=>t in e?Vpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ypt=(e,t)=>{for(var n in t||(t={}))Wpt.call(t,n)&&Yce(e,n,t[n]);if(Gce)for(var n of Gce(t))Gpt.call(t,n)&&Yce(e,n,t[n]);return e},Kpt=(e,t)=>Hpt(e,qpt(t));function Xpt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function Qpt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var Jpt=lt((e,{element:t,weight:n,size:r,inline:i})=>({root:Kpt(Ypt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:Xpt(r,t,e),lineHeight:i?1:Qpt(r,t,e),margin:0})}));const Zpt=Jpt;var emt=Object.defineProperty,xD=Object.getOwnPropertySymbols,_Ie=Object.prototype.hasOwnProperty,bIe=Object.prototype.propertyIsEnumerable,Kce=(e,t,n)=>t in e?emt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tmt=(e,t)=>{for(var n in t||(t={}))_Ie.call(t,n)&&Kce(e,n,t[n]);if(xD)for(var n of xD(t))bIe.call(t,n)&&Kce(e,n,t[n]);return e},nmt=(e,t)=>{var n={};for(var r in e)_Ie.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xD)for(var r of xD(e))t.indexOf(r)<0&&bIe.call(e,r)&&(n[r]=e[r]);return n};const rmt={order:1},Ho=C.forwardRef((e,t)=>{const n=gt("Title",rmt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=nmt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=Zpt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?M.createElement(ct,tmt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});Ho.displayName="@mantine/core/Title";var wIe={exports:{}},imt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",smt=imt,omt=smt;function EIe(){}function xIe(){}xIe.resetWarningCache=EIe;var amt=function(){function e(r,i,s,o,a,u){if(u!==omt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xIe,resetWarningCache:EIe};return n.PropTypes=n,n};wIe.exports=amt();var umt=wIe.exports;const Lt=bl(umt);var lmt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},cmt=Object.defineProperty,fmt=Object.defineProperties,dmt=Object.getOwnPropertyDescriptors,SD=Object.getOwnPropertySymbols,SIe=Object.prototype.hasOwnProperty,TIe=Object.prototype.propertyIsEnumerable,Xce=(e,t,n)=>t in e?cmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qce=(e,t)=>{for(var n in t||(t={}))SIe.call(t,n)&&Xce(e,n,t[n]);if(SD)for(var n of SD(t))TIe.call(t,n)&&Xce(e,n,t[n]);return e},hmt=(e,t)=>fmt(e,dmt(t)),pmt=(e,t)=>{var n={};for(var r in e)SIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SD)for(var r of SD(e))t.indexOf(r)<0&&TIe.call(e,r)&&(n[r]=e[r]);return n},ni=(e,t,n)=>{const r=C.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=pmt(o,["color","size","stroke","children"]);return C.createElement("svg",Qce(hmt(Qce({ref:s},lmt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>C.createElement(d,h)),...c||[]])});return r.propTypes={color:Lt.string,size:Lt.oneOfType([Lt.string,Lt.number]),stroke:Lt.oneOfType([Lt.string,Lt.number])},r.displayName=`${t}`,r},mmt=ni("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),gmt=ni("alert-triangle","IconAlertTriangle",[["path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 17h.01",key:"svg-2"}]]),ymt=ni("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),vmt=ni("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),_mt=ni("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),bmt=ni("brand-google","IconBrandGoogle",[["path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8",key:"svg-0"}]]),wmt=ni("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),Emt=ni("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),xmt=ni("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),Smt=ni("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),Jce=ni("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),Tmt=ni("code-dots","IconCodeDots",[["path",{d:"M15 12h.01",key:"svg-0"}],["path",{d:"M12 12h.01",key:"svg-1"}],["path",{d:"M9 12h.01",key:"svg-2"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-3"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-4"}]]),Cmt=ni("code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]),Amt=ni("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),Imt=ni("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),Omt=ni("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),Pmt=ni("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),kmt=ni("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),$mt=ni("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),Zce=ni("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),Rmt=ni("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Nmt=ni("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),kY=ni("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),Dmt=ni("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),Mmt=ni("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);function $Y(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const hc="/study/",efe=["http","https","mailto","tel"];function Lmt(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<efe.length;){const s=efe[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Fmt=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const RY=bl(Fmt);function Nb(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?tfe(e.position):"start"in e||"end"in e?tfe(e):"line"in e||"column"in e?hU(e):""}function hU(e){return nfe(e&&e.line)+":"+nfe(e&&e.column)}function tfe(e){return hU(e&&e.start)+"-"+hU(e&&e.end)}function nfe(e){return e&&typeof e=="number"?e:1}let pc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Nb(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};pc.prototype.file="";pc.prototype.name="";pc.prototype.reason="";pc.prototype.message="";pc.prototype.stack="";pc.prototype.fatal=null;pc.prototype.column=null;pc.prototype.line=null;pc.prototype.source=null;pc.prototype.ruleId=null;pc.prototype.position=null;const Wf={basename:Bmt,dirname:jmt,extname:zmt,join:Umt,sep:"/"};function Bmt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');QA(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function jmt(e){if(QA(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function zmt(e){QA(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Umt(...e){let t=-1,n;for(;++t<e.length;)QA(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Vmt(n)}function Vmt(e){QA(e);const t=e.charCodeAt(0)===47;let n=Hmt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Hmt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function QA(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const qmt={cwd:Wmt};function Wmt(){return"/"}function pU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Gmt(e){if(typeof e=="string")e=new URL(e);else if(!pU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Ymt(e)}function Ymt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const j9=["history","path","basename","stem","extname","dirname"];let Kmt=class{constructor(t){let n;t?typeof t=="string"||RY(t)?n={value:t}:pU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=qmt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<j9.length;){const s=j9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)j9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){pU(t)&&(t=Gmt(t)),U9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Wf.dirname(this.path):void 0}set dirname(t){rfe(this.basename,"dirname"),this.path=Wf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Wf.basename(this.path):void 0}set basename(t){U9(t,"basename"),z9(t,"basename"),this.path=Wf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Wf.extname(this.path):void 0}set extname(t){if(z9(t,"extname"),rfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Wf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Wf.basename(this.path,this.extname):void 0}set stem(t){U9(t,"stem"),z9(t,"stem"),this.path=Wf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new pc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function z9(e,t){if(e&&e.includes(Wf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Wf.sep+"`")}function U9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function rfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ife(e){if(e)throw e}var t$=Object.prototype.hasOwnProperty,CIe=Object.prototype.toString,sfe=Object.defineProperty,ofe=Object.getOwnPropertyDescriptor,afe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):CIe.call(t)==="[object Array]"},ufe=function(t){if(!t||CIe.call(t)!=="[object Object]")return!1;var n=t$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&t$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||t$.call(t,i)},lfe=function(t,n){sfe&&n.name==="__proto__"?sfe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},cfe=function(t,n){if(n==="__proto__")if(t$.call(t,n)){if(ofe)return ofe(t,n).value}else return;return t[n]},Xmt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=cfe(a,n),i=cfe(t,n),a!==i&&(c&&i&&(ufe(i)||(s=afe(i)))?(s?(s=!1,o=r&&afe(r)?r:[]):o=r&&ufe(r)?r:{},lfe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&lfe(a,{name:n,newValue:i}));return a};const ffe=bl(Xmt);function mU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qmt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Jmt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Jmt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class mc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Nb(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}mc.prototype.file="";mc.prototype.name="";mc.prototype.reason="";mc.prototype.message="";mc.prototype.stack="";mc.prototype.fatal=null;mc.prototype.column=null;mc.prototype.line=null;mc.prototype.source=null;mc.prototype.ruleId=null;mc.prototype.position=null;const Gf={basename:Zmt,dirname:egt,extname:tgt,join:ngt,sep:"/"};function Zmt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');JA(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function egt(e){if(JA(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function tgt(e){JA(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function ngt(...e){let t=-1,n;for(;++t<e.length;)JA(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":rgt(n)}function rgt(e){JA(e);const t=e.charCodeAt(0)===47;let n=igt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function igt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function JA(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const sgt={cwd:ogt};function ogt(){return"/"}function gU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function agt(e){if(typeof e=="string")e=new URL(e);else if(!gU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ugt(e)}function ugt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const V9=["history","path","basename","stem","extname","dirname"];class lgt{constructor(t){let n;t?typeof t=="string"||RY(t)?n={value:t}:gU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=sgt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<V9.length;){const s=V9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)V9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){gU(t)&&(t=agt(t)),q9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Gf.dirname(this.path):void 0}set dirname(t){dfe(this.basename,"dirname"),this.path=Gf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Gf.basename(this.path):void 0}set basename(t){q9(t,"basename"),H9(t,"basename"),this.path=Gf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Gf.extname(this.path):void 0}set extname(t){if(H9(t,"extname"),dfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Gf.basename(this.path,this.extname):void 0}set stem(t){q9(t,"stem"),H9(t,"stem"),this.path=Gf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new mc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function H9(e,t){if(e&&e.includes(Gf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Gf.sep+"`")}function q9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function dfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const cgt=IIe().freeze(),AIe={}.hasOwnProperty;function IIe(){const e=Qmt(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=IIe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(ffe(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(Y9("data",r),n[m]=g,s):AIe.call(n,m)&&n[m]||null:m?(Y9("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(Y9("use",r),m!=null)if(typeof m=="function")E(m,...g);else if(typeof m=="object")Array.isArray(m)?b(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(w){if(typeof w=="function")E(w);else if(typeof w=="object")if(Array.isArray(w)){const[x,...S]=w;E(x,...S)}else _(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function _(w){b(w.plugins),w.settings&&(y=Object.assign(y||{},w.settings))}function b(w){let x=-1;if(w!=null)if(Array.isArray(w))for(;++x<w.length;){const S=w[x];v(S)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function E(w,x){let S=-1,P;for(;++S<t.length;)if(t[S][0]===w){P=t[S];break}P?(mU(P[1])&&mU(x)&&(x=ffe(!0,P[1],x)),P[1]=x):t.push([...arguments])}}function l(m){s.freeze();const g=iS(m),y=s.Parser;return W9("parse",y),hfe(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=iS(g),v=s.Compiler;return G9("stringify",v),pfe(m),hfe(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(pfe(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,b){e.run(m,iS(g),E);function E(w,x,S){x=x||m,w?b(w):_?_(x):y(null,x,S)}}}function d(m,g){let y,v;return s.run(m,g,_),mfe("runSync","run",v),y;function _(b,E){ife(b),y=E,v=!0}}function h(m,g){if(s.freeze(),W9("process",s.Parser),G9("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const b=iS(m);s.run(s.parse(b),b,(w,x,S)=>{if(w||!x||!S)E(w);else{const P=s.stringify(x,S);P==null||(hgt(P)?S.value=P:S.result=P),E(w,S)}});function E(w,x){w||!x?_(w):v?v(x):g(null,x)}}}function p(m){let g;s.freeze(),W9("processSync",s.Parser),G9("processSync",s.Compiler);const y=iS(m);return s.process(y,v),mfe("processSync","process",g),y;function v(_){g=!0,ife(_)}}}function hfe(e,t){return typeof e=="function"&&e.prototype&&(fgt(e.prototype)||t in e.prototype)}function fgt(e){let t;for(t in e)if(AIe.call(e,t))return!0;return!1}function W9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function G9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Y9(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pfe(e){if(!mU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mfe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function iS(e){return dgt(e)?e:new lgt(e)}function dgt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function hgt(e){return typeof e=="string"||RY(e)}function pgt(e,t){var{includeImageAlt:n=!0}=t||{};return OIe(e,n)}function OIe(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&gfe(e.children,t)||Array.isArray(e)&&gfe(e,t))||""}function gfe(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=OIe(e[r],t);return n.join("")}function Ud(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Bl(e,t){return e.length>0?(Ud(e,e.length,0,t),e):t}const yfe={}.hasOwnProperty;function mgt(e){const t={};let n=-1;for(;++n<e.length;)ggt(t,e[n]);return t}function ggt(e,t){let n;for(n in t){const i=(yfe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){yfe.call(i,o)||(i[o]=[]);const a=s[o];ygt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function ygt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ud(e,0,0,r)}const vgt=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,id=L0(/[A-Za-z]/),yU=L0(/\d/),_gt=L0(/[\dA-Fa-f]/),Zu=L0(/[\dA-Za-z]/),bgt=L0(/[!-/:-@[-`{-~]/),vfe=L0(/[#-'*+\--9=?A-Z^-~]/);function vU(e){return e!==null&&(e<32||e===127)}function Jl(e){return e!==null&&(e<0||e===32)}function Jt(e){return e!==null&&e<-2}function rs(e){return e===-2||e===-1||e===32}const wgt=L0(/\s/),Egt=L0(vgt);function L0(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Nr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return rs(u)?(e.enter(n),a(u)):t(u)}function a(u){return rs(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const xgt={tokenize:Sgt};function Sgt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Jt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Tgt={tokenize:Cgt},_fe={tokenize:Agt};function Cgt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const b=n[r];return t.containerState=b[1],e.attempt(b[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const b=t.events.length;let E=b,w;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){w=t.events[E][1].end;break}y(r);let x=b;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},w),x++;return Ud(t.events,E+1,0,t.events.slice(b)),t.events.length=x,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(_fe,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(_fe,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return Jt(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,b){const E=t.sliceStream(_);if(b&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const x=t.events.length;let S=x,P,A;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(P){A=t.events[S][1].end;break}P=!0}for(y(r),w=x;w<t.events.length;)t.events[w][1].end=Object.assign({},A),w++;Ud(t.events,S+1,0,t.events.slice(x)),t.events.length=w}}function y(_){let b=n.length;for(;b-- >_;){const E=n[b];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Agt(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bfe(e){if(e===null||Jl(e)||wgt(e))return 1;if(Egt(e))return 2}function NY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const _U={name:"attention",tokenize:Ogt,resolveAll:Igt};function Igt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);wfe(f,-u),wfe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Bl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Bl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Bl(l,NY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Bl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Bl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ud(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Ogt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=bfe(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=bfe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function wfe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Pgt={name:"autolink",tokenize:kgt};function kgt(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return id(p)?(e.consume(p),o):vfe(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||Zu(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||Zu(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||vU(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):vfe(p)?(e.consume(p),l):n(p)}function c(p){return Zu(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||Zu(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const P6={tokenize:$gt,partial:!0};function $gt(e,t,n){return Nr(e,r,"linePrefix");function r(i){return i===null||Jt(i)?t(i):n(i)}}const PIe={name:"blockQuote",tokenize:Rgt,continuation:{tokenize:Ngt},exit:Dgt};function Rgt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return rs(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Ngt(e,t,n){return Nr(e,e.attempt(PIe,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Dgt(e){e.exit("blockQuote")}const kIe={name:"characterEscape",tokenize:Mgt};function Mgt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return bgt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Efe=document.createElement("i");function DY(e){const t="&"+e+";";Efe.innerHTML=t;const n=Efe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const $Ie={name:"characterReference",tokenize:Lgt};function Lgt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Zu,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=_gt,c):(e.enter("characterReferenceValue"),s=7,o=yU,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===Zu&&!DY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const xfe={name:"codeFenced",tokenize:Fgt,concrete:!0};function Fgt(e,t,n){const r=this,i={tokenize:E,partial:!0},s={tokenize:b,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=w,f(w)}function f(w){return w===l?(e.consume(w),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(w):Nr(e,d,"whitespace")(w))}function d(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||Jl(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,p,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),h)}function p(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||Jt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(w)):w===96&&w===l?n(w):(e.consume(w),m)}function g(w){return e.exit("codeFencedFence"),r.interrupt?t(w):y(w)}function y(w){return w===null?_(w):Jt(w)?e.attempt(s,e.attempt(i,_,a?Nr(e,y,"linePrefix",a+1):y),_)(w):(e.enter("codeFlowValue"),v(w))}function v(w){return w===null||Jt(w)?(e.exit("codeFlowValue"),y(w)):(e.consume(w),v)}function _(w){return e.exit("codeFenced"),t(w)}function b(w,x,S){const P=this;return A;function A(z){return w.enter("lineEnding"),w.consume(z),w.exit("lineEnding"),O}function O(z){return P.parser.lazy[P.now().line]?S(z):x(z)}}function E(w,x,S){let P=0;return Nr(w,A,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function A(D){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),O(D)}function O(D){return D===l?(w.consume(D),P++,O):P<u?S(D):(w.exit("codeFencedFenceSequence"),Nr(w,z,"whitespace")(D))}function z(D){return D===null||Jt(D)?(w.exit("codeFencedFence"),x(D)):S(D)}}}const K9={name:"codeIndented",tokenize:jgt},Bgt={tokenize:zgt,partial:!0};function jgt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Nr(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Jt(l)?e.attempt(Bgt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Jt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function zgt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Jt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Nr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Jt(o)?i(o):n(o)}}const Ugt={name:"codeText",tokenize:qgt,resolve:Vgt,previous:Hgt};function Vgt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Hgt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qgt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):Jt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Jt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function RIe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Wgt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),Ud(e,i,n-i+1,a))}}return!l}function Wgt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),Ud(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Ggt={tokenize:Xgt,resolve:Kgt},Ygt={tokenize:Qgt,partial:!0};function Kgt(e){return RIe(e),e}function Xgt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Jt(a)?e.check(Ygt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Qgt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Nr(e,s,"linePrefix")}function s(o){if(o===null||Jt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function NIe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||vU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Jt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||Jl(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):vU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function DIe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Jt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Jt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!rs(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function MIe(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Jt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Nr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Jt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function QT(e,t){let n;return r;function r(i){return Jt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):rs(i)?Nr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function Db(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Jgt={name:"definition",tokenize:e0t},Zgt={tokenize:t0t,partial:!0};function e0t(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),DIe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=Db(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),QT(e,NIe(e,e.attempt(Zgt,Nr(e,a,"whitespace"),Nr(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||Jt(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function t0t(e,t,n){return r;function r(o){return Jl(o)?QT(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?MIe(e,Nr(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||Jt(o)?t(o):n(o)}}const n0t={name:"hardBreakEscape",tokenize:r0t};function r0t(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return Jt(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const i0t={name:"headingAtx",tokenize:o0t,resolve:s0t};function s0t(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ud(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function o0t(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||Jl(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Jt(c)?(e.exit("atxHeading"),t(c)):rs(c)?Nr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Jl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const a0t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Sfe=["pre","script","style","textarea"],u0t={name:"htmlFlow",tokenize:f0t,resolveTo:c0t,concrete:!0},l0t={tokenize:d0t,partial:!0};function c0t(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function f0t(e,t,n){const r=this;let i,s,o,a,u;return l;function l($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),c}function c($){return $===33?(e.consume($),f):$===47?(e.consume($),p):$===63?(e.consume($),i=3,r.interrupt?t:H):id($)?(e.consume($),o=String.fromCharCode($),s=!0,m):n($)}function f($){return $===45?(e.consume($),i=2,d):$===91?(e.consume($),i=5,o="CDATA[",a=0,h):id($)?(e.consume($),i=4,r.interrupt?t:H):n($)}function d($){return $===45?(e.consume($),r.interrupt?t:H):n($)}function h($){return $===o.charCodeAt(a++)?(e.consume($),a===o.length?r.interrupt?t:O:h):n($)}function p($){return id($)?(e.consume($),o=String.fromCharCode($),m):n($)}function m($){return $===null||$===47||$===62||Jl($)?$!==47&&s&&Sfe.includes(o.toLowerCase())?(i=1,r.interrupt?t($):O($)):a0t.includes(o.toLowerCase())?(i=6,$===47?(e.consume($),g):r.interrupt?t($):O($)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):s?v($):y($)):$===45||Zu($)?(e.consume($),o+=String.fromCharCode($),m):n($)}function g($){return $===62?(e.consume($),r.interrupt?t:O):n($)}function y($){return rs($)?(e.consume($),y):P($)}function v($){return $===47?(e.consume($),P):$===58||$===95||id($)?(e.consume($),_):rs($)?(e.consume($),v):P($)}function _($){return $===45||$===46||$===58||$===95||Zu($)?(e.consume($),_):b($)}function b($){return $===61?(e.consume($),E):rs($)?(e.consume($),b):v($)}function E($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),u=$,w):rs($)?(e.consume($),E):(u=null,x($))}function w($){return $===null||Jt($)?n($):$===u?(e.consume($),S):(e.consume($),w)}function x($){return $===null||$===34||$===39||$===60||$===61||$===62||$===96||Jl($)?b($):(e.consume($),x)}function S($){return $===47||$===62||rs($)?v($):n($)}function P($){return $===62?(e.consume($),A):n($)}function A($){return rs($)?(e.consume($),A):$===null||Jt($)?O($):n($)}function O($){return $===45&&i===2?(e.consume($),N):$===60&&i===1?(e.consume($),L):$===62&&i===4?(e.consume($),U):$===63&&i===3?(e.consume($),H):$===93&&i===5?(e.consume($),j):Jt($)&&(i===6||i===7)?e.check(l0t,U,z)($):$===null||Jt($)?z($):(e.consume($),O)}function z($){return e.exit("htmlFlowData"),D($)}function D($){return $===null?k($):Jt($)?e.attempt({tokenize:R,partial:!0},D,k)($):(e.enter("htmlFlowData"),O($))}function R($,q,F){return B;function B(se){return $.enter("lineEnding"),$.consume(se),$.exit("lineEnding"),Q}function Q(se){return r.parser.lazy[r.now().line]?F(se):q(se)}}function N($){return $===45?(e.consume($),H):O($)}function L($){return $===47?(e.consume($),o="",V):O($)}function V($){return $===62&&Sfe.includes(o.toLowerCase())?(e.consume($),U):id($)&&o.length<8?(e.consume($),o+=String.fromCharCode($),V):O($)}function j($){return $===93?(e.consume($),H):O($)}function H($){return $===62?(e.consume($),U):$===45&&i===2?(e.consume($),H):O($)}function U($){return $===null||Jt($)?(e.exit("htmlFlowData"),k($)):(e.consume($),U)}function k($){return e.exit("htmlFlow"),t($)}}function d0t(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(P6,t,n)}}const h0t={name:"htmlText",tokenize:p0t};function p0t(e,t,n){const r=this;let i,s,o,a;return u;function u(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),l}function l(k){return k===33?(e.consume(k),c):k===47?(e.consume(k),x):k===63?(e.consume(k),E):id(k)?(e.consume(k),A):n(k)}function c(k){return k===45?(e.consume(k),f):k===91?(e.consume(k),s="CDATA[",o=0,g):id(k)?(e.consume(k),b):n(k)}function f(k){return k===45?(e.consume(k),d):n(k)}function d(k){return k===null||k===62?n(k):k===45?(e.consume(k),h):p(k)}function h(k){return k===null||k===62?n(k):p(k)}function p(k){return k===null?n(k):k===45?(e.consume(k),m):Jt(k)?(a=p,j(k)):(e.consume(k),p)}function m(k){return k===45?(e.consume(k),U):p(k)}function g(k){return k===s.charCodeAt(o++)?(e.consume(k),o===s.length?y:g):n(k)}function y(k){return k===null?n(k):k===93?(e.consume(k),v):Jt(k)?(a=y,j(k)):(e.consume(k),y)}function v(k){return k===93?(e.consume(k),_):y(k)}function _(k){return k===62?U(k):k===93?(e.consume(k),_):y(k)}function b(k){return k===null||k===62?U(k):Jt(k)?(a=b,j(k)):(e.consume(k),b)}function E(k){return k===null?n(k):k===63?(e.consume(k),w):Jt(k)?(a=E,j(k)):(e.consume(k),E)}function w(k){return k===62?U(k):E(k)}function x(k){return id(k)?(e.consume(k),S):n(k)}function S(k){return k===45||Zu(k)?(e.consume(k),S):P(k)}function P(k){return Jt(k)?(a=P,j(k)):rs(k)?(e.consume(k),P):U(k)}function A(k){return k===45||Zu(k)?(e.consume(k),A):k===47||k===62||Jl(k)?O(k):n(k)}function O(k){return k===47?(e.consume(k),U):k===58||k===95||id(k)?(e.consume(k),z):Jt(k)?(a=O,j(k)):rs(k)?(e.consume(k),O):U(k)}function z(k){return k===45||k===46||k===58||k===95||Zu(k)?(e.consume(k),z):D(k)}function D(k){return k===61?(e.consume(k),R):Jt(k)?(a=D,j(k)):rs(k)?(e.consume(k),D):O(k)}function R(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),i=k,N):Jt(k)?(a=R,j(k)):rs(k)?(e.consume(k),R):(e.consume(k),i=void 0,V)}function N(k){return k===i?(e.consume(k),L):k===null?n(k):Jt(k)?(a=N,j(k)):(e.consume(k),N)}function L(k){return k===62||k===47||Jl(k)?O(k):n(k)}function V(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===62||Jl(k)?O(k):(e.consume(k),V)}function j(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),Nr(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function H(k){return e.enter("htmlTextData"),a(k)}function U(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}}const MY={name:"labelEnd",tokenize:b0t,resolveTo:_0t,resolveAll:v0t},m0t={tokenize:w0t},g0t={tokenize:E0t},y0t={tokenize:x0t};function v0t(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function _0t(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Bl(a,e.slice(s+1,s+r+3)),a=Bl(a,[["enter",c,t]]),a=Bl(a,NY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Bl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Bl(a,e.slice(o+1)),a=Bl(a,[["exit",u,t]]),Ud(e,s,e.length,a),e}function b0t(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(Db(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(m0t,t,o?t:l)(c):c===91?e.attempt(g0t,t,o?e.attempt(y0t,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function w0t(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),QT(e,i)}function i(u){return u===41?a(u):NIe(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return Jl(u)?QT(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?MIe(e,QT(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function E0t(e,t,n){const r=this;return i;function i(o){return DIe.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Db(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function x0t(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const S0t={name:"labelStartImage",tokenize:T0t,resolveAll:MY.resolveAll};function T0t(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const C0t={name:"labelStartLink",tokenize:A0t,resolveAll:MY.resolveAll};function A0t(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const X9={name:"lineEnding",tokenize:I0t};function I0t(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const n$={name:"thematicBreak",tokenize:O0t};function O0t(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):rs(u)?Nr(e,o,"whitespace")(u):r<3||u!==null&&!Jt(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const Xa={name:"list",tokenize:$0t,continuation:{tokenize:R0t},exit:D0t},P0t={tokenize:M0t,partial:!0},k0t={tokenize:N0t,partial:!0};function $0t(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:yU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(n$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return yU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(P6,r.interrupt?n:c,e.attempt(P0t,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return rs(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function R0t(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(P6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!rs(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(k0t,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(Xa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function N0t(e,t,n){const r=this;return Nr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function D0t(e){e.exit(this.containerState.type)}function M0t(e,t,n){const r=this;return Nr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!rs(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Tfe={name:"setextUnderline",tokenize:F0t,resolveTo:L0t};function L0t(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function F0t(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),Nr(e,l,"lineSuffix")(c))}function l(c){return c===null||Jt(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const B0t={tokenize:j0t};function j0t(e){const t=this,n=e.attempt(P6,r,e.attempt(this.parser.constructs.flowInitial,i,Nr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ggt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const z0t={resolveAll:FIe()},U0t=LIe("string"),V0t=LIe("text");function LIe(e){return{tokenize:t,resolveAll:FIe(e==="text"?H0t:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function FIe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function H0t(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function q0t(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:b,attempt:x(E),check:x(w),interrupt:x(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(O){return o=Bl(o,O),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=NY(s,l.events,l),l.events)}function d(O,z){return G0t(h(O),z)}function h(O){return W0t(o,O)}function p(){return Object.assign({},r)}function m(O){i[O.line]=O.column,A()}function g(){let O;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(O){c=c(O)}function v(O){Jt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,A()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function _(O,z){const D=z||{};return D.type=O,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function b(O){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function E(O,z){S(O,z.from)}function w(O,z){z.restore()}function x(O,z){return D;function D(R,N,L){let V,j,H,U;return Array.isArray(R)?$(R):"tokenize"in R?$([R]):k(R);function k(Q){return se;function se(ae){const ce=ae!==null&&Q[ae],le=ae!==null&&Q.null,ge=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(le)?le:le?[le]:[]];return $(ge)(ae)}}function $(Q){return V=Q,j=0,Q.length===0?L:q(Q[j])}function q(Q){return se;function se(ae){return U=P(),H=Q,Q.partial||(l.currentConstruct=Q),Q.name&&l.parser.constructs.disable.null.includes(Q.name)?B():Q.tokenize.call(z?Object.assign(Object.create(l),z):l,u,F,B)(ae)}}function F(Q){return O(H,U),N}function B(Q){return U.restore(),++j<V.length?q(V[j]):L}}}function S(O,z){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Ud(l.events,z,l.events.length-z,O.resolve(l.events.slice(z),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function P(){const O=p(),z=l.previous,D=l.currentConstruct,R=l.events.length,N=Array.from(a);return{restore:L,from:R};function L(){r=O,l.previous=z,l.currentConstruct=D,l.events.length=R,a=N,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function W0t(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function G0t(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Y0t={42:Xa,43:Xa,45:Xa,48:Xa,49:Xa,50:Xa,51:Xa,52:Xa,53:Xa,54:Xa,55:Xa,56:Xa,57:Xa,62:PIe},K0t={91:Jgt},X0t={[-2]:K9,[-1]:K9,32:K9},Q0t={35:i0t,42:n$,45:[Tfe,n$],60:u0t,61:Tfe,95:n$,96:xfe,126:xfe},J0t={38:$Ie,92:kIe},Z0t={[-5]:X9,[-4]:X9,[-3]:X9,33:S0t,38:$Ie,42:_U,60:[Pgt,h0t],91:C0t,92:[n0t,kIe],93:MY,95:_U,96:Ugt},eyt={null:[_U,z0t]},tyt={null:[42,95]},nyt={null:[]},ryt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:tyt,contentInitial:K0t,disable:nyt,document:Y0t,flow:Q0t,flowInitial:X0t,insideSpan:eyt,string:J0t,text:Z0t},Symbol.toStringTag,{value:"Module"}));function iyt(e={}){const t=mgt([ryt].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(xgt),document:r(Tgt),flow:r(B0t),string:r(U0t),text:r(V0t)};return n;function r(i){return s;function s(o){return q0t(n,i,o)}}}const Cfe=/[\0\t\n\r]/g;function syt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Cfe.lastIndex=f,l=Cfe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function oyt(e){for(;!RIe(e););return e}function BIe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const ayt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uyt(e){return e.replace(ayt,lyt)}function lyt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return BIe(n.slice(s?2:1),s?16:10)}return DY(n)||e}const bU={}.hasOwnProperty,cyt=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),fyt(n)(oyt(iyt(n).document().write(syt()(e,t,!0))))};function fyt(e={}){const t=jIe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(je),autolinkProtocol:z,autolinkEmail:z,atxHeading:u(Oe),blockQuote:u(ue),characterEscape:z,characterReference:z,codeFenced:u(Fe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Fe,l),codeText:u(ke,l),codeTextData:z,data:z,codeFlowValue:z,definition:u(Ge),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(Re),hardBreakEscape:u(Me),hardBreakTrailing:u(Me),htmlFlow:u(Ut,l),htmlFlowData:z,htmlText:u(Ut,l),htmlTextData:z,image:u(Qe),label:l,link:u(je),listItem:u(et),listItemValue:m,listOrdered:u(xt,p),listUnordered:u(xt),paragraph:u(ft),reference:Q,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(Oe),strong:u(dt),thematicBreak:u(Dn)},exit:{atxHeading:f(),atxHeadingSequence:S,autolink:f(),autolinkEmail:ge,autolinkProtocol:le,blockQuote:f(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:ce,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:D,codeIndented:f(b),codeText:f(j),codeTextData:D,data:D,definition:f(),definitionDestinationString:x,definitionLabelString:E,definitionTitleString:w,emphasis:f(),hardBreakEscape:f(N),hardBreakTrailing:f(N),htmlFlow:f(L),htmlFlowData:D,htmlText:f(V),htmlTextData:D,image:f(U),label:$,labelText:k,lineEnding:R,link:f(H),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:q,resourceTitleString:F,resource:B,setextHeading:f(O),setextHeadingLineSequence:A,setextHeadingText:P,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(he){let _e={type:"root",children:[]};const Pe=[_e],it=[],Ye=[],ut={stack:Pe,tokenStack:it,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let tt=-1;for(;++tt<he.length;)if(he[tt][1].type==="listOrdered"||he[tt][1].type==="listUnordered")if(he[tt][0]==="enter")Ye.push(tt);else{const wt=Ye.pop();tt=i(he,wt,tt)}for(tt=-1;++tt<he.length;){const wt=t[he[tt][0]];bU.call(wt,he[tt][1].type)&&wt[he[tt][1].type].call(Object.assign({sliceSerialize:he[tt][2].sliceSerialize},ut),he[tt][1])}if(it.length>0){const wt=it[it.length-1];(wt[1]||Afe).call(ut,void 0,wt[0])}for(_e.position={start:a(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:a(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<t.transforms.length;)_e=t.transforms[tt](_e)||_e;return _e}function i(he,_e,Pe){let it=_e-1,Ye=-1,ut=!1,tt,wt,In,Wt;for(;++it<=Pe;){const Vt=he[it];if(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered"||Vt[1].type==="blockQuote"?(Vt[0]==="enter"?Ye++:Ye--,Wt=void 0):Vt[1].type==="lineEndingBlank"?Vt[0]==="enter"&&(tt&&!Wt&&!Ye&&!In&&(In=it),Wt=void 0):Vt[1].type==="linePrefix"||Vt[1].type==="listItemValue"||Vt[1].type==="listItemMarker"||Vt[1].type==="listItemPrefix"||Vt[1].type==="listItemPrefixWhitespace"||(Wt=void 0),!Ye&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Ye===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(tt){let hr=it;for(wt=void 0;hr--;){const Yn=he[hr];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;wt&&(he[wt][1].type="lineEndingBlank",ut=!0),Yn[1].type="lineEnding",wt=hr}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}In&&(!wt||In<wt)&&(tt._spread=!0),tt.end=Object.assign({},wt?he[wt][1].start:Vt[1].end),he.splice(wt||it,0,["exit",tt,Vt[2]]),it++,Pe++}Vt[1].type==="listItemPrefix"&&(tt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start)},he.splice(it,0,["enter",tt,Vt[2]]),it++,Pe++,In=void 0,Wt=!0)}}return he[_e][1]._spread=ut,Pe}function s(he,_e){n[he]=_e}function o(he){return n[he]}function a(he){return{line:he.line,column:he.column,offset:he.offset}}function u(he,_e){return Pe;function Pe(it){c.call(this,he(it),it),_e&&_e.call(this,it)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(he,_e,Pe){return this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([_e,Pe]),he.position={start:a(_e.start)},he}function f(he){return _e;function _e(Pe){he&&he.call(this,Pe),d.call(this,Pe)}}function d(he,_e){const Pe=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==he.type&&(_e?_e.call(this,he,it[0]):(it[1]||Afe).call(this,he,it[0]));else throw new Error("Cannot close `"+he.type+"` ("+Nb({start:he.start,end:he.end})+"): its not open");return Pe.position.end=a(he.end),Pe}function h(){return pgt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(he){if(o("expectingFirstListItemValue")){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(he),10),s("expectingFirstListItemValue")}}function g(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=he}function y(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=he}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/(\r?\n|\r)$/g,"")}function E(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Db(this.sliceSerialize(he)).toLowerCase()}function w(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function x(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function S(he){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Pe=this.sliceSerialize(he).length;_e.depth=Pe}}function P(){s("setextHeadingSlurpLineEnding",!0)}function A(he){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(he).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function z(he){const _e=this.stack[this.stack.length-1];let Pe=_e.children[_e.children.length-1];(!Pe||Pe.type!=="text")&&(Pe=jt(),Pe.position={start:a(he.start)},_e.children.push(Pe)),this.stack.push(Pe)}function D(he){const _e=this.stack.pop();_e.value+=this.sliceSerialize(he),_e.position.end=a(he.end)}function R(he){const _e=this.stack[this.stack.length-1];if(o("atHardBreak")){const Pe=_e.children[_e.children.length-1];Pe.position.end=a(he.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(_e.type)&&(z.call(this,he),D.call(this,he))}function N(){s("atHardBreak",!0)}function L(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function V(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function j(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function H(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function U(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function k(he){const _e=this.stack[this.stack.length-2],Pe=this.sliceSerialize(he);_e.label=uyt(Pe),_e.identifier=Db(Pe).toLowerCase()}function $(){const he=this.stack[this.stack.length-1],_e=this.resume(),Pe=this.stack[this.stack.length-1];s("inReference",!0),Pe.type==="link"?Pe.children=he.children:Pe.alt=_e}function q(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function F(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function B(){s("inReference")}function Q(){s("referenceType","collapsed")}function se(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Db(this.sliceSerialize(he)).toLowerCase(),s("referenceType","full")}function ae(he){s("characterReferenceType",he.type)}function ce(he){const _e=this.sliceSerialize(he),Pe=o("characterReferenceType");let it;Pe?(it=BIe(_e,Pe==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):it=DY(_e);const Ye=this.stack.pop();Ye.value+=it,Ye.position.end=a(he.end)}function le(he){D.call(this,he);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(he)}function ge(he){D.call(this,he);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(he)}function ue(){return{type:"blockquote",children:[]}}function Fe(){return{type:"code",lang:null,meta:null,value:""}}function ke(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Me(){return{type:"break"}}function Ut(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function je(){return{type:"link",title:null,url:"",children:[]}}function xt(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function et(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function ft(){return{type:"paragraph",children:[]}}function dt(){return{type:"strong",children:[]}}function jt(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function jIe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?jIe(e,r):dyt(e,r)}return e}function dyt(e,t){let n;for(n in t)if(bU.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(bU.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function Afe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Nb({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Nb({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Nb({start:t.start,end:t.end})+") is still open")}function hyt(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return cyt(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var xs=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const r$={}.hasOwnProperty;function pyt(e,t){const n=t.data||{};return"value"in t&&!(r$.call(n,"hName")||r$.call(n,"hProperties")||r$.call(n,"hChildren"))?e.augment(t,xs("text",t.value)):e(t,"div",ca(e,t))}function zIe(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return r$.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=myt:i=e.unknownHandler,(typeof i=="function"?i:pyt)(e,t,n)}function myt(e,t){return"children"in t?{...t,children:ca(e,t)}:t}function ca(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=zIe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const UIe=function(e){if(e==null)return _yt;if(typeof e=="string")return vyt(e);if(typeof e=="object")return Array.isArray(e)?gyt(e):yyt(e);if(typeof e=="function")return k6(e);throw new Error("Expected function, string, or object as test")};function gyt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=UIe(e[n]);return k6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function yyt(e){return k6(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function vyt(e){return k6(t);function t(n){return n&&n.type===e}}function k6(e){return t;function t(...n){return!!e.call(this,...n)}}function _yt(){return!0}const byt=!0,wyt="skip",Ife=!1,Eyt=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=UIe(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=xyt(n(a,l)),h[0]===Ife))return h;if(a.children&&h[0]!==wyt)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===Ife)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function xyt(e){return Array.isArray(e)?e:typeof e=="number"?[byt,e]:[e]}const LY=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),Eyt(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},VIe=qIe("start"),HIe=qIe("end");function qIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function Syt(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const Ofe={}.hasOwnProperty;function Tyt(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return LY(e,"definition",r=>{const i=Pfe(r.identifier);i&&!Ofe.call(t,i)&&(t[i]=r)}),n;function n(r){const i=Pfe(r);return i&&Ofe.call(t,i)?t[i]:null}}function Pfe(e){return String(e||"").toUpperCase()}function DE(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Zu(e.charCodeAt(n+1))&&Zu(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function np(e,t){const n=[];let r=-1;for(t&&n.push(xs("text",`
`));++r<e.length;)r&&n.push(xs("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(xs("text",`
`)),n}function Cyt(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=ca(e,r),s=String(r.identifier),o=DE(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:np(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[xs("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:np(n,!0)},{type:"text",value:`
`}]}}function Ayt(e,t){return e(t,"blockquote",np(ca(e,t),!0))}function Iyt(e,t){return[e(t,"br"),xs("text",`
`)]}function Oyt(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[xs("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function Pyt(e,t){return e(t,"del",ca(e,t))}function kyt(e,t){return e(t,"em",ca(e,t))}function WIe(e,t){const n=String(t.identifier),r=DE(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[xs("text",String(s))])])}function $yt(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},WIe(e,{type:"footnoteReference",identifier:i,position:t.position})}function Ryt(e,t){return e(t,"h"+t.depth,ca(e,t))}function Nyt(e,t){return e.dangerous?e.augment(t,xs("raw",t.value)):null}function GIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return xs("text","!["+t.alt+r);const i=ca(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(xs("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(xs("text",r)),i}function Dyt(e,t){const n=e.definition(t.identifier);if(!n)return GIe(e,t);const r={src:DE(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function Myt(e,t){const n={src:DE(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function Lyt(e,t){return e(t,"code",[xs("text",t.value.replace(/\r?\n|\r/g," "))])}function Fyt(e,t){const n=e.definition(t.identifier);if(!n)return GIe(e,t);const r={href:DE(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,ca(e,t))}function Byt(e,t){const n={href:DE(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,ca(e,t))}function jyt(e,t,n){const r=ca(e,t),i=n?zyt(n):YIe(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(xs("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(xs("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(xs("text",`
`)),e(t,"li",s,o)}function zyt(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=YIe(n[r]);return!!t}function YIe(e){const t=e.spread;return t??e.children.length>1}function Uyt(e,t){const n={},r=t.ordered?"ol":"ul",i=ca(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,np(i,!0))}function Vyt(e,t){return e(t,"p",ca(e,t))}function Hyt(e,t){return e.augment(t,xs("root",np(ca(e,t))))}function qyt(e,t){return e(t,"strong",ca(e,t))}function Wyt(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?ca(e,f):[]))}s[r]=e(n[r],"tr",np(u,!0))}return e(t,"table",np([e(s[0].position,"thead",np([s[0]],!0))].concat(s[1]?e({start:VIe(s[1]),end:HIe(s[s.length-1])},"tbody",np(s.slice(1),!0)):[]),!0))}const kfe=9,$fe=32;function Gyt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Rfe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Rfe(t.slice(i),i>0,!1)),s.join("")}function Rfe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===kfe||s===$fe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===kfe||s===$fe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Yyt(e,t){return e.augment(t,xs("text",Gyt(String(t.value))))}function Kyt(e,t){return e(t,"hr")}const Xyt={blockquote:Ayt,break:Iyt,code:Oyt,delete:Pyt,emphasis:kyt,footnoteReference:WIe,footnote:$yt,heading:Ryt,html:Nyt,imageReference:Dyt,image:Myt,inlineCode:Lyt,linkReference:Fyt,link:Byt,listItem:jyt,list:Uyt,paragraph:Vyt,root:Hyt,strong:qyt,table:Wyt,text:Yyt,thematicBreak:Kyt,toml:mP,yaml:mP,definition:mP,footnoteDefinition:mP};function mP(){return null}const Qyt={}.hasOwnProperty;function Jyt(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=Tyt(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...Xyt,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,LY(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();Qyt.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};Syt(l)||(u.position={start:VIe(l),end:HIe(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function KIe(e,t){const n=Jyt(e,t),r=zIe(n,e,null),i=Cyt(n);return i&&r.children.push(xs("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const Zyt=function(e,t){return e&&"run"in e?t1t(e,t):n1t(e||t)},e1t=Zyt;function t1t(e,t){return(n,r,i)=>{e.run(KIe(n,t),r,s=>{i(s)})}}function n1t(e){return t=>KIe(t,e)}let ZA=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};ZA.prototype.property={};ZA.prototype.normal={};ZA.prototype.space=null;function XIe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new ZA(n,r,t)}function dC(e){return e.toLowerCase()}let gc=class{constructor(t,n){this.property=t,this.attribute=n}};gc.prototype.space=null;gc.prototype.boolean=!1;gc.prototype.booleanish=!1;gc.prototype.overloadedBoolean=!1;gc.prototype.number=!1;gc.prototype.commaSeparated=!1;gc.prototype.spaceSeparated=!1;gc.prototype.commaOrSpaceSeparated=!1;gc.prototype.mustUseProperty=!1;gc.prototype.defined=!1;let r1t=0;const _n=Dv(),Zi=Dv(),QIe=Dv(),Ke=Dv(),Gr=Dv(),Mb=Dv(),zu=Dv();function Dv(){return 2**++r1t}const wU=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:Zi,commaOrSpaceSeparated:zu,commaSeparated:Mb,number:Ke,overloadedBoolean:QIe,spaceSeparated:Gr},Symbol.toStringTag,{value:"Module"})),Q9=Object.keys(wU);class FY extends gc{constructor(t,n,r,i){let s=-1;if(super(t,n),Nfe(this,"space",i),typeof r=="number")for(;++s<Q9.length;){const o=Q9[s];Nfe(this,Q9[s],(r&wU[o])===wU[o])}}}FY.prototype.defined=!0;function Nfe(e,t,n){n&&(e[t]=n)}const i1t={}.hasOwnProperty;function ME(e){const t={},n={};let r;for(r in e.properties)if(i1t.call(e.properties,r)){const i=e.properties[r],s=new FY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[dC(r)]=r,n[dC(s.attribute)]=r}return new ZA(t,n,e.space)}const JIe=ME({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),ZIe=ME({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function eOe(e,t){return t in e?e[t]:t}function tOe(e,t){return eOe(e,t.toLowerCase())}const nOe=ME({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:tOe,properties:{xmlns:null,xmlnsXLink:null}}),rOe=ME({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Zi,ariaAutoComplete:null,ariaBusy:Zi,ariaChecked:Zi,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:Gr,ariaCurrent:null,ariaDescribedBy:Gr,ariaDetails:null,ariaDisabled:Zi,ariaDropEffect:Gr,ariaErrorMessage:null,ariaExpanded:Zi,ariaFlowTo:Gr,ariaGrabbed:Zi,ariaHasPopup:null,ariaHidden:Zi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gr,ariaLevel:Ke,ariaLive:null,ariaModal:Zi,ariaMultiLine:Zi,ariaMultiSelectable:Zi,ariaOrientation:null,ariaOwns:Gr,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:Zi,ariaReadOnly:Zi,ariaRelevant:null,ariaRequired:Zi,ariaRoleDescription:Gr,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:Zi,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null}}),s1t=ME({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:tOe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mb,acceptCharset:Gr,accessKey:Gr,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:Gr,autoFocus:_n,autoPlay:_n,capture:_n,charSet:null,checked:_n,cite:null,className:Gr,cols:Ke,colSpan:null,content:null,contentEditable:Zi,controls:_n,controlsList:Gr,coords:Ke|Mb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:QIe,draggable:Zi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:Gr,height:Ke,hidden:_n,high:Ke,href:null,hrefLang:null,htmlFor:Gr,httpEquiv:Gr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:Gr,itemRef:Gr,itemScope:_n,itemType:Gr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:Ke,pattern:null,ping:Gr,placeholder:null,playsInline:_n,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:Gr,required:_n,reversed:_n,rows:Ke,rowSpan:Ke,sandbox:Gr,scope:null,scoped:_n,seamless:_n,selected:_n,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:Zi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:Zi,width:Ke,wrap:null,align:null,aLink:null,archive:Gr,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:Zi,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:Ke,security:null,unselectable:null}}),o1t=ME({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:eOe,properties:{about:zu,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:Gr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mb,g2:Mb,glyphName:Mb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:zu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zu,rev:zu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zu,requiredFeatures:zu,requiredFonts:zu,requiredFormats:zu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:zu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zu,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zu,to:null,transform:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),a1t=/^data[-\w.:]+$/i,Dfe=/-[a-z]/g,u1t=/[A-Z]/g;function $6(e,t){const n=dC(t);let r=t,i=gc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&a1t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Dfe,c1t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Dfe.test(s)){let o=s.replace(u1t,l1t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=FY}return new i(r,t)}function l1t(e){return"-"+e.toLowerCase()}function c1t(e){return e.charAt(1).toUpperCase()}const Mfe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},eI=XIe([ZIe,JIe,nOe,rOe,s1t],"html"),LE=XIe([ZIe,JIe,nOe,rOe,o1t],"svg");function f1t(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{LY(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var iOe={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BY=Symbol.for("react.element"),jY=Symbol.for("react.portal"),R6=Symbol.for("react.fragment"),N6=Symbol.for("react.strict_mode"),D6=Symbol.for("react.profiler"),M6=Symbol.for("react.provider"),L6=Symbol.for("react.context"),d1t=Symbol.for("react.server_context"),F6=Symbol.for("react.forward_ref"),B6=Symbol.for("react.suspense"),j6=Symbol.for("react.suspense_list"),z6=Symbol.for("react.memo"),U6=Symbol.for("react.lazy"),h1t=Symbol.for("react.offscreen"),sOe;sOe=Symbol.for("react.module.reference");function yc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case BY:switch(e=e.type,e){case R6:case D6:case N6:case B6:case j6:return e;default:switch(e=e&&e.$$typeof,e){case d1t:case L6:case F6:case U6:case z6:case M6:return e;default:return t}}case jY:return t}}}xr.ContextConsumer=L6;xr.ContextProvider=M6;xr.Element=BY;xr.ForwardRef=F6;xr.Fragment=R6;xr.Lazy=U6;xr.Memo=z6;xr.Portal=jY;xr.Profiler=D6;xr.StrictMode=N6;xr.Suspense=B6;xr.SuspenseList=j6;xr.isAsyncMode=function(){return!1};xr.isConcurrentMode=function(){return!1};xr.isContextConsumer=function(e){return yc(e)===L6};xr.isContextProvider=function(e){return yc(e)===M6};xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===BY};xr.isForwardRef=function(e){return yc(e)===F6};xr.isFragment=function(e){return yc(e)===R6};xr.isLazy=function(e){return yc(e)===U6};xr.isMemo=function(e){return yc(e)===z6};xr.isPortal=function(e){return yc(e)===jY};xr.isProfiler=function(e){return yc(e)===D6};xr.isStrictMode=function(e){return yc(e)===N6};xr.isSuspense=function(e){return yc(e)===B6};xr.isSuspenseList=function(e){return yc(e)===j6};xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===R6||e===D6||e===N6||e===B6||e===j6||e===h1t||typeof e=="object"&&e!==null&&(e.$$typeof===U6||e.$$typeof===z6||e.$$typeof===M6||e.$$typeof===L6||e.$$typeof===F6||e.$$typeof===sOe||e.getModuleId!==void 0)};xr.typeOf=yc;iOe.exports=xr;var p1t=iOe.exports;const m1t=bl(p1t);function g1t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function Lfe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function oOe(e){return e.join(" ").trim()}function Ffe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function aOe(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var zY={exports:{}},Bfe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,y1t=/\n/g,v1t=/^\s*/,_1t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,b1t=/^:\s*/,w1t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,E1t=/^[;\s]*/,x1t=/^\s+|\s+$/g,S1t=`
`,jfe="/",zfe="*",My="",T1t="comment",C1t="declaration",A1t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(y1t);m&&(n+=m.length);var g=p.lastIndexOf(S1t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(v1t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(jfe!=e.charAt(0)||zfe!=e.charAt(1))){for(var m=2;My!=e.charAt(m)&&(zfe!=e.charAt(m)||jfe!=e.charAt(m+1));)++m;if(m+=2,My===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:T1t,comment:g})}}function d(){var p=s(),m=u(_1t);if(m){if(f(),!u(b1t))return a("property missing ':'");var g=u(w1t),y=p({type:C1t,property:Ufe(m[0].replace(Bfe,My)),value:g?Ufe(g[0].replace(Bfe,My)):My});return u(E1t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Ufe(e){return e?e.replace(x1t,My):My}var I1t=A1t;function uOe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=I1t(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}zY.exports=uOe;zY.exports.default=uOe;var O1t=zY.exports;const P1t=bl(O1t),EU={}.hasOwnProperty,k1t=new Set(["table","thead","tbody","tfoot","tr"]);function lOe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push($1t(e,i,r,t)):i.type==="text"?(t.type!=="element"||!k1t.has(t.tagName)||!g1t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function $1t(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?Lmt:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=LE,e.schema=l),t.properties)for(c in t.properties)EU.call(t.properties,c)&&N1t(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=lOe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&EU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===M.Fragment;if(!m1t.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=R1t(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=J9(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=L1t(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=J9(r,t),u.siblingCount=J9(r)),p||(u.node=t),f.length>0?M.createElement(h,u,f):M.createElement(h,u)}function R1t(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function J9(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function N1t(e,t,n,r){const i=$6(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?aOe(s):oOe(s)),i.property==="style"&&typeof s=="string"&&(s=D1t(s)),i.space&&i.property?e[EU.call(Mfe,i.property)?Mfe[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function D1t(e){const t={};try{P1t(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,M1t)]=i}}function M1t(e,t){return t.toUpperCase()}function L1t(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const Vfe={}.hasOwnProperty,F1t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function cOe(e){for(const s in gP)if(Vfe.call(gP,s)&&Vfe.call(e,s)){const o=gP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${F1t}#${o.id}> for more info)`),delete gP[s]}const t=cgt().use(hyt).use(e.remarkPlugins||[]).use(e1t,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(f1t,e),n=new Kmt;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=M.createElement(M.Fragment,{},lOe({options:e,schema:eI,listDepth:0},r));return e.className&&(i=M.createElement("div",{className:e.className},i)),i}cOe.propTypes={children:Lt.string,className:Lt.string,allowElement:Lt.func,allowedElements:Lt.arrayOf(Lt.string),disallowedElements:Lt.arrayOf(Lt.string),unwrapDisallowed:Lt.bool,remarkPlugins:Lt.arrayOf(Lt.oneOfType([Lt.object,Lt.func,Lt.arrayOf(Lt.oneOfType([Lt.bool,Lt.string,Lt.object,Lt.func,Lt.arrayOf(Lt.any)]))])),rehypePlugins:Lt.arrayOf(Lt.oneOfType([Lt.object,Lt.func,Lt.arrayOf(Lt.oneOfType([Lt.bool,Lt.string,Lt.object,Lt.func,Lt.arrayOf(Lt.any)]))])),sourcePos:Lt.bool,rawSourcePos:Lt.bool,skipHtml:Lt.bool,includeElementIndex:Lt.bool,transformLinkUri:Lt.oneOfType([Lt.func,Lt.bool]),linkTarget:Lt.oneOfType([Lt.func,Lt.string]),transformImageUri:Lt.func,components:Lt.object};const fOe=-1,V6=0,TD=1,CD=2,UY=3,VY=4,HY=5,qY=6,dOe=7,hOe=8,Hfe=typeof self=="object"?self:globalThis,B1t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case V6:case fOe:return n(o,i);case TD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case CD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case UY:return n(new Date(o),i);case VY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case HY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case qY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case dOe:{const{name:a,message:u}=o;return n(new Hfe[a](u),i)}case hOe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Hfe[s](o),i)};return r},qfe=e=>B1t(new Map,e)(0),v_="",{toString:j1t}={},{keys:z1t}=Object,sS=e=>{const t=typeof e;if(t!=="object"||!e)return[V6,t];const n=j1t.call(e).slice(8,-1);switch(n){case"Array":return[TD,v_];case"Object":return[CD,v_];case"Date":return[UY,v_];case"RegExp":return[VY,v_];case"Map":return[HY,v_];case"Set":return[qY,v_]}return n.includes("Array")?[TD,n]:n.includes("Error")?[dOe,n]:[CD,n]},yP=([e,t])=>e===V6&&(t==="function"||t==="symbol"),U1t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=sS(o);switch(a){case V6:{let c=o;switch(u){case"bigint":a=hOe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([fOe],o)}return i([a,c],o)}case TD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case CD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of z1t(o))(e||!yP(sS(o[d])))&&c.push([s(d),s(o[d])]);return f}case UY:return i([a,o.toISOString()],o);case VY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case HY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(yP(sS(d))||yP(sS(h))))&&c.push([s(d),s(h)]);return f}case qY:{const c=[],f=i([a,c],o);for(const d of o)(e||!yP(sS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Wfe=(e,{json:t,lossy:n}={})=>{const r=[];return U1t(!(t||n),!!t,new Map,r)(e),r},Gfe=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?qfe(Wfe(e,t)):structuredClone(e):(e,t)=>qfe(Wfe(e,t)),Yfe=/[#.]/g;function V1t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Yfe.lastIndex=i;const a=Yfe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const H1t=new Set(["button","menu","reset","submit"]),xU={}.hasOwnProperty;function pOe(e,t,n){const r=n&&Y1t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=V1t(s,t),l.tagName=l.tagName.toLowerCase(),r&&xU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),q1t(o,l.tagName)){let c;for(c in o)xU.call(o,c)&&W1t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)SU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function q1t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?H1t.has(e.type.toLowerCase()):!("value"in e)}function W1t(e,t,n,r){const i=$6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Lfe(r):i.commaSeparated?o=Ffe(r):i.commaOrSpaceSeparated?o=Lfe(Ffe(r).join(" ")):o=Kfe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?G1t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Kfe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function SU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)SU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?SU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Kfe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||dC(n)===dC(t)))return!0}return n}function G1t(e){const t=[];let n;for(n in e)xU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Y1t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const K1t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],X1t=pOe(eI,"div"),Q1t=pOe(LE,"g",K1t),Z9=/\r?\n|\r/g;function J1t(e){const t=String(e),n=[];for(Z9.lastIndex=0;Z9.test(t);)n.push(Z9.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Jy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mOe={}.hasOwnProperty,Z1t=Object.prototype;function evt(e,t){const n=t||{};return WY({file:n.file||void 0,location:!1,schema:n.space==="svg"?LE:eI,verbose:n.verbose||!1},e)}function WY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},i$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:gOe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=J1t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},i$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},i$(e,r,n),n}default:return n=tvt(e,t),n}}function gOe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=WY(e,t[n]);r.push(i)}return r}function tvt(e,t){const n=e.schema;e.schema=t.namespaceURI===Jy.svg?LE:eI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;mOe.call(Z1t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Q1t:X1t)(t.tagName,i,gOe(e,t.childNodes));if(i$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&fb(u.startTag),c=u&&u.endTag&&fb(u.endTag),f=WY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function i$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=nvt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function nvt(e,t,n){const r=fb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)mOe.call(n.attrs,o)&&(s[$6(e.schema,o).property]=fb(n.attrs[o]));n.startTag;const a=fb(n.startTag),u=n.endTag?fb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function fb(e){const t=Xfe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Xfe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Xfe(e){return e.line&&e.column?e:void 0}const Qfe={}.hasOwnProperty;function yOe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Qfe.call(i,e)){const u=String(i[e]);o=Qfe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const rvt={},ivt={}.hasOwnProperty,vOe=yOe("type",{handlers:{root:ovt,element:fvt,text:lvt,comment:cvt,doctype:uvt}});function svt(e,t){const r=(t||rvt).space;return vOe(e,r==="svg"?LE:eI)}function ovt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=GY(e.children,n,t),FE(e,n),n}function avt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=GY(e.children,n,t),FE(e,n),n}function uvt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return FE(e,t),t}function lvt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return FE(e,t),t}function cvt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return FE(e,t),t}function fvt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=LE);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&ivt.call(e.properties,s)){const u=dvt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Jy[o],childNodes:[],parentNode:null};return a.childNodes=GY(e.children,a,r),FE(e,a),e.tagName==="template"&&e.content&&(a.content=avt(e.content,r)),a}function dvt(e,t,n){const r=$6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?aOe(n):oOe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Jy[r.space]}return i}function GY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=vOe(e[r],n);s.parentNode=t,i.push(s)}return i}function FE(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const hvt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],pvt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),li="";var Y;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Y=Y||(Y={}));const Ya={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function _Oe(e){return e>=55296&&e<=57343}function mvt(e){return e>=56320&&e<=57343}function gvt(e,t){return(e-55296)*1024+9216+t}function bOe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function wOe(e){return e>=64976&&e<=65007||pvt.has(e)}var we;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(we=we||(we={}));const yvt=65536;class vvt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=yvt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(mvt(n))return this.pos++,this._addGap(),gvt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Y.EOF;return this._err(we.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;const r=this.html.charCodeAt(n);return r===Y.CARRIAGE_RETURN?Y.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;let t=this.html.charCodeAt(this.pos);return t===Y.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Y.LINE_FEED):t===Y.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,_Oe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Y.LINE_FEED||t===Y.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){bOe(t)?this._err(we.controlCharacterInInputStream):wOe(t)&&this._err(we.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var En;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(En=En||(En={}));function EOe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Pm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),_vt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var eB;const bvt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),wvt=(eB=String.fromCodePoint)!==null&&eB!==void 0?eB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Evt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=bvt.get(e))!==null&&t!==void 0?t:e}var js;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(js||(js={}));const xvt=32;var yd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(yd||(yd={}));function TU(e){return e>=js.ZERO&&e<=js.NINE}function Svt(e){return e>=js.UPPER_A&&e<=js.UPPER_F||e>=js.LOWER_A&&e<=js.LOWER_F}function Tvt(e){return e>=js.UPPER_A&&e<=js.UPPER_Z||e>=js.LOWER_A&&e<=js.LOWER_Z||TU(e)}function Cvt(e){return e===js.EQUALS||Tvt(e)}var Ns;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ns||(Ns={}));var Ly;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ly||(Ly={}));class Avt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ns.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ly.Strict}startEntity(t){this.decodeMode=t,this.state=Ns.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ns.EntityStart:return t.charCodeAt(n)===js.NUM?(this.state=Ns.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ns.NamedEntity,this.stateNamedEntity(t,n));case Ns.NumericStart:return this.stateNumericStart(t,n);case Ns.NumericDecimal:return this.stateNumericDecimal(t,n);case Ns.NumericHex:return this.stateNumericHex(t,n);case Ns.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|xvt)===js.LOWER_X?(this.state=Ns.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ns.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(TU(i)||Svt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(TU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===js.SEMI)this.consumed+=1;else if(this.decodeMode===Ly.Strict)return 0;return this.emitCodePoint(Evt(this.result),this.consumed),this.errors&&(t!==js.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&yd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=SOe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ly.Attribute&&(s===0||Cvt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&yd.VALUE_LENGTH)>>14,s!==0){if(o===js.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ly.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&yd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~yd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ns.NamedEntity:return this.result!==0&&(this.decodeMode!==Ly.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ns.NumericDecimal:return this.emitNumericEntity(0,2);case Ns.NumericHex:return this.emitNumericEntity(0,3);case Ns.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ns.EntityStart:return 0}}}function xOe(e){let t="";const n=new Avt(e,r=>t+=wvt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function SOe(e,t,n,r){const i=(t&yd.BRANCH_LENGTH)>>7,s=t&yd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}xOe(Pm);xOe(_vt);var Ce;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ce=Ce||(Ce={}));var Pg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Pg=Pg||(Pg={}));var Wu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Wu=Wu||(Wu={}));var me;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(me=me||(me={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(T=T||(T={}));const Ivt=new Map([[me.A,T.A],[me.ADDRESS,T.ADDRESS],[me.ANNOTATION_XML,T.ANNOTATION_XML],[me.APPLET,T.APPLET],[me.AREA,T.AREA],[me.ARTICLE,T.ARTICLE],[me.ASIDE,T.ASIDE],[me.B,T.B],[me.BASE,T.BASE],[me.BASEFONT,T.BASEFONT],[me.BGSOUND,T.BGSOUND],[me.BIG,T.BIG],[me.BLOCKQUOTE,T.BLOCKQUOTE],[me.BODY,T.BODY],[me.BR,T.BR],[me.BUTTON,T.BUTTON],[me.CAPTION,T.CAPTION],[me.CENTER,T.CENTER],[me.CODE,T.CODE],[me.COL,T.COL],[me.COLGROUP,T.COLGROUP],[me.DD,T.DD],[me.DESC,T.DESC],[me.DETAILS,T.DETAILS],[me.DIALOG,T.DIALOG],[me.DIR,T.DIR],[me.DIV,T.DIV],[me.DL,T.DL],[me.DT,T.DT],[me.EM,T.EM],[me.EMBED,T.EMBED],[me.FIELDSET,T.FIELDSET],[me.FIGCAPTION,T.FIGCAPTION],[me.FIGURE,T.FIGURE],[me.FONT,T.FONT],[me.FOOTER,T.FOOTER],[me.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[me.FORM,T.FORM],[me.FRAME,T.FRAME],[me.FRAMESET,T.FRAMESET],[me.H1,T.H1],[me.H2,T.H2],[me.H3,T.H3],[me.H4,T.H4],[me.H5,T.H5],[me.H6,T.H6],[me.HEAD,T.HEAD],[me.HEADER,T.HEADER],[me.HGROUP,T.HGROUP],[me.HR,T.HR],[me.HTML,T.HTML],[me.I,T.I],[me.IMG,T.IMG],[me.IMAGE,T.IMAGE],[me.INPUT,T.INPUT],[me.IFRAME,T.IFRAME],[me.KEYGEN,T.KEYGEN],[me.LABEL,T.LABEL],[me.LI,T.LI],[me.LINK,T.LINK],[me.LISTING,T.LISTING],[me.MAIN,T.MAIN],[me.MALIGNMARK,T.MALIGNMARK],[me.MARQUEE,T.MARQUEE],[me.MATH,T.MATH],[me.MENU,T.MENU],[me.META,T.META],[me.MGLYPH,T.MGLYPH],[me.MI,T.MI],[me.MO,T.MO],[me.MN,T.MN],[me.MS,T.MS],[me.MTEXT,T.MTEXT],[me.NAV,T.NAV],[me.NOBR,T.NOBR],[me.NOFRAMES,T.NOFRAMES],[me.NOEMBED,T.NOEMBED],[me.NOSCRIPT,T.NOSCRIPT],[me.OBJECT,T.OBJECT],[me.OL,T.OL],[me.OPTGROUP,T.OPTGROUP],[me.OPTION,T.OPTION],[me.P,T.P],[me.PARAM,T.PARAM],[me.PLAINTEXT,T.PLAINTEXT],[me.PRE,T.PRE],[me.RB,T.RB],[me.RP,T.RP],[me.RT,T.RT],[me.RTC,T.RTC],[me.RUBY,T.RUBY],[me.S,T.S],[me.SCRIPT,T.SCRIPT],[me.SECTION,T.SECTION],[me.SELECT,T.SELECT],[me.SOURCE,T.SOURCE],[me.SMALL,T.SMALL],[me.SPAN,T.SPAN],[me.STRIKE,T.STRIKE],[me.STRONG,T.STRONG],[me.STYLE,T.STYLE],[me.SUB,T.SUB],[me.SUMMARY,T.SUMMARY],[me.SUP,T.SUP],[me.TABLE,T.TABLE],[me.TBODY,T.TBODY],[me.TEMPLATE,T.TEMPLATE],[me.TEXTAREA,T.TEXTAREA],[me.TFOOT,T.TFOOT],[me.TD,T.TD],[me.TH,T.TH],[me.THEAD,T.THEAD],[me.TITLE,T.TITLE],[me.TR,T.TR],[me.TRACK,T.TRACK],[me.TT,T.TT],[me.U,T.U],[me.UL,T.UL],[me.SVG,T.SVG],[me.VAR,T.VAR],[me.WBR,T.WBR],[me.XMP,T.XMP]]);function BE(e){var t;return(t=Ivt.get(e))!==null&&t!==void 0?t:T.UNKNOWN}const Be=T,Ovt={[Ce.HTML]:new Set([Be.ADDRESS,Be.APPLET,Be.AREA,Be.ARTICLE,Be.ASIDE,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BLOCKQUOTE,Be.BODY,Be.BR,Be.BUTTON,Be.CAPTION,Be.CENTER,Be.COL,Be.COLGROUP,Be.DD,Be.DETAILS,Be.DIR,Be.DIV,Be.DL,Be.DT,Be.EMBED,Be.FIELDSET,Be.FIGCAPTION,Be.FIGURE,Be.FOOTER,Be.FORM,Be.FRAME,Be.FRAMESET,Be.H1,Be.H2,Be.H3,Be.H4,Be.H5,Be.H6,Be.HEAD,Be.HEADER,Be.HGROUP,Be.HR,Be.HTML,Be.IFRAME,Be.IMG,Be.INPUT,Be.LI,Be.LINK,Be.LISTING,Be.MAIN,Be.MARQUEE,Be.MENU,Be.META,Be.NAV,Be.NOEMBED,Be.NOFRAMES,Be.NOSCRIPT,Be.OBJECT,Be.OL,Be.P,Be.PARAM,Be.PLAINTEXT,Be.PRE,Be.SCRIPT,Be.SECTION,Be.SELECT,Be.SOURCE,Be.STYLE,Be.SUMMARY,Be.TABLE,Be.TBODY,Be.TD,Be.TEMPLATE,Be.TEXTAREA,Be.TFOOT,Be.TH,Be.THEAD,Be.TITLE,Be.TR,Be.TRACK,Be.UL,Be.WBR,Be.XMP]),[Ce.MATHML]:new Set([Be.MI,Be.MO,Be.MN,Be.MS,Be.MTEXT,Be.ANNOTATION_XML]),[Ce.SVG]:new Set([Be.TITLE,Be.FOREIGN_OBJECT,Be.DESC]),[Ce.XLINK]:new Set,[Ce.XML]:new Set,[Ce.XMLNS]:new Set};function TOe(e){return e===Be.H1||e===Be.H2||e===Be.H3||e===Be.H4||e===Be.H5||e===Be.H6}me.STYLE,me.SCRIPT,me.XMP,me.IFRAME,me.NOEMBED,me.NOFRAMES,me.PLAINTEXT;const Pvt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var X;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(X||(X={}));const Gi={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function JT(e){return e>=Y.DIGIT_0&&e<=Y.DIGIT_9}function eT(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_Z}function kvt(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_Z}function km(e){return kvt(e)||eT(e)}function CU(e){return km(e)||JT(e)}function COe(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_F}function AOe(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_F}function $vt(e){return JT(e)||COe(e)||AOe(e)}function vP(e){return e+32}function IOe(e){return e===Y.SPACE||e===Y.LINE_FEED||e===Y.TABULATION||e===Y.FORM_FEED}function Rvt(e){return e===Y.EQUALS_SIGN||CU(e)}function Jfe(e){return IOe(e)||e===Y.SOLIDUS||e===Y.GREATER_THAN_SIGN}class Nvt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new vvt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:En.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:En.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:En.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:En.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(EOe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(we.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=BE(t.tagName),t.type===En.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(we.endTagWithAttributes),t.selfClosing&&this._err(we.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case En.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case En.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case En.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:En.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=IOe(t)?En.WHITESPACE_CHARACTER:t===Y.NULL?En.NULL_CHARACTER:En.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(En.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Pm[0];s>=0&&(s=SOe(Pm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Pm[s];const a=o&yd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Y.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Rvt(this.preprocessor.peek(1))?(n=[Y.AMPERSAND],s+=u):(n=u===0?[Pm[s]&~yd.VALUE_LENGTH]:u===1?[Pm[++s]]:[Pm[++s],Pm[++s]],r=0,i=t!==Y.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(we.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case X.DATA:{this._stateData(t);break}case X.RCDATA:{this._stateRcdata(t);break}case X.RAWTEXT:{this._stateRawtext(t);break}case X.SCRIPT_DATA:{this._stateScriptData(t);break}case X.PLAINTEXT:{this._statePlaintext(t);break}case X.TAG_OPEN:{this._stateTagOpen(t);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case X.TAG_NAME:{this._stateTagName(t);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case X.BOGUS_COMMENT:{this._stateBogusComment(t);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case X.COMMENT_START:{this._stateCommentStart(t);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case X.COMMENT:{this._stateComment(t);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case X.COMMENT_END:{this._stateCommentEnd(t);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case X.DOCTYPE:{this._stateDoctype(t);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case X.CDATA_SECTION:{this._stateCdataSection(t);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case X.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case X.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case X.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case X.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case Y.AMPERSAND:{this.returnState=X.DATA,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitCodePoint(t);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Y.AMPERSAND:{this.returnState=X.RCDATA,this.state=X.CHARACTER_REFERENCE;break}case Y.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(li);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(li);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(li);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(li);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(km(t))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case Y.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case Y.QUESTION_MARK:{this._err(we.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t);break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(km(t))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.GREATER_THAN_SIGN:{this._err(we.missingEndTagName),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.tagName+=li;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(eT(t)?vP(t):t)}}_stateRcdataLessThanSign(t){t===Y.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){km(t)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case Y.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case Y.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Y.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){km(t)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Y.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case Y.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){km(t)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(li);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(li);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(li);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Y.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:km(t)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){km(t)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ya.SCRIPT,!1)&&Jfe(this.preprocessor.peek(Ya.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ya.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(li);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(li);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(li);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Y.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ya.SCRIPT,!1)&&Jfe(this.preprocessor.peek(Ya.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ya.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._err(we.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:{this._err(we.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.name+=li;break}default:this.currentAttr.name+=String.fromCodePoint(eT(t)?vP(t):t)}}_stateAfterAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=li;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=li;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_UNQUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=li;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:case Y.EQUALS_SIGN:case Y.GRAVE_ACCENT:{this._err(we.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Y.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=li;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ya.DASH_DASH,!0)?(this._createCommentToken(Ya.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(Ya.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ya.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(Ya.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(we.cdataInHtmlContent),this._createCommentToken(Ya.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(we.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case Y.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=li;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Y.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Y.GREATER_THAN_SIGN&&t!==Y.EOF&&this._err(we.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case Y.HYPHEN_MINUS:{n.data+="-";break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(eT(t))this._createDoctypeToken(String.fromCharCode(vP(t))),this.state=X.DOCTYPE_NAME;else switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.NULL:{this._err(we.unexpectedNullCharacter),this._createDoctypeToken(li),this.state=X.DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.name+=li;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(eT(t)?vP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ya.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ya.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(we.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=li;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=li;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=li;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=li;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.NULL:{this._err(we.unexpectedNullCharacter);break}case Y.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Y.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case Y.EOF:{this._err(we.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Y.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA;break}case Y.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Y.NUMBER_SIGN?this.state=X.NUMERIC_CHARACTER_REFERENCE:CU(t)?(this.state=X.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this.state=X.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){CU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Y.SEMICOLON&&this._err(we.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Y.LATIN_SMALL_X||t===Y.LATIN_CAPITAL_X?this.state=X.HEXADEMICAL_CHARACTER_REFERENCE_START:JT(t)?(this.state=X.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){$vt(t)?(this.state=X.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){COe(t)?this.charRefCode=this.charRefCode*16+t-55:AOe(t)?this.charRefCode=this.charRefCode*16+t-87:JT(t)?this.charRefCode=this.charRefCode*16+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){JT(t)?this.charRefCode=this.charRefCode*10+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Y.NULL)this._err(we.nullCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(we.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(_Oe(this.charRefCode))this._err(we.surrogateCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(wOe(this.charRefCode))this._err(we.noncharacterCharacterReference);else if(bOe(this.charRefCode)||this.charRefCode===Y.CARRIAGE_RETURN){this._err(we.controlCharacterReference);const n=Pvt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const OOe=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),Zfe=new Set([...OOe,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),_P=new Map([[T.APPLET,Ce.HTML],[T.CAPTION,Ce.HTML],[T.HTML,Ce.HTML],[T.MARQUEE,Ce.HTML],[T.OBJECT,Ce.HTML],[T.TABLE,Ce.HTML],[T.TD,Ce.HTML],[T.TEMPLATE,Ce.HTML],[T.TH,Ce.HTML],[T.ANNOTATION_XML,Ce.MATHML],[T.MI,Ce.MATHML],[T.MN,Ce.MATHML],[T.MO,Ce.MATHML],[T.MS,Ce.MATHML],[T.MTEXT,Ce.MATHML],[T.DESC,Ce.SVG],[T.FOREIGN_OBJECT,Ce.SVG],[T.TITLE,Ce.SVG]]),Dvt=[T.H1,T.H2,T.H3,T.H4,T.H5,T.H6],Mvt=[T.TR,T.TEMPLATE,T.HTML],Lvt=[T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML],Fvt=[T.TABLE,T.TEMPLATE,T.HTML],Bvt=[T.TD,T.TH];class jvt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ce.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ce.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Dvt,Ce.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Bvt,Ce.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Fvt,Ce.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Lvt,Ce.HTML)}clearBackToTableRowContext(){this.clearBackTo(Mvt,Ce.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ce.HTML)return!0;if(_P.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(TOe(n)&&r===Ce.HTML)return!0;if(_P.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ce.HTML)return!0;if((r===T.UL||r===T.OL)&&i===Ce.HTML||_P.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ce.HTML)return!0;if(r===T.BUTTON&&i===Ce.HTML||_P.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML){if(r===t)return!0;if(r===T.TABLE||r===T.TEMPLATE||r===T.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ce.HTML){if(n===T.TBODY||n===T.THEAD||n===T.TFOOT)return!0;if(n===T.TABLE||n===T.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML){if(r===t)return!0;if(r!==T.OPTION&&r!==T.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;OOe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Zfe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Zfe.has(this.currentTagId);)this.pop()}}const tB=3;var Uc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Uc=Uc||(Uc={}));const ede={type:Uc.Marker};class zvt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Uc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<tB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<tB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=tB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(ede)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Uc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Uc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(ede);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Uc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Uc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Uc.Element&&n.element===t)}}function tde(e){return{nodeName:"#text",value:e,parentNode:null}}const j_={createDocument(){return{nodeName:"#document",mode:Wu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};j_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(j_.isTextNode(n)){n.value+=t;return}}j_.appendChild(e,tde(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&j_.isTextNode(r)?r.value+=t:j_.insertBefore(e,tde(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},POe="html",Uvt="about:legacy-compat",Vvt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",kOe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Hvt=[...kOe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],qvt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),$Oe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Wvt=[...$Oe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function nde(e,t){return t.some(n=>e.startsWith(n))}function Gvt(e){return e.name===POe&&e.publicId===null&&(e.systemId===null||e.systemId===Uvt)}function Yvt(e){if(e.name!==POe)return Wu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Vvt)return Wu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),qvt.has(n))return Wu.QUIRKS;let r=t===null?Hvt:kOe;if(nde(n,r))return Wu.QUIRKS;if(r=t===null?$Oe:Wvt,nde(n,r))return Wu.LIMITED_QUIRKS}return Wu.NO_QUIRKS}const rde={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Kvt="definitionurl",Xvt="definitionURL",Qvt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Jvt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ce.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ce.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ce.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ce.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ce.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ce.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ce.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ce.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ce.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ce.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ce.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ce.XMLNS}]]),Zvt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),e_t=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function t_t(e){const t=e.tagID;return t===T.FONT&&e.attrs.some(({name:r})=>r===Pg.COLOR||r===Pg.SIZE||r===Pg.FACE)||e_t.has(t)}function ROe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Kvt){e.attrs[t].name=Xvt;break}}function NOe(e){for(let t=0;t<e.attrs.length;t++){const n=Qvt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function YY(e){for(let t=0;t<e.attrs.length;t++){const n=Jvt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function n_t(e){const t=Zvt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=BE(e.tagName))}function r_t(e,t){return t===Ce.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function i_t(e,t,n){if(t===Ce.MATHML&&e===T.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Pg.ENCODING){const i=n[r].value.toLowerCase();return i===rde.TEXT_HTML||i===rde.APPLICATION_XML}}return t===Ce.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function s_t(e,t,n,r){return(!r||r===Ce.HTML)&&i_t(e,t,n)||(!r||r===Ce.MATHML)&&r_t(e,t)}const o_t="hidden",a_t=8,u_t=3;var ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const l_t={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},DOe=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),ide={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:j_,onParseError:null};let sde=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...ide,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Nvt(this.options,this),this.activeFormattingElements=new zvt(this.treeAdapter),this.fragmentContextID=r?BE(this.treeAdapter.getTagName(r)):T.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new jvt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...ide,...n};t??(t=r.treeAdapter.createElement(me.TEMPLATE,Ce.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ce.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===T.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:l_t,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ce.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ce.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=Gi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===me.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ce.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=Gi.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=Gi.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=Gi.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=Gi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ce.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ce.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(me.HTML,Ce.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,T.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===En.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===T.SVG&&this.treeAdapter.getTagName(n)===me.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ce.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===T.MGLYPH||t.tagID===T.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ce.HTML)}_processToken(t){switch(t.type){case En.CHARACTER:{this.onCharacter(t);break}case En.NULL_CHARACTER:{this.onNullCharacter(t);break}case En.COMMENT:{this.onComment(t);break}case En.DOCTYPE:{this.onDoctype(t);break}case En.START_TAG:{this._processStartTag(t);break}case En.END_TAG:{this.onEndTag(t);break}case En.EOF:{this.onEof(t);break}case En.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return s_t(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Uc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case T.TR:{this.insertionMode=ee.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=ee.IN_TABLE;return}case T.BODY:{this.insertionMode=ee.IN_BODY;return}case T.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(t);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case T.TD:case T.TH:{if(t>0){this.insertionMode=ee.IN_CELL;return}break}case T.HEAD:{if(t>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===T.TEMPLATE)break;if(r===T.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(t){return DOe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ce.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case T.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Ovt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Bbt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{oS(this,t);break}case ee.BEFORE_HTML:{ZT(this,t);break}case ee.BEFORE_HEAD:{e2(this,t);break}case ee.IN_HEAD:{t2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{n2(this,t);break}case ee.AFTER_HEAD:{r2(this,t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{LOe(this,t);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{nB(this,t);break}case ee.IN_TABLE_TEXT:{VOe(this,t);break}case ee.IN_COLUMN_GROUP:{AD(this,t);break}case ee.AFTER_BODY:{ID(this,t);break}case ee.AFTER_AFTER_BODY:{s$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Fbt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{oS(this,t);break}case ee.BEFORE_HTML:{ZT(this,t);break}case ee.BEFORE_HEAD:{e2(this,t);break}case ee.IN_HEAD:{t2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{n2(this,t);break}case ee.AFTER_HEAD:{r2(this,t);break}case ee.TEXT:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{nB(this,t);break}case ee.IN_COLUMN_GROUP:{AD(this,t);break}case ee.AFTER_BODY:{ID(this,t);break}case ee.AFTER_AFTER_BODY:{s$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){AU(this,t);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{AU(this,t);break}case ee.IN_TABLE_TEXT:{aS(this,t);break}case ee.AFTER_BODY:{g_t(this,t);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{y_t(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{v_t(this,t);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(t,we.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{aS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,we.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?jbt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{oS(this,t);break}case ee.BEFORE_HTML:{__t(this,t);break}case ee.BEFORE_HEAD:{w_t(this,t);break}case ee.IN_HEAD:{xf(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{S_t(this,t);break}case ee.AFTER_HEAD:{C_t(this,t);break}case ee.IN_BODY:{fa(this,t);break}case ee.IN_TABLE:{ww(this,t);break}case ee.IN_TABLE_TEXT:{aS(this,t);break}case ee.IN_CAPTION:{Ebt(this,t);break}case ee.IN_COLUMN_GROUP:{QY(this,t);break}case ee.IN_TABLE_BODY:{W6(this,t);break}case ee.IN_ROW:{G6(this,t);break}case ee.IN_CELL:{Tbt(this,t);break}case ee.IN_SELECT:{WOe(this,t);break}case ee.IN_SELECT_IN_TABLE:{Abt(this,t);break}case ee.IN_TEMPLATE:{Obt(this,t);break}case ee.AFTER_BODY:{kbt(this,t);break}case ee.IN_FRAMESET:{$bt(this,t);break}case ee.AFTER_FRAMESET:{Nbt(this,t);break}case ee.AFTER_AFTER_BODY:{Mbt(this,t);break}case ee.AFTER_AFTER_FRAMESET:{Lbt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?zbt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{oS(this,t);break}case ee.BEFORE_HTML:{b_t(this,t);break}case ee.BEFORE_HEAD:{E_t(this,t);break}case ee.IN_HEAD:{x_t(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{T_t(this,t);break}case ee.AFTER_HEAD:{A_t(this,t);break}case ee.IN_BODY:{q6(this,t);break}case ee.TEXT:{dbt(this,t);break}case ee.IN_TABLE:{hC(this,t);break}case ee.IN_TABLE_TEXT:{aS(this,t);break}case ee.IN_CAPTION:{xbt(this,t);break}case ee.IN_COLUMN_GROUP:{Sbt(this,t);break}case ee.IN_TABLE_BODY:{IU(this,t);break}case ee.IN_ROW:{qOe(this,t);break}case ee.IN_CELL:{Cbt(this,t);break}case ee.IN_SELECT:{GOe(this,t);break}case ee.IN_SELECT_IN_TABLE:{Ibt(this,t);break}case ee.IN_TEMPLATE:{Pbt(this,t);break}case ee.AFTER_BODY:{KOe(this,t);break}case ee.IN_FRAMESET:{Rbt(this,t);break}case ee.AFTER_FRAMESET:{Dbt(this,t);break}case ee.AFTER_AFTER_BODY:{s$(this,t);break}}}onEof(t){switch(this.insertionMode){case ee.INITIAL:{oS(this,t);break}case ee.BEFORE_HTML:{ZT(this,t);break}case ee.BEFORE_HEAD:{e2(this,t);break}case ee.IN_HEAD:{t2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{n2(this,t);break}case ee.AFTER_HEAD:{r2(this,t);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{zOe(this,t);break}case ee.TEXT:{hbt(this,t);break}case ee.IN_TABLE_TEXT:{aS(this,t);break}case ee.IN_TEMPLATE:{YOe(this,t);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{XY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Y.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{MOe(this,t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{nB(this,t);break}case ee.IN_TABLE_TEXT:{UOe(this,t);break}}}};function c_t(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):jOe(e,t),n}function f_t(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function d_t(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=u_t;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=h_t(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function h_t(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function p_t(e,t,n){const r=e.treeAdapter.getTagName(t),i=BE(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===T.TEMPLATE&&s===Ce.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function m_t(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function KY(e,t){for(let n=0;n<a_t;n++){const r=c_t(e,t);if(!r)break;const i=f_t(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=d_t(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&p_t(e,o,s),m_t(e,i,r)}}function AU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function g_t(e,t){e._appendCommentNode(t,e.openElements.items[0])}function y_t(e,t){e._appendCommentNode(t,e.document)}function XY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function v_t(e,t){e._setDocumentType(t);const n=t.forceQuirks?Wu.QUIRKS:Yvt(t);Gvt(t)||e._err(t,we.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ee.BEFORE_HTML}function oS(e,t){e._err(t,we.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Wu.QUIRKS),e.insertionMode=ee.BEFORE_HTML,e._processToken(t)}function __t(e,t){t.tagID===T.HTML?(e._insertElement(t,Ce.HTML),e.insertionMode=ee.BEFORE_HEAD):ZT(e,t)}function b_t(e,t){const n=t.tagID;(n===T.HTML||n===T.HEAD||n===T.BODY||n===T.BR)&&ZT(e,t)}function ZT(e,t){e._insertFakeRootElement(),e.insertionMode=ee.BEFORE_HEAD,e._processToken(t)}function w_t(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.HEAD:{e._insertElement(t,Ce.HTML),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD;break}default:e2(e,t)}}function E_t(e,t){const n=t.tagID;n===T.HEAD||n===T.BODY||n===T.HTML||n===T.BR?e2(e,t):e._err(t,we.endTagWithoutMatchingOpenElement)}function e2(e,t){e._insertFakeElement(me.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD,e._processToken(t)}function xf(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,Gi.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Gi.RAWTEXT):(e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,Gi.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,Gi.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:t2(e,t)}}function x_t(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{t2(e,t);break}case T.TEMPLATE:{Mv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function Mv(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,we.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,we.endTagWithoutMatchingOpenElement)}function t2(e,t){e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD,e._processToken(t)}function S_t(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{xf(e,t);break}case T.NOSCRIPT:{e._err(t,we.nestedNoscriptInHead);break}default:n2(e,t)}}function T_t(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ee.IN_HEAD;break}case T.BR:{n2(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function n2(e,t){const n=t.type===En.EOF?we.openElementsLeftAfterEof:we.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ee.IN_HEAD,e._processToken(t)}function C_t(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.BODY:{e._insertElement(t,Ce.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,we.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),xf(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:r2(e,t)}}function A_t(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{r2(e,t);break}case T.TEMPLATE:{Mv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function r2(e,t){e._insertFakeElement(me.BODY,T.BODY),e.insertionMode=ee.IN_BODY,H6(e,t)}function H6(e,t){switch(t.type){case En.CHARACTER:{LOe(e,t);break}case En.WHITESPACE_CHARACTER:{MOe(e,t);break}case En.COMMENT:{AU(e,t);break}case En.START_TAG:{fa(e,t);break}case En.END_TAG:{q6(e,t);break}case En.EOF:{zOe(e,t);break}}}function MOe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function LOe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function I_t(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function O_t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function P_t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_FRAMESET)}function k_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML)}function $_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),TOe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ce.HTML)}function R_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function N_t(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),n||(e.formElement=e.openElements.current))}function D_t(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===T.LI&&i===T.LI||(n===T.DD||n===T.DT)&&(i===T.DD||i===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==T.ADDRESS&&i!==T.DIV&&i!==T.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML)}function M_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),e.tokenizer.state=Gi.PLAINTEXT}function L_t(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.framesetOk=!1}function F_t(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(me.A);n&&(KY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function B_t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function j_t(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(KY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function z_t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function U_t(e,t){e.treeAdapter.getDocumentMode(e.document)!==Wu.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_TABLE}function FOe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ce.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function BOe(e){const t=EOe(e,Pg.TYPE);return t!=null&&t.toLowerCase()===o_t}function V_t(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ce.HTML),BOe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function H_t(e,t){e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0}function q_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,Ce.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function W_t(e,t){t.tagName=me.IMG,t.tagID=T.IMG,FOe(e,t)}function G_t(e,t){e._insertElement(t,Ce.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Gi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ee.TEXT}function Y_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Gi.RAWTEXT)}function K_t(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Gi.RAWTEXT)}function ode(e,t){e._switchToTextParsing(t,Gi.RAWTEXT)}function X_t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ee.IN_TABLE||e.insertionMode===ee.IN_CAPTION||e.insertionMode===ee.IN_TABLE_BODY||e.insertionMode===ee.IN_ROW||e.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function Q_t(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML)}function J_t(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ce.HTML)}function Z_t(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,Ce.HTML)}function ebt(e,t){e._reconstructActiveFormattingElements(),ROe(t),YY(t),t.selfClosing?e._appendElement(t,Ce.MATHML):e._insertElement(t,Ce.MATHML),t.ackSelfClosing=!0}function tbt(e,t){e._reconstructActiveFormattingElements(),NOe(t),YY(t),t.selfClosing?e._appendElement(t,Ce.SVG):e._insertElement(t,Ce.SVG),t.ackSelfClosing=!0}function ade(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML)}function fa(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{B_t(e,t);break}case T.A:{F_t(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{$_t(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{k_t(e,t);break}case T.LI:case T.DD:case T.DT:{D_t(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{FOe(e,t);break}case T.HR:{q_t(e,t);break}case T.RB:case T.RTC:{J_t(e,t);break}case T.RT:case T.RP:{Z_t(e,t);break}case T.PRE:case T.LISTING:{R_t(e,t);break}case T.XMP:{Y_t(e,t);break}case T.SVG:{tbt(e,t);break}case T.HTML:{I_t(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{xf(e,t);break}case T.BODY:{O_t(e,t);break}case T.FORM:{N_t(e,t);break}case T.NOBR:{j_t(e,t);break}case T.MATH:{ebt(e,t);break}case T.TABLE:{U_t(e,t);break}case T.INPUT:{V_t(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{H_t(e,t);break}case T.IMAGE:{W_t(e,t);break}case T.BUTTON:{L_t(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{z_t(e,t);break}case T.IFRAME:{K_t(e,t);break}case T.SELECT:{X_t(e,t);break}case T.OPTION:case T.OPTGROUP:{Q_t(e,t);break}case T.NOEMBED:{ode(e,t);break}case T.FRAMESET:{P_t(e,t);break}case T.TEXTAREA:{G_t(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?ode(e,t):ade(e,t);break}case T.PLAINTEXT:{M_t(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:ade(e,t)}}function nbt(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function rbt(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,KOe(e,t))}function ibt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function sbt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):n&&e.openElements.remove(n))}function obt(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(me.P,T.P),e._closePElement()}function abt(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function ubt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function lbt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function cbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function fbt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(me.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function jOe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==T.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function q6(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{KY(e,t);break}case T.P:{obt(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{ibt(e,t);break}case T.LI:{abt(e);break}case T.DD:case T.DT:{ubt(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{lbt(e);break}case T.BR:{fbt(e);break}case T.BODY:{nbt(e,t);break}case T.HTML:{rbt(e,t);break}case T.FORM:{sbt(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{cbt(e,t);break}case T.TEMPLATE:{Mv(e,t);break}default:jOe(e,t)}}function zOe(e,t){e.tmplInsertionModeStack.length>0?YOe(e,t):XY(e,t)}function dbt(e,t){var n;t.tagID===T.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function hbt(e,t){e._err(t,we.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function nB(e,t){if(DOe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ee.IN_TABLE_TEXT,t.type){case En.CHARACTER:{VOe(e,t);break}case En.WHITESPACE_CHARACTER:{UOe(e,t);break}}else tI(e,t)}function pbt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_CAPTION}function mbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_COLUMN_GROUP}function gbt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.COLGROUP,T.COLGROUP),e.insertionMode=ee.IN_COLUMN_GROUP,QY(e,t)}function ybt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_TABLE_BODY}function vbt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.TBODY,T.TBODY),e.insertionMode=ee.IN_TABLE_BODY,W6(e,t)}function _bt(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function bbt(e,t){BOe(t)?e._appendElement(t,Ce.HTML):tI(e,t),t.ackSelfClosing=!0}function wbt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ce.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ww(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{vbt(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{xf(e,t);break}case T.COL:{gbt(e,t);break}case T.FORM:{wbt(e,t);break}case T.TABLE:{_bt(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{ybt(e,t);break}case T.INPUT:{bbt(e,t);break}case T.CAPTION:{pbt(e,t);break}case T.COLGROUP:{mbt(e,t);break}default:tI(e,t)}}function hC(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{Mv(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:tI(e,t)}}function tI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,H6(e,t),e.fosterParentingEnabled=n}function UOe(e,t){e.pendingCharacterTokens.push(t)}function VOe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function aS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)tI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const HOe=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function Ebt(e,t){const n=t.tagID;HOe.has(n)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,ww(e,t)):fa(e,t)}function xbt(e,t){const n=t.tagID;switch(n){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,n===T.TABLE&&hC(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:q6(e,t)}}function QY(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.COL:{e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{xf(e,t);break}default:AD(e,t)}}function Sbt(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TEMPLATE:{Mv(e,t);break}case T.COL:break;default:AD(e,t)}}function AD(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE,e._processToken(t))}function W6(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(me.TR,T.TR),e.insertionMode=ee.IN_ROW,G6(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,ww(e,t));break}default:ww(e,t)}}function IU(e,t){const n=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,hC(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:hC(e,t)}}function G6(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,W6(e,t));break}default:ww(e,t)}}function qOe(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,IU(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,IU(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:hC(e,t)}}function Tbt(e,t){const n=t.tagID;HOe.has(n)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),G6(e,t)):fa(e,t)}function Cbt(e,t){const n=t.tagID;switch(n){case T.TD:case T.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),qOe(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:q6(e,t)}}function WOe(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,Ce.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ce.HTML);break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{xf(e,t);break}}}function GOe(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{Mv(e,t);break}}}function Abt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):WOe(e,t)}function Ibt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):GOe(e,t)}function Obt(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{xf(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=ee.IN_TABLE,e.insertionMode=ee.IN_TABLE,ww(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,e.insertionMode=ee.IN_COLUMN_GROUP,QY(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,e.insertionMode=ee.IN_TABLE_BODY,W6(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=ee.IN_ROW,e.insertionMode=ee.IN_ROW,G6(e,t);break}default:e.tmplInsertionModeStack[0]=ee.IN_BODY,e.insertionMode=ee.IN_BODY,fa(e,t)}}function Pbt(e,t){t.tagID===T.TEMPLATE&&Mv(e,t)}function YOe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):XY(e,t)}function kbt(e,t){t.tagID===T.HTML?fa(e,t):ID(e,t)}function KOe(e,t){var n;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else ID(e,t)}function ID(e,t){e.insertionMode=ee.IN_BODY,H6(e,t)}function $bt(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.FRAMESET:{e._insertElement(t,Ce.HTML);break}case T.FRAME:{e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{xf(e,t);break}}}function Rbt(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=ee.AFTER_FRAMESET))}function Nbt(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.NOFRAMES:{xf(e,t);break}}}function Dbt(e,t){t.tagID===T.HTML&&(e.insertionMode=ee.AFTER_AFTER_FRAMESET)}function Mbt(e,t){t.tagID===T.HTML?fa(e,t):s$(e,t)}function s$(e,t){e.insertionMode=ee.IN_BODY,H6(e,t)}function Lbt(e,t){switch(t.tagID){case T.HTML:{fa(e,t);break}case T.NOFRAMES:{xf(e,t);break}}}function Fbt(e,t){t.chars=li,e._insertCharacters(t)}function Bbt(e,t){e._insertCharacters(t),e.framesetOk=!1}function XOe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ce.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function jbt(e,t){if(t_t(t))XOe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ce.MATHML?ROe(t):r===Ce.SVG&&(n_t(t),NOe(t)),YY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function zbt(e,t){if(t.tagID===T.P||t.tagID===T.BR){XOe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ce.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}me.AREA,me.BASE,me.BASEFONT,me.BGSOUND,me.BR,me.COL,me.EMBED,me.FRAME,me.HR,me.IMG,me.INPUT,me.KEYGEN,me.LINK,me.META,me.PARAM,me.SOURCE,me.TRACK,me.WBR;const QOe=JOe("end"),Lv=JOe("start");function JOe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const ZOe=function(e){if(e==null)return qbt;if(typeof e=="function")return Y6(e);if(typeof e=="object")return Array.isArray(e)?Ubt(e):Vbt(e);if(typeof e=="string")return Hbt(e);throw new Error("Expected function, string, or object as test")};function Ubt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ZOe(e[n]);return Y6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Vbt(e){const t=e;return Y6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Hbt(e){return Y6(t);function t(n){return n&&n.type===e}}function Y6(e){return t;function t(n,r,i){return!!(Wbt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function qbt(){return!0}function Wbt(e){return e!==null&&typeof e=="object"&&"type"in e}const ePe=[],Gbt=!0,ude=!1,Ybt="skip";function Kbt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ZOe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=ePe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Xbt(n(u,c)),h[0]===ude))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Ybt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===ude)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Xbt(e){return Array.isArray(e)?e:typeof e=="number"?[Gbt,e]:e==null?ePe:[e]}function Qbt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Kbt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Jbt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),lde={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function tPe(e,t){const n=uwt(e),r=yOe("type",{handlers:{root:Zbt,element:ewt,text:twt,comment:rPe,doctype:nwt,raw:iwt},unknown:swt}),i={parser:n?new sde(lde):sde.getFragmentParser(void 0,lde),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),jE(i,Lv());const s=n?i.parser.document:i.parser.getFragment(),o=evt(s,{file:i.options.file});return i.stitches&&Qbt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function nPe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Zbt(e,t){nPe(e.children,t)}function ewt(e,t){owt(e,t),nPe(e.children,t),awt(e,t)}function twt(e,t){const n={type:En.CHARACTER,chars:e.value,location:nI(e)};jE(t,Lv(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function nwt(e,t){const n={type:En.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:nI(e)};jE(t,Lv(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function rwt(e,t){t.stitches=!0;const n=lwt(e);if("children"in e&&"children"in n){const r=tPe({type:"root",children:e.children},t.options);n.children=r.children}rPe({type:"comment",value:{stitch:n}},t)}function rPe(e,t){const n=e.value,r={type:En.COMMENT,data:n,location:nI(e)};jE(t,Lv(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function iwt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,iPe(t,Lv(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function swt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))rwt(n,t);else{let r="";throw Jbt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function jE(e,t){iPe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Gi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function iPe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function owt(e,t){if(t.parser.tokenizer.state===Gi.PLAINTEXT)return;jE(t,Lv(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:Jy.html;r===Jy.html&&e.tagName==="svg"&&(r=Jy.svg);const i=svt({...e,children:[]},{space:r===Jy.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:En.START_TAG,tagName:e.tagName,tagID:BE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:nI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function awt(e,t){if(!t.parser.tokenizer.inForeignNode&&hvt.includes(e.tagName)||t.parser.tokenizer.state===Gi.PLAINTEXT)return;jE(t,QOe(e));const n={type:En.END_TAG,tagName:e.tagName,tagID:BE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:nI(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Gi.RCDATA||t.parser.tokenizer.state===Gi.RAWTEXT||t.parser.tokenizer.state===Gi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Gi.DATA)}function uwt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function nI(e){const t=Lv(e)||{line:void 0,column:void 0,offset:void 0},n=QOe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function lwt(e){return"children"in e?Gfe({...e,children:[]}):Gfe(e)}function cwt(e){return function(t,n){return tPe(t,{...e,file:n})}}function ka({text:e,required:t}){const n={img:({node:i,...s})=>I.jsx(Nv,{...s}),p:({node:i,...s})=>I.jsx(ct,{...s,pb:8}),h1:({node:i,...s})=>I.jsx(Ho,{order:1,...s,pb:12}),h2:({node:i,...s})=>I.jsx(Ho,{order:2,...s,pb:12}),h3:({node:i,...s})=>I.jsx(Ho,{order:3,...s,pb:12}),h4:({node:i,...s})=>I.jsx(Ho,{order:4,...s,pb:12}),h5:({node:i,...s})=>I.jsx(Ho,{order:5,...s,pb:12}),h6:({node:i,...s})=>I.jsx(Ho,{order:6,...s,pb:12}),a:({node:i,...s})=>I.jsx(y6,{...s}),ul:({node:i,...s})=>I.jsx(w1,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>I.jsx(w1,{type:"ordered",withPadding:!0,...s,pb:8})},r='<span style="color: #fa5252">*</span>';return I.jsx(cOe,{components:n,rehypePlugins:[cwt],children:e+(t?` ${r}`:"")})}function sPe({errors:e}){const t=`
      There was an issue loading the study config. Please check the following errors:  

      ${e.map(n=>`- You have an error at ${n.instancePath||"root"}: ${n.message} - ${JSON.stringify(n.params)}  `).join(`
`)}
    `.replace(/\n\s+/g,`
`);return I.jsx(ka,{text:t})}const fwt="https://github.com/revisit-studies/study/tree/main/public/";function dwt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=tm();return I.jsxs(om,{size:"xs",px:"xs",style:{marginTop:60,marginBottom:60},children:[I.jsx(Nv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${hc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),I.jsx(ct,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=$Y(i);return I.jsx(nm,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:I.jsx(T6,{shadow:"sm",radius:"md",withBorder:!0,children:s.errors?I.jsxs(I.Fragment,{children:[I.jsxs(qi,{align:"center",direction:"row",children:[I.jsx(gmt,{color:"red"}),I.jsx(ct,{fw:"bold",ml:8,color:"red",children:i})]}),I.jsx(sPe,{errors:s.errors})]}):I.jsxs(I.Fragment,{children:[I.jsx(ct,{fw:"bold",children:s.studyMetadata.title}),I.jsx(ct,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),I.jsx(ct,{c:"dimmed",children:s.studyMetadata.description}),I.jsx(ct,{c:"dimmed",ta:"right",style:{paddingRight:5},children:I.jsxs(y6,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${fwt}${o}`,children:["View source:"," ",o]})})]})})},i)})]})}var oPe={exports:{}},aPe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=C;function hwt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pwt=typeof Object.is=="function"?Object.is:hwt,mwt=Ew.useState,gwt=Ew.useEffect,ywt=Ew.useLayoutEffect,vwt=Ew.useDebugValue;function _wt(e,t){var n=t(),r=mwt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return ywt(function(){i.value=n,i.getSnapshot=t,rB(i)&&s({inst:i})},[e,n,t]),gwt(function(){return rB(i)&&s({inst:i}),e(function(){rB(i)&&s({inst:i})})},[e]),vwt(n),n}function rB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pwt(e,n)}catch{return!0}}function bwt(e,t){return t()}var wwt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bwt:_wt;aPe.useSyncExternalStore=Ew.useSyncExternalStore!==void 0?Ew.useSyncExternalStore:wwt;oPe.exports=aPe;var Ewt=oPe.exports,uPe={exports:{}},lPe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K6=C,xwt=Ewt;function Swt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Twt=typeof Object.is=="function"?Object.is:Swt,Cwt=xwt.useSyncExternalStore,Awt=K6.useRef,Iwt=K6.useEffect,Owt=K6.useMemo,Pwt=K6.useDebugValue;lPe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Awt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Owt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Twt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Cwt(e,s[0],s[1]);return Iwt(function(){o.hasValue=!0,o.value=a},[a]),Pwt(a),a};uPe.exports=lPe;var kwt=uPe.exports;function $wt(e){e()}let cPe=$wt;const Rwt=e=>cPe=e,Nwt=()=>cPe,Qg=C.createContext(null);function fPe(){return C.useContext(Qg)}const Dwt=()=>{throw new Error("uSES not initialized!")};let dPe=Dwt;const Mwt=e=>{dPe=e},Lwt=(e,t)=>e===t;function Fwt(e=Qg){const t=e===Qg?fPe:()=>C.useContext(e);return function(r,i=Lwt){const{store:s,subscription:o,getServerState:a}=t(),u=dPe(o.addNestedSub,s.getState,a||s.getState,r,i);return C.useDebugValue(u),u}}const Bwt=Fwt();var kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JY=Symbol.for("react.element"),ZY=Symbol.for("react.portal"),X6=Symbol.for("react.fragment"),Q6=Symbol.for("react.strict_mode"),J6=Symbol.for("react.profiler"),Z6=Symbol.for("react.provider"),e4=Symbol.for("react.context"),jwt=Symbol.for("react.server_context"),t4=Symbol.for("react.forward_ref"),n4=Symbol.for("react.suspense"),r4=Symbol.for("react.suspense_list"),i4=Symbol.for("react.memo"),s4=Symbol.for("react.lazy"),zwt=Symbol.for("react.offscreen"),hPe;hPe=Symbol.for("react.module.reference");function vc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case JY:switch(e=e.type,e){case X6:case J6:case Q6:case n4:case r4:return e;default:switch(e=e&&e.$$typeof,e){case jwt:case e4:case t4:case s4:case i4:case Z6:return e;default:return t}}case ZY:return t}}}kr.ContextConsumer=e4;kr.ContextProvider=Z6;kr.Element=JY;kr.ForwardRef=t4;kr.Fragment=X6;kr.Lazy=s4;kr.Memo=i4;kr.Portal=ZY;kr.Profiler=J6;kr.StrictMode=Q6;kr.Suspense=n4;kr.SuspenseList=r4;kr.isAsyncMode=function(){return!1};kr.isConcurrentMode=function(){return!1};kr.isContextConsumer=function(e){return vc(e)===e4};kr.isContextProvider=function(e){return vc(e)===Z6};kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===JY};kr.isForwardRef=function(e){return vc(e)===t4};kr.isFragment=function(e){return vc(e)===X6};kr.isLazy=function(e){return vc(e)===s4};kr.isMemo=function(e){return vc(e)===i4};kr.isPortal=function(e){return vc(e)===ZY};kr.isProfiler=function(e){return vc(e)===J6};kr.isStrictMode=function(e){return vc(e)===Q6};kr.isSuspense=function(e){return vc(e)===n4};kr.isSuspenseList=function(e){return vc(e)===r4};kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===X6||e===J6||e===Q6||e===n4||e===r4||e===zwt||typeof e=="object"&&e!==null&&(e.$$typeof===s4||e.$$typeof===i4||e.$$typeof===Z6||e.$$typeof===e4||e.$$typeof===t4||e.$$typeof===hPe||e.getModuleId!==void 0)};kr.typeOf=vc;function Uwt(){const e=Nwt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const cde={notify(){},get:()=>[]};function Vwt(e,t){let n,r=cde;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=Uwt())}function l(){n&&(n(),n=void 0,r.clear(),r=cde)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const Hwt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qwt=Hwt?C.useLayoutEffect:C.useEffect;function Wwt({store:e,context:t,children:n,serverState:r}){const i=C.useMemo(()=>{const a=Vwt(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=C.useMemo(()=>e.getState(),[e]);qwt(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||Qg;return M.createElement(o.Provider,{value:i},n)}function pPe(e=Qg){const t=e===Qg?fPe:()=>C.useContext(e);return function(){const{store:r}=t();return r}}const Gwt=pPe();function Ywt(e=Qg){const t=e===Qg?Gwt:pPe(e);return function(){return t().dispatch}}const mPe=Ywt();Mwt(kwt.useSyncExternalStoreWithSelector);Rwt(Pv.unstable_batchedUpdates);function o4(){const{studyId:e}=oC();return`${e}`}function _c(){const{index:e}=oC();return parseInt(e||"0",10)}function Hc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Jg(e){return!!e&&!!e[fi]}function Np(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===rEt}(e)||Array.isArray(e)||!!e[yde]||!!(!((t=e.constructor)===null||t===void 0)&&t[yde])||eK(e)||tK(e))}function H1(e,t,n){n===void 0&&(n=!1),zE(e)===0?(n?Object.keys:Fb)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function zE(e){var t=e[fi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:eK(e)?2:tK(e)?3:0}function Lb(e,t){return zE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Kwt(e,t){return zE(e)===2?e.get(t):e[t]}function gPe(e,t,n){var r=zE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function yPe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function eK(e){return tEt&&e instanceof Map}function tK(e){return nEt&&e instanceof Set}function xy(e){return e.o||e.t}function nK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=_Pe(e);delete t[fi];for(var n=Fb(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function rK(e,t){return t===void 0&&(t=!1),iK(e)||Jg(e)||!Np(e)||(zE(e)>1&&(e.set=e.add=e.clear=e.delete=Xwt),Object.freeze(e),t&&H1(e,function(n,r){return rK(r,!0)},!0)),e}function Xwt(){Hc(2)}function iK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ad(e){var t=$U[e];return t||Hc(18,e),t}function Qwt(e,t){$U[e]||($U[e]=t)}function OU(){return pC}function iB(e,t){t&&(Ad("Patches"),e.u=[],e.s=[],e.v=t)}function OD(e){PU(e),e.p.forEach(Jwt),e.p=null}function PU(e){e===pC&&(pC=e.l)}function fde(e){return pC={p:[],l:pC,h:e,m:!0,_:0}}function Jwt(e){var t=e[fi];t.i===0||t.i===1?t.j():t.O=!0}function sB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Ad("ES5").S(t,e,r),r?(n[fi].P&&(OD(t),Hc(4)),Np(e)&&(e=PD(t,e),t.l||kD(t,e)),t.u&&Ad("Patches").M(n[fi].t,e,t.u,t.s)):e=PD(t,n,[]),OD(t),t.u&&t.v(t.u,t.s),e!==vPe?e:void 0}function PD(e,t,n){if(iK(t))return t;var r=t[fi];if(!r)return H1(t,function(a,u){return dde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return kD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=nK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),H1(s,function(a,u){return dde(e,r,i,a,u,n,o)}),kD(e,i,!1),n&&e.u&&Ad("Patches").N(r,n,e.u,e.s)}return r.o}function dde(e,t,n,r,i,s,o){if(Jg(i)){var a=PD(e,i,s&&t&&t.i!==3&&!Lb(t.R,r)?s.concat(r):void 0);if(gPe(n,r,a),!Jg(a))return;e.m=!1}else o&&n.add(i);if(Np(i)&&!iK(i)){if(!e.h.D&&e._<1)return;PD(e,i),t&&t.A.l||kD(e,i)}}function kD(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&rK(t,n)}function oB(e,t){var n=e[fi];return(n?xy(n):e)[t]}function hde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Km(e){e.P||(e.P=!0,e.l&&Km(e.l))}function aB(e){e.o||(e.o=nK(e.t))}function kU(e,t,n){var r=eK(t)?Ad("MapSet").F(t,n):tK(t)?Ad("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:OU(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=mC;o&&(u=[a],l=tT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ad("ES5").J(t,n);return(n?n.A:OU()).p.push(r),r}function Zwt(e){return Jg(e)||Hc(22,e),function t(n){if(!Np(n))return n;var r,i=n[fi],s=zE(n);if(i){if(!i.P&&(i.i<4||!Ad("ES5").K(i)))return i.t;i.I=!0,r=pde(n,s),i.I=!1}else r=pde(n,s);return H1(r,function(o,a){i&&Kwt(i.t,o)===a||gPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function pde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return nK(e)}function eEt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[fi];return mC.get(u,s)},set:function(u){var l=this[fi];mC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][fi];if(!a.P)switch(a.i){case 5:r(a)&&Km(a);break;case 4:n(a)&&Km(a)}}}function n(s){for(var o=s.t,a=s.k,u=Fb(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==fi){var f=o[c];if(f===void 0&&!Lb(o,c))return!0;var d=a[c],h=d&&d[fi];if(h?h.t!==f:!yPe(d,f))return!0}}var p=!!o[fi];return u.length!==Fb(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Qwt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=_Pe(f);delete p[fi];for(var m=Fb(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:OU(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,fi,{value:l,writable:!0}),u},S:function(s,o,a){a?Jg(o)&&o[fi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[fi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)H1(d,function(_){_!==fi&&(f[_]!==void 0||Lb(f,_)?h[_]||u(d[_]):(h[_]=!0,Km(c)))}),H1(f,function(_){d[_]!==void 0||Lb(d,_)||(h[_]=!1,Km(c))});else if(p===5){if(r(c)&&(Km(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var mde,pC,sK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",tEt=typeof Map<"u",nEt=typeof Set<"u",gde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vPe=sK?Symbol.for("immer-nothing"):((mde={})["immer-nothing"]=!0,mde),yde=sK?Symbol.for("immer-draftable"):"__$immer_draftable",fi=sK?Symbol.for("immer-state"):"__$immer_state",rEt=""+Object.prototype.constructor,Fb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,_Pe=Object.getOwnPropertyDescriptors||function(e){var t={};return Fb(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},$U={},mC={get:function(e,t){if(t===fi)return e;var n=xy(e);if(!Lb(n,t))return function(i,s,o){var a,u=hde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Np(r)?r:r===oB(e.t,t)?(aB(e),e.o[t]=kU(e.A.h,r,e)):r},has:function(e,t){return t in xy(e)},ownKeys:function(e){return Reflect.ownKeys(xy(e))},set:function(e,t,n){var r=hde(xy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=oB(xy(e),t),s=i==null?void 0:i[fi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(yPe(n,i)&&(n!==void 0||Lb(e.t,t)))return!0;aB(e),Km(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return oB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,aB(e),Km(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=xy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Hc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Hc(12)}},tT={};H1(mC,function(e,t){tT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),tT.deleteProperty=function(e,t){return tT.set.call(this,e,t,void 0)},tT.set=function(e,t,n){return mC.set.call(this,e[0],t,n,e[0])};var iEt=function(){function e(n){var r=this;this.g=gde,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&Hc(6),o!==void 0&&typeof o!="function"&&Hc(7),Np(i)){var c=fde(r),f=kU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?OD(c):PU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return iB(c,o),sB(m,c)},function(m){throw OD(c),m}):(iB(c,o),sB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===vPe&&(l=void 0),r.D&&rK(l,!0),o){var h=[],p=[];Ad("Patches").M(i,l,h,p),o(h,p)}return l}Hc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Np(n)||Hc(8),Jg(n)&&(n=Zwt(n));var r=fde(this),i=kU(this,n,void 0);return i[fi].C=!0,PU(r),i},t.finishDraft=function(n,r){var i=n&&n[fi],s=i.A;return iB(s,r),sB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!gde&&Hc(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ad("Patches").$;return Jg(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),cl=new iEt,bPe=cl.produce;cl.produceWithPatches.bind(cl);cl.setAutoFreeze.bind(cl);cl.setUseProxies.bind(cl);cl.applyPatches.bind(cl);cl.createDraft.bind(cl);cl.finishDraft.bind(cl);function gC(e){"@babel/helpers - typeof";return gC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gC(e)}function sEt(e,t){if(gC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oEt(e){var t=sEt(e,"string");return gC(t)=="symbol"?t:String(t)}function aEt(e,t,n){return t=oEt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _de(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vde(Object(n),!0).forEach(function(r){aEt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vde(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bde=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),uB=function(){return Math.random().toString(36).substring(7).split("").join(".")},$D={INIT:"@@redux/INIT"+uB(),REPLACE:"@@redux/REPLACE"+uB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+uB()}};function uEt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function wPe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Bo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Bo(1));return n(wPe)(e,t)}if(typeof e!="function")throw new Error(Bo(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Bo(3));return s}function f(m){if(typeof m!="function")throw new Error(Bo(4));if(u)throw new Error(Bo(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Bo(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!uEt(m))throw new Error(Bo(7));if(typeof m.type>"u")throw new Error(Bo(8));if(u)throw new Error(Bo(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Bo(10));i=m,d({type:$D.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Bo(11));function _(){v.next&&v.next(c())}_();var b=g(_);return{unsubscribe:b}}},m[bde]=function(){return this},m}return d({type:$D.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[bde]=p,r}function lEt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:$D.INIT});if(typeof r>"u")throw new Error(Bo(12));if(typeof n(void 0,{type:$D.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bo(13))})}function cEt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{lEt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Bo(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function RD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function fEt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Bo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=RD.apply(void 0,a)(i.dispatch),_de(_de({},i),{},{dispatch:s})}}}function EPe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var xPe=EPe();xPe.withExtraArgument=EPe;const wde=xPe;var dEt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},yC=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},hEt=Object.defineProperty,pEt=Object.defineProperties,mEt=Object.getOwnPropertyDescriptors,Ede=Object.getOwnPropertySymbols,gEt=Object.prototype.hasOwnProperty,yEt=Object.prototype.propertyIsEnumerable,xde=function(e,t,n){return t in e?hEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},kg=function(e,t){for(var n in t||(t={}))gEt.call(t,n)&&xde(e,n,t[n]);if(Ede)for(var r=0,i=Ede(t);r<i.length;r++){var n=i[r];yEt.call(t,n)&&xde(e,n,t[n])}return e},lB=function(e,t){return pEt(e,mEt(t))},iI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},vEt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?RD:RD.apply(null,arguments)};function _Et(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var bEt=function(e){dEt(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,yC([void 0],n[0].concat(this)))):new(t.bind.apply(t,yC([void 0],n.concat(this))))},t}(Array);function RU(e){return Np(e)?bPe(e,function(){}):e}function wEt(e){return typeof e=="boolean"}function EEt(){return function(t){return xEt(t)}}function xEt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new bEt;return n&&(wEt(n)?r.push(wde):r.push(wde.withExtraArgument(n.extraArgument))),r}var SEt=!0;function SPe(e){var t=EEt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(_Et(i))h=cEt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=fEt.apply(void 0,p),g=RD;u&&(g=vEt(kg({trace:!SEt},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=yC([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return wPe(h,c,v)}function Id(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return kg(kg({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function TPe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function TEt(e){return typeof e=="function"}function CEt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?TPe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(TEt(e))u=function(){return RU(e())};else{var l=RU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=yC([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Jg(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Np(p))return bPe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function AEt(e,t){return e+"/"+t}function CPe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:RU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=AEt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Id(d,p):Id(d)});function u(){var c=typeof e.extraReducers=="function"?TPe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=kg(kg({},d),o);return CEt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var b=0,E=p;b<E.length;b++){var w=E[b];v.addMatcher(w.matcher,w.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var IEt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",APe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=IEt[Math.random()*64|0];return t},OEt=["name","message","stack","code"],cB=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Sde=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),PEt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=OEt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Id(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:lB(kg({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Id(t+"/pending",function(l,c,f){return{payload:void 0,meta:lB(kg({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Id(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||PEt)(l||"Rejected"),meta:lB(kg({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):APe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return iI(this,null,function(){var v,_,b,E,w,x,S;return rI(this,function(P){switch(P.label){case 0:return P.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),$Et(E)?[4,E]:[3,2];case 1:E=P.sent(),P.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(A,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([w,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(A,O){return new cB(A,O)},fulfillWithValue:function(A,O){return new Sde(A,O)}})).then(function(A){if(A instanceof cB)throw A;return A instanceof Sde?i(A.payload,h,l,A.meta):i(A,h,l)})])];case 3:return b=P.sent(),[3,5];case 4:return x=P.sent(),b=x instanceof cB?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition,S||c(b),[2,b]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(kEt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function kEt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function $Et(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var REt=function(e){return e&&typeof e.match=="function"},NEt=function(e,t){return REt(e)?e.match(t):e(t)};function Tde(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return NEt(r,n)})}}var oK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},NU=function(){},IPe=function(e,t){return t===void 0&&(t=NU),e.catch(t),e},OPe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Bb=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},DEt="task",PPe="listener",kPe="completed",aK="cancelled",MEt="task-"+aK,LEt="task-"+kPe,$Pe=PPe+"-"+aK,FEt=PPe+"-"+kPe,a4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=DEt+" "+aK+" (reason: "+t+")"}return e}(),jb=function(e){if(e.aborted)throw new a4(e.reason)};function RPe(e,t){var n=NU;return new Promise(function(r,i){var s=function(){return i(new a4(e.reason))};if(e.aborted){s();return}n=OPe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=NU})}var BEt=function(e,t){return iI(void 0,null,function(){var n,r;return rI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof a4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},ND=function(e){return function(t){return IPe(RPe(e,t).then(function(n){return jb(e),n}))}},NPe=function(e){var t=ND(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},jEt=Object.assign,Cde={},sI="listenerMiddleware",zEt=function(e){var t=function(n){return OPe(e,function(){return Bb(n,e.reason)})};return function(n){oK(n,"taskExecutor");var r=new AbortController;t(r);var i=BEt(function(){return iI(void 0,null,function(){var s;return rI(this,function(o){switch(o.label){case 0:return jb(e),jb(r.signal),[4,n({pause:ND(r.signal),delay:NPe(r.signal),signal:r.signal})];case 1:return s=o.sent(),jb(r.signal),[2,s]}})})},function(){return Bb(r,LEt)});return{result:ND(e)(i),cancel:function(){Bb(r,MEt)}}}},UEt=function(e,t){var n=function(r,i){return iI(void 0,null,function(){var s,o,a,u;return rI(this,function(l){switch(l.label){case 0:jb(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,RPe(t,Promise.race(a))];case 2:return u=l.sent(),jb(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return IPe(n(r,i))}},DPe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Id(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return oK(s,"options.listener"),{predicate:i,type:t,effect:s}},VEt=function(e){var t=DPe(e),n=t.type,r=t.predicate,i=t.effect,s=APe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},DU=function(e){e.pending.forEach(function(t){Bb(t,$Pe)})},HEt=function(e){return function(){e.forEach(DU),e.clear()}},Ade=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},qEt=Id(sI+"/add"),WEt=Id(sI+"/removeAll"),GEt=Id(sI+"/remove"),YEt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,yC([sI+"/error"],e))};function KEt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?YEt:i;oK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&DU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=VEt(h)),o(p)},l=function(h){var p=DPe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var b=typeof m=="string"?_.type===m:_.predicate===y;return b&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&DU(v)),!!v},c=function(h,p,m,g){return iI(t,null,function(){var y,v,_;return rI(this,function(b){switch(b.label){case 0:y=new AbortController,v=UEt(u,y.signal),b.label=1;case 1:return b.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,jEt({},m,{getOriginalState:g,condition:function(E,w){return v(E,w).then(Boolean)},take:v,delay:NPe(y.signal),pause:ND(y.signal),extra:r,signal:y.signal,fork:zEt(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(E,w,x){E!==y&&(Bb(E,$Pe),x.delete(E))})}})))];case 2:return b.sent(),[3,5];case 3:return _=b.sent(),_ instanceof a4||Ade(s,_,{raisedBy:"effect"}),[3,5];case 4:return Bb(y,FEt),h.pending.delete(y),[7];case 5:return[2]}})})},f=HEt(n),d=function(h){return function(p){return function(m){if(qEt.match(m))return u(m.payload);if(WEt.match(m)){f();return}if(GEt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Cde)throw new Error(sI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),b=Array.from(n.values()),E=0,w=b;E<w.length;E++){var x=w[E],S=!1;try{S=x.predicate(m,_,g)}catch(P){S=!1,Ade(s,P,{raisedBy:"predicate"})}S&&c(x,m,h,y)}}finally{g=Cde}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Ide;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);eEt();function q1(e){return e.components.flatMap(t=>typeof t=="string"?t:q1(t))}function MPe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+q1(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+q1(e).length-1}];r+=1}else{const o=MPe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function LPe(e,t){const n=MPe(e,t,0);return typeof n=="number"?null:n}function FPe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=FPe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function XEt(e,t){const n=FPe(e,t,0);return n.found?n.distance:-1}function BPe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...BPe(i,`${t}-${s}`))}),n}async function QEt(e,t,n,r,i,s){const o=q1(n),a={...o.map(h=>({[h]:{}}))},u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:i||a,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=CPe({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:b}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:b}}}});return{store:SPe({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const jPe=C.createContext(null);function ah(){return C.useContext(jPe).actions}const uh=mPe,Sf=Bwt;function JEt(e){return Sf(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function lh(){return Sf(e=>q1(e.sequence))}var DD={exports:{}};DD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",b="[object RegExp]",E="[object Set]",w="[object String]",x="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",D="[object Int8Array]",R="[object Int16Array]",N="[object Int32Array]",L="[object Uint8Array]",V="[object Uint8ClampedArray]",j="[object Uint16Array]",H="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,k=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,q={};q[O]=q[z]=q[D]=q[R]=q[N]=q[L]=q[V]=q[j]=q[H]=!0,q[a]=q[u]=q[P]=q[c]=q[A]=q[f]=q[d]=q[h]=q[m]=q[g]=q[v]=q[b]=q[E]=q[w]=q[S]=!1;var F=typeof cu=="object"&&cu&&cu.Object===Object&&cu,B=typeof self=="object"&&self&&self.Object===Object&&self,Q=F||B||Function("return this")(),se=t&&!t.nodeType&&t,ae=se&&!0&&e&&!e.nodeType&&e,ce=ae&&ae.exports===se,le=ce&&F.process,ge=function(){try{var Z=ae&&ae.require&&ae.require("util").types;return Z||le&&le.binding&&le.binding("util")}catch{}}(),ue=ge&&ge.isTypedArray;function Fe(Z,de,be){switch(be.length){case 0:return Z.call(de);case 1:return Z.call(de,be[0]);case 2:return Z.call(de,be[0],be[1]);case 3:return Z.call(de,be[0],be[1],be[2])}return Z.apply(de,be)}function ke(Z,de){for(var be=-1,vt=Array(Z);++be<Z;)vt[be]=de(be);return vt}function Ge(Z){return function(de){return Z(de)}}function Re(Z,de){return Z==null?void 0:Z[de]}function Oe(Z,de){return function(be){return Z(de(be))}}var Me=Array.prototype,Ut=Function.prototype,Qe=Object.prototype,je=Q["__core-js_shared__"],xt=Ut.toString,et=Qe.hasOwnProperty,ft=function(){var Z=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),dt=Qe.toString,jt=xt.call(Object),Dn=RegExp("^"+xt.call(et).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ce?Q.Buffer:void 0,_e=Q.Symbol,Pe=Q.Uint8Array,it=he?he.allocUnsafe:void 0,Ye=Oe(Object.getPrototypeOf,Object),ut=Object.create,tt=Qe.propertyIsEnumerable,wt=Me.splice,In=_e?_e.toStringTag:void 0,Wt=function(){try{var Z=He(Object,"defineProperty");return Z({},"",{}),Z}catch{}}(),Vt=he?he.isBuffer:void 0,hr=Math.max,Yn=Date.now,Lu=He(Q,"Map"),Lr=He(Object,"create"),fs=function(){function Z(){}return function(de){if(!ay(de))return{};if(ut)return ut(de);Z.prototype=de;var be=new Z;return Z.prototype=void 0,be}}();function ri(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var vt=Z[de];this.set(vt[0],vt[1])}}function Ti(){this.__data__=Lr?Lr(null):{},this.size=0}function qr(Z){var de=this.has(Z)&&delete this.__data__[Z];return this.size-=de?1:0,de}function yr(Z){var de=this.__data__;if(Lr){var be=de[Z];return be===r?void 0:be}return et.call(de,Z)?de[Z]:void 0}function _t(Z){var de=this.__data__;return Lr?de[Z]!==void 0:et.call(de,Z)}function Fr(Z,de){var be=this.__data__;return this.size+=this.has(Z)?0:1,be[Z]=Lr&&de===void 0?r:de,this}ri.prototype.clear=Ti,ri.prototype.delete=qr,ri.prototype.get=yr,ri.prototype.has=_t,ri.prototype.set=Fr;function Ci(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var vt=Z[de];this.set(vt[0],vt[1])}}function Qi(){this.__data__=[],this.size=0}function to(Z){var de=this.__data__,be=ii(de,Z);if(be<0)return!1;var vt=de.length-1;return be==vt?de.pop():wt.call(de,be,1),--this.size,!0}function qa(Z){var de=this.__data__,be=ii(de,Z);return be<0?void 0:de[be][1]}function ne(Z){return ii(this.__data__,Z)>-1}function J(Z,de){var be=this.__data__,vt=ii(be,Z);return vt<0?(++this.size,be.push([Z,de])):be[vt][1]=de,this}Ci.prototype.clear=Qi,Ci.prototype.delete=to,Ci.prototype.get=qa,Ci.prototype.has=ne,Ci.prototype.set=J;function ie(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var vt=Z[de];this.set(vt[0],vt[1])}}function ve(){this.size=0,this.__data__={hash:new ri,map:new(Lu||Ci),string:new ri}}function ye(Z){var de=ze(this,Z).delete(Z);return this.size-=de?1:0,de}function yt(Z){return ze(this,Z).get(Z)}function Ae(Z){return ze(this,Z).has(Z)}function pt(Z,de){var be=ze(this,Z),vt=be.size;return be.set(Z,de),this.size+=be.size==vt?0:1,this}ie.prototype.clear=ve,ie.prototype.delete=ye,ie.prototype.get=yt,ie.prototype.has=Ae,ie.prototype.set=pt;function Bt(Z){var de=this.__data__=new Ci(Z);this.size=de.size}function At(){this.__data__=new Ci,this.size=0}function Ht(Z){var de=this.__data__,be=de.delete(Z);return this.size=de.size,be}function fn(Z){return this.__data__.get(Z)}function Tr(Z){return this.__data__.has(Z)}function zt(Z,de){var be=this.__data__;if(be instanceof Ci){var vt=be.__data__;if(!Lu||vt.length<n-1)return vt.push([Z,de]),this.size=++be.size,this;be=this.__data__=new ie(vt)}return be.set(Z,de),this.size=be.size,this}Bt.prototype.clear=At,Bt.prototype.delete=Ht,Bt.prototype.get=fn,Bt.prototype.has=Tr,Bt.prototype.set=zt;function pr(Z,de){var be=N8(Z),vt=!be&&h_(Z),Hn=!be&&!vt&&Die(Z),Rr=!be&&!vt&&!Hn&&Lie(Z),oi=be||vt||Hn||Rr,Mn=oi?ke(Z.length,String):[],ai=Mn.length;for(var Cl in Z)(de||et.call(Z,Cl))&&!(oi&&(Cl=="length"||Hn&&(Cl=="offset"||Cl=="parent")||Rr&&(Cl=="buffer"||Cl=="byteLength"||Cl=="byteOffset")||gn(Cl,ai)))&&Mn.push(Cl);return Mn}function Xt(Z,de,be){(be!==void 0&&!d_(Z[de],be)||be===void 0&&!(de in Z))&&ds(Z,de,be)}function er(Z,de,be){var vt=Z[de];(!(et.call(Z,de)&&d_(vt,be))||be===void 0&&!(de in Z))&&ds(Z,de,be)}function ii(Z,de){for(var be=Z.length;be--;)if(d_(Z[be][0],de))return be;return-1}function ds(Z,de,be){de=="__proto__"&&Wt?Wt(Z,de,{configurable:!0,enumerable:!0,value:be,writable:!0}):Z[de]=be}var zi=De();function da(Z){return Z==null?Z===void 0?x:y:In&&In in Object(Z)?Ze(Z):oy(Z)}function no(Z){return zx(Z)&&da(Z)==a}function vi(Z){if(!ay(Z)||Ai(Z))return!1;var de=M8(Z)?Dn:k;return de.test(R8(Z))}function bt(Z){return zx(Z)&&Mie(Z.length)&&!!q[da(Z)]}function wn(Z){if(!ay(Z))return Ga(Z);var de=si(Z),be=[];for(var vt in Z)vt=="constructor"&&(de||!et.call(Z,vt))||be.push(vt);return be}function Br(Z,de,be,vt,Hn){Z!==de&&zi(de,function(Rr,oi){if(Hn||(Hn=new Bt),ay(Rr))$s(Z,de,oi,be,Br,vt,Hn);else{var Mn=vt?vt(Bx(Z,oi),Rr,oi+"",Z,de,Hn):void 0;Mn===void 0&&(Mn=Rr),Xt(Z,oi,Mn)}},Fie)}function $s(Z,de,be,vt,Hn,Rr,oi){var Mn=Bx(Z,be),ai=Bx(de,be),Cl=oi.get(ai);if(Cl){Xt(Z,be,Cl);return}var Fu=Rr?Rr(Mn,ai,be+"",Z,de,oi):void 0,Ux=Fu===void 0;if(Ux){var L8=N8(ai),F8=!L8&&Die(ai),jie=!L8&&!F8&&Lie(ai);Fu=ai,L8||F8||jie?N8(Mn)?Fu=Mn:Dqe(Mn)?Fu=pe(Mn):F8?(Ux=!1,Fu=te(ai,!0)):jie?(Ux=!1,Fu=fe(ai,!0)):Fu=[]:Mqe(ai)||h_(ai)?(Fu=Mn,h_(Mn)?Fu=Lqe(Mn):(!ay(Mn)||M8(Mn))&&(Fu=St(ai))):Ux=!1}Ux&&(oi.set(ai,Fu),Hn(Fu,ai,vt,Rr,oi),oi.delete(ai)),Xt(Z,be,Fu)}function Wa(Z,de){return jx(Fx(Z,de,Bie),Z+"")}var W=Wt?function(Z,de){return Wt(Z,"toString",{configurable:!0,enumerable:!1,value:Bqe(de),writable:!0})}:Bie;function te(Z,de){if(de)return Z.slice();var be=Z.length,vt=it?it(be):new Z.constructor(be);return Z.copy(vt),vt}function K(Z){var de=new Z.constructor(Z.byteLength);return new Pe(de).set(new Pe(Z)),de}function fe(Z,de){var be=de?K(Z.buffer):Z.buffer;return new Z.constructor(be,Z.byteOffset,Z.length)}function pe(Z,de){var be=-1,vt=Z.length;for(de||(de=Array(vt));++be<vt;)de[be]=Z[be];return de}function oe(Z,de,be,vt){var Hn=!be;be||(be={});for(var Rr=-1,oi=de.length;++Rr<oi;){var Mn=de[Rr],ai=vt?vt(be[Mn],Z[Mn],Mn,be,Z):void 0;ai===void 0&&(ai=Z[Mn]),Hn?ds(be,Mn,ai):er(be,Mn,ai)}return be}function Se(Z){return Wa(function(de,be){var vt=-1,Hn=be.length,Rr=Hn>1?be[Hn-1]:void 0,oi=Hn>2?be[2]:void 0;for(Rr=Z.length>3&&typeof Rr=="function"?(Hn--,Rr):void 0,oi&&tr(be[0],be[1],oi)&&(Rr=Hn<3?void 0:Rr,Hn=1),de=Object(de);++vt<Hn;){var Mn=be[vt];Mn&&Z(de,Mn,vt,Rr)}return de})}function De(Z){return function(de,be,vt){for(var Hn=-1,Rr=Object(de),oi=vt(de),Mn=oi.length;Mn--;){var ai=oi[Z?Mn:++Hn];if(be(Rr[ai],ai,Rr)===!1)break}return de}}function ze(Z,de){var be=Z.__data__;return ur(de)?be[typeof de=="string"?"string":"hash"]:be.map}function He(Z,de){var be=Re(Z,de);return vi(be)?be:void 0}function Ze(Z){var de=et.call(Z,In),be=Z[In];try{Z[In]=void 0;var vt=!0}catch{}var Hn=dt.call(Z);return vt&&(de?Z[In]=be:delete Z[In]),Hn}function St(Z){return typeof Z.constructor=="function"&&!si(Z)?fs(Ye(Z)):{}}function gn(Z,de){var be=typeof Z;return de=de??o,!!de&&(be=="number"||be!="symbol"&&$.test(Z))&&Z>-1&&Z%1==0&&Z<de}function tr(Z,de,be){if(!ay(be))return!1;var vt=typeof de;return(vt=="number"?D8(be)&&gn(de,be.length):vt=="string"&&de in be)?d_(be[de],Z):!1}function ur(Z){var de=typeof Z;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?Z!=="__proto__":Z===null}function Ai(Z){return!!ft&&ft in Z}function si(Z){var de=Z&&Z.constructor,be=typeof de=="function"&&de.prototype||Qe;return Z===be}function Ga(Z){var de=[];if(Z!=null)for(var be in Object(Z))de.push(be);return de}function oy(Z){return dt.call(Z)}function Fx(Z,de,be){return de=hr(de===void 0?Z.length-1:de,0),function(){for(var vt=arguments,Hn=-1,Rr=hr(vt.length-de,0),oi=Array(Rr);++Hn<Rr;)oi[Hn]=vt[de+Hn];Hn=-1;for(var Mn=Array(de+1);++Hn<de;)Mn[Hn]=vt[Hn];return Mn[de]=be(oi),Fe(Z,this,Mn)}}function Bx(Z,de){if(!(de==="constructor"&&typeof Z[de]=="function")&&de!="__proto__")return Z[de]}var jx=Nie(W);function Nie(Z){var de=0,be=0;return function(){var vt=Yn(),Hn=s-(vt-be);if(be=vt,Hn>0){if(++de>=i)return arguments[0]}else de=0;return Z.apply(void 0,arguments)}}function R8(Z){if(Z!=null){try{return xt.call(Z)}catch{}try{return Z+""}catch{}}return""}function d_(Z,de){return Z===de||Z!==Z&&de!==de}var h_=no(function(){return arguments}())?no:function(Z){return zx(Z)&&et.call(Z,"callee")&&!tt.call(Z,"callee")},N8=Array.isArray;function D8(Z){return Z!=null&&Mie(Z.length)&&!M8(Z)}function Dqe(Z){return zx(Z)&&D8(Z)}var Die=Vt||jqe;function M8(Z){if(!ay(Z))return!1;var de=da(Z);return de==h||de==p||de==l||de==_}function Mie(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function ay(Z){var de=typeof Z;return Z!=null&&(de=="object"||de=="function")}function zx(Z){return Z!=null&&typeof Z=="object"}function Mqe(Z){if(!zx(Z)||da(Z)!=v)return!1;var de=Ye(Z);if(de===null)return!0;var be=et.call(de,"constructor")&&de.constructor;return typeof be=="function"&&be instanceof be&&xt.call(be)==jt}var Lie=ue?Ge(ue):bt;function Lqe(Z){return oe(Z,Fie(Z))}function Fie(Z){return D8(Z)?pr(Z,!0):wn(Z)}var Fqe=Se(function(Z,de,be){Br(Z,de,be)});function Bqe(Z){return function(){return Z}}function Bie(Z){return Z}function jqe(){return!1}e.exports=Fqe})(DD,DD.exports);var ZEt=DD.exports;const uK=bl(ZEt);function E1(e){return structuredClone(e)}function lK(){const{answers:e}=Sf(i=>i),t=_c(),r=`${lh()[t]}_${t}`;return e[r]}const zPe=C.createContext(null);function ext(){const e=C.useContext(zPe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Zg(){return Sf(e=>e.config)}function Ode(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function UPe(){const e=_c(),t=lh(),r=`${t[e]}_${e}`,{trialValidation:i,sequence:s,answers:o}=Sf(E=>E),a=lK(),u=uh(),{saveTrialAnswer:l,setIframeAnswers:c}=ah(),{storageEngine:f}=ja(),h=!JEt(r),p=a==null?void 0:a.answer,m=tm(),g=Zg(),y=o4(),v=C.useMemo(()=>Date.now(),[]),_=ext(),b=C.useCallback(()=>{const E=E1(i[r]),w=Object.values(E).reduce((R,N)=>Object.hasOwn(N,"values")?{...R,...N.values}:R,{}),{provenanceGraph:x}=E,S=Date.now(),P=_&&"current"in _&&_.current?_.current.splice(0,_.current.length):[];Object.keys(p||{}).length===0&&(u(l({identifier:r,answer:w,startTime:v,endTime:S,provenanceGraph:x,windowEvents:P})),f&&f.saveAnswer(r,{answer:w,startTime:v,endTime:S,provenanceGraph:x,windowEvents:P}),u(c({})));let A=e+1;const O=LPe(s,e),z=O!==null&&O.some(R=>Object.hasOwn(R.currentBlock,"skip")&&R.currentBlock.skip!==void 0),D={...o,[r]:{answer:w,startTime:v,endTime:S,provenanceGraph:x,windowEvents:P}};z&&[...O.flatMap(N=>N.currentBlock.skip?N.currentBlock.skip.map(L=>({...L,firstIndex:N.firstIndex,lastIndex:N.lastIndex})):[])].some(N=>{let L=!1;const V=Object.fromEntries(Object.entries(D).filter(([H])=>{const U=parseInt(H.slice(H.lastIndexOf("_")+1),10);return U>=N.firstIndex&&U<=e})),j=N.check!=="block"?Object.entries(V).filter(([H])=>H.slice(0,H.lastIndexOf("_"))===N.name):Object.entries(V);if(j.length===0)return!1;if(j.some(([H,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(N,null,2)}`);if(N.check==="response"||N.check==="responses"){const[H,U]=j[0];N.check==="response"?L=N.value!==U.answer[N.responseId]:L=!Ode(U.answer,H,g.components[H.slice(0,H.lastIndexOf("_"))],g)}else if(N.check==="block"||N.check==="repeatedComponent"){if(j.length<N.value)return!1;const H=j.map(([$,q])=>Ode(q.answer,$,g.components[$.slice(0,$.lastIndexOf("_"))],g)),U=H.filter($=>$).length,k=H.length-U;L=N.condition==="numCorrect"&&U===N.value||N.condition==="numIncorrect"&&k===N.value}if(L){const H=t.indexOf(N.to),U=H===-1?XEt(s,N.to):-1;return A=H===-1?U:H,!0}return!1}),m(`/${y}/${A}${window.location.search}`)},[i,r,_,p,e,s,o,v,m,y,u,l,f,c,g,t]);return{isNextDisabled:h,goToNextStep:b}}function txt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=UPe(),o=C.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return I.jsx(Yr,{type:"submit",disabled:t||i,onClick:o,children:e})}var cK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const MU=bl(cK);function LU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var nxt=Object.defineProperty,Pde=Object.getOwnPropertySymbols,rxt=Object.prototype.hasOwnProperty,ixt=Object.prototype.propertyIsEnumerable,kde=(e,t,n)=>t in e?nxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sxt=(e,t)=>{for(var n in t||(t={}))rxt.call(t,n)&&kde(e,n,t[n]);if(Pde)for(var n of Pde(t))ixt.call(t,n)&&kde(e,n,t[n]);return e};function VPe(e,t){if(t===null||typeof t!="object")return{};const n=sxt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const oxt="__MANTINE_FORM_INDEX__";function $de(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${oxt}`)):!1:!1}function Rde(e,t,n){typeof n.value=="object"&&(n.value=db(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function db(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(db(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(db(a),db(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(db(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Rde(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Rde(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function HPe(e){return typeof e!="string"?[]:e.split(".")}function u4(e,t,n){const r=HPe(e);if(r.length===0)return n;const i=db(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Wh(e,t){const n=HPe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function Nde(e){const t=LU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function FU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Wh(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>FU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||FU(o,t,a,i)),i},r)}function BU(e,t){return Nde(typeof e=="function"?e(t):FU(e,t))}function bP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=BU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function axt(e,{from:t,to:n},r){const i=Wh(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),u4(e,s,r)}var uxt=Object.defineProperty,Dde=Object.getOwnPropertySymbols,lxt=Object.prototype.hasOwnProperty,cxt=Object.prototype.propertyIsEnumerable,Mde=(e,t,n)=>t in e?uxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fxt=(e,t)=>{for(var n in t||(t={}))lxt.call(t,n)&&Mde(e,n,t[n]);if(Dde)for(var n of Dde(t))cxt.call(t,n)&&Mde(e,n,t[n]);return e};function dxt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=fxt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function hxt(e,t,n){const r=Wh(e,n);return Array.isArray(r)?u4(e,r.filter((i,s)=>s!==t),n):n}var pxt=Object.defineProperty,Lde=Object.getOwnPropertySymbols,mxt=Object.prototype.hasOwnProperty,gxt=Object.prototype.propertyIsEnumerable,Fde=(e,t,n)=>t in e?pxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yxt=(e,t)=>{for(var n in t||(t={}))mxt.call(t,n)&&Fde(e,n,t[n]);if(Lde)for(var n of Lde(t))gxt.call(t,n)&&Fde(e,n,t[n]);return e};function Bde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function jde(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=VPe(`${i}.${t}`,s));const o=yxt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Bde(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Bde(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function vxt(e,t,n,r){const i=Wh(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),u4(e,s,r)}function zde(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function _xt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var bxt=Object.defineProperty,wxt=Object.defineProperties,Ext=Object.getOwnPropertyDescriptors,Ude=Object.getOwnPropertySymbols,xxt=Object.prototype.hasOwnProperty,Sxt=Object.prototype.propertyIsEnumerable,Vde=(e,t,n)=>t in e?bxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xm=(e,t)=>{for(var n in t||(t={}))xxt.call(t,n)&&Vde(e,n,t[n]);if(Ude)for(var n of Ude(t))Sxt.call(t,n)&&Vde(e,n,t[n]);return e},fB=(e,t)=>wxt(e,Ext(t));function qPe({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=C.useState(r),[f,d]=C.useState(n),[h,p]=C.useState(e),[m,g]=C.useState(LU(t)),y=C.useRef(e),v=B=>{y.current=B},_=C.useCallback(()=>c({}),[]),b=B=>{const Q=B?xm(xm({},h),B):h;v(Q),d({})},E=C.useCallback(B=>g(Q=>LU(typeof B=="function"?B(Q):B)),[]),w=C.useCallback(()=>g({}),[]),x=C.useCallback(()=>{p(e),w(),v(e),d({}),_()},[]),S=C.useCallback((B,Q)=>E(se=>fB(xm({},se),{[B]:Q})),[]),P=C.useCallback(B=>E(Q=>{if(typeof B!="string")return Q;const se=xm({},Q);return delete se[B],se}),[]),A=C.useCallback(B=>d(Q=>{if(typeof B!="string")return Q;const se=VPe(B,Q);return delete se[B],se}),[]),O=C.useCallback((B,Q)=>{const se=$de(B,s);A(B),c(ae=>fB(xm({},ae),{[B]:!0})),p(ae=>{const ce=u4(B,Q,ae);if(se){const le=bP(B,u,ce);le.hasError?S(B,le.error):P(B)}return ce}),!se&&i&&S(B,null)},[]),z=C.useCallback(B=>{p(Q=>{const se=typeof B=="function"?B(Q):B;return xm(xm({},Q),se)}),i&&w()},[]),D=C.useCallback((B,Q)=>{A(B),p(se=>axt(B,Q,se)),g(se=>dxt(B,Q,se))},[]),R=C.useCallback((B,Q)=>{A(B),p(se=>hxt(B,Q,se)),g(se=>jde(B,Q,se,-1))},[]),N=C.useCallback((B,Q,se)=>{A(B),p(ae=>vxt(B,Q,se,ae)),g(ae=>jde(B,se,ae,1))},[]),L=C.useCallback(()=>{const B=BU(u,h);return g(B.errors),B},[h,u]),V=C.useCallback(B=>{const Q=bP(B,u,h);return Q.hasError?S(B,Q.error):P(B),Q},[h,u]),j=(B,{type:Q="input",withError:se=!0,withFocus:ae=!0}={})=>{const le={onChange:_xt(ge=>O(B,ge))};return se&&(le.error=m[B]),Q==="checkbox"?le.checked=Wh(B,h):le.value=Wh(B,h),ae&&(le.onFocus=()=>c(ge=>fB(xm({},ge),{[B]:!0})),le.onBlur=()=>{if($de(B,o)){const ge=bP(B,u,h);ge.hasError?S(B,ge.error):P(B)}}),le},H=(B,Q)=>se=>{se==null||se.preventDefault();const ae=L();ae.hasErrors?Q==null||Q(ae.errors,h,se):B==null||B(a(h),se)},U=B=>a(B||h),k=C.useCallback(B=>{B.preventDefault(),x()},[]),$=B=>{if(B){const se=Wh(B,f);if(typeof se=="boolean")return se;const ae=Wh(B,h),ce=Wh(B,y.current);return!MU(ae,ce)}return Object.keys(f).length>0?zde(f):!MU(h,y.current)},q=C.useCallback(B=>zde(l,B),[l]),F=C.useCallback(B=>B?!bP(B,u,h).hasError:!BU(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:z,setErrors:E,setFieldValue:O,setFieldError:S,clearFieldError:P,clearErrors:w,reset:x,validate:L,validateField:V,reorderListItem:D,removeListItem:R,insertListItem:N,getInputProps:j,onSubmit:H,onReset:k,isDirty:$,isTouched:q,setTouched:c,setDirty:d,resetTouched:_,resetDirty:b,isValid:F,getTransformedValues:U}}function Txt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Cxt(e){return Txt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Axt=new URLSearchParams(window.location.search),Ixt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Axt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Oxt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Pxt(e,t,n){const[r,i]=C.useState(null),s=qPe({initialValues:Ixt(e,n),validate:Oxt(e)});return C.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Fv(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function kxt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return I.jsx(PN.Group,{label:I.jsx(ka,{text:r,required:i}),...n,error:Fv(e,n,s),size:"md",children:I.jsx(ll,{mt:"md",children:s.map(o=>I.jsx(PN,{disabled:t,value:o.value,label:o.label},o.value))})})}function $xt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return I.jsx(CY,{disabled:t,label:I.jsx(ka,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:Fv(e,n,o)})}function Rxt({response:e,answer:t}){const{prompt:n}=e;return I.jsxs(I.Fragment,{children:[I.jsx(ct,{fz:"md",fw:500,children:I.jsx(ka,{text:n})}),I.jsx(w1,{children:Array.isArray(t.value)?t.value.map(r=>I.jsx(w1.Item,{children:r},r)):I.jsx(w1.Item,{children:t.value})})]})}function WPe({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return I.jsxs(aD.Group,{name:`radioInput${e.id}`,label:I.jsx(ka,{text:r,required:i}),size:"md",...n,error:Fv(e,n,s),children:[o?I.jsx(ct,{children:o}):null,I.jsx(ll,{mt:"xs",children:s.map(u=>I.jsx(aD,{disabled:t,value:u.value,label:u.label},u.label))}),I.jsx(ct,{children:a})]},e.id)}function Nxt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return I.jsx(WPe,{disabled:t,response:s,answer:n})}function Dxt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return I.jsx(_Ae,{disabled:t,placeholder:a,label:I.jsx(ka,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:Fv(e,n)})}function Mxt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=Fv(e,n);return I.jsx(as.Wrapper,{label:I.jsx(ka,{text:r,required:i}),error:o,size:"md",children:I.jsx(OY,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function Lxt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return I.jsx(C6,{disabled:t,placeholder:r,label:I.jsx(ka,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:Fv(e,n)})}function Fxt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return I.jsx(ECe,{disabled:t,placeholder:r,label:I.jsx(ka,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:Fv(e,n)})}function Bxt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=BG(),o=C.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return I.jsxs(st,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&I.jsx(Dxt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&I.jsx(Lxt,{response:e,disabled:o,answer:r}),e.type==="longText"&&I.jsx(Fxt,{response:e,disabled:o,answer:r}),e.type==="likert"&&I.jsx(Nxt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&I.jsx($xt,{response:e,disabled:o,answer:r}),e.type==="slider"&&I.jsx(Mxt,{response:e,disabled:o,answer:r}),e.type==="radio"&&I.jsx(WPe,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&I.jsx(kxt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&I.jsx(Rxt,{response:e,answer:r})]})}function MD({config:e,location:t,status:n,style:r}){var b;const i=_c(),s=lh()[i],o=n==null?void 0:n.answer,a=e,u=C.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(w=>w.location?w.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=uh(),{updateResponseBlockValidation:c}=ah(),f=Pxt(u,i,o||{}),[d,h]=C.useState(void 0),[p,m]=C.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Sf(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((b=a==null?void 0:a.correctAnswer)==null?void 0:b.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return C.useEffect(()=>{const E=u.find(w=>w.type==="iframe");if(g&&E){const w=E.id;f.setValues({...f.values,[w]:g[w]})}},[g]),C.useEffect(()=>{y&&h(y)},[y]),C.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:E1(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),I.jsxs("div",{style:r,children:[u.map(E=>{var w,x;return I.jsx(M.Fragment,{children:E.hidden?"":I.jsxs(I.Fragment,{children:[I.jsx(Bxt,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E}),v&&p&&I.jsx(ct,{children:`The correct answer is: ${(x=(w=a.correctAnswer)==null?void 0:w.find(S=>S.id===E.id))==null?void 0:x.answer}`})]})},`${E.id}-${i}`)}),I.jsxs(ll,{position:"right",spacing:"xs",mt:"xl",children:[v&&_&&I.jsx(Yr,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),_&&I.jsx(txt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const uS="@REVISIT_COMMS",jxt={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function zxt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=ah(),r=uh(),i=mPe(),s=C.useRef(null),o=C.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=_c(),u=lh()[a],l=tm(),c=C.useCallback((f,d)=>{var h,p;(p=(h=s.current)==null?void 0:h.contentWindow)==null||p.postMessage({error:!1,type:`${uS}/${f}`,iframeId:o,message:d},"*")},[s,o]);return C.useEffect(()=>{const f=d=>{const{data:h}=d;if(typeof h=="object"&&o===h.iframeId)switch(h.type){case`${uS}/WINDOW_READY`:e.parameters&&c("STUDY_DATA",e.parameters);break;case`${uS}/READY`:s.current&&(s.current.style.height=`${h.message.documentHeight}px`);break;case`${uS}/ANSWERS`:r(t(h.message));break;case`${uS}/PROVENANCE`:r(n(h.message));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[r,a,i,o,l,e,c,t,n]),I.jsx("div",{children:I.jsx("iframe",{ref:s,src:`${hc}${e.path}?trialid=${u}&id=${o}`,style:jxt})})}const Uxt={maxWidth:"100%"};function Vxt({currentConfig:e}){const t={...Uxt,...e.style};return I.jsx(Nv,{mx:"auto",src:`${hc}${e.path}`,style:t})}function Hde(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class qde extends Map{constructor(t,n=KPe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(jU(this,t))}has(t){return super.has(jU(this,t))}set(t,n){return super.set(GPe(this,t),n)}delete(t){return super.delete(YPe(this,t))}}class LD extends Set{constructor(t,n=KPe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(jU(this,t))}add(t){return super.add(GPe(this,t))}delete(t){return super.delete(YPe(this,t))}}function jU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function GPe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function YPe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function KPe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Hxt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var qxt={value:()=>{}};function l4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new o$(n)}function o$(e){this._=e}function Wxt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}o$.prototype=l4.prototype={constructor:o$,on:function(e,t){var n=this._,r=Wxt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Gxt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Wde(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Wde(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new o$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Gxt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Wde(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=qxt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var zU="http://www.w3.org/1999/xhtml";const Gde={svg:"http://www.w3.org/2000/svg",xhtml:zU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function c4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gde.hasOwnProperty(t)?{space:Gde[t],local:e}:e}function Yxt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===zU&&t.documentElement.namespaceURI===zU?t.createElement(e):t.createElementNS(n,e)}}function Kxt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function XPe(e){var t=c4(e);return(t.local?Kxt:Yxt)(t)}function Xxt(){}function fK(e){return e==null?Xxt:function(){return this.querySelector(e)}}function Qxt(e){typeof e!="function"&&(e=fK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new $a(r,this._parents)}function QPe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Jxt(){return[]}function JPe(e){return e==null?Jxt:function(){return this.querySelectorAll(e)}}function Zxt(e){return function(){return QPe(e.apply(this,arguments))}}function eSt(e){typeof e=="function"?e=Zxt(e):e=JPe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new $a(r,i)}function ZPe(e){return function(){return this.matches(e)}}function eke(e){return function(t){return t.matches(e)}}var tSt=Array.prototype.find;function nSt(e){return function(){return tSt.call(this.children,e)}}function rSt(){return this.firstElementChild}function iSt(e){return this.select(e==null?rSt:nSt(typeof e=="function"?e:eke(e)))}var sSt=Array.prototype.filter;function oSt(){return Array.from(this.children)}function aSt(e){return function(){return sSt.call(this.children,e)}}function uSt(e){return this.selectAll(e==null?oSt:aSt(typeof e=="function"?e:eke(e)))}function lSt(e){typeof e!="function"&&(e=ZPe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new $a(r,this._parents)}function tke(e){return new Array(e.length)}function cSt(){return new $a(this._enter||this._groups.map(tke),this._parents)}function FD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}FD.prototype={constructor:FD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fSt(e){return function(){return e}}function dSt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new FD(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function hSt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new FD(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function pSt(e){return e.__data__}function mSt(e,t){if(!arguments.length)return Array.from(this,pSt);var n=t?hSt:dSt,r=this._parents,i=this._groups;typeof e!="function"&&(e=fSt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=gSt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,b,E;v<p;++v)if(b=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);b._next=E||null}}return o=new $a(o,r),o._enter=a,o._exit=u,o}function gSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ySt(){return new $a(this._exit||this._groups.map(tke),this._parents)}function vSt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function _St(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new $a(a,this._parents)}function bSt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function wSt(e){e||(e=ESt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new $a(i,this._parents).order()}function ESt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xSt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function SSt(){return Array.from(this)}function TSt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function CSt(){let e=0;for(const t of this)++e;return e}function ASt(){return!this.node()}function ISt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function OSt(e){return function(){this.removeAttribute(e)}}function PSt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kSt(e,t){return function(){this.setAttribute(e,t)}}function $St(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function RSt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function NSt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function DSt(e,t){var n=c4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?PSt:OSt:typeof t=="function"?n.local?NSt:RSt:n.local?$St:kSt)(n,t))}function nke(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MSt(e){return function(){this.style.removeProperty(e)}}function LSt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function FSt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function BSt(e,t,n){return arguments.length>1?this.each((t==null?MSt:typeof t=="function"?FSt:LSt)(e,t,n??"")):xw(this.node(),e)}function xw(e,t){return e.style.getPropertyValue(t)||nke(e).getComputedStyle(e,null).getPropertyValue(t)}function jSt(e){return function(){delete this[e]}}function zSt(e,t){return function(){this[e]=t}}function USt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function VSt(e,t){return arguments.length>1?this.each((t==null?jSt:typeof t=="function"?USt:zSt)(e,t)):this.node()[e]}function rke(e){return e.trim().split(/^|\s+/)}function dK(e){return e.classList||new ike(e)}function ike(e){this._node=e,this._names=rke(e.getAttribute("class")||"")}ike.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ske(e,t){for(var n=dK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function oke(e,t){for(var n=dK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function HSt(e){return function(){ske(this,e)}}function qSt(e){return function(){oke(this,e)}}function WSt(e,t){return function(){(t.apply(this,arguments)?ske:oke)(this,e)}}function GSt(e,t){var n=rke(e+"");if(arguments.length<2){for(var r=dK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?WSt:t?HSt:qSt)(n,t))}function YSt(){this.textContent=""}function KSt(e){return function(){this.textContent=e}}function XSt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function QSt(e){return arguments.length?this.each(e==null?YSt:(typeof e=="function"?XSt:KSt)(e)):this.node().textContent}function JSt(){this.innerHTML=""}function ZSt(e){return function(){this.innerHTML=e}}function eTt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tTt(e){return arguments.length?this.each(e==null?JSt:(typeof e=="function"?eTt:ZSt)(e)):this.node().innerHTML}function nTt(){this.nextSibling&&this.parentNode.appendChild(this)}function rTt(){return this.each(nTt)}function iTt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sTt(){return this.each(iTt)}function oTt(e){var t=typeof e=="function"?e:XPe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function aTt(){return null}function uTt(e,t){var n=typeof e=="function"?e:XPe(e),r=t==null?aTt:typeof t=="function"?t:fK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lTt(){var e=this.parentNode;e&&e.removeChild(this)}function cTt(){return this.each(lTt)}function fTt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dTt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hTt(e){return this.select(e?dTt:fTt)}function pTt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mTt(e){return function(t){e.call(this,t,this.__data__)}}function gTt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function yTt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function vTt(e,t,n){return function(){var r=this.__on,i,s=mTt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function _Tt(e,t,n){var r=gTt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?vTt:yTt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ake(e,t,n){var r=nke(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bTt(e,t){return function(){return ake(this,e,t)}}function wTt(e,t){return function(){return ake(this,e,t.apply(this,arguments))}}function ETt(e,t){return this.each((typeof t=="function"?wTt:bTt)(e,t))}function*xTt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var hK=[null];function $a(e,t){this._groups=e,this._parents=t}function oI(){return new $a([[document.documentElement]],hK)}function STt(){return this}$a.prototype=oI.prototype={constructor:$a,select:Qxt,selectAll:eSt,selectChild:iSt,selectChildren:uSt,filter:lSt,data:mSt,enter:cSt,exit:ySt,join:vSt,merge:_St,selection:STt,order:bSt,sort:wSt,call:xSt,nodes:SSt,node:TSt,size:CSt,empty:ASt,each:ISt,attr:DSt,style:BSt,property:VSt,classed:GSt,text:QSt,html:tTt,raise:rTt,lower:sTt,append:oTt,insert:uTt,remove:cTt,clone:hTt,datum:pTt,on:_Tt,dispatch:ETt,[Symbol.iterator]:xTt};function es(e){return typeof e=="string"?new $a([[document.querySelector(e)]],[document.documentElement]):new $a([[e]],hK)}function TTt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function UU(e,t){if(e=TTt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function CTt(e){return typeof e=="string"?new $a([document.querySelectorAll(e)],[document.documentElement]):new $a([QPe(e)],hK)}const VU={capture:!0,passive:!1};function HU(e){e.preventDefault(),e.stopImmediatePropagation()}function ATt(e){var t=e.document.documentElement,n=es(e).on("dragstart.drag",HU,VU);"onselectstart"in t?n.on("selectstart.drag",HU,VU):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ITt(e,t){var n=e.document.documentElement,r=es(e).on("dragstart.drag",null);t&&(r.on("click.drag",HU,VU),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function UE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function aI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function F0(){}var W1=.7,Sw=1/W1,zb="\\s*([+-]?\\d+)\\s*",vC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OTt=/^#([0-9a-f]{3,8})$/,PTt=new RegExp(`^rgb\\(${zb},${zb},${zb}\\)$`),kTt=new RegExp(`^rgb\\(${Od},${Od},${Od}\\)$`),$Tt=new RegExp(`^rgba\\(${zb},${zb},${zb},${vC}\\)$`),RTt=new RegExp(`^rgba\\(${Od},${Od},${Od},${vC}\\)$`),NTt=new RegExp(`^hsl\\(${vC},${Od},${Od}\\)$`),DTt=new RegExp(`^hsla\\(${vC},${Od},${Od},${vC}\\)$`),Yde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UE(F0,G1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kde,formatHex:Kde,formatHex8:MTt,formatHsl:LTt,formatRgb:Xde,toString:Xde});function Kde(){return this.rgb().formatHex()}function MTt(){return this.rgb().formatHex8()}function LTt(){return uke(this).formatHsl()}function Xde(){return this.rgb().formatRgb()}function G1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=OTt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qde(t):n===3?new Us(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=PTt.exec(e))?new Us(t[1],t[2],t[3],1):(t=kTt.exec(e))?new Us(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$Tt.exec(e))?wP(t[1],t[2],t[3],t[4]):(t=RTt.exec(e))?wP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=NTt.exec(e))?ehe(t[1],t[2]/100,t[3]/100,1):(t=DTt.exec(e))?ehe(t[1],t[2]/100,t[3]/100,t[4]):Yde.hasOwnProperty(e)?Qde(Yde[e]):e==="transparent"?new Us(NaN,NaN,NaN,0):null}function Qde(e){return new Us(e>>16&255,e>>8&255,e&255,1)}function wP(e,t,n,r){return r<=0&&(e=t=n=NaN),new Us(e,t,n,r)}function pK(e){return e instanceof F0||(e=G1(e)),e?(e=e.rgb(),new Us(e.r,e.g,e.b,e.opacity)):new Us}function e0(e,t,n,r){return arguments.length===1?pK(e):new Us(e,t,n,r??1)}function Us(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}UE(Us,e0,aI(F0,{brighter(e){return e=e==null?Sw:Math.pow(Sw,e),new Us(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?W1:Math.pow(W1,e),new Us(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Us(x1(this.r),x1(this.g),x1(this.b),BD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jde,formatHex:Jde,formatHex8:FTt,formatRgb:Zde,toString:Zde}));function Jde(){return`#${Zy(this.r)}${Zy(this.g)}${Zy(this.b)}`}function FTt(){return`#${Zy(this.r)}${Zy(this.g)}${Zy(this.b)}${Zy((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zde(){const e=BD(this.opacity);return`${e===1?"rgb(":"rgba("}${x1(this.r)}, ${x1(this.g)}, ${x1(this.b)}${e===1?")":`, ${e})`}`}function BD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function x1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zy(e){return e=x1(e),(e<16?"0":"")+e.toString(16)}function ehe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qc(e,t,n,r)}function uke(e){if(e instanceof qc)return new qc(e.h,e.s,e.l,e.opacity);if(e instanceof F0||(e=G1(e)),!e)return new qc;if(e instanceof qc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new qc(o,a,u,e.opacity)}function jD(e,t,n,r){return arguments.length===1?uke(e):new qc(e,t,n,r??1)}function qc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}UE(qc,jD,aI(F0,{brighter(e){return e=e==null?Sw:Math.pow(Sw,e),new qc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?W1:Math.pow(W1,e),new qc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Us(dB(e>=240?e-240:e+120,i,r),dB(e,i,r),dB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qc(the(this.h),EP(this.s),EP(this.l),BD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=BD(this.opacity);return`${e===1?"hsl(":"hsla("}${the(this.h)}, ${EP(this.s)*100}%, ${EP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function the(e){return e=(e||0)%360,e<0?e+360:e}function EP(e){return Math.max(0,Math.min(1,e||0))}function dB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const lke=Math.PI/180,cke=180/Math.PI,zD=18,fke=.96422,dke=1,hke=.82521,pke=4/29,Ub=6/29,mke=3*Ub*Ub,BTt=Ub*Ub*Ub;function gke(e){if(e instanceof Pd)return new Pd(e.l,e.a,e.b,e.opacity);if(e instanceof rp)return yke(e);e instanceof Us||(e=pK(e));var t=gB(e.r),n=gB(e.g),r=gB(e.b),i=hB((.2225045*t+.7168786*n+.0606169*r)/dke),s,o;return t===n&&n===r?s=o=i:(s=hB((.4360747*t+.3850649*n+.1430804*r)/fke),o=hB((.0139322*t+.0971045*n+.7141733*r)/hke)),new Pd(116*i-16,500*(s-i),200*(i-o),e.opacity)}function UD(e,t,n,r){return arguments.length===1?gke(e):new Pd(e,t,n,r??1)}function Pd(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}UE(Pd,UD,aI(F0,{brighter(e){return new Pd(this.l+zD*(e??1),this.a,this.b,this.opacity)},darker(e){return new Pd(this.l-zD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=fke*pB(t),e=dke*pB(e),n=hke*pB(n),new Us(mB(3.1338561*t-1.6168667*e-.4906146*n),mB(-.9787684*t+1.9161415*e+.033454*n),mB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function hB(e){return e>BTt?Math.pow(e,1/3):e/mke+pke}function pB(e){return e>Ub?e*e*e:mke*(e-pke)}function mB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function gB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jTt(e){if(e instanceof rp)return new rp(e.h,e.c,e.l,e.opacity);if(e instanceof Pd||(e=gke(e)),e.a===0&&e.b===0)return new rp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*cke;return new rp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function VD(e,t,n,r){return arguments.length===1?jTt(e):new rp(e,t,n,r??1)}function rp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function yke(e){if(isNaN(e.h))return new Pd(e.l,0,0,e.opacity);var t=e.h*lke;return new Pd(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}UE(rp,VD,aI(F0,{brighter(e){return new rp(this.h,this.c,this.l+zD*(e??1),this.opacity)},darker(e){return new rp(this.h,this.c,this.l-zD*(e??1),this.opacity)},rgb(){return yke(this).rgb()}}));var vke=-.14861,mK=1.78277,gK=-.29227,f4=-.90649,_C=1.97294,nhe=_C*f4,rhe=_C*mK,ihe=mK*gK-f4*vke;function zTt(e){if(e instanceof S1)return new S1(e.h,e.s,e.l,e.opacity);e instanceof Us||(e=pK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ihe*r+nhe*t-rhe*n)/(ihe+nhe-rhe),s=r-i,o=(_C*(n-i)-gK*s)/f4,a=Math.sqrt(o*o+s*s)/(_C*i*(1-i)),u=a?Math.atan2(o,s)*cke-120:NaN;return new S1(u<0?u+360:u,a,i,e.opacity)}function qU(e,t,n,r){return arguments.length===1?zTt(e):new S1(e,t,n,r??1)}function S1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}UE(S1,qU,aI(F0,{brighter(e){return e=e==null?Sw:Math.pow(Sw,e),new S1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?W1:Math.pow(W1,e),new S1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*lke,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Us(255*(t+n*(vke*r+mK*i)),255*(t+n*(gK*r+f4*i)),255*(t+n*(_C*r)),this.opacity)}}));function _ke(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function bke(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return _ke((n-r/t)*t,o,i,s,a)}}function wke(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return _ke((n-r/t)*t,i,s,o,a)}}const d4=e=>()=>e;function Eke(e,t){return function(n){return e+n*t}}function UTt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function h4(e,t){var n=t-e;return n?Eke(e,n>180||n<-180?n-360*Math.round(n/360):n):d4(isNaN(e)?t:e)}function VTt(e){return(e=+e)==1?Vs:function(t,n){return n-t?UTt(t,n,e):d4(isNaN(t)?n:t)}}function Vs(e,t){var n=t-e;return n?Eke(e,n):d4(isNaN(e)?t:e)}const bC=function e(t){var n=VTt(t);function r(i,s){var o=n((i=e0(i)).r,(s=e0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Vs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function xke(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=e0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var HTt=xke(bke),qTt=xke(wke);function yK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Ske(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function WTt(e,t){return(Ske(t)?yK:Tke)(e,t)}function Tke(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=am(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Cke(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function jl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ake(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=am(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var WU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yB=new RegExp(WU.source,"g");function GTt(e){return function(){return e}}function YTt(e){return function(t){return e(t)+""}}function vK(e,t){var n=WU.lastIndex=yB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=WU.exec(e))&&(i=yB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:jl(r,i)})),n=yB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?YTt(u[0].x):GTt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function am(e,t){var n=typeof t,r;return t==null||n==="boolean"?d4(t):(n==="number"?jl:n==="string"?(r=G1(t))?(t=r,bC):vK:t instanceof G1?bC:t instanceof Date?Cke:Ske(t)?yK:Array.isArray(t)?Tke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ake:jl)(e,t)}function KTt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function XTt(e,t){var n=h4(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function uI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var she=180/Math.PI,GU={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ike(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*she,skewX:Math.atan(u)*she,scaleX:o,scaleY:a}}var xP;function QTt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?GU:Ike(t.a,t.b,t.c,t.d,t.e,t.f)}function JTt(e){return e==null||(xP||(xP=document.createElementNS("http://www.w3.org/2000/svg","g")),xP.setAttribute("transform",e),!(e=xP.transform.baseVal.consolidate()))?GU:(e=e.matrix,Ike(e.a,e.b,e.c,e.d,e.e,e.f))}function Oke(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:jl(l,f)},{i:m-2,x:jl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:jl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:jl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:jl(l,f)},{i:m-2,x:jl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Pke=Oke(QTt,"px, ","px)","deg)"),kke=Oke(JTt,", ",")",")"),ZTt=1e-12;function ohe(e){return((e=Math.exp(e))+1/e)/2}function e2t(e){return((e=Math.exp(e))-1/e)/2}function t2t(e){return((e=Math.exp(2*e))-1)/(e+1)}const n2t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<ZTt)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),b=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),w=Math.log(Math.sqrt(b*b+1)-b);y=(w-E)/t,g=function(x){var S=x*y,P=ohe(E),A=l/(n*v)*(P*t2t(t*S+E)-e2t(E));return[a+A*h,u+A*p,l*P/ohe(t*S+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function $ke(e){return function(t,n){var r=e((t=jD(t)).h,(n=jD(n)).h),i=Vs(t.s,n.s),s=Vs(t.l,n.l),o=Vs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const r2t=$ke(h4);var i2t=$ke(Vs);function s2t(e,t){var n=Vs((e=UD(e)).l,(t=UD(t)).l),r=Vs(e.a,t.a),i=Vs(e.b,t.b),s=Vs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function Rke(e){return function(t,n){var r=e((t=VD(t)).h,(n=VD(n)).h),i=Vs(t.c,n.c),s=Vs(t.l,n.l),o=Vs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const o2t=Rke(h4);var a2t=Rke(Vs);function Nke(e){return function t(n){n=+n;function r(i,s){var o=e((i=qU(i)).h,(s=qU(s)).h),a=Vs(i.s,s.s),u=Vs(i.l,s.l),l=Vs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const u2t=Nke(h4);var l2t=Nke(Vs);function _K(e,t){t===void 0&&(t=e,e=am);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function c2t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const f2t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:am,interpolateArray:WTt,interpolateBasis:bke,interpolateBasisClosed:wke,interpolateCubehelix:u2t,interpolateCubehelixLong:l2t,interpolateDate:Cke,interpolateDiscrete:KTt,interpolateHcl:o2t,interpolateHclLong:a2t,interpolateHsl:r2t,interpolateHslLong:i2t,interpolateHue:XTt,interpolateLab:s2t,interpolateNumber:jl,interpolateNumberArray:yK,interpolateObject:Ake,interpolateRgb:bC,interpolateRgbBasis:HTt,interpolateRgbBasisClosed:qTt,interpolateRound:uI,interpolateString:vK,interpolateTransformCss:Pke,interpolateTransformSvg:kke,interpolateZoom:n2t,piecewise:_K,quantize:c2t},Symbol.toStringTag,{value:"Module"}));var Tw=0,nT=0,lS=0,Dke=1e3,HD,rT,qD=0,Y1=0,p4=0,wC=typeof performance=="object"&&performance.now?performance:Date,Mke=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function m4(){return Y1||(Mke(d2t),Y1=wC.now()+p4)}function d2t(){Y1=0}function EC(){this._call=this._time=this._next=null}EC.prototype=bK.prototype={constructor:EC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?m4():+n)+(t==null?0:+t),!this._next&&rT!==this&&(rT?rT._next=this:HD=this,rT=this),this._call=e,this._time=n,YU()},stop:function(){this._call&&(this._call=null,this._time=1/0,YU())}};function bK(e,t,n){var r=new EC;return r.restart(e,t,n),r}function h2t(){m4(),++Tw;for(var e=HD,t;e;)(t=Y1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tw}function ahe(){Y1=(qD=wC.now())+p4,Tw=nT=0;try{h2t()}finally{Tw=0,m2t(),Y1=0}}function p2t(){var e=wC.now(),t=e-qD;t>Dke&&(p4-=t,qD=e)}function m2t(){for(var e,t=HD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:HD=n);rT=e,YU(r)}function YU(e){if(!Tw){nT&&(nT=clearTimeout(nT));var t=e-Y1;t>24?(e<1/0&&(nT=setTimeout(ahe,e-wC.now()-p4)),lS&&(lS=clearInterval(lS))):(lS||(qD=wC.now(),lS=setInterval(p2t,Dke)),Tw=1,Mke(ahe))}}function uhe(e,t,n){var r=new EC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function g2t(e,t,n){var r=new EC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?m4():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var y2t=l4("start","end","cancel","interrupt"),v2t=[],Lke=0,lhe=1,KU=2,a$=3,che=4,XU=5,u$=6;function g4(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;_2t(e,n,{name:t,index:r,group:i,on:y2t,tween:v2t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Lke})}function wK(e,t){var n=Tf(e,t);if(n.state>Lke)throw new Error("too late; already scheduled");return n}function ch(e,t){var n=Tf(e,t);if(n.state>a$)throw new Error("too late; already running");return n}function Tf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _2t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=bK(s,0,n.time);function s(l){n.state=lhe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==lhe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===a$)return uhe(o);h.state===che?(h.state=u$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=u$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(uhe(function(){n.state===a$&&(n.state=che,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=KU,n.on.call("start",e,e.__data__,n.index,n.group),n.state===KU){for(n.state=a$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=XU,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===XU&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=u$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function QU(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>KU&&r.state<XU,r.state=u$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function b2t(e){return this.each(function(){QU(this,e)})}function w2t(e,t){var n,r;return function(){var i=ch(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function E2t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ch(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function x2t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Tf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?w2t:E2t)(n,e,t))}function EK(e,t,n){var r=e._id;return e.each(function(){var i=ch(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Tf(i,r).value[t]}}function Fke(e,t){var n;return(typeof t=="number"?jl:t instanceof G1?bC:(n=G1(t))?(t=n,bC):vK)(e,t)}function S2t(e){return function(){this.removeAttribute(e)}}function T2t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function C2t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function A2t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function I2t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function O2t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function P2t(e,t){var n=c4(e),r=n==="transform"?kke:Fke;return this.attrTween(e,typeof t=="function"?(n.local?O2t:I2t)(n,r,EK(this,"attr."+e,t)):t==null?(n.local?T2t:S2t)(n):(n.local?A2t:C2t)(n,r,t))}function k2t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $2t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function R2t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$2t(e,s)),n}return i._value=t,i}function N2t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&k2t(e,s)),n}return i._value=t,i}function D2t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=c4(e);return this.tween(n,(r.local?R2t:N2t)(r,t))}function M2t(e,t){return function(){wK(this,e).delay=+t.apply(this,arguments)}}function L2t(e,t){return t=+t,function(){wK(this,e).delay=t}}function F2t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?M2t:L2t)(t,e)):Tf(this.node(),t).delay}function B2t(e,t){return function(){ch(this,e).duration=+t.apply(this,arguments)}}function j2t(e,t){return t=+t,function(){ch(this,e).duration=t}}function z2t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?B2t:j2t)(t,e)):Tf(this.node(),t).duration}function U2t(e,t){if(typeof t!="function")throw new Error;return function(){ch(this,e).ease=t}}function V2t(e){var t=this._id;return arguments.length?this.each(U2t(t,e)):Tf(this.node(),t).ease}function H2t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ch(this,e).ease=n}}function q2t(e){if(typeof e!="function")throw new Error;return this.each(H2t(this._id,e))}function W2t(e){typeof e!="function"&&(e=ZPe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Dp(r,this._parents,this._name,this._id)}function G2t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Dp(o,this._parents,this._name,this._id)}function Y2t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function K2t(e,t,n){var r,i,s=Y2t(t)?wK:ch;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function X2t(e,t){var n=this._id;return arguments.length<2?Tf(this.node(),n).on.on(e):this.each(K2t(n,e,t))}function Q2t(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function J2t(){return this.on("end.remove",Q2t(this._id))}function Z2t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,g4(l[d],t,n,d,l,Tf(c,n)));return new Dp(s,this._parents,t,n)}function eCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=JPe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Tf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&g4(h,t,n,m,d,p);s.push(d),o.push(c)}return new Dp(s,o,t,n)}var tCt=oI.prototype.constructor;function nCt(){return new tCt(this._groups,this._parents)}function rCt(e,t){var n,r,i;return function(){var s=xw(this,e),o=(this.style.removeProperty(e),xw(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Bke(e){return function(){this.style.removeProperty(e)}}function iCt(e,t,n){var r,i=n+"",s;return function(){var o=xw(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function sCt(e,t,n){var r,i,s;return function(){var o=xw(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),xw(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function oCt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=ch(this,e),l=u.on,c=u.value[s]==null?a||(a=Bke(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function aCt(e,t,n){var r=(e+="")=="transform"?Pke:Fke;return t==null?this.styleTween(e,rCt(e,r)).on("end.style."+e,Bke(e)):typeof t=="function"?this.styleTween(e,sCt(e,r,EK(this,"style."+e,t))).each(oCt(this._id,e)):this.styleTween(e,iCt(e,r,t),n).on("end.style."+e,null)}function uCt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lCt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&uCt(e,o,n)),r}return s._value=t,s}function cCt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,lCt(e,t,n??""))}function fCt(e){return function(){this.textContent=e}}function dCt(e){return function(){var t=e(this);this.textContent=t??""}}function hCt(e){return this.tween("text",typeof e=="function"?dCt(EK(this,"text",e)):fCt(e==null?"":e+""))}function pCt(e){return function(t){this.textContent=e.call(this,t)}}function mCt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pCt(i)),t}return r._value=e,r}function gCt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mCt(e))}function yCt(){for(var e=this._name,t=this._id,n=jke(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Tf(u,t);g4(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Dp(r,this._parents,e,n)}function vCt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=ch(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var _Ct=0;function Dp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function jke(){return++_Ct}var Ah=oI.prototype;Dp.prototype={constructor:Dp,select:Z2t,selectAll:eCt,selectChild:Ah.selectChild,selectChildren:Ah.selectChildren,filter:W2t,merge:G2t,selection:nCt,transition:yCt,call:Ah.call,nodes:Ah.nodes,node:Ah.node,size:Ah.size,empty:Ah.empty,each:Ah.each,on:X2t,attr:P2t,attrTween:D2t,style:aCt,styleTween:cCt,text:hCt,textTween:gCt,remove:J2t,tween:x2t,delay:F2t,duration:z2t,ease:V2t,easeVarying:q2t,end:vCt,[Symbol.iterator]:Ah[Symbol.iterator]};const bCt=e=>+e;function wCt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ECt={time:null,delay:0,duration:250,ease:wCt};function xCt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function SCt(e){var t,n;e instanceof Dp?(t=e._id,e=e._name):(t=jke(),(n=ECt).time=m4(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&g4(u,e,t,l,o,n||xCt(u,t));return new Dp(r,this._parents,e,t)}oI.prototype.interrupt=b2t;oI.prototype.transition=SCt;const vB=e=>()=>e;function TCt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function CCt(e){e.stopImmediatePropagation()}function _B(e){e.preventDefault(),e.stopImmediatePropagation()}var fhe={name:"drag"},bB={name:"space"},__={name:"handle"},b_={name:"center"};const{abs:dhe,max:Po,min:ko}=Math;function hhe(e){return[+e[0],+e[1]]}function JU(e){return[hhe(e[0]),hhe(e[1])]}var l$={name:"x",handles:["w","e"].map(xC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},c$={name:"y",handles:["n","s"].map(xC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ACt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(xC),input:function(e){return e==null?null:JU(e)},output:function(e){return e}},Ih={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},phe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},mhe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ICt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},OCt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function xC(e){return{type:e}}function PCt(e){return!e.ctrlKey&&!e.button}function kCt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function $Ct(){return navigator.maxTouchPoints||"ontouchstart"in this}function wB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function RCt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function NCt(){return xK(l$)}function DCt(){return xK(c$)}function MCt(){return xK(ACt)}function xK(e){var t=kCt,n=PCt,r=$Ct,i=!0,s=l4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([xC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ih.overlay).merge(y).each(function(){var _=wB(this).extent;es(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([xC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ih.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Ih[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,b=_.__brush,E=c(_,arguments),w=b.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,b.extent),S=am(w,x);function P(A){b.selection=A===1&&x===null?null:S(A),l.call(_),E.brush()}return w!==null&&x!==null?P:P(1)}):g.each(function(){var _=this,b=arguments,E=_.__brush,w=e.input(typeof y=="function"?y.apply(_,b):y,E.extent),x=c(_,b).beforestart();QU(_),E.selection=w===null?null:w,l.call(_),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=es(this),y=wB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=es(this.that).datum();s.call(g,this.that,new TCt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?fhe:i&&g.altKey?b_:__,b=e===c$?null:ICt[v],E=e===l$?null:OCt[v],w=wB(y),x=w.extent,S=w.selection,P=x[0][0],A,O,z=x[0][1],D,R,N=x[1][0],L,V,j=x[1][1],H,U,k=0,$=0,q,F=b&&E&&i&&g.shiftKey,B,Q,se=Array.from(g.touches||[g],Oe=>{const Me=Oe.identifier;return Oe=UU(Oe,y),Oe.point0=Oe.slice(),Oe.identifier=Me,Oe});QU(y);var ae=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(q=!0);const Oe=[se[0],se[1]||se[0]];w.selection=S=[[A=e===c$?P:ko(Oe[0][0],Oe[1][0]),D=e===l$?z:ko(Oe[0][1],Oe[1][1])],[L=e===c$?N:Po(Oe[0][0],Oe[1][0]),H=e===l$?j:Po(Oe[0][1],Oe[1][1])]],se.length>1&&Fe(g)}else A=S[0][0],D=S[0][1],L=S[1][0],H=S[1][1];O=A,R=D,V=L,U=H;var ce=es(y).attr("pointer-events","none"),le=ce.selectAll(".overlay").attr("cursor",Ih[v]);if(g.touches)ae.moved=ue,ae.ended=ke;else{var ge=es(g.view).on("mousemove.brush",ue,!0).on("mouseup.brush",ke,!0);i&&ge.on("keydown.brush",Ge,!0).on("keyup.brush",Re,!0),ATt(g.view)}l.call(y),ae.start(g,_.name);function ue(Oe){for(const Me of Oe.changedTouches||[Oe])for(const Ut of se)Ut.identifier===Me.identifier&&(Ut.cur=UU(Me,y));if(F&&!B&&!Q&&se.length===1){const Me=se[0];dhe(Me.cur[0]-Me[0])>dhe(Me.cur[1]-Me[1])?Q=!0:B=!0}for(const Me of se)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);q=!0,_B(Oe),Fe(Oe)}function Fe(Oe){const Me=se[0],Ut=Me.point0;var Qe;switch(k=Me[0]-Ut[0],$=Me[1]-Ut[1],_){case bB:case fhe:{b&&(k=Po(P-A,ko(N-L,k)),O=A+k,V=L+k),E&&($=Po(z-D,ko(j-H,$)),R=D+$,U=H+$);break}case __:{se[1]?(b&&(O=Po(P,ko(N,se[0][0])),V=Po(P,ko(N,se[1][0])),b=1),E&&(R=Po(z,ko(j,se[0][1])),U=Po(z,ko(j,se[1][1])),E=1)):(b<0?(k=Po(P-A,ko(N-A,k)),O=A+k,V=L):b>0&&(k=Po(P-L,ko(N-L,k)),O=A,V=L+k),E<0?($=Po(z-D,ko(j-D,$)),R=D+$,U=H):E>0&&($=Po(z-H,ko(j-H,$)),R=D,U=H+$));break}case b_:{b&&(O=Po(P,ko(N,A-k*b)),V=Po(P,ko(N,L+k*b))),E&&(R=Po(z,ko(j,D-$*E)),U=Po(z,ko(j,H+$*E)));break}}V<O&&(b*=-1,Qe=A,A=L,L=Qe,Qe=O,O=V,V=Qe,v in phe&&le.attr("cursor",Ih[v=phe[v]])),U<R&&(E*=-1,Qe=D,D=H,H=Qe,Qe=R,R=U,U=Qe,v in mhe&&le.attr("cursor",Ih[v=mhe[v]])),w.selection&&(S=w.selection),B&&(O=S[0][0],V=S[1][0]),Q&&(R=S[0][1],U=S[1][1]),(S[0][0]!==O||S[0][1]!==R||S[1][0]!==V||S[1][1]!==U)&&(w.selection=[[O,R],[V,U]],l.call(y),ae.brush(Oe,_.name))}function ke(Oe){if(CCt(Oe),Oe.touches){if(Oe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else ITt(Oe.view,q),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ce.attr("pointer-events","all"),le.attr("cursor",Ih.overlay),w.selection&&(S=w.selection),RCt(S)&&(w.selection=null,l.call(y)),ae.end(Oe,_.name)}function Ge(Oe){switch(Oe.keyCode){case 16:{F=b&&E;break}case 18:{_===__&&(b&&(L=V-k*b,A=O+k*b),E&&(H=U-$*E,D=R+$*E),_=b_,Fe(Oe));break}case 32:{(_===__||_===b_)&&(b<0?L=V-k:b>0&&(A=O-k),E<0?H=U-$:E>0&&(D=R-$),_=bB,le.attr("cursor",Ih.selection),Fe(Oe));break}default:return}_B(Oe)}function Re(Oe){switch(Oe.keyCode){case 16:{F&&(B=Q=F=!1,Fe(Oe));break}case 18:{_===b_&&(b<0?L=V:b>0&&(A=O),E<0?H=U:E>0&&(D=R),_=__,Fe(Oe));break}case 32:{_===bB&&(Oe.altKey?(b&&(L=V-k*b,A=O+k*b),E&&(H=U-$*E,D=R+$*E),_=b_):(b<0?L=V:b>0&&(A=O),E<0?H=U:E>0&&(D=R),_=__),le.attr("cursor",Ih[v]),Fe(Oe));break}default:return}_B(Oe)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=JU(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:vB(JU(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:vB(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:vB(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const ZU=Math.PI,eV=2*ZU,Sy=1e-6,LCt=eV-Sy;function zke(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FCt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zke;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let SK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zke:FCt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Sy)if(!(Math.abs(f*u-l*c)>Sy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((ZU-Math.acos((m+d-g)/(2*y*v)))/2),b=_/v,E=_/y;Math.abs(b-1)>Sy&&this._append`L${t+b*c},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Sy||Math.abs(this._y1-c)>Sy)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%eV+eV),d>LCt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Sy&&this._append`A${r},${r},0,${+(d>=ZU)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function y4(){return new SK}y4.prototype=SK.prototype;const gp=11102230246251565e-32,$o=134217729,BCt=(3+8*gp)*gp;function EB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function jCt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function lI(e){return new Float64Array(e)}const zCt=(3+16*gp)*gp,UCt=(2+12*gp)*gp,VCt=(9+64*gp)*gp*gp,w_=lI(4),ghe=lI(8),yhe=lI(12),vhe=lI(16),ha=lI(4);function HCt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,b,E,w,x,S;const P=e-i,A=n-i,O=t-s,z=r-s;b=P*z,d=$o*P,h=d-(d-P),p=P-h,d=$o*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=O*A,d=$o*O,h=d-(d-O),p=O-h,d=$o*A,m=d-(d-A),g=A-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,w_[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,w_[1]=_-(y+f)+(f-w),S=v+y,f=S-v,w_[2]=v-(S-f)+(y-f),w_[3]=S;let D=jCt(4,w_),R=UCt*o;if(D>=R||-D>=R||(f=e-P,a=e-(P+f)+(f-i),f=n-A,l=n-(A+f)+(f-i),f=t-O,u=t-(O+f)+(f-s),f=r-z,c=r-(z+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(R=VCt*o+BCt*Math.abs(D),D+=P*c+z*a-(O*l+A*u),D>=R||-D>=R))return D;b=a*z,d=$o*a,h=d-(d-a),p=a-h,d=$o*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=u*A,d=$o*u,h=d-(d-u),p=u-h,d=$o*A,m=d-(d-A),g=A-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ha[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ha[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ha[2]=v-(S-f)+(y-f),ha[3]=S;const N=EB(4,w_,4,ha,ghe);b=P*c,d=$o*P,h=d-(d-P),p=P-h,d=$o*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=O*l,d=$o*O,h=d-(d-O),p=O-h,d=$o*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ha[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ha[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ha[2]=v-(S-f)+(y-f),ha[3]=S;const L=EB(N,ghe,4,ha,yhe);b=a*c,d=$o*a,h=d-(d-a),p=a-h,d=$o*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=u*l,d=$o*u,h=d-(d-u),p=u-h,d=$o*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ha[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ha[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ha[2]=v-(S-f)+(y-f),ha[3]=S;const V=EB(L,yhe,4,ha,vhe);return vhe[V-1]}function SP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=zCt*l?u:-HCt(e,t,n,r,i,s,l)}const _he=Math.pow(2,-52),TP=new Uint32Array(512);class WD{static from(t,n=KCt,r=XCt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new WD(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const O=t[2*A],z=t[2*A+1];O<a&&(a=O),z<u&&(u=z),O>l&&(l=O),z>c&&(c=z),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let A=0;A<o;A++){const O=xB(f,d,t[2*A],t[2*A+1]);O<h&&(p=A,h=O)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let A=0;A<o;A++){if(A===p)continue;const O=xB(y,v,t[2*A],t[2*A+1]);O<h&&O>0&&(m=A,h=O)}let _=t[2*m],b=t[2*m+1],E=1/0;for(let A=0;A<o;A++){if(A===p||A===m)continue;const O=GCt(y,v,_,b,t[2*A],t[2*A+1]);O<E&&(g=A,E=O)}let w=t[2*g],x=t[2*g+1];if(E===1/0){for(let z=0;z<o;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];hb(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let O=0;for(let z=0,D=-1/0;z<o;z++){const R=this._ids[z];this._dists[R]>D&&(A[O++]=R,D=this._dists[R])}this.hull=A.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(SP(y,v,_,b,w,x)<0){const A=m,O=_,z=b;m=g,_=w,b=x,g=A,w=O,x=z}const S=YCt(y,v,_,b,w,x);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=xB(t[2*A],t[2*A+1],S.x,S.y);hb(this._ids,this._dists,0,o-1),this._hullStart=p;let P=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,b)]=m,s[this._hashKey(w,x)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let A=0,O,z;A<this._ids.length;A++){const D=this._ids[A],R=t[2*D],N=t[2*D+1];if(A>0&&Math.abs(R-O)<=_he&&Math.abs(N-z)<=_he||(O=R,z=N,D===p||D===m||D===g))continue;let L=0;for(let k=0,$=this._hashKey(R,N);k<this._hashSize&&(L=s[($+k)%this._hashSize],!(L!==-1&&L!==r[L]));k++);L=n[L];let V=L,j;for(;j=r[V],SP(R,N,t[2*V],t[2*V+1],t[2*j],t[2*j+1])>=0;)if(V=j,V===L){V=-1;break}if(V===-1)continue;let H=this._addTriangle(V,D,r[V],-1,-1,i[V]);i[D]=this._legalize(H+2),i[V]=H,P++;let U=r[V];for(;j=r[U],SP(R,N,t[2*U],t[2*U+1],t[2*j],t[2*j+1])<0;)H=this._addTriangle(U,D,j,i[D],-1,i[U]),i[D]=this._legalize(H+2),r[U]=U,P--,U=j;if(V===L)for(;j=n[V],SP(R,N,t[2*j],t[2*j+1],t[2*V],t[2*V+1])<0;)H=this._addTriangle(j,D,V,-1,i[V],i[j]),this._legalize(H+2),i[j]=H,r[V]=V,P--,V=j;this._hullStart=n[D]=V,r[V]=n[U]=D,r[D]=U,s[this._hashKey(R,N)]=D,s[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(P);for(let A=0,O=this._hullStart;A<P;A++)this.hull[A]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(qCt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=TP[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(WCt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<TP.length&&(TP[s++]=v)}else{if(s===0)break;t=TP[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function qCt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function xB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function WCt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function GCt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function YCt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function hb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;cS(e,i,s),t[e[n]]>t[e[r]]&&cS(e,n,r),t[e[s]]>t[e[r]]&&cS(e,s,r),t[e[n]]>t[e[s]]&&cS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;cS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(hb(e,t,s,r),hb(e,t,n,o-1)):(hb(e,t,n,o-1),hb(e,t,s,r))}}function cS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function KCt(e){return e[0]}function XCt(e){return e[1]}var bhe={},SB={},TB=34,fS=10,CB=13;function Uke(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function QCt(e,t){var n=Uke(e);return function(r,i){return t(n(r),i,e)}}function whe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Qa(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function JCt(e){return e<0?"-"+Qa(-e,6):e>9999?"+"+Qa(e,6):Qa(e,4)}function ZCt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":JCt(e.getUTCFullYear())+"-"+Qa(e.getUTCMonth()+1,2)+"-"+Qa(e.getUTCDate(),2)+(i?"T"+Qa(t,2)+":"+Qa(n,2)+":"+Qa(r,2)+"."+Qa(i,3)+"Z":r?"T"+Qa(t,2)+":"+Qa(n,2)+":"+Qa(r,2)+"Z":n||t?"T"+Qa(t,2)+":"+Qa(n,2)+"Z":"")}function Vke(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?QCt(g,d):Uke(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===fS&&--p,f.charCodeAt(p-1)===CB&&--p;function b(){if(v)return SB;if(_)return _=!1,bhe;var w,x=m,S;if(f.charCodeAt(x)===TB){for(;m++<p&&f.charCodeAt(m)!==TB||f.charCodeAt(++m)===TB;);return(w=m)>=p?v=!0:(S=f.charCodeAt(m++))===fS?_=!0:S===CB&&(_=!0,f.charCodeAt(m)===fS&&++m),f.slice(x+1,w-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(w=m++))===fS)_=!0;else if(S===CB)_=!0,f.charCodeAt(m)===fS&&++m;else if(S!==n)continue;return f.slice(x,w)}return v=!0,f.slice(x,p)}for(;(y=b())!==SB;){for(var E=[];y!==bhe&&y!==SB;)E.push(y),y=b();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=whe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=whe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?ZCt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var eAt=Vke(","),tAt=eAt.parse;function nAt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function rAt(e,t){return fetch(e,t).then(nAt)}function iAt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),rAt(t,n).then(function(i){return e(i,r)})}}var sAt=iAt(tAt);function oAt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function aAt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Hke(this.cover(t,n),t,n,e)}function Hke(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function uAt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Hke(this,o[n],a[n],e[n]);return this}function lAt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function cAt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function fAt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Sa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function dAt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Sa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Sa(h[3],g,y,u,l),new Sa(h[2],o,y,g,l),new Sa(h[1],g,a,u,y),new Sa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),b=v*v+_*_;if(b<n){var E=Math.sqrt(n=b);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function hAt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function pAt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function mAt(){return this._root}function gAt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function yAt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Sa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Sa(i,l,c,a,u)),(i=r[2])&&t.push(new Sa(i,s,c,l,u)),(i=r[1])&&t.push(new Sa(i,l,o,a,c)),(i=r[0])&&t.push(new Sa(i,s,o,l,c))}return this}function vAt(e){var t=[],n=[],r;for(this._root&&t.push(new Sa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Sa(s,o,a,c,f)),(s=i[1])&&t.push(new Sa(s,c,a,u,f)),(s=i[2])&&t.push(new Sa(s,o,f,c,l)),(s=i[3])&&t.push(new Sa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function _At(e){return e[0]}function bAt(e){return arguments.length?(this._x=e,this):this._x}function wAt(e){return e[1]}function EAt(e){return arguments.length?(this._y=e,this):this._y}function TK(e,t,n){var r=new CK(t??_At,n??wAt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function CK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Ehe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ua=TK.prototype=CK.prototype;Ua.copy=function(){var e=new CK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Ehe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Ehe(r));return e};Ua.add=aAt;Ua.addAll=uAt;Ua.cover=lAt;Ua.data=cAt;Ua.extent=fAt;Ua.find=dAt;Ua.remove=hAt;Ua.removeAll=pAt;Ua.root=mAt;Ua.size=gAt;Ua.visit=yAt;Ua.visitAfter=vAt;Ua.x=bAt;Ua.y=EAt;function Ta(e){return function(){return e}}function og(e){return(e()-.5)*1e-6}function xAt(e){return e.x+e.vx}function SAt(e){return e.y+e.vy}function TAt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ta(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=TK(t,xAt,SAt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,b,E,w,x){var S=_.data,P=_.r,A=m+P;if(S){if(S.index>d.index){var O=h-S.x-S.vx,z=p-S.y-S.vy,D=O*O+z*z;D<A*A&&(O===0&&(O=og(r),D+=O*O),z===0&&(z=og(r),D+=z*z),D=(A-(D=Math.sqrt(D)))/D*i,d.vx+=(O*=D)*(A=(P*=P)/(g+P)),d.vy+=(z*=D)*A,S.vx-=O*(A=1-A),S.vy-=z*A)}return}return b>h+A||w<h-A||E>p+A||x<p-A}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ta(+l),u(),o):e},o}function CAt(e){return e.index}function xhe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function AAt(e){var t=CAt,n=f,r,i=Ta(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,b,E,w,x,S,P,A;_<v;++_)b=e[_],E=b.source,w=b.target,x=w.x+w.vx-E.x-E.vx||og(l),S=w.y+w.vy-E.y-E.vy||og(l),P=Math.sqrt(x*x+S*S),P=(P-s[_])/P*g*r[_],x*=P,S*=P,w.vx-=x*(A=u[_]),w.vy-=S*A,E.vx+=x*(A=1-A),E.vy+=S*A}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,w)=>[t(E,w,o),E])),b;for(g=0,a=new Array(y);g<v;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=xhe(_,b.source)),typeof b.target!="object"&&(b.target=xhe(_,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)b=e[g],u[g]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ta(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ta(+g),m(),d):i},d}const IAt=1664525,OAt=1013904223,She=4294967296;function PAt(){let e=1;return()=>(e=(IAt*e+OAt)%She)/She}function kAt(e){return e.x}function $At(e){return e.y}var RAt=10,NAt=Math.PI*(3-Math.sqrt(5));function DAt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=bK(f),l=l4("tick","end"),c=PAt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(b){b(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=RAt*Math.sqrt(.5+m),_=m*NAt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,b,E,w,x,S;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],b=m-x.x,E=g-x.y,w=b*b+E*E,w<y&&(S=x,y=w);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function MAt(){var e,t,n,r,i=Ta(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=TK(e,kAt,$At).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,b;if(h.length){for(v=_=b=0;b<4;++b)(m=h[b])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,b=y*y+v*v;if(_*_/u<b)return b<a&&(y===0&&(y=og(n),b+=y*y),v===0&&(v=og(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=og(n),b+=y*y),v===0&&(v=og(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)));do h.data!==t&&(_=s[h.data.index]*r/b,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ta(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function LAt(e){var t=Ta(.1),n,r,i;typeof e!="function"&&(e=Ta(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ta(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ta(+a),o(),s):e},s}function FAt(e){var t=Ta(.1),n,r,i;typeof e!="function"&&(e=Ta(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ta(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ta(+a),o(),s):e},s}function BAt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function GD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Cw(e){return e=GD(Math.abs(e)),e?e[1]:NaN}function jAt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function zAt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var UAt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function K1(e){if(!(t=UAt.exec(e)))throw new Error("invalid format: "+e);var t;return new AK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}K1.prototype=AK.prototype;function AK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}AK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VAt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var qke;function HAt(e,t){var n=GD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(qke=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+GD(e,Math.max(0,t+s-1))[0]}function The(e,t){var n=GD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Che={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:BAt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>The(e*100,t),r:The,s:HAt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ahe(e){return e}var Ihe=Array.prototype.map,Ohe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wke(e){var t=e.grouping===void 0||e.thousands===void 0?Ahe:jAt(Ihe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ahe:zAt(Ihe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=K1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,b=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Che[E]||(_===void 0&&(_=12),b=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",S=Che[E],P=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function A(O){var z=w,D=x,R,N,L;if(E==="c")D=S(O)+D,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?u:S(Math.abs(O),_),b&&(O=VAt(O)),V&&+O==0&&p!=="+"&&(V=!1),z=(V?p==="("?p:a:p==="-"||p==="("?"":p)+z,D=(E==="s"?Ohe[8+qke/3]:"")+D+(V&&p==="("?")":""),P){for(R=-1,N=O.length;++R<N;)if(L=O.charCodeAt(R),48>L||L>57){D=(L===46?i+O.slice(R+1):O.slice(R))+D,O=O.slice(0,R);break}}}v&&!g&&(O=t(O,1/0));var j=z.length+O.length+D.length,H=j<y?new Array(y-j+1).join(d):"";switch(v&&g&&(O=t(H+O,H.length?y-D.length:1/0),H=""),h){case"<":O=z+O+D+H;break;case"=":O=z+H+O+D;break;case"^":O=H.slice(0,j=H.length>>1)+z+O+D+H.slice(j);break;default:O=H+z+O+D;break}return s(O)}return A.toString=function(){return f+""},A}function c(f,d){var h=l((f=K1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Cw(d)/3)))*3,m=Math.pow(10,-p),g=Ohe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var CP,VE,IK;qAt({thousands:",",grouping:[3],currency:["$",""]});function qAt(e){return CP=Wke(e),VE=CP.format,IK=CP.formatPrefix,CP}function Gke(e){return Math.max(0,-Cw(Math.abs(e)))}function Yke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cw(t)/3)))*3-Cw(Math.abs(e)))}function Kke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cw(t)-Cw(e))+1}function WAt(e,t){return e.parent===t.parent?1:2}function GAt(e){return e.reduce(YAt,0)/e.length}function YAt(e,t){return e+t.x}function KAt(e){return 1+e.reduce(XAt,0)}function XAt(e,t){return Math.max(e,t.y)}function QAt(e){for(var t;t=e.children;)e=t[0];return e}function JAt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function ZAt(){var e=WAt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=GAt(h),d.y=KAt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=QAt(s),l=JAt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function eIt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function tIt(){return this.eachAfter(eIt)}function nIt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function rIt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function iIt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function sIt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function oIt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function aIt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function uIt(e){for(var t=this,n=lIt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function lIt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function cIt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function fIt(){return Array.from(this)}function dIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function hIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*pIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function v4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=yIt)):t===void 0&&(t=gIt);for(var n=new Aw(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new Aw(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Xke)}function mIt(){return v4(this).eachBefore(vIt)}function gIt(e){return e.children}function yIt(e){return Array.isArray(e)?e[1]:null}function vIt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Xke(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Aw(e){this.data=e,this.depth=this.height=0,this.parent=null}Aw.prototype=v4.prototype={constructor:Aw,count:tIt,each:nIt,eachAfter:iIt,eachBefore:rIt,find:sIt,sum:oIt,sort:aIt,path:uIt,ancestors:cIt,descendants:fIt,leaves:dIt,links:hIt,copy:mIt,[Symbol.iterator]:pIt};function f$(e){return e==null?null:Qke(e)}function Qke(e){if(typeof e!="function")throw new Error;return e}function Fy(){return 0}function z_(e){return function(){return e}}const _It=1664525,bIt=1013904223,Phe=4294967296;function wIt(){let e=1;return()=>(e=(_It*e+bIt)%Phe)/Phe}function EIt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xIt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function SIt(e,t){for(var n=0,r=(e=xIt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&Jke(o,s)?++n:(o=CIt(i=TIt(i,s)),n=0);return o}function TIt(e,t){var n,r;if(AB(t,e))return[t];for(n=0;n<e.length;++n)if(AP(t,e[n])&&AB(iT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(AP(iT(e[n],e[r]),t)&&AP(iT(e[n],t),e[r])&&AP(iT(e[r],t),e[n])&&AB(Zke(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function AP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Jke(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function AB(e,t){for(var n=0;n<t.length;++n)if(!Jke(e,t[n]))return!1;return!0}function CIt(e){switch(e.length){case 1:return AIt(e[0]);case 2:return iT(e[0],e[1]);case 3:return Zke(e[0],e[1],e[2])}}function AIt(e){return{x:e.x,y:e.y,r:e.r}}function iT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function Zke(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,b=v-l*l-c*c+f*f,E=h*p-d*m,w=(p*b-m*_)/(E*2)-r,x=(m*g-p*y)/E,S=(h*_-d*b)/(E*2)-i,P=(d*y-h*g)/E,A=x*x+P*P-1,O=2*(s+w*x+S*P),z=w*w+S*S-s*s,D=-(Math.abs(A)>1e-6?(O+Math.sqrt(O*O-4*A*z))/(2*A):z/O);return{x:r+w+x*D,y:i+S+P*D,r:D}}function khe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function $he(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Rhe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function IP(e){this._=e,this.next=null,this.previous=null}function IIt(e,t){if(!(s=(e=EIt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;khe(r,n,i=e[2]),n=new IP(n),r=new IP(r),i=new IP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){khe(n._,r._,i=e[u]),i=new IP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if($he(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if($he(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Rhe(n);(i=i.next)!==r;)(a=Rhe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=SIt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function OIt(e){return Math.sqrt(e.value)}function e$e(){var e=null,t=1,n=1,r=Fy;function i(s){const o=wIt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Nhe(e)).eachAfter(IB(r,.5,o)).eachBefore(Dhe(1)):s.eachBefore(Nhe(OIt)).eachAfter(IB(Fy,1,o)).eachAfter(IB(r,s.r/Math.min(t,n),o)).eachBefore(Dhe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=f$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:z_(+s),i):r},i}function Nhe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function IB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=IIt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Dhe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function t$e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function cI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function PIt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(t$e),o}function s(o,a){return function(u){u.children&&cI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var kIt={depth:-1},Mhe={},OB={};function $It(e){return e.id}function RIt(e){return e.parentId}function Lhe(){var e=$It,t=RIt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((b,E)=>NIt(n(b,E,i))),v=y.map(Fhe),_=new Set(y).add("");for(const b of v)_.has(b)||(_.add(b),y.push(b),v.push(Fhe(b)),s.push(OB));o=(b,E)=>y[E],a=(b,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new Aw(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Mhe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Mhe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===OB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===OB);--y)h.data=null}if(f.parent=kIt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(Xke),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=f$(i),r):e},r.parentId=function(i){return arguments.length?(t=f$(i),r):t},r.path=function(i){return arguments.length?(n=f$(i),r):n},r}function NIt(e){e=`${e}`;let t=e.length;return tV(e,t-1)&&!tV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Fhe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!tV(e,t););return e.slice(0,t)}function tV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function DIt(e,t){return e.parent===t.parent?1:2}function PB(e){var t=e.children;return t?t[0]:e.t}function kB(e){var t=e.children;return t?t[t.length-1]:e.t}function MIt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function LIt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function FIt(e,t,n){return e.a.parent===t.parent?e.a:n}function d$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}d$.prototype=Object.create(Aw.prototype);function BIt(e){for(var t=new d$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new d$(s[o],o)),i.parent=n;return(t.parent=new d$(null,0)).children=[t],t}function jIt(){var e=DIt,t=1,n=1,r=null;function i(l){var c=BIt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){LIt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,b;p=kB(p),d=PB(d),p&&d;)m=PB(m),h=kB(h),h.a=l,b=p.z+v-d.z-g+e(p._,d._),b>0&&(MIt(FIt(p,l,f),l,b),g+=b,y+=b),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!kB(h)&&(h.t=p,h.m+=v-y),d&&!PB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function _4(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var n$e=(1+Math.sqrt(5))/2;function r$e(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,b,E,w;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),w=g*g*E,b=Math.max(v/w,w/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),w=g*g*E,_=Math.max(v/w,w/y),_>b){g-=l;break}b=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?cI(u,n,r,i,m?r+=p*g/m:s):_4(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const i$e=function e(t){function n(r,i,s,o,a){r$e(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(n$e);function zIt(){var e=i$e,t=!1,n=1,r=1,i=[0],s=Fy,o=Fy,a=Fy,u=Fy,l=Fy;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(t$e),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=Qke(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:z_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:z_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:z_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:z_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:z_(+d),c):l},c}function UIt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],b=h/2+_,E=f+1,w=d-1;E<w;){var x=E+w>>>1;l[x]<b?E=x+1:w=x}b-l[E-1]<l[E]-b&&f+1<E&&--E;var S=l[E]-_,P=h-S;if(g-p>y-m){var A=h?(p*P+g*S)/h:g;c(f,E,S,p,m,A,y),c(E,d,P,A,m,g,y)}else{var O=h?(m*P+y*S)/h:y;c(f,E,S,p,m,g,O),c(E,d,P,p,O,g,y)}}}function VIt(e,t,n,r,i){(e.depth&1?_4:cI)(e,t,n,r,i)}const HIt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?cI(l,i,s,o,m?s+=(a-s)*l.value/m:a):_4(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=r$e(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(n$e);function i2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qIt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function s$e(e){let t,n,r;e.length!==2?(t=i2,n=(a,u)=>i2(e(a),u),r=(a,u)=>e(a)-u):(t=e===i2||e===qIt?e:WIt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function WIt(){return 0}function o$e(e){return e===null?NaN:+e}const GIt=s$e(i2),YIt=GIt.right;s$e(o$e).center;const b4=YIt,KIt=Math.sqrt(50),XIt=Math.sqrt(10),QIt=Math.sqrt(2);function YD(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=KIt?10:s>=XIt?5:s>=QIt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?YD(e,t,n*2):[a,u,l]}function nV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?YD(t,e,n):YD(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function rV(e,t,n){return t=+t,e=+e,n=+n,YD(e,t,n)[2]}function JIt(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?rV(t,e,n):rV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ZIt(e,t,n=o$e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function eOt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Cf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function B0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const iV=Symbol("implicit");function HE(){var e=new qde,t=[],n=[],r=iV;function i(s){let o=e.get(s);if(o===void 0){if(r!==iV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new qde;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return HE(t,n).unknown(r)},Cf.apply(i,arguments),i}function fI(){var e=HE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=eOt(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return fI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Cf.apply(f(),arguments)}function tOt(e){return function(){return e}}function sV(e){return+e}var Bhe=[0,1];function hu(e){return e}function oV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:tOt(isNaN(t)?NaN:.5)}function nOt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function rOt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=oV(i,r),s=n(o,s)):(r=oV(r,i),s=n(s,o)),function(a){return s(r(a))}}function iOt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=oV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=b4(e,a,1,r)-1;return s[u](i[u](a))}}function dI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function w4(){var e=Bhe,t=Bhe,n=am,r,i,s,o=hu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==hu&&(o=nOt(e[0],e[d-1])),a=d>2?iOt:rOt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),jl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,sV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=uI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:hu,c()):o!==hu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function a$e(){return w4()(hu,hu)}function u$e(e,t,n,r){var i=JIt(e,t,n),s;switch(r=K1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Yke(i,o))&&(r.precision=s),IK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Kke(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Gke(i))&&(r.precision=s-(r.type==="%")*2);break}}return VE(r)}function Bv(e){var t=e.domain;return e.ticks=function(n){var r=t();return nV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return u$e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=rV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Mp(){var e=a$e();return e.copy=function(){return dI(e,Mp())},Cf.apply(e,arguments),Bv(e)}function l$e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,sV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return l$e(e).unknown(t)},e=arguments.length?Array.from(e,sV):[0,1],Bv(n)}function c$e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function jhe(e){return Math.log(e)}function zhe(e){return Math.exp(e)}function sOt(e){return-Math.log(-e)}function oOt(e){return-Math.exp(-e)}function aOt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uOt(e){return e===10?aOt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lOt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Uhe(e){return(t,n)=>-e(-t,n)}function OK(e){const t=e(jhe,zhe),n=t.domain;let r=10,i,s;function o(){return i=lOt(r),s=uOt(r),n()[0]<0?(i=Uhe(i),s=Uhe(s),e(sOt,oOt)):e(jhe,zhe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=nV(l,c,g))}else y=nV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=K1(u)).precision==null&&(u.trim=!0),u=VE(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(c$e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function f$e(){const e=OK(w4()).domain([1,10]);return e.copy=()=>dI(e,f$e()).base(e.base()),Cf.apply(e,arguments),e}function Vhe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Hhe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function PK(e){var t=1,n=e(Vhe(t),Hhe(t));return n.constant=function(r){return arguments.length?e(Vhe(t=+r),Hhe(t)):t},Bv(n)}function d$e(){var e=PK(w4());return e.copy=function(){return dI(e,d$e()).constant(e.constant())},Cf.apply(e,arguments)}function qhe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cOt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fOt(e){return e<0?-e*e:e*e}function kK(e){var t=e(hu,hu),n=1;function r(){return n===1?e(hu,hu):n===.5?e(cOt,fOt):e(qhe(n),qhe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Bv(t)}function $K(){var e=kK(w4());return e.copy=function(){return dI(e,$K()).exponent(e.exponent())},Cf.apply(e,arguments),e}function dOt(){return $K.apply(null,arguments).exponent(.5)}function h$e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=ZIt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[b4(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(i2),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return h$e().domain(e).range(t).unknown(r)},Cf.apply(s,arguments)}function p$e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[b4(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return p$e().domain([e,t]).range(i).unknown(s)},Cf.apply(Bv(o),arguments)}function m$e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[b4(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return m$e().domain(e).range(t).unknown(n)},Cf.apply(i,arguments)}const $B=new Date,RB=new Date;function Ps(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Ps(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>($B.setTime(+s),RB.setTime(+o),e($B),e(RB),Math.floor(n($B,RB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Iw=Ps(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Iw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ps(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Iw);Iw.range;const ip=1e3,Gl=ip*60,sp=Gl*60,Lp=sp*24,RK=Lp*7,Whe=Lp*30,NB=Lp*365,op=Ps(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ip)},(e,t)=>(t-e)/ip,e=>e.getUTCSeconds());op.range;const E4=Ps(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ip)},(e,t)=>{e.setTime(+e+t*Gl)},(e,t)=>(t-e)/Gl,e=>e.getMinutes());E4.range;const x4=Ps(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gl)},(e,t)=>(t-e)/Gl,e=>e.getUTCMinutes());x4.range;const S4=Ps(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ip-e.getMinutes()*Gl)},(e,t)=>{e.setTime(+e+t*sp)},(e,t)=>(t-e)/sp,e=>e.getHours());S4.range;const T4=Ps(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*sp)},(e,t)=>(t-e)/sp,e=>e.getUTCHours());T4.range;const yp=Ps(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gl)/Lp,e=>e.getDate()-1);yp.range;const $g=Ps(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lp,e=>e.getUTCDate()-1);$g.range;const g$e=Ps(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lp,e=>Math.floor(e/Lp));g$e.range;function jv(e){return Ps(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gl)/RK)}const qE=jv(0),KD=jv(1),hOt=jv(2),pOt=jv(3),Ow=jv(4),mOt=jv(5),gOt=jv(6);qE.range;KD.range;hOt.range;pOt.range;Ow.range;mOt.range;gOt.range;function zv(e){return Ps(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/RK)}const WE=zv(0),XD=zv(1),yOt=zv(2),vOt=zv(3),Pw=zv(4),_Ot=zv(5),bOt=zv(6);WE.range;XD.range;yOt.range;vOt.range;Pw.range;_Ot.range;bOt.range;const SC=Ps(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());SC.range;const TC=Ps(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());TC.range;const Vd=Ps(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Vd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ps(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Vd.range;const Hd=Ps(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ps(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Hd.range;function DB(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function wOt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function EOt(e){let t,n,r;e.length!==2?(t=DB,n=(a,u)=>DB(e(a),u),r=(a,u)=>e(a)-u):(t=e===DB||e===wOt?e:xOt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function xOt(){return 0}const SOt=Math.sqrt(50),TOt=Math.sqrt(10),COt=Math.sqrt(2);function y$e(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=SOt?10:s>=TOt?5:s>=COt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?y$e(e,t,n*2):[a,u,l]}function Ghe(e,t,n){return t=+t,e=+e,n=+n,y$e(e,t,n)[2]}function Yhe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Ghe(t,e,n):Ghe(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function v$e(e,t,n,r,i,s){const o=[[op,1,ip],[op,5,5*ip],[op,15,15*ip],[op,30,30*ip],[s,1,Gl],[s,5,5*Gl],[s,15,15*Gl],[s,30,30*Gl],[i,1,sp],[i,3,3*sp],[i,6,6*sp],[i,12,12*sp],[r,1,Lp],[r,2,2*Lp],[n,1,RK],[t,1,Whe],[t,3,3*Whe],[e,1,NB]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=EOt(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Yhe(l/NB,c/NB,f));if(h===0)return Iw.every(Math.max(Yhe(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[AOt,IOt]=v$e(Hd,TC,WE,g$e,T4,x4),[OOt,POt]=v$e(Vd,SC,qE,yp,S4,E4);function MB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function _$e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=hS(i),c=pS(i),f=hS(s),d=pS(s),h=hS(o),p=pS(o),m=hS(a),g=pS(a),y=hS(u),v=pS(u),_={a:V,A:j,b:H,B:U,c:null,d:epe,e:epe,f:ZOt,g:lPt,G:fPt,H:XOt,I:QOt,j:JOt,L:b$e,m:ePt,M:tPt,p:k,q:$,Q:rpe,s:ipe,S:nPt,u:rPt,U:iPt,V:sPt,w:oPt,W:aPt,x:null,X:null,y:uPt,Y:cPt,Z:dPt,"%":npe},b={a:q,A:F,b:B,B:Q,c:null,d:tpe,e:tpe,f:gPt,g:CPt,G:IPt,H:hPt,I:pPt,j:mPt,L:E$e,m:yPt,M:vPt,p:se,q:ae,Q:rpe,s:ipe,S:_Pt,u:bPt,U:wPt,V:EPt,w:xPt,W:SPt,x:null,X:null,y:TPt,Y:APt,Z:OPt,"%":npe},E={a:A,A:O,b:z,B:D,c:R,d:Jhe,e:Jhe,f:WOt,g:Qhe,G:Xhe,H:Zhe,I:Zhe,j:UOt,L:qOt,m:zOt,M:VOt,p:P,q:jOt,Q:YOt,s:KOt,S:HOt,u:DOt,U:MOt,V:LOt,w:NOt,W:FOt,x:N,X:L,y:Qhe,Y:Xhe,Z:BOt,"%":GOt};_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b);function w(ce,le){return function(ge){var ue=[],Fe=-1,ke=0,Ge=ce.length,Re,Oe,Me;for(ge instanceof Date||(ge=new Date(+ge));++Fe<Ge;)ce.charCodeAt(Fe)===37&&(ue.push(ce.slice(ke,Fe)),(Oe=Khe[Re=ce.charAt(++Fe)])!=null?Re=ce.charAt(++Fe):Oe=Re==="e"?" ":"0",(Me=le[Re])&&(Re=Me(ge,Oe)),ue.push(Re),ke=Fe+1);return ue.push(ce.slice(ke,Fe)),ue.join("")}}function x(ce,le){return function(ge){var ue=dS(1900,void 0,1),Fe=S(ue,ce,ge+="",0),ke,Ge;if(Fe!=ge.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(le&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(ke=LB(dS(ue.y,0,1)),Ge=ke.getUTCDay(),ke=Ge>4||Ge===0?XD.ceil(ke):XD(ke),ke=$g.offset(ke,(ue.V-1)*7),ue.y=ke.getUTCFullYear(),ue.m=ke.getUTCMonth(),ue.d=ke.getUTCDate()+(ue.w+6)%7):(ke=MB(dS(ue.y,0,1)),Ge=ke.getDay(),ke=Ge>4||Ge===0?KD.ceil(ke):KD(ke),ke=yp.offset(ke,(ue.V-1)*7),ue.y=ke.getFullYear(),ue.m=ke.getMonth(),ue.d=ke.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Ge="Z"in ue?LB(dS(ue.y,0,1)).getUTCDay():MB(dS(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Ge+5)%7:ue.w+ue.U*7-(Ge+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,LB(ue)):MB(ue)}}function S(ce,le,ge,ue){for(var Fe=0,ke=le.length,Ge=ge.length,Re,Oe;Fe<ke;){if(ue>=Ge)return-1;if(Re=le.charCodeAt(Fe++),Re===37){if(Re=le.charAt(Fe++),Oe=E[Re in Khe?le.charAt(Fe++):Re],!Oe||(ue=Oe(ce,ge,ue))<0)return-1}else if(Re!=ge.charCodeAt(ue++))return-1}return ue}function P(ce,le,ge){var ue=l.exec(le.slice(ge));return ue?(ce.p=c.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function A(ce,le,ge){var ue=h.exec(le.slice(ge));return ue?(ce.w=p.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function O(ce,le,ge){var ue=f.exec(le.slice(ge));return ue?(ce.w=d.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function z(ce,le,ge){var ue=y.exec(le.slice(ge));return ue?(ce.m=v.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function D(ce,le,ge){var ue=m.exec(le.slice(ge));return ue?(ce.m=g.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function R(ce,le,ge){return S(ce,t,le,ge)}function N(ce,le,ge){return S(ce,n,le,ge)}function L(ce,le,ge){return S(ce,r,le,ge)}function V(ce){return o[ce.getDay()]}function j(ce){return s[ce.getDay()]}function H(ce){return u[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function k(ce){return i[+(ce.getHours()>=12)]}function $(ce){return 1+~~(ce.getMonth()/3)}function q(ce){return o[ce.getUTCDay()]}function F(ce){return s[ce.getUTCDay()]}function B(ce){return u[ce.getUTCMonth()]}function Q(ce){return a[ce.getUTCMonth()]}function se(ce){return i[+(ce.getUTCHours()>=12)]}function ae(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var le=w(ce+="",_);return le.toString=function(){return ce},le},parse:function(ce){var le=x(ce+="",!1);return le.toString=function(){return ce},le},utcFormat:function(ce){var le=w(ce+="",b);return le.toString=function(){return ce},le},utcParse:function(ce){var le=x(ce+="",!0);return le.toString=function(){return ce},le}}}var Khe={"-":"",_:" ",0:"0"},Js=/^\s*\d+/,kOt=/^%/,$Ot=/[\\^$*+?|[\]().{}]/g;function sr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function ROt(e){return e.replace($Ot,"\\$&")}function hS(e){return new RegExp("^(?:"+e.map(ROt).join("|")+")","i")}function pS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function NOt(e,t,n){var r=Js.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function DOt(e,t,n){var r=Js.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function MOt(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function LOt(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function FOt(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xhe(e,t,n){var r=Js.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Qhe(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function BOt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jOt(e,t,n){var r=Js.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function zOt(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Jhe(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function UOt(e,t,n){var r=Js.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Zhe(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function VOt(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function HOt(e,t,n){var r=Js.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function qOt(e,t,n){var r=Js.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function WOt(e,t,n){var r=Js.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function GOt(e,t,n){var r=kOt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function YOt(e,t,n){var r=Js.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function KOt(e,t,n){var r=Js.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function epe(e,t){return sr(e.getDate(),t,2)}function XOt(e,t){return sr(e.getHours(),t,2)}function QOt(e,t){return sr(e.getHours()%12||12,t,2)}function JOt(e,t){return sr(1+yp.count(Vd(e),e),t,3)}function b$e(e,t){return sr(e.getMilliseconds(),t,3)}function ZOt(e,t){return b$e(e,t)+"000"}function ePt(e,t){return sr(e.getMonth()+1,t,2)}function tPt(e,t){return sr(e.getMinutes(),t,2)}function nPt(e,t){return sr(e.getSeconds(),t,2)}function rPt(e){var t=e.getDay();return t===0?7:t}function iPt(e,t){return sr(qE.count(Vd(e)-1,e),t,2)}function w$e(e){var t=e.getDay();return t>=4||t===0?Ow(e):Ow.ceil(e)}function sPt(e,t){return e=w$e(e),sr(Ow.count(Vd(e),e)+(Vd(e).getDay()===4),t,2)}function oPt(e){return e.getDay()}function aPt(e,t){return sr(KD.count(Vd(e)-1,e),t,2)}function uPt(e,t){return sr(e.getFullYear()%100,t,2)}function lPt(e,t){return e=w$e(e),sr(e.getFullYear()%100,t,2)}function cPt(e,t){return sr(e.getFullYear()%1e4,t,4)}function fPt(e,t){var n=e.getDay();return e=n>=4||n===0?Ow(e):Ow.ceil(e),sr(e.getFullYear()%1e4,t,4)}function dPt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function tpe(e,t){return sr(e.getUTCDate(),t,2)}function hPt(e,t){return sr(e.getUTCHours(),t,2)}function pPt(e,t){return sr(e.getUTCHours()%12||12,t,2)}function mPt(e,t){return sr(1+$g.count(Hd(e),e),t,3)}function E$e(e,t){return sr(e.getUTCMilliseconds(),t,3)}function gPt(e,t){return E$e(e,t)+"000"}function yPt(e,t){return sr(e.getUTCMonth()+1,t,2)}function vPt(e,t){return sr(e.getUTCMinutes(),t,2)}function _Pt(e,t){return sr(e.getUTCSeconds(),t,2)}function bPt(e){var t=e.getUTCDay();return t===0?7:t}function wPt(e,t){return sr(WE.count(Hd(e)-1,e),t,2)}function x$e(e){var t=e.getUTCDay();return t>=4||t===0?Pw(e):Pw.ceil(e)}function EPt(e,t){return e=x$e(e),sr(Pw.count(Hd(e),e)+(Hd(e).getUTCDay()===4),t,2)}function xPt(e){return e.getUTCDay()}function SPt(e,t){return sr(XD.count(Hd(e)-1,e),t,2)}function TPt(e,t){return sr(e.getUTCFullYear()%100,t,2)}function CPt(e,t){return e=x$e(e),sr(e.getUTCFullYear()%100,t,2)}function APt(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function IPt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pw(e):Pw.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function OPt(){return"+0000"}function npe(){return"%"}function rpe(e){return+e}function ipe(e){return Math.floor(+e/1e3)}var E_,NK,S$e,C4,T$e;PPt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PPt(e){return E_=_$e(e),NK=E_.format,S$e=E_.parse,C4=E_.utcFormat,T$e=E_.utcParse,E_}function kPt(e){return new Date(e)}function $Pt(e){return e instanceof Date?+e:+new Date(+e)}function DK(e,t,n,r,i,s,o,a,u,l){var c=a$e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),b=l("%Y");function E(w){return(u(w)<w?h:a(w)<w?p:o(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?y:v:n(w)<w?_:b)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,$Pt)):d().map(kPt)},c.ticks=function(w){var x=d();return e(x[0],x[x.length-1],w??10)},c.tickFormat=function(w,x){return x==null?E:l(x)},c.nice=function(w){var x=d();return(!w||typeof w.range!="function")&&(w=t(x[0],x[x.length-1],w??10)),w?d(c$e(x,w)):c},c.copy=function(){return dI(c,DK(e,t,n,r,i,s,o,a,u,l))},c}function C$e(){return Cf.apply(DK(OOt,POt,Vd,SC,qE,yp,S4,E4,op,NK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RPt(){return Cf.apply(DK(AOt,IOt,Hd,TC,WE,$g,T4,x4,op,C4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function A4(){var e=0,t=1,n,r,i,s,o=hu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(am),l.rangeRound=c(uI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function j0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function MK(){var e=Bv(A4()(hu));return e.copy=function(){return j0(e,MK())},B0.apply(e,arguments)}function A$e(){var e=OK(A4()).domain([1,10]);return e.copy=function(){return j0(e,A$e()).base(e.base())},B0.apply(e,arguments)}function I$e(){var e=PK(A4());return e.copy=function(){return j0(e,I$e()).constant(e.constant())},B0.apply(e,arguments)}function LK(){var e=kK(A4());return e.copy=function(){return j0(e,LK()).exponent(e.exponent())},B0.apply(e,arguments)}function NPt(){return LK.apply(null,arguments).exponent(.5)}function I4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=hu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=_K(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(am),h.rangeRound=p(uI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function O$e(){var e=Bv(I4()(hu));return e.copy=function(){return j0(e,O$e())},B0.apply(e,arguments)}function P$e(){var e=OK(I4()).domain([.1,1,10]);return e.copy=function(){return j0(e,P$e()).base(e.base())},B0.apply(e,arguments)}function k$e(){var e=PK(I4());return e.copy=function(){return j0(e,k$e()).constant(e.constant())},B0.apply(e,arguments)}function FK(){var e=kK(I4());return e.copy=function(){return j0(e,FK()).exponent(e.exponent())},B0.apply(e,arguments)}function DPt(){return FK.apply(null,arguments).exponent(.5)}function MPt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const $$e=MPt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function yn(e){return function(){return e}}const spe=Math.abs,Ro=Math.atan2,ly=Math.cos,LPt=Math.max,FB=Math.min,Lf=Math.sin,e1=Math.sqrt,Lo=1e-12,kw=Math.PI,QD=kw/2,s2=2*kw;function FPt(e){return e>1?0:e<-1?kw:Math.acos(e)}function ope(e){return e>=1?QD:e<=-1?-QD:Math.asin(e)}function O4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new SK(t)}function BPt(e){return e.innerRadius}function jPt(e){return e.outerRadius}function zPt(e){return e.startAngle}function UPt(e){return e.endAngle}function VPt(e){return e&&e.padAngle}function HPt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Lo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function OP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/e1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,b=v*v+_*_,E=i-s,w=d*m-p*h,x=(_<0?-1:1)*e1(LPt(0,E*E*b-w*w)),S=(w*_-v*x)/b,P=(-w*v-_*x)/b,A=(w*_+v*x)/b,O=(-w*v+_*x)/b,z=S-g,D=P-y,R=A-g,N=O-y;return z*z+D*D>R*R+N*N&&(S=A,P=O),{cx:S,cy:P,x01:-c,y01:-f,x11:S*(i/E-1),y11:P*(i/E-1)}}function aV(){var e=BPt,t=jPt,n=yn(0),r=null,i=zPt,s=UPt,o=VPt,a=null,u=O4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-QD,m=s.apply(this,arguments)-QD,g=spe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Lo))a.moveTo(0,0);else if(g>s2-Lo)a.moveTo(h*ly(p),h*Lf(p)),a.arc(0,0,h,p,m,!y),d>Lo&&(a.moveTo(d*ly(m),d*Lf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,b=p,E=m,w=g,x=g,S=o.apply(this,arguments)/2,P=S>Lo&&(r?+r.apply(this,arguments):e1(d*d+h*h)),A=FB(spe(h-d)/2,+n.apply(this,arguments)),O=A,z=A,D,R;if(P>Lo){var N=ope(P/d*Lf(S)),L=ope(P/h*Lf(S));(w-=N*2)>Lo?(N*=y?1:-1,b+=N,E-=N):(w=0,b=E=(p+m)/2),(x-=L*2)>Lo?(L*=y?1:-1,v+=L,_-=L):(x=0,v=_=(p+m)/2)}var V=h*ly(v),j=h*Lf(v),H=d*ly(E),U=d*Lf(E);if(A>Lo){var k=h*ly(_),$=h*Lf(_),q=d*ly(b),F=d*Lf(b),B;if(g<kw)if(B=HPt(V,j,q,F,k,$,H,U)){var Q=V-B[0],se=j-B[1],ae=k-B[0],ce=$-B[1],le=1/Lf(FPt((Q*ae+se*ce)/(e1(Q*Q+se*se)*e1(ae*ae+ce*ce)))/2),ge=e1(B[0]*B[0]+B[1]*B[1]);O=FB(A,(d-ge)/(le-1)),z=FB(A,(h-ge)/(le+1))}else O=z=0}x>Lo?z>Lo?(D=OP(q,F,V,j,h,z,y),R=OP(k,$,H,U,h,z,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),z<A?a.arc(D.cx,D.cy,z,Ro(D.y01,D.x01),Ro(R.y01,R.x01),!y):(a.arc(D.cx,D.cy,z,Ro(D.y01,D.x01),Ro(D.y11,D.x11),!y),a.arc(0,0,h,Ro(D.cy+D.y11,D.cx+D.x11),Ro(R.cy+R.y11,R.cx+R.x11),!y),a.arc(R.cx,R.cy,z,Ro(R.y11,R.x11),Ro(R.y01,R.x01),!y))):(a.moveTo(V,j),a.arc(0,0,h,v,_,!y)):a.moveTo(V,j),!(d>Lo)||!(w>Lo)?a.lineTo(H,U):O>Lo?(D=OP(H,U,k,$,d,-O,y),R=OP(V,j,q,F,d,-O,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),O<A?a.arc(D.cx,D.cy,O,Ro(D.y01,D.x01),Ro(R.y01,R.x01),!y):(a.arc(D.cx,D.cy,O,Ro(D.y01,D.x01),Ro(D.y11,D.x11),!y),a.arc(0,0,d,Ro(D.cy+D.y11,D.cx+D.x11),Ro(R.cy+R.y11,R.cx+R.x11),y),a.arc(R.cx,R.cy,O,Ro(R.y11,R.x11),Ro(R.y01,R.x01),!y))):a.arc(0,0,d,E,b,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-kw/2;return[ly(f)*c,Lf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:yn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:yn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:yn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:yn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:yn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:yn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:yn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function P4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function R$e(e){this._context=e}R$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function BK(e){return new R$e(e)}function N$e(e){return e[0]}function D$e(e){return e[1]}function M$e(e,t){var n=yn(!0),r=null,i=BK,s=null,o=O4(a);e=typeof e=="function"?e:e===void 0?N$e:yn(e),t=typeof t=="function"?t:t===void 0?D$e:yn(t);function a(u){var l,c=(u=P4(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:yn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:yn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:yn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function L$e(e,t,n){var r=null,i=yn(!0),s=null,o=BK,a=null,u=O4(l);e=typeof e=="function"?e:e===void 0?N$e:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?D$e:yn(+n);function l(f){var d,h,p,m=(f=P4(f)).length,g,y=!1,v,_=new Array(m),b=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),b[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return M$e().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function qPt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function WPt(e){return e}function GPt(){var e=WPt,t=qPt,n=null,r=yn(0),i=yn(s2),s=yn(0);function o(a){var u,l=(a=P4(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(s2,Math.max(-s2,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),b;for(u=0;u<l;++u)(b=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=b);for(t!=null?h.sort(function(E,w){return t(p[E],p[w])}):n!=null&&h.sort(function(E,w){return n(a[E],a[w])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],b=p[c],y=m+(b>0?b*f:0)+_,p[c]={data:a[c],index:u,value:b,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:yn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:yn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:yn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:yn(+a),o):s},o}const YPt={draw(e,t){const n=e1(t/kw);e.moveTo(n,0),e.arc(0,0,n,0,s2)}};function KPt(e,t){let n=null,r=O4(i);e=typeof e=="function"?e:yn(e||YPt),t=typeof t=="function"?t:yn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function t0(){}function JD(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function k4(e){this._context=e}k4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:JD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:JD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XPt(e){return new k4(e)}function F$e(e){this._context=e}F$e.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:JD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function QPt(e){return new F$e(e)}function B$e(e){this._context=e}B$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:JD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function JPt(e){return new B$e(e)}function j$e(e,t){this._basis=new k4(e),this._beta=t}j$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const ZPt=function e(t){function n(r){return t===1?new k4(r):new j$e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function ZD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function jK(e,t){this._context=e,this._k=(1-t)/6}jK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ZD(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ZD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ekt=function e(t){function n(r){return new jK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zK(e,t){this._context=e,this._k=(1-t)/6}zK.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ZD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tkt=function e(t){function n(r){return new zK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function UK(e,t){this._context=e,this._k=(1-t)/6}UK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nkt=function e(t){function n(r){return new UK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function VK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Lo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Lo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function z$e(e,t){this._context=e,this._alpha=t}z$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:VK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rkt=function e(t){function n(r){return t?new z$e(r,t):new jK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function U$e(e,t){this._context=e,this._alpha=t}U$e.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:VK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ikt=function e(t){function n(r){return t?new U$e(r,t):new zK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function V$e(e,t){this._context=e,this._alpha=t}V$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:VK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const skt=function e(t){function n(r){return t?new V$e(r,t):new UK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function H$e(e){this._context=e}H$e.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function okt(e){return new H$e(e)}function ape(e){return e<0?-1:1}function upe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(ape(s)+ape(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function lpe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function BB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function e3(e){this._context=e}e3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BB(this,this._t0,lpe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BB(this,lpe(this,n=upe(this,e,t)),n);break;default:BB(this,this._t0,n=upe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function q$e(e){this._context=new W$e(e)}(q$e.prototype=Object.create(e3.prototype)).point=function(e,t){e3.prototype.point.call(this,t,e)};function W$e(e){this._context=e}W$e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function akt(e){return new e3(e)}function ukt(e){return new q$e(e)}function G$e(e){this._context=e}G$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=cpe(e),i=cpe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cpe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function lkt(e){return new G$e(e)}function $4(e,t){this._context=e,this._t=t}$4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ckt(e){return new $4(e,.5)}function fkt(e){return new $4(e,0)}function dkt(e){return new $4(e,1)}function fpe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function dpe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function hkt(e,t){return e[t]}function pkt(e){const t=[];return t.key=e,t}function mkt(){var e=yn([]),t=dpe,n=fpe,r=hkt;function i(s){var o=Array.from(e.apply(this,arguments),pkt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=P4(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:yn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?dpe:typeof s=="function"?s:yn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??fpe,i):n},i}function sT(e,t,n){this.k=e,this.x=t,this.y=n}sT.prototype={constructor:sT,scale:function(e){return e===1?this:new sT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new sT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sT.prototype;function HK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=C.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=C.useCallback(c=>(s?C4("%B"):VE(".2s"))(c),[s]);return I.jsxs(I.Fragment,{children:[I.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:I.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:I.jsx(Rp,{children:I.jsx(ll,{spacing:3,children:I.jsx(ct,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),I.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?I.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>I.jsxs("g",{transform:`translate(${f}, ${n})`,children:[I.jsx("line",{y2:"6",stroke:"currentColor"}),o?I.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,I.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:I.jsx(Rp,{children:I.jsx(I6,{withinPortal:!0,label:c,children:I.jsx(ct,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const gkt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:HK},Symbol.toStringTag,{value:"Module"}));function Y$e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=C.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return I.jsxs(I.Fragment,{children:[I.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:I.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:I.jsx(Rp,{children:I.jsx(ll,{spacing:3,children:I.jsx(ct,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),I.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?I.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>I.jsxs("g",{transform:`translate(${n}, ${l})`,children:[I.jsx("line",{x2:"-6",stroke:"currentColor"}),s?I.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,I.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:I.jsx("foreignObject",{width:a,height:20,children:I.jsx(ll,{style:{width:"100%",height:"100%"},position:"right",children:I.jsx(ct,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const ykt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:Y$e},Symbol.toStringTag,{value:"Module"})),Al={top:15,left:100,right:50,bottom:50};function uV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=v1(),o=C.useMemo(()=>s-Al.left-Al.right,[s]),a=C.useMemo(()=>i-Al.top-Al.bottom,[i]),u=C.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return HE($$e).domain(d)},[n,t.category]),l=C.useMemo(()=>e?Mp([Al.left,o+Al.left]).domain([0,Hxt(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=C.useMemo(()=>e?fI([Al.top,a+Al.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=C.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:I.jsxs("g",{children:[I.jsx("rect",{x:Al.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Al.left},h),I.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?I.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[I.jsx(HK,{xScale:l,yRange:c.range(),vertPosition:a+Al.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?I.jsx(Y$e,{yScale:c,horizontalPosition:Al.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):I.jsx(kv,{})}const vkt=Object.freeze(Object.defineProperty({__proto__:null,Bar:uV,default:uV},Symbol.toStringTag,{value:"Module"})),nr=Array.isArray;function xu(e){return e!=null?nr(e)?e:[e]:[]}function _kt(e=0,t=1/0){return`${hpe(e)} < row_number() && row_number() <= ${hpe(t)}`}function hpe(e){return e<0?`count() + ${e}`:e}class K$e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(_kt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,xu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function vn(e){throw Error(e)}function Ra(e){return typeof e=="number"}function ti(e){return typeof e=="function"}function R4(e,t){const n=Array(e);if(ti(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let bkt=class extends K$e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){vn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){vn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){vn("Not implemented")}getter(t){vn("Not implemented")}objects(t){vn("Not implemented")}object(t){vn("Not implemented")}[Symbol.iterator](){vn("Not implemented")}print(t={}){Ra(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=R4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},wkt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Ekt=function(e){return e&&ti(e.get)?e:new wkt(e)};function Fp(e){return e instanceof Date}function sa(e){return e===Object(e)}function t3(e){return e instanceof RegExp}function Co(e){return typeof e=="string"}function xkt(e,t){const n=r=>vn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?ppe(e.entries(),t):Fp(e)?n("Date"):t3(e)?n("RegExp"):Co(e)?n():nr(e)?Skt(e,t):ti(e[Symbol.iterator])?Tkt(e,t):sa(e)?ppe(Object.entries(e),t):n()}function ppe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Skt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Tkt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Ckt}=Object.prototype;function hf(e,t){return Ckt.call(e,t)}function Sl(e){return e?new mpe({...e.data()},e.columnNames()):new mpe}class mpe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return hf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Xn=void 0,Akt=Object.getPrototypeOf(Int8Array);function hI(e){return e instanceof Akt}function t1(e){return nr(e)||hI(e)}function Xc(e){return e!=null&&e===e}const mS=e=>t1(e)||Co(e),Ikt={compact:e=>t1(e)?e.filter(t=>Xc(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>mS(e)?e.includes(t,n):!1,indexof:(e,t)=>mS(e)?e.indexOf(t):-1,join:(e,t)=>t1(e)?e.join(t):Xn,lastindexof:(e,t)=>mS(e)?e.lastIndexOf(t):-1,length:e=>mS(e)?e.length:0,pluck:(e,t)=>t1(e)?e.map(n=>Xc(n)?n[t]:Xn):Xn,reverse:e=>t1(e)?e.slice().reverse():Co(e)?e.split("").reverse().join(""):Xn,slice:(e,t,n)=>mS(e)?e.slice(t,n):Xn};function Okt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function h$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Ff=e=>(e<10?"0":"")+e,Pkt=e=>e<0?"-"+h$(-e,6):e>9999?"+"+h$(e,6):h$(e,4);function X$e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return Pkt(e)+"-"+Ff(t+1)+"-"+Ff(n)+(!u||o?"T"+Ff(r)+":"+Ff(i)+":"+Ff(s)+"."+h$(o,3)+l:s?"T"+Ff(r)+":"+Ff(i)+":"+Ff(s)+l:i||r||!a?"T"+Ff(r)+":"+Ff(i)+l:"")}function Q$e(e,t){return isNaN(e)?"Invalid Date":X$e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function N4(e,t){return isNaN(e)?"Invalid Date":X$e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const kkt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function $kt(e){return e.match(kkt)}function Rkt(e,t=Date.parse){return $kt(e)?t(e):e}const J$e=6e4,Z$e=864e5,eRe=6048e5,$i=new Date,Ri=new Date,Ui=e=>($i.setTime(typeof e=="string"?Rkt(e):e),$i);function Nkt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function Dkt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function Mkt(e){Ri.setTime(+e),Ri.setHours(0,0,0,0),$i.setTime(+Ri),$i.setMonth(0),$i.setDate(1);const t=(Ri.getTimezoneOffset()-$i.getTimezoneOffset())*J$e;return Math.floor(1+(Ri-$i-t)/Z$e)}function Lkt(e){Ri.setTime(+e),Ri.setUTCHours(0,0,0,0);const t=Date.UTC(Ri.getUTCFullYear(),0,1);return Math.floor(1+(Ri-t)/Z$e)}function Fkt(e,t){const n=t||0;Ri.setTime(+e),Ri.setDate(Ri.getDate()-(Ri.getDay()+7-n)%7),Ri.setHours(0,0,0,0),$i.setTime(+e),$i.setMonth(0),$i.setDate(1),$i.setDate(1-($i.getDay()+7-n)%7),$i.setHours(0,0,0,0);const r=(Ri.getTimezoneOffset()-$i.getTimezoneOffset())*J$e;return Math.floor((1+(Ri-$i)-r)/eRe)}function Bkt(e,t){const n=t||0;return Ri.setTime(+e),Ri.setUTCDate(Ri.getUTCDate()-(Ri.getUTCDay()+7-n)%7),Ri.setUTCHours(0,0,0,0),$i.setTime(+e),$i.setUTCMonth(0),$i.setUTCDate(1),$i.setUTCDate(1-($i.getUTCDay()+7-n)%7),$i.setUTCHours(0,0,0,0),Math.floor((1+(Ri-$i))/eRe)}const jkt={format_date:(e,t)=>Q$e(Ui(e),!t),format_utcdate:(e,t)=>N4(Ui(e),!t),timestamp:e=>+Ui(e),year:e=>Ui(e).getFullYear(),quarter:e=>Math.floor(Ui(e).getMonth()/3),month:e=>Ui(e).getMonth(),date:e=>Ui(e).getDate(),dayofweek:e=>Ui(e).getDay(),hours:e=>Ui(e).getHours(),minutes:e=>Ui(e).getMinutes(),seconds:e=>Ui(e).getSeconds(),milliseconds:e=>Ui(e).getMilliseconds(),utcyear:e=>Ui(e).getUTCFullYear(),utcquarter:e=>Math.floor(Ui(e).getUTCMonth()/3),utcmonth:e=>Ui(e).getUTCMonth(),utcdate:e=>Ui(e).getUTCDate(),utcdayofweek:e=>Ui(e).getUTCDay(),utchours:e=>Ui(e).getUTCHours(),utcminutes:e=>Ui(e).getUTCMinutes(),utcseconds:e=>Ui(e).getUTCSeconds(),utcmilliseconds:e=>Ui(e).getUTCMilliseconds(),datetime:Nkt,dayofyear:Mkt,week:Fkt,utcdatetime:Dkt,utcdayofyear:Lkt,utcweek:Bkt,now:Date.now};function qK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Fp(e)||Fp(t)?+e==+t:t3(e)&&t3(t)?e+""==t+"":sa(e)&&sa(t)?zkt(e,t):!1}function zkt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return gpe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!gpe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!qK(e[o],t[o]))return!1}return!0}function gpe(e,t,n=qK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Ukt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Vkt=Math.random;function GE(){return Vkt()}const Hkt={random:GE,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function WK(e){return e instanceof Map}function qkt(e){return e instanceof Set}function p$(e){return WK(e)||qkt(e)}function jB(e){return Array.from(e)}const Wkt={has:(e,t)=>p$(e)?e.has(t):e!=null?hf(e,t):!1,keys:e=>WK(e)?jB(e.keys()):e!=null?Object.keys(e):[],values:e=>p$(e)?jB(e.values()):e!=null?Object.values(e):[],entries:e=>p$(e)?jB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Xn};function Gkt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(hf(t,e))return t[e];return n!==void 0?n:e}function Ykt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Kkt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},pb={bin:Okt,equal:qK,recode:Gkt,sequence:Ykt,...Ikt,...jkt,...Ukt,...Hkt,...Wkt,...Kkt};function CC(e){return typeof e=="bigint"}function qd(e){return e===void 0?e+"":CC(e)?e+"n":JSON.stringify(e)}function dn(e,t=[],n=[]){return new Xkt(e,xu(t),xu(n))}let Xkt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${qd(n)}]`),...this.params.map(qd)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const tRe=e=>dn("any",e),nRe=()=>dn("count"),rRe=e=>dn("array_agg",e),iRe=e=>dn("array_agg_distinct",e),sRe=(e,t)=>dn("map_agg",[e,t]),oRe=(e,t)=>dn("object_agg",[e,t]),aRe=(e,t)=>dn("entries_agg",[e,t]);({...pb});function Qkt(e,t){e=p$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Jkt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Zkt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function e$t(e,t,n,r){const i=r==="map"||r===!0?sRe:r==="entries"?aRe:r==="object"?oRe:vn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Qkt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:rRe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const t$t="ArrayPattern",n$t="ArrowFunctionExpression",r$t="FunctionExpression",Rg="Identifier",YE="Literal",uRe="MemberExpression",i$t="ObjectExpression",lRe="ObjectPattern",cRe="Property",pI="Column",s$t="Constant",o$t="Dictionary",a$t="Function",u$t="Parameter",fRe="Op",jr=(e,t)=>{const n=l$t[e.type];return n?n(e,t):vn(`Unsupported expression construct: ${e.type}`)},zB=(e,t)=>"("+jr(e.left,t)+" "+e.operator+" "+jr(e.right,t)+")",UB=(e,t)=>"("+Yf(e.params,t)+")=>"+jr(e.body,t),ype=(e,t)=>jr(e.callee,t)+"("+Yf(e.arguments,t)+")",Yf=(e,t,n=",")=>e.map(r=>jr(r,t)).join(n),dRe=e=>e.computed?`[${qd(e.name)}]`:`.${e.name}`,vpe=(e,t,n)=>{const r=e.table||"";return`data${r}${dRe(e)}.${n}(${t.index}${r})`},l$t={Constant:e=>e.raw,Column:(e,t)=>vpe(e,t,"get"),Dictionary:(e,t)=>vpe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${dRe(e)}`,Op:(e,t)=>`op(${qd(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+jr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=jr(e.object,t),i=jr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:ype,NewExpression:(e,t)=>"new "+ype(e,t),ArrayExpression:(e,t)=>"["+Yf(e.elements,t)+"]",AssignmentExpression:zB,BinaryExpression:zB,LogicalExpression:zB,UnaryExpression:(e,t)=>"("+e.operator+jr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+jr(e.test,t)+"?"+jr(e.consequent,t)+":"+jr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Yf(e.properties,t)+"})",Property:(e,t)=>{const n=jr(e.key,t);return(e.computed?`[${n}]`:n)+":"+jr(e.value,t)},ArrowFunctionExpression:UB,FunctionExpression:UB,FunctionDeclaration:UB,ArrayPattern:(e,t)=>"["+Yf(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Yf(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Yf(e.declarations,t,","),VariableDeclarator:(e,t)=>jr(e.id,t)+"="+jr(e.init,t),SpreadElement:(e,t)=>"..."+jr(e.argument,t),BlockStatement:(e,t)=>"{"+Yf(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>jr(e.expression,t),IfStatement:(e,t)=>"if ("+jr(e.test,t)+")"+jr(e.consequent,t)+(e.alternate?" else "+jr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+jr(e.discriminant,t)+") {"+Yf(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+jr(e.test,t):"default")+": "+Yf(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+jr(e.argument,t),Program:(e,t)=>jr(e.body[0],t)};function n3(e,t={index:"row"}){return jr(e,t)}function c$t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function $w(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Fp(e)?+e:nr(e)||hI(e)?`[${e.map($w)}]`:t3(e)?e+"":f$t(e)}function f$t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${$w(e[r])}`;return t+="}",t}function r3(e,t){const n=e.length;return n===1?(r,i)=>$w(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=$w(a)}return s}}function d$t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=$w(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=$w(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function zh(){}function h$t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function hs(e){return e.init=e.init||zh,e.add=e.add||zh,e.rem=e.rem||zh,e}function _pe(e,t){return e.product_v=!1,e.product=t}const hRe={count:{create:()=>hs({value:e=>e.count}),param:[]},array_agg:{create:()=>hs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>hs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>hs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>hs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>hs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Xn}),param:[1]},valid:{create:()=>hs({value:e=>e.valid}),param:[1]},invalid:{create:()=>hs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=d$t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>hs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>hs({value:e=>{let t=Xn,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Xn,add:(e,t)=>CC(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>_pe(e,1),value:e=>e.valid?e.product_v?_pe(e,h$t(e.list.values())):e.product:void 0,add:(e,t)=>CC(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Xn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>hs({value:e=>e.valid?e.mean:Xn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Xn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>hs({value:e=>e.valid>1?e.dev/e.valid:Xn}),param:[1],req:["variance"]},stdev:{create:()=>hs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Xn}),param:[1],req:["variance"]},stdevp:{create:()=>hs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Xn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Xn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Xn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Xn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Xn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>hs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>hs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Xn,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>hs({value:e=>e.valid>1?e.cov/e.valid:Xn}),param:[2],req:["covariance"]},corr:{create:()=>hs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Xn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>hs({value:i=>c$t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},bpe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},wpe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},pRe={row_number:{create(){return{init:zh,value:e=>e.index+1}},param:[]},rank:bpe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=bpe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:wpe,ntile:{create(e){e=+e,e>0||vn("ntile num must be greater than zero.");const{init:t,value:n}=wpe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Xn){return e=+e||1,{init:zh,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Xn){return e=+e||1,{init:zh,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:zh,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:zh,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||vn("nth_value nth must be greater than zero."),{init:zh,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Xn}}},param:[1,1]},fill_down:{create(e=Xn){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Xc(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Xn){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=p$t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function p$t(e,t,n){for(const r=e.size;n<r;++n)if(Xc(e.value(n,t)))return n;return-1}function GK(e){return hf(hRe,e)}function YK(e){return hf(pRe,e)}function mRe(e){return hf(pb,e)||e==="row_object"}function gRe(e){return GK(e)&&hRe[e]}function yRe(e){return YK(e)&&pRe[e]}function gS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const KK={escape:(e,t,n)=>gS(e,t,n),expr:(e,t)=>gS(`(row,data,op)=>${e}`,pb,t),expr2:(e,t)=>gS(`(row0,data0,row,data)=>${e}`,pb,t),join:(e,t)=>gS(`(row1,data1,row2,data2)=>${e}`,pb,t),param:(e,t)=>gS(e,pb,t)},m$t={"==":1,"!=":1,"===":1,"!==":1};function vRe(e,t,n=0,r,i){if(e.type=pI,e.name=t,e.table=n,i&&r&&ti(r.keyFor)){const s=m$t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===YE&&g$t(i,e,s,r.keyFor(s.value))}return e}function g$t(e,t,n,r){return r<0?(e.type=YE,e.value=!1,e.raw="false"):(t.type=o$t,n.value=r,n.raw=r+""),!0}function D4(e){return nr(e)?e:WK(e)?e.entries():e?Object.entries(e):[]}const _Re="row_object";function bRe(e,t){e.type=i$t;const n=e.properties=[];for(const r of D4(t)){const[i,s]=nr(r)?r:[r,r];n.push({type:cRe,key:{type:YE,raw:qd(s)},value:vRe({computed:!0},i)})}return e}function wRe(e){return n3(bRe({},e))}function ERe(e){return KK.expr(wRe(e))}function XK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Gh(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Epe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(e){return this instanceof Bn?(this.v=e,this):new Bn(e)}function n1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof Bn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function VB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Bn(e[i](o)),done:!1}:s?s(o):o}:s}}function o2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Epe=="function"?Epe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const y$t=new TextDecoder("utf-8"),lV=e=>y$t.decode(e),v$t=new TextEncoder,QK=e=>v$t.encode(e),[gTn,xRe]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Uv,yTn]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Vv,vTn]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),_$t=e=>typeof e=="boolean",eu=e=>typeof e=="function",z0=e=>e!=null&&Object(e)===e,M4=e=>z0(e)&&eu(e.then),JK=e=>z0(e)&&eu(e[Symbol.iterator]),L4=e=>z0(e)&&eu(e[Symbol.asyncIterator]),b$t=e=>z0(e)&&"done"in e&&"value"in e,SRe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,w$t=e=>z0(e)&&eu(e.abort)&&eu(e.getWriter)&&!SRe(e),E$t=e=>z0(e)&&eu(e.end)&&eu(e.write)&&_$t(e.writable)&&!SRe(e),x$t=e=>z0(e)&&eu(e.clear)&&eu(e.bytes)&&eu(e.position)&&eu(e.setPosition)&&eu(e.capacity)&&eu(e.getBufferIdentifier)&&eu(e.createLong),ZK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function S$t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function i3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Wd(e,t){const n=S$t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?i3(o,s,a):o=s;break}i3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function uo(e,t){let n=b$t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=QK(n)),n instanceof ArrayBuffer?new e(n):n instanceof ZK?new e(n):x$t(n)?uo(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const yS=e=>uo(Int32Array,e),vr=e=>uo(Uint8Array,e),cV=e=>(e.next(),e);function*T$t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof ZK?n(t):JK(t)?t:n(t);return yield*cV(function*(i){let s=null;do s=i.next(yield uo(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const C$t=e=>T$t(Uint8Array,e);function TRe(e,t){return n1(this,arguments,function*(){if(M4(t))return yield Bn(yield Bn(yield*VB(o2(TRe(e,yield Bn(t))))));const r=function(o){return n1(this,arguments,function*(){yield yield Bn(yield Bn(o))})},i=function(o){return n1(this,arguments,function*(){yield Bn(yield*VB(o2(cV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof ZK?r(t):JK(t)?i(t):L4(t)?t:r(t);return yield Bn(yield*VB(o2(cV(function(o){return n1(this,arguments,function*(){let a=null;do a=yield Bn(o.next(yield yield Bn(uo(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Bn(new e)})}const A$t=e=>TRe(Uint8Array,e);function eX(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function I$t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const xpe={fromIterable(e){return PP(O$t(e))},fromAsyncIterable(e){return PP(P$t(e))},fromDOMStream(e){return PP(k$t(e))},fromNodeStream(e){return PP(R$t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},PP=e=>(e.next(),e);function*O$t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Wd(r,o)[0]:([i,r,a]=Wd(r,o),i)}({cmd:s,size:o}=yield null);const l=C$t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function P$t(e){return n1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Wd(i,a)[0]:([s,i,u]=Wd(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=A$t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.next()):yield Bn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Bn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Bn(c.return(new Uint8Array(0))))}return yield Bn(null)})}function k$t(e){return n1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Wd(i,a)[0]:([s,i,u]=Wd(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=new $$t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.read()):yield Bn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(vr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Bn(c.cancel(f)))}finally{r===!1?yield Bn(c.cancel()):e.locked&&c.releaseLock()}return yield Bn(null)})}class $$t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Gh(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Gh(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=vr(n)),n})}}const HB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function R$t(e){return n1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Wd(l,a)[0]:([c,l,u]=Wd(l,a),c)}if({cmd:o,size:a}=yield yield Bn(null),e.isTTY)return yield yield Bn(new Uint8Array(0)),yield Bn(null);try{n[0]=HB(e,"end"),n[1]=HB(e,"error");do{if(n[2]=HB(e,"readable"),[r,s]=yield Bn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=vr(e.read(a-u)),c.byteLength<a-u&&(c=vr(e.read()))):c=vr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Bn(f()));while(a<u)}while(!i)}finally{yield Bn(d(n,r==="error"?s:null))}return yield Bn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Xu;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Xu||(Xu={}));var rc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(rc||(rc={}));var _o;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(_o||(_o={}));var Gd;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Gd||(Gd={}));var jn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jn||(jn={}));var Yd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Yd||(Yd={}));var Fs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Fs||(Fs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(re||(re={}));var Mh;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Mh||(Mh={}));const N$t=void 0;function Ng(e){if(e===null)return"null";if(e===N$t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Uv||e instanceof Vv?`[${[...e].map(t=>Ng(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const D$t=Symbol.for("isArrowBigNum");function Af(e,...t){return t.length===0?Object.setPrototypeOf(uo(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Af.prototype[D$t]=!0;Af.prototype.toJSON=function(){return`"${T1(this)}"`};Af.prototype.valueOf=function(){return CRe(this)};Af.prototype.toString=function(){return T1(this)};Af.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return CRe(this);case"string":return T1(this);case"default":return fV(this)}return T1(this)};function Vb(...e){return Af.apply(this,e)}function Hb(...e){return Af.apply(this,e)}function AC(...e){return Af.apply(this,e)}Object.setPrototypeOf(Vb.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Hb.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(AC.prototype,Object.create(Uint32Array.prototype));Object.assign(Vb.prototype,Af.prototype,{constructor:Vb,signed:!0,TypedArray:Int32Array,BigIntArray:Uv});Object.assign(Hb.prototype,Af.prototype,{constructor:Hb,signed:!1,TypedArray:Uint32Array,BigIntArray:Vv});Object.assign(AC.prototype,Af.prototype,{constructor:AC,signed:!0,TypedArray:Uint32Array,BigIntArray:Vv});function CRe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Vv(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let T1,fV;xRe?(fV=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:qB(e),T1=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:qB(e)):(T1=qB,fV=T1);function qB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class tX{static new(t,n){switch(n){case!0:return new Vb(t);case!1:return new Hb(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Uv:return new Vb(t)}return t.byteLength===16?new AC(t):new Hb(t)}static signed(t){return new Vb(t)}static unsigned(t){return new Hb(t)}static decimal(t){return new AC(t)}constructor(t,n){return tX.new(t,n)}}var ARe,IRe,ORe,PRe,kRe,$Re,RRe,NRe,DRe,MRe,LRe,FRe,BRe,jRe,zRe,URe,VRe,HRe,qRe;class Pn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Pn.isUnion(t)&&t.mode===rc.Dense}static isSparseUnion(t){return Pn.isUnion(t)&&t.mode===rc.Sparse}get typeId(){return re.NONE}}ARe=Symbol.toStringTag;Pn[ARe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Pn.prototype);let Bp=class extends Pn{toString(){return"Null"}get typeId(){return re.Null}};IRe=Symbol.toStringTag;Bp[IRe]=(e=>e[Symbol.toStringTag]="Null")(Bp.prototype);class Na extends Pn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Uv:Vv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ORe=Symbol.toStringTag;Na[ORe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Na.prototype);class nX extends Na{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class rX extends Na{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class n0 extends Na{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class iX extends Na{constructor(){super(!0,64)}get ArrayType(){return Uv}}class sX extends Na{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class oX extends Na{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class aX extends Na{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class uX extends Na{constructor(){super(!1,64)}get ArrayType(){return Vv}}Object.defineProperty(nX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(rX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(n0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(iX.prototype,"ArrayType",{value:Uv});Object.defineProperty(sX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(oX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(aX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(uX.prototype,"ArrayType",{value:Vv});class r0 extends Pn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case _o.HALF:return Uint16Array;case _o.SINGLE:return Float32Array;case _o.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}PRe=Symbol.toStringTag;r0[PRe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(r0.prototype);class WRe extends r0{constructor(){super(_o.HALF)}}class lX extends r0{constructor(){super(_o.SINGLE)}}class cX extends r0{constructor(){super(_o.DOUBLE)}}Object.defineProperty(WRe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(lX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(cX.prototype,"ArrayType",{value:Float64Array});let IC=class extends Pn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};kRe=Symbol.toStringTag;IC[kRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(IC.prototype);let Rw=class extends Pn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};$Re=Symbol.toStringTag;Rw[$Re]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Rw.prototype);let OC=class extends Pn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};RRe=Symbol.toStringTag;OC[RRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(OC.prototype);let s3=class extends Pn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};NRe=Symbol.toStringTag;s3[NRe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(s3.prototype);class Nw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Gd[this.unit]}>`}}DRe=Symbol.toStringTag;Nw[DRe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Nw.prototype);class M$t extends Nw{constructor(){super(Gd.DAY)}}class L$t extends Nw{constructor(){super(Gd.MILLISECOND)}}class jp extends Pn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${jn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Uv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}MRe=Symbol.toStringTag;jp[MRe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(jp.prototype);class F$t extends jp{constructor(){super(jn.SECOND,32)}}class B$t extends jp{constructor(){super(jn.MILLISECOND,32)}}class j$t extends jp{constructor(){super(jn.MICROSECOND,64)}}class z$t extends jp{constructor(){super(jn.NANOSECOND,64)}}class o3 extends Pn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${jn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}LRe=Symbol.toStringTag;o3[LRe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(o3.prototype);class Dw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Yd[this.unit]}>`}}FRe=Symbol.toStringTag;Dw[FRe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Dw.prototype);class U$t extends Dw{constructor(){super(Yd.DAY_TIME)}}class V$t extends Dw{constructor(){super(Yd.YEAR_MONTH)}}let Mw=class extends Pn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};BRe=Symbol.toStringTag;Mw[BRe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Mw.prototype);class Wo extends Pn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}jRe=Symbol.toStringTag;Wo[jRe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Wo.prototype);class PC extends Pn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}zRe=Symbol.toStringTag;PC[zRe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(PC.prototype);let a3=class extends Pn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};URe=Symbol.toStringTag;a3[URe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(a3.prototype);let Lw=class extends Pn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};VRe=Symbol.toStringTag;Lw[VRe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Lw.prototype);class kC extends Pn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}HRe=Symbol.toStringTag;kC[HRe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(kC.prototype);const H$t=(e=>()=>++e)(-1);class i0 extends Pn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?H$t():typeof r=="number"?r:r.low}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}qRe=Symbol.toStringTag;i0[qRe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(i0.prototype);function Qf(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Vn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return q$t(this,t,n)}getVisitFnByTypeId(t,n=!0){return U_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function q$t(e,t,n=!0){return typeof t=="number"?U_(e,t,n):typeof t=="string"&&t in re?U_(e,re[t],n):t&&t instanceof Pn?U_(e,Spe(t),n):t!=null&&t.type&&t.type instanceof Pn?U_(e,Spe(t.type),n):U_(e,re.NONE,n)}function U_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Spe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case _o.HALF:return re.Float16;case _o.SINGLE:return re.Float32;case _o.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case jn.SECOND:return re.TimeSecond;case jn.MILLISECOND:return re.TimeMillisecond;case jn.MICROSECOND:return re.TimeMicrosecond;case jn.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case jn.SECOND:return re.TimestampSecond;case jn.MILLISECOND:return re.TimestampMillisecond;case jn.MICROSECOND:return re.TimestampMicrosecond;case jn.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Gd.DAY:return re.DateDay;case Gd.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Yd.DAY_TIME:return re.IntervalDayTime;case Yd.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case rc.Dense:return re.DenseUnion;case rc.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Vn.prototype.visitInt8=null;Vn.prototype.visitInt16=null;Vn.prototype.visitInt32=null;Vn.prototype.visitInt64=null;Vn.prototype.visitUint8=null;Vn.prototype.visitUint16=null;Vn.prototype.visitUint32=null;Vn.prototype.visitUint64=null;Vn.prototype.visitFloat16=null;Vn.prototype.visitFloat32=null;Vn.prototype.visitFloat64=null;Vn.prototype.visitDateDay=null;Vn.prototype.visitDateMillisecond=null;Vn.prototype.visitTimestampSecond=null;Vn.prototype.visitTimestampMillisecond=null;Vn.prototype.visitTimestampMicrosecond=null;Vn.prototype.visitTimestampNanosecond=null;Vn.prototype.visitTimeSecond=null;Vn.prototype.visitTimeMillisecond=null;Vn.prototype.visitTimeMicrosecond=null;Vn.prototype.visitTimeNanosecond=null;Vn.prototype.visitDenseUnion=null;Vn.prototype.visitSparseUnion=null;Vn.prototype.visitIntervalDayTime=null;Vn.prototype.visitIntervalYearMonth=null;const GRe=new Float64Array(1),x_=new Uint32Array(GRe.buffer);function YRe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function KRe(e){if(e!==e)return 32256;GRe[0]=e;const t=(x_[1]&2147483648)>>16&65535;let n=x_[1]&2146435072,r=0;return n>=1089470464?x_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(x_[1]&1048575)>>10):n<=1056964608?(r=1048576+(x_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(x_[1]&1048575)+512>>10),t|n|r&65535}class un extends Vn{}function mn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const W$t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},fX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},G$t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Y$t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},XRe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},K$t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},um=({values:e},t,n)=>{e[t]=n},dX=({values:e},t,n)=>{e[t]=n},QRe=({values:e},t,n)=>{e[t]=KRe(n)},X$t=(e,t,n)=>{switch(e.type.precision){case _o.HALF:return QRe(e,t,n);case _o.SINGLE:case _o.DOUBLE:return dX(e,t,n)}},hX=({values:e},t,n)=>{W$t(e,t,n.valueOf())},pX=({values:e},t,n)=>{fX(e,t*2,n.valueOf())},JRe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},Q$t=({values:e,valueOffsets:t},n,r)=>XRe(e,t,n,r),J$t=({values:e,valueOffsets:t},n,r)=>{XRe(e,t,n,QK(r))},ZRe=(e,t,n)=>{e.type.unit===Gd.DAY?hX(e,t,n):pX(e,t,n)},mX=({values:e},t,n)=>fX(e,t*2,n/1e3),gX=({values:e},t,n)=>fX(e,t*2,n),yX=({values:e},t,n)=>G$t(e,t*2,n),vX=({values:e},t,n)=>Y$t(e,t*2,n),eNe=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return mX(e,t,n);case jn.MILLISECOND:return gX(e,t,n);case jn.MICROSECOND:return yX(e,t,n);case jn.NANOSECOND:return vX(e,t,n)}},_X=({values:e},t,n)=>{e[t]=n},bX=({values:e},t,n)=>{e[t]=n},wX=({values:e},t,n)=>{e[t]=n},EX=({values:e},t,n)=>{e[t]=n},tNe=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return _X(e,t,n);case jn.MILLISECOND:return bX(e,t,n);case jn.MICROSECOND:return wX(e,t,n);case jn.NANOSECOND:return EX(e,t,n)}},nNe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Z$t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ic.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},eRt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ic.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},tRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),nRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),rRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),iRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),sRt=(e,t,n)=>{const r=e.type.children.map(s=>ic.getVisitFn(s.type)),i=n instanceof Map?rRt(t,n):n instanceof rr?nRt(t,n):Array.isArray(n)?tRt(t,n):iRt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},oRt=(e,t,n)=>{e.type.mode===rc.Dense?rNe(e,t,n):iNe(e,t,n)},rNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ic.visit(i,e.valueOffsets[t],n)},iNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ic.visit(i,t,n)},aRt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},sNe=(e,t,n)=>{e.type.unit===Yd.DAY_TIME?xX(e,t,n):SX(e,t,n)},xX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},SX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},uRt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ic.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};un.prototype.visitBool=mn(K$t);un.prototype.visitInt=mn(um);un.prototype.visitInt8=mn(um);un.prototype.visitInt16=mn(um);un.prototype.visitInt32=mn(um);un.prototype.visitInt64=mn(um);un.prototype.visitUint8=mn(um);un.prototype.visitUint16=mn(um);un.prototype.visitUint32=mn(um);un.prototype.visitUint64=mn(um);un.prototype.visitFloat=mn(X$t);un.prototype.visitFloat16=mn(QRe);un.prototype.visitFloat32=mn(dX);un.prototype.visitFloat64=mn(dX);un.prototype.visitUtf8=mn(J$t);un.prototype.visitBinary=mn(Q$t);un.prototype.visitFixedSizeBinary=mn(JRe);un.prototype.visitDate=mn(ZRe);un.prototype.visitDateDay=mn(hX);un.prototype.visitDateMillisecond=mn(pX);un.prototype.visitTimestamp=mn(eNe);un.prototype.visitTimestampSecond=mn(mX);un.prototype.visitTimestampMillisecond=mn(gX);un.prototype.visitTimestampMicrosecond=mn(yX);un.prototype.visitTimestampNanosecond=mn(vX);un.prototype.visitTime=mn(tNe);un.prototype.visitTimeSecond=mn(_X);un.prototype.visitTimeMillisecond=mn(bX);un.prototype.visitTimeMicrosecond=mn(wX);un.prototype.visitTimeNanosecond=mn(EX);un.prototype.visitDecimal=mn(nNe);un.prototype.visitList=mn(Z$t);un.prototype.visitStruct=mn(sRt);un.prototype.visitUnion=mn(oRt);un.prototype.visitDenseUnion=mn(rNe);un.prototype.visitSparseUnion=mn(iNe);un.prototype.visitDictionary=mn(aRt);un.prototype.visitInterval=mn(sNe);un.prototype.visitIntervalDayTime=mn(xX);un.prototype.visitIntervalYearMonth=mn(SX);un.prototype.visitFixedSizeList=mn(uRt);un.prototype.visitMap=mn(eRt);const ic=new un,Fc=Symbol.for("parent"),qb=Symbol.for("rowIndex");class TX{constructor(t,n){return this[Fc]=t,this[qb]=n,new Proxy(this,new cRt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[qb],n=this[Fc],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Su.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Ng(t)}: ${Ng(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new lRt(this[Fc],this[qb])}}class lRt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Su.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(TX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Fc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[qb]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class cRt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Fc].type.children.map(n=>n.name)}has(t,n){return t[Fc].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Fc].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Fc].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Su.visit(t[Fc].children[r],t[qb]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Fc].type.children.findIndex(s=>s.name===n);return i!==-1?(ic.visit(t[Fc].children[i],t[qb],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class nn extends Vn{}function ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const fRt=(e,t)=>864e5*e[t],CX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),dRt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,hRt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,oNe=e=>new Date(e),pRt=(e,t)=>oNe(fRt(e,t)),mRt=(e,t)=>oNe(CX(e,t)),gRt=(e,t)=>null,aNe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},yRt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},uNe=({values:e},t)=>pRt(e,t),lNe=({values:e},t)=>mRt(e,t*2),U0=({stride:e,values:t},n)=>t[e*n],vRt=({stride:e,values:t},n)=>YRe(t[e*n]),cNe=({values:e},t)=>e[t],_Rt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),bRt=({values:e,valueOffsets:t},n)=>aNe(e,t,n),wRt=({values:e,valueOffsets:t},n)=>{const r=aNe(e,t,n);return r!==null?lV(r):null},ERt=({values:e},t)=>e[t],xRt=({type:e,values:t},n)=>e.precision!==_o.HALF?t[n]:YRe(t[n]),SRt=(e,t)=>e.type.unit===Gd.DAY?uNe(e,t):lNe(e,t),fNe=({values:e},t)=>1e3*CX(e,t*2),dNe=({values:e},t)=>CX(e,t*2),hNe=({values:e},t)=>dRt(e,t*2),pNe=({values:e},t)=>hRt(e,t*2),TRt=(e,t)=>{switch(e.type.unit){case jn.SECOND:return fNe(e,t);case jn.MILLISECOND:return dNe(e,t);case jn.MICROSECOND:return hNe(e,t);case jn.NANOSECOND:return pNe(e,t)}},mNe=({values:e},t)=>e[t],gNe=({values:e},t)=>e[t],yNe=({values:e},t)=>e[t],vNe=({values:e},t)=>e[t],CRt=(e,t)=>{switch(e.type.unit){case jn.SECOND:return mNe(e,t);case jn.MILLISECOND:return gNe(e,t);case jn.MICROSECOND:return yNe(e,t);case jn.NANOSECOND:return vNe(e,t)}},ARt=({values:e,stride:t},n)=>tX.decimal(e.subarray(t*n,t*(n+1))),IRt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new rr([u])},ORt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new F4(o.slice(i,s-i))},PRt=(e,t)=>new TX(e,t),kRt=(e,t)=>e.type.mode===rc.Dense?_Ne(e,t):bNe(e,t),_Ne=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Su.visit(r,e.valueOffsets[t])},bNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Su.visit(r,t)},$Rt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},RRt=(e,t)=>e.type.unit===Yd.DAY_TIME?wNe(e,t):ENe(e,t),wNe=({values:e},t)=>e.subarray(2*t,2*(t+1)),ENe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},NRt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new rr([s])};nn.prototype.visitNull=ln(gRt);nn.prototype.visitBool=ln(yRt);nn.prototype.visitInt=ln(ERt);nn.prototype.visitInt8=ln(U0);nn.prototype.visitInt16=ln(U0);nn.prototype.visitInt32=ln(U0);nn.prototype.visitInt64=ln(cNe);nn.prototype.visitUint8=ln(U0);nn.prototype.visitUint16=ln(U0);nn.prototype.visitUint32=ln(U0);nn.prototype.visitUint64=ln(cNe);nn.prototype.visitFloat=ln(xRt);nn.prototype.visitFloat16=ln(vRt);nn.prototype.visitFloat32=ln(U0);nn.prototype.visitFloat64=ln(U0);nn.prototype.visitUtf8=ln(wRt);nn.prototype.visitBinary=ln(bRt);nn.prototype.visitFixedSizeBinary=ln(_Rt);nn.prototype.visitDate=ln(SRt);nn.prototype.visitDateDay=ln(uNe);nn.prototype.visitDateMillisecond=ln(lNe);nn.prototype.visitTimestamp=ln(TRt);nn.prototype.visitTimestampSecond=ln(fNe);nn.prototype.visitTimestampMillisecond=ln(dNe);nn.prototype.visitTimestampMicrosecond=ln(hNe);nn.prototype.visitTimestampNanosecond=ln(pNe);nn.prototype.visitTime=ln(CRt);nn.prototype.visitTimeSecond=ln(mNe);nn.prototype.visitTimeMillisecond=ln(gNe);nn.prototype.visitTimeMicrosecond=ln(yNe);nn.prototype.visitTimeNanosecond=ln(vNe);nn.prototype.visitDecimal=ln(ARt);nn.prototype.visitList=ln(IRt);nn.prototype.visitStruct=ln(PRt);nn.prototype.visitUnion=ln(kRt);nn.prototype.visitDenseUnion=ln(_Ne);nn.prototype.visitSparseUnion=ln(bNe);nn.prototype.visitDictionary=ln($Rt);nn.prototype.visitInterval=ln(RRt);nn.prototype.visitIntervalDayTime=ln(wNe);nn.prototype.visitIntervalYearMonth=ln(ENe);nn.prototype.visitFixedSizeList=ln(NRt);nn.prototype.visitMap=ln(ORt);const Su=new nn,Wc=Symbol.for("keys"),Wb=Symbol.for("vals");class F4{constructor(t){return this[Wc]=new rr([t.children[0]]).memoize(),this[Wb]=t.children[1],new Proxy(this,new MRt)}[Symbol.iterator](){return new DRt(this[Wc],this[Wb])}get size(){return this[Wc].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Wc],n=this[Wb],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Su.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Ng(t)}: ${Ng(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class DRt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Su.visit(this.vals,t)]})}}class MRt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Wc].toArray().map(String)}has(t,n){return t[Wc].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Wc].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Wc].indexOf(n);if(r!==-1){const i=Su.visit(Reflect.get(t,Wb),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Wc].indexOf(n);return i!==-1?(ic.visit(Reflect.get(t,Wb),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(F4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Wb]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Tpe;function xNe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Tpe=s,s=o,o=Tpe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Cpe=e=>e!==e;function KE(e){if(typeof e!=="object"||e===null)return Cpe(e)?Cpe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?I$t(e,n):!1:e instanceof Map?FRt(e):Array.isArray(e)?LRt(e):e instanceof rr?BRt(e):jRt(e,!0)}function LRt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=KE(e[n]);return B4(t)}function FRt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=KE(r);return B4(n)}function BRt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=KE(e.get(n));return B4(t)}function jRt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=KE(e[n[i]]);return B4(r,n)}function B4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return zRt(e,n);case Map:return Ape(e,n,n.keys());case F4:case TX:case Object:case void 0:return Ape(e,n,t||Object.keys(n))}return n instanceof rr?URt(e,n):!1}}function zRt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function URt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Ape(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function SNe(e,t,n,r){return(n&1<<r)!==0}function VRt(e,t,n,r){return(n&1<<r)>>r}function AX(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):TNe(new IX(n,e,t,null,SNe)).subarray(0,r)),i}return n}function TNe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class IX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function dV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new IX(e,t,n-t,e,VRt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return dV(e,t,i)+dV(e,r,n)+HRt(e,i>>3,r-i>>3)}function HRt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=WB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=WB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=WB(s.getUint8(i)),i+=1;return r}function WB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const qRt=-1;class Ar{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Ar?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Qf(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=qRt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-dV(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Ar(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(AX(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Mh.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Mh.TYPE])&&(o[Mh.TYPE]=s.subarray(t,t+n)),(s=o[Mh.OFFSET])&&(o[Mh.OFFSET]=s.subarray(t,t+n+1))||(s=o[Mh.DATA])&&(o[Mh.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Ar.prototype.children=Object.freeze([]);class a2 extends Vn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Ar(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=yS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=yS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=vr(t.nullBitmap),o=yS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),o=uo(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(Pn.isSparseUnion(n))return new Ar(n,r,a,u,[void 0,void 0,s,o],i);const l=yS(t.valueOffsets);return new Ar(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.indices.ArrayType,t.data),{["dictionary"]:o=new rr([new a2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=uo(n.ArrayType,t.data),{["length"]:o=s.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new a2().visit({type:n.valueType})}=t,s=vr(t.nullBitmap),{["length"]:o=i.length/Qf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new a2().visit({type:n.childType})}=t,s=vr(t.nullBitmap),o=yS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,void 0,s],[i])}}function Uo(e){return new a2().visit(e)}class Ipe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function CNe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function ANe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function INe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function OX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function PX(e,t){return e.getValid(t)}function Gb(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return OX(r,this._offsets,n,t)}}function ONe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=OX(s,this._offsets,r,n);return t=void 0,o}}function PNe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):OX(s,this._offsets,i,n);return t=void 0,o}}class rn extends Vn{}function WRt(e,t){return t===null&&e.length>0?0:-1}function GRt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new IX(n,e.offset+(t||0),e.length,n,SNe)){if(!i)return r;++r}return-1}function bn(e,t,n){if(t===void 0)return-1;if(t===null)return GRt(e,n);const r=Su.getVisitFn(e),i=KE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function kNe(e,t,n){const r=Su.getVisitFn(e),i=KE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}rn.prototype.visitNull=WRt;rn.prototype.visitBool=bn;rn.prototype.visitInt=bn;rn.prototype.visitInt8=bn;rn.prototype.visitInt16=bn;rn.prototype.visitInt32=bn;rn.prototype.visitInt64=bn;rn.prototype.visitUint8=bn;rn.prototype.visitUint16=bn;rn.prototype.visitUint32=bn;rn.prototype.visitUint64=bn;rn.prototype.visitFloat=bn;rn.prototype.visitFloat16=bn;rn.prototype.visitFloat32=bn;rn.prototype.visitFloat64=bn;rn.prototype.visitUtf8=bn;rn.prototype.visitBinary=bn;rn.prototype.visitFixedSizeBinary=bn;rn.prototype.visitDate=bn;rn.prototype.visitDateDay=bn;rn.prototype.visitDateMillisecond=bn;rn.prototype.visitTimestamp=bn;rn.prototype.visitTimestampSecond=bn;rn.prototype.visitTimestampMillisecond=bn;rn.prototype.visitTimestampMicrosecond=bn;rn.prototype.visitTimestampNanosecond=bn;rn.prototype.visitTime=bn;rn.prototype.visitTimeSecond=bn;rn.prototype.visitTimeMillisecond=bn;rn.prototype.visitTimeMicrosecond=bn;rn.prototype.visitTimeNanosecond=bn;rn.prototype.visitDecimal=bn;rn.prototype.visitList=bn;rn.prototype.visitStruct=bn;rn.prototype.visitUnion=bn;rn.prototype.visitDenseUnion=kNe;rn.prototype.visitSparseUnion=kNe;rn.prototype.visitDictionary=bn;rn.prototype.visitInterval=bn;rn.prototype.visitIntervalDayTime=bn;rn.prototype.visitIntervalYearMonth=bn;rn.prototype.visitFixedSizeList=bn;rn.prototype.visitMap=bn;const u3=new rn;class sn extends Vn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Na&&t.bitWidth!==64||t instanceof jp&&t.bitWidth!==64||t instanceof r0&&t.precision!==_o.HALF))return new Ipe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Ipe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new YRt(o)})}class YRt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}sn.prototype.visitNull=cn;sn.prototype.visitBool=cn;sn.prototype.visitInt=cn;sn.prototype.visitInt8=cn;sn.prototype.visitInt16=cn;sn.prototype.visitInt32=cn;sn.prototype.visitInt64=cn;sn.prototype.visitUint8=cn;sn.prototype.visitUint16=cn;sn.prototype.visitUint32=cn;sn.prototype.visitUint64=cn;sn.prototype.visitFloat=cn;sn.prototype.visitFloat16=cn;sn.prototype.visitFloat32=cn;sn.prototype.visitFloat64=cn;sn.prototype.visitUtf8=cn;sn.prototype.visitBinary=cn;sn.prototype.visitFixedSizeBinary=cn;sn.prototype.visitDate=cn;sn.prototype.visitDateDay=cn;sn.prototype.visitDateMillisecond=cn;sn.prototype.visitTimestamp=cn;sn.prototype.visitTimestampSecond=cn;sn.prototype.visitTimestampMillisecond=cn;sn.prototype.visitTimestampMicrosecond=cn;sn.prototype.visitTimestampNanosecond=cn;sn.prototype.visitTime=cn;sn.prototype.visitTimeSecond=cn;sn.prototype.visitTimeMillisecond=cn;sn.prototype.visitTimeMicrosecond=cn;sn.prototype.visitTimeNanosecond=cn;sn.prototype.visitDecimal=cn;sn.prototype.visitList=cn;sn.prototype.visitStruct=cn;sn.prototype.visitUnion=cn;sn.prototype.visitDenseUnion=cn;sn.prototype.visitSparseUnion=cn;sn.prototype.visitDictionary=cn;sn.prototype.visitInterval=cn;sn.prototype.visitIntervalDayTime=cn;sn.prototype.visitIntervalYearMonth=cn;sn.prototype.visitFixedSizeList=cn;sn.prototype.visitMap=cn;const kX=new sn,KRt=(e,t)=>e+t;class V0 extends Vn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===jn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Kd.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Kd.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const XRt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),QRt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),JRt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Kd.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},ZRt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Kd.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},eNt=(e,t)=>e.type.mode===rc.Dense?$Ne(e,t):RNe(e,t),$Ne=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Kd.visit(t[s],r[i])},RNe=({children:e},t)=>4+Kd.visitMany(e,e.map(()=>t)).reduce(KRt,0);V0.prototype.visitUtf8=XRt;V0.prototype.visitBinary=QRt;V0.prototype.visitList=JRt;V0.prototype.visitFixedSizeList=ZRt;V0.prototype.visitUnion=eNt;V0.prototype.visitDenseUnion=$Ne;V0.prototype.visitSparseUnion=RNe;const Kd=new V0;var NNe;const DNe={},MNe={};class rr{constructor(t){var n,r,i;const s=t[0]instanceof rr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Ar)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=DNe[o.typeId],f=s[0];this.isValid=d=>PX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,MNe[o.typeId]),this._offsets=ANe(s);break}this.data=s,this.type=o,this.stride=Qf(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=CNe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return kX.visit(this)}concat(...t){return new rr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new rr(xNe(this,t,n,({data:r,_offsets:i},s,o)=>INe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new rr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Pn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Pn.isDictionary(this.type)){const t=new l3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return new l3(this)}unmemoize(){if(Pn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return this}}NNe=Symbol.toStringTag;rr[NNe]=(e=>{e.type=Pn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Su.getVisitFnByTypeId(n),i=ic.getVisitFnByTypeId(n),s=u3.getVisitFnByTypeId(n),o=Kd.getVisitFnByTypeId(n);DNe[n]={get:r,set:i,indexOf:s,byteLength:o},MNe[n]=Object.create(e,{isValid:{value:Gb(PX)},get:{value:Gb(Su.getVisitFnByTypeId(n))},set:{value:ONe(ic.getVisitFnByTypeId(n))},indexOf:{value:PNe(u3.getVisitFnByTypeId(n))},getByteLength:{value:Gb(Kd.getVisitFnByTypeId(n))}})}return"Vector"})(rr.prototype);class l3 extends rr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new l3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new rr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function tNt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${nNt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function nNt(e){return typeof e!="bigint"?Ng(e):xRe?`${Ng(e)}n`:`"${Ng(e)}"`}const GB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,rNt=(e,t=0)=>e.length>=t?e.subarray(0,t):i3(new e.constructor(t),e,0);class j4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?GB(r*1,this.BYTES_PER_ELEMENT):GB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=GB(t*this.stride,this.BYTES_PER_ELEMENT);const n=rNt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=i3(new this.ArrayType(t),this.buffer)}}j4.prototype.offset=0;class mI extends j4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class LNe extends mI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class FNe extends mI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Ru=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Qf(t),this._nulls=new LNe,n&&n.length>0&&(this._isValid=tNt(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new rr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Uo({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Ru.prototype.length=1;Ru.prototype.stride=1;Ru.prototype.children=null;Ru.prototype.finished=!1;Ru.prototype.nullValues=null;Ru.prototype._isValid=()=>!0;class H0 extends Ru{constructor(t){super(t),this._values=new mI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class z4 extends Ru{constructor(t){super(t),this._pendingLength=0,this._offsets=new FNe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof F4?n[Wc].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class hV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const YB=2,sd=4,Yh=4,Mr=4,Bm=new Int32Array(2),Ope=new Float32Array(Bm.buffer),Ppe=new Float64Array(Bm.buffer),kP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let vp=class pV{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?pV.ZERO:new pV(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};vp.ZERO=new vp(0,0);var mV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(mV||(mV={}));let c3=class BNe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new BNe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new vp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new vp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Bm[0]=this.readInt32(t),Ope[0]}readFloat64(t){return Bm[kP?0:1]=this.readInt32(t),Bm[kP?1:0]=this.readInt32(t+4),Ppe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Ope[0]=n,this.writeInt32(t,Bm[0])}writeFloat64(t,n){Ppe[0]=n,this.writeInt32(t,Bm[kP?0:1]),this.writeInt32(t+4,Bm[kP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+sd+Yh)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Yh;n++)t+=String.fromCharCode(this.readInt8(this.position_+sd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=sd,n===mV.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+sd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Yh)throw new Error("FlatBuffers: file identifier must be length "+Yh);for(let n=0;n<Yh;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+sd+n))return!1;return!0}createLong(t,n){return vp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},jNe=class zNe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=c3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=zNe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=c3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(sd,0),this.writeInt32(this.offset()-t+sd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*YB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=YB;l<s;l+=YB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Mr:0;if(n){const s=n;if(this.prep(this.minalign,sd+Yh+i),s.length!=Yh)throw new Error("FlatBuffers: file identifier must be length "+Yh);for(let o=Yh-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,sd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(sd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return vp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ms{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ms).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Mr),(n||new ms).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ms.startKeyValue(t),ms.addKey(t,n),ms.addValue(t,r),ms.endKeyValue(t)}}var Fw;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Fw||(Fw={}));var Bw;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Bw||(Bw={}));var f3;(function(e){e[e.DenseArray=0]="DenseArray"})(f3||(f3={}));class Gu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Gu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Mr),(n||new Gu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Gu.startInt(t),Gu.addBitWidth(t,n),Gu.addIsSigned(t,r),Gu.endInt(t)}}class Kh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Kh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Mr),(n||new Kh).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Gu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):f3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,f3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class r1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new r1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Mr),(n||new r1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return r1.startBinary(t),r1.endBinary(t)}}class i1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new i1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Mr),(n||new i1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return i1.startBool(t),i1.endBool(t)}}var d3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(d3||(d3={}));let m$=class V_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new V_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Mr),(n||new V_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):d3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,d3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return V_.startDate(t),V_.addUnit(t,n),V_.endDate(t)}};class tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Mr),(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return tu.startDecimal(t),tu.addPrecision(t,n),tu.addScale(t,r),tu.addBitWidth(t,i),tu.endDecimal(t)}}var jw;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jw||(jw={}));class od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Mr),(n||new od).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return od.startFixedSizeBinary(t),od.addByteWidth(t,n),od.endFixedSizeBinary(t)}}class ad{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Mr),(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return ad.startFixedSizeList(t),ad.addListSize(t,n),ad.endFixedSizeList(t)}}var h3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(h3||(h3={}));class ud{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Mr),(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):h3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,h3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return ud.startFloatingPoint(t),ud.addPrecision(t,n),ud.endFloatingPoint(t)}}var p3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(p3||(p3={}));class ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Mr),(n||new ld).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):p3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,p3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ld.startInterval(t),ld.addUnit(t,n),ld.endInterval(t)}}class s1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new s1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Mr),(n||new s1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return s1.startList(t),s1.endList(t)}}let g$=class H_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new H_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Mr),(n||new H_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return H_.startMap(t),H_.addKeysSorted(t,n),H_.endMap(t)}};class o1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new o1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Mr),(n||new o1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return o1.startNull(t),o1.endNull(t)}}class a1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Mr),(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return a1.startStruct_(t),a1.endStruct_(t)}}let oT=class Ty{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Ty).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Mr),(n||new Ty).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jw.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,jw.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Ty.startTime(t),Ty.addUnit(t,n),Ty.addBitWidth(t,r),Ty.endTime(t)}},aT=class Cy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Cy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Mr),(n||new Cy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jw.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,jw.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Cy.startTimestamp(t),Cy.addUnit(t,n),Cy.addTimezone(t,r),Cy.endTimestamp(t)}};var m3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(m3||(m3={}));let Ay=class Iy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Iy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Mr),(n||new Iy).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):m3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,m3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Iy.startUnion(t),Iy.addMode(t,n),Iy.addTypeIds(t,r),Iy.endUnion(t)}};class u1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Mr),(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return u1.startUtf8(t),u1.endUtf8(t)}}var _i;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(_i||(_i={}));let $l=class y${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new y$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Mr),(n||new y$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):_i.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Kh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new y$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,_i.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Kf=class Nh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Nh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Mr),(n||new Nh).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bw.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new $l).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Bw.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Nh.startSchema(t),Nh.addEndianness(t,n),Nh.addFields(t,r),Nh.addCustomMetadata(t,i),Nh.addFeatures(t,s),Nh.endSchema(t)}};class Vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Mr),(n||new Vu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fw.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Kf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new hV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new hV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Fw.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class gr{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=yV(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new gr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new gr(n,this.metadata)}assign(...t){const n=t[0]instanceof gr?t[0]:Array.isArray(t[0])?new gr(t[0]):new gr(t),r=[...this.fields],i=$P($P(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:$P($P(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=yV(s,new Map);return new gr([...r,...s],i,new Map([...this.dictionaries,...o]))}}gr.prototype.fields=null;gr.prototype.metadata=null;gr.prototype.dictionaries=null;let Ir=class gV{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new gV(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],gV.new(n,r,i,s)}};Ir.prototype.type=null;Ir.prototype.name=null;Ir.prototype.nullable=null;Ir.prototype.metadata=null;function $P(e,t){return new Map([...e||new Map,...t||new Map])}function yV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Pn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&yV(s.children,t)}return t}var kpe=vp,iNt=jNe,sNt=c3;class vV{constructor(t,n=Xu.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new sNt(vr(t));const n=Vu.getRootAsFooter(t),r=gr.decode(n.schema());return new oNt(r,n)}static encode(t){const n=new iNt,r=gr.encode(n,t.schema);Vu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())s0.encode(n,o);const i=n.endVector();Vu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())s0.encode(n,o);const s=n.endVector();return Vu.startFooter(n),Vu.addSchema(n,r),Vu.addVersion(n,Xu.V4),Vu.addRecordBatches(n,i),Vu.addDictionaries(n,s),Vu.finishFooterBuffer(n,Vu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class oNt extends vV{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return s0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return s0.decode(n)}return null}}class s0{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new s0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new kpe(n.offset,0),s=new kpe(n.bodyLength,0);return hV.createBlock(t,i,r,s)}}const RP=Object.freeze({done:!0,value:void 0});class UNe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class aNt extends UNe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Gh(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(RP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return xpe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return xpe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Gh(this,void 0,void 0,function*(){return yield this.abort(t),RP})}return(t){return Gh(this,void 0,void 0,function*(){return yield this.close(),RP})}read(t){return Gh(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Gh(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(RP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class KB extends aNt{write(t){if((t=vr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?lV(this.toUint8Array(!0)):this.toUint8Array(!1).then(lV)}toUint8Array(t=!1){return t?Wd(this._values)[0]:Gh(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=o2(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Wd(i,s)[0]})}}class VNe extends z4{constructor(t){super(t),this._values=new j4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class uNt extends Ru{constructor(t){super(t),this._values=new LNe}setValue(t,n){this._values.set(t,+n)}}class U4 extends H0{}U4.prototype._setValue=ZRe;class HNe extends U4{}HNe.prototype._setValue=hX;class qNe extends U4{}qNe.prototype._setValue=pX;class WNe extends H0{}WNe.prototype._setValue=nNe;class lNt extends Ru{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new i0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=g3({type:this.type.indices,nullValues:n}),this.dictionary=g3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class GNe extends H0{}GNe.prototype._setValue=JRe;class cNt extends Ru{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new Lw(this.type.listSize,new Ir(n,t.type,!0)),r}}class V4 extends H0{setValue(t,n){this._values.set(t,n)}}class fNt extends V4{setValue(t,n){super.setValue(t,KRe(n))}}class dNt extends V4{}class hNt extends V4{}class H4 extends H0{}H4.prototype._setValue=sNe;class YNe extends H4{}YNe.prototype._setValue=xX;class KNe extends H4{}KNe.prototype._setValue=SX;class lm extends H0{setValue(t,n){this._values.set(t,n)}}class pNt extends lm{}class mNt extends lm{}class gNt extends lm{}class yNt extends lm{}class vNt extends lm{}class _Nt extends lm{}class bNt extends lm{}class wNt extends lm{}class ENt extends z4{constructor(t){super(t),this._offsets=new FNe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Mw(new Ir(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class xNt extends z4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kC(new Ir(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class SNt extends Ru{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class TNt extends Ru{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Wo([...this.type.children,new Ir(n,t.type,!0)]),r}}class XE extends H0{}XE.prototype._setValue=eNe;class XNe extends XE{}XNe.prototype._setValue=mX;class QNe extends XE{}QNe.prototype._setValue=gX;class JNe extends XE{}JNe.prototype._setValue=yX;class ZNe extends XE{}ZNe.prototype._setValue=vX;class QE extends H0{}QE.prototype._setValue=tNe;class eDe extends QE{}eDe.prototype._setValue=_X;class tDe extends QE{}tDe.prototype._setValue=bX;class nDe extends QE{}nDe.prototype._setValue=wX;class rDe extends QE{}rDe.prototype._setValue=EX;class $X extends Ru{constructor(t){super(t),this._typeIds=new mI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ir(n,t.type)];return this.type=new PC(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class CNt extends $X{}class ANt extends $X{constructor(t){super(t),this._offsets=new mI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class iDe extends z4{constructor(t){super(t),this._values=new j4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,QK(n))}_flushPending(t,n){}}iDe.prototype._flushPending=VNe.prototype._flushPending;class INt extends Vn{visitNull(){return SNt}visitBool(){return uNt}visitInt(){return lm}visitInt8(){return pNt}visitInt16(){return mNt}visitInt32(){return gNt}visitInt64(){return yNt}visitUint8(){return vNt}visitUint16(){return _Nt}visitUint32(){return bNt}visitUint64(){return wNt}visitFloat(){return V4}visitFloat16(){return fNt}visitFloat32(){return dNt}visitFloat64(){return hNt}visitUtf8(){return iDe}visitBinary(){return VNe}visitFixedSizeBinary(){return GNe}visitDate(){return U4}visitDateDay(){return HNe}visitDateMillisecond(){return qNe}visitTimestamp(){return XE}visitTimestampSecond(){return XNe}visitTimestampMillisecond(){return QNe}visitTimestampMicrosecond(){return JNe}visitTimestampNanosecond(){return ZNe}visitTime(){return QE}visitTimeSecond(){return eDe}visitTimeMillisecond(){return tDe}visitTimeMicrosecond(){return nDe}visitTimeNanosecond(){return rDe}visitDecimal(){return WNe}visitList(){return ENt}visitStruct(){return TNt}visitUnion(){return $X}visitDenseUnion(){return ANt}visitSparseUnion(){return CNt}visitDictionary(){return lNt}visitInterval(){return H4}visitIntervalDayTime(){return YNe}visitIntervalYearMonth(){return KNe}visitFixedSizeList(){return cNt}visitMap(){return xNt}}const ONt=new INt;class on extends Vn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Nu(e,t){return t instanceof e.constructor}function gI(e,t){return e===t||Nu(e,t)}function cm(e,t){return e===t||Nu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function q4(e,t){return e===t||Nu(e,t)&&e.precision===t.precision}function PNt(e,t){return e===t||Nu(e,t)&&e.byteWidth===t.byteWidth}function RX(e,t){return e===t||Nu(e,t)&&e.unit===t.unit}function yI(e,t){return e===t||Nu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function vI(e,t){return e===t||Nu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function kNt(e,t){return e===t||Nu(e,t)&&e.children.length===t.children.length&&o0.compareManyFields(e.children,t.children)}function $Nt(e,t){return e===t||Nu(e,t)&&e.children.length===t.children.length&&o0.compareManyFields(e.children,t.children)}function NX(e,t){return e===t||Nu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&o0.compareManyFields(e.children,t.children)}function RNt(e,t){return e===t||Nu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&o0.visit(e.indices,t.indices)&&o0.visit(e.dictionary,t.dictionary)}function DX(e,t){return e===t||Nu(e,t)&&e.unit===t.unit}function NNt(e,t){return e===t||Nu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&o0.compareManyFields(e.children,t.children)}function DNt(e,t){return e===t||Nu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&o0.compareManyFields(e.children,t.children)}on.prototype.visitNull=gI;on.prototype.visitBool=gI;on.prototype.visitInt=cm;on.prototype.visitInt8=cm;on.prototype.visitInt16=cm;on.prototype.visitInt32=cm;on.prototype.visitInt64=cm;on.prototype.visitUint8=cm;on.prototype.visitUint16=cm;on.prototype.visitUint32=cm;on.prototype.visitUint64=cm;on.prototype.visitFloat=q4;on.prototype.visitFloat16=q4;on.prototype.visitFloat32=q4;on.prototype.visitFloat64=q4;on.prototype.visitUtf8=gI;on.prototype.visitBinary=gI;on.prototype.visitFixedSizeBinary=PNt;on.prototype.visitDate=RX;on.prototype.visitDateDay=RX;on.prototype.visitDateMillisecond=RX;on.prototype.visitTimestamp=yI;on.prototype.visitTimestampSecond=yI;on.prototype.visitTimestampMillisecond=yI;on.prototype.visitTimestampMicrosecond=yI;on.prototype.visitTimestampNanosecond=yI;on.prototype.visitTime=vI;on.prototype.visitTimeSecond=vI;on.prototype.visitTimeMillisecond=vI;on.prototype.visitTimeMicrosecond=vI;on.prototype.visitTimeNanosecond=vI;on.prototype.visitDecimal=gI;on.prototype.visitList=kNt;on.prototype.visitStruct=$Nt;on.prototype.visitUnion=NX;on.prototype.visitDenseUnion=NX;on.prototype.visitSparseUnion=NX;on.prototype.visitDictionary=RNt;on.prototype.visitInterval=DX;on.prototype.visitIntervalDayTime=DX;on.prototype.visitIntervalYearMonth=DX;on.prototype.visitFixedSizeList=NNt;on.prototype.visitMap=DNt;const o0=new on;function _V(e,t){return o0.compareSchemas(e,t)}function g3(e){const t=e.type,n=new(ONt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(g3(Object.assign(Object.assign({},l),{type:u})))}}return n}function XB(e,t){return MNt(e,t.map(n=>n.data.concat()))}function MNt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=LNt(n,o,c,t,i),o>0&&(r[s++]=Uo({type:new Wo(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Yu(e,f))]}function LNt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Uo({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var sDe;class iu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new gr([]),this._offsets=[0],this;let i,s;t[0]instanceof gr&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Yu)return[u];if(u instanceof iu)return u.batches;if(u instanceof Ar){if(u.type instanceof Wo)return[new Yu(new gr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new rr([u[h]])),f=new gr(l.map((h,p)=>new Ir(String(h),c[p].type))),[,d]=XB(f,c);return d.length===0?[new Yu(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new gr([]),!(i instanceof gr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Yu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!_V(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??ANe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=CNe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?kX.visit(new rr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new iu(n,r.map(i=>new Yu(n,i)))}slice(t,n){const r=this.schema;[t,n]=xNe({length:this.numRows},t,n);const i=INe(this.data,this._offsets,t,n);return new iu(r,i.map(s=>new Yu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Uo({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new rr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new rr([Uo({type:new Bp,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=XB(r,a)}return new iu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new iu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new iu(...XB(s,o))}}sDe=Symbol.toStringTag;iu[sDe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Gb(PX),e.get=Gb(Su.getVisitFn(re.Struct)),e.set=ONe(ic.getVisitFn(re.Struct)),e.indexOf=PNe(u3.getVisitFn(re.Struct)),e.getByteLength=Gb(Kd.getVisitFn(re.Struct)),"Table"))(iu.prototype);var oDe;let Yu=class uT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Uo({nullCount:0,type:new Wo(this.schema.fields),children:this.schema.fields.map(n=>Uo({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Ar))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=$pe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ir.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new gr(r),a=Uo({type:new Wo(r),length:s,children:i,nullCount:0});[this.schema,this.data]=$pe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=aDe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Su.visit(this.data,t)}set(t,n){return ic.visit(this.data,t,n)}indexOf(t,n){return u3.visit(this.data,t,n)}getByteLength(t){return Kd.visit(this.data,t)}[Symbol.iterator](){return kX.visit(new rr([this.data]))}toArray(){return[...this]}concat(...t){return new iu(this.schema,[this,...t])}slice(t,n){const[r]=new rr([this.data]).slice(t,n).data;return new uT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new rr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new rr([Uo({type:new Bp,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new gr(s,new Map(this.schema.metadata)),i=Uo({type:new Wo(s),children:o})}return new uT(r,i)}select(t){const n=this.schema.select(t),r=new Wo(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new uT(n,Uo({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Uo({type:new Wo(n.fields),length:this.numRows,children:r});return new uT(n,i)}};oDe=Symbol.toStringTag;Yu[oDe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Yu.prototype);function $pe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Uo({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Uo({type:new Wo(i),length:n,children:s})]}function aDe(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Pn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&aDe(o.children,a.children,n)}return n}class FNt extends Yu{constructor(t){const n=t.fields.map(i=>Uo({type:i.type})),r=Uo({type:new Wo(t.fields),nullCount:0,children:n});super(t,r)}}var y3;(function(e){e[e.BUFFER=0]="BUFFER"})(y3||(y3={}));var v3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(v3||(v3={}));class jm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new jm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Mr),(n||new jm).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):v3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):y3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,v3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,y3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return jm.startBodyCompression(t),jm.addCodec(t,n),jm.addMethod(t,r),jm.endBodyCompression(t)}}let uDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},lDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},Lh=class bV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new bV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Mr),(n||new bV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new lDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new uDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new jm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},q_=class wV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new wV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Mr),(n||new wV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Lh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var _3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(_3||(_3={}));let Sm=class zf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new zf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Mr),(n||new zf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fw.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):_3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Fw.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,_3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return zf.startMessage(t),zf.addVersion(t,n),zf.addHeaderType(t,r),zf.addHeader(t,i),zf.addBodyLength(t,s),zf.addCustomMetadata(t,o),zf.endMessage(t)}};var BNt=vp;class jNt extends Vn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return o1.startNull(n),o1.endNull(n)}visitInt(t,n){return Gu.startInt(n),Gu.addBitWidth(n,t.bitWidth),Gu.addIsSigned(n,t.isSigned),Gu.endInt(n)}visitFloat(t,n){return ud.startFloatingPoint(n),ud.addPrecision(n,t.precision),ud.endFloatingPoint(n)}visitBinary(t,n){return r1.startBinary(n),r1.endBinary(n)}visitBool(t,n){return i1.startBool(n),i1.endBool(n)}visitUtf8(t,n){return u1.startUtf8(n),u1.endUtf8(n)}visitDecimal(t,n){return tu.startDecimal(n),tu.addScale(n,t.scale),tu.addPrecision(n,t.precision),tu.addBitWidth(n,t.bitWidth),tu.endDecimal(n)}visitDate(t,n){return m$.startDate(n),m$.addUnit(n,t.unit),m$.endDate(n)}visitTime(t,n){return oT.startTime(n),oT.addUnit(n,t.unit),oT.addBitWidth(n,t.bitWidth),oT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return aT.startTimestamp(n),aT.addUnit(n,t.unit),r!==void 0&&aT.addTimezone(n,r),aT.endTimestamp(n)}visitInterval(t,n){return ld.startInterval(n),ld.addUnit(n,t.unit),ld.endInterval(n)}visitList(t,n){return s1.startList(n),s1.endList(n)}visitStruct(t,n){return a1.startStruct_(n),a1.endStruct_(n)}visitUnion(t,n){Ay.startTypeIdsVector(n,t.typeIds.length);const r=Ay.createTypeIdsVector(n,t.typeIds);return Ay.startUnion(n),Ay.addMode(n,t.mode),Ay.addTypeIds(n,r),Ay.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Kh.startDictionaryEncoding(n),Kh.addId(n,new BNt(t.id,0)),Kh.addIsOrdered(n,t.isOrdered),r!==void 0&&Kh.addIndexType(n,r),Kh.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return od.startFixedSizeBinary(n),od.addByteWidth(n,t.byteWidth),od.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return ad.startFixedSizeList(n),ad.addListSize(n,t.listSize),ad.endFixedSizeList(n)}visitMap(t,n){return g$.startMap(n),g$.addKeysSorted(n,t.keysSorted),g$.endMap(n)}}const QB=new jNt;function zNt(e,t=new Map){return new gr(VNt(e,t),v$(e.customMetadata),t)}function cDe(e){return new fl(e.count,fDe(e.columns),dDe(e.columns))}function UNt(e){return new Xd(cDe(e.data),e.id,e.isDelta)}function VNt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function Rpe(e,t){return(e.children||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function fDe(e){return(e||[]).reduce((t,n)=>[...t,new Hv(n.count,HNt(n.VALIDITY)),...fDe(n.children)],[])}function dDe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new vd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new vd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new vd(t.length,i.OFFSET.length)),i.DATA&&t.push(new vd(t.length,i.DATA.length)),t=dDe(i.children,t)}return t}function HNt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function qNt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Dpe(e,Rpe(e,t)),i=new Ir(e.name,o,e.nullable,v$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?Npe(r):new n0,a=new i0(t.get(n),r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,v$(e.customMetadata))):(r=(r=s.indexType)?Npe(r):new n0,t.set(n,o=Dpe(e,Rpe(e,t))),a=new i0(o,r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,v$(e.customMetadata))),i||null}function v$(e){return new Map(Object.entries(e||{}))}function Npe(e){return new Na(e.isSigned,e.bitWidth)}function Dpe(e,t){const n=e.type.name;switch(n){case"NONE":return new Bp;case"null":return new Bp;case"binary":return new IC;case"utf8":return new Rw;case"bool":return new OC;case"list":return new Mw((t||[])[0]);case"struct":return new Wo(t||[]);case"struct_":return new Wo(t||[])}switch(n){case"int":{const r=e.type;return new Na(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new r0(_o[r.precision])}case"decimal":{const r=e.type;return new s3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Nw(Gd[r.unit])}case"time":{const r=e.type;return new jp(jn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new o3(jn[r.unit],r.timezone)}case"interval":{const r=e.type;return new Dw(Yd[r.unit])}case"union":{const r=e.type;return new PC(rc[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new a3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Lw(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new kC((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var X1=vp,WNt=jNe,GNt=c3;class cd{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new cd(0,Xu.V4,n);return r._createHeader=YNt(t,n),r}static decode(t){t=new GNt(vr(t));const n=Sm.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new cd(r,i,s);return o._createHeader=KNt(n,s),o}static encode(t){const n=new WNt;let r=-1;return t.isSchema()?r=gr.encode(n,t.header()):t.isRecordBatch()?r=fl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Xd.encode(n,t.header())),Sm.startMessage(n),Sm.addVersion(n,Xu.V4),Sm.addHeader(n,r),Sm.addHeaderType(n,t.headerType),Sm.addBodyLength(n,new X1(t.bodyLength,0)),Sm.finishMessageBuffer(n,Sm.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof gr)return new cd(0,Xu.V4,Fs.Schema,t);if(t instanceof fl)return new cd(n,Xu.V4,Fs.RecordBatch,t);if(t instanceof Xd)return new cd(n,Xu.V4,Fs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Fs.Schema}isRecordBatch(){return this.headerType===Fs.RecordBatch}isDictionaryBatch(){return this.headerType===Fs.DictionaryBatch}}class fl{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Xd{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class vd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class Hv{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function YNt(e,t){return()=>{switch(t){case Fs.Schema:return gr.fromJSON(e);case Fs.RecordBatch:return fl.fromJSON(e);case Fs.DictionaryBatch:return Xd.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Fs[t]}, type: ${t} }`)}}function KNt(e,t){return()=>{switch(t){case Fs.Schema:return gr.decode(e.header(new Kf));case Fs.RecordBatch:return fl.decode(e.header(new Lh),e.version());case Fs.DictionaryBatch:return Xd.decode(e.header(new q_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Fs[t]}, type: ${t} }`)}}Ir.encode=oDt;Ir.decode=iDt;Ir.fromJSON=qNt;gr.encode=sDt;gr.decode=XNt;gr.fromJSON=zNt;fl.encode=aDt;fl.decode=QNt;fl.fromJSON=cDe;Xd.encode=uDt;Xd.decode=JNt;Xd.fromJSON=UNt;Hv.encode=lDt;Hv.decode=eDt;vd.encode=cDt;vd.decode=ZNt;function XNt(e,t=new Map){const n=rDt(e,t);return new gr(n,_$(e),t)}function QNt(e,t=Xu.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new fl(e.length(),tDt(e),nDt(e,t))}function JNt(e,t=Xu.V4){return new Xd(fl.decode(e.data(),t),e.id(),e.isDelta())}function ZNt(e){return new vd(e.offset(),e.length())}function eDt(e){return new Hv(e.length(),e.nullCount())}function tDt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Hv.decode(n));return t}function nDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Xu.V4&&(r.bb_pos+=8*(i+1)),n[++s]=vd.decode(r));return n}function rDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ir.decode(r,t));return n}function Mpe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ir.decode(r,t));return n}function iDt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Fpe(e,Mpe(e,t)),r=new Ir(e.name(),i,e.nullable(),_$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?Lpe(s):new n0,o=new i0(t.get(n),s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),_$(e))):(s=(s=a.indexType())?Lpe(s):new n0,t.set(n,i=Fpe(e,Mpe(e,t))),o=new i0(i,s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),_$(e))),r||null}function _$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Lpe(e){return new Na(e.isSigned(),e.bitWidth())}function Fpe(e,t){const n=e.typeType();switch(n){case _i.NONE:return new Bp;case _i.Null:return new Bp;case _i.Binary:return new IC;case _i.Utf8:return new Rw;case _i.Bool:return new OC;case _i.List:return new Mw((t||[])[0]);case _i.Struct_:return new Wo(t||[])}switch(n){case _i.Int:{const r=e.type(new Gu);return new Na(r.isSigned(),r.bitWidth())}case _i.FloatingPoint:{const r=e.type(new ud);return new r0(r.precision())}case _i.Decimal:{const r=e.type(new tu);return new s3(r.scale(),r.precision(),r.bitWidth())}case _i.Date:{const r=e.type(new m$);return new Nw(r.unit())}case _i.Time:{const r=e.type(new oT);return new jp(r.unit(),r.bitWidth())}case _i.Timestamp:{const r=e.type(new aT);return new o3(r.unit(),r.timezone())}case _i.Interval:{const r=e.type(new ld);return new Dw(r.unit())}case _i.Union:{const r=e.type(new Ay);return new PC(r.mode(),r.typeIdsArray()||[],t||[])}case _i.FixedSizeBinary:{const r=e.type(new od);return new a3(r.byteWidth())}case _i.FixedSizeList:{const r=e.type(new ad);return new Lw(r.listSize(),(t||[])[0])}case _i.Map:{const r=e.type(new g$);return new kC((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_i[n]}" (${n})`)}function sDt(e,t){const n=t.fields.map(s=>Ir.encode(e,s));Kf.startFieldsVector(e,n.length);const r=Kf.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Kf.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ms.startKeyValue(e),ms.addKey(e,a),ms.addValue(e,u),ms.endKeyValue(e)})):-1;return Kf.startSchema(e),Kf.addFields(e,r),Kf.addEndianness(e,fDt?Bw.Little:Bw.Big),i!==-1&&Kf.addCustomMetadata(e,i),Kf.endSchema(e)}function oDt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Pn.isDictionary(s)?(o=s.dictionary.typeId,i=QB.visit(s,e),r=QB.visit(s.dictionary,e)):r=QB.visit(s,e);const a=(s.children||[]).map(c=>Ir.encode(e,c)),u=$l.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?$l.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ms.startKeyValue(e),ms.addKey(e,d),ms.addValue(e,h),ms.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),$l.startField(e),$l.addType(e,r),$l.addTypeType(e,o),$l.addChildren(e,u),$l.addNullable(e,!!t.nullable),n!==-1&&$l.addName(e,n),i!==-1&&$l.addDictionary(e,i),l!==-1&&$l.addCustomMetadata(e,l),$l.endField(e)}function aDt(e,t){const n=t.nodes||[],r=t.buffers||[];Lh.startNodesVector(e,n.length);for(const o of n.slice().reverse())Hv.encode(e,o);const i=e.endVector();Lh.startBuffersVector(e,r.length);for(const o of r.slice().reverse())vd.encode(e,o);const s=e.endVector();return Lh.startRecordBatch(e),Lh.addLength(e,new X1(t.length,0)),Lh.addNodes(e,i),Lh.addBuffers(e,s),Lh.endRecordBatch(e)}function uDt(e,t){const n=fl.encode(e,t.data);return q_.startDictionaryBatch(e),q_.addId(e,new X1(t.id,0)),q_.addIsDelta(e,t.isDelta),q_.addData(e,n),q_.endDictionaryBatch(e)}function lDt(e,t){return lDe.createFieldNode(e,new X1(t.length,0),new X1(t.nullCount,0))}function cDt(e,t){return uDe.createBuffer(e,new X1(t.offset,0),new X1(t.length,0))}const fDt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),EV="ARROW1",MX=new Uint8Array(EV.length);for(let e=0;e<EV.length;e+=1)MX[e]=EV.codePointAt(e);MX.length;class us extends Vn{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Yu?s.data.children:s.data),r=new us;return r.visitMany(n(t)),r}visit(t){if(t instanceof rr)return this.visitMany(t.data),this;const{type:n}=t;if(!Pn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Pn.isNull(n)||af.call(this,i<=0?new Uint8Array(0):AX(t.offset,r,t.nullBitmap)),this.nodes.push(new Hv(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function af(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new vd(this._byteLength,t)),this._byteLength+=t,this}function dDt(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(af.call(this,r),t.mode===rc.Sparse)return xV.call(this,e);if(t.mode===rc.Dense){if(e.offset<=0)return af.call(this,i),xV.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=eX(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];af.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function hDt(e){let t;return e.nullCount>=e.length?af.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?af.call(this,AX(e.offset,e.length,t)):af.call(this,TNe(e.values))}function q0(e){return af.call(this,e.values.subarray(0,e.length*e.stride))}function hDe(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return af.call(this,eX(-r[0],t,r)),af.call(this,n.subarray(i,i+o)),this}function LX(e){const{length:t,valueOffsets:n}=e;return n&&af.call(this,eX(n[0],t,n)),this.visit(e.children[0])}function xV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}us.prototype.visitBool=hDt;us.prototype.visitInt=q0;us.prototype.visitFloat=q0;us.prototype.visitUtf8=hDe;us.prototype.visitBinary=hDe;us.prototype.visitFixedSizeBinary=q0;us.prototype.visitDate=q0;us.prototype.visitTimestamp=q0;us.prototype.visitTime=q0;us.prototype.visitDecimal=q0;us.prototype.visitList=LX;us.prototype.visitStruct=xV;us.prototype.visitUnion=dDt;us.prototype.visitInterval=q0;us.prototype.visitFixedSizeList=LX;us.prototype.visitMap=LX;class pDe extends UNe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new KB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,z0(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return M4(t)?t.then(n=>this.writeAll(n)):L4(t)?zX(this,t):jX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof KB?this._sink=t:(this._sink=new KB,t&&w$t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&E$t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!_V(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof iu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Yu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!_V(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Yu?t instanceof FNt||this._writeRecordBatch(t):t instanceof iu?this.writeAll(t.batches):JK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=cd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Fs.RecordBatch?this._recordBatchBlocks.push(new s0(a,t.bodyLength,this._position)):t.headerType===Fs.DictionaryBatch&&this._dictionaryBlocks.push(new s0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=vr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(cd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(MX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=us.assemble(t),o=new fl(t.numRows,r,i),a=cd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=us.assemble(new rr([t])),u=new fl(t.length,s,o),l=new Xd(u,n,r),c=cd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class FX extends pDe{static writeAll(t,n){const r=new FX(n);return M4(t)?t.then(i=>r.writeAll(i)):L4(t)?zX(r,t):jX(r,t)}}class BX extends pDe{static writeAll(t){const n=new BX;return M4(t)?t.then(r=>n.writeAll(r)):L4(t)?zX(n,t):jX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=vV.encode(new vV(t,Xu.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function jX(e,t){let n=t;t instanceof iu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function zX(e,t){var n,r,i,s;return Gh(this,void 0,void 0,function*(){try{for(n=o2(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function pDt(e,t="stream"){return(t==="stream"?FX:BX).writeAll(e).toUint8Array(!0)}function UX(e,t=1){return(e*t+63&-64||64)/t}function a0(e,t,n=e.BYTES_PER_ELEMENT){return new e(UX(t,n))}function VX(e){return e instanceof Ar?e:new Ar(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function mDt(e){return new rr([VX(e)])}const HX=new TextEncoder;function gDt(e,t,n){const r=HX.encode(n);return e.set(r,t),r.length}function yDt(e,t,n){return HX.encodeInto(n,e.subarray(t)).written}const vDt=HX.encodeInto?yDt:gDt;function Bpe(e,t){const n=a0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function _Dt(e,t){const n=a0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function bDt(e,t){const n=a0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function wDt(e,t){const n=a0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function EDt(e){const t=g3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function xDt(e,t,n){const r=a0(Int32Array,t+1),i=a0(Uint8Array,3*n);let s=0;return{set(o,a){s+=vDt(i,s,o),r[a+1]=s},data:()=>{const o=UX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function SDt(e,t){const n=[],r=a0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:TDt(e.dictionary,n,o)})}}function TDt(e,t,n){const r=xDt(e,t.length,n);return t.forEach(r.set),mDt(r.data())}function CDt(e,t){const n=a0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function ADt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Bpe:null;break;case re.Float:r=e.precision>0?Bpe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?SDt:null;break;case re.Bool:r=_Dt;break;case re.Date:r=e.unit?wDt:bDt;break}return r==null?EDt(e):n?CDt(r(e,t),t):r(e,t)}function IDt(e,t){const n=e.length,r=UX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),VX({type:t,length:n,buffers:[null,i]})}function mDe(e,t,n,r,i=!0){const s=ADt(r,e,i);return t(n,s.set),VX(s.data())}function qX(e){if(e instanceof Pn||e==null)return e;switch(e){case re.Binary:return new IC;case re.Bool:return new OC;case re.DateDay:return new M$t;case re.DateMillisecond:case re.Date:return new L$t;case re.Dictionary:return new i0(new Rw,new n0);case re.Float16:return new WRe;case re.Float32:return new lX;case re.Float64:case re.Float:return new cX;case re.Int8:return new nX;case re.Int16:return new rX;case re.Int32:case re.Int:return new n0;case re.Int64:return new iX;case re.IntervalDayTime:return new U$t;case re.Interval:case re.IntervalYearMonth:return new V$t;case re.Null:return new Bp;case re.TimeMicrosecond:return new j$t;case re.TimeMillisecond:case re.Time:return new B$t;case re.TimeNanosecond:return new z$t;case re.TimeSecond:return new F$t;case re.Uint8:return new sX;case re.Uint16:return new oX;case re.Uint32:return new aX;case re.Uint64:return new uX;case re.Utf8:return new Rw;default:vn(`Unsupported type code: ${qd(e)}. Use a data type constructor instead?`)}}function ODt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function gDe(e,t){const n=SV();return e(t,n.add),n}function SV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Fp(t))++e.dates,ODt(t)&&++e.utcdays;else if(t1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=SV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=SV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return qX(PDt(e))}};return e}function PDt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:vn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:vn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Ir.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Lw(e.minlen,n):new Mw(n)}else if(e.structs===t){const n=e.struct_prof;return new Wo(Object.keys(n).map(r=>Ir.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;vn("Type inference failure")}}}}function kDt(e,t,n,r,i,s=!0){if(i=qX(i),!i){const o=gDe(r,t);s=o.nulls>0,i=o.type()}return mDe(n,r,t,i,s)}function $Dt(e,t,n,r,i,s=!0){i=qX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=RDt(o);if(u&&a&&jpe(u.type,i))return u;const l=o.data;if(hI(l)){const c=NDt(l);if(a&&c&&jpe(c,i))return IDt(l,c);i=i||c,s=!1}if(!i){const c=gDe(r,o);s=c.nulls>0,i=c.type()}return mDe(n,r,o,i,s)}function RDt(e){return e instanceof rr?e:e.vector instanceof rr?e.vector:null}function NDt(e){const n={Float32Array:lX,Float64Array:cX,Int8Array:nX,Int16Array:rX,Int32Array:n0,Uint8Array:sX,Uint16Array:oX,Uint32Array:aX,BigInt64Array:iX,BigUint64Array:uX}[e.constructor.name];return n?new n:null}function jpe(e,t){return!e||!t?!0:e.compareTo(t)}function DDt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function MDt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&t1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const LDt=()=>vn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function FDt(){try{return iu}catch{LDt()}}function yDe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=BDt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&vn("Column length mismatch"),a[l]=c});const u=FDt();return new u(a)}function BDt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ti(n)?n(e):nr(n)?n:null;if(nr(e))return{dataFrom:kDt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:DDt(e,r,i)};if(jDt(e))return{dataFrom:$Dt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:MDt(e,r,i)};vn("Unsupported input data type")}function jDt(e){return e&&ti(e.reify)}function zDt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return pDt(yDe(e,r),n)}function UDt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function VDt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Fp(u))++i,UDt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function W4(e,t){return ti(t)?t(e):t||e.columnNames()}function vDe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=VDt(HDt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function HDt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function WX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function qDt(e,t={}){const n=W4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Fp(l)?N4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return WX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function _De(e,t={}){if(ti(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Fp(e))return t.utc?N4(e):Q$e(e);{const r=JSON.stringify(e,(s,o)=>hI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function G4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function WDt(e,t={}){const n=W4(e,t.columns),{align:r,format:i}=vDe(e,n,t),s=GDt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(_De(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",b=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${b?` style="${b}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return WX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function GDt(e){return G4(e.style,t=>ti(t)?t:()=>t)}function YDt(e,t=!0,n=!1){return e===void 0||e?t:n}const KDt=e=>Fp(e)?N4(e,!0):e;function XDt(e,t={}){const n=YDt(t.schema),r=t.format||{},i=W4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||KDt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function QDt(e,t={}){const n=W4(e,t.columns),{align:r,format:i}=vDe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return WX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(_De(u,i[l]))+"|"}}),a+`
`}function bDe(e,t){for(const[n,r]of D4(t))e.set(n,r);return e}function JDt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function zp(e,t,n=new Map){return t=Ra(t)?e.columnName(t):t,Co(t)?n.set(t,t):nr(t)?t.forEach(r=>zp(e,r,n)):ti(t)?zp(e,t(e),n):sa(t)?bDe(n,t):vn(`Invalid column selection: ${qd(t)}`),n}function Y4(e,t){return e.toObject=t,e}function wDe(e){return nr(e)?e.map(wDe):e&&e.toObject?e.toObject():e}function zw(){return Y4(e=>e.columnNames(),()=>({all:[]}))}function EDe(...e){return e=e.flat(),Y4(t=>{const n=zp(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:wDe(e)}))}function ZDt(e,t){return Y4(n=>{let r=Ra(e)?e:n.columnIndex(e),i=Ra(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function e3t(e){return Co(e)&&(e=RegExp(JDt(e))),Y4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function t3t(e){return hI(e.data)?e.data.constructor:Array}class Xh extends bkt{static from(t,n){return new Xh(xkt(t,n),n)}static new(t,n){if(t instanceof Xh)return t;const r={},i=[];for(const[s,o]of D4(t))r[s]=o,i.push(s);return new Xh(r,n||i)}constructor(t,n,r,i,s,o){G4(t,Ekt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Xh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Jkt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Sl(r).groupby(r.groups());return t.forEach(s=>{s=Xh.new(s),s.numRows()!==n&&vn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):vn(`Unrecognized column: ${t}`)}object(t=0){return zpe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=zp(this,t.columns||zw()),o=ERe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),e$t(this,u,a,n)}return a}*[Symbol.iterator](){const t=zpe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(t3t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Zkt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return yDe(this,t)}toArrowBuffer(t){return zDt(this,t)}toCSV(t){return qDt(this,t)}toHTML(t){return WDt(this,t)}toJSON(t){return XDt(this,t)}toMarkdown(t){return QDt(this,t)}}function zpe(e){let t=e._builder;if(!t){const n=ERe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class n3t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Wn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=r3t[e.type];s&&s(e,t,n)}const NP=(e,t,n)=>{Wn(e.argument,t,n,e)},JB=(e,t,n)=>{Wn(e.left,t,n,e),Wn(e.right,t,n,e)},Upe=(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.consequent,t,n,e),e.alternate&&Wn(e.alternate,t,n,e)},ZB=(e,t,n)=>{Xf(e.params,t,n,e),Wn(e.body,t,n,e)},Vpe=(e,t,n)=>{Wn(e.callee,t,n,e),Xf(e.arguments,t,n,e)},Xf=(e,t,n,r)=>{e.forEach(i=>Wn(i,t,n,r))},r3t={TemplateLiteral:(e,t,n)=>{Xf(e.expressions,t,n,e),Xf(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Wn(e.object,t,n,e),Wn(e.property,t,n,e)},CallExpression:Vpe,NewExpression:Vpe,ArrayExpression:(e,t,n)=>{Xf(e.elements,t,n,e)},AssignmentExpression:JB,AwaitExpression:NP,BinaryExpression:JB,LogicalExpression:JB,UnaryExpression:NP,UpdateExpression:NP,ConditionalExpression:Upe,ObjectExpression:(e,t,n)=>{Xf(e.properties,t,n,e)},Property:(e,t,n)=>{Wn(e.key,t,n,e),Wn(e.value,t,n,e)},ArrowFunctionExpression:ZB,FunctionExpression:ZB,FunctionDeclaration:ZB,VariableDeclaration:(e,t,n)=>{Xf(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Wn(e.id,t,n,e),Wn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Wn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Xf(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Wn(e.expression,t,n,e)},IfStatement:Upe,ForStatement:(e,t,n)=>{Wn(e.init,t,n,e),Wn(e.test,t,n,e),Wn(e.update,t,n,e),Wn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Wn(e.body,t,n,e),Wn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Wn(e.discriminant,t,n,e),Xf(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Wn(e.test,t,n,e),Xf(e.consequent,t,n,e)},ReturnStatement:NP,Program:(e,t,n)=>{Wn(e.body[0],t,n,e)}};function xDe(e){delete e.start,delete e.end,delete e.optional}function Hpe(e){xDe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function i3t(e){return Wn(e,null,{Column:Hpe,Constant:Hpe,Default:xDe}),e}function ys(e,t){return t&&t.type===e}function s3t(e){return ys(r$t,e)||ys(n$t,e)}function o3t(e){return ti(e)?e:()=>e}const a3t="Escaped functions are not valid as rollup or pivot values.";function u3t(e,t,n){e.aggronly&&vn(a3t);const r="(row,data)=>fn("+wRe(e.table.columnNames())+",$)";return{escape:KK.escape(r,o3t(t.expr),n)}}var l3t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],SDe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],c3t="-----------------------------------------------------------------------------------------------------------------------------------------------------",TDe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ej={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},tj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",f3t={5:tj,"5module":tj+" export import",6:tj+" const class extends export import super"},d3t=/^in(stanceof)?$/,h3t=new RegExp("["+TDe+"]"),p3t=new RegExp("["+TDe+c3t+"]");function TV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Up(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&h3t.test(String.fromCharCode(e)):t===!1?!1:TV(e,SDe)}function Uw(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&p3t.test(String.fromCharCode(e)):t===!1?!1:TV(e,SDe)||TV(e,l3t)}var Kn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Il(e,t){return new Kn(e,{beforeExpr:!0,binop:t})}var Ol={beforeExpr:!0},Ka={startsExpr:!0},GX={};function Ln(e,t){return t===void 0&&(t={}),t.keyword=e,GX[e]=new Kn(e,t)}var G={num:new Kn("num",Ka),regexp:new Kn("regexp",Ka),string:new Kn("string",Ka),name:new Kn("name",Ka),privateId:new Kn("privateId",Ka),eof:new Kn("eof"),bracketL:new Kn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Kn("]"),braceL:new Kn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Kn("}"),parenL:new Kn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Kn(")"),comma:new Kn(",",Ol),semi:new Kn(";",Ol),colon:new Kn(":",Ol),dot:new Kn("."),question:new Kn("?",Ol),questionDot:new Kn("?."),arrow:new Kn("=>",Ol),template:new Kn("template"),invalidTemplate:new Kn("invalidTemplate"),ellipsis:new Kn("...",Ol),backQuote:new Kn("`",Ka),dollarBraceL:new Kn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Kn("=",{beforeExpr:!0,isAssign:!0}),assign:new Kn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Kn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Kn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Il("||",1),logicalAND:Il("&&",2),bitwiseOR:Il("|",3),bitwiseXOR:Il("^",4),bitwiseAND:Il("&",5),equality:Il("==/!=/===/!==",6),relational:Il("</>/<=/>=",7),bitShift:Il("<</>>/>>>",8),plusMin:new Kn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Il("%",10),star:Il("*",10),slash:Il("/",10),starstar:new Kn("**",{beforeExpr:!0}),coalesce:Il("??",1),_break:Ln("break"),_case:Ln("case",Ol),_catch:Ln("catch"),_continue:Ln("continue"),_debugger:Ln("debugger"),_default:Ln("default",Ol),_do:Ln("do",{isLoop:!0,beforeExpr:!0}),_else:Ln("else",Ol),_finally:Ln("finally"),_for:Ln("for",{isLoop:!0}),_function:Ln("function",Ka),_if:Ln("if"),_return:Ln("return",Ol),_switch:Ln("switch"),_throw:Ln("throw",Ol),_try:Ln("try"),_var:Ln("var"),_const:Ln("const"),_while:Ln("while",{isLoop:!0}),_with:Ln("with"),_new:Ln("new",{beforeExpr:!0,startsExpr:!0}),_this:Ln("this",Ka),_super:Ln("super",Ka),_class:Ln("class",Ka),_extends:Ln("extends",Ol),_export:Ln("export"),_import:Ln("import",Ka),_null:Ln("null",Ka),_true:Ln("true",Ka),_false:Ln("false",Ka),_in:Ln("in",{beforeExpr:!0,binop:7}),_instanceof:Ln("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ln("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ln("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ln("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},bc=/\r\n?|\n|\u2028|\u2029/,m3t=new RegExp(bc.source,"g");function JE(e){return e===10||e===13||e===8232||e===8233}function CDe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(JE(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var ADe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,IDe=Object.prototype,g3t=IDe.hasOwnProperty,y3t=IDe.toString,_I=Object.hasOwn||function(e,t){return g3t.call(e,t)},qpe=Array.isArray||function(e){return y3t.call(e)==="[object Array]"},Wpe=Object.create(null);function ag(e){return Wpe[e]||(Wpe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function u0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var v3t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,$C=function(t,n){this.line=t,this.column=n};$C.prototype.offset=function(t){return new $C(this.line,this.column+t)};var K4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function ODe(e,t){for(var n=1,r=0;;){var i=CDe(e,r,t);if(i<0)return new $C(n,t-r);++n,r=i}}var CV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Gpe=!1;function _3t(e){var t={};for(var n in CV)t[n]=e&&_I(e,n)?e[n]:CV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Gpe&&typeof console=="object"&&console.warn&&(Gpe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),qpe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return qpe(t.onComment)&&(t.onComment=b3t(t,t.onComment)),t}function b3t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new K4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var RC=1,ZE=2,YX=4,PDe=8,kDe=16,$De=32,KX=64,RDe=128,bI=256,XX=RC|ZE|bI;function QX(e,t){return ZE|(e?YX:0)|(t?PDe:0)}var b3=0,JX=1,fm=2,NDe=3,DDe=4,MDe=5,As=function(t,n,r){this.options=t=_3t(t),this.sourceFile=t.sourceFile,this.keywords=ag(f3t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=ej[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=ag(i);var s=(i?i+" ":"")+ej.strict;this.reservedWordsStrict=ag(s),this.reservedWordsStrictBind=ag(s+" "+ej.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(bc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=G.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(RC),this.regexpState=null,this.privateNameStack=[]},fh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};As.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};fh.inFunction.get=function(){return(this.currentVarScope().flags&ZE)>0};fh.inGenerator.get=function(){return(this.currentVarScope().flags&PDe)>0&&!this.currentVarScope().inClassFieldInit};fh.inAsync.get=function(){return(this.currentVarScope().flags&YX)>0&&!this.currentVarScope().inClassFieldInit};fh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&bI)return!1;if(t.flags&ZE)return(t.flags&YX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};fh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&KX)>0||n||this.options.allowSuperOutsideMethod};fh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&RDe)>0};fh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};fh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(ZE|bI))>0||n};fh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&bI)>0};As.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};As.parse=function(t,n){return new this(n,t).parse()};As.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};As.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(As.prototype,fh);var Va=As.prototype,w3t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Va.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){zl.lastIndex=e,e+=zl.exec(this.input)[0].length;var t=w3t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){zl.lastIndex=e+t[0].length;var n=zl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||bc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,zl.lastIndex=e,e+=zl.exec(this.input)[0].length,this.input[e]===";"&&e++}};Va.eat=function(e){return this.type===e?(this.next(),!0):!1};Va.isContextual=function(e){return this.type===G.name&&this.value===e&&!this.containsEsc};Va.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Va.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Va.canInsertSemicolon=function(){return this.type===G.eof||this.type===G.braceR||bc.test(this.input.slice(this.lastTokEnd,this.start))};Va.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Va.semicolon=function(){!this.eat(G.semi)&&!this.insertSemicolon()&&this.unexpected()};Va.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Va.expect=function(e){this.eat(e)||this.unexpected()};Va.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var X4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Va.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Va.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Va.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Va.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Pt=As.prototype;Pt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==G.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ZX={kind:"loop"},E3t={kind:"switch"};Pt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;zl.lastIndex=this.pos;var t=zl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Up(r,!0)){for(var i=n+1;Uw(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!d3t.test(s))return!0}return!1};Pt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;zl.lastIndex=this.pos;var e=zl.exec(this.input),t=this.pos+e[0].length,n;return!bc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Uw(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Pt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=G._var,s="let"),r){case G._break:case G._continue:return this.parseBreakContinueStatement(i,r.keyword);case G._debugger:return this.parseDebuggerStatement(i);case G._do:return this.parseDoStatement(i);case G._for:return this.parseForStatement(i);case G._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case G._class:return e&&this.unexpected(),this.parseClass(i,!0);case G._if:return this.parseIfStatement(i);case G._return:return this.parseReturnStatement(i);case G._switch:return this.parseSwitchStatement(i);case G._throw:return this.parseThrowStatement(i);case G._try:return this.parseTryStatement(i);case G._const:case G._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case G._while:return this.parseWhileStatement(i);case G._with:return this.parseWithStatement(i);case G.braceL:return this.parseBlock(!0,i);case G.semi:return this.parseEmptyStatement(i);case G._export:case G._import:if(this.options.ecmaVersion>10&&r===G._import){zl.lastIndex=this.pos;var o=zl.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===G._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===G.name&&c.type==="Identifier"&&this.eat(G.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Pt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(G.semi)||this.insertSemicolon()?e.label=null:this.type!==G.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Pt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Pt.parseDoStatement=function(e){return this.next(),this.labels.push(ZX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(G._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(G.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Pt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ZX),this.enterScope(0),this.expect(G.parenL),this.type===G.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===G._var||this.type===G._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===G._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new X4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===G._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===G._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Pt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,u2|(n?0:AV),!1,t)};Pt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(G._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Pt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(G.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Pt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(G.braceL),this.labels.push(E3t),this.enterScope(0);for(var t,n=!1;this.type!==G.braceR;)if(this.type===G._case||this.type===G._default){var r=this.type===G._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(G.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Pt.parseThrowStatement=function(e){return this.next(),bc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var x3t=[];Pt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?$De:0),this.checkLValPattern(e,t?DDe:fm),this.expect(G.parenR),e};Pt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===G._catch){var t=this.startNode();this.next(),this.eat(G.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(G._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Pt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Pt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ZX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Pt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Pt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Pt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===G._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Pt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Pt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(G.braceL),e&&this.enterScope(0);this.type!==G.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Pt.parseFor=function(e,t){return e.init=t,this.expect(G.semi),e.test=this.type===G.semi?null:this.parseExpression(),this.expect(G.semi),e.update=this.type===G.parenR?null:this.parseExpression(),this.expect(G.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Pt.parseForIn=function(e,t){var n=this.type===G._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(G.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Pt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(G.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===G._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(G.comma))break}return e};Pt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?JX:fm,!1)};var u2=1,AV=2,LDe=4;Pt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===G.star&&t&AV&&this.unexpected(),e.generator=this.eat(G.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&u2&&(e.id=t&LDe&&this.type!==G.name?null:this.parseIdent(),e.id&&!(t&AV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?JX:fm:NDe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(QX(e.async,e.generator)),t&u2||(e.id=this.type===G.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&u2?"FunctionDeclaration":"FunctionExpression")};Pt.parseFunctionParams=function(e){this.expect(G.parenL),e.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Pt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(G.braceL);this.type!==G.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&S3t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Pt.parseClassElement=function(e){if(this.eat(G.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(G.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===G.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===G.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(G.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===G.parenL||o!=="method"||i||s){var l=!n.static&&w3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Pt.isClassElementNameStart=function(){return this.type===G.name||this.type===G.privateId||this.type===G.num||this.type===G.string||this.type===G.bracketL||this.type.keyword};Pt.parseClassElementName=function(e){this.type===G.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Pt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&w3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Pt.parseClassField=function(e){if(w3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&w3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(G.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Pt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(bI|KX);this.type!==G.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Pt.parseClassId=function(e,t){this.type===G.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,fm,!1)):(t===!0&&this.unexpected(),e.id=null)};Pt.parseClassSuper=function(e){e.superClass=this.eat(G._extends)?this.parseExprSubscripts(null,!1):null};Pt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Pt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];_I(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function S3t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function w3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Pt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==G.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Pt.parseExport=function(e,t){if(this.next(),this.eat(G.star))return this.parseExportAllDeclaration(e,t);if(this.eat(G._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==G.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Pt.parseExportDeclaration=function(e){return this.parseStatement(null)};Pt.parseExportDefaultDeclaration=function(){var e;if(this.type===G._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,u2|LDe,!1,e)}else if(this.type===G._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Pt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),_I(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Pt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Pt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Pt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Pt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Pt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(G.braceL);!this.eat(G.braceR);){if(n)n=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Pt.parseImport=function(e){return this.next(),this.type===G.string?(e.specifiers=x3t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===G.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Pt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,fm),this.finishNode(e,"ImportSpecifier")};Pt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,fm),this.finishNode(e,"ImportDefaultSpecifier")};Pt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,fm),this.finishNode(e,"ImportNamespaceSpecifier")};Pt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===G.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(G.comma)))return e;if(this.type===G.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(G.braceL);!this.eat(G.braceR);){if(t)t=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;e.push(this.parseImportSpecifier())}return e};Pt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===G.string){var e=this.parseLiteral(this.value);return v3t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Pt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Pt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var wc=As.prototype;wc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};wc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};wc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};wc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==G.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};wc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case G.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(G.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case G.braceL:return this.parseObj(!0)}return this.parseIdent()};wc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(G.comma),t&&this.type===G.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===G.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===G.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};wc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};wc.parseBindingListItem=function(e){return e};wc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(G.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};wc.checkLValSimple=function(e,t,n){t===void 0&&(t=b3);var r=t!==b3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===fm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(_I(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==MDe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};wc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=b3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};wc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=b3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Oc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},pi={b_stat:new Oc("{",!1),b_expr:new Oc("{",!0),b_tmpl:new Oc("${",!1),p_stat:new Oc("(",!1),p_expr:new Oc("(",!0),q_tmpl:new Oc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Oc("function",!1),f_expr:new Oc("function",!0),f_expr_gen:new Oc("function",!0,!1,null,!0),f_gen:new Oc("function",!1,!1,null,!0)},ex=As.prototype;ex.initialContext=function(){return[pi.b_stat]};ex.curContext=function(){return this.context[this.context.length-1]};ex.braceIsBlock=function(e){var t=this.curContext();return t===pi.f_expr||t===pi.f_stat?!0:e===G.colon&&(t===pi.b_stat||t===pi.b_expr)?!t.isExpr:e===G._return||e===G.name&&this.exprAllowed?bc.test(this.input.slice(this.lastTokEnd,this.start)):e===G._else||e===G.semi||e===G.eof||e===G.parenR||e===G.arrow?!0:e===G.braceL?t===pi.b_stat:e===G._var||e===G._const||e===G.name?!1:!this.exprAllowed};ex.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};ex.updateContext=function(e){var t,n=this.type;n.keyword&&e===G.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};ex.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};G.parenR.updateContext=G.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===pi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};G.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?pi.b_stat:pi.b_expr),this.exprAllowed=!0};G.dollarBraceL.updateContext=function(){this.context.push(pi.b_tmpl),this.exprAllowed=!0};G.parenL.updateContext=function(e){var t=e===G._if||e===G._for||e===G._with||e===G._while;this.context.push(t?pi.p_stat:pi.p_expr),this.exprAllowed=!0};G.incDec.updateContext=function(){};G._function.updateContext=G._class.updateContext=function(e){e.beforeExpr&&e!==G._else&&!(e===G.semi&&this.curContext()!==pi.p_stat)&&!(e===G._return&&bc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===G.colon||e===G.braceL)&&this.curContext()===pi.b_stat)?this.context.push(pi.f_expr):this.context.push(pi.f_stat),this.exprAllowed=!1};G.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};G.backQuote.updateContext=function(){this.curContext()===pi.q_tmpl?this.context.pop():this.context.push(pi.q_tmpl),this.exprAllowed=!1};G.star.updateContext=function(e){if(e===G._function){var t=this.context.length-1;this.context[t]===pi.f_expr?this.context[t]=pi.f_expr_gen:this.context[t]=pi.f_gen}this.exprAllowed=!0};G.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==G.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kt=As.prototype;Kt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kt.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===G.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(G.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new X4,r=!0);var a=this.start,u=this.startLoc;(this.type===G.parenL||this.type===G.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===G.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===G.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kt.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(G.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(G.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kt.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kt.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==G._in)&&s>r){var o=this.type===G.logicalOR||this.type===G.logicalAND,a=this.type===G.coalesce;a&&(s=G.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===G.coalesce||a&&(this.type===G.logicalOR||this.type===G.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kt.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kt.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===G.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&FDe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===G.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==G._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(G.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function FDe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&FDe(e.expression)}Kt.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kt.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(G.arrow)};Kt.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kt.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(G.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(G.bracketL);if(l||u&&this.type!==G.parenL&&this.type!==G.backQuote||this.eat(G.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(G.bracketR)):this.type===G.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(G.parenL)){var f=new X4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===G.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kt.parseExprAtom=function(e,t,n){this.type===G.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case G._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===G.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==G.dot&&this.type!==G.bracketL&&this.type!==G.parenL&&this.unexpected(),this.finishNode(r,"Super");case G._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case G.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(G._function))return this.overrideContext(pi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(G.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===G.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(G.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case G.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case G.num:case G.string:return this.parseLiteral(this.value);case G._null:case G._true:case G._false:return r=this.startNode(),r.value=this.type===G._null?null:this.type===G._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case G.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case G.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(G.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case G.braceL:return this.overrideContext(pi.b_expr),this.parseObj(!1,e);case G._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case G._class:return this.parseClass(this.startNode(),!1);case G._new:return this.parseNew();case G.backQuote:return this.parseTemplate();case G._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kt.parseExprAtomDefault=function(){this.unexpected()};Kt.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===G.parenL&&!e)return this.parseDynamicImport(t);if(this.type===G.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};Kt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(G.parenR)){var t=this.start;this.eat(G.comma)&&this.eat(G.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kt.parseParenExpression=function(){this.expect(G.parenL);var e=this.parseExpression();return this.expect(G.parenR),e};Kt.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new X4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==G.parenR;)if(l?l=!1:this.expect(G.comma),s&&this.afterTrailingComma(G.parenR,!0)){c=!0;break}else if(this.type===G.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===G.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(G.parenR),e&&this.shouldParseArrow(u)&&this.eat(G.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kt.parseParenItem=function(e){return e};Kt.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var T3t=[];Kt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===G.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(G.parenL)?e.arguments=this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1):e.arguments=T3t,this.finishNode(e,"NewExpression")};Kt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===G.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===G.backQuote,this.finishNode(n,"TemplateElement")};Kt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===G.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(G.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(G.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===G.name||this.type===G.num||this.type===G.string||this.type===G.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===G.star)&&!bc.test(this.input.slice(this.lastTokEnd,this.start))};Kt.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(G.braceR);){if(r)r=!1;else if(this.expect(G.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(G.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kt.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(G.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===G.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===G.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(G.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(G.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kt.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kt.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===G.colon&&this.unexpected(),this.eat(G.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===G.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==G.comma&&this.type!==G.braceR&&this.type!==G.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===G.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(G.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(G.bracketR),e.key;e.computed=!1}return e.key=this.type===G.num||this.type===G.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kt.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(QX(t,r.generator)|KX|(n?RDe:0)),this.expect(G.parenL),r.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kt.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(QX(n,!1)|kDe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kt.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==G.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,MDe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kt.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,JX,t?null:n)}};Kt.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(G.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===G.comma?o=null:this.type===G.ellipsis?(o=this.parseSpread(r),r&&this.type===G.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kt.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kt.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kt.parseIdentNode=function(){var e=this.startNode();return this.type===G.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=G.name):this.unexpected(),e};Kt.parsePrivateIdent=function(){var e=this.startNode();return this.type===G.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===G.semi||this.canInsertSemicolon()||this.type!==G.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(G.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var E3=As.prototype;E3.raise=function(e,t){var n=ODe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};E3.raiseRecoverable=E3.raise;E3.curPosition=function(){if(this.options.locations)return new $C(this.curLine,this.pos-this.lineStart)};var W0=As.prototype,C3t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};W0.enterScope=function(e){this.scopeStack.push(new C3t(e))};W0.exitScope=function(){this.scopeStack.pop()};W0.treatFunctionsAsVarInScope=function(e){return e.flags&ZE||!this.inModule&&e.flags&RC};W0.declareName=function(e,t,n){var r=!1;if(t===fm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&RC&&delete this.undefinedExports[e]}else if(t===DDe){var s=this.currentScope();s.lexical.push(e)}else if(t===NDe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&$De&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&RC&&delete this.undefinedExports[e],u.flags&XX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};W0.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};W0.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};W0.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&XX)return t}};W0.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&XX&&!(t.flags&kDe))return t}};var Q4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new K4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},wI=As.prototype;wI.startNode=function(){return new Q4(this,this.start,this.startLoc)};wI.startNodeAt=function(e,t){return new Q4(this,e,t)};function BDe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}wI.finishNode=function(e,t){return BDe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};wI.finishNodeAt=function(e,t,n,r){return BDe.call(this,e,t,n,r)};wI.copyNode=function(e){var t=new Q4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var jDe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",zDe=jDe+" Extended_Pictographic",UDe=zDe,VDe=UDe+" EBase EComp EMod EPres ExtPict",HDe=VDe,A3t=HDe,I3t={9:jDe,10:zDe,11:UDe,12:VDe,13:HDe,14:A3t},O3t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",P3t={9:"",10:"",11:"",12:"",13:"",14:O3t},Ype="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",qDe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",WDe=qDe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",GDe=WDe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",YDe=GDe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",KDe=YDe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",k3t=KDe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",$3t={9:qDe,10:WDe,11:GDe,12:YDe,13:KDe,14:k3t},XDe={};function R3t(e){var t=XDe[e]={binary:ag(I3t[e]+" "+Ype),binaryOfStrings:ag(P3t[e]),nonBinary:{General_Category:ag(Ype),Script:ag($3t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var nj=0,Kpe=[9,10,11,12,13,14];nj<Kpe.length;nj+=1){var N3t=Kpe[nj];R3t(N3t)}var Et=As.prototype,dh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=XDe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};dh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};dh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};dh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};dh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};dh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};dh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};dh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};dh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};dh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Et.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Et.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Et.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Et.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Et.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Et.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Et.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Et.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Et.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Et.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Et.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Et.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Et.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Et.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Et.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Et.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Et.regexp_eatSyntaxCharacter=function(e){var t=e.current();return QDe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function QDe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Et.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!QDe(n);)e.advance();return e.pos!==t};Et.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Et.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Et.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Et.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=u0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=u0(e.lastIntValue);return!0}return!1};Et.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),D3t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function D3t(e){return Up(e,!0)||e===36||e===95}Et.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),M3t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function M3t(e){return Uw(e,!0)||e===36||e===95||e===8204||e===8205}Et.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Et.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Et.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Et.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Et.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Et.regexp_eatZero=function(e){return e.current()===48&&!J4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Et.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Et.regexp_eatControlLetter=function(e){var t=e.current();return JDe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function JDe(e){return e>=65&&e<=90||e>=97&&e<=122}Et.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&L3t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function L3t(e){return e>=0&&e<=1114111}Et.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Et.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var ZDe=0,Vp=1,Vl=2;Et.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(F3t(t))return e.lastIntValue=-1,e.advance(),Vp;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Vl&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return ZDe};function F3t(e){return e===100||e===68||e===115||e===83||e===119||e===87}Et.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Vp}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return ZDe};Et.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){_I(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Et.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Vp;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Vl;e.raise("Invalid property name")};Et.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";e3e(t=e.current());)e.lastStringValue+=u0(t),e.advance();return e.lastStringValue!==""};function e3e(e){return JDe(e)||e===95}Et.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";B3t(t=e.current());)e.lastStringValue+=u0(t),e.advance();return e.lastStringValue!==""};function B3t(e){return e3e(e)||J4(e)}Et.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Et.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Vl&&e.raise("Negated character class may contain strings"),!0}return!1};Et.regexp_classContents=function(e){return e.current()===93?Vp:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Vp)};Et.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Et.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||r3e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Et.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Et.regexp_classSetExpression=function(e){var t=Vp,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Vl&&(t=Vl);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Vl&&(t=Vp);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Vl&&(t=Vl)}};Et.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Et.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Vp:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Et.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Vl&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Et.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Et.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Vl&&(t=Vl);return t};Et.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Vp:Vl};Et.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&j3t(n)||z3t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function j3t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function z3t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Et.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return U3t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function U3t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Et.regexp_eatClassControlLetter=function(e){var t=e.current();return J4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Et.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Et.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;J4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function J4(e){return e>=48&&e<=57}Et.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;t3e(n=e.current());)e.lastIntValue=16*e.lastIntValue+n3e(n),e.advance();return e.pos!==t};function t3e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function n3e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Et.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Et.regexp_eatOctalDigit=function(e){var t=e.current();return r3e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function r3e(e){return e>=48&&e<=55}Et.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!t3e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+n3e(i),e.advance()}return!0};var eQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new K4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nn=As.prototype;Nn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new eQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Nn.getToken=function(){return this.next(),new eQ(this)};typeof Symbol<"u"&&(Nn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===G.eof,value:t}}}});Nn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(G.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Nn.readToken=function(e){return Up(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Nn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Nn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=CDe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Nn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!JE(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Nn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&ADe.test(String.fromCharCode(e)))++this.pos;else break e}}};Nn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Nn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(G.ellipsis)):(++this.pos,this.finishToken(G.dot))};Nn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(G.assign,2):this.finishOp(G.slash,1)};Nn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?G.star:G.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=G.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(G.assign,n+1):this.finishOp(r,n)};Nn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(G.assign,3)}return this.finishOp(e===124?G.logicalOR:G.logicalAND,2)}return t===61?this.finishOp(G.assign,2):this.finishOp(e===124?G.bitwiseOR:G.bitwiseAND,1)};Nn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(G.assign,2):this.finishOp(G.bitwiseXOR,1)};Nn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||bc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(G.incDec,2):t===61?this.finishOp(G.assign,2):this.finishOp(G.plusMin,1)};Nn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(G.assign,n+1):this.finishOp(G.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(G.relational,n))};Nn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(G.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(G.arrow)):this.finishOp(e===61?G.eq:G.prefix,1)};Nn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(G.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(G.assign,3)}return this.finishOp(G.coalesce,2)}}return this.finishOp(G.question,1)};Nn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Up(t,!0)||t===92))return this.finishToken(G.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+u0(t)+"'")};Nn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(G.parenL);case 41:return++this.pos,this.finishToken(G.parenR);case 59:return++this.pos,this.finishToken(G.semi);case 44:return++this.pos,this.finishToken(G.comma);case 91:return++this.pos,this.finishToken(G.bracketL);case 93:return++this.pos,this.finishToken(G.bracketR);case 123:return++this.pos,this.finishToken(G.braceL);case 125:return++this.pos,this.finishToken(G.braceR);case 58:return++this.pos,this.finishToken(G.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(G.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(G.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+u0(e)+"'")};Nn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Nn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(bc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new dh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(G.regexp,{pattern:i,flags:o,value:u})};Nn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function V3t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function i3e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Nn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=i3e(this.input.slice(t,this.pos)),++this.pos):Up(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(G.num,n)};Nn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=i3e(this.input.slice(t,this.pos));return++this.pos,Up(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(G.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Up(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=V3t(this.input.slice(t,this.pos),n);return this.finishToken(G.num,s)};Nn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Nn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(JE(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(G.string,t)};var s3e={};Nn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===s3e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Nn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw s3e;this.raise(e,t)};Nn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===G.template||this.type===G.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(G.dollarBraceL)):(++this.pos,this.finishToken(G.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(G.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(JE(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Nn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(G.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Nn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return u0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return JE(t)?"":String.fromCharCode(t)}};Nn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Nn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Uw(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Up:Uw)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=u0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Nn.readWord=function(){var e=this.readWord1(),t=G.name;return this.keywords.test(e)&&(t=GX[e]),this.finishToken(t,e)};var H3t="8.11.2";As.acorn={Parser:As,version:H3t,defaultOptions:CV,Position:$C,SourceLocation:K4,getLineInfo:ODe,Node:Q4,TokenType:Kn,tokTypes:G,keywordTypes:GX,TokContext:Oc,tokContexts:pi,isIdentifierChar:Uw,isIdentifierStart:Up,Token:eQ,isNewLine:JE,lineBreak:bc,lineBreakG:m3t,nonASCIIwhitespace:ADe};function q3t(e,t){return As.parse(e,t)}const tQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},W3t={ecmaVersion:11},Xpe="$",G3t="d",Y3t="d1",K3t="d2",ao=e=>(t,n)=>n.error(t,e+" not allowed"),X3t=ao("Aggregate function"),Q3t=ao("Window function"),J3t="Invalid argument",nQ="Invalid column reference",Z3t=nQ+" (must be input to an aggregate function)",o3e="Invalid function call",eMt="Invalid member expression",tMt="Invalid operator parameter",nMt="Invalid param reference",rMt="Invalid variable reference",iMt="Variable not accessible in operator call",sMt="Unsupported variable declaration",oMt="Unsupported destructuring pattern",a3e="Table expressions do not support closures",u3e="Use aq.escape(fn) to use a function as-is (including closures)",aMt="use table.params({ name: value }) to define dynamic parameters",uMt="use aq.addFunction(name, fn) to add new op functions",lMt=`
Note: ${a3e}. ${u3e}, or ${aMt}.`,l3e=`
Note: ${a3e}. ${u3e}, or ${uMt}.`,cMt=`The ${_Re} method is not valid in multi-table expressions.`;function fMt(e,t){const n=dMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,s3t(r)?(pMt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Y3t),e.scope.add(e.tuple2=K3t),e.scope.add(e.$param=Xpe)):(e.scope.add(e.tuple=G3t),e.scope.add(e.$param=Xpe)),Wn(r,e,rQ),e.root}function dMt(e){try{const t=e.field?hMt(e):nr(e)?qd(e):e;return q3t(`expr=(${t})`,W3t).body[0].expression.right}catch{vn(`Expression parse error: ${e+""}`)}}function hMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const rQ={FunctionDeclaration:ao("Function definitions"),ForStatement:ao("For loops"),ForOfStatement:ao("For-of loops"),ForInStatement:ao("For-in loops"),WhileStatement:ao("While loops"),DoWhileStatement:ao("Do-while loops"),AwaitExpression:ao("Await expressions"),ArrowFunctionExpression:ao("Function definitions"),AssignmentExpression:ao("Assignments"),FunctionExpression:ao("Function definitions"),NewExpression:ao('Use of "new"'),UpdateExpression:ao("Update expressions"),VariableDeclarator(e,t){PV(e.id,t)},Identifier(e,t,n){d3e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,rMt,lMt)},CallExpression(e,t){const n=c3e(e.callee),r=gRe(n)||yRe(n);if(r){if((t.join||t.aggregate===!1)&&GK(n)&&X3t(e,t),(t.join||t.window===!1)&&YK(n)&&Q3t(e,t),t.$op=1,t.ast)OV(e,n,t),e.arguments.forEach(i=>Wn(i,t,IV));else{const i=t.op(mMt(t,r,n,e.arguments));Object.assign(e,{type:fRe,name:i.id})}return t.$op=0,!1}else mRe(n)?OV(e,n,t):t.error(e,o3e,l3e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!ys(Rg,r))return;const{name:s}=r;if(f3e(e)&&ys(Rg,i)&&hf(tQ,i.name)){m3e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Qpe(e,o,t,h3e,n);if(s===t.$param)return Qpe(e,o,t,yMt);t.paramsRef.has(s)?NC(e,t.paramsRef.get(s)):t.columnRef.has(s)?p3e(r,s,t,e):hf(t.params,s)&&NC(r,s)}};function Qpe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(ys(YE,s))a=s.value;else try{Wn(s,n,rQ,e),a=n.param(s)}catch{n.error(e,eMt)}return r(e,a,t,n,i),!1}const IV={...rQ,VariableDeclarator:ao("Variable declaration in operator call"),Identifier(e,t,n){d3e(e,t,n)&&t.error(e,iMt)},CallExpression(e,t){const n=c3e(e.callee);mRe(n)?OV(e,n,t):t.error(e,o3e,l3e)}};function pMt(e,t){e.generator&&ao("Generator functions")(e,t),e.async&&ao("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(vS(t,n[0],"tuple1",i(1)),r>1&&vS(t,n[1],"tuple2",i(2)),r>2&&vS(t,n[2],"$param",s)):(vS(t,n[0],"tuple",i(0)),r>1&&vS(t,n[1],"$param",s))),t.root=e.body}function vS(e,t,n,r){ys(Rg,t)?(e.scope.add(t.name),e[n]=t.name):ys(lRe,t)&&t.properties.forEach(i=>{const s=ys(Rg,i.key)?i.key.name:ys(YE,i.key)?i.key.value:e.error(i,J3t);ys(Rg,i.value)||e.error(i.value,oMt),r(i.value.name,s)})}function mMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Wn(u,e,IV),i.push(e.field(u))):l<a?(Wn(u,e,IV),s.push(e.param(u))):e.error(u,tMt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function c3e(e){return ys(Rg,e)?e.name:ys(uRe,e)?f3e(e)?gMt(e.property.name):e.property.name:null}function f3e(e){return ys(Rg,e.object)&&e.object.name==="Math"}function gMt(e){return e==="max"?"greatest":e==="min"?"least":e}function d3e(e,t,n){const{name:r}=e;if(!(ys(uRe,n)&&n.property===e)){if(!(ys(cRe,n)&&n.key===e))if(t.paramsRef.has(r))NC(e,t.paramsRef.get(r));else if(t.columnRef.has(r))p3e(e,r,t,n);else if(hf(t.params,r))NC(e,r);else if(hf(tQ,r))m3e(e,r);else return!0}}function h3e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,nQ),r.aggronly&&!r.$op&&r.error(e,Z3t),vRe(e,t,n,o,i)}function p3e(e,t,n,r){const[i,s]=n.columnRef.get(t);h3e(e,i,s,n,r)}function yMt(e,t,n,r){r.params&&!hf(r.params,t)&&r.error(e,nMt),NC(e,t)}function NC(e,t){e.type=u$t,e.name=t}function m3e(e,t){e.type=s$t,e.name=t,e.raw=tQ[t]}function OV(e,t,n){if(t===_Re){const r=n.table;r||n.error(e,cMt),bRe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ra(s)?r.columnName(s):s;return r.column(o)||n.error(i,nQ),o}):r.columnNames())}else e.callee={type:a$t,name:t}}function PV(e,t){ys(Rg,e)?t.scope.add(e.name):ys(t$t,e)?e.elements.forEach(n=>PV(n,t)):ys(lRe,e)?e.properties.forEach(n=>PV(n.value,t)):t.error(e.id,sMt)}const vMt={[pI]:1,[fRe]:1};function Tu(e,t={}){const n=t.generate||n3,r=t.compiler||KK,i=bMt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=_Mt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return ys(YE,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?i3t(g):f(n(g),i));u.push(y),vMt[g.type]&&y!==g&&sa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,b=String(d.spec).slice(v,_);vn(`${g}: "${b}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of D4(e))d.value(m+"",g.escape?u3t(d,g,i):fMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function _Mt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function bMt(e){return(e.table?rj(e.table):e.join?{...rj(e.join[1]),...rj(e.join[0])}:{})||{}}function rj(e){return e&&ti(e.params)?e.params():{}}const g3e="Expr",Pc="ExprList",y3e="ExprNumber",lT="ExprObject",mb="JoinKeys",x3="JoinValues",Rl="Options",iQ="OrderKeys",$m="SelectionList",By="TableRef",gb="TableRefList",wMt="Descending",EMt="Query",xMt="Selection",SMt="Verb",TMt="Window";function Z4(e,t){return e&&e.expr?new Jpe({...e,...t}):new Jpe(t,e)}class Jpe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ti(this.expr)?{func:!0}:{}}}}function CMt(e){return Z4(e,{desc:!0})}function Q1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return Z4(e,t?{expr:t,...r}:r)}function AMt(e,t,n){return Z4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function IMt(e){const t=n=>n;return t.toString=()=>e,t}function Zpe(e,t){return t=t&&ti(t.query)?t.query():t,t&&ti(t.evaluate)?t.evaluate(null,e):e(t)}function v3e(e){return sa(e)&&(nr(e.all)||nr(e.matches)||nr(e.not)||nr(e.range))}function DC(e){return e&&ti(e.toObject)?e.toObject():ti(e)?{expr:String(e),func:!0}:nr(e)?e.map(DC):sa(e)?G4(e,t=>DC(t)):e}function sQ(e){return nr(e)?e.map(sQ):sa(e)?nr(e.verbs)?aQ.from(e):nr(e.all)?zw():nr(e.range)?ZDt(...e.range):nr(e.match)?e3t(RegExp(...e.match)):nr(e.not)?EDe(e.not.map(DC)):OMt(e):e}function OMt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Q1(n):e.func===!0&&(t=n=IMt(n)),sa(e.window)){const{frame:r,peers:i}=e.window;t=n=AMt(n,r,i)}e.desc===!0&&(t=CMt(n))}return e===t?G4(e,r=>sQ(r)):t}function PMt(e){return nr(e)?e.map(kMt):e}function kMt(e){const t=[];return xu(e).forEach(n=>{Ra(n)?t.push(n):Co(n)?t.push(Q1(n,null)):sa(n)&&n.expr||ti(n)?t.push(n):vn(`Invalid key value: ${n+""}`)}),t}function $Mt(e){return nr(e)?e.map(RMt):e}function RMt(e,t){return t<2?xu(e):e}function NMt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(sa(r)&&!ti(r))for(const i in r)t.push(r[i]);else n=Ra(r)?r:Co(r)?Q1(n):ti(r)?n:vn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const DMt={[g3e]:E3e,[Pc]:Vw,[y3e]:zMt,[lT]:l0,[mb]:UMt,[x3]:VMt,[iQ]:Vw,[$m]:BMt};function MMt(e,t,n){return t===By?eme(e):t===gb?e.map(eme):_3e(DC(e),t,n)}function _3e(e,t,n){return t===Rl?e&&LMt(e,n):DMt[t](e)}function LMt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?_3e(i,t[r]):i}return n}function FMt(e,t){return Tu({expr:e},{...t,ast:!0}).exprs[0]}function oQ(e){return{type:pI,name:e}}function b3e(e){return{type:pI,index:e}}function l0(e,t){if(Co(e))return FMt(e,t);if(e.expr){let n;if(e.field===!0?n=oQ(e.expr):e.func===!0&&(n=l0(e.expr,t)),n)return e.desc&&(n={type:wMt,expr:n}),e.window&&(n={type:TMt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...l0(e[n],t),as:n}))}function w3e(e){const t=xMt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Vw(e.not)}:e.range?{type:t,operator:"range",arguments:Vw(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:vn("Invalid input")}function BMt(e){return xu(e).map(jMt).flat()}function jMt(e){return v3e(e)?w3e(e):Ra(e)?b3e(e):Co(e)?oQ(e):sa(e)?Object.keys(e).map(t=>({type:pI,name:t,as:e[t]})):vn("Invalid input")}function E3e(e){return v3e(e)?w3e(e):Ra(e)?b3e(e):Co(e)?oQ(e):sa(e)?l0(e):vn("Invalid input")}function Vw(e){return xu(e).map(E3e).flat()}function zMt(e){return Ra(e)?e:l0(e)}function UMt(e){return nr(e)?e.map(Vw):l0(e,{join:!0})}function VMt(e){return nr(e)?e.map((t,n)=>n<2?Vw(t):l0(t,{join:!0})):l0(e,{join:!0})}function eme(e){return e&&ti(e.toAST)?e.toAST():e}class x3e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===mb?PMt(a):o===x3?$Mt(a):o===iQ?NMt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=kV[t.verb],r=(n.schema||[]).map(({name:i})=>sQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===By?Zpe(n,o):s===gb?o.map(a=>Zpe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=DC(this[n])}),t}toAST(){const t={type:SMt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=MMt(this[n],r,i)}),t}}function Cr(e,t){return Object.assign((...n)=>new x3e(e,t,n),{schema:t})}const kV={count:Cr("count",[{name:"options",type:Rl}]),derive:Cr("derive",[{name:"values",type:lT},{name:"options",type:Rl,props:{before:$m,after:$m}}]),filter:Cr("filter",[{name:"criteria",type:lT}]),groupby:Cr("groupby",[{name:"keys",type:Pc}]),orderby:Cr("orderby",[{name:"keys",type:iQ}]),relocate:Cr("relocate",[{name:"columns",type:$m},{name:"options",type:Rl,props:{before:$m,after:$m}}]),rename:Cr("rename",[{name:"columns",type:$m}]),rollup:Cr("rollup",[{name:"values",type:lT}]),sample:Cr("sample",[{name:"size",type:y3e},{name:"options",type:Rl,props:{weight:g3e}}]),select:Cr("select",[{name:"columns",type:$m}]),ungroup:Cr("ungroup"),unorder:Cr("unorder"),reify:Cr("reify"),dedupe:Cr("dedupe",[{name:"keys",type:Pc,default:[]}]),impute:Cr("impute",[{name:"values",type:lT},{name:"options",type:Rl,props:{expand:Pc}}]),fold:Cr("fold",[{name:"values",type:Pc},{name:"options",type:Rl}]),pivot:Cr("pivot",[{name:"keys",type:Pc},{name:"values",type:Pc},{name:"options",type:Rl}]),spread:Cr("spread",[{name:"values",type:Pc},{name:"options",type:Rl}]),unroll:Cr("unroll",[{name:"values",type:Pc},{name:"options",type:Rl,props:{drop:Pc}}]),lookup:Cr("lookup",[{name:"table",type:By},{name:"on",type:mb},{name:"values",type:Pc}]),join:Cr("join",[{name:"table",type:By},{name:"on",type:mb},{name:"values",type:x3},{name:"options",type:Rl}]),cross:Cr("cross",[{name:"table",type:By},{name:"values",type:x3},{name:"options",type:Rl}]),semijoin:Cr("semijoin",[{name:"table",type:By},{name:"on",type:mb}]),antijoin:Cr("antijoin",[{name:"table",type:By},{name:"on",type:mb}]),concat:Cr("concat",[{name:"tables",type:gb}]),union:Cr("union",[{name:"tables",type:gb}]),intersect:Cr("intersect",[{name:"tables",type:gb}]),except:Cr("except",[{name:"tables",type:gb}])};let aQ=class S3e extends K$e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new S3e(t.map(x3e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return tme(this,"toObject")}toJSON(){return this.toObject()}toAST(){return tme(this,"toAST",{type:EMt})}};function tme(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function HMt(e,t){return new aQ(e._verbs.concat(t),e._params,e._table)}for(const e in kV){const t=kV[e];aQ.prototype["__"+e]=function(n,...r){return HMt(n,t(...r))}}function tx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function qMt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function uQ(e,t){const n=Sl();return t.forEach((r,i)=>{const s=Co(r)?r:i;if(s){const o=e.column(i)||vn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function T3e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||vn("relocate requires a before or after option."),i&&s&&vn("relocate accepts only one of the before or after options."),t=zp(e,t);const o=[...zp(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),uQ(e,u)}function EI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function lQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function WMt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function GMt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function DP(e){return CC(e)?e:+e}function YMt(e,t){const n=e.length;if(!n)return Xn;if((t=+t)<=0||n<2)return DP(e[0]);if(t>=1)return DP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=DP(e[i]);return CC(s)?s:s+(DP(e[i+1])-s)*(r-i)}class KMt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:WMt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:GMt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(lQ)),YMt(this._sorted,t)}}const S3=(e,t,n)=>tx(t,"{"+EI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function XMt(e,t){const{ops:n,output:r}=QMt(e,t),i=e[0].fields,s=i.length,o=s===0?cQ:s===1?JMt:s===2?ZMt:vn("Unsupported field count: "+s);return new o(i,n,r,t)}function QMt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=gRe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class cQ extends n3t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new KMt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class JMt extends cQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=S3(n,s,"add"),this._rem=S3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Xc(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Xc(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class ZMt extends cQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=S3(n,s,"add"),this._rem=S3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Xc(i)&&Xc(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Xc(i)&&Xc(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function qv(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=nx(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function nx(e,t,n){if(!t.length)return n;const r=C3e(t),i=e.groups(),s=i?i.size:1;return n=n||R4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=I3e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=A3e(e,o);o.write(a,n,0)}),n}function C3e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(XMt(r[i],t));return n}function A3e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function I3e(e,t,n){const{keys:r,size:i}=n,s=R4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function O3e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function P3e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const nme=P3e(lQ);function eLt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?tx(["w","r","k"],"{"+EI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,b=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=nme.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=nme.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const w=i[E],x=a[E];for(let S=_;S<p.i0;++S)w.rem(x,s[S],e);for(let S=b;S<p.i1;++S)w.add(x,s[S],e);w.write(x,u,l)}return h(p,u,l),u}};return p}const tLt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),nLt=e=>!!e.peers;function rLt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=yRe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function iLt(e,t,n,r={},i){const s=e.data(),o=sLt(i,s),a=o.length,u=tx(["r","d","op"],"{"+EI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=oLt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function sLt(e,t){const n={};return e.forEach(r=>{const i=tLt(r),s=nLt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});GK(r.name)?a.push(r):u.push(rLt(r))}),Object.values(n).map(r=>eLt(t,r.frame,r.peers,r.winOps,C3e(r.aggOps,r.frame[0]!=null?-1:1)))}function oLt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function aLt(e){return YK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function fQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Sl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=uLt(r),c=e.isGrouped()?e.groups().size:1,f=nx(e,u,R4(r.length,()=>Array(c)));return l.length?iLt(e,a,n,f,l):lLt(e,a,n,f),e.create(o)}function uLt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(aLt(s)?n:t).push(s)}return[t,n]}function lLt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function cLt(e,t,n={}){const r=fQ(e,Tu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:T3e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function fLt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const MP=2147483648,dLt=4294967295;class k3e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&MP>>>t}set(t){this._bits[t>>5]|=MP>>>t}clear(t){this._bits[t>>5]&=~(MP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&dLt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=MP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function hLt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new k3e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function pLt(e,t){const n=Tu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=fQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return hLt(e,r)}function $3e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=qv(e,r,n),l=Sl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(b=>{if(!a.has(b)){const E=l.add(b,[]);c.has(b)||(f.push(e.column(b)),d.push(E))}}),t.forEach(b=>{a.has(b)||(l.has(b)||l.add(b,[]),h.push(l.data[b]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(b,E)=>{for(let w=0;w<g;++w)d[w].length=m+E,d[w].fill(f[w].get(b),m,m+E)},_=p?(b,E)=>{for(let w=0;w<E;++w)p[b+w]=w}:()=>{};if(y===1){const b=u[0],E=h[0];e.scan((w,x)=>{const S=xu(b(w,x)),P=Math.min(S.length,s);v(w,P);for(let A=0;A<P;++A)E[m+A]=S[A];_(m,P),m+=P})}else e.scan((b,E)=>{let w=0;const x=u.map(S=>{const P=xu(S(b,E));return w=Math.min(Math.max(w,P.length),s),P});v(b,w);for(let S=0;S<y;++S){const P=h[S],A=x[S];for(let O=0;O<w;++O)P[m+O]=A[O]}_(m,w),m+=w});return e.create(l.new())}function mLt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=qv(e,r,n);return $3e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function pf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ra(o)?t.columnName(o):o,Co(o)?i.set(o,Q1(o)):ti(o)?zp(t,o).forEach(s):sa(o)?bDe(i,o):vn(`Invalid ${e} value: ${o+""}`)};return xu(n).forEach(s),r.preparse&&r.preparse(i),Tu(i,{table:t,...r})}function gLt(e,t,n){return mLt(e,pf("fold",e,t),n)}function rme(e,t,n,r){const i=n&&n.length;return yLt(i?vLt(e,n,r):e,t,i)}function yLt(e,{names:t,exprs:n,ops:r},i){const s=qv(e,r,n),o=i?null:Sl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Xc(p)?p:d(h)})}),i?e:e.create(o)}function vLt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=r3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Sl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=r3(o.map((p,m)=>g=>g[m])),h=tx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),ime(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else ime(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function ime(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function dQ(e,{names:t,exprs:n,ops:r}){const i=Sl(),s=e.groups();return s&&O3e(i,s),_Lt(t,n,s,nx(e,r),i),e.create(i.new())}function _Lt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function bLt(e,t,n={}){if(t=Tu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:vn(`Invalid impute column ${qd(r)}`)),n.expand){const r={preparse:wLt,aggronly:!0},i=pf("impute",e,n.expand,r),s=dQ(e.ungroup(),i);return rme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return rme(e,t)}function wLt(e){e.forEach((t,n)=>t.field?e.set(n,iRe(t+"")):0)}function ELt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function R3e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function xLt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function SLt(e,t){const n=["i","a","j","b"];return tx(n,"{"+EI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function TLt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Sl(),g=Array(p),y=Array(p);for(let b=0;b<r.length;++b)g[b]=m.add(r[b],[]),y[b]=i[b];const v=SLt(g,y);if((nr(n)?ALt:CLt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let b=0;b<u;++b)l[b]||v(a[b],o,-1,c);if(s.right)for(let b=0;b<d;++b)h[b]||v(-1,o,f[b],c);return e.create(m.new())}function CLt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function ALt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(w,x,S,P)=>e(S,P,w,x));const b=xLt(v,m,g),E=p.length;for(let w=0;w<E;++w){const x=p[w],S=b.get(d(x,f));if(S){const P=S.length;for(let A=0;A<P;++A){const O=S[A];_(x,f,v[O],m),y[O]=1}h[w]=1}}}function T3(e,t,n){const r=new Map;xu(n).forEach((s,o)=>{s=Ra(s)?t.columnName(s):s,Co(s)?r.set(o,Q1(s)):ti(s)||sa(s)&&s.expr?r.set(o,s):vn(`Invalid ${e} key value: ${s+""}`)});const i=Tu(r,{table:t,aggregate:!1,window:!1});return r3(i.exprs,!0)}function ILt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function hQ(e,t,n){if(n)Co(n)?n=[n,n]:nr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=ILt(e.columnNames(),t.columnNames());r.length||vn("Natural join requires shared column names."),n=[r,r]}return n}function N3e(e,t,n,r){return n.length!==r.length&&vn("Mismatched number of join keys"),[T3("join",e,n),T3("join",t,r)]}const OLt={aggregate:!1,window:!1},PLt={...OLt,index:1};function sme(e,t,n,r,i={}){n=hQ(e,t,n);const s={join:[e,t]};let o;if(nr(n)){const[a,u]=n.map(xu);o=N3e(e,t,a,u),r||(r=kLt(e,a,u,i))}else o=Tu({on:n},s).exprs[0],r||(r=[zw(),zw()]);return TLt(e,t,o,$Lt(e,t,r,s,i&&i.suffix),i)}function kLt(e,t,n,r){const i=[];t.forEach((o,a)=>Co(o)&&o===n[a]?i.push(o):0);const s=EDe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${qd(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,zw()]:[zw(),s]}function $Lt(e,t,n,r,i=[]){if(nr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=pf("join",e,n[0],r)),u--&&(o=pf("join",t,n[1],PLt)),u--&&(a=Tu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(ome(s.names,l,i[0]||"_1"),ome(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Tu(n,r)}function ome(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function RLt(e,t,n,r={}){const i=new k3e(e.totalRows());return(nr(n)?NLt:DLt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function NLt(e,t,n,[r,i]){const s=R3e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function DLt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function ame(e,t,n,r){n=hQ(e,t,n);const i=nr(n)?N3e(e,t,...n.map(xu)):Tu({on:n},{join:[e,t]}).exprs[0];return RLt(e,t,i,r)}function MLt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Sl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Xn)));const l=R3e(t,r),c=tx(["lr","rr","data"],"{"+EI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),qv(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function LLt(e,t,n,r){return n=hQ(e,t,n),MLt(e,t,[T3("lookup",e,n[0]),T3("lookup",t,n[1])],pf("lookup",t,r))}const $V=(e,t)=>e??t;function FLt(e,t,n,r={}){const{keys:i,keyColumn:s}=BLt(e,t,r),o=$V(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>nx(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(jLt(n,a,e.groups(),u))}function BLt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=$V(n.sort,!0),s=$V(n.keySeparator,"_"),o=qv(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=nx(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function jLt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Sl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&O3e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function zLt(e,t,n,r){return FLt(e,pf("fold",e,t),pf("fold",e,n,{preparse:ULt,aggronly:!0}),r)}function ULt(e){e.forEach((t,n)=>t.field?e.set(n,tRe(t+"")):0)}function VLt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),uQ(e,zp(e,t,n))}function ume(e,t){return dQ(e,Tu(t,{table:e,aggronly:!0,window:!1}))}function HLt(e,t,n,r){return(t?r?WLt:qLt:r?YLt:GLt)(e.length,e,n,r)}function qLt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*GE()|0];return t}function WLt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=P3e(lQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*GE())];return t}function GLt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*GE();s<e&&(t[s|0]=n[i])}return t}function YLt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(GE())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function KLt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=GE()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function XLt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):HLt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&KLt(u),e.reify(u)}function QLt(e,t,n={}){return XLt(e,JLt(e,t),ZLt(e,n.weight),n)}const D3e=e=>t=>e.get(t)||0;function JLt(e,t){return Ra(t)?()=>t:D3e(dQ(e,Tu({size:t},{table:e,window:!1})).column("size"))}function ZLt(e,t){return t==null?null:(t=Ra(t)?e.columnName(t):t,D3e(Co(t)?e.column(t):fQ(e,Tu({w:t},{table:e}),{drop:!0}).column("w")))}function e6t(e,t){return uQ(e,zp(e,t))}function t6t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=qv(e,r,n),l=Sl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=n6t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function n6t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=xu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Xn));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function r6t(e,t,n){return t6t(e,pf("spread",e,t),n)}function i6t(e,t){return e.concat(t).dedupe()}function s6t(e,t,n){return $3e(e,pf("unroll",e,t),n&&n.drop?{...n,drop:pf("unroll",e,n.drop).names}:n)}function o6t(e,t){return e.create({groups:a6t(e,t)})}function a6t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=qv(e,r,n);const o=r3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function u6t(e,t){return o6t(e,pf("groupby",e,t))}function l6t(e,t){return e.create({order:t})}const c6t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function f6t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Tu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([n3(p,{index:"a",op:o}),n3(p,{index:"b",op:a})])},window:!1}),l=nx(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=c6t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function d6t(e,t){return l6t(e,h6t(e,t))}function h6t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(sa(o)&&!ti(o))for(const a in o)i(o[a]);else i(Ra(o)?Q1(s,e.columnName(o)):Co(o)?Q1(s):ti(o)?s:vn(`Invalid orderby field: ${s+""}`))}),f6t(e,r)}function p6t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Sl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Xn};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function m6t(e,t){const n=Sl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?I3e(e,t,r):[A3e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function g6t(e){return e.isGrouped()?e.create({groups:null}):e}function y6t(e){return e.isOrdered()?e.create({order:null}):e}const v6t={__antijoin:(e,t,n)=>ame(e,t,n,{anti:!0}),__count:(e,t={})=>ume(e,{[t.as||"count"]:nRe()}),__cross:(e,t,n,r)=>sme(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:p6t,__dedupe:qMt,__derive:cLt,__except:fLt,__filter:pLt,__fold:gLt,__impute:bLt,__intersect:ELt,__join:sme,__lookup:LLt,__pivot:zLt,__relocate:T3e,__rename:VLt,__rollup:ume,__sample:QLt,__select:e6t,__semijoin:ame,__spread:r6t,__union:i6t,__unroll:s6t,__groupby:u6t,__orderby:d6t,__ungroup:g6t,__unorder:y6t,__reduce:m6t};Object.assign(Xh.prototype,v6t);function _6t(e,t){return Xh.from(e,t)}function ij(e){return Z4(e,{escape:!0,toString(){vn("Escaped values can not be serialized.")}})}Xh.prototype;function b6t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let LP;const w6t=new Uint8Array(16);function E6t(){if(!LP&&(LP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!LP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return LP(w6t)}const ro=[];for(let e=0;e<256;++e)ro.push((e+256).toString(16).slice(1));function x6t(e,t=0){return(ro[e[t+0]]+ro[e[t+1]]+ro[e[t+2]]+ro[e[t+3]]+"-"+ro[e[t+4]]+ro[e[t+5]]+"-"+ro[e[t+6]]+ro[e[t+7]]+"-"+ro[e[t+8]]+ro[e[t+9]]+"-"+ro[e[t+10]]+ro[e[t+11]]+ro[e[t+12]]+ro[e[t+13]]+ro[e[t+14]]+ro[e[t+15]]).toLowerCase()}const S6t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lme={randomUUID:S6t};function cme(e,t,n){if(lme.randomUUID&&!t&&!e)return lme.randomUUID();e=e||{};const r=e.random||(e.rng||E6t)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return x6t(r)}let kd=class{static get(){let t=cme();for(;this.ids.has(t);)t=cme();return this.ids.set(t,!0),t}};kd.ids=new Map;function $d(e){return"parent"in e}function T6t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:kd.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:kd.get(),createdOn:Date.now(),val:r}]:[];return{id:kd.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function C6t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:kd.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:kd.get(),createdOn:Date.now(),val:s}]:[];return{id:kd.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ni(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=D6t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function J1(e){return!!e&&!!e[dl]}function c0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===M6t}(e)||Array.isArray(e)||!!e[l2]||!!(!((t=e.constructor)===null||t===void 0)&&t[l2])||eF(e)||tF(e))}function Hw(e,t,n){n===void 0&&(n=!1),f0(e)===0?(n?Object.keys:_Q)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function f0(e){var t=e[dl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:eF(e)?2:tF(e)?3:0}function MC(e,t){return f0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b$(e,t){return f0(e)===2?e.get(t):e[t]}function M3e(e,t,n){var r=f0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function A6t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function eF(e){return R6t&&e instanceof Map}function tF(e){return N6t&&e instanceof Set}function Oy(e){return e.o||e.t}function pQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=L6t(e);delete t[dl];for(var n=_Q(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function mQ(e,t){return t===void 0&&(t=!1),gQ(e)||J1(e)||!c0(e)||(f0(e)>1&&(e.set=e.add=e.clear=e.delete=I6t),Object.freeze(e),t&&Hw(e,function(n,r){return mQ(r,!0)},!0)),e}function I6t(){Ni(2)}function gQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Rd(e){var t=MV[e];return t||Ni(18,e),t}function O6t(e,t){MV[e]||(MV[e]=t)}function fme(){return{}.NODE_ENV==="production"||qw||Ni(0),qw}function sj(e,t){t&&(Rd("Patches"),e.u=[],e.s=[],e.v=t)}function C3(e){RV(e),e.p.forEach(P6t),e.p=null}function RV(e){e===qw&&(qw=e.l)}function dme(e){return qw={p:[],l:qw,h:e,m:!0,_:0}}function P6t(e){var t=e[dl];t.i===0||t.i===1?t.j():t.O=!0}function oj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Rd("ES5").S(t,e,r),r?(n[dl].P&&(C3(t),Ni(4)),c0(e)&&(e=A3(t,e),t.l||I3(t,e)),t.u&&Rd("Patches").M(n[dl].t,e,t.u,t.s)):e=A3(t,n,[]),C3(t),t.u&&t.v(t.u,t.s),e!==vQ?e:void 0}function A3(e,t,n){if(gQ(t))return t;var r=t[dl];if(!r)return Hw(t,function(s,o){return hme(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return I3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=pQ(r.k):r.o;Hw(r.i===3?new Set(i):i,function(s,o){return hme(e,r,i,s,o,n)}),I3(e,i,!1),n&&e.u&&Rd("Patches").R(r,n,e.u,e.s)}return r.o}function hme(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ni(5),J1(i)){var o=A3(e,i,s&&t&&t.i!==3&&!MC(t.D,r)?s.concat(r):void 0);if(M3e(n,r,o),!J1(o))return;e.m=!1}if(c0(i)&&!gQ(i)){if(!e.h.F&&e._<1)return;A3(e,i),t&&t.A.l||I3(e,i)}}function I3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&mQ(t,n)}function aj(e,t){var n=e[dl];return(n?Oy(n):e)[t]}function pme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function NV(e){e.P||(e.P=!0,e.l&&NV(e.l))}function uj(e){e.o||(e.o=pQ(e.t))}function DV(e,t,n){var r=eF(t)?Rd("MapSet").N(t,n):tF(t)?Rd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:fme(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=LV;o&&(u=[a],l=cT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Rd("ES5").J(t,n);return(n?n.A:fme()).p.push(r),r}function k6t(e){return J1(e)||Ni(22,e),function t(n){if(!c0(n))return n;var r,i=n[dl],s=f0(n);if(i){if(!i.P&&(i.i<4||!Rd("ES5").K(i)))return i.t;i.I=!0,r=mme(n,s),i.I=!1}else r=mme(n,s);return Hw(r,function(o,a){i&&b$(i.t,o)===a||M3e(r,o,t(a))}),s===3?new Set(r):r}(e)}function mme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return pQ(e)}function $6t(){function e(r){if(!c0(r))return r;if(Array.isArray(r))return r.map(e);if(eF(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(tF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return MC(r,l2)&&(i[l2]=r[l2]),i}function t(r){return J1(r)?e(r):r}var n="add";O6t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=f0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ni(24),typeof u=="function"&&f==="prototype"&&Ni(24),typeof(u=b$(u,f))!="object"&&Ni(15,o.join("/"))}var d=f0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ni(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ni(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Hw(a.D,function(h,p){var m=b$(f,h),g=b$(d,h),y=p?MC(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===vQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var gme,qw,yQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",R6t=typeof Map<"u",N6t=typeof Set<"u",yme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vQ=yQ?Symbol.for("immer-nothing"):((gme={})["immer-nothing"]=!0,gme),l2=yQ?Symbol.for("immer-draftable"):"__$immer_draftable",dl=yQ?Symbol.for("immer-state"):"__$immer_state",D6t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},M6t=""+Object.prototype.constructor,_Q=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,L6t=Object.getOwnPropertyDescriptors||function(e){var t={};return _Q(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},MV={},LV={get:function(e,t){if(t===dl)return e;var n=Oy(e);if(!MC(n,t))return function(i,s,o){var a,u=pme(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!c0(r)?r:r===aj(e.t,t)?(uj(e),e.o[t]=DV(e.A.h,r,e)):r},has:function(e,t){return t in Oy(e)},ownKeys:function(e){return Reflect.ownKeys(Oy(e))},set:function(e,t,n){var r=pme(Oy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=aj(Oy(e),t),s=i==null?void 0:i[dl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(A6t(n,i)&&(n!==void 0||MC(e.t,t)))return!0;uj(e),NV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return aj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,uj(e),NV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Oy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ni(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ni(12)}},cT={};Hw(LV,function(e,t){cT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),cT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ni(13),cT.set.call(this,e,t,void 0)},cT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ni(14),LV.set.call(this,e[0],t,n,e[0])};var F6t=function(){function e(n){var r=this;this.g=yme,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&Ni(6),o!==void 0&&typeof o!="function"&&Ni(7),c0(i)){var c=dme(r),f=DV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?C3(c):RV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return sj(c,o),oj(m,c)},function(m){throw C3(c),m}):(sj(c,o),oj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===vQ&&(l=void 0),r.F&&mQ(l,!0),o){var h=[],p=[];Rd("Patches").M(i,l,h,p),o(h,p)}return l}Ni(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){c0(n)||Ni(8),J1(n)&&(n=k6t(n));var r=dme(this),i=DV(this,n,void 0);return i[dl].C=!0,RV(r),i},t.finishDraft=function(n,r){var i=n&&n[dl];({}).NODE_ENV!=="production"&&(i&&i.C||Ni(9),i.I&&Ni(10));var s=i.A;return sj(s,r),oj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!yme&&Ni(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Rd("Patches").$;return J1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),hl=new F6t,B6t=hl.produce;hl.produceWithPatches.bind(hl);hl.setAutoFreeze.bind(hl);hl.setUseProxies.bind(hl);hl.applyPatches.bind(hl);hl.createDraft.bind(hl);hl.finishDraft.bind(hl);function j6t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=T6t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return CPe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:kd.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:kd.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function z6t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=j6t(e),s=KEt();s.startListening({matcher:Tde(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Tde(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=SPe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:kd.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var U6t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V6t=Object.prototype.hasOwnProperty;function FV(e,t){return V6t.call(e,t)}function BV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)FV(e,i)&&r.push(i);return r}function pu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function jV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Py(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function L3e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function zV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(zV(e[t]))return!0}else if(typeof e=="object"){for(var r=BV(e),i=r.length,s=0;s<i;s++)if(zV(e[r[s]]))return!0}}return!1}function vme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var F3e=function(e){U6t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,vme(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=vme(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Oi=F3e,H6t=pu,yb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=O3(n,this.path);r&&(r=pu(r));var i=C1(n,{op:"remove",path:this.from}).removed;return C1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=O3(n,this.from);return C1(n,{op:"add",path:this.path,value:pu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:LC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},q6t={add:function(e,t,n){return jV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:yb.move,copy:yb.copy,test:yb.test,_get:yb._get};function O3(e,t){if(t=="")return e;var n={op:"_get",path:t};return C1(e,n),n.value}function C1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):P3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=O3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=LC(e,t.value),o.test===!1)throw new Oi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Oi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=pu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=P3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=L3e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!jV(h))throw new Oi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);jV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Oi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=q6t[t.op].call(t,l,h,e);if(o.test===!1)throw new Oi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=yb[t.op].call(t,l,h,e);if(o.test===!1)throw new Oi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Oi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function nF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Oi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=pu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=C1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function W6t(e,t,n){var r=C1(e,t);if(r.test===!1)throw new Oi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function P3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Oi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(yb[e.op]){if(typeof e.path!="string")throw new Oi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Oi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Oi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Oi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&zV(e.value))throw new Oi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Oi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Oi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=B3e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Oi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Oi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function B3e(e,t,n){try{if(!Array.isArray(e))throw new Oi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)nF(pu(t),pu(e),n||!0);else{n=n||P3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Oi)return i;throw i}}function LC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!LC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!LC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const G6t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Oi,_areEquals:LC,applyOperation:C1,applyPatch:nF,applyReducer:W6t,deepClone:H6t,getValueByPointer:O3,validate:B3e,validator:P3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var bQ=new WeakMap,Y6t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),K6t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function X6t(e){return bQ.get(e)}function Q6t(e,t){return e.observers.get(t)}function J6t(e,t){e.observers.delete(t.callback)}function Z6t(e,t){t.unobserve()}function e4t(e,t){var n=[],r,i=X6t(e);if(!i)i=new Y6t(e),bQ.set(e,i);else{var s=Q6t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=pu(e),t){r.callback=t,r.next=null;var o=function(){UV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){UV(r),clearTimeout(r.next),J6t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new K6t(t,r)),r}function UV(e,t){t===void 0&&(t=!1);var n=bQ.get(e.object);wQ(n.value,e.object,e.patches,"",t),e.patches.length&&nF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function wQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=BV(t),o=BV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(FV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?wQ(c,f,n,r+"/"+Py(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Py(l),value:pu(c)}),n.push({op:"replace",path:r+"/"+Py(l),value:pu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Py(l),value:pu(c)}),n.push({op:"remove",path:r+"/"+Py(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!FV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Py(l),value:pu(t[l])})}}}function j3e(e,t,n){n===void 0&&(n=!1);var r=[];return wQ(e,t,r,"",n),r}const t4t=Object.freeze(Object.defineProperty({__proto__:null,compare:j3e,generate:UV,observe:e4t,unobserve:Z6t},Symbol.toStringTag,{value:"Module"}));Object.assign({},G6t,t4t,{JsonPatchError:F3e,deepClone:pu,escapePathComponent:Py,unescapePathComponent:L3e});var fT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(fT||{});function w$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=U3e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=w$(i,t);return nF(a,pu(o),!0,!1).newDocument}function n4t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function z3e({registry:e,initialState:t}){let n=!1;const r=b6t(),i=z6t(t);function s(c){return i.backend.nodes[c]}r.listen(fT.TRAVERSAL_START,()=>{n=!0}),r.listen(fT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return w$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=w$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=j3e(y,f);if(n4t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=C6t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=w$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(fT.TRAVERSAL_START);const f=U3e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);i4t(p,m)?$d(p)&&d.push(...p.sideEffects.undo):$d(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(fT.TRAVERSAL_END)},undo(){const{current:c}=i;return $d(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return V3e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function r4t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;$d(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)$d(r)&&(r=n[r.parent]),$d(i)&&(i=n[i.parent]);return r.id}function U3e(e,t,n){const r=r4t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),$d(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),$d(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function i4t(e,t){if($d(e)&&e.parent===t.id)return!0;if($d(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function V3e(e,t){return{...e,children:e.children.map(n=>V3e(t[n],t)),name:`${e.label}`}}$6t();function s4t(e){return e.length===2?B6t(e):e}class rF{static create(){return new rF}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:s4t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Id(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var o4t="Expected a function",_me=NaN,a4t="[object Symbol]",u4t=/^\s+|\s+$/g,l4t=/^[-+]0x[0-9a-f]+$/i,c4t=/^0b[01]+$/i,f4t=/^0o[0-7]+$/i,d4t=parseInt,h4t=typeof cu=="object"&&cu&&cu.Object===Object&&cu,p4t=typeof self=="object"&&self&&self.Object===Object&&self,m4t=h4t||p4t||Function("return this")(),g4t=Object.prototype,y4t=g4t.toString,v4t=Math.max,_4t=Math.min,lj=function(){return m4t.Date.now()};function b4t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(o4t);t=bme(t)||0,VV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?v4t(bme(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(w){var x=r,S=i;return r=i=void 0,l=w,o=e.apply(S,x),o}function p(w){return l=w,a=setTimeout(y,t),c?h(w):o}function m(w){var x=w-u,S=w-l,P=t-x;return f?_4t(P,s-S):P}function g(w){var x=w-u,S=w-l;return u===void 0||x>=t||x<0||f&&S>=s}function y(){var w=lj();if(g(w))return v(w);a=setTimeout(y,m(w))}function v(w){return a=void 0,d&&r?h(w):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function b(){return a===void 0?o:v(lj())}function E(){var w=lj(),x=g(w);if(r=arguments,i=this,u=w,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=b,E}function VV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function w4t(e){return!!e&&typeof e=="object"}function E4t(e){return typeof e=="symbol"||w4t(e)&&y4t.call(e)==a4t}function bme(e){if(typeof e=="number")return e;if(E4t(e))return _me;if(VV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(u4t,"");var n=c4t.test(e);return n||f4t.test(e)?d4t(e.slice(2),n?2:8):l4t.test(e)?_me:+e}var x4t=b4t;const Uf=bl(x4t);function H3e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=C.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=C.useMemo(()=>VE(".2s"),[]);return I.jsxs(I.Fragment,{children:[I.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:I.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:I.jsx(Rp,{children:I.jsx(ll,{spacing:3,children:I.jsx(ct,{size:14,style:{color:"#878E95"},children:r})})})})}),I.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),I.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>I.jsxs("g",{transform:`translate(${n}, ${a})`,children:[I.jsx("line",{x2:"-6",stroke:"currentColor"}),I.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),I.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const S4t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:H3e},Symbol.toStringTag,{value:"Module"})),cj=15;function q3e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=C.useState([0,0]),[l,c]=C.useState(!1);return C.useEffect(()=>{const f=es("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<cj&&Math.abs(t(g[r.y])-p[1])<cj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),I.jsx("circle",{style:{cursor:l?"pointer":"default"},r:cj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const T4t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:q3e},Symbol.toStringTag,{value:"Module"})),ui={top:15,left:100,right:15,bottom:70};function HV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=v1(),[c]=v1(),[f]=v1(),[d,h]=C.useState(!0),p=C.useMemo(()=>l-ui.left-ui.right,[l]),m=C.useMemo(()=>u-ui.top-ui.bottom,[u]),g=C.useMemo(()=>{const A=Array.from(new Set(s.map(O=>O[i.category])));return HE($$e).domain(A)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:b}=C.useMemo(()=>{const A=s.map(L=>+L[i.x]).filter(L=>L!==null),[O,z]=Hde(A),D=s.map(L=>+L[i.y]).filter(L=>L!==null),[R,N]=Hde(D);return{xMin:O,xMax:z,yMin:R,yMax:N}},[s,i.x,i.y]),E=C.useMemo(()=>{const A=_-y;return p<=0?null:i.dataType==="date"?C$e([ui.left,p+ui.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Mp([ui.left,p+ui.left]).domain([y-A/10,_+A/10]).nice()},[i.dataType,p,_,y]),w=C.useMemo(()=>{const A=b-v;return m<=0?null:Mp([m+ui.top,ui.top]).domain([v-A/10,b+A/10]).nice()},[m,b,v]),x=C.useMemo(()=>{if(!E||!w)return()=>null;if(r==="Axis Selection"){const A=NCt().extent([[ui.left,ui.top+m-5],[ui.left+p,ui.top+m+5]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[z.selection[0],null],[z.selection[1],null]],E,w,z.mode)}),O=DCt().extent([[ui.left-5,ui.top],[ui.left+5,ui.top+m]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[null,z.selection[0]],[null,z.selection[1]]],E,w,z.mode)});return c.current&&f.current&&(es(f.current).call(O),es(c.current).call(A),t.hasBrush||(es(f.current).call(O.move,[w(b),w(v)]),es(c.current).call(A.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"drag"))),()=>{es(f.current).call(O.move,[w(b),w(v)]),es(c.current).call(A.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"clear")}}if(r==="Rectangular Selection"){const A=MCt().extent([[ui.left,ui.top],[ui.left+p,ui.top+m]]).on("brush",O=>{O.sourceEvent!==void 0&&n([[O.selection[0][0],O.selection[0][1]],[O.selection[1][0],O.selection[1][1]]],E,w,O.mode)}).on("end",O=>{O.selection===null&&O.sourceEvent!==void 0&&(es(a.current).call(A.move,null),e(null))});return es(a.current).call(A),()=>{es(a.current).call(A.move,null),n([[null,null],[null,null]],E,w,"clear")}}return r==="Slider Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear"):r==="Paintbrush Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,E,b,v,w]);C.useEffect(()=>{r==="Slider Selection"&&E&&w&&n([[E(y),w(b)],[E(_),w(v)]],E,w,null)},[r,n,_,y,E,b,v,w]);const S=C.useMemo(()=>o.length===0?null:new Set(o),[o]),P=C.useMemo(()=>!E||!w?null:s.map((A,O)=>{if(A[i.x]===null||A[i.y]===null)return null;const z=i.dataType==="date"?E(new Date(A[i.x])):E(A[i.x]);return I.jsx("circle",{opacity:S&&!S.has(A[i.ids])?.3:1,r:3,fill:S&&!S.has(A[i.ids])?"lightgray":g(A[i.category]),cx:z,cy:w(A[i.y])},O)}),[S,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,w]);return C.useEffect(()=>{r==="Axis Selection"&&CTt(".handle").style("fill","darkgrey")},[t,r]),I.jsxs(gd,{children:[I.jsxs(ll,{children:[I.jsx(Yr,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?I.jsx(zAe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:A=>h(A==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),I.jsxs(ll,{style:{width:"100%",height:"100%"},noWrap:!0,children:[I.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&w?I.jsxs("g",{children:[I.jsx(H3e,{yScale:w,label:i.y,horizontalPosition:ui.left,xRange:E.range()}),I.jsx(HK,{xScale:E,yRange:w.range(),isDate:i.dataType==="date",vertPosition:m+ui.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(A=>({value:A.toString(),offset:E(A)}))})]}):null,P,I.jsx("g",{id:"brushXRef",ref:c}),I.jsx("g",{id:"brushYRef",ref:f}),E&&w&&r==="Paintbrush Selection"?I.jsx(q3e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:w}):null]}),r==="Slider Selection"&&E&&w?I.jsxs(gd,{style:{flexGrow:1},spacing:50,children:[I.jsxs(gd,{spacing:0,children:[I.jsx(ct,{children:i.x}),I.jsx(fU,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:A=>{n([[E(A[0]),t.y1],[E(A[1]),t.y2]],E,w,"drag")},style:{width:"300px"},marks:E.ticks(5).map(A=>({value:A,label:A})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),I.jsxs(gd,{spacing:0,children:[I.jsx(ct,{children:i.y}),I.jsx(fU,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],onChange:A=>{n([[t.x1,w(A[1])],[t.x2,w(A[0])]],E,w,"drag")},style:{width:"300px"},marks:w.ticks(5).map(A=>({value:A,label:A})),value:[w.invert(t.y2),w.invert(t.y1)]})]})]}):null]})]})}const C4t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:HV,default:HV},Symbol.toStringTag,{value:"Module"}));function wme({parameters:e,setAnswer:t}){const[n,r]=C.useState(null),[i,s]=C.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=C.useState(null);C.useEffect(()=>{sAt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=C.useMemo(()=>o?_6t(o):null,[o]),{actions:l,trrack:c}=C.useMemo(()=>{const g=rF.create(),y=g.register("brush",(w,x)=>(w.all={brush:x},w)),v=g.register("brushMove",(w,x)=>(w.all={brush:x},w)),_=g.register("brushResize",(w,x)=>(w.all={brush:x},w)),b=g.register("brushClear",(w,x)=>(w.all={brush:x},w)),E=z3e({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:b},trrack:E}},[]),f=C.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=C.useMemo(()=>Uf(f,100,{maxWait:100}),[f]),h=C.useCallback((g,y,v,_,b)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),w=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),S=v.invert(g[0][1]||i.y1);let P=null;if(_==="clear")P=u;else if(b){const O=new Set(b);P=u.filter(ij(z=>O.has(z[e.ids])))}else e.brushType==="Axis Selection"?P=u.filter(ij(O=>new Date(O[e.x])>=new Date(E)&&new Date(O[e.x])<=new Date(w)&&O[e.y]>=x&&O[e.y]<=S)):P=u.filter(ij(O=>O[e.x]>=E&&O[e.x]<=w&&O[e.y]>=x&&O[e.y]<=S));const A={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?P==null?void 0:P.array("id"):[]};s(A),_==="drag"||_==="handle"?d(_,A):_==="clear"&&c.apply("Clear Brush",l.clearBrush(A)),r(P),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=C.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=C.useCallback(g=>{r(g)},[]);return o?I.jsxs(gd,{spacing:"xs",children:[I.jsx(HV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),I.jsx(uV,{data:o,parameters:e,barsTable:p})]}):I.jsx(kv,{})}const A4t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:wme,default:wme},Symbol.toStringTag,{value:"Module"})),I4t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Eme=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},rx=e=>{const t=C.useRef(null),n=Eme(e),[r,i]=C.useState(0),[s,o]=C.useState(0);C.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Eme({...n,width:n.width||r,height:n.height||s});return[t,a]},O4t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:rx},Symbol.toStringTag,{value:"Module"}));function W3e({data:e,xScale:t,yScale:n,height:r}){return I.jsx("g",{children:e.map((i,s)=>I.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const P4t=Object.freeze(Object.defineProperty({__proto__:null,Bars:W3e},Symbol.toStringTag,{value:"Module"}));function EQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=C.useMemo(()=>{const o=Mp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return I.jsxs("g",{children:[I.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>I.jsxs("g",{transform:`translate(0,${a})`,children:[I.jsx("line",{x2:`${r}`,stroke:"currentColor"}),I.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const k4t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:EQ},Symbol.toStringTag,{value:"Module"}));function G3e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=C.useMemo(()=>{const o=fI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return I.jsxs("g",{children:[I.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>I.jsx("g",{transform:`translate(${a}, 10)`,children:I.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const $4t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:G3e},Symbol.toStringTag,{value:"Module"})),R4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function N4t({parameters:e}){const[n,r]=rx(R4t),i=fI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Mp().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return I.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:I.jsx("svg",{width:r.width,height:r.height,children:I.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[I.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:I.jsx(G3e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),I.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:I.jsx(EQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),I.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:I.jsx(W3e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const D4t=Object.freeze(Object.defineProperty({__proto__:null,default:N4t},Symbol.toStringTag,{value:"Module"}));function Y3e({data:e}){return I.jsx("g",{children:e.map(({bubble:t},n)=>I.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const M4t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:Y3e},Symbol.toStringTag,{value:"Module"}));function xQ({positions:e}){return I.jsx("g",{children:e.map((t,n)=>I.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const L4t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:xQ},Symbol.toStringTag,{value:"Module"})),F4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},B4t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=e$e().size([t-10,n-10]).padding(1.5),o=v4(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},j4t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function z4t({parameters:e}){const[t,n]=rx(F4t),r=B4t(e,n.width,n.height),i=j4t(r,e.selectedIndices);return I.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:I.jsx("svg",{width:n.width,height:n.height,children:I.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[I.jsx(Y3e,{data:r}),I.jsx(xQ,{positions:i})]})})})}const U4t=Object.freeze(Object.defineProperty({__proto__:null,default:z4t},Symbol.toStringTag,{value:"Module"}));function K3e({arcs:e}){return I.jsx("g",{children:e.map((t,n)=>I.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const V4t=Object.freeze(Object.defineProperty({__proto__:null,Slices:K3e},Symbol.toStringTag,{value:"Module"}));function X3e({positions:e}){return I.jsx("g",{children:e.map((t,n)=>I.jsx("g",{transform:`translate(${t.centroid()})`,children:I.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const H4t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:X3e},Symbol.toStringTag,{value:"Module"})),q4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},W4t=GPt().value(e=>e.value),_S=150;function G4t({parameters:e}){const[t,n]=rx(q4t),r=W4t(e.data),i=r.map(o=>aV().innerRadius(0).outerRadius(_S).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>aV().outerRadius(_S+10).innerRadius(_S+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return I.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:I.jsx("svg",{width:n.width,height:n.height,children:I.jsxs("g",{transform:`translate(${[n.marginLeft+_S,n.marginTop+_S].join(",")})`,children:[I.jsx(K3e,{arcs:i}),I.jsx(X3e,{positions:s})]})})})}const Y4t=Object.freeze(Object.defineProperty({__proto__:null,default:G4t},Symbol.toStringTag,{value:"Module"}));function Q3e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=C.useMemo(()=>{const o=Mp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return I.jsxs("g",{children:[I.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>I.jsxs("g",{transform:`translate(${a}, 0)`,children:[I.jsx("line",{y2:`${r}`,stroke:"currentColor"}),I.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const K4t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:Q3e},Symbol.toStringTag,{value:"Module"}));function J3e({data:e,barWidth:t,yScale:n}){return I.jsx("g",{children:e.map((r,i)=>I.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const X4t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:J3e},Symbol.toStringTag,{value:"Module"})),Q4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function J4t({parameters:e}){const[n,r]=rx(Q4t),i=fI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Mp().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,b)=>Number(_)+Number(b))/100,y={};p.forEach((_,b)=>{y[String.fromCharCode(b+65)]=_/g});const v=[y];return mkt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return I.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:I.jsx("svg",{width:r.width,height:r.height,children:I.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[I.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:I.jsx(Q3e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),I.jsx("g",{transform:"translate(0, 0)",children:I.jsx(EQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),I.jsxs("g",{transform:"translate(0, 0)",children:[I.jsx(J3e,{data:c,barWidth:f,yScale:s}),I.jsx(xQ,{positions:d})]})]})})})}const Z4t=Object.freeze(Object.defineProperty({__proto__:null,default:J4t},Symbol.toStringTag,{value:"Module"})),eFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function tFt({parameters:e,setAnswer:t}){const[n,r]=rx(eFt),[i,s]=C.useState(100),[o,a]=C.useState(100),[u,l]=C.useState(300),{taskid:c}=e,{actions:f,trrack:d}=C.useMemo(()=>{const p=rF.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=z3e({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=C.useCallback(p=>{const m=es("#movingCircle"),g=es("#clickAccuracySvg"),y=UU(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return C.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;es(n.current).select("circle").transition().duration(y).ease(bCt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:I.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:I.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[I.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),I.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),I.jsxs(st,{children:["Adjust speed (px/s):",I.jsx(OY,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const nFt=Object.freeze(Object.defineProperty({__proto__:null,default:tFt},Symbol.toStringTag,{value:"Module"}));function xme({rankings:e}){return I.jsx("div",{style:{fontFamily:"sans-serif"},children:I.jsx("div",{children:e.map((t,n)=>I.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function rFt({parameters:e,setAnswer:t}){const n=_c(),r=lh()[n],[i,s]=C.useState(""),{goToNextStep:o,isNextDisabled:a}=UPe(),u=C.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[l]=C.useState(new URLSearchParams(window.location.search)),c=(l.get("admin")||"f")==="t",f=C.useCallback(p=>{s(p),t({status:!0,answers:{[`${r}/leftARP`]:u==="r1"?e.data.r1ARP:e.data.r2ARP,[`${r}/rightARP`]:u==="r2"?e.data.r1ARP:e.data.r2ARP,[`${r}/leftRanking`]:JSON.stringify(u==="r1"?e.data.r1:e.data.r2),[`${r}/rightRanking`]:JSON.stringify(u==="r2"?e.data.r1:e.data.r2),[`${r}/choice`]:p,[`${r}/correctChoice`]:u==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[r,u,e.data,t]),d=C.useCallback(()=>{a||o()},[a,o]);C.useEffect(()=>{const p=tJe([["ArrowLeft",()=>f("left")],["ArrowRight",()=>f("right")],["Enter",d]]);return document.body.addEventListener("keydown",p),()=>{document.body.removeEventListener("keydown",p)}},[f,d]);let h=!1;return u==="r1"?(i==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||i==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(h=!0):(i==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||i==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(h=!0),I.jsxs("div",{children:[I.jsxs(du,{children:[I.jsxs(du.Col,{span:2,children:[I.jsx(xme,{rankings:u==="r1"?e.data.r1:e.data.r2}),I.jsx(Yr,{fullWidth:!0,disabled:i==="left",onClick:()=>{f("left")},children:i==="left"?I.jsx(Jce,{}):"Select this ranking"}),c&&i&&I.jsx("div",{children:u==="r1"?e.data.r1ARP:e.data.r2ARP})]}),I.jsxs(du.Col,{span:2,children:[I.jsx(xme,{rankings:u==="r1"?e.data.r2:e.data.r1}),I.jsx(Yr,{fullWidth:!0,disabled:i==="right",onClick:()=>{f("right")},children:i==="right"?I.jsx(Jce,{}):"Select this ranking"}),c&&i&&I.jsx("div",{children:u==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),c&&i&&I.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:h?"CORRECT":"INCORRECT"})]})}const iFt=Object.freeze(Object.defineProperty({__proto__:null,default:rFt},Symbol.toStringTag,{value:"Module"})),sFt=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":vkt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":A4t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":T4t,"../public/demo-brush-interactions/assets/Scatter.tsx":C4t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":gkt,"../public/demo-brush-interactions/assets/YAxis.tsx":S4t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":ykt,"../public/demo-brush-interactions/assets/types.ts":I4t,"../public/demo-cleveland/assets/BarChart.tsx":D4t,"../public/demo-cleveland/assets/BubbleChart.tsx":U4t,"../public/demo-cleveland/assets/PieChart.tsx":Y4t,"../public/demo-cleveland/assets/StackedBarChart.tsx":Z4t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":P4t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":M4t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":L4t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":K4t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":k4t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":$4t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":V4t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":H4t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":X4t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":O4t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":nFt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":iFt});function oFt({currentConfig:e}){const t=_c(),n=lh()[t],r=`../public/${e.path}`,i=sFt[r].default,s=uh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=ah();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return I.jsx(C.Suspense,{fallback:I.jsx("div",{children:"Loading..."}),children:I.jsx(i,{parameters:e.parameters,setAnswer:u})})}function aFt({currentConfig:e}){const[t,n]=C.useState(null);return C.useEffect(()=>{fetch(`${hc}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:I.jsx(ka,{text:t})}const uFt={},lFt=Object.freeze(Object.defineProperty({__proto__:null,default:uFt},Symbol.toStringTag,{value:"Module"})),cFt=qqe(lFt);var fFt=cFt;function dFt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function hFt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function pFt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function mFt(e){return e.__COMMENTS__}function gFt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var iF={EOL:fFt.EOL||`
`,tryParseNumber:dFt,createComment:hFt,removeComment:pFt,getComment:mFt,forceComment:gFt},yFt="3.2.1";function vFt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Sme}else if(e.length===0)return Sme;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return bFt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),_Ft.bind(null,n)}function _Ft(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Sme(){}function bFt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function Z3e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}Z3e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function eMe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}eMe.description="parse hexadecimal numbers prefixed with 0x";function tMe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}tMe.description="support ISO dates";var SQ={loadDsf:vFt,std:{math:Z3e,hex:eMe,date:tMe}},wFt=function(e,t){var n=iF,r=SQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(R){return R==="{"||R==="}"||R==="["||R==="]"||R===","||R===":"}function d(R){var N,L=0,V=1;for(N=s-1;N>0&&i[N]!==`
`;N--,L++);for(;N>0;N--)i[N]===`
`&&V++;throw new Error(R+" at line "+V+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(R){return i.charAt(s+R)}function m(R){for(var N="",L=o;h();){if(o===L)return h(),R&&L==="'"&&o==="'"&&N.length===0?(h(),g()):N;if(o==="\\")if(h(),o==="u"){for(var V=0,j=0;j<4;j++){h();var H=o.charCodeAt(0),U;o>="0"&&o<="9"?U=H-48:o>="a"&&o<="f"?U=H-97+10:o>="A"&&o<="F"?U=H-65+10:d("Bad \\u char "+o),V=V*16+U}N+=String.fromCharCode(V)}else if(typeof a[o]=="string")N+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):N+=o}d("Bad string")}function g(){for(var R="",N=0,L=0;;){var V=p(-L-5);if(!V||V===`
`)break;L++}function j(){for(var H=L;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),j());;){if(!o)d("Bad multiline string");else if(o==="'"){if(N++,h(),N===3)return R.slice(-1)===`
`&&(R=R.slice(0,-1)),R;continue}else for(;N>0;)R+="'",N--;o===`
`?(R+=`
`,h(),j()):(o!=="\r"&&(R+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var R="",N=s,L=-1;;){if(o===":")return R?L>=0&&L!==R.length&&(s=N+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),R;o<=" "?o?L<0&&(L=R.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):R+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var R=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var N=o==="\r"||o===`
`||o==="";if(N||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=R[0];switch(L){case"f":if(R.trim()==="false")return!1;break;case"n":if(R.trim()==="null")return null;break;case"t":if(R.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var V=n.tryParseNumber(R);if(V!==void 0)return V}}if(N){R=R.trim();var j=l(R);return j!==void 0?j:R}}R+=o}}function b(R,N){var L;for(R--,L=s-2;L>R&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var V=i.substr(R,L-R+1);for(L=0;L<V.length;L++)if(V[L]>" "){var j=V.indexOf(`
`);if(j>=0){var H=[V.substr(0,j),V.substr(j+1)];return N&&H[0].trim().length===0&&H.shift(),H}else return[V]}return[]}function E(R){function N(V,j){var H,U,k,$;switch(typeof V){case"string":V.indexOf(j)>=0&&($=V);break;case"object":if(Object.prototype.toString.apply(V)==="[object Array]")for(H=0,k=V.length;H<k;H++)$=N(V[H],j)||$;else for(U in V)Object.prototype.hasOwnProperty.call(V,U)&&($=N(V[U],j)||$)}return $}function L(V){var j=N(R,V);return j?"found '"+V+`' in a string value, your mistake could be with:
  > `+j+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function w(){var R=[],N,L,V;try{if(u&&(N=n.createComment(R,{a:[]})),h(),L=s,v(),N&&(V=b(L,!0).join(`
`)),o==="]")return h(),N&&(N.e=[V]),R;for(;o;){if(R.push(S()),L=s,v(),o===","&&(h(),L=s,v()),N){var j=b(L);N.a.push([V||"",j[0]||""]),V=j[1]}if(o==="]")return h(),N&&(N.a[N.a.length-1][1]+=V||""),R;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E(R),H}}function x(R){var N="",L={},V,j,H;try{if(u&&(V=n.createComment(L,{c:{},o:[]})),R?j=1:(h(),j=s),v(),V&&(H=b(j,!0).join(`
`)),o==="}"&&!R)return V&&(V.e=[H]),h(),L;for(;o;){if(N=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[N]=S(),j=s,v(),o===","&&(h(),j=s,v()),V){var U=b(j);V.c[N]=[H||"",U[0]||""],H=U[1],V.o.push(N)}if(o==="}"&&!R)return h(),V&&(V.c[N][1]+=H||""),L;v()}if(R)return L;d("End of input while parsing an object (missing '}')")}catch(k){throw k.hint=k.hint||E(L),k}}function S(){switch(v(),o){case"{":return x();case"[":return w();case"'":case'"':return m(!0);default:return _()}}function P(R,N){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var V=N.join(`
`),j=b(L).join(`
`);if(j||V){var H=n.createComment(R,n.getComment(R));H.r=[V,j]}}return R}function A(){v();var R=u?b(1):null;switch(o){case"{":return P(x(),R);case"[":return P(w(),R);default:return P(S(),R)}}function O(){v();var R=u?b(1):null;switch(o){case"{":return P(x(),R);case"[":return P(w(),R)}try{return P(x(!0),R)}catch(N){c();try{return P(S(),R)}catch{throw N}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),D?O():A()},EFt=function(e,t){var n=iF,r=SQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var b,E="---\u2028--\uFEFF-",w=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),P=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),A={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",D=0;function R($,q){return D+=$[0].length+$[1].length-$[2]-$[3],$[0]+q+$[1]}function N($){return $.replace(w,function(q){var F=A[q];return typeof F=="string"?R(g.esc,F):R(g.uni,("0000"+q.charCodeAt(0).toString(16)).slice(-4))})}function L($,q,F,B){return $?(x.lastIndex=0,P.lastIndex=0,c||F||x.test($)||n.tryParseNumber($,!0)!==void 0||P.test($)?(w.lastIndex=0,S.lastIndex=0,w.test($)?!S.test($)&&!B&&d?V($,q):R(g.qstr,N($)):R(g.qstr,$)):R(g.str,$)):R(g.qstr,"")}function V($,q){var F,B=$.replace(/\r/g,"").split(`
`);if(q+=o,B.length===1)return R(g.mstr,B[0]);var Q=s+q+g.mstr[0];for(F=0;F<B.length;F++)Q+=s,B[F]&&(Q+=q+B[F]);return Q+s+q+g.mstr[1]}function j($){return $?l||O.test($)?(w.lastIndex=0,R(g.qkey,w.test($)?N($):$)):R(g.key,$):'""'}function H($,q,F,B){function Q(wt){return wt&&wt[wt[0]==="\r"?1:0]===`
`}function se(wt){return wt&&!Q(wt)}function ae(wt,In,Wt){if(!wt)return"";wt=n.forceComment(wt);var Vt,hr=wt.length;for(Vt=0;Vt<hr&&wt[Vt]<=" ";Vt++);return Wt&&Vt>0&&(wt=wt.substr(Vt)),Vt<hr?In+R(g.rem,wt):wt}var ce=b($);if(ce!==void 0)return R(g.dsf,ce);switch(typeof $){case"string":return L($,z,q,B);case"number":return isFinite($)?R(g.num,String($)):R(g.lit,"null");case"boolean":return R(g.lit,String($));case"object":if(!$)return R(g.lit,"null");var le;a&&(le=n.getComment($));var ge=Object.prototype.toString.apply($)==="[object Array]",ue=z;z+=o;var Fe=s+ue,ke=s+z,Ge=F||u?"":Fe,Re=[],Oe,Me=f?[]:null,Ut=c,Qe=d,je=h?"":g.com[0],xt=0,et,ft,dt,jt,Dn,he,_e,Pe,it;if(ge){for(et=0,ft=$.length;et<ft;et++){if(Oe=et<ft-1,le?(he=le.a[et]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+ke),Me&&(he[0]||he[1]||_e)&&(Me=null)):Re.push(ke),D=0,jt=$[et],Re.push(H(jt,le?_e:!1,!0)+(Oe?h:"")),Me){switch(typeof jt){case"string":D=0,c=!0,d=0,Me.push(H(jt,!1,!0)+(Oe?g.com[0]:"")),c=Ut,d=Qe;break;case"object":if(jt){Me=null;break}default:Me.push(Re[Re.length-1]+(Oe?je:""));break}Oe&&(D+=g.com[0].length-g.com[2]),xt+=D}le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e))}ft===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=R(g.arr,""):(Pe=Ge+R(g.arr,Re.join("")),Me&&(it=Me.join(" "),it.length-xt<=f&&(Pe=R(g.arr,it))))}else{var Ye=le?le.o.slice():[],ut=[];for(dt in $)Object.prototype.hasOwnProperty.call($,dt)&&Ye.indexOf(dt)<0&&ut.push(dt);m&&ut.sort();var tt=Ye.concat(ut);for(et=0,ft=tt.length;et<ft;et++)if(Oe=et<ft-1,dt=tt[et],le?(he=le.c[dt]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+ke),Me&&(he[0]||he[1]||_e)&&(Me=null)):Re.push(ke),D=0,jt=$[dt],Dn=H(jt,le&&_e),Re.push(j(dt)+g.col[0]+(Q(Dn)?"":" ")+Dn+(Oe?h:"")),le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e)),Me){switch(typeof jt){case"string":D=0,c=!0,d=0,Dn=H(jt,!1),c=Ut,d=Qe,Me.push(j(dt)+g.col[0]+" "+Dn+(Oe?g.com[0]:""));break;case"object":if(jt){Me=null;break}default:Me.push(Re[Re.length-1]+(Oe?je:""));break}D+=g.col[0].length-g.col[2],Oe&&(D+=g.com[0].length-g.com[2]),xt+=D}ft===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=R(g.obj,""):(Pe=Ge+R(g.obj,Re.join("")),Me&&(it=Me.join(" "),it.length-xt<=f&&(Pe=R(g.obj,it))))}return z=ue,Pe}}b=r.loadDsf(p,"stringify");var U="",k=a?k=(n.getComment(e)||{}).r:null;return k&&k[0]&&(U=k[0]+`
`),U+=H(e,null,!0,!0),k&&(U+=k[1]||""),U},Yb=iF;function c2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function qV(e,t){if(!(e===null||typeof e!="object")){var n=Yb.getComment(e);n&&Yb.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Tme(o.a,r,n.a[r],qV(e[r]))&&(s=!0);!s&&n.e&&(o.e=c2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Tme(o.s,l,n.c[l],qV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=c2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=c2(n.r[0],n.r[1])),s?o:void 0}}function xFt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function SFt(e,t){var n=[];if(WV(e,t,n,[]),n.length>0){var r=k3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+xFt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),k3(t,r,1)}}function Tme(e,t,n,r){var i=c2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function f2(e,t){var n=c2(t.b,t.a);return n.path=e,n}function d2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(f2(s,o)),d2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(f2(u,l)),d2(l.x,t,u))});e.e&&t.push(f2(n,e.e))}}function WV(e,t,n,r){if(e){if(t===null||typeof t!="object"){d2(e,n,r);return}var i,s=Yb.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],WV(u.x,t[i],n,l)):(n.push(f2(l,u)),d2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],WV(d.x,t[c],n,f))):d&&(n.push(f2(f,d)),d2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function k3(e,t,n){var r=Yb.createComment(e,Yb.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Yb.forceComment(t)),r.r[n]||""}var TFt={extract:function(e){return qV(e,!0)},merge:SFt,header:function(e,t){return k3(e,t,0)},footer:function(e,t){return k3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Cme=iF,CFt=yFt,Ame=wFt,Ime=EFt,AFt=TFt,IFt=SQ,TQ={parse:Ame,stringify:Ime,endOfLine:function(){return Cme.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Cme.EOL=e)},version:CFt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Ame(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Ime(e,t)}},comments:AFt,dsf:IFt.std},GV={exports:{}},nMe={},uf={},Ww={},xI={},An={},FC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,b)=>`${_}${b}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,b)=>(b instanceof n&&(_[b.str]=(_[b.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let b=0;for(;b<v.length;)a(_,v[b]),_.push(y[++b]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let b=0;for(;b<v.length;)_.push(s),a(_,v[b]),_.push(s,h(y[++b]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(FC);var YV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=FC;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(YV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=FC,n=YV;var r=FC;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=YV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(F,B){return this}}class o extends s{constructor(F,B,Q){super(),this.varKind=F,this.name=B,this.rhs=Q}render({es5:F,_n:B}){const Q=F?n.varKinds.var:this.varKind,se=this.rhs===void 0?"":` = ${this.rhs}`;return`${Q} ${this.name}${se};`+B}optimizeNames(F,B){if(F[this.name.str])return this.rhs&&(this.rhs=R(this.rhs,F,B)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(F,B,Q){super(),this.lhs=F,this.rhs=B,this.sideEffects=Q}render({_n:F}){return`${this.lhs} = ${this.rhs};`+F}optimizeNames(F,B){if(!(this.lhs instanceof t.Name&&!F[this.lhs.str]&&!this.sideEffects))return this.rhs=R(this.rhs,F,B),this}get names(){const F=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(F,this.rhs)}}class u extends a{constructor(F,B,Q,se){super(F,Q,se),this.op=B}render({_n:F}){return`${this.lhs} ${this.op}= ${this.rhs};`+F}}class l extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`${this.label}:`+F}}class c extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`break${this.label?` ${this.label}`:""};`+F}}class f extends s{constructor(F){super(),this.error=F}render({_n:F}){return`throw ${this.error};`+F}get names(){return this.error.names}}class d extends s{constructor(F){super(),this.code=F}render({_n:F}){return`${this.code};`+F}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(F,B){return this.code=R(this.code,F,B),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(F=[]){super(),this.nodes=F}render(F){return this.nodes.reduce((B,Q)=>B+Q.render(F),"")}optimizeNodes(){const{nodes:F}=this;let B=F.length;for(;B--;){const Q=F[B].optimizeNodes();Array.isArray(Q)?F.splice(B,1,...Q):Q?F[B]=Q:F.splice(B,1)}return F.length>0?this:void 0}optimizeNames(F,B){const{nodes:Q}=this;let se=Q.length;for(;se--;){const ae=Q[se];ae.optimizeNames(F,B)||(N(F,ae.names),Q.splice(se,1))}return Q.length>0?this:void 0}get names(){return this.nodes.reduce((F,B)=>z(F,B.names),{})}}class p extends h{render(F){return"{"+F._n+super.render(F)+"}"+F._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(F,B){super(B),this.condition=F}render(F){let B=`if(${this.condition})`+super.render(F);return this.else&&(B+="else "+this.else.render(F)),B}optimizeNodes(){super.optimizeNodes();const F=this.condition;if(F===!0)return this.nodes;let B=this.else;if(B){const Q=B.optimizeNodes();B=this.else=Array.isArray(Q)?new g(Q):Q}if(B)return F===!1?B instanceof y?B:B.nodes:this.nodes.length?this:new y(L(F),B instanceof y?[B]:B.nodes);if(!(F===!1||!this.nodes.length))return this}optimizeNames(F,B){var Q;if(this.else=(Q=this.else)===null||Q===void 0?void 0:Q.optimizeNames(F,B),!!(super.optimizeNames(F,B)||this.else))return this.condition=R(this.condition,F,B),this}get names(){const F=super.names;return D(F,this.condition),this.else&&z(F,this.else.names),F}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(F){super(),this.iteration=F}render(F){return`for(${this.iteration})`+super.render(F)}optimizeNames(F,B){if(super.optimizeNames(F,B))return this.iteration=R(this.iteration,F,B),this}get names(){return z(super.names,this.iteration.names)}}class b extends v{constructor(F,B,Q,se){super(),this.varKind=F,this.name=B,this.from=Q,this.to=se}render(F){const B=F.es5?n.varKinds.var:this.varKind,{name:Q,from:se,to:ae}=this;return`for(${B} ${Q}=${se}; ${Q}<${ae}; ${Q}++)`+super.render(F)}get names(){const F=D(super.names,this.from);return D(F,this.to)}}class E extends v{constructor(F,B,Q,se){super(),this.loop=F,this.varKind=B,this.name=Q,this.iterable=se}render(F){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(F)}optimizeNames(F,B){if(super.optimizeNames(F,B))return this.iterable=R(this.iterable,F,B),this}get names(){return z(super.names,this.iterable.names)}}class w extends p{constructor(F,B,Q){super(),this.name=F,this.args=B,this.async=Q}render(F){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(F)}}w.kind="func";class x extends h{render(F){return"return "+super.render(F)}}x.kind="return";class S extends p{render(F){let B="try"+super.render(F);return this.catch&&(B+=this.catch.render(F)),this.finally&&(B+=this.finally.render(F)),B}optimizeNodes(){var F,B;return super.optimizeNodes(),(F=this.catch)===null||F===void 0||F.optimizeNodes(),(B=this.finally)===null||B===void 0||B.optimizeNodes(),this}optimizeNames(F,B){var Q,se;return super.optimizeNames(F,B),(Q=this.catch)===null||Q===void 0||Q.optimizeNames(F,B),(se=this.finally)===null||se===void 0||se.optimizeNames(F,B),this}get names(){const F=super.names;return this.catch&&z(F,this.catch.names),this.finally&&z(F,this.finally.names),F}}class P extends p{constructor(F){super(),this.error=F}render(F){return`catch(${this.error})`+super.render(F)}}P.kind="catch";class A extends p{render(F){return"finally"+super.render(F)}}A.kind="finally";class O{constructor(F,B={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...B,_n:B.lines?`
`:""},this._extScope=F,this._scope=new n.Scope({parent:F}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(F){return this._scope.name(F)}scopeName(F){return this._extScope.name(F)}scopeValue(F,B){const Q=this._extScope.value(F,B);return(this._values[Q.prefix]||(this._values[Q.prefix]=new Set)).add(Q),Q}getScopeValue(F,B){return this._extScope.getValue(F,B)}scopeRefs(F){return this._extScope.scopeRefs(F,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(F,B,Q,se){const ae=this._scope.toName(B);return Q!==void 0&&se&&(this._constants[ae.str]=Q),this._leafNode(new o(F,ae,Q)),ae}const(F,B,Q){return this._def(n.varKinds.const,F,B,Q)}let(F,B,Q){return this._def(n.varKinds.let,F,B,Q)}var(F,B,Q){return this._def(n.varKinds.var,F,B,Q)}assign(F,B,Q){return this._leafNode(new a(F,B,Q))}add(F,B){return this._leafNode(new u(F,e.operators.ADD,B))}code(F){return typeof F=="function"?F():F!==t.nil&&this._leafNode(new d(F)),this}object(...F){const B=["{"];for(const[Q,se]of F)B.length>1&&B.push(","),B.push(Q),(Q!==se||this.opts.es5)&&(B.push(":"),(0,t.addCodeArg)(B,se));return B.push("}"),new t._Code(B)}if(F,B,Q){if(this._blockNode(new y(F)),B&&Q)this.code(B).else().code(Q).endIf();else if(B)this.code(B).endIf();else if(Q)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(F){return this._elseNode(new y(F))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(F,B){return this._blockNode(F),B&&this.code(B).endFor(),this}for(F,B){return this._for(new _(F),B)}forRange(F,B,Q,se,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(F);return this._for(new b(ae,ce,B,Q),()=>se(ce))}forOf(F,B,Q,se=n.varKinds.const){const ae=this._scope.toName(F);if(this.opts.es5){const ce=B instanceof t.Name?B:this.var("_arr",B);return this.forRange("_i",0,(0,t._)`${ce}.length`,le=>{this.var(ae,(0,t._)`${ce}[${le}]`),Q(ae)})}return this._for(new E("of",se,ae,B),()=>Q(ae))}forIn(F,B,Q,se=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(F,(0,t._)`Object.keys(${B})`,Q);const ae=this._scope.toName(F);return this._for(new E("in",se,ae,B),()=>Q(ae))}endFor(){return this._endBlockNode(v)}label(F){return this._leafNode(new l(F))}break(F){return this._leafNode(new c(F))}return(F){const B=new x;if(this._blockNode(B),this.code(F),B.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(F,B,Q){if(!B&&!Q)throw new Error('CodeGen: "try" without "catch" and "finally"');const se=new S;if(this._blockNode(se),this.code(F),B){const ae=this.name("e");this._currNode=se.catch=new P(ae),B(ae)}return Q&&(this._currNode=se.finally=new A,this.code(Q)),this._endBlockNode(P,A)}throw(F){return this._leafNode(new f(F))}block(F,B){return this._blockStarts.push(this._nodes.length),F&&this.code(F).endBlock(B),this}endBlock(F){const B=this._blockStarts.pop();if(B===void 0)throw new Error("CodeGen: not in self-balancing block");const Q=this._nodes.length-B;if(Q<0||F!==void 0&&Q!==F)throw new Error(`CodeGen: wrong number of nodes: ${Q} vs ${F} expected`);return this._nodes.length=B,this}func(F,B=t.nil,Q,se){return this._blockNode(new w(F,B,Q)),se&&this.code(se).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(F=1){for(;F-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(F){return this._currNode.nodes.push(F),this}_blockNode(F){this._currNode.nodes.push(F),this._nodes.push(F)}_endBlockNode(F,B){const Q=this._currNode;if(Q instanceof F||B&&Q instanceof B)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${B?`${F.kind}/${B.kind}`:F.kind}"`)}_elseNode(F){const B=this._currNode;if(!(B instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=B.else=F,this}get _root(){return this._nodes[0]}get _currNode(){const F=this._nodes;return F[F.length-1]}set _currNode(F){const B=this._nodes;B[B.length-1]=F}}e.CodeGen=O;function z(q,F){for(const B in F)q[B]=(q[B]||0)+(F[B]||0);return q}function D(q,F){return F instanceof t._CodeOrName?z(q,F.names):q}function R(q,F,B){if(q instanceof t.Name)return Q(q);if(!se(q))return q;return new t._Code(q._items.reduce((ae,ce)=>(ce instanceof t.Name&&(ce=Q(ce)),ce instanceof t._Code?ae.push(...ce._items):ae.push(ce),ae),[]));function Q(ae){const ce=B[ae.str];return ce===void 0||F[ae.str]!==1?ae:(delete F[ae.str],ce)}function se(ae){return ae instanceof t._Code&&ae._items.some(ce=>ce instanceof t.Name&&F[ce.str]===1&&B[ce.str]!==void 0)}}function N(q,F){for(const B in F)q[B]=(q[B]||0)-(F[B]||0)}function L(q){return typeof q=="boolean"||typeof q=="number"||q===null?!q:(0,t._)`!${$(q)}`}e.not=L;const V=k(e.operators.AND);function j(...q){return q.reduce(V)}e.and=j;const H=k(e.operators.OR);function U(...q){return q.reduce(H)}e.or=U;function k(q){return(F,B)=>F===t.nil?B:B===t.nil?F:(0,t._)`${$(F)} ${q} ${$(B)}`}function $(q){return q instanceof t.Name?q:(0,t._)`(${q})`}})(An);var Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=An,n=FC;function r(w){const x={};for(const S of w)x[S]=!0;return x}e.toHash=r;function i(w,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(s(w,x),!o(x,w.self.RULES.all))}e.alwaysValidSchema=i;function s(w,x=w.schema){const{opts:S,self:P}=w;if(!S.strictSchema||typeof x=="boolean")return;const A=P.RULES.keywords;for(const O in x)A[O]||E(w,`unknown keyword: "${O}"`)}e.checkUnknownRules=s;function o(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(x[S])return!0;return!1}e.schemaHasRules=o;function a(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(S!=="$ref"&&x.all[S])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:w,schemaPath:x},S,P,A){if(!A){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${w}${x}${(0,t.getProperty)(P)}`}e.schemaRefOrVal=u;function l(w){return d(decodeURIComponent(w))}e.unescapeFragment=l;function c(w){return encodeURIComponent(f(w))}e.escapeFragment=c;function f(w){return typeof w=="number"?`${w}`:w.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(w){return w.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(w,x){if(Array.isArray(w))for(const S of w)x(S);else x(w)}e.eachItem=h;function p({mergeNames:w,mergeToName:x,mergeValues:S,resultToName:P}){return(A,O,z,D)=>{const R=z===void 0?O:z instanceof t.Name?(O instanceof t.Name?w(A,O,z):x(A,O,z),z):O instanceof t.Name?(x(A,z,O),O):S(O,z);return D===t.Name&&!(R instanceof t.Name)?P(A,R):R}}e.mergeEvaluated={props:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>{w.if((0,t._)`${x} === true`,()=>w.assign(S,!0),()=>w.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${x})`))}),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>{x===!0?w.assign(S,!0):(w.assign(S,(0,t._)`${S} || {}`),g(w,S,x))}),mergeValues:(w,x)=>w===!0?!0:{...w,...x},resultToName:m}),items:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>w.assign(S,(0,t._)`${x} === true ? true : ${S} > ${x} ? ${S} : ${x}`)),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>w.assign(S,x===!0?!0:(0,t._)`${S} > ${x} ? ${S} : ${x}`)),mergeValues:(w,x)=>w===!0?!0:Math.max(w,x),resultToName:(w,x)=>w.var("items",x)})};function m(w,x){if(x===!0)return w.var("props",!0);const S=w.var("props",(0,t._)`{}`);return x!==void 0&&g(w,S,x),S}e.evaluatedPropsToName=m;function g(w,x,S){Object.keys(S).forEach(P=>w.assign((0,t._)`${x}${(0,t.getProperty)(P)}`,!0))}e.setEvaluated=g;const y={};function v(w,x){return w.scopeValue("func",{ref:x,code:y[x.code]||(y[x.code]=new n._Code(x.code))})}e.useFunc=v;var _;(function(w){w[w.Num=0]="Num",w[w.Str=1]="Str"})(_=e.Type||(e.Type={}));function b(w,x,S){if(w instanceof t.Name){const P=x===_.Num;return S?P?(0,t._)`"[" + ${w} + "]"`:(0,t._)`"['" + ${w} + "']"`:P?(0,t._)`"/" + ${w}`:(0,t._)`"/" + ${w}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(w).toString():"/"+f(w)}e.getErrorPath=b;function E(w,x,S=w.opts.strictSchema){if(S){if(x=`strict mode: ${x}`,S===!0)throw new Error(x);w.self.logger.warn(x)}}e.checkStrictMode=E})(Zn);var hh={};Object.defineProperty(hh,"__esModule",{value:!0});const No=An,OFt={data:new No.Name("data"),valCxt:new No.Name("valCxt"),instancePath:new No.Name("instancePath"),parentData:new No.Name("parentData"),parentDataProperty:new No.Name("parentDataProperty"),rootData:new No.Name("rootData"),dynamicAnchors:new No.Name("dynamicAnchors"),vErrors:new No.Name("vErrors"),errors:new No.Name("errors"),this:new No.Name("this"),self:new No.Name("self"),scope:new No.Name("scope"),json:new No.Name("json"),jsonPos:new No.Name("jsonPos"),jsonLen:new No.Name("jsonLen"),jsonPart:new No.Name("jsonPart")};hh.default=OFt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=An,n=Zn,r=hh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:b}=g,{gen:E,compositeRule:w,allErrors:x}=b,S=f(g,y,v);_??(w||x)?u(E,S):l(b,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:b,compositeRule:E,allErrors:w}=_,x=f(g,y,v);u(b,x),E||w||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:b,it:E}){if(b===void 0)throw new Error("ajv implementation error");const w=g.name("err");g.forRange("i",b,r.default.errors,x=>{g.const(w,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${w}.instancePath === undefined`,()=>g.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${w}.schema`,v),g.assign((0,t._)`${w}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:b}=g;b.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:b}=g,E=[h(b,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let b=_?y:(0,t.str)`${y}/${g}`;return v&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,b]}function m(g,{params:y,message:v},_){const{keyword:b,data:E,schemaValue:w,it:x}=g,{opts:S,propertyName:P,topSchemaRef:A,schemaPath:O}=x;_.push([c.keyword,b],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&_.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&_.push([c.schema,w],[c.parentSchema,(0,t._)`${A}${O}`],[r.default.data,E]),P&&_.push([c.propertyName,P])}})(xI);Object.defineProperty(Ww,"__esModule",{value:!0});Ww.boolOrEmptySchema=Ww.topBoolOrEmptySchema=void 0;const PFt=xI,kFt=An,$Ft=hh,RFt={message:"boolean schema is false"};function NFt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?rMe(e,!1):typeof n=="object"&&n.$async===!0?t.return($Ft.default.data):(t.assign((0,kFt._)`${r}.errors`,null),t.return(!0))}Ww.topBoolOrEmptySchema=NFt;function DFt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),rMe(e)):n.var(t,!0)}Ww.boolOrEmptySchema=DFt;function rMe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,PFt.reportError)(i,RFt,void 0,t)}var SI={},Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.getRules=Z1.isJSONType=void 0;const MFt=["string","number","integer","boolean","null","object","array"],LFt=new Set(MFt);function FFt(e){return typeof e=="string"&&LFt.has(e)}Z1.isJSONType=FFt;function BFt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Z1.getRules=BFt;var _p={};Object.defineProperty(_p,"__esModule",{value:!0});_p.shouldUseRule=_p.shouldUseGroup=_p.schemaHasRulesForType=void 0;function jFt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&iMe(e,r)}_p.schemaHasRulesForType=jFt;function iMe(e,t){return t.rules.some(n=>sMe(e,n))}_p.shouldUseGroup=iMe;function sMe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}_p.shouldUseRule=sMe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=Z1,n=_p,r=xI,i=An,s=Zn;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const b=u(_.type);if(b.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&b.push("null")}return b}e.getSchemaTypes=a;function u(_){const b=Array.isArray(_)?_:_?[_]:[];if(b.every(t.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}e.getJSONTypes=u;function l(_,b){const{gen:E,data:w,opts:x}=_,S=f(b,x.coerceTypes),P=b.length>0&&!(S.length===0&&b.length===1&&(0,n.schemaHasRulesForType)(_,b[0]));if(P){const A=m(b,w,x.strictNumbers,o.Wrong);E.if(A,()=>{S.length?d(_,b,S):y(_)})}return P}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,b){return b?_.filter(E=>c.has(E)||b==="array"&&E==="array"):[]}function d(_,b,E){const{gen:w,data:x,opts:S}=_,P=w.let("dataType",(0,i._)`typeof ${x}`),A=w.let("coerced",(0,i._)`undefined`);S.coerceTypes==="array"&&w.if((0,i._)`${P} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>w.assign(x,(0,i._)`${x}[0]`).assign(P,(0,i._)`typeof ${x}`).if(m(b,x,S.strictNumbers),()=>w.assign(A,x))),w.if((0,i._)`${A} !== undefined`);for(const z of E)(c.has(z)||z==="array"&&S.coerceTypes==="array")&&O(z);w.else(),y(_),w.endIf(),w.if((0,i._)`${A} !== undefined`,()=>{w.assign(x,A),h(_,A)});function O(z){switch(z){case"string":w.elseIf((0,i._)`${P} == "number" || ${P} == "boolean"`).assign(A,(0,i._)`"" + ${x}`).elseIf((0,i._)`${x} === null`).assign(A,(0,i._)`""`);return;case"number":w.elseIf((0,i._)`${P} == "boolean" || ${x} === null
              || (${P} == "string" && ${x} && ${x} == +${x})`).assign(A,(0,i._)`+${x}`);return;case"integer":w.elseIf((0,i._)`${P} === "boolean" || ${x} === null
              || (${P} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(A,(0,i._)`+${x}`);return;case"boolean":w.elseIf((0,i._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(A,!1).elseIf((0,i._)`${x} === "true" || ${x} === 1`).assign(A,!0);return;case"null":w.elseIf((0,i._)`${x} === "" || ${x} === 0 || ${x} === false`),w.assign(A,null);return;case"array":w.elseIf((0,i._)`${P} === "string" || ${P} === "number"
              || ${P} === "boolean" || ${x} === null`).assign(A,(0,i._)`[${x}]`)}}}function h({gen:_,parentData:b,parentDataProperty:E},w){_.if((0,i._)`${b} !== undefined`,()=>_.assign((0,i._)`${b}[${E}]`,w))}function p(_,b,E,w=o.Correct){const x=w===o.Correct?i.operators.EQ:i.operators.NEQ;let S;switch(_){case"null":return(0,i._)`${b} ${x} null`;case"array":S=(0,i._)`Array.isArray(${b})`;break;case"object":S=(0,i._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":S=P((0,i._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":S=P();break;default:return(0,i._)`typeof ${b} ${x} ${_}`}return w===o.Correct?S:(0,i.not)(S);function P(A=i.nil){return(0,i.and)((0,i._)`typeof ${b} == "number"`,A,E?(0,i._)`isFinite(${b})`:i.nil)}}e.checkDataType=p;function m(_,b,E,w){if(_.length===1)return p(_[0],b,E,w);let x;const S=(0,s.toHash)(_);if(S.array&&S.object){const P=(0,i._)`typeof ${b} != "object"`;x=S.null?P:(0,i._)`!${b} || ${P}`,delete S.null,delete S.array,delete S.object}else x=i.nil;S.number&&delete S.integer;for(const P in S)x=(0,i.and)(x,p(P,b,E,w));return x}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:b})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${b}}`};function y(_){const b=v(_);(0,r.reportError)(b,g)}e.reportTypeError=y;function v(_){const{gen:b,data:E,schema:w}=_,x=(0,s.schemaRefOrVal)(_,w,"type");return{gen:b,keyword:"type",data:E,schema:w.type,schemaCode:x,schemaValue:x,parentSchema:w,params:{},it:_}}})(SI);var sF={};Object.defineProperty(sF,"__esModule",{value:!0});sF.assignDefaults=void 0;const S_=An,zFt=Zn;function UFt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Ome(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Ome(e,s,i.default))}sF.assignDefaults=UFt;function Ome(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,S_._)`${s}${(0,S_.getProperty)(t)}`;if(i){(0,zFt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,S_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,S_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,S_._)`${a} = ${(0,S_.stringify)(n)}`)}var _d={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Kr=An,CQ=Zn,Tm=hh,VFt=Zn;function HFt(e,t){const{gen:n,data:r,it:i}=e;n.if(IQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Kr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=HFt;function qFt({gen:e,data:t,it:{opts:n}},r,i){return(0,Kr.or)(...r.map(s=>(0,Kr.and)(IQ(e,t,s,n.ownProperties),(0,Kr._)`${i} = ${s}`)))}Tn.checkMissingProp=qFt;function WFt(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=WFt;function oMe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Kr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=oMe;function AQ(e,t,n){return(0,Kr._)`${oMe(e)}.call(${t}, ${n})`}Tn.isOwnProperty=AQ;function GFt(e,t,n,r){const i=(0,Kr._)`${t}${(0,Kr.getProperty)(n)} !== undefined`;return r?(0,Kr._)`${i} && ${AQ(e,t,n)}`:i}Tn.propertyInData=GFt;function IQ(e,t,n,r){const i=(0,Kr._)`${t}${(0,Kr.getProperty)(n)} === undefined`;return r?(0,Kr.or)(i,(0,Kr.not)(AQ(e,t,n))):i}Tn.noPropertyInData=IQ;function aMe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=aMe;function YFt(e,t){return aMe(t).filter(n=>!(0,CQ.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=YFt;function KFt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Kr._)`${e}, ${t}, ${r}${i}`:t,f=[[Tm.default.instancePath,(0,Kr.strConcat)(Tm.default.instancePath,s)],[Tm.default.parentData,o.parentData],[Tm.default.parentDataProperty,o.parentDataProperty],[Tm.default.rootData,Tm.default.rootData]];o.opts.dynamicRef&&f.push([Tm.default.dynamicAnchors,Tm.default.dynamicAnchors]);const d=(0,Kr._)`${c}, ${n.object(...f)}`;return u!==Kr.nil?(0,Kr._)`${a}.call(${u}, ${d})`:(0,Kr._)`${a}(${d})`}Tn.callValidateCode=KFt;const XFt=(0,Kr._)`new RegExp`;function QFt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Kr._)`${i.code==="new RegExp"?XFt:(0,VFt.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=QFt;function JFt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Kr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:CQ.Type.Num},s),t.if((0,Kr.not)(s),a)})}}Tn.validateArray=JFt;function ZFt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,CQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Kr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Kr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=ZFt;Object.defineProperty(_d,"__esModule",{value:!0});_d.validateKeywordUsage=_d.validSchemaType=_d.funcKeywordCode=_d.macroKeywordCode=void 0;const _a=An,jy=hh,e5t=Tn,t5t=xI;function n5t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=uMe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:_a.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}_d.macroKeywordCode=n5t;function r5t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;s5t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=uMe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Pme(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Pme(e),g(()=>i5t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,_a._)`await `),v=>r.assign(f,!1).if((0,_a._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,_a._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,_a._)`${c}.errors`;return r.assign(y,null),m(_a.nil),y}function m(y=t.async?(0,_a._)`await `:_a.nil){const v=u.opts.passContext?jy.default.this:jy.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,_a._)`${y}${(0,e5t.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,_a.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}_d.funcKeywordCode=r5t;function Pme(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,_a._)`${r.parentData}[${r.parentDataProperty}]`))}function i5t(e,t){const{gen:n}=e;n.if((0,_a._)`Array.isArray(${t})`,()=>{n.assign(jy.default.vErrors,(0,_a._)`${jy.default.vErrors} === null ? ${t} : ${jy.default.vErrors}.concat(${t})`).assign(jy.default.errors,(0,_a._)`${jy.default.vErrors}.length`),(0,t5t.extendErrors)(e)},()=>e.error())}function s5t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function uMe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,_a.stringify)(n)})}function o5t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}_d.validSchemaType=o5t;function a5t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}_d.validateKeywordUsage=a5t;var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});Dg.extendSubschemaMode=Dg.extendSubschemaData=Dg.getSubschema=void 0;const fd=An,lMe=Zn;function u5t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,fd._)`${e.schemaPath}${(0,fd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,fd._)`${e.schemaPath}${(0,fd.getProperty)(t)}${(0,fd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,lMe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Dg.getSubschema=u5t;function l5t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,fd._)`${t.data}${(0,fd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,fd.str)`${l}${(0,lMe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,fd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof fd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Dg.extendSubschemaData=l5t;function c5t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Dg.extendSubschemaMode=c5t;var ho={},cMe={exports:{}},ug=cMe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};E$(t,r,i,e,"",e)};ug.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ug.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ug.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ug.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function E$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in ug.arrayKeywords)for(var d=0;d<f.length;d++)E$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in ug.propsKeywords){if(f&&typeof f=="object")for(var h in f)E$(e,t,n,f[h],i+"/"+c+"/"+f5t(h),s,i,c,r,h)}else(c in ug.keywords||e.allKeys&&!(c in ug.skipKeywords))&&E$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function f5t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var d5t=cMe.exports;Object.defineProperty(ho,"__esModule",{value:!0});ho.getSchemaRefs=ho.resolveUrl=ho.normalizeId=ho._getFullPath=ho.getFullPath=ho.inlineRef=void 0;const h5t=Zn,p5t=cK,m5t=d5t,g5t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function y5t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!KV(e):t?fMe(e)<=t:!1}ho.inlineRef=y5t;const v5t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function KV(e){for(const t in e){if(v5t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(KV)||typeof n=="object"&&KV(n))return!0}return!1}function fMe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!g5t.has(n)&&(typeof e[n]=="object"&&(0,h5t.eachItem)(e[n],r=>t+=fMe(r)),t===1/0))return 1/0}return t}function dMe(e,t="",n){n!==!1&&(t=Kb(t));const r=e.parse(t);return hMe(e,r)}ho.getFullPath=dMe;function hMe(e,t){return e.serialize(t).split("#")[0]+"#"}ho._getFullPath=hMe;const _5t=/#\/?$/;function Kb(e){return e?e.replace(_5t,""):""}ho.normalizeId=Kb;function b5t(e,t,n){return n=Kb(n),e.resolve(t,n)}ho.resolveUrl=b5t;const w5t=/^[a-z_][-a-z0-9._]*$/i;function E5t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Kb(e[n]||t),s={"":i},o=dMe(r,i,!1),a={},u=new Set;return m5t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const b=this.opts.uriResolver.resolve;if(_=Kb(g?b(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==Kb(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!w5t.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!p5t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}ho.getSchemaRefs=E5t;Object.defineProperty(uf,"__esModule",{value:!0});uf.getData=uf.KeywordCxt=uf.validateFunctionCode=void 0;const pMe=Ww,kme=SI,OQ=_p,$3=SI,x5t=sF,h2=_d,fj=Dg,Ot=An,Gt=hh,S5t=ho,bp=Zn,bS=xI;function T5t(e){if(yMe(e)&&(vMe(e),gMe(e))){I5t(e);return}mMe(e,()=>(0,pMe.topBoolOrEmptySchema)(e))}uf.validateFunctionCode=T5t;function mMe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${Gt.default.data}, ${Gt.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${$me(n,i)}`),A5t(e,i),e.code(s)}):e.func(t,(0,Ot._)`${Gt.default.data}, ${C5t(i)}`,r.$async,()=>e.code($me(n,i)).code(s))}function C5t(e){return(0,Ot._)`{${Gt.default.instancePath}="", ${Gt.default.parentData}, ${Gt.default.parentDataProperty}, ${Gt.default.rootData}=${Gt.default.data}${e.dynamicRef?(0,Ot._)`, ${Gt.default.dynamicAnchors}={}`:Ot.nil}}={}`}function A5t(e,t){e.if(Gt.default.valCxt,()=>{e.var(Gt.default.instancePath,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.instancePath}`),e.var(Gt.default.parentData,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.parentData}`),e.var(Gt.default.parentDataProperty,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.parentDataProperty}`),e.var(Gt.default.rootData,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.rootData}`),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.dynamicAnchors}`)},()=>{e.var(Gt.default.instancePath,(0,Ot._)`""`),e.var(Gt.default.parentData,(0,Ot._)`undefined`),e.var(Gt.default.parentDataProperty,(0,Ot._)`undefined`),e.var(Gt.default.rootData,Gt.default.data),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,Ot._)`{}`)})}function I5t(e){const{schema:t,opts:n,gen:r}=e;mMe(e,()=>{n.$comment&&t.$comment&&bMe(e),R5t(e),r.let(Gt.default.vErrors,null),r.let(Gt.default.errors,0),n.unevaluated&&O5t(e),_Me(e),M5t(e)})}function O5t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function $me(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function P5t(e,t){if(yMe(e)&&(vMe(e),gMe(e))){k5t(e,t);return}(0,pMe.boolOrEmptySchema)(e,t)}function gMe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function yMe(e){return typeof e.schema!="boolean"}function k5t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&bMe(e),N5t(e),D5t(e);const s=r.const("_errs",Gt.default.errors);_Me(e,s),r.var(t,(0,Ot._)`${s} === ${Gt.default.errors}`)}function vMe(e){(0,bp.checkUnknownRules)(e),$5t(e)}function _Me(e,t){if(e.opts.jtd)return Rme(e,[],!1,t);const n=(0,kme.getSchemaTypes)(e.schema),r=(0,kme.coerceAndCheckDataType)(e,n);Rme(e,n,!r,t)}function $5t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,bp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function R5t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,bp.checkStrictMode)(e,"default is ignored in the schema root")}function N5t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,S5t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function D5t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function bMe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${Gt.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${Gt.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function M5t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${Gt.default.errors} === 0`,()=>t.return(Gt.default.data),()=>t.throw((0,Ot._)`new ${i}(${Gt.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,Gt.default.vErrors),s.unevaluated&&L5t(e),t.return((0,Ot._)`${Gt.default.errors} === 0`))}function L5t({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function Rme(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,bp.schemaHasRulesButRef)(s,c))){i.block(()=>xMe(e,"$ref",c.all.$ref.definition));return}u.jtd||F5t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,OQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,$3.checkDataType)(d.type,o,u.strictNumbers)),Nme(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,$3.reportTypeError)(e)),i.endIf()):Nme(e,d),a||i.if((0,Ot._)`${Gt.default.errors} === ${r||0}`))}}function Nme(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,x5t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,OQ.shouldUseRule)(r,s)&&xMe(e,s.keyword,s.definition,t.type)})}function F5t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(B5t(e,t),e.opts.allowUnionTypes||j5t(e,t),z5t(e,e.dataTypes))}function B5t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{wMe(e.dataTypes,n)||PQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),V5t(e,t)}}function j5t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&PQ(e,"use allowUnionTypes to allow union type keyword")}function z5t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,OQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>U5t(t,o))&&PQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function U5t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function wMe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function V5t(e,t){const n=[];for(const r of e.dataTypes)wMe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function PQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,bp.checkStrictMode)(e,t,e.opts.strictTypes)}class EMe{constructor(t,n,r){if((0,h2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,bp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",SMe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,h2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Gt.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?bS.reportExtraError:bS.reportError)(this,this.def.error,n)}$dataError(){(0,bS.reportError)(this,this.def.$dataError||bS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,bS.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,$3.checkDataTypes)(u,n,s.opts.strictNumbers,$3.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${u}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,fj.getSubschema)(this.it,t);(0,fj.extendSubschemaData)(r,this.it,t),(0,fj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return P5t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=bp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=bp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}uf.KeywordCxt=EMe;function xMe(e,t,n,r){const i=new EMe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,h2.funcKeywordCode)(i,n):"macro"in n?(0,h2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,h2.funcKeywordCode)(i,n)}const H5t=/^\/(?:[^~]|~0|~1)*$/,q5t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function SMe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Gt.default.rootData;if(e[0]==="/"){if(!H5t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Gt.default.rootData}else{const l=q5t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,bp.unescapeJsonPointer)(l))}`,o=(0,Ot._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}uf.getData=SMe;var TI={};Object.defineProperty(TI,"__esModule",{value:!0});class W5t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}TI.default=W5t;var CI={};Object.defineProperty(CI,"__esModule",{value:!0});const dj=ho;class G5t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,dj.resolveUrl)(t,n,r),this.missingSchema=(0,dj.normalizeId)((0,dj.getFullPath)(t,this.missingRef))}}CI.default=G5t;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.resolveSchema=uu.getCompilingSchema=uu.resolveRef=uu.compileSchema=uu.SchemaEnv=void 0;const Ac=An,Y5t=TI,cy=hh,Gc=ho,Dme=Zn,K5t=uf;class oF{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Gc.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}uu.SchemaEnv=oF;function kQ(e){const t=TMe.call(this,e);if(t)return t;const n=(0,Gc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Ac.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:Y5t.default,code:(0,Ac._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:cy.default.data,parentData:cy.default.parentData,parentDataProperty:cy.default.parentDataProperty,dataNames:[cy.default.data],dataPathArr:[Ac.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ac.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Ac.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ac._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,K5t.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(cy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${cy.default.self}`,`${cy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Ac.Name?void 0:p,items:m instanceof Ac.Name?void 0:m,dynamicProps:p instanceof Ac.Name,dynamicItems:m instanceof Ac.Name},h.source&&(h.source.evaluated=(0,Ac.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}uu.compileSchema=kQ;function X5t(e,t,n){var r;n=(0,Gc.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Z5t.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new oF({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Q5t.call(this,s)}uu.resolveRef=X5t;function Q5t(e){return(0,Gc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:kQ.call(this,e)}function TMe(e){for(const t of this._compilations)if(J5t(t,e))return t}uu.getCompilingSchema=TMe;function J5t(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Z5t(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||aF.call(this,e,t)}function aF(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Gc._getFullPath)(this.opts.uriResolver,n);let i=(0,Gc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return hj.call(this,n,e);const s=(0,Gc.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=aF.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:hj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||kQ.call(this,o),s===(0,Gc.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Gc.resolveUrl)(this.opts.uriResolver,i,l)),new oF({schema:a,schemaId:u,root:e,baseId:i})}return hj.call(this,n,o)}}uu.resolveSchema=aF;const e8t=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function hj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Dme.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!e8t.has(a)&&l&&(t=(0,Gc.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Dme.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Gc.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=aF.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new oF({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const t8t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",n8t="Meta-schema for $data reference (JSON AnySchema extension proposal)",r8t="object",i8t=["$data"],s8t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},o8t=!1,a8t={$id:t8t,description:n8t,type:r8t,required:i8t,properties:s8t,additionalProperties:o8t};var $Q={},XV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(cu,function(n){function r(){for(var ne=arguments.length,J=Array(ne),ie=0;ie<ne;ie++)J[ie]=arguments[ie];if(J.length>1){J[0]=J[0].slice(0,-1);for(var ve=J.length-1,ye=1;ye<ve;++ye)J[ye]=J[ye].slice(1,-1);return J[ve]=J[ve].slice(1),J.join("")}else return J[0]}function i(ne){return"(?:"+ne+")"}function s(ne){return ne===void 0?"undefined":ne===null?"null":Object.prototype.toString.call(ne).split(" ").pop().split("]").shift().toLowerCase()}function o(ne){return ne.toUpperCase()}function a(ne){return ne!=null?ne instanceof Array?ne:typeof ne.length!="number"||ne.split||ne.setInterval||ne.call?[ne]:Array.prototype.slice.call(ne):[]}function u(ne,J){var ie=ne;if(J)for(var ve in J)ie[ve]=J[ve];return ie}function l(ne){var J="[A-Za-z]",ie="[0-9]",ve=r(ie,"[A-Fa-f]"),ye=i(i("%[EFef]"+ve+"%"+ve+ve+"%"+ve+ve)+"|"+i("%[89A-Fa-f]"+ve+"%"+ve+ve)+"|"+i("%"+ve+ve)),yt="[\\:\\/\\?\\#\\[\\]\\@]",Ae="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",pt=r(yt,Ae),Bt=ne?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",At=ne?"[\\uE000-\\uF8FF]":"[]",Ht=r(J,ie,"[\\-\\.\\_\\~]",Bt);i(J+r(J,ie,"[\\+\\-\\.]")+"*"),i(i(ye+"|"+r(Ht,Ae,"[\\:]"))+"*");var fn=i(i("25[0-5]")+"|"+i("2[0-4]"+ie)+"|"+i("1"+ie+ie)+"|"+i("0?[1-9]"+ie)+"|0?0?"+ie),Tr=i(fn+"\\."+fn+"\\."+fn+"\\."+fn),zt=i(ve+"{1,4}"),pr=i(i(zt+"\\:"+zt)+"|"+Tr),Xt=i(i(zt+"\\:")+"{6}"+pr),er=i("\\:\\:"+i(zt+"\\:")+"{5}"+pr),ii=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+pr),ds=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+pr),zi=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+pr),da=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+pr),no=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+pr),vi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),bt=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),wn=i([Xt,er,ii,ds,zi,da,no,vi,bt].join("|")),Br=i(i(Ht+"|"+ye)+"+");i("[vV]"+ve+"+\\."+r(Ht,Ae,"[\\:]")+"+"),i(i(ye+"|"+r(Ht,Ae))+"*");var $s=i(ye+"|"+r(Ht,Ae,"[\\:\\@]"));return i(i(ye+"|"+r(Ht,Ae,"[\\@]"))+"+"),i(i($s+"|"+r("[\\/\\?]",At))+"*"),{NOT_SCHEME:new RegExp(r("[^]",J,ie,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Ht,Ae),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Ht,Ae),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Ht,Ae),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Ht,Ae),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Ht,Ae,"[\\:\\@\\/\\?]",At),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Ht,Ae,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Ht,Ae),"g"),UNRESERVED:new RegExp(Ht,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Ht,pt),"g"),PCT_ENCODED:new RegExp(ye,"g"),IPV4ADDRESS:new RegExp("^("+Tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+wn+")"+i(i("\\%25|\\%(?!"+ve+"{2})")+"("+Br+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ne(J,ie){var ve=[],ye=!0,yt=!1,Ae=void 0;try{for(var pt=J[Symbol.iterator](),Bt;!(ye=(Bt=pt.next()).done)&&(ve.push(Bt.value),!(ie&&ve.length===ie));ye=!0);}catch(At){yt=!0,Ae=At}finally{try{!ye&&pt.return&&pt.return()}finally{if(yt)throw Ae}}return ve}return function(J,ie){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return ne(J,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ne){if(Array.isArray(ne)){for(var J=0,ie=Array(ne.length);J<ne.length;J++)ie[J]=ne[J];return ie}else return Array.from(ne)},p=2147483647,m=36,g=1,y=26,v=38,_=700,b=72,E=128,w="-",x=/^xn--/,S=/[^\0-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=m-g,z=Math.floor,D=String.fromCharCode;function R(ne){throw new RangeError(A[ne])}function N(ne,J){for(var ie=[],ve=ne.length;ve--;)ie[ve]=J(ne[ve]);return ie}function L(ne,J){var ie=ne.split("@"),ve="";ie.length>1&&(ve=ie[0]+"@",ne=ie[1]),ne=ne.replace(P,".");var ye=ne.split("."),yt=N(ye,J).join(".");return ve+yt}function V(ne){for(var J=[],ie=0,ve=ne.length;ie<ve;){var ye=ne.charCodeAt(ie++);if(ye>=55296&&ye<=56319&&ie<ve){var yt=ne.charCodeAt(ie++);(yt&64512)==56320?J.push(((ye&1023)<<10)+(yt&1023)+65536):(J.push(ye),ie--)}else J.push(ye)}return J}var j=function(J){return String.fromCodePoint.apply(String,h(J))},H=function(J){return J-48<10?J-22:J-65<26?J-65:J-97<26?J-97:m},U=function(J,ie){return J+22+75*(J<26)-((ie!=0)<<5)},k=function(J,ie,ve){var ye=0;for(J=ve?z(J/_):J>>1,J+=z(J/ie);J>O*y>>1;ye+=m)J=z(J/O);return z(ye+(O+1)*J/(J+v))},$=function(J){var ie=[],ve=J.length,ye=0,yt=E,Ae=b,pt=J.lastIndexOf(w);pt<0&&(pt=0);for(var Bt=0;Bt<pt;++Bt)J.charCodeAt(Bt)>=128&&R("not-basic"),ie.push(J.charCodeAt(Bt));for(var At=pt>0?pt+1:0;At<ve;){for(var Ht=ye,fn=1,Tr=m;;Tr+=m){At>=ve&&R("invalid-input");var zt=H(J.charCodeAt(At++));(zt>=m||zt>z((p-ye)/fn))&&R("overflow"),ye+=zt*fn;var pr=Tr<=Ae?g:Tr>=Ae+y?y:Tr-Ae;if(zt<pr)break;var Xt=m-pr;fn>z(p/Xt)&&R("overflow"),fn*=Xt}var er=ie.length+1;Ae=k(ye-Ht,er,Ht==0),z(ye/er)>p-yt&&R("overflow"),yt+=z(ye/er),ye%=er,ie.splice(ye++,0,yt)}return String.fromCodePoint.apply(String,ie)},q=function(J){var ie=[];J=V(J);var ve=J.length,ye=E,yt=0,Ae=b,pt=!0,Bt=!1,At=void 0;try{for(var Ht=J[Symbol.iterator](),fn;!(pt=(fn=Ht.next()).done);pt=!0){var Tr=fn.value;Tr<128&&ie.push(D(Tr))}}catch(Se){Bt=!0,At=Se}finally{try{!pt&&Ht.return&&Ht.return()}finally{if(Bt)throw At}}var zt=ie.length,pr=zt;for(zt&&ie.push(w);pr<ve;){var Xt=p,er=!0,ii=!1,ds=void 0;try{for(var zi=J[Symbol.iterator](),da;!(er=(da=zi.next()).done);er=!0){var no=da.value;no>=ye&&no<Xt&&(Xt=no)}}catch(Se){ii=!0,ds=Se}finally{try{!er&&zi.return&&zi.return()}finally{if(ii)throw ds}}var vi=pr+1;Xt-ye>z((p-yt)/vi)&&R("overflow"),yt+=(Xt-ye)*vi,ye=Xt;var bt=!0,wn=!1,Br=void 0;try{for(var $s=J[Symbol.iterator](),Wa;!(bt=(Wa=$s.next()).done);bt=!0){var W=Wa.value;if(W<ye&&++yt>p&&R("overflow"),W==ye){for(var te=yt,K=m;;K+=m){var fe=K<=Ae?g:K>=Ae+y?y:K-Ae;if(te<fe)break;var pe=te-fe,oe=m-fe;ie.push(D(U(fe+pe%oe,0))),te=z(pe/oe)}ie.push(D(U(te,0))),Ae=k(yt,vi,pr==zt),yt=0,++pr}}}catch(Se){wn=!0,Br=Se}finally{try{!bt&&$s.return&&$s.return()}finally{if(wn)throw Br}}++yt,++ye}return ie.join("")},F=function(J){return L(J,function(ie){return x.test(ie)?$(ie.slice(4).toLowerCase()):ie})},B=function(J){return L(J,function(ie){return S.test(ie)?"xn--"+q(ie):ie})},Q={version:"2.1.0",ucs2:{decode:V,encode:j},decode:$,encode:q,toASCII:B,toUnicode:F},se={};function ae(ne){var J=ne.charCodeAt(0),ie=void 0;return J<16?ie="%0"+J.toString(16).toUpperCase():J<128?ie="%"+J.toString(16).toUpperCase():J<2048?ie="%"+(J>>6|192).toString(16).toUpperCase()+"%"+(J&63|128).toString(16).toUpperCase():ie="%"+(J>>12|224).toString(16).toUpperCase()+"%"+(J>>6&63|128).toString(16).toUpperCase()+"%"+(J&63|128).toString(16).toUpperCase(),ie}function ce(ne){for(var J="",ie=0,ve=ne.length;ie<ve;){var ye=parseInt(ne.substr(ie+1,2),16);if(ye<128)J+=String.fromCharCode(ye),ie+=3;else if(ye>=194&&ye<224){if(ve-ie>=6){var yt=parseInt(ne.substr(ie+4,2),16);J+=String.fromCharCode((ye&31)<<6|yt&63)}else J+=ne.substr(ie,6);ie+=6}else if(ye>=224){if(ve-ie>=9){var Ae=parseInt(ne.substr(ie+4,2),16),pt=parseInt(ne.substr(ie+7,2),16);J+=String.fromCharCode((ye&15)<<12|(Ae&63)<<6|pt&63)}else J+=ne.substr(ie,9);ie+=9}else J+=ne.substr(ie,3),ie+=3}return J}function le(ne,J){function ie(ve){var ye=ce(ve);return ye.match(J.UNRESERVED)?ye:ve}return ne.scheme&&(ne.scheme=String(ne.scheme).replace(J.PCT_ENCODED,ie).toLowerCase().replace(J.NOT_SCHEME,"")),ne.userinfo!==void 0&&(ne.userinfo=String(ne.userinfo).replace(J.PCT_ENCODED,ie).replace(J.NOT_USERINFO,ae).replace(J.PCT_ENCODED,o)),ne.host!==void 0&&(ne.host=String(ne.host).replace(J.PCT_ENCODED,ie).toLowerCase().replace(J.NOT_HOST,ae).replace(J.PCT_ENCODED,o)),ne.path!==void 0&&(ne.path=String(ne.path).replace(J.PCT_ENCODED,ie).replace(ne.scheme?J.NOT_PATH:J.NOT_PATH_NOSCHEME,ae).replace(J.PCT_ENCODED,o)),ne.query!==void 0&&(ne.query=String(ne.query).replace(J.PCT_ENCODED,ie).replace(J.NOT_QUERY,ae).replace(J.PCT_ENCODED,o)),ne.fragment!==void 0&&(ne.fragment=String(ne.fragment).replace(J.PCT_ENCODED,ie).replace(J.NOT_FRAGMENT,ae).replace(J.PCT_ENCODED,o)),ne}function ge(ne){return ne.replace(/^0*(.*)/,"$1")||"0"}function ue(ne,J){var ie=ne.match(J.IPV4ADDRESS)||[],ve=d(ie,2),ye=ve[1];return ye?ye.split(".").map(ge).join("."):ne}function Fe(ne,J){var ie=ne.match(J.IPV6ADDRESS)||[],ve=d(ie,3),ye=ve[1],yt=ve[2];if(ye){for(var Ae=ye.toLowerCase().split("::").reverse(),pt=d(Ae,2),Bt=pt[0],At=pt[1],Ht=At?At.split(":").map(ge):[],fn=Bt.split(":").map(ge),Tr=J.IPV4ADDRESS.test(fn[fn.length-1]),zt=Tr?7:8,pr=fn.length-zt,Xt=Array(zt),er=0;er<zt;++er)Xt[er]=Ht[er]||fn[pr+er]||"";Tr&&(Xt[zt-1]=ue(Xt[zt-1],J));var ii=Xt.reduce(function(vi,bt,wn){if(!bt||bt==="0"){var Br=vi[vi.length-1];Br&&Br.index+Br.length===wn?Br.length++:vi.push({index:wn,length:1})}return vi},[]),ds=ii.sort(function(vi,bt){return bt.length-vi.length})[0],zi=void 0;if(ds&&ds.length>1){var da=Xt.slice(0,ds.index),no=Xt.slice(ds.index+ds.length);zi=da.join(":")+"::"+no.join(":")}else zi=Xt.join(":");return yt&&(zi+="%"+yt),zi}else return ne}var ke=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ge="".match(/(){0}/)[1]===void 0;function Re(ne){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie={},ve=J.iri!==!1?f:c;J.reference==="suffix"&&(ne=(J.scheme?J.scheme+":":"")+"//"+ne);var ye=ne.match(ke);if(ye){Ge?(ie.scheme=ye[1],ie.userinfo=ye[3],ie.host=ye[4],ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ye[7],ie.fragment=ye[8],isNaN(ie.port)&&(ie.port=ye[5])):(ie.scheme=ye[1]||void 0,ie.userinfo=ne.indexOf("@")!==-1?ye[3]:void 0,ie.host=ne.indexOf("//")!==-1?ye[4]:void 0,ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ne.indexOf("?")!==-1?ye[7]:void 0,ie.fragment=ne.indexOf("#")!==-1?ye[8]:void 0,isNaN(ie.port)&&(ie.port=ne.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ye[4]:void 0)),ie.host&&(ie.host=Fe(ue(ie.host,ve),ve)),ie.scheme===void 0&&ie.userinfo===void 0&&ie.host===void 0&&ie.port===void 0&&!ie.path&&ie.query===void 0?ie.reference="same-document":ie.scheme===void 0?ie.reference="relative":ie.fragment===void 0?ie.reference="absolute":ie.reference="uri",J.reference&&J.reference!=="suffix"&&J.reference!==ie.reference&&(ie.error=ie.error||"URI is not a "+J.reference+" reference.");var yt=se[(J.scheme||ie.scheme||"").toLowerCase()];if(!J.unicodeSupport&&(!yt||!yt.unicodeSupport)){if(ie.host&&(J.domainHost||yt&&yt.domainHost))try{ie.host=Q.toASCII(ie.host.replace(ve.PCT_ENCODED,ce).toLowerCase())}catch(Ae){ie.error=ie.error||"Host's domain name can not be converted to ASCII via punycode: "+Ae}le(ie,c)}else le(ie,ve);yt&&yt.parse&&yt.parse(ie,J)}else ie.error=ie.error||"URI can not be parsed.";return ie}function Oe(ne,J){var ie=J.iri!==!1?f:c,ve=[];return ne.userinfo!==void 0&&(ve.push(ne.userinfo),ve.push("@")),ne.host!==void 0&&ve.push(Fe(ue(String(ne.host),ie),ie).replace(ie.IPV6ADDRESS,function(ye,yt,Ae){return"["+yt+(Ae?"%25"+Ae:"")+"]"})),(typeof ne.port=="number"||typeof ne.port=="string")&&(ve.push(":"),ve.push(String(ne.port))),ve.length?ve.join(""):void 0}var Me=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,je=/^\/?(?:.|\n)*?(?=\/|$)/;function xt(ne){for(var J=[];ne.length;)if(ne.match(Me))ne=ne.replace(Me,"");else if(ne.match(Ut))ne=ne.replace(Ut,"/");else if(ne.match(Qe))ne=ne.replace(Qe,"/"),J.pop();else if(ne==="."||ne==="..")ne="";else{var ie=ne.match(je);if(ie){var ve=ie[0];ne=ne.slice(ve.length),J.push(ve)}else throw new Error("Unexpected dot segment condition")}return J.join("")}function et(ne){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=J.iri?f:c,ve=[],ye=se[(J.scheme||ne.scheme||"").toLowerCase()];if(ye&&ye.serialize&&ye.serialize(ne,J),ne.host&&!ie.IPV6ADDRESS.test(ne.host)){if(J.domainHost||ye&&ye.domainHost)try{ne.host=J.iri?Q.toUnicode(ne.host):Q.toASCII(ne.host.replace(ie.PCT_ENCODED,ce).toLowerCase())}catch(pt){ne.error=ne.error||"Host's domain name can not be converted to "+(J.iri?"Unicode":"ASCII")+" via punycode: "+pt}}le(ne,ie),J.reference!=="suffix"&&ne.scheme&&(ve.push(ne.scheme),ve.push(":"));var yt=Oe(ne,J);if(yt!==void 0&&(J.reference!=="suffix"&&ve.push("//"),ve.push(yt),ne.path&&ne.path.charAt(0)!=="/"&&ve.push("/")),ne.path!==void 0){var Ae=ne.path;!J.absolutePath&&(!ye||!ye.absolutePath)&&(Ae=xt(Ae)),yt===void 0&&(Ae=Ae.replace(/^\/\//,"/%2F")),ve.push(Ae)}return ne.query!==void 0&&(ve.push("?"),ve.push(ne.query)),ne.fragment!==void 0&&(ve.push("#"),ve.push(ne.fragment)),ve.join("")}function ft(ne,J){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=arguments[3],ye={};return ve||(ne=Re(et(ne,ie),ie),J=Re(et(J,ie),ie)),ie=ie||{},!ie.tolerant&&J.scheme?(ye.scheme=J.scheme,ye.userinfo=J.userinfo,ye.host=J.host,ye.port=J.port,ye.path=xt(J.path||""),ye.query=J.query):(J.userinfo!==void 0||J.host!==void 0||J.port!==void 0?(ye.userinfo=J.userinfo,ye.host=J.host,ye.port=J.port,ye.path=xt(J.path||""),ye.query=J.query):(J.path?(J.path.charAt(0)==="/"?ye.path=xt(J.path):((ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0)&&!ne.path?ye.path="/"+J.path:ne.path?ye.path=ne.path.slice(0,ne.path.lastIndexOf("/")+1)+J.path:ye.path=J.path,ye.path=xt(ye.path)),ye.query=J.query):(ye.path=ne.path,J.query!==void 0?ye.query=J.query:ye.query=ne.query),ye.userinfo=ne.userinfo,ye.host=ne.host,ye.port=ne.port),ye.scheme=ne.scheme),ye.fragment=J.fragment,ye}function dt(ne,J,ie){var ve=u({scheme:"null"},ie);return et(ft(Re(ne,ve),Re(J,ve),ve,!0),ve)}function jt(ne,J){return typeof ne=="string"?ne=et(Re(ne,J),J):s(ne)==="object"&&(ne=Re(et(ne,J),J)),ne}function Dn(ne,J,ie){return typeof ne=="string"?ne=et(Re(ne,ie),ie):s(ne)==="object"&&(ne=et(ne,ie)),typeof J=="string"?J=et(Re(J,ie),ie):s(J)==="object"&&(J=et(J,ie)),ne===J}function he(ne,J){return ne&&ne.toString().replace(!J||!J.iri?c.ESCAPE:f.ESCAPE,ae)}function _e(ne,J){return ne&&ne.toString().replace(!J||!J.iri?c.PCT_ENCODED:f.PCT_ENCODED,ce)}var Pe={scheme:"http",domainHost:!0,parse:function(J,ie){return J.host||(J.error=J.error||"HTTP URIs must have a host."),J},serialize:function(J,ie){var ve=String(J.scheme).toLowerCase()==="https";return(J.port===(ve?443:80)||J.port==="")&&(J.port=void 0),J.path||(J.path="/"),J}},it={scheme:"https",domainHost:Pe.domainHost,parse:Pe.parse,serialize:Pe.serialize};function Ye(ne){return typeof ne.secure=="boolean"?ne.secure:String(ne.scheme).toLowerCase()==="wss"}var ut={scheme:"ws",domainHost:!0,parse:function(J,ie){var ve=J;return ve.secure=Ye(ve),ve.resourceName=(ve.path||"/")+(ve.query?"?"+ve.query:""),ve.path=void 0,ve.query=void 0,ve},serialize:function(J,ie){if((J.port===(Ye(J)?443:80)||J.port==="")&&(J.port=void 0),typeof J.secure=="boolean"&&(J.scheme=J.secure?"wss":"ws",J.secure=void 0),J.resourceName){var ve=J.resourceName.split("?"),ye=d(ve,2),yt=ye[0],Ae=ye[1];J.path=yt&&yt!=="/"?yt:void 0,J.query=Ae,J.resourceName=void 0}return J.fragment=void 0,J}},tt={scheme:"wss",domainHost:ut.domainHost,parse:ut.parse,serialize:ut.serialize},wt={},In="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Wt="[0-9A-Fa-f]",Vt=i(i("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+i("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+i("%"+Wt+Wt)),hr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Yn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Lu=r(Yn,'[\\"\\\\]'),Lr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",fs=new RegExp(In,"g"),ri=new RegExp(Vt,"g"),Ti=new RegExp(r("[^]",hr,"[\\.]",'[\\"]',Lu),"g"),qr=new RegExp(r("[^]",In,Lr),"g"),yr=qr;function _t(ne){var J=ce(ne);return J.match(fs)?J:ne}var Fr={scheme:"mailto",parse:function(J,ie){var ve=J,ye=ve.to=ve.path?ve.path.split(","):[];if(ve.path=void 0,ve.query){for(var yt=!1,Ae={},pt=ve.query.split("&"),Bt=0,At=pt.length;Bt<At;++Bt){var Ht=pt[Bt].split("=");switch(Ht[0]){case"to":for(var fn=Ht[1].split(","),Tr=0,zt=fn.length;Tr<zt;++Tr)ye.push(fn[Tr]);break;case"subject":ve.subject=_e(Ht[1],ie);break;case"body":ve.body=_e(Ht[1],ie);break;default:yt=!0,Ae[_e(Ht[0],ie)]=_e(Ht[1],ie);break}}yt&&(ve.headers=Ae)}ve.query=void 0;for(var pr=0,Xt=ye.length;pr<Xt;++pr){var er=ye[pr].split("@");if(er[0]=_e(er[0]),ie.unicodeSupport)er[1]=_e(er[1],ie).toLowerCase();else try{er[1]=Q.toASCII(_e(er[1],ie).toLowerCase())}catch(ii){ve.error=ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+ii}ye[pr]=er.join("@")}return ve},serialize:function(J,ie){var ve=J,ye=a(J.to);if(ye){for(var yt=0,Ae=ye.length;yt<Ae;++yt){var pt=String(ye[yt]),Bt=pt.lastIndexOf("@"),At=pt.slice(0,Bt).replace(ri,_t).replace(ri,o).replace(Ti,ae),Ht=pt.slice(Bt+1);try{Ht=ie.iri?Q.toUnicode(Ht):Q.toASCII(_e(Ht,ie).toLowerCase())}catch(pr){ve.error=ve.error||"Email address's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+pr}ye[yt]=At+"@"+Ht}ve.path=ye.join(",")}var fn=J.headers=J.headers||{};J.subject&&(fn.subject=J.subject),J.body&&(fn.body=J.body);var Tr=[];for(var zt in fn)fn[zt]!==wt[zt]&&Tr.push(zt.replace(ri,_t).replace(ri,o).replace(qr,ae)+"="+fn[zt].replace(ri,_t).replace(ri,o).replace(yr,ae));return Tr.length&&(ve.query=Tr.join("&")),ve}},Ci=/^([^\:]+)\:(.*)/,Qi={scheme:"urn",parse:function(J,ie){var ve=J.path&&J.path.match(Ci),ye=J;if(ve){var yt=ie.scheme||ye.scheme||"urn",Ae=ve[1].toLowerCase(),pt=ve[2],Bt=yt+":"+(ie.nid||Ae),At=se[Bt];ye.nid=Ae,ye.nss=pt,ye.path=void 0,At&&(ye=At.parse(ye,ie))}else ye.error=ye.error||"URN can not be parsed.";return ye},serialize:function(J,ie){var ve=ie.scheme||J.scheme||"urn",ye=J.nid,yt=ve+":"+(ie.nid||ye),Ae=se[yt];Ae&&(J=Ae.serialize(J,ie));var pt=J,Bt=J.nss;return pt.path=(ye||ie.nid)+":"+Bt,pt}},to=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,qa={scheme:"urn:uuid",parse:function(J,ie){var ve=J;return ve.uuid=ve.nss,ve.nss=void 0,!ie.tolerant&&(!ve.uuid||!ve.uuid.match(to))&&(ve.error=ve.error||"UUID is not valid."),ve},serialize:function(J,ie){var ve=J;return ve.nss=(J.uuid||"").toLowerCase(),ve}};se[Pe.scheme]=Pe,se[it.scheme]=it,se[ut.scheme]=ut,se[tt.scheme]=tt,se[Fr.scheme]=Fr,se[Qi.scheme]=Qi,se[qa.scheme]=qa,n.SCHEMES=se,n.pctEncChar=ae,n.pctDecChars=ce,n.parse=Re,n.removeDotSegments=xt,n.serialize=et,n.resolveComponents=ft,n.resolve=dt,n.normalize=jt,n.equal=Dn,n.escapeComponent=he,n.unescapeComponent=_e,Object.defineProperty(n,"__esModule",{value:!0})})})(XV,XV.exports);var u8t=XV.exports;Object.defineProperty($Q,"__esModule",{value:!0});const CMe=u8t;CMe.code='require("ajv/dist/runtime/uri").default';$Q.default=CMe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=uf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=An;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=TI,i=CI,s=Z1,o=uu,a=An,u=ho,l=SI,c=Zn,f=a8t,d=$Q,h=(U,k)=>new RegExp(U,k);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(U){var k,$,q,F,B,Q,se,ae,ce,le,ge,ue,Fe,ke,Ge,Re,Oe,Me,Ut,Qe,je,xt,et,ft,dt;const jt=U.strict,Dn=(k=U.code)===null||k===void 0?void 0:k.optimize,he=Dn===!0||Dn===void 0?1:Dn||0,_e=(q=($=U.code)===null||$===void 0?void 0:$.regExp)!==null&&q!==void 0?q:h,Pe=(F=U.uriResolver)!==null&&F!==void 0?F:d.default;return{strictSchema:(Q=(B=U.strictSchema)!==null&&B!==void 0?B:jt)!==null&&Q!==void 0?Q:!0,strictNumbers:(ae=(se=U.strictNumbers)!==null&&se!==void 0?se:jt)!==null&&ae!==void 0?ae:!0,strictTypes:(le=(ce=U.strictTypes)!==null&&ce!==void 0?ce:jt)!==null&&le!==void 0?le:"log",strictTuples:(ue=(ge=U.strictTuples)!==null&&ge!==void 0?ge:jt)!==null&&ue!==void 0?ue:"log",strictRequired:(ke=(Fe=U.strictRequired)!==null&&Fe!==void 0?Fe:jt)!==null&&ke!==void 0?ke:!1,code:U.code?{...U.code,optimize:he,regExp:_e}:{optimize:he,regExp:_e},loopRequired:(Ge=U.loopRequired)!==null&&Ge!==void 0?Ge:v,loopEnum:(Re=U.loopEnum)!==null&&Re!==void 0?Re:v,meta:(Oe=U.meta)!==null&&Oe!==void 0?Oe:!0,messages:(Me=U.messages)!==null&&Me!==void 0?Me:!0,inlineRefs:(Ut=U.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Qe=U.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(je=U.addUsedSchema)!==null&&je!==void 0?je:!0,validateSchema:(xt=U.validateSchema)!==null&&xt!==void 0?xt:!0,validateFormats:(et=U.validateFormats)!==null&&et!==void 0?et:!0,unicodeRegExp:(ft=U.unicodeRegExp)!==null&&ft!==void 0?ft:!0,int32range:(dt=U.int32range)!==null&&dt!==void 0?dt:!0,uriResolver:Pe}}class b{constructor(k={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,k=this.opts={...k,..._(k)};const{es5:$,lines:q}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:$,lines:q}),this.logger=z(k.logger);const F=k.validateFormats;k.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,k,"NOT SUPPORTED"),E.call(this,y,k,"DEPRECATED","warn"),this._metaOpts=A.call(this),k.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),k.keywords&&P.call(this,k.keywords),typeof k.meta=="object"&&this.addMetaSchema(k.meta),x.call(this),k.validateFormats=F}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:k,meta:$,schemaId:q}=this.opts;let F=f;q==="id"&&(F={...f},F.id=F.$id,delete F.$id),$&&k&&this.addMetaSchema(F,F[q],!1)}defaultMeta(){const{meta:k,schemaId:$}=this.opts;return this.opts.defaultMeta=typeof k=="object"?k[$]||k:void 0}validate(k,$){let q;if(typeof k=="string"){if(q=this.getSchema(k),!q)throw new Error(`no schema with key or ref "${k}"`)}else q=this.compile(k);const F=q($);return"$async"in q||(this.errors=q.errors),F}compile(k,$){const q=this._addSchema(k,$);return q.validate||this._compileSchemaEnv(q)}compileAsync(k,$){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:q}=this.opts;return F.call(this,k,$);async function F(le,ge){await B.call(this,le.$schema);const ue=this._addSchema(le,ge);return ue.validate||Q.call(this,ue)}async function B(le){le&&!this.getSchema(le)&&await F.call(this,{$ref:le},!0)}async function Q(le){try{return this._compileSchemaEnv(le)}catch(ge){if(!(ge instanceof i.default))throw ge;return se.call(this,ge),await ae.call(this,ge.missingSchema),Q.call(this,le)}}function se({missingSchema:le,missingRef:ge}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ge} cannot be resolved`)}async function ae(le){const ge=await ce.call(this,le);this.refs[le]||await B.call(this,ge.$schema),this.refs[le]||this.addSchema(ge,le,$)}async function ce(le){const ge=this._loading[le];if(ge)return ge;try{return await(this._loading[le]=q(le))}finally{delete this._loading[le]}}}addSchema(k,$,q,F=this.opts.validateSchema){if(Array.isArray(k)){for(const Q of k)this.addSchema(Q,void 0,q,F);return this}let B;if(typeof k=="object"){const{schemaId:Q}=this.opts;if(B=k[Q],B!==void 0&&typeof B!="string")throw new Error(`schema ${Q} must be string`)}return $=(0,u.normalizeId)($||B),this._checkUnique($),this.schemas[$]=this._addSchema(k,q,$,F,!0),this}addMetaSchema(k,$,q=this.opts.validateSchema){return this.addSchema(k,$,!0,q),this}validateSchema(k,$){if(typeof k=="boolean")return!0;let q;if(q=k.$schema,q!==void 0&&typeof q!="string")throw new Error("$schema must be a string");if(q=q||this.opts.defaultMeta||this.defaultMeta(),!q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const F=this.validate(q,k);if(!F&&$){const B="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(B);else throw new Error(B)}return F}getSchema(k){let $;for(;typeof($=w.call(this,k))=="string";)k=$;if($===void 0){const{schemaId:q}=this.opts,F=new o.SchemaEnv({schema:{},schemaId:q});if($=o.resolveSchema.call(this,F,k),!$)return;this.refs[k]=$}return $.validate||this._compileSchemaEnv($)}removeSchema(k){if(k instanceof RegExp)return this._removeAllSchemas(this.schemas,k),this._removeAllSchemas(this.refs,k),this;switch(typeof k){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const $=w.call(this,k);return typeof $=="object"&&this._cache.delete($.schema),delete this.schemas[k],delete this.refs[k],this}case"object":{const $=k;this._cache.delete($);let q=k[this.opts.schemaId];return q&&(q=(0,u.normalizeId)(q),delete this.schemas[q],delete this.refs[q]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(k){for(const $ of k)this.addKeyword($);return this}addKeyword(k,$){let q;if(typeof k=="string")q=k,typeof $=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),$.keyword=q);else if(typeof k=="object"&&$===void 0){if($=k,q=$.keyword,Array.isArray(q)&&!q.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(R.call(this,q,$),!$)return(0,c.eachItem)(q,B=>N.call(this,B)),this;V.call(this,$);const F={...$,type:(0,l.getJSONTypes)($.type),schemaType:(0,l.getJSONTypes)($.schemaType)};return(0,c.eachItem)(q,F.type.length===0?B=>N.call(this,B,F):B=>F.type.forEach(Q=>N.call(this,B,F,Q))),this}getKeyword(k){const $=this.RULES.all[k];return typeof $=="object"?$.definition:!!$}removeKeyword(k){const{RULES:$}=this;delete $.keywords[k],delete $.all[k];for(const q of $.rules){const F=q.rules.findIndex(B=>B.keyword===k);F>=0&&q.rules.splice(F,1)}return this}addFormat(k,$){return typeof $=="string"&&($=new RegExp($)),this.formats[k]=$,this}errorsText(k=this.errors,{separator:$=", ",dataVar:q="data"}={}){return!k||k.length===0?"No errors":k.map(F=>`${q}${F.instancePath} ${F.message}`).reduce((F,B)=>F+$+B)}$dataMetaSchema(k,$){const q=this.RULES.all;k=JSON.parse(JSON.stringify(k));for(const F of $){const B=F.split("/").slice(1);let Q=k;for(const se of B)Q=Q[se];for(const se in q){const ae=q[se];if(typeof ae!="object")continue;const{$data:ce}=ae.definition,le=Q[se];ce&&le&&(Q[se]=H(le))}}return k}_removeAllSchemas(k,$){for(const q in k){const F=k[q];(!$||$.test(q))&&(typeof F=="string"?delete k[q]:F&&!F.meta&&(this._cache.delete(F.schema),delete k[q]))}}_addSchema(k,$,q,F=this.opts.validateSchema,B=this.opts.addUsedSchema){let Q;const{schemaId:se}=this.opts;if(typeof k=="object")Q=k[se];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof k!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(k);if(ae!==void 0)return ae;q=(0,u.normalizeId)(Q||q);const ce=u.getSchemaRefs.call(this,k,q);return ae=new o.SchemaEnv({schema:k,schemaId:se,meta:$,baseId:q,localRefs:ce}),this._cache.set(ae.schema,ae),B&&!q.startsWith("#")&&(q&&this._checkUnique(q),this.refs[q]=ae),F&&this.validateSchema(k,!0),ae}_checkUnique(k){if(this.schemas[k]||this.refs[k])throw new Error(`schema with key or id "${k}" already exists`)}_compileSchemaEnv(k){if(k.meta?this._compileMetaSchema(k):o.compileSchema.call(this,k),!k.validate)throw new Error("ajv implementation error");return k.validate}_compileMetaSchema(k){const $=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,k)}finally{this.opts=$}}}e.default=b,b.ValidationError=r.default,b.MissingRefError=i.default;function E(U,k,$,q="error"){for(const F in U){const B=F;B in k&&this.logger[q](`${$}: option ${F}. ${U[B]}`)}}function w(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function x(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const k in U)this.addSchema(U[k],k)}function S(){for(const U in this.opts.formats){const k=this.opts.formats[U];k&&this.addFormat(U,k)}}function P(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const k in U){const $=U[k];$.keyword||($.keyword=k),this.addKeyword($)}}function A(){const U={...this.opts};for(const k of p)delete U[k];return U}const O={log(){},warn(){},error(){}};function z(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function R(U,k){const{RULES:$}=this;if((0,c.eachItem)(U,q=>{if($.keywords[q])throw new Error(`Keyword ${q} is already defined`);if(!D.test(q))throw new Error(`Keyword ${q} has invalid name`)}),!!k&&k.$data&&!("code"in k||"validate"in k))throw new Error('$data keyword must have "code" or "validate" function')}function N(U,k,$){var q;const F=k==null?void 0:k.post;if($&&F)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:B}=this;let Q=F?B.post:B.rules.find(({type:ae})=>ae===$);if(Q||(Q={type:$,rules:[]},B.rules.push(Q)),B.keywords[U]=!0,!k)return;const se={keyword:U,definition:{...k,type:(0,l.getJSONTypes)(k.type),schemaType:(0,l.getJSONTypes)(k.schemaType)}};k.before?L.call(this,Q,se,k.before):Q.rules.push(se),B.all[U]=se,(q=k.implements)===null||q===void 0||q.forEach(ae=>this.addKeyword(ae))}function L(U,k,$){const q=U.rules.findIndex(F=>F.keyword===$);q>=0?U.rules.splice(q,0,k):(U.rules.push(k),this.logger.warn(`rule ${$} is not defined`))}function V(U){let{metaSchema:k}=U;k!==void 0&&(U.$data&&this.opts.$data&&(k=H(k)),U.validateSchema=this.compile(k,!0))}const j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(U){return{anyOf:[U,j]}}})(nMe);var RQ={},NQ={},DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});const l8t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};DQ.default=l8t;var ev={};Object.defineProperty(ev,"__esModule",{value:!0});ev.callRef=ev.getValidate=void 0;const c8t=CI,Mme=Tn,Ja=An,T_=hh,Lme=uu,FP=Zn,f8t={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Lme.resolveRef.call(u,l,i,n);if(c===void 0)throw new c8t.default(r.opts.uriResolver,i,n);if(c instanceof Lme.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return x$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return x$(e,(0,Ja._)`${p}.validate`,l,l.$async)}function d(p){const m=AMe(e,p);x$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ja.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ja.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function AMe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ja._)`${n.scopeValue("wrapper",{ref:t})}.validate`}ev.getValidate=AMe;function x$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?T_.default.this:Ja.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ja._)`await ${(0,Mme.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ja._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Mme.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ja._)`${p}.errors`;i.assign(T_.default.vErrors,(0,Ja._)`${T_.default.vErrors} === null ? ${m} : ${T_.default.vErrors}.concat(${m})`),i.assign(T_.default.errors,(0,Ja._)`${T_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=FP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ja._)`${p}.evaluated.props`);s.props=FP.mergeEvaluated.props(i,y,s.props,Ja.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=FP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ja._)`${p}.evaluated.items`);s.items=FP.mergeEvaluated.items(i,y,s.items,Ja.Name)}}}ev.callRef=x$;ev.default=f8t;Object.defineProperty(NQ,"__esModule",{value:!0});const d8t=DQ,h8t=ev,p8t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",d8t.default,h8t.default];NQ.default=p8t;var MQ={},LQ={};Object.defineProperty(LQ,"__esModule",{value:!0});const R3=An,Cm=R3.operators,N3={maximum:{okStr:"<=",ok:Cm.LTE,fail:Cm.GT},minimum:{okStr:">=",ok:Cm.GTE,fail:Cm.LT},exclusiveMaximum:{okStr:"<",ok:Cm.LT,fail:Cm.GTE},exclusiveMinimum:{okStr:">",ok:Cm.GT,fail:Cm.LTE}},m8t={message:({keyword:e,schemaCode:t})=>(0,R3.str)`must be ${N3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,R3._)`{comparison: ${N3[e].okStr}, limit: ${t}}`},g8t={keyword:Object.keys(N3),type:"number",schemaType:"number",$data:!0,error:m8t,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,R3._)`${n} ${N3[t].fail} ${r} || isNaN(${n})`)}};LQ.default=g8t;var FQ={};Object.defineProperty(FQ,"__esModule",{value:!0});const p2=An,y8t={message:({schemaCode:e})=>(0,p2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,p2._)`{multipleOf: ${e}}`},v8t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:y8t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,p2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,p2._)`${o} !== parseInt(${o})`;e.fail$data((0,p2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};FQ.default=v8t;var BQ={},jQ={};Object.defineProperty(jQ,"__esModule",{value:!0});function IMe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}jQ.default=IMe;IMe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(BQ,"__esModule",{value:!0});const zy=An,_8t=Zn,b8t=jQ,w8t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,zy.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,zy._)`{limit: ${e}}`},E8t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:w8t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?zy.operators.GT:zy.operators.LT,o=i.opts.unicode===!1?(0,zy._)`${n}.length`:(0,zy._)`${(0,_8t.useFunc)(e.gen,b8t.default)}(${n})`;e.fail$data((0,zy._)`${o} ${s} ${r}`)}};BQ.default=E8t;var zQ={};Object.defineProperty(zQ,"__esModule",{value:!0});const x8t=Tn,D3=An,S8t={message:({schemaCode:e})=>(0,D3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,D3._)`{pattern: ${e}}`},T8t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:S8t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,D3._)`(new RegExp(${i}, ${o}))`:(0,x8t.usePattern)(e,r);e.fail$data((0,D3._)`!${a}.test(${t})`)}};zQ.default=T8t;var UQ={};Object.defineProperty(UQ,"__esModule",{value:!0});const m2=An,C8t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,m2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,m2._)`{limit: ${e}}`},A8t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:C8t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?m2.operators.GT:m2.operators.LT;e.fail$data((0,m2._)`Object.keys(${n}).length ${i} ${r}`)}};UQ.default=A8t;var VQ={};Object.defineProperty(VQ,"__esModule",{value:!0});const wS=Tn,g2=An,I8t=Zn,O8t={message:({params:{missingProperty:e}})=>(0,g2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,g2._)`{missingProperty: ${e}}`},P8t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:O8t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,I8t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(g2.nil,f);else for(const h of n)(0,wS.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,wS.checkMissingProp)(e,n,h)),(0,wS.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,wS.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,wS.propertyInData)(t,i,h,a.ownProperties)),t.if((0,g2.not)(p),()=>{e.error(),t.break()})},g2.nil)}}};VQ.default=P8t;var HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});const y2=An,k8t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,y2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,y2._)`{limit: ${e}}`},$8t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:k8t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?y2.operators.GT:y2.operators.LT;e.fail$data((0,y2._)`${n}.length ${i} ${r}`)}};HQ.default=$8t;var qQ={},AI={};Object.defineProperty(AI,"__esModule",{value:!0});const OMe=cK;OMe.code='require("ajv/dist/runtime/equal").default';AI.default=OMe;Object.defineProperty(qQ,"__esModule",{value:!0});const pj=SI,so=An,R8t=Zn,N8t=AI,D8t={message:({params:{i:e,j:t}})=>(0,so.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,so._)`{i: ${e}, j: ${t}}`},M8t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:D8t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,pj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,so._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,so._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,so._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,pj.checkDataTypes)(l,g,a.opts.strictNumbers,pj.DataType.Wrong),v=t.const("indices",(0,so._)`{}`);t.for((0,so._)`;${p}--;`,()=>{t.let(g,(0,so._)`${n}[${p}]`),t.if(y,(0,so._)`continue`),l.length>1&&t.if((0,so._)`typeof ${g} == "string"`,(0,so._)`${g} += "_"`),t.if((0,so._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,so._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,so._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,R8t.useFunc)(t,N8t.default),y=t.name("outer");t.label(y).for((0,so._)`;${p}--;`,()=>t.for((0,so._)`${m} = ${p}; ${m}--;`,()=>t.if((0,so._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};qQ.default=M8t;var WQ={};Object.defineProperty(WQ,"__esModule",{value:!0});const QV=An,L8t=Zn,F8t=AI,B8t={message:"must be equal to constant",params:({schemaCode:e})=>(0,QV._)`{allowedValue: ${e}}`},j8t={keyword:"const",$data:!0,error:B8t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,QV._)`!${(0,L8t.useFunc)(t,F8t.default)}(${n}, ${i})`):e.fail((0,QV._)`${s} !== ${n}`)}};WQ.default=j8t;var GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const dT=An,z8t=Zn,U8t=AI,V8t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,dT._)`{allowedValues: ${e}}`},H8t={keyword:"enum",schemaType:"array",$data:!0,error:V8t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,z8t.useFunc)(t,U8t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,dT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,dT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,dT._)`${l()}(${n}, ${h}[${p}])`:(0,dT._)`${n} === ${m}`}}};GQ.default=H8t;Object.defineProperty(MQ,"__esModule",{value:!0});const q8t=LQ,W8t=FQ,G8t=BQ,Y8t=zQ,K8t=UQ,X8t=VQ,Q8t=HQ,J8t=qQ,Z8t=WQ,e9t=GQ,t9t=[q8t.default,W8t.default,G8t.default,Y8t.default,K8t.default,X8t.default,Q8t.default,J8t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Z8t.default,e9t.default];MQ.default=t9t;var YQ={},ix={};Object.defineProperty(ix,"__esModule",{value:!0});ix.validateAdditionalItems=void 0;const Uy=An,JV=Zn,n9t={message:({params:{len:e}})=>(0,Uy.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Uy._)`{limit: ${e}}`},r9t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:n9t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,JV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}PMe(e,r)}};function PMe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Uy._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Uy._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,JV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Uy._)`${a} <= ${t.length}`);n.if((0,Uy.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:JV.Type.Num},l),o.allErrors||n.if((0,Uy.not)(l),()=>n.break())})}}ix.validateAdditionalItems=PMe;ix.default=r9t;var KQ={},sx={};Object.defineProperty(sx,"__esModule",{value:!0});sx.validateTuple=void 0;const Fme=An,S$=Zn,i9t=Tn,s9t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return kMe(e,"additionalItems",t);n.items=!0,!(0,S$.alwaysValidSchema)(n,t)&&e.ok((0,i9t.validateArray)(e))}};function kMe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=S$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Fme._)`${s}.length`);n.forEach((f,d)=>{(0,S$.alwaysValidSchema)(a,f)||(r.if((0,Fme._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,S$.checkStrictMode)(a,g,d.strictTuples)}}}sx.validateTuple=kMe;sx.default=s9t;Object.defineProperty(KQ,"__esModule",{value:!0});const o9t=sx,a9t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,o9t.validateTuple)(e,"items")};KQ.default=a9t;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const Bme=An,u9t=Zn,l9t=Tn,c9t=ix,f9t={message:({params:{len:e}})=>(0,Bme.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Bme._)`{limit: ${e}}`},d9t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:f9t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,u9t.alwaysValidSchema)(r,t)&&(i?(0,c9t.validateAdditionalItems)(e,i):e.ok((0,l9t.validateArray)(e)))}};XQ.default=d9t;var QQ={};Object.defineProperty(QQ,"__esModule",{value:!0});const Dl=An,BP=Zn,h9t={message:({params:{min:e,max:t}})=>t===void 0?(0,Dl.str)`must contain at least ${e} valid item(s)`:(0,Dl.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Dl._)`{minContains: ${e}}`:(0,Dl._)`{minContains: ${e}, maxContains: ${t}}`},p9t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:h9t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Dl._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,BP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,BP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,BP.alwaysValidSchema)(s,n)){let m=(0,Dl._)`${c} >= ${o}`;a!==void 0&&(m=(0,Dl._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Dl._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:BP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Dl._)`${m}++`),a===void 0?t.if((0,Dl._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Dl._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Dl._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};QQ.default=p9t;var $Me={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=An,n=Zn,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})($Me);var JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});const RMe=An,m9t=Zn,g9t={message:"property name must be valid",params:({params:e})=>(0,RMe._)`{propertyName: ${e.propertyName}}`},y9t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:g9t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,m9t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,RMe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};JQ.default=y9t;var uF={};Object.defineProperty(uF,"__esModule",{value:!0});const jP=Tn,kc=An,v9t=hh,zP=Zn,_9t={message:"must NOT have additional properties",params:({params:e})=>(0,kc._)`{additionalProperty: ${e.additionalProperty}}`},b9t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:_9t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,zP.alwaysValidSchema)(o,n))return;const l=(0,jP.allSchemaProperties)(r.properties),c=(0,jP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,kc._)`${s} === ${v9t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,zP.schemaRefOrVal)(o,r.properties,"properties");y=(0,jP.isOwnProperty)(t,v,g)}else l.length?y=(0,kc.or)(...l.map(v=>(0,kc._)`${g} === ${v}`)):y=kc.nil;return c.length&&(y=(0,kc.or)(y,...c.map(v=>(0,kc._)`${(0,jP.usePattern)(e,v)}.test(${g})`))),(0,kc.not)(y)}function h(g){t.code((0,kc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,zP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,kc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,kc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:zP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};uF.default=b9t;var ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const w9t=uf,jme=Tn,mj=Zn,zme=uF,E9t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&zme.default.code(new w9t.KeywordCxt(s,zme.default,"additionalProperties"));const o=(0,jme.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=mj.mergeEvaluated.props(t,(0,mj.toHash)(o),s.props));const a=o.filter(f=>!(0,mj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,jme.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};ZQ.default=E9t;var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});const Ume=Tn,UP=An,Vme=Zn,Hme=Zn,x9t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Ume.allSchemaProperties)(n),u=a.filter(m=>(0,Vme.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof UP.Name)&&(s.props=(0,Hme.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Vme.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,UP._)`${(0,Ume.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Hme.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,UP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,UP.not)(c),()=>t.break())})})}}};eJ.default=x9t;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const S9t=Zn,T9t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,S9t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};tJ.default=T9t;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const C9t=Tn,A9t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:C9t.validateUnion,error:{message:"must match a schema in anyOf"}};nJ.default=A9t;var rJ={};Object.defineProperty(rJ,"__esModule",{value:!0});const T$=An,I9t=Zn,O9t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,T$._)`{passingSchemas: ${e.passing}}`},P9t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:O9t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,I9t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,T$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,T$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,T$.Name)})})}}};rJ.default=P9t;var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const k9t=Zn,$9t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,k9t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};iJ.default=$9t;var sJ={};Object.defineProperty(sJ,"__esModule",{value:!0});const M3=An,NMe=Zn,R9t={message:({params:e})=>(0,M3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,M3._)`{failingKeyword: ${e.ifClause}}`},N9t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:R9t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,NMe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=qme(r,"then"),s=qme(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,M3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,M3._)`${c}`):e.setParams({ifClause:c})}}}};function qme(e,t){const n=e.schema[t];return n!==void 0&&!(0,NMe.alwaysValidSchema)(e,n)}sJ.default=N9t;var oJ={};Object.defineProperty(oJ,"__esModule",{value:!0});const D9t=Zn,M9t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,D9t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};oJ.default=M9t;Object.defineProperty(YQ,"__esModule",{value:!0});const L9t=ix,F9t=KQ,B9t=sx,j9t=XQ,z9t=QQ,U9t=$Me,V9t=JQ,H9t=uF,q9t=ZQ,W9t=eJ,G9t=tJ,Y9t=nJ,K9t=rJ,X9t=iJ,Q9t=sJ,J9t=oJ;function Z9t(e=!1){const t=[G9t.default,Y9t.default,K9t.default,X9t.default,Q9t.default,J9t.default,V9t.default,H9t.default,U9t.default,q9t.default,W9t.default];return e?t.push(F9t.default,j9t.default):t.push(L9t.default,B9t.default),t.push(z9t.default),t}YQ.default=Z9t;var aJ={},uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const Vi=An,eBt={message:({schemaCode:e})=>(0,Vi.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Vi._)`{format: ${e}}`},tBt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:eBt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,Vi._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,Vi._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,Vi._)`${m}.type || "string"`).assign(y,(0,Vi._)`${m}.validate`),()=>n.assign(g,(0,Vi._)`"string"`).assign(y,m)),e.fail$data((0,Vi.or)(v(),_()));function v(){return u.strictSchema===!1?Vi.nil:(0,Vi._)`${o} && !${y}`}function _(){const b=c.$async?(0,Vi._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,Vi._)`${y}(${r})`,E=(0,Vi._)`(typeof ${y} == "function" ? ${b} : ${y}.test(${r}))`;return(0,Vi._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(b());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const w=E instanceof RegExp?(0,Vi.regexpCode)(E):u.code.formats?(0,Vi._)`${u.code.formats}${(0,Vi.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:w});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,Vi._)`${x}.validate`]:["string",E,x]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Vi._)`await ${y}(${r})`}return typeof g=="function"?(0,Vi._)`${y}(${r})`:(0,Vi._)`${y}.test(${r})`}}}};uJ.default=tBt;Object.defineProperty(aJ,"__esModule",{value:!0});const nBt=uJ,rBt=[nBt.default];aJ.default=rBt;var Gw={};Object.defineProperty(Gw,"__esModule",{value:!0});Gw.contentVocabulary=Gw.metadataVocabulary=void 0;Gw.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Gw.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(RQ,"__esModule",{value:!0});const iBt=NQ,sBt=MQ,oBt=YQ,aBt=aJ,Wme=Gw,uBt=[iBt.default,sBt.default,(0,oBt.default)(),aBt.default,Wme.metadataVocabulary,Wme.contentVocabulary];RQ.default=uBt;var lJ={},DMe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(DMe);Object.defineProperty(lJ,"__esModule",{value:!0});const W_=An,ZV=DMe,Gme=uu,lBt=Zn,cBt={message:({params:{discrError:e,tagName:t}})=>e===ZV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,W_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},fBt={keyword:"discriminator",type:"object",schemaType:"object",error:cBt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,W_._)`${n}${(0,W_.getProperty)(a)}`);t.if((0,W_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:ZV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,W_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:ZV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,W_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let b=0;b<o.length;b++){let E=o[b];E!=null&&E.$ref&&!(0,lBt.schemaHasRulesButRef)(E,s.self.RULES)&&(E=Gme.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E==null?void 0:E.$ref),E instanceof Gme.SchemaEnv&&(E=E.schema));const w=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(w,b)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:b}){return Array.isArray(b)&&b.includes(a)}function v(b,E){if(b.const)_(b.const,E);else if(b.enum)for(const w of b.enum)_(w,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};lJ.default=fBt;const dBt="http://json-schema.org/draft-07/schema#",hBt="http://json-schema.org/draft-07/schema#",pBt="Core schema meta-schema",mBt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},gBt=["object","boolean"],yBt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},vBt={$schema:dBt,$id:hBt,title:pBt,definitions:mBt,type:gBt,properties:yBt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=nMe,r=RQ,i=lJ,s=vBt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=uf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=An;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=TI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=CI;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(GV,GV.exports);var _Bt=GV.exports;const MMe=bl(_Bt),bBt="#/definitions/StudyConfig",wBt="http://json-schema.org/draft-07/schema#",EBt={Answer:{additionalProperties:!1,description:"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.",properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a latin square.",properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.",properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. If the component is repeated within the block, this condition will only check the first instance of the component once the order is flattened. If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.",properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. If the component is repeated within the block, this condition will only check the first instance of the component once the order is flattened.",properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"}]},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:"The QuestionnaireComponent interface is used to define the properties of a questionnaire component. A QuestionnaireComponent is used to render questions with different response types. The response types are also defined with these documentation. The main use case of this component type is to ask participants questions, without using markdown, websites, images, etc.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```typescript {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/blob/v1.0.0-beta5/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/1.0.0-beta5/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times.",properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Skip conditions work recursively, that is if you have a nested block, they parent blocks' skip conditions will be considered when computing the skip logic.",items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/reVISit-studies/study/v1.0.0-beta5/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "path/to/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "path/to/assets/help.md",  "logoPath": "path/to/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "path/to/study/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "path/to/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},xBt={$ref:bBt,$schema:wBt,definitions:EBt},SBt="#/definitions/GlobalConfig",TBt="http://json-schema.org/draft-07/schema#",CBt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},ABt={$ref:SBt,$schema:TBt,definitions:CBt},LMe=new MMe;LMe.addSchema(ABt);const Yme=LMe.getSchema("#/definitions/GlobalConfig"),FMe=new MMe;FMe.addSchema(xBt);const Kme=FMe.getSchema("#/definitions/StudyConfig");function IBt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function lF(e){return e.baseComponent!==void 0}function OBt(e){const t=TQ.parse(e),n=Yme(t),r=IBt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Yme.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function PBt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return lF(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function BMe(e,t){const n=TQ.parse(e),r=Kme(n),i=PBt(n);if(r&&i[0])return n;const s=[...Kme.errors||[]];return console.error(`${t} parsing errors`,s),{...n,errors:s}}function jMe(){const e=_c(),{setAlertModal:t}=ah(),n=uh();C.useEffect(()=>{const i=(new URLSearchParams(window.location.search).get("admin")||"f")==="t"},[e,t,n])}function kBt(){const e=Zg(),{storageEngine:t}=ja(),{answers:n}=Sf(s=>s),[r,i]=C.useState(!1);return C.useEffect(()=>{const s=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(s))},1e3)},[]),jMe(),I.jsx(Rp,{style:{height:"100%"},children:I.jsx(qi,{direction:"column",children:r?I.jsx(ct,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?I.jsx(ka,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):I.jsxs(I.Fragment,{children:[I.jsx(ct,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),I.jsx(O6,{h:"lg"}),I.jsx(Rp,{children:I.jsx(kv,{color:"blue"})})]})})})}function $Bt(e){const{email:t}=e;return I.jsx(om,{pt:100,children:I.jsx(Rp,{children:I.jsxs(Ho,{order:3,children:["Trial not found, please contact the administrator at"," ",I.jsxs(y6,{span:!0,c:"blue",href:`mailto:${t}`,children:[t," "]})]})})})}function RBt(){var d;const e=Zg(),t=_c(),n=lh()[t]||"Notfound",r=e.components[n],i=lK();jMe();const{storageEngine:s}=ja(),o=uh(),{setAlertModal:a}=ah();if(C.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return I.jsx(kBt,{});if(n==="Notfound")return I.jsx($Bt,{email:e.uiConfig.contactEmail});const u=lF(r)&&e.baseComponents?uK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return I.jsxs(I.Fragment,{children:[c==="aboveStimulus"&&I.jsx(ka,{text:l}),I.jsx(MD,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),I.jsxs(C.Suspense,{fallback:I.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&I.jsx(aFt,{currentConfig:u}),u.type==="website"&&I.jsx(zxt,{currentConfig:u}),u.type==="image"&&I.jsx(Vxt,{currentConfig:u}),u.type==="react-component"&&I.jsx(oFt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&I.jsx(ka,{text:l}),I.jsx(MD,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function eH(e){const[t]=BG();return I.jsx(FG,{...e,to:{pathname:e.to,search:t.toString()}})}const tH=["description","instruction","answer","correctAnswer","startTime","endTime","duration","taskOrder"],C$=["participantId","trialId","responseId"];function v2(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function NBt(e,t,n){return Object.entries(e.answers).map(([r,i])=>{const s=r.split("_")[0],o=r.split("_")[1],a=t.components[s],u=lF(a)&&a.baseComponent&&t.baseComponents?uK({},t.baseComponents[a.baseComponent],a):a,l=i.endTime-i.startTime;return Object.entries(i.answer).map(([f,d])=>{const h={participantId:e.participantId,trialId:s,responseId:f,startTime:new Date(i.startTime).toUTCString(),endTime:new Date(i.endTime).toUTCString(),duration:l};return n.includes("description")&&(h.description=u.description),n.includes("instruction")&&(h.instruction=u.instruction),n.includes("answer")&&(h.answer=d),n.includes("correctAnswer")&&(h.correctAnswer=u.correctAnswer),n.includes("taskOrder")&&(h.taskOrder=o),h}).flat()}).flat()}async function DBt(e,t,n,r,i=[...C$,...tH]){const o=(r||await t.getAllParticipantsData()).map(c=>NBt(c,n,i)).flat(),a=c=>c.replace(/"/g,'""'),u=o.map(c=>i.map(f=>c===null?"":typeof c[f]=="string"?`"${a(c[f])}"`:JSON.stringify(c[f])).join(",")),l=[i.join(","),...u].join(`
`);v2(l,e)}function zMe({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=sJe([...C$,...tH]),a=C.useCallback(c=>{C$.every(f=>c.includes(f))&&o(c)},[o]),u=C.useMemo(()=>[...C$,...tH],[]),{storageEngine:l}=ja();return l?I.jsxs(Og,{opened:e,size:"lg",onClose:t,title:I.jsx(ct,{size:"xl",children:"Download Tidy CSV"}),centered:!0,radius:"md",padding:"xl",children:[I.jsx(st,{children:I.jsx(lAe,{searchable:!0,limit:30,nothingFound:"Property not found",data:u,value:s,onChange:a,label:I.jsx(ct,{fw:"bold",size:"lg",children:"Select properties to include in tidy csv:"}),placeholder:"Select atleast one property"})}),I.jsxs(qi,{mt:"xl",direction:{base:"column",sm:"row"},gap:{base:"sm",sm:"lg"},justify:{sm:"space-around"},children:[I.jsx(Yr,{leftIcon:I.jsx(kY,{}),onClick:()=>DBt(n,l,r,i,s),children:"Download"}),I.jsx(Yr,{onClick:t,color:"red",children:"Close"})]})]}):null}function MBt({studyConfig:e}){const{storageEngine:t}=ja(),[n,{open:r,close:i}]=lb(!1),[s,o]=C.useState(),[a,u]=C.useState(""),l=e.studyMetadata.title.replace(" ","_");C.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=C.useCallback(async()=>{v2(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=C.useState(Math.floor(d/1e3));return C.useEffect(()=>{const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)},[h,c]),I.jsxs(gd,{children:[I.jsx(Yr,{leftIcon:I.jsx(Tmt,{}),onClick:()=>v2(JSON.stringify(s,null,2),`${l}_${a}.json`),display:"block",children:"Download Current (JSON)"}),I.jsx(Yr,{disabled:!(t!=null&&t.isConnected()),leftIcon:I.jsx(Cmt,{}),onClick:async()=>{if(!t)return;const m=await t.getAllParticipantsData();v2(JSON.stringify(m,null,2),`${l}_all.json`)},display:"block",children:"Download All (JSON)"}),I.jsx(Yr,{disabled:!(t!=null&&t.isConnected()),leftIcon:I.jsx(kY,{}),onClick:r,display:"block",children:"Download All (Tidy)"}),f&&I.jsxs(ct,{size:"lg",children:["Study results will be downloaded in"," ",h," ","seconds. If the download does not start automatically, click above to download."]}),I.jsx(zMe,{opened:n,close:i,filename:`${l}_${a}.csv`,studyConfig:e})]})}function UMe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=UMe(o,t,n,r),r.includes(o.orderPath))break}return i}function VMe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=VMe(s,r)}}),n}function LBt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function FBt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=o4(),a=tm(),u=_c(),l=Zg(),[c,{close:f,open:d}]=lb(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?UMe(n,e,r,s.orderPath):-1,m=u===p;return I.jsxs(di,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[I.jsx(di.Target,{children:I.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:I.jsx(hAe,{active:m,style:{lineHeight:"32px",height:"32px"},label:I.jsxs("div",{children:[i&&I.jsx(_mt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?I.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&Pv.createPortal(I.jsx(di.Dropdown,{onMouseLeave:f,children:I.jsx(ct,{size:"sm",children:I.jsxs("div",{children:[h.description&&I.jsxs("div",{children:[I.jsx(ct,{fw:900,display:"inline-block",mr:2,children:"Description:"}),I.jsx(ct,{fw:400,component:"span",children:h.description})]}),h.meta&&I.jsxs(ct,{children:[I.jsx(ct,{fw:"900",component:"span",children:"Task Meta: "}),I.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function HMe({configSequence:e,fullSequence:t,participantSequence:n}){let r=E1(e.components);return n&&(r=LBt(E1(e.components),E1(n.components))),I.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return I.jsx(FBt,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?q1(o).length-VMe(i,o):0,u=q1(i);return I.jsx(hAe,{label:I.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",I.jsxs(b1,{ml:5,children:[a,"/",u.length]}),i.interruptions&&I.jsx(b1,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),I.jsx(ct,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?I.jsx(ymt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:I.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:I.jsx(HMe,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function qMe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>qMe(n,`${t}-${r}`))}}function BBt(){const{showStudyBrowser:e,sequence:t}=Sf(u=>u),{toggleStudyBrowser:n}=ah(),r=_c(),i=lh()[r],s=Zg(),o=uh(),a=C.useMemo(()=>{let u=E1(s.sequence);return u=qMe(u,"root"),u.components.push("end"),u},[s.sequence]);return e||i==="end"&&s.uiConfig.autoDownloadStudy?I.jsxs(rY,{p:"0",width:{base:300},style:{zIndex:0},children:[I.jsx(rm,{style:{position:"absolute",right:"10px",top:"10px",zIndex:5},onClick:()=>o(n())}),I.jsxs(yTe,{p:"0",children:[i==="end"&&I.jsxs("div",{style:{padding:10,paddingBottom:15,borderBottom:"1px solid #e9ecef"},children:[I.jsx(ct,{size:"md",p:10,weight:"bold",children:"Download"}),I.jsx(MBt,{studyConfig:s})]}),I.jsx(ct,{size:"md",p:10,weight:"bold",children:"Study Browser"}),I.jsx(HMe,{configSequence:a,participantSequence:t,fullSequence:t})]})]}):null}var Xme={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WMe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},jBt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},cJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(WMe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):jBt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new zBt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class zBt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UBt=function(e){const t=WMe(e);return cJ.encodeByteArray(t,!0)},L3=function(e){return UBt(e).replace(/\./g,"")},GMe=function(e){try{return cJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YMe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VBt=()=>YMe().__FIREBASE_DEFAULTS__,HBt=()=>{if(typeof process>"u"||typeof Xme>"u")return;const e=Xme.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qBt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&GMe(e[1]);return t&&JSON.parse(t)},fJ=()=>{try{return VBt()||HBt()||qBt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},KMe=e=>{var t,n;return(n=(t=fJ())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},WBt=e=>{const t=KMe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},XMe=()=>{var e;return(e=fJ())===null||e===void 0?void 0:e.config},QMe=e=>{var t;return(t=fJ())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GBt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[L3(JSON.stringify(n)),L3(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YBt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oa())}function KBt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function XBt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QBt(){const e=oa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dJ(){try{return typeof indexedDB=="object"}catch{return!1}}function JBt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZBt="FirebaseError";class ph extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ZBt,Object.setPrototypeOf(this,ph.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ox.prototype.create)}}class ox{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?ejt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ph(i,a,r)}}function ejt(e,t){return e.replace(tjt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const tjt=/\{\$([^}]+)}/g;function njt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function jC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Qme(s)&&Qme(o)){if(!jC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qme(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rjt(e,t){const n=new ijt(e,t);return n.subscribe.bind(n)}class ijt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sjt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=gj),i.error===void 0&&(i.error=gj),i.complete===void 0&&(i.complete=gj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sjt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function gj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ojt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ajt=1e3,ujt=2,ljt=4*60*60*1e3,cjt=.5;function fjt(e,t=ajt,n=ujt){const r=t*Math.pow(n,e),i=Math.round(cjt*r*(Math.random()-.5)*2);return Math.min(ljt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(e){return e&&e._delegate?e._delegate:e}class Qd{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class djt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new BC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pjt(t))try{this.getOrInitializeService({instanceIdentifier:ky})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=ky){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ky){return this.instances.has(t)}getOptions(t=ky){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hjt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ky){return this.component?this.component.multipleInstances?t:ky:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hjt(e){return e===ky?void 0:e}function pjt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mjt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new djt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fn||(Fn={}));const gjt={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},yjt=Fn.INFO,vjt={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},_jt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=vjt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class cF{constructor(t){this.name=t,this._logLevel=yjt,this._logHandler=_jt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gjt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}const bjt=(e,t)=>t.some(n=>e instanceof n);let Jme,Zme;function wjt(){return Jme||(Jme=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ejt(){return Zme||(Zme=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JMe=new WeakMap,nH=new WeakMap,ZMe=new WeakMap,yj=new WeakMap,hJ=new WeakMap;function xjt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Mg(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&JMe.set(n,e)}).catch(()=>{}),hJ.set(t,e),t}function Sjt(e){if(nH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});nH.set(e,t)}let rH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return nH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ZMe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mg(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Tjt(e){rH=e(rH)}function Cjt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(vj(this),t,...n);return ZMe.set(r,t.sort?t.sort():[t]),Mg(r)}:Ejt().includes(e)?function(...t){return e.apply(vj(this),t),Mg(JMe.get(this))}:function(...t){return Mg(e.apply(vj(this),t))}}function Ajt(e){return typeof e=="function"?Cjt(e):(e instanceof IDBTransaction&&Sjt(e),bjt(e,wjt())?new Proxy(e,rH):e)}function Mg(e){if(e instanceof IDBRequest)return xjt(e);if(yj.has(e))return yj.get(e);const t=Ajt(e);return t!==e&&(yj.set(e,t),hJ.set(t,e)),t}const vj=e=>hJ.get(e);function Ijt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Mg(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mg(o.result),u.oldVersion,u.newVersion,Mg(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Ojt=["get","getKey","getAll","getAllKeys","count"],Pjt=["put","add","delete","clear"],_j=new Map;function ege(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(_j.get(t))return _j.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Pjt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ojt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return _j.set(t,s),s}Tjt(e=>({...e,get:(t,n,r)=>ege(t,n)||e.get(t,n,r),has:(t,n)=>!!ege(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kjt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($jt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $jt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const iH="@firebase/app",tge="0.9.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=new cF("@firebase/app"),Rjt="@firebase/app-compat",Njt="@firebase/analytics-compat",Djt="@firebase/analytics",Mjt="@firebase/app-check-compat",Ljt="@firebase/app-check",Fjt="@firebase/auth",Bjt="@firebase/auth-compat",jjt="@firebase/database",zjt="@firebase/database-compat",Ujt="@firebase/functions",Vjt="@firebase/functions-compat",Hjt="@firebase/installations",qjt="@firebase/installations-compat",Wjt="@firebase/messaging",Gjt="@firebase/messaging-compat",Yjt="@firebase/performance",Kjt="@firebase/performance-compat",Xjt="@firebase/remote-config",Qjt="@firebase/remote-config-compat",Jjt="@firebase/storage",Zjt="@firebase/storage-compat",e7t="@firebase/firestore",t7t="@firebase/firestore-compat",n7t="firebase",r7t="10.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH="[DEFAULT]",i7t={[iH]:"fire-core",[Rjt]:"fire-core-compat",[Djt]:"fire-analytics",[Njt]:"fire-analytics-compat",[Ljt]:"fire-app-check",[Mjt]:"fire-app-check-compat",[Fjt]:"fire-auth",[Bjt]:"fire-auth-compat",[jjt]:"fire-rtdb",[zjt]:"fire-rtdb-compat",[Ujt]:"fire-fn",[Vjt]:"fire-fn-compat",[Hjt]:"fire-iid",[qjt]:"fire-iid-compat",[Wjt]:"fire-fcm",[Gjt]:"fire-fcm-compat",[Yjt]:"fire-perf",[Kjt]:"fire-perf-compat",[Xjt]:"fire-rc",[Qjt]:"fire-rc-compat",[Jjt]:"fire-gcs",[Zjt]:"fire-gcs-compat",[e7t]:"fire-fst",[t7t]:"fire-fst-compat","fire-js":"fire-js",[n7t]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=new Map,oH=new Map;function s7t(e,t){try{e.container.addComponent(t)}catch(n){tv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Hp(e){const t=e.name;if(oH.has(t))return tv.debug(`There were multiple attempts to register component ${t}.`),!1;oH.set(t,e);for(const n of F3.values())s7t(n,e);return!0}function ax(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Lg=new ox("app","Firebase",o7t);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7t{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Lg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=r7t;function eLe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:sH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Lg.create("bad-app-name",{appName:String(i)});if(n||(n=XMe()),!n)throw Lg.create("no-options");const s=F3.get(i);if(s){if(jC(n,s.options)&&jC(r,s.config))return s;throw Lg.create("duplicate-app",{appName:i})}const o=new mjt(i);for(const u of oH.values())o.addComponent(u);const a=new a7t(n,r,o);return F3.set(i,a),a}function pJ(e=sH){const t=F3.get(e);if(!t&&e===sH&&XMe())return eLe();if(!t)throw Lg.create("no-app",{appName:e});return t}function lf(e,t,n){var r;let i=(r=i7t[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tv.warn(a.join(" "));return}Hp(new Qd(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7t="firebase-heartbeat-database",l7t=1,zC="firebase-heartbeat-store";let bj=null;function tLe(){return bj||(bj=Ijt(u7t,l7t,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(zC)}}}).catch(e=>{throw Lg.create("idb-open",{originalErrorMessage:e.message})})),bj}async function c7t(e){try{return await(await tLe()).transaction(zC).objectStore(zC).get(nLe(e))}catch(t){if(t instanceof ph)tv.warn(t.message);else{const n=Lg.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});tv.warn(n.message)}}}async function nge(e,t){try{const r=(await tLe()).transaction(zC,"readwrite");await r.objectStore(zC).put(t,nLe(e)),await r.done}catch(n){if(n instanceof ph)tv.warn(n.message);else{const r=Lg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tv.warn(r.message)}}}function nLe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7t=1024,d7t=30*24*60*60*1e3;class h7t{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m7t(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rge();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=d7t}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rge(),{heartbeatsToSend:r,unsentEntries:i}=p7t(this._heartbeatsCache.heartbeats),s=L3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function rge(){return new Date().toISOString().substring(0,10)}function p7t(e,t=f7t){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ige(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ige(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class m7t{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dJ()?JBt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c7t(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ige(e){return L3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7t(e){Hp(new Qd("platform-logger",t=>new kjt(t),"PRIVATE")),Hp(new Qd("heartbeat",t=>new h7t(t),"PRIVATE")),lf(iH,tge,e),lf(iH,tge,"esm2017"),lf("fire-js","")}g7t("");function rLe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y7t=rLe,iLe=new ox("auth","Firebase",rLe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new cF("@firebase/auth");function v7t(e,...t){B3.logLevel<=Fn.WARN&&B3.warn(`Auth (${Wv}): ${e}`,...t)}function A$(e,...t){B3.logLevel<=Fn.ERROR&&B3.error(`Auth (${Wv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(e,...t){throw mJ(e,...t)}function Nd(e,...t){return mJ(e,...t)}function sLe(e,t,n){const r=Object.assign(Object.assign({},y7t()),{[t]:n});return new ox("auth","Firebase",r).create(t,{appName:e.name})}function _7t(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Jd(e,"argument-error"),sLe(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return iLe.create(e,...t)}function tn(e,t,...n){if(!e)throw mJ(t,...n)}function ap(e){const t="INTERNAL ASSERTION FAILED: "+e;throw A$(t),new Error(t)}function qp(e,t){e||ap(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function b7t(){return sge()==="http:"||sge()==="https:"}function sge(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7t(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b7t()||KBt()||"connection"in navigator)?navigator.onLine:!0}function E7t(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n){this.shortDelay=t,this.longDelay=n,qp(n>t,"Short delay should be less than long delay!"),this.isMobile=YBt()||XBt()}get(){return w7t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(e,t){qp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oLe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ap("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ap("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ap("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7t=new OI(3e4,6e4);function fF(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ux(e,t,n,r,i={}){return aLe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=II(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),oLe.fetch()(lLe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function aLe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},x7t),t);try{const i=new T7t(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw VP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw VP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw VP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw VP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sLe(e,c,l);Jd(e,c)}}catch(i){if(i instanceof ph)throw i;Jd(e,"network-request-failed",{message:String(i)})}}async function uLe(e,t,n,r,i={}){const s=await ux(e,t,n,r,i);return"mfaPendingCredential"in s&&Jd(e,"multi-factor-auth-required",{_serverResponse:s}),s}function lLe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?gJ(e.config,i):`${e.config.apiScheme}://${i}`}class T7t{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nd(this.auth,"network-request-failed")),S7t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function VP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7t(e,t){return ux(e,"POST","/v1/accounts:delete",t)}async function A7t(e,t){return ux(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function I7t(e,t=!1){const n=Is(e),r=await n.getIdToken(t),i=yJ(r);tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_2(wj(i.auth_time)),issuedAtTime:_2(wj(i.iat)),expirationTime:_2(wj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wj(e){return Number(e)*1e3}function yJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return A$("JWT malformed, contained fewer than 3 sections"),null;try{const i=GMe(n);return i?JSON.parse(i):(A$("Failed to decode base64 JWT payload"),null)}catch(i){return A$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function O7t(e){const t=yJ(e);return tn(t,"internal-error"),tn(typeof t.exp<"u","internal-error"),tn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ph&&P7t(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function P7t({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7t{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cLe{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_2(this.lastLoginAt),this.creationTime=_2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await UC(e,A7t(n,{idToken:r}));tn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?N7t(s.providerUserInfo):[],a=R7t(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cLe(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function $7t(e){const t=Is(e);await j3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function R7t(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function N7t(e){return e.map(t=>{var{providerId:n}=t,r=XK(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D7t(e,t){const n=await aLe(e,{},async()=>{const r=II({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=lLe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oLe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M7t(e,t){return ux(e,"POST","/v2/accounts:revokeToken",fF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){tn(t.idToken,"internal-error"),tn(typeof t.idToken<"u","internal-error"),tn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):O7t(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await D7t(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new VC;return r&&(tn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(tn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(tn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new VC,this.toJSON())}_performRefresh(){return ap("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(e,t){tn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class A1{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=XK(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k7t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cLe(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await UC(this,this.stsTokenManager.getToken(this.auth,t));return tn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return I7t(this,t)}reload(){return $7t(this)}_assign(t){this!==t&&(tn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new A1(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await j3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await UC(this,C7t(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:w,stsTokenManager:x}=n;tn(_&&x,t,"internal-error");const S=VC.fromJSON(this.name,x);tn(typeof _=="string",t,"internal-error"),Am(f,t.name),Am(d,t.name),tn(typeof b=="boolean",t,"internal-error"),tn(typeof E=="boolean",t,"internal-error"),Am(h,t.name),Am(p,t.name),Am(m,t.name),Am(g,t.name),Am(y,t.name),Am(v,t.name);const P=new A1({uid:_,auth:t,email:d,emailVerified:b,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return w&&Array.isArray(w)&&(P.providerData=w.map(A=>Object.assign({},A))),g&&(P._redirectEventId=g),P}static async _fromIdTokenResponse(t,n,r=!1){const i=new VC;i.updateFromServerResponse(n);const s=new A1({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await j3(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oge=new Map;function up(e){qp(e instanceof Function,"Expected a class definition");let t=oge.get(e);return t?(qp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,oge.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fLe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}fLe.type="NONE";const age=fLe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(e,t,n){return`firebase:${e}:${t}:${n}`}class Xb{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=I$(this.userKey,i.apiKey,s),this.fullPersistenceKey=I$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?A1._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Xb(up(age),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||up(age);const o=I$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=A1._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Xb(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Xb(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pLe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dLe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gLe(t))return"Blackberry";if(yLe(t))return"Webos";if(vJ(t))return"Safari";if((t.includes("chrome/")||hLe(t))&&!t.includes("edge/"))return"Chrome";if(mLe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dLe(e=oa()){return/firefox\//i.test(e)}function vJ(e=oa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hLe(e=oa()){return/crios\//i.test(e)}function pLe(e=oa()){return/iemobile/i.test(e)}function mLe(e=oa()){return/android/i.test(e)}function gLe(e=oa()){return/blackberry/i.test(e)}function yLe(e=oa()){return/webos/i.test(e)}function dF(e=oa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function L7t(e=oa()){var t;return dF(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function F7t(){return QBt()&&document.documentMode===10}function vLe(e=oa()){return dF(e)||mLe(e)||yLe(e)||gLe(e)||/windows phone/i.test(e)||pLe(e)}function B7t(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Le(e,t=[]){let n;switch(e){case"Browser":n=uge(oa());break;case"Worker":n=`${uge(oa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7t{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z7t(e,t={}){return ux(e,"GET","/v2/passwordPolicy",fF(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7t=6;class V7t{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:U7t,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7t{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lge(this),this.idTokenSubscription=new lge(this),this.beforeStateQueue=new j7t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iLe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=up(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Xb.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await j3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=E7t()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Is(t):null;return n&&tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(up(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await z7t(this),n=new V7t(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new ox("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M7t(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&up(t)||this._popupRedirectResolver;tn(n,this,"argument-error"),this.redirectPersistenceManager=await Xb.create(this,[up(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_Le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&v7t(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function PI(e){return Is(e)}class lge{constructor(t){this.auth=t,this.observer=null,this.addObserver=rjt(n=>this.observer=n)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function W7t(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Nd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",q7t().appendChild(r)})}function G7t(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7t(e,t){const n=ax(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(jC(s,t??{}))return i;Jd(i,"already-initialized")}return n.initialize({options:t})}function K7t(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(up);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function X7t(e,t,n){const r=PI(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=bLe(t),{host:o,port:a}=Q7t(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||J7t()}function bLe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Q7t(e){const t=bLe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cge(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:cge(o)}}}function cge(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function J7t(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wLe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ap("not implemented")}_getIdTokenResponse(t){return ap("not implemented")}_linkToIdToken(t,n){return ap("not implemented")}_getReauthenticationResolver(t){return ap("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(e,t){return uLe(e,"POST","/v1/accounts:signInWithIdp",fF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7t="http://localhost";class nv extends wLe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new nv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Jd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=XK(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new nv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Qb(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Qb(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Qb(t,n)}buildRequest(){const t={requestUri:Z7t,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=II(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends _J{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends kI{constructor(){super("facebook.com")}static credential(t){return nv._fromParams({providerId:Xm.PROVIDER_ID,signInMethod:Xm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xm.credentialFromTaggedObject(t)}static credentialFromError(t){return Xm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xm.credential(t.oauthAccessToken)}catch{return null}}}Xm.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends kI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return nv._fromParams({providerId:Qh.PROVIDER_ID,signInMethod:Qh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Qh.credentialFromTaggedObject(t)}static credentialFromError(t){return Qh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Qh.credential(n,r)}catch{return null}}}Qh.GOOGLE_SIGN_IN_METHOD="google.com";Qh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends kI{constructor(){super("github.com")}static credential(t){return nv._fromParams({providerId:Qm.PROVIDER_ID,signInMethod:Qm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Qm.credentialFromTaggedObject(t)}static credentialFromError(t){return Qm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Qm.credential(t.oauthAccessToken)}catch{return null}}}Qm.GITHUB_SIGN_IN_METHOD="github.com";Qm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends kI{constructor(){super("twitter.com")}static credential(t,n){return nv._fromParams({providerId:Jm.PROVIDER_ID,signInMethod:Jm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Jm.credentialFromTaggedObject(t)}static credentialFromError(t){return Jm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Jm.credential(n,r)}catch{return null}}}Jm.TWITTER_SIGN_IN_METHOD="twitter.com";Jm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ezt(e,t){return uLe(e,"POST","/v1/accounts:signUp",fF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await A1._fromIdTokenResponse(t,r,i),o=fge(r);return new d0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=fge(r);return new d0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function fge(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tzt(e){var t;const n=PI(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new d0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ezt(n,{returnSecureToken:!0}),i=await d0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3 extends ph{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,z3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new z3(t,n,r,i)}}function ELe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?z3._fromErrorAndOperation(e,s,t,r):s})}async function nzt(e,t,n=!1){const r=await UC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return d0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rzt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await UC(e,ELe(r,i,t,e),n);tn(s.idToken,r,"internal-error");const o=yJ(s.idToken);tn(o,r,"internal-error");const{sub:a}=o;return tn(e.uid===a,r,"user-mismatch"),d0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jd(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function izt(e,t,n=!1){const r="signIn",i=await ELe(e,r,t),s=await d0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function szt(e,t,n,r){return Is(e).onIdTokenChanged(t,n,r)}function ozt(e,t,n){return Is(e).beforeAuthStateChanged(t,n)}function azt(e,t,n,r){return Is(e).onAuthStateChanged(t,n,r)}function uzt(e){return Is(e).signOut()}const U3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xLe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(U3,"1"),this.storage.removeItem(U3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lzt(){const e=oa();return vJ(e)||dF(e)}const czt=1e3,fzt=10;class SLe extends xLe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=lzt()&&B7t(),this.fallbackToPolling=vLe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);F7t()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,fzt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},czt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}SLe.type="LOCAL";const dzt=SLe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TLe extends xLe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}TLe.type="SESSION";const CLe=TLe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hzt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new hF(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await hzt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hF.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pzt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=bJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){return window}function mzt(e){Dd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ALe(){return typeof Dd().WorkerGlobalScope<"u"&&typeof Dd().importScripts=="function"}async function gzt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yzt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function vzt(){return ALe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ILe="firebaseLocalStorageDb",_zt=1,V3="firebaseLocalStorage",OLe="fbase_key";class $I{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pF(e,t){return e.transaction([V3],t?"readwrite":"readonly").objectStore(V3)}function bzt(){const e=indexedDB.deleteDatabase(ILe);return new $I(e).toPromise()}function uH(){const e=indexedDB.open(ILe,_zt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(V3,{keyPath:OLe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(V3)?t(r):(r.close(),await bzt(),t(await uH()))})})}async function dge(e,t,n){const r=pF(e,!0).put({[OLe]:t,value:n});return new $I(r).toPromise()}async function wzt(e,t){const n=pF(e,!1).get(t),r=await new $I(n).toPromise();return r===void 0?null:r.value}function hge(e,t){const n=pF(e,!0).delete(t);return new $I(n).toPromise()}const Ezt=800,xzt=3;class PLe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>xzt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ALe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hF._getInstance(vzt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await gzt(),!this.activeServiceWorker)return;this.sender=new pzt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||yzt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await uH();return await dge(t,U3,"1"),await hge(t,U3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dge(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>wzt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>hge(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=pF(i,!1).getAll();return new $I(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ezt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PLe.type="LOCAL";const Szt=PLe;new OI(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kLe(e,t){return t?up(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ extends wLe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qb(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Qb(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Qb(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Tzt(e){return izt(e.auth,new wJ(e),e.bypassAuthState)}function Czt(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),rzt(n,new wJ(e),e.bypassAuthState)}async function Azt(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),nzt(n,new wJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Le{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Tzt;case"linkViaPopup":case"linkViaRedirect":return Azt;case"reauthViaPopup":case"reauthViaRedirect":return Czt;default:Jd(this.auth,"internal-error")}}resolve(t){qp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Izt=new OI(2e3,1e4);async function Ozt(e,t,n){const r=PI(e);_7t(e,t,_J);const i=kLe(r,n);return new l1(r,"signInViaPopup",t,i).executeNotNull()}class l1 extends $Le{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,l1.currentPopupAction&&l1.currentPopupAction.cancel(),l1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return tn(t,this.auth,"internal-error"),t}async onExecution(){qp(this.filter.length===1,"Popup operations only handle one event");const t=bJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Nd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,l1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Izt.get())};t()}}l1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pzt="pendingRedirect",O$=new Map;class kzt extends $Le{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=O$.get(this.auth._key());if(!t){try{const r=await $zt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}O$.set(this.auth._key(),t)}return this.bypassAuthState||O$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $zt(e,t){const n=Dzt(t),r=Nzt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Rzt(e,t){O$.set(e._key(),t)}function Nzt(e){return up(e._redirectPersistence)}function Dzt(e){return I$(Pzt,e.config.apiKey,e.name)}async function Mzt(e,t,n=!1){const r=PI(e),i=kLe(r,t),o=await new kzt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lzt=10*60*1e3;class Fzt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Bzt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!RLe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Lzt&&this.cachedEventUids.clear(),this.cachedEventUids.has(pge(t))}saveEventToCache(t){this.cachedEventUids.add(pge(t)),this.lastProcessedEventTime=Date.now()}}function pge(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function RLe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Bzt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RLe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jzt(e,t={}){return ux(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zzt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uzt=/^https?/;async function Vzt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await jzt(e);for(const n of t)try{if(Hzt(n))return}catch{}Jd(e,"unauthorized-domain")}function Hzt(e){const t=aH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Uzt.test(n))return!1;if(zzt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qzt=new OI(3e4,6e4);function mge(){const e=Dd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Wzt(e){return new Promise((t,n)=>{var r,i,s;function o(){mge(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mge(),n(Nd(e,"network-request-failed"))},timeout:qzt.get()})}if(!((i=(r=Dd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Dd().gapi)===null||s===void 0)&&s.load)o();else{const a=G7t("iframefcb");return Dd()[a]=()=>{gapi.load?o():n(Nd(e,"network-request-failed"))},W7t(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw P$=null,t})}let P$=null;function Gzt(e){return P$=P$||Wzt(e),P$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yzt=new OI(5e3,15e3),Kzt="__/auth/iframe",Xzt="emulator/auth/iframe",Qzt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jzt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zzt(e){const t=e.config;tn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gJ(t,Xzt):`https://${e.config.authDomain}/${Kzt}`,r={apiKey:t.apiKey,appName:e.name,v:Wv},i=Jzt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${II(r).slice(1)}`}async function eUt(e){const t=await Gzt(e),n=Dd().gapi;return tn(n,e,"internal-error"),t.open({where:document.body,url:Zzt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qzt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Nd(e,"network-request-failed"),a=Dd().setTimeout(()=>{s(o)},Yzt.get());function u(){Dd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tUt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nUt=500,rUt=600,iUt="_blank",sUt="http://localhost";class gge{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oUt(e,t,n,r=nUt,i=rUt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},tUt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=oa().toLowerCase();n&&(a=hLe(l)?iUt:n),dLe(l)&&(t=t||sUt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(L7t(l)&&a!=="_self")return aUt(t||"",a),new gge(null);const f=window.open(t||"",a,c);tn(f,e,"popup-blocked");try{f.focus()}catch{}return new gge(f)}function aUt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uUt="__/auth/handler",lUt="emulator/auth/handler",cUt=encodeURIComponent("fac");async function yge(e,t,n,r,i,s){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wv,eventId:i};if(t instanceof _J){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",njt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof kI){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${cUt}=${encodeURIComponent(u)}`:"";return`${fUt(e)}?${II(a).slice(1)}${l}`}function fUt({config:e}){return e.emulator?gJ(e,lUt):`https://${e.authDomain}/${uUt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="webStorageSupport";class dUt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CLe,this._completeRedirectFn=Mzt,this._overrideRedirectResult=Rzt}async _openPopup(t,n,r,i){var s;qp((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yge(t,n,r,aH(),i);return oUt(t,o,bJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await yge(t,n,r,aH(),i);return mzt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await eUt(t),r=new Fzt(t);return n.register("authEvent",i=>(tn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ej,{type:Ej},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ej];o!==void 0&&n(!!o),Jd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Vzt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return vLe()||vJ()||dF()}}const hUt=dUt;var vge="@firebase/auth",_ge="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pUt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mUt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function gUt(e){Hp(new Qd("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;tn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_Le(e)},l=new H7t(r,i,s,u);return K7t(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Hp(new Qd("auth-internal",t=>{const n=PI(t.getProvider("auth").getImmediate());return(r=>new pUt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lf(vge,_ge,mUt(e)),lf(vge,_ge,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yUt=5*60,vUt=QMe("authIdTokenMaxAge")||yUt;let bge=null;const _Ut=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vUt)return;const i=n==null?void 0:n.token;bge!==i&&(bge=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function H3(e=pJ()){const t=ax(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Y7t(e,{popupRedirectResolver:hUt,persistence:[Szt,dzt,CLe]}),r=QMe("authTokenSyncURL");if(r){const s=_Ut(r);ozt(n,s,()=>s(n.currentUser)),szt(n,o=>s(o))}const i=KMe("auth");return i&&X7t(n,`http://${i}`),n}gUt("Browser");var bUt="firebase",wUt="10.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lf(bUt,wUt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NLe="firebasestorage.googleapis.com",DLe="storageBucket",EUt=2*60*1e3,xUt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends ph{constructor(t,n,r=0){super(xj(t),`Firebase Storage: ${n} (${xj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ji.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return xj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fi||(Fi={}));function xj(e){return"storage/"+e}function EJ(){const e="An unknown error occurred, please check the error payload for server response.";return new ji(Fi.UNKNOWN,e)}function SUt(e){return new ji(Fi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function TUt(e){return new ji(Fi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CUt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ji(Fi.UNAUTHENTICATED,e)}function AUt(){return new ji(Fi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IUt(e){return new ji(Fi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function OUt(){return new ji(Fi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PUt(){return new ji(Fi.CANCELED,"User canceled the upload/download.")}function kUt(e){return new ji(Fi.INVALID_URL,"Invalid URL '"+e+"'.")}function $Ut(e){return new ji(Fi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function RUt(){return new ji(Fi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DLe+"' property when initializing the app?")}function NUt(){return new ji(Fi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DUt(){return new ji(Fi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function MUt(e){return new ji(Fi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function lH(e){return new ji(Fi.INVALID_ARGUMENT,e)}function MLe(){return new ji(Fi.APP_DELETED,"The Firebase app was deleted.")}function LUt(e){return new ji(Fi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function b2(e,t){return new ji(Fi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ES(e){throw new ji(Fi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=el.makeFromUrl(t,n)}catch{return new el(t,"")}if(r.path==="")return r;throw $Ut(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===NLe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<_.length;b++){const E=_[b],w=E.regex.exec(t);if(w){const x=w[E.indices.bucket];let S=w[E.indices.path];S||(S=""),r=new el(x,S),E.postModify(r);break}}if(r==null)throw kUt(t);return r}}class FUt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BUt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function jUt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zUt(e){return e!==void 0}function UUt(e){return typeof e=="object"&&!Array.isArray(e)}function xJ(e){return typeof e=="string"||e instanceof String}function wge(e){return SJ()&&e instanceof Blob}function SJ(){return typeof Blob<"u"}function Ege(e,t,n,r){if(r<t)throw lH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw lH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function LLe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(I1||(I1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VUt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HUt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new HP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===I1.NO_ERROR,u=s.getStatus();if(!a||VUt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===I1.ABORT;r(!1,new HP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new HP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());zUt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=EJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?MLe():PUt();o(u)}else{const u=OUt();o(u)}};this.canceled_?n(!1,new HP(!1,null,!0)):this.backoffId_=BUt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&jUt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class HP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function qUt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function WUt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function GUt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function YUt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function KUt(e,t,n,r,i,s,o=!0){const a=LLe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return GUt(l,t),qUt(l,n),WUt(l,s),YUt(l,r),new HUt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XUt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function QUt(...e){const t=XUt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(SJ())return new Blob(e);throw new ji(Fi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JUt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZUt(e){if(typeof atob>"u")throw MUt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sj{constructor(t,n){this.data=t,this.contentType=n||null}}function eVt(e,t){switch(e){case bd.RAW:return new Sj(FLe(t));case bd.BASE64:case bd.BASE64URL:return new Sj(BLe(e,t));case bd.DATA_URL:return new Sj(nVt(t),rVt(t))}throw EJ()}function FLe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function tVt(e){let t;try{t=decodeURIComponent(e)}catch{throw b2(bd.DATA_URL,"Malformed data URL.")}return FLe(t)}function BLe(e,t){switch(e){case bd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw b2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw b2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZUt(t)}catch(i){throw i.message.includes("polyfill")?i:b2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jLe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw b2(bd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=iVt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function nVt(e){const t=new jLe(e);return t.base64?BLe(bd.BASE64,t.rest):tVt(t.rest)}function rVt(e){return new jLe(e).contentType}function iVt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n){let r=0,i="";wge(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(wge(this.data_)){const r=this.data_,i=JUt(r,t,n);return i===null?null:new Zm(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Zm(r,!0)}}static getBlob(...t){if(SJ()){const n=t.map(r=>r instanceof Zm?r.data_:r);return new Zm(QUt.apply(null,n))}else{const n=t.map(o=>xJ(o)?eVt(bd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Zm(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zLe(e){let t;try{t=JSON.parse(e)}catch{return null}return UUt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sVt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function oVt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function ULe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aVt(e,t){return t}class pa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||aVt}}let qP=null;function uVt(e){return!xJ(e)||e.length<2?e:ULe(e)}function VLe(){if(qP)return qP;const e=[];e.push(new pa("bucket")),e.push(new pa("generation")),e.push(new pa("metageneration")),e.push(new pa("name","fullPath",!0));function t(s,o){return uVt(o)}const n=new pa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new pa("size");return i.xform=r,e.push(i),e.push(new pa("timeCreated")),e.push(new pa("updated")),e.push(new pa("md5Hash",null,!0)),e.push(new pa("cacheControl",null,!0)),e.push(new pa("contentDisposition",null,!0)),e.push(new pa("contentEncoding",null,!0)),e.push(new pa("contentLanguage",null,!0)),e.push(new pa("contentType",null,!0)),e.push(new pa("metadata","customMetadata",!0)),qP=e,qP}function lVt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new el(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function cVt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return lVt(r,e),r}function HLe(e,t,n){const r=zLe(t);return r===null?null:cVt(e,r,n)}function fVt(e,t,n,r){const i=zLe(t);if(i===null||!xJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=TJ(d,n,r),p=LLe({alt:"media",token:l});return h+p})[0]}function dVt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class qLe{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WLe(e){if(!e)throw EJ()}function hVt(e,t){function n(r,i){const s=HLe(e,i,t);return WLe(s!==null),s}return n}function pVt(e,t){function n(r,i){const s=HLe(e,i,t);return WLe(s!==null),fVt(s,i,e.host,e._protocol)}return n}function GLe(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=AUt():i=CUt():n.getStatus()===402?i=TUt(e.bucket):n.getStatus()===403?i=IUt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function mVt(e){const t=GLe(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=SUt(e.path)),s.serverResponse=i.serverResponse,s}return n}function gVt(e,t,n){const r=t.fullServerUrl(),i=TJ(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new qLe(i,s,pVt(e,n),o);return a.errorHandler=mVt(t),a}function yVt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function vVt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=yVt(null,t)),r}function _Vt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=vVt(t,r,i),c=dVt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Zm.getBlob(f,r,d);if(h===null)throw NUt();const p={name:l.fullPath},m=TJ(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new qLe(m,g,hVt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=GLe(t),v}class bVt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=I1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=I1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=I1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw ES("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ES("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ES("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ES("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ES("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class wVt extends bVt{initXhr(){this.xhr_.responseType="text"}}function YLe(){return new wVt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t,n){this._service=t,n instanceof el?this._location=n:this._location=el.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new rv(t,n)}get root(){const t=new el(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ULe(this._location.path)}get storage(){return this._service}get parent(){const t=sVt(this._location.path);if(t===null)return null;const n=new el(this._location.bucket,t);return new rv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw LUt(t)}}function EVt(e,t,n){e._throwIfRoot("uploadBytes");const r=_Vt(e.storage,e._location,VLe(),new Zm(t,!0),n);return e.storage.makeRequestWithTokens(r,YLe).then(i=>({metadata:i,ref:e}))}function xVt(e){e._throwIfRoot("getDownloadURL");const t=gVt(e.storage,e._location,VLe());return e.storage.makeRequestWithTokens(t,YLe).then(n=>{if(n===null)throw DUt();return n})}function SVt(e,t){const n=oVt(e._location.path,t),r=new el(e._location.bucket,n);return new rv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TVt(e){return/^[A-Za-z]+:\/\//.test(e)}function CVt(e,t){return new rv(e,t)}function KLe(e,t){if(e instanceof CJ){const n=e;if(n._bucket==null)throw RUt();const r=new rv(n,n._bucket);return t!=null?KLe(r,t):r}else return t!==void 0?SVt(e,t):e}function AVt(e,t){if(t&&TVt(t)){if(e instanceof CJ)return CVt(e,t);throw lH("To use ref(service, url), the first argument must be a Storage instance.")}else return KLe(e,t)}function xge(e,t){const n=t==null?void 0:t[DLe];return n==null?null:el.makeFromBucketSpec(n,e)}function IVt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:GBt(i,e.app.options.projectId))}class CJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=NLe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EUt,this._maxUploadRetryTime=xUt,this._requests=new Set,i!=null?this._bucket=el.makeFromBucketSpec(i,this._host):this._bucket=xge(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=el.makeFromBucketSpec(this._url,t):this._bucket=xge(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ege("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ege("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new rv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new FUt(MLe());{const o=KUt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Sge="@firebase/storage",Tge="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XLe="storage";function OVt(e,t,n){return e=Is(e),EVt(e,t,n)}function PVt(e){return e=Is(e),xVt(e)}function Cge(e,t){return e=Is(e),AVt(e,t)}function Age(e=pJ(),t){e=Is(e);const r=ax(e,XLe).getImmediate({identifier:t}),i=WBt("storage");return i&&kVt(r,...i),r}function kVt(e,t,n,r={}){IVt(e,t,n,r)}function $Vt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new CJ(n,r,i,t,Wv)}function RVt(){Hp(new Qd(XLe,$Vt,"PUBLIC").setMultipleInstances(!0)),lf(Sge,Tge,""),lf(Sge,Tge,"esm2017")}RVt();var NVt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},at,AJ=AJ||{},Zt=NVt||self;function mF(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function RI(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function DVt(e){return Object.prototype.hasOwnProperty.call(e,Tj)&&e[Tj]||(e[Tj]=++MVt)}var Tj="closure_uid_"+(1e9*Math.random()>>>0),MVt=0;function LVt(e,t,n){return e.call.apply(e.bind,arguments)}function FVt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Qo(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qo=LVt:Qo=FVt,Qo.apply(null,arguments)}function WP(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Zs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function G0(){this.s=this.s,this.o=this.o}var BVt=0;G0.prototype.s=!1;G0.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),BVt!=0)&&DVt(this)};G0.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QLe=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function IJ(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ige(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(mF(r)){const i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function Jo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jo.prototype.h=function(){this.defaultPrevented=!0};var jVt=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};Zt.addEventListener("test",n,t),Zt.removeEventListener("test",n,t)}catch{}return e}();function HC(e){return/^[\s\xa0]*$/.test(e)}function gF(){var e=Zt.navigator;return e&&(e=e.userAgent)?e:""}function dd(e){return gF().indexOf(e)!=-1}function OJ(e){return OJ[" "](e),e}OJ[" "]=function(){};function zVt(e,t){var n=RHt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var UVt=dd("Opera"),Yw=dd("Trident")||dd("MSIE"),JLe=dd("Edge"),cH=JLe||Yw,ZLe=dd("Gecko")&&!(gF().toLowerCase().indexOf("webkit")!=-1&&!dd("Edge"))&&!(dd("Trident")||dd("MSIE"))&&!dd("Edge"),VVt=gF().toLowerCase().indexOf("webkit")!=-1&&!dd("Edge");function e6e(){var e=Zt.document;return e?e.documentMode:void 0}var fH;e:{var Cj="",Aj=function(){var e=gF();if(ZLe)return/rv:([^\);]+)(\)|;)/.exec(e);if(JLe)return/Edge\/([\d\.]+)/.exec(e);if(Yw)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(VVt)return/WebKit\/(\S+)/.exec(e);if(UVt)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Aj&&(Cj=Aj?Aj[1]:""),Yw){var Ij=e6e();if(Ij!=null&&Ij>parseFloat(Cj)){fH=String(Ij);break e}}fH=Cj}var dH;if(Zt.document&&Yw){var Oge=e6e();dH=Oge||parseInt(fH,10)||void 0}else dH=void 0;var HVt=dH;function qC(e,t){if(Jo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ZLe){e:{try{OJ(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:qVt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qC.$.h.call(this)}}Zs(qC,Jo);var qVt={2:"touch",3:"pen",4:"mouse"};qC.prototype.h=function(){qC.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var NI="closure_listenable_"+(1e6*Math.random()|0),WVt=0;function GVt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++WVt,this.fa=this.ia=!1}function yF(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function PJ(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function YVt(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function t6e(e){const t={};for(const n in e)t[n]=e[n];return t}const Pge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function n6e(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<Pge.length;s++)n=Pge[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function vF(e){this.src=e,this.g={},this.h=0}vF.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=pH(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new GVt(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function hH(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=QLe(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(yF(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function pH(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var kJ="closure_lm_"+(1e6*Math.random()|0),Oj={};function r6e(e,t,n,r,i){if(r&&r.once)return s6e(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)r6e(e,t[s],n,r,i);return null}return n=NJ(n),e&&e[NI]?e.O(t,n,RI(r)?!!r.capture:!!r,i):i6e(e,t,n,!1,r,i)}function i6e(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=RI(i)?!!i.capture:!!i,a=RJ(e);if(a||(e[kJ]=a=new vF(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=KVt(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jVt||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(a6e(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function KVt(){function e(n){return t.call(e.src,e.listener,n)}const t=XVt;return e}function s6e(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)s6e(e,t[s],n,r,i);return null}return n=NJ(n),e&&e[NI]?e.P(t,n,RI(r)?!!r.capture:!!r,i):i6e(e,t,n,!0,r,i)}function o6e(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)o6e(e,t[s],n,r,i);else r=RI(r)?!!r.capture:!!r,n=NJ(n),e&&e[NI]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=pH(s,n,r,i),-1<n&&(yF(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=RJ(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pH(t,n,r,i)),(n=-1<e?t[e]:null)&&$J(n))}function $J(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[NI])hH(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(a6e(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=RJ(t))?(hH(n,e),n.h==0&&(n.src=null,t[kJ]=null)):yF(e)}}}function a6e(e){return e in Oj?Oj[e]:Oj[e]="on"+e}function XVt(e,t){if(e.fa)e=!0;else{t=new qC(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$J(e),e=n.call(r,t)}return e}function RJ(e){return e=e[kJ],e instanceof vF?e:null}var Pj="__closure_events_fn_"+(1e9*Math.random()>>>0);function NJ(e){return typeof e=="function"?e:(e[Pj]||(e[Pj]=function(t){return e.handleEvent(t)}),e[Pj])}function Ks(){G0.call(this),this.i=new vF(this),this.S=this,this.J=null}Zs(Ks,G0);Ks.prototype[NI]=!0;Ks.prototype.removeEventListener=function(e,t,n,r){o6e(this,e,t,n,r)};function bo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Jo(t,e);else if(t instanceof Jo)t.target=t.target||e;else{var i=t;t=new Jo(r,e),n6e(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=GP(o,r,!0,t)&&i}if(o=t.g=e,i=GP(o,r,!0,t)&&i,i=GP(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=GP(o,r,!1,t)&&i}Ks.prototype.N=function(){if(Ks.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)yF(n[r]);delete e.g[t],e.h--}}this.J=null};Ks.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Ks.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function GP(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&hH(e.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var DJ=Zt.JSON.stringify;class QVt{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function JVt(){var e=MJ;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class ZVt{constructor(){this.h=this.g=null}add(t,n){const r=u6e.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var u6e=new QVt(()=>new eHt,e=>e.reset());class eHt{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function tHt(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function nHt(e){Zt.setTimeout(()=>{throw e},0)}let WC,GC=!1,MJ=new ZVt,l6e=()=>{const e=Zt.Promise.resolve(void 0);WC=()=>{e.then(rHt)}};var rHt=()=>{for(var e;e=JVt();){try{e.h.call(e.g)}catch(n){nHt(n)}var t=u6e;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}GC=!1};function _F(e,t){Ks.call(this),this.h=e||1,this.g=t||Zt,this.j=Qo(this.qb,this),this.l=Date.now()}Zs(_F,Ks);at=_F.prototype;at.ga=!1;at.T=null;at.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bo(this,"tick"),this.ga&&(LJ(this),this.start()))}};at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function LJ(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}at.N=function(){_F.$.N.call(this),LJ(this),delete this.g};function FJ(e,t,n){if(typeof e=="function")n&&(e=Qo(e,n));else if(e&&typeof e.handleEvent=="function")e=Qo(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Zt.setTimeout(e,t||0)}function c6e(e){e.g=FJ(()=>{e.g=null,e.i&&(e.i=!1,c6e(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class iHt extends G0{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:c6e(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function YC(e){G0.call(this),this.h=e,this.g={}}Zs(YC,G0);var kge=[];function f6e(e,t,n,r){Array.isArray(n)||(n&&(kge[0]=n.toString()),n=kge);for(var i=0;i<n.length;i++){var s=r6e(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function d6e(e){PJ(e.g,function(t,n){this.g.hasOwnProperty(n)&&$J(t)},e),e.g={}}YC.prototype.N=function(){YC.$.N.call(this),d6e(this)};YC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bF(){this.g=!0}bF.prototype.Ea=function(){this.g=!1};function sHt(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&f[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function oHt(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function vb(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+uHt(e,n)+(r?" "+r:"")})}function aHt(e,t){e.info(function(){return"TIMEOUT: "+t})}bF.prototype.info=function(){};function uHt(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return DJ(n)}catch{return t}}var Gv={},$ge=null;function wF(){return $ge=$ge||new Ks}Gv.Ta="serverreachability";function h6e(e){Jo.call(this,Gv.Ta,e)}Zs(h6e,Jo);function KC(e){const t=wF();bo(t,new h6e(t))}Gv.STAT_EVENT="statevent";function p6e(e,t){Jo.call(this,Gv.STAT_EVENT,e),this.stat=t}Zs(p6e,Jo);function Ca(e){const t=wF();bo(t,new p6e(t,e))}Gv.Ua="timingevent";function m6e(e,t){Jo.call(this,Gv.Ua,e),this.size=t}Zs(m6e,Jo);function DI(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){e()},t)}var EF={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},g6e={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function BJ(){}BJ.prototype.h=null;function Rge(e){return e.h||(e.h=e.i())}function y6e(){}var MI={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jJ(){Jo.call(this,"d")}Zs(jJ,Jo);function zJ(){Jo.call(this,"c")}Zs(zJ,Jo);var mH;function xF(){}Zs(xF,BJ);xF.prototype.g=function(){return new XMLHttpRequest};xF.prototype.i=function(){return{}};mH=new xF;function LI(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new YC(this),this.P=lHt,e=cH?125:void 0,this.V=new _F(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new v6e}function v6e(){this.i=null,this.g="",this.h=!1}var lHt=45e3,_6e={},gH={};at=LI.prototype;at.setTimeout=function(e){this.P=e};function yH(e,t,n){e.L=1,e.A=TF(Wp(t)),e.u=n,e.S=!0,b6e(e,null)}function b6e(e,t){e.G=Date.now(),FI(e),e.B=Wp(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),I6e(n.i,"t",r),e.o=0,n=e.l.J,e.h=new v6e,e.g=K6e(e.l,n?t:null,!e.u),0<e.O&&(e.M=new iHt(Qo(e.Pa,e,e.g),e.O)),f6e(e.U,e.g,"readystatechange",e.nb),t=e.I?t6e(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),KC(),sHt(e.j,e.v,e.B,e.m,e.W,e.u)}at.nb=function(e){e=e.target;const t=this.M;t&&wd(e)==3?t.l():this.Pa(e)};at.Pa=function(e){try{if(e==this.g)e:{const c=wd(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>c)&&(c!=3||cH||this.g&&(this.h.h||this.g.ja()||Lge(this.g)))){this.J||c!=4||t==7||(t==8||0>=f?KC(3):KC(2)),SF(this);var n=this.g.da();this.ca=n;t:if(w6e(this)){var r=Lge(this.g);e="";var i=r.length,s=wd(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){c1(this),w2(this);var o="";break t}this.h.i=new Zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,oHt(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!HC(a)){var l=a;break t}}l=null}if(n=l)vb(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vH(this,n);else{this.i=!1,this.s=3,Ca(12),c1(this),w2(this);break e}}this.S?(E6e(this,c,o),cH&&this.i&&c==3&&(f6e(this.U,this.V,"tick",this.mb),this.V.start())):(vb(this.j,this.m,o,null),vH(this,o)),c==4&&c1(this),this.i&&!this.J&&(c==4?q6e(this.l,this):(this.i=!1,FI(this)))}else PHt(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ca(12)):(this.s=0,Ca(13)),c1(this),w2(this)}}}catch{}finally{}};function w6e(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function E6e(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=cHt(e,n),i==gH){t==4&&(e.s=4,Ca(14),r=!1),vb(e.j,e.m,null,"[Incomplete Response]");break}else if(i==_6e){e.s=4,Ca(15),vb(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else vb(e.j,e.m,i,null),vH(e,i);w6e(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,Ca(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),GJ(t),t.M=!0,Ca(11))):(vb(e.j,e.m,n,"[Invalid Chunked Response]"),c1(e),w2(e))}at.mb=function(){if(this.g){var e=wd(this.g),t=this.g.ja();this.o<t.length&&(SF(this),E6e(this,e,t),this.i&&e!=4&&FI(this))}};function cHt(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?gH:(n=Number(t.substring(n,r)),isNaN(n)?_6e:(r+=1,r+n>t.length?gH:(t=t.slice(r,r+n),e.o=r+n,t)))}at.cancel=function(){this.J=!0,c1(this)};function FI(e){e.Y=Date.now()+e.P,x6e(e,e.P)}function x6e(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=DI(Qo(e.lb,e),t)}function SF(e){e.C&&(Zt.clearTimeout(e.C),e.C=null)}at.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(aHt(this.j,this.B),this.L!=2&&(KC(),Ca(17)),c1(this),this.s=2,w2(this)):x6e(this,this.Y-e)};function w2(e){e.l.H==0||e.J||q6e(e.l,e)}function c1(e){SF(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,LJ(e.V),d6e(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function vH(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||_H(n.i,e))){if(!e.K&&_H(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)G3(n),OF(n);else break e;WJ(n),Ca(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=DI(Qo(n.ib,n),6e3));if(1>=k6e(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else f1(n,11)}else if((e.K||n.g==e)&&G3(n),!HC(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const f=l[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const p=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(UJ(s,s.h),s.h=null))}if(r.F){const m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Xr(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Y6e(r,r.J?r.pa:null,r.Y),o.K){$6e(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(SF(a),FI(a)),r.g=o}else V6e(r);0<n.j.length&&PF(n)}else l[0]!="stop"&&l[0]!="close"||f1(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?f1(n,7):qJ(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}KC(4)}catch{}}function fHt(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(mF(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function dHt(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(mF(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function S6e(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(mF(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=dHt(e),r=fHt(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var T6e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hHt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function O1(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof O1){this.h=e.h,q3(this,e.j),this.s=e.s,this.g=e.g,W3(this,e.m),this.l=e.l;var t=e.i,n=new XC;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Nge(this,n),this.o=e.o}else e&&(t=String(e).match(T6e))?(this.h=!1,q3(this,t[1]||"",!0),this.s=hT(t[2]||""),this.g=hT(t[3]||"",!0),W3(this,t[4]),this.l=hT(t[5]||"",!0),Nge(this,t[6]||"",!0),this.o=hT(t[7]||"")):(this.h=!1,this.i=new XC(null,this.h))}O1.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pT(t,Dge,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(pT(t,Dge,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(pT(n,n.charAt(0)=="/"?gHt:mHt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",pT(n,vHt)),e.join("")};function Wp(e){return new O1(e)}function q3(e,t,n){e.j=n?hT(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function W3(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Nge(e,t,n){t instanceof XC?(e.i=t,_Ht(e.i,e.h)):(n||(t=pT(t,yHt)),e.i=new XC(t,e.h))}function Xr(e,t,n){e.i.set(t,n)}function TF(e){return Xr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hT(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pT(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,pHt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pHt(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Dge=/[#\/\?@]/g,mHt=/[#\?:]/g,gHt=/[#\?]/g,yHt=/[#\?@]/g,vHt=/#/g;function XC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Y0(e){e.g||(e.g=new Map,e.h=0,e.i&&hHt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}at=XC.prototype;at.add=function(e,t){Y0(this),this.i=null,e=lx(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function C6e(e,t){Y0(e),t=lx(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function A6e(e,t){return Y0(e),t=lx(e,t),e.g.has(t)}at.forEach=function(e,t){Y0(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};at.ta=function(){Y0(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};at.Z=function(e){Y0(this);let t=[];if(typeof e=="string")A6e(this,e)&&(t=t.concat(this.g.get(lx(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};at.set=function(e,t){return Y0(this),this.i=null,e=lx(this,e),A6e(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};at.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function I6e(e,t,n){C6e(e,t),0<n.length&&(e.i=null,e.g.set(lx(e,t),IJ(n)),e.h+=n.length)}at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function lx(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _Ht(e,t){t&&!e.j&&(Y0(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(C6e(this,r),I6e(this,i,n))},e)),e.j=t}var bHt=class{constructor(e,t){this.g=e,this.map=t}};function O6e(e){this.l=e||wHt,Zt.PerformanceNavigationTiming?(e=Zt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wHt=10;function P6e(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function k6e(e){return e.h?1:e.g?e.g.size:0}function _H(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function UJ(e,t){e.g?e.g.add(t):e.h=t}function $6e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}O6e.prototype.cancel=function(){if(this.i=R6e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function R6e(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return IJ(e.i)}var EHt=class{stringify(e){return Zt.JSON.stringify(e,void 0)}parse(e){return Zt.JSON.parse(e,void 0)}};function xHt(){this.g=new EHt}function SHt(e,t,n){const r=n||"";try{S6e(e,function(i,s){let o=i;RI(i)&&(o=DJ(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function THt(e,t){const n=new bF;if(Zt.Image){const r=new Image;r.onload=WP(YP,n,r,"TestLoadImage: loaded",!0,t),r.onerror=WP(YP,n,r,"TestLoadImage: error",!1,t),r.onabort=WP(YP,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=WP(YP,n,r,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function YP(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function CF(e){this.l=e.ec||null,this.j=e.ob||!1}Zs(CF,BJ);CF.prototype.g=function(){return new AF(this.l,this.j)};CF.prototype.i=function(e){return function(){return e}}({});function AF(e,t){Ks.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=VJ,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zs(AF,Ks);var VJ=0;at=AF.prototype;at.open=function(e,t){if(this.readyState!=VJ)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,QC(this)};at.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,BI(this)),this.readyState=VJ};at.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,QC(this)),this.g&&(this.readyState=3,QC(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;N6e(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function N6e(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}at.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?BI(this):QC(this),this.readyState==3&&N6e(this)}};at.Za=function(e){this.g&&(this.response=this.responseText=e,BI(this))};at.Ya=function(e){this.g&&(this.response=e,BI(this))};at.ka=function(){this.g&&BI(this)};function BI(e){e.readyState=4,e.l=null,e.j=null,e.A=null,QC(e)}at.setRequestHeader=function(e,t){this.v.append(e,t)};at.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};at.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function QC(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(AF.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var CHt=Zt.JSON.parse;function Bi(e){Ks.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=D6e,this.L=this.M=!1}Zs(Bi,Ks);var D6e="",AHt=/^https?$/i,IHt=["POST","PUT"];at=Bi.prototype;at.Oa=function(e){this.M=e};at.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mH.g(),this.C=this.u?Rge(this.u):Rge(mH),this.g.onreadystatechange=Qo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){Mge(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Zt.FormData&&e instanceof Zt.FormData,!(0<=QLe(IHt,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{F6e(this),0<this.B&&((this.L=OHt(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qo(this.ua,this)):this.A=FJ(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Mge(this,s)}};function OHt(e){return Yw&&typeof e.timeout=="number"&&e.ontimeout!==void 0}at.ua=function(){typeof AJ<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bo(this,"timeout"),this.abort(8))};function Mge(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,M6e(e),IF(e)}function M6e(e){e.F||(e.F=!0,bo(e,"complete"),bo(e,"error"))}at.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,bo(this,"complete"),bo(this,"abort"),IF(this))};at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),IF(this,!0)),Bi.$.N.call(this)};at.La=function(){this.s||(this.G||this.v||this.l?L6e(this):this.kb())};at.kb=function(){L6e(this)};function L6e(e){if(e.h&&typeof AJ<"u"&&(!e.C[1]||wd(e)!=4||e.da()!=2)){if(e.v&&wd(e)==4)FJ(e.La,0,e);else if(bo(e,"readystatechange"),wd(e)==4){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(T6e)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!AHt.test(i?i.toLowerCase():"")}n=r}if(n)bo(e,"complete"),bo(e,"success");else{e.m=6;try{var s=2<wd(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",M6e(e)}}finally{IF(e)}}}}function IF(e,t){if(e.g){F6e(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||bo(e,"ready");try{n.onreadystatechange=r}catch{}}}function F6e(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zt.clearTimeout(e.A),e.A=null)}at.isActive=function(){return!!this.g};function wd(e){return e.g?e.g.readyState:0}at.da=function(){try{return 2<wd(this)?this.g.status:-1}catch{return-1}};at.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};at.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),CHt(t)}};function Lge(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case D6e:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function PHt(e){const t={};e=(e.g&&2<=wd(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(HC(e[r]))continue;var n=tHt(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}YVt(t,function(r){return r.join(", ")})}at.Ia=function(){return this.m};at.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function B6e(e){let t="";return PJ(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function HJ(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=B6e(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Xr(e,t,n))}function xS(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function j6e(e){this.Ga=0,this.j=[],this.l=new bF,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xS("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xS("baseRetryDelayMs",5e3,e),this.hb=xS("retryDelaySeedMs",1e4,e),this.eb=xS("forwardChannelMaxRetries",2,e),this.xa=xS("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new O6e(e&&e.concurrentRequestLimit),this.Ja=new xHt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}at=j6e.prototype;at.ra=8;at.H=1;function qJ(e){if(z6e(e),e.H==3){var t=e.W++,n=Wp(e.I);if(Xr(n,"SID",e.K),Xr(n,"RID",t),Xr(n,"TYPE","terminate"),jI(e,n),t=new LI(e,e.l,t),t.L=2,t.A=TF(Wp(n)),n=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{n=Zt.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&Zt.Image&&(new Image().src=t.A,n=!0),n||(t.g=K6e(t.l,null),t.g.ha(t.A)),t.G=Date.now(),FI(t)}G6e(e)}function OF(e){e.g&&(GJ(e),e.g.cancel(),e.g=null)}function z6e(e){OF(e),e.u&&(Zt.clearTimeout(e.u),e.u=null),G3(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Zt.clearTimeout(e.m),e.m=null)}function PF(e){if(!P6e(e.i)&&!e.m){e.m=!0;var t=e.Na;WC||l6e(),GC||(WC(),GC=!0),MJ.add(t,e),e.C=0}}function kHt(e,t){return k6e(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=DI(Qo(e.Na,e,t),W6e(e,e.C)),e.C++,!0)}at.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new LI(this,this.l,e);let s=this.s;if(this.U&&(s?(s=t6e(s),n6e(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=U6e(this,i,t),n=Wp(this.I),Xr(n,"RID",e),Xr(n,"CVER",22),this.F&&Xr(n,"X-HTTP-Session-Id",this.F),jI(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(B6e(s)))+"&"+t:this.o&&HJ(n,this.o,s)),UJ(this.i,i),this.bb&&Xr(n,"TYPE","init"),this.P?(Xr(n,"$req",t),Xr(n,"SID","null"),i.aa=!0,yH(i,n,null)):yH(i,n,t),this.H=2}}else this.H==3&&(e?Fge(this,e):this.j.length==0||P6e(this.i)||Fge(this))};function Fge(e,t){var n;t?n=t.m:n=e.W++;const r=Wp(e.I);Xr(r,"SID",e.K),Xr(r,"RID",n),Xr(r,"AID",e.V),jI(e,r),e.o&&e.s&&HJ(r,e.o,e.s),n=new LI(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=U6e(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),UJ(e.i,n),yH(n,r,t)}function jI(e,t){e.na&&PJ(e.na,function(n,r){Xr(t,r,n)}),e.h&&S6e({},function(n,r){Xr(t,r,n)})}function U6e(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Qo(e.h.Va,e.h,e):null;e:{var i=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{SHt(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function V6e(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;WC||l6e(),GC||(WC(),GC=!0),MJ.add(t,e),e.A=0}}function WJ(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=DI(Qo(e.Ma,e),W6e(e,e.A)),e.A++,!0)}at.Ma=function(){if(this.u=null,H6e(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=DI(Qo(this.jb,this),e)}};at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ca(10),OF(this),H6e(this))};function GJ(e){e.B!=null&&(Zt.clearTimeout(e.B),e.B=null)}function H6e(e){e.g=new LI(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Wp(e.wa);Xr(t,"RID","rpc"),Xr(t,"SID",e.K),Xr(t,"AID",e.V),Xr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Xr(t,"TO",e.qa),Xr(t,"TYPE","xmlhttp"),jI(e,t),e.o&&e.s&&HJ(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=TF(Wp(t)),n.u=null,n.S=!0,b6e(n,e)}at.ib=function(){this.v!=null&&(this.v=null,OF(this),WJ(this),Ca(19))};function G3(e){e.v!=null&&(Zt.clearTimeout(e.v),e.v=null)}function q6e(e,t){var n=null;if(e.g==t){G3(e),GJ(e),e.g=null;var r=2}else if(_H(e.i,t))n=t.F,$6e(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=wF(),bo(r,new m6e(r,n)),PF(e)}else V6e(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&kHt(e,t)||r==2&&WJ(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:f1(e,5);break;case 4:f1(e,10);break;case 3:f1(e,6);break;default:f1(e,2)}}}function W6e(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function f1(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Qo(e.pb,e);n||(n=new O1("//www.google.com/images/cleardot.gif"),Zt.location&&Zt.location.protocol=="http"||q3(n,"https"),TF(n)),THt(n.toString(),r)}else Ca(2);e.H=0,e.h&&e.h.za(t),G6e(e),z6e(e)}at.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ca(2)):(this.l.info("Failed to ping google.com"),Ca(1))};function G6e(e){if(e.H=0,e.ma=[],e.h){const t=R6e(e.i);(t.length!=0||e.j.length!=0)&&(Ige(e.ma,t),Ige(e.ma,e.j),e.i.i.length=0,IJ(e.j),e.j.length=0),e.h.ya()}}function Y6e(e,t,n){var r=n instanceof O1?Wp(n):new O1(n);if(r.g!="")t&&(r.g=t+"."+r.g),W3(r,r.m);else{var i=Zt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new O1(null);r&&q3(s,r),t&&(s.g=t),i&&W3(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Xr(r,n,t),Xr(r,"VER",e.ra),jI(e,r),r}function K6e(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Bi(new CF({ob:n})):new Bi(e.va),t.Oa(e.J),t}at.isActive=function(){return!!this.h&&this.h.isActive(this)};function X6e(){}at=X6e.prototype;at.Ba=function(){};at.Aa=function(){};at.za=function(){};at.ya=function(){};at.isActive=function(){return!0};at.Va=function(){};function Y3(){if(Yw&&!(10<=Number(HVt)))throw Error("Environmental error: no available transport.")}Y3.prototype.g=function(e,t){return new pl(e,t)};function pl(e,t){Ks.call(this),this.g=new j6e(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!HC(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!HC(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new cx(this)}Zs(pl,Ks);pl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ca(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Y6e(e,null,e.Y),PF(e)};pl.prototype.close=function(){qJ(this.g)};pl.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=DJ(e),e=n);t.j.push(new bHt(t.fb++,e)),t.H==3&&PF(t)};pl.prototype.N=function(){this.g.h=null,delete this.j,qJ(this.g),delete this.g,pl.$.N.call(this)};function Q6e(e){jJ.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Zs(Q6e,jJ);function J6e(){zJ.call(this),this.status=1}Zs(J6e,zJ);function cx(e){this.g=e}Zs(cx,X6e);cx.prototype.Ba=function(){bo(this.g,"a")};cx.prototype.Aa=function(e){bo(this.g,new Q6e(e))};cx.prototype.za=function(e){bo(this.g,new J6e)};cx.prototype.ya=function(){bo(this.g,"b")};function $Ht(){this.blockSize=-1}function mf(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Zs(mf,$Ht);mf.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function kj(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}mf.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)kj(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){kj(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){kj(this,r),i=0;break}}this.h=i,this.i+=t};mf.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function wr(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var RHt={};function YJ(e){return-128<=e&&128>e?zVt(e,function(t){return new wr([t|0],0>t?-1:0)}):new wr([e|0],0>e?-1:0)}function Ed(e){if(isNaN(e)||!isFinite(e))return Jb;if(0>e)return po(Ed(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=bH;return new wr(t,0)}function Z6e(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return po(Z6e(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ed(Math.pow(t,8)),r=Jb,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=Ed(Math.pow(t,s)),r=r.R(s).add(Ed(o))):(r=r.R(n),r=r.add(Ed(o)))}return r}var bH=4294967296,Jb=YJ(0),wH=YJ(1),Bge=YJ(16777216);at=wr.prototype;at.ea=function(){if(Hl(this))return-po(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:bH+r)*t,t*=bH}return e};at.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(lp(this))return"0";if(Hl(this))return"-"+po(this).toString(e);for(var t=Ed(Math.pow(e,6)),n=this,r="";;){var i=X3(n,t).g;n=K3(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,lp(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};at.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function lp(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Hl(e){return e.h==-1}at.X=function(e){return e=K3(this,e),Hl(e)?-1:lp(e)?0:1};function po(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wr(n,~e.h).add(wH)}at.abs=function(){return Hl(this)?po(this):this};at.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new wr(n,n[n.length-1]&-2147483648?-1:0)};function K3(e,t){return e.add(po(t))}at.R=function(e){if(lp(this)||lp(e))return Jb;if(Hl(this))return Hl(e)?po(this).R(po(e)):po(po(this).R(e));if(Hl(e))return po(this.R(po(e)));if(0>this.X(Bge)&&0>e.X(Bge))return Ed(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,u=e.D(i)&65535;n[2*r+2*i]+=o*u,KP(n,2*r+2*i),n[2*r+2*i+1]+=s*u,KP(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,KP(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,KP(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wr(n,0)};function KP(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function SS(e,t){this.g=e,this.h=t}function X3(e,t){if(lp(t))throw Error("division by zero");if(lp(e))return new SS(Jb,Jb);if(Hl(e))return t=X3(po(e),t),new SS(po(t.g),po(t.h));if(Hl(t))return t=X3(e,po(t)),new SS(po(t.g),t.h);if(30<e.g.length){if(Hl(e)||Hl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=wH,r=t;0>=r.X(e);)n=jge(n),r=jge(r);var i=C_(n,1),s=C_(r,1);for(r=C_(r,2),n=C_(n,2);!lp(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=C_(r,1),n=C_(n,1)}return t=K3(e,i.R(t)),new SS(i,t)}for(i=Jb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ed(n),o=s.R(t);Hl(o)||0<o.X(e);)n-=r,s=Ed(n),o=s.R(t);lp(s)&&(s=wH),i=i.add(s),e=K3(e,o)}return new SS(i,e)}at.gb=function(e){return X3(this,e).h};at.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wr(n,this.h&e.h)};at.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wr(n,this.h|e.h)};at.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wr(n,this.h^e.h)};function jge(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wr(n,e.h)}function C_(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new wr(i,e.h)}Y3.prototype.createWebChannel=Y3.prototype.g;pl.prototype.send=pl.prototype.u;pl.prototype.open=pl.prototype.m;pl.prototype.close=pl.prototype.close;EF.NO_ERROR=0;EF.TIMEOUT=8;EF.HTTP_ERROR=6;g6e.COMPLETE="complete";y6e.EventType=MI;MI.OPEN="a";MI.CLOSE="b";MI.ERROR="c";MI.MESSAGE="d";Ks.prototype.listen=Ks.prototype.O;Bi.prototype.listenOnce=Bi.prototype.P;Bi.prototype.getLastError=Bi.prototype.Sa;Bi.prototype.getLastErrorCode=Bi.prototype.Ia;Bi.prototype.getStatus=Bi.prototype.da;Bi.prototype.getResponseJson=Bi.prototype.Wa;Bi.prototype.getResponseText=Bi.prototype.ja;Bi.prototype.send=Bi.prototype.ha;Bi.prototype.setWithCredentials=Bi.prototype.Oa;mf.prototype.digest=mf.prototype.l;mf.prototype.reset=mf.prototype.reset;mf.prototype.update=mf.prototype.j;wr.prototype.add=wr.prototype.add;wr.prototype.multiply=wr.prototype.R;wr.prototype.modulo=wr.prototype.gb;wr.prototype.compare=wr.prototype.X;wr.prototype.toNumber=wr.prototype.ea;wr.prototype.toString=wr.prototype.toString;wr.prototype.getBits=wr.prototype.D;wr.fromNumber=Ed;wr.fromString=Z6e;var NHt=function(){return new Y3},DHt=function(){return wF()},$j=EF,MHt=g6e,LHt=Gv,zge={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XP=y6e,FHt=Bi,BHt=mf,Zb=wr;const Uge="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Za.UNAUTHENTICATED=new Za(null),Za.GOOGLE_CREDENTIALS=new Za("google-credentials-uid"),Za.FIRST_PARTY=new Za("first-party-uid"),Za.MOCK_USER=new Za("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fx="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new cF("@firebase/firestore");function TS(){return iv.logLevel}function Tt(e,...t){if(iv.logLevel<=Fn.DEBUG){const n=t.map(KJ);iv.debug(`Firestore (${fx}): ${e}`,...n)}}function Gp(e,...t){if(iv.logLevel<=Fn.ERROR){const n=t.map(KJ);iv.error(`Firestore (${fx}): ${e}`,...n)}}function JC(e,...t){if(iv.logLevel<=Fn.WARN){const n=t.map(KJ);iv.warn(`Firestore (${fx}): ${e}`,...n)}}function KJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e="Unexpected state"){const t=`FIRESTORE (${fx}) INTERNAL ASSERTION FAILED: `+e;throw Gp(t),new Error(t)}function Vr(e,t){e||Yt()}function an(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends ph{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jHt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zHt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Za.UNAUTHENTICATED))}shutdown(){}}class UHt{constructor(t){this.t=t,this.currentUser=Za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new wp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vr(typeof r.accessToken=="string"),new jHt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Vr(t===null||typeof t=="string"),new Za(t)}}class VHt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Za.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HHt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new VHt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Za.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qHt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WHt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Tt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Vr(typeof n.token=="string"),this.R=n.token,new qHt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GHt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=GHt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function cr(e,t){return e<t?-1:e>t?1:0}function Kw(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ht($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ht($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ht($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ss.fromMillis(Date.now())}static fromDate(t){return Ss.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ss(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?cr(this.nanoseconds,t.nanoseconds):cr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.timestamp=t}static fromTimestamp(t){return new en(t)}static min(){return new en(new Ss(0,0))}static max(){return new en(new Ss(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,n,r){n===void 0?n=0:n>t.length&&Yt(),r===void 0?r=t.length-n:r>t.length-n&&Yt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ZC.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ZC?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Qr extends ZC{construct(t,n,r){return new Qr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ht($e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Qr(n)}static emptyPath(){return new Qr([])}}const YHt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mo extends ZC{construct(t,n,r){return new mo(t,n,r)}static isValidIdentifier(t){return YHt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ht($e.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new ht($e.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ht($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ht($e.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mo(n)}static emptyPath(){return new mo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.path=t}static fromPath(t){return new Mt(Qr.fromString(t))}static fromName(t){return new Mt(Qr.fromString(t).popFirst(5))}static empty(){return new Mt(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Qr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Mt(new Qr(t.slice()))}}function KHt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=en.fromTimestamp(r===1e9?new Ss(n+1,0):new Ss(n,r));return new h0(i,Mt.empty(),t)}function XHt(e){return new h0(e.readTime,e.key,-1)}class h0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new h0(en.min(),Mt.empty(),-1)}static max(){return new h0(en.max(),Mt.empty(),-1)}}function QHt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Mt.comparator(e.documentKey,t.documentKey),n!==0?n:cr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JHt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZHt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(e){if(e.code!==$e.FAILED_PRECONDITION||e.message!==JHt)throw e;Tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Le?n:Le.resolve(n)}catch(n){return Le.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Le.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Le.reject(n)}static resolve(t){return new Le((n,r)=>{n(t)})}static reject(t){return new Le((n,r)=>{r(t)})}static waitFor(t){return new Le((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Le.resolve(!1);for(const r of t)n=n.next(i=>i?Le.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Le((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Le((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function UI(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}XJ._e=-1;function kF(e){return e==null}function Q3(e){return e===0&&1/e==-1/0}function eqt(e){return typeof e=="number"&&Number.isInteger(e)&&!Q3(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vge(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dx(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function t4e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,n){this.comparator=t,this.root=n||lo.EMPTY}insert(t,n){return new Si(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,lo.BLACK,null,null))}remove(t){return new Si(this.comparator,this.root.remove(t,this.comparator).copy(null,null,lo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new QP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new QP(this.root,t,this.comparator,!1)}getReverseIterator(){return new QP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new QP(this.root,t,this.comparator,!0)}}class QP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class lo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??lo.RED,this.left=i??lo.EMPTY,this.right=s??lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new lo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return lo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const t=this.left.check();if(t!==this.right.check())throw Yt();return t+(this.isRed()?0:1)}}lo.EMPTY=null,lo.RED=!0,lo.BLACK=!1;lo.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(t,n,r,i,s){return this}insert(t,n,r){return new lo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t){this.comparator=t,this.data=new Si(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hge(this.data.getIterator())}getIteratorFrom(t){return new Hge(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof wo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new wo(this.comparator);return n.data=t,n}}class Hge{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this.fields=t,t.sort(mo.comparator)}static empty(){return new Qc([])}unionWith(t){let n=new wo(mo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Qc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Kw(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n4e("Invalid base64 string: "+s):s}}(t);return new aa(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new aa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return cr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}aa.EMPTY_BYTE_STRING=new aa("");const tqt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function p0(e){if(Vr(!!e),typeof e=="string"){let t=0;const n=tqt.exec(e);if(Vr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ts(e.seconds),nanos:ts(e.nanos)}}function ts(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function sv(e){return typeof e=="string"?aa.fromBase64String(e):aa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function JJ(e){const t=e.mapValue.fields.__previous_value__;return QJ(t)?JJ(t):t}function eA(e){const t=p0(e.mapValue.fields.__local_write_time__.timestampValue);return new Ss(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nqt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class tA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new tA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof tA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ov(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?QJ(e)?4:rqt(e)?9007199254740991:10:Yt()}function Zd(e,t){if(e===t)return!0;const n=ov(e);if(n!==ov(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return eA(e).isEqual(eA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=p0(i.timestampValue),a=p0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return sv(i.bytesValue).isEqual(sv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ts(i.geoPointValue.latitude)===ts(s.geoPointValue.latitude)&&ts(i.geoPointValue.longitude)===ts(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ts(i.integerValue)===ts(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ts(i.doubleValue),a=ts(s.doubleValue);return o===a?Q3(o)===Q3(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Kw(e.arrayValue.values||[],t.arrayValue.values||[],Zd);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Vge(o)!==Vge(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Zd(o[u],a[u])))return!1;return!0}(e,t);default:return Yt()}}function nA(e,t){return(e.values||[]).find(n=>Zd(n,t))!==void 0}function Xw(e,t){if(e===t)return 0;const n=ov(e),r=ov(t);if(n!==r)return cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ts(s.integerValue||s.doubleValue),u=ts(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return qge(e.timestampValue,t.timestampValue);case 4:return qge(eA(e),eA(t));case 5:return cr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=sv(s),u=sv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=cr(a[l],u[l]);if(c!==0)return c}return cr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=cr(ts(s.latitude),ts(o.latitude));return a!==0?a:cr(ts(s.longitude),ts(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Xw(a[l],u[l]);if(c)return c}return cr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===JP.mapValue&&o===JP.mapValue)return 0;if(s===JP.mapValue)return 1;if(o===JP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=cr(u[f],c[f]);if(d!==0)return d;const h=Xw(a[u[f]],l[c[f]]);if(h!==0)return h}return cr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Yt()}}function qge(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return cr(e,t);const n=p0(e),r=p0(t),i=cr(n.seconds,r.seconds);return i!==0?i:cr(n.nanos,r.nanos)}function Qw(e){return EH(e)}function EH(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=p0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return sv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Mt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=EH(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${EH(n.fields[o])}`;return i+"}"}(e.mapValue):Yt()}function Wge(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function xH(e){return!!e&&"integerValue"in e}function ZJ(e){return!!e&&"arrayValue"in e}function Gge(e){return!!e&&"nullValue"in e}function Yge(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function k$(e){return!!e&&"mapValue"in e}function E2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dx(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=E2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=E2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rqt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t){this.value=t}static empty(){return new ql({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!k$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=E2(n)}setAll(t){let n=mo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=E2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());k$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Zd(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];k$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){dx(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new ql(E2(this.value))}}function r4e(e){const t=[];return dx(e.fields,(n,r)=>{const i=new mo([n]);if(k$(r)){const s=r4e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Qc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new qo(t,0,en.min(),en.min(),en.min(),ql.empty(),0)}static newFoundDocument(t,n,r,i){return new qo(t,1,n,en.min(),r,i,0)}static newNoDocument(t,n){return new qo(t,2,n,en.min(),en.min(),ql.empty(),0)}static newUnknownDocument(t,n){return new qo(t,3,n,en.min(),en.min(),ql.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ql.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ql.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J3=class{constructor(t,n){this.position=t,this.inclusive=n}};function Kge(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Mt.comparator(Mt.fromName(o.referenceValue),n.key):r=Xw(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xge(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zd(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n="asc"){this.field=t,this.dir=n}}function iqt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i4e=class{};class ss extends i4e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new oqt(t,n,r):n==="array-contains"?new lqt(t,r):n==="in"?new cqt(t,r):n==="not-in"?new fqt(t,r):n==="array-contains-any"?new dqt(t,r):new ss(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new aqt(t,r):new uqt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xw(n,this.value)):n!==null&&ov(this.value)===ov(n)&&this.matchesComparison(Xw(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gf extends i4e{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new gf(t,n)}matches(t){return s4e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function s4e(e){return e.op==="and"}function o4e(e){return sqt(e)&&s4e(e)}function sqt(e){for(const t of e.filters)if(t instanceof gf)return!1;return!0}function SH(e){if(e instanceof ss)return e.field.canonicalString()+e.op.toString()+Qw(e.value);if(o4e(e))return e.filters.map(t=>SH(t)).join(",");{const t=e.filters.map(n=>SH(n)).join(",");return`${e.op}(${t})`}}function a4e(e,t){return e instanceof ss?function(r,i){return i instanceof ss&&r.op===i.op&&r.field.isEqual(i.field)&&Zd(r.value,i.value)}(e,t):e instanceof gf?function(r,i){return i instanceof gf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&a4e(o,i.filters[a]),!0):!1}(e,t):void Yt()}function u4e(e){return e instanceof ss?function(n){return`${n.field.canonicalString()} ${n.op} ${Qw(n.value)}`}(e):e instanceof gf?function(n){return n.op.toString()+" {"+n.getFilters().map(u4e).join(" ,")+"}"}(e):"Filter"}class oqt extends ss{constructor(t,n,r){super(t,n,r),this.key=Mt.fromName(r.referenceValue)}matches(t){const n=Mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class aqt extends ss{constructor(t,n){super(t,"in",n),this.keys=l4e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class uqt extends ss{constructor(t,n){super(t,"not-in",n),this.keys=l4e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function l4e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class lqt extends ss{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ZJ(n)&&nA(n.arrayValue,this.value)}}class cqt extends ss{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&nA(this.value.arrayValue,n)}}class fqt extends ss{constructor(t,n){super(t,"not-in",n)}matches(t){if(nA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!nA(this.value.arrayValue,n)}}class dqt extends ss{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ZJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hqt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Qge(e,t=null,n=[],r=[],i=null,s=null,o=null){return new hqt(e,t,n,r,i,s,o)}function eZ(e){const t=an(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>SH(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kF(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Qw(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Qw(r)).join(",")),t.ce=n}return t.ce}function tZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!iqt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!a4e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xge(e.startAt,t.startAt)&&Xge(e.endAt,t.endAt)}function TH(e){return Mt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function pqt(e,t,n,r,i,s,o,a){return new hx(e,t,n,r,i,s,o,a)}function nZ(e){return new hx(e)}function Jge(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function c4e(e){return e.collectionGroup!==null}function x2(e){const t=an(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wo(mo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new rA(s,r))}),n.has(mo.keyField().canonicalString())||t.le.push(new rA(mo.keyField(),r))}return t.le}function Md(e){const t=an(e);return t.he||(t.he=mqt(t,x2(e))),t.he}function mqt(e,t){if(e.limitType==="F")return Qge(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new rA(i.field,s)});const n=e.endAt?new J3(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new J3(e.startAt.position,e.startAt.inclusive):null;return Qge(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function CH(e,t){const n=e.filters.concat([t]);return new hx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function AH(e,t,n){return new hx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $F(e,t){return tZ(Md(e),Md(t))&&e.limitType===t.limitType}function f4e(e){return`${eZ(Md(e))}|lt:${e.limitType}`}function G_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>u4e(i)).join(", ")}]`),kF(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qw(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qw(i)).join(",")),`Target(${r})`}(Md(e))}; limitType=${e.limitType})`}function RF(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Mt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of x2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Kge(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,x2(r),i)||r.endAt&&!function(o,a,u){const l=Kge(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,x2(r),i))}(e,t)}function gqt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function d4e(e){return(t,n)=>{let r=!1;for(const i of x2(e)){const s=yqt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function yqt(e,t,n){const r=e.field.isKeyField()?Mt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Xw(u,l):Yt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){dx(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return t4e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vqt=new Si(Mt.comparator);function Yp(){return vqt}const h4e=new Si(Mt.comparator);function mT(...e){let t=h4e;for(const n of e)t=t.insert(n.key,n);return t}function p4e(e){let t=h4e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function d1(){return S2()}function m4e(){return S2()}function S2(){return new px(e=>e.toString(),(e,t)=>e.isEqual(t))}const _qt=new Si(Mt.comparator),bqt=new wo(Mt.comparator);function On(...e){let t=bqt;for(const n of e)t=t.add(n);return t}const wqt=new wo(cr);function Eqt(){return wqt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q3(t)?"-0":t}}function y4e(e){return{integerValue:""+e}}function xqt(e,t){return eqt(t)?y4e(t):g4e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this._=void 0}}function Sqt(e,t,n){return e instanceof iA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&QJ(s)&&(s=JJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof sA?_4e(e,t):e instanceof oA?b4e(e,t):function(i,s){const o=v4e(i,s),a=Zge(o)+Zge(i.Ie);return xH(o)&&xH(i.Ie)?y4e(a):g4e(i.serializer,a)}(e,t)}function Tqt(e,t,n){return e instanceof sA?_4e(e,t):e instanceof oA?b4e(e,t):n}function v4e(e,t){return e instanceof Z3?function(r){return xH(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class iA extends NF{}class sA extends NF{constructor(t){super(),this.elements=t}}function _4e(e,t){const n=w4e(t);for(const r of e.elements)n.some(i=>Zd(i,r))||n.push(r);return{arrayValue:{values:n}}}class oA extends NF{constructor(t){super(),this.elements=t}}function b4e(e,t){let n=w4e(t);for(const r of e.elements)n=n.filter(i=>!Zd(i,r));return{arrayValue:{values:n}}}class Z3 extends NF{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Zge(e){return ts(e.integerValue||e.doubleValue)}function w4e(e){return ZJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cqt{constructor(t,n){this.field=t,this.transform=n}}function Aqt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof sA&&i instanceof sA||r instanceof oA&&i instanceof oA?Kw(r.elements,i.elements,Zd):r instanceof Z3&&i instanceof Z3?Zd(r.Ie,i.Ie):r instanceof iA&&i instanceof iA}(e.transform,t.transform)}class Iqt{constructor(t,n){this.version=t,this.transformResults=n}}class Ep{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ep}static exists(t){return new Ep(void 0,t)}static updateTime(t){return new Ep(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class DF{}function E4e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new S4e(e.key,Ep.none()):new VI(e.key,e.data,Ep.none());{const n=e.data,r=ql.empty();let i=new wo(mo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yv(e.key,r,new Qc(i.toArray()),Ep.none())}}function Oqt(e,t,n){e instanceof VI?function(i,s,o){const a=i.value.clone(),u=t0e(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Yv?function(i,s,o){if(!$$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=t0e(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(x4e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function T2(e,t,n,r){return e instanceof VI?function(s,o,a,u){if(!$$(s.precondition,o))return a;const l=s.value.clone(),c=n0e(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yv?function(s,o,a,u){if(!$$(s.precondition,o))return a;const l=n0e(s.fieldTransforms,u,o),c=o.data;return c.setAll(x4e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return $$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Pqt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=v4e(r.transform,i||null);s!=null&&(n===null&&(n=ql.empty()),n.set(r.field,s))}return n||null}function e0e(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Kw(r,i,(s,o)=>Aqt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class VI extends DF{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yv extends DF{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function x4e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function t0e(e,t,n){const r=new Map;Vr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Tqt(o,a,n[i]))}return r}function n0e(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Sqt(s,o,t))}return r}class S4e extends DF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kqt extends DF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $qt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Oqt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=T2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=T2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=m4e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=E4e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(en.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),On())}isEqual(t){return this.batchId===t.batchId&&Kw(this.mutations,t.mutations,(n,r)=>e0e(n,r))&&Kw(this.baseMutations,t.baseMutations,(n,r)=>e0e(n,r))}}class rZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Vr(t.mutations.length===r.length);let i=function(){return _qt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rqt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nqt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ji,qn;function Dqt(e){switch(e){default:return Yt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function T4e(e){if(e===void 0)return Gp("GRPC error has no .code"),$e.UNKNOWN;switch(e){case Ji.OK:return $e.OK;case Ji.CANCELLED:return $e.CANCELLED;case Ji.UNKNOWN:return $e.UNKNOWN;case Ji.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Ji.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Ji.INTERNAL:return $e.INTERNAL;case Ji.UNAVAILABLE:return $e.UNAVAILABLE;case Ji.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Ji.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Ji.NOT_FOUND:return $e.NOT_FOUND;case Ji.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Ji.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Ji.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Ji.ABORTED:return $e.ABORTED;case Ji.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Ji.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Ji.DATA_LOSS:return $e.DATA_LOSS;default:return Yt()}}(qn=Ji||(Ji={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mqt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lqt=new Zb([4294967295,4294967295],0);function r0e(e){const t=Mqt().encode(e),n=new BHt;return n.update(t),new Uint8Array(n.digest())}function i0e(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Zb([n,r],0),new Zb([i,s],0)]}class iZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gT(`Invalid padding: ${n}`);if(r<0)throw new gT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new gT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new gT(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Zb.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Zb.fromNumber(r)));return i.compare(Lqt)===1&&(i=new Zb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=r0e(t),[r,i]=i0e(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new iZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=r0e(t),[r,i]=i0e(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class gT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,HI.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new MF(en.min(),i,new Si(cr),Yp(),On())}}class HI{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new HI(r,n,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class C4e{constructor(t,n){this.targetId=t,this.fe=n}}class A4e{constructor(t,n,r=aa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class s0e{constructor(){this.ge=0,this.pe=a0e(),this.ye=aa.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=On(),n=On(),r=On();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Yt()}}),new HI(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=a0e()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Vr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Fqt{constructor(t){this.Le=t,this.ke=new Map,this.qe=Yp(),this.Qe=o0e(),this.Ke=new Si(cr)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Yt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const s=i.target;if(TH(s))if(r===0){const o=new Mt(s.path);this.We(n,o,qo.newNoDocument(o,en.min()))}else Vr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=sv(r).toUint8Array()}catch(u){if(u instanceof n4e)return JC("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new iZ(o,i,s)}catch(u){return JC(u instanceof gT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&TH(a.target)){const u=new Mt(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,qo.newNoDocument(u,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=On();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const i=new MF(t,n,this.Ke,this.qe,r);return this.qe=Yp(),this.Qe=o0e(),this.Ke=new Si(cr),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new s0e,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new wo(cr),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Tt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new s0e),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function o0e(){return new Si(Mt.comparator)}function a0e(){return new Si(Mt.comparator)}const Bqt={asc:"ASCENDING",desc:"DESCENDING"},jqt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zqt={and:"AND",or:"OR"};class Uqt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function IH(e,t){return e.useProto3Json||kF(t)?t:{value:t}}function eM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function I4e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Vqt(e,t){return eM(e,t.toTimestamp())}function Ld(e){return Vr(!!e),en.fromTimestamp(function(n){const r=p0(n);return new Ss(r.seconds,r.nanos)}(e))}function sZ(e,t){return function(r){return new Qr(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function O4e(e){const t=Qr.fromString(e);return Vr(R4e(t)),t}function OH(e,t){return sZ(e.databaseId,t.path)}function Rj(e,t){const n=O4e(t);if(n.get(1)!==e.databaseId.projectId)throw new ht($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ht($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Mt(P4e(n))}function PH(e,t){return sZ(e.databaseId,t)}function Hqt(e){const t=O4e(e);return t.length===4?Qr.emptyPath():P4e(t)}function kH(e){return new Qr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function P4e(e){return Vr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function u0e(e,t,n){return{name:OH(e,t),fields:n.value.mapValue.fields}}function qqt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Vr(c===void 0||typeof c=="string"),aa.fromBase64String(c||"")):(Vr(c===void 0||c instanceof Uint8Array),aa.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?$e.UNKNOWN:T4e(l.code);return new ht(c,l.message||"")}(o);n=new A4e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rj(e,r.document.name),s=Ld(r.document.updateTime),o=r.document.createTime?Ld(r.document.createTime):en.min(),a=new ql({mapValue:{fields:r.document.fields}}),u=qo.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new R$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Rj(e,r.document),s=r.readTime?Ld(r.readTime):en.min(),o=qo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new R$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Rj(e,r.document),s=r.removedTargetIds||[];n=new R$([],s,i,null)}else{if(!("filter"in t))return Yt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Nqt(i,s),a=r.targetId;n=new C4e(a,o)}}return n}function Wqt(e,t){let n;if(t instanceof VI)n={update:u0e(e,t.key,t.value)};else if(t instanceof S4e)n={delete:OH(e,t.key)};else if(t instanceof Yv)n={update:u0e(e,t.key,t.data),updateMask:tWt(t.fieldMask)};else{if(!(t instanceof kqt))return Yt();n={verify:OH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof iA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Z3)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Yt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Vqt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Yt()}(e,t.precondition)),n}function Gqt(e,t){return e&&e.length>0?(Vr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Ld(i.updateTime):Ld(s);return o.isEqual(en.min())&&(o=Ld(s)),new Iqt(o,i.transformResults||[])}(n,t))):[]}function Yqt(e,t){return{documents:[PH(e,t.path)]}}function Kqt(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=PH(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=PH(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return $4e(gf.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:Y_(f.field),direction:Jqt(f.dir)}}(l))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=IH(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),n}function Xqt(e){let t=Hqt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=k4e(f);return d instanceof gf&&o4e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new rA(K_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,kF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new J3(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new J3(h,d)}(n.endAt)),pqt(t,i,o,s,a,"F",u,l)}function Qqt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function k4e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=K_(n.unaryFilter.field);return ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=K_(n.unaryFilter.field);return ss.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=K_(n.unaryFilter.field);return ss.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=K_(n.unaryFilter.field);return ss.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(e):e.fieldFilter!==void 0?function(n){return ss.create(K_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gf.create(n.compositeFilter.filters.map(r=>k4e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(e):Yt()}function Jqt(e){return Bqt[e]}function Zqt(e){return jqt[e]}function eWt(e){return zqt[e]}function Y_(e){return{fieldPath:e.canonicalString()}}function K_(e){return mo.fromServerFormat(e.fieldPath)}function $4e(e){return e instanceof ss?function(n){if(n.op==="=="){if(Yge(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NAN"}};if(Gge(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yge(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NOT_NAN"}};if(Gge(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Y_(n.field),op:Zqt(n.op),value:n.value}}}(e):e instanceof gf?function(n){const r=n.getFilters().map(i=>$4e(i));return r.length===1?r[0]:{compositeFilter:{op:eWt(n.op),filters:r}}}(e):Yt()}function tWt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function R4e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,r,i,s=en.min(),o=en.min(),a=aa.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new lg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new lg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new lg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new lg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nWt{constructor(t){this.ut=t}}function rWt(e){const t=Xqt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?AH(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iWt{constructor(){this.on=new sWt}addToCollectionParentIndex(t,n){return this.on.add(n),Le.resolve()}getCollectionParents(t,n){return Le.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return Le.resolve()}deleteFieldIndex(t,n){return Le.resolve()}deleteAllFieldIndexes(t){return Le.resolve()}createTargetIndexes(t,n){return Le.resolve()}getDocumentsMatchingTarget(t,n){return Le.resolve(null)}getIndexType(t,n){return Le.resolve(0)}getFieldIndexes(t,n){return Le.resolve([])}getNextCollectionGroupToUpdate(t){return Le.resolve(null)}getMinOffset(t,n){return Le.resolve(h0.min())}getMinOffsetFromCollectionGroup(t,n){return Le.resolve(h0.min())}updateCollectionGroup(t,n,r){return Le.resolve()}updateIndexEntries(t,n){return Le.resolve()}}class sWt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new wo(Qr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new wo(Qr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Jw(0)}static Nn(){return new Jw(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oWt{constructor(){this.changes=new px(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,qo.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Le.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aWt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uWt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&T2(r.mutation,i,Qc.empty(),Ss.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,On()).next(()=>r))}getLocalViewOfDocuments(t,n,r=On()){const i=d1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=mT();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=d1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,On()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Yp();const o=S2(),a=function(){return S2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Yv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),T2(c.mutation,l,c.mutation.getFieldMask(),Ss.now())):o.set(l.key,Qc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new aWt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=S2();let i=new Si((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Qc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||On()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=m4e();c.forEach(d=>{if(!s.has(d)){const h=E4e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):c4e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Le.resolve(d1());let a=-1,u=s;return o.next(l=>Le.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Le.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,On())).next(c=>({batchId:a,changes:p4e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Mt(n)).next(r=>{let i=mT();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=mT();return this.indexManager.getCollectionParents(t,s).next(a=>Le.forEach(a,u=>{const l=function(f,d){return new hx(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,qo.newInvalidDocument(c)))});let a=mT();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&T2(c.mutation,l,Qc.empty(),Ss.now()),RF(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lWt{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return Le.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ld(i.createTime)}}(n)),Le.resolve()}getNamedQuery(t,n){return Le.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(i){return{name:i.name,query:rWt(i.bundledQuery),readTime:Ld(i.readTime)}}(n)),Le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cWt{constructor(){this.overlays=new Si(Mt.comparator),this.lr=new Map}getOverlay(t,n){return Le.resolve(this.overlays.get(n))}getOverlays(t,n){const r=d1();return Le.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.lt(t,n,s)}),Le.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),Le.resolve()}getOverlaysForCollection(t,n,r){const i=d1(),s=n.length+1,o=new Mt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Le.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Si((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=d1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=d1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Le.resolve(a)}lt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rqt(n,r));let s=this.lr.get(n);s===void 0&&(s=On(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(){this.hr=new wo(Ms.Pr),this.Ir=new wo(Ms.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Ms(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Ms(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new Mt(new Qr([])),r=new Ms(n,t),i=new Ms(n,t+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new Mt(new Qr([])),r=new Ms(n,t),i=new Ms(n,t+1);let s=On();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ms(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ms{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return Mt.comparator(t.key,n.key)||cr(t.gr,n.gr)}static Tr(t,n){return cr(t.gr,n.gr)||Mt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fWt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new wo(Ms.Pr)}checkEmpty(t){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $qt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Ms(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Le.resolve(o)}lookupMutationBatch(t,n){return Le.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ms(n,0),i=new Ms(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new wo(cr);return n.forEach(i=>{const s=new Ms(i,0),o=new Ms(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),Le.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Mt.isDocumentKey(s)||(s=s.child(""));const o=new Ms(new Mt(s),0);let a=new wo(cr);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),Le.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Vr(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return Le.forEach(n.mutations,i=>{const s=new Ms(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Ms(n,0),i=this.yr.firstAfterOrEqual(r);return Le.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Le.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dWt{constructor(t){this.Cr=t,this.docs=function(){return new Si(Mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Le.resolve(r?r.document.mutableCopy():qo.newInvalidDocument(n))}getEntries(t,n){let r=Yp();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qo.newInvalidDocument(i))}),Le.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Yp();const o=n.path,a=new Mt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||QHt(XHt(c),r)<=0||(i.has(c.key)||RF(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Yt()}vr(t,n){return Le.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new hWt(this)}getSize(t){return Le.resolve(this.size)}}class hWt extends oWt{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(t,i)):this._r.removeEntry(r)}),Le.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pWt{constructor(t){this.persistence=t,this.Fr=new px(n=>eZ(n),tZ),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Mr=0,this.Or=new oZ,this.targetCount=0,this.Nr=Jw.On()}forEachTarget(t,n){return this.Fr.forEach((r,i)=>n(i)),Le.resolve()}getLastRemoteSnapshotVersion(t){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Le.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),Le.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new Jw(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,Le.resolve()}updateTargetData(t,n){return this.kn(n),Le.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Le.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Le.waitFor(s).next(()=>i)}getTargetCount(t){return Le.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return Le.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),Le.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Le.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),Le.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return Le.resolve(r)}containsKey(t,n){return Le.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mWt{constructor(t,n){this.Br={},this.overlays={},this.Lr=new XJ(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new pWt(this),this.indexManager=new iWt,this.remoteDocumentCache=function(i){return new dWt(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new nWt(n),this.Kr=new lWt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new cWt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new fWt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){Tt("MemoryPersistence","Starting transaction:",t);const i=new gWt(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(t,n){return Le.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class gWt extends ZHt{constructor(t){super(),this.currentSequenceNumber=t}}class aZ{constructor(t){this.persistence=t,this.Gr=new oZ,this.zr=null}static jr(t){return new aZ(t)}get Hr(){if(this.zr)return this.zr;throw Yt()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),Le.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),Le.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.Hr,r=>{const i=Mt.fromPath(r);return this.Jr(t,i).next(s=>{s||n.removeEntry(i,en.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return Le.or([()=>Le.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}static Qi(t,n){let r=On(),i=On();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yWt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vWt{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yWt;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,r,i){return r.documentReadCount<this.Ui?(TS()<=Fn.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",G_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Le.resolve()):(TS()<=Fn.DEBUG&&Tt("QueryEngine","Query:",G_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(TS()<=Fn.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",G_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Md(n))):Le.resolve())}zi(t,n){if(Jge(n))return Le.resolve(null);let r=Md(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=AH(n,null,"F"),r=Md(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=On(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(t,AH(n,null,"F")):this.Xi(t,l,n,u)}))})))}ji(t,n,r,i){return Jge(n)||i.isEqual(en.min())?Le.resolve(null):this.Gi.getDocuments(t,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?Le.resolve(null):(TS()<=Fn.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),G_(n)),this.Xi(t,o,n,KHt(i,-1)).next(a=>a))})}Yi(t,n){let r=new wo(d4e(t));return n.forEach((i,s)=>{RF(t,s)&&(r=r.add(s))}),r}Zi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(t,n,r){return TS()<=Fn.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",G_(n)),this.Gi.getDocumentsMatchingQuery(t,n,h0.min(),r)}Xi(t,n,r,i){return this.Gi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Wt{constructor(t,n,r,i){this.persistence=t,this.es=n,this.serializer=i,this.ts=new Si(cr),this.ns=new px(s=>eZ(s),tZ),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new uWt(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function bWt(e,t,n,r){return new _Wt(e,t,n,r)}async function N4e(e,t){const n=an(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=On();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}function wWt(e,t){const n=an(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Le.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Vr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=On();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function D4e(e){const t=an(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function EWt(e,t){const n=an(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(aa.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.qr.updateTargetData(s,h))});let u=Yp(),l=On();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(xWt(s,o,t.documentUpdates).next(c=>{u=c.us,l=c.cs})),!r.isEqual(en.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(f=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Le.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}function xWt(e,t,n){let r=On(),i=On();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Yp();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(en.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Tt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function SWt(e,t){const n=an(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function TWt(e,t){const n=an(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,t).next(s=>s?(i=s,Le.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new lg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function $H(e,t,n){const r=an(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!UI(o))throw o;Tt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function l0e(e,t,n){const r=an(e);let i=en.min(),s=On();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=an(u),d=f.ns.get(c);return d!==void 0?Le.resolve(f.ts.get(d)):f.qr.getTargetData(l,c)}(r,o,Md(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?i:en.min(),n?s:On())).next(a=>(CWt(r,gqt(t),a),{documents:a,ls:s})))}function CWt(e,t,n){let r=e.rs.get(t)||en.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.rs.set(t,r)}class c0e{constructor(){this.activeTargetIds=Eqt()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class AWt{constructor(){this.eo=new c0e,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new c0e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IWt{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0e{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZP=null;function Nj(){return ZP===null?ZP=function(){return 268435456+Math.round(2147483648*Math.random())}():ZP++,"0x"+ZP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OWt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PWt{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="WebChannelConnection";class kWt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=Nj(),u=this.So(n,r);Tt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(c=>(Tt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw JC("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fx}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=OWt[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,i){const s=Nj();return new Promise((o,a)=>{const u=new FHt;u.setWithCredentials(!0),u.listenOnce(MHt.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $j.NO_ERROR:const c=u.getResponseJson();Tt(Do,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case $j.TIMEOUT:Tt(Do,`RPC '${t}' ${s} timed out`),a(new ht($e.DEADLINE_EXCEEDED,"Request time out"));break;case $j.HTTP_ERROR:const f=u.getStatus();if(Tt(Do,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(y)>=0?y:$e.UNKNOWN}(h.status);a(new ht(p,h.message))}else a(new ht($e.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ht($e.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{Tt(Do,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Tt(Do,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(t,n,r){const i=Nj(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=NHt(),a=DHt(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Tt(Do,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new PWt({co:g=>{h?Tt(Do,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Tt(Do,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Tt(Do,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},lo:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return m(f,XP.EventType.OPEN,()=>{h||Tt(Do,`RPC '${t}' stream ${i} transport opened.`)}),m(f,XP.EventType.CLOSE,()=>{h||(h=!0,Tt(Do,`RPC '${t}' stream ${i} transport closed`),p.Ro())}),m(f,XP.EventType.ERROR,g=>{h||(h=!0,JC(Do,`RPC '${t}' stream ${i} transport errored:`,g),p.Ro(new ht($e.UNAVAILABLE,"The operation could not be completed")))}),m(f,XP.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Vr(!!v);const _=v,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){Tt(Do,`RPC '${t}' stream ${i} received error:`,b);const E=b.status;let w=function(P){const A=Ji[P];if(A!==void 0)return T4e(A)}(E),x=b.message;w===void 0&&(w=$e.INTERNAL,x="Unknown error status: "+E+" with message "+b.message),h=!0,p.Ro(new ht(w,x)),f.close()}else Tt(Do,`RPC '${t}' stream ${i} received:`,v),p.Vo(v)}}),m(a,LHt.STAT_EVENT,g=>{g.stat===zge.PROXY?Tt(Do,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===zge.NOPROXY&&Tt(Do,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}}function Dj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(e){return new Uqt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&Tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4e{constructor(t,n,r,i,s,o,a,u){this.si=t,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new M4e(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===$e.RESOURCE_EXHAUSTED?(Gp(n.toString()),Gp("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{t(()=>{const i=new ht($e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return Tt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $Wt extends L4e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=qqt(this.serializer,t),r=function(s){if(!("targetChange"in s))return en.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?en.min():o.readTime?Ld(o.readTime):en.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=kH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=TH(u)?{documents:Yqt(s,u)}:{query:Kqt(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=I4e(s,o.resumeToken);const l=IH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(en.min())>0){a.readTime=eM(s,o.snapshotVersion.toTimestamp());const l=IH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Qqt(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=kH(this.serializer),n.removeTarget=t,this.e_(n)}}class RWt extends L4e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(Vr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=Gqt(t.writeResults,t.commitTime),r=Ld(t.commitTime);return this.listener.I_(r,n)}return Vr(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=kH(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Wqt(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NWt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ht($e.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(t,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ht($e.UNKNOWN,i.toString())})}Co(t,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ht($e.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class DWt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Gp(n),this.f_=!1):Tt("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MWt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{Kv(this)&&(Tt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=an(u);l.C_.add(4),await WI(l),l.M_.set("Unknown"),l.C_.delete(4),await qI(l)}(this))})}),this.M_=new DWt(r,i)}}async function qI(e){if(Kv(e))for(const t of e.v_)await t(!0)}async function WI(e){for(const t of e.v_)await t(!1)}function F4e(e,t){const n=an(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),fZ(n)?cZ(n):mx(n).Ho()&&lZ(n,t))}function B4e(e,t){const n=an(e),r=mx(n);n.D_.delete(t),r.Ho()&&j4e(n,t),n.D_.size===0&&(r.Ho()?r.Zo():Kv(n)&&n.M_.set("Unknown"))}function lZ(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mx(e).u_(t)}function j4e(e,t){e.x_.Oe(t),mx(e).c_(t)}function cZ(e){e.x_=new Fqt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),mx(e).start(),e.M_.g_()}function fZ(e){return Kv(e)&&!mx(e).jo()&&e.D_.size>0}function Kv(e){return an(e).C_.size===0}function z4e(e){e.x_=void 0}async function LWt(e){e.D_.forEach((t,n)=>{lZ(e,t)})}async function FWt(e,t){z4e(e),fZ(e)?(e.M_.w_(t),cZ(e)):e.M_.set("Unknown")}async function BWt(e,t,n){if(e.M_.set("Online"),t instanceof A4e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(e,t)}catch(r){Tt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await tM(e,r)}else if(t instanceof R$?e.x_.$e(t):t instanceof C4e?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(en.min()))try{const r=await D4e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.D_.get(l);c&&s.D_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.D_.get(u);if(!c)return;s.D_.set(u,c.withResumeToken(aa.EMPTY_BYTE_STRING,c.snapshotVersion)),j4e(s,u);const f=new lg(c.target,u,l,c.sequenceNumber);lZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Tt("RemoteStore","Failed to raise snapshot:",r),await tM(e,r)}}async function tM(e,t,n){if(!UI(t))throw t;e.C_.add(1),await WI(e),e.M_.set("Offline"),n||(n=()=>D4e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Tt("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await qI(e)})}function U4e(e,t){return t().catch(n=>tM(e,n,t))}async function FF(e){const t=an(e),n=m0(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;jWt(t);)try{const i=await SWt(t.localStore,r);if(i===null){t.b_.length===0&&n.Zo();break}r=i.batchId,zWt(t,i)}catch(i){await tM(t,i)}V4e(t)&&H4e(t)}function jWt(e){return Kv(e)&&e.b_.length<10}function zWt(e,t){e.b_.push(t);const n=m0(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function V4e(e){return Kv(e)&&!m0(e).jo()&&e.b_.length>0}function H4e(e){m0(e).start()}async function UWt(e){m0(e).E_()}async function VWt(e){const t=m0(e);for(const n of e.b_)t.P_(n.mutations)}async function HWt(e,t,n){const r=e.b_.shift(),i=rZ.from(r,t,n);await U4e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await FF(e)}async function qWt(e,t){t&&m0(e).h_&&await async function(r,i){if(function(o){return Dqt(o)&&o!==$e.ABORTED}(i.code)){const s=r.b_.shift();m0(r).Yo(),await U4e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await FF(r)}}(e,t),V4e(e)&&H4e(e)}async function d0e(e,t){const n=an(e);n.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const r=Kv(n);n.C_.add(3),await WI(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await qI(n)}async function WWt(e,t){const n=an(e);t?(n.C_.delete(2),await qI(n)):t||(n.C_.add(2),await WI(n),n.M_.set("Unknown"))}function mx(e){return e.O_||(e.O_=function(n,r,i){const s=an(n);return s.A_(),new $Wt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:LWt.bind(null,e),Io:FWt.bind(null,e),a_:BWt.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),fZ(e)?cZ(e):e.M_.set("Unknown")):(await e.O_.stop(),z4e(e))})),e.O_}function m0(e){return e.N_||(e.N_=function(n,r,i){const s=an(n);return s.A_(),new RWt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:UWt.bind(null,e),Io:qWt.bind(null,e),T_:VWt.bind(null,e),I_:HWt.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await FF(e)):(await e.N_.stop(),e.b_.length>0&&(Tt("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new dZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht($e.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hZ(e,t){if(Gp("AsyncQueue",`${t}: ${e}`),UI(e))return new ht($e.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Mt.comparator(n.key,r.key):(n,r)=>Mt.comparator(n.key,r.key),this.keyedMap=mT(),this.sortedSet=new Si(this.comparator)}static emptySet(t){return new ew(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ew)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new ew;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0e{constructor(){this.B_=new Si(Mt.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Yt():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Zw{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zw(t,n,ew.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$F(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GWt{constructor(){this.k_=void 0,this.listeners=[]}}class YWt{constructor(){this.queries=new px(t=>f4e(t),$F),this.onlineState="Unknown",this.q_=new Set}}async function q4e(e,t){const n=an(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new GWt),i)try{s.k_=await n.onListen(r)}catch(o){const a=hZ(o,`Initialization of query '${G_(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&pZ(n)}async function W4e(e,t){const n=an(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function KWt(e,t){const n=an(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&pZ(n)}function XWt(e,t,n){const r=an(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function pZ(e){e.q_.forEach(t=>{t.next()})}class G4e{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Zw(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=Zw.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4e{constructor(t){this.key=t}}class K4e{constructor(t){this.key=t}}class QWt{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=On(),this.mutatedKeys=On(),this._a=d4e(t),this.aa=new ew(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new h0e,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=RF(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ha(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this._a(h,u)>0||l&&this._a(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return m(h)-m(p)}(c.type,f.type)||this._a(c.doc,f.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],u=this.oa.size===0&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,o.length!==0||l?{snapshot:new Zw(this.query,t.aa,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new h0e,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=On(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new K4e(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new Y4e(r))}),n}da(t){this.ia=t.ls,this.oa=On();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return Zw.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class JWt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class ZWt{constructor(t){this.key=t,this.Ra=!1}}class eGt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new px(a=>f4e(a),$F),this.fa=new Map,this.ga=new Set,this.pa=new Si(Mt.comparator),this.ya=new Map,this.wa=new oZ,this.Sa={},this.ba=new Map,this.Da=Jw.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function tGt(e,t){const n=fGt(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await TWt(n.localStore,Md(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await nGt(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&F4e(n.remoteStore,o)}return i}async function nGt(e,t,n,r,i){e.va=(f,d,h)=>async function(m,g,y,v){let _=g.view.ca(y);_.Zi&&(_=await l0e(m.localStore,g.query,!1).then(({documents:x})=>g.view.ca(x,_)));const b=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(_,m.isPrimaryClient,b,E);return m0e(m,g.targetId,w.Ta),w.snapshot}(e,f,d,h);const s=await l0e(e.localStore,t,!0),o=new QWt(t,s.ls),a=o.ca(s.documents),u=HI.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);m0e(e,n,l.Ta);const c=new JWt(t,n,o);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}async function rGt(e,t){const n=an(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!$F(s,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await $H(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),B4e(n.remoteStore,r.targetId),RH(n,r.targetId)}).catch(zI)):(RH(n,r.targetId),await $H(n.localStore,r.targetId,!0))}async function iGt(e,t,n){const r=dGt(e);try{const i=await function(o,a){const u=an(o),l=Ss.now(),c=a.reduce((h,p)=>h.add(p.key),On());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Yp(),m=On();return u.ss.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=Pqt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Yv(v.key,_,r4e(_.value.mapValue),Ep.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:p4e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new Si(cr)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),await GI(r,i.changes),await FF(r.remoteStore)}catch(i){const s=hZ(i,"Failed to persist write");n.reject(s)}}async function X4e(e,t){const n=an(e);try{const r=await EWt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Vr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Vr(o.Ra):i.removedDocuments.size>0&&(Vr(o.Ra),o.Ra=!1))}),await GI(n,r,t)}catch(r){await zI(r)}}function p0e(e,t,n){const r=an(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=an(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.listeners)d.Q_(a)&&(l=!0)}),l&&pZ(u)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sGt(e,t,n){const r=an(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let o=new Si(Mt.comparator);o=o.insert(s,qo.newNoDocument(s,en.min()));const a=On().add(s),u=new MF(en.min(),new Map,new Si(cr),o,a);await X4e(r,u),r.pa=r.pa.remove(s),r.ya.delete(t),mZ(r)}else await $H(r.localStore,t,!1).then(()=>RH(r,t,n)).catch(zI)}async function oGt(e,t){const n=an(e),r=t.batch.batchId;try{const i=await wWt(n.localStore,t);J4e(n,r,null),Q4e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await GI(n,i)}catch(i){await zI(i)}}async function aGt(e,t,n){const r=an(e);try{const i=await function(o,a){const u=an(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Vr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);J4e(r,t,n),Q4e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await GI(r,i)}catch(i){await zI(i)}}function Q4e(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function J4e(e,t,n){const r=an(e);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function RH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||Z4e(e,r)})}function Z4e(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(B4e(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),mZ(e))}function m0e(e,t,n){for(const r of n)r instanceof Y4e?(e.wa.addReference(r.key,t),uGt(e,r)):r instanceof K4e?(Tt("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||Z4e(e,r.key)):Yt()}function uGt(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Tt("SyncEngine","New document in limbo: "+n),e.ga.add(r),mZ(e))}function mZ(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Mt(Qr.fromString(t)),r=e.Da.next();e.ya.set(r,new ZWt(n)),e.pa=e.pa.insert(n,r),F4e(e.remoteStore,new lg(Md(nZ(n.path)),r,"TargetPurposeLimboResolution",XJ._e))}}async function GI(e,t,n){const r=an(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=uZ.Qi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(u,l){const c=an(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Le.forEach(l,d=>Le.forEach(d.ki,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Le.forEach(d.qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!UI(f))throw f;Tt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ts.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ts=c.ts.insert(d,m)}}}(r.localStore,s))}async function lGt(e,t){const n=an(e);if(!n.currentUser.isEqual(t)){Tt("SyncEngine","User change. New user:",t.toKey());const r=await N4e(n.localStore,t);n.currentUser=t,function(s,o){s.ba.forEach(a=>{a.forEach(u=>{u.reject(new ht($e.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await GI(n,r._s)}}function cGt(e,t){const n=an(e),r=n.ya.get(t);if(r&&r.Ra)return On().add(r.key);{let i=On();const s=n.fa.get(t);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function fGt(e){const t=an(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=X4e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cGt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sGt.bind(null,t),t.Va.a_=KWt.bind(null,t.eventManager),t.Va.Fa=XWt.bind(null,t.eventManager),t}function dGt(e){const t=an(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oGt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aGt.bind(null,t),t}class g0e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=LF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return bWt(this.persistence,new vWt,t.initialUser,this.serializer)}createPersistence(t){return new mWt(aZ.jr,this.serializer)}createSharedClientState(t){return new AWt}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hGt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p0e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lGt.bind(null,this.syncEngine),await WWt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new YWt}()}createDatastore(t){const n=LF(t.databaseInfo.databaseId),r=function(s){return new kWt(s)}(t.databaseInfo);return function(s,o,a,u){return new NWt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new MWt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>p0e(this.syncEngine,n,0),function(){return f0e.D()?new f0e:new IWt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new eGt(i,s,o,a,u,l);return c&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=an(n);Tt("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await WI(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eFe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Gp("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pGt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Za.UNAUTHENTICATED,this.clientId=e4e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Tt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Tt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ht($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new wp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Mj(e,t){e.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await N4e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function y0e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await tFe(e);Tt("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>d0e(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>d0e(t.remoteStore,s)),e._onlineComponents=t}function mGt(e){return e.name==="FirebaseError"?e.code===$e.FAILED_PRECONDITION||e.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function tFe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Tt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mj(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!mGt(n))throw n;JC("Error using user provided cache. Falling back to memory cache: "+n),await Mj(e,new g0e)}}else Tt("FirestoreClient","Using default OfflineComponentProvider"),await Mj(e,new g0e);return e._offlineComponents}async function gZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Tt("FirestoreClient","Using user provided OnlineComponentProvider"),await y0e(e,e._uninitializedComponentsProvider._online)):(Tt("FirestoreClient","Using default OnlineComponentProvider"),await y0e(e,new hGt))),e._onlineComponents}function gGt(e){return tFe(e).then(t=>t.persistence)}function yGt(e){return gZ(e).then(t=>t.remoteStore)}function vGt(e){return gZ(e).then(t=>t.syncEngine)}async function nFe(e){const t=await gZ(e),n=t.eventManager;return n.onListen=tGt.bind(null,t.syncEngine),n.onUnlisten=rGt.bind(null,t.syncEngine),n}function _Gt(e){return e.asyncQueue.enqueue(async()=>{const t=await gGt(e),n=await yGt(e);return t.setNetworkEnabled(!0),function(i){const s=an(i);return s.C_.delete(0),qI(s)}(n)})}function bGt(e,t,n={}){const r=new wp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new eFe({next:d=>{o.enqueueAndForget(()=>W4e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new ht($e.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new ht($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new G4e(nZ(a.path),c,{includeMetadataChanges:!0,J_:!0});return q4e(s,f)}(await nFe(e),e.asyncQueue,t,n,r)),r.promise}function wGt(e,t,n={}){const r=new wp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new eFe({next:d=>{o.enqueueAndForget(()=>W4e(s,f)),d.fromCache&&u.source==="server"?l.reject(new ht($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new G4e(a,c,{includeMetadataChanges:!0,J_:!0});return q4e(s,f)}(await nFe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rFe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iFe(e,t,n){if(!n)throw new ht($e.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function EGt(e,t,n,r){if(t===!0&&r===!0)throw new ht($e.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function _0e(e){if(!Mt.isDocumentKey(e))throw new ht($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function b0e(e){if(Mt.isDocumentKey(e))throw new ht($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function BF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Yt()}function av(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ht($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=BF(e);throw new ht($e.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0e{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ht($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}EGt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rFe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ht($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ht($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ht($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w0e({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ht($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ht($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w0e(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zHt;switch(r.type){case"firstParty":return new HHt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ht($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v0e.get(n);r&&(Tt("ComponentProvider","Removing Datastore"),v0e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Xv(this.firestore,t,this._query)}}class _u{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fg(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _u(this.firestore,t,this._key)}}class Fg extends Xv{constructor(t,n,r){super(t,n,nZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _u(this.firestore,null,new Mt(t))}withConverter(t){return new Fg(this.firestore,t,this._path)}}function CS(e,t,...n){if(e=Is(e),iFe("collection","path",t),e instanceof yZ){const r=Qr.fromString(t,...n);return b0e(r),new Fg(e,null,r)}{if(!(e instanceof _u||e instanceof Fg))throw new ht($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qr.fromString(t,...n));return b0e(r),new Fg(e.firestore,null,r)}}function ma(e,t,...n){if(e=Is(e),arguments.length===1&&(t=e4e.newId()),iFe("doc","path",t),e instanceof yZ){const r=Qr.fromString(t,...n);return _0e(r),new _u(e,null,new Mt(r))}{if(!(e instanceof _u||e instanceof Fg))throw new ht($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qr.fromString(t,...n));return _0e(r),new _u(e.firestore,e instanceof Fg?e.converter:null,new Mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xGt{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new M4e(this,"async_queue_retry"),this.iu=()=>{const n=Dj();n&&Tt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=Dj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=Dj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new wp;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!UI(t))throw t;Tt("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Gp("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const i=dZ.createAndSchedule(this,t,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Yt()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}class YI extends yZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new xGt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||sFe(this),this._firestoreClient.terminate()}}function SGt(e,t,n){n||(n="(default)");const r=ax(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(jC(s,t))return i;throw new ht($e.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ht($e.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function jF(e){return e._firestoreClient||sFe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function sFe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new nqt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,rFe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new pGt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function TGt(e){return _Gt(jF(e=av(e,YI)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new eE(aa.fromBase64String(t))}catch(n){throw new ht($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new eE(aa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ht($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ht($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ht($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return cr(this._lat,t._lat)||cr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CGt=/^__.*__$/;class AGt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Yv(t,this.data,this.fieldMask,n,this.fieldTransforms):new VI(t,this.data,n,this.fieldTransforms)}}function oFe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class wZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new wZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Au(t),i}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return nM(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(oFe(this.Iu)&&CGt.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class IGt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||LF(t)}pu(t,n,r,i=!1){return new wZ({Iu:t,methodName:n,gu:r,path:mo.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aFe(e){const t=e._freezeSettings(),n=LF(e._databaseId);return new IGt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function OGt(e,t,n,r,i,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);cFe("Data must be an object, but it was:",o,r);const a=uFe(r,o);let u,l;if(s.merge)u=new Qc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=kGt(t,f,n);if(!o.contains(d))throw new ht($e.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);RGt(c,d)||c.push(d)}u=new Qc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new AGt(new ql(a),u,l)}class EZ extends _Z{_toFieldTransform(t){return new Cqt(t.path,new iA)}isEqual(t){return t instanceof EZ}}function PGt(e,t,n,r=!1){return xZ(n,e.pu(r?4:3,t))}function xZ(e,t){if(lFe(e=Is(e)))return cFe("Unsupported field value:",t,e),uFe(e,t);if(e instanceof _Z)return function(r,i){if(!oFe(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=xZ(a,i.Vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Is(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xqt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ss.fromDate(r);return{timestampValue:eM(i.serializer,s)}}if(r instanceof Ss){const s=new Ss(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eM(i.serializer,s)}}if(r instanceof bZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eE)return{bytesValue:I4e(i.serializer,r._byteString)};if(r instanceof _u){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${BF(r)}`)}(e,t)}function uFe(e,t){const n={};return t4e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dx(e,(r,i)=>{const s=xZ(i,t.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function lFe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ss||e instanceof bZ||e instanceof eE||e instanceof _u||e instanceof _Z)}function cFe(e,t,n){if(!lFe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=BF(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function kGt(e,t,n){if((t=Is(t))instanceof vZ)return t._internalPath;if(typeof t=="string")return fFe(e,t);throw nM("Field path arguments must be of type string or ",e,!1,void 0,n)}const $Gt=new RegExp("[~\\*/\\[\\]]");function fFe(e,t,n){if(t.search($Gt)>=0)throw nM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vZ(...t.split("."))._internalPath}catch{throw nM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function nM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ht($e.INVALID_ARGUMENT,a+e+u)}function RGt(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dFe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _u(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new NGt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(SZ("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NGt extends dFe{data(){return super.data()}}function SZ(e,t){return typeof t=="string"?fFe(e,t):t instanceof vZ?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DGt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ht($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TZ{}class hFe extends TZ{}function MGt(e,t,...n){let r=[];t instanceof TZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof AZ).length,a=s.filter(u=>u instanceof CZ).length;if(o>1||o>0&&a>0)throw new ht($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class CZ extends hFe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new CZ(t,n,r)}_apply(t){const n=this._parse(t);return pFe(t._query,n),new Xv(t.firestore,t.converter,CH(t._query,n))}_parse(t){const n=aFe(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ht($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){x0e(f,c);const h=[];for(const p of f)h.push(E0e(u,s,p));d={arrayValue:{values:h}}}else d=E0e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||x0e(f,c),d=PGt(a,o,f,c==="in"||c==="not-in");return ss.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class AZ extends TZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new AZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)pFe(o,u),o=CH(o,u)}(t._query,n),new Xv(t.firestore,t.converter,CH(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IZ extends hFe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new IZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new ht($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ht($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rA(s,o)}(t._query,this._field,this._direction);return new Xv(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new hx(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function LGt(e,t="asc"){const n=t,r=SZ("orderBy",e);return IZ._create(r,n)}function E0e(e,t,n){if(typeof(n=Is(n))=="string"){if(n==="")throw new ht($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c4e(t)&&n.indexOf("/")!==-1)throw new ht($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Qr.fromString(n));if(!Mt.isDocumentKey(r))throw new ht($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wge(e,new Mt(r))}if(n instanceof _u)return Wge(e,n._key);throw new ht($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BF(n)}.`)}function x0e(e,t){if(!Array.isArray(e)||e.length===0)throw new ht($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pFe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ht($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class FGt{convertValue(t,n="none"){switch(ov(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ts(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(sv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Yt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return dx(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new bZ(ts(t.latitude),ts(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=JJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(eA(t));default:return null}}convertTimestamp(t){const n=p0(t);return new Ss(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Qr.fromString(t);Vr(R4e(r));const i=new tA(r.get(1),r.get(3)),s=new Mt(r.popFirst(5));return i.isEqual(n)||Gp(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BGt(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mFe extends dFe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new N$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(SZ("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class N$ extends mFe{data(t={}){return super.data(t)}}class jGt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new N$(this._firestore,this._userDataWriter,r.key,r,new yT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ht($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new N$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new N$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:zGt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zGt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(e){e=av(e,_u);const t=av(e.firestore,YI);return bGt(jF(t),e._key).then(n=>VGt(t,e,n))}class gFe extends FGt{constructor(t){super(),this.firestore=t}convertBytes(t){return new eE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _u(this.firestore,null,n)}}function tk(e){e=av(e,Xv);const t=av(e.firestore,YI),n=jF(t),r=new gFe(t);return DGt(e._query),wGt(n,e._query).then(i=>new jGt(t,r,e,i))}function Bf(e,t,n){e=av(e,_u);const r=av(e.firestore,YI),i=BGt(e.converter,t,n);return UGt(r,[OGt(aFe(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Ep.none())])}function UGt(e,t){return function(r,i){const s=new wp;return r.asyncQueue.enqueueAndForget(async()=>iGt(await vGt(r),i,s)),s.promise}(jF(e),t)}function VGt(e,t,n){const r=n.docs.get(t._key),i=new gFe(e);return new mFe(e,i,t._key,r,new yT(n.hasPendingWrites,n.fromCache),t.converter)}function HGt(){return new EZ("serverTimestamp")}(function(t,n=!0){(function(i){fx=i})(Wv),Hp(new Qd("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new YI(new UHt(r.getProvider("auth-internal")),new WHt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ht($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lf(Uge,"4.4.0",t),lf(Uge,"4.4.0","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=new Map,yFe={activated:!1,tokenObservers:[]},qGt={initialized:!1,enabled:!1};function Ts(e){return NH.get(e)||Object.assign({},yFe)}function WGt(e,t){return NH.set(e,t),NH.get(e)}function zF(){return qGt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vFe="https://content-firebaseappcheck.googleapis.com/v1",GGt="exchangeRecaptchaV3Token",YGt="exchangeDebugToken",S0e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},KGt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XGt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new BC,await QGt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new BC,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function QGt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JGt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},mu=new ox("appCheck","AppCheck",JGt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function OZ(e){if(!Ts(e).activated)throw mu.create("use-before-activation",{appName:e.name})}function _Fe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=nk(n)+"d:"),r&&(o+=nk(r)+"h:"),o+=nk(i)+"m:"+nk(s)+"s",o}function nk(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw mu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw mu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw mu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw mu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function ZGt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${vFe}/projects/${n}/apps/${r}:${GGt}?key=${i}`,body:{recaptcha_v3_token:t}}}function bFe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${vFe}/projects/${n}/apps/${r}:${YGt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eYt="firebase-app-check-database",tYt=1,aA="firebase-app-check-store",wFe="debug-token";let rk=null;function EFe(){return rk||(rk=new Promise((e,t)=>{try{const n=indexedDB.open(eYt,tYt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(mu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(aA,{keyPath:"compositeKey"})}}}catch(n){t(mu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rk)}function nYt(e){return SFe(TFe(e))}function rYt(e,t){return xFe(TFe(e),t)}function iYt(e){return xFe(wFe,e)}function sYt(){return SFe(wFe)}async function xFe(e,t){const r=(await EFe()).transaction(aA,"readwrite"),s=r.objectStore(aA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(mu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function SFe(e){const n=(await EFe()).transaction(aA,"readonly"),i=n.objectStore(aA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(mu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function TFe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new cF("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oYt(e){if(dJ()){let t;try{t=await nYt(e)}catch(n){uA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Lj(e,t){return dJ()?rYt(e,t).catch(n=>{uA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function aYt(){let e;try{e=await sYt()}catch{}if(e)return e;{const t=ojt();return iYt(t).catch(n=>uA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(){return zF().enabled}async function $Z(){const e=zF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function uYt(){const e=YMe(),t=zF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new BC;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(aYt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lYt={error:"UNKNOWN_ERROR"};function cYt(e){return cJ.encodeString(JSON.stringify(e),!1)}async function DH(e,t=!1){const n=e.app;OZ(n);const r=Ts(n);let i=r.token,s;if(i&&!_b(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(_b(u)?i=u:await Lj(n,void 0))}if(!t&&i&&_b(i))return{token:i.token};let o=!1;if(kZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PZ(bFe(n,await $Z()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Lj(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ts(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?uA.warn(u.message):uA.error(u),s=u}let a;return i?s?_b(i)?a={token:i.token,internalError:s}:a=A0e(s):(a={token:i.token},r.token=i,await Lj(n,i)):a=A0e(s),o&&IFe(n,a),a}async function fYt(e){const t=e.app;OZ(t);const{provider:n}=Ts(t);if(kZ()){const r=await $Z(),{token:i}=await PZ(bFe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function CFe(e,t,n,r){const{app:i}=e,s=Ts(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&_b(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),C0e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>C0e(e))}function AFe(e,t){const n=Ts(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function C0e(e){const{app:t}=e,n=Ts(t);let r=n.tokenRefresher;r||(r=dYt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function dYt(e){const{app:t}=e;return new XGt(async()=>{const n=Ts(t);let r;if(n.token?r=await DH(e,!0):r=await DH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ts(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},S0e.RETRIAL_MIN_WAIT,S0e.RETRIAL_MAX_WAIT)}function IFe(e,t){const n=Ts(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function _b(e){return e.expireTimeMillis-Date.now()>0}function A0e(e){return{token:cYt(lYt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hYt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ts(this.app);for(const n of t)AFe(this.app,n.next);return Promise.resolve()}}function pYt(e,t){return new hYt(e,t)}function mYt(e){return{getToken:t=>DH(e,t),getLimitedUseToken:()=>fYt(e),addTokenListener:t=>CFe(e,"INTERNAL",t),removeTokenListener:t=>AFe(e.app,t)}}const gYt="@firebase/app-check",yYt="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vYt="https://www.google.com/recaptcha/api.js";function _Yt(e,t){const n=new BC,r=Ts(e);r.reCAPTCHAState={initialized:n};const i=bYt(e),s=T0e(!1);return s?I0e(e,t,s,i,n):xYt(()=>{const o=T0e(!1);if(!o)throw new Error("no recaptcha");I0e(e,t,o,i,n)}),n.promise}function I0e(e,t,n,r,i){n.ready(()=>{EYt(e,t,n,r),i.resolve(n)})}function bYt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function wYt(e){OZ(e);const n=await Ts(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ts(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function EYt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ts(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ts(e).reCAPTCHAState.succeeded=!1}}),s=Ts(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function xYt(e){const t=document.createElement("script");t.src=vYt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;TYt(this._throttleData);const i=await wYt(this._app).catch(o=>{throw mu.create("recaptcha-error")});if(!(!((t=Ts(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw mu.create("recaptcha-error");let s;try{s=await PZ(ZGt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=SYt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),mu.create("throttled",{time:_Fe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=ax(t,"heartbeat"),_Yt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof RZ?this._siteKey===t._siteKey:!1}}function SYt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+KGt,httpStatus:e};{const n=t?t.backoffCount:0,r=fjt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function TYt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw mu.create("throttled",{time:_Fe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CYt(e=pJ(),t){e=Is(e);const n=ax(e,"app-check");if(zF().initialized||uYt(),kZ()&&$Z().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw mu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return AYt(e,t.provider,t.isTokenAutoRefreshEnabled),Ts(e).isTokenAutoRefreshEnabled&&CFe(r,"INTERNAL",()=>{}),r}function AYt(e,t,n){const r=WGt(e,Object.assign({},yFe));r.activated=!0,r.provider=t,r.cachedTokenPromise=oYt(e).then(i=>(i&&_b(i)&&(r.token=i,IFe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const IYt="app-check",O0e="app-check-internal";function OYt(){Hp(new Qd(IYt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return pYt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(O0e).initialize()})),Hp(new Qd(O0e,e=>{const t=e.getProvider("app-check").getImmediate();return mYt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),lf(gYt,yYt)}OYt();function ik(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var OFe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof ik=="function"&&ik;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof ik=="function"&&ik,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,w){if(typeof E!="function"&&this.state===l||typeof w!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var S=this.state===l?E:w;h(x,S,this.outcome)}else this.queue.push(new d(x,E,w));return x};function d(E,w,x){this.promise=E,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,w,x){s(function(){var S;try{S=w(x)}catch(P){return a.reject(E,P)}S===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,S)})}a.resolve=function(E,w){var x=g(p,w);if(x.status==="error")return a.reject(E,x.value);var S=x.value;if(S)m(E,S);else{E.state=l,E.outcome=w;for(var P=-1,A=E.queue.length;++P<A;)E.queue[P].callFulfilled(w)}return E},a.reject=function(E,w){E.state=u,E.outcome=w;for(var x=-1,S=E.queue.length;++x<S;)E.queue[x].callRejected(w);return E};function p(E){var w=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof w=="function")return function(){w.apply(E,arguments)}}function m(E,w){var x=!1;function S(z){x||(x=!0,a.reject(E,z))}function P(z){x||(x=!0,a.resolve(E,z))}function A(){w(P,S)}var O=g(A);O.status==="error"&&S(O.value)}function g(E,w){var x={};try{x.value=E(w),x.status="success"}catch(S){x.status="error",x.value=S}return x}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var w=new this(o);return a.reject(w,E)}f.all=_;function _(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var P=new Array(x),A=0,O=-1,z=new this(o);++O<x;)D(E[O],O);return z;function D(R,N){w.resolve(R).then(L,function(V){S||(S=!0,a.reject(z,V))});function L(V){P[N]=V,++A===x&&!S&&(S=!0,a.resolve(z,P))}}}f.race=b;function b(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var P=-1,A=new this(o);++P<x;)O(E[P]);return A;function O(z){w.resolve(z).then(function(D){S||(S=!0,a.resolve(A,D))},function(D){S||(S=!0,a.reject(A,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W};function o(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var W=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!W||te)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(W,te){W=W||[],te=te||{};try{return new Blob(W,te)}catch(oe){if(oe.name!=="TypeError")throw oe;for(var K=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new K,pe=0;pe<W.length;pe+=1)fe.append(W[pe]);return fe.getBlob(te.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(W,te){te&&W.then(function(K){te(null,K)},function(K){te(K)})}function h(W,te,K){typeof te=="function"&&W.then(te),typeof K=="function"&&W.catch(K)}function p(W){return typeof W!="string"&&(console.warn(W+" used as a key, but it is not a string."),W=String(W)),W}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,b="readonly",E="readwrite";function w(W){for(var te=W.length,K=new ArrayBuffer(te),fe=new Uint8Array(K),pe=0;pe<te;pe++)fe[pe]=W.charCodeAt(pe);return K}function x(W){return new f(function(te){var K=W.transaction(g,E),fe=c([""]);K.objectStore(g).put(fe,"key"),K.onabort=function(pe){pe.preventDefault(),pe.stopPropagation(),te(!1)},K.oncomplete=function(){var pe=navigator.userAgent.match(/Chrome\/(\d+)/),oe=navigator.userAgent.match(/Edge\//);te(oe||!pe||parseInt(pe[1],10)>=43)}}).catch(function(){return!1})}function S(W){return typeof y=="boolean"?f.resolve(y):x(W).then(function(te){return y=te,y})}function P(W){var te=v[W.name],K={};K.promise=new f(function(fe,pe){K.resolve=fe,K.reject=pe}),te.deferredOperations.push(K),te.dbReady?te.dbReady=te.dbReady.then(function(){return K.promise}):te.dbReady=K.promise}function A(W){var te=v[W.name],K=te.deferredOperations.pop();if(K)return K.resolve(),K.promise}function O(W,te){var K=v[W.name],fe=K.deferredOperations.pop();if(fe)return fe.reject(te),fe.promise}function z(W,te){return new f(function(K,fe){if(v[W.name]=v[W.name]||$(),W.db)if(te)P(W),W.db.close();else return K(W.db);var pe=[W.name];te&&pe.push(W.version);var oe=u.open.apply(u,pe);te&&(oe.onupgradeneeded=function(Se){var De=oe.result;try{De.createObjectStore(W.storeName),Se.oldVersion<=1&&De.createObjectStore(g)}catch(ze){if(ze.name==="ConstraintError")console.warn('The database "'+W.name+'" has been upgraded from version '+Se.oldVersion+" to version "+Se.newVersion+', but the storage "'+W.storeName+'" already exists.');else throw ze}}),oe.onerror=function(Se){Se.preventDefault(),fe(oe.error)},oe.onsuccess=function(){var Se=oe.result;Se.onversionchange=function(De){De.target.close()},K(Se),A(W)}})}function D(W){return z(W,!1)}function R(W){return z(W,!0)}function N(W,te){if(!W.db)return!0;var K=!W.db.objectStoreNames.contains(W.storeName),fe=W.version<W.db.version,pe=W.version>W.db.version;if(fe&&(W.version!==te&&console.warn('The database "'+W.name+`" can't be downgraded from version `+W.db.version+" to version "+W.version+"."),W.version=W.db.version),pe||K){if(K){var oe=W.db.version+1;oe>W.version&&(W.version=oe)}return!0}return!1}function L(W){return new f(function(te,K){var fe=new FileReader;fe.onerror=K,fe.onloadend=function(pe){var oe=btoa(pe.target.result||"");te({__local_forage_encoded_blob:!0,data:oe,type:W.type})},fe.readAsBinaryString(W)})}function V(W){var te=w(atob(W.data));return c([te],{type:W.type})}function j(W){return W&&W.__local_forage_encoded_blob}function H(W){var te=this,K=te._initReady().then(function(){var fe=v[te._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(K,W,W),K}function U(W){P(W);for(var te=v[W.name],K=te.forages,fe=0;fe<K.length;fe++){var pe=K[fe];pe._dbInfo.db&&(pe._dbInfo.db.close(),pe._dbInfo.db=null)}return W.db=null,D(W).then(function(oe){return W.db=oe,N(W)?R(W):oe}).then(function(oe){W.db=te.db=oe;for(var Se=0;Se<K.length;Se++)K[Se]._dbInfo.db=oe}).catch(function(oe){throw O(W,oe),oe})}function k(W,te,K,fe){fe===void 0&&(fe=1);try{var pe=W.db.transaction(W.storeName,te);K(null,pe)}catch(oe){if(fe>0&&(!W.db||oe.name==="InvalidStateError"||oe.name==="NotFoundError"))return f.resolve().then(function(){if(!W.db||oe.name==="NotFoundError"&&!W.db.objectStoreNames.contains(W.storeName)&&W.version<=W.db.version)return W.db&&(W.version=W.db.version+1),R(W)}).then(function(){return U(W).then(function(){k(W,te,K,fe-1)})}).catch(K);K(oe)}}function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function q(W){var te=this,K={db:null};if(W)for(var fe in W)K[fe]=W[fe];var pe=v[K.name];pe||(pe=$(),v[K.name]=pe),pe.forages.push(te),te._initReady||(te._initReady=te.ready,te.ready=H);var oe=[];function Se(){return f.resolve()}for(var De=0;De<pe.forages.length;De++){var ze=pe.forages[De];ze!==te&&oe.push(ze._initReady().catch(Se))}var He=pe.forages.slice(0);return f.all(oe).then(function(){return K.db=pe.db,D(K)}).then(function(Ze){return K.db=Ze,N(K,te._defaultConfig.version)?R(K):Ze}).then(function(Ze){K.db=pe.db=Ze,te._dbInfo=K;for(var St=0;St<He.length;St++){var gn=He[St];gn!==te&&(gn._dbInfo.db=K.db,gn._dbInfo.version=K.version)}})}function F(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){k(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.get(W);He.onsuccess=function(){var Ze=He.result;Ze===void 0&&(Ze=null),j(Ze)&&(Ze=V(Ze)),pe(Ze)},He.onerror=function(){oe(He.error)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function B(W,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){k(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.openCursor(),Ze=1;He.onsuccess=function(){var St=He.result;if(St){var gn=St.value;j(gn)&&(gn=V(gn));var tr=W(gn,St.key,Ze++);tr!==void 0?pe(tr):St.continue()}else pe()},He.onerror=function(){oe(He.error)}}catch(St){oe(St)}})}).catch(oe)});return d(fe,te),fe}function Q(W,te,K){var fe=this;W=p(W);var pe=new f(function(oe,Se){var De;fe.ready().then(function(){return De=fe._dbInfo,_.call(te)==="[object Blob]"?S(De.db).then(function(ze){return ze?te:L(te)}):te}).then(function(ze){k(fe._dbInfo,E,function(He,Ze){if(He)return Se(He);try{var St=Ze.objectStore(fe._dbInfo.storeName);ze===null&&(ze=void 0);var gn=St.put(ze,W);Ze.oncomplete=function(){ze===void 0&&(ze=null),oe(ze)},Ze.onabort=Ze.onerror=function(){var tr=gn.error?gn.error:gn.transaction.error;Se(tr)}}catch(tr){Se(tr)}})}).catch(Se)});return d(pe,K),pe}function se(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){k(K._dbInfo,E,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.delete(W);De.oncomplete=function(){pe()},De.onerror=function(){oe(He.error)},De.onabort=function(){var Ze=He.error?He.error:He.transaction.error;oe(Ze)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function ae(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){k(te._dbInfo,E,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.clear();Se.oncomplete=function(){fe()},Se.onabort=Se.onerror=function(){var He=ze.error?ze.error:ze.transaction.error;pe(He)}}catch(He){pe(He)}})}).catch(pe)});return d(K,W),K}function ce(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){k(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.count();ze.onsuccess=function(){fe(ze.result)},ze.onerror=function(){pe(ze.error)}}catch(He){pe(He)}})}).catch(pe)});return d(K,W),K}function le(W,te){var K=this,fe=new f(function(pe,oe){if(W<0){pe(null);return}K.ready().then(function(){k(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=!1,Ze=ze.openKeyCursor();Ze.onsuccess=function(){var St=Ze.result;if(!St){pe(null);return}W===0||He?pe(St.key):(He=!0,St.advance(W))},Ze.onerror=function(){oe(Ze.error)}}catch(St){oe(St)}})}).catch(oe)});return d(fe,te),fe}function ge(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){k(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.openKeyCursor(),He=[];ze.onsuccess=function(){var Ze=ze.result;if(!Ze){fe(He);return}He.push(Ze.key),Ze.continue()},ze.onerror=function(){pe(ze.error)}}catch(Ze){pe(Ze)}})}).catch(pe)});return d(K,W),K}function ue(W,te){te=m.apply(this,arguments);var K=this.config();W=typeof W!="function"&&W||{},W.name||(W.name=W.name||K.name,W.storeName=W.storeName||K.storeName);var fe=this,pe;if(!W.name)pe=f.reject("Invalid arguments");else{var oe=W.name===K.name&&fe._dbInfo.db,Se=oe?f.resolve(fe._dbInfo.db):D(W).then(function(De){var ze=v[W.name],He=ze.forages;ze.db=De;for(var Ze=0;Ze<He.length;Ze++)He[Ze]._dbInfo.db=De;return De});W.storeName?pe=Se.then(function(De){if(De.objectStoreNames.contains(W.storeName)){var ze=De.version+1;P(W);var He=v[W.name],Ze=He.forages;De.close();for(var St=0;St<Ze.length;St++){var gn=Ze[St];gn._dbInfo.db=null,gn._dbInfo.version=ze}var tr=new f(function(ur,Ai){var si=u.open(W.name,ze);si.onerror=function(Ga){var oy=si.result;oy.close(),Ai(Ga)},si.onupgradeneeded=function(){var Ga=si.result;Ga.deleteObjectStore(W.storeName)},si.onsuccess=function(){var Ga=si.result;Ga.close(),ur(Ga)}});return tr.then(function(ur){He.db=ur;for(var Ai=0;Ai<Ze.length;Ai++){var si=Ze[Ai];si._dbInfo.db=ur,A(si._dbInfo)}}).catch(function(ur){throw(O(W,ur)||f.resolve()).catch(function(){}),ur})}}):pe=Se.then(function(De){P(W);var ze=v[W.name],He=ze.forages;De.close();for(var Ze=0;Ze<He.length;Ze++){var St=He[Ze];St._dbInfo.db=null}var gn=new f(function(tr,ur){var Ai=u.deleteDatabase(W.name);Ai.onerror=function(){var si=Ai.result;si&&si.close(),ur(Ai.error)},Ai.onblocked=function(){console.warn('dropInstance blocked for database "'+W.name+'" until all open connections are closed')},Ai.onsuccess=function(){var si=Ai.result;si&&si.close(),tr(si)}});return gn.then(function(tr){ze.db=tr;for(var ur=0;ur<He.length;ur++){var Ai=He[ur];A(Ai._dbInfo)}}).catch(function(tr){throw(O(W,tr)||f.resolve()).catch(function(){}),tr})})}return d(pe,te),pe}var Fe={_driver:"asyncStorage",_initStorage:q,_support:l(),iterate:B,getItem:F,setItem:Q,removeItem:se,clear:ae,length:ce,key:le,keys:ge,dropInstance:ue};function ke(){return typeof openDatabase=="function"}var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,Me="__lfsc__:",Ut=Me.length,Qe="arbf",je="blob",xt="si08",et="ui08",ft="uic8",dt="si16",jt="si32",Dn="ur16",he="ui32",_e="fl32",Pe="fl64",it=Ut+Qe.length,Ye=Object.prototype.toString;function ut(W){var te=W.length*.75,K=W.length,fe,pe=0,oe,Se,De,ze;W[W.length-1]==="="&&(te--,W[W.length-2]==="="&&te--);var He=new ArrayBuffer(te),Ze=new Uint8Array(He);for(fe=0;fe<K;fe+=4)oe=Ge.indexOf(W[fe]),Se=Ge.indexOf(W[fe+1]),De=Ge.indexOf(W[fe+2]),ze=Ge.indexOf(W[fe+3]),Ze[pe++]=oe<<2|Se>>4,Ze[pe++]=(Se&15)<<4|De>>2,Ze[pe++]=(De&3)<<6|ze&63;return He}function tt(W){var te=new Uint8Array(W),K="",fe;for(fe=0;fe<te.length;fe+=3)K+=Ge[te[fe]>>2],K+=Ge[(te[fe]&3)<<4|te[fe+1]>>4],K+=Ge[(te[fe+1]&15)<<2|te[fe+2]>>6],K+=Ge[te[fe+2]&63];return te.length%3===2?K=K.substring(0,K.length-1)+"=":te.length%3===1&&(K=K.substring(0,K.length-2)+"=="),K}function wt(W,te){var K="";if(W&&(K=Ye.call(W)),W&&(K==="[object ArrayBuffer]"||W.buffer&&Ye.call(W.buffer)==="[object ArrayBuffer]")){var fe,pe=Me;W instanceof ArrayBuffer?(fe=W,pe+=Qe):(fe=W.buffer,K==="[object Int8Array]"?pe+=xt:K==="[object Uint8Array]"?pe+=et:K==="[object Uint8ClampedArray]"?pe+=ft:K==="[object Int16Array]"?pe+=dt:K==="[object Uint16Array]"?pe+=Dn:K==="[object Int32Array]"?pe+=jt:K==="[object Uint32Array]"?pe+=he:K==="[object Float32Array]"?pe+=_e:K==="[object Float64Array]"?pe+=Pe:te(new Error("Failed to get type for BinaryArray"))),te(pe+tt(fe))}else if(K==="[object Blob]"){var oe=new FileReader;oe.onload=function(){var Se=Re+W.type+"~"+tt(this.result);te(Me+je+Se)},oe.readAsArrayBuffer(W)}else try{te(JSON.stringify(W))}catch(Se){console.error("Couldn't convert value into a JSON string: ",W),te(null,Se)}}function In(W){if(W.substring(0,Ut)!==Me)return JSON.parse(W);var te=W.substring(it),K=W.substring(Ut,it),fe;if(K===je&&Oe.test(te)){var pe=te.match(Oe);fe=pe[1],te=te.substring(pe[0].length)}var oe=ut(te);switch(K){case Qe:return oe;case je:return c([oe],{type:fe});case xt:return new Int8Array(oe);case et:return new Uint8Array(oe);case ft:return new Uint8ClampedArray(oe);case dt:return new Int16Array(oe);case Dn:return new Uint16Array(oe);case jt:return new Int32Array(oe);case he:return new Uint32Array(oe);case _e:return new Float32Array(oe);case Pe:return new Float64Array(oe);default:throw new Error("Unkown type: "+K)}}var Wt={serialize:wt,deserialize:In,stringToBuffer:ut,bufferToString:tt};function Vt(W,te,K,fe){W.executeSql("CREATE TABLE IF NOT EXISTS "+te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],K,fe)}function hr(W){var te=this,K={db:null};if(W)for(var fe in W)K[fe]=typeof W[fe]!="string"?W[fe].toString():W[fe];var pe=new f(function(oe,Se){try{K.db=openDatabase(K.name,String(K.version),K.description,K.size)}catch(De){return Se(De)}K.db.transaction(function(De){Vt(De,K,function(){te._dbInfo=K,oe()},function(ze,He){Se(He)})},Se)});return K.serializer=Wt,pe}function Yn(W,te,K,fe,pe,oe){W.executeSql(K,fe,pe,function(Se,De){De.code===De.SYNTAX_ERR?Se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[te.storeName],function(ze,He){He.rows.length?oe(ze,De):Vt(ze,te,function(){ze.executeSql(K,fe,pe,oe)},oe)},oe):oe(Se,De)},oe)}function Lu(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName+" WHERE key = ? LIMIT 1",[W],function(ze,He){var Ze=He.rows.length?He.rows.item(0).value:null;Ze&&(Ze=Se.serializer.deserialize(Ze)),pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Lr(W,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName,[],function(ze,He){for(var Ze=He.rows,St=Ze.length,gn=0;gn<St;gn++){var tr=Ze.item(gn),ur=tr.value;if(ur&&(ur=Se.serializer.deserialize(ur)),ur=W(ur,tr.key,gn+1),ur!==void 0){pe(ur);return}}pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function fs(W,te,K,fe){var pe=this;W=p(W);var oe=new f(function(Se,De){pe.ready().then(function(){te===void 0&&(te=null);var ze=te,He=pe._dbInfo;He.serializer.serialize(te,function(Ze,St){St?De(St):He.db.transaction(function(gn){Yn(gn,He,"INSERT OR REPLACE INTO "+He.storeName+" (key, value) VALUES (?, ?)",[W,Ze],function(){Se(ze)},function(tr,ur){De(ur)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(fe>0){Se(fs.apply(pe,[W,ze,K,fe-1]));return}De(gn)}})})}).catch(De)});return d(oe,K),oe}function ri(W,te,K){return fs.apply(this,[W,te,K,1])}function Ti(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"DELETE FROM "+Se.storeName+" WHERE key = ?",[W],function(){pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function qr(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"DELETE FROM "+oe.storeName,[],function(){fe()},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,W),K}function yr(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT COUNT(key) as c FROM "+oe.storeName,[],function(De,ze){var He=ze.rows.item(0).c;fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,W),K}function _t(W,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT key FROM "+Se.storeName+" WHERE id = ? LIMIT 1",[W+1],function(ze,He){var Ze=He.rows.length?He.rows.item(0).key:null;pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Fr(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT key FROM "+oe.storeName,[],function(De,ze){for(var He=[],Ze=0;Ze<ze.rows.length;Ze++)He.push(ze.rows.item(Ze).key);fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,W),K}function Ci(W){return new f(function(te,K){W.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(pe,oe){for(var Se=[],De=0;De<oe.rows.length;De++)Se.push(oe.rows.item(De).name);te({db:W,storeNames:Se})},function(pe,oe){K(oe)})},function(fe){K(fe)})})}function Qi(W,te){te=m.apply(this,arguments);var K=this.config();W=typeof W!="function"&&W||{},W.name||(W.name=W.name||K.name,W.storeName=W.storeName||K.storeName);var fe=this,pe;return W.name?pe=new f(function(oe){var Se;W.name===K.name?Se=fe._dbInfo.db:Se=openDatabase(W.name,"","",0),W.storeName?oe({db:Se,storeNames:[W.storeName]}):oe(Ci(Se))}).then(function(oe){return new f(function(Se,De){oe.db.transaction(function(ze){function He(tr){return new f(function(ur,Ai){ze.executeSql("DROP TABLE IF EXISTS "+tr,[],function(){ur()},function(si,Ga){Ai(Ga)})})}for(var Ze=[],St=0,gn=oe.storeNames.length;St<gn;St++)Ze.push(He(oe.storeNames[St]));f.all(Ze).then(function(){Se()}).catch(function(tr){De(tr)})},function(ze){De(ze)})})}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var to={_driver:"webSQLStorage",_initStorage:hr,_support:ke(),iterate:Lr,getItem:Lu,setItem:ri,removeItem:Ti,clear:qr,length:yr,key:_t,keys:Fr,dropInstance:Qi};function qa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ne(W,te){var K=W.name+"/";return W.storeName!==te.storeName&&(K+=W.storeName+"/"),K}function J(){var W="_localforage_support_test";try{return localStorage.setItem(W,!0),localStorage.removeItem(W),!1}catch{return!0}}function ie(){return!J()||localStorage.length>0}function ve(W){var te=this,K={};if(W)for(var fe in W)K[fe]=W[fe];return K.keyPrefix=ne(W,te._defaultConfig),ie()?(te._dbInfo=K,K.serializer=Wt,f.resolve()):f.reject()}function ye(W){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo.keyPrefix,pe=localStorage.length-1;pe>=0;pe--){var oe=localStorage.key(pe);oe.indexOf(fe)===0&&localStorage.removeItem(oe)}});return d(K,W),K}function yt(W,te){var K=this;W=p(W);var fe=K.ready().then(function(){var pe=K._dbInfo,oe=localStorage.getItem(pe.keyPrefix+W);return oe&&(oe=pe.serializer.deserialize(oe)),oe});return d(fe,te),fe}function Ae(W,te){var K=this,fe=K.ready().then(function(){for(var pe=K._dbInfo,oe=pe.keyPrefix,Se=oe.length,De=localStorage.length,ze=1,He=0;He<De;He++){var Ze=localStorage.key(He);if(Ze.indexOf(oe)===0){var St=localStorage.getItem(Ze);if(St&&(St=pe.serializer.deserialize(St)),St=W(St,Ze.substring(Se),ze++),St!==void 0)return St}}});return d(fe,te),fe}function pt(W,te){var K=this,fe=K.ready().then(function(){var pe=K._dbInfo,oe;try{oe=localStorage.key(W)}catch{oe=null}return oe&&(oe=oe.substring(pe.keyPrefix.length)),oe});return d(fe,te),fe}function Bt(W){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo,pe=localStorage.length,oe=[],Se=0;Se<pe;Se++){var De=localStorage.key(Se);De.indexOf(fe.keyPrefix)===0&&oe.push(De.substring(fe.keyPrefix.length))}return oe});return d(K,W),K}function At(W){var te=this,K=te.keys().then(function(fe){return fe.length});return d(K,W),K}function Ht(W,te){var K=this;W=p(W);var fe=K.ready().then(function(){var pe=K._dbInfo;localStorage.removeItem(pe.keyPrefix+W)});return d(fe,te),fe}function fn(W,te,K){var fe=this;W=p(W);var pe=fe.ready().then(function(){te===void 0&&(te=null);var oe=te;return new f(function(Se,De){var ze=fe._dbInfo;ze.serializer.serialize(te,function(He,Ze){if(Ze)De(Ze);else try{localStorage.setItem(ze.keyPrefix+W,He),Se(oe)}catch(St){(St.name==="QuotaExceededError"||St.name==="NS_ERROR_DOM_QUOTA_REACHED")&&De(St),De(St)}})})});return d(pe,K),pe}function Tr(W,te){if(te=m.apply(this,arguments),W=typeof W!="function"&&W||{},!W.name){var K=this.config();W.name=W.name||K.name,W.storeName=W.storeName||K.storeName}var fe=this,pe;return W.name?pe=new f(function(oe){W.storeName?oe(ne(W,fe._defaultConfig)):oe(W.name+"/")}).then(function(oe){for(var Se=localStorage.length-1;Se>=0;Se--){var De=localStorage.key(Se);De.indexOf(oe)===0&&localStorage.removeItem(De)}}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var zt={_driver:"localStorageWrapper",_initStorage:ve,_support:qa(),iterate:Ae,getItem:yt,setItem:fn,removeItem:Ht,clear:ye,length:At,key:pt,keys:Bt,dropInstance:Tr},pr=function(te,K){return te===K||typeof te=="number"&&typeof K=="number"&&isNaN(te)&&isNaN(K)},Xt=function(te,K){for(var fe=te.length,pe=0;pe<fe;){if(pr(te[pe],K))return!0;pe++}return!1},er=Array.isArray||function(W){return Object.prototype.toString.call(W)==="[object Array]"},ii={},ds={},zi={INDEXEDDB:Fe,WEBSQL:to,LOCALSTORAGE:zt},da=[zi.INDEXEDDB._driver,zi.WEBSQL._driver,zi.LOCALSTORAGE._driver],no=["dropInstance"],vi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(no),bt={description:"",driver:da.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wn(W,te){W[te]=function(){var K=arguments;return W.ready().then(function(){return W[te].apply(W,K)})}}function Br(){for(var W=1;W<arguments.length;W++){var te=arguments[W];if(te)for(var K in te)te.hasOwnProperty(K)&&(er(te[K])?arguments[0][K]=te[K].slice():arguments[0][K]=te[K])}return arguments[0]}var $s=function(){function W(te){o(this,W);for(var K in zi)if(zi.hasOwnProperty(K)){var fe=zi[K],pe=fe._driver;this[K]=pe,ii[pe]||this.defineDriver(fe)}this._defaultConfig=Br({},bt),this._config=Br({},this._defaultConfig,te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return W.prototype.config=function(K){if((typeof K>"u"?"undefined":s(K))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in K){if(fe==="storeName"&&(K[fe]=K[fe].replace(/\W/g,"_")),fe==="version"&&typeof K[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=K[fe]}return"driver"in K&&K.driver?this.setDriver(this._config.driver):!0}else return typeof K=="string"?this._config[K]:this._config},W.prototype.defineDriver=function(K,fe,pe){var oe=new f(function(Se,De){try{var ze=K._driver,He=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!K._driver){De(He);return}for(var Ze=vi.concat("_initStorage"),St=0,gn=Ze.length;St<gn;St++){var tr=Ze[St],ur=!Xt(no,tr);if((ur||K[tr])&&typeof K[tr]!="function"){De(He);return}}var Ai=function(){for(var oy=function(R8){return function(){var d_=new Error("Method "+R8+" is not implemented by the current driver"),h_=f.reject(d_);return d(h_,arguments[arguments.length-1]),h_}},Fx=0,Bx=no.length;Fx<Bx;Fx++){var jx=no[Fx];K[jx]||(K[jx]=oy(jx))}};Ai();var si=function(oy){ii[ze]&&console.info("Redefining LocalForage driver: "+ze),ii[ze]=K,ds[ze]=oy,Se()};"_support"in K?K._support&&typeof K._support=="function"?K._support().then(si,De):si(!!K._support):si(!0)}catch(Ga){De(Ga)}});return h(oe,fe,pe),oe},W.prototype.driver=function(){return this._driver||null},W.prototype.getDriver=function(K,fe,pe){var oe=ii[K]?f.resolve(ii[K]):f.reject(new Error("Driver not found."));return h(oe,fe,pe),oe},W.prototype.getSerializer=function(K){var fe=f.resolve(Wt);return h(fe,K),fe},W.prototype.ready=function(K){var fe=this,pe=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(pe,K,K),pe},W.prototype.setDriver=function(K,fe,pe){var oe=this;er(K)||(K=[K]);var Se=this._getSupportedDrivers(K);function De(){oe._config.driver=oe.driver()}function ze(St){return oe._extend(St),De(),oe._ready=oe._initStorage(oe._config),oe._ready}function He(St){return function(){var gn=0;function tr(){for(;gn<St.length;){var ur=St[gn];return gn++,oe._dbInfo=null,oe._ready=null,oe.getDriver(ur).then(ze).catch(tr)}De();var Ai=new Error("No available storage method found.");return oe._driverSet=f.reject(Ai),oe._driverSet}return tr()}}var Ze=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ze.then(function(){var St=Se[0];return oe._dbInfo=null,oe._ready=null,oe.getDriver(St).then(function(gn){oe._driver=gn._driver,De(),oe._wrapLibraryMethodsWithReady(),oe._initDriver=He(Se)})}).catch(function(){De();var St=new Error("No available storage method found.");return oe._driverSet=f.reject(St),oe._driverSet}),h(this._driverSet,fe,pe),this._driverSet},W.prototype.supports=function(K){return!!ds[K]},W.prototype._extend=function(K){Br(this,K)},W.prototype._getSupportedDrivers=function(K){for(var fe=[],pe=0,oe=K.length;pe<oe;pe++){var Se=K[pe];this.supports(Se)&&fe.push(Se)}return fe},W.prototype._wrapLibraryMethodsWithReady=function(){for(var K=0,fe=vi.length;K<fe;K++)wn(this,vi[K])},W.prototype.createInstance=function(K){return new W(K)},W}(),Wa=new $s;r.exports=Wa},{3:3}]},{},[4])(4)})})(OFe);var PYt=OFe.exports;const MH=bl(PYt);class PFe{constructor(t){Bu(this,"engine");Bu(this,"connected",!1);Bu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function tw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class Uh extends PFe{constructor(){super("firebase");Bu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");Bu(this,"firestore");Bu(this,"collectionPrefix","prod-");Bu(this,"studyCollection");Bu(this,"studyId","");Bu(this,"localForage",MH.createInstance({name:"currentParticipantId"}));Bu(this,"localProvenanceCopy",{});Bu(this,"localWindowEvents",{});const n=TQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=eLe(n);this.firestore=SGt(r,{});try{CYt(r,{provider:new RZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await TGt(this.firestore);const n=await ma(this.firestore,".info/connected");await ek(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=H3();if(!i.currentUser&&(await tzt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await tw(JSON.stringify(r));await this.localForage.setItem("currentConfigHash",s),this.studyCollection=CS(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const o=ma(this.studyCollection,"configs"),a=CS(o,"configs"),u=ma(a,s);return await Bf(u,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=ma(this.studyCollection,this.currentParticipantId),a=(await ek(o)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([c,f])=>{a!==null&&(f===void 0||f.length===0?a.answers[c].windowEvents=[]:a.answers[c].windowEvents=f)}),a)return a;const u=await tw(JSON.stringify(r)),l={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1};return await Bf(o,l),l}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ma(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=ma(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await Bf(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=ma(this.studyCollection,"sequenceAssignment"),i=CS(r,"sequenceAssignment"),s=ma(i,this.currentParticipantId);await Bf(s,{participantId:this.currentParticipantId,timestamp:HGt()});const o=MGt(i,LGt("timestamp","asc")),l=(await tk(o)).docs.map(f=>f.data()).findIndex(f=>f.participantId===this.currentParticipantId),c=n[l%n.length];if(!c)throw new Error("Latin square is empty");return c}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await tk(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let n=null;if(this.currentParticipantId!==null){const r=ma(this.studyCollection,this.currentParticipantId);if(n=(await ek(r)).data(),n!==null){const i=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),s=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents");Object.entries(n.answers).forEach(([o,a])=>{a!==void 0&&(a.provenanceGraph=i[o],a.windowEvents=s[o])})}}return n}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ma(this.studyCollection),s=i.id;await this.localForage.setItem("currentParticipantId",s),this.currentParticipantId=s;let o=null;if(this.currentParticipantId!==null&&(o=(await ek(i)).data()),!o){const a=await tw(JSON.stringify(n)),u={participantId:s,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1};await Bf(i,u),o=u}return o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=ma(this.studyCollection,this.currentParticipantId);return await Bf(r,{completed:!0},{merge:!0}),n.completed=!0,!0}async getUserManagementData(n){const r=CS(this.firestore,"user-management"),i=await tk(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));return!!(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null))}}return!0}return!1}async changeAuth(n){await Bf(ma(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Bf(ma(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Bf(ma(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Bf(ma(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=CS(this.firestore,`${this.collectionPrefix}${n}`),i=await tk(r),s=[],o=i.docs.map(async a=>{if(a.id==="config"||a.id==="sequenceArray")return;const u=a.data(),l=await this._getFromFirebaseStorage(u.participantId,"provenance"),c=await this._getFromFirebaseStorage(u.participantId,"windowEvents");u.answers=Object.fromEntries(Object.entries(u.answers).map(([f,d])=>{if(d===void 0)return[f,d];const h=l[f],p=c[f];return[f,{...d,provenanceGraph:h,windowEvents:p}]})),s.push(u)});return await Promise.all(o),s}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Age(),s=Cge(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await PVt(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=Age(),o=Cge(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await OVt(o,a)}}}const kFe=C.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),gx=()=>C.useContext(kFe);function kYt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=C.useState(t),[o,a]=C.useState(!1),{storageEngine:u}=ja(),l=async()=>{const h=H3();try{await uzt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;C.useEffect(()=>{s(t);let h;if(u instanceof Uh)try{h=H3()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof Uh){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=azt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=C.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return I.jsx(kFe.Provider,{value:d,children:i.determiningStatus?I.jsx(M0,{visible:!0}):e})}function $Yt(){const{config:e,metadata:t}=Sf(y=>y),n=lh(),r=uh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=ah(),{storageEngine:o}=ja(),a=_c();gx();const u=n.length-1,l=a/u*100,[c,f]=C.useState(!1),d=e==null?void 0:e.uiConfig.logoPath,h=e==null?void 0:e.uiConfig.withProgressBar,p=o4(),m=ZYe(`/${p}`);function g(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=m}).catch(y=>{console.error(y)})}return C.useEffect(()=>{},[o,e]),I.jsx(nY,{height:"70",p:"md",children:I.jsxs(du,{mt:-7,align:"center",children:[I.jsx(du.Col,{span:4,children:I.jsxs(qi,{align:"center",children:[I.jsx(Nv,{maw:40,src:`${hc}${d}`,alt:"Study Logo"}),I.jsx(O6,{w:"md"}),I.jsx(Ho,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e==null?void 0:e.studyMetadata.title})]})}),I.jsx(du.Col,{span:4,children:h&&I.jsx($Ae,{radius:"md",size:"lg",value:l})}),I.jsx(du.Col,{span:4,children:I.jsxs(ll,{noWrap:!0,position:"right",children:[I.jsx(I6,{multiline:!0,withArrow:!0,arrowSize:6,width:300,label:"This is a demo version of the study, were not collecting any data. Navigate the study via the study browser on the right.",children:I.jsx(b1,{size:"lg",color:"orange",children:"Demo Mode"})}),(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&I.jsx(Yr,{variant:"outline",onClick:()=>r(i()),children:"Help"}),I.jsxs(Fl,{shadow:"md",width:200,zIndex:1,opened:c,onChange:f,children:[I.jsx(Fl.Target,{children:I.jsx(cC,{size:"lg",className:"studyBrowserMenuDropdown",children:I.jsx(Imt,{})})}),I.jsxs(Fl.Dropdown,{children:[I.jsx(Fl.Item,{icon:I.jsx(Zce,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),I.jsx(Fl.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:I.jsx(Pmt,{size:14}),children:"Contact"}),I.jsx(Fl.Item,{icon:I.jsx(Zce,{size:14}),onClick:()=>g(),children:"Next Participant"})]})]})]})})]})})}function RYt(){var l;const e=(l=Zg())==null?void 0:l.uiConfig.sidebar,t=Zg(),n=_c(),r=lh()[n],i=t.components[r],s=C.useMemo(()=>{var c;return i?lF(i)&&t.baseComponents?uK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i,t.baseComponents]),o=lK(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?I.jsxs(KT,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&I.jsx(KT.Section,{bg:"gray.3",p:"xl",children:I.jsxs(ct,{c:"gray.9",children:[I.jsx(ct,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),I.jsx(ka,{text:a})]})}),I.jsx(KT.Section,{p:"xl",children:I.jsx(MD,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):I.jsx(MD,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function NYt(){const{showHelpText:e,config:t}=Sf(o=>o),n=uh(),{toggleShowHelpText:r}=ah(),[i,s]=C.useState("");return C.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${hc}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),I.jsx(Og,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:I.jsx(ka,{text:i})})}function DYt(){const{alertModal:e}=Sf(o=>o),{setAlertModal:t}=ah(),n=uh(),[r,i]=C.useState(e.show),s=C.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return C.useEffect(()=>i(e.show),[e.show]),I.jsx(Og,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:I.jsxs(PSe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:I.jsx(mmt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[I.jsx(ct,{my:"md",children:e.message}),I.jsx(st,{style:{float:"right"},color:"red",children:I.jsx(Yr,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function MYt(){const e=C.useRef([]),n=Zg().uiConfig.windowEventDebounceTime??100;return C.useEffect(()=>{const r=Uf(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=Uf(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=Uf(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=Uf(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=Uf(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=Uf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=Uf(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=Uf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=Uf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),I.jsx(zPe.Provider,{value:e,children:I.jsxs(WA,{navbar:I.jsx(RYt,{}),aside:I.jsx(BBt,{}),header:I.jsx($Yt,{}),children:[I.jsx(NYt,{}),I.jsx(DYt,{}),I.jsx(fKe,{})]})})}function LYt(e,t=!1){return typeof e=="number"?P0e(e,t):P0e(e.length,t).map(r=>r.map(i=>e[i]))}function P0e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function $Fe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=$Fe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function FYt(e,t){const n=E1(e);return $Fe(n,t,"root")}function RFe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&RFe(s,t,i,o)})}function BYt(e){const t=[];return RFe(e,t,"",0),t}function k0e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return LYt(i.sort(()=>.5-Math.random()),!0)}function jYt(e){const n=BYt(e.sequence).map(s=>({[s]:k0e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=FYt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=k0e(e,o))})}),i}async function zYt(e,t){const n=await(await fetch(`${hc}${e}`)).text();return BMe(n,t)}async function NZ(e,t){const n=t.configsList.find(r=>$Y(r)===e);if(n){const r=t.configs[n];return await zYt(`${r.path}`,n)}return null}function UYt(){return I.jsx(om,{pt:100,children:I.jsx(Rp,{children:I.jsxs(Ho,{order:3,children:[I.jsx(ct,{span:!0,c:"orange",children:"Study ID"})," ","not Found, please check valid Study ID on your global config, or contact the administrator."]})})})}function VYt({globalConfig:e}){const t=o4(),[n,r]=C.useState(null),i=e.configsList.find(p=>$Y(p)===t),s=gx();C.useEffect(()=>{NZ(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=C.useState([]),[u,l]=C.useState(null),{storageEngine:c}=ja(),[f]=BG();C.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await jYt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(x=>""),_=v instanceof Response?await v.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:_.ip},E=await c.initializeParticipantSession(y,n,b,g),w=await QEt(t,n,E.sequence,b,E.answers,s.user.isAdmin);l(w),a([{element:I.jsx(MYt,{}),children:[{path:"/",element:I.jsx(eH,{to:"0",replace:!0})},{path:"/:index",element:n.errors?I.jsxs(I.Fragment,{children:[I.jsx(Ho,{order:2,mb:8,children:"Error loading config"}),I.jsx(sPe,{errors:n.errors})]}):I.jsx(RBt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=pxe(o),h=!d||!u?I.jsx(M0,{visible:!0}):I.jsx(jPe.Provider,{value:u,children:I.jsx(Wwt,{store:u.store,children:d})});return i?h:I.jsx(UYt,{})}function C2({studyIds:e}){const t=tm(),{studyId:n}=oC(),r=UA(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=ja(),{user:o,logout:a}=gx(),[u,l]=C.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:I.jsx(Omt,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:I.jsx(wmt,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:I.jsx(Rmt,{}),href:"/settings",needAdmin:!0}];return I.jsx(nY,{height:70,p:"md",children:I.jsxs(du,{mt:-7,align:"center",children:[I.jsx(du.Col,{span:6,children:I.jsxs(qi,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),sx:{cursor:"pointer"},children:[I.jsx(Nv,{maw:40,src:`${hc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),I.jsx(O6,{w:"md"}),I.jsx(Ho,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),I.jsx(du.Col,{span:6,children:I.jsxs(qi,{justify:"flex-end",direction:"row",children:[c&&I.jsx(CY,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),I.jsx(v2e,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),I.jsx(oCe,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:I.jsxs(qi,{direction:"column",mt:20,children:[I.jsx(ct,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?I.jsx(Yr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:I.jsx(Yr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),I.jsxs(st,{ml:10,children:[I.jsx(QR,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?I.jsx(ct,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):I.jsx(ct,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function HYt({cellData:e}){return I.jsx("td",{children:I.jsx(gd,{miw:100,children:Object.entries(e.answer).map(([t,n])=>I.jsxs(st,{children:[I.jsxs(ct,{fw:700,span:!0,children:[" ",`${t}: `]}),I.jsx(ct,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function $0e({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return I.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function qYt(e){const{metaData:t}=e;return I.jsx("td",{children:I.jsx(rIe,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:I.jsxs(gd,{spacing:"xs",children:[I.jsxs(st,{children:["IP:"," ",t.ip]}),I.jsxs(st,{children:["Language:"," ",t.language]}),I.jsxs(st,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),I.jsxs(st,{children:["User Agent:"," ",t.userAgent]})]})})})}function WYt({completed:e,inProgress:t,studyConfig:n}){const r=BPe(n.sequence),i=[I.jsx("th",{children:"ID/Status"},"ID"),I.jsx("th",{children:"Meta"},"meta"),...r.flatMap(o=>[I.jsx("th",{children:o.componentName},`header-${o.componentName}-${o.timesSeenInBlock}`),I.jsxs("th",{children:[o.componentName," ","Duration"]},`header-${o.componentName}-${o.timesSeenInBlock}-duration`)]),I.jsx("th",{children:"Total Duration"},"total-duration")],s=[...e,...t].map(o=>I.jsxs("tr",{children:[I.jsx("td",{children:I.jsxs(st,{sx:{display:"block",whiteSpace:"nowrap"},children:[o.participantId,"  ",o.completed?I.jsx(Smt,{size:16,color:"teal",style:{marginBottom:-3}}):I.jsx($mt,{size:16,color:"orange",style:{marginBottom:-3}})]})}),o.metadata?I.jsx(qYt,{metaData:o.metadata}):I.jsx("td",{children:"N/A"}),r.map(a=>{const u=LPe(o.sequence,a.orderPath),l=u&&Object.entries(o.answers).sort((c,f)=>{const d=parseInt(c[0].slice(c[0].lastIndexOf("_")+1),10),h=parseInt(f[0].slice(f[0].lastIndexOf("_")+1),10);return d-h}).filter(([c])=>{const f=c.slice(0,c.lastIndexOf("_")),d=parseInt(c.slice(c.lastIndexOf("_")+1),10);return f===a.componentName&&d<=u[0].lastIndex&&d>=u[0].firstIndex});return l!==null&&l.length>=a.timesSeenInBlock+1?I.jsxs(M.Fragment,{children:[I.jsx(HYt,{cellData:l[a.timesSeenInBlock][1]}),I.jsx($0e,{cellData:l[a.timesSeenInBlock][1]})]},`cellgroup-${o.participantId}-${a.componentName}-${a.timesSeenInBlock}`):I.jsxs(M.Fragment,{children:[I.jsx("td",{children:"N/A"}),I.jsx("td",{children:"N/A"})]},`cellgroup-${o.participantId}-${a.componentName}-${a.timesSeenInBlock}`)}),I.jsx($0e,{cellData:{startTime:Math.min(...Object.values(o.answers).map(a=>a.startTime)),endTime:Math.max(...Object.values(o.answers).map(a=>a.endTime)),answer:{},windowEvents:[]}},`cell-${o.participantId}-total-duration`)]},o.participantId));return[...e,...t].length>0?I.jsxs(oIe,{children:[I.jsx("thead",{children:I.jsx("tr",{children:i})}),I.jsx("tbody",{children:s})]}):I.jsx(qi,{justify:"center",align:"center",style:{height:"100%"},children:I.jsx(ct,{children:"No data available"})})}function GYt(e){const{globalConfig:t}=e,{studyId:n}=oC(),[r,i]=C.useState([]),[s,o]=C.useState(void 0),[a,u]=C.useState(!1),{storageEngine:l}=ja(),c=tm(),{tab:f}=oC();C.useEffect(()=>{(async()=>{if(u(!0),n){const m=await NZ(n,t);if(!m||!l)return;await l.initializeStudyDb(n,m);const g=await l.getAllParticipantsData();i(g),o(m)}u(!1)})()},[t,l,n]);const[d,h]=C.useMemo(()=>{const p=r.filter(g=>g.completed),m=r.filter(g=>!g.completed);return[p,m]},[r]);return I.jsxs(WA,{children:[I.jsx(C2,{studyIds:e.globalConfig.configsList}),I.jsxs(om,{fluid:!0,style:{height:"100%"},children:[I.jsx(M0,{visible:a}),I.jsxs(Nl,{variant:"outline",value:f,onTabChange:p=>c(`./../${p}`),style:{height:"100%"},children:[I.jsxs(Nl.List,{children:[I.jsx(Nl.Tab,{value:"table",icon:I.jsx(kY,{size:16}),children:"Table View"}),I.jsx(Nl.Tab,{value:"stats",icon:I.jsx(Emt,{size:16}),children:"Trial Stats"}),I.jsx(Nl.Tab,{value:"settings",icon:I.jsx(kmt,{size:16}),children:"Individual Replay"})]}),I.jsx(Nl.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&I.jsx(WYt,{completed:d,inProgress:h,studyConfig:s})}),I.jsx(Nl.Panel,{value:"stats",pt:"xs",children:"statsboard"}),I.jsx(Nl.Panel,{value:"settings",pt:"xs",children:"Settings tab content"})]})]})]})}function Fj({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=gx(),{storageEngine:i}=ja();return C.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?I.jsx(M0,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?I.jsx(FG,{to:"/login"}):I.jsx(I.Fragment,{children:e})}async function NFe(e,t,n){if(e instanceof Uh){t(!0);const r=new Qh,i=H3();try{await Ozt(i,r)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function YYt(){const{user:e}=gx(),[t,n]=C.useState(null),[r,i]=C.useState(!1),{storageEngine:s}=ja();return C.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?I.jsx(FG,{to:"/"}):I.jsx(om,{children:I.jsx(T6,{p:"lg",children:I.jsxs(qi,{align:"center",direction:"column",justify:"center",children:[I.jsx(Nv,{maw:200,mt:50,mb:100,src:`${hc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),I.jsxs(I.Fragment,{children:[I.jsx(ct,{mb:20,children:"To access admin settings, please sign in using your Google account."}),I.jsx(Yr,{onClick:()=>NFe(s,i,n),leftIcon:I.jsx(bmt,{}),variant:"filled",children:"Sign In With Google"})]}),t?I.jsx(b1,{size:"lg",color:"red",mt:30,children:t}):null,I.jsx(M0,{visible:r})]})})})}function KYt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function DFe(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function XYt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=KYt(i,t),o=DFe(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var MFe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(cu,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var N=["th","st","nd","rd"],L=R%100;return"["+R+(N[(L-20)%10]||N[L]||N[0])+"]"}},_=function(R,N,L){var V=String(R);return!V||V.length>=N?R:""+Array(N+1-V.length).join(L)+R},b={s:_,z:function(R){var N=-R.utcOffset(),L=Math.abs(N),V=Math.floor(L/60),j=L%60;return(N<=0?"+":"-")+_(V,2,"0")+":"+_(j,2,"0")},m:function R(N,L){if(N.date()<L.date())return-R(L,N);var V=12*(L.year()-N.year())+(L.month()-N.month()),j=N.clone().add(V,f),H=L-j<0,U=N.clone().add(V+(H?-1:1),f);return+(-(V+(L-j)/(H?j-U:U-j))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},E="en",w={};w[E]=v;var x="$isDayjsObject",S=function(R){return R instanceof z||!(!R||!R[x])},P=function R(N,L,V){var j;if(!N)return E;if(typeof N=="string"){var H=N.toLowerCase();w[H]&&(j=H),L&&(w[H]=L,j=H);var U=N.split("-");if(!j&&U.length>1)return R(U[0])}else{var k=N.name;w[k]=N,j=k}return!V&&j&&(E=j),j||!V&&E},A=function(R,N){if(S(R))return R.clone();var L=typeof N=="object"?N:{};return L.date=R,L.args=arguments,new z(L)},O=b;O.l=P,O.i=S,O.w=function(R,N){return A(R,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var z=function(){function R(L){this.$L=P(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[x]=!0}var N=R.prototype;return N.parse=function(L){this.$d=function(V){var j=V.date,H=V.utc;if(j===null)return new Date(NaN);if(O.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var U=j.match(g);if(U){var k=U[2]-1||0,$=(U[7]||"0").substring(0,3);return H?new Date(Date.UTC(U[1],k,U[3]||1,U[4]||0,U[5]||0,U[6]||0,$)):new Date(U[1],k,U[3]||1,U[4]||0,U[5]||0,U[6]||0,$)}}return new Date(j)}(L),this.init()},N.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},N.$utils=function(){return O},N.isValid=function(){return this.$d.toString()!==m},N.isSame=function(L,V){var j=A(L);return this.startOf(V)<=j&&j<=this.endOf(V)},N.isAfter=function(L,V){return A(L)<this.startOf(V)},N.isBefore=function(L,V){return this.endOf(V)<A(L)},N.$g=function(L,V,j){return O.u(L)?this[V]:this.set(j,L)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(L,V){var j=this,H=!!O.u(V)||V,U=O.p(L),k=function(ce,le){var ge=O.w(j.$u?Date.UTC(j.$y,le,ce):new Date(j.$y,le,ce),j);return H?ge:ge.endOf(l)},$=function(ce,le){return O.w(j.toDate()[ce].apply(j.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(le)),j)},q=this.$W,F=this.$M,B=this.$D,Q="set"+(this.$u?"UTC":"");switch(U){case h:return H?k(1,0):k(31,11);case f:return H?k(1,F):k(0,F+1);case c:var se=this.$locale().weekStart||0,ae=(q<se?q+7:q)-se;return k(H?B-ae:B+(6-ae),F);case l:case p:return $(Q+"Hours",0);case u:return $(Q+"Minutes",1);case a:return $(Q+"Seconds",2);case o:return $(Q+"Milliseconds",3);default:return this.clone()}},N.endOf=function(L){return this.startOf(L,!1)},N.$set=function(L,V){var j,H=O.p(L),U="set"+(this.$u?"UTC":""),k=(j={},j[l]=U+"Date",j[p]=U+"Date",j[f]=U+"Month",j[h]=U+"FullYear",j[u]=U+"Hours",j[a]=U+"Minutes",j[o]=U+"Seconds",j[s]=U+"Milliseconds",j)[H],$=H===l?this.$D+(V-this.$W):V;if(H===f||H===h){var q=this.clone().set(p,1);q.$d[k]($),q.init(),this.$d=q.set(p,Math.min(this.$D,q.daysInMonth())).$d}else k&&this.$d[k]($);return this.init(),this},N.set=function(L,V){return this.clone().$set(L,V)},N.get=function(L){return this[O.p(L)]()},N.add=function(L,V){var j,H=this;L=Number(L);var U=O.p(V),k=function(F){var B=A(H);return O.w(B.date(B.date()+Math.round(F*L)),H)};if(U===f)return this.set(f,this.$M+L);if(U===h)return this.set(h,this.$y+L);if(U===l)return k(1);if(U===c)return k(7);var $=(j={},j[a]=r,j[u]=i,j[o]=n,j)[U]||1,q=this.$d.getTime()+L*$;return O.w(q,this)},N.subtract=function(L,V){return this.add(-1*L,V)},N.format=function(L){var V=this,j=this.$locale();if(!this.isValid())return j.invalidDate||m;var H=L||"YYYY-MM-DDTHH:mm:ssZ",U=O.z(this),k=this.$H,$=this.$m,q=this.$M,F=j.weekdays,B=j.months,Q=j.meridiem,se=function(le,ge,ue,Fe){return le&&(le[ge]||le(V,H))||ue[ge].slice(0,Fe)},ae=function(le){return O.s(k%12||12,le,"0")},ce=Q||function(le,ge,ue){var Fe=le<12?"AM":"PM";return ue?Fe.toLowerCase():Fe};return H.replace(y,function(le,ge){return ge||function(ue){switch(ue){case"YY":return String(V.$y).slice(-2);case"YYYY":return O.s(V.$y,4,"0");case"M":return q+1;case"MM":return O.s(q+1,2,"0");case"MMM":return se(j.monthsShort,q,B,3);case"MMMM":return se(B,q);case"D":return V.$D;case"DD":return O.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return se(j.weekdaysMin,V.$W,F,2);case"ddd":return se(j.weekdaysShort,V.$W,F,3);case"dddd":return F[V.$W];case"H":return String(k);case"HH":return O.s(k,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return ce(k,$,!0);case"A":return ce(k,$,!1);case"m":return String($);case"mm":return O.s($,2,"0");case"s":return String(V.$s);case"ss":return O.s(V.$s,2,"0");case"SSS":return O.s(V.$ms,3,"0");case"Z":return U}return null}(le)||U.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(L,V,j){var H,U=this,k=O.p(V),$=A(L),q=($.utcOffset()-this.utcOffset())*r,F=this-$,B=function(){return O.m(U,$)};switch(k){case h:H=B()/12;break;case f:H=B();break;case d:H=B()/3;break;case c:H=(F-q)/6048e5;break;case l:H=(F-q)/864e5;break;case u:H=F/i;break;case a:H=F/r;break;case o:H=F/n;break;default:H=F}return j?H:O.a(H)},N.daysInMonth=function(){return this.endOf(f).$D},N.$locale=function(){return w[this.$L]},N.locale=function(L,V){if(!L)return this.$L;var j=this.clone(),H=P(L,V,!0);return H&&(j.$L=H),j},N.clone=function(){return O.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},R}(),D=z.prototype;return A.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(R){D[R[1]]=function(N){return this.$g(N,R[0],R[1])}}),A.extend=function(R,N){return R.$i||(R(N,z,A),R.$i=!0),A},A.locale=P,A.isDayjs=S,A.unix=function(R){return A(1e3*R)},A.en=w[E],A.Ls=w,A.p={},A})})(MFe);var QYt=MFe.exports;const xn=bl(QYt);function JYt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(xn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function ZYt(e,t="monday",n="dd"){const r=[],i=DFe(new Date,t);for(let s=0;s<7;s+=1)r.push(xn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function LFe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Kp(e,t){return LFe(e,t)&&e.getDate()===t.getDate()}function eKt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var tKt=Object.defineProperty,nKt=Object.defineProperties,rKt=Object.getOwnPropertyDescriptors,rM=Object.getOwnPropertySymbols,FFe=Object.prototype.hasOwnProperty,BFe=Object.prototype.propertyIsEnumerable,R0e=(e,t,n)=>t in e?tKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N0e=(e,t)=>{for(var n in t||(t={}))FFe.call(t,n)&&R0e(e,n,t[n]);if(rM)for(var n of rM(t))BFe.call(t,n)&&R0e(e,n,t[n]);return e},iKt=(e,t)=>nKt(e,rKt(t)),sKt=(e,t)=>{var n={};for(var r in e)FFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rM)for(var r of rM(e))t.indexOf(r)<0&&BFe.call(e,r)&&(n[r]=e[r]);return n};function LH(e){var t=e,{direction:n,style:r}=t,i=sKt(t,["direction","style"]);const s=cs();return M.createElement("svg",N0e({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:iKt(N0e({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),M.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}LH.displayName="@mantine/dates/ArrowIcon";var oKt=Object.defineProperty,aKt=Object.defineProperties,uKt=Object.getOwnPropertyDescriptors,D0e=Object.getOwnPropertySymbols,lKt=Object.prototype.hasOwnProperty,cKt=Object.prototype.propertyIsEnumerable,M0e=(e,t,n)=>t in e?oKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fKt=(e,t)=>{for(var n in t||(t={}))lKt.call(t,n)&&M0e(e,n,t[n]);if(D0e)for(var n of D0e(t))cKt.call(t,n)&&M0e(e,n,t[n]);return e},dKt=(e,t)=>aKt(e,uKt(t));const Bj={xs:32,sm:40,md:44,lg:50,xl:54};var hKt=lt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:Bj}),height:e.fn.size({size:t,sizes:Bj}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:dKt(fKt({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:Bj}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),pKt=Object.defineProperty,iM=Object.getOwnPropertySymbols,jFe=Object.prototype.hasOwnProperty,zFe=Object.prototype.propertyIsEnumerable,L0e=(e,t,n)=>t in e?pKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mKt=(e,t)=>{for(var n in t||(t={}))jFe.call(t,n)&&L0e(e,n,t[n]);if(iM)for(var n of iM(t))zFe.call(t,n)&&L0e(e,n,t[n]);return e},gKt=(e,t)=>{var n={};for(var r in e)jFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iM)for(var r of iM(e))t.indexOf(r)<0&&zFe.call(e,r)&&(n[r]=e[r]);return n};const yKt={xs:12,sm:14,md:18,lg:22,xl:28};function UF(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,b=gKt(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:E,cx:w,theme:x}=hKt({size:c},{classNames:f,styles:d,unstyled:v,name:h}),S=x.fn.size({size:c,sizes:yKt});return M.createElement("div",mKt({className:w(E.calendarHeader,a)},b),M.createElement(cC,{className:E.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:P=>y&&P.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},M.createElement(LH,{direction:"left",width:S,height:S})),M.createElement(nm,{unstyled:v,className:E.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:P=>y&&P.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&M.createElement(nAe,{error:!1,size:c,className:E.calendarHeaderLevelIcon})),M.createElement(cC,{className:E.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:P=>y&&P.preventDefault(),"data-mantine-stop-propagation":_||void 0},M.createElement(LH,{direction:"right",width:S,height:S})))}UF.displayName="@mantine/dates/CalendarHeader";function D$(e,t){return xn(new Date(e,1,1)).format(t)}var vKt=Object.defineProperty,_Kt=Object.defineProperties,bKt=Object.getOwnPropertyDescriptors,F0e=Object.getOwnPropertySymbols,wKt=Object.prototype.hasOwnProperty,EKt=Object.prototype.propertyIsEnumerable,B0e=(e,t,n)=>t in e?vKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jj=(e,t)=>{for(var n in t||(t={}))wKt.call(t,n)&&B0e(e,n,t[n]);if(F0e)for(var n of F0e(t))EKt.call(t,n)&&B0e(e,n,t[n]);return e},xKt=(e,t)=>_Kt(e,bKt(t));const SKt={xs:32,sm:40,md:46,lg:52,xl:56};var TKt=lt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:xKt(jj({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:SKt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":jj({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:jj({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),CKt=Object.defineProperty,sM=Object.getOwnPropertySymbols,UFe=Object.prototype.hasOwnProperty,VFe=Object.prototype.propertyIsEnumerable,j0e=(e,t,n)=>t in e?CKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AKt=(e,t)=>{for(var n in t||(t={}))UFe.call(t,n)&&j0e(e,n,t[n]);if(sM)for(var n of sM(t))VFe.call(t,n)&&j0e(e,n,t[n]);return e},IKt=(e,t)=>{var n={};for(var r in e)UFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sM)for(var r of sM(e))t.indexOf(r)<0&&VFe.call(e,r)&&(n[r]=e[r]);return n};function HFe(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=IKt(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=TKt({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[b,E]=C.useState(s),w=eKt(b),x=w.map(S=>M.createElement(nm,{key:S,unstyled:p,onClick:()=>o(S),disabled:S<u||S>l,onMouseDown:P=>h&&P.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:S===s})},D$(S,m)));return M.createElement("div",AKt({className:_(v.yearPicker,n)},y),M.createElement(UF,{unstyled:p,label:`${D$(w[0],m)}  ${D$(w[w.length-1],m)}`,hasPrevious:typeof u=="number"?u<w[0]:!0,hasNext:typeof l=="number"?l>w[w.length-1]:!0,onNext:()=>E(S=>S+10),onPrevious:()=>E(S=>S-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),M.createElement("div",{className:v.yearPickerControls},x))}HFe.displayName="@mantine/dates/YearPicker";function FH({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=xn(e).endOf("month"),o=xn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var OKt=Object.defineProperty,PKt=Object.defineProperties,kKt=Object.getOwnPropertyDescriptors,z0e=Object.getOwnPropertySymbols,$Kt=Object.prototype.hasOwnProperty,RKt=Object.prototype.propertyIsEnumerable,U0e=(e,t,n)=>t in e?OKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zj=(e,t)=>{for(var n in t||(t={}))$Kt.call(t,n)&&U0e(e,n,t[n]);if(z0e)for(var n of z0e(t))RKt.call(t,n)&&U0e(e,n,t[n]);return e},NKt=(e,t)=>PKt(e,kKt(t));const DKt={xs:32,sm:40,md:46,lg:52,xl:56};var MKt=lt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:NKt(zj({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:DKt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":zj({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:zj({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),LKt=Object.defineProperty,oM=Object.getOwnPropertySymbols,qFe=Object.prototype.hasOwnProperty,WFe=Object.prototype.propertyIsEnumerable,V0e=(e,t,n)=>t in e?LKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FKt=(e,t)=>{for(var n in t||(t={}))qFe.call(t,n)&&V0e(e,n,t[n]);if(oM)for(var n of oM(t))WFe.call(t,n)&&V0e(e,n,t[n]);return e},BKt=(e,t)=>{var n={};for(var r in e)qFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oM)for(var r of oM(e))t.indexOf(r)<0&&WFe.call(e,r)&&(n[r]=e[r]);return n};function GFe(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:b}=t,E=BKt(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:w,cx:x}=MKt({size:f},{classNames:i,styles:r,unstyled:v,name:p}),S=JYt(a),P=d instanceof Date?d.getFullYear():void 0,A=h instanceof Date?h.getFullYear():void 0,O=S.map((z,D)=>M.createElement(nm,{key:z,unstyled:v,onClick:()=>o(D),className:x(w.monthPickerControl,{[w.monthPickerControlActive]:D===s.month&&u===s.year}),disabled:!FH({date:new Date(u,D),minDate:d,maxDate:h}),onMouseDown:R=>y&&R.preventDefault(),"data-mantine-stop-propagation":b||void 0},z));return M.createElement("div",FKt({className:x(w.monthPicker,n)},E),M.createElement(UF,{label:D$(u,_),hasNext:typeof A=="number"?u<A:!0,hasPrevious:typeof P=="number"?u>P:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:b}),M.createElement("div",{className:w.monthPickerControls},O))}GFe.displayName="@mantine/dates/MonthPicker";function jKt({month:e,locale:t,format:n}){return sg(xn(e).locale(t).format(n))}function zKt({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function UKt({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var VKt=Object.defineProperty,HKt=Object.defineProperties,qKt=Object.getOwnPropertyDescriptors,H0e=Object.getOwnPropertySymbols,WKt=Object.prototype.hasOwnProperty,GKt=Object.prototype.propertyIsEnumerable,q0e=(e,t,n)=>t in e?VKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uj=(e,t)=>{for(var n in t||(t={}))WKt.call(t,n)&&q0e(e,n,t[n]);if(H0e)for(var n of H0e(t))GKt.call(t,n)&&q0e(e,n,t[n]);return e},W0e=(e,t)=>HKt(e,qKt(t));const M$={xs:34,sm:38,md:46,lg:58,xl:66};var YKt=lt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:W0e(Uj(W0e(Uj(Uj({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:M$}),height:e.fn.size({size:t,sizes:M$}),lineHeight:`${e.fn.size({size:t,sizes:M$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),KKt=Object.defineProperty,XKt=Object.defineProperties,QKt=Object.getOwnPropertyDescriptors,aM=Object.getOwnPropertySymbols,YFe=Object.prototype.hasOwnProperty,KFe=Object.prototype.propertyIsEnumerable,G0e=(e,t,n)=>t in e?KKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JKt=(e,t)=>{for(var n in t||(t={}))YFe.call(t,n)&&G0e(e,n,t[n]);if(aM)for(var n of aM(t))KFe.call(t,n)&&G0e(e,n,t[n]);return e},ZKt=(e,t)=>XKt(e,QKt(t)),eXt=(e,t)=>{var n={};for(var r in e)YFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aM)for(var r of aM(e))t.indexOf(r)<0&&KFe.call(e,r)&&(n[r]=e[r]);return n};const XFe=C.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:b,renderDay:E,unstyled:w,disabled:x,stopPropagation:S}=n,P=eXt(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:A,cx:O}=YKt({size:g,fullWidth:y,hideOutsideDates:b},{classNames:l,styles:c,unstyled:w,name:p});return M.createElement("button",ZKt(JKt({},P),{type:"button",ref:t,disabled:x,onMouseEnter:z=>u(i,z),tabIndex:zKt({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":UKt({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":S||void 0,"data-outside":a&&!x||void 0,"data-weekend":o&&!x||void 0,"data-selected":s&&!x||void 0,"data-in-range":m&&!x||void 0,"data-first-in-range":d&&!x||void 0,"data-last-in-range":h&&!x||void 0,className:O(A.day,r)}),typeof E=="function"?E(i):i.getDate())});XFe.displayName="@mantine/core/Day";function tXt(e,t=[0,6]){return t.includes(e.getDay())}function nXt(e,t){return!LFe(e,t)}function rXt({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&xn(t).isBefore(i,"day"),a=e instanceof Date&&xn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function iXt(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[xn(t[0]).subtract(1,"day"),xn(t[1]).add(1,"day")],i=n&&Kp(e,t[0]),s=n&&Kp(e,t[1]),o=n&&xn(e).isAfter(r[0],"day")&&xn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function Y0e({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=nXt(e,t),f=n&&(Array.isArray(s)?s.some(g=>Kp(g,e)):Kp(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=iXt(e,u);return{disabled:rXt({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:tXt(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var sXt=Object.defineProperty,oXt=Object.defineProperties,aXt=Object.getOwnPropertyDescriptors,K0e=Object.getOwnPropertySymbols,uXt=Object.prototype.hasOwnProperty,lXt=Object.prototype.propertyIsEnumerable,X0e=(e,t,n)=>t in e?sXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cXt=(e,t)=>{for(var n in t||(t={}))uXt.call(t,n)&&X0e(e,n,t[n]);if(K0e)for(var n of K0e(t))lXt.call(t,n)&&X0e(e,n,t[n]);return e},fXt=(e,t)=>oXt(e,aXt(t)),dXt=lt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:fXt(cXt({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),hXt=Object.defineProperty,uM=Object.getOwnPropertySymbols,QFe=Object.prototype.hasOwnProperty,JFe=Object.prototype.propertyIsEnumerable,Q0e=(e,t,n)=>t in e?hXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pXt=(e,t)=>{for(var n in t||(t={}))QFe.call(t,n)&&Q0e(e,n,t[n]);if(uM)for(var n of uM(t))JFe.call(t,n)&&Q0e(e,n,t[n]);return e},mXt=(e,t)=>{var n={};for(var r in e)QFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uM)for(var r of uM(e))t.indexOf(r)<0&&JFe.call(e,r)&&(n[r]=e[r]);return n};const sk=()=>!1,gXt={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},ZFe=C.forwardRef((e,t)=>{const n=gt("Month",gXt,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:b,fullWidth:E,preventFocus:w,focusable:x,firstDayOfWeek:S,onDayKeyDown:P,daysRefs:A,hideOutsideDates:O,isDateInRange:z=sk,isDateFirstInRange:D=sk,isDateLastInRange:R=sk,renderDay:N,weekdayLabelFormat:L,unstyled:V,weekendDays:j,__stopPropagation:H}=n,U=mXt(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:k,cx:$,theme:q}=dXt({fullWidth:E},{classNames:f,styles:d,unstyled:V,name:_}),F=u||q.datesLocale,B=XYt(i,S),Q=ZYt(F,S,L).map(ge=>M.createElement("th",{className:k.weekdayCell,key:ge},M.createElement(ct,{size:b,className:k.weekday},ge.length>=2?sg(ge):ge))),se=Array.isArray(s)?s.every(ge=>ge instanceof Date):s instanceof Date,ae=s instanceof Date&&xn(s).isAfter(xn(i).startOf("month"))&&xn(s).isBefore(xn(i).endOf("month")),ce=C.useMemo(()=>B.flatMap(ge=>ge).find(ge=>{const ue=Y0e({date:ge,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j});return!ue.disabled&&!ue.outside})||xn(i).startOf("month").toDate(),[]),le=B.map((ge,ue)=>{const Fe=ge.map((ke,Ge)=>{const Re=Y0e({date:ke,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j}),Oe={rowIndex:ue,cellIndex:Ge,date:ke};return M.createElement("td",{className:k.cell,key:Ge},M.createElement(XFe,{unstyled:V,ref:Me=>{A&&(Array.isArray(A[ue])||(A[ue]=[]),A[ue][Ge]=Me)},onClick:()=>typeof o=="function"&&o(ke),onMouseDown:Me=>w&&Me.preventDefault(),value:ke,outside:Re.outside,weekend:Re.weekend,inRange:Re.inRange||z(ke,Re),firstInRange:Re.firstInRange||D(ke,Re),lastInRange:Re.lastInRange||R(ke,Re),firstInMonth:Kp(ke,ce),selected:Re.selected||Re.selectedInRange,hasValue:ae,onKeyDown:Me=>typeof P=="function"&&P(Oe,Me),className:typeof l=="function"?l(ke,Re):null,style:typeof c=="function"?c(ke,Re):null,disabled:Re.disabled,onMouseEnter:typeof g=="function"?g:sk,size:b,fullWidth:E,focusable:x,hideOutsideDates:O,__staticSelector:_,styles:d,classNames:f,renderDay:N,stopPropagation:H}))});return M.createElement("tr",{key:ue},Fe)});return M.createElement(st,pXt({component:"table",className:$(k.month,r),ref:t},U),!v&&M.createElement("thead",null,M.createElement("tr",null,Q)),M.createElement("tbody",null,le))});ZFe.displayName="@mantine/dates/Month";var yXt=Object.defineProperty,lM=Object.getOwnPropertySymbols,e5e=Object.prototype.hasOwnProperty,t5e=Object.prototype.propertyIsEnumerable,J0e=(e,t,n)=>t in e?yXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vXt=(e,t)=>{for(var n in t||(t={}))e5e.call(t,n)&&J0e(e,n,t[n]);if(lM)for(var n of lM(t))t5e.call(t,n)&&J0e(e,n,t[n]);return e},_Xt=(e,t)=>{var n={};for(var r in e)e5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lM)for(var r of lM(e))t.indexOf(r)<0&&t5e.call(e,r)&&(n[r]=e[r]);return n};function n5e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:b,preventFocus:E,renderDay:w,unstyled:x,__stopPropagation:S}=t,P=_Xt(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const A=xn(i).add(n,"months").toDate(),O=xn(i).subtract(1,"months").toDate(),z=Array(n).fill(0).map((D,R)=>{const N=xn(i).add(R,"months").toDate();return M.createElement("div",{key:R},M.createElement(UF,{hasNext:R+1===n&&FH({date:A,minDate:o,maxDate:a}),hasPrevious:R===0&&FH({date:O,minDate:o,maxDate:a}),label:jKt({month:N,locale:s,format:_}),onNext:()=>f(xn(i).add(r,"months").toDate()),onPrevious:()=>f(xn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:R>0,preventFocus:E,unstyled:x,__stopPropagation:S}),M.createElement(ZFe,vXt({month:N,daysRefs:c.current[R],onDayKeyDown:(...L)=>h(R,...L),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:R===0,preventFocus:E,renderDay:w,weekdayLabelFormat:b,unstyled:x,__stopPropagation:S},P)))});return M.createElement(M.Fragment,null,z)}n5e.displayName="@mantine/dates/MonthsList";var bXt=lt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:M$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),wXt=Object.defineProperty,cM=Object.getOwnPropertySymbols,r5e=Object.prototype.hasOwnProperty,i5e=Object.prototype.propertyIsEnumerable,Z0e=(e,t,n)=>t in e?wXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EXt=(e,t)=>{for(var n in t||(t={}))r5e.call(t,n)&&Z0e(e,n,t[n]);if(cM)for(var n of cM(t))i5e.call(t,n)&&Z0e(e,n,t[n]);return e},xXt=(e,t)=>{var n={};for(var r in e)r5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cM)for(var r of cM(e))t.indexOf(r)<0&&i5e.call(e,r)&&(n[r]=e[r]);return n};const DZ=C.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:P="monday",value:A,onChange:O,onDayMouseEnter:z,range:D,nextDecadeLabel:R,nextMonthLabel:N,nextYearLabel:L,previousDecadeLabel:V,previousMonthLabel:j,previousYearLabel:H,labelFormat:U="MMMM YYYY",weekdayLabelFormat:k,hideOutsideDates:$,isDateInRange:q,isDateFirstInRange:F,isDateLastInRange:B,renderDay:Q,unstyled:se,weekendDays:ae,__stopPropagation:ce,yearLabelFormat:le="YYYY"}=n,ge=xXt(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ue,Fe]=C.useState(p),{classes:ke,cx:Ge,theme:Re}=bXt({size:d,fullWidth:x,amountOfMonths:ue==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:se}),Oe=l||Re.datesLocale,Me=C.useRef(Array(c).fill(0).map(()=>[])),[Ut,Qe]=ia({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[je,xt]=C.useState(Ut.getFullYear()),et=m instanceof Date?m.getFullYear():100,ft=g instanceof Date?g.getFullYear():1e4,dt=6,jt=(he,_e,Pe,it=1)=>{var Ye;const ut=["down","up"].includes(he),tt=ut?Pe.rowIndex+(he==="down"?it:-it):Pe.rowIndex,wt=ut?Pe.cellIndex:Pe.cellIndex+(he==="right"?it:-it),In=(Ye=Me.current[_e][tt])==null?void 0:Ye[wt];In&&(In.disabled?jt(he,_e,Pe,it+1):In.focus())},Dn=(he,_e,Pe)=>{var it;switch(Pe.key){case"ArrowDown":{Pe.preventDefault(),_e.rowIndex+1<Me.current[he].length&&jt("down",he,_e);break}case"ArrowUp":{Pe.preventDefault(),_e.rowIndex>0&&jt("up",he,_e);break}case"ArrowRight":{Pe.preventDefault(),_e.cellIndex!==dt?jt("right",he,_e):he+1<c&&Me.current[he+1][_e.rowIndex]&&((it=Me.current[he+1][_e.rowIndex][0])==null||it.focus());break}case"ArrowLeft":Pe.preventDefault(),_e.cellIndex!==0?jt("left",he,_e):he>0&&Me.current[he-1][_e.rowIndex]&&Me.current[he-1][_e.rowIndex][dt].focus()}};return M.createElement(st,EXt({className:Ge(ke.calendarBase,r),ref:t},ge),ue==="year"&&M.createElement(HFe,{size:d,value:je,minYear:et,maxYear:ft,onChange:he=>{xt(he),Fe("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextDecadeLabel:R,previousDecadeLabel:V,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="month"&&M.createElement(GFe,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:je,onYearChange:xt,onNextLevel:()=>Fe("year"),locale:Oe,minDate:m,maxDate:g,onChange:he=>{Qe(new Date(je,he,1)),Fe("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextYearLabel:L,previousYearLabel:H,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="date"&&M.createElement(n5e,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Oe,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Me,onMonthChange:Qe,onNextLevel:()=>Fe("month"),onDayKeyDown:Dn,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:P,value:A,range:D,onChange:O,nextMonthLabel:N,previousMonthLabel:j,labelFormat:U,weekdayLabelFormat:k,onDayMouseEnter:z,renderDay:Q,hideOutsideDates:$,isDateInRange:q,isDateFirstInRange:F,isDateLastInRange:B,unstyled:se,weekendDays:ae,__stopPropagation:ce}))});DZ.displayName="@mantine/dates/CalendarBase";var SXt=Object.defineProperty,fM=Object.getOwnPropertySymbols,s5e=Object.prototype.hasOwnProperty,o5e=Object.prototype.propertyIsEnumerable,eye=(e,t,n)=>t in e?SXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TXt=(e,t)=>{for(var n in t||(t={}))s5e.call(t,n)&&eye(e,n,t[n]);if(fM)for(var n of fM(t))o5e.call(t,n)&&eye(e,n,t[n]);return e},CXt=(e,t)=>{var n={};for(var r in e)s5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fM)for(var r of fM(e))t.indexOf(r)<0&&o5e.call(e,r)&&(n[r]=e[r]);return n};const AXt={__staticSelector:"Calendar"};function a5e(e){const t=gt("Calendar",AXt,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=CXt(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Kp(c,u));return s(l?i.filter(c=>!Kp(c,u)):[...i,u])};return M.createElement(DZ,TXt({__staticSelector:n,onChange:a,value:i},o))}a5e.displayName="@mantine/dates/Calendar";var IXt=Object.defineProperty,OXt=Object.defineProperties,PXt=Object.getOwnPropertyDescriptors,tye=Object.getOwnPropertySymbols,kXt=Object.prototype.hasOwnProperty,$Xt=Object.prototype.propertyIsEnumerable,nye=(e,t,n)=>t in e?IXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RXt=(e,t)=>{for(var n in t||(t={}))kXt.call(t,n)&&nye(e,n,t[n]);if(tye)for(var n of tye(t))$Xt.call(t,n)&&nye(e,n,t[n]);return e},NXt=(e,t)=>OXt(e,PXt(t)),DXt=lt(e=>({wrapper:NXt(RXt({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),MXt=Object.defineProperty,LXt=Object.defineProperties,FXt=Object.getOwnPropertyDescriptors,dM=Object.getOwnPropertySymbols,u5e=Object.prototype.hasOwnProperty,l5e=Object.prototype.propertyIsEnumerable,rye=(e,t,n)=>t in e?MXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AS=(e,t)=>{for(var n in t||(t={}))u5e.call(t,n)&&rye(e,n,t[n]);if(dM)for(var n of dM(t))l5e.call(t,n)&&rye(e,n,t[n]);return e},iye=(e,t)=>LXt(e,FXt(t)),BXt=(e,t)=>{var n={};for(var r in e)u5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dM)for(var r of dM(e))t.indexOf(r)<0&&l5e.call(e,r)&&(n[r]=e[r]);return n};const jXt={xs:24,sm:30,md:34,lg:40,xl:44},zXt={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},MZ=C.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=zXt,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:b,inputLabel:E,__staticSelector:w="DatePickerBase",dropdownOpened:x,setDropdownOpened:S,dropdownType:P="popover",dropdownPosition:A="flip",clearable:O=!0,clearButtonLabel:z,onClear:D,positionDependencies:R=[],zIndex:N,withinPortal:L=!1,onBlur:V,onFocus:j,onChange:H,onKeyDown:U,name:k="date",sx:$,amountOfMonths:q=1,onDropdownClose:F,onDropdownOpen:B,clickOutsideEvents:Q=["mousedown","touchstart"],modalZIndex:se,errorProps:ae,labelProps:ce,descriptionProps:le,clearButtonTabIndex:ge=0,unstyled:ue,inputContainer:Fe,inputWrapperOrder:ke,modalProps:Ge,withAsterisk:Re}=n,Oe=BXt(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Me,cx:Ut,theme:Qe}=DXt(null,{classNames:r,styles:o,unstyled:ue,name:w}),{systemStyles:je,rest:xt}=Ef(Oe),et=$u(d),ft=C.useRef(),dt=()=>{S(!1),F==null||F()},jt=()=>{S(!0),B==null||B()},Dn=()=>{S(!x),x?F==null||F():B==null||B()},he=ut=>{ut.key==="Escape"&&(dt(),window.setTimeout(()=>{var tt;return(tt=ft.current)==null?void 0:tt.focus()},0))},_e=O?M.createElement(rm,{variant:"transparent","aria-label":z,onClick:D,size:_,tabIndex:ge,unstyled:ue}):null,Pe=ut=>{typeof V=="function"&&V(ut),l&&dt()},it=ut=>{typeof j=="function"&&j(ut),l&&jt()},Ye=ut=>{typeof U=="function"&&U(ut),(ut.key==="Space"||ut.key==="Enter")&&!l&&(ut.preventDefault(),jt())};return M.createElement(as.Wrapper,AS(AS({required:u,id:et,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:w,sx:$,errorProps:ae,descriptionProps:le,labelProps:ce,inputContainer:Fe,inputWrapperOrder:ke,unstyled:ue,withAsterisk:Re},je),a),M.createElement(di,{__staticSelector:w,withinPortal:L,offset:10,opened:x,transitionDuration:y,transition:g,positionDependencies:R,middlewares:{flip:A==="flip",shift:!1},position:A==="flip"?"bottom-start":A,shadow:m,onClose:dt,trapFocus:!l,withRoles:!1,clickOutsideEvents:Q,zIndex:N,classNames:r,styles:o,unstyled:ue},M.createElement(di.Target,null,M.createElement("div",{className:Me.wrapper},M.createElement(as,AS({classNames:iye(AS({},r),{input:Ut(Me.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?jt():Dn(),onKeyDown:Ye,id:et,ref:Os(t,ft),__staticSelector:w,size:_,name:k,placeholder:p,value:E,required:u,invalid:!!f,readOnly:!l,rightSection:_e,rightSectionWidth:Qe.fn.size({size:_,sizes:jXt}),onBlur:Pe,onFocus:it,onChange:H,autoComplete:"off",unstyled:ue},xt)))),P==="popover"?M.createElement(di.Dropdown,null,M.createElement("div",{"data-mantine-stop-propagation":x,onKeyDownCapture:he,"aria-hidden":l||void 0},b)):M.createElement(Og,iye(AS({},Ge),{opened:x,onClose:dt,withCloseButton:!1,size:q*400,zIndex:se,unstyled:ue}),b)))});MZ.displayName="@mantine/dates/DatePickerBase";var UXt=Object.defineProperty,hM=Object.getOwnPropertySymbols,c5e=Object.prototype.hasOwnProperty,f5e=Object.prototype.propertyIsEnumerable,sye=(e,t,n)=>t in e?UXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VXt=(e,t)=>{for(var n in t||(t={}))c5e.call(t,n)&&sye(e,n,t[n]);if(hM)for(var n of hM(t))f5e.call(t,n)&&sye(e,n,t[n]);return e},HXt=(e,t)=>{var n={};for(var r in e)c5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hM)for(var r of hM(e))t.indexOf(r)<0&&f5e.call(e,r)&&(n[r]=e[r]);return n};const qXt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},WXt=C.forwardRef((e,t)=>{const n=gt("DatePicker",qXt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,name:P,size:A,dropdownType:O,dropdownPosition:z,clearable:D,disabled:R,clearButtonLabel:N,fixOnBlur:L,allowFreeInput:V,withinPortal:j,dateParser:H,firstDayOfWeek:U,onFocus:k,onBlur:$,amountOfMonths:q,allowLevelChange:F,initialLevel:B,onDropdownClose:Q,onDropdownOpen:se,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,type:ge,openDropdownOnClear:ue,unstyled:Fe,weekendDays:ke,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Me,previousYearLabel:Ut}=n,Qe=HXt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),je=cs(),xt=l||je.datesLocale,et=ge==="date"?"YYYY-MM-DD":c||je.dateFormat,[ft,dt]=C.useState(S),jt=A==="lg"||A==="xl"?"md":"sm",Dn=C.useRef(),[he,_e]=C.useState(s??null),[Pe,it]=ia({value:r,defaultValue:s,finalValue:null,onChange:i}),[Ye,ut]=C.useState(Pe||x||new Date),[tt,wt]=C.useState(!1),[In,Wt]=C.useState(Pe instanceof Date?sg(xn(Pe).locale(xt).format(et)):""),Vt=()=>{dt(!1),Q==null||Q()},hr=()=>{dt(!0),se==null||se()};C.useEffect(()=>{r===null&&!tt&&Wt(""),r instanceof Date&&!tt&&Wt(sg(xn(r).locale(xt).format(et)))},[r,tt]);const Yn=_t=>{it(_t),Wt(sg(xn(_t).locale(xt).format(et))),m&&Vt(),window.setTimeout(()=>{var Fr;return(Fr=Dn.current)==null?void 0:Fr.focus()},0)},Lu=()=>{var _t;it(null),_e(null),Wt(""),ue&&hr(),(_t=Dn.current)==null||_t.focus()},Lr=_t=>H?H(_t):xn(_t,et,xt).toDate(),fs=()=>{let _t=typeof Pe=="string"?Lr(Pe):Pe;E&&xn(_t).isAfter(E)&&(_t=E),b&&xn(_t).isBefore(b)&&(_t=b),xn(_t).isValid()?(it(_t),_e(_t),Wt(sg(xn(_t).locale(xt).format(et))),ut(_t)):L&&it(he)},ri=_t=>{typeof $=="function"&&$(_t),wt(!1),V&&fs()},Ti=_t=>{_t.key==="Enter"&&V&&(Vt(),fs())},qr=_t=>{typeof k=="function"&&k(_t),wt(!0)},yr=_t=>{hr();const Fr=Lr(_t.target.value);xn(Fr).isValid()?(it(Fr),_e(Fr),Wt(_t.target.value),ut(Fr)):Wt(_t.target.value)};return M.createElement(MZ,VXt({allowFreeInput:V,dropdownOpened:ft,setDropdownOpened:dt,shadow:u,transitionDuration:f,ref:Os(t,Dn),size:A,styles:a,classNames:o,onChange:yr,onBlur:ri,onFocus:qr,onKeyDown:Ti,name:P,inputLabel:In,__staticSelector:"DatePicker",dropdownType:O,dropdownPosition:z,clearable:ge==="date"?!1:D&&!!Pe&&!R,clearButtonLabel:N,onClear:Lu,disabled:R,withinPortal:j,amountOfMonths:q,onDropdownClose:Q,onDropdownOpen:se,type:ge,unstyled:Fe},Qe),M.createElement(a5e,{classNames:o,styles:a,locale:xt,nextMonthLabel:h,previousMonthLabel:p,month:V?Ye:void 0,initialMonth:x||(Pe instanceof Date?Pe:new Date),onMonthChange:ut,value:Pe instanceof Date?Pe:xn(Pe).toDate(),onChange:Yn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DatePicker",fullWidth:O==="modal",__stopPropagation:O!=="modal",size:O==="modal"?"lg":jt,firstDayOfWeek:U,preventFocus:V,amountOfMonths:q,allowLevelChange:F,initialLevel:B,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,unstyled:Fe,weekendDays:ke,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Me,previousYearLabel:Ut}))});WXt.displayName="@mantine/dates/DatePicker";var GXt=Object.defineProperty,pM=Object.getOwnPropertySymbols,d5e=Object.prototype.hasOwnProperty,h5e=Object.prototype.propertyIsEnumerable,oye=(e,t,n)=>t in e?GXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YXt=(e,t)=>{for(var n in t||(t={}))d5e.call(t,n)&&oye(e,n,t[n]);if(pM)for(var n of pM(t))h5e.call(t,n)&&oye(e,n,t[n]);return e},KXt=(e,t)=>{var n={};for(var r in e)d5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pM)for(var r of pM(e))t.indexOf(r)<0&&h5e.call(e,r)&&(n[r]=e[r]);return n};const XXt={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},p5e=C.forwardRef((e,t)=>{const n=gt("RangeCalendar",XXt,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=KXt(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=C.useState(null),[p,m]=C.useState(null),g=E=>{if(p instanceof Date){if(Kp(E,p)&&!u)return m(null),h(null),null;const w=[E,p];return w.sort((x,S)=>x.getTime()-S.getTime()),i(w),m(null),null}return r[0]&&Kp(E,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([E,null]),m(E),null)},y=E=>{typeof o=="function"&&o(E),h(null)},v=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,P)=>S.getTime()-P.getTime()),!w.selected&&xn(E).subtract(1,"day").isBefore(x[1])&&xn(E).add(1,"day").isAfter(x[0])}return!1},_=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,P)=>S.getTime()-P.getTime()),w.selected&&xn(E).isBefore(x[1])}return!1},b=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,P)=>S.getTime()-P.getTime()),w.selected&&xn(E).isAfter(x[0])}return!1};return M.createElement(DZ,YXt({dayStyle:s,onMouseLeave:y,onDayMouseEnter:E=>h(E),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:b},f))});p5e.displayName="@mantine/dates/RangeCalendar";var QXt=Object.defineProperty,mM=Object.getOwnPropertySymbols,m5e=Object.prototype.hasOwnProperty,g5e=Object.prototype.propertyIsEnumerable,aye=(e,t,n)=>t in e?QXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JXt=(e,t)=>{for(var n in t||(t={}))m5e.call(t,n)&&aye(e,n,t[n]);if(mM)for(var n of mM(t))g5e.call(t,n)&&aye(e,n,t[n]);return e},ZXt=(e,t)=>{var n={};for(var r in e)m5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mM)for(var r of mM(e))t.indexOf(r)<0&&g5e.call(e,r)&&(n[r]=e[r]);return n};const uye=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),eQt=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,tQt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},y5e=C.forwardRef((e,t)=>{const n=gt("DateRangePicker",tQt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,size:P,dropdownType:A,labelSeparator:O,clearable:z,clearButtonLabel:D,firstDayOfWeek:R,allowLevelChange:N,allowSingleDateInRange:L,amountOfMonths:V,withinPortal:j,initialLevel:H,onDropdownClose:U,onDropdownOpen:k,hideOutsideDates:$,hideWeekdays:q,renderDay:F,openDropdownOnClear:B,unstyled:Q,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}=n,Fe=ZXt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),ke=cs(),Ge=l||ke.datesLocale,Re=c||ke.dateFormat,[Oe,Me]=C.useState(S),Ut=P==="lg"||P==="xl"?"md":"sm",Qe=C.useRef(),[je,xt]=ia({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),et=Pe=>{xt(Pe),m&&uye(Pe)&&(Me(!1),U==null||U(),window.setTimeout(()=>{var it;return(it=Qe.current)==null?void 0:it.focus()},0))},ft=uye(je),dt=eQt(je),jt=je[0]?sg(xn(je[0]).locale(Ge).format(Re)):"",Dn=je[1]?sg(xn(je[1]).locale(Ge).format(Re)):"",he=()=>{var Pe;xt([null,null]),Me(!0),B&&(k==null||k()),(Pe=Qe.current)==null||Pe.focus()},_e=Pe=>{!Pe&&dt&&je[1]===null&&he(),Me(Pe)};return M.createElement(MZ,JXt({dropdownOpened:Oe,setDropdownOpened:_e,shadow:u,transitionDuration:f,ref:Os(t,Qe),size:P,styles:a,classNames:o,inputLabel:dt?`${jt} ${O} ${Dn}`:"",__staticSelector:"DateRangePicker",dropdownType:A,clearable:z&&dt,clearButtonLabel:D,onClear:he,withinPortal:j,amountOfMonths:V,onDropdownClose:U,onDropdownOpen:k,unstyled:Q},Fe),M.createElement(p5e,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ft?je[0]:x,value:je,onChange:et,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DateRangePicker",fullWidth:A==="modal",firstDayOfWeek:R,size:A==="modal"?"lg":Ut,allowLevelChange:N,allowSingleDateInRange:L,amountOfMonths:V,initialLevel:H,hideOutsideDates:$,hideWeekdays:q,renderDay:F,unstyled:Q,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}))});y5e.displayName="@mantine/dates/DateRangePicker";function Bg(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var nQt=Object.defineProperty,rQt=Object.defineProperties,iQt=Object.getOwnPropertyDescriptors,lye=Object.getOwnPropertySymbols,sQt=Object.prototype.hasOwnProperty,oQt=Object.prototype.propertyIsEnumerable,cye=(e,t,n)=>t in e?nQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aQt=(e,t)=>{for(var n in t||(t={}))sQt.call(t,n)&&cye(e,n,t[n]);if(lye)for(var n of lye(t))oQt.call(t,n)&&cye(e,n,t[n]);return e},uQt=(e,t)=>rQt(e,iQt(t));const lQt={xs:20,sm:23,md:25,lg:27,xl:29};var v5e=lt((e,{size:t,hasValue:n})=>({timeInput:uQt(aQt({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:lQt}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),cQt=Object.defineProperty,gM=Object.getOwnPropertySymbols,_5e=Object.prototype.hasOwnProperty,b5e=Object.prototype.propertyIsEnumerable,fye=(e,t,n)=>t in e?cQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fQt=(e,t)=>{for(var n in t||(t={}))_5e.call(t,n)&&fye(e,n,t[n]);if(gM)for(var n of gM(t))b5e.call(t,n)&&fye(e,n,t[n]);return e},dQt=(e,t)=>{var n={};for(var r in e)_5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gM)for(var r of gM(e))t.indexOf(r)<0&&b5e.call(e,r)&&(n[r]=e[r]);return n};const L$=C.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=dQt(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=C.useState(0),{classes:y,cx:v,theme:_}=v5e({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),b=C.useRef(),E=A=>{typeof i=="function"&&i(A),b.current.select(),g(0)},w=A=>{typeof s=="function"&&s(A),m===1&&typeof o=="function"&&o(A.currentTarget.value,!1)},x=A=>{A.stopPropagation(),b.current.select()},S=A=>{if(A.key==="ArrowUp"){A.preventDefault();const O=Bg(of(parseInt(A.currentTarget.value,10)+1,f,c).toString());d!==O&&o(O,!1)}if(A.key==="ArrowDown"){A.preventDefault();const O=Bg(of(parseInt(A.currentTarget.value,10)-1,f,c).toString());d!==O&&o(O,!1)}},P=A=>{g(m+1);const O=parseInt(A.currentTarget.value,10).toString();if(O==="0"&&m===0){a("00");return}o(O,!0,m>0)};return M.createElement(M.Fragment,null,M.createElement("input",fQt({type:"text",inputMode:"numeric",ref:Os(b,t),onChange:P,onClick:x,onFocus:E,onBlur:w,onKeyDown:S,value:d,className:v(y.timeInput,r)},p)),u&&M.createElement(ct,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});L$.displayName="@mantine/dates/TimeField";function Vj(e){return Math.floor(e/10)}function Hj({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>Vj(r)||a){const f=c%10;let d,h;c>r&&i&&f<=Vj(i)?(d=Bg(Vj(c).toString()),h=Bg(f.toString())):d=Bg(of(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var hQt=lt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:zo})-2}})),pQt=Object.defineProperty,yM=Object.getOwnPropertySymbols,w5e=Object.prototype.hasOwnProperty,E5e=Object.prototype.propertyIsEnumerable,dye=(e,t,n)=>t in e?pQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mQt=(e,t)=>{for(var n in t||(t={}))w5e.call(t,n)&&dye(e,n,t[n]);if(yM)for(var n of yM(t))E5e.call(t,n)&&dye(e,n,t[n]);return e},gQt=(e,t)=>{var n={};for(var r in e)w5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yM)for(var r of yM(e))t.indexOf(r)<0&&E5e.call(e,r)&&(n[r]=e[r]);return n};const x5e=C.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=gQt(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=v5e({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=C.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const b=_.target.value.slice(-1).toLowerCase();if(b==="p"){_.preventDefault(),i(c,!0);return}if(b==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return M.createElement("input",mQt({type:"text",ref:Os(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});x5e.displayName="@mantine/dates/AmPmInput";function yQt({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function vQt(e,t,n,r,i,s){const o=xn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function hye(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:Bg(i.toString()),minutes:Bg(e.getMinutes().toString()),seconds:Bg(e.getSeconds().toString()),amPm:s?r:n}}var _Qt=Object.defineProperty,bQt=Object.defineProperties,wQt=Object.getOwnPropertyDescriptors,vM=Object.getOwnPropertySymbols,S5e=Object.prototype.hasOwnProperty,T5e=Object.prototype.propertyIsEnumerable,pye=(e,t,n)=>t in e?_Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Im=(e,t)=>{for(var n in t||(t={}))S5e.call(t,n)&&pye(e,n,t[n]);if(vM)for(var n of vM(t))T5e.call(t,n)&&pye(e,n,t[n]);return e},qj=(e,t)=>bQt(e,wQt(t)),EQt=(e,t)=>{var n={};for(var r in e)S5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vM)for(var r of vM(e))t.indexOf(r)<0&&T5e.call(e,r)&&(n[r]=e[r]);return n};const xQt={xs:24,sm:30,md:34,lg:40,xl:44},SQt={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},BH=C.forwardRef((e,t)=>{const n=gt("TimeInput",SQt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,amLabel:E,pmLabel:w,name:x,hoursLabel:S,minutesLabel:P,secondsLabel:A,amPmLabel:O,timePlaceholder:z,amPmPlaceholder:D,disabled:R,sx:N,nextRef:L,labelProps:V,descriptionProps:j,errorProps:H,unstyled:U,withAsterisk:k}=n,$=EQt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:q,cx:F,theme:B}=hQt({size:l},{classNames:f,styles:d,unstyled:U,name:"TimeInput"}),{systemStyles:Q,rest:se}=Ef($),ae=$u(h),ce=C.useRef(),le=C.useRef(),ge=C.useRef(),ue=C.useRef(),[Fe,ke]=C.useState(hye(p||m,b,E,w)),[Ge,Re]=C.useState(p||m);Es(()=>{ke(hye(Ge,b,E,w))},[Ge,b,E,w]),Es(()=>{(p==null?void 0:p.getTime())!==(Ge==null?void 0:Ge.getTime())&&Re(p)},[p]);const Oe=ft=>{const dt=Im(Im({},Fe),ft),jt=vQt(dt.hours,dt.minutes,dt.seconds,b,w,dt.amPm);Re(jt),typeof g=="function"&&g(jt)},Me=Hj({onChange:(ft,dt)=>{Oe({hours:ft,minutes:dt??Fe.minutes})},min:b==="12"?1:0,max:b==="12"?12:23,nextRef:le,nextMax:59}),Ut=Hj({onChange:(ft,dt)=>{Oe({minutes:ft,seconds:dt??Fe.seconds})},min:0,max:59,nextRef:y?ge:b==="12"?ue:L,nextMax:y?59:void 0}),Qe=Hj({onChange:ft=>{Oe({seconds:ft})},min:0,max:59,nextRef:b==="12"?ue:L}),je=yQt({amLabel:E,pmLabel:w,onChange:ft=>{Oe({amPm:ft})},nextRef:L}),xt=()=>{ke({hours:"",minutes:"",seconds:"",amPm:""}),Re(null),g==null||g(null),ce.current.focus()},et=v&&Ge&&!R?M.createElement(rm,{variant:"transparent","aria-label":_,onClick:xt,size:l,unstyled:U}):null;return M.createElement(as.Wrapper,Im(Im({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:ae,sx:N,errorProps:H,descriptionProps:j,labelProps:V,unstyled:U,withAsterisk:k},Q),c),M.createElement(as,Im({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ce.current.focus(),size:l,className:F({[q.disabled]:R}),classNames:f,styles:d,disabled:R,rightSection:et,rightSectionWidth:B.fn.size({size:l,sizes:xQt}),unstyled:U},se),M.createElement("div",{className:q.controls},M.createElement(L$,{ref:Os(ce,t),value:Fe.hours,onChange:Me,setValue:ft=>ke(dt=>qj(Im({},dt),{hours:ft})),id:ae,className:q.timeInput,withSeparator:!0,size:l,max:b==="12"?12:23,placeholder:z,"aria-label":S,disabled:R,name:x,unstyled:U}),M.createElement(L$,{ref:le,value:Fe.minutes,onChange:Ut,setValue:ft=>ke(dt=>qj(Im({},dt),{minutes:ft})),className:q.timeInput,withSeparator:y,size:l,max:59,placeholder:z,"aria-label":P,disabled:R,unstyled:U}),y&&M.createElement(L$,{ref:ge,value:Fe.seconds,onChange:Qe,setValue:ft=>ke(dt=>qj(Im({},dt),{seconds:ft})),className:q.timeInput,size:l,max:59,placeholder:z,"aria-label":A,disabled:R,unstyled:U}),b==="12"&&M.createElement(x5e,{ref:ue,value:Fe.amPm,onChange:je,placeholder:D,amLabel:E,pmLabel:w,size:l,"aria-label":O,disabled:R,unstyled:U}))))});BH.displayName="@mantine/dates/TimeInput";var TQt=lt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:zo})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),CQt=Object.defineProperty,_M=Object.getOwnPropertySymbols,C5e=Object.prototype.hasOwnProperty,A5e=Object.prototype.propertyIsEnumerable,mye=(e,t,n)=>t in e?CQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IS=(e,t)=>{for(var n in t||(t={}))C5e.call(t,n)&&mye(e,n,t[n]);if(_M)for(var n of _M(t))A5e.call(t,n)&&mye(e,n,t[n]);return e},AQt=(e,t)=>{var n={};for(var r in e)C5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_M)for(var r of _M(e))t.indexOf(r)<0&&A5e.call(e,r)&&(n[r]=e[r]);return n};const IQt={xs:24,sm:30,md:34,lg:40,xl:44},OQt={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},PQt=C.forwardRef((e,t)=>{const n=gt("TimeRangeInput",OQt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,name:E,hoursLabel:w,minutesLabel:x,secondsLabel:S,amPmLabel:P,timePlaceholder:A,amPmPlaceholder:O,labelSeparator:z,disabled:D,sx:R,labelProps:N,descriptionProps:L,errorProps:V,unstyled:j,withAsterisk:H}=n,U=AQt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:k,cx:$,theme:q}=TQt({size:l},{classNames:f,styles:d,unstyled:j,name:"TimeRangeInput"}),{systemStyles:F,rest:B}=Ef(U),Q=$u(h),se=C.useRef(),ae=C.useRef(),[ce,le]=C.useState(p??m);Es(()=>{typeof g=="function"&&g(ce)},[ce]),Es(()=>{var ke,Ge,Re,Oe;(((ke=p[0])==null?void 0:ke.getTime())!==((Ge=ce[0])==null?void 0:Ge.getTime())||((Re=p[1])==null?void 0:Re.getTime())!==((Oe=ce[1])==null?void 0:Oe.getTime()))&&le(p)},[p]);const ge=()=>{var ke;le([null,null]),(ke=se.current)==null||ke.focus()},ue=v&&ce.filter(ke=>!!ke).length>0?M.createElement(rm,{variant:"transparent","aria-label":_,onClick:ge,size:l,unstyled:j}):null,Fe={amPmLabel:P,amPmPlaceholder:O,disabled:D,format:b,hoursLabel:w,minutesLabel:x,secondsLabel:S,size:l,timePlaceholder:A,withSeconds:y};return M.createElement(as.Wrapper,IS(IS({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:Q,sx:R,errorProps:V,descriptionProps:L,labelProps:N,unstyled:j,withAsterisk:H},F),c),M.createElement(as,IS({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var ke;(ke=se.current)==null||ke.focus()},size:l,className:$({[k.disabled]:D}),classNames:f,styles:d,disabled:D,rightSection:ue,rightSectionWidth:q.fn.size({size:l,sizes:IQt}),unstyled:j},B),M.createElement("div",{className:k.inputWrapper},M.createElement(BH,IS({ref:Os(se,t),variant:"unstyled",value:ce[0],onChange:ke=>le([ke,ce[1]]),name:E,nextRef:ae,id:Q,unstyled:j},Fe)),M.createElement("span",{className:k.separator,style:{color:q.colorScheme==="dark"?q.colors.dark[2]:q.colors.gray[7]}},z),M.createElement(BH,IS({ref:ae,variant:"unstyled",value:ce[1],onChange:ke=>le([ce[0],ke]),unstyled:j},Fe)))))});PQt.displayName="@mantine/dates/TimeRangeInput";const gye={};function jH(e,t){e===void 0&&(e=gye),t===void 0&&(t=gye);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var kQt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$Qt=Object.prototype.hasOwnProperty;function zH(e,t){return $Qt.call(e,t)}function UH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)zH(e,i)&&r.push(i);return r}function tl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function VH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function $y(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function I5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function HH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(HH(e[t]))return!0}else if(typeof e=="object"){for(var r=UH(e),i=r.length,s=0;s<i;s++)if(HH(e[r[s]]))return!0}}return!1}function yye(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var O5e=function(e){kQt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,yye(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=yye(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Pi=O5e,RQt=tl,bb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=bM(n,this.path);r&&(r=tl(r));var i=P1(n,{op:"remove",path:this.from}).removed;return P1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=bM(n,this.from);return P1(n,{op:"add",path:this.path,value:tl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:lA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},NQt={add:function(e,t,n){return VH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:bb.move,copy:bb.copy,test:bb.test,_get:bb._get};function bM(e,t){if(t=="")return e;var n={op:"_get",path:t};return P1(e,n),n.value}function P1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):wM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=bM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=lA(e,t.value),o.test===!1)throw new Pi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Pi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=tl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=wM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=I5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!VH(h))throw new Pi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);VH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Pi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=NQt[t.op].call(t,l,h,e);if(o.test===!1)throw new Pi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=bb[t.op].call(t,l,h,e);if(o.test===!1)throw new Pi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Pi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function VF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Pi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=tl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=P1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function DQt(e,t,n){var r=P1(e,t);if(r.test===!1)throw new Pi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function wM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(bb[e.op]){if(typeof e.path!="string")throw new Pi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&HH(e.value))throw new Pi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Pi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Pi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=P5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function P5e(e,t,n){try{if(!Array.isArray(e))throw new Pi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)VF(tl(t),tl(e),n||!0);else{n=n||wM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Pi)return i;throw i}}function lA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!lA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!lA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const MQt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Pi,_areEquals:lA,applyOperation:P1,applyPatch:VF,applyReducer:DQt,deepClone:RQt,getValueByPointer:bM,validate:P5e,validator:wM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var LZ=new WeakMap,LQt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),FQt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function BQt(e){return LZ.get(e)}function jQt(e,t){return e.observers.get(t)}function zQt(e,t){e.observers.delete(t.callback)}function UQt(e,t){t.unobserve()}function VQt(e,t){var n=[],r,i=BQt(e);if(!i)i=new LQt(e),LZ.set(e,i);else{var s=jQt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=tl(e),t){r.callback=t,r.next=null;var o=function(){qH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){qH(r),clearTimeout(r.next),zQt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new FQt(t,r)),r}function qH(e,t){t===void 0&&(t=!1);var n=LZ.get(e.object);FZ(n.value,e.object,e.patches,"",t),e.patches.length&&VF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function FZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=UH(t),o=UH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(zH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?FZ(c,f,n,r+"/"+$y(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+$y(l),value:tl(c)}),n.push({op:"replace",path:r+"/"+$y(l),value:tl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+$y(l),value:tl(c)}),n.push({op:"remove",path:r+"/"+$y(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!zH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+$y(l),value:tl(t[l])})}}}function HQt(e,t,n){n===void 0&&(n=!1);var r=[];return FZ(e,t,r,"",n),r}const qQt=Object.freeze(Object.defineProperty({__proto__:null,compare:HQt,generate:qH,observe:VQt,unobserve:UQt},Symbol.toStringTag,{value:"Module"}));Object.assign({},MQt,qQt,{JsonPatchError:O5e,deepClone:tl,escapePathComponent:$y,unescapePathComponent:I5e});var WQt=/("(?:[^\\"]|\\.)*")|[:,]/g,GQt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,b,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),b=JSON.stringify(a,s),b===void 0)return b;if(g=i-u.length-l,b.length<=g&&(v=b.replace(WQt,function(w,x){return x||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(b),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return b}(t,"",0)};const Wj=bl(GQt);function Du(e,t,n){return e.fields=t||[],e.fname=n,e}function Li(e){return e==null?null:e.fname}function Zo(e){return e==null?null:e.fields}function k5e(e){return e.length===1?YQt(e[0]):KQt(e)}const YQt=e=>function(t){return t[e]},KQt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Te(e){throw Error(e)}function mh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Te("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Te("Access path missing closing bracket: "+e),r&&Te("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function sc(e,t,n){const r=mh(e);return e=r.length===1?r[0]:e,Du((n&&n.get||k5e)(r),[e],t||e)}const KI=sc("id"),ua=Du(e=>e,[],"identity"),eg=Du(()=>0,[],"zero"),yx=Du(()=>1,[],"one"),oc=Du(()=>!0,[],"true"),Rm=Du(()=>!1,[],"false");function XQt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const $5e=0,BZ=1,jZ=2,R5e=3,N5e=4;function zZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:XQt,r=e||$5e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=BZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=jZ&&n(t||"warn","WARN",arguments),this},info(){return r>=R5e&&n(t||"log","INFO",arguments),this},debug(){return r>=N5e&&n(t||"log","DEBUG",arguments),this}}}var Ie=Array.isArray;function ot(e){return e===Object(e)}const vye=e=>e!=="__proto__";function vx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=QQt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;_x(r,s,i[s],o)}return r},{})}function _x(e,t,n,r){if(!vye(t))return;let i,s;if(ot(n)&&!Ie(n)){s=ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?_x(s,i,n[i]):vye(i)&&(s[i]=n[i])}else e[t]=n}function QQt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Un(e){return e[e.length-1]}function Yo(e){return e==null||e===""?null:+e}const D5e=e=>t=>e*Math.exp(t),M5e=e=>t=>Math.log(e*t),L5e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),F5e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,EM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function HF(e,t,n,r){const i=n(e[0]),s=n(Un(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function B5e(e,t){return HF(e,t,Yo,ua)}function j5e(e,t){var n=Math.sign(e[0]);return HF(e,t,M5e(n),D5e(n))}function z5e(e,t,n){return HF(e,t,EM(n),EM(1/n))}function U5e(e,t,n){return HF(e,t,L5e(n),F5e(n))}function qF(e,t,n,r,i){const s=r(e[0]),o=r(Un(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function UZ(e,t,n){return qF(e,t,n,Yo,ua)}function VZ(e,t,n){const r=Math.sign(e[0]);return qF(e,t,n,M5e(r),D5e(r))}function xM(e,t,n,r){return qF(e,t,n,EM(r),EM(1/r))}function HZ(e,t,n,r){return qF(e,t,n,L5e(r),F5e(r))}function V5e(e){return 1+~~(new Date(e).getMonth()/3)}function H5e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function nt(e){return e!=null?Ie(e)?e:[e]:[]}function q5e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pn(e){return typeof e=="function"}const JQt="descending";function qZ(e,t,n){n=n||{},t=nt(t)||[];const r=[],i=[],s={},o=n.comparator||ZQt;return nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===JQt?-1:1),i.push(a=pn(a)?a:sc(a,null,n)),(Zo(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Du(o(i,r),Object.keys(s))}const WF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),ZQt=(e,t)=>e.length===1?eJt(e[0],t[0]):tJt(e,t,e.length),eJt=(e,t)=>function(n,r){return WF(e(n),e(r))*t},tJt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=WF(s(r),s(i));return o*t[a]});function la(e){return pn(e)?e:()=>e}function WZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function eh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function W5e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const nJt=Object.prototype.hasOwnProperty;function Nt(e,t){return nJt.call(e,t)}const ok={};function bx(e){let t={},n;function r(s){return Nt(t,s)&&t[s]!==ok}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===ok&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=ok),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==ok&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function G5e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Un(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function We(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hn(r,n)}function wb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function K0(e){return typeof e=="boolean"}function jg(e){return Object.prototype.toString.call(e)==="[object Date]"}function Y5e(e){return e&&pn(e[Symbol.iterator])}function Jn(e){return typeof e=="number"}function K5e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function rt(e){return typeof e=="string"}function GZ(e,t,n){e&&(e=t?nt(e).map(a=>a.replace(/\\(.)/g,"$1")):nt(e));const r=e&&e.length,i=n&&n.get||k5e,s=a=>i(t?[a]:mh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Du(o,e,"key")}function X5e(e,t){const n=e[0],r=Un(e),i=+t;return i?i===1?r:n+i*(r-n):n}const rJt=1e4;function Q5e(e){e=+e||rJt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Nt(t,o)||Nt(n,o),get:o=>Nt(t,o)?t[o]:Nt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Nt(t,o)?t[o]=a:s(o,a)}}function J5e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function vT(e,t){let n="";for(;--t>=0;)n+=e;return n}function Z5e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?vT(i,o)+s:r==="center"?vT(i,~~(o/2))+s+vT(i,Math.ceil(o/2)):s+vT(i,o)}function XI(e){return e&&Un(e)-e[0]||0}function Xe(e){return Ie(e)?"["+e.map(Xe)+"]":ot(e)||rt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function YZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const iJt=e=>Jn(e)||jg(e)?e:Date.parse(e);function KZ(e,t){return t=t||iJt,e==null||e===""?null:t(e)}function XZ(e){return e==null||e===""?null:e+""}function yf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function e8e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function zm(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function sJt(e){return e}function oJt(e){if(e==null)return sJt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function aJt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function uJt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return _ye(e,n)})}:_ye(e,t)}function _ye(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=t8e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function t8e(e,t){var n=oJt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&aJt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function lJt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function cJt(e){return t8e(e,fJt.apply(this,arguments))}function fJt(e,t,n){var r,i,s;if(arguments.length>1)r=dJt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:lJt(e,r)}}function dJt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function zg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hJt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QI(e){let t,n,r;e.length!==2?(t=zg,n=(a,u)=>zg(e(a),u),r=(a,u)=>e(a)-u):(t=e===zg||e===hJt?e:pJt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function pJt(){return 0}function n8e(e){return e===null?NaN:+e}function*mJt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const r8e=QI(zg),SM=r8e.right,gJt=r8e.left;QI(n8e).center;const yJt=SM;function vJt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function _Jt(e,t){const n=vJt(e,t);return n&&Math.sqrt(n)}function bJt(e,t){return Array.from(t,n=>e[n])}function wJt(e=zg){if(e===zg)return i8e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function i8e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const EJt=Math.sqrt(50),xJt=Math.sqrt(10),SJt=Math.sqrt(2);function s8e(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=EJt?10:s>=xJt?5:s>=SJt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?s8e(e,t,n*2):[a,u,l]}function bye(e,t,n){return t=+t,e=+e,n=+n,s8e(e,t,n)[2]}function cA(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bye(t,e,n):bye(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function k1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function WH(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function o8e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?i8e:wJt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));o8e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(OS(e,n,t),i(e[r],s)>0&&OS(e,n,r);o<a;){for(OS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?OS(e,n,a):(++a,OS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function OS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function GH(e,t,n){if(e=Float64Array.from(mJt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return WH(e);if(t>=1)return k1(e);var r,i=(r-1)*t,s=Math.floor(i),o=k1(o8e(e,s).subarray(0,s+1)),a=WH(e.subarray(s+1));return o+(a-o)*(i-s)}}function TJt(e,t,n=n8e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function CJt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function a8e(e,t){return GH(e,.5,t)}function Qv(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function u8e(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function AJt(e,...t){e=new LD(e),t=t.map(IJt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function IJt(e){return e instanceof LD?e:new LD(e)}function OJt(...e){const t=new LD;for(const n of e)for(const r of n)t.add(r);return t}const Eo="year",Cu="quarter",ea="month",bs="week",Au="date",Go="day",th="dayofyear",ml="hours",gl="minutes",ac="seconds",vf="milliseconds",QZ=[Eo,Cu,ea,bs,Au,Go,th,ml,gl,ac,vf],Gj=QZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function JZ(e){const t=nt(e).slice(),n={};return t.length||Te("Missing time unit."),t.forEach(i=>{Nt(Gj,i)?n[i]=1:Te(`Invalid time unit: ${i}.`)}),(n[bs]||n[Go]?1:0)+(n[Cu]||n[ea]||n[Au]?1:0)+(n[th]?1:0)>1&&Te(`Incompatible time units: ${e}`),t.sort((i,s)=>Gj[i]-Gj[s]),t}const PJt={[Eo]:"%Y ",[Cu]:"Q%q ",[ea]:"%b ",[Au]:"%d ",[bs]:"W%U ",[Go]:"%a ",[th]:"%j ",[ml]:"%H:00",[gl]:"00:%M",[ac]:":%S",[vf]:".%L",[`${Eo}-${ea}`]:"%Y-%m ",[`${Eo}-${ea}-${Au}`]:"%Y-%m-%d ",[`${ml}-${gl}`]:"%H:%M"};function l8e(e,t){const n=hn({},PJt,t),r=JZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Vy=new Date;function ZZ(e){return Vy.setFullYear(e),Vy.setMonth(0),Vy.setDate(1),Vy.setHours(0,0,0,0),Vy}function c8e(e){return d8e(new Date(e))}function f8e(e){return YH(new Date(e))}function d8e(e){return yp.count(ZZ(e.getFullYear())-1,e)}function YH(e){return qE.count(ZZ(e.getFullYear())-1,e)}function KH(e){return ZZ(e).getDay()}function kJt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function h8e(e){return m8e(new Date(e))}function p8e(e){return XH(new Date(e))}function m8e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return $g.count(t-1,e)}function XH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return WE.count(t-1,e)}function QH(e){return Vy.setTime(Date.UTC(e,0,1)),Vy.getUTCDay()}function $Jt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function g8e(e,t,n,r,i){const s=t||1,o=Un(e),a=(y,v,_)=>(_=_||y,RJt(n[_],r[_],y===o&&s,v)),u=new Date,l=yf(e),c=l[Eo]?a(Eo):la(2012),f=l[ea]?a(ea):l[Cu]?a(Cu):eg,d=l[bs]&&l[Go]?a(Go,1,bs+Go):l[bs]?a(bs,1):l[Go]?a(Go,1):l[Au]?a(Au,1):l[th]?a(th,1):yx,h=l[ml]?a(ml):eg,p=l[gl]?a(gl):eg,m=l[ac]?a(ac):eg,g=l[vf]?a(vf):eg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function RJt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function tE(e,t,n){return t+e*7-(n+6)%7}const NJt={[Eo]:e=>e.getFullYear(),[Cu]:e=>Math.floor(e.getMonth()/3),[ea]:e=>e.getMonth(),[Au]:e=>e.getDate(),[ml]:e=>e.getHours(),[gl]:e=>e.getMinutes(),[ac]:e=>e.getSeconds(),[vf]:e=>e.getMilliseconds(),[th]:e=>d8e(e),[bs]:e=>YH(e),[bs+Go]:(e,t)=>tE(YH(e),e.getDay(),KH(t)),[Go]:(e,t)=>tE(1,e.getDay(),KH(t))},DJt={[Cu]:e=>3*e,[bs]:(e,t)=>tE(e,0,KH(t))};function y8e(e,t){return g8e(e,t||1,NJt,DJt,kJt)}const MJt={[Eo]:e=>e.getUTCFullYear(),[Cu]:e=>Math.floor(e.getUTCMonth()/3),[ea]:e=>e.getUTCMonth(),[Au]:e=>e.getUTCDate(),[ml]:e=>e.getUTCHours(),[gl]:e=>e.getUTCMinutes(),[ac]:e=>e.getUTCSeconds(),[vf]:e=>e.getUTCMilliseconds(),[th]:e=>m8e(e),[bs]:e=>XH(e),[Go]:(e,t)=>tE(1,e.getUTCDay(),QH(t)),[bs+Go]:(e,t)=>tE(XH(e),e.getUTCDay(),QH(t))},LJt={[Cu]:e=>3*e,[bs]:(e,t)=>tE(e,0,QH(t))};function v8e(e,t){return g8e(e,t||1,MJt,LJt,$Jt)}const FJt={[Eo]:Vd,[Cu]:SC.every(3),[ea]:SC,[bs]:qE,[Au]:yp,[Go]:yp,[th]:yp,[ml]:S4,[gl]:E4,[ac]:op,[vf]:Iw},BJt={[Eo]:Hd,[Cu]:TC.every(3),[ea]:TC,[bs]:WE,[Au]:$g,[Go]:$g,[th]:$g,[ml]:T4,[gl]:x4,[ac]:op,[vf]:Iw};function wx(e){return FJt[e]}function Ex(e){return BJt[e]}function _8e(e,t,n){return e?e.offset(t,n):void 0}function b8e(e,t,n){return _8e(wx(e),t,n)}function w8e(e,t,n){return _8e(Ex(e),t,n)}function E8e(e,t,n,r){return e?e.range(t,n,r):void 0}function x8e(e,t,n,r){return E8e(wx(e),t,n,r)}function S8e(e,t,n,r){return E8e(Ex(e),t,n,r)}const _T=1e3,bT=_T*60,wT=bT*60,GF=wT*24,jJt=GF*7,wye=GF*30,JH=GF*365,T8e=[Eo,ea,Au,ml,gl,ac,vf],ET=T8e.slice(0,-1),xT=ET.slice(0,-1),ST=xT.slice(0,-1),zJt=ST.slice(0,-1),UJt=[Eo,bs],Eye=[Eo,ea],C8e=[Eo],PS=[[ET,1,_T],[ET,5,5*_T],[ET,15,15*_T],[ET,30,30*_T],[xT,1,bT],[xT,5,5*bT],[xT,15,15*bT],[xT,30,30*bT],[ST,1,wT],[ST,3,3*wT],[ST,6,6*wT],[ST,12,12*wT],[zJt,1,GF],[UJt,1,jJt],[Eye,1,wye],[Eye,3,3*wye],[C8e,1,JH]];function A8e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(XI(t))/n;let i=QI(a=>a[2]).right(PS,r),s,o;return i===PS.length?(s=C8e,o=cA(t[0]/JH,t[1]/JH,n)):i?(i=PS[r/PS[i-1][2]<PS[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=T8e,o=Math.max(cA(t[0],t[1],n),1)),{units:s,step:o}}function TT(e){const t={};return n=>t[n]||(t[n]=e(n))}function VJt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=HJt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function HJt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function I8e(e){const t=TT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=K1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return VJt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=K1(o??",f");const a=cA(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Yke(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Kke(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Gke(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let ZH;O8e();function O8e(){return ZH=I8e({format:VE,formatPrefix:IK})}function P8e(e){return I8e(Wke(e))}function TM(e){return arguments.length?ZH=P8e(e):ZH}function xye(e,t,n){n=n||{},ot(n)||Te(`Invalid time multi-format specifier: ${n}`);const r=t(ac),i=t(gl),s=t(ml),o=t(Au),a=t(bs),u=t(ea),l=t(Cu),c=t(Eo),f=e(n[vf]||".%L"),d=e(n[ac]||":%S"),h=e(n[gl]||"%I:%M"),p=e(n[ml]||"%I %p"),m=e(n[Au]||n[Go]||"%a %d"),g=e(n[bs]||"%b %d"),y=e(n[ea]||"%B"),v=e(n[Cu]||"%B"),_=e(n[Eo]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:s(b)<b?h:o(b)<b?p:u(b)<b?a(b)<b?m:g:c(b)<b?l(b)<b?y:v:_)(b)}function k8e(e){const t=TT(e.format),n=TT(e.utcFormat);return{timeFormat:r=>rt(r)?t(r):xye(t,wx,r),utcFormat:r=>rt(r)?n(r):xye(n,Ex,r),timeParse:TT(e.parse),utcParse:TT(e.utcParse)}}let eq;$8e();function $8e(){return eq=k8e({format:NK,parse:S$e,utcFormat:C4,utcParse:T$e})}function R8e(e){return k8e(_$e(e))}function fA(e){return arguments.length?eq=R8e(e):eq}const tq=(e,t)=>hn({},e,t);function N8e(e,t){const n=e?P8e(e):TM(),r=t?R8e(t):fA();return tq(n,r)}function eee(e,t){const n=arguments.length;return n&&n!==2&&Te("defaultLocale expects either zero or two arguments."),n?tq(TM(e),fA(t)):tq(TM(),fA())}function qJt(){return O8e(),$8e(),eee()}const WJt=/^(data:|([A-Za-z]+:)?\/\/)/,GJt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,YJt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Sye="file://";function KJt(e,t){return n=>({options:n||{},sanitize:QJt,load:XJt,fileAccess:!!t,file:JJt(t),http:eZt(e)})}async function XJt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function QJt(e,t){t=hn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=GJt.test(e.replace(YJt,""));(e==null||typeof e!="string"||!a)&&Te("Sanitize failure, invalid URI: "+Xe(e));const u=WJt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Sye))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Sye.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function JJt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):ZJt}async function ZJt(){Te("No file system access.")}function eZt(e){return e?async function(t,n){const r=hn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pn(s[i])?s[i]():s.text():Te(s.status+""+s.statusText)}:tZt}async function tZt(){Te("No HTTP fetch method available.")}const nZt=e=>e!=null&&e===e,rZt=e=>e==="true"||e==="false"||e===!0||e===!1,iZt=e=>!Number.isNaN(Date.parse(e)),D8e=e=>!Number.isNaN(+e)&&!(e instanceof Date),sZt=e=>D8e(e)&&Number.isInteger(+e),nq={boolean:YZ,integer:Yo,number:Yo,date:KZ,string:XZ,unknown:ua},ak=[rZt,sZt,D8e,iZt],oZt=["boolean","integer","number","date"];function M8e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=ak.length,i=ak.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&nZt(u)&&!ak[a](u)&&(i[a]=0,++o,o===ak.length))return"string";return oZt[i.reduce((s,o)=>s===0?o:s,0)-1]}function L8e(e,t){return t.reduce((n,r)=>(n[r]=M8e(e,r),n),{})}function Tye(e){const t=function(n,r){const i={delimiter:e};return tee(n,r?hn(r,i):i)};return t.responseType="text",t}function tee(e,t){return t.header&&(e=t.header.map(Xe).join(t.delimiter)+`
`+e),Vke(t.delimiter).parse(e+"")}tee.responseType="text";function aZt(e){return typeof Buffer=="function"&&pn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function nee(e,t){const n=t&&t.property?sc(t.property):ua;return ot(e)&&!aZt(e)?uZt(n(e),t):n(JSON.parse(e))}nee.responseType="json";function uZt(e,t){return!Ie(e)&&Y5e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const lZt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function F8e(e,t){let n,r,i,s;return e=nee(e,t),t&&t.feature?(n=uJt,i=t.feature):t&&t.mesh?(n=cJt,i=t.mesh,s=lZt[t.filter]):Te("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Te("Invalid TopoJSON object: "+i),r&&r.features||[r]}F8e.responseType="json";const F$={dsv:tee,csv:Tye(","),tsv:Tye("	"),json:nee,topojson:F8e};function ree(e,t){return arguments.length>1?(F$[e]=t,this):Nt(F$,e)?F$[e]:null}function B8e(e){const t=ree(e);return t&&t.responseType||"text"}function j8e(e,t,n,r){t=t||{};const i=ree(t.type||"json");return i||Te("Unknown data format type: "+t.type),e=i(e,t),t.parse&&cZt(e,t.parse,n,r),Nt(e,"columns")&&delete e.columns,e}function cZt(e,t,n,r){if(!e.length)return;const i=fA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=L8e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!nq[p])throw Error("Illegal format pattern: "+h+":"+p);return nq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const YF=KJt(typeof fetch<"u"&&fetch,null);function KF(e){const t=e||ua,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function B$(e,t){try{await t(e)}catch(n){e.error(n)}}const z8e=Symbol("vega_id");let fZt=1;function XF(e){return!!(e&&$t(e))}function $t(e){return e[z8e]}function U8e(e,t){return e[z8e]=t,e}function dr(e){const t=e===Object(e)?e:{data:e};return $t(t)?t:U8e(t,fZt++)}function iee(e){return QF(e,dr({}))}function QF(e,t){for(const n in e)t[n]=e[n];return t}function V8e(e,t){return U8e(t,$t(e))}function Jv(e,t){return e?t?(n,r)=>e(n,r)||$t(t(n))-$t(t(r)):(n,r)=>e(n,r)||$t(n)-$t(r):null}function H8e(e){return e&&e.constructor===Zv}function Zv(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Zv,insert(a){const u=nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=pn(a)?r:t,l=nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:la(l)};return pn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return pn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[$t(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[$t(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[$t(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=$t(m),l[g]?l[g]=1:a.add.push(dr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[$t(m)]<0&&a.rem.push(m);function y(v,_,b){b?v[_]=b(v):a.encode=_,o||(c[$t(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[$t(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[$t(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[$t(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const j$="_:mod:_";function JF(){Object.defineProperty(this,j$,{writable:!0,value:{}})}JF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[j$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ie(n)?1+n.length:-1),i},modified(e,t){const n=this[j$];if(arguments.length){if(Ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[j$]={},this}};let dZt=0;const hZt="pulse",pZt=new JF,mZt=1,gZt=2;function Dr(e,t,n,r){this.id=++dZt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Cye(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=KF(KI))},set(e){return this.value!==e?(this.value=e,1):0},skip:Cye(mZt),modified:Cye(gZt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new JF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===hZt)nt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Te("Pulse parameters must be operator instances.")}),this.source=a;else if(Ie(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||pZt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function yZt(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:pn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function vZt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let _Zt=0;function ZF(e,t,n){this.id=++_Zt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Nm(e,t,n){return new ZF(e,t,n)}ZF.prototype={_filter:oc,_apply:ua,targets(){return this._targets||(this._targets=KF(KI))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Nm(e);return this.targets().add(t),t},apply(e){const t=Nm(null,e);return this.targets().add(t),t},merge(){const e=Nm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Nm();return this.targets().add(Nm(null,null,WZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Nm(null,null,()=>n=!0)),t.targets().add(Nm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=oc,this._targets=null}};function bZt(e,t,n,r){const i=this,s=Nm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function wZt(e,t){const n=this.locale();return j8e(e,t,n.timeParse,n.utcParse)}function EZt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function xZt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:B8e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function SZt(e,t,n){const r=this,i=r._pending||TZt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(oc).insert(s.data||[])),i.done(),s}function TZt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const CZt={skip:!0};function AZt(e,t,n,r,i){return(e instanceof Dr?OZt:IZt)(this,e,t,n,r,i),this}function IZt(e,t,n,r,i,s){const o=hn({},s,CZt);let a,u;pn(n)||(n=la(n)),r===void 0?a=l=>e.touch(n(l)):pn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;H8e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function OZt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,PZt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function PZt(e,t){return t=pn(t)?t:la(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function kZt(e){e.rank=++this._rank}function $Zt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Te("Cycle detected in dataflow graph.")}const CM={},Jf=1,Um=2,Fh=4,RZt=Jf|Um,Aye=Jf|Fh,A_=Jf|Um|Fh,Iye=8,kS=16,Oye=32,Pye=64;function Ug(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Yj(e,t){const n=[];return zm(e,t,r=>n.push(r)),n}function kye(e,t){const n={};return e.visit(t,r=>{n[$t(r)]=1}),r=>n[$t(r)]?null:r}function uk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ug.prototype={StopPropagation:CM,ADD:Jf,REM:Um,MOD:Fh,ADD_REM:RZt,ADD_MOD:Aye,ALL:A_,REFLOW:Iye,SOURCE:kS,NO_SOURCE:Oye,NO_FIELDS:Pye,fork(e){return new Ug(this.dataflow).init(this,e)},clone(){const e=this.fork(A_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(A_|kS)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ug(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Pye)&&(n.fields=e.fields),t&Jf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Um?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Fh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Oye?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||A_;return t&Jf&&this.add.length||t&Um&&this.rem.length||t&Fh&&this.mod.length},reflow(e){if(e)return this.fork(A_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Fh,kye(this,Jf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Jf&&(n.addF=uk(n.addF,t)),e&Um&&(n.remF=uk(n.remF,t)),e&Fh&&(n.modF=uk(n.modF,t)),e&kS&&(n.srcF=uk(n.srcF,t)),n},materialize(e){e=e||A_;const t=this;return e&Jf&&t.addF&&(t.add=Yj(t.add,t.addF),t.addF=null),e&Um&&t.remF&&(t.rem=Yj(t.rem,t.remF),t.remF=null),e&Fh&&t.modF&&(t.mod=Yj(t.mod,t.modF),t.modF=null),e&kS&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&kS)return zm(n.source,n.srcF,r),n;e&Jf&&zm(n.add,n.addF,r),e&Um&&zm(n.rem,n.remF,r),e&Fh&&zm(n.mod,n.modF,r);const i=n.source;if(e&Iye&&i){const s=n.add.length+n.mod.length;s===i.length||(s?zm(i,kye(n,Aye),r):zm(i,n.srcF,r))}return n}};function see(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}We(see,Ug,{fork(e){const t=new Ug(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ie(e)?e.some(r=>n[r]):n[e]:0},filter(){Te("MultiPulse does not support filtering.")},materialize(){Te("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function NZt(e,t,n){const r=this,i=[];if(r._pulse)return q8e(r);if(r._pending&&await r._pending,t&&await B$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Ug(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=KF(KI);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=CM),u!==CM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await B$(r,c[f].callback)}return n&&await B$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function DZt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function MZt(e,t,n){return this._pulse?q8e(this):(this.evaluate(e,t,n),this)}function LZt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function q8e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function FZt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function BZt(e,t){const n=e.source,r=this._clock;return n&&Ie(n)?new see(this,r,n.map(i=>i.pulse),t):this._input[e.id]||jZt(this._pulse,n&&n.pulse)}function jZt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==CM&&(e.source=t.source),e)}const oee={skip:!1,force:!1};function zZt(e,t){const n=t||oee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function UZt(e,t,n){const r=n||oee;return(e.set(t)||r.force)&&this.touch(e,r),this}function VZt(e,t,n){this.touch(e,n||oee);const r=new Ug(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function HZt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),W8e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,qZt(t,0,e)):r=n,r}}}function W8e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function qZt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,W8e(e,r,t,n)}function nw(){this.logger(zZ()),this.logLevel(BZ),this._clock=0,this._rank=0,this._locale=eee();try{this._loader=YF()}catch{}this._touched=KF(KI),this._input={},this._pulse=null,this._heap=HZt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function $S(e){return function(){return this._log[e].apply(this,arguments)}}nw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:$S("error"),warn:$S("warn"),info:$S("info"),debug:$S("debug"),logLevel:$S("level"),cleanThreshold:1e4,add:yZt,connect:vZt,rank:kZt,rerank:$Zt,pulse:VZt,touch:zZt,update:UZt,changeset:Zv,ingest:EZt,parse:wZt,preload:SZt,request:xZt,events:bZt,on:AZt,evaluate:NZt,run:MZt,runAsync:DZt,runAfter:LZt,_enqueue:FZt,_getPulse:BZt};function Ee(e,t){Dr.call(this,e,null,t)}We(Ee,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const nE={};function G8e(e){const t=Y8e(e);return t&&t.Definition||null}function Y8e(e){return e=e&&e.toLowerCase(),Nt(nE,e)?nE[e]:null}function*K8e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function aee(e,t,n){const r=Float64Array.from(K8e(e,n));return r.sort(zg),t.map(i=>TJt(r,i))}function uee(e,t){return aee(e,[.25,.5,.75],t)}function lee(e,t){const n=e.length,r=_Jt(e,t),i=uee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function X8e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var uc=Math.random;function WZt(e){uc=e}function Q8e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(K8e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(uc()*s)];c[l]=a/s}return c.sort(zg),[GH(c,n/2),GH(c,1-n/2)]}function J8e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?GZt(s,t+t/4):s}function GZt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function YZt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function KZt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*uc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const Z8e=Math.sqrt(2*Math.PI),XZt=Math.SQRT2;let RS=NaN;function e5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(RS===RS)n=RS,RS=NaN;else{do n=uc()*2-1,r=uc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,RS=r*s}return e+n*t}function cee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Z8e)}function t5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function n5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*XZt*QZt(2*e-1)}function QZt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function fee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>e5(n,r),pdf:s=>cee(s,n,r),cdf:s=>t5(s,n,r),icdf:s=>n5(s,n,r)};return i.mean(e).stdev(t)}function dee(e,t){const n=fee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=lee(e)),i):t},sample(){return e[~~(uc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function hee(e,t){return e=e||0,t=t??1,Math.exp(e+e5()*t)}function pee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Z8e*e)}function mee(e,t,n){return t5(Math.log(e),t,n)}function gee(e,t,n){return Math.exp(n5(e,t,n))}function e9e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>hee(n,r),pdf:s=>pee(s,n,r),cdf:s=>mee(s,n,r),icdf:s=>gee(s,n,r)};return i.mean(e).stdev(t)}function t9e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=uc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function yee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*uc()}function vee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function _ee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function bee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function n9e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>yee(n,r),pdf:s=>vee(s,n,r),cdf:s=>_ee(s,n,r),icdf:s=>bee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function wee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function JI(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function r5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function ZI(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function xx(e,t,n,r,i){let s=0,o=0;return ZI(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Eee(e,t,n){let r=0,i=0,s=0,o=0,a=0;ZI(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=JI(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:xx(e,t,n,i,l)}}function r9e(e,t,n){let r=0,i=0,s=0,o=0,a=0;ZI(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=JI(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:xx(e,t,n,i,l)}}function i9e(e,t,n){const[r,i,s,o]=r5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;ZI(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=JI(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:xx(e,t,n,o,y)}}function s9e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;ZI(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=JI(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:xx(e,t,n,a,c)}}function xee(e,t,n){const[r,i,s,o]=r5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,b=(f*y-d*l)/v,E=-_*u,w=x=>(x=x-s,_*x*x+b*x+E+o);return{coef:[E-b*s+_*s*s+o,b-2*_*s,_],predict:w,rSquared:xx(e,t,n,o,w)}}function o9e(e,t,n,r){if(r===0)return wee(e,t,n);if(r===1)return Eee(e,t,n);if(r===2)return xee(e,t,n);const[i,s,o,a]=r5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=ZZt(c),v=_=>{_-=o;let b=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)b+=y[d]*Math.pow(_,d);return b};return{coef:JZt(f,y,-o,a),predict:v,rSquared:xx(e,t,n,a,v)}}function JZt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function ZZt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const $ye=2,Rye=1e-12;function a9e(e,t,n,r){const[i,s,o,a]=r5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=$ye;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],b=y-i[v]>i[_]-y?v:_;let E=0,w=0,x=0,S=0,P=0;const A=1/Math.abs(i[b]-y||1);for(let D=v;D<=_;++D){const R=i[D],N=s[D],L=een(Math.abs(y-R)*A)*d[D],V=R*L;E+=L,w+=V,x+=N*L,S+=N*V,P+=R*V}const[O,z]=JI(w/E,x/E,S/E,P/E);c[g]=O+z*y,f[g]=Math.abs(s[g]-c[g]),ten(i,g+1,p)}if(h===$ye)break;const m=a8e(f);if(Math.abs(m)<Rye)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Rye:(v=1-y*y)*v}return nen(i,c,o,a)}function een(e){return(e=1-e*e*e)*e*e}function ten(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function nen(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const ren=.5*Math.PI/180;function i5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=ien(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&sen(f,m,d,h,p)>ren?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function ien(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function sen(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function oen(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function rq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:oen(e)}function u9e(e,t,n){return n||e+(t?"_"+t:"")}const Kj=()=>{},aen={init:Kj,add:Kj,rem:Kj,idx:0},dA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},eO=Object.keys(dA).filter(e=>e!=="__count__");function uen(e,t){return(n,r)=>hn({name:e,aggregate_param:r,out:n||e},aen,t)}[...eO,"__count__"].forEach(e=>{dA[e]=uen(e,dA[e])});function l9e(e,t,n){return dA[e](n,t)}function c9e(e,t){return e.idx-t.idx}function len(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=dA[i]())})};return e.forEach(n),Object.values(t).sort(c9e)}function cen(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function fen(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function den(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function hen(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function f9e(e,t){const n=t||ua,r=len(e),i=e.slice().sort(c9e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=cen,s.prototype.add=fen,s.prototype.rem=den,s.prototype.set=hen,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function See(e){this._key=e?sc(e):$t,this.reset()}const Ao=See.prototype;Ao.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ao.add=function(e){this._add.push(e)};Ao.rem=function(e){this._rem.push(e)};Ao.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ao.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Nt(n,s)||(n[s]=1,++i);return i};Ao.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=W5e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ao.argmin=function(e){return this.extent(e)[0]||{}};Ao.argmax=function(e){return this.extent(e)[1]||{}};Ao.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ao.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ao.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=uee(this.values(),e),this._get=e),this._q};Ao.q1=function(e){return this.quartile(e)[0]};Ao.q2=function(e){return this.quartile(e)[1]};Ao.q3=function(e){return this.quartile(e)[2]};Ao.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Q8e(this.values(),1e3,.05,e),this._get=e),this._ci};Ao.ci0=function(e){return this.ci(e)[0]};Ao.ci1=function(e){return this.ci(e)[1]};function g0(e){Ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}g0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:eO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};We(g0,Ee,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=nt(Zo(v)),b=_.length;let E=0,w;for(;E<b;++E)r[w=_[E]]||(r[w]=1,t.push(w))}this._dims=nt(e.groupby),this._dnames=this._dims.map(v=>{const _=Li(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:rq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Te("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Te("Null aggregate field specified."),m=Li(f),g=u9e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(l9e(d,h,g))}return this._measures=this._measures.map(v=>f9e(v,v.field)),Object.create(null)},cellkey:rq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new See),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?V8e(t.tuple,s):dr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const pen=1e-14;function Tee(e){Ee.call(this,null,e)}Tee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};We(Tee,Ee,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Zo(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=X8e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Yo(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(pen+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Du(u,Zo(t),e.name||"bin_"+Li(t))}});function d9e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?J5e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Cee(e){Ee.call(this,[],e)}Cee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};We(Cee,Ee,{transform(e,t){const n=t.fork(t.ALL),r=d9e($t,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Jv(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function h9e(e){Dr.call(this,null,men,e)}We(h9e,Dr);function men(e){return this.value&&!e.modified()?this.value:qZ(e.fields,e.orders)}function Aee(e){Ee.call(this,null,e)}Aee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function gen(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}We(Aee,Ee,{transform(e,t){const n=f=>d=>{for(var h=gen(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=dr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Iee(e){Ee.call(this,null,e)}Iee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};We(Iee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=yen(a,i,s,e.filter||oc)):n.mod=a,n.source=this.value,n.modifies(r)}});function yen(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(dr(s)),s={},s[t]=l);return i}const Nye={kde:dee,mixture:t9e,normal:fee,lognormal:e9e,uniform:n9e},ven="distributions",Dye="function",_en="field";function p9e(e,t){const n=e[Dye];Nt(Nye,n)||Te("Unknown distribution function: "+n);const r=Nye[n]();for(const i in e)i===_en?r.data((e.from||t()).map(e[i])):i===ven?r[i](e[i].map(s=>p9e(s,t))):typeof r[i]===Dye&&r[i](e[i]);return r}function Oee(e){Ee.call(this,null,e)}const m9e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ben={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:m9e},{name:"weights",type:"number",array:!0}]};Oee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:m9e.concat(ben)},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(Oee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=p9e(e.distribution,wen(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Te("Invalid density method: "+o),!e.extent&&!r.data&&Te("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||eh(r.data()),l=i5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],dr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function wen(e){return()=>e.materialize(e.SOURCE).source}function g9e(e,t){return e?e.map((n,r)=>t[r]||Li(n)):null}function Pee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const y9e="bin";function kee(e){Ee.call(this,null,e)}kee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:y9e}]};const Een=(e,t)=>XI(eh(e,t))/30;We(kee,Ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Pee(t.source,e.groupby,ua),i=e.smooth||!1,s=e.field,o=e.step||Een(n,s),a=Jv((p,m)=>s(p)-s(m)),u=e.as||y9e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of J8e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function v9e(e){Dr.call(this,null,xen,e),this.modified(!0)}We(v9e,Dr);function xen(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Du(n=>t(n,e),Zo(t),Li(t))}function $ee(e){Ee.call(this,[void 0,void 0],e)}$ee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};We($ee,Ee,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Yo(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Li(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Ree(e,t){Dr.call(this,e),this.parent=t,this.count=0}We(Ree,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function s5(e){Ee.call(this,{},e),this._keys=bx();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}We(s5,Ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Nt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Ree(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=$t(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set($t(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=$t(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get($t(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=$t(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function _9e(e){Dr.call(this,null,Sen,e)}We(_9e,Dr);function Sen(e){return this.value&&!e.modified()?this.value:Ie(e.name)?nt(e.name).map(t=>sc(t)):sc(e.name,e.as)}function Nee(e){Ee.call(this,bx(),e)}Nee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};We(Nee,Ee,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=$t(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set($t(f),1)});function c(f){const d=$t(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Dee(e){Ee.call(this,[],e)}Dee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};We(Dee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=g9e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=iee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Mee(e){Ee.call(this,[],e)}Mee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};We(Mee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Li),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=iee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Lee(e){Ee.call(this,null,e)}Lee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};We(Lee,Ee,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function b9e(e){Ee.call(this,[],e)}We(b9e,Ee,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=dr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const lk={value:"value",median:a8e,mean:CJt,min:WH,max:k1},Ten=[];function Fee(e){Ee.call(this,[],e)}Fee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Cen(e){var t=e.method||lk.value,n;if(lk[t]==null)Te("Unrecognized imputation method: "+t);else return t===lk.value?(n=e.value!==void 0?e.value:0,()=>n):lk[t]}function Aen(e){const t=e.field;return n=>n?t(n):NaN}We(Fee,Ee,{transform(e,t){var n=t.fork(t.ALL),r=Cen(e),i=Aen(e),s=Li(e.field),o=Li(e.key),a=(e.groupby||[]).map(Li),u=Ien(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,b,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,b=p.length;y<b;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(dr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function Ien(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Ten)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Bee(e){g0.call(this,e)}Bee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:eO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};We(Bee,g0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function jee(e){Ee.call(this,null,e)}jee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(jee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Pee(r,e.groupby,e.field),s=(e.groupby||[]).map(Li),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Te("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=eh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=dee(h,o)[a],m=e.counts?h.length:1,g=c||eh(h);i5(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(dr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function w9e(e){Dr.call(this,null,Oen,e)}We(w9e,Dr);function Oen(e){return this.value&&!e.modified()?this.value:GZ(e.fields,e.flat)}function E9e(e){Ee.call(this,[],e),this._pending=null}We(E9e,Ee,{transform(e,t){const n=t.dataflow;return this._pending?Xj(this,t,this._pending):Pen(e)?t.StopPropagation:e.values?Xj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Xj(this,t,nt(r.data)))}});function Pen(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Xj(e,t,n){n.forEach(dr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function zee(e){Ee.call(this,{},e)}zee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};We(zee,Ee,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Te('The "as" parameter has too few output field names.'),c=c||i.map(Li),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Te("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function x9e(e){Dr.call(this,null,ken,e)}We(x9e,Dr);function ken(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function S9e(e){Dr.call(this,null,$en,e)}We(S9e,Dr);function $en(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function T9e(e){Ee.call(this,null,e)}We(T9e,Ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Uee(e){g0.call(this,e)}Uee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:eO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};We(Uee,g0,{_transform:g0.prototype.transform,transform(e,t){return this._transform(Ren(e,t),t)}});function Ren(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Zo(n).concat(Zo(r)),o=Den(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Nen(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Nen(e,t,n,r){return Du(i=>t(i)===e?n(i):NaN,r,e+"")}function Den(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(WF),t?i.slice(0,t):i}function C9e(e){s5.call(this,e)}We(C9e,s5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow($t(s),n,t,s);return(e.modified("field")||r&&t.modified(Zo(r)))&&Te("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(dr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Vee(e){Ee.call(this,null,e)}Vee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};We(Vee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=g9e(e.fields,e.as||[]),s=r?(a,u)=>Men(a,u,r,i):QF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=$t(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,dr({}));o[$t(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[$t(a)]))}),n}});function Men(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function A9e(e){Ee.call(this,null,e)}We(A9e,Ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Hee(e){Ee.call(this,null,e)}Hee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Len=1e-14;We(Hee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Pee(i,e.groupby,e.field),o=(e.groupby||[]).map(Li),a=[],u=e.step||.01,l=e.probs||Qv(u/2,1-Len,u),c=l.length;return s.forEach(f=>{const d=aee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(dr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function I9e(e){Ee.call(this,null,e)}We(I9e,Ee,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=$t(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=iee(i);r[$t(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[$t(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function qee(e){Ee.call(this,[],e),this.count=0}qee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};We(qee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[$t(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*uc()),d<o.length&&d>=u&&(f=o[d],s[$t(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=$t(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[$t(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[$t(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[$t(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[$t(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[$t(c)])),this.count=a,this.value=n.source=o,n}});function Wee(e){Ee.call(this,null,e)}Wee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};We(Wee,Ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Qv(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,dr(s)}),n.add=t.add.concat(this.value),n}});function O9e(e){Ee.call(this,null,e),this.modified(!0)}We(O9e,Ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Gee(e){Ee.call(this,null,e)}const P9e=["unit0","unit1"];Gee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:QZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:P9e}]};We(Gee,Ee,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?Ex:wx)(s.unit).offset,a=e.as||P9e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Zo(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:A8e({extent:e.extent||eh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=JZ(r),o=this.value||{},a=(n?v8e:y8e)(s,i);return a.unit=Un(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function k9e(e){Ee.call(this,bx(),e)}We(k9e,Ee,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function $9e(e){Ee.call(this,null,e)}We($9e,Ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Jv(e.sort)):t.source).map(e.field))}});function Fen(e,t,n,r){const i=hA[e](t,n);return{init:i.init||eg,update:function(s,o){o[r]=i.next(s)}}}const hA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=hA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Te("ntile num must be greater than zero.");const n=hA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Te("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Ben(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Ben(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const jen=Object.keys(hA);function R9e(e){const t=nt(e.ops),n=nt(e.fields),r=nt(e.params),i=nt(e.aggregate_params),s=nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){nt(Zo(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Li(g),b=u9e(p,_,s[m]);if(h(g),o.push(b),Nt(hA,p))a.push(Fen(p,g,y,b));else{if(g==null&&p!=="count"&&Te("Null aggregate field specified."),p==="count"){c.push(b);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(l9e(p,v,b))}}),(c.length||f.length)&&(this.cell=zen(f,c,d)),this.inputs=Object.keys(u)}const N9e=R9e.prototype;N9e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};N9e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function zen(e,t,n){e=e.map(u=>f9e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new See;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Yee(e){Ee.call(this,{},e),this._mlen=0,this._mods=[]}Yee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:jen.concat(eO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};We(Yee,Ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Jv(e.sort),i=rq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new R9e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Uen(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=d9e($t),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Uen(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?QI(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||la(-1)};t.init();for(let f=0;f<u;++f)Ven(c,o,f,u),s&&Hen(c,l),t.update(c,a[f])}function Ven(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Hen(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const qen=Object.freeze(Object.defineProperty({__proto__:null,aggregate:g0,bin:Tee,collect:Cee,compare:h9e,countpattern:Aee,cross:Iee,density:Oee,dotbin:kee,expression:v9e,extent:$ee,facet:s5,field:_9e,filter:Nee,flatten:Dee,fold:Mee,formula:Lee,generate:b9e,impute:Fee,joinaggregate:Bee,kde:jee,key:w9e,load:E9e,lookup:zee,multiextent:x9e,multivalues:S9e,params:T9e,pivot:Uee,prefacet:C9e,project:Vee,proxy:A9e,quantile:Hee,relay:I9e,sample:qee,sequence:Wee,sieve:O9e,subflow:Ree,timeunit:Gee,tupleindex:k9e,values:$9e,window:Yee},Symbol.toStringTag,{value:"Module"}));function Vg(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Wen=()=>typeof Image<"u"?Image:null;function Kee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Gen="identity",rE="linear",Xp="log",tO="pow",nO="sqrt",o5="symlog",uv="time",lv="utc",Fd="sequential",Sx="diverging",iE="quantile",a5="quantize",u5="threshold",Xee="ordinal",iq="point",D9e="band",Qee="bin-ordinal",ks="continuous",rO="discrete",iO="discretizing",Ec="interpolating",Jee="temporal";function Yen(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Ken(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Zee(){const e=HE().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Kee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Qv(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,SM(h,m)-1),v=m===g?y:SM(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Zee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function M9e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return M9e(t())},e}function Xen(){return M9e(Zee().paddingInner(1))}var Qen=Array.prototype.map;function Jen(e){return Qen.call(e,Yo)}const Zen=Array.prototype.slice;function L9e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(yJt(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Jen(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Zen.call(r),n):t.slice()},n.tickFormat=function(r,i){return u$e(e[0],Un(e),r??10,i)},n.copy=function(){return L9e().domain(n.domain()).range(n.range())},n}const AM=new Map,F9e=Symbol("vega_scale");function B9e(e){return e[F9e]=!0,e}function etn(e){return e&&e[F9e]===!0}function ttn(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Yen(s):s.invertExtent?Ken(s):void 0),s.type=e,B9e(s)};return r.metadata=yf(nt(n)),r}function or(e,t,n){return arguments.length>1?(AM.set(e,ttn(e,t,n)),this):j9e(e)?AM.get(e):void 0}or(Gen,l$e);or(rE,Mp,ks);or(Xp,f$e,[ks,Xp]);or(tO,$K,ks);or(nO,dOt,ks);or(o5,d$e,ks);or(uv,C$e,[ks,Jee]);or(lv,RPt,[ks,Jee]);or(Fd,MK,[ks,Ec]);or(`${Fd}-${rE}`,MK,[ks,Ec]);or(`${Fd}-${Xp}`,A$e,[ks,Ec,Xp]);or(`${Fd}-${tO}`,LK,[ks,Ec]);or(`${Fd}-${nO}`,NPt,[ks,Ec]);or(`${Fd}-${o5}`,I$e,[ks,Ec]);or(`${Sx}-${rE}`,O$e,[ks,Ec]);or(`${Sx}-${Xp}`,P$e,[ks,Ec,Xp]);or(`${Sx}-${tO}`,FK,[ks,Ec]);or(`${Sx}-${nO}`,DPt,[ks,Ec]);or(`${Sx}-${o5}`,k$e,[ks,Ec]);or(iE,h$e,[iO,iE]);or(a5,p$e,iO);or(u5,m$e,iO);or(Qee,L9e,[rO,iO]);or(Xee,HE,rO);or(D9e,Zee,rO);or(iq,Xen,rO);function j9e(e){return AM.has(e)}function e_(e,t){const n=AM.get(e);return n&&n.metadata[t]}function ete(e){return e_(e,ks)}function sE(e){return e_(e,rO)}function sq(e){return e_(e,iO)}function z9e(e){return e_(e,Xp)}function ntn(e){return e_(e,Jee)}function U9e(e){return e_(e,Ec)}function V9e(e){return e_(e,iE)}const rtn=["clamp","base","constant","exponent"];function H9e(e,t){const n=t[0],r=Un(t)-n;return function(i){return e(n+i*r)}}function l5(e,t,n){return _K(tte(t||"rgb",n),e)}function q9e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function W9e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?la(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=or(s)().domain([t,n]).range([0,1]),rtn.forEach(a=>e[a]?o[a](e[a]()):0),o)}function tte(e,t){const n=f2t[itn(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function itn(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const stn={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},otn={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function G9e(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function Y9e(e,t){for(const n in e)nte(n,t(e[n]))}const Mye={};Y9e(otn,G9e);Y9e(stn,e=>l5(G9e(e)));function nte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Mye[e]=t,this):Mye[e]}const z$="symbol",atn="discrete",utn="gradient",ltn=e=>Ie(e)?e.map(t=>String(t)):String(e),ctn=(e,t)=>e[1]-t[1],ftn=(e,t)=>t[1]-e[1];function rte(e,t,n){let r;return Jn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(XI(e.domain())/n||1)+1))),ot(t)&&(r=t.step,t=t.interval),rt(t)&&(t=e.type===uv?wx(t):e.type==lv?Ex(t):Te("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function K9e(e,t,n){let r=e.range(),i=r[0],s=Un(r),o=ctn;if(i>s&&(r=s,s=i,i=r,o=ftn),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Un(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function ite(e,t){return e.bins?K9e(e,e.bins):e.ticks?e.ticks(t):e.domain()}function X9e(e,t,n,r,i,s){const o=t.type;let a=ltn;if(o===uv||i===uv)a=e.timeFormat(r);else if(o===lv||i===lv)a=e.utcFormat(r);else if(z9e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=Q9e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function Q9e(e,t,n){const r=ite(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const oq={[iE]:"quantiles",[a5]:"thresholds",[u5]:"domain"},J9e={[iE]:"quantiles",[a5]:"domain"};function Z9e(e,t){return e.bins?ptn(e.bins):e.type===Xp?Q9e(e,t,!0):oq[e.type]?htn(e[oq[e.type]]()):ite(e,t)}function dtn(e,t,n){const r=t[J9e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function htn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function ptn(e){const t=e.slice(0,-1);return t.max=Un(e),t}const mtn=e=>oq[e.type]||e.bins;function eBe(e,t,n,r,i,s,o){const a=J9e[t.type]&&s!==uv&&s!==lv?dtn(e,t,i):X9e(e,t,n,i,s,o);return r===z$&&mtn(t)?gtn(a):r===atn?ytn(a):vtn(a)}const gtn=e=>(t,n,r)=>{const i=Lye(r[n+1],Lye(r.max,1/0)),s=Fye(t,e),o=Fye(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Lye=(e,t)=>e??t,ytn=e=>(t,n)=>n?e(t):null,vtn=e=>t=>e(t),Fye=(e,t)=>Number.isFinite(e)?t(e):null;function _tn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Un(t),s=i-r;if(e.type===u5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function btn(e,t,n,r){const i=r||t.type;return rt(n)&&ntn(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===uv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===lv?e.utcFormat("%A, %d %B %Y, %X UTC"):eBe(e,t,5,null,n,r,!0)}function tBe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=btn(e,t,n.format,n.formatType);if(sq(t.type)){const s=Z9e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(sE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Un(s))}`}}let nBe=0;function wtn(){nBe=0}const IM="p_";function ste(e){return e&&e.gradient}function rBe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?IM:"";return i||(i=e.id="gradient_"+nBe++,r==="radial"?(e.x1=jf(e.x1,.5),e.y1=jf(e.y1,.5),e.r1=jf(e.r1,0),e.x2=jf(e.x2,.5),e.y2=jf(e.y2,.5),e.r2=jf(e.r2,.5),s=IM):(e.x1=jf(e.x1,0),e.y1=jf(e.y1,0),e.x2=jf(e.x2,1),e.y2=jf(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function jf(e,t){return e??t}function iBe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Bye={basis:{curve:XPt},"basis-closed":{curve:QPt},"basis-open":{curve:JPt},bundle:{curve:ZPt,tension:"beta",value:.85},cardinal:{curve:ekt,tension:"tension",value:0},"cardinal-open":{curve:nkt,tension:"tension",value:0},"cardinal-closed":{curve:tkt,tension:"tension",value:0},"catmull-rom":{curve:rkt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ikt,tension:"alpha",value:.5},"catmull-rom-open":{curve:skt,tension:"alpha",value:.5},linear:{curve:BK},"linear-closed":{curve:okt},monotone:{horizontal:ukt,vertical:akt},natural:{curve:lkt},step:{curve:ckt},"step-after":{curve:dkt},"step-before":{curve:fkt}};function ote(e,t,n){var r=Nt(Bye,e)&&Bye[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Etn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},xtn=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Stn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ttn=/^((\s+,?\s*)|(,\s*))/,Ctn=/^[01]/;function oE(e){const t=[];return(e.match(xtn)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Etn[s],a=Atn(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Atn(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Ctn:Stn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Ttn);u!==null&&(i+=u[0].length)}return r}const y0=Math.PI/180,Itn=1e-14,Hy=Math.PI/2,hd=Math.PI*2,I_=Math.sqrt(3)/2;var Qj={},Jj={},sBe=[].join;function Otn(e,t,n,r,i,s,o,a,u){const l=sBe.call(arguments);if(Qj[l])return Qj[l];const c=o*y0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,b=g*a+y*u,E=v*a+_*u,w=g*e+y*t,x=v*e+_*t;let P=1/((w-b)*(w-b)+(x-E)*(x-E))-.25;P<0&&(P=0);let A=Math.sqrt(P);s==i&&(A=-A);const O=.5*(b+w)-A*(x-E),z=.5*(E+x)+A*(w-b),D=Math.atan2(E-z,b-O);let N=Math.atan2(x-z,w-O)-D;N<0&&s===1?N+=hd:N>0&&s===0&&(N-=hd);const L=Math.ceil(Math.abs(N/(Hy+.001))),V=[];for(let j=0;j<L;++j){const H=D+j*N/L,U=D+(j+1)*N/L;V[j]=[O,z,H,U,n,r,f,d]}return Qj[l]=V}function Ptn(e){const t=sBe.call(e);if(Jj[t])return Jj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),b=8/3*_*_/Math.sin(v),E=n+p-b*m,w=r+m+b*p,x=n+g,S=r+y,P=x+b*y,A=S-b*g;return Jj[t]=[c*E+f*w,d*E+h*w,c*P+f*A,d*P+h*A,c*x+f*S,d*x+h*S]}const Pl=["l",0,0,0,0,0,0,0];function ktn(e,t,n){const r=Pl[0]=e[0];if(r==="a"||r==="A")Pl[1]=t*e[1],Pl[2]=n*e[2],Pl[3]=e[3],Pl[4]=e[4],Pl[5]=e[5],Pl[6]=t*e[6],Pl[7]=n*e[7];else if(r==="h"||r==="H")Pl[1]=t*e[1];else if(r==="v"||r==="V")Pl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Pl[i]=(i%2==1?t:n)*e[i];return Pl}function pA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=ktn(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":jye(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":jye(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function jye(e,t,n,r){const i=Otn(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Ptn(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const zye=.5773502691896257,Uye={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,hd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n,i=r-n*zye,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n,i=r-n*zye;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function oBe(e){return Nt(Uye,e)?Uye[e]:$tn(e)}var Zj={};function $tn(e){if(!Nt(Zj,e)){const t=oE(e);Zj[e]={draw:function(n,r){pA(n,t,0,0,Math.sqrt(r)/2)}}}return Zj[e]}const Om=.448084975506;function Rtn(e){return e.x}function Ntn(e){return e.y}function Dtn(e){return e.width}function Mtn(e){return e.height}function Oh(e){return typeof e=="function"?e:()=>+e}function ck(e,t,n){return Math.max(t,Math.min(e,n))}function aBe(){var e=Rtn,t=Ntn,n=Dtn,r=Mtn,i=Oh(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=ck(+i.call(this,c),0,v),b=ck(+s.call(this,c),0,v),E=ck(+o.call(this,c),0,v),w=ck(+a.call(this,c),0,v);if(u||(u=h=y4()),_<=0&&b<=0&&E<=0&&w<=0)u.rect(p,m,g,y);else{var x=p+g,S=m+y;u.moveTo(p+_,m),u.lineTo(x-b,m),u.bezierCurveTo(x-Om*b,m,x,m+Om*b,x,m+b),u.lineTo(x,S-w),u.bezierCurveTo(x,S-Om*w,x-Om*w,S,x-w,S),u.lineTo(p+E,S),u.bezierCurveTo(p+Om*E,S,p,S-Om*E,p,S-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+Om*_,p+Om*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Oh(c),l):e},l.y=function(c){return arguments.length?(t=Oh(c),l):t},l.width=function(c){return arguments.length?(n=Oh(c),l):n},l.height=function(c){return arguments.length?(r=Oh(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Oh(c),s=f!=null?Oh(f):i,a=d!=null?Oh(d):i,o=h!=null?Oh(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function uBe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,b=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(o+v,a+_),i.arc(o,a,u,b,b+Math.PI)}else i.arc(f,d,p,0,hd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=y4()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function sO(e,t){return e??t}const oO=e=>e.x||0,aO=e=>e.y||0,Ltn=e=>e.width||0,Ftn=e=>e.height||0,Btn=e=>(e.x||0)+(e.width||0),jtn=e=>(e.y||0)+(e.height||0),ztn=e=>e.startAngle||0,Utn=e=>e.endAngle||0,Vtn=e=>e.padAngle||0,Htn=e=>e.innerRadius||0,qtn=e=>e.outerRadius||0,Wtn=e=>e.cornerRadius||0,Gtn=e=>sO(e.cornerRadiusTopLeft,e.cornerRadius)||0,Ytn=e=>sO(e.cornerRadiusTopRight,e.cornerRadius)||0,Ktn=e=>sO(e.cornerRadiusBottomRight,e.cornerRadius)||0,Xtn=e=>sO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Qtn=e=>sO(e.size,64),Jtn=e=>e.size||1,c5=e=>e.defined!==!1,Ztn=e=>oBe(e.shape||"circle"),enn=aV().startAngle(ztn).endAngle(Utn).padAngle(Vtn).innerRadius(Htn).outerRadius(qtn).cornerRadius(Wtn),tnn=L$e().x(oO).y1(aO).y0(jtn).defined(c5),nnn=L$e().y(aO).x1(oO).x0(Btn).defined(c5),rnn=M$e().x(oO).y(aO).defined(c5),inn=aBe().x(oO).y(aO).width(Ltn).height(Ftn).cornerRadius(Gtn,Ytn,Ktn,Xtn),snn=KPt().type(Ztn).size(Qtn),onn=uBe().x(oO).y(aO).defined(c5).size(Jtn);function ate(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function ann(e,t){return enn.context(e)(t)}function unn(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?nnn:tnn).curve(ote(r,n.orient,n.tension)).context(e)(t)}function lnn(e,t){const n=t[0],r=n.interpolate||"linear";return rnn.curve(ote(r,n.orient,n.tension)).context(e)(t)}function Tx(e,t,n,r){return inn.context(e)(t,n,r)}function cnn(e,t){return(t.mark.shape||t.shape).context(e)(t)}function fnn(e,t){return snn.context(e)(t)}function dnn(e,t){return onn.context(e)(t)}var lBe=1;function cBe(){lBe=1}function ute(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+lBe++),o=i.clipping[s]||(i.clipping[s]={id:s});return pn(r)?o.path=r(null):ate(n)?o.path=Tx(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function ls(e){this.clear(),e&&this.union(e)}ls.prototype={clone(){return new ls(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function f5(e){this.mark=e,this.bounds=this.bounds||new ls}function d5(e){f5.call(this,e),this.items=this.items||[]}We(d5,f5);function lte(e){this._pending=0,this._loader=e||YF()}function Vye(e){e._pending+=1}function NS(e){e._pending-=1}lte.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Vye(t),t._loader.sanitize(e,{context:"href"}).then(n=>(NS(t),n)).catch(()=>(NS(t),null))},loadImage(e){const t=this,n=Wen();return Vye(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Nt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>NS(t),s.onerror=()=>NS(t),s.src=i,s}).catch(r=>(NS(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function dm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?hnn(t,r):0))}return e}function hnn(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const pnn=hd-1e-8;let h5,U$,V$,h1,aq,H$,uq,lq;const cg=(e,t)=>h5.add(e,t),q$=(e,t)=>cg(U$=e,V$=t),Hye=e=>cg(e,h5.y1),qye=e=>cg(h5.x1,e),qy=(e,t)=>aq*e+uq*t,Wy=(e,t)=>H$*e+lq*t,e7=(e,t)=>cg(qy(e,t),Wy(e,t)),t7=(e,t)=>q$(qy(e,t),Wy(e,t));function uO(e,t){return h5=e,t?(h1=t*y0,aq=lq=Math.cos(h1),H$=Math.sin(h1),uq=-H$):(aq=lq=1,h1=H$=uq=0),mnn}const mnn={beginPath(){},closePath(){},moveTo:t7,lineTo:t7,rect(e,t,n,r){h1?(e7(e+n,t),e7(e+n,t+r),e7(e,t+r),t7(e,t)):(cg(e+n,t+r),q$(e,t))},quadraticCurveTo(e,t,n,r){const i=qy(e,t),s=Wy(e,t),o=qy(n,r),a=Wy(n,r);Wye(U$,i,o,Hye),Wye(V$,s,a,qye),q$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=qy(e,t),a=Wy(e,t),u=qy(n,r),l=Wy(n,r),c=qy(i,s),f=Wy(i,s);Gye(U$,o,u,c,Hye),Gye(V$,a,l,f,qye),q$(c,f)},arc(e,t,n,r,i,s){if(r+=h1,i+=h1,U$=n*Math.cos(i)+e,V$=n*Math.sin(i)+t,Math.abs(i-r)>pnn)cg(e-n,t-n),cg(e+n,t+n);else{const o=l=>cg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%hd,r<0&&(r+=hd),i=i%hd,i<0&&(i+=hd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=hd,a=r-r%Hy,u=0;u<4&&a>i;++u,a-=Hy)o(a);else for(a=r-r%Hy+Hy,u=0;u<4&&a<i;++u,a=a+Hy)o(a)}}};function Wye(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Gye(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Itn?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Yye(u,e,t,n,r)),0<l&&l<1&&i(Yye(l,e,t,n,r))}function Yye(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Hg=(Hg=Vg(1,1))?Hg.getContext("2d"):null;const cq=new ls;function cte(e){return function(t,n){if(!Hg)return!0;e(Hg,t),cq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=cq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Hg.isPointInPath(u,a))return!0;return!1}}function fte(e,t){return t.contains(e.x||0,e.y||0)}function fBe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(cq.set(n,r,n+i,r+s))}function dBe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Eb(t,n,r,i,s)}function Eb(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function aE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function $c(e,t){return e??t}function Kye(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function gnn(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+$c(t.x1,.5)*r,n.y1+$c(t.y1,.5)*i,Math.max(r,i)*$c(t.r1,0),n.x1+$c(t.x2,.5)*r,n.y1+$c(t.y2,.5)*i,Math.max(r,i)*$c(t.r2,.5));else{const o=$c(t.x1,0),a=$c(t.y1,0),u=$c(t.x2,1),l=$c(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Vg(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Kye(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Kye(s,t.stops)}function hBe(e,t,n){return ste(n)?gnn(e,n,t.bounds):n}function OM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=hBe(e,t,t.fill),!0):!1}var ynn=[];function uE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=hBe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ynn),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function vnn(e,t){return e.zindex-t.zindex||e.index-t.index}function dte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(vnn)}function _f(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=dte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function PM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=dte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function hte(e){return function(t,n,r){_f(n,i=>{(!r||r.intersects(i.bounds))&&pBe(e,t,i,i)})}}function _nn(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&pBe(e,t,n.items[0],n.items)}}function pBe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(aE(t,n),n.fill&&OM(t,n,i)&&t.fill(),n.stroke&&uE(t,n,i)&&t.stroke()))}function p5(e){return e=e||oc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,PM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function lO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function pte(e){return p5(lO(e))}function $1(e,t){return"translate("+e+","+t+")"}function mte(e){return"rotate("+e+")"}function bnn(e,t){return"scale("+e+","+t+")"}function mBe(e){return $1(e.x||0,e.y||0)}function wnn(e){return $1(e.x||0,e.y||0)+(e.angle?" "+mte(e.angle):"")}function Enn(e){return $1(e.x||0,e.y||0)+(e.angle?" "+mte(e.angle):"")+(e.scaleX||e.scaleY?" "+bnn(e.scaleX||1,e.scaleY||1):"")}function gte(e,t,n){function r(o,a){o("transform",wnn(a)),o("d",t(null,a))}function i(o,a){return t(uO(o,a.angle),a),dm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=y0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:hte(s),pick:pte(s),isect:n||cte(s)}}var xnn=gte("arc",ann);function Snn(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Tnn(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Cnn(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function yte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(uO(u),c),dm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=lO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:_nn(s),pick:a,isect:fte,tip:n}}var Ann=yte("area",unn,Snn);function Inn(e,t){var n=t.clip;e.save(),pn(n)?(e.beginPath(),n(e),e.clip()):gBe(e,t.group)}function gBe(e,t){e.beginPath(),ate(t)?Tx(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function yBe(e){const t=$c(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Onn(e,t){e("transform",mBe(t))}function vBe(e,t){const n=yBe(t);e("d",Tx(null,t,n,n))}function Pnn(e,t){e("class","background"),e("aria-hidden",!0),vBe(e,t)}function knn(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?vBe(e,t):e("d","")}function $nn(e,t,n){const r=t.clip?ute(n,t,t):null;e("clip-path",r)}function Rnn(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),dm(e,t),e.translate(t.x||0,t.y||0)}function mA(e,t,n,r){const i=yBe(t);e.beginPath(),Tx(e,t,(n||0)+i,(r||0)+i)}const Nnn=lO(mA),Dnn=lO(mA,!1),Mnn=lO(mA,!0);function Lnn(e,t,n,r){_f(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(mA(e,i,s,o),aE(e,i),i.fill&&OM(e,i,u)&&e.fill(),i.stroke&&!a&&uE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&gBe(e,i),n&&n.translate(-s,-o),_f(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(mA(e,i,s,o),aE(e,i),uE(e,i,u)&&e.stroke())})}function Fnn(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return PM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&ate(u)&&!Mnn(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Dnn(e,u,o,a)?(e.restore(),u):(l=PM(u,v=>Bnn(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Nnn(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Bnn(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var jnn={type:"group",tag:"g",nested:!1,attr:Onn,bound:Rnn,draw:Lnn,pick:Fnn,isect:fBe,content:$nn,background:Pnn,foreground:knn},gA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function vte(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function _te(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function bte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function m5(e,t){return e==="center"?t/2:e==="right"?t:0}function g5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function znn(e,t,n){const r=vte(t,n),i=_te(t,r),s=bte(t,r),o=(t.x||0)-m5(t.align,i),a=(t.y||0)-g5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,gA["xmlns:xlink"],"xlink:href"),e("transform",$1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Unn(e,t){const n=t.image,r=_te(t,n),i=bte(t,n),s=(t.x||0)-m5(t.align,r),o=(t.y||0)-g5(t.baseline,i);return e.set(s,o,s+r,o+i)}function Vnn(e,t,n){_f(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=vte(r,this);let s=_te(r,i),o=bte(r,i);if(s===0||o===0)return;let a=(r.x||0)-m5(r.align,s),u=(r.y||0)-g5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(aE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Hnn={type:"image",tag:"image",nested:!1,attr:znn,bound:Unn,draw:Vnn,pick:p5(),isect:oc,get:vte,xOffset:m5,yOffset:g5},qnn=yte("line",lnn,Tnn);function Wnn(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Enn(t)),e("d",t.path)}function W$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*y0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=oE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),pA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):pA(e,u,r,i,s,o)}function Gnn(e,t){return W$(uO(e,t.angle),t)?e.set(0,0,0,0):dm(e,t,!0)}var Ynn={type:"path",tag:"path",nested:!1,attr:Wnn,bound:Gnn,draw:hte(W$),pick:pte(W$),isect:cte(W$)};function Knn(e,t){e("d",Tx(null,t))}function Xnn(e,t){var n,r;return dm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Xye(e,t){e.beginPath(),Tx(e,t)}var Qnn={type:"rect",tag:"path",nested:!1,attr:Knn,bound:Xnn,draw:hte(Xye),pick:pte(Xye),isect:fBe};function Jnn(e,t){e("transform",mBe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Znn(e,t){var n,r;return dm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function _Be(e,t,n){var r,i,s,o;return t.stroke&&uE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function ern(e,t,n){_f(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&_Be(e,r,i)&&(aE(e,r),e.stroke())}})}function trn(e,t,n,r){return e.isPointInStroke?_Be(e,t,1)&&e.isPointInStroke(n,r):!1}var nrn={type:"rule",tag:"line",nested:!1,attr:Jnn,bound:Znn,draw:ern,pick:p5(trn),isect:dBe},rrn=gte("shape",cnn),irn=gte("symbol",fnn,fte);const Qye=Q5e();var sl={height:gh,measureWidth:wte,estimateWidth:kM,width:kM,canvas:bBe};bBe(!0);function bBe(e){sl.width=e&&Hg?wte:kM}function kM(e,t){return wBe(_0(e,t),gh(e))}function wBe(e,t){return~~(.8*e.length*t)}function wte(e,t){return gh(e)<=0||!(t=_0(e,t))?0:EBe(t,y5(e))}function EBe(e,t){const n=`(${t}) ${e}`;let r=Qye.get(n);return r===void 0&&(Hg.font=t,r=Hg.measureText(e).width,Qye.set(n,r)),r}function gh(e){return e.fontSize!=null?+e.fontSize||0:11}function v0(e){return e.lineHeight!=null?e.lineHeight:gh(e)+2}function srn(e){return Ie(e)?e.length>1?e:e[0]:e}function cO(e){return srn(e.lineBreak&&e.text&&!Ie(e.text)?e.text.split(e.lineBreak):e.text)}function Ete(e){const t=cO(e);return(Ie(t)?t.length-1:0)*v0(e)}function _0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?arn(e,n):n}function orn(e){if(sl.width===wte){const t=y5(e);return n=>EBe(n,t)}else if(sl.width===kM){const t=gh(e);return n=>wBe(n,t)}else return t=>sl.width(e,t)}function arn(e,t){var n=+e.limit,r=orn(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function fO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function y5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+gh(e)+"px "+fO(e,t)}function xte(e){var t=e.baseline,n=gh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*v0(e):t==="line-bottom"?.29*n-.5*v0(e):0)}const urn={left:"start",center:"middle",right:"end"},A2=new ls;function v5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Hy,t+=r*Math.cos(i),n+=r*Math.sin(i)),A2.x1=t,A2.y1=n,A2}function lrn(e,t){var n=t.dx||0,r=(t.dy||0)+xte(t),i=v5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",urn[t.align]||"start"),a?(u=$1(s,o)+" "+mte(a),(n||r)&&(u+=" "+$1(n,r))):u=$1(s+n,o+r),e("transform",u)}function Ste(e,t,n){var r=sl.height(t),i=t.align,s=v5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+xte(t)-Math.round(.8*r),c=cO(t),f;if(Ie(c)?(r+=v0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,sl.width(t,h)),0)):f=sl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*y0,o,a);else if(n===2)return e.rotatedPoints(t.angle*y0,o,a);return e}function crn(e,t,n){_f(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=y5(r),e.textAlign=r.align||"left",s=v5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*y0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+xte(r),c=cO(r),aE(e,r),Ie(c))for(l=v0(r),u=0;u<c.length;++u)f=_0(r,c[u]),r.fill&&OM(e,r,i)&&e.fillText(f,o,a),r.stroke&&uE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=_0(r,c),r.fill&&OM(e,r,i)&&e.fillText(f,o,a),r.stroke&&uE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function frn(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=v5(t),a=o.x1,u=o.y1,l=Ste(A2,t,1),c=-t.angle*y0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function drn(e,t){const n=Ste(A2,e,2);return Eb(t,n[0],n[1],n[2],n[3])||Eb(t,n[0],n[1],n[4],n[5])||Eb(t,n[4],n[5],n[6],n[7])||Eb(t,n[2],n[3],n[6],n[7])}var hrn={type:"text",tag:"text",nested:!1,attr:lrn,bound:Ste,draw:crn,pick:p5(frn),isect:drn},prn=yte("trail",dnn,Cnn),yl={arc:xnn,area:Ann,group:jnn,image:Hnn,line:qnn,path:Ynn,rect:Qnn,rule:nrn,shape:rrn,symbol:irn,text:hrn,trail:prn};function fq(e,t,n){var r=yl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new ls),e,n)}var Jye={mark:null};function xBe(e,t,n){var r=yl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Jye.mark=e,l=Jye),c=fq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new ls,o)for(a=0,u=s.length;a<u;++a)t.union(fq(s[a],i,n));return e.bounds=t}const mrn=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function SBe(e,t){return JSON.stringify(e,mrn,t)}function TBe(e){const t=typeof e=="string"?JSON.parse(e):e;return CBe(t)}function CBe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&CBe(n[i]);return t&&xBe(e),e}function Tte(e){arguments.length?this.root=TBe(e):(this.root=ABe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new d5(this.root)])}Tte.prototype={toJSON(e){return SBe(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=ABe(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function ABe(e,t){const n={bounds:new ls,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function fg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Cte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function vs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=fg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Ul(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function IBe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function _5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function grn(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=yl[i.marktype]).tip){for(o=_5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function b0(e,t){this._active=null,this._handlers={},this._loader=e||YF(),this._tooltip=t||yrn}function yrn(e,t,n,r){e.element().setAttribute("title",r||"")}b0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=fg(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=grn(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function Tl(e){this._el=null,this._bgcolor=null,this._loader=new lte(e)}Tl.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const vrn="keydown",_rn="keypress",brn="keyup",OBe="dragenter",G$="dragleave",PBe="dragover",dq="pointerdown",wrn="pointerup",$M="pointermove",I2="pointerout",kBe="pointerover",hq="mousedown",Ern="mouseup",$Be="mousemove",pq="mouseout",RBe="mouseover",RM="click",xrn="dblclick",Srn="wheel",NBe="mousewheel",NM="touchstart",DM="touchmove",MM="touchend",Trn=[vrn,_rn,brn,OBe,G$,PBe,dq,wrn,$M,I2,kBe,hq,Ern,$Be,pq,RBe,RM,xrn,Srn,NBe,NM,DM,MM],mq=$M,yA=I2,gq=RM;function w0(e,t){b0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const Crn=e=>e===NM||e===DM||e===MM?[NM,DM,MM]:[e];function Zye(e,t){Crn(t).forEach(n=>Arn(e,n))}function Arn(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function CT(e,t,n){t.forEach(r=>e.fire(r,n))}function e1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?CT(this,e,r):((!i||!i.exit)&&CT(this,n,r),this._active=s,CT(this,t,r),CT(this,e,r))}}function t1e(e){return function(t){CT(this,e,t),this._active=null}}We(w0,b0,{initialize(e,t,n){return this._canvas=e&&Cte(e,"canvas"),[RM,hq,dq,$M,I2,G$].forEach(r=>Zye(this,r)),b0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Trn,DOMMouseScroll(e){this.fire(NBe,e)},pointermove:e1e([$M,$Be],[kBe,RBe],[I2,pq]),dragover:e1e([PBe],[OBe],[G$]),pointerout:t1e([I2,pq]),dragleave:t1e([G$]),pointerdown(e){this._down=this._active,this.fire(dq,e)},mousedown(e){this._down=this._active,this.fire(hq,e)},click(e){this._down===this._active&&(this.fire(RM,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(NM,e,!0)},touchmove(e){this.fire(DM,e,!0)},touchend(e){this.fire(MM,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===gq&&r&&r.href?this.handleHref(t,r,r.href):(e===mq||e===yA)&&this.handleTooltip(t,r,e!==yA),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Zye(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=_5(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return yl[e.marktype].pick.call(this,s,e,t,n,r,i)}});function Irn(){return typeof window<"u"&&window.devicePixelRatio||1}function Orn(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?Irn():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function vA(e){Tl.call(this,e),this._options={},this._redraw=!1,this._dirty=new ls,this._tempb=new ls}const n1e=Tl.prototype,Prn=(e,t,n)=>new ls().set(0,0,t,n).translate(-e[0],-e[1]);function krn(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}We(vA,Tl,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Vg(1,1,this._options.type),e&&this._canvas&&(Ul(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),n1e.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(n1e.resize.call(this,e,t,n,r),this._canvas)Orn(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Te("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=Prn(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):krn(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=yl[t.marktype];t.clip&&Inn(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function Ate(e,t){b0.call(this,e,t);const n=this;n._hrefHandler=yq(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=yq(n,(r,i)=>{n.handleTooltip(r,i,r.type!==yA)})}const yq=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};We(Ate,b0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(gq,this._hrefHandler),r.removeEventListener(mq,this._tooltipHandler),r.removeEventListener(yA,this._tooltipHandler)),this._svg=r=e&&Cte(e,"svg"),r&&(r.addEventListener(gq,this._hrefHandler),r.addEventListener(mq,this._tooltipHandler),r.addEventListener(yA,this._tooltipHandler)),b0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:yq(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const DBe="aria-hidden",Ite="aria-label",Ote="role",Pte="aria-roledescription",MBe="graphics-object",kte="graphics-symbol",LBe=(e,t,n)=>({[Ote]:e,[Pte]:t,[Ite]:n||void 0}),$rn=yf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),r1e={axis:{desc:"axis",caption:Drn},legend:{desc:"legend",caption:Mrn},"title-text":{desc:"title",caption:e=>`Title text '${s1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${s1e(e)}'`}},i1e={ariaRole:Ote,ariaRoleDescription:Pte,description:Ite};function FBe(e,t){const n=t.aria===!1;if(e(DBe,n||void 0),n||t.description==null)for(const r in i1e)e(i1e[r],void 0);else{const r=t.mark.marktype;e(Ite,t.description),e(Ote,t.ariaRole||(r==="group"?MBe:kte)),e(Pte,t.ariaRoleDescription||`${r} mark`)}}function BBe(e){return e.aria===!1?{[DBe]:!0}:$rn[e.role]?null:r1e[e.role]?Nrn(e,r1e[e.role]):Rrn(e)}function Rrn(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return LBe(n?MBe:kte,`${t} mark container`,e.description)}function Nrn(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return LBe(t.role||kte,t.desc,n.description||r(n))}catch{return null}}function s1e(e){return nt(e.text).join(" ")}function Drn(e){const t=e.datum,n=e.orient,r=t.title?jBe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${sE(a)?"discrete":a} scale with ${tBe(o,s,e)}`}function Mrn(e){const t=e.datum,n=t.title?jBe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Frn(r)+(n?` titled '${n}'`:"")+` for ${Lrn(s)} with ${tBe(u,a,e)}`}function jBe(e){try{return nt(Un(e.items).items[0].text).join(" ")}catch{return null}}function Lrn(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Un(e)}function Frn(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const zBe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Brn=e=>zBe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function $te(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Brn(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=zBe(u),a),toString:()=>e};return a}const UBe=e=>VBe($te(),e)+"";function VBe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):VBe(e,r)}return e.close()}const LM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},FM={blend:"mix-blend-mode"},HBe={fill:"none","stroke-miterlimit":10},DS=0,o1e="http://www.w3.org/2000/xmlns/",gs=gA.xmlns;function b5(e){Tl.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const n7=Tl.prototype;We(b5,Tl,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=vs(e,0,"svg",gs),this._svg.setAttributeNS(o1e,"xmlns",gs),this._svg.setAttributeNS(o1e,"xmlns:xlink",gA["xmlns:xlink"]),this._svg.setAttribute("version",gA.version),this._svg.setAttribute("class","marks"),Ul(e,1),this._root=vs(this._svg,DS,"g",gs),dg(this._root,HBe),Ul(this._svg,DS+1)),this.background(this._bgcolor),n7.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),n7.background.apply(this,arguments)},resize(e,t,n,r){return n7.resize.call(this,e,t,n,r),this._svg&&(dg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=vs(e,DS,"rect",gs),dg(n,{width:this._width,height:this._height,fill:t}));const r=UBe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Ul(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=yl[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,a1e(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,a1e(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=yl[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=u1e(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Ul(l,0),t._svg;l.setAttribute("class",IBe(t));const c=BBe(t);for(const p in c)ya(l,p,c[p]);u||ya(l,"pointer-events",a),ya(l,"clip-path",t.clip?ute(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=u1e(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&Urn(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):_f(t,h),Ul(l,d),l},_update(e,t,n){cp=t,jo=t.__values__,FBe(O2,n),e.attr(O2,n,this);const r=Hrn[e.type];r&&r.call(this,e,t,n),cp&&this.style(cp,n)},style(e,t){if(t!=null){for(const n in LM){let r=n==="font"?fO(t):t[n];if(r===jo[n])continue;const i=LM[n];r==null?e.removeAttribute(i):(ste(r)&&(r=rBe(r,this._defs.gradient,qBe())),e.setAttribute(i,r+"")),jo[n]=r}for(const n in FM)Y$(e,FM[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=vs(e,DS+1,"defs",gs)),r=jrn(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=vs(e,DS+1,"defs",gs)),r=zrn(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ul(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function a1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function jrn(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=vs(e,n++,"pattern",gs);dg(o,{id:IM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=vs(o,0,"rect",gs),dg(o,{width:1,height:1,fill:`url(${qBe()}#${t.id})`}),e=vs(e,n++,"radialGradient",gs),dg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=vs(e,n++,"linearGradient",gs),dg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=vs(e,r,"stop",gs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Ul(e,r),n}function zrn(e,t,n){let r;return e=vs(e,n,"clipPath",gs),e.setAttribute("id",t.id),t.path?(r=vs(e,0,"path",gs),r.setAttribute("d",t.path)):(r=vs(e,0,"rect",gs),dg(r,{x:0,y:0,width:t.width,height:t.height})),Ul(e,1),n+1}function Urn(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;_f(n,o=>{i=e.mark(t,o,i,r),++s}),Ul(t,1+s)}function u1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=fg(o,r,gs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=fg(o,"path",gs);s.appendChild(a),a.__data__=e;const u=fg(o,"g",gs);s.appendChild(u),u.__data__=e;const l=fg(o,"path",gs);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Vrn(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Vrn(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let cp=null,jo=null;const Hrn={group(e,t,n){const r=cp=t.childNodes[2];jo=r.__values__,e.foreground(O2,n,this),jo=t.__values__,cp=t.childNodes[1],e.content(O2,n,this);const i=cp=t.childNodes[0];e.background(O2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==jo.events&&(ya(r,"pointer-events",s),ya(i,"pointer-events",s),jo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;ya(r,"display",null),this.style(i,n),ya(i,"stroke",null),o&&(n.fill=null),jo=r.__values__,this.style(r,n),o&&(n.fill=o),cp=null}else ya(r,"display","none")},image(e,t,n){n.smooth===!1?(Y$(t,"image-rendering","optimizeSpeed"),Y$(t,"image-rendering","pixelated")):Y$(t,"image-rendering",null)},text(e,t,n){const r=cO(n);let i,s,o,a;Ie(r)?(s=r.map(u=>_0(n,u)),i=s.join(`
`),i!==jo.text&&(Ul(t,0),o=t.ownerDocument,a=v0(n),s.forEach((u,l)=>{const c=fg(o,"tspan",gs);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),jo.text=i)):(s=_0(n,r),s!==jo.text&&(t.textContent=s,jo.text=s)),ya(t,"font-family",fO(n)),ya(t,"font-size",gh(n)+"px"),ya(t,"font-style",n.fontStyle),ya(t,"font-variant",n.fontVariant),ya(t,"font-weight",n.fontWeight)}};function O2(e,t,n){t!==jo[e]&&(n?qrn(cp,e,t,n):ya(cp,e,t),jo[e]=t)}function Y$(e,t,n){n!==jo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),jo[t]=n)}function dg(e,t){for(const n in t)ya(e,n,t[n])}function ya(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function qrn(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function qBe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Rte(e){Tl.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}We(Rte,Tl,{svg(){return this._text},_render(e){const t=$te();t.open("svg",hn({},gA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",HBe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=yl[t.marktype],r=n.tag,i=[FBe,n.attr];e.open("g",{class:IBe(t),"clip-path":t.clip?ute(this,t,t.group):null},BBe(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=cO(o);if(Ie(u)){const l={x:0,dy:v0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(_0(o,u[c])).close()}else e.text(_0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),_f(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):_f(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&Wrn(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:IM+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function Wrn(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=fO(t),e["font-size"]=gh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in LM){let a=t[o];const u=LM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(ste(a)&&(a=rBe(a,i.gradient,"")),e[u]=a)}for(const o in FM){const a=t[o];a!=null&&(s=s||[],s.push(`${FM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Bc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Grn(e){Bc.svgMarkTypes=e.svgMarkTypes??["text"],Bc.svgOnTop=e.svgOnTop??!0,Bc.debug=e.debug??!1}function BM(e){Tl.call(this,e),this._svgRenderer=new b5(e),this._canvasRenderer=new vA(e)}const l1e=Tl.prototype;We(BM,Tl,{initialize(e,t,n,r,i){this._root_el=vs(e,0,"div");const s=vs(this._root_el,0,"div"),o=vs(this._root_el,1,"div");return this._root_el.style.position="relative",Bc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Bc.svgOnTop?o:s,this._canvasEl=Bc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),l1e.initialize.call(this,e,t,n,r,i)},dirty(e){return Bc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Bc.svgMarkTypes.includes(i));this._svgRenderer.render(e,Bc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return l1e.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Bc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function Nte(e,t){w0.call(this,e,t)}We(Nte,w0,{initialize(e,t,n){const r=vs(vs(e,0,"div"),Bc.svgOnTop?0:1,"div");return w0.prototype.initialize.call(this,r,t,n)}});const WBe="canvas",GBe="hybrid",YBe="png",KBe="svg",XBe="none",hg={Canvas:WBe,PNG:YBe,SVG:KBe,Hybrid:GBe,None:XBe},cv={};cv[WBe]=cv[YBe]={renderer:vA,headless:vA,handler:w0};cv[KBe]={renderer:b5,headless:Rte,handler:Ate};cv[GBe]={renderer:BM,headless:BM,handler:Nte};cv[XBe]={};function w5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(cv[e]=t,this):cv[e]}function QBe(e,t,n){const r=[],i=new ls().union(t),s=e.marktype;return s?JBe(e,i,n,r):s==="group"?ZBe(e,i,n,r):Te("Intersect scene must be mark node or group item.")}function JBe(e,t,n,r){if(Yrn(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)ZBe(i[a],t,n,r);else for(const u=yl[s].isect;a<o;++a){const l=i[a];eje(l,t,u)&&r.push(l)}}return r}function Yrn(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function ZBe(e,t,n,r){n&&n(e.mark)&&eje(e,t,yl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)JBe(i[u],t,n,r);t.translate(o,a)}return r}function eje(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const r7=new ls;function tje(e){const t=e.clip;if(pn(t))t(uO(r7.clear()));else if(t)r7.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(r7)}const Krn=1e-9;function Dte(e,t,n){return e===t?!0:n==="path"?nje(e,t):e instanceof Date&&t instanceof Date?+e==+t:Jn(e)&&Jn(t)?Math.abs(e-t)<=Krn:!e||!t||!ot(e)&&!ot(t)?e==t:Xrn(e,t)}function nje(e,t){return Dte(oE(e),oE(t))}function Xrn(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Dte(e[i],t[i],i))return!1;return typeof e==typeof t}function Qrn(){cBe(),wtn()}const lE="top",Yc="left",Jc="right",E0="bottom",Jrn="top-left",Zrn="top-right",ein="bottom-left",tin="bottom-right",Mte="start",vq="middle",ba="end",nin="x",rin="y",E5="group",Lte="axis",Fte="title",iin="frame",sin="scope",Bte="legend",rje="row-header",ije="row-footer",sje="row-title",oje="column-header",aje="column-footer",uje="column-title",oin="padding",ain="symbol",lje="fit",cje="fit-x",fje="fit-y",uin="pad",jte="none",fk="all",_q="each",zte="flush",pg="column",mg="row";function dje(e){Ee.call(this,null,e)}We(dje,Ee,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=yl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=dk(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===E5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(dk(l,o))),r.role){case Lte:case Bte:case Fte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(dk(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(dk(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return tje(r),t.modifies("bounds")}});function dk(e,t,n){return t(e.bounds.clear(),e,n)}const c1e=":vega_identifier:";function Ute(e){Ee.call(this,0,e)}Ute.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};We(Ute,Ee,{transform(e,t){const n=lin(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function lin(e){return e._signals[c1e]||(e._signals[c1e]=e.add(0))}function hje(e){Ee.call(this,null,e)}We(hje,Ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,cin(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===E5?d5:f5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function cin(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function pje(e){Ee.call(this,null,e)}const f1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!mje(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},mje=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),d1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(mje(i,s=e[n].bounds,t))return!0},fin=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},din=(e,t,n)=>{var r=e.range(),i=new ls;return t===lE||t===E0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},h1e=e=>(e.forEach(t=>t.opacity=1),e),p1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");We(pje,Ee,{transform(e,t){const n=f1e[e.method]||f1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(h1e(i),t=p1e(t,e)),t;if(i=i.filter(fin),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=h1e(i),t=p1e(t,e),s.length>=3&&d1e(s,r)){do s=n(s,r);while(s.length>=3&&d1e(s,r));s.length<3&&!Un(i).opacity&&(s.length>1&&(Un(s).opacity=0),Un(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=din(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function gje(e){Ee.call(this,null,e)}We(gje,Ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Fo=new ls;function xb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function hin(e){var t=e.items[0].orient;return t===Yc||t===Jc}function pin(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function min(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=pin(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Ete(p),v=0,_=0,b,E;switch(Fo.clear().union(g),g.clear(),(b=u[0])>-1&&g.union(i.items[b].bounds),(b=u[1])>-1&&g.union(i.items[b].bounds),a){case lE:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&hk(e,p,E,m,y,0,-1,g);break;case Yc:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&hk(e,p,E,m,y,1,-1,g);break;case Jc:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&hk(e,p,E,m,y,1,1,g);break;case E0:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&hk(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return dm(g.translate(v,_),i),xb(i,"x",v+o)|xb(i,"y",_+o)&&(i.bounds=Fo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function hk(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const m1e=(e,t)=>Math.floor(Math.min(e,t)),g1e=(e,t)=>Math.ceil(Math.max(e,t));function gin(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===E5)switch(i.role){case Lte:case Bte:case Fte:break;case rje:o.rowheaders.push(...s);break;case ije:o.rowfooters.push(...s);break;case oje:o.colheaders.push(...s);break;case aje:o.colfooters.push(...s);break;case sje:o.rowtitle=s[0];break;case uje:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function yin(e){return new ls().set(0,0,e.width||0,e.height||0)}function vin(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ci(e,t,n){const r=ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function y1e(e){return e<0?Math.ceil(-e):0}function yje(e,t,n){var r=!n.nodirty,i=n.bounds===zte?yin:vin,s=Fo.set(0,0,0,0),o=ci(n.align,pg),a=ci(n.align,mg),u=ci(n.padding,pg),l=ci(n.padding,mg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),b=Array(d),E=Array(d),w,x,S,P,A,O,z,D,R,N,L;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)O=t[x],A=E[x]=i(O),O.x=O.x||0,_[x]=0,O.y=O.y||0,b[x]=0,S=x%c,P=~~(x/c),m=Math.max(m,z=Math.ceil(A.x2)),v=Math.max(v,D=Math.ceil(A.y2)),p[S]=Math.max(p[S],z),y[P]=Math.max(y[P],D),h[x]=u+y1e(A.x1),g[x]=l+y1e(A.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===_q)for(S=1;S<c;++S){for(L=0,x=S;x<d;x+=c)L<h[x]&&(L=h[x]);for(x=S;x<d;x+=c)h[x]=L+p[S-1]}else if(o===fk){for(L=0,x=0;x<d;++x)x%c&&L<h[x]&&(L=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=L+m)}else for(o=!1,S=1;S<c;++S)for(x=S;x<d;x+=c)h[x]+=p[S-1];if(a===_q)for(P=1;P<f;++P){for(L=0,x=P*c,w=x+c;x<w;++x)L<g[x]&&(L=g[x]);for(x=P*c;x<w;++x)g[x]=L+y[P-1]}else if(a===fk){for(L=0,x=c;x<d;++x)L<g[x]&&(L=g[x]);for(x=c;x<d;++x)g[x]=L+v}else for(a=!1,P=1;P<f;++P)for(x=P*c,w=x+c;x<w;++x)g[x]+=y[P-1];for(R=0,x=0;x<d;++x)R=h[x]+(x%c?R:0),_[x]+=R-t[x].x;for(S=0;S<c;++S)for(N=0,x=S;x<d;x+=c)N+=g[x],b[x]+=N-t[x].y;if(o&&ci(n.center,pg)&&f>1)for(x=0;x<d;++x)A=o===fk?m:p[x%c],R=A-E[x].x2-t[x].x-_[x],R>0&&(_[x]+=R/2);if(a&&ci(n.center,mg)&&c!==1)for(x=0;x<d;++x)A=a===fk?v:y[~~(x/c)],N=A-E[x].y2-t[x].y-b[x],N>0&&(b[x]+=N/2);for(x=0;x<d;++x)s.union(E[x].translate(_[x],b[x]));switch(R=ci(n.anchor,nin),N=ci(n.anchor,rin),ci(n.anchor,pg)){case ba:R-=s.width();break;case vq:R-=s.width()/2}switch(ci(n.anchor,mg)){case ba:N-=s.height();break;case vq:N-=s.height()/2}for(R=Math.round(R),N=Math.round(N),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)O=t[x],O.x+=_[x]+=R,O.y+=b[x]+=N,s.union(O.mark.bounds.union(O.bounds.translate(_[x],b[x]))),r&&e.dirty(O);return s}function _in(e,t,n){var r=gin(t),i=r.marks,s=n.bounds===zte?bin:win,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=yje(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=ci(n.headerBand,mg,null),c=pk(e,r.rowheaders,i,a,u,-ci(o,"rowHeader"),m1e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ci(n.headerBand,pg,null),f=pk(e,r.colheaders,i,a,a,-ci(o,"columnHeader"),m1e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ci(n.footerBand,mg,null),d=pk(e,r.rowfooters,i,a,u,ci(o,"rowFooter"),g1e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ci(n.footerBand,pg,null),h=pk(e,r.colfooters,i,a,a,ci(o,"columnFooter"),g1e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ci(n.titleAnchor,mg),g=ci(o,"rowTitle"),g=p===ba?d+g:c-g,m=ci(n.titleBand,mg,.5),v1e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=ci(n.titleAnchor,pg),g=ci(o,"columnTitle"),g=p===ba?h+g:f-g,m=ci(n.titleBand,pg,.5),v1e(e,r.coltitle,g,1,y,m))}function bin(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function win(e,t){return e.bounds[t]}function pk(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,b,E,w,x,S,P;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(w=t[v],E=w.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=d);a?(S=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),P=m):(S=m,P=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(w.bounds.translate(S-(w.x||0),P-(w.y||0))),w.x=S,w.y=P,e.dirty(w),g=o(g,E[l])}return g}function v1e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Ein(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function xin(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Sin(e,t,n,r,i,s,o){const a=Ein(n,t),u=xin(e,a("offset",0)),l=a("anchor",Mte),c=l===ba?1:l===vq?.5:0,f={align:_q,bounds:a("bounds",zte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Yc:f.anchor={x:Math.floor(r.x1)-u,column:ba,y:c*(o||r.height()+2*r.y1),row:l};break;case Jc:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case lE:f.anchor={y:Math.floor(i.y1)-u,row:ba,x:c*(s||i.width()+2*i.x1),column:l};break;case E0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Jrn:f.anchor={x:u,y:u};break;case Zrn:f.anchor={x:s-u,y:u,column:ba};break;case ein:f.anchor={x:u,y:o-u,row:ba};break;case tin:f.anchor={x:s-u,y:o-u,column:ba,row:ba};break}return f}function Tin(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Ain(e,n,n.items[0].items[0]),s=Cin(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===ain&&Iin(n.items[0].items[0].items[0].items),i!==jte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,dm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Cin(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Ain(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&MS(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Yc:i+=Math.ceil(o.bounds.width())+u;break;case Jc:case E0:break;default:s+=o.bounds.height()+u}switch((i||s)&&MS(e,n,i,s),o.orient){case Yc:c+=O_(t,n,o,a,1,1);break;case Jc:l+=O_(t,n,o,ba,0,0)+u,c+=O_(t,n,o,a,1,1);break;case E0:l+=O_(t,n,o,a,0,0),c+=O_(t,n,o,ba,-1,0,1)+u;break;default:l+=O_(t,n,o,a,0,0)}(l||c)&&MS(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(MS(e,n,-l,0),MS(e,o,-l,0))}}function O_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Ete(n);return Math.round(r===Mte?f:r===ba?d-h:.5*(c-h))}function MS(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Iin(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Oin(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Yc||a===Jc?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==E5?a===Yc?(p=i.y2,h=i.y1):a===Jc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Yc&&(p=r,h=0),_=u===Mte?p:u===ba?h:(p+h)/2,d&&d.text){switch(a){case lE:case E0:v=f.bounds.height()+c;break;case Yc:y=f.bounds.width()+c;break;case Jc:y=-f.bounds.width()-c;break}Fo.clear().union(d.bounds),Fo.translate(y-(d.x||0),v-(d.y||0)),xb(d,"x",y)|xb(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Fo),d.mark.bounds.clear().union(Fo),e.dirty(d)),Fo.clear().union(d.bounds)}else Fo.clear();switch(Fo.union(f.bounds),a){case lE:m=_,g=i.y1-Fo.height()-l;break;case Yc:m=i.x1-Fo.width()-l,g=_;break;case Jc:m=i.x2+Fo.width()+l,g=_;break;case E0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return xb(s,"x",m)|xb(s,"y",g)&&(Fo.translate(m,g),e.dirty(s),s.bounds.clear().union(Fo),t.bounds.clear().union(Fo),e.dirty(s)),s.bounds}function vje(e){Ee.call(this,null,e)}We(vje,Ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&_in(n,r,e.layout),kin(n,r,e)}),Pin(e.mark.group)?t.reflow():t}});function Pin(e){return e&&e.mark.role!=="legend-entry"}function kin(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new ls().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Lte:h=hin(f)?a:u,h.union(min(e,f,i,s));break;case Fte:c=f;break;case Bte:l.push(Tin(e,f));break;case iin:case sin:case rje:case ije:case sje:case oje:case aje:case uje:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Jc,d!==jte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];yje(e,v,Sin(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===lje||n.autosize.type===cje||n.autosize.type===fje))switch(y.orient){case Yc:case Jc:o.add(v.x1,0).add(v.x2,0);break;case lE:case E0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Oin(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),$in(e,t,o,n)}function $in(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===oin){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===jte?(l=0,f=0,u=o,c=a):s===lje?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===cje?(u=Math.max(0,o-l-d),a=c+f+h):s===fje?(o=u+l+d,c=Math.max(0,a-f-h)):s===uin&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Rin=Object.freeze(Object.defineProperty({__proto__:null,bound:dje,identifier:Ute,mark:hje,overlap:pje,render:gje,viewlayout:vje},Symbol.toStringTag,{value:"Module"}));function _je(e){Ee.call(this,null,e)}We(_je,Ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=rte(s,o,e.minstep),u=e.format||X9e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?K9e(s,e.values,a):ite(s,a);return i&&(r.rem=i),i=l.map((c,f)=>dr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(dr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function bje(e){Ee.call(this,null,e)}function Nin(){return dr({})}function Din(e){const t=bx().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}We(bje,Ee,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Nin,s=e.key||$t,o=this.value;return Ie(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Te("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Din(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function wje(e){Ee.call(this,null,e)}We(wje,Ee,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ie(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Rm,u=i.enter||Rm,l=i.exit||Rm,c=(s&&!o?i[s]:a)||Rm;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Rm&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Rm&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Rm){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Eje(e){Ee.call(this,[],e)}We(Eje,Ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||z$,o=e.scale,a=+e.limit,u=rte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===z$,c=e.format||eBe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||Z9e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===z$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,pn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=la(m=p||8),i=i.map((y,v)=>dr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(dr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===utn?(d=o.domain(),h=W9e(o,d[0],Un(d)),f.length<3&&!e.values&&d[0]!==Un(d)&&(f=[d[0],Un(d)]),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=_tn(o),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Min=e=>e.source.x,Lin=e=>e.source.y,Fin=e=>e.target.x,Bin=e=>e.target.y;function Vte(e){Ee.call(this,{},e)}Vte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};We(Vte,Ee,{transform(e,t){var n=e.sourceX||Min,r=e.sourceY||Lin,i=e.targetX||Fin,s=e.targetY||Bin,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=_1e.get(u+"-"+a)||_1e.get(u);return l||Te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const xje=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,jin=(e,t,n,r)=>xje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Sje=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},zin=(e,t,n,r)=>Sje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Tje=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Uin=(e,t,n,r)=>Tje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Vin=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Hin=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,qin=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Win=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Gin=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Yin=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},_1e=bx({line:xje,"line-radial":jin,arc:Sje,"arc-radial":zin,curve:Tje,"curve-radial":Uin,"orthogonal-horizontal":Vin,"orthogonal-vertical":Hin,"orthogonal-radial":qin,"diagonal-horizontal":Win,"diagonal-vertical":Gin,"diagonal-radial":Yin});function Hte(e){Ee.call(this,null,e)}Hte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};We(Hte,Ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||yx,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/u8e(l),h=Qv(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Kin=5;function Xin(e){const t=e.type;return!e.bins&&(t===rE||t===tO||t===nO)}function Cje(e){return ete(e)&&e!==Fd}const Qin=yf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Aje(e){Ee.call(this,null,e),this.modified(!0)}We(Aje,Ee,{transform(e,t){var n=t.dataflow,r=this.value,i=Jin(e);(!r||i!==r.type)&&(this.value=r=or(i)());for(i in e)if(!Qin[i]){if(i==="padding"&&Cje(r.type))continue;pn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return isn(r,e,rsn(r,e,esn(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Jin(e){var t=e.type,n="",r;return t===Fd?Fd+"-"+rE:(Zin(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Fd+"-":r===3?Sx+"-":""),(n+t||rE).toLowerCase())}function Zin(e){const t=e.type;return ete(t)&&t!==uv&&t!==lv&&(e.scheme||e.range&&e.range.length&&e.range.every(rt))}function esn(e,t,n){const r=tsn(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Xin(e),a,u;if(!i)return 0;if(Cje(s)&&t.padding&&i[0]!==Un(i)&&(i=nsn(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(Ije(s,i,n)),s===Xee&&e.unknown(t.domainImplicit?iV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&rte(e,t.nice)||null),i.length}function tsn(e,t,n){return t?(e.domain(Ije(e.type,t,n)),t.length):-1}function nsn(e,t,n,r,i,s){var o=Math.abs(Un(n)-n[0]),a=o/(o-2*r),u=e===Xp?VZ(t,null,a):e===nO?xM(t,null,a,.5):e===tO?xM(t,null,a,i||1):e===o5?HZ(t,null,a,s||1):UZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Ije(e,t,n){if(z9e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Xe(t))}return t}function rsn(e,t,n){let r=t.bins;if(r&&!Ie(r)){const i=e.domain(),s=i[0],o=Un(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Te("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Qv(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Qee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function isn(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=ssn(r,t,n);else if(t.scheme&&(s=osn(r,t,n),pn(s))){if(e.interpolator)return e.interpolator(s);Te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&U9e(r))return e.interpolator(l5(bq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(tte(t.interpolate,t.interpolateGamma)):pn(e.round)?e.round(i):pn(e.rangeRound)&&e.interpolate(i?uI:am),s&&e.range(bq(s,t.reverse))}function ssn(e,t,n){e!==D9e&&e!==iq&&Te("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===iq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Kee(n,i,r)]}function osn(e,t,n){var r=t.schemeExtent,i,s;return Ie(t.scheme)?s=l5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=nte(i),s||Te(`Unrecognized scheme name: ${t.scheme}`)),n=e===u5?n+1:e===Qee?n-1:e===iE||e===a5?+t.schemeCount||Kin:n,U9e(e)?b1e(s,r,t.reverse):pn(s)?q9e(b1e(s,r),n):e===Xee?s:s.slice(0,n)}function b1e(e,t,n){return pn(e)&&(t||n)?H9e(e,bq(t||[0,1],n)):e}function bq(e,t){return t?e.slice().reverse():e}function Oje(e){Ee.call(this,null,e)}We(Oje,Ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Jv(e.sort)),this.modified(n),t}});const w1e="zero",Pje="center",kje="normalize",$je=["y0","y1"];function qte(e){Ee.call(this,null,e)}qte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:w1e,values:[w1e,Pje,kje]},{name:"as",type:"string",array:!0,length:2,default:$je}]};We(qte,Ee,{transform(e,t){var n=e.as||$je,r=n[0],i=n[1],s=Jv(e.sort),o=e.field||yx,a=e.offset===Pje?asn:e.offset===kje?usn:lsn,u,l,c,f;for(u=csn(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function asn(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function usn(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function lsn(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function csn(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const fsn=Object.freeze(Object.defineProperty({__proto__:null,axisticks:_je,datajoin:bje,encode:wje,legendentries:Eje,linkpath:Vte,pie:Hte,scale:Aje,sortitems:Oje,stack:qte},Symbol.toStringTag,{value:"Module"}));class Ia{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*dsn(e){for(const t of e)yield*t}function Rje(e){return Array.from(dsn(e))}function Sb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Dt=1e-6,jM=1e-12,Cn=Math.PI,Mi=Cn/2,zM=Cn/4,Da=Cn*2,Hi=180/Cn,Sn=Cn/180,zn=Math.abs,Cx=Math.atan,lc=Math.atan2,Ft=Math.cos,mk=Math.ceil,Nje=Math.exp,wq=Math.hypot,UM=Math.log,i7=Math.pow,Rt=Math.sin,Yl=Math.sign||function(e){return e>0?1:e<0?-1:0},Ma=Math.sqrt,Wte=Math.tan;function Dje(e){return e>1?0:e<-1?Cn:Math.acos(e)}function Iu(e){return e>1?Mi:e<-1?-Mi:Math.asin(e)}function go(){}function VM(e,t){e&&x1e.hasOwnProperty(e.type)&&x1e[e.type](e,t)}var E1e={Feature:function(e,t){VM(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)VM(n[r].geometry,t)}},x1e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Eq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Eq(n[r],t,0)},Polygon:function(e,t){S1e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)S1e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)VM(n[r],t)}};function Eq(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function S1e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Eq(e[n],t,1);t.polygonEnd()}function Jh(e,t){e&&E1e.hasOwnProperty(e.type)?E1e[e.type](e,t):VM(e,t)}var HM=new Ia,qM=new Ia,Mje,Lje,xq,Sq,Tq,nh={point:go,lineStart:go,lineEnd:go,polygonStart:function(){HM=new Ia,nh.lineStart=hsn,nh.lineEnd=psn},polygonEnd:function(){var e=+HM;qM.add(e<0?Da+e:e),this.lineStart=this.lineEnd=this.point=go},sphere:function(){qM.add(Da)}};function hsn(){nh.point=msn}function psn(){Fje(Mje,Lje)}function msn(e,t){nh.point=Fje,Mje=e,Lje=t,e*=Sn,t*=Sn,xq=e,Sq=Ft(t=t/2+zM),Tq=Rt(t)}function Fje(e,t){e*=Sn,t*=Sn,t=t/2+zM;var n=e-xq,r=n>=0?1:-1,i=r*n,s=Ft(t),o=Rt(t),a=Tq*o,u=Sq*s+a*Ft(i),l=a*r*Rt(i);HM.add(lc(l,u)),xq=e,Sq=s,Tq=o}function gsn(e){return qM=new Ia,Jh(e,nh),qM*2}function WM(e){return[lc(e[1],e[0]),Iu(e[2])]}function fv(e){var t=e[0],n=e[1],r=Ft(n);return[r*Ft(t),r*Rt(t),Rt(n)]}function gk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function s7(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yk(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function GM(e){var t=Ma(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var bi,su,Ii,Ku,Ry,Bje,jje,rw,P2,Vm,Qp,Vh={point:Cq,lineStart:T1e,lineEnd:C1e,polygonStart:function(){Vh.point=Uje,Vh.lineStart=ysn,Vh.lineEnd=vsn,P2=new Ia,nh.polygonStart()},polygonEnd:function(){nh.polygonEnd(),Vh.point=Cq,Vh.lineStart=T1e,Vh.lineEnd=C1e,HM<0?(bi=-(Ii=180),su=-(Ku=90)):P2>Dt?Ku=90:P2<-Dt&&(su=-90),Qp[0]=bi,Qp[1]=Ii},sphere:function(){bi=-(Ii=180),su=-(Ku=90)}};function Cq(e,t){Vm.push(Qp=[bi=e,Ii=e]),t<su&&(su=t),t>Ku&&(Ku=t)}function zje(e,t){var n=fv([e*Sn,t*Sn]);if(rw){var r=cE(rw,n),i=[r[1],-r[0],0],s=cE(i,r);GM(s),s=WM(s);var o=e-Ry,a=o>0?1:-1,u=s[0]*Hi*a,l,c=zn(o)>180;c^(a*Ry<u&&u<a*e)?(l=s[1]*Hi,l>Ku&&(Ku=l)):(u=(u+360)%360-180,c^(a*Ry<u&&u<a*e)?(l=-s[1]*Hi,l<su&&(su=l)):(t<su&&(su=t),t>Ku&&(Ku=t))),c?e<Ry?qu(bi,e)>qu(bi,Ii)&&(Ii=e):qu(e,Ii)>qu(bi,Ii)&&(bi=e):Ii>=bi?(e<bi&&(bi=e),e>Ii&&(Ii=e)):e>Ry?qu(bi,e)>qu(bi,Ii)&&(Ii=e):qu(e,Ii)>qu(bi,Ii)&&(bi=e)}else Vm.push(Qp=[bi=e,Ii=e]);t<su&&(su=t),t>Ku&&(Ku=t),rw=n,Ry=e}function T1e(){Vh.point=zje}function C1e(){Qp[0]=bi,Qp[1]=Ii,Vh.point=Cq,rw=null}function Uje(e,t){if(rw){var n=e-Ry;P2.add(zn(n)>180?n+(n>0?360:-360):n)}else Bje=e,jje=t;nh.point(e,t),zje(e,t)}function ysn(){nh.lineStart()}function vsn(){Uje(Bje,jje),nh.lineEnd(),zn(P2)>Dt&&(bi=-(Ii=180)),Qp[0]=bi,Qp[1]=Ii,rw=null}function qu(e,t){return(t-=e)<0?t+360:t}function _sn(e,t){return e[0]-t[0]}function A1e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function bsn(e){var t,n,r,i,s,o,a;if(Ku=Ii=-(bi=su=1/0),Vm=[],Jh(e,Vh),n=Vm.length){for(Vm.sort(_sn),t=1,r=Vm[0],s=[r];t<n;++t)i=Vm[t],A1e(r,i[0])||A1e(r,i[1])?(qu(r[0],i[1])>qu(r[0],r[1])&&(r[1]=i[1]),qu(i[0],r[1])>qu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=qu(r[1],i[0]))>o&&(o=a,bi=i[0],Ii=r[1])}return Vm=Qp=null,bi===1/0||su===1/0?[[NaN,NaN],[NaN,NaN]]:[[bi,su],[Ii,Ku]]}var AT,YM,KM,XM,QM,JM,ZM,eL,Aq,Iq,Oq,Vje,Hje,wa,Ea,xa,Zc={sphere:go,point:Gte,lineStart:I1e,lineEnd:O1e,polygonStart:function(){Zc.lineStart=xsn,Zc.lineEnd=Ssn},polygonEnd:function(){Zc.lineStart=I1e,Zc.lineEnd=O1e}};function Gte(e,t){e*=Sn,t*=Sn;var n=Ft(t);dO(n*Ft(e),n*Rt(e),Rt(t))}function dO(e,t,n){++AT,KM+=(e-KM)/AT,XM+=(t-XM)/AT,QM+=(n-QM)/AT}function I1e(){Zc.point=wsn}function wsn(e,t){e*=Sn,t*=Sn;var n=Ft(t);wa=n*Ft(e),Ea=n*Rt(e),xa=Rt(t),Zc.point=Esn,dO(wa,Ea,xa)}function Esn(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*Rt(e),s=Rt(t),o=lc(Ma((o=Ea*s-xa*i)*o+(o=xa*r-wa*s)*o+(o=wa*i-Ea*r)*o),wa*r+Ea*i+xa*s);YM+=o,JM+=o*(wa+(wa=r)),ZM+=o*(Ea+(Ea=i)),eL+=o*(xa+(xa=s)),dO(wa,Ea,xa)}function O1e(){Zc.point=Gte}function xsn(){Zc.point=Tsn}function Ssn(){qje(Vje,Hje),Zc.point=Gte}function Tsn(e,t){Vje=e,Hje=t,e*=Sn,t*=Sn,Zc.point=qje;var n=Ft(t);wa=n*Ft(e),Ea=n*Rt(e),xa=Rt(t),dO(wa,Ea,xa)}function qje(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*Rt(e),s=Rt(t),o=Ea*s-xa*i,a=xa*r-wa*s,u=wa*i-Ea*r,l=wq(o,a,u),c=Iu(l),f=l&&-c/l;Aq.add(f*o),Iq.add(f*a),Oq.add(f*u),YM+=c,JM+=c*(wa+(wa=r)),ZM+=c*(Ea+(Ea=i)),eL+=c*(xa+(xa=s)),dO(wa,Ea,xa)}function Csn(e){AT=YM=KM=XM=QM=JM=ZM=eL=0,Aq=new Ia,Iq=new Ia,Oq=new Ia,Jh(e,Zc);var t=+Aq,n=+Iq,r=+Oq,i=wq(t,n,r);return i<jM&&(t=JM,n=ZM,r=eL,YM<Dt&&(t=KM,n=XM,r=QM),i=wq(t,n,r),i<jM)?[NaN,NaN]:[lc(n,t)*Hi,Iu(r/i)*Hi]}function Pq(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function kq(e,t){return zn(e)>Cn&&(e-=Math.round(e/Da)*Da),[e,t]}kq.invert=kq;function Wje(e,t,n){return(e%=Da)?t||n?Pq(k1e(e),$1e(t,n)):k1e(e):t||n?$1e(t,n):kq}function P1e(e){return function(t,n){return t+=e,zn(t)>Cn&&(t-=Math.round(t/Da)*Da),[t,n]}}function k1e(e){var t=P1e(e);return t.invert=P1e(-e),t}function $1e(e,t){var n=Ft(e),r=Rt(e),i=Ft(t),s=Rt(t);function o(a,u){var l=Ft(u),c=Ft(a)*l,f=Rt(a)*l,d=Rt(u),h=d*n+c*r;return[lc(f*i-h*s,c*n-d*r),Iu(h*i+f*s)]}return o.invert=function(a,u){var l=Ft(u),c=Ft(a)*l,f=Rt(a)*l,d=Rt(u),h=d*i-f*s;return[lc(f*i+d*s,c*n+h*r),Iu(h*n-c*r)]},o}function Asn(e){e=Wje(e[0]*Sn,e[1]*Sn,e.length>2?e[2]*Sn:0);function t(n){return n=e(n[0]*Sn,n[1]*Sn),n[0]*=Hi,n[1]*=Hi,n}return t.invert=function(n){return n=e.invert(n[0]*Sn,n[1]*Sn),n[0]*=Hi,n[1]*=Hi,n},t}function Isn(e,t,n,r,i,s){if(n){var o=Ft(t),a=Rt(t),u=r*n;i==null?(i=t+r*Da,s=t-u/2):(i=R1e(o,i),s=R1e(o,s),(r>0?i<s:i>s)&&(i+=r*Da));for(var l,c=i;r>0?c>s:c<s;c-=u)l=WM([o,-a*Ft(c),-a*Rt(c)]),e.point(l[0],l[1])}}function R1e(e,t){t=fv(t),t[0]-=e,GM(t);var n=Dje(-t[1]);return((-t[2]<0?-n:n)+Da-Dt)%Da}function Gje(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:go,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function K$(e,t){return zn(e[0]-t[0])<Dt&&zn(e[1]-t[1])<Dt}function vk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yje(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(K$(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Dt}s.push(v=new vk(g,p,null,!0)),o.push(v.o=new vk(g,null,v,!1)),s.push(v=new vk(y,p,null,!1)),o.push(v.o=new vk(y,null,v,!0))}}),!!s.length){for(o.sort(t),N1e(s),N1e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function N1e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function o7(e){return zn(e[0])<=Cn?e[0]:Yl(e[0])*((zn(e[0])+Cn)%Da-Cn)}function Osn(e,t){var n=o7(t),r=t[1],i=Rt(r),s=[Rt(n),-Ft(n),0],o=0,a=0,u=new Ia;i===1?r=Mi+Dt:i===-1&&(r=-Mi-Dt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=o7(h),m=h[1]/2+zM,g=Rt(m),y=Ft(m),v=0;v<d;++v,p=b,g=w,y=x,h=_){var _=f[v],b=o7(_),E=_[1]/2+zM,w=Rt(E),x=Ft(E),S=b-p,P=S>=0?1:-1,A=P*S,O=A>Cn,z=g*w;if(u.add(lc(z*P*Rt(A),y*x+z*Ft(A))),o+=O?S+P*Da:S,O^p>=n^b>=n){var D=cE(fv(h),fv(_));GM(D);var R=cE(s,D);GM(R);var N=(O^S>=0?-1:1)*Iu(R[2]);(r>N||r===N&&(D[0]||D[1]))&&(a+=O^S>=0?1:-1)}}return(o<-Dt||o<Dt&&u<-jM)^a&1}function Kje(e,t,n,r){return function(i){var s=t(i),o=Gje(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Rje(c);var b=Osn(l,r);c.length?(u||(i.polygonStart(),u=!0),Yje(c,ksn,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,E){e(b,E)&&i.point(b,E)}function p(b,E){s.point(b,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(b,E){f.push([b,E]),a.point(b,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),E=o.result(),w,x=E.length,S,P,A;if(f.pop(),l.push(f),f=null,!!x){if(b&1){if(P=E[0],(S=P.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<S;++w)i.point((A=P[w])[0],A[1]);i.lineEnd()}return}x>1&&b&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Psn))}}return d}}function Psn(e){return e.length>1}function ksn(e,t){return((e=e.x)[0]<0?e[1]-Mi-Dt:Mi-e[1])-((t=t.x)[0]<0?t[1]-Mi-Dt:Mi-t[1])}const D1e=Kje(function(){return!0},$sn,Nsn,[-Cn,-Mi]);function $sn(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Cn:-Cn,u=zn(s-t);zn(u-Cn)<Dt?(e.point(t,n=(n+o)/2>0?Mi:-Mi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Cn&&(zn(t-r)<Dt&&(t-=r*Dt),zn(s-a)<Dt&&(s-=a*Dt),n=Rsn(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Rsn(e,t,n,r){var i,s,o=Rt(e-n);return zn(o)>Dt?Cx((Rt(t)*(s=Ft(r))*Rt(n)-Rt(r)*(i=Ft(t))*Rt(e))/(i*s*o)):(t+r)/2}function Nsn(e,t,n,r){var i;if(e==null)i=n*Mi,r.point(-Cn,i),r.point(0,i),r.point(Cn,i),r.point(Cn,0),r.point(Cn,-i),r.point(0,-i),r.point(-Cn,-i),r.point(-Cn,0),r.point(-Cn,i);else if(zn(e[0]-t[0])>Dt){var s=e[0]<t[0]?Cn:-Cn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Dsn(e){var t=Ft(e),n=2*Sn,r=t>0,i=zn(t)>Dt;function s(c,f,d,h){Isn(h,e,n,d,c,f)}function o(c,f){return Ft(c)*Ft(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,b=o(g,y),E=r?b?0:l(g,y):b?l(g+(g<0?Cn:-Cn),y):0;if(!f&&(p=h=b)&&c.lineStart(),b!==h&&(_=u(f,v),(!_||K$(f,_)||K$(v,_))&&(v[2]=1)),b!==h)m=0,b?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^b){var w;!(E&d)&&(w=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}b&&(!f||!K$(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=fv(c),p=fv(f),m=[1,0,0],g=cE(h,p),y=gk(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var b=t*y/_,E=-t*v/_,w=cE(m,g),x=yk(m,b),S=yk(g,E);s7(x,S);var P=w,A=gk(x,P),O=gk(P,P),z=A*A-O*(gk(x,x)-1);if(!(z<0)){var D=Ma(z),R=yk(P,(-A-D)/O);if(s7(R,x),R=WM(R),!d)return R;var N=c[0],L=f[0],V=c[1],j=f[1],H;L<N&&(H=N,N=L,L=H);var U=L-N,k=zn(U-Cn)<Dt,$=k||U<Dt;if(!k&&j<V&&(H=V,V=j,j=H),$?k?V+j>0^R[1]<(zn(R[0]-N)<Dt?V:j):V<=R[1]&&R[1]<=j:U>Cn^(N<=R[0]&&R[0]<=L)){var q=yk(P,(-A+D)/O);return s7(q,x),[R,WM(q)]}}}function l(c,f){var d=r?e:Cn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Kje(o,a,s,r?[0,-e]:[-Cn,e-Cn])}function Msn(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var IT=1e9,_k=-IT;function Xje(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return zn(l[0]-e)<Dt?c>0?0:3:zn(l[0]-n)<Dt?c>0?2:1:zn(l[1]-t)<Dt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Gje(),d,h,p,m,g,y,v,_,b,E,w,x={point:S,lineStart:z,lineEnd:D,polygonStart:A,polygonEnd:O};function S(N,L){i(N,L)&&c.point(N,L)}function P(){for(var N=0,L=0,V=h.length;L<V;++L)for(var j=h[L],H=1,U=j.length,k=j[0],$,q,F=k[0],B=k[1];H<U;++H)$=F,q=B,k=j[H],F=k[0],B=k[1],q<=r?B>r&&(F-$)*(r-q)>(B-q)*(e-$)&&++N:B<=r&&(F-$)*(r-q)<(B-q)*(e-$)&&--N;return N}function A(){c=f,d=[],h=[],w=!0}function O(){var N=P(),L=w&&N,V=(d=Rje(d)).length;(L||V)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),V&&Yje(d,a,N,s,l),l.polygonEnd()),c=l,d=h=p=null}function z(){x.point=R,h&&h.push(p=[]),E=!0,b=!1,v=_=NaN}function D(){d&&(R(m,g),y&&b&&f.rejoin(),d.push(f.result())),x.point=S,b&&c.lineEnd()}function R(N,L){var V=i(N,L);if(h&&p.push([N,L]),E)m=N,g=L,y=V,E=!1,V&&(c.lineStart(),c.point(N,L));else if(V&&b)c.point(N,L);else{var j=[v=Math.max(_k,Math.min(IT,v)),_=Math.max(_k,Math.min(IT,_))],H=[N=Math.max(_k,Math.min(IT,N)),L=Math.max(_k,Math.min(IT,L))];Msn(j,H,e,t,n,r)?(b||(c.lineStart(),c.point(j[0],j[1])),c.point(H[0],H[1]),V||c.lineEnd(),w=!1):V&&(c.lineStart(),c.point(N,L),w=!1)}v=N,_=L,b=V}return x}}function M1e(e,t,n){var r=Sb(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function L1e(e,t,n){var r=Sb(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Lsn(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Sb(mk(r/c)*c,n,c).map(p).concat(Sb(mk(a/f)*f,o,f).map(m)).concat(Sb(mk(t/u)*u,e,u).filter(function(_){return zn(_%c)>Dt}).map(d)).concat(Sb(mk(s/l)*l,i,l).filter(function(_){return zn(_%f)>Dt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=M1e(s,i,90),h=L1e(t,e,g),p=M1e(a,o,90),m=L1e(r,n,g),y):g},y.extentMajor([[-180,-90+Dt],[180,90-Dt]]).extentMinor([[-180,-80-Dt],[180,80+Dt]])}const _A=e=>e;var a7=new Ia,$q=new Ia,Qje,Jje,Rq,Nq,tg={point:go,lineStart:go,lineEnd:go,polygonStart:function(){tg.lineStart=Fsn,tg.lineEnd=jsn},polygonEnd:function(){tg.lineStart=tg.lineEnd=tg.point=go,a7.add(zn($q)),$q=new Ia},result:function(){var e=a7/2;return a7=new Ia,e}};function Fsn(){tg.point=Bsn}function Bsn(e,t){tg.point=Zje,Qje=Rq=e,Jje=Nq=t}function Zje(e,t){$q.add(Nq*e-Rq*t),Rq=e,Nq=t}function jsn(){Zje(Qje,Jje)}const F1e=tg;var fE=1/0,tL=fE,bA=-fE,nL=bA,zsn={point:Usn,lineStart:go,lineEnd:go,polygonStart:go,polygonEnd:go,result:function(){var e=[[fE,tL],[bA,nL]];return bA=nL=-(tL=fE=1/0),e}};function Usn(e,t){e<fE&&(fE=e),e>bA&&(bA=e),t<tL&&(tL=t),t>nL&&(nL=t)}const rL=zsn;var Dq=0,Mq=0,OT=0,iL=0,sL=0,Tb=0,Lq=0,Fq=0,PT=0,e7e,t7e,pd,md,Kc={point:dv,lineStart:B1e,lineEnd:j1e,polygonStart:function(){Kc.lineStart=qsn,Kc.lineEnd=Wsn},polygonEnd:function(){Kc.point=dv,Kc.lineStart=B1e,Kc.lineEnd=j1e},result:function(){var e=PT?[Lq/PT,Fq/PT]:Tb?[iL/Tb,sL/Tb]:OT?[Dq/OT,Mq/OT]:[NaN,NaN];return Dq=Mq=OT=iL=sL=Tb=Lq=Fq=PT=0,e}};function dv(e,t){Dq+=e,Mq+=t,++OT}function B1e(){Kc.point=Vsn}function Vsn(e,t){Kc.point=Hsn,dv(pd=e,md=t)}function Hsn(e,t){var n=e-pd,r=t-md,i=Ma(n*n+r*r);iL+=i*(pd+e)/2,sL+=i*(md+t)/2,Tb+=i,dv(pd=e,md=t)}function j1e(){Kc.point=dv}function qsn(){Kc.point=Gsn}function Wsn(){n7e(e7e,t7e)}function Gsn(e,t){Kc.point=n7e,dv(e7e=pd=e,t7e=md=t)}function n7e(e,t){var n=e-pd,r=t-md,i=Ma(n*n+r*r);iL+=i*(pd+e)/2,sL+=i*(md+t)/2,Tb+=i,i=md*e-pd*t,Lq+=i*(pd+e),Fq+=i*(md+t),PT+=i*3,dv(pd=e,md=t)}const z1e=Kc;function r7e(e){this._context=e}r7e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Da);break}}},result:go};var Bq=new Ia,u7,i7e,s7e,kT,$T,oL={point:go,lineStart:function(){oL.point=Ysn},lineEnd:function(){u7&&o7e(i7e,s7e),oL.point=go},polygonStart:function(){u7=!0},polygonEnd:function(){u7=null},result:function(){var e=+Bq;return Bq=new Ia,e}};function Ysn(e,t){oL.point=o7e,i7e=kT=e,s7e=$T=t}function o7e(e,t){kT-=e,$T-=t,Bq.add(Ma(kT*kT+$T*$T)),kT=e,$T=t}const U1e=oL;let V1e,aL,H1e,q1e;class W1e{constructor(t){this._append=t==null?a7e:Ksn(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==H1e||this._append!==aL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,H1e=r,aL=this._append,q1e=this._,this._=i}this._+=q1e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function a7e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ksn(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return a7e;if(t!==V1e){const n=10**t;V1e=t,aL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return aL}function u7e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Jh(a,i(s))),s.result()}return o.area=function(a){return Jh(a,i(F1e)),F1e.result()},o.measure=function(a){return Jh(a,i(U1e)),U1e.result()},o.bounds=function(a){return Jh(a,i(rL)),rL.result()},o.centroid=function(a){return Jh(a,i(z1e)),z1e.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,_A):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new W1e(n)):new r7e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new W1e(n)),o},o.projection(e).digits(n).context(t)}function x5(e){return function(t){var n=new jq;for(var r in e)n[r]=e[r];return n.stream=t,n}}function jq(){}jq.prototype={constructor:jq,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Yte(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Jh(n,e.stream(rL)),t(rL.result()),r!=null&&e.clipExtent(r),e}function S5(e,t,n){return Yte(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function Kte(e,t,n){return S5(e,[[0,0],t],n)}function Xte(e,t,n){return Yte(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function Qte(e,t,n){return Yte(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var G1e=16,Xsn=Ft(30*Sn);function Y1e(e,t){return+t?Jsn(e,t):Qsn(e)}function Qsn(e){return x5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Jsn(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var b=o+d,E=a+h,w=u+p,x=Ma(b*b+E*E+w*w),S=Iu(w/=x),P=zn(zn(w)-1)<Dt||zn(s-f)<Dt?(s+f)/2:lc(E,b),A=e(P,S),O=A[0],z=A[1],D=O-r,R=z-i,N=v*D-y*R;(N*N/_>t||zn((y*D+v*R)/_-.5)>.3||o*d+a*h+u*p<Xsn)&&(n(r,i,s,o,a,u,O,z,P,b/=x,E/=x,w,m,g),g.point(O,z),n(O,z,P,b,E,w,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,P){S=e(S,P),r.point(S[0],S[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(S,P){var A=fv([S,P]),O=e(S,P);n(f,d,c,h,p,m,f=O[0],d=O[1],c=S,h=A[0],p=A[1],m=A[2],G1e,r),r.point(f,d)}function b(){g.point=y,r.lineEnd()}function E(){v(),g.point=w,g.lineEnd=x}function w(S,P){_(i=S,P),s=f,o=d,a=h,u=p,l=m,g.point=_}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,G1e,r),g.lineEnd=b,b()}return g}}var Zsn=x5({point:function(e,t){this.stream.point(e*Sn,t*Sn)}});function eon(e){return x5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function ton(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function K1e(e,t,n,r,i,s){if(!s)return ton(e,t,n,r,i);var o=Ft(s),a=Rt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function yh(e){return l7e(function(){return e})()}function l7e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=D1e,g=null,y,v,_,b=_A,E=.5,w,x,S,P,A;function O(N){return S(N[0]*Sn,N[1]*Sn)}function z(N){return N=S.invert(N[0],N[1]),N&&[N[0]*Hi,N[1]*Hi]}O.stream=function(N){return P&&A===N?P:P=Zsn(eon(c)(m(w(b(A=N)))))},O.preclip=function(N){return arguments.length?(m=N,p=void 0,R()):m},O.postclip=function(N){return arguments.length?(b=N,g=y=v=_=null,R()):b},O.clipAngle=function(N){return arguments.length?(m=+N?Dsn(p=N*Sn):(p=null,D1e),R()):p*Hi},O.clipExtent=function(N){return arguments.length?(b=N==null?(g=y=v=_=null,_A):Xje(g=+N[0][0],y=+N[0][1],v=+N[1][0],_=+N[1][1]),R()):g==null?null:[[g,y],[v,_]]},O.scale=function(N){return arguments.length?(n=+N,D()):n},O.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],D()):[r,i]},O.center=function(N){return arguments.length?(s=N[0]%360*Sn,o=N[1]%360*Sn,D()):[s*Hi,o*Hi]},O.rotate=function(N){return arguments.length?(a=N[0]%360*Sn,u=N[1]%360*Sn,l=N.length>2?N[2]%360*Sn:0,D()):[a*Hi,u*Hi,l*Hi]},O.angle=function(N){return arguments.length?(f=N%360*Sn,D()):f*Hi},O.reflectX=function(N){return arguments.length?(d=N?-1:1,D()):d<0},O.reflectY=function(N){return arguments.length?(h=N?-1:1,D()):h<0},O.precision=function(N){return arguments.length?(w=Y1e(x,E=N*N),R()):Ma(E)},O.fitExtent=function(N,L){return S5(O,N,L)},O.fitSize=function(N,L){return Kte(O,N,L)},O.fitWidth=function(N,L){return Xte(O,N,L)},O.fitHeight=function(N,L){return Qte(O,N,L)};function D(){var N=K1e(n,0,0,d,h,f).apply(null,t(s,o)),L=K1e(n,r-N[0],i-N[1],d,h,f);return c=Wje(a,u,l),x=Pq(t,L),S=Pq(c,x),w=Y1e(x,E),R()}function R(){return P=A=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&z,D()}}function Jte(e){var t=0,n=Cn/3,r=l7e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sn,n=s[1]*Sn):[t*Hi,n*Hi]},i}function non(e){var t=Ft(e);function n(r,i){return[r*t,Rt(i)/t]}return n.invert=function(r,i){return[r/t,Iu(i*t)]},n}function ron(e,t){var n=Rt(e),r=(n+Rt(t))/2;if(zn(r)<Dt)return non(e);var i=1+n*(2*r-n),s=Ma(i)/r;function o(a,u){var l=Ma(i-2*r*Rt(u))/r;return[l*Rt(a*=r),s-l*Ft(a)]}return o.invert=function(a,u){var l=s-u,c=lc(a,zn(l))*Yl(l);return l*r<0&&(c-=Cn*Yl(a)*Yl(l)),[c/r,Iu((i-(a*a+l*l)*r*r)/(2*r))]},o}function uL(){return Jte(ron).scale(155.424).center([0,33.6442])}function c7e(){return uL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ion(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function son(){var e,t,n=c7e(),r,i=uL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=uL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=ion([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Dt,m+.12*h+Dt],[p-.214*h-Dt,m+.234*h-Dt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Dt,m+.166*h+Dt],[p-.115*h-Dt,m+.234*h-Dt]]).stream(l),f()},c.fitExtent=function(d,h){return S5(c,d,h)},c.fitSize=function(d,h){return Kte(c,d,h)},c.fitWidth=function(d,h){return Xte(c,d,h)},c.fitHeight=function(d,h){return Qte(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function f7e(e){return function(t,n){var r=Ft(t),i=Ft(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Rt(t),s*Rt(n)]}}function hO(e){return function(t,n){var r=Ma(t*t+n*n),i=e(r),s=Rt(i),o=Ft(i);return[lc(t*s,r*o),Iu(r&&n*s/r)]}}var d7e=f7e(function(e){return Ma(2/(1+e))});d7e.invert=hO(function(e){return 2*Iu(e/2)});function oon(){return yh(d7e).scale(124.75).clipAngle(180-.001)}var h7e=f7e(function(e){return(e=Dje(e))&&e/Rt(e)});h7e.invert=hO(function(e){return e});function aon(){return yh(h7e).scale(79.4188).clipAngle(180-.001)}function T5(e,t){return[e,UM(Wte((Mi+t)/2))]}T5.invert=function(e,t){return[e,2*Cx(Nje(t))-Mi]};function uon(){return p7e(T5).scale(961/Da)}function p7e(e){var t=yh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Cn*r(),d=t(Asn(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===T5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function bk(e){return Wte((Mi+e)/2)}function lon(e,t){var n=Ft(e),r=e===t?Rt(e):UM(n/Ft(t))/UM(bk(t)/bk(e)),i=n*i7(bk(e),r)/r;if(!r)return T5;function s(o,a){i>0?a<-Mi+Dt&&(a=-Mi+Dt):a>Mi-Dt&&(a=Mi-Dt);var u=i/i7(bk(a),r);return[u*Rt(r*o),i-u*Ft(r*o)]}return s.invert=function(o,a){var u=i-a,l=Yl(r)*Ma(o*o+u*u),c=lc(o,zn(u))*Yl(u);return u*r<0&&(c-=Cn*Yl(o)*Yl(u)),[c/r,2*Cx(i7(i/l,1/r))-Mi]},s}function con(){return Jte(lon).scale(109.5).parallels([30,30])}function lL(e,t){return[e,t]}lL.invert=lL;function fon(){return yh(lL).scale(152.63)}function don(e,t){var n=Ft(e),r=e===t?Rt(e):(n-Ft(t))/(t-e),i=n/r+e;if(zn(r)<Dt)return lL;function s(o,a){var u=i-a,l=r*o;return[u*Rt(l),i-u*Ft(l)]}return s.invert=function(o,a){var u=i-a,l=lc(o,zn(u))*Yl(u);return u*r<0&&(l-=Cn*Yl(o)*Yl(u)),[l/r,i-Yl(r)*Ma(o*o+u*u)]},s}function hon(){return Jte(don).scale(131.154).center([0,13.9389])}var k2=1.340264,$2=-.081106,R2=893e-6,N2=.003796,cL=Ma(3)/2,pon=12;function m7e(e,t){var n=Iu(cL*Rt(t)),r=n*n,i=r*r*r;return[e*Ft(n)/(cL*(k2+3*$2*r+i*(7*R2+9*N2*r))),n*(k2+$2*r+i*(R2+N2*r))]}m7e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<pon&&(a=n*(k2+$2*r+i*(R2+N2*r))-t,u=k2+3*$2*r+i*(7*R2+9*N2*r),n-=o=a/u,r=n*n,i=r*r*r,!(zn(o)<jM));++s);return[cL*e*(k2+3*$2*r+i*(7*R2+9*N2*r))/Ft(n),Iu(Rt(n)/cL)]};function mon(){return yh(m7e).scale(177.158)}function g7e(e,t){var n=Ft(t),r=Ft(e)*n;return[n*Rt(e)/r,Rt(t)/r]}g7e.invert=hO(Cx);function gon(){return yh(g7e).scale(144.049).clipAngle(60)}function yon(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=x5({point:function(b,E){var w=_([b,E]);this.stream.point(w[0],w[1])}}),m=_A,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(b){var E=b[0]*d,w=b[1]*h;if(s){var x=w*o-E*a;E=E*o+w*a,w=x}return[E+t,w+n]}return _.invert=function(b){var E=b[0]-t,w=b[1]-n;if(s){var x=w*o+E*a;E=E*o-w*a,w=x}return[E/d,w/h]},_.stream=function(b){return g&&y===b?g:g=p(m(y=b))},_.postclip=function(b){return arguments.length?(m=b,u=l=c=f=null,v()):m},_.clipExtent=function(b){return arguments.length?(m=b==null?(u=l=c=f=null,_A):Xje(u=+b[0][0],l=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(b){return arguments.length?(e=+b,v()):e},_.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},_.angle=function(b){return arguments.length?(s=b%360*Sn,a=Rt(s),o=Ft(s),v()):s*Hi},_.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},_.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},_.fitExtent=function(b,E){return S5(_,b,E)},_.fitSize=function(b,E){return Kte(_,b,E)},_.fitWidth=function(b,E){return Xte(_,b,E)},_.fitHeight=function(b,E){return Qte(_,b,E)},_}function y7e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}y7e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(zn(i)>Dt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function von(){return yh(y7e).scale(175.295)}function v7e(e,t){return[Ft(t)*Rt(e),Rt(t)]}v7e.invert=hO(Iu);function _on(){return yh(v7e).scale(249.5).clipAngle(90+Dt)}function _7e(e,t){var n=Ft(t),r=1+Ft(e)*n;return[n*Rt(e)/r,Rt(t)/r]}_7e.invert=hO(function(e){return 2*Cx(e)});function bon(){return yh(_7e).scale(250).clipAngle(142)}function b7e(e,t){return[UM(Wte((Mi+t)/2)),-e]}b7e.invert=function(e,t){return[-t,2*Cx(Nje(e))-Mi]};function won(){var e=p7e(b7e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Eon=Math.abs,zq=Math.cos,fL=Math.sin,xon=1e-6,w7e=Math.PI,Uq=w7e/2,X1e=Son(2);function Q1e(e){return e>1?Uq:e<-1?-Uq:Math.asin(e)}function Son(e){return e>0?Math.sqrt(e):0}function Ton(e,t){var n=e*fL(t),r=30,i;do t-=i=(t+fL(t)-n)/(1+zq(t));while(Eon(i)>xon&&--r>0);return t/2}function Con(e,t,n){function r(i,s){return[e*i*zq(s=Ton(n,s)),t*fL(s)]}return r.invert=function(i,s){return s=Q1e(s/t),[i/(e*zq(s)),Q1e((2*s+fL(2*s))/n)]},r}var Aon=Con(X1e/Uq,X1e,w7e);function Ion(){return yh(Aon).scale(169.529)}const Oon=u7e(),Vq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Pon(e,t){return function n(){const r=t();return r.type=e,r.path=u7e().projection(r),r.copy=r.copy||function(){const i=n();return Vq.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},B9e(r)}}function Zte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(dL[e]=Pon(e,t),this):dL[e]||null}function E7e(e){return e&&e.path||Oon}const dL={albers:c7e,albersusa:son,azimuthalequalarea:oon,azimuthalequidistant:aon,conicconformal:con,conicequalarea:uL,conicequidistant:hon,equalEarth:mon,equirectangular:fon,gnomonic:gon,identity:yon,mercator:uon,mollweide:Ion,naturalEarth1:von,orthographic:_on,stereographic:bon,transversemercator:won};for(const e in dL)Zte(e,dL[e]);function kon(){}const Ph=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function x7e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),$on(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(Ron((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Ph[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,Ph[m|g<<1].forEach(_);for(Ph[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Ph[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Ph[m|g<<1|y<<2|v<<3].forEach(_);Ph[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,Ph[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Ph[y<<2|v<<3].forEach(_);Ph[y<<3].forEach(_);function _(b){var E=[b[0][0]+h,b[0][1]+p],w=[b[1][0]+h,b[1][1]+p],x=o(E),S=o(w),P,A;(P=d[x])?(A=f[S])?(delete d[P.end],delete f[A.start],P===A?(P.ring.push(w),c(P.ring)):f[P.start]=d[A.end]={start:P.start,end:A.end,ring:P.ring.concat(A.ring)}):(delete d[P.end],P.ring.push(w),d[P.end=S]=P):(P=f[S])?(A=d[x])?(delete f[P.start],delete d[A.end],P===A?(P.ring.push(w),c(P.ring)):f[A.start]=d[P.end]={start:A.start,end:P.end,ring:A.ring.concat(P.ring)}):(delete f[P.start],P.ring.unshift(E),f[P.start=x]=P):f[x]=d[S]={start:x,end:S,ring:[E,w]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Te("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:kon,r):n===a},r}function $on(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Ron(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Non(e,t[n]))return i;return 0}function Non(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Don(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Don(e,t,n){var r;return Mon(e,t,n)&&Lon(e[r=+(e[0]===t[0])],n[r],t[r])}function Mon(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Lon(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function S7e(e,t,n){return function(r){var i=eh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?cA(s,o,e):a/(e+1);return Qv(s+u,o,u)}}function ene(e){Ee.call(this,null,e)}ene.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};We(ene,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ua,s=x7e().smooth(e.smooth!==!1),o=e.thresholds||Fon(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ie(o)?o:o(c.values));Bon(f,c,l,e),f.forEach(d=>{u.push(QF(l,dr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Fon(e,t,n){const r=S7e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>k1(t(i).values)))}function Bon(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pn(i)&&(i=i(n,r)),pn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Jn(i)?i:i[0])||1,a=(Jn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(T7e(t,o,a,u,l))}function T7e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function J1e(e,t,n){const r=e>=0?e:lee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function l7(e){return pn(e)?e:la(+e)}function C7e(){var e=u=>u[0],t=u=>u[1],n=yx,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=J1e(r[0],u,e)>>o,f=J1e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(b=>{const E=d+(+e(b)>>o),w=h+(+t(b)>>o);E>=0&&E<p&&w>=0&&w<m&&(g[E+w*p]+=+n(b))}),c>0&&f>0?(P_(p,m,g,y,c),k_(p,m,y,g,f),P_(p,m,g,y,c),k_(p,m,y,g,f),P_(p,m,g,y,c),k_(p,m,y,g,f)):c>0?(P_(p,m,g,y,c),P_(p,m,y,g,c),P_(p,m,g,y,c),v=y):f>0&&(k_(p,m,g,y,f),k_(p,m,y,g,f),k_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/u8e(v);for(let b=0,E=p*m;b<E;++b)v[b]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=l7(u),a):e},a.y=function(u){return arguments.length?(t=l7(u),a):t},a.weight=function(u){return arguments.length?(n=l7(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Te("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Te("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Te("invalid bandwidth"),r=u,a):r},a}function P_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function k_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function tne(e){Ee.call(this,null,e)}tne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const jon=["x","y","weight","size","cellSize","bandwidth"];function A7e(e,t){return jon.forEach(n=>t[n]!=null?e[n](t[n]):0),e}We(tne,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=zon(r,e.groupby),s=(e.groupby||[]).map(Li),o=A7e(C7e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>dr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function zon(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function nne(e){Ee.call(this,null,e)}nne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};We(nne,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=x7e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||S7e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=A7e(C7e(),e)(i,!0),u=T7e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ie(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(dr),n}});const Hq="Feature",rne="FeatureCollection",Uon="MultiPoint";function ine(e){Ee.call(this,null,e)}ine.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};We(ine,Ee,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ua,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Zo(a))||s&&t.modified(Zo(s))||o&&t.modified(Zo(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Hq,geometry:{type:Uon,coordinates:r}})),this.value={type:rne,features:n}}});function sne(e){Ee.call(this,null,e)}sne.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};We(sne,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ua,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=E7e(e.projection),n.materialize().reflow()):o=i===ua||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Von(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Von(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function one(e){Ee.call(this,null,e)}one.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};We(one,Ee,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function ane(e){Ee.call(this,null,e)}ane.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};We(ane,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Hon(E7e(e.projection),e.field||sc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Hon(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function une(e){Ee.call(this,[],e),this.generator=Lsn()}une.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};We(une,Ee,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(V8e(n[0],i)):t.add.push(dr(i)),n[0]=i,t}});function lne(e){Ee.call(this,null,e)}lne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};We(lne,Ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ua,s=Won(e.opacity,e),o=qon(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?k1(n.map(l=>k1(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=hn({},l,u);r||(f.$max=k1(c.values||[])),l[a]=Gon(c,f,o.dep?o:la(o(f)),s.dep?s:la(s(f)))}),t.reflow(!0).modifies(a)}});function qon(e,t){let n;return pn(e)?(n=r=>e0(e(r,t)),n.dep=I7e(e)):n=la(e0(e||"#888")),n}function Won(e,t){let n;return pn(e)?(n=r=>e(r,t),n.dep=I7e(e)):e?n=la(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function I7e(e){if(!pn(e))return!1;const t=yf(Zo(e));return t.$x||t.$y||t.$value||t.$max}function Gon(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:eg,d=Vg(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const b=n(t);m[y+0]=b.r,m[y+1]=b.g,m[y+2]=b.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function O7e(e){Ee.call(this,null,e),this.modified(!0)}We(O7e,Ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Kon(e.type),Vq.forEach(r=>{e[r]!=null&&Z1e(n,r,e[r])})):Vq.forEach(r=>{e.modified(r)&&Z1e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Yon(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Yon(e,t){const n=Xon(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Kon(e){const t=Zte((e||"mercator").toLowerCase());return t||Te("Unrecognized projection type: "+e),t()}function Z1e(e,t,n){pn(e[t])&&e[t](n)}function Xon(e){return e=nt(e),e.length===1?e[0]:{type:rne,features:e.reduce((t,n)=>t.concat(Qon(n)),[])}}function Qon(e){return e.type===rne?e.features:nt(e).filter(t=>t!=null).map(t=>t.type===Hq?t:{type:Hq,geometry:t})}const Jon=Object.freeze(Object.defineProperty({__proto__:null,contour:nne,geojson:ine,geopath:sne,geopoint:one,geoshape:ane,graticule:une,heatmap:lne,isocontour:ene,kde2d:tne,projection:O7e},Symbol.toStringTag,{value:"Module"})),eve={center:oAt,collide:TAt,nbody:MAt,link:AAt,x:LAt,y:FAt},RT="forces",qq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Zon=["static","iterations"],P7e=["x","y","vx","vy"];function cne(e){Ee.call(this,null,e)}cne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:P7e}]};We(cne,Ee,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(qq),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&k7e(n,e,0,t)):(this.value=n=tan(t.source,e),n.on("tick",ean(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Zon)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==RT||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(P7e)}});function ean(e,t){return()=>e.touch(t).run()}function tan(e,t){const n=DAt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),k7e(n,t,!0).on("end",()=>s=!0)}function k7e(e,t,n,r){var i=nt(t.forces),s,o,a,u;for(s=0,o=qq.length;s<o;++s)a=qq[s],a!==RT&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=RT+s,a=n||t.modified(RT,s)?ran(i[s]):r&&nan(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(RT+s,null);return e.numForces=i.length,e}function nan(e,t){var n,r;for(n in e)if(pn(r=e[n])&&t.modified(Zo(r)))return 1;return 0}function ran(e){var t,n;Nt(eve,e.force)||Te("Unrecognized force: "+e.force),t=eve[e.force]();for(n in e)pn(t[n])&&ian(t[n],e[n],e);return t}function ian(e,t,n){e(pn(t)?r=>t(r,n):t)}const san=Object.freeze(Object.defineProperty({__proto__:null,force:cne},Symbol.toStringTag,{value:"Module"}));function Wq(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function fne(e){Ee.call(this,null,e)}fne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const oan=e=>e.values;We(fne,Ee,{transform(e,t){t.source||Te("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&XF(o.data)&&i.rem.push(o.data)}),this.value=s=v4({values:nt(e.keys).reduce((o,a)=>(o.key(a),o),aan()).entries(i.source)},oan),n&&s.each(o=>{o.children&&(o=dr(o.data),i.add.push(o),i.source.push(o))}),Wq(s,$t,$t)),i.source.root=s,i}});function aan(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function hm(e){Ee.call(this,null,e)}const uan=(e,t)=>e.parent===t.parent?1:2;We(hm,Ee,{transform(e,t){(!t.source||!t.source.root)&&Te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Jv(e.sort,o=>o.data)),lan(n,this.params,e),n.separation&&n.separation(e.separation!==!1?uan:yx);try{this.value=n(i)}catch(o){Te(o)}return i.each(o=>can(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function lan(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function can(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const Gq=["x","y","r","depth","children"];function dne(e){hm.call(this,e)}dne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Gq.length,default:Gq}]};We(dne,hm,{layout:e$e,params:["radius","size","padding"],fields:Gq});const Yq=["x0","y0","x1","y1","depth","children"];function hne(e){hm.call(this,e)}hne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Yq.length,default:Yq}]};We(hne,hm,{layout:PIt,params:["size","round","padding"],fields:Yq});function pne(e){Ee.call(this,null,e)}pne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};We(pne,Ee,{transform(e,t){t.source||Te("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Wq(Lhe().id(e.key).parentId(e.parentKey)(i.source),e.key,oc):Wq(Lhe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const tve={tidy:jIt,cluster:ZAt},Kq=["x","y","depth","children"];function mne(e){hm.call(this,e)}mne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Kq.length,default:Kq}]};We(mne,hm,{layout(e){const t=e||"tidy";if(Nt(tve,t))return tve[t]();Te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Kq});function gne(e){Ee.call(this,[],e)}gne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};We(gne,Ee,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[$t(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[$t(a)]&&s[$t(u)]&&i.add.push(dr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[$t(o)]=1),n.forEach(o=>{(s[$t(o.source)]||s[$t(o.target)])&&i.mod.push(o)})),i}});const nve={binary:UIt,dice:cI,slice:_4,slicedice:VIt,squarify:i$e,resquarify:HIt},Xq=["x0","y0","x1","y1","depth","children"];function yne(e){hm.call(this,e)}yne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Xq.length,default:Xq}]};We(yne,hm,{layout(){const e=zIt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Nt(nve,t)?e.tile(nve[t]):Te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Xq});const fan=Object.freeze(Object.defineProperty({__proto__:null,nest:fne,pack:dne,partition:hne,stratify:pne,tree:mne,treelinks:gne,treemap:yne},Symbol.toStringTag,{value:"Module"})),c7=4278190080;function dan(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function han(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Vg(s,o).getContext("2d"),l=Vg(s,o).getContext("2d"),c=a&&Vg(s,o).getContext("2d");n.forEach(S=>X$(u,S,!1)),X$(l,t,!1),a&&X$(c,t,!0);const f=f7(u,s,o),d=f7(l,s,o),h=a&&f7(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,b,E,w,x;for(y=0;y<o;++y)for(g=0;g<s;++g)b=y*s+g,E=f[b]&c7,x=d[b]&c7,w=a&&h[b]&c7,(E||w||x)&&(v=e(g),_=e(y),!i&&(E||x)&&p.set(v,_),a&&(E||w)&&m.set(v,_));return[p,m]}function f7(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function X$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>X$(e,s.items,n))}):yl[r].draw(e,{items:n?t.map(pan):t})}function pan(e){const t=QF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const kh=5,ga=31,wA=32,Hm=new Uint32Array(wA+1),Vc=new Uint32Array(wA+1);Vc[0]=0;Hm[0]=~Vc[0];for(let e=1;e<=wA;++e)Vc[e]=Vc[e-1]<<1|1,Hm[e]=~Vc[e];function man(e,t){const n=new Uint32Array(~~((e*t+wA)/wA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>kh]&1<<(a&ga)},set:(s,o)=>{const a=o*e+s;r(a>>>kh,1<<(a&ga))},clear:(s,o)=>{const a=o*e+s;i(a>>>kh,~(1<<(a&ga)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>kh,h=f>>>kh,d===h){if(n[d]&Hm[c&ga]&Vc[(f&ga)+1])return!0}else{if(n[d]&Hm[c&ga]||n[h]&Vc[(f&ga)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>kh,d=c>>>kh,f===d)r(f,Hm[l&ga]&Vc[(c&ga)+1]);else for(r(f,Hm[l&ga]),r(d,Vc[(c&ga)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>kh,d=c>>>kh,f===d)i(f,Vc[l&ga]|Hm[(c&ga)+1]);else for(i(f,Vc[l&ga]),i(d,Hm[(c&ga)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function gan(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>man(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function yan(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=sl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function hL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function gg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function van(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!hL(p,m,d,h,i,s)&&!gg(e,p,m,h,d,g,o,a)&&!gg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,gg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=sl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,b,E,w,x,S,P,A,O,z,D,R,N,L,V,j;for(let H=0;H<f;++H){for(v=c[H].x,b=c[H].y,_=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?b:c[H].y2,v>_&&(j=v,v=_,_=j),b>E&&(j=b,b=E,E=j),A=e(v),z=e(_),O=~~((A+z)/2),D=e(b),N=e(E),R=~~((D+N)/2),S=O;S>=A;--S)for(P=R;P>=D;--P)V=u(S,P,p,h,d),V&&([l.x,l.y,p,m]=V);for(S=O;S<=z;++S)for(P=R;P<=N;++P)V=u(S,P,p,h,d),V&&([l.x,l.y,p,m]=V);!m&&!n&&(L=Math.abs(_-v+E-b),w=(v+_)/2,x=(b+E)/2,L>=y&&!hL(w,x,h,d,i,s)&&!gg(e,w,x,d,h,d,o,null)&&(y=L,l.x=w,l.y=x,g=!0))}return m||g?(w=h/2,x=d/2,o.setRange(e(l.x-w),e(l.y-x),e(l.x+w),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const _an=[-1,-1,1,1],ban=[-1,1,-1,1];function wan(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=sl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,b,E,w,x,S,P,A,O,z,D,R;for(let N=0;N<f;++N){for(_=c[N].x,E=c[N].y,b=c[N].x2===void 0?_:c[N].x2,w=c[N].y2===void 0?E:c[N].y2,p.push([e((_+b)/2),e((E+w)/2)]);p.length;)if([P,A]=p.pop(),!(o.get(P,A)||a.get(P,A)||u.get(P,A))){u.set(P,A);for(let L=0;L<4;++L)x=P+_an[L],S=A+ban[L],u.outOfBounds(x,S,x,S)||p.push([x,S]);if(x=e.invert(P),S=e.invert(A),O=m,z=s,!hL(x,S,h,d,i,s)&&!gg(e,x,S,d,h,O,o,a)&&!gg(e,x,S,d,h,d,o,null)){for(;z-O>=1;)D=(O+z)/2,gg(e,x,S,d,h,D,o,a)?z=D:O=D;O>m&&(l.x=x,l.y=S,m=O,g=!0)}}!g&&!n&&(R=Math.abs(b-_+w-E),x=(_+b)/2,S=(E+w)/2,R>=v&&!hL(x,S,h,d,i,s)&&!gg(e,x,S,d,h,d,o,null)&&(v=R,l.x=x,l.y=S,y=!0))}return g||y?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const Ean=["right","center","left"],xan=["bottom","middle","top"];function San(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,b,E,w,x,S,P,A,O;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,m=h===0&&p===0||r[z]<0,g=h&&p?Math.SQRT1_2:1,y=r[z]<0?-1:1,v=c[1+h]+r[z]*h*g,x=c[4+p]+y*f*p/2+r[z]*p*g,b=x-f/2,E=x+f/2,S=e(v),A=e(b),O=e(E),!d)if(rve(S,S,A,O,o,a,v,v,b,E,c,m))d=sl.width(l.datum,l.datum.text);else continue;if(w=v+y*d*h/2,v=w-d/2,_=w+d/2,S=e(v),P=e(_),rve(S,P,A,O,o,a,v,_,b,E,c,m))return l.x=h?h*y<0?_:v:w,l.y=p?p*y<0?E:b:x,l.align=Ean[h*y+1],l.baseline=xan[p*y+1],o.setRange(S,A,P,O),!0}return!1}}function rve(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const d7=0,h7=4,p7=8,m7=0,g7=1,y7=2,Tan={"top-left":d7+m7,top:d7+g7,"top-right":d7+y7,left:h7+m7,middle:h7+g7,right:h7+y7,"bottom-left":p7+m7,bottom:p7+g7,"bottom-right":p7+y7},Can={naive:yan,"reduced-search":van,floodfill:wan};function Aan(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Ian(r,f),h=Oan(i,f),p=Pan(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=kan(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let b=-1,E=-1;const w=e.map(A=>{const O=v?sl.width(A,A.text):void 0;return b=Math.max(b,O),E=Math.max(E,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(A),textWidth:O}});l=l===null||l===1/0?Math.max(b,E)+Math.max(...r):l;const x=gan(t[0],t[1],l);let S;if(!_){n&&w.sort((z,D)=>n(z.datum,D.datum));let A=!1;for(let z=0;z<h.length&&!A;++z)A=h[z]===5||d[z]<0;const O=(p&&o||g)&&e.map(z=>z.datum);S=s.length||O?han(x,O||[],s,A,g):dan(x,o&&w)}const P=g?Can[c](x,S,o,u):San(x,S,h,d);return w.forEach(A=>A.opacity=+P(A)),w}function Ian(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Oan(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Tan[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Pan(e){return e&&e.mark&&e.mark.marktype}function kan(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const Qq=["x","y","opacity","align","baseline"],$7e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function vne(e){Ee.call(this,null,e)}vne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:$7e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Qq.length,default:Qq}]};We(vne,Ee,{transform(e,t){function n(s){const o=e[s];return pn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Te("Size parameter should be specified as a [width, height] array.");const i=e.as||Qq;return Aan(t.materialize(t.SOURCE).source||[],e.size,e.sort,nt(e.offset==null?1:e.offset),nt(e.anchor||$7e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const $an=Object.freeze(Object.defineProperty({__proto__:null,label:vne},Symbol.toStringTag,{value:"Module"}));function R7e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function _ne(e){Ee.call(this,null,e)}_ne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};We(_ne,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=R7e(r,e.groupby),s=(e.groupby||[]).map(Li),o=s.length,a=e.as||[Li(e.x),Li(e.y)],u=[];i.forEach(l=>{a9e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(dr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Jq={constant:wee,linear:Eee,log:r9e,exp:i9e,pow:s9e,quad:xee,poly:o9e},Ran=(e,t)=>e==="poly"?t:e==="quad"?2:1;function bne(e){Ee.call(this,null,e)}bne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Jq)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};We(bne,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=R7e(r,e.groupby),s=(e.groupby||[]).map(Li),o=e.method||"linear",a=e.order==null?3:e.order,u=Ran(o,a),l=e.as||[Li(e.x),Li(e.y)],c=Jq[o],f=[];let d=e.extent;Nt(Jq,o)||Te("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(dr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||eh(h,e.x),y=v=>{const _={};for(let b=0;b<s.length;++b)_[s[b]]=h.dims[b];_[l[0]]=v[0],_[l[1]]=v[1],f.push(dr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):i5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Nan=Object.freeze(Object.defineProperty({__proto__:null,loess:_ne,regression:bne},Symbol.toStringTag,{value:"Module"})),ive=1e-6;class p1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>ive||Math.abs(this._y1-s)>ive)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Zq{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Dan=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const b=r[m]*2,E=r[m+1]*2,w=r[m+2]*2,x=t[b],S=t[b+1],P=t[E],A=t[E+1],O=t[w],z=t[w+1],D=P-x,R=A-S,N=O-x,L=z-S,V=(D*L-R*N)*2;if(Math.abs(V)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const j=1e9*Math.sign((s-x)*L-(o-S)*N);v=(x+O)/2-j*L,_=(S+z)/2+j*N}else{const j=1/V,H=D*D+R*R,U=N*N+L*L;v=x+(L*H-R*U)*j,_=S+(D*U-N*H)*j}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new p1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new p1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new p1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Zq;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Man=2*Math.PI,$_=Math.pow;function Lan(e){return e[0]}function Fan(e){return e[1]}function Ban(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function jan(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class wne{static from(t,n=Lan,r=Fan,i){return new wne("length"in t?zan(t,n,r,i):Float64Array.from(Uan(t,n,r,i)))}constructor(t){this._delaunator=new WD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Ban(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=jan(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new WD(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Dan(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=$_(n-l[t*2],2)+$_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=$_(n-l[p*2],2)+$_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&$_(n-l[h*2],2)+$_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new p1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new p1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Man)}return r&&r.value()}renderHull(t){const n=t==null?t=new p1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Zq;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new p1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Zq;return this.renderTriangle(t,n),n.value()}}function zan(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Uan(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Ene(e){Ee.call(this,null,e)}Ene.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Van=[-1e5,-1e5,1e5,1e5];We(Ene,Ee,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Van;const s=this.value=wne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!qan(u)?Han(u):null}return t.reflow(e.modified()).modifies(n)}});function Han(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function qan(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Wan=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Ene},Symbol.toStringTag,{value:"Module"}));var v7=Math.PI/180,NT=64,Q$=2048;function Gan(){var e=[256,256],t,n,r,i,s,o,a,u=N7e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Vg()),m=Zan((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],b=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,x)=>x.size-w.size);++v<y;){var E=b[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,Yan(p,E,b,v),E.hasText&&h(m,E,g)&&(_.push(E),g?Xan(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(NT<<5)/m,p.height=Q$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=u(e),E=c()<.5?1:-1,w=-E,x,S,P;(x=b(w+=E))&&(S=~~x[0],P=~~x[1],!(Math.min(Math.abs(S),Math.abs(P))>=_));)if(m.x=y+S,m.y=v+P,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Kan(m,p,e[0]))&&(!g||Qan(m,g))){for(var A=m.sprite,O=m.width>>5,z=e[0]>>5,D=m.x-(O<<4),R=D&127,N=32-R,L=m.y1-m.y0,V=(m.y+m.y0)*z+(D>>5),j,H=0;H<L;H++){j=0;for(var U=0;U<=O;U++)p[V+U]|=j<<N|(U<O?(j=A[H*O+U])>>>R:0);V+=z}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=fy(p),f):n},f.fontStyle=function(p){return arguments.length?(i=fy(p),f):i},f.fontWeight=function(p){return arguments.length?(s=fy(p),f):s},f.rotate=function(p){return arguments.length?(o=fy(p),f):o},f.text=function(p){return arguments.length?(t=fy(p),f):t},f.spiral=function(p){return arguments.length?(u=eun[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=fy(p),f):r},f.padding=function(p){return arguments.length?(a=fy(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Yan(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(NT<<5)/s,Q$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*v7),g=Math.cos(t.rotate*v7),y=c*g,v=c*m,_=d*g,b=d*m;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=NT<<5&&(o=0,a+=u,u=0),a+d>=Q$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*v7),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(NT<<5)/s,Q$/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var P=f*p+(h>>5),A=E[(a+p)*(NT<<5)+(o+h)<<2]?1<<31-h%32:0;w[P]|=A,x|=A}x?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function Kan(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Xan(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Qan(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function N7e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Jan(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Zan(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function fy(e){return typeof e=="function"?e:function(){return e}}var eun={archimedean:N7e,rectangular:Jan};const D7e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],tun=["text","font","rotate","fontSize","fontStyle","fontWeight"];function xne(e){Ee.call(this,Gan(),e)}xne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:D7e}]};We(xne,Ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Te("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return pn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||tun.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||D7e;let a=e.fontSize||14,u;if(pn(a)?u=e.fontSizeRange:a=la(a),u){const p=a,m=or("sqrt")().domain(eh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(uc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const nun=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:xne},Symbol.toStringTag,{value:"Module"})),run=e=>new Uint8Array(e),iun=e=>new Uint16Array(e),D2=e=>new Uint32Array(e);function sun(){let e=8,t=[],n=D2(0),r=wk(0,e),i=wk(0,e);return{data:()=>t,seen:()=>n=oun(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=wk(s,e,r),i=wk(s,e))}}}function oun(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function wk(e,t,n){const r=(t<257?run:t<65537?iun:D2)(e);return n&&r.set(n),r}function sve(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function ove(){let e=D2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=D2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=aun(h,d),c)p=t,m=e,t=Array(c+f),e=D2(c+f),uun(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[gJt(u,a[0],0,l),SM(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function aun(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),bJt(e,t)}function uun(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Sne(e){Ee.call(this,sun(),e),this._indices=null,this._dims=null}Sne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};We(Sne,Ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=ove()),s.push(sve(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,b,E,w,x;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,E=0,w=v.length;E<w;++E)b[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=ove(),p[y]=m=g.insert(x,t.source,0)),o[E]=sve(g,E,i[E]).onAdd(m,u));for(E=0,w=a.data().length;E<w;++E)_[E]||(l[E]!==u[E]?f.push(E):b[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Tne(e){Ee.call(this,null,e)}Tne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};We(Tne,Ee,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const lun=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Sne,resolvefilter:Tne},Symbol.toStringTag,{value:"Module"})),cun="RawCode",hv="Literal",fun="Property",dun="Identifier",hun="ArrayExpression",pun="BinaryExpression",M7e="CallExpression",mun="ConditionalExpression",gun="LogicalExpression",yun="MemberExpression",vun="ObjectExpression",_un="UnaryExpression";function If(e){this.type=e}If.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=bun(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function bun(e){switch(e.type){case hun:return e.elements;case pun:case gun:return[e.left,e.right];case M7e:return[e.callee].concat(e.arguments);case mun:return[e.test,e.consequent,e.alternate];case yun:return[e.object,e.property];case vun:return e.properties;case fun:return[e.key,e.value];case _un:return[e.argument];case dun:case hv:case cun:default:return[]}}var vh,Ct,xe,ta,_r,C5=1,pO=2,pv=3,X0=4,A5=5,t_=6,nu=7,mO=8,wun=9;vh={};vh[C5]="Boolean";vh[pO]="<end>";vh[pv]="Identifier";vh[X0]="Keyword";vh[A5]="Null";vh[t_]="Numeric";vh[nu]="Punctuator";vh[mO]="String";vh[wun]="RegularExpression";var Eun="ArrayExpression",xun="BinaryExpression",Sun="CallExpression",Tun="ConditionalExpression",L7e="Identifier",Cun="Literal",Aun="LogicalExpression",Iun="MemberExpression",Oun="ObjectExpression",Pun="Property",kun="UnaryExpression",Hs="Unexpected token %0",$un="Unexpected number",Run="Unexpected string",Nun="Unexpected identifier",Dun="Unexpected reserved word",Mun="Unexpected end of input",eW="Invalid regular expression",_7="Invalid regular expression: missing /",F7e="Octal literals are not allowed in strict mode.",Lun="Duplicate data property in object literal not allowed in strict mode",yo="ILLEGAL",EA="Disabled.",Fun=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Bun=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function I5(e,t){if(!e)throw new Error("ASSERT: "+t)}function Hh(e){return e>=48&&e<=57}function Cne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function M2(e){return"01234567".indexOf(e)>=0}function jun(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function xA(e){return e===10||e===13||e===8232||e===8233}function gO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Fun.test(String.fromCharCode(e))}function pL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Bun.test(String.fromCharCode(e))}const zun={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function B7e(){for(;xe<ta;){const e=Ct.charCodeAt(xe);if(jun(e)||xA(e))++xe;else break}}function tW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)xe<ta&&Cne(Ct[xe])?(r=Ct[xe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ir({},Hs,yo);return String.fromCharCode(i)}function Uun(){var e,t,n,r;for(e=Ct[xe],t=0,e==="}"&&ir({},Hs,yo);xe<ta&&(e=Ct[xe++],!!Cne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ir({},Hs,yo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function j7e(){var e,t;for(e=Ct.charCodeAt(xe++),t=String.fromCharCode(e),e===92&&(Ct.charCodeAt(xe)!==117&&ir({},Hs,yo),++xe,e=tW("u"),(!e||e==="\\"||!gO(e.charCodeAt(0)))&&ir({},Hs,yo),t=e);xe<ta&&(e=Ct.charCodeAt(xe),!!pL(e));)++xe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ct.charCodeAt(xe)!==117&&ir({},Hs,yo),++xe,e=tW("u"),(!e||e==="\\"||!pL(e.charCodeAt(0)))&&ir({},Hs,yo),t+=e);return t}function Vun(){var e,t;for(e=xe++;xe<ta;){if(t=Ct.charCodeAt(xe),t===92)return xe=e,j7e();if(pL(t))++xe;else break}return Ct.slice(e,xe)}function Hun(){var e,t,n;return e=xe,t=Ct.charCodeAt(xe)===92?j7e():Vun(),t.length===1?n=pv:zun.hasOwnProperty(t)?n=X0:t==="null"?n=A5:t==="true"||t==="false"?n=C5:n=pv,{type:n,value:t,start:e,end:xe}}function b7(){var e=xe,t=Ct.charCodeAt(xe),n,r=Ct[xe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xe,{type:nu,value:String.fromCharCode(t),start:e,end:xe};default:if(n=Ct.charCodeAt(xe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xe+=2,{type:nu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:xe};case 33:case 61:return xe+=2,Ct.charCodeAt(xe)===61&&++xe,{type:nu,value:Ct.slice(e,xe),start:e,end:xe}}}if(o=Ct.substr(xe,4),o===">>>=")return xe+=4,{type:nu,value:o,start:e,end:xe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return xe+=3,{type:nu,value:s,start:e,end:xe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return xe+=2,{type:nu,value:i,start:e,end:xe};if(i==="//"&&ir({},Hs,yo),"<>=!+-*%&|^/".indexOf(r)>=0)return++xe,{type:nu,value:r,start:e,end:xe};ir({},Hs,yo)}function qun(e){let t="";for(;xe<ta&&Cne(Ct[xe]);)t+=Ct[xe++];return t.length===0&&ir({},Hs,yo),gO(Ct.charCodeAt(xe))&&ir({},Hs,yo),{type:t_,value:parseInt("0x"+t,16),start:e,end:xe}}function Wun(e){let t="0"+Ct[xe++];for(;xe<ta&&M2(Ct[xe]);)t+=Ct[xe++];return(gO(Ct.charCodeAt(xe))||Hh(Ct.charCodeAt(xe)))&&ir({},Hs,yo),{type:t_,value:parseInt(t,8),octal:!0,start:e,end:xe}}function ave(){var e,t,n;if(n=Ct[xe],I5(Hh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=xe,e="",n!=="."){if(e=Ct[xe++],n=Ct[xe],e==="0"){if(n==="x"||n==="X")return++xe,qun(t);if(M2(n))return Wun(t);n&&Hh(n.charCodeAt(0))&&ir({},Hs,yo)}for(;Hh(Ct.charCodeAt(xe));)e+=Ct[xe++];n=Ct[xe]}if(n==="."){for(e+=Ct[xe++];Hh(Ct.charCodeAt(xe));)e+=Ct[xe++];n=Ct[xe]}if(n==="e"||n==="E")if(e+=Ct[xe++],n=Ct[xe],(n==="+"||n==="-")&&(e+=Ct[xe++]),Hh(Ct.charCodeAt(xe)))for(;Hh(Ct.charCodeAt(xe));)e+=Ct[xe++];else ir({},Hs,yo);return gO(Ct.charCodeAt(xe))&&ir({},Hs,yo),{type:t_,value:parseFloat(e),start:t,end:xe}}function Gun(){var e="",t,n,r,i,s=!1;for(t=Ct[xe],I5(t==="'"||t==='"',"String literal must starts with a quote"),n=xe,++xe;xe<ta;)if(r=Ct[xe++],r===t){t="";break}else if(r==="\\")if(r=Ct[xe++],!r||!xA(r.charCodeAt(0)))switch(r){case"u":case"x":Ct[xe]==="{"?(++xe,e+=Uun()):e+=tW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:M2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),xe<ta&&M2(Ct[xe])&&(s=!0,i=i*8+"01234567".indexOf(Ct[xe++]),"0123".indexOf(r)>=0&&xe<ta&&M2(Ct[xe])&&(i=i*8+"01234567".indexOf(Ct[xe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ct[xe]===`
`&&++xe;else{if(xA(r.charCodeAt(0)))break;e+=r}return t!==""&&ir({},Hs,yo),{type:mO,value:e,octal:s,start:n,end:xe}}function Yun(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ir({},eW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ir({},eW)}try{return new RegExp(e,t)}catch{return null}}function Kun(){var e,t,n,r,i;for(e=Ct[xe],I5(e==="/","Regular expression literal must start with a slash"),t=Ct[xe++],n=!1,r=!1;xe<ta;)if(e=Ct[xe++],t+=e,e==="\\")e=Ct[xe++],xA(e.charCodeAt(0))&&ir({},_7),t+=e;else if(xA(e.charCodeAt(0)))ir({},_7);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ir({},_7),i=t.substr(1,t.length-2),{value:i,literal:t}}function Xun(){var e,t,n;for(t="",n="";xe<ta&&(e=Ct[xe],!!pL(e.charCodeAt(0)));)++xe,e==="\\"&&xe<ta?ir({},Hs,yo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ir({},eW,n),{value:n,literal:t}}function Qun(){var e,t,n,r;return _r=null,B7e(),e=xe,t=Kun(),n=Xun(),r=Yun(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xe}}function Jun(e){return e.type===pv||e.type===X0||e.type===C5||e.type===A5}function z7e(){if(B7e(),xe>=ta)return{type:pO,start:xe,end:xe};const e=Ct.charCodeAt(xe);return gO(e)?Hun():e===40||e===41||e===59?b7():e===39||e===34?Gun():e===46?Hh(Ct.charCodeAt(xe+1))?ave():b7():Hh(e)?ave():b7()}function lu(){const e=_r;return xe=e.end,_r=z7e(),xe=e.end,e}function U7e(){const e=xe;_r=z7e(),xe=e}function Zun(e){const t=new If(Eun);return t.elements=e,t}function uve(e,t,n){const r=new If(e==="||"||e==="&&"?Aun:xun);return r.operator=e,r.left=t,r.right=n,r}function eln(e,t){const n=new If(Sun);return n.callee=e,n.arguments=t,n}function tln(e,t,n){const r=new If(Tun);return r.test=e,r.consequent=t,r.alternate=n,r}function Ane(e){const t=new If(L7e);return t.name=e,t}function DT(e){const t=new If(Cun);return t.value=e.value,t.raw=Ct.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function lve(e,t,n){const r=new If(Iun);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function nln(e){const t=new If(Oun);return t.properties=e,t}function cve(e,t,n){const r=new If(Pun);return r.key=t,r.value=n,r.kind=e,r}function rln(e,t){const n=new If(kun);return n.operator=e,n.argument=t,n.prefix=!0,n}function ir(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(I5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=xe,n.description=i,n}function O5(e){e.type===pO&&ir(e,Mun),e.type===t_&&ir(e,$un),e.type===mO&&ir(e,Run),e.type===pv&&ir(e,Nun),e.type===X0&&ir(e,Dun),ir(e,Hs,e.value)}function na(e){const t=lu();(t.type!==nu||t.value!==e)&&O5(t)}function Jr(e){return _r.type===nu&&_r.value===e}function w7(e){return _r.type===X0&&_r.value===e}function iln(){const e=[];for(xe=_r.start,na("[");!Jr("]");)Jr(",")?(lu(),e.push(null)):(e.push(mv()),Jr("]")||na(","));return lu(),Zun(e)}function fve(){xe=_r.start;const e=lu();return e.type===mO||e.type===t_?(e.octal&&ir(e,F7e),DT(e)):Ane(e.value)}function sln(){var e,t,n,r;if(xe=_r.start,e=_r,e.type===pv)return n=fve(),na(":"),r=mv(),cve("init",n,r);if(e.type===pO||e.type===nu)O5(e);else return t=fve(),na(":"),r=mv(),cve("init",t,r)}function oln(){var e=[],t,n,r,i={},s=String;for(xe=_r.start,na("{");!Jr("}");)t=sln(),t.key.type===L7e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ir({},Lun):i[r]=!0,e.push(t),Jr("}")||na(",");return na("}"),nln(e)}function aln(){na("(");const e=Ine();return na(")"),e}const uln={if:1};function lln(){var e,t,n;if(Jr("("))return aln();if(Jr("["))return iln();if(Jr("{"))return oln();if(e=_r.type,xe=_r.start,e===pv||uln[_r.value])n=Ane(lu().value);else if(e===mO||e===t_)_r.octal&&ir(_r,F7e),n=DT(lu());else{if(e===X0)throw new Error(EA);e===C5?(t=lu(),t.value=t.value==="true",n=DT(t)):e===A5?(t=lu(),t.value=null,n=DT(t)):Jr("/")||Jr("/=")?(n=DT(Qun()),U7e()):O5(lu())}return n}function cln(){const e=[];if(na("("),!Jr(")"))for(;xe<ta&&(e.push(mv()),!Jr(")"));)na(",");return na(")"),e}function fln(){xe=_r.start;const e=lu();return Jun(e)||O5(e),Ane(e.value)}function dln(){return na("."),fln()}function hln(){na("[");const e=Ine();return na("]"),e}function pln(){var e,t,n;for(e=lln();;)if(Jr("."))n=dln(),e=lve(".",e,n);else if(Jr("("))t=cln(),e=eln(e,t);else if(Jr("["))n=hln(),e=lve("[",e,n);else break;return e}function dve(){const e=pln();if(_r.type===nu&&(Jr("++")||Jr("--")))throw new Error(EA);return e}function J$(){var e,t;if(_r.type!==nu&&_r.type!==X0)t=dve();else{if(Jr("++")||Jr("--"))throw new Error(EA);if(Jr("+")||Jr("-")||Jr("~")||Jr("!"))e=lu(),t=J$(),t=rln(e.value,t);else{if(w7("delete")||w7("void")||w7("typeof"))throw new Error(EA);t=dve()}}return t}function hve(e){let t=0;if(e.type!==nu&&e.type!==X0)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function mln(){var e,t,n,r,i,s,o,a,u,l;if(e=_r,u=J$(),r=_r,i=hve(r),i===0)return u;for(r.prec=i,lu(),t=[e,_r],o=J$(),s=[u,r,o];(i=hve(_r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=uve(a,u,o),s.push(n);r=lu(),r.prec=i,s.push(r),t.push(_r),n=J$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=uve(s[l-1].value,s[l-2],n),l-=2;return n}function mv(){var e,t,n;return e=mln(),Jr("?")&&(lu(),t=mv(),na(":"),n=mv(),e=tln(e,t,n)),e}function Ine(){const e=mv();if(Jr(","))throw new Error(EA);return e}function One(e){Ct=e,xe=0,ta=Ct.length,_r=null,U7e();const t=Ine();if(_r.type!==pO)throw new Error("Unexpect token after expression.");return t}var V7e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function H7e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Te("Missing arguments to clamp function."),o.length>3&&Te("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Te("Missing arguments to if function."),o.length>3&&Te("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function gln(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function q7e(e){e=e||{};const t=e.allowed?yf(e.allowed):{},n=e.forbidden?yf(e.forbidden):{},r=e.constants||V7e,i=(e.functions||H7e)(f),s=e.globalvar,o=e.fieldvar,a=pn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(rt(p))return p;const m=d[p.type];return m==null&&Te("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Nt(n,m)?Te("Illegal identifier: "+m):Nt(r,m)?r[m]:Nt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[gln(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Te("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Nt(i,m)&&i[m];return y||Te("Unrecognized function: "+m),pn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const pve=Symbol("vega_selection_getter");function W7e(e){return(!e.getter||!e.getter[pve])&&(e.getter=sc(e.field),e.getter[pve]=!0),e.getter}const Pne="intersect",mve="union",yln="vlMulti",vln="vlPoint",gve="or",_ln="and",nd="_vgsid_",SA=sc(nd),bln="E",wln="R",Eln="R-E",xln="R-LE",Sln="R-RE",mL="index:unit";function yve(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=W7e(a)(e),jg(o)&&(o=Yo(o)),jg(r[s])&&(r[s]=Yo(r[s])),Ie(r[s])&&jg(r[s][0])&&(r[s]=r[s].map(Yo)),a.type===bln){if(Ie(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===wln){if(!wb(o,r[s]))return!1}else if(a.type===Sln){if(!wb(o,r[s],!0,!1))return!1}else if(a.type===Eln){if(!wb(o,r[s],!1,!1))return!1}else if(a.type===xln&&!wb(o,r[s],!1,!0))return!1;return!0}function Tln(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[mL]&&r[mL].value:void 0,o=n===Pne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=yve(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=yve(t,l),o^h)return h;return a&&o}const G7e=QI(SA),Cln=G7e.left,Aln=G7e.right;function Iln(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[mL]&&r[mL].value:void 0,o=n===Pne,a=SA(t),u=Cln(i,a);if(u===i.length||SA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Aln(i,a)-u<s.size)return!1}return!0}function Oln(e,t){return e.map(n=>hn(t.fields?{values:t.fields.map(r=>W7e(r)(n.datum))}:{[nd]:SA(n.datum)},t))}function Pln(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,b=0,E,w;b<_;++b)if(l=s[b],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,w=c.length;E<w;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=E7[`${y}_union`],m[d]=v(g,nt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(nt(f).reduce((x,S,P)=>(x[c[P].field]=S,x),{})))}else h=nd,p=SA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[nd]:p}));if(t=t||mve,o[nd]?o[nd]=E7[`${nd}_${t}`](...Object.values(o[nd])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(S=>o[x][S]).reduce((S,P)=>S===void 0?P:E7[`${u[x]}_${t}`](S,P))}),s=Object.keys(a),n&&s.length){const x=r?vln:yln;o[x]=t===mve?{[gve]:s.reduce((S,P)=>(S.push(...a[P]),S),[])}:{[_ln]:s.map(S=>({[gve]:a[S]}))}}return o}var E7={[`${nd}_union`]:OJt,[`${nd}_intersect`]:AJt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Yo(t[0]),r=Yo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Yo(t[0]),r=Yo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const kln=":",$ln="@";function kne(e,t,n,r){t[0].type!==hv&&Te("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Un(t).value,o="unit",a=$ln+o,u=kln+i;s===Pne&&!Nt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Nt(r,u)||(r[u]=n.getData(i).tuplesRef())}function Y7e(e){const t=this.context.data[e];return t?t.values.value:[]}function Rln(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Nln(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(oc).insert(t)),1}function Dln(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const yO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Mln=yO("format"),K7e=yO("timeFormat"),Lln=yO("utcFormat"),Fln=yO("timeParse"),Bln=yO("utcParse"),Ek=new Date(2e3,0,1);function P5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Ek.setYear(2e3),Ek.setMonth(e),Ek.setDate(t),K7e.call(this,Ek,n))}function jln(e){return P5.call(this,e,1,"%B")}function zln(e){return P5.call(this,e,1,"%b")}function Uln(e){return P5.call(this,0,2+e,"%A")}function Vln(e){return P5.call(this,0,2+e,"%a")}const Hln=":",qln="@",nW="%",X7e="$";function $ne(e,t,n,r){t[0].type!==hv&&Te("First argument to data functions must be a string literal.");const i=t[0].value,s=Hln+i;if(!Nt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Wln(e,t,n,r){t[0].type!==hv&&Te("First argument to indata must be a string literal."),t[1].type!==hv&&Te("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=qln+s;Nt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Oa(e,t,n,r){if(t[0].type===hv)vve(n,r,t[0].value);else for(e in n.scales)vve(n,r,e)}function vve(e,t,n){const r=nW+n;if(!Nt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function _h(e,t){if(pn(e))return e;if(rt(e)){const n=t.scales[e];return n&&etn(n.value)?n.value:void 0}}function Gln(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Oa,n._range=Oa,n._scale=Oa;const r=i=>"_["+(i.type===hv?Xe(nW+i.value):Xe(nW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Rne(e,t){return function(n,r,i){if(n){const s=_h(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Yln=Rne("area",gsn),Kln=Rne("bounds",bsn),Xln=Rne("centroid",Csn);function Qln(e,t){const n=_h(e,(t||this).context);return n&&n.scale()}function Jln(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Nne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Zln(){return Nne(this.context.dataflow,"warn",arguments)}function ecn(){return Nne(this.context.dataflow,"info",arguments)}function tcn(){return Nne(this.context.dataflow,"debug",arguments)}function x7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function rW(e){const t=e0(e),n=x7(t.r),r=x7(t.g),i=x7(t.b);return .2126*n+.7152*r+.0722*i}function ncn(e,t){const n=rW(e),r=rW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function rcn(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function Q7e(e,t){return e===t||e!==e&&t!==t?!0:Ie(e)?Ie(t)&&e.length===t.length?icn(e,t):!1:ot(e)&&ot(t)?J7e(e,t):!1}function icn(e,t){for(let n=0,r=e.length;n<r;++n)if(!Q7e(e[n],t[n]))return!1;return!0}function J7e(e,t){for(const n in e)if(!Q7e(e[n],t[n]))return!1;return!0}function _ve(e){return t=>J7e(e,t)}function scn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?oc:Ie(n)||XF(n)?n:_ve(n),c.remove(f)),t&&c.insert(t),r&&(f=_ve(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function ocn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function acn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const bve={};function ucn(e,t){const n=bve[t]||(bve[t]=sc(t));return Ie(e)?e.map(n):n(e)}function Dne(e){return Ie(e)||ArrayBuffer.isView(e)?e:null}function Mne(e){return Dne(e)||(rt(e)?e:null)}function lcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dne(e).join(...n)}function ccn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).indexOf(...n)}function fcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).lastIndexOf(...n)}function dcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).slice(...n)}function hcn(e,t,n){return pn(n)&&Te("Function argument passed to replace."),String(e).replace(t,n)}function pcn(e){return Dne(e).slice().reverse()}function mcn(e,t,n){return Kee(e||0,t||0,n||0)}function gcn(e,t){const n=_h(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function ycn(e,t){const n=_h(e,(t||this).context);return n?n.copy():void 0}function vcn(e,t){const n=_h(e,(t||this).context);return n?n.domain():[]}function _cn(e,t,n){const r=_h(e,(n||this).context);return r?Ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function bcn(e,t){const n=_h(e,(t||this).context);return n&&n.range?n.range():[]}function wcn(e,t,n){const r=_h(e,(n||this).context);return r?r(t):void 0}function Ecn(e,t,n,r,i){e=_h(e,(i||this).context);const s=iBe(t,n);let o=e.domain(),a=o[0],u=Un(o),l=ua;return u-a?l=W9e(e,a,u):e=(e.interpolator?or("sequential")().interpolator(e.interpolator()):or("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Un(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function xcn(e,t,n){const r=_h(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Scn(e){let t=null;return function(n){return n?pA(n,t=t||oE(e)):e}}const Z7e=e=>e.data;function eze(e,t){const n=Y7e.call(t,e);return n.root&&n.root.lookup||{}}function Tcn(e,t,n){const r=eze(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(Z7e):void 0}function Ccn(e,t){const n=eze(e,this)[t];return n?n.ancestors().map(Z7e):void 0}const tze=()=>typeof window<"u"&&window||null;function Acn(){const e=tze();return e?e.screen:{}}function Icn(){const e=tze();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Ocn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function nze(e,t,n){if(!e)return[];const[r,i]=e,s=new ls().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return QBe(o,s,Pcn(t))}function Pcn(e){let t=null;if(e){const n=nt(e.marktype),r=nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function kcn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function $cn(e){return nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Rcn(e,t,n){const{x:r,y:i,mark:s}=n,o=new ls().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),nze([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Ncn(u.x,u.y,t))}function Ncn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const TA={random(){return uc()},cumulativeNormal:t5,cumulativeLogNormal:mee,cumulativeUniform:_ee,densityNormal:cee,densityLogNormal:pee,densityUniform:vee,quantileNormal:n5,quantileLogNormal:gee,quantileUniform:bee,sampleNormal:e5,sampleLogNormal:hee,sampleUniform:yee,isArray:Ie,isBoolean:K0,isDate:jg,isDefined(e){return e!==void 0},isNumber:Jn,isObject:ot,isRegExp:K5e,isString:rt,isTuple:XF,isValid(e){return e!=null&&e===e},toBoolean:YZ,toDate(e){return KZ(e)},toNumber:Yo,toString:XZ,indexof:ccn,join:lcn,lastindexof:fcn,replace:hcn,reverse:pcn,slice:dcn,flush:G5e,lerp:X5e,merge:rcn,pad:Z5e,peek:Un,pluck:ucn,span:XI,inrange:wb,truncate:e8e,rgb:e0,lab:UD,hcl:VD,hsl:jD,luminance:rW,contrast:ncn,sequence:Qv,format:Mln,utcFormat:Lln,utcParse:Bln,utcOffset:w8e,utcSequence:S8e,timeFormat:K7e,timeParse:Fln,timeOffset:b8e,timeSequence:x8e,timeUnitSpecifier:l8e,monthFormat:jln,monthAbbrevFormat:zln,dayFormat:Uln,dayAbbrevFormat:Vln,quarter:V5e,utcquarter:H5e,week:f8e,utcweek:p8e,dayofyear:c8e,utcdayofyear:h8e,warn:Zln,info:ecn,debug:tcn,extent(e){return eh(e)},inScope:Jln,intersect:nze,clampRange:q5e,pinchDistance:ocn,pinchAngle:acn,screen:Acn,containerSize:Ocn,windowSize:Icn,bandspace:mcn,setdata:Nln,pathShape:Scn,panLinear:B5e,panLog:j5e,panPow:z5e,panSymlog:U5e,zoomLinear:UZ,zoomLog:VZ,zoomPow:xM,zoomSymlog:HZ,encode:Dln,modify:scn,lassoAppend:kcn,lassoPath:$cn,intersectLasso:Rcn},Dcn=["view","item","group","xy","x","y"],Mcn="event.vega.",rze="this.",Lne={},ize={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Xe(X7e+e)}]`,functions:Lcn,constants:V7e,visitors:Lne},iW=q7e(ize);function Lcn(e){const t=H7e(e);Dcn.forEach(n=>t[n]=Mcn+n);for(const n in TA)t[n]=rze+n;return hn(t,Gln(e,TA,Lne)),t}function Xi(e,t,n){return arguments.length===1?TA[e]:(TA[e]=t,n&&(Lne[e]=n),iW&&(iW.functions[e]=rze+e),this)}Xi("bandwidth",gcn,Oa);Xi("copy",ycn,Oa);Xi("domain",vcn,Oa);Xi("range",bcn,Oa);Xi("invert",_cn,Oa);Xi("scale",wcn,Oa);Xi("gradient",Ecn,Oa);Xi("geoArea",Yln,Oa);Xi("geoBounds",Kln,Oa);Xi("geoCentroid",Xln,Oa);Xi("geoShape",xcn,Oa);Xi("geoScale",Qln,Oa);Xi("indata",Rln,Wln);Xi("data",Y7e,$ne);Xi("treePath",Tcn,$ne);Xi("treeAncestors",Ccn,$ne);Xi("vlSelectionTest",Tln,kne);Xi("vlSelectionIdTest",Iln,kne);Xi("vlSelectionResolve",Pln,kne);Xi("vlSelectionTuples",Oln);function rh(e,t){const n={};let r;try{e=rt(e)?e:Xe(e)+"",r=One(e)}catch{Te("Expression parse error: "+e)}r.visit(s=>{if(s.type!==M7e)return;const o=s.callee.name,a=ize.visitors[o];a&&a(o,s.arguments,t,n)});const i=iW(r);return i.globals.forEach(s=>{const o=X7e+s;!Nt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Fcn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Bcn=yf(["rule"]),wve=yf(["group","image","rect"]);function jcn(e,t){let n="";return Bcn[t]||(e.x2&&(e.x?(wve[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(wve[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Fne(e){return(e+"").toLowerCase()}function zcn(e){return Fne(e)==="operator"}function Ucn(e){return Fne(e)==="collect"}function LS(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Vcn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Hcn={operator:(e,t)=>LS(e,["_"],t.code),parameter:(e,t)=>LS(e,["datum","_"],t.code),event:(e,t)=>LS(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return LS(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Xe(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=jcn(r,n),i+="return m;",LS(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Xe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Vcn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function qcn(e){const t=this;zcn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Wcn(e){const t=this;if(e.params){const n=t.get(e.id);n||Te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Gcn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ie(i)?i.map(s=>Eve(s,n,t)):Eve(i,n,t)}return t}function Eve(e,t,n){if(!e||!ot(e))return e;for(let r=0,i=xve.length,s;r<i;++r)if(s=xve[r],Nt(e,s.key))return s.parse(e,t,n);return e}var xve=[{key:"$ref",parse:Ycn},{key:"$key",parse:Xcn},{key:"$expr",parse:Kcn},{key:"$field",parse:Qcn},{key:"$encode",parse:Zcn},{key:"$compare",parse:Jcn},{key:"$context",parse:efn},{key:"$subflow",parse:tfn},{key:"$tupleid",parse:nfn}];function Ycn(e,t){return t.get(e.$ref)||Te("Operator not defined: "+e.$ref)}function Kcn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Du(t.parameterExpression(e.$expr),e.$fields))}function Xcn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=GZ(e.$key,e.$flat,t.expr.codegen))}function Qcn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=sc(e.$field,e.$name,t.expr.codegen))}function Jcn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=nt(e.$compare).map(i=>i&&i.$tupleid?$t:i);return t.fn[n]||(t.fn[n]=qZ(r,e.$order,t.expr.codegen))}function Zcn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Du(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function efn(e,t){return t}function tfn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function nfn(){return $t}function rfn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function ifn(e){var t=this,n=ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Te("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const sfn={skip:!0};function ofn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function afn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],sfn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(oc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function sze(e,t,n,r){return new oze(e,t,n,r)}function oze(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Hcn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Sve(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}oze.prototype=Sve.prototype={fork(){const e=new Sve(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Ucn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Fne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Fcn,parseOperator:qcn,parseOperatorParameters:Wcn,parseParameters:Gcn,parseStream:rfn,parseUpdate:ifn,getState:ofn,setState:afn};function ufn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),aze(t,e.description()))}function aze(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function lfn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const S7="default";function cfn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:S7,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?rt(i)?i:i.user:S7,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return rt(r)||(i=r.item,r=r.user),sW(e,r&&r!==S7?r:i||r),i},{cursor:t})}function sW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function gL(e,t){var n=e._runtime.data;return Nt(n,t)||Te("Unrecognized data set: "+t),n[t]}function ffn(e,t){return arguments.length<2?gL(this,e).values.value:k5.call(this,e,Zv().remove(oc).insert(t))}function k5(e,t){H8e(t)||Te("Second argument to changes must be a changeset.");const n=gL(this,e);return n.modified=!0,this.pulse(n.input,t)}function dfn(e,t){return k5.call(this,e,Zv().insert(t))}function hfn(e,t){return k5.call(this,e,Zv().remove(t))}function uze(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function lze(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function $5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function pfn(e){var t=$5(e),n=uze(e),r=lze(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function mfn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=$5(e),o=t.changedTouches?t.changedTouches[0]:t,s=_5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=gfn(e,n,s),t}function gfn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;rt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:la(e),item:la(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Tve="view",yfn="timer",vfn="window",_fn={trap:!1};function bfn(e){const t=hn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ie(r[s])&&(r[s]=yf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function cze(e,t,n,r){e._eventListeners.push({type:n,sources:nt(t),handler:r})}function wfn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function xk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Efn(e,t,n){var r=this,i=new ZF(n),s=function(l,c){r.runAsync(null,()=>{e===Tve&&wfn(r,t)&&l.preventDefault(),i.receive(mfn(r,l,c))})},o;if(e===yfn)xk(r,"timer",t)&&r.timer(s,t);else if(e===Tve)xk(r,"view",t)&&r.addEventListener(t,s,_fn);else if(e===vfn?xk(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&xk(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);cze(r,o,t,s)}return i}function Cve(e){return e.item}function Ave(e){return e.item.mark.source}function Ive(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function xfn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Cve),Ave,Ive(e)),this.on(this.events("view","pointerout",Cve),Ave,Ive(t)),this}function Sfn(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function ol(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Tfn="vega-bind",Cfn="vega-bind-name",Afn="vega-bind-radio";function Ifn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=WZ(r.debounce,i.update))),(r.input==null&&r.element?Ofn:kfn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Ofn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),cze(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Pfn(i))}}function Pfn(e){return typeof Event<"u"?new Event(e):{type:e}}function kfn(e,t,n,r){const i=r.signal(n.signal),s=ol("div",{class:Tfn}),o=n.input==="radio"?s:s.appendChild(ol("label"));o.appendChild(ol("span",{class:Cfn},n.name||n.signal)),t.appendChild(s);let a=$fn;switch(n.input){case"checkbox":a=Rfn;break;case"select":a=Nfn;break;case"radio":a=Dfn;break;case"range":a=Mfn;break}a(e,o,n,i)}function $fn(e,t,n,r){const i=ol("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Rfn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=ol("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Nfn(e,t,n,r){const i=ol("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};yL(o,r)&&(u.selected=!0),i.appendChild(ol("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(yL(n.options[a],o)){i.selectedIndex=a;return}}}function Dfn(e,t,n,r){const i=ol("span",{class:Afn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};yL(o,r)&&(u.checked=!0);const l=ol("input",u);l.addEventListener("change",()=>e.update(o));const c=ol("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)yL(a[l].value,o)&&(a[l].checked=!0)}}function Mfn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||cA(s,i,100),a=ol("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=ol("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function yL(e,t){return e===t||e+""==t+""}function fze(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,uze(e),lze(e),$5(e),i,s).background(e.background())}function Bne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Lfn(e,t,n,r){const i=new r(e.loader(),Bne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,$5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ffn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=w5(r);e=n._el=e?T7(n,e,!0):null,ufn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||w0,a=e?s.renderer:s.headless;return n._renderer=a?fze(n,n._renderer,e,a):null,n._handler=Lfn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=T7(n,t,!0):e.appendChild(ol("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=T7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Ifn(n,u.element||t,u)})),n}function T7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const FS=e=>+e||0,Bfn=e=>({top:e,bottom:e,left:e,right:e});function Ove(e){return ot(e)?{top:FS(e.top),bottom:FS(e.bottom),left:FS(e.left),right:FS(e.right)}:Bfn(FS(e))}async function jne(e,t,n,r){const i=w5(t),s=i&&i.headless;return s||Te("Unrecognized renderer type: "+t),await e.runAsync(),fze(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function jfn(e,t){e!==hg.Canvas&&e!==hg.SVG&&e!==hg.PNG&&Te("Unrecognized image type: "+e);const n=await jne(this,e,t);return e===hg.SVG?zfn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function zfn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Ufn(e,t){return(await jne(this,hg.Canvas,e,t)).canvas()}async function Vfn(e){return(await jne(this,hg.SVG,e)).svg()}function Hfn(e,t,n){return sze(e,nE,TA,n).parse(t)}function qfn(e){var t=this._runtime.scales;return Nt(t,e)||Te("Unrecognized scale or projection: "+e),t[e].value}var dze="width",hze="height",zne="padding",Pve={skip:!0};function pze(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===zne?r.left+r.right:0)}function mze(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===zne?r.top+r.bottom:0)}function Wfn(e){var t=e._signals,n=t[dze],r=t[hze],i=t[zne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=pze(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=mze(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Gfn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(dze,n,Pve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(hze,r,Pve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Yfn(e){return this._runtime.getState(e||{data:Kfn,signals:Xfn,recurse:!0})}function Kfn(e,t){return t.modified&&Ie(t.input.value)&&!e.startsWith("_:vega:_")}function Xfn(e,t){return!(e==="parent"||t instanceof nE.proxy)}function Qfn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Jfn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(g2t(n,t))}function Zfn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",edn(r))}function edn(e){return e==null?"":Ie(e)?gze(e):ot(e)&&!jg(e)?tdn(e):e+""}function tdn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ie(n)?gze(n):yze(n))}).join(`
`)}function gze(e){return"["+e.map(yze).join(", ")+"]"}function yze(e){return Ie(e)?"[]":ot(e)&&!jg(e)?"{}":e}function ndn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function vze(e,t){const n=this;if(t=t||{},nw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hn({},e.locale,t.locale);n.locale(N8e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||hg.Canvas,n._scenegraph=new Tte;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Zfn,n._redraw=!0,n._handler=new w0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=bfn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Hfn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=pze(n,n._width),n._viewHeight=mze(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Wfn(n),lfn(n),cfn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Sk(e,t){return Nt(e._signals,t)?e._signals[t]:Te("Unrecognized signal name: "+Xe(t))}function _ze(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function kve(e,t,n,r){let i=_ze(n,r);return i||(i=Bne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function $ve(e,t,n){const r=_ze(t,n);return r&&t._targets.remove(r),e}We(vze,nw,{async evaluate(e,t,n){if(await nw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,pfn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&B$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&aze(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Sk(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Ove(e)):Ove(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(w5(e)||Te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(nw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Sk(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Gfn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Bne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return kve(this,e,Sk(this,e),t)},removeSignalListener(e,t){return $ve(this,Sk(this,e),t)},addDataListener(e,t){return kve(this,e,gL(this,e).values,t)},removeDataListener(e,t){return $ve(this,gL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=sW(this,null);this._globalCursor=!!e,t&&sW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Jfn,events:Efn,finalize:Sfn,hover:xfn,data:ffn,change:k5,insert:dfn,remove:hfn,scale:qfn,initialize:Ffn,toImageURL:jfn,toCanvas:Ufn,toSVG:Vfn,getState:Yfn,setState:Qfn,_watchPixelRatio:ndn});const rdn="view",vL="[",_L="]",bze="{",wze="}",idn=":",Eze=",",sdn="@",odn=">",adn=/[[\]{}]/,udn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let xze,Sze;function Q0(e,t,n){return xze=t||rdn,Sze=n||udn,Tze(e.trim()).map(oW)}function ldn(e){return Sze[e]}function L2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Tze(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=L2(e,i,Eze,vL+bze,_L+wze),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function oW(e){return e[0]==="["?cdn(e):fdn(e)}function cdn(e){const t=e.length;let n=1,r;if(n=L2(e,n,_L,vL,_L),n===t)throw"Empty between selector: "+e;if(r=Tze(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==odn)throw"Expected '>' after between selector: "+e;r=r.map(oW);const i=oW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function fdn(e){const t={source:xze},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===wze){if(a=e.lastIndexOf(bze),a>=0){try{r=ddn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===sdn&&(i=++a),u=L2(e,a,idn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=L2(e,a,vL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=L2(e,a,_L),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==vL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||adn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):ldn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function ddn(e){const t=e.split(Eze);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function hdn(e){return ot(e)?e:{type:e||"pad"}}const BS=e=>+e||0,pdn=e=>({top:e,bottom:e,left:e,right:e});function mdn(e){return ot(e)?e.signal?e:{top:BS(e.top),bottom:BS(e.bottom),left:BS(e.left),right:BS(e.right)}:pdn(BS(e))}const qs=e=>ot(e)&&!Ie(e)?hn({},e):{value:e};function Rve(e,t,n,r){return n!=null?(ot(n)&&!Ie(n)||Ie(n)&&n.length&&ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function To(e,t,n){for(const r in t)Rve(e,r,t[r]);for(const r in n)Rve(e,r,n[r],"update")}function Ax(e,t,n){for(const r in t)n&&Nt(n,r)||(e[r]=hn(e[r]||{},t[r]));return e}function X_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Une="mark",Vne="frame",Hne="scope",gdn="axis",ydn="axis-domain",vdn="axis-grid",_dn="axis-label",bdn="axis-tick",wdn="axis-title",Edn="legend",xdn="legend-band",Sdn="legend-entry",Tdn="legend-gradient",Cze="legend-label",Cdn="legend-symbol",Adn="legend-title",Idn="title",Odn="title-text",Pdn="title-subtitle";function kdn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!X_(u,e)&&C7(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Vne?i.group:n===Une?hn({},i.mark,i[t]):null;for(u in c)l=X_(u,e)||(u==="fill"||u==="stroke")&&(X_("fill",e)||X_("stroke",e)),l||C7(s,u,c[u]);nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)X_(h,e)||C7(s,h,d[h])}),e=hn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=hn(o,e.enter),a&&(e.update=hn(a,e.update)),e}function C7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Aze=e=>rt(e)?Xe(e):e.signal?`(${e.signal})`:Ize(e);function R5(e){if(e.gradient!=null)return Rdn(e);let t=e.signal?`(${e.signal})`:e.color?$dn(e.color):e.field!=null?Ize(e.field):e.value!==void 0?Xe(e.value):void 0;return e.scale!=null&&(t=Ndn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Z$(e.exponent)})`),e.mult!=null&&(t+=`*${Z$(e.mult)}`),e.offset!=null&&(t+=`+${Z$(e.offset)}`),e.round&&(t=`round(${t})`),t}const Tk=(e,t,n,r)=>`(${e}(${[t,n,r].map(R5).join(",")})+'')`;function $dn(e){return e.c?Tk("hcl",e.h,e.c,e.l):e.h||e.s?Tk("hsl",e.h,e.s,e.l):e.l||e.a?Tk("lab",e.l,e.a,e.b):e.r||e.g||e.b?Tk("rgb",e.r,e.g,e.b):null}function Rdn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Xe(n));for(;t.length&&Un(t)==null;)t.pop();return t.unshift(Aze(e.gradient)),`gradient(${t.join(",")})`}function Z$(e){return ot(e)?"("+R5(e)+")":e}function Ize(e){return Oze(ot(e)?e:{datum:e})}function Oze(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Te("Invalid field reference: "+Xe(e));return e.signal||(r=rt(r)?mh(r).map(Xe).join("]["):Oze(r)),t+"["+r+"]"}function Ndn(e,t){const n=Aze(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Z$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Ddn(e){let t="";return e.forEach(n=>{const r=R5(n);t+=n.test?`(${n.test})?${r}:`:r}),Un(t)===":"&&(t+="null"),t}function Pze(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=kdn(e,t,n,r,i.config);for(const a in e)o[a]=Mdn(e[a],t,s,i);return s}function Mdn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Fdn(Ldn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Ldn(e){return Ie(e)?Ddn(e):R5(e)}function Fdn(e,t,n,r){const i=rh(e,t);return i.$fields.forEach(s=>r[s]=1),hn(n,i.$params),i.$expr}const Bdn="outer",jdn=["value","update","init","react","bind"];function Nve(e,t){Te(e+' for "outer" push: '+Xe(t))}function kze(e,t){const n=e.name;if(e.push===Bdn)t.signals[n]||Nve("No prior signal definition",n),jdn.forEach(r=>{e[r]!==void 0&&Nve("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function aW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function N5(e,t,n,r){return new aW(e,t,n,r)}function bL(e,t){return N5("operator",e,t)}function kt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function CA(e,t){return t?{$field:e,$name:t}:{$field:e}}const uW=CA("key");function Dve(e,t){return{$compare:e,$order:t}}function zdn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Udn="ascending",Vdn="descending";function Hdn(e){return ot(e)?(e.order===Vdn?"-":"+")+D5(e.op,e.field):""}function D5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const qne="scope",lW="view";function Cs(e){return e&&e.signal}function qdn(e){return e&&e.expr}function eR(e){if(Cs(e))return!0;if(ot(e)){for(const t in e)if(eR(e[t]))return!0}return!1}function jc(e,t){return e??t}function R1(e){return e&&e.signal||e}const Mve="timer";function AA(e,t){return(e.merge?Gdn:e.stream?Ydn:e.type?Kdn:Te("Invalid stream specification: "+Xe(e)))(e,t)}function Wdn(e){return e===qne?lW:e||lW}function Gdn(e,t){const n=e.merge.map(i=>AA(i,t)),r=Wne({merge:n},e,t);return t.addStream(r).id}function Ydn(e,t){const n=AA(e.stream,t),r=Wne({stream:n},e,t);return t.addStream(r).id}function Kdn(e,t){let n;e.type===Mve?(n=t.event(Mve,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Wdn(e.source),e.type);const r=Wne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Wne(e,t,n){let r=t.between;return r&&(r.length!==2&&Te('Stream "between" parameter must have 2 entries: '+Xe(t)),e.between=[AA(r[0],n),AA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Xdn(t.marktype,t.markname,t.markrole)),t.source===qne&&r.push("inScope(event.item)"),r.length&&(e.filter=rh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Xdn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Qdn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Jdn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Te("Signal update missing events specification."),rt(s)&&(s=Q0(s,t.isSubscope()?qne:lW)),s=nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[ehn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Te("Signal encode and update are mutually exclusive."),o="encode(item(),"+Xe(r)+")"),i.update=rt(o)?rh(o,t):o.expr!=null?rh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Qdn,$params:{$value:t.signalRef(o.signal)}}:Te("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(hn(Zdn(u,t),i)))}function Zdn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):AA(e,t)}}function ehn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function thn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Te("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=rh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Jdn(i,t,n.id))}const $r=e=>(t,n,r)=>N5(e,n,t||void 0,r),$ze=$r("aggregate"),nhn=$r("axisticks"),Rze=$r("bound"),Of=$r("collect"),Lve=$r("compare"),rhn=$r("datajoin"),Nze=$r("encode"),ihn=$r("expression"),shn=$r("facet"),ohn=$r("field"),ahn=$r("key"),uhn=$r("legendentries"),lhn=$r("load"),chn=$r("mark"),fhn=$r("multiextent"),dhn=$r("multivalues"),hhn=$r("overlap"),phn=$r("params"),Dze=$r("prefacet"),mhn=$r("projection"),ghn=$r("proxy"),yhn=$r("relay"),Mze=$r("render"),vhn=$r("scale"),n_=$r("sieve"),_hn=$r("sortitems"),Lze=$r("viewlayout"),bhn=$r("values");let whn=0;const Fze={min:"min",max:"max",count:"sum"};function Ehn(e,t){const n=e.type||"linear";j9e(n)||Te("Unrecognized scale type: "+Xe(n)),t.addScale(e.name,{type:n,domain:void 0})}function xhn(e,t){const n=t.getScale(e.name).params;let r;n.domain=Bze(e.domain,e,t),e.range!=null&&(n.range=zze(e,t,n)),e.interpolate!=null&&Rhn(e.interpolate,n),e.nice!=null&&(n.nice=$hn(e.nice,t)),e.bins!=null&&(n.bins=khn(e.bins,t));for(r in e)Nt(n,r)||r==="name"||(n[r]=Kl(e[r],t))}function Kl(e,t){return ot(e)?e.signal?t.signalRef(e.signal):Te("Unsupported object: "+Xe(e)):e}function tR(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Kl(n,t))}function M5(e){Te("Can not find data set: "+Xe(e))}function Bze(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ie(e)?Shn:e.fields?Chn:Thn)(e,t,n)}function Shn(e,t,n){return e.map(r=>Kl(r,n))}function Thn(e,t,n){const r=n.getData(e.data);return r||M5(e.data),sE(t.type)?r.valuesRef(n,e.field,jze(e.sort,!1)):V9e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Chn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=rt(o)?{data:r,field:o}:Ie(o)||o.signal?Ahn(o,n):o,s.push(o),s),[]);return(sE(t.type)?Ihn:V9e(t.type)?Ohn:Phn)(e,n,i)}function Ahn(e,t){const n="_:vega:_"+whn++,r=Of({});if(Ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Xe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,n_({})]),{data:n,field:"data"}}function Ihn(e,t,n){const r=jze(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||M5(l.data),c.countsRef(t,l.field,r)}),a={groupby:uW,pulse:o};r&&(i=r.op||"count",s=r.field?D5(i,r.field):"count",a.ops=[Fze[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add($ze(a));const u=t.add(Of({pulse:kt(i)}));return s=t.add(bhn({field:uW,sort:t.sortRef(r),pulse:kt(u)})),kt(s)}function jze(e,t){return e&&(!e.field&&!e.op?ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Fze[e.op]&&Te("Multiple domain scales can not be sorted using "+e.op)),e}function Ohn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||M5(i.data),s.domainRef(t,i.field)});return kt(t.add(dhn({values:r})))}function Phn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||M5(i.data),s.extentRef(t,i.field)});return kt(t.add(fhn({extents:r})))}function khn(e,t){return e.signal||Ie(e)?tR(e,t):t.objectProperty(e)}function $hn(e,t){return e.signal?t.signalRef(e.signal):ot(e)?{interval:Kl(e.interval),step:Kl(e.step)}:Kl(e)}function Rhn(e,t){t.interpolate=Kl(e.type||e),e.gamma!=null&&(t.interpolateGamma=Kl(e.gamma))}function zze(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(rt(i)){if(r&&Nt(r,i))return e=hn({},e,{range:r[i]}),zze(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=sE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Te("Unrecognized scale range value: "+Xe(i))}else if(i.scheme){n.scheme=Ie(i.scheme)?tR(i.scheme,t):Kl(i.scheme,t),i.extent&&(n.schemeExtent=tR(i.extent,t)),i.count&&(n.schemeCount=Kl(i.count,t));return}else if(i.step){n.rangeStep=Kl(i.step,t);return}else{if(sE(e.type)&&!Ie(i))return Bze(i,e,t);Ie(i)||Te("Unsupported range type: "+Xe(i))}return i.map(s=>(Ie(s)?tR:Kl)(s,t))}function Nhn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=cW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=cW(n[i],i,t));t.addProjection(e.name,r)}function cW(e,t,n){return Ie(e)?e.map(r=>cW(r,t,n)):ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Te("Unsupported parameter object: "+Xe(e)):e}const Pf="top",Ix="left",Ox="right",x0="bottom",Uze="center",Dhn="vertical",Mhn="start",Lhn="middle",Fhn="end",fW="index",Gne="label",Bhn="offset",dE="perc",jhn="perc2",Zl="value",vO="guide-label",Yne="guide-title",zhn="group-title",Uhn="group-subtitle",Fve="symbol",nR="gradient",dW="discrete",hW="size",Vhn="shape",Hhn="fill",qhn="stroke",Whn="strokeWidth",Ghn="strokeDash",Yhn="opacity",Kne=[hW,Vhn,Hhn,qhn,Whn,Ghn,Yhn],_O={name:1,style:1,interactive:1},Gn={value:0},ec={value:1},L5="group",Vze="rect",Xne="rule",Khn="symbol",r_="text";function IA(e){return e.type=L5,e.interactive=e.interactive||!1,e}function Mu(e,t){const n=(r,i)=>jc(e[r],jc(t[r],i));return n.isVertical=r=>Dhn===jc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>jc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>jc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>jc(e.columns,jc(t.columns,+n.isVertical(!0))),n}function Hze(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Xhn(e,t,n){const r=t.config.style[n];return r&&r[e]}function F5(e,t,n){return`item.anchor === '${Mhn}' ? ${e} : item.anchor === '${Fhn}' ? ${t} : ${n}`}const Qne=F5(Xe(Ix),Xe(Ox),Xe(Uze));function Qhn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function qze(e,t){return t?e?ot(e)?Object.assign({},e,{offset:qze(e.offset,t)}):{value:e,offset:t}:t:e}function vl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Ax(e.encode,t,_O)):e.interactive=!1,e}function Jhn(e,t,n,r){const i=Mu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Gn,x:Gn,y:Gn,width:qs(f),height:qs(d)},update:hn({},u,{opacity:ec,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Gn}};return To(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vl({type:Vze,role:Tdn,encode:h},r)}function Zhn(e,t,n,r,i){const s=Mu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Gn,fill:{scale:t,field:Zl}};p[l]={signal:h+"datum."+dE,mult:u},p[c]=Gn,p[f]={signal:h+"datum."+jhn,mult:u},p[d]=qs(a);const m={enter:p,update:hn({},p,{opacity:ec}),exit:{opacity:Gn}};return To(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),vl({type:Vze,role:xdn,key:Zl,from:i,encode:m},r)}const epn=`datum.${dE}<=0?"${Ix}":datum.${dE}>=1?"${Ox}":"${Uze}"`,tpn=`datum.${dE}<=0?"${x0}":datum.${dE}>=1?"${Pf}":"${Lhn}"`;function Bve(e,t,n,r){const i=Mu(e,t),s=i.isVertical(),o=qs(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Gn},update:c={opacity:ec,text:{field:Gne}},exit:{opacity:Gn}};return To(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:jc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:tpn},f="y",d="x",h="1-"):(l.align=c.align={signal:epn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+dE,mult:a},l[d]=c[d]=o,o.offset=jc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+fW}:void 0,vl({type:r_,role:Cze,style:vO,key:Zl,from:r,encode:p,overlap:u},n)}function npn(e,t,n,r,i){const s=Mu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Bhn} : datum.${hW}`,h=l?qs(l):{field:hW},p=`datum.${fW}`,m=`max(1, ${i})`;let g,y,v,_,b;h.mult=.5,g={enter:y={opacity:Gn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:ec,x:y.x,y:y.y},exit:{opacity:Gn}};let E=null,w=null;e.fill||(E=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),To(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Kne.forEach(A=>{e[A]&&(v[A]=y[A]={scale:e[A],field:Zl})});const x=vl({type:Khn,role:Cdn,key:Zl,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=qs(c);S.offset=s("labelOffset"),g={enter:y={opacity:Gn,x:{signal:d,offset:S},y:h},update:v={opacity:ec,text:{field:Gne},x:y.x,y:y.y},exit:{opacity:Gn}},To(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const P=vl({type:r_,role:Cze,style:vO,key:Zl,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Gn,height:l?qs(l):Gn,opacity:Gn},exit:{opacity:Gn},update:v={opacity:ec,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,b={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,b={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:fW}},IA({role:Hne,from:r,encode:Ax(g,o,_O),marks:[x,P],name:u,interactive:a,sort:b})}function rpn(e,t){const n=Mu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Jne='item.orient === "left"',Zne='item.orient === "right"',B5=`(${Jne} || ${Zne})`,ipn=`datum.vgrad && ${B5}`,spn=F5('"top"','"bottom"','"middle"'),opn=F5('"right"','"left"','"center"'),apn=`datum.vgrad && ${Zne} ? (${opn}) : (${B5} && !(datum.vgrad && ${Jne})) ? "left" : ${Qne}`,upn=`item._anchor || (${B5} ? "middle" : "start")`,lpn=`${ipn} ? (${Jne} ? -90 : 90) : 0`,cpn=`${B5} ? (datum.vgrad ? (${Zne} ? "bottom" : "top") : ${spn}) : "top"`;function fpn(e,t,n,r){const i=Mu(e,t),s={enter:{opacity:Gn},update:{opacity:ec,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Gn}};return To(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:upn},angle:{signal:lpn},align:{signal:apn},baseline:{signal:cpn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vl({type:r_,role:Adn,style:Yne,from:r,encode:s},n)}function dpn(e,t){let n;return ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+jve(e.path)+")":e.sphere&&(n="geoShape("+jve(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function jve(e){return ot(e)&&e.signal?e.signal:Xe(e)}function Wze(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===L5?Hne:t||Une}function hpn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Wze(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ppn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ere(e,t){const n=G8e(e.type);n||Te("Unrecognized transform type: "+Xe(e.type));const r=N5(n.type.toLowerCase(),null,Gze(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Gze(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=mpn(o,t,n)}return r}function mpn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return gpn(e,t,n);if(i===void 0){e.required&&Te("Missing required "+Xe(t.type)+" parameter: "+Xe(e.name));return}else{if(r==="param")return ypn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Cs(i)?i.map(s=>zve(e,s,n)):zve(e,i,n)}function zve(e,t,n){const r=e.type;if(Cs(t))return Vve(r)?Te("Expression references can not be signals."):A7(r)?n.fieldRef(t):Hve(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||A7(r);return i&&vpn(t)?n.exprRef(t.expr,t.as):i&&_pn(t)?CA(t.field,t.as):Vve(r)?rh(t,n):bpn(r)?kt(n.getData(t).values):A7(r)?CA(t):Hve(r)?n.compareRef(t):t}}function gpn(e,t,n){return rt(t.from)||Te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function ypn(e,t,n){const r=t[e.name];return e.array?(Ie(r)||Te("Expected an array of sub-parameters. Instead: "+Xe(r)),r.map(i=>Uve(e,i,n))):Uve(e,r,n)}function Uve(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Te("Unsupported parameter: "+Xe(t));const s=hn(Gze(i,t,n),i.key);return kt(n.add(phn(s)))}const vpn=e=>e&&e.expr,_pn=e=>e&&e.field,bpn=e=>e==="data",Vve=e=>e==="expr",A7=e=>e==="field",Hve=e=>e==="compare";function wpn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Te("Only group marks can be faceted."),r.field!=null?o=a=rR(r,n):(e.data?a=kt(n.getData(e.data).aggregate):(s=ere(hn({type:"aggregate",groupby:nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=rR(r,n),o=a=kt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=kt(n.add(Of(null,[{}]))),o||(o=rR(e,n)),{key:i,pulse:o,parent:a}}function rR(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:kt(t.getData(e.data).output)}function gv(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}gv.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=kt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new gv(e,s,i,r,o)};function Yze(e){return rt(e)?e:null}function qve(e,t,n){const r=D5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function jS(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Hdn(s);let l=Yze(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:uW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:kt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(N5(r,void 0,d)),o&&(t.index[i]=f),c=kt(f),l!=null&&(a[l]=c)}return c}gv.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=Yze(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&qve(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:kt(r.output)},n&&n.field&&qve(e,u,n),a=e.add($ze(u)),o=e.add(Of({pulse:kt(a)})),o={agg:a,ref:kt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return kt(this.values)},extentRef(e,t){return jS(e,this,"extent","extent",t,!1)},domainRef(e,t){return jS(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return jS(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return jS(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return jS(e,this,"indata","tupleindex",t,!0,!0)}};function Epn(e,t,n){const r=e.from.facet,i=r.name,s=rR(r,t);let o;r.name||Te("Facet must have a name: "+Xe(r)),r.data||Te("Facet must reference a data set: "+Xe(r)),r.field?o=t.add(Dze({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(shn({key:t.keyRef(r.groupby),group:kt(t.proxy(n.parent)),pulse:s})):Te("Facet must specify groupby or field: "+Xe(r));const a=t.fork(),u=a.add(Of()),l=a.add(n_({pulse:kt(u)}));a.addData(i,new gv(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function xpn(e,t,n){const r=t.add(Dze({pulse:n.pulse})),i=t.fork();i.add(n_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Kze(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(bL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=rh(l,t);u.update=c.$expr,u.params=c.$params}function j5(e,t){const n=Wze(e),r=e.type===L5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Hne||n===Vne,a,u,l,c,f,d,h;const p=n===Une||o||i,m=wpn(e.from,r,t);u=t.add(rhn({key:m.key||(e.key?CA(e.key):void 0),pulse:m.pulse,clean:!r}));const g=kt(u);u=l=t.add(Of({pulse:g})),u=t.add(chn({markdef:hpn(e),interactive:ppn(e.interactive,t),clip:dpn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:kt(u)}));const y=kt(u);u=c=t.add(Nze(Pze(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const x=ere(w,t),S=x.metadata;(S.generates||S.changes)&&Te("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),x.params.pulse=kt(u),t.add(u=x)}),e.sort&&(u=t.add(_hn({sort:t.compareRef(e.sort),pulse:kt(u)})));const v=kt(u);(i||o)&&(o=t.add(Lze({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=kt(o));const _=t.add(Rze({mark:y,pulse:d||v}));h=kt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?Epn(e,t,m):p?xpn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=Spn(s,h,t));const b=t.add(Mze({pulse:h})),E=t.add(n_({pulse:kt(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new gv(t,l,b,E)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Te("Marks only support modify triggers."),Kze(w,t,f)}))}function Spn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Cs(s)?n.signalRef(s.signal):s,method:Cs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Cs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return kt(n.add(hhn(o)))}function Tpn(e,t){const n=t.config.legend,r=e.encode||{},i=Mu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Kne.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Te("Missing valid scale for legend.");const p=Cpn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=kt(t.add(Of(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=kt(t.add(uhn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===nR?(h=[Jhn(e,c,n,r.gradient),Bve(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${R1(i.gradientLength())})/100))`)):p===dW?h=[Zhn(e,c,n,r.gradient,v),Bve(e,n,r.labels,v)]:(f=rpn(e,n),h=[npn(e,n,r,v,R1(f.columns))],d.size=Opn(e,t,h[0].marks)),h=[IA({role:Sdn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(fpn(e,n,r.title,g)),j5(IA({role:Edn,from:g,encode:Ax(Ipn(i,e,n),s,_O),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function Cpn(e,t){let n=e.type||Fve;return!e.type&&Apn(e)===1&&(e.fill||e.stroke)&&(n=ete(t)?nR:sq(t)?dW:Fve),n!==nR?n:sq(t)?dW:nR}function Apn(e){return Kne.reduce((t,n)=>t+(e[n]?1:0),0)}function Ipn(e,t,n){const r={enter:{},update:{}};return To(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Opn(e,t,n){const r=R1(Wve("size",e,n)),i=R1(Wve("strokeWidth",e,n)),s=R1(Ppn(n[1].encode,t,vO));return rh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Wve(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Hze(e,n[0].encode)}function Ppn(e,t,n){return Hze("fontSize",e)||Xhn("fontSize",t,n)}const kpn=`item.orient==="${Ix}"?-90:item.orient==="${Ox}"?90:0`;function $pn(e,t){e=rt(e)?{text:e}:e;const n=Mu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=kt(t.add(Of(null,[l])));return u.push(Dpn(e,n,Rpn(e),c)),e.subtitle&&u.push(Mpn(e,n,r.subtitle,c)),j5(IA({role:Idn,from:c,encode:Npn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Rpn(e){const t=e.encode;return t&&t.title||hn({name:e.name,interactive:e.interactive,style:e.style},t)}function Npn(e,t){const n={enter:{},update:{}};return To(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Qne},angle:{signal:kpn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Ax(n,t,_O)}function Dpn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return To(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vl({type:r_,role:Odn,style:zhn,from:r,encode:o},n)}function Mpn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return To(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vl({type:r_,role:Pdn,style:Uhn,from:r,encode:o},n)}function Lpn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(ere(r,t))}),e.on&&e.on.forEach(r=>{Kze(r,t,e.name)}),t.addDataPipeline(e.name,Fpn(e,t,n))}function Fpn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Cs(e.values)||eR(e.format)?(r.push(Gve(t,e)),r.push(i=dy())):r.push(i=dy({$ingest:e.values,$format:e.format})):e.url?eR(e.url)||eR(e.format)?(r.push(Gve(t,e)),r.push(i=dy())):r.push(i=dy({$request:e.url,$format:e.format})):e.source&&(i=a=nt(e.source).map(d=>kt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=dy()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=yhn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,dy())),i||r.push(dy()),r.push(n_({})),r}function dy(e){const t=Of({},e);return t.metadata={source:!0},t}function Gve(e,t){return lhn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Xze=e=>e===x0||e===Pf,z5=(e,t,n)=>Cs(e)?Upn(e.signal,t,n):e===Ix||e===Pf?t:n,Ws=(e,t,n)=>Cs(e)?jpn(e.signal,t,n):Xze(e)?t:n,cf=(e,t,n)=>Cs(e)?zpn(e.signal,t,n):Xze(e)?n:t,Qze=(e,t,n)=>Cs(e)?Vpn(e.signal,t,n):e===Pf?{value:t}:{value:n},Bpn=(e,t,n)=>Cs(e)?Hpn(e.signal,t,n):e===Ox?{value:t}:{value:n},jpn=(e,t,n)=>Jze(`${e} === '${Pf}' || ${e} === '${x0}'`,t,n),zpn=(e,t,n)=>Jze(`${e} !== '${Pf}' && ${e} !== '${x0}'`,t,n),Upn=(e,t,n)=>tre(`${e} === '${Ix}' || ${e} === '${Pf}'`,t,n),Vpn=(e,t,n)=>tre(`${e} === '${Pf}'`,t,n),Hpn=(e,t,n)=>tre(`${e} === '${Ox}'`,t,n),Jze=(e,t,n)=>(t=t!=null?qs(t):t,n=n!=null?qs(n):n,Yve(t)&&Yve(n)?(t=t?t.signal||Xe(t.value):null,n=n?n.signal||Xe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hn({test:e},t)].concat(n||[])),Yve=e=>e==null||Object.keys(e).length===1,tre=(e,t,n)=>({signal:`${e} ? (${Cb(t)}) : (${Cb(n)})`}),qpn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Ix}' ? (${Cb(r)}) : `:"")+(n!=null?`${e} === '${x0}' ? (${Cb(n)}) : `:"")+(i!=null?`${e} === '${Ox}' ? (${Cb(i)}) : `:"")+(t!=null?`${e} === '${Pf}' ? (${Cb(t)}) : `:"")+"(null)"}),Cb=e=>Cs(e)?e.signal:e==null?null:Xe(e),Wpn=(e,t)=>t===0?0:Cs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},iw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function R_(e,t,n,r){let i;if(t&&Nt(t,e))return t[e];if(Nt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Yne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[vO][i]}return null}function Kve(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Gpn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Cs(o)){const f=Kve([n.axisX,n.axisY]),d=Kve([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ws(o,R_(l,n.axisX,i,r),R_(l,n.axisY,i,r));u={};for(l of d)u[l]=qpn(o.signal,R_(l,n.axisTop,i,r),R_(l,n.axisBottom,i,r),R_(l,n.axisLeft,i,r),R_(l,n.axisRight,i,r))}else a=o===Pf||o===x0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?hn({},i,a,u,s):i}function Ypn(e,t,n,r){const i=Mu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Gn},update:a={opacity:ec},exit:{opacity:Gn}};To(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Xve(e,0),c=Xve(e,1);return o.x=a.x=Ws(s,l,Gn),o.x2=a.x2=Ws(s,c),o.y=a.y=cf(s,l,Gn),o.y2=a.y2=cf(s,c),vl({type:Xne,role:ydn,from:r,encode:u},n)}function Xve(e,t){return{scale:e.scale,range:t}}function Kpn(e,t,n,r,i){const s=Mu(e,t),o=e.orient,a=e.gridScale,u=z5(o,1,-1),l=Xpn(e.offset,u);let c,f,d;const h={enter:c={opacity:Gn},update:d={opacity:ec},exit:f={opacity:Gn}};To(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Zl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ws(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:hn(m,{mult:u,offset:l});return c.x=d.x=Ws(o,p,g),c.y=d.y=cf(o,p,g),c.x2=d.x2=cf(o,y),c.y2=d.y2=Ws(o,y),f.x=Ws(o,p),f.y=cf(o,p),vl({type:Xne,role:vdn,key:Zl,from:r,encode:h},n)}function Xpn(e,t){if(t!==1)if(!ot(e))e=Cs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hn({},e);for(;n.mult!=null;)if(ot(n.mult))n=n.mult=hn({},n.mult);else return n.mult=Cs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Qpn(e,t,n,r,i,s){const o=Mu(e,t),a=e.orient,u=z5(a,-1,1);let l,c,f;const d={enter:l={opacity:Gn},update:f={opacity:ec},exit:c={opacity:Gn}};To(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=qs(i);h.mult=u;const p={scale:e.scale,field:Zl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ws(a,Gn,p),f.y2=l.y2=Ws(a,h),c.x=Ws(a,p),f.x=l.x=cf(a,Gn,p),f.x2=l.x2=cf(a,h),c.y=cf(a,p),vl({type:Xne,role:bdn,key:Zl,from:r,encode:d},n)}function I7(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Jpn(e,t,n,r,i,s){const o=Mu(e,t),a=e.orient,u=e.scale,l=z5(a,-1,1),c=R1(o("labelFlush")),f=R1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=qs(i);g.mult=l,g.offset=qs(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Zl,band:.5,offset:qze(s.offset,o("labelOffset"))},v=Ws(a,p?I7(u,c,'"left"','"right"','"center"'):{value:"center"},Bpn(a,"left","right")),_=Ws(a,Qze(a,"bottom","top"),p?I7(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=I7(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Gn,x:Ws(a,y,g),y:cf(a,y,g)},w={enter:E,update:m={opacity:ec,text:{field:Gne},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:Gn,x:E.x,y:E.y}};To(w,{dx:!d&&p?Ws(a,b):null,dy:!h&&p?cf(a,b):null}),To(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let S=o("labelOverlap");return S=S||x?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=iw(m.align,v)),m.baseline!==_&&(m.baseline=iw(m.baseline,_)),vl({type:r_,role:_dn,style:vO,key:Zl,from:r,encode:w,overlap:S},n)}function Zpn(e,t,n,r){const i=Mu(e,t),s=e.orient,o=z5(s,-1,1);let a,u;const l={enter:a={opacity:Gn,anchor:qs(i("titleAnchor",null)),align:{signal:Qne}},update:u=hn({},a,{opacity:ec,text:qs(e.title)}),exit:{opacity:Gn}},c={signal:`lerp(range("${e.scale}"), ${F5(0,1,.5)})`};return u.x=Ws(s,c),u.y=cf(s,c),a.angle=Ws(s,Gn,Wpn(o,90)),a.baseline=Ws(s,Qze(s,x0,Pf),{value:x0}),u.angle=a.angle,u.baseline=a.baseline,To(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),emn(i,s,l,n),l.update.align=iw(l.update.align,a.align),l.update.angle=iw(l.update.angle,a.angle),l.update.baseline=iw(l.update.baseline,a.baseline),vl({type:r_,role:wdn,style:Yne,from:r,encode:l},n)}function emn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=iw(qs(a),n.update[u]),!1):!X_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?qs(o):Ws(t,qs(o),qs(s))}function tmn(e,t){const n=Gpn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Mu(e,n),l=Qhn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=kt(t.add(Of({},[c]))),d=kt(t.add(nhn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Kpn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Qpn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Jpn(e,n,r.labels,d,p,l))),c.domain&&h.push(Ypn(e,n,r.domain,f)),c.title&&h.push(Zpn(e,n,r.title,f)),j5(IA({role:gdn,from:f,encode:Ax(nmn(u,e),i,_O),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function nmn(e,t){const n={enter:{},update:{}};return To(n,{orient:e("orient"),offset:e("offset")||0,position:jc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Zze(e,t,n){const r=nt(e.signals),i=nt(e.scales);return n||r.forEach(s=>kze(s,t)),nt(e.projections).forEach(s=>Nhn(s,t)),i.forEach(s=>Ehn(s,t)),nt(e.data).forEach(s=>Lpn(s,t)),i.forEach(s=>xhn(s,t)),(n||r).forEach(s=>thn(s,t)),nt(e.axes).forEach(s=>tmn(s,t)),nt(e.marks).forEach(s=>j5(s,t)),nt(e.legends).forEach(s=>Tpn(s,t)),e.title&&$pn(e.title,t),t.parseLambdas(),t}const rmn=e=>Ax({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function imn(e,t){const n=t.config,r=kt(t.root=t.add(bL())),i=smn(e,n);i.forEach(l=>kze(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Of()),o=t.add(Nze(Pze(rmn(e.encode),L5,Vne,e.style,t,{pulse:kt(s)}))),a=t.add(Lze({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:kt(o)}));t.operators.pop(),t.pushState(kt(o),kt(a),null),Zze(e,t,i),t.operators.push(a);let u=t.add(Rze({mark:r,pulse:kt(a)}));return u=t.add(Mze({pulse:kt(u)})),u=t.add(n_({pulse:kt(u)})),t.addData("root",new gv(t,s,s,u)),t}function zS(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function smn(e,t){const n=o=>jc(e[o],t[o]),r=[zS("background",n("background")),zS("autosize",hdn(n("autosize"))),zS("padding",mdn(n("padding"))),zS("width",n("width")||0),zS("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return nt(e.signals).forEach(o=>{Nt(i,o.name)?o=hn(i[o.name],o):r.push(o),s[o.name]=o}),nt(t.signals).forEach(o=>{!Nt(s,o.name)&&!Nt(i,o.name)&&r.push(o)}),r}function eUe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Qve(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}eUe.prototype=Qve.prototype={parse(e){return Zze(e,this)},fork(){return new Qve(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof aW?kt(e):e;return this.add(ghn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(kt(this.add(n_({pulse:e})))),this._parent.push(t),this._lookup.push(n?kt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(rt(e))return CA(e,t);e.signal||Te("Unsupported field reference: "+Xe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=kt(this.add(ohn(i)))}return r},compareRef(e){let t=!1;const n=s=>Cs(s)?(t=!0,this.signalRef(s.signal)):qdn(s)?(t=!0,this.exprRef(s.expr)):s,r=nt(e.field).map(n),i=nt(e.order).map(n);return t?kt(this.add(Lve({fields:r,orders:i}))):Dve(r,i)},keyRef(e,t){let n=!1;const r=s=>Cs(s)?(n=!0,kt(i[s.signal])):s,i=this.signals;return e=nt(e).map(r),n?kt(this.add(ahn({fields:e,flat:t}))):zdn(e,t)},sortRef(e){if(!e)return e;const t=D5(e.op,e.field),n=e.order||Udn;return n.signal?kt(this.add(Lve({fields:t,orders:this.signalRef(n.signal)}))):Dve(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Nt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Te("Duplicate signal name: "+Xe(e));const n=t instanceof aW?t:this.add(bL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Te("Unrecognized signal name: "+Xe(e)),this.signals[e]},signalRef(e){return this.signals[e]?kt(this.signals[e]):(Nt(this.lambdas,e)||(this.lambdas[e]=this.add(bL(null))),kt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=rh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ot(e)?e:this.signalRef(e.signal||nre(e))},exprRef(e,t){const n={expr:rh(e,this)};return t&&(n.expr.$name=t),kt(this.add(ihn(n)))},addBinding(e,t){this.bindings||Te("Nested signals do not support binding: "+Xe(e)),this.bindings.push(hn({signal:e},t))},addScaleProj(e,t){Nt(this.scales,e)&&Te("Duplicate scale or projection name: "+Xe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,vhn(t))},addProjection(e,t){this.addScaleProj(e,mhn(t))},getScale(e){return this.scales[e]||Te("Unrecognized scale name: "+Xe(e)),this.scales[e]},scaleRef(e){return kt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.data[e]=t},getData(e){return this.data[e]||Te("Undefined data set name: "+Xe(e)),this.data[e]},addDataPipeline(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.addData(e,gv.fromEntries(this,t))}};function nre(e){return(Ie(e)?omn:amn)(e)}function omn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ot(i)?i.signal||nre(i):Xe(i))}return n+"]"}function amn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Xe(r)+":"+(ot(i)?i.signal||nre(i):Xe(i));return t+"}"}function umn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function lmn(e,t,n){return ot(e)||Te("Input Vega specification must be an object."),t=vx(umn(),t,e.config),imn(e,new eUe(t,n)).toRuntime()}var cmn="5.28.0";hn(nE,qen,Rin,fsn,Jon,san,$an,fan,Nan,Wan,nun,lun);const fmn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:ls,CanvasHandler:w0,CanvasRenderer:vA,DATE:Au,DAY:Go,DAYOFYEAR:th,Dataflow:nw,Debug:N5e,Error:BZ,EventStream:ZF,Gradient:iBe,GroupItem:d5,HOURS:ml,Handler:b0,HybridHandler:Nte,HybridRenderer:BM,Info:R5e,Item:f5,MILLISECONDS:vf,MINUTES:gl,MONTH:ea,Marks:yl,MultiPulse:see,None:$5e,Operator:Dr,Parameters:JF,Pulse:Ug,QUARTER:Cu,RenderType:hg,Renderer:Tl,ResourceLoader:lte,SECONDS:ac,SVGHandler:Ate,SVGRenderer:b5,SVGStringRenderer:Rte,Scenegraph:Tte,TIME_UNITS:QZ,Transform:Ee,View:vze,WEEK:bs,Warn:jZ,YEAR:Eo,accessor:Du,accessorFields:Zo,accessorName:Li,array:nt,ascending:WF,bandwidthNRD:lee,bin:X8e,bootstrapCI:Q8e,boundClip:tje,boundContext:uO,boundItem:fq,boundMark:xBe,boundStroke:dm,changeset:Zv,clampRange:q5e,codegenExpression:q7e,compare:qZ,constant:la,cumulativeLogNormal:mee,cumulativeNormal:t5,cumulativeUniform:_ee,dayofyear:c8e,debounce:WZ,defaultLocale:eee,definition:G8e,densityLogNormal:pee,densityNormal:cee,densityUniform:vee,domChild:vs,domClear:Ul,domCreate:fg,domFind:Cte,dotbin:J8e,error:Te,expressionFunction:Xi,extend:hn,extent:eh,extentIndex:W5e,falsy:Rm,fastmap:bx,field:sc,flush:G5e,font:y5,fontFamily:fO,fontSize:gh,format:F$,formatLocale:TM,formats:ree,hasOwnProperty:Nt,id:KI,identity:ua,inferType:M8e,inferTypes:L8e,ingest:dr,inherits:We,inrange:wb,interpolate:tte,interpolateColors:l5,interpolateRange:H9e,intersect:QBe,intersectBoxLine:Eb,intersectPath:cte,intersectPoint:fte,intersectRule:dBe,isArray:Ie,isBoolean:K0,isDate:jg,isFunction:pn,isIterable:Y5e,isNumber:Jn,isObject:ot,isRegExp:K5e,isString:rt,isTuple:XF,key:GZ,lerp:X5e,lineHeight:v0,loader:YF,locale:N8e,logger:zZ,lruCache:Q5e,markup:$te,merge:J5e,mergeConfig:vx,multiLineOffset:Ete,one:yx,pad:Z5e,panLinear:B5e,panLog:j5e,panPow:z5e,panSymlog:U5e,parse:lmn,parseExpression:One,parseSelector:Q0,path:y4,pathCurves:ote,pathEqual:nje,pathParse:oE,pathRectangle:aBe,pathRender:pA,pathSymbols:oBe,pathTrail:uBe,peek:Un,point:_5,projection:Zte,quantileLogNormal:gee,quantileNormal:n5,quantileUniform:bee,quantiles:aee,quantizeInterpolator:q9e,quarter:V5e,quartiles:uee,get random(){return uc},randomInteger:KZt,randomKDE:dee,randomLCG:YZt,randomLogNormal:e9e,randomMixture:t9e,randomNormal:fee,randomUniform:n9e,read:j8e,regressionConstant:wee,regressionExp:i9e,regressionLinear:Eee,regressionLoess:a9e,regressionLog:r9e,regressionPoly:o9e,regressionPow:s9e,regressionQuad:xee,renderModule:w5,repeat:vT,resetDefaultLocale:qJt,resetSVGClipId:cBe,resetSVGDefIds:Qrn,responseType:B8e,runtimeContext:sze,sampleCurve:i5,sampleLogNormal:hee,sampleNormal:e5,sampleUniform:yee,scale:or,sceneEqual:Dte,sceneFromJSON:TBe,scenePickVisit:PM,sceneToJSON:SBe,sceneVisit:_f,sceneZOrder:dte,scheme:nte,serializeXML:UBe,setHybridRendererOptions:Grn,setRandom:WZt,span:XI,splitAccessPath:mh,stringValue:Xe,textMetrics:sl,timeBin:A8e,timeFloor:y8e,timeFormatLocale:fA,timeInterval:wx,timeOffset:b8e,timeSequence:x8e,timeUnitSpecifier:l8e,timeUnits:JZ,toBoolean:YZ,toDate:KZ,toNumber:Yo,toSet:yf,toString:XZ,transform:Y8e,transforms:nE,truncate:e8e,truthy:oc,tupleid:$t,typeParsers:nq,utcFloor:v8e,utcInterval:Ex,utcOffset:w8e,utcSequence:S8e,utcdayofyear:h8e,utcquarter:H5e,utcweek:p8e,version:cmn,visitArray:zm,week:f8e,writeConfig:_x,zero:eg,zoomLinear:UZ,zoomLog:VZ,zoomPow:xM,zoomSymlog:HZ},Symbol.toStringTag,{value:"Module"}));function dmn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var hmn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},pmn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},mmn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const gmn=Array.prototype.slice,hy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,gmn.call(t,1))},ymn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var vmn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:ymn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return hy("join",arguments)},indexof:function(){return hy("indexOf",arguments)},lastindexof:function(){return hy("lastIndexOf",arguments)},slice:function(){return hy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return hy("substring",arguments,String)},split:function(){return hy("split",arguments,String)},replace:function(){return hy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const _mn=["view","item","group","xy","x","y"],pW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&pW.add(setImmediate);const bmn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:hmn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),pW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||vmn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>pmn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>mmn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,pW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function US(e,t,n,r,i,s){const o=a=>bmn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,_mn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var wmn={operator(e,t){const n=t.ast,r=e.functions;return i=>US(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>US(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>US(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return US(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=US(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&dmn(o,r,s),l}}};const Emn="vega-lite",xmn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Smn="5.17.0",Tmn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Cmn="https://vega.github.io/vega-lite/",Amn="Vega-Lite is a concise high-level language for interactive visualization.",Imn=["vega","chart","visualization"],Omn="build/vega-lite.js",Pmn="build/vega-lite.min.js",kmn="build/vega-lite.min.js",$mn="build/src/index",Rmn="build/src/index.d.ts",Nmn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Dmn=["bin","build","src","vega-lite*","tsconfig.json"],Mmn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Lmn={type:"git",url:"https://github.com/vega/vega-lite.git"},Fmn="BSD-3-Clause",Bmn={url:"https://github.com/vega/vega-lite/issues"},jmn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},zmn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Umn={vega:"^5.24.0"},Vmn={node:">=18"},Hmn={name:Emn,author:xmn,version:Smn,collaborators:Tmn,homepage:Cmn,description:Amn,keywords:Imn,main:Omn,unpkg:Pmn,jsdelivr:kmn,module:$mn,types:Rmn,bin:Nmn,files:Dmn,scripts:Mmn,repository:Lmn,license:Fmn,bugs:Bmn,devDependencies:jmn,dependencies:zmn,peerDependencies:Umn,engines:Vmn};function rre(e){return!!e.or}function ire(e){return!!e.and}function sre(e){return!!e.not}function iR(e,t){if(sre(e))iR(e.not,t);else if(ire(e))for(const n of e.and)iR(n,t);else if(rre(e))for(const n of e.or)iR(n,t);else t(e)}function sw(e,t){return sre(e)?{not:sw(e.not,t)}:ire(e)?{and:e.and.map(n=>sw(n,t))}:rre(e)?{or:e.or.map(n=>sw(n,t))}:t(e)}const qt=structuredClone;function tUe(e){throw new Error(e)}function hE(e,t){const n={};for(const r of t)Nt(e,r)&&(n[r]=e[r]);return n}function bu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Pr(e)).join(",")})`};function kn(e){if(Jn(e))return e;const t=rt(e)?e:Pr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function mW(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function yv(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function ore(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function nUe(e,...t){for(const n of t)qmn(e,n??{});return e}function qmn(e,t){for(const n of Ne(t))_x(e,n,t[n],!0)}function xd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Wmn(e,t){const n=Ne(e),r=Ne(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function rUe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function are(e,t){for(const n of e)if(t.has(n))return!0;return!1}function gW(e){const t=new Set;for(const n of e){const i=mh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ure(e,t){return e===void 0||t===void 0?!0:are(gW(e),gW(t))}function Or(e){return Ne(e).length===0}const Ne=Object.keys,xo=Object.values,S0=Object.entries;function OA(e){return e===!0||e===!1}function gi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function F2(e,t){return sre(e)?`!(${F2(e.not,t)})`:ire(e)?`(${e.and.map(n=>F2(n,t)).join(") && (")})`:rre(e)?`(${e.or.map(n=>F2(n,t)).join(") || (")})`:t(e)}function wL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&wL(e[n],t)&&delete e[n],Or(e)}function bO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function lre(e,t="datum"){const n=mh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Xe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function iUe(e,t="datum"){return`${t}[${Xe(mh(e).join("."))}]`}function Gmn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function cc(e){return`${mh(e).map(Gmn).join("\\.")}`}function vv(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cre(e){return`${mh(e).join(".")}`}function pE(e){return e?mh(e).length:0}function Yi(...e){for(const t of e)if(t!==void 0)return t}let sUe=42;function oUe(e){const t=++sUe;return e?String(e)+t:t}function Ymn(){sUe=42}function aUe(e){return uUe(e)?e:`__${e}`}function uUe(e){return e.startsWith("__")}function PA(e){if(e!==void 0)return(e%360+360)%360}function U5(e){return Jn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Jve=Object.getPrototypeOf(structuredClone({}));function nl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!nl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!nl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Jve.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Jve.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!nl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const xp="row",Sp="column",V5="facet",yi="x",eo="y",kf="x2",bh="y2",J0="xOffset",Px="yOffset",$f="radius",pm="radius2",xc="theta",mm="theta2",Rf="latitude",Nf="longitude",Df="latitude2",fc="longitude2",Ou="color",wh="fill",Eh="stroke",Pu="shape",gm="size",i_="angle",ym="opacity",Z0="fillOpacity",ey="strokeOpacity",ty="strokeWidth",ny="strokeDash",wO="text",mE="order",EO="detail",H5="key",_v="tooltip",q5="href",W5="url",G5="description",Kmn={x:1,y:1,x2:1,y2:1},lUe={theta:1,theta2:1,radius:1,radius2:1};function cUe(e){return e in lUe}const fre={longitude:1,longitude2:1,latitude:1,latitude2:1};function fUe(e){switch(e){case Rf:return"y";case Df:return"y2";case Nf:return"x";case fc:return"x2"}}function dUe(e){return e in fre}const Xmn=Ne(fre),dre={...Kmn,...lUe,...fre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ow(e){return e===Ou||e===wh||e===Eh}const hUe={row:1,column:1,facet:1},Xl=Ne(hUe),hre={...dre,...hUe},Qmn=Ne(hre),{order:FTn,detail:BTn,tooltip:jTn,...Jmn}=hre,{row:zTn,column:UTn,facet:VTn,...Zmn}=Jmn;function egn(e){return!!Zmn[e]}function pUe(e){return!!hre[e]}const tgn=[kf,bh,Df,fc,mm,pm];function mUe(e){return s_(e)!==e}function s_(e){switch(e){case kf:return yi;case bh:return eo;case Df:return Rf;case fc:return Nf;case mm:return xc;case pm:return $f}return e}function T0(e){if(cUe(e))switch(e){case xc:return"startAngle";case mm:return"endAngle";case $f:return"outerRadius";case pm:return"innerRadius"}return e}function xh(e){switch(e){case yi:return kf;case eo:return bh;case Rf:return Df;case Nf:return fc;case xc:return mm;case $f:return pm}}function ku(e){switch(e){case yi:case kf:return"width";case eo:case bh:return"height"}}function gUe(e){switch(e){case yi:return"xOffset";case eo:return"yOffset";case kf:return"x2Offset";case bh:return"y2Offset";case xc:return"thetaOffset";case $f:return"radiusOffset";case mm:return"theta2Offset";case pm:return"radius2Offset"}}function pre(e){switch(e){case yi:return"xOffset";case eo:return"yOffset"}}function ngn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const rgn=Ne(dre),{x:HTn,y:qTn,x2:WTn,y2:GTn,xOffset:YTn,yOffset:KTn,latitude:XTn,longitude:QTn,latitude2:JTn,longitude2:ZTn,theta:e2n,theta2:t2n,radius:n2n,radius2:r2n,...mre}=dre,ign=Ne(mre),gre={x:1,y:1},Sh=Ne(gre);function Ki(e){return e in gre}const yre={theta:1,radius:1},sgn=Ne(yre);function Y5(e){return e==="width"?yi:eo}const yUe={xOffset:1,yOffset:1};function xO(e){return e in yUe}const{text:i2n,tooltip:s2n,href:o2n,url:a2n,description:u2n,detail:l2n,key:c2n,order:f2n,...vUe}=mre,ogn=Ne(vUe);function agn(e){return!!mre[e]}function ugn(e){switch(e){case Ou:case wh:case Eh:case gm:case Pu:case ym:case ty:case ny:return!0;case Z0:case ey:case i_:return!1}}const _Ue={...gre,...yre,...yUe,...vUe},K5=Ne(_Ue);function vm(e){return!!_Ue[e]}function lgn(e,t){return fgn(e)[t]}const bUe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:d2n,...cgn}=bUe;function fgn(e){switch(e){case Ou:case wh:case Eh:case G5:case EO:case H5:case _v:case q5:case mE:case ym:case Z0:case ey:case ty:case V5:case xp:case Sp:return bUe;case yi:case eo:case J0:case Px:case Rf:case Nf:return cgn;case kf:case bh:case Df:case fc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case gm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ny:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Pu:return{point:"always",geoshape:"always"};case wO:return{text:"always"};case i_:return{point:"always",square:"always",text:"always"};case W5:return{image:"always"};case xc:return{text:"always",arc:"always"};case $f:return{text:"always",arc:"always"};case mm:case pm:return{arc:"always"}}}function O7(e){switch(e){case yi:case eo:case xc:case $f:case J0:case Px:case gm:case i_:case ty:case ym:case Z0:case ey:case kf:case bh:case mm:case pm:return;case V5:case xp:case Sp:case Pu:case ny:case wO:case _v:case q5:case W5:case G5:return"discrete";case Ou:case wh:case Eh:return"flexible";case Rf:case Nf:case Df:case fc:case EO:case H5:case mE:return}}const dgn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},hgn={count:1,min:1,max:1};function Jp(e){return!!e&&!!e.argmin}function ry(e){return!!e&&!!e.argmax}function vre(e){return rt(e)&&!!dgn[e]}const pgn=new Set(["count","valid","missing","distinct"]);function wUe(e){return rt(e)&&pgn.has(e)}function mgn(e){return rt(e)&&$n(["min","max"],e)}const ggn=new Set(["count","sum","distinct","valid","missing"]),ygn=new Set(["mean","average","median","q1","q3","min","max"]);function EUe(e){return K0(e)&&(e=a8(e,void 0)),"bin"+Ne(e).map(t=>X5(e[t])?gi(`_${t}_${S0(e[t])}`):gi(`_${t}_${e[t]}`)).join("")}function Hr(e){return e===!0||o_(e)&&!e.binned}function co(e){return e==="binned"||o_(e)&&e.binned===!0}function o_(e){return ot(e)}function X5(e){return e==null?void 0:e.param}function Zve(e){switch(e){case xp:case Sp:case gm:case Ou:case wh:case Eh:case ty:case ym:case Z0:case ey:case Pu:return 6;case ny:return 4;default:return 10}}function SO(e){return!!(e!=null&&e.expr)}function ou(e){const t=Ne(e||{}),n={};for(const r of t)n[r]=Qu(e[r]);return n}function xUe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=hE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function qm(e){return rt(e)||Ie(e)&&rt(e[0])}function It(e){return!!(e!=null&&e.signal)}function iy(e){return!!e.step}function vgn(e){return Ie(e)?!1:"fields"in e&&!("data"in e)}function _gn(e){return Ie(e)?!1:"fields"in e&&"data"in e}function fp(e){return Ie(e)?!1:"field"in e&&"data"in e}const bgn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},wgn=Ne(bgn),Egn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},yW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function SUe(e){const t=Ie(e.condition)?e.condition.map(e_e):e_e(e.condition);return{...Qu(e),condition:t}}function Qu(e){if(SO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function e_e(e){if(SO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Zr(e){if(SO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return It(e)?e:e!==void 0?{value:e}:void 0}function xgn(e){return It(e)?e.signal:Xe(e)}function t_e(e){return It(e)?e.signal:Xe(e.value)}function ef(e){return It(e)?e.signal:e==null?null:Xe(e)}function Sgn(e,t,n){for(const r of n){const i=Zp(r,t.markDef,t.config);i!==void 0&&(e[r]=Zr(i))}return e}function TUe(e){return[].concat(e.type,e.style??[])}function fr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Zp(e,t,n,r)}function Zp(e,t,n,{vgChannel:r}={}){return Yi(r?EL(e,t,n.style):void 0,EL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function EL(e,t,n){return CUe(e,TUe(t),n)}function CUe(e,t,n){t=nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function AUe(e,t){return nt(e).reduce((n,r)=>(n.field.push(Je(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function IUe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(nl(i,r))return;n.push(r)}),n}function OUe(e,t){return nl(e,t)||!t?e:e?[...nt(e),...nt(t)].join(", "):t}function PUe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((qm(n)||It(n))&&(qm(r)||It(r)))return{explicit:e.explicit,value:OUe(n,r)};if(qm(n)||It(n))return{explicit:e.explicit,value:n};if(qm(r)||It(r))return{explicit:e.explicit,value:r};if(!qm(n)&&!It(n)&&!qm(r)&&!It(r))return{explicit:e.explicit,value:IUe(n,r)};throw new Error("It should never reach here")}function _re(e){return`Invalid specification ${Pr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Tgn='Autosize "fit" only works for single views and layered views.';function n_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function r_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function i_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${ku(e)}.`:'Dropping "fit" because spec has discrete size.'}function bre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function s_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Cgn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Agn(e){return`The "nearest" transform is not supported for ${e} marks.`}function kUe(e){return`Selection not supported for ${e} yet.`}function Ign(e){return`Cannot find a selection named "${e}".`}const Ogn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Pgn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",kgn="Legend bindings are only supported for selections over an individual field or encoding channel.";function $gn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Rgn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Ngn="The same selection must be used to override scale domains in a layered view.",Dgn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Mgn(e){return`Unknown repeated value "${e}".`}function o_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Lgn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Fgn(e){return`Unrecognized parse "${e}".`}function a_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Bgn="Attempt to add the same child twice.";function jgn(e){return`Ignoring an invalid transform: ${Pr(e)}.`}const zgn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function u_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Ugn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Pr(t)} is overridden by a child projection ${Pr(n)}.`}const Vgn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Hgn(e){return`${e}Offset dropped because ${e} is continuous`}function qgn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Pr(n)}}.`}function $Ue(e){return`Invalid field type "${e}".`}function Wgn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Ggn(e){return`Invalid aggregation operator "${e}".`}function RUe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Ygn(e){return`Position range does not support relative band size for ${e}.`}function vW(e,t){return`Dropping ${Pr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Kgn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Q5(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function Xgn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Qgn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Jgn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Zgn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function P7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function e0n(e){return`The ${e} for range marks cannot be an expression`}function t0n(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function n0n(e,t){return`Specified orient "${e}" overridden with "${t}".`}function r0n(e){return`Cannot use the scale property "${e}" with non-color channel.`}function i0n(e){return`Cannot use the relative band size with ${e} scale.`}function s0n(e){return`Using unaggregated domain with raw field has no effect (${Pr(e)}).`}function o0n(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function a0n(e){return`Unaggregated domain is currently unsupported for log scale (${Pr(e)}).`}function u0n(e){return`Cannot apply size to non-oriented mark "${e}".`}function l0n(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function c0n(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function NUe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function DUe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function f0n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using ${Pr(n)}.`}function d0n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using the union of the two domains.`}function h0n(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function p0n(e){return`Dropping sort property ${Pr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const l_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",m0n="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",g0n="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",y0n="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function v0n(e){return`Cannot stack "${e}" if there is already "${e}2".`}function _0n(e){return`Cannot stack non-linear scale (${e}).`}function b0n(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function xL(e,t){return`Invalid ${e}: ${Pr(t)}.`}function w0n(e){return`Dropping day from datetime ${Pr(e)} as day cannot be combined with other units.`}function E0n(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function x0n(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function S0n(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function c_e(e){return`1D error band does not support ${e}.`}function MUe(e){return`Channel ${e} is required for "binned" bin.`}function T0n(e){return`Channel ${e} should not be used with "binned" bin.`}function C0n(e){return`Domain for ${e} is required for threshold scale.`}const LUe=zZ(jZ);let gE=LUe;function A0n(e){return gE=e,gE}function I0n(){return gE=LUe,gE}function Ue(...e){gE.warn(...e)}function O0n(...e){gE.debug(...e)}function a_(e){if(e&&ot(e)){for(const t of Ere)if(t in e)return!0}return!1}const FUe=["january","february","march","april","may","june","july","august","september","october","november","december"],P0n=FUe.map(e=>e.substr(0,3)),BUe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],k0n=BUe.map(e=>e.substr(0,3));function $0n(e){if(U5(e)&&(e=+e),Jn(e))return e>4&&Ue(xL("quarter",e)),e-1;throw new Error(xL("quarter",e))}function R0n(e){if(U5(e)&&(e=+e),Jn(e))return e-1;{const t=e.toLowerCase(),n=FUe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=P0n.indexOf(r);if(i!==-1)return i;throw new Error(xL("month",e))}}function N0n(e){if(U5(e)&&(e=+e),Jn(e))return e%7;{const t=e.toLowerCase(),n=BUe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=k0n.indexOf(r);if(i!==-1)return i;throw new Error(xL("day",e))}}function wre(e,t){const n=[];if(t&&e.day!==void 0&&Ne(e).length>1&&(Ue(w0n(e)),e=qt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?R0n(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?$0n(e.quarter):e.quarter;n.push(Jn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?N0n(e.day):e.day;n.push(Jn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function bv(e){const n=wre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function D0n(e){const n=wre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function M0n(e){const t=wre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const jUe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Ere=Ne(jUe);function L0n(e){return!!jUe[e]}function u_(e){return ot(e)?e.binned:zUe(e)}function zUe(e){return e&&e.startsWith("binned")}function xre(e){return e.startsWith("utc")}function F0n(e){return e.substring(3)}const B0n={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function J5(e){return Ere.filter(t=>VUe(e,t))}function UUe(e){const t=J5(e);return t[t.length-1]}function VUe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function j0n(e,t,{end:n}={end:!1}){const r=lre(t),i=xre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Ere)VUe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),D0n(a)}function HUe(e){if(!e)return;const t=J5(e);return`timeUnitSpecifier(${Pr(t)}, ${Pr(B0n)})`}function z0n(e,t,n){if(!e)return;const r=HUe(e);return`${n||xre(e)?"utc":"time"}Format(${t}, ${r})`}function Ys(e){if(!e)return;let t;return rt(e)?zUe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),xre(t.unit)&&(t.utc=!0,t.unit=F0n(t.unit)),t}function U0n(e){const{utc:t,...n}=Ys(e);return n.unit?(t?"utc":"")+Ne(n).map(r=>gi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ne(n).map(r=>gi(`_${r}_${n[r]}`)).join("")}function qUe(e,t=n=>n){const n=Ys(e),r=UUe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=WUe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(bv(a))} - ${t(bv(i))}`}}const V0n={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function H0n(e){return!!V0n[e]}function WUe(e,t=1){if(H0n(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function q0n(e){return e==null?void 0:e.param}function Sre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Tre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Cre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Are(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Ire(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Ore(e){if(e!=null&&e.field){if(Ie(e.range)&&e.range.length===2)return!0;if(It(e.range))return!0}return!1}function Pre(e){return!!(e!=null&&e.field)&&(Ie(e.oneOf)||Ie(e.in))}function W0n(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function GUe(e){return Pre(e)||Sre(e)||Ore(e)||Tre(e)||Are(e)||Cre(e)||Ire(e)}function Vf(e,t){return u8(e,{timeUnit:t,wrapTime:!0})}function G0n(e,t){return e.map(n=>Vf(n,t))}function YUe(e,t=!0){const{field:n}=e,r=Ys(e.timeUnit),{unit:i,binned:s}=r||{},o=Je(e,{expr:"datum"}),a=i?`time(${s?o:j0n(i,n)})`:o;if(Sre(e))return`${a}===${Vf(e.equal,i)}`;if(Tre(e)){const u=e.lt;return`${a}<${Vf(u,i)}`}else if(Are(e)){const u=e.gt;return`${a}>${Vf(u,i)}`}else if(Cre(e)){const u=e.lte;return`${a}<=${Vf(u,i)}`}else if(Ire(e)){const u=e.gte;return`${a}>=${Vf(u,i)}`}else{if(Pre(e))return`indexof([${G0n(e.oneOf,i).join(",")}], ${a}) !== -1`;if(W0n(e))return kre(a,e.valid);if(Ore(e)){const{range:u}=e,l=It(u)?{signal:`${u.signal}[0]`}:u[0],c=It(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Vf(l,i)+", "+Vf(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Vf(l,i)}`),c!==null&&f.push(`${a} <= ${Vf(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Pr(e)}`)}function kre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Y0n(e){return GUe(e)&&e.timeUnit?{...e,timeUnit:Ys(e.timeUnit)}:e}const TO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function K0n(e){return e==="quantitative"||e==="temporal"}function KUe(e){return e==="ordinal"||e==="nominal"}const wv=TO.quantitative,$re=TO.ordinal,yE=TO.temporal,Rre=TO.nominal,kx=TO.geojson;function X0n(e){if(e)switch(e=e.toLowerCase(),e){case"q":case wv:return"quantitative";case"t":case yE:return"temporal";case"o":case $re:return"ordinal";case"n":case Rre:return"nominal";case kx:return"geojson"}}const wu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},_W={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Q0n(e,t){const n=_W[e],r=_W[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const J0n={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function f_e(e){return J0n[e]}const XUe=new Set(["linear","log","pow","sqrt","symlog"]),QUe=new Set([...XUe,"time","utc"]);function JUe(e){return XUe.has(e)}const ZUe=new Set(["quantile","quantize","threshold"]),Z0n=new Set([...QUe,...ZUe,"sequential","identity"]),eyn=new Set(["ordinal","bin-ordinal","point","band"]);function Xs(e){return eyn.has(e)}function _l(e){return Z0n.has(e)}function tf(e){return QUe.has(e)}function vE(e){return ZUe.has(e)}const tyn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function nyn(e){return!rt(e)&&!!e.name}function eVe(e){return e==null?void 0:e.param}function ryn(e){return e==null?void 0:e.unionWith}function iyn(e){return ot(e)&&"field"in e}const syn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:h2n,domain:p2n,range:m2n,rangeMax:g2n,rangeMin:y2n,scheme:v2n,...oyn}=syn,ayn=Ne(oyn);function bW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return tf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return tf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return tf(e);case"nice":return tf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return _l(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function tVe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return ow(e)?void 0:r0n(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function uyn(e,t){return $n([$re,Rre],t)?e===void 0||Xs(e):t===yE?$n([wu.TIME,wu.UTC,void 0],e):t===wv?JUe(e)||vE(e)||e===void 0:!0}function lyn(e,t,n=!1){if(!vm(e))return!1;switch(e){case yi:case eo:case J0:case Px:case xc:case $f:return tf(t)||t==="band"?!0:t==="point"?!n:!1;case gm:case ty:case ym:case Z0:case ey:case i_:return tf(t)||vE(t)||$n(["band","point","ordinal"],t);case Ou:case wh:case Eh:return t!=="band";case ny:case Pu:return t==="ordinal"||vE(t)}}const Ha={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},nVe=Ha.arc,Z5=Ha.area,e8=Ha.bar,cyn=Ha.image,t8=Ha.line,n8=Ha.point,fyn=Ha.rect,SL=Ha.rule,rVe=Ha.text,Nre=Ha.tick,dyn=Ha.trail,Dre=Ha.circle,Mre=Ha.square,iVe=Ha.geoshape;function sy(e){return["line","area","trail"].includes(e)}function kA(e){return["rect","bar","image","arc"].includes(e)}const hyn=new Set(Ne(Ha));function ih(e){return e.type}const pyn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],myn=["fill","fillOpacity"],gyn=[...pyn,...myn],yyn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},d_e=Ne(yyn),vyn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},_yn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},byn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},sVe=Ne(byn);function Ev(e){return e&&e.band!=null}const wyn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},oVe=5,Eyn={binSpacing:1,continuousBandSize:oVe,minBandSize:.25,timeUnitBandPosition:.5},xyn={binSpacing:0,continuousBandSize:oVe,minBandSize:.25,timeUnitBandPosition:.5},Syn={thickness:1};function Tyn(e){return ih(e)?e.type:e}function Lre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Bre(e);return Ve(n)&&!wUe(n.aggregate)&&i&&tf(i.get("type"))?Cyn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Cyn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return sy(n.type)?r:fr("invalid",n,i)===null?[Ayn(e,t),r]:r}function Ayn(e,t){const n=Fre(e,!0),i=s_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Fre(e,t=!0){return kre(rt(e)?e:Je(e,{expr:"datum"}),!t)}function Iyn(e){const{datum:t}=e;return a_(t)?bv(t):`${Pr(t)}`}function N1(e,t,n,r){const i={};if(t&&(i.scale=t),Th(e)){const{datum:s}=e;a_(s)?i.signal=bv(s):It(s)?i.signal=s.signal:SO(s)?i.signal=s.expr:i.value=s}else i.field=Je(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function TL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!It(o)&&0<o&&o<1?"datum":void 0,u=Je(t,{expr:a,suffix:i}),l=n!==void 0?Je(n,{expr:a}):Je(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=It(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Oyn({scaleName:e,fieldDef:t}){const n=Je(t,{expr:"datum"}),r=Je(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Bre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qt(t)){const f=o==null?void 0:o.get("type");if(La(t)){c??(c=C0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Hr(d)||c&&h&&p===yE)return a!=null&&a.impute?N1(t,s,{binSuffix:"mid"},{offset:u}):c&&!Xs(f)?TL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):N1(t,s,OO(t,e)?{binSuffix:"range"}:{},{offset:u});if(co(d)){if(Ve(n))return TL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ue(MUe(e===yi?kf:bh))}}return N1(t,s,Xs(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(bf(t)){const f=t.value,d=u?{offset:u}:{};return{...B2(e,f),...d}}}return pn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function B2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Zr(t)}function xv(e){return e&&e!=="number"&&e!=="time"}function aVe(e,t,n){return`${e}(${t}${n?`, ${Pr(n)}`:""})`}const Pyn="  ";function jre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(xv(n))return nf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=uVe(e,r,i),a=_E(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return nf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return nf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ve(e)&&e.timeUnit===void 0)return nf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(wE(e)){const c=$yn({field:o,timeUnit:Ve(e)?(u=Ys(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:l_(e)&&((l=e.scale)==null?void 0:l.type)===wu.UTC});return c?{signal:c}:void 0}if(t=wW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ve(e)&&Hr(e.bin)){const c=Je(e,{expr:r,binSuffix:"end"});return{signal:CO(o,c,t,n,s)}}else return t||_E(e)==="quantitative"?{signal:`${fVe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function uVe(e,t,n){return Ve(e)?n?`${Je(e,{expr:t,suffix:"end"})}-${Je(e,{expr:t,suffix:"start"})}`:Je(e,{expr:t}):Iyn(e)}function nf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=uVe(e,r,i)),o!=="datum.value"&&Ve(e)&&Hr(e.bin)){const a=Je(e,{expr:r,binSuffix:"end"});return{signal:CO(o,a,t,n,s)}}return{signal:aVe(n,o,t)}}function lVe(e,t,n,r,i,s){var o;if(!(rt(r)&&xv(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&_E(e)==="quantitative"&&(i.normalizedNumberFormatType&&bE(e)&&e.stack==="normalize"||i.numberFormatType))){if(bE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return wW({type:"quantitative",config:i,normalizeStack:!0});if(wE(e)){const a=Ve(e)?(o=Ys(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:kyn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return wW({type:t,specifiedFormat:n,config:i})}}function cVe(e,t,n){var r;if(e&&(It(e)||e==="number"||e==="time"))return e;if(wE(t)&&n!=="time"&&n!=="utc")return Ve(t)&&((r=Ys(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function wW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(rt(t))return t;if(e===wv)return r?n.normalizedNumberFormat:n.numberFormat}function kyn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:HUe(t)}:r?void 0:n.timeFormat)}function fVe(e,t){return`format(${e}, "${t||""}")`}function h_e(e,t,n,r){return xv(n)?aVe(n,e,t):fVe(e,(rt(t)?t:void 0)??r.numberFormat)}function CO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return CO(e,t,i.numberFormat,i.numberFormatType,i);const s=h_e(e,n,r,i),o=h_e(t,n,r,i);return`${kre(e,!1)} ? "null" : ${s} + "${Pyn}" + ${o}`}function $yn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=rt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):z0n(t,e,s)}const r8="min",Ryn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function p_e(e){return e in Ryn}function dVe(e){return!!(e!=null&&e.encoding)}function Bd(e){return e&&(e.op==="count"||!!e.field)}function hVe(e){return e&&Ie(e)}function AO(e){return"row"in e||"column"in e}function zre(e){return!!e&&"header"in e}function i8(e){return"facet"in e}function Nyn(e){return e.param}function Dyn(e){return e&&!rt(e)&&"repeat"in e}function m_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Ure(e){return"sort"in e}function C0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ve(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Zp("timeUnitBandPosition",n,r);if(Hr(s))return .5}}function pVe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=ku(e),u=fr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ve(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Zp("timeUnitBandSize",r,i)};if(Hr(h)&&!Xs(s))return{band:1}}if(kA(r.type))return s?Xs(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function mVe(e,t,n,r){return Hr(e.bin)||e.timeUnit&&La(e)&&e.type==="temporal"?C0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function gVe(e){return e&&!!e.sort&&!e.field}function s8(e){return e&&"condition"in e}function o8(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Ve(t)}function IO(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Qt(t)}function Myn(e){const t=e==null?void 0:e.condition;return!!t&&(Ie(t)||bf(t))}function Ve(e){return e&&(!!e.field||e.aggregate==="count")}function _E(e){return e==null?void 0:e.type}function Th(e){return e&&"datum"in e}function yg(e){return La(e)&&!AL(e)||CL(e)}function g_e(e){return La(e)&&e.type==="quantitative"&&!e.bin||CL(e)}function CL(e){return Th(e)&&Jn(e.datum)}function Qt(e){return Ve(e)||Th(e)}function La(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function bf(e){return e&&"value"in e&&"value"in e}function l_(e){return e&&("scale"in e||"sort"in e)}function bE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function yVe(e){return e&&"legend"in e}function vVe(e){return e&&("format"in e||"formatType"in e)}function Lyn(e){return bu(e,["legend","axis","header","scale"])}function Fyn(e){return"op"in e}function Je(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(jyn(e))n=aUe("count");else{let o;if(!t.nofn)if(Fyn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Hr(a)?(o=EUe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?ry(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Jp(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!u_(l)&&(o=U0n(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?cre(n):t.expr?iUe(n,t.expr)+s:cc(n)+s}function AL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ve(e)&&!!e.bin;case"temporal":return!1}throw new Error($Ue(e.type))}function Byn(e){var t;return l_(e)&&vE((t=e.scale)==null?void 0:t.type)}function jyn(e){return e.aggregate==="count"}function zyn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Hr(r))return`${n} (binned)`;if(i&&!u_(i)){const a=(o=Ys(i))==null?void 0:o.unit;if(a)return`${n} (${J5(a).join("-")})`}else if(s)return ry(s)?`${n} for max ${s.argmax}`:Jp(s)?`${n} for min ${s.argmin}`:`${bO(s)} of ${n}`;return n}function Uyn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(ry(t))return`${i} for argmax(${t.argmax})`;if(Jp(t))return`${i} for argmin(${t.argmin})`;const s=r&&!u_(r)?Ys(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Hr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const _Ve=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Uyn(e);default:return zyn(e,t)}};let bVe=_Ve;function wVe(e){bVe=e}function Vyn(){wVe(_Ve)}function aw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Vre(e))==null?void 0:a.title;if(!Ve(e))return i??e.title;const s=e,o=r?Hre(s,t):void 0;return n?Yi(i,s.title,o):i??s.title??o}function Vre(e){if(bE(e)&&e.axis)return e.axis;if(yVe(e)&&e.legend)return e.legend;if(zre(e)&&e.header)return e.header}function Hre(e,t){return bVe(e,t)}function IL(e){if(vVe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Vre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Hyn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Ure(e)&&Ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!ry(n)&&!Jp(n))return"quantitative";if(l_(e)&&((s=e.scale)!=null&&s.type))switch(_W[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function sh(e){if(Ve(e))return e;if(o8(e))return e.condition}function ws(e){if(Qt(e))return e;if(IO(e))return e.condition}function EVe(e,t,n,r={}){if(rt(e)||Jn(e)||K0(e)){const i=rt(e)?"string":Jn(e)?"number":"boolean";return Ue(qgn(t,i,e)),{value:e}}return Qt(e)?OL(e,t,n,r):IO(e)?{...e,condition:OL(e.condition,t,n,r)}:e}function OL(e,t,n,r){if(vVe(e)){const{format:i,formatType:s,...o}=e;if(xv(s)&&!n.customFormatTypes)return Ue(u_e(t)),OL(o,t,n,r)}else{const i=bE(e)?"axis":yVe(e)?"legend":zre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(xv(o)&&!n.customFormatTypes)return Ue(u_e(t)),OL({...e,[i]:a},t,n,r)}}return Ve(e)?qre(e,t,r):qyn(e)}function qyn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Jn(n)?"quantitative":rt(n)?"nominal":a_(n)?"temporal":void 0,{...e,type:t}}function qre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!vre(r)&&!ry(r)&&!Jp(r)&&(Ue(Ggn(r)),delete a.aggregate),i&&(a.timeUnit=Ys(i)),o&&(a.field=`${o}`),Hr(s)&&(a.bin=a8(s,t)),co(s)&&!Ki(t)&&Ue(T0n(t)),La(a)){const{type:u}=a,l=X0n(u);u!==l&&(a.type=l),u!=="quantitative"&&wUe(r)&&(Ue(Wgn(u,r)),a.type="quantitative")}else if(!mUe(t)){const u=Hyn(a,t);a.type=u}if(La(a)){const{compatible:u,warning:l}=Wyn(a,t)||{};u===!1&&Ue(l)}if(Ure(a)&&rt(a.sort)){const{sort:u}=a;if(p_e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&p_e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(zre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function a8(e,t){return K0(e)?{maxbins:Zve(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Zve(t)}:e}const N_={compatible:!0};function Wyn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case xp:case Sp:case V5:return AL(e)?N_:{compatible:!1,warning:Qgn(t)};case yi:case eo:case J0:case Px:case Ou:case wh:case Eh:case wO:case EO:case H5:case _v:case q5:case W5:case i_:case xc:case $f:case G5:return N_;case Nf:case fc:case Rf:case Df:return n!==wv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:N_;case ym:case Z0:case ey:case ty:case gm:case mm:case pm:case kf:case bh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:N_;case Pu:case ny:return!AL(e)&&!Byn(e)?{compatible:!1,warning:Jgn(t)}:N_;case mE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:N_}}function wE(e){const{formatType:t}=IL(e);return t==="time"||!t&&Gyn(e)}function Gyn(e){return e&&(e.type==="temporal"||Ve(e)&&!!e.timeUnit)}function u8(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ys(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return SO(e)?a=e.expr:It(e)?a=e.signal:a_(e)?(o=!0,a=bv(e)):(rt(e)||Jn(e))&&o&&(a=`datetime(${Pr(e)})`,L0n(s)&&(Jn(e)&&e<1e4||rt(e)&&isNaN(Date.parse(e)))&&(a=bv({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Pr(e)}function xVe(e,t){const{type:n}=e;return t.map(r=>{const i=Ve(e)&&!u_(e.timeUnit)?e.timeUnit:void 0,s=u8(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function OO(e,t){return Hr(e.bin)?vm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const y_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function PO(e){return e==null?void 0:e.condition}const SVe=["domain","grid","labels","ticks","title"],Yyn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},TVe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Kyn={...TVe,style:1,labelExpr:1,encoding:1};function v_e(e){return!!Kyn[e]}const Xyn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},CVe=Ne(Xyn);function _m(e){return"mark"in e}class l8{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return _m(t)?Tyn(t.mark)===this.name:!1}}function D1(e,t){const n=e&&e[t];return n?Ie(n)?yv(n,r=>!!r.field):Ve(n)||o8(n):!1}function AVe(e,t){const n=e&&e[t];return n?Ie(n)?yv(n,r=>!!r.field):Ve(n)||Th(n)||IO(n):!1}function IVe(e,t){if(Ki(t)){const n=e[t];if((Ve(n)||Th(n))&&(KUe(n.type)||Ve(n)&&n.timeUnit)){const r=pre(t);return AVe(e,r)}}return!1}function Wre(e){return yv(Qmn,t=>{if(D1(e,t)){const n=e[t];if(Ie(n))return yv(n,r=>!!r.aggregate);{const r=sh(n);return r&&!!r.aggregate}}return!1})}function OVe(e,t){const n=[],r=[],i=[],s=[],o={};return Gre(e,(a,u)=>{if(Ve(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Vre(a),m=p==null?void 0:p.title;let g=Je(a,{forAs:!0});const y={...m?[]:{title:aw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(ry(c)?(v="argmax",g=Je({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Jp(c)?(v="argmin",g=Je({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),La(a)&&Hr(f)){if(r.push({bin:f,field:l,as:g}),n.push(Je(a,{binSuffix:"end"})),OO(a,u)&&n.push(Je(a,{binSuffix:"range"})),Ki(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",mUe(u)||(y.type=wv)}else if(d&&!u_(d)){i.push({timeUnit:d,field:l,as:g});const v=La(a)&&a.type!==yE&&"time";v&&(u===wO||u===_v?y.formatType=v:agn(u)?y.legend={formatType:v,...y.legend}:Ki(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Qyn(e,t,n){const r=lgn(t,n);if(r){if(r==="binned"){const i=e[t===kf?yi:eo];return!!(Ve(i)&&Ve(e[t])&&co(i.bin))}}else return!1;return!0}function Jyn(e,t,n,r){const i={};for(const s of Ne(e))pUe(s)||Ue(Xgn(s));for(let s of rgn){if(!e[s])continue;const o=e[s];if(xO(s)){const a=ngn(s),u=i[a];if(Ve(u)&&K0n(u.type)&&Ve(o)&&!u.timeUnit){Ue(Hgn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ue(Vgn),s=xc),!Qyn(e,s,t)){Ue(Q5(s,t));continue}if(s===gm&&t==="line"){const a=sh(e[s]);if(a!=null&&a.aggregate){Ue(Kgn);continue}}if(s===Ou&&(n?"fill"in e:"stroke"in e)){Ue(RUe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===EO||s===mE&&!Ie(o)&&!bf(o)||s===_v&&Ie(o)){if(o){if(s===mE){const a=e[s];if(gVe(a)){i[s]=a;continue}}i[s]=nt(o).reduce((a,u)=>(Ve(u)?a.push(qre(u,s)):Ue(vW(u,s)),a),[])}}else{if(s===_v&&o===null)i[s]=null;else if(!Ve(o)&&!Th(o)&&!bf(o)&&!s8(o)&&!It(o)){Ue(vW(o,s));continue}i[s]=EVe(o,s,r)}}return i}function c8(e,t){const n={};for(const r of Ne(e)){const i=EVe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Zyn(e){const t=[];for(const n of Ne(e))if(D1(e,n)){const r=e[n],i=nt(r);for(const s of i)Ve(s)?t.push(s):o8(s)&&t.push(s.condition)}return t}function Gre(e,t,n){if(e)for(const r of Ne(e)){const i=e[r];if(Ie(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function e1n(e,t,n,r){return e?Ne(e).reduce((i,s)=>{const o=e[s];return Ie(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function PVe(e,t){return Ne(t).reduce((n,r)=>{switch(r){case yi:case eo:case q5:case G5:case W5:case kf:case bh:case J0:case Px:case xc:case mm:case $f:case pm:case Rf:case Nf:case Df:case fc:case wO:case Pu:case i_:case _v:return n;case mE:if(e==="line"||e==="trail")return n;case EO:case H5:{const i=t[r];if(Ie(i)||Ve(i))for(const s of nt(i))s.aggregate||n.push(Je(s,{}));return n}case gm:if(e==="trail")return n;case Ou:case wh:case Eh:case ym:case Z0:case ey:case ny:case ty:{const i=sh(t[r]);return i&&!i.aggregate&&n.push(Je(i,{})),n}}},[])}function t1n(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ie(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function EW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Yre(t)}`:"";return{field:o+t.field,type:t.type,title:It(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Zyn(n).map(Lyn);return{tooltip:[...i,...xd(s,kn)]}}function Yre(e){const{title:t,field:n}=e;return Yi(t,n)}function Kre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Yre(n);return kVe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...rt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function kVe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...ih(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...K0(e[t])?{}:e[t]}}]:[]}function $Ve(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:Ck(s,n),continuousAxisChannelDef2:Ck(o,n),continuousAxisChannelDefError:Ck(a,n),continuousAxisChannelDefError2:Ck(u,n),continuousAxis:i}}function Ck(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ue(S0n(n,t)),r}else return e}function RVe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(ih(n)&&n.orient)return n.orient;if(yg(i)){if(yg(s)){const o=Ve(i)&&i.aggregate,a=Ve(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return wE(s)&&!wE(i)?"horizontal":"vertical"}return"horizontal"}else{if(yg(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const PL="boxplot",n1n=["box","median","outliers","rule","ticks"],r1n=new l8(PL,DVe);function NVe(e){return Jn(e)?"tukey":e}function DVe(e,{config:t}){e={...e,encoding:c8(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=ih(n)?n:{type:n};i&&Ue(kUe("boxplot"));const u=a.extent??t.boxplot.extent,l=fr("size",a,t),c=a.invalid,f=NVe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:b,boxOrient:E,customTooltipWithoutAggregatedField:w}=i1n(e,u,t),{color:x,size:S,...P}=_,A=Re=>Kre(a,g,m,Re,t.boxplot),O=A(P),z=A(_),D=A({...P,...S?{size:S}:{}}),R=EW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),N={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},L=f==="min-max"?R:EW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:L}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:L}),...O({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:L}),...O({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:L})],j=[...f!=="tukey"?V:[],...z({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...D({partName:"median",mark:{type:"tick",invalid:c,...ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:j};const H=`datum["lower_box_${m.field}"]`,U=`datum["upper_box_${m.field}"]`,k=`(${U} - ${H})`,$=`${H} - ${u} * ${k}`,q=`${U} + ${u} * ${k}`,F=`datum["${m.field}"]`,B={joinaggregate:MVe(m.field),groupby:y},Q={transform:[{filter:`(${$} <= ${F}) && (${F} <= ${q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:V},{tooltip:se,...ae}=P,{scale:ce,axis:le}=m,ge=Yre(m),ue=bu(le,["title"]),Fe=kVe(a,"outliers",t.boxplot,{transform:[{filter:`(${F} < ${$}) || (${F} > ${q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ge!==void 0?{title:ge}:{},...ce!==void 0?{scale:ce}:{},...Or(ue)?{}:{axis:ue}},...ae,...x?{color:x}:{},...w?{tooltip:w}:{}}})[0];let ke;const Ge=[...d,...h,B];return Fe?ke={transform:Ge,layer:[Fe,Q]}:(ke=Q,ke.transform.unshift(...Ge)),{...o,layer:[ke,{transform:p,layer:j}]}}function MVe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function i1n(e,t,n){const r=RVe(e,PL),{continuousAxisChannelDef:i,continuousAxis:s}=$Ve(e,r,PL),o=i.field,a=NVe(t),u=[...MVe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=t1n(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=OVe(h,n),_=r==="vertical"?"horizontal":"vertical",b=r,E=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:E,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const Xre="errorbar",s1n=["ticks","rule"],o1n=new l8(Xre,LVe);function LVe(e,{config:t}){e={...e,encoding:c8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=FVe(e,Xre,t);delete s.size;const c=Kre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function a1n(e,t){const{encoding:n}=e;if(u1n(n))return{orient:RVe(e,t),inputType:"raw"};const r=l1n(n),i=c1n(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qt(a)&&Qt(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qt(a)){if(yg(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qt(u)){if(yg(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qt(u)&&!Qt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qt(c)&&!Qt(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qt(a)&&Qt(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qt(a)){if(yg(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qt(l)){if(yg(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function u1n(e){return(Qt(e.x)||Qt(e.y))&&!Qt(e.x2)&&!Qt(e.y2)&&!Qt(e.xError)&&!Qt(e.xError2)&&!Qt(e.yError)&&!Qt(e.yError2)}function l1n(e){return Qt(e.x2)||Qt(e.y2)}function c1n(e){return Qt(e.xError)||Qt(e.xError2)||Qt(e.yError)||Qt(e.yError2)}function FVe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=ih(r)?r:{type:r};s&&Ue(kUe(t));const{orient:l,inputType:c}=a1n(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=$Ve(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=f1n(u,f,d,h,p,c,t,n),{[m]:b,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:x,...S}=i,{bins:P,timeUnits:A,aggregate:O,groupby:z,encoding:D}=OVe(S,n),R=[...O,...g],N=c!=="raw"?[]:z,L=EW(v,f,D,_);return{transform:[...a.transform??[],...P,...A,...R.length===0?[]:[{aggregate:R,groupby:N}],...y],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function f1n(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ue(x0n(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:bO(h)},{fieldPrefix:"upper_",titlePrefix:__e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:__e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:aw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:aw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:aw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ue(E0n(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:vv(vv(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function __e(e,t,n){return`${bO(e)} ${n} ${t}`}const Qre="errorband",d1n=["band","borders"],h1n=new l8(Qre,BVe);function BVe(e,{config:t}){e={...e,encoding:c8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=FVe(e,Qre,t),l=o,c=Kre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ue(c_e("interpolate")):l.tension&&Ue(c_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const jVe={};function Jre(e,t,n){const r=new l8(e,t);jVe[e]={normalizer:r,parts:n}}function p1n(){return Ne(jVe)}Jre(PL,DVe,n1n);Jre(Xre,LVe,s1n);Jre(Qre,BVe,d1n);const m1n=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],zVe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},UVe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},g1n=Ne(zVe),y1n=Ne(UVe),v1n={header:1,headerRow:1,headerColumn:1,headerFacet:1},VVe=Ne(v1n),HVe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],_1n={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},b1n={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},wf="_vgsid_",w1n={point:{on:"click",fields:[wf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Zre(e){return e==="legend"||!!(e!=null&&e.legend)}function k7(e){return Zre(e)&&ot(e)}function eie(e){return!!(e!=null&&e.select)}function qVe(e){const t=[];for(const n of e||[]){if(eie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function E1n(e){return f8(e)||nie(e)||tie(e)}function tie(e){return"concat"in e}function f8(e){return"vconcat"in e}function nie(e){return"hconcat"in e}function WVe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function oh(e){return ot(e)&&e.step!==void 0}function b_e(e){return e.view||e.width||e.height}const w_e=20,x1n={align:1,bounds:1,center:1,columns:1,spacing:1},S1n=Ne(x1n);function T1n(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(i8(e)&&!AO(e.facet)||tie(e))&&(i.columns=o),f8(e)&&(i.columns=1);for(const a of S1n)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Jn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function xW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function kL(e,t){const n=$L(e,t);return oh(n)?n.step:GVe}function $L(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Yi(n,{step:e.step})}const GVe=20,C1n={continuousWidth:200,continuousHeight:200,step:GVe},A1n={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:C1n,mark:_yn,arc:{},area:{},bar:Eyn,circle:{},geoshape:{},image:{},line:{},point:{},rect:xyn,rule:{color:"black"},square:{},text:{color:"black"},tick:Syn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:tyn,projection:{},legend:_1n,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:w1n,style:{},title:{},facet:{spacing:w_e},concat:{spacing:w_e},normalizedNumberFormat:".0%"},$h=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],E_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},x_e={blue:$h[0],orange:$h[1],red:$h[2],teal:$h[3],green:$h[4],yellow:$h[5],purple:$h[6],pink:$h[7],brown:$h[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function I1n(e={}){return{signals:[{name:"color",value:ot(e)?{...x_e,...e}:x_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function O1n(e){return{signals:[{name:"fontSize",value:ot(e)?{...E_e,...e}:E_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function P1n(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function YVe(e){const t=Ne(e||{}),n={};for(const r of t){const i=e[r];n[r]=PO(i)?SUe(i):Qu(i)}return n}function k1n(e){const t=Ne(e),n={};for(const r of t)n[r]=YVe(e[r]);return n}const $1n=[...sVe,...CVe,...VVe,"background","padding","legend","lineBreak","scale","style","title","view"];function KVe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=vx({},qt(A1n),n?P1n(n):{},t?I1n(t):{},r?O1n(r):{},s||{});i&&_x(o,"selection",i,!0);const a=bu(o,$1n);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Qu(o[u]));for(const u of sVe)o[u]&&(a[u]=ou(o[u]));for(const u of CVe)o[u]&&(a[u]=YVe(o[u]));for(const u of VVe)o[u]&&(a[u]=ou(o[u]));return o.legend&&(a.legend=ou(o.legend)),o.scale&&(a.scale=ou(o.scale)),o.style&&(a.style=k1n(o.style)),o.title&&(a.title=ou(o.title)),o.view&&(a.view=ou(o.view)),a}const R1n=new Set(["view",...hyn]),N1n=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],D1n={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...vyn};function M1n(e){e=qt(e);for(const t of N1n)delete e[t];if(e.axis)for(const t in e.axis)PO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of m1n)delete e.legend[t];if(e.mark){for(const t of d_e)delete e.mark[t];e.mark.tooltip&&ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(qVe(e.params)),delete e.params);for(const t of R1n){for(const r of d_e)delete e[t][r];const n=D1n[t];if(n)for(const r of n)delete e[t][r];F1n(e,t)}for(const t of p1n())delete e[t];L1n(e);for(const t in e)ot(e[t])&&Or(e[t])&&delete e[t];return Or(e)?void 0:e}function L1n(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=xUe(e.title);Or(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Or(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Or(r)?delete e.title:e.title=r}function F1n(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Or(s)||(e.style[n??t]=s),r||delete e[t]}function d8(e){return"layer"in e}function B1n(e){return"repeat"in e}function j1n(e){return!Ie(e.repeat)&&e.repeat.layer}class rie{map(t,n){return i8(t)?this.mapFacet(t,n):B1n(t)?this.mapRepeat(t,n):nie(t)?this.mapHConcat(t,n):f8(t)?this.mapVConcat(t,n):tie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(d8(t))return this.mapLayer(t,n);if(_m(t))return this.mapUnit(t,n);throw new Error(_re(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const z1n={zero:1,center:1,normalize:1};function U1n(e){return e in z1n}const V1n=new Set([nVe,e8,Z5,SL,n8,Dre,Mre,t8,rVe,Nre]),H1n=new Set([e8,Z5,nVe]);function D_(e){return Ve(e)&&_E(e)==="quantitative"&&!e.bin}function S_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ve(o)&&Ve(a))if(D_(o)&&D_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ve(o)&&!!o.aggregate,l=Ve(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(D_(o))return t;if(D_(a))return i}else{if(D_(o))return s&&n==="vertical"?void 0:t;if(D_(a))return s&&n==="horizontal"?void 0:i}}function q1n(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function XVe(e,t){var m,g;const n=ih(e)?e:{type:e},r=n.type;if(!V1n.has(r))return null;const i=S_e(t,"x",n)||S_e(t,"theta",n);if(!i)return null;const s=t[i],o=Ve(s)?Je(s,{}):void 0,a=q1n(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ve(y)?Je(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ve(f)?Je(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=ign.reduce((y,v)=>{if(v!=="tooltip"&&D1(t,v)){const _=t[v];for(const b of nt(_)){const E=sh(b);if(E.aggregate)continue;const w=Je(E,{});(!w||!l.has(w))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?K0(s.stack)?p=s.stack?"zero":null:p=s.stack:H1n.has(r)&&(p="zero"),!p||!U1n(p)||Wre(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==wu.LINEAR?(s!=null&&s.stack&&Ue(_0n(s.scale.type)),null):Qt(t[xh(i)])?(s.stack!==void 0&&Ue(v0n(i)),null):(Ve(s)&&s.aggregate&&!ggn.has(s.aggregate)&&Ue(b0n(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:sy(r),stackBy:h,offset:p})}function QVe(e,t,n){const r=ou(e),i=fr("orient",r,n);if(r.orient=K1n(r.type,t,i),i!==void 0&&i!==r.orient&&Ue(n0n(r.orient,i)),r.type==="bar"&&r.orient){const u=fr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:wyn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fr("opacity",r,n),o=fr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=G1n(r.type,t)),fr("cursor",r,n)===void 0&&(r.cursor=W1n(r,t,n)),r}function W1n(e,t,n){return t.href||e.href||fr("href",e,n)?"pointer":e.cursor}function G1n(e,t){if($n([n8,Nre,Dre,Mre],e)&&!Wre(t))return .7}function Y1n(e,t,{graticule:n}){if(n)return!1;const r=Zp("filled",e,t),i=e.type;return Yi(r,i!==n8&&i!==t8&&i!==SL)}function K1n(e,t,n){switch(e){case n8:case Dre:case Mre:case rVe:case fyn:case cyn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case e8:if(Ve(r)&&(co(r.bin)||Ve(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ve(i)&&(co(i.bin)||Ve(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ve(r)&&r.type===wv&&!Hr(r.bin)||CL(r))&&Ve(i)&&co(i.bin)?"horizontal":"vertical";if(!o)return(Ve(i)&&i.type===wv&&!Hr(i.bin)||CL(i))&&Ve(r)&&co(r.bin)?"vertical":"horizontal"}case SL:if(s&&!(Ve(r)&&co(r.bin))&&o&&!(Ve(i)&&co(i.bin)))return;case Z5:if(o)return Ve(i)&&co(i.bin)?"horizontal":"vertical";if(s)return Ve(r)&&co(r.bin)?"vertical":"horizontal";if(e===SL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case t8:case Nre:{const a=g_e(r),u=g_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=La(r)&&r.type===yE,c=La(i)&&i.type===yE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function X1n(e){const{point:t,line:n,...r}=e;return Ne(r).length>1?r:r.type}function Q1n(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:bu(e[t],["point","line"])});return e}function $7(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ot(t.point)?t.point:{}:void 0}function T_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class J1n{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(_m(t)){const{mark:r,encoding:i}=t,s=ih(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!$7(s,n[s.type],i);case"area":return!!$7(s,n[s.type],i)||!!T_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=c8(l,i),d=ih(a)?a:{type:a},h=$7(d,i[d.type],f),p=d.type==="area"&&T_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:X1n({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:bu(f,["shape"])}],g=XVe(QVe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=bu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...hE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...hE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Q1n(i)})}}function Z1n(e,t){return t?AO(e)?ZVe(e,t):JVe(e,t):e}function R7(e,t){return t?ZVe(e,t):e}function SW(e,t,n){const r=t[e];if(Dyn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ue(Mgn(r.repeat));return}return t}function JVe(e,t){if(e=SW("field",e,t),e!==void 0){if(e===null)return null;if(Ure(e)&&Bd(e.sort)){const n=SW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function C_e(e,t){if(Ve(e))return JVe(e,t);{const n=SW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function A_e(e,t){if(Qt(e)){const n=C_e(e,t);if(n)return n;if(s8(e))return{condition:e.condition}}else{if(IO(e)){const n=C_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function ZVe(e,t){const n={};for(const r in e)if(Nt(e,r)){const i=e[r];if(Ie(i))n[r]=i.map(s=>A_e(s,t)).filter(s=>s);else{const s=A_e(i,t);s!==void 0&&(n[r]=s)}}return n}class evn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(_m(t)){const{encoding:n,mark:r}=t;if(r==="line"||ih(r)&&r.type==="line")for(const i of tgn){const s=s_(i),o=n[s];if(n[i]&&(Ve(o)&&!co(o.bin)||Th(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ue(t0n(!!i.x2,!!i.y2)),r({...t,mark:ot(s)?{...s,type:"rule"}:"rule"},n)}}class tvn extends rie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[r1n,o1n,h1n,new J1n,new evn]}map(t,n){if(_m(t)){const r=D1(t.encoding,xp),i=D1(t.encoding,Sp),s=D1(t.encoding,V5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=R7(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return j1n(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${gi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ie(r)&&t.columns&&(t=bu(t,["columns"]),Ue(o_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ie(r)&&r.row||[u?u.row:null],f=!Ie(r)&&r.column||[u?u.column:null],d=Ie(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ie(r)?`${gi(p)}`:(r.row?`row_${gi(m)}`:"")+(r.column?`column_${gi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(bu(_,["data"]))}const h=Ie(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return AO(r)&&t.columns&&(t=bu(t,["columns"]),Ue(o_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=O_e({parentProjection:o,projection:i}),l=I_e({parentEncoding:s,encoding:R7(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=R7(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ue(Zgn([...r?[xp]:[],...i?[Sp]:[]]));const o={},a={};for(const u of[xp,Sp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Z1n(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:I_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:O_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function I_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ne(e),...Ne(t)]);for(const s of i){const o=t[s],a=e[s];if(Qt(o)){const u={...a,...o};r[s]=u}else IO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||bf(a)||It(a)||Qt(a)||Ie(a))&&(r[s]=a)}}else r=t;return!r||Or(r)?void 0:r}function O_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ue(Ugn({parentProjection:t,projection:n})),n??t}function iie(e){return"filter"in e}function nvn(e){return(e==null?void 0:e.stop)!==void 0}function eHe(e){return"lookup"in e}function rvn(e){return"data"in e}function ivn(e){return"param"in e}function svn(e){return"pivot"in e}function ovn(e){return"density"in e}function avn(e){return"quantile"in e}function uvn(e){return"regression"in e}function lvn(e){return"loess"in e}function cvn(e){return"sample"in e}function fvn(e){return"window"in e}function dvn(e){return"joinaggregate"in e}function hvn(e){return"flatten"in e}function pvn(e){return"calculate"in e}function tHe(e){return"bin"in e}function mvn(e){return"impute"in e}function gvn(e){return"timeUnit"in e}function yvn(e){return"aggregate"in e}function vvn(e){return"stack"in e}function _vn(e){return"fold"in e}function bvn(e){return"extent"in e&&!("density"in e)}function wvn(e){return e.map(t=>iie(t)?{filter:sw(t.filter,Y0n)}:t)}class Evn extends rie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=P_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=P_e(t,n),t.encoding){const r={};for(const[i,s]of S0(t.encoding))r[i]=nHe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:S0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of xo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function P_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(iie(s))return{filter:TW(s,t)};if(tHe(s)&&o_(s.bin))return{...s,bin:rHe(s.bin)};if(eHe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function nHe(e,t){var r,i;const n=qt(e);if(Ve(n)&&o_(n.bin)&&(n.bin=rHe(n.bin)),l_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(s8(n))if(Ie(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:TW(s,t)}});else{const{selection:s,param:o,test:a,...u}=nHe(n.condition,t);n.condition=o?n.condition:{...u,test:TW(n.condition,t)}}return n}function rHe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function TW(e,t){const n=r=>sw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):sw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class CW extends rie{map(t,n){const r=n.selections??[];if(t.params&&!_m(t)){const i=[];for(const s of t.params)eie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(rt(a)&&(a===t.name||i.includes(a))||Ie(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=CW.prototype[e];CW.prototype[e]=function(n,r){return t.call(this,n,xvn(n,r))}}function xvn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function iHe(e,t){t===void 0&&(t=KVe(e.config));const n=Avn(e,t),{width:r,height:i}=e,s=Ivn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Svn=new tvn,Tvn=new Evn,Cvn=new CW;function Avn(e,t={}){const n={config:t};return Cvn.map(Svn.map(Tvn.map(e,n),n),n)}function k_e(e){return rt(e)?{type:e}:e??{}}function Ivn(e,t,n){let{width:r,height:i}=t;const s=_m(e)||d8(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ue(n_e("width")),r=void 0),i=="container"&&(Ue(n_e("height")),i=void 0));const a={type:"pad",...o,...n?k_e(n.autosize):{},...k_e(e.autosize)};if(a.type==="fit"&&!s&&(Ue(Tgn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ue(r_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ue(r_e("height")),!nl(a,{type:"pad"}))return a}function Ovn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Pvn(e){return e?`fit-${Y5(e)}`:"fit"}const kvn=["background","padding"];function $_e(e,t){const n={};for(const r of kvn)e&&e[r]!==void 0&&(n[r]=Qu(e[r]));return t&&(n.params=e.params),n}class bm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new bm(qt(this.explicit),qt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Yi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ne(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Zf(e){return{explicit:!0,value:e}}function Uu(e){return{explicit:!1,value:e}}function sHe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:h8(t,n,r,i)}}function h8(e,t,n,r){return e.explicit&&t.explicit&&Ue(f0n(n,r,e.value,t.value)),e}function A0(e,t,n,r,i=h8){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:nl(e.value,t.value)?e:i(e,t,n,r)}class $vn extends bm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function EE(e){return"url"in e}function $A(e){return"values"in e}function oHe(e){return"name"in e&&!EE(e)&&!$A(e)&&!qg(e)}function qg(e){return e&&(aHe(e)||uHe(e)||sie(e))}function aHe(e){return"sequence"in e}function uHe(e){return"sphere"in e}function sie(e){return"graticule"in e}var zr;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(zr||(zr={}));function lHe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=cc(i.field),i}function Sv(e,t=!0,n=ua){if(Ie(e)){const r=e.map(i=>Sv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(a_(e))return n(t?bv(e):M0n(e));return t?n(Pr(e)):e}function Rvn(e,t){for(const n of xo(e.component.selection??{})){const r=n.name;let i=`${r}${O0}, ${n.resolve==="global"?"true":`{unit: ${M1(e)}}`}`;for(const s of y8)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+f_n,on:[{events:{signal:n.name+O0},update:`modify(${Xe(n.name+Tv)}, ${i})`}]})}return oie(t)}function Nvn(e,t){if(e.component.selection&&Ne(e.component.selection).length){const n=Xe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Q0("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return oie(t)}function Dvn(e,t){let n=!1;for(const r of xo(e.component.selection??{})){const i=r.name,s=Xe(i+Tv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${AHe}(${s}, ${Xe(a)}${u}`})}n=!0;for(const a of y8)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),oie(t)}function Mvn(e,t){const n=[...t],r=M1(e,{escape:!1});for(const i of xo(e.component.selection??{})){const s={name:i.name+Tv};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:wf}}]),i.init){const a=i.project.items.map(lHe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[wf]:Sv(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Sv(u,!1)}))}n.filter(a=>a.name===i.name+Tv).length||n.push(s)}return n}function cHe(e,t){for(const n of xo(e.component.selection??{}))for(const r of y8)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Lvn(e,t){for(const n of e.children)Di(n)&&(t=cHe(n,t));return t}function Fvn(e,t,n,r){const i=$He(e,t.param,t);return{signal:_l(n.get("type"))&&Ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function oie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Sr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ue(Bgn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Pa extends Sr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${oUe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function N7(e){return e.as!==void 0}function R_e(e){return`${e}_end`}class jd extends Sr{clone(){return new jd(null,qt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(u_(u)){if(Di(n)){const{mark:c,markDef:f,config:d}=n,h=C0({fieldDef:s,markDef:f,config:d});(kA(c)||h)&&(l={timeUnit:Ys(u),field:a})}}else l={as:Je(s,{forAs:!0}),field:a,timeUnit:u};if(Di(n)){const{mark:c,markDef:f,config:d}=n,h=C0({fieldDef:s,markDef:f,config:d});kA(c)&&Ki(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[kn(l)]=l)}return i},{});return Or(r)?null:new jd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ys(r),o={...i,timeUnit:s};return new jd(t,{[kn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of S0(this.timeUnits)){const s=N7(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(xo(this.timeUnits).map(t=>N7(t)?t.as:R_e(t.field)))}dependentFields(){return new Set(xo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${kn(this.timeUnits)}`}assemble(){const t=[];for(const n of xo(this.timeUnits)){const{rectBandPosition:r}=n,i=Ys(n.timeUnit);if(N7(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:cc(s),type:"timeunit",...a?{units:J5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...N_e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=fHe({timeUnit:i,field:o}),u=R_e(o);t.push({type:"formula",expr:a,as:u}),t.push(...N_e([o,u],r,i))}}return t}}const p8="offsetted_rect_start",m8="offsetted_rect_end";function fHe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=UUe(r),{part:o,step:a}=WUe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function N_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:D_e([fHe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${p8}`},{type:"formula",expr:D_e([i,s],n+.5),as:`${e}_${m8}`}]}return[]}function D_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const kO="_tuple_fields";class Bvn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const jvn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Bvn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=gi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=gi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?nt(n.value):null;let{fields:d,encodings:h}=ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ot(p))for(const m of Ne(p))egn(m)?(h||(h=[])).push(m):l==="interval"?(Ue(Dgn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ue(Cgn(p,m.aggregate));continue}else if(!g){Ue(s_e(p));continue}if(m.timeUnit&&!u_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[kn(y)]=y}if(!s[g]){const y=l==="interval"&&vm(p)&&_l(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===wf,dUe(p)?(v.geoChannel=p,v.channel=fUe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ue(s_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===wf}f&&(t.init=f.map(p=>i.items.map(m=>ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Or(o)||(i.timeUnit=new jd(null,o))},signals:(e,t,n)=>{const r=t.name+kO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(lHe)})}},Tp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!vm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ue(Pgn),!s||!_l(o)){Ue(Ogn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||M_e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(AHe)>=0)i.update=`{${r.map(o=>`${Xe(cc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Xe(cc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!M_e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function AW(e,t){return`domain(${Xe(e.scaleName(t))})`}function M_e(e){return e.parent&&Mx(e.parent)&&!e.parent.parent}const uw="_brush",dHe="_scale_trigger",VS="geo_interval_init_tick",hHe="_init",zvn="_center",Uvn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ot(n.select)?n.select:{}};i.fields=[wf],i.encodings||(i.encodings=n.value?Ne(n.value):[Nf,Rf]),n.select={type:"interval",...i}}if(t.translate&&!Tp.defined(t)){const i=`!event.item || event.item.mark.name !== ${Xe(t.name+uw)}`;for(const s of t.events){if(!s.between){Ue(`${s} is not an ordered event stream for interval selections.`);continue}const o=nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+O0,s=xo(t.project.hasChannel).filter(a=>a.channel===yi||a.channel===eo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Vvn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Xe(e.projectionName()),u=e.projectionName()+zvn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+hHe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(w=>w.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Xe(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${M1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,b=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...o?[{signal:VS}]:[]],update:_}]})}else{if(!Tp.defined(t)){const l=r+dHe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Xe(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=_l(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${M1(e)}, fields: ${r+kO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Sv(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Di(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===VS).length||n.unshift({name:VS,value:null,on:[{events:"timer{1}",update:`${VS} === null ? {} : ${VS}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Xe(t.name+Tv)})`;if(Tp.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ne(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${M1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ne(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+uw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+uw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Vvn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Xe(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===yi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Tp.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Sv(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+dHe},update:_l(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Sv(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===yi?0:1,h=t.name+hHe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Hvn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+kO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=xo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+uw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${M1(e)}, `;if(t.project.hasSelectionId)l+=`${wf}: ${o}[${Xe(wf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Xe(e.vgField(d.channel,{}))}], ${o}[${Xe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Xe(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+O0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function $x(e,t,n,r){const i=s8(t)&&t.condition,s=r(t);if(i){const a=nt(i).map(u=>{const l=r(u);if(Nyn(u)){const{param:c,empty:f}=u;return{test:kHe(e,{param:c,empty:f}),...l}}else return{test:DL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function aie(e,t="text"){const n=e.encoding[t];return $x(e,n,t,r=>g8(r,e.config))}function g8(e,t,n="datum"){if(e){if(bf(e))return Zr(e.value);if(Qt(e)){const{format:r,formatType:i}=IL(e);return jre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function pHe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ie(o))return{tooltip:L_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return $x(e,o,"tooltip",u=>{const l=g8(u,i,a);if(l)return l;if(u===null)return;let c=fr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),rt(c))return{value:c};if(ot(c))return It(c)?c:c.content==="encoding"?L_e(n,s,i,t):{signal:a}})}}function mHe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=s_(f),h=La(c)?c:{...c,type:e[d].type},p=h.title||Hre(h,i),m=nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Ki(f)){const y=f==="x"?"x2":"y2",v=sh(e[y]);if(co(h.bin)&&v){const _=Je(h,{expr:o}),b=Je(v,{expr:o}),{format:E,formatType:w}=IL(h);g=CO(_,b,E,w,i),s[y]=!0}}if((Ki(f)||f===xc||f===$f)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=IL(h);g=jre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=g8(h,i,o).signal),a.push({channel:f,key:m,value:g})}Gre(e,(c,f)=>{Ve(c)?u(c,f):o8(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function L_e(e,t,n,{reactiveGeom:r}={}){const i=mHe(e,t,n,{reactiveGeom:r}),s=S0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function qvn(e){const{markDef:t,config:n}=e,r=fr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Wvn(e),...Gvn(e)}}function Wvn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Egn?{}:{ariaRoleDescription:{value:t}}}function Gvn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return $x(e,s,"description",u=>g8(u,e.config));const o=fr("description",n,r);if(o!=null)return{description:Zr(o)};if(r.aria===!1)return{};const a=mHe(t,i,r);if(!Or(a))return{description:{signal:S0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function zs(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=fr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Zr(u)));const l=i[e];return $x(t,l,o??e,c=>Bre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function gHe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fr("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Zr(u)}:{},...l?{stroke:Zr(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ue(RUe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...zs("color",e,{vgChannel:c,defaultValue:o?u:l}),...zs("fill",e,{defaultValue:r.fill?u:void 0}),...zs("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Yvn(e){const{encoding:t,mark:n}=e,r=t.order;return!sy(n)&&bf(r)?$x(e,r,"zindex",i=>Zr(i.value)):{}}function xE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Bre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Zr(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Ko(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[xh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=xE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=uie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Ki(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Kvn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Kvn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qt(n)&&i&&t===i.fieldChannel){if(Ve(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return TL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return N1(n,r,{suffix:"end"},{offset:s})}return Lre(e)}function uie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=s_(n),u=T0(n),l=fr(n,s,o,{vgChannel:u});if(l!==void 0)return B2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!$n([wu.LOG,wu.TIME,wu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[ku(n)],mult:.5}}}}const Xvn={left:"x",center:"xc",right:"x2"},Qvn={top:"y",middle:"yc",bottom:"y2"};function yHe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return T0(e);const i=e==="x"?"align":"baseline",s=fr(i,t,n);let o;return It(s)?(Ue(e0n(i)),o=void 0):o=s,e==="x"?Xvn[o||(r==="top"?"left":"center")]:Qvn[o||r]}function RL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?vHe(e,t,{defaultPos:n,defaultPos2:r}):Ko(e,t,{defaultPos:n})}function vHe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=xh(e),a=ku(e),u=Jvn(t,r,o),l=u[a]?yHe(e,i,s):T0(e);return{...Ko(e,t,{defaultPos:n,vgChannel:l}),...u}}function Jvn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=s_(n),l=ku(n),c=T0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?xE({channel:n,markDef:s,encoding:r,model:e}):xE({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=ku(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Zvn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:Ak(n,s)||Ak(n,{[n]:EL(n,s,a.style),[l]:EL(l,s,a.style)})||Ak(n,a[i])||Ak(n,a.mark)||{[c]:uie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Zvn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?N1(t,s,{suffix:"start"},{offset:u}):Lre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function Ak(e,t){const n=ku(e),r=T0(e);if(t[r]!==void 0)return{[r]:B2(e,t[r])};if(t[e]!==void 0)return{[r]:B2(e,t[e])};if(t[n]){const i=t[n];if(Ev(i))Ue(Ygn(n));else return{[n]:B2(e,i)}}}function I0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=xh(t),a=ku(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fr("size",i,n,{vgChannel:a}),p=gUe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ve(u)&&(Hr(u.bin)||co(u.bin)||u.timeUnit&&!l)&&!(h&&!Ev(h))&&!r[p]&&!Xs(f)?n_n({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qt(u)&&Xs(f)||m)&&!l?t_n(u,t,e):vHe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function e_n(e,t,n,r,i,s,o){if(Ev(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Zp("minBandSize",{type:o},r);return{signal:c?`max(${ef(c)}, ${l})`:l}}else i.band!==1&&(Ue(i0n(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(It(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(iy(u)&&Jn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Yi(u,o==="bar"?l:c);if(It(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Jn(f))return{signal:`${1-f} * ${e}`}}return{value:kL(r.view,e)-2}}function t_n(e,t,n){var P,A;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ku(t),f=xh(t),d=gUe(t),h=n.scaleName(d),p=n.getScaleComponent(pre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=zs("size",n,{vgChannel:c,defaultRef:Zr(r.size)}):Ue(u0n(r.type)));const y=!!g,v=pVe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(P=l||p)==null?void 0:P.get("type"),useVlSizeChannel:m});g=g||{[c]:e_n(c,h||u,p||l,s,v,!!e,r.type)};const _=((A=l||p)==null?void 0:A.get("type"))==="band"&&Ev(v)&&!y?"top":"middle",b=yHe(t,r,s,_),E=b==="xc"||b==="yc",{offset:w,offsetType:x}=xE({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),S=Lre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:w,defaultRef:uie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?x==="encoding"?0:.5:It(v)?{signal:`(1-${v})/2`}:Ev(v)?(1-v.band)/2:0});if(c)return{[b]:S,...g};{const O=T0(f),z=g[c],D=w?{...z,offset:w}:z;return{[b]:S,[O]:Ie(S)?[S[0],{...S[1],offset:D}]:{...S,offset:D}}}}function F_e(e,t,n,r,i,s,o){if(cUe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(It(n)||It(i)||It(r)||s){const l=ef(n),c=ef(i),f=ef(r),d=ef(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function n_n({fieldDef:e,fieldDef2:t,channel:n,model:r}){var A;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=pVe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(A=r.component.axes[n])==null?void 0:A[0],h=(d==null?void 0:d.get("translate"))??.5,p=Ki(n)?fr("binSpacing",s,i)??0:0,m=xh(n),g=T0(n),y=T0(m),v=Zp("minBandSize",s,i),{offset:_}=xE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:b}=xE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=Oyn({fieldDef:e,scaleName:u}),w=F_e(n,p,c,h,_,v,E),x=F_e(m,p,c,h,b??_,v,E),S=It(f)?{signal:`(1-${f.signal})/2`}:Ev(f)?(1-f.band)/2:.5,P=C0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Hr(e.bin)||e.timeUnit){const O=e.timeUnit&&P!==.5;return{[y]:B_e({fieldDef:e,scaleName:u,bandPosition:S,offset:x,useRectOffsetField:O}),[g]:B_e({fieldDef:e,scaleName:u,bandPosition:It(S)?{signal:`1-${S.signal}`}:1-S,offset:w,useRectOffsetField:O})}}else if(co(e.bin)){const O=N1(e,u,{},{offset:x});if(Ve(t))return{[y]:O,[g]:N1(t,u,{},{offset:w})};if(o_(e.bin)&&e.bin.step)return{[y]:O,[g]:{signal:`scale("${u}", ${Je(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}Ue(MUe(m))}function B_e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return TL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:p8,endSuffix:m8}:{}})}const r_n=new Set(["aria","width","height"]);function Sc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?gHe(e):{};return{...i_n(e.markDef,t),...j_e(e,"fill",n),...j_e(e,"stroke",r),...zs("opacity",e),...zs("fillOpacity",e),...zs("strokeOpacity",e),...zs("strokeWidth",e),...zs("strokeDash",e),...Yvn(e),...pHe(e),...aie(e,"href"),...qvn(e)}}function j_e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(fr("invalid",s,r)==="hide"&&n&&!sy(i)){const a=s_n(e,{invalid:!0,channels:K5});if(a)return{[t]:[{test:a,value:null},...nt(n)]}}return n?{[t]:n}:{}}function i_n(e,t){return wgn.reduce((n,r)=>(!r_n.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Zr(e[r])),n),{})}function s_n(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&_l(u)&&(s[l]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Fre(o,t)).join(` ${s} `)}}function lie(e){const{config:t,markDef:n}=e;if(fr("invalid",n,t)){const i=o_n(e,{channels:Sh});if(i)return{defined:{signal:i}}}return{}}function o_n(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&_l(l)&&(s[c]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Fre(o,t)).join(` ${s} `)}}function z_e(e,t){if(t!==void 0)return{[e]:Zr(t)}}const D7="voronoi",_He={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(D7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(sy(s))return Ue(Agn(s)),n;const o={name:e.getName(D7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...pHe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(D7)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},bHe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Zre(e.bind),parse:(e,t,n)=>IHe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=_He.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=gi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Sv(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Xe(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+O0)[0],o=r+kO,a=i.items.map(l=>gi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},NL="_toggle",wHe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+NL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+O0,r=t.name+NL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${M1(e)}}, `)+`${r} ? ${n} : null`}},a_n={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=rt(t.clear)?Q0(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(bHe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===gi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+O0);r(i,"null"),wHe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+NL),r(i,"false"))}return n}},EHe={defined:e=>{const t=e.resolve==="global"&&e.bind&&Zre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==wf;return t&&!n&&Ue(kgn),t&&n},parse:(e,t,n)=>{const r=qt(n);if(r.select=rt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},IHe(t,r),ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=k7(t.bind)?t.bind.legend:"click",s=rt(i)?Q0(i,"view"):nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=k7(t.bind)&&t.bind.legend,s=o=>a=>{const u=qt(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${gi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+O0),o=r+kO,a=i.items.filter(d=>d.hasLegend).map(d=>gi(`${r}_${gi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+NL),f=k7(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function u_n(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of xo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&EHe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const xHe="_translate_anchor",SHe="_translate_delta",l_n={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Tp.defined(t),s=r+xHe,{x:o,y:a}=t.project.hasChannel;let u=Q0(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+uw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?AW(e,yi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?AW(e,eo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+SHe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&U_e(e,t,o,"width",n),a!==void 0&&U_e(e,t,a,"height",n),n}};function U_e(e,t,n,r,i){const s=t.name,o=s+xHe,a=s+SHe,u=n.channel,l=Tp.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===yi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?b:`clampRange(${b}, 0, ${f})`})}const THe="_zoom_anchor",CHe="_zoom_delta",c_n={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Tp.defined(t),s=r+CHe,{x:o,y:a}=t.project.hasChannel,u=Xe(e.scaleName(yi)),l=Xe(e.scaleName(eo));let c=Q0(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+uw,f))),n.push({name:r+THe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&V_e(e,t,o,"width",n),a!==void 0&&V_e(e,t,a,"height",n),n}};function V_e(e,t,n,r,i){const s=t.name,o=n.channel,a=Tp.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?AW(e,o):u.name,h=s+CHe,p=`${s}${THe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Tv="_store",O0="_tuple",f_n="_modify",AHe="vlSelectionResolve",y8=[Hvn,Uvn,jvn,wHe,bHe,Tp,EHe,a_n,l_n,c_n,_He];function d_n(e){let t=e.parent;for(;t&&!al(t);)t=t.parent;return t}function M1(e,{escape:t}={escape:!0}){let n=t?Xe(e.name):e.name;const r=d_n(e);if(r){const{facet:i}=r;for(const s of Xl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Xe(r.vgField(s))}])`)}return n}function cie(e){return xo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function IHe(e,t){(rt(t.select)||!t.select.on)&&delete e.events,(rt(t.select)||!t.select.clear)&&delete e.clear,(rt(t.select)||!t.select.toggle)&&delete e.toggle}function IW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...IW(e.object)),t.push(...IW(e.property))),t)}function OHe(e){return e.object.type==="MemberExpression"?OHe(e.object):e.object.name==="datum"}function PHe(e){const t=One(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&OHe(r)&&n.add(IW(r).slice(1).join("."))}),n}class Rx extends Sr{clone(){return new Rx(null,this.model,qt(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=DL(this.model,this.filter,this),this._dependentFields=PHe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function h_n(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=gi(i.name),o=i.select,a=rt(o)?o:o.type,u=ot(o)?qt(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=qt(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:rt(u.on)?Q0(u.on,"scope"):nt(qt(u.on))},f=qt(i);for(const d of y8)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function kHe(e,t,n,r="datum"){const i=rt(t)?t:t.param,s=gi(i),o=Xe(s+Tv);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Xe(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function $He(e,t,n){const r=gi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ue(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Xe(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ue((a.length?"Multiple ":"No ")+`matching ${Xe(i)} encoding found for selection ${Xe(n.param)}. Using "field": ${Xe(s)}.`)):s=a[0].field}return`${o.name}[${Xe(cc(s))}]`}function p_n(e,t){for(const[n,r]of S0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Pa(new Rx(t,e,{param:n}),i,zr.Lookup,e.component.data.outputNodeRefCounts)}}function DL(e,t,n){return F2(t,r=>rt(r)?r:q0n(r)?kHe(e,r,n):YUe(r))}function m_n(e,t){if(e)return Ie(e)&&!qm(e)?e.map(n=>Hre(n,t)).join(", "):e}function M7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function MT(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Yyn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(PO(m)){const{condition:g,...y}=m,v=nt(g),_=y_e[h];if(_){const{vgProp:b,part:E}=_,w=[...v.map(x=>{const{test:S,...P}=x;return{test:DL(null,S),...P}}),y];M7(c,E,b,w),delete c[h]}else if(_===null){const b={signal:v.map(E=>{const{test:w,...x}=E;return`${DL(null,w)} ? ${t_e(x)} : `}).join("")+t_e(y)};c[h]=b}}else if(It(m)){const g=y_e[h];if(g){const{vgProp:y,part:v}=g;M7(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Or(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Yi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&It(c.encode.labels.update.text)&&(p=vv(a,"datum.label",c.encode.labels.update.text.signal)),M7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of SVe)e.hasAxisPart(p)||delete c.encode[p];Or(c.encode)&&delete c.encode}const h=m_n(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Yi(l,0)}}}}function RHe(e){const{axes:t}=e.component,n=[];for(const r of Sh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function g_n(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>MT(i,"grid",t)),...r.map(i=>MT(i,"grid",t)),...n.map(i=>MT(i,"main",t)),...r.map(i=>MT(i,"main",t))].filter(i=>i)}function H_e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ne(o),...Ne(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${ef(o[c])} : ${ef(a[c])}`};return l}return t[i]})])}function y_n(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:JUe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=It(n)?"axisOrient":`axis${bO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:H_e(a,r,e,n),vgAxisConfig:H_e(u,r,e,n),axisConfigStyle:v_n([...u,...a],r)}}function v_n(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function OW(e,t,n,r={}){var s;const i=CUe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const q_e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??__n(n,e),gridScale:({model:e,channel:t})=>b_n(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||DHe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||NHe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??E_n(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??x_n(t.type,n,Ve(t)&&!!t.timeUnit,Ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??T_n({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:C_n,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=MHe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return IUe(i?[m_e(i)]:[],Ve(o)?[m_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>A_n(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??I_n(n,t)};function __n(e,t){return!Xs(e)&&Ve(t)&&!Hr(t==null?void 0:t.bin)&&!co(t==null?void 0:t.bin)}function b_n(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function w_n(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return It(s)?s:PA(s);{const{configValue:o}=OW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?PA(o):n===yi&&$n([Rre,$re],e.type)&&!(Ve(e)&&e.timeUnit)?270:void 0}}function PW(e){return`(((${e.signal} % 360) + 360) % 360)`}function NHe(e,t,n,r){if(e!==void 0)if(n==="x"){if(It(e)){const i=PW(e),s=It(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(It(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(It(e)){const i=PW(e),s=It(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(It(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function DHe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(It(e)){const o=PW(e),a=It(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(It(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function E_n(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function x_n(e,t,n,r){if(n&&!ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function S_n(e){return e==="x"?"bottom":"left"}function T_n({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Xs(t)&&t!=="log"){if(Ve(e)){if(Hr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=Ys(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function C_n({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ve(t)){const{timeUnit:n}=t;if(n){const r=qUe(n);if(r)return{signal:r}}}}function MHe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return OUe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function A_n(e,t){const n=e.values;if(Ie(n))return xVe(t,n);if(It(n))return n}function I_n(e,t){return e==="rect"&&AL(t)?1:0}class SE extends Sr{clone(){return new SE(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=PHe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(l_(r)&&hVe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${YUe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new SE(t,{calculate:u,as:TE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${kn(this.transform)}`}}function TE(e,t,n){return Je(e,{prefix:t,suffix:"sort_index",...n})}function v8(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function CE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Yi((t||{})[e],i[e],n.header[e])}function _8(e,t,n,r){const i={};for(const s of e){const o=CE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const fie=["row","column"],die=["header","footer"];function O_n(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=_8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=v8(t,a),l=PA(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...FHe(l,u),...LHe(u,l,s),...BHe(r,i,t,g1n,zVe)}}}function LHe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=DHe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function FHe(e,t){const n=NHe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function P_n(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of die)if(n[i])for(const s of n[i]){const o=$_n(e,t,i,n,s);o!=null&&r.push(o)}return r}function k_n(e,t){const{sort:n}=e;return Bd(n)?{field:Je(n,{expr:"datum"}),order:n.order??"ascending"}:Ie(n)?{field:TE(e,t,{expr:"datum"}),order:"ascending"}:{field:Je(e,{expr:"datum"}),order:n??"ascending"}}function kW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=_8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=jre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=v8(t,a);return{text:{signal:u?vv(vv(u,"datum.label",l),"datum.value",Je(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...FHe(s,c),...LHe(c,s,o),...BHe(n,e,t,y1n,UVe)}}function $_n(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=_8(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=kW(o,t,a))}const u=al(e)&&!AO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:k_n(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const R_n={column:{start:0,end:1},row:{start:1,end:0}};function N_n(e,t){return R_n[t][e]}function D_n(e,t){const n={};for(const r of Xl){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=_8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=v8(r,o),u=N_n(s,a);u!==void 0&&(n[a]=u)}}return Or(n)?void 0:n}function BHe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=CE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function hie(e){return[...Ik(e,"width"),...Ik(e,"height"),...Ik(e,"childWidth"),...Ik(e,"childHeight")]}function Ik(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Xs(o)&&iy(a)){const u=e.scaleName(n);return al(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[W_e(u,a)]:[W_e(u,a),{name:i,update:jHe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=xW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function W_e(e,t){const n=`${e}_step`;return It(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function jHe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Yi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${ef(o)}, ${ef(s)}) * ${e}_step`}function zHe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function UHe(e,t){return Ne(e).reduce((n,r)=>{const i=e[r];return{...n,...$x(t,i,r,s=>Zr(s.value))}},{})}function VHe(e,t){if(al(t))return e==="theta"?"independent":"shared";if(Mx(t))return"shared";if(bie(t))return Ki(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function pie(e,t){const n=e.scale[t],r=Ki(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ue(h0n(t)),"independent"):e[r][t]||"shared"}const M_n={...b1n,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},HHe=Ne(M_n);class L_n extends bm{}const G_e={symbols:F_n,gradient:B_n,labels:j_n,entries:z_n};function F_n(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...Sgn({},n,gyn),...gHe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?qHe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Ou)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Zr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Zr(m??1));else if(Ie(f.fill)){const g=$W(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Zr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Ou)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ie(f.stroke)){const g=Yi($W(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ym){const g=Ve(t)&&GHe(n,i,t);g?f.opacity=[{test:g,...Zr(m??1)},Zr(u.legend.unselectedOpacity)]:m&&(f.opacity=Zr(m))}return f={...f,...e},Or(f)?void 0:f}function B_n(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?qHe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Zr(l)),a={...a,...e},Or(a)?void 0:a}function j_n(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ve(t)?GHe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;xv(c)?f=nf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=nf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ve(t)&&t.timeUnit===void 0&&(f=nf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Or(d)?void 0:d}function z_n(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function qHe(e){return WHe(e,(t,n)=>Math.max(t,n.value))}function $W(e){return WHe(e,(t,n)=>Yi(t,n.value))}function WHe(e,t){if(Myn(e))return nt(e.condition).reduce(t,e.value);if(bf(e))return e.value}function GHe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Xe(n.field);return r.map(s=>`(!length(data(${Xe(gi(s)+Tv)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Y_e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return lVe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return cVe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Y_n(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??K_n(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??V_n(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>aw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(ow(n)&&tf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>U_n(t,e)};function U_n(e,t){const n=e.values;if(Ie(n))return xVe(t,n);if(It(n))return n}function V_n(e,t,n,r){if(t!=="shape"){const i=$W(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function H_n(e){const{legend:t}=e;return Yi(t.type,q_n(e))}function q_n({channel:e,timeUnit:t,scaleType:n}){if(ow(e)){if($n(["quarter","month","day"],t))return"symbol";if(tf(n))return"gradient"}return"symbol"}function W_n({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??G_n(n,t)}function G_n(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Y_n({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(tf(i))return n==="horizontal"?r==="top"||r==="bottom"?K_e(t,"width",o,s):o:K_e(t,"height",u,a)}function K_e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function K_n(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function YHe(e){const t=Di(e)?X_n(e):ebn(e);return e.component.legends=t,t}function X_n(e){const{encoding:t}=e,n={};for(const r of[Ou,...HVe]){const i=ws(t[r]);!i||!e.getScaleComponent(r)||r===Pu&&Ve(i)&&i.type===kx||(n[r]=Z_n(e,r))}return n}function Q_n(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function J_n(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Z_n(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new L_n({},Q_n(e,t));u_n(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=ws(i[t]),f=Ve(c)?(b=Ys(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||s.legend.orient||"right",h=H_n({legend:n,channel:t,timeUnit:f,scaleType:l}),p=W_n({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of HHe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const w=E in Y_e?Y_e[E](m):n[E];if(w!==void 0){const x=J_n(w,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,w,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const w=UHe(g[E]??{},e),x=E in G_e?G_e[E](w,_):w;x!==void 0&&!Or(x)&&(v[E]={...y!=null&&y.length&&Ve(c)?{name:`${gi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Or(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function ebn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){YHe(r);for(const i of Ne(r.component.legends))n.legend[i]=pie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=KHe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ne(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function KHe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of HHe){const c=A0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return tbn(f,d);case"title":return PUe(f,d);case"type":return i=!0,Uu("symbol")}return h8(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&wL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&wL(e.explicit,["encode","gradient"])),e}function tbn(e,t){return t.value==="circle"?t:e}function nbn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function XHe(e){const t=e.component.legends,n={};for(const i of Ne(t)){const s=e.getScaleComponent(i),o=Pr(s.get("domains"));if(n[o])for(const a of n[o])KHe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return xo(n).flat().map(i=>rbn(i,e.config)).filter(i=>i!==void 0)}function rbn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of HVe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&It(s.encode.labels.update.text)&&(l=vv(r,"datum.label",s.encode.labels.update.text.signal)),nbn(s,"labels","text",{signal:l})}return s}}function ibn(e){return Mx(e)||bie(e)?sbn(e):QHe(e)}function sbn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),QHe(e))}function QHe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=It(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const obn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class JHe extends bm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function ZHe(e){e.component.projection=Di(e)?abn(e):cbn(e)}function abn(e){if(e.hasProjection){const t=ou(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ubn(e):void 0,s=new JHe(e.projectionName(!0),{...ou(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ubn(e){const t=[],{encoding:n}=e;for(const r of[[Nf,Rf],[fc,Df]])(ws(n[r[0]])||ws(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Pu)&&e.typedFieldDef(Pu).type===kx&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zr.Main)),t}function lbn(e,t){const n=ore(obn,i=>!!(!Nt(e.explicit,i)&&!Nt(t.explicit,i)||Nt(e.explicit,i)&&Nt(t.explicit,i)&&nl(e.get(i),t.get(i))));if(nl(e.size,t.size)){if(n)return e;if(nl(e.explicit,{}))return t;if(nl(t.explicit,{}))return e}return null}function cbn(e){if(e.children.length===0)return;let t;for(const r of e.children)ZHe(r);const n=ore(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=lbn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new JHe(r,t.specifiedProjection,t.size,qt(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function fbn(e,t,n,r){if(OO(t,n)){const i=Di(e)?e.axis(n)??e.legend(n)??{}:{},s=Je(t,{expr:"datum"}),o=Je(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Je(t,{binSuffix:"range",forAs:!0}),formula:CO(s,o,i.format,i.formatType,r)}}return{}}function eqe(e,t){return`${EUe(e)}_${t}`}function dbn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function mie(e,t,n){const r=a8(n,void 0)??{},i=eqe(r,t);return e.getName(`${i}_bins`)}function hbn(e){return"as"in e}function X_e(e,t,n){let r,i;hbn(e)?r=rt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Je(e,{forAs:!0}),Je(e,{binSuffix:"end",forAs:!0})];const s={...a8(t,void 0)},o=eqe(s,e.field),{signal:a,extentSignal:u}=dbn(n,o);if(X5(s.extent)){const c=s.extent;i=$He(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class zd extends Sr{clone(){return new zd(null,qt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(La(s)&&Hr(s.bin)){const{key:a,binComponent:u}=X_e(s,s.bin,n);i[a]={...u,...i[a],...fbn(n,s,o,n.config)}}return i},{});return Or(r)?null:new zd(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=X_e(n,n.bin,r);return new zd(t,{[i]:s})}merge(t,n){for(const r of Ne(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=xd([...this.bins[r].as,...t.bins[r].as],kn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(xo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(xo(this.bins).map(t=>t.field))}hash(){return`Bin ${kn(this.bins)}`}assemble(){return xo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:cc(t.field),as:r,signal:t.signal,...X5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:cc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Je({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function pbn(e,t,n,r){var s;const i=Di(r)?r.encoding[xh(t)]:void 0;if(La(n)&&Di(r)&&mVe(n,i,r.markDef,r.config)){e.add(Je(n,{})),e.add(Je(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=C0({fieldDef:n,markDef:a,config:u});kA(o)&&l!==.5&&Ki(t)&&(e.add(Je(n,{suffix:p8})),e.add(Je(n,{suffix:m8}))),n.bin&&OO(n,t)&&e.add(Je(n,{binSuffix:"range"}))}else if(dUe(t)){const o=fUe(t);e.add(r.getName(o))}else e.add(Je(n));return l_(n)&&iyn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function mbn(e,t){for(const n of Ne(t)){const r=t[n];for(const i of Ne(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ff extends Sr{clone(){return new ff(null,new Set(this.dimensions),qt(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Je(o,{forAs:!0})]);else{if(Jp(u)||ry(u)){const c=Jp(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Je({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Je(o,{forAs:!0})]);vm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Je({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Je({field:l,aggregate:"max"},{forAs:!0})]))}else pbn(s,a,o,n)}),s.size+Ne(i).length===0)?null:new ff(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Je(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Je(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ne(i).length===0?null:new ff(t,r,i)}merge(t){return rUe(this.dimensions,t.dimensions)?(mbn(this.measures,t.measures),!0):(O0n("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ne(this.measures)])}producedFields(){const t=new Set;for(const n of Ne(this.measures))for(const r of Ne(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${kn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ne(this.measures))for(const o of Ne(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:cc(s));return{type:"aggregate",groupby:[...this.dimensions].map(cc),ops:t,fields:n,as:r}}}class Nx extends Sr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Xl){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Je(o),...Hr(a)?[Je(o,{binSuffix:"end"})]:[]],...Bd(u)?{sortField:u}:Ie(u)?{sortIndexField:TE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Xl)this[n]&&(t+=` ${n.charAt(0)}:${kn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Xl)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Xl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Sh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Xs(i)&&iy(s)){const o=b8(this.childModel,n),a=_ie(o);a?t[n]=a:Ue(bre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=r8,field:f}=u;s.push(f),o.push(c),a.push(Je(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of fie){for(const c of die){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Sp,xp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Q_e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function gbn(e,t){const n=lre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Q_e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Q_e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ue(Fgn(t)),null}function ybn(e){const t={};return iR(e.filter,n=>{if(GUe(n)){let r=null;Sre(n)?r=Qu(n.equal):Cre(n)?r=Qu(n.lte):Tre(n)?r=Qu(n.lt):Are(n)?r=Qu(n.gt):Ire(n)?r=Qu(n.gte):Ore(n)?r=n.range[0]:Pre(n)&&(r=(n.oneOf??n.in)[0]),r&&(a_(r)?t[n.field]="date":Jn(r)?t[n.field]="number":rt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function vbn(e){const t={};function n(r){wE(r)?t[r.field]="date":r.type==="quantitative"&&mgn(r.aggregate)?t[r.field]="number":pE(r.field)>1?r.field in t||(t[r.field]="flatten"):l_(r)&&Bd(r.sort)&&pE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Di(e)||al(e))&&e.forEachFieldDef((r,i)=>{if(La(r))n(r);else{const s=s_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Di(e)){const{mark:r,markDef:i,encoding:s}=e;if(sy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ve(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function _bn(e){const t={};if(Di(e)&&e.component.selection)for(const n of Ne(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&pE(i.field)>1&&(t[i.field]="flatten")}return t}class Xo extends Sr{clone(){return new Xo(null,qt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${kn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!qg(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ne(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ue(a_e(a,r[a],u.value)))}for(const a of Ne(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ue(a_e(a,n[a],u)))}const s=new bm(n,r);i.copyAll(s);const o={};for(const a of Ne(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ne(o).length===0||i.parseNothing?null:new Xo(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ne(this._parse)){const r=this._parse[n];pE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ne(this._parse))}dependentFields(){return new Set(Ne(this._parse))}assembleTransforms(t=!1){return Ne(this._parse).filter(n=>t?pE(n)>1:!0).map(n=>{const r=gbn(n,this._parse[n]);return r?{type:"formula",expr:r,as:cre(n)}:null}).filter(n=>n!==null)}}class P0 extends Sr{clone(){return new P0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([wf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:wf}}}class $O extends Sr{clone(){return new $O(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${kn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class RO extends Sr{clone(){return new RO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${kn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Cv extends Sr{constructor(t){super(null),t??(t={name:"source"});let n;if(qg(t)||(n=t.format?{...bu(t.format,["parse"])}:{}),$A(t))this._data={values:t.values};else if(EE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else uHe(t)?this._data={values:[{type:"Sphere"}]}:(oHe(t)||qg(t))&&(this._data={});this._generator=qg(t),t.name&&(this._name=t.name),n&&!Or(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var J_e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},bbn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},LT;function gie(e){return e instanceof Cv||e instanceof $O||e instanceof RO}class yie{constructor(){LT.set(this,void 0),J_e(this,LT,!1,"f")}setModified(){J_e(this,LT,!0,"f")}get modifiedFlag(){return bbn(this,LT,"f")}}LT=new WeakMap;class c_ extends yie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class vie extends yie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class wbn extends vie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ne(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Ebn extends vie{constructor(t){super(),this.requiresSelectionId=t&&cie(t)}run(t){t instanceof P0&&(this.requiresSelectionId&&(gie(t.parent)||t.parent instanceof ff||t.parent instanceof Xo)||(this.setModified(),t.remove()))}}class xbn extends yie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof jd&&(r=t.producedFields(),are(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Sbn extends vie{constructor(){super()}run(t){t instanceof Pa&&!t.isRequired()&&(this.setModified(),t.remove())}}class Tbn extends c_{run(t){if(!gie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Xo)if(t instanceof Xo)this.setModified(),t.merge(n);else{if(ure(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Cbn extends c_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Xo);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ne(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Or(i)){this.setModified();const o=new Xo(t,i);for(const a of n){if(a instanceof Xo)for(const u of Ne(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Xo&&Ne(a.parse).length===0&&a.remove()}}}}}class Abn extends c_{run(t){t instanceof Pa||t.numChildren()>0||t instanceof Nx||t instanceof Cv||(this.setModified(),t.remove())}}class Ibn extends c_{run(t){const n=t.children.filter(i=>i instanceof jd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Obn extends c_{run(t){const n=t.children.filter(i=>i instanceof ff),r={};for(const i of n){const s=kn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ne(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Pbn extends c_{constructor(t){super(),this.model=t}run(t){const n=!(gie(t)||t instanceof Rx||t instanceof Xo||t instanceof P0),r=[],i=[];for(const s of t.children)s instanceof zd&&(n&&!ure(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof zd?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class kbn extends c_{run(t){const n=[...t.children];if(!yv(n,o=>o instanceof Pa)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Pa){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Pa)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class f_ extends Sr{clone(){return new f_(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`JoinAggregateTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function $bn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Je(r);return i&&t.push(i),t},[])}function Rbn(e){return Ie(e)&&e.every(t=>rt(t))&&e.length>1}class Cp extends Sr{clone(){return new Cp(null,qt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Yi(f.order,"ascending"));const l={field:a,order:u};let c;return Rbn(s)?c=s:rt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Cp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return sh(p)}).filter(h=>!!h),c=$bn(n),f=n.encoding.order;let d;if(Ie(f)||Ve(f))d=AUe(f);else{const h=gVe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Cp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${kn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Je(i,{binSuffix:"mid"})]:[Je(i,{}),Je(i,{binSuffix:"end"})]:[Je(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Je(c,{expr:"datum"}),p=Je(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Je(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Je(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class Dx extends Sr{clone(){return new Dx(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`WindowTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>vre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Nbn(e){function t(n){if(!(n instanceof Nx)){const r=n.clone();if(r instanceof Pa){const i=NW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ff||r instanceof Cp||r instanceof Dx||r instanceof f_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function RW(e){if(e instanceof Nx)if(e.numChildren()===1&&!(e.children[0]instanceof Pa)){const t=e.children[0];(t instanceof ff||t instanceof Cp||t instanceof Dx||t instanceof f_)&&t.addDimensions(e.fields),t.swapWithParent(),RW(e)}else{const t=e.model.component.data.main;tqe(t);const n=Nbn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(RW)}function tqe(e){if(e instanceof Pa&&e.type===zr.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Nx||(t.swapWithParent(),tqe(e))}}const NW="scale_",Ok=5;function DW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!DW(t.children))return!1}return!0}function Ic(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Z_e(e,t,n){let r=e.sources,i=!1;return i=Ic(new Sbn,r)||i,i=Ic(new Ebn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Ic(new Abn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Ic(new Tbn,r)||i,i=Ic(new Pbn(t),r)||i,i=Ic(new xbn,r)||i,i=Ic(new Cbn,r)||i,i=Ic(new Obn,r)||i,i=Ic(new Ibn,r)||i,i=Ic(new wbn,r)||i,i=Ic(new kbn,r)||i),e.sources=r,i}function Dbn(e,t){DW(e.sources);let n=0,r=0;for(let i=0;i<Ok&&Z_e(e,t,!0);i++)n++;e.sources.map(RW);for(let i=0;i<Ok&&Z_e(e,t,!1);i++)r++;DW(e.sources),Math.max(n,r)===Ok&&Ue(`Maximum optimization runs(${Ok}) reached.`)}class Bs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Bs(()=>t(n))}}function nqe(e){Di(e)?Mbn(e):Lbn(e)}function Mbn(e){const t=e.component.scales;for(const n of Ne(t)){const r=Bbn(e,n);if(t[n].setWithExplicit("domains",r),zbn(e,n),e.component.data.isFaceted){let s=e;for(;!al(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)fp(a)&&(a.data=NW+a.data.replace(NW,""))}}}function Lbn(e){for(const n of e.children)nqe(n);const t=e.component.scales;for(const n of Ne(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=A0(r,o.getWithExplicit("domains"),"domains","scale",MW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ue(Ngn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Fbn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=ebe(t,n);if(!i){Ue(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=ebe(t,n);if(i)return"unaggregated"}return e}function Bbn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Fbn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&ws(r.x2)?ws(r.x)?A0(Dm(n,i,e,"x"),Dm(n,i,e,"x2"),"domain","scale",MW):Dm(n,i,e,"x2"):t==="y"&&ws(r.y2)?ws(r.y)?A0(Dm(n,i,e,"y"),Dm(n,i,e,"y2"),"domain","scale",MW):Dm(n,i,e,"y2"):Dm(n,i,e,t)}function jbn(e,t,n){return e.map(r=>({signal:`{data: ${u8(r,{timeUnit:n,type:t})}}`}))}function L7(e,t,n){var i;const r=(i=Ys(n))==null?void 0:i.unit;return t==="temporal"||r?jbn(e,t,r):[e]}function Dm(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=ws(i[r]),{type:c}=l,f=l.timeUnit;if(ryn(t)){const p=Dm(e,void 0,n,r),m=L7(t.unionWith,c,f);return Zf([...m,...p.value])}else{if(It(t))return Zf([t]);if(t&&t!=="unaggregated"&&!eVe(t))return Zf(L7(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Uu([[0,1]]);const p=n.requestDataName(zr.Main);return Uu([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=vm(r)&&Ve(l)?Ubn(n,r,e):void 0;if(Th(l)){const p=L7([l.datum],c,f);return Uu(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(zr.Main),{field:m}=l;return Uu([{data:p,field:Je({field:m,aggregate:"min"})},{data:p,field:Je({field:m,aggregate:"max"})}])}else if(Hr(h.bin)){if(Xs(e))return Uu(e==="bin-ordinal"?[]:[{data:OA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r,OO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Hr(p)){const m=mie(n,h.field,p);return Uu([new Bs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Uu([{data:n.requestDataName(zr.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&$n(["time","utc"],e)){const p=i[xh(r)];if(mVe(h,p,s,a)){const m=n.requestDataName(zr.Main),g=C0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=kA(o)&&g!==.5&&Ki(r);return Uu([{data:m,field:n.vgField(r,y?{suffix:p8}:{})},{data:m,field:n.vgField(r,{suffix:y?m8:"end"})}])}}return Uu(d?[{data:OA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(zr.Main),field:n.vgField(r)}])}function F7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":r8),...r?{field:cc(r)}:{},...i?{order:i}:{}}}function zbn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=eVe(r)&&r,o=o_(i)&&X5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ubn(e,t,n){if(!Xs(n))return;const r=e.fieldDef(t),i=r.sort;if(hVe(i))return{op:"min",field:TE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Bd(i)){const a=s&&!o.has(i.field);return F7(i,a)}else if(dVe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Jp(c)||ry(c))return F7({field:Je(l),order:u},d);if(vre(c)||!c)return F7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function ebe(e,t){const{aggregate:n,type:r}=e;return n?rt(n)&&!ygn.has(n)?{valid:!1,reason:o0n(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:a0n(e)}:{valid:!0}:{valid:!1,reason:s0n(e)}}function MW(e,t,n,r){return e.explicit&&t.explicit&&Ue(d0n(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Vbn(e){const t=xd(e.map(o=>{if(fp(o)){const{sort:a,...u}=o;return u}return o}),kn),n=xd(e.map(o=>{if(fp(o)){const a=o.sort;return a!==void 0&&!OA(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),kn);if(t.length===0)return;if(t.length===1){const o=e[0];if(fp(o)&&n.length>0){let a=n[0];if(n.length>1){Ue(l_e);const u=n.filter(l=>ot(l)&&"op"in l&&l.op!=="min");n.every(l=>ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=xd(n.map(o=>OA(o)||!("op"in o)||rt(o.op)&&o.op in hgn?o:(Ue(p0n(o)),!0)),kn);let i;r.length===1?i=r[0]:r.length>1&&(Ue(l_e),i=!0);const s=xd(e.map(o=>fp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function _ie(e){if(fp(e)&&rt(e.field))return e.field;if(vgn(e)){let t;for(const n of e.fields)if(fp(n)&&rt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ue(m0n),t}return Ue(g0n),t}else if(_gn(e)){Ue(y0n);const t=e.fields[0];return rt(t)?t:void 0}}function b8(e,t){const r=e.component.scales[t].get("domains").map(i=>(fp(i)&&(i.data=e.lookupDataSource(i.data)),i));return Vbn(r)}function rqe(e){return Mx(e)||bie(e)?e.children.reduce((t,n)=>t.concat(rqe(n)),tbe(e)):tbe(e)}function tbe(e){return Ne(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Hbn(i.range,s,n,e),h=b8(e,n),p=a?Fvn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Hbn(e,t,n,r){if(Ki(n)){if(iy(e))return{step:{signal:`${t}_step`}}}else if(ot(e)&&fp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class iqe extends bm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:yv(this.get("domains"),t=>Ie(t)&&t.length===2&&Jn(t[0])&&t[0]<=0&&Jn(t[1])&&t[1]>=0)}}const qbn=["range","scheme"];function Wbn(e){const t=e.component.scales;for(const n of K5){const r=t[n];if(!r)continue;const i=Gbn(n,e);r.setWithExplicit("range",i)}}function nbe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=ku(t),o=e.getName(s);if(ot(r)&&r.binned&&r.step!==void 0)return new Bs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Hr(r)){const a=mie(e,i,r);return new Bs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Gbn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of qbn)if(n[f]!==void 0){const d=bW(s,f),h=tVe(e,f);if(!d)Ue(NUe(s,f,e));else if(h)Ue(h);else switch(f){case"range":{const p=n.range;if(Ie(p)){if(Ki(e))return Zf(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Bs.fromName(y,g)}return m}))}else if(ot(p))return Zf({data:t.requestDataName(zr.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Zf(p)}case"scheme":return Zf(Ybn(n[f]))}}const o=e===yi||e==="xOffset"?"width":"height",a=r[o];if(oh(a)){if(Ki(e))if(Xs(s)){const f=oqe(a,t,e);if(f)return Zf({step:f})}else Ue(DUe(o));else if(xO(e)){const f=e===J0?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=aqe(a,s);if(p)return Zf(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Kbn(e,t);return(u!==void 0||l!==void 0)&&bW(s,"rangeMin")&&Ie(c)&&c.length===2?Zf([u??c[0],l??c[1]]):Uu(c)}function Ybn(e){return nyn(e)?{scheme:e.name,...bu(e,["name"])}:{scheme:e}}function sqe(e,t,n,{center:r}={}){const i=ku(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===eo&&_l(n)?r?[Bs.fromName(a=>`${o(a)}/2`,s),Bs.fromName(a=>`-${o(a)}/2`,s)]:[Bs.fromName(o,s),0]:r?[Bs.fromName(a=>`-${o(a)}/2`,s),Bs.fromName(a=>`${o(a)}/2`,s)]:[0,Bs.fromName(o,s)]}function Kbn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=ws(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case yi:case eo:{if($n(["point","band"],u)){const f=uqe(e,n,r.view);if(oh(f))return{step:oqe(f,t,e)}}return sqe(e,t,u)}case J0:case Px:return Xbn(e,t,u);case gm:{const f=t.component.scales[e].get("zero"),d=lqe(i,f,r),h=Zbn(i,n,t,r);return vE(u)?Jbn(d,h,Qbn(u,r,l,e)):[d,h]}case xc:return[0,Math.PI*2];case i_:return[0,360];case $f:return[0,new Bs(()=>{const f=t.getSignalName(al(t.parent)?"child_width":"width"),d=t.getSignalName(al(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case ty:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case ny:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Pu:return"symbol";case Ou:case wh:case Eh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ym:case Z0:case ey:return[r.scale.minOpacity,r.scale.maxOpacity]}}function oqe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=pre(n),o=r[s];if(WVe({step:e,offsetIsDiscrete:Qt(o)&&KUe(o.type)})==="offset"&&AVe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${xgn(f)})`}}else return e.step}function aqe(e,t){if(WVe({step:e,offsetIsDiscrete:Xs(t)})==="offset")return{step:e.step}}function Xbn(e,t,n){const r=e===J0?"x":"y",i=t.getScaleComponent(r);if(!i)return sqe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=uqe(r,t.size,t.config.view);if(oh(l)){const c=aqe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ve(l)&&l.timeUnit){const c=qUe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=C0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=It(f)?`${f.signal}/2`+h:`${f/2+d}`,m=It(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return tUe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function uqe(e,t,n){const r=e===yi?"width":"height",i=t[r];return i||$L(n,r)}function Qbn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ie(n)?n.length+1:(Ue(C0n(r)),3)}}function Jbn(e,t,n){const r=()=>{const i=ef(t),s=ef(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return It(t)?new Bs(r):{signal:r()}}function lqe(e,t,n){if(t)return It(t)?{signal:`${t.signal} ? 0 : ${lqe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Q5("size",e))}const rbe=.95;function Zbn(e,t,n,r){const i={x:nbe(n,"x"),y:nbe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=ibe(t,i,r.view);return Jn(s)?s-1:new Bs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=ibe(t,i,r.view);return Jn(s)?Math.pow(rbe*s,2):new Bs(()=>`pow(${rbe} * ${s.signal}, 2)`)}}throw new Error(Q5("size",e))}function ibe(e,t,n){const r=oh(e.width)?e.width.step:kL(n,"width"),i=oh(e.height)?e.height.step:kL(n,"height");return t.x||t.y?new Bs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function cqe(e,t){Di(e)?ewn(e,t):dqe(e,t)}function ewn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ne(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=ws(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=bW(h,t),y=tVe(a,t);if(d!==void 0&&(g?y&&Ue(y):Ue(NUe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":a_(u[t])||_==="temporal"||v?l.set(t,{signal:u8(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in sbe?sbe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:IVe(i,a),hasSecondaryRangeChannel:!!i[xh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const sbe={bins:({model:e,fieldOrDatumDef:t})=>Ve(t)?twn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>nwn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>rwn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>iwn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>swn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>own(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ve(e)?e.sort:void 0;return awn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>uwn(e,t,n,r,i,s.scale,o)};function fqe(e){Di(e)?Wbn(e):dqe(e,"range")}function dqe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?fqe(r):cqe(r,t);for(const r of Ne(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=A0(i,a,t,"scale",sHe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function twn(e,t){const n=t.bin;if(Hr(n)){const r=mie(e,t.field,n);return new Bs(()=>e.getSignalName(r))}else if(co(n)&&o_(n)&&n.step!==void 0)return{step:n.step}}function nwn(e,t){if($n([Ou,wh,Eh],e)&&t!=="nominal")return"hcl"}function rwn(e,t,n,r,i,s){var o;if(!((o=sh(s))!=null&&o.bin||Ie(n)||i!=null||r!=null||$n([wu.TIME,wu.UTC],e)))return Ki(t)?!0:void 0}function iwn(e,t,n,r,i,s){if(Ki(e)){if(tf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ve(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===wu.POINT)return n.pointPadding}}function swn(e,t,n,r,i,s=!1){if(e===void 0){if(Ki(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Yi(o,n==="bar"?a:u)}else if(xO(t)&&r===wu.BAND)return i.offsetBandPaddingInner}}function own(e,t,n,r,i,s=!1){if(e===void 0){if(Ki(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===wu.BAND)return Yi(o,It(r)?{signal:`${r.signal}/2`}:r/2)}else if(xO(t)){if(n===wu.POINT)return .5;if(n===wu.BAND)return i.offsetBandPaddingOuter}}}function awn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return _l(e)&&t==="descending"?It(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(_l(e)&&t==="descending")return!0}function uwn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&_l(i)){if(Ie(n)){const u=n[0],l=n[n.length-1];if(Jn(u)&&u<=0&&Jn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!vE(i))return!0;if(!(Ve(t)&&t.bin)&&$n([...Sh,...sgn],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function lwn(e,t,n,r,i=!1){const s=cwn(t,n,r,i),{type:o}=e;return vm(t)?o!==void 0?lyn(t,o)?Ve(n)&&!uyn(o,n.type)?(Ue(c0n(o,s)),s):o:(Ue(l0n(t,o,s)),s):s:null}function cwn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(ow(e)||O7(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ue(P7(e,"ordinal")),"ordinal";if(Ki(e)||xO(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in yre)return"band";const s=n[ku(e)];return Ev(s)||bE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return ow(e)?"time":O7(e)==="discrete"?(Ue(P7(e,"temporal")),"ordinal"):Ve(t)&&t.timeUnit&&Ys(t.timeUnit).utc?"utc":"time";case"quantitative":return ow(e)?Ve(t)&&Hr(t.bin)?"bin-ordinal":"linear":O7(e)==="discrete"?(Ue(P7(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error($Ue(t.type))}function fwn(e,{ignoreRange:t}={}){hqe(e),nqe(e);for(const n of ayn)cqe(e,n);t||fqe(e)}function hqe(e){Di(e)?e.component.scales=dwn(e):e.component.scales=pwn(e)}function dwn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of K5){const o=ws(t[s]);if(o&&n===iVe&&s===Pu&&o.type===kx)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=IVe(t,s),l=lwn(a,s,o,r,u);i[s]=new iqe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const hwn=sHe((e,t)=>f_e(e)-f_e(t));function pwn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){hqe(s);for(const o of Ne(s.component.scales))if((t=i.scale)[o]??(t[o]=VHe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Q0n(a.value,u.value)?r[o]=A0(a,u,"type","scale",hwn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ne(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new iqe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class B7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Di(e){return(e==null?void 0:e.type)==="unit"}function al(e){return(e==null?void 0:e.type)==="facet"}function bie(e){return(e==null?void 0:e.type)==="concat"}function Mx(e){return(e==null?void 0:e.type)==="layer"}class wie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=ou(a),this.name=t.name??i,this.title=qm(t.title)?{text:t.title}:t.title?ou(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new B7,this.projectionNameMap=r?r.projectionNameMap:new B7,this.signalNameMap=r?r.signalNameMap:new B7,this.data=t.data,this.description=t.description,this.transforms=wvn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:T1n(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:i8(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new bm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qt(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){fwn(this)}parseProjection(){ZHe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){YHe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ne(r)){const o=r[s];o!==void 0&&(i[s]=Zr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Zr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Or(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=D_n(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Xl)t[r].title&&n.push(O_n(this,r));for(const r of fie)n=n.concat(P_n(this,r));return n}assembleAxes(){return g_n(this.component.axes,this.config)}assembleLegends(){return XHe(this)}assembleProjections(){return ibn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...xUe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Or(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||al(this.parent)?rqe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return gi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zr[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(al(this.parent)){const n=zHe(t),r=Y5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Xs(s)&&iy(o)){const a=i.get("name"),u=b8(this,r),l=_ie(u);if(l){const c=Je({aggregate:"distinct",field:l},{expr:"datum"});return{signal:jHe(a,i,c)}}else return Ue(bre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(pUe(t)&&vm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Ign(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class pqe extends wie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Je(r,n)}reduceFieldDef(t,n){return e1n(this.getMapping(),(r,i,s)=>{const o=sh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Gre(this.getMapping(),(r,i)=>{const s=sh(r);s&&t(s,i)},n)}}class w8 extends Sr{clone(){return new w8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${kn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class E8 extends Sr{clone(){return new E8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${kn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class RA extends Sr{clone(){return new RA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(fr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=vm(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");_l(d)&&l.aggregate!=="count"&&!sy(i)&&(u[l.field]=l)}return u},{});return Ne(a).length?new RA(t,a):null}dependentFields(){return new Set(Ne(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${kn(this.filter)}`}assemble(){const t=Ne(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Je(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class x8 extends Sr{clone(){return new x8(this.parent,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${kn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class S8 extends Sr{clone(){return new S8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${kn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class lw extends Sr{clone(){return new lw(null,qt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Nf,Rf],[fc,Df]]){const s=i.map(o=>{const a=ws(n.encoding[o]);return Ve(a)?a.field:Th(a)?{expr:`${a.datum}`}:bf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new lw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Pu)){const i=n.typedFieldDef(Pu);i.type===kx&&(t=new lw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(rt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${kn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class NA extends Sr{clone(){return new NA(null,this.projection,qt(this.fields),qt(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Nf,Rf],[fc,Df]]){const i=r.map(o=>{const a=ws(n.encoding[o]);return Ve(a)?a.field:Th(a)?{expr:`${a.datum}`}:bf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===fc?"2":"";(i[0]||i[1])&&(t=new NA(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(rt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${kn(this.fields)} ${kn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class L1 extends Sr{clone(){return new L1(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new L1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ve(i)&&Ve(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=PVe(n.mark,r);return new L1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${kn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:nvn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class T8 extends Sr{clone(){return new T8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${kn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class DA extends Sr{clone(){return new DA(null,qt(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(rvn(o)){let u=yqe(o.data,s);u||(u=new Cv(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Pa(u,l,zr.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(ivn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(gi(u),u)}catch{throw new Error($gn(u))}if(a=l.materialized,!a)throw new Error(Rgn(u))}return new DA(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${kn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:nt(this.transform.as)}:{}};else{let n=this.transform.as;rt(n)||(Ue(zgn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class C8 extends Sr{clone(){return new C8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${kn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class A8 extends Sr{clone(){return new A8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${kn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class I8 extends Sr{clone(){return new I8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${kn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class O8 extends Sr{clone(){return new O8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${kn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function mqe(e){let t=0;function n(r,i){if(r instanceof Cv&&!r.isGenerator&&!EE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Xo&&(r.parent instanceof Cv&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Nx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof $O||r instanceof RO||r instanceof RA||r instanceof Rx||r instanceof SE||r instanceof NA||r instanceof ff||r instanceof DA||r instanceof Dx||r instanceof f_||r instanceof S8||r instanceof x8||r instanceof w8||r instanceof T8||r instanceof C8||r instanceof A8||r instanceof P0||r instanceof O8||r instanceof I8||r instanceof E8)&&i.transform.push(r.assemble()),(r instanceof zd||r instanceof jd||r instanceof L1||r instanceof Cp||r instanceof lw)&&i.transform.push(...r.assemble()),r instanceof Pa&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Pa?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Pa&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function mwn(e){const t=[],n=mqe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function gwn(e,t){const n=[],r=mqe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function ywn(e){return e==="top"||e==="left"||It(e)?"header":"footer"}function vwn(e){for(const t of Xl)_wn(e,t);obe(e,"x"),obe(e,"y")}function _wn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=CE("title",null,r,t);let l=aw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ie(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=CE("labelOrient",a.header,r,t),f=a.header!==null?Yi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[gqe(e,t,f)]}}}function gqe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function obe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=pie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=ywn(a.get("orient"));o[u]??(o[u]=[gqe(e,s,!1)]);const l=MT(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function bwn(e){Eie(e),ML(e,"width"),ML(e,"height")}function wwn(e){Eie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";ML(e,t),ML(e,n)}function Eie(e){for(const t of e.children)t.parseLayoutSize()}function ML(e,t){const n=zHe(t),r=Y5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??VHe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=A0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Ewn(e){const{size:t,component:n}=e;for(const r of Sh){const i=ku(r);if(t[i]){const s=t[i];n.layoutSize.set(i,oh(s)?"step":s,!0)}else{const s=xwn(e,i);n.layoutSize.set(i,s,!1)}}}function xwn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Xs(s)){const a=$L(r.view,t);return iy(o)||oh(a)?"step":a}else return xW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return xW(r.view,t);{const s=$L(r.view,t);return oh(s)?s.step:s}}}function LW(e,t,n){return Je(t,{suffix:`by_${Je(e)}`,...n})}class j2 extends pqe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Aie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!AO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ne(t),r={};for(const i of n){if(![xp,Sp].includes(i)){Ue(Q5(i,"facet"));break}const s=t[i];if(s.field===void 0){Ue(vW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=qre(t,n);return r.header?r.header=ou(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=P8(this),this.child.parseData()}parseLayoutSize(){Eie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),vwn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Xl)for(const r of die){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=CE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=v8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof j2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof j2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Je(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof j2){if(this.child.channelHasField("column")){const i=Je(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Sh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Xs(o)&&iy(a)){const u=b8(this.child,i),l=_ie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ue(bre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Xl){const f=this.facet[c];if(f){u.push(Je(f));const{bin:d,sort:h}=f;if(Hr(d)&&u.push(Je(f,{binSuffix:"end"})),Bd(h)){const{field:p,op:m=r8}=h,g=LW(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ie(h)){const p=TE(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Bd(r.sort)?[LW(r,r.sort,{expr:"datum"})]:Ie(r.sort)?[TE(r,t,{expr:"datum"})]:[Je(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Bd(i)?i.order:!Ie(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return kW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of fie)if(t[s]){const o=CE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return kW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=mwn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Xl.map(u=>this.facetSortFields(u)).flat(),order:Xl.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Nvn(this,[]))}]}getMapping(){return this.facet}}function Swn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Bd(s.sort)){const{field:o,op:a=r8}=s.sort;e=i=new f_(e,{joinaggregate:[{op:a,field:o,as:LW(s,s.sort,{forAs:!0})}],groupby:[Je(s)]})}return i}return null}function yqe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if($A(e)&&$A(a)){if(nl(e.values,a.values))return o}else if(EE(e)&&EE(a)){if(e.url===a.url)return o}else if(oHe(e)&&e.name===o.dataName)return o}}return null}function Twn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Cv({values:[]});return t.push(r),r}const n=yqe(e.data,t);if(n)return qg(e.data)||(n.data.format=nUe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Cv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Cwn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(pvn(i))o=e=new SE(e,i),s="derived";else if(iie(i)){const a=ybn(i);o=e=Xo.makeWithAncestors(e,{},a,n)??e,e=new Rx(e,t,i.filter)}else if(tHe(i))o=e=zd.makeFromTransform(e,i,t),s="number";else if(gvn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Xo(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=jd.makeFromTransform(e,i);else if(yvn(i))o=e=ff.makeFromTransform(e,i),s="number",cie(t)&&(e=new P0(e));else if(eHe(i))o=e=DA.make(e,t,i,r++),s="derived";else if(fvn(i))o=e=new Dx(e,i),s="number";else if(dvn(i))o=e=new f_(e,i),s="number";else if(vvn(i))o=e=Cp.makeFromTransform(e,i),s="derived";else if(_vn(i))o=e=new S8(e,i),s="derived";else if(bvn(i))o=e=new E8(e,i),s="derived";else if(hvn(i))o=e=new x8(e,i),s="derived";else if(svn(i))o=e=new I8(e,i),s="derived";else if(cvn(i))e=new O8(e,i);else if(mvn(i))o=e=L1.makeFromTransform(e,i),s="derived";else if(ovn(i))o=e=new w8(e,i),s="derived";else if(avn(i))o=e=new C8(e,i),s="derived";else if(uvn(i))o=e=new A8(e,i),s="derived";else if(lvn(i))o=e=new T8(e,i),s="derived";else{Ue(jgn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function P8(e){var m;let t=Twn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(qg(i)||EE(i)||$A(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new $vn;qg(i)?(aHe(i)?t=new RO(t,i.sequence):sie(i)&&(t=new $O(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=Xo.makeExplicit(t,e,o)??t,t=new P0(t);const a=e.parent&&Mx(e.parent);(Di(e)||al(e))&&a&&(t=zd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Cwn(t,e,o));const u=_bn(e),l=vbn(e);t=Xo.makeWithAncestors(t,{},{...u,...l},o)??t,Di(e)&&(t=lw.parseAll(t,e),t=NA.parseAll(t,e)),(Di(e)||al(e))&&(a||(t=zd.makeFromEncoding(t,e)??t),t=jd.makeFromEncoding(t,e)??t,t=SE.parseAllForSortIndex(t,e));const c=e.getDataName(zr.Raw),f=new Pa(t,c,zr.Raw,r);if(n[c]=f,t=f,Di(e)){const g=ff.makeFromEncoding(t,e);g&&(t=g,cie(e)&&(t=new P0(t))),t=L1.makeFromEncoding(t,e)??t,t=Cp.makeFromEncoding(t,e)??t}Di(e)&&(t=RA.make(t,e)??t);const d=e.getDataName(zr.Main),h=new Pa(t,d,zr.Main,r);n[d]=h,t=h,Di(e)&&p_n(e,h);let p=null;if(al(e)){const g=e.getName("facet");t=Swn(t,e.facet)??t,p=new Nx(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class Awn extends wie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ue(Lgn),this.children=this.getChildren(t).map((l,c)=>Aie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=P8(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return f8(t)?t.vconcat:nie(t)?t.hconcat:t.concat}parseLayoutSize(){wwn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=hie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Iwn(e){return e===!1||e===null}const Own={disable:1,gridScale:1,scale:1,...TVe,labelExpr:1,encode:1},vqe=Ne(Own);class xie extends bm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new xie(qt(this.explicit),qt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Iwn(this.get(t))}hasOrientSignalRef(){return It(this.explicit.orient)}}function Pwn(e,t,n){const{encoding:r,config:i}=e,s=ws(r[t])??ws(r[xh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(xv(u))return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(_E(s)==="quantitative"){if(bE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(_E(s)==="temporal"&&i.timeFormatType&&Ve(s)&&!s.timeUnit)return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function kwn(e){return Sh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Fwn(n,e)]),t),{})}const $wn={bottom:"top",top:"bottom",left:"right",right:"left"};function Rwn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ne(i.component.axes))n.axis[s]=pie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Nwn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Sh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!It(a)){if(r[a]>0&&!u){const l=$wn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Nwn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Dwn(i,s)}}}else return t.map(n=>n.clone());return e}function Dwn(e,t){for(const n of vqe){const r=A0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return PUe(i,s);case"gridScale":return{explicit:i.explicit,value:Yi(i.value,s.value)}}return h8(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Mwn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(It(n.labelAngle)?n.labelAngle:PA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===MHe(r,i))return!0}return e===n[t]}const Lwn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Fwn(e,t){var y,v;let n=t.axis(e);const r=new xie,i=ws(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||S_n(e),u=t.getScaleComponent(e).get("type"),l=y_n(e,u,a,t.config),c=n!==void 0?!n:OW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=w_n(i,n,e,o.style,l),d=cVe(n.formatType,i,u),h=lVe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of vqe){const b=_ in q_e?q_e[_](p):v_e(_)?n[_]:void 0,E=b!==void 0,w=Mwn(b,_,n,t,e);if(E&&w)r.set(_,b,w);else{const{configValue:x=void 0,configFrom:S=void 0}=v_e(_)&&_!=="values"?OW(_,o.style,n.style,l):{},P=x!==void 0;E&&!P?r.set(_,b,w):(S!=="vgAxisConfig"||Lwn.has(_)&&P||PO(x)||It(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=SVe.reduce((_,b)=>{if(!r.hasAxisPart(b))return _;const E=UHe(m[b]??{},t),w=b==="labels"?Pwn(t,e,E):E;return w!==void 0&&!Or(w)&&(_[b]={update:w}),_},{});return Or(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Bwn({encoding:e,size:t}){for(const n of Sh){const r=ku(n);oh(t[r])&&yg(e[n])&&(delete t[r],Ue(DUe(r)))}return t}const jwn={vgMark:"arc",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ko("x",e,{defaultPos:"mid"}),...Ko("y",e,{defaultPos:"mid"}),...I0(e,"radius"),...I0(e,"theta")})},zwn={vgMark:"area",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...RL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...RL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...lie(e)})},Uwn={vgMark:"rect",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...I0(e,"x"),...I0(e,"y")})},Vwn={vgMark:"shape",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ve(n)&&n.type===kx?{field:Je(n,{expr:"datum"})}:{}}]}},Hwn={vgMark:"image",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...I0(e,"x"),...I0(e,"y"),...aie(e,"url")})},qwn={vgMark:"line",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ko("x",e,{defaultPos:"mid"}),...Ko("y",e,{defaultPos:"mid"}),...zs("size",e,{vgChannel:"strokeWidth"}),...lie(e)})},Wwn={vgMark:"trail",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ko("x",e,{defaultPos:"mid"}),...Ko("y",e,{defaultPos:"mid"}),...zs("size",e),...lie(e)})};function Sie(e,t){const{config:n}=e;return{...Sc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ko("x",e,{defaultPos:"mid"}),...Ko("y",e,{defaultPos:"mid"}),...zs("size",e),...zs("angle",e),...Gwn(e,n,t)}}function Gwn(e,t,n){return n?{shape:{value:n}}:zs("shape",e)}const Ywn={vgMark:"symbol",encodeEntry:e=>Sie(e)},Kwn={vgMark:"symbol",encodeEntry:e=>Sie(e,"circle")},Xwn={vgMark:"symbol",encodeEntry:e=>Sie(e,"square")},Qwn={vgMark:"rect",encodeEntry:e=>({...Sc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...I0(e,"x"),...I0(e,"y")})},Jwn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Sc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...RL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...RL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...zs("size",e,{vgChannel:"strokeWidth"})}}},Zwn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Sc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ko("x",e,{defaultPos:"mid"}),...Ko("y",e,{defaultPos:"mid"}),...aie(e),...zs("size",e,{vgChannel:"fontSize"}),...zs("angle",e),...z_e("align",eEn(e.markDef,n,t)),...z_e("baseline",tEn(e.markDef,n,t)),...Ko("radius",e,{defaultPos:null}),...Ko("theta",e,{defaultPos:null})}}};function eEn(e,t,n){if(fr("align",e,n)===void 0)return"center"}function tEn(e,t,n){if(fr("baseline",e,n)===void 0)return"middle"}const nEn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Sc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ko("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Ko("y",e,{defaultPos:"mid",vgChannel:"yc"}),...zs("size",e,{defaultValue:rEn(e),vgChannel:i}),[s]:Zr(fr("thickness",n,t))}}};function rEn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=fr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&iy(a)&&Jn(a.step)?a.step*3/4:kL(t.view,i)*3/4}}const Pk={arc:jwn,area:zwn,bar:Uwn,circle:Kwn,geoshape:Vwn,image:Hwn,line:qwn,point:Ywn,rect:Qwn,rule:Jwn,square:Xwn,text:Zwn,tick:nEn,trail:Wwn};function iEn(e){if($n([t8,Z5,dyn],e.mark)){const t=PVe(e.mark,e.encoding);if(t.length>0)return sEn(e,t)}else if(e.mark===e8){const t=yW.some(n=>fr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return oEn(e)}return Tie(e)}const abe="faceted_path_";function sEn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:abe+e.requestDataName(zr.Main),data:e.requestDataName(zr.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Tie(e,{fromPrefix:abe})}]}const ube="stack_group_";function oEn(e){var l;const[t]=Tie(e,{fromPrefix:ube}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...hE(t.encode.update,["y","yc","y2","height",...yW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...bu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...hE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...bu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of yW){const f=Zp(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Zr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Je(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Je(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Zp(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Zr(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zr.Main),name:ube+e.requestDataName(zr.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function aEn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ie(o)&&bf(o)&&mW(o.value)||!o&&mW(fr("order",i,s)))){if((Ie(o)||Ve(o))&&!n)return AUe(o,{expr:"datum"});if(sy(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ve(l)){const c=l.sort;if(Ie(c))return{field:Je(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Bd(c))return{field:Je({aggregate:Wre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(dVe(c)){const f=e.fieldDef(c.encoding);return{field:Je(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Je(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Tie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Yi(r.clip,uEn(e),lEn(e)),a=TUe(r),u=i.key,l=aEn(e),c=cEn(e),f=fr("aria",r,s),d=Pk[n].postEncodingTransform?Pk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Pk[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(zr.Main)},encode:{update:Pk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function uEn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function lEn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function cEn(e){if(!e.component.selection)return null;const t=Ne(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ne(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class _qe extends pqe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,b_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=ih(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Y1n(o,s,{graticule:t.data&&sie(t.data)}));const u=this.encoding=Jyn(t.encoding||{},a,o.filled,s);this.markDef=QVe(o,u,s),this.size=Bwn({encoding:u,size:b_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=XVe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>eie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===iVe,r=t&&Xmn.some(i=>Qt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return K5.reduce((r,i)=>{const s=ws(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ou(t);return Ie(n)&&(i.domain=n.map(Qu)),Ie(r)&&(i.range=r.map(Qu)),i}initAxes(t){return Sh.reduce((n,r)=>{const i=t[r];if(Qt(i)||r===yi&&Qt(t.x2)||r===eo&&Qt(t.y2)){const s=Qt(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ne(t),r={};for(const i of n){const s=t[i];r[i]=PO(s)?SUe(s):Qu(s)}return r}initLegends(t){return ogn.reduce((n,r)=>{const i=ws(t[r]);if(i&&ugn(r)){const s=i.legend;n[r]=s&&ou(s)}return n},{})}parseData(){this.component.data=P8(this)}parseLayoutSize(){Ewn(this)}parseSelections(){this.component.selection=h_n(this,this.selection)}parseMarkGroup(){this.component.mark=iEn(this)}parseAxesAndHeaders(){this.component.axes=kwn(this)}assembleSelectionTopLevelSignals(t){return Dvn(this,t)}assembleSignals(){return[...RHe(this),...Rvn(this,[])]}assembleSelectionData(t){return Mvn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return hie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Mx(this.parent))&&(t=cHe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return D1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return sh(n)}typedFieldDef(t){const n=this.fieldDef(t);return La(n)?n:null}}class Cie extends wie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(d8(a))return new Cie(a,this,this.getName(`layer_${u}`),o,s);if(_m(a))return new _qe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(_re(a))})}parseData(){this.component.data=P8(this);for(const t of this.children)t.parseData()}parseLayoutSize(){bwn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Rwn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),RHe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),hie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Lvn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),XHe(this))}}function Aie(e,t,n,r,i){if(i8(e))return new j2(e,t,n,i);if(d8(e))return new Cie(e,t,n,r,i);if(_m(e))return new _qe(e,t,n,r,i);if(E1n(e))return new Awn(e,t,n,i);throw new Error(_re(e))}function fEn(e,t={}){t.logger&&A0n(t.logger),t.fieldTitle&&wVe(t.fieldTitle);try{const n=KVe(vx(t.config,e.config)),r=iHe(e,n),i=Aie(r,null,"",void 0,n);return i.parse(),Dbn(i.component.data,i),{spec:hEn(i,dEn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&I0n(),t.fieldTitle&&Vyn()}}function dEn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):rt(t)&&(t={type:t}),i&&s&&Ovn(t.type)){if(i==="step"&&s==="step")Ue(i_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ue(i_e(Y5(o)));const a=o==="width"?"height":"width";t.type=Pvn(a)}}return{...Ne(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...$_e(n,!1),...$_e(e,!0)}}function hEn(e,t,n={},r){const i=e.config?M1n(e.config):void 0,s=[].concat(e.assembleSelectionData([]),gwn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...qVe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const pEn=Hmn.version,mEn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:pE,accessPathWithDatum:lre,compile:fEn,contains:$n,deepEqual:nl,deleteNestedProperty:wL,duplicate:qt,entries:S0,every:ore,fieldIntersection:ure,flatAccessWithDatum:iUe,getFirstDefined:Yi,hasIntersection:are,hash:kn,internalField:aUe,isBoolean:OA,isEmpty:Or,isEqual:Wmn,isInternalField:uUe,isNullOrFalse:mW,isNumeric:U5,keys:Ne,logicalExpr:F2,mergeDeep:nUe,never:tUe,normalize:iHe,normalizeAngle:PA,omit:bu,pick:hE,prefixGenerator:gW,removePathFromField:cre,replaceAll:vv,replacePathInField:cc,resetIdCounter:Ymn,setEqual:rUe,some:yv,stringify:Pr,titleCase:bO,unique:xd,uniqueId:oUe,vals:xo,varName:gi,version:pEn},Symbol.toStringTag,{value:"Module"}));function bqe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var gEn="vega-themes",yEn="2.14.0",vEn="Themes for stylized Vega and Vega-Lite visualizations.",_En=["vega","vega-lite","themes","style"],bEn="BSD-3-Clause",wEn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},EEn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],xEn="build/vega-themes.js",Iie="build/vega-themes.module.js",SEn="build/vega-themes.min.js",TEn="build/vega-themes.min.js",CEn="build/vega-themes.module.d.ts",AEn={type:"git",url:"https://github.com/vega/vega-themes.git"},IEn=["src","build"],OEn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},PEn={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},kEn={vega:"*","vega-lite":"*"},$En={},REn={name:gEn,version:yEn,description:vEn,keywords:_En,license:bEn,author:wEn,contributors:EEn,main:xEn,module:Iie,unpkg:SEn,jsdelivr:TEn,types:CEn,repository:AEn,files:IEn,scripts:OEn,devDependencies:PEn,peerDependencies:kEn,dependencies:$En};const M_="#fff",lbe="#888",NEn={background:"#333",view:{stroke:lbe},title:{color:M_,subtitleColor:M_},style:{"guide-label":{fill:M_},"guide-title":{fill:M_}},axis:{domainColor:M_,gridColor:lbe,tickColor:M_}},py="#4572a7",DEn={background:"#fff",arc:{fill:py},area:{fill:py},line:{stroke:py,strokeWidth:2},path:{stroke:py},rect:{fill:py},shape:{stroke:py},symbol:{fill:py,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},my="#30a2da",j7="#cbcbcb",MEn="#999",LEn="#333",cbe="#f0f0f0",fbe="#333",FEn={arc:{fill:my},area:{fill:my},axis:{domainColor:j7,grid:!0,gridColor:j7,gridWidth:1,labelColor:MEn,labelFontSize:10,titleColor:LEn,tickColor:j7,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:cbe,group:{fill:cbe},legend:{labelColor:fbe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:fbe,titleFontSize:14,titlePadding:10},line:{stroke:my,strokeWidth:2},path:{stroke:my,strokeWidth:.5},rect:{fill:my},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:my},bar:{binSpacing:2,fill:my,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},gy="#000",BEn={group:{fill:"#e5e5e5"},arc:{fill:gy},area:{fill:gy},line:{stroke:gy},path:{stroke:gy},rect:{fill:gy},shape:{stroke:gy},symbol:{fill:gy,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jEn=22,zEn="normal",dbe="Benton Gothic, sans-serif",hbe=11.5,UEn="normal",yy="#82c6df",z7="Benton Gothic Bold, sans-serif",pbe="normal",mbe=13,HS={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},VEn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:z7,fontSize:jEn,fontWeight:zEn},arc:{fill:yy},area:{fill:yy},line:{stroke:yy,strokeWidth:2},path:{stroke:yy},rect:{fill:yy},shape:{stroke:yy},symbol:{fill:yy,size:30},axis:{labelFont:dbe,labelFontSize:hbe,labelFontWeight:UEn,titleFont:z7,titleFontSize:mbe,titleFontWeight:pbe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:dbe,labelFontSize:hbe,symbolType:"square",titleFont:z7,titleFontSize:mbe,titleFontWeight:pbe},range:{category:HS["category-6"],diverging:HS["fireandice-6"],heatmap:HS["fire-7"],ordinal:HS["fire-7"],ramp:HS["fire-7"]}},vy="#ab5787",kk="#979797",HEn={background:"#f9f9f9",arc:{fill:vy},area:{fill:vy},line:{stroke:vy},path:{stroke:vy},rect:{fill:vy},shape:{stroke:vy},symbol:{fill:vy,size:30},axis:{domainColor:kk,domainWidth:.5,gridWidth:.2,labelColor:kk,tickColor:kk,tickWidth:.2,titleColor:kk},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},_y="#3e5c69",qEn={background:"#fff",arc:{fill:_y},area:{fill:_y},line:{stroke:_y},path:{stroke:_y},rect:{fill:_y},shape:{stroke:_y},symbol:{fill:_y},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},kl="#1696d2",gbe="#000000",WEn="#FFFFFF",$k="Lato",U7="Lato",GEn="Lato",YEn="#DEDDDD",KEn=18,qS={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},XEn={background:WEn,title:{anchor:"start",fontSize:KEn,font:$k},axisX:{domain:!0,domainColor:gbe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:U7,labelAngle:0,tickColor:gbe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:$k},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:YEn,gridWidth:1,labelFontSize:12,labelFont:U7,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:$k,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:U7,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:$k,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:qS["six-groups-cat-1"],diverging:qS["diverging-colors"],heatmap:qS["diverging-colors"],ordinal:qS["six-groups-seq"],ramp:qS["shades-blue"]},area:{fill:kl},rect:{fill:kl},line:{color:kl,stroke:kl,strokeWidth:5},trail:{color:kl,stroke:kl,strokeWidth:0,size:1},path:{stroke:kl,strokeWidth:.5},point:{filled:!0},text:{font:GEn,color:kl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:kl,stroke:null}},arc:{fill:kl},shape:{stroke:kl},symbol:{fill:kl,size:30}},by="#3366CC",ybe="#ccc",Rk="Arial, sans-serif",QEn={arc:{fill:by},area:{fill:by},path:{stroke:by},rect:{fill:by},shape:{stroke:by},symbol:{stroke:by},circle:{fill:by},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Rk,fontSize:12},"guide-title":{font:Rk,fontSize:12},"group-title":{font:Rk,fontSize:12}},title:{font:Rk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:ybe,tickColor:ybe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Oie=e=>e*(1/3+1),vbe=Oie(9),_be=Oie(10),bbe=Oie(12),WS="Segoe UI",wbe="wf_standard-font, helvetica, arial, sans-serif",Ebe="#252423",GS="#605E5C",xbe="transparent",JEn="#C8C6C4",Rc="#118DFF",ZEn="#12239E",exn="#E66C37",txn="#6B007B",nxn="#E044A7",rxn="#744EC2",ixn="#D9B300",sxn="#D64550",wqe=Rc,Eqe="#DEEFFF",Sbe=[Eqe,wqe],oxn=[Eqe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",wqe],axn={view:{stroke:xbe},background:xbe,font:WS,header:{titleFont:wbe,titleFontSize:bbe,titleColor:Ebe,labelFont:WS,labelFontSize:_be,labelColor:GS},axis:{ticks:!1,grid:!1,domain:!1,labelColor:GS,labelFontSize:vbe,titleFont:wbe,titleColor:Ebe,titleFontSize:bbe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:JEn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Rc},line:{stroke:Rc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:WS,fontSize:vbe,fill:GS},arc:{fill:Rc},area:{fill:Rc,line:!0,opacity:.6},path:{stroke:Rc},rect:{fill:Rc},point:{fill:Rc,filled:!0,size:75},shape:{stroke:Rc},symbol:{fill:Rc,strokeWidth:1.5,size:50},legend:{titleFont:WS,titleFontWeight:"bold",titleColor:GS,labelFont:WS,labelFontSize:_be,labelColor:GS,symbolType:"circle",symbolSize:75},range:{category:[Rc,ZEn,exn,txn,nxn,rxn,ixn,sxn],diverging:Sbe,heatmap:Sbe,ordinal:oxn}},V7='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Tbe=400,uxn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],lxn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function k8({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?uxn:lxn,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:V7,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:V7,fill:r,fontWeight:Tbe},"guide-title":{font:V7,fill:r,fontWeight:Tbe}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const cxn=k8({type:"light",background:"#ffffff"}),fxn=k8({type:"light",background:"#f4f4f4"}),dxn=k8({type:"dark",background:"#262626"}),hxn=k8({type:"dark",background:"#161616"}),pxn=REn.version,mxn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:fxn,carbong100:hxn,carbong90:dxn,carbonwhite:cxn,dark:NEn,excel:DEn,fivethirtyeight:FEn,ggplot2:BEn,googlecharts:QEn,latimes:VEn,powerbi:axn,quartz:HEn,urbaninstitute:XEn,version:pxn,vox:qEn},Symbol.toStringTag,{value:"Module"}));function gxn(e,t,n,r){if(Ie(e))return`[${e.map(i=>t(rt(i)?i:Cbe(i,n))).join(", ")}]`;if(ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(ot(c)&&(c=Cbe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function yxn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Cbe(e,t){return JSON.stringify(e,yxn(t))}var vxn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const xqe="vg-tooltip-element",_xn={offsetX:10,offsetY:10,id:xqe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:bxn,maxDepth:2,formatTooltip:gxn,baseURL:""};function bxn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function wxn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return vxn.toString().replace(xqe,e)}function Exn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class xxn{constructor(t){this.options={..._xn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=wxn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Exn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var H7={};function Sxn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q7,Abe;function Txn(){return Abe||(Abe=1,q7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),q7}var Cxn=ar;ar.Node=Av;ar.create=ar;function ar(e){var t=this;if(t instanceof ar||(t=new ar),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ar.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ar.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ar.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ar.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Ixn(this,arguments[e]);return this.length};ar.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Oxn(this,arguments[e]);return this.length};ar.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ar.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ar.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ar.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ar.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ar.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ar.prototype.map=function(e,t){t=t||this;for(var n=new ar,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ar.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ar,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ar.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ar.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ar.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ar.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ar.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ar.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ar.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Axn(this,i,n[r]);return s};ar.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Axn(e,t,n){var r=t===e.head?new Av(n,null,t,e):new Av(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Ixn(e,t){e.tail=new Av(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Oxn(e,t){e.head=new Av(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Av(e,t,n,r){if(!(this instanceof Av))return new Av(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Txn()(ar)}catch{}const Pxn=Cxn,Gy=Symbol("max"),qh=Symbol("length"),L_=Symbol("lengthCalculator"),z2=Symbol("allowStale"),m1=Symbol("maxAge"),Bh=Symbol("dispose"),Ibe=Symbol("noDisposeOnSet"),Ds=Symbol("lruList"),Nc=Symbol("cache"),Sqe=Symbol("updateAgeOnGet"),W7=()=>1;class kxn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Gy]=t.max||1/0;const n=t.length||W7;if(this[L_]=typeof n!="function"?W7:n,this[z2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[m1]=t.maxAge||0,this[Bh]=t.dispose,this[Ibe]=t.noDisposeOnSet||!1,this[Sqe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Gy]=t||1/0,YS(this)}get max(){return this[Gy]}set allowStale(t){this[z2]=!!t}get allowStale(){return this[z2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[m1]=t,YS(this)}get maxAge(){return this[m1]}set lengthCalculator(t){typeof t!="function"&&(t=W7),t!==this[L_]&&(this[L_]=t,this[qh]=0,this[Ds].forEach(n=>{n.length=this[L_](n.value,n.key),this[qh]+=n.length})),YS(this)}get lengthCalculator(){return this[L_]}get length(){return this[qh]}get itemCount(){return this[Ds].length}rforEach(t,n){n=n||this;for(let r=this[Ds].tail;r!==null;){const i=r.prev;Obe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ds].head;r!==null;){const i=r.next;Obe(this,t,r,n),r=i}}keys(){return this[Ds].toArray().map(t=>t.key)}values(){return this[Ds].toArray().map(t=>t.value)}reset(){this[Bh]&&this[Ds]&&this[Ds].length&&this[Ds].forEach(t=>this[Bh](t.key,t.value)),this[Nc]=new Map,this[Ds]=new Pxn,this[qh]=0}dump(){return this[Ds].map(t=>LL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ds]}set(t,n,r){if(r=r||this[m1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[L_](n,t);if(this[Nc].has(t)){if(s>this[Gy])return cw(this,this[Nc].get(t)),!1;const u=this[Nc].get(t).value;return this[Bh]&&(this[Ibe]||this[Bh](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[qh]+=s-u.length,u.length=s,this.get(t),YS(this),!0}const o=new $xn(t,n,s,i,r);return o.length>this[Gy]?(this[Bh]&&this[Bh](t,n),!1):(this[qh]+=o.length,this[Ds].unshift(o),this[Nc].set(t,this[Ds].head),YS(this),!0)}has(t){if(!this[Nc].has(t))return!1;const n=this[Nc].get(t).value;return!LL(this,n)}get(t){return G7(this,t,!0)}peek(t){return G7(this,t,!1)}pop(){const t=this[Ds].tail;return t?(cw(this,t),t.value):null}del(t){cw(this,this[Nc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Nc].forEach((t,n)=>G7(this,n,!1))}}const G7=(e,t,n)=>{const r=e[Nc].get(t);if(r){const i=r.value;if(LL(e,i)){if(cw(e,r),!e[z2])return}else n&&(e[Sqe]&&(r.value.now=Date.now()),e[Ds].unshiftNode(r));return i.value}},LL=(e,t)=>{if(!t||!t.maxAge&&!e[m1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[m1]&&n>e[m1]},YS=e=>{if(e[qh]>e[Gy])for(let t=e[Ds].tail;e[qh]>e[Gy]&&t!==null;){const n=t.prev;cw(e,t),t=n}},cw=(e,t)=>{if(t){const n=t.value;e[Bh]&&e[Bh](n.key,n.value),e[qh]-=n.length,e[Nc].delete(n.key),e[Ds].removeNode(t)}};class $xn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Obe=(e,t,n,r)=>{let i=n.value;LL(e,i)&&(cw(e,n),e[z2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Rxn=kxn;const Nxn=Object.freeze({loose:!0}),Dxn=Object.freeze({}),Mxn=e=>e?typeof e!="object"?Nxn:e:Dxn;var Pie=Mxn,FW={exports:{}};const Lxn="2.0.0",Tqe=256,Fxn=Number.MAX_SAFE_INTEGER||9007199254740991,Bxn=16,jxn=Tqe-6,zxn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var kie={MAX_LENGTH:Tqe,MAX_SAFE_COMPONENT_LENGTH:Bxn,MAX_SAFE_BUILD_LENGTH:jxn,MAX_SAFE_INTEGER:Fxn,RELEASE_TYPES:zxn,SEMVER_SPEC_VERSION:Lxn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Uxn=typeof process=="object"&&H7&&H7.NODE_DEBUG&&/\bsemver\b/i.test(H7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var $8=Uxn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=kie,s=$8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(FW,FW.exports);var $ie=FW.exports;const Pbe=/^[0-9]+$/,Cqe=(e,t)=>{const n=Pbe.test(e),r=Pbe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Vxn=(e,t)=>Cqe(t,e);var Hxn={compareIdentifiers:Cqe,rcompareIdentifiers:Vxn};const Nk=$8,{MAX_LENGTH:kbe,MAX_SAFE_INTEGER:Dk}=kie,{safeRe:$be,t:Rbe}=$ie,qxn=Pie,{compareIdentifiers:F_}=Hxn;let Wxn=class Hf{constructor(t,n){if(n=qxn(n),t instanceof Hf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>kbe)throw new TypeError(`version is longer than ${kbe} characters`);Nk("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?$be[Rbe.LOOSE]:$be[Rbe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Dk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Dk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Dk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<Dk)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Nk("SemVer.compare",this.version,this.options,t),!(t instanceof Hf)){if(typeof t=="string"&&t===this.version)return 0;t=new Hf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Hf||(t=new Hf(t,this.options)),F_(this.major,t.major)||F_(this.minor,t.minor)||F_(this.patch,t.patch)}comparePre(t){if(t instanceof Hf||(t=new Hf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Nk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return F_(r,i)}while(++n)}compareBuild(t){t instanceof Hf||(t=new Hf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Nk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return F_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),F_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Rie=Wxn;const Nbe=Rie,Gxn=(e,t,n)=>new Nbe(e,n).compare(new Nbe(t,n));var Lx=Gxn;const Yxn=Lx,Kxn=(e,t,n)=>Yxn(e,t,n)===0;var Xxn=Kxn;const Qxn=Lx,Jxn=(e,t,n)=>Qxn(e,t,n)!==0;var Zxn=Jxn;const eSn=Lx,tSn=(e,t,n)=>eSn(e,t,n)>0;var nSn=tSn;const rSn=Lx,iSn=(e,t,n)=>rSn(e,t,n)>=0;var sSn=iSn;const oSn=Lx,aSn=(e,t,n)=>oSn(e,t,n)<0;var uSn=aSn;const lSn=Lx,cSn=(e,t,n)=>lSn(e,t,n)<=0;var fSn=cSn;const dSn=Xxn,hSn=Zxn,pSn=nSn,mSn=sSn,gSn=uSn,ySn=fSn,vSn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return dSn(e,n,r);case"!=":return hSn(e,n,r);case">":return pSn(e,n,r);case">=":return mSn(e,n,r);case"<":return gSn(e,n,r);case"<=":return ySn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var _Sn=vSn,Y7,Dbe;function bSn(){if(Dbe)return Y7;Dbe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Y7=t;const n=Pie,{safeRe:r,t:i}=$ie,s=_Sn,o=$8,a=Rie,u=Aqe();return Y7}var K7,Mbe;function Aqe(){if(Mbe)return K7;Mbe=1;class e{constructor(R,N){if(N=r(N),R instanceof e)return R.loose===!!N.loose&&R.includePrerelease===!!N.includePrerelease?R:new e(R.raw,N);if(R instanceof i)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=R.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(V=>!p(V[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&m(V[0])){this.set=[V];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+R,V=n.get(L);if(V)return V;const j=this.options.loose,H=j?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];R=R.replace(H,O(this.options.includePrerelease)),s("hyphen replace",R),R=R.replace(a[u.COMPARATORTRIM],l),s("comparator trim",R),R=R.replace(a[u.TILDETRIM],c),s("tilde trim",R),R=R.replace(a[u.CARETTRIM],f),s("caret trim",R);let U=R.split(" ").map(F=>y(F,this.options)).join(" ").split(/\s+/).map(F=>A(F,this.options));j&&(U=U.filter(F=>(s("loose invalid filter",F,this.options),!!F.match(a[u.COMPARATORLOOSE])))),s("range list",U);const k=new Map,$=U.map(F=>new i(F,this.options));for(const F of $){if(p(F))return[F];k.set(F.value,F)}k.size>1&&k.has("")&&k.delete("");const q=[...k.values()];return n.set(L,q),q}intersects(R,N){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,N)&&R.set.some(V=>g(V,N)&&L.every(j=>V.every(H=>j.intersects(H,N)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new o(R,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(z(this.set[N],R,this.options))return!0;return!1}}K7=e;const t=Rxn,n=new t({max:1e3}),r=Pie,i=bSn(),s=$8,o=Rie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=$ie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=kie,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,R)=>{let N=!0;const L=D.slice();let V=L.pop();for(;N&&L.length;)N=L.every(j=>V.intersects(j,R)),V=L.pop();return N},y=(D,R)=>(s("comp",D,R),D=E(D,R),s("caret",D),D=_(D,R),s("tildes",D),D=x(D,R),s("xrange",D),D=P(D,R),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",_=(D,R)=>D.trim().split(/\s+/).map(N=>b(N,R)).join(" "),b=(D,R)=>{const N=R.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(N,(L,V,j,H,U)=>{s("tilde",D,L,V,j,H,U);let k;return v(V)?k="":v(j)?k=`>=${V}.0.0 <${+V+1}.0.0-0`:v(H)?k=`>=${V}.${j}.0 <${V}.${+j+1}.0-0`:U?(s("replaceTilde pr",U),k=`>=${V}.${j}.${H}-${U} <${V}.${+j+1}.0-0`):k=`>=${V}.${j}.${H} <${V}.${+j+1}.0-0`,s("tilde return",k),k})},E=(D,R)=>D.trim().split(/\s+/).map(N=>w(N,R)).join(" "),w=(D,R)=>{s("caret",D,R);const N=R.loose?a[u.CARETLOOSE]:a[u.CARET],L=R.includePrerelease?"-0":"";return D.replace(N,(V,j,H,U,k)=>{s("caret",D,V,j,H,U,k);let $;return v(j)?$="":v(H)?$=`>=${j}.0.0${L} <${+j+1}.0.0-0`:v(U)?j==="0"?$=`>=${j}.${H}.0${L} <${j}.${+H+1}.0-0`:$=`>=${j}.${H}.0${L} <${+j+1}.0.0-0`:k?(s("replaceCaret pr",k),j==="0"?H==="0"?$=`>=${j}.${H}.${U}-${k} <${j}.${H}.${+U+1}-0`:$=`>=${j}.${H}.${U}-${k} <${j}.${+H+1}.0-0`:$=`>=${j}.${H}.${U}-${k} <${+j+1}.0.0-0`):(s("no pr"),j==="0"?H==="0"?$=`>=${j}.${H}.${U}${L} <${j}.${H}.${+U+1}-0`:$=`>=${j}.${H}.${U}${L} <${j}.${+H+1}.0-0`:$=`>=${j}.${H}.${U} <${+j+1}.0.0-0`),s("caret return",$),$})},x=(D,R)=>(s("replaceXRanges",D,R),D.split(/\s+/).map(N=>S(N,R)).join(" ")),S=(D,R)=>{D=D.trim();const N=R.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(N,(L,V,j,H,U,k)=>{s("xRange",D,L,V,j,H,U,k);const $=v(j),q=$||v(H),F=q||v(U),B=F;return V==="="&&B&&(V=""),k=R.includePrerelease?"-0":"",$?V===">"||V==="<"?L="<0.0.0-0":L="*":V&&B?(q&&(H=0),U=0,V===">"?(V=">=",q?(j=+j+1,H=0,U=0):(H=+H+1,U=0)):V==="<="&&(V="<",q?j=+j+1:H=+H+1),V==="<"&&(k="-0"),L=`${V+j}.${H}.${U}${k}`):q?L=`>=${j}.0.0${k} <${+j+1}.0.0-0`:F&&(L=`>=${j}.${H}.0${k} <${j}.${+H+1}.0-0`),s("xRange return",L),L})},P=(D,R)=>(s("replaceStars",D,R),D.trim().replace(a[u.STAR],"")),A=(D,R)=>(s("replaceGTE0",D,R),D.trim().replace(a[R.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=D=>(R,N,L,V,j,H,U,k,$,q,F,B,Q)=>(v(L)?N="":v(V)?N=`>=${L}.0.0${D?"-0":""}`:v(j)?N=`>=${L}.${V}.0${D?"-0":""}`:H?N=`>=${N}`:N=`>=${N}${D?"-0":""}`,v($)?k="":v(q)?k=`<${+$+1}.0.0-0`:v(F)?k=`<${$}.${+q+1}.0-0`:B?k=`<=${$}.${q}.${F}-${B}`:D?k=`<${$}.${q}.${+F+1}-0`:k=`<=${k}`,`${N} ${k}`.trim()),z=(D,R,N)=>{for(let L=0;L<D.length;L++)if(!D[L].test(R))return!1;if(R.prerelease.length&&!N.includePrerelease){for(let L=0;L<D.length;L++)if(s(D[L].semver),D[L].semver!==i.ANY&&D[L].semver.prerelease.length>0){const V=D[L].semver;if(V.major===R.major&&V.minor===R.minor&&V.patch===R.patch)return!0}return!1}return!0};return K7}const wSn=Aqe(),ESn=(e,t,n)=>{try{t=new wSn(t,n)}catch{return!1}return t.test(e)};var xSn=ESn,Iqe=Sxn(xSn);function SSn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var TSn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Oqe(e,...t){for(const n of t)CSn(e,n);return e}function CSn(e,t){for(const n of Object.keys(t))_x(e,n,t[n],!0)}const Mc=fmn;let MA=mEn;const Mk=typeof window<"u"?window:void 0;var Hbe;MA===void 0&&((Hbe=Mk==null?void 0:Mk.vl)!=null&&Hbe.compile)&&(MA=Mk.vl);const ASn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},ISn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},FT={vega:"Vega","vega-lite":"Vega-Lite"},FL={vega:Mc.version,"vega-lite":MA?MA.version:"not available"},OSn={vega:e=>e,"vega-lite":(e,t)=>MA.compile(e,{config:t}).spec},PSn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,kSn="chart-wrapper";function $Sn(e){return typeof e=="function"}function Lbe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${FT[r]} JSON Source`}function RSn(e,t){if(e.$schema){const n=bqe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${FT[n.library]}, but mode argument sets ${FT[t]??t}.`);const r=n.library;return Iqe(FL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${FT[r]} ${n.version}, but the current version of ${FT[r]} is v${FL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Pqe(e){return!!(e&&"load"in e)}function Fbe(e){return Pqe(e)?e:Mc.loader(e)}function NSn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return rt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function DSn(e,t,n={}){let r,i;rt(t)?(i=Fbe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=NSn(r),o=s.loader;(!i||o)&&(i=Fbe(n.loader??o));const a=await Bbe(s,i),u=await Bbe(n,i),l={...Oqe(u,a),config:vx(u.config??{},a.config??{})};return await LSn(e,r,l,i)}async function Bbe(e,t){const n=rt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=rt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function MSn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function LSn(e,t,n={},r){const i=n.theme?vx(mxn[n.theme],n.config??{}):n.config,s=K0(n.actions)?n.actions:Oqe({},ASn,n.actions??{}),o={...ISn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Mc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:w,rootContainer:x}=MSn(c);if(!w.getElementById(E)){const S=document.createElement("style");S.id=E,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?TSn.toString():n.defaultStyle,x.appendChild(S)}}const f=RSn(t,n.mode);let d=OSn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=bqe(d.$schema);Iqe(FL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${FL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(kSn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):VF(d,p,!0,!1).newDocument),n.formatLocale&&Mc.formatLocale(n.formatLocale),n.timeFormatLocale&&Mc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const w=n.expressionFunctions[E];"fn"in w?Mc.expressionFunction(E,w.fn,w.visitor):w instanceof Function&&Mc.expressionFunction(E,w)}const{ast:m}=n,g=Mc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Mc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Mc.expressionInterpreter??n.expr??wmn}:{}});if(y.addSignalListener("autosize",(E,w)=>{const{type:x}=w;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:w}=n,x=E&&!Pqe(E)?E==null?void 0:E.baseURL:void 0,S=$Sn(w)?w:new xxn({baseURL:x,...w===!0?{}:w}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:w}=typeof v=="boolean"?{}:v;y.hover(E,w)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const S=document.createElement("summary");S.innerHTML=PSn,x.append(S),_=P=>{x.contains(P.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const w=document.createElement("div");if(E.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const S=o[`${x.toUpperCase()}_ACTION`],P=document.createElement("a"),A=ot(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;P.text=S,P.href="#",P.target="_blank",P.download=`${l}.${x}`,P.addEventListener("mousedown",async function(O){O.preventDefault();const z=await y.toImageURL(x,A);this.href=z}),w.append(P)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(S){Lbe(Wj(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),w.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(S){Lbe(Wj(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),w.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(P){SSn(window,x,{config:i,mode:f,renderer:a,spec:Wj(t)}),P.preventDefault()}),w.append(S)}}function b(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}function FSn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function BSn(e,t,n){n&&(FSn(n)?n(e.data(t)):e.change(t,Mc.changeset().remove(()=>!0).insert(n)))}function jSn(e,t){Object.keys(t).forEach(n=>{BSn(e,n,t[n])})}function kqe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const $qe=()=>{};function X7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function zSn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=kqe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!MU(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function jbe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Q7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function BT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Rqe extends M.PureComponent{constructor(){super(...arguments),BT(this,"containerRef",M.createRef()),BT(this,"resultPromise",void 0),BT(this,"handleError",t=>{const{onError:n=$qe}=this.props;n(t,this.containerRef.current),console.warn(t)}),BT(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=kqe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=zSn(Q7(this.props),Q7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!jH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&jbe(a,s),i&&X7(a,i)),a.run()})}else jH(i,s)||this.modifyView(o=>{s&&jbe(o,s),i&&X7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Q7(this.props);this.resultPromise=DSn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;X7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return M.createElement("div",{ref:this.containerRef,className:t,style:n})}}BT(Rqe,"propTypes",{className:Lt.string,onError:Lt.func});function BW(){return BW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BW.apply(this,arguments)}function jW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const USn={};class Nqe extends M.PureComponent{constructor(){super(...arguments),jW(this,"vegaEmbed",M.createRef()),jW(this,"handleNewView",t=>{this.update();const{onNewView:n=$qe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){jH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{jSn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return M.createElement(Rqe,BW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}jW(Nqe,"defaultProps",{data:USn});function zW(){return zW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zW.apply(this,arguments)}function VSn(e){return M.createElement(Nqe,zW({},e,{mode:"vega-lite"}))}function zbe(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function HSn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=lb(!1),a=tm(),[u,l]=v1(),c=n.filter(A=>A.completed).map(A=>Math.max(...Object.values(A.answers).map(O=>O.endTime))),[f,d]=C.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=C.useMemo(()=>n.filter(A=>A.completed&&zbe(A.answers,f)),[n,f]),p=C.useMemo(()=>n.filter(A=>!A.completed&&zbe(A.answers,f)),[n,f]),m=C.useMemo(()=>{var A,O;return h.length>0?[{Date:(A=f[0])==null?void 0:A.getTime(),Participants:0},...h.map(z=>Math.max(...Object.values(z.answers).map(D=>D.endTime).flat())).sort((z,D)=>z-D).map((z,D)=>({Date:z,Participants:D})),{Date:(O=f[1])==null?void 0:O.getTime(),Participants:h.length}]:[]},[h,f]),g=C.useMemo(()=>{var A,O;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(A=f[0])==null?void 0:A.getTime(),(O=f[1])==null?void 0:O.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:_}]=lb(!1),[b,{close:E,open:w}]=lb(!1),[x,{close:S,open:P}]=lb(!1);return I.jsxs(om,{children:[I.jsxs(T6,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[I.jsxs(qi,{align:"center",mb:16,justify:"space-between",children:[I.jsxs(qi,{direction:"column",children:[I.jsx(Ho,{order:5,mb:4,children:t}),I.jsxs(qi,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[I.jsxs(b1,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),I.jsxs(b1,{size:"sm",color:"green",children:["Completed:",h.length]}),I.jsxs(b1,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),I.jsxs(ll,{children:[I.jsxs(di,{opened:y,children:[I.jsx(di.Target,{children:I.jsx(Yr,{variant:"light",disabled:n.length===0,onClick:()=>{v2(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:_,onMouseLeave:v,px:4,children:I.jsx(Amt,{})})}),I.jsx(di.Dropdown,{children:I.jsx(ct,{children:"Download all participants data as JSON"})})]}),I.jsxs(di,{opened:b,children:[I.jsx(di.Target,{children:I.jsx(Yr,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:w,onMouseLeave:E,px:4,children:I.jsx(Nmt,{})})}),I.jsx(di.Dropdown,{children:I.jsx(ct,{children:"Download all participants data as a tidy CSV"})})]}),I.jsxs(di,{opened:x,children:[I.jsx(di.Target,{children:I.jsx(Yr,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:P,onMouseLeave:S,px:4,children:I.jsx(xmt,{})})}),I.jsx(di.Dropdown,{children:I.jsx(ct,{children:"Analyze study data"})})]})]})]}),I.jsx(y5e,{label:I.jsx(ct,{children:"Time Filter:"}),placeholder:"Pick dates range",value:f,onChange:d}),m.length>0?I.jsxs(I.Fragment,{children:[I.jsx(ct,{mt:16,children:"Finished Participants"}),I.jsx(VSn,{spec:g,actions:!1})]}):I.jsx(st,{h:293.4,children:I.jsx(Rp,{style:{height:"100%"},children:I.jsx(ct,{children:"Not enough participants for chart"})})})]}),I.jsx(zMe,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function qSn(e){const{globalConfig:t}=e,[n,r]=C.useState(!1),[i,s]=C.useState({}),[o,a]=C.useState({}),{storageEngine:u}=ja();return C.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await NZ(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),I.jsxs(st,{children:[I.jsx(Ho,{mb:20,order:4,children:"Your Studies:"}),I.jsxs(du,{children:[t.configsList.map(l=>i[l]&&I.jsx(du.Col,{md:12,xl:6,children:I.jsx(HSn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),I.jsx(M0,{visible:n})]})]})}function WSn({globalConfig:e}){return I.jsxs(WA,{children:[I.jsx(C2,{studyIds:e.configsList}),I.jsx(om,{fluid:!0,children:I.jsx(qSn,{globalConfig:e})})]})}function GSn(){const{user:e,triggerAuth:t}=gx(),{storageEngine:n}=ja(),[r,i]=C.useState(!1),[s,o]=C.useState([]),[a,u]=C.useState(!1),[l,c]=C.useState(!1),[f,d]=C.useState(!1),[h,p]=C.useState(!1),[m,g]=C.useState(""),[y,v]=C.useState(null),_=qPe({initialValues:{email:""},validate:{email:Cxt("Invalid email")}});C.useEffect(()=>{(async()=>{if(u(!0),n instanceof Uh){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i(O==null?void 0:O.isEnabled);const z=await(n==null?void 0:n.getUserManagementData("adminUsers"));z&&z.adminUsersList&&o(z==null?void 0:z.adminUsersList.map(D=>D.email))}else i(!1);u(!1)})()},[n]);const b=async()=>{if(u(!0),n instanceof Uh){const A=await NFe(n,u);A&&A.email&&v({email:A.email,uid:A.uid}),p(!0)}u(!1)},E=async A=>{u(!0),n instanceof Uh&&A&&(await n.changeAuth(!0),await n.addAdminUser(A),o([A.email]),i(!0),t()),p(!1),u(!1)},w=async()=>{if(u(!0),n instanceof Uh){await n.addAdminUser({email:_.values.email,uid:null});const A=await n.getUserManagementData("adminUsers");o(A==null?void 0:A.adminUsersList.map(O=>O.email))}u(!1),c(!1),_.setValues({email:""})},x=A=>{d(!0),g(A)},S=async()=>{if(u(!0),n instanceof Uh){await n.removeAdminUser(m);const A=await n.getUserManagementData("adminUsers");o(A==null?void 0:A.adminUsersList.map(O=>O.email))}d(!1),u(!1)},P=C.useMemo(()=>n instanceof Uh,[n]);return I.jsxs(I.Fragment,{children:[I.jsx(om,{children:I.jsxs(T6,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[I.jsx(Ho,{mb:20,order:3,children:"Authentication"}),r?I.jsx(qi,{children:I.jsx(ct,{children:"Authentication is enabled."})}):I.jsxs(qi,{justify:"space-between",children:[I.jsx(st,{children:I.jsx(ct,{children:"Authentication is currently disabled."})}),I.jsx(I6,{label:"You can only enable auth when using Firebase",disabled:P,children:I.jsx(Yr,{onClick:A=>P?b():A.preventDefault(),color:"green","data-disabled":P?void 0:!0,sx:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?I.jsxs(qi,{mt:40,direction:"column",children:[I.jsxs(qi,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[I.jsx(Ho,{order:6,children:"Enabled Users"}),I.jsx(Mmt,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(A=>{var O;return I.jsxs(qi,{justify:"space-between",mb:10,children:[I.jsx(ct,{children:A}),A===((O=e.user)==null?void 0:O.email)?I.jsx(ct,{color:"blue",size:"xs",children:"You"}):I.jsx(cC,{variant:"subtle",onClick:()=>x(A),children:I.jsx(Dmt,{color:"red"})})]},A)}):null]}):null]})}),I.jsx(Og,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:I.jsxs(st,{component:"form",onSubmit:_.onSubmit(()=>w()),children:[I.jsx(C6,{icon:I.jsx(vmt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),I.jsxs(qi,{mt:30,justify:"right",children:[I.jsx(Yr,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),I.jsx(Yr,{type:"submit",children:"Save"})]})]})}),I.jsxs(Og,{opened:f,size:"large",onClose:()=>d(!1),title:I.jsxs(ct,{fw:700,children:["Remove",m,"?"]}),children:[I.jsxs(ct,{mt:40,children:["Are you sure you want to remove",I.jsx("b",{children:m})," ","as an administrator?"]}),I.jsxs(qi,{mt:40,justify:"right",children:[I.jsx(Yr,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),I.jsx(Yr,{onClick:()=>S(),children:"Yes, I'm sure."})]})]}),I.jsxs(Og,{opened:h,size:"md",onClose:()=>d(!1),title:I.jsx(ct,{fw:700,children:"Enable Authentication?"}),children:[I.jsxs(ct,{mt:40,children:["User"," ",I.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),I.jsxs(qi,{mt:40,justify:"right",children:[I.jsx(Yr,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),I.jsx(Yr,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),I.jsx(M0,{visible:a})]})}async function YSn(){const t=await(await fetch(`${hc}global.json`)).text();return OBt(t)}async function KSn(e){const t={},n=e.configsList.map(o=>`${hc}${e.configs[o].path}`),r=await Promise.all(n.map(o=>fetch(o))),i=await Promise.all(r.map(o=>o.text())),s=await Promise.all(i.map((o,a)=>BMe(o,e.configsList[a])));return e.configsList.forEach((o,a)=>{t[o]=s[a]}),t}function XSn(){const[e,t]=C.useState(null),[n,r]=C.useState({});return C.useEffect(()=>{async function i(){e&&r(await KSn(e))}i()},[e]),C.useEffect(()=>{e||YSn().then(i=>{t(i)})},[e]),e?I.jsx(mKe,{basename:hc,children:I.jsx(kYt,{children:I.jsxs(hKe,{children:[I.jsx(Rh,{path:"/",element:I.jsxs(I.Fragment,{children:[I.jsx(C2,{studyIds:e.configsList}),I.jsx(dwt,{globalConfig:e,studyConfigs:n})]})}),I.jsx(Rh,{path:"/:studyId/*",element:I.jsx(VYt,{globalConfig:e})}),I.jsx(Rh,{path:"/analysis/dashboard",element:I.jsx(Fj,{children:I.jsx(WSn,{globalConfig:e})})}),I.jsx(Rh,{path:"/analysis",element:I.jsx(eH,{to:"/analysis/dashboard"})}),I.jsx(Rh,{path:"/analysis/stats/:studyId/:tab",element:I.jsx(Fj,{children:I.jsx(GYt,{globalConfig:e})})}),I.jsx(Rh,{path:"/analysis/stats/:studyId",element:I.jsx(eH,{to:"./table",replace:!0})}),I.jsx(Rh,{path:"/settings",element:I.jsx(Fj,{children:I.jsxs(WA,{children:[I.jsx(C2,{studyIds:e.configsList}),I.jsx(GSn,{})]})})}),I.jsx(Rh,{path:"/login",element:I.jsxs(I.Fragment,{children:[I.jsx(C2,{studyIds:e.configsList}),I.jsx(YYt,{})]})})]})})}):null}let Lk;const QSn=new Uint8Array(16);function JSn(){if(!Lk&&(Lk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lk(QSn)}const io=[];for(let e=0;e<256;++e)io.push((e+256).toString(16).slice(1));function ZSn(e,t=0){return io[e[t+0]]+io[e[t+1]]+io[e[t+2]]+io[e[t+3]]+"-"+io[e[t+4]]+io[e[t+5]]+"-"+io[e[t+6]]+io[e[t+7]]+"-"+io[e[t+8]]+io[e[t+9]]+"-"+io[e[t+10]]+io[e[t+11]]+io[e[t+12]]+io[e[t+13]]+io[e[t+14]]+io[e[t+15]]}const eTn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ube={randomUUID:eTn};function Vbe(e,t,n){if(Ube.randomUUID&&!t&&!e)return Ube.randomUUID();e=e||{};const r=e.random||(e.rng||JSn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return ZSn(r)}class tTn extends PFe{constructor(){super("localStorage");Bu(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await MH.createInstance({name:n});const i=await tw(JSON.stringify(r));this.studyDatabase.setItem("currentConfigHash",i);const s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[i]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await tw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=Vbe();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=MH.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=Vbe();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await tw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}_verifyStudyDatabase(n){return n!==void 0}}async function nTn(){let e;{const t=new tTn;await t.connect(),e=t}return e}function rTn(){const{storageEngine:e,setStorageEngine:t}=ja();return C.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await nTn();t(r)}n()},[t,e]),I.jsx(XSn,{})}J7.createRoot(document.getElementById("root")).render(I.jsx(M.StrictMode,{children:I.jsx(gYe,{children:I.jsx(rTn,{})})}))});export default iTn();
