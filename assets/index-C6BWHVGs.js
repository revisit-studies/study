var gXe=Object.defineProperty;var yXe=(e,t,n)=>t in e?gXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vXe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qu=(e,t,n)=>yXe(e,typeof t!="symbol"?t+"":t,n);var cbn=vXe((xxn,Xoe)=>{function bXe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Am(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xXe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var gEe={exports:{}},CF={},yEe={exports:{}},mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OD=Symbol.for("react.element"),_Xe=Symbol.for("react.portal"),wXe=Symbol.for("react.fragment"),EXe=Symbol.for("react.strict_mode"),SXe=Symbol.for("react.profiler"),TXe=Symbol.for("react.provider"),CXe=Symbol.for("react.context"),AXe=Symbol.for("react.forward_ref"),IXe=Symbol.for("react.suspense"),kXe=Symbol.for("react.memo"),RXe=Symbol.for("react.lazy"),qce=Symbol.iterator;function DXe(e){return e===null||typeof e!="object"?null:(e=qce&&e[qce]||e["@@iterator"],typeof e=="function"?e:null)}var vEe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bEe=Object.assign,xEe={};function f2(e,t,n){this.props=e,this.context=t,this.refs=xEe,this.updater=n||vEe}f2.prototype.isReactComponent={};f2.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};f2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _Ee(){}_Ee.prototype=f2.prototype;function fX(e,t,n){this.props=e,this.context=t,this.refs=xEe,this.updater=n||vEe}var dX=fX.prototype=new _Ee;dX.constructor=fX;bEe(dX,f2.prototype);dX.isPureReactComponent=!0;var Wce=Array.isArray,wEe=Object.prototype.hasOwnProperty,hX={current:null},EEe={key:!0,ref:!0,__self:!0,__source:!0};function SEe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)wEe.call(t,r)&&!EEe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:OD,type:e,key:s,ref:o,props:i,_owner:hX.current}}function NXe(e,t){return{$$typeof:OD,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pX(e){return typeof e=="object"&&e!==null&&e.$$typeof===OD}function PXe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gce=/\/+/g;function Yj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PXe(""+e.key):t.toString(36)}function b4(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case OD:case _Xe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Yj(o,0):r,Wce(i)?(n="",e!=null&&(n=e.replace(Gce,"$&/")+"/"),b4(i,t,n,"",function(l){return l})):i!=null&&(pX(i)&&(i=NXe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gce,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Wce(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+Yj(s,a);o+=b4(s,t,n,u,i)}else if(u=DXe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+Yj(s,a++),o+=b4(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function w3(e,t,n){if(e==null)return e;var r=[],i=0;return b4(e,r,"","",function(s){return t.call(n,s,i++)}),r}function OXe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bl={current:null},x4={transition:null},$Xe={ReactCurrentDispatcher:bl,ReactCurrentBatchConfig:x4,ReactCurrentOwner:hX};function TEe(){throw Error("act(...) is not supported in production builds of React.")}mr.Children={map:w3,forEach:function(e,t,n){w3(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return w3(e,function(){t++}),t},toArray:function(e){return w3(e,function(t){return t})||[]},only:function(e){if(!pX(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mr.Component=f2;mr.Fragment=wXe;mr.Profiler=SXe;mr.PureComponent=fX;mr.StrictMode=EXe;mr.Suspense=IXe;mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$Xe;mr.act=TEe;mr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=bEe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=hX.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)wEe.call(t,u)&&!EEe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:OD,type:e.type,key:i,ref:s,props:r,_owner:o}};mr.createContext=function(e){return e={$$typeof:CXe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:TXe,_context:e},e.Consumer=e};mr.createElement=SEe;mr.createFactory=function(e){var t=SEe.bind(null,e);return t.type=e,t};mr.createRef=function(){return{current:null}};mr.forwardRef=function(e){return{$$typeof:AXe,render:e}};mr.isValidElement=pX;mr.lazy=function(e){return{$$typeof:RXe,_payload:{_status:-1,_result:e},_init:OXe}};mr.memo=function(e,t){return{$$typeof:kXe,type:e,compare:t===void 0?null:t}};mr.startTransition=function(e){var t=x4.transition;x4.transition={};try{e()}finally{x4.transition=t}};mr.unstable_act=TEe;mr.useCallback=function(e,t){return bl.current.useCallback(e,t)};mr.useContext=function(e){return bl.current.useContext(e)};mr.useDebugValue=function(){};mr.useDeferredValue=function(e){return bl.current.useDeferredValue(e)};mr.useEffect=function(e,t){return bl.current.useEffect(e,t)};mr.useId=function(){return bl.current.useId()};mr.useImperativeHandle=function(e,t,n){return bl.current.useImperativeHandle(e,t,n)};mr.useInsertionEffect=function(e,t){return bl.current.useInsertionEffect(e,t)};mr.useLayoutEffect=function(e,t){return bl.current.useLayoutEffect(e,t)};mr.useMemo=function(e,t){return bl.current.useMemo(e,t)};mr.useReducer=function(e,t,n){return bl.current.useReducer(e,t,n)};mr.useRef=function(e){return bl.current.useRef(e)};mr.useState=function(e){return bl.current.useState(e)};mr.useSyncExternalStore=function(e,t,n){return bl.current.useSyncExternalStore(e,t,n)};mr.useTransition=function(){return bl.current.useTransition()};mr.version="18.3.1";yEe.exports=mr;var D=yEe.exports;const ni=Am(D),j6=bXe({__proto__:null,default:ni},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MXe=D,LXe=Symbol.for("react.element"),FXe=Symbol.for("react.fragment"),BXe=Object.prototype.hasOwnProperty,jXe=MXe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UXe={key:!0,ref:!0,__self:!0,__source:!0};function CEe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)BXe.call(t,r)&&!UXe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:LXe,type:e,key:s,ref:o,props:i,_owner:jXe.current}}CF.Fragment=FXe;CF.jsx=CEe;CF.jsxs=CEe;gEe.exports=CF;var _=gEe.exports,SH={},AEe={exports:{}},xf={},IEe={exports:{}},kEe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,J){var F=K.length;K.push(J);e:for(;0<F;){var U=F-1>>>1,W=K[U];if(0<i(W,J))K[U]=J,K[F]=W,F=U;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],F=K.pop();if(F!==J){K[0]=F;e:for(var U=0,W=K.length,L=W>>>1;U<L;){var V=2*(U+1)-1,Q=K[V],ue=V+1,we=K[ue];if(0>i(Q,F))ue<W&&0>i(we,Q)?(K[U]=we,K[ue]=F,U=ue):(K[U]=Q,K[V]=F,U=V);else if(ue<W&&0>i(we,F))K[U]=we,K[ue]=F,U=ue;else break e}}return J}function i(K,J){var F=K.sortIndex-J.sortIndex;return F!==0?F:K.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var J=n(l);J!==null;){if(J.callback===null)r(l);else if(J.startTime<=K)r(l),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(l)}}function w(K){if(m=!1,x(K),!p)if(n(u)!==null)p=!0,H(E);else{var J=n(l);J!==null&&Y(w,J.startTime-K)}}function E(K,J){p=!1,m&&(m=!1,y(I),I=-1),h=!0;var F=d;try{for(x(J),f=n(u);f!==null&&(!(f.expirationTime>J)||K&&!P());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=J);J=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),x(J)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var V=n(l);V!==null&&Y(w,V.startTime-J),L=!1}return L}finally{f=null,d=F,h=!1}}var T=!1,C=null,I=-1,N=5,k=-1;function P(){return!(e.unstable_now()-k<N)}function M(){if(C!==null){var K=e.unstable_now();k=K;var J=!0;try{J=C(!0,K)}finally{J?O():(T=!1,C=null)}}else T=!1}var O;if(typeof v=="function")O=function(){v(M)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=M,O=function(){q.postMessage(null)}}else O=function(){g(M,0)};function H(K){C=K,T||(T=!0,O())}function Y(K,J){I=g(function(){K(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,H(E))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var F=d;d=J;try{return K()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var F=d;d=K;try{return J()}finally{d=F}},e.unstable_scheduleCallback=function(K,J,F){var U=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?U+F:U):F=U,K){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,K={id:c++,callback:J,priorityLevel:K,startTime:F,expirationTime:W,sortIndex:-1},F>U?(K.sortIndex=F,t(l,K),n(u)===null&&K===n(l)&&(m?(y(I),I=-1):m=!0,Y(w,F-U))):(K.sortIndex=W,t(u,K),p||h||(p=!0,H(E))),K},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(K){var J=d;return function(){var F=d;d=J;try{return K.apply(this,arguments)}finally{d=F}}}})(kEe);IEe.exports=kEe;var zXe=IEe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VXe=D,sf=zXe;function bt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var REe=new Set,Uk={};function O_(e,t){GS(e,t),GS(e+"Capture",t)}function GS(e,t){for(Uk[e]=t,e=0;e<t.length;e++)REe.add(t[e])}var ag=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TH=Object.prototype.hasOwnProperty,HXe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yce={},Kce={};function qXe(e){return TH.call(Kce,e)?!0:TH.call(Yce,e)?!1:HXe.test(e)?Kce[e]=!0:(Yce[e]=!0,!1)}function WXe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GXe(e,t,n,r){if(t===null||typeof t>"u"||WXe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var za={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){za[e]=new xl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];za[t]=new xl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){za[e]=new xl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){za[e]=new xl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){za[e]=new xl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){za[e]=new xl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){za[e]=new xl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){za[e]=new xl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){za[e]=new xl(e,5,!1,e.toLowerCase(),null,!1,!1)});var mX=/[\-:]([a-z])/g;function gX(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mX,gX);za[t]=new xl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mX,gX);za[t]=new xl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mX,gX);za[t]=new xl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){za[e]=new xl(e,1,!1,e.toLowerCase(),null,!1,!1)});za.xlinkHref=new xl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){za[e]=new xl(e,1,!1,e.toLowerCase(),null,!0,!0)});function yX(e,t,n,r){var i=za.hasOwnProperty(t)?za[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GXe(t,n,i,r)&&(n=null),r||i===null?qXe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $g=VXe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E3=Symbol.for("react.element"),$E=Symbol.for("react.portal"),ME=Symbol.for("react.fragment"),vX=Symbol.for("react.strict_mode"),CH=Symbol.for("react.profiler"),DEe=Symbol.for("react.provider"),NEe=Symbol.for("react.context"),bX=Symbol.for("react.forward_ref"),AH=Symbol.for("react.suspense"),IH=Symbol.for("react.suspense_list"),xX=Symbol.for("react.memo"),ky=Symbol.for("react.lazy"),PEe=Symbol.for("react.offscreen"),Xce=Symbol.iterator;function KC(e){return e===null||typeof e!="object"?null:(e=Xce&&e[Xce]||e["@@iterator"],typeof e=="function"?e:null)}var Ds=Object.assign,Kj;function KA(e){if(Kj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Kj=t&&t[1]||""}return`
`+Kj+e}var Xj=!1;function Qj(e,t){if(!e||Xj)return"";Xj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Xj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?KA(e):""}function YXe(e){switch(e.tag){case 5:return KA(e.type);case 16:return KA("Lazy");case 13:return KA("Suspense");case 19:return KA("SuspenseList");case 0:case 2:case 15:return e=Qj(e.type,!1),e;case 11:return e=Qj(e.type.render,!1),e;case 1:return e=Qj(e.type,!0),e;default:return""}}function kH(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ME:return"Fragment";case $E:return"Portal";case CH:return"Profiler";case vX:return"StrictMode";case AH:return"Suspense";case IH:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NEe:return(e.displayName||"Context")+".Consumer";case DEe:return(e._context.displayName||"Context")+".Provider";case bX:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xX:return t=e.displayName||null,t!==null?t:kH(e.type)||"Memo";case ky:t=e._payload,e=e._init;try{return kH(e(t))}catch{}}return null}function KXe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kH(t);case 8:return t===vX?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function O1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function OEe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function XXe(e){var t=OEe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function S3(e){e._valueTracker||(e._valueTracker=XXe(e))}function $Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=OEe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function U6(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function RH(e,t){var n=t.checked;return Ds({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qce(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=O1(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MEe(e,t){t=t.checked,t!=null&&yX(e,"checked",t,!1)}function DH(e,t){MEe(e,t);var n=O1(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?NH(e,t.type,n):t.hasOwnProperty("defaultValue")&&NH(e,t.type,O1(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function NH(e,t,n){(t!=="number"||U6(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var XA=Array.isArray;function aS(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+O1(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function PH(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(bt(91));return Ds({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zce(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(bt(92));if(XA(n)){if(1<n.length)throw Error(bt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:O1(n)}}function LEe(e,t){var n=O1(t.value),r=O1(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function efe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function FEe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function OH(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?FEe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var T3,BEe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(T3=T3||document.createElement("div"),T3.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=T3.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zk(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var UI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QXe=["Webkit","ms","Moz","O"];Object.keys(UI).forEach(function(e){QXe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),UI[t]=UI[e]})});function jEe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||UI.hasOwnProperty(e)&&UI[e]?(""+t).trim():t+"px"}function UEe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jEe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var JXe=Ds({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $H(e,t){if(t){if(JXe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(bt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(bt(62))}}function MH(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LH=null;function _X(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var FH=null,uS=null,lS=null;function tfe(e){if(e=LD(e)){if(typeof FH!="function")throw Error(bt(280));var t=e.stateNode;t&&(t=DF(t),FH(e.stateNode,e.type,t))}}function zEe(e){uS?lS?lS.push(e):lS=[e]:uS=e}function VEe(){if(uS){var e=uS,t=lS;if(lS=uS=null,tfe(e),t)for(e=0;e<t.length;e++)tfe(t[e])}}function HEe(e,t){return e(t)}function qEe(){}var Jj=!1;function WEe(e,t,n){if(Jj)return e(t,n);Jj=!0;try{return HEe(e,t,n)}finally{Jj=!1,(uS!==null||lS!==null)&&(qEe(),VEe())}}function Vk(e,t){var n=e.stateNode;if(n===null)return null;var r=DF(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(bt(231,t,typeof n));return n}var BH=!1;if(ag)try{var XC={};Object.defineProperty(XC,"passive",{get:function(){BH=!0}}),window.addEventListener("test",XC,XC),window.removeEventListener("test",XC,XC)}catch{BH=!1}function ZXe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var zI=!1,z6=null,V6=!1,jH=null,eQe={onError:function(e){zI=!0,z6=e}};function tQe(e,t,n,r,i,s,o,a,u){zI=!1,z6=null,ZXe.apply(eQe,arguments)}function nQe(e,t,n,r,i,s,o,a,u){if(tQe.apply(this,arguments),zI){if(zI){var l=z6;zI=!1,z6=null}else throw Error(bt(198));V6||(V6=!0,jH=l)}}function $_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function GEe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nfe(e){if($_(e)!==e)throw Error(bt(188))}function rQe(e){var t=e.alternate;if(!t){if(t=$_(e),t===null)throw Error(bt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nfe(i),e;if(s===r)return nfe(i),t;s=s.sibling}throw Error(bt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(bt(189))}}if(n.alternate!==r)throw Error(bt(190))}if(n.tag!==3)throw Error(bt(188));return n.stateNode.current===n?e:t}function YEe(e){return e=rQe(e),e!==null?KEe(e):null}function KEe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=KEe(e);if(t!==null)return t;e=e.sibling}return null}var XEe=sf.unstable_scheduleCallback,rfe=sf.unstable_cancelCallback,iQe=sf.unstable_shouldYield,sQe=sf.unstable_requestPaint,ro=sf.unstable_now,oQe=sf.unstable_getCurrentPriorityLevel,wX=sf.unstable_ImmediatePriority,QEe=sf.unstable_UserBlockingPriority,H6=sf.unstable_NormalPriority,aQe=sf.unstable_LowPriority,JEe=sf.unstable_IdlePriority,AF=null,Vp=null;function uQe(e){if(Vp&&typeof Vp.onCommitFiberRoot=="function")try{Vp.onCommitFiberRoot(AF,e,void 0,(e.current.flags&128)===128)}catch{}}var xh=Math.clz32?Math.clz32:fQe,lQe=Math.log,cQe=Math.LN2;function fQe(e){return e>>>=0,e===0?32:31-(lQe(e)/cQe|0)|0}var C3=64,A3=4194304;function QA(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function q6(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=QA(a):(s&=o,s!==0&&(r=QA(s)))}else o=n&~i,o!==0?r=QA(o):s!==0&&(r=QA(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xh(t),i=1<<n,r|=e[n],t&=~i;return r}function dQe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hQe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-xh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=dQe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function UH(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ZEe(){var e=C3;return C3<<=1,!(C3&4194240)&&(C3=64),e}function Zj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $D(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xh(t),e[t]=n}function pQe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function EX(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ai=0;function eSe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tSe,SX,nSe,rSe,iSe,zH=!1,I3=[],f1=null,d1=null,h1=null,Hk=new Map,qk=new Map,By=[],mQe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ife(e,t){switch(e){case"focusin":case"focusout":f1=null;break;case"dragenter":case"dragleave":d1=null;break;case"mouseover":case"mouseout":h1=null;break;case"pointerover":case"pointerout":Hk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qk.delete(t.pointerId)}}function QC(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=LD(t),t!==null&&SX(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gQe(e,t,n,r,i){switch(t){case"focusin":return f1=QC(f1,e,t,n,r,i),!0;case"dragenter":return d1=QC(d1,e,t,n,r,i),!0;case"mouseover":return h1=QC(h1,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hk.set(s,QC(Hk.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qk.set(s,QC(qk.get(s)||null,e,t,n,r,i)),!0}return!1}function sSe(e){var t=ax(e.target);if(t!==null){var n=$_(t);if(n!==null){if(t=n.tag,t===13){if(t=GEe(n),t!==null){e.blockedOn=t,iSe(e.priority,function(){nSe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _4(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=VH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);LH=r,n.target.dispatchEvent(r),LH=null}else return t=LD(n),t!==null&&SX(t),e.blockedOn=n,!1;t.shift()}return!0}function sfe(e,t,n){_4(e)&&n.delete(t)}function yQe(){zH=!1,f1!==null&&_4(f1)&&(f1=null),d1!==null&&_4(d1)&&(d1=null),h1!==null&&_4(h1)&&(h1=null),Hk.forEach(sfe),qk.forEach(sfe)}function JC(e,t){e.blockedOn===t&&(e.blockedOn=null,zH||(zH=!0,sf.unstable_scheduleCallback(sf.unstable_NormalPriority,yQe)))}function Wk(e){function t(i){return JC(i,e)}if(0<I3.length){JC(I3[0],e);for(var n=1;n<I3.length;n++){var r=I3[n];r.blockedOn===e&&(r.blockedOn=null)}}for(f1!==null&&JC(f1,e),d1!==null&&JC(d1,e),h1!==null&&JC(h1,e),Hk.forEach(t),qk.forEach(t),n=0;n<By.length;n++)r=By[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<By.length&&(n=By[0],n.blockedOn===null);)sSe(n),n.blockedOn===null&&By.shift()}var cS=$g.ReactCurrentBatchConfig,W6=!0;function vQe(e,t,n,r){var i=Ai,s=cS.transition;cS.transition=null;try{Ai=1,TX(e,t,n,r)}finally{Ai=i,cS.transition=s}}function bQe(e,t,n,r){var i=Ai,s=cS.transition;cS.transition=null;try{Ai=4,TX(e,t,n,r)}finally{Ai=i,cS.transition=s}}function TX(e,t,n,r){if(W6){var i=VH(e,t,n,r);if(i===null)l7(e,t,r,G6,n),ife(e,r);else if(gQe(i,e,t,n,r))r.stopPropagation();else if(ife(e,r),t&4&&-1<mQe.indexOf(e)){for(;i!==null;){var s=LD(i);if(s!==null&&tSe(s),s=VH(e,t,n,r),s===null&&l7(e,t,r,G6,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else l7(e,t,r,null,n)}}var G6=null;function VH(e,t,n,r){if(G6=null,e=_X(r),e=ax(e),e!==null)if(t=$_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=GEe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return G6=e,null}function oSe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oQe()){case wX:return 1;case QEe:return 4;case H6:case aQe:return 16;case JEe:return 536870912;default:return 16}default:return 16}}var Xy=null,CX=null,w4=null;function aSe(){if(w4)return w4;var e,t=CX,n=t.length,r,i="value"in Xy?Xy.value:Xy.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return w4=i.slice(e,1<r?1-r:void 0)}function E4(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function k3(){return!0}function ofe(){return!1}function _f(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?k3:ofe,this.isPropagationStopped=ofe,this}return Ds(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=k3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=k3)},persist:function(){},isPersistent:k3}),t}var d2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AX=_f(d2),MD=Ds({},d2,{view:0,detail:0}),xQe=_f(MD),e7,t7,ZC,IF=Ds({},MD,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IX,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ZC&&(ZC&&e.type==="mousemove"?(e7=e.screenX-ZC.screenX,t7=e.screenY-ZC.screenY):t7=e7=0,ZC=e),e7)},movementY:function(e){return"movementY"in e?e.movementY:t7}}),afe=_f(IF),_Qe=Ds({},IF,{dataTransfer:0}),wQe=_f(_Qe),EQe=Ds({},MD,{relatedTarget:0}),n7=_f(EQe),SQe=Ds({},d2,{animationName:0,elapsedTime:0,pseudoElement:0}),TQe=_f(SQe),CQe=Ds({},d2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AQe=_f(CQe),IQe=Ds({},d2,{data:0}),ufe=_f(IQe),kQe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RQe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DQe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NQe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DQe[e])?!!t[e]:!1}function IX(){return NQe}var PQe=Ds({},MD,{key:function(e){if(e.key){var t=kQe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=E4(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RQe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IX,charCode:function(e){return e.type==="keypress"?E4(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?E4(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OQe=_f(PQe),$Qe=Ds({},IF,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lfe=_f($Qe),MQe=Ds({},MD,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IX}),LQe=_f(MQe),FQe=Ds({},d2,{propertyName:0,elapsedTime:0,pseudoElement:0}),BQe=_f(FQe),jQe=Ds({},IF,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UQe=_f(jQe),zQe=[9,13,27,32],kX=ag&&"CompositionEvent"in window,VI=null;ag&&"documentMode"in document&&(VI=document.documentMode);var VQe=ag&&"TextEvent"in window&&!VI,uSe=ag&&(!kX||VI&&8<VI&&11>=VI),cfe=" ",ffe=!1;function lSe(e,t){switch(e){case"keyup":return zQe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cSe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var LE=!1;function HQe(e,t){switch(e){case"compositionend":return cSe(t);case"keypress":return t.which!==32?null:(ffe=!0,cfe);case"textInput":return e=t.data,e===cfe&&ffe?null:e;default:return null}}function qQe(e,t){if(LE)return e==="compositionend"||!kX&&lSe(e,t)?(e=aSe(),w4=CX=Xy=null,LE=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uSe&&t.locale!=="ko"?null:t.data;default:return null}}var WQe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dfe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WQe[e.type]:t==="textarea"}function fSe(e,t,n,r){zEe(r),t=Y6(t,"onChange"),0<t.length&&(n=new AX("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var HI=null,Gk=null;function GQe(e){wSe(e,0)}function kF(e){var t=jE(e);if($Ee(t))return e}function YQe(e,t){if(e==="change")return t}var dSe=!1;if(ag){var r7;if(ag){var i7="oninput"in document;if(!i7){var hfe=document.createElement("div");hfe.setAttribute("oninput","return;"),i7=typeof hfe.oninput=="function"}r7=i7}else r7=!1;dSe=r7&&(!document.documentMode||9<document.documentMode)}function pfe(){HI&&(HI.detachEvent("onpropertychange",hSe),Gk=HI=null)}function hSe(e){if(e.propertyName==="value"&&kF(Gk)){var t=[];fSe(t,Gk,e,_X(e)),WEe(GQe,t)}}function KQe(e,t,n){e==="focusin"?(pfe(),HI=t,Gk=n,HI.attachEvent("onpropertychange",hSe)):e==="focusout"&&pfe()}function XQe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kF(Gk)}function QQe(e,t){if(e==="click")return kF(t)}function JQe(e,t){if(e==="input"||e==="change")return kF(t)}function ZQe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dh=typeof Object.is=="function"?Object.is:ZQe;function Yk(e,t){if(Dh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!TH.call(t,i)||!Dh(e[i],t[i]))return!1}return!0}function mfe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gfe(e,t){var n=mfe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mfe(n)}}function pSe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pSe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mSe(){for(var e=window,t=U6();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=U6(e.document)}return t}function RX(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eJe(e){var t=mSe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pSe(n.ownerDocument.documentElement,n)){if(r!==null&&RX(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=gfe(n,s);var o=gfe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tJe=ag&&"documentMode"in document&&11>=document.documentMode,FE=null,HH=null,qI=null,qH=!1;function yfe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qH||FE==null||FE!==U6(r)||(r=FE,"selectionStart"in r&&RX(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qI&&Yk(qI,r)||(qI=r,r=Y6(HH,"onSelect"),0<r.length&&(t=new AX("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=FE)))}function R3(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var BE={animationend:R3("Animation","AnimationEnd"),animationiteration:R3("Animation","AnimationIteration"),animationstart:R3("Animation","AnimationStart"),transitionend:R3("Transition","TransitionEnd")},s7={},gSe={};ag&&(gSe=document.createElement("div").style,"AnimationEvent"in window||(delete BE.animationend.animation,delete BE.animationiteration.animation,delete BE.animationstart.animation),"TransitionEvent"in window||delete BE.transitionend.transition);function RF(e){if(s7[e])return s7[e];if(!BE[e])return e;var t=BE[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gSe)return s7[e]=t[n];return e}var ySe=RF("animationend"),vSe=RF("animationiteration"),bSe=RF("animationstart"),xSe=RF("transitionend"),_Se=new Map,vfe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _v(e,t){_Se.set(e,t),O_(t,[e])}for(var o7=0;o7<vfe.length;o7++){var a7=vfe[o7],nJe=a7.toLowerCase(),rJe=a7[0].toUpperCase()+a7.slice(1);_v(nJe,"on"+rJe)}_v(ySe,"onAnimationEnd");_v(vSe,"onAnimationIteration");_v(bSe,"onAnimationStart");_v("dblclick","onDoubleClick");_v("focusin","onFocus");_v("focusout","onBlur");_v(xSe,"onTransitionEnd");GS("onMouseEnter",["mouseout","mouseover"]);GS("onMouseLeave",["mouseout","mouseover"]);GS("onPointerEnter",["pointerout","pointerover"]);GS("onPointerLeave",["pointerout","pointerover"]);O_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));O_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));O_("onBeforeInput",["compositionend","keypress","textInput","paste"]);O_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));O_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));O_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var JA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iJe=new Set("cancel close invalid load scroll toggle".split(" ").concat(JA));function bfe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nQe(r,t,void 0,e),e.currentTarget=null}function wSe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;bfe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;bfe(i,a,l),s=u}}}if(V6)throw e=jH,V6=!1,jH=null,e}function ss(e,t){var n=t[XH];n===void 0&&(n=t[XH]=new Set);var r=e+"__bubble";n.has(r)||(ESe(t,e,2,!1),n.add(r))}function u7(e,t,n){var r=0;t&&(r|=4),ESe(n,e,r,t)}var D3="_reactListening"+Math.random().toString(36).slice(2);function Kk(e){if(!e[D3]){e[D3]=!0,REe.forEach(function(n){n!=="selectionchange"&&(iJe.has(n)||u7(n,!1,e),u7(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[D3]||(t[D3]=!0,u7("selectionchange",!1,t))}}function ESe(e,t,n,r){switch(oSe(t)){case 1:var i=vQe;break;case 4:i=bQe;break;default:i=TX}n=i.bind(null,t,n,e),i=void 0,!BH||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function l7(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ax(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}WEe(function(){var l=s,c=_X(n),f=[];e:{var d=_Se.get(e);if(d!==void 0){var h=AX,p=e;switch(e){case"keypress":if(E4(n)===0)break e;case"keydown":case"keyup":h=OQe;break;case"focusin":p="focus",h=n7;break;case"focusout":p="blur",h=n7;break;case"beforeblur":case"afterblur":h=n7;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=afe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=wQe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=LQe;break;case ySe:case vSe:case bSe:h=TQe;break;case xSe:h=BQe;break;case"scroll":h=xQe;break;case"wheel":h=UQe;break;case"copy":case"cut":case"paste":h=AQe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=lfe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,x;v!==null;){x=v;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,y!==null&&(w=Vk(v,y),w!=null&&m.push(Xk(v,w,x)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==LH&&(p=n.relatedTarget||n.fromElement)&&(ax(p)||p[ug]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?ax(p):null,p!==null&&(g=$_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=afe,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=lfe,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:jE(h),x=p==null?d:jE(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=x,w=null,ax(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=x,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,x=m;x;x=Hw(x))v++;for(x=0,w=y;w;w=Hw(w))x++;for(;0<v-x;)m=Hw(m),v--;for(;0<x-v;)y=Hw(y),x--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Hw(m),y=Hw(y)}m=null}else m=null;h!==null&&xfe(f,d,h,m,!1),p!==null&&g!==null&&xfe(f,g,p,m,!0)}}e:{if(d=l?jE(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=YQe;else if(dfe(d))if(dSe)E=JQe;else{E=XQe;var T=KQe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=QQe);if(E&&(E=E(e,l))){fSe(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&NH(d,"number",d.value)}switch(T=l?jE(l):window,e){case"focusin":(dfe(T)||T.contentEditable==="true")&&(FE=T,HH=l,qI=null);break;case"focusout":qI=HH=FE=null;break;case"mousedown":qH=!0;break;case"contextmenu":case"mouseup":case"dragend":qH=!1,yfe(f,n,c);break;case"selectionchange":if(tJe)break;case"keydown":case"keyup":yfe(f,n,c)}var C;if(kX)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else LE?lSe(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(uSe&&n.locale!=="ko"&&(LE||I!=="onCompositionStart"?I==="onCompositionEnd"&&LE&&(C=aSe()):(Xy=c,CX="value"in Xy?Xy.value:Xy.textContent,LE=!0)),T=Y6(l,I),0<T.length&&(I=new ufe(I,e,null,n,c),f.push({event:I,listeners:T}),C?I.data=C:(C=cSe(n),C!==null&&(I.data=C)))),(C=VQe?HQe(e,n):qQe(e,n))&&(l=Y6(l,"onBeforeInput"),0<l.length&&(c=new ufe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=C))}wSe(f,t)})}function Xk(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Y6(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vk(e,n),s!=null&&r.unshift(Xk(e,s,i)),s=Vk(e,t),s!=null&&r.push(Xk(e,s,i))),e=e.return}return r}function Hw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xfe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Vk(n,s),u!=null&&o.unshift(Xk(n,u,a))):i||(u=Vk(n,s),u!=null&&o.push(Xk(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var sJe=/\r\n?/g,oJe=/\u0000|\uFFFD/g;function _fe(e){return(typeof e=="string"?e:""+e).replace(sJe,`
`).replace(oJe,"")}function N3(e,t,n){if(t=_fe(t),_fe(e)!==t&&n)throw Error(bt(425))}function K6(){}var WH=null,GH=null;function YH(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var KH=typeof setTimeout=="function"?setTimeout:void 0,aJe=typeof clearTimeout=="function"?clearTimeout:void 0,wfe=typeof Promise=="function"?Promise:void 0,uJe=typeof queueMicrotask=="function"?queueMicrotask:typeof wfe<"u"?function(e){return wfe.resolve(null).then(e).catch(lJe)}:KH;function lJe(e){setTimeout(function(){throw e})}function c7(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Wk(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wk(t)}function p1(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Efe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var h2=Math.random().toString(36).slice(2),Ep="__reactFiber$"+h2,Qk="__reactProps$"+h2,ug="__reactContainer$"+h2,XH="__reactEvents$"+h2,cJe="__reactListeners$"+h2,fJe="__reactHandles$"+h2;function ax(e){var t=e[Ep];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ug]||n[Ep]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Efe(e);e!==null;){if(n=e[Ep])return n;e=Efe(e)}return t}e=n,n=e.parentNode}return null}function LD(e){return e=e[Ep]||e[ug],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jE(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(bt(33))}function DF(e){return e[Qk]||null}var QH=[],UE=-1;function wv(e){return{current:e}}function cs(e){0>UE||(e.current=QH[UE],QH[UE]=null,UE--)}function Xi(e,t){UE++,QH[UE]=e.current,e.current=t}var $1={},ku=wv($1),tc=wv(!1),Hx=$1;function YS(e,t){var n=e.type.contextTypes;if(!n)return $1;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function nc(e){return e=e.childContextTypes,e!=null}function X6(){cs(tc),cs(ku)}function Sfe(e,t,n){if(ku.current!==$1)throw Error(bt(168));Xi(ku,t),Xi(tc,n)}function SSe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(bt(108,KXe(e)||"Unknown",i));return Ds({},n,r)}function Q6(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$1,Hx=ku.current,Xi(ku,e),Xi(tc,tc.current),!0}function Tfe(e,t,n){var r=e.stateNode;if(!r)throw Error(bt(169));n?(e=SSe(e,t,Hx),r.__reactInternalMemoizedMergedChildContext=e,cs(tc),cs(ku),Xi(ku,e)):cs(tc),Xi(tc,n)}var x0=null,NF=!1,f7=!1;function TSe(e){x0===null?x0=[e]:x0.push(e)}function dJe(e){NF=!0,TSe(e)}function Ev(){if(!f7&&x0!==null){f7=!0;var e=0,t=Ai;try{var n=x0;for(Ai=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}x0=null,NF=!1}catch(i){throw x0!==null&&(x0=x0.slice(e+1)),XEe(wX,Ev),i}finally{Ai=t,f7=!1}}return null}var zE=[],VE=0,J6=null,Z6=0,zf=[],Vf=0,qx=null,N0=1,P0="";function Db(e,t){zE[VE++]=Z6,zE[VE++]=J6,J6=e,Z6=t}function CSe(e,t,n){zf[Vf++]=N0,zf[Vf++]=P0,zf[Vf++]=qx,qx=e;var r=N0;e=P0;var i=32-xh(r)-1;r&=~(1<<i),n+=1;var s=32-xh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,N0=1<<32-xh(t)+i|n<<i|r,P0=s+e}else N0=1<<s|n<<i|r,P0=e}function DX(e){e.return!==null&&(Db(e,1),CSe(e,1,0))}function NX(e){for(;e===J6;)J6=zE[--VE],zE[VE]=null,Z6=zE[--VE],zE[VE]=null;for(;e===qx;)qx=zf[--Vf],zf[Vf]=null,P0=zf[--Vf],zf[Vf]=null,N0=zf[--Vf],zf[Vf]=null}var Qc=null,Vc=null,_s=!1,th=null;function ASe(e,t){var n=Xf(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cfe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qc=e,Vc=p1(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qc=e,Vc=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qx!==null?{id:N0,overflow:P0}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xf(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qc=e,Vc=null,!0):!1;default:return!1}}function JH(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ZH(e){if(_s){var t=Vc;if(t){var n=t;if(!Cfe(e,t)){if(JH(e))throw Error(bt(418));t=p1(n.nextSibling);var r=Qc;t&&Cfe(e,t)?ASe(r,n):(e.flags=e.flags&-4097|2,_s=!1,Qc=e)}}else{if(JH(e))throw Error(bt(418));e.flags=e.flags&-4097|2,_s=!1,Qc=e}}}function Afe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qc=e}function P3(e){if(e!==Qc)return!1;if(!_s)return Afe(e),_s=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!YH(e.type,e.memoizedProps)),t&&(t=Vc)){if(JH(e))throw ISe(),Error(bt(418));for(;t;)ASe(e,t),t=p1(t.nextSibling)}if(Afe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(bt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vc=p1(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vc=null}}else Vc=Qc?p1(e.stateNode.nextSibling):null;return!0}function ISe(){for(var e=Vc;e;)e=p1(e.nextSibling)}function KS(){Vc=Qc=null,_s=!1}function PX(e){th===null?th=[e]:th.push(e)}var hJe=$g.ReactCurrentBatchConfig;function eA(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(bt(309));var r=n.stateNode}if(!r)throw Error(bt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(bt(284));if(!n._owner)throw Error(bt(290,e))}return e}function O3(e,t){throw e=Object.prototype.toString.call(t),Error(bt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ife(e){var t=e._init;return t(e._payload)}function kSe(e){function t(y,v){if(e){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=v1(y,v),y.index=0,y.sibling=null,y}function s(y,v,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,w){return v===null||v.tag!==6?(v=v7(x,y.mode,w),v.return=y,v):(v=i(v,x),v.return=y,v)}function u(y,v,x,w){var E=x.type;return E===ME?c(y,v,x.props.children,w,x.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ky&&Ife(E)===v.type)?(w=i(v,x.props),w.ref=eA(y,v,x),w.return=y,w):(w=R4(x.type,x.key,x.props,null,y.mode,w),w.ref=eA(y,v,x),w.return=y,w)}function l(y,v,x,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=b7(x,y.mode,w),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function c(y,v,x,w,E){return v===null||v.tag!==7?(v=kx(x,y.mode,w,E),v.return=y,v):(v=i(v,x),v.return=y,v)}function f(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=v7(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case E3:return x=R4(v.type,v.key,v.props,null,y.mode,x),x.ref=eA(y,null,v),x.return=y,x;case $E:return v=b7(v,y.mode,x),v.return=y,v;case ky:var w=v._init;return f(y,w(v._payload),x)}if(XA(v)||KC(v))return v=kx(v,y.mode,x,null),v.return=y,v;O3(y,v)}return null}function d(y,v,x,w){var E=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:a(y,v,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case E3:return x.key===E?u(y,v,x,w):null;case $E:return x.key===E?l(y,v,x,w):null;case ky:return E=x._init,d(y,v,E(x._payload),w)}if(XA(x)||KC(x))return E!==null?null:c(y,v,x,w,null);O3(y,x)}return null}function h(y,v,x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(x)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E3:return y=y.get(w.key===null?x:w.key)||null,u(v,y,w,E);case $E:return y=y.get(w.key===null?x:w.key)||null,l(v,y,w,E);case ky:var T=w._init;return h(y,v,x,T(w._payload),E)}if(XA(w)||KC(w))return y=y.get(x)||null,c(v,y,w,E,null);O3(v,w)}return null}function p(y,v,x,w){for(var E=null,T=null,C=v,I=v=0,N=null;C!==null&&I<x.length;I++){C.index>I?(N=C,C=null):N=C.sibling;var k=d(y,C,x[I],w);if(k===null){C===null&&(C=N);break}e&&C&&k.alternate===null&&t(y,C),v=s(k,v,I),T===null?E=k:T.sibling=k,T=k,C=N}if(I===x.length)return n(y,C),_s&&Db(y,I),E;if(C===null){for(;I<x.length;I++)C=f(y,x[I],w),C!==null&&(v=s(C,v,I),T===null?E=C:T.sibling=C,T=C);return _s&&Db(y,I),E}for(C=r(y,C);I<x.length;I++)N=h(C,y,I,x[I],w),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?I:N.key),v=s(N,v,I),T===null?E=N:T.sibling=N,T=N);return e&&C.forEach(function(P){return t(y,P)}),_s&&Db(y,I),E}function m(y,v,x,w){var E=KC(x);if(typeof E!="function")throw Error(bt(150));if(x=E.call(x),x==null)throw Error(bt(151));for(var T=E=null,C=v,I=v=0,N=null,k=x.next();C!==null&&!k.done;I++,k=x.next()){C.index>I?(N=C,C=null):N=C.sibling;var P=d(y,C,k.value,w);if(P===null){C===null&&(C=N);break}e&&C&&P.alternate===null&&t(y,C),v=s(P,v,I),T===null?E=P:T.sibling=P,T=P,C=N}if(k.done)return n(y,C),_s&&Db(y,I),E;if(C===null){for(;!k.done;I++,k=x.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,I),T===null?E=k:T.sibling=k,T=k);return _s&&Db(y,I),E}for(C=r(y,C);!k.done;I++,k=x.next())k=h(C,y,I,k.value,w),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?I:k.key),v=s(k,v,I),T===null?E=k:T.sibling=k,T=k);return e&&C.forEach(function(M){return t(y,M)}),_s&&Db(y,I),E}function g(y,v,x,w){if(typeof x=="object"&&x!==null&&x.type===ME&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case E3:e:{for(var E=x.key,T=v;T!==null;){if(T.key===E){if(E=x.type,E===ME){if(T.tag===7){n(y,T.sibling),v=i(T,x.props.children),v.return=y,y=v;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ky&&Ife(E)===T.type){n(y,T.sibling),v=i(T,x.props),v.ref=eA(y,T,x),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}x.type===ME?(v=kx(x.props.children,y.mode,w,x.key),v.return=y,y=v):(w=R4(x.type,x.key,x.props,null,y.mode,w),w.ref=eA(y,v,x),w.return=y,y=w)}return o(y);case $E:e:{for(T=x.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=b7(x,y.mode,w),v.return=y,y=v}return o(y);case ky:return T=x._init,g(y,v,T(x._payload),w)}if(XA(x))return p(y,v,x,w);if(KC(x))return m(y,v,x,w);O3(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=v7(x,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var XS=kSe(!0),RSe=kSe(!1),e$=wv(null),t$=null,HE=null,OX=null;function $X(){OX=HE=t$=null}function MX(e){var t=e$.current;cs(e$),e._currentValue=t}function eq(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fS(e,t){t$=e,OX=HE=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Kl=!0),e.firstContext=null)}function id(e){var t=e._currentValue;if(OX!==e)if(e={context:e,memoizedValue:t,next:null},HE===null){if(t$===null)throw Error(bt(308));HE=e,t$.dependencies={lanes:0,firstContext:e}}else HE=HE.next=e;return t}var ux=null;function LX(e){ux===null?ux=[e]:ux.push(e)}function DSe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,LX(t)):(n.next=i.next,i.next=n),t.interleaved=n,lg(e,r)}function lg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ry=!1;function FX(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NSe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function W0(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function m1(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Kr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,lg(e,n)}return i=r.interleaved,i===null?(t.next=t,LX(r)):(t.next=i.next,i.next=t),r.interleaved=t,lg(e,n)}function S4(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,EX(e,n)}}function kfe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function n$(e,t,n,r){var i=e.updateQueue;Ry=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ds({},f,d);break e;case 2:Ry=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Gx|=o,e.lanes=o,e.memoizedState=f}}function Rfe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(bt(191,i));i.call(r)}}}var FD={},Hp=wv(FD),Jk=wv(FD),Zk=wv(FD);function lx(e){if(e===FD)throw Error(bt(174));return e}function BX(e,t){switch(Xi(Zk,t),Xi(Jk,e),Xi(Hp,FD),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:OH(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=OH(t,e)}cs(Hp),Xi(Hp,t)}function QS(){cs(Hp),cs(Jk),cs(Zk)}function PSe(e){lx(Zk.current);var t=lx(Hp.current),n=OH(t,e.type);t!==n&&(Xi(Jk,e),Xi(Hp,n))}function jX(e){Jk.current===e&&(cs(Hp),cs(Jk))}var ks=wv(0);function r$(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var d7=[];function UX(){for(var e=0;e<d7.length;e++)d7[e]._workInProgressVersionPrimary=null;d7.length=0}var T4=$g.ReactCurrentDispatcher,h7=$g.ReactCurrentBatchConfig,Wx=0,Rs=null,Oo=null,ia=null,i$=!1,WI=!1,eR=0,pJe=0;function tu(){throw Error(bt(321))}function zX(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dh(e[n],t[n]))return!1;return!0}function VX(e,t,n,r,i,s){if(Wx=s,Rs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T4.current=e===null||e.memoizedState===null?vJe:bJe,e=n(r,i),WI){s=0;do{if(WI=!1,eR=0,25<=s)throw Error(bt(301));s+=1,ia=Oo=null,t.updateQueue=null,T4.current=xJe,e=n(r,i)}while(WI)}if(T4.current=s$,t=Oo!==null&&Oo.next!==null,Wx=0,ia=Oo=Rs=null,i$=!1,t)throw Error(bt(300));return e}function HX(){var e=eR!==0;return eR=0,e}function hp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ia===null?Rs.memoizedState=ia=e:ia=ia.next=e,ia}function sd(){if(Oo===null){var e=Rs.alternate;e=e!==null?e.memoizedState:null}else e=Oo.next;var t=ia===null?Rs.memoizedState:ia.next;if(t!==null)ia=t,Oo=e;else{if(e===null)throw Error(bt(310));Oo=e,e={memoizedState:Oo.memoizedState,baseState:Oo.baseState,baseQueue:Oo.baseQueue,queue:Oo.queue,next:null},ia===null?Rs.memoizedState=ia=e:ia=ia.next=e}return ia}function tR(e,t){return typeof t=="function"?t(e):t}function p7(e){var t=sd(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=Oo,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Wx&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Rs.lanes|=c,Gx|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Dh(r,t.memoizedState)||(Kl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Rs.lanes|=s,Gx|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function m7(e){var t=sd(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Dh(s,t.memoizedState)||(Kl=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function OSe(){}function $Se(e,t){var n=Rs,r=sd(),i=t(),s=!Dh(r.memoizedState,i);if(s&&(r.memoizedState=i,Kl=!0),r=r.queue,qX(FSe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ia!==null&&ia.memoizedState.tag&1){if(n.flags|=2048,nR(9,LSe.bind(null,n,r,i,t),void 0,null),pa===null)throw Error(bt(349));Wx&30||MSe(n,t,i)}return i}function MSe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rs.updateQueue,t===null?(t={lastEffect:null,stores:null},Rs.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function LSe(e,t,n,r){t.value=n,t.getSnapshot=r,BSe(t)&&jSe(e)}function FSe(e,t,n){return n(function(){BSe(t)&&jSe(e)})}function BSe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dh(e,n)}catch{return!0}}function jSe(e){var t=lg(e,1);t!==null&&_h(t,e,1,-1)}function Dfe(e){var t=hp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tR,lastRenderedState:e},t.queue=e,e=e.dispatch=yJe.bind(null,Rs,e),[t.memoizedState,e]}function nR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Rs.updateQueue,t===null?(t={lastEffect:null,stores:null},Rs.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function USe(){return sd().memoizedState}function C4(e,t,n,r){var i=hp();Rs.flags|=e,i.memoizedState=nR(1|t,n,void 0,r===void 0?null:r)}function PF(e,t,n,r){var i=sd();r=r===void 0?null:r;var s=void 0;if(Oo!==null){var o=Oo.memoizedState;if(s=o.destroy,r!==null&&zX(r,o.deps)){i.memoizedState=nR(t,n,s,r);return}}Rs.flags|=e,i.memoizedState=nR(1|t,n,s,r)}function Nfe(e,t){return C4(8390656,8,e,t)}function qX(e,t){return PF(2048,8,e,t)}function zSe(e,t){return PF(4,2,e,t)}function VSe(e,t){return PF(4,4,e,t)}function HSe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qSe(e,t,n){return n=n!=null?n.concat([e]):null,PF(4,4,HSe.bind(null,t,e),n)}function WX(){}function WSe(e,t){var n=sd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zX(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function GSe(e,t){var n=sd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zX(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function YSe(e,t,n){return Wx&21?(Dh(n,t)||(n=ZEe(),Rs.lanes|=n,Gx|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Kl=!0),e.memoizedState=n)}function mJe(e,t){var n=Ai;Ai=n!==0&&4>n?n:4,e(!0);var r=h7.transition;h7.transition={};try{e(!1),t()}finally{Ai=n,h7.transition=r}}function KSe(){return sd().memoizedState}function gJe(e,t,n){var r=y1(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XSe(e))QSe(t,n);else if(n=DSe(e,t,n,r),n!==null){var i=ul();_h(n,e,r,i),JSe(n,t,r)}}function yJe(e,t,n){var r=y1(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XSe(e))QSe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Dh(a,o)){var u=t.interleaved;u===null?(i.next=i,LX(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=DSe(e,t,i,r),n!==null&&(i=ul(),_h(n,e,r,i),JSe(n,t,r))}}function XSe(e){var t=e.alternate;return e===Rs||t!==null&&t===Rs}function QSe(e,t){WI=i$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function JSe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,EX(e,n)}}var s$={readContext:id,useCallback:tu,useContext:tu,useEffect:tu,useImperativeHandle:tu,useInsertionEffect:tu,useLayoutEffect:tu,useMemo:tu,useReducer:tu,useRef:tu,useState:tu,useDebugValue:tu,useDeferredValue:tu,useTransition:tu,useMutableSource:tu,useSyncExternalStore:tu,useId:tu,unstable_isNewReconciler:!1},vJe={readContext:id,useCallback:function(e,t){return hp().memoizedState=[e,t===void 0?null:t],e},useContext:id,useEffect:Nfe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,C4(4194308,4,HSe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return C4(4194308,4,e,t)},useInsertionEffect:function(e,t){return C4(4,2,e,t)},useMemo:function(e,t){var n=hp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gJe.bind(null,Rs,e),[r.memoizedState,e]},useRef:function(e){var t=hp();return e={current:e},t.memoizedState=e},useState:Dfe,useDebugValue:WX,useDeferredValue:function(e){return hp().memoizedState=e},useTransition:function(){var e=Dfe(!1),t=e[0];return e=mJe.bind(null,e[1]),hp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rs,i=hp();if(_s){if(n===void 0)throw Error(bt(407));n=n()}else{if(n=t(),pa===null)throw Error(bt(349));Wx&30||MSe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Nfe(FSe.bind(null,r,s,e),[e]),r.flags|=2048,nR(9,LSe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=hp(),t=pa.identifierPrefix;if(_s){var n=P0,r=N0;n=(r&~(1<<32-xh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eR++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pJe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bJe={readContext:id,useCallback:WSe,useContext:id,useEffect:qX,useImperativeHandle:qSe,useInsertionEffect:zSe,useLayoutEffect:VSe,useMemo:GSe,useReducer:p7,useRef:USe,useState:function(){return p7(tR)},useDebugValue:WX,useDeferredValue:function(e){var t=sd();return YSe(t,Oo.memoizedState,e)},useTransition:function(){var e=p7(tR)[0],t=sd().memoizedState;return[e,t]},useMutableSource:OSe,useSyncExternalStore:$Se,useId:KSe,unstable_isNewReconciler:!1},xJe={readContext:id,useCallback:WSe,useContext:id,useEffect:qX,useImperativeHandle:qSe,useInsertionEffect:zSe,useLayoutEffect:VSe,useMemo:GSe,useReducer:m7,useRef:USe,useState:function(){return m7(tR)},useDebugValue:WX,useDeferredValue:function(e){var t=sd();return Oo===null?t.memoizedState=e:YSe(t,Oo.memoizedState,e)},useTransition:function(){var e=m7(tR)[0],t=sd().memoizedState;return[e,t]},useMutableSource:OSe,useSyncExternalStore:$Se,useId:KSe,unstable_isNewReconciler:!1};function Kd(e,t){if(e&&e.defaultProps){t=Ds({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function tq(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ds({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var OF={isMounted:function(e){return(e=e._reactInternals)?$_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ul(),i=y1(e),s=W0(r,i);s.payload=t,n!=null&&(s.callback=n),t=m1(e,s,i),t!==null&&(_h(t,e,i,r),S4(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ul(),i=y1(e),s=W0(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=m1(e,s,i),t!==null&&(_h(t,e,i,r),S4(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ul(),r=y1(e),i=W0(n,r);i.tag=2,t!=null&&(i.callback=t),t=m1(e,i,r),t!==null&&(_h(t,e,r,n),S4(t,e,r))}};function Pfe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Yk(n,r)||!Yk(i,s):!0}function ZSe(e,t,n){var r=!1,i=$1,s=t.contextType;return typeof s=="object"&&s!==null?s=id(s):(i=nc(t)?Hx:ku.current,r=t.contextTypes,s=(r=r!=null)?YS(e,i):$1),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=OF,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ofe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&OF.enqueueReplaceState(t,t.state,null)}function nq(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},FX(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=id(s):(s=nc(t)?Hx:ku.current,i.context=YS(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(tq(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&OF.enqueueReplaceState(i,i.state,null),n$(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function JS(e,t){try{var n="",r=t;do n+=YXe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function g7(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function rq(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _Je=typeof WeakMap=="function"?WeakMap:Map;function eTe(e,t,n){n=W0(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){a$||(a$=!0,hq=r),rq(e,t)},n}function tTe(e,t,n){n=W0(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){rq(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rq(e,t),typeof r!="function"&&(g1===null?g1=new Set([this]):g1.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function $fe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _Je;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=$Je.bind(null,e,t,n),t.then(e,e))}function Mfe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lfe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=W0(-1,1),t.tag=2,m1(n,t,1))),n.lanes|=1),e)}var wJe=$g.ReactCurrentOwner,Kl=!1;function Qu(e,t,n,r){t.child=e===null?RSe(t,null,n,r):XS(t,e.child,n,r)}function Ffe(e,t,n,r,i){n=n.render;var s=t.ref;return fS(t,i),r=VX(e,t,n,r,s,i),n=HX(),e!==null&&!Kl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cg(e,t,i)):(_s&&n&&DX(t),t.flags|=1,Qu(e,t,r,i),t.child)}function Bfe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!eQ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,nTe(e,t,s,r,i)):(e=R4(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yk,n(o,r)&&e.ref===t.ref)return cg(e,t,i)}return t.flags|=1,e=v1(s,r),e.ref=t.ref,e.return=t,t.child=e}function nTe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Yk(s,r)&&e.ref===t.ref)if(Kl=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Kl=!0);else return t.lanes=e.lanes,cg(e,t,i)}return iq(e,t,n,r,i)}function rTe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xi(WE,Mc),Mc|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xi(WE,Mc),Mc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Xi(WE,Mc),Mc|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Xi(WE,Mc),Mc|=r;return Qu(e,t,i,n),t.child}function iTe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iq(e,t,n,r,i){var s=nc(n)?Hx:ku.current;return s=YS(t,s),fS(t,i),n=VX(e,t,n,r,s,i),r=HX(),e!==null&&!Kl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cg(e,t,i)):(_s&&r&&DX(t),t.flags|=1,Qu(e,t,n,i),t.child)}function jfe(e,t,n,r,i){if(nc(n)){var s=!0;Q6(t)}else s=!1;if(fS(t,i),t.stateNode===null)A4(e,t),ZSe(t,n,r),nq(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=id(l):(l=nc(n)?Hx:ku.current,l=YS(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Ofe(t,o,r,l),Ry=!1;var d=t.memoizedState;o.state=d,n$(t,r,o,i),u=t.memoizedState,a!==r||d!==u||tc.current||Ry?(typeof c=="function"&&(tq(t,n,c,r),u=t.memoizedState),(a=Ry||Pfe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,NSe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Kd(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=id(u):(u=nc(n)?Hx:ku.current,u=YS(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Ofe(t,o,r,u),Ry=!1,d=t.memoizedState,o.state=d,n$(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||tc.current||Ry?(typeof h=="function"&&(tq(t,n,h,r),p=t.memoizedState),(l=Ry||Pfe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return sq(e,t,n,r,s,i)}function sq(e,t,n,r,i,s){iTe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Tfe(t,n,!1),cg(e,t,s);r=t.stateNode,wJe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=XS(t,e.child,null,s),t.child=XS(t,null,a,s)):Qu(e,t,a,s),t.memoizedState=r.state,i&&Tfe(t,n,!0),t.child}function sTe(e){var t=e.stateNode;t.pendingContext?Sfe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sfe(e,t.context,!1),BX(e,t.containerInfo)}function Ufe(e,t,n,r,i){return KS(),PX(i),t.flags|=256,Qu(e,t,n,r),t.child}var oq={dehydrated:null,treeContext:null,retryLane:0};function aq(e){return{baseLanes:e,cachePool:null,transitions:null}}function oTe(e,t,n){var r=t.pendingProps,i=ks.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Xi(ks,i&1),e===null)return ZH(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=LF(o,r,0,null),e=kx(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=aq(n),t.memoizedState=oq,e):GX(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return EJe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=v1(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=v1(a,s):(s=kx(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?aq(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=oq,r}return s=e.child,e=s.sibling,r=v1(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function GX(e,t){return t=LF({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $3(e,t,n,r){return r!==null&&PX(r),XS(t,e.child,null,n),e=GX(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EJe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=g7(Error(bt(422))),$3(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=LF({mode:"visible",children:r.children},i,0,null),s=kx(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&XS(t,e.child,null,o),t.child.memoizedState=aq(o),t.memoizedState=oq,s);if(!(t.mode&1))return $3(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(bt(419)),r=g7(s,r,void 0),$3(e,t,o,r)}if(a=(o&e.childLanes)!==0,Kl||a){if(r=pa,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lg(e,i),_h(r,e,i,-1))}return ZX(),r=g7(Error(bt(421))),$3(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=MJe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Vc=p1(i.nextSibling),Qc=t,_s=!0,th=null,e!==null&&(zf[Vf++]=N0,zf[Vf++]=P0,zf[Vf++]=qx,N0=e.id,P0=e.overflow,qx=t),t=GX(t,r.children),t.flags|=4096,t)}function zfe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),eq(e.return,t,n)}function y7(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function aTe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Qu(e,t,r.children,n),r=ks.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zfe(e,n,t);else if(e.tag===19)zfe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xi(ks,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&r$(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),y7(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&r$(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}y7(t,!0,n,null,s);break;case"together":y7(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function A4(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cg(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gx|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(bt(153));if(t.child!==null){for(e=t.child,n=v1(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=v1(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function SJe(e,t,n){switch(t.tag){case 3:sTe(t),KS();break;case 5:PSe(t);break;case 1:nc(t.type)&&Q6(t);break;case 4:BX(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Xi(e$,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Xi(ks,ks.current&1),t.flags|=128,null):n&t.child.childLanes?oTe(e,t,n):(Xi(ks,ks.current&1),e=cg(e,t,n),e!==null?e.sibling:null);Xi(ks,ks.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return aTe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xi(ks,ks.current),r)break;return null;case 22:case 23:return t.lanes=0,rTe(e,t,n)}return cg(e,t,n)}var uTe,uq,lTe,cTe;uTe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uq=function(){};lTe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,lx(Hp.current);var s=null;switch(n){case"input":i=RH(e,i),r=RH(e,r),s=[];break;case"select":i=Ds({},i,{value:void 0}),r=Ds({},r,{value:void 0}),s=[];break;case"textarea":i=PH(e,i),r=PH(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=K6)}$H(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Uk.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Uk.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ss("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};cTe=function(e,t,n,r){n!==r&&(t.flags|=4)};function tA(e,t){if(!_s)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nu(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function TJe(e,t,n){var r=t.pendingProps;switch(NX(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nu(t),null;case 1:return nc(t.type)&&X6(),nu(t),null;case 3:return r=t.stateNode,QS(),cs(tc),cs(ku),UX(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(P3(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,th!==null&&(gq(th),th=null))),uq(e,t),nu(t),null;case 5:jX(t);var i=lx(Zk.current);if(n=t.type,e!==null&&t.stateNode!=null)lTe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(bt(166));return nu(t),null}if(e=lx(Hp.current),P3(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ep]=t,r[Qk]=s,e=(t.mode&1)!==0,n){case"dialog":ss("cancel",r),ss("close",r);break;case"iframe":case"object":case"embed":ss("load",r);break;case"video":case"audio":for(i=0;i<JA.length;i++)ss(JA[i],r);break;case"source":ss("error",r);break;case"img":case"image":case"link":ss("error",r),ss("load",r);break;case"details":ss("toggle",r);break;case"input":Qce(r,s),ss("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ss("invalid",r);break;case"textarea":Zce(r,s),ss("invalid",r)}$H(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&N3(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&N3(r.textContent,a,e),i=["children",""+a]):Uk.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ss("scroll",r)}switch(n){case"input":S3(r),Jce(r,s,!0);break;case"textarea":S3(r),efe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=K6)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=FEe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ep]=t,e[Qk]=r,uTe(e,t,!1,!1),t.stateNode=e;e:{switch(o=MH(n,r),n){case"dialog":ss("cancel",e),ss("close",e),i=r;break;case"iframe":case"object":case"embed":ss("load",e),i=r;break;case"video":case"audio":for(i=0;i<JA.length;i++)ss(JA[i],e);i=r;break;case"source":ss("error",e),i=r;break;case"img":case"image":case"link":ss("error",e),ss("load",e),i=r;break;case"details":ss("toggle",e),i=r;break;case"input":Qce(e,r),i=RH(e,r),ss("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ds({},r,{value:void 0}),ss("invalid",e);break;case"textarea":Zce(e,r),i=PH(e,r),ss("invalid",e);break;default:i=r}$H(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?UEe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&BEe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zk(e,u):typeof u=="number"&&zk(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uk.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ss("scroll",e):u!=null&&yX(e,s,u,o))}switch(n){case"input":S3(e),Jce(e,r,!1);break;case"textarea":S3(e),efe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+O1(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?aS(e,!!r.multiple,s,!1):r.defaultValue!=null&&aS(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=K6)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nu(t),null;case 6:if(e&&t.stateNode!=null)cTe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(bt(166));if(n=lx(Zk.current),lx(Hp.current),P3(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ep]=t,(s=r.nodeValue!==n)&&(e=Qc,e!==null))switch(e.tag){case 3:N3(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&N3(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ep]=t,t.stateNode=r}return nu(t),null;case 13:if(cs(ks),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_s&&Vc!==null&&t.mode&1&&!(t.flags&128))ISe(),KS(),t.flags|=98560,s=!1;else if(s=P3(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(bt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(bt(317));s[Ep]=t}else KS(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nu(t),s=!1}else th!==null&&(gq(th),th=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ks.current&1?jo===0&&(jo=3):ZX())),t.updateQueue!==null&&(t.flags|=4),nu(t),null);case 4:return QS(),uq(e,t),e===null&&Kk(t.stateNode.containerInfo),nu(t),null;case 10:return MX(t.type._context),nu(t),null;case 17:return nc(t.type)&&X6(),nu(t),null;case 19:if(cs(ks),s=t.memoizedState,s===null)return nu(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)tA(s,!1);else{if(jo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=r$(e),o!==null){for(t.flags|=128,tA(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xi(ks,ks.current&1|2),t.child}e=e.sibling}s.tail!==null&&ro()>ZS&&(t.flags|=128,r=!0,tA(s,!1),t.lanes=4194304)}else{if(!r)if(e=r$(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),tA(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_s)return nu(t),null}else 2*ro()-s.renderingStartTime>ZS&&n!==1073741824&&(t.flags|=128,r=!0,tA(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ro(),t.sibling=null,n=ks.current,Xi(ks,r?n&1|2:n&1),t):(nu(t),null);case 22:case 23:return JX(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mc&1073741824&&(nu(t),t.subtreeFlags&6&&(t.flags|=8192)):nu(t),null;case 24:return null;case 25:return null}throw Error(bt(156,t.tag))}function CJe(e,t){switch(NX(t),t.tag){case 1:return nc(t.type)&&X6(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return QS(),cs(tc),cs(ku),UX(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jX(t),null;case 13:if(cs(ks),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(bt(340));KS()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cs(ks),null;case 4:return QS(),null;case 10:return MX(t.type._context),null;case 22:case 23:return JX(),null;case 24:return null;default:return null}}var M3=!1,mu=!1,AJe=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function qE(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bs(e,t,r)}else n.current=null}function lq(e,t,n){try{n()}catch(r){Bs(e,t,r)}}var Vfe=!1;function IJe(e,t){if(WH=W6,e=mSe(),RX(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(GH={focusedElem:e,selectionRange:n},W6=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Kd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(w){Bs(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return p=Vfe,Vfe=!1,p}function GI(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&lq(t,n,s)}i=i.next}while(i!==r)}}function $F(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cq(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function fTe(e){var t=e.alternate;t!==null&&(e.alternate=null,fTe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ep],delete t[Qk],delete t[XH],delete t[cJe],delete t[fJe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dTe(e){return e.tag===5||e.tag===3||e.tag===4}function Hfe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dTe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fq(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=K6));else if(r!==4&&(e=e.child,e!==null))for(fq(e,t,n),e=e.sibling;e!==null;)fq(e,t,n),e=e.sibling}function dq(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dq(e,t,n),e=e.sibling;e!==null;)dq(e,t,n),e=e.sibling}var Ia=null,Qd=!1;function gy(e,t,n){for(n=n.child;n!==null;)hTe(e,t,n),n=n.sibling}function hTe(e,t,n){if(Vp&&typeof Vp.onCommitFiberUnmount=="function")try{Vp.onCommitFiberUnmount(AF,n)}catch{}switch(n.tag){case 5:mu||qE(n,t);case 6:var r=Ia,i=Qd;Ia=null,gy(e,t,n),Ia=r,Qd=i,Ia!==null&&(Qd?(e=Ia,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ia.removeChild(n.stateNode));break;case 18:Ia!==null&&(Qd?(e=Ia,n=n.stateNode,e.nodeType===8?c7(e.parentNode,n):e.nodeType===1&&c7(e,n),Wk(e)):c7(Ia,n.stateNode));break;case 4:r=Ia,i=Qd,Ia=n.stateNode.containerInfo,Qd=!0,gy(e,t,n),Ia=r,Qd=i;break;case 0:case 11:case 14:case 15:if(!mu&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lq(n,t,o),i=i.next}while(i!==r)}gy(e,t,n);break;case 1:if(!mu&&(qE(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Bs(n,t,a)}gy(e,t,n);break;case 21:gy(e,t,n);break;case 22:n.mode&1?(mu=(r=mu)||n.memoizedState!==null,gy(e,t,n),mu=r):gy(e,t,n);break;default:gy(e,t,n)}}function qfe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new AJe),t.forEach(function(r){var i=LJe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bd(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ia=a.stateNode,Qd=!1;break e;case 3:Ia=a.stateNode.containerInfo,Qd=!0;break e;case 4:Ia=a.stateNode.containerInfo,Qd=!0;break e}a=a.return}if(Ia===null)throw Error(bt(160));hTe(s,o,i),Ia=null,Qd=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Bs(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pTe(t,e),t=t.sibling}function pTe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bd(t,e),op(e),r&4){try{GI(3,e,e.return),$F(3,e)}catch(m){Bs(e,e.return,m)}try{GI(5,e,e.return)}catch(m){Bs(e,e.return,m)}}break;case 1:Bd(t,e),op(e),r&512&&n!==null&&qE(n,n.return);break;case 5:if(Bd(t,e),op(e),r&512&&n!==null&&qE(n,n.return),e.flags&32){var i=e.stateNode;try{zk(i,"")}catch(m){Bs(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&MEe(i,s),MH(a,o);var l=MH(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?UEe(i,f):c==="dangerouslySetInnerHTML"?BEe(i,f):c==="children"?zk(i,f):yX(i,c,f,l)}switch(a){case"input":DH(i,s);break;case"textarea":LEe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?aS(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?aS(i,!!s.multiple,s.defaultValue,!0):aS(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qk]=s}catch(m){Bs(e,e.return,m)}}break;case 6:if(Bd(t,e),op(e),r&4){if(e.stateNode===null)throw Error(bt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Bs(e,e.return,m)}}break;case 3:if(Bd(t,e),op(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wk(t.containerInfo)}catch(m){Bs(e,e.return,m)}break;case 4:Bd(t,e),op(e);break;case 13:Bd(t,e),op(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(XX=ro())),r&4&&qfe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(mu=(l=mu)||c,Bd(t,e),mu=l):Bd(t,e),op(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Vt=e,c=e.child;c!==null;){for(f=Vt=c;Vt!==null;){switch(d=Vt,h=d.child,d.tag){case 0:case 11:case 14:case 15:GI(4,d,d.return);break;case 1:qE(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Bs(r,n,m)}}break;case 5:qE(d,d.return);break;case 22:if(d.memoizedState!==null){Gfe(f);continue}}h!==null?(h.return=d,Vt=h):Gfe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=jEe("display",o))}catch(m){Bs(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Bs(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bd(t,e),op(e),r&4&&qfe(e);break;case 21:break;default:Bd(t,e),op(e)}}function op(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dTe(n)){var r=n;break e}n=n.return}throw Error(bt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zk(i,""),r.flags&=-33);var s=Hfe(e);dq(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Hfe(e);fq(e,a,o);break;default:throw Error(bt(161))}}catch(u){Bs(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kJe(e,t,n){Vt=e,mTe(e)}function mTe(e,t,n){for(var r=(e.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||M3;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||mu;a=M3;var l=mu;if(M3=o,(mu=u)&&!l)for(Vt=i;Vt!==null;)o=Vt,u=o.child,o.tag===22&&o.memoizedState!==null?Yfe(i):u!==null?(u.return=o,Vt=u):Yfe(i);for(;s!==null;)Vt=s,mTe(s),s=s.sibling;Vt=i,M3=a,mu=l}Wfe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):Wfe(e)}}function Wfe(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mu||$F(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mu)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Kd(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Rfe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Rfe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Wk(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}mu||t.flags&512&&cq(t)}catch(d){Bs(t,t.return,d)}}if(t===e){Vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function Gfe(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function Yfe(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$F(4,t)}catch(u){Bs(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Bs(t,i,u)}}var s=t.return;try{cq(t)}catch(u){Bs(t,s,u)}break;case 5:var o=t.return;try{cq(t)}catch(u){Bs(t,o,u)}}}catch(u){Bs(t,t.return,u)}if(t===e){Vt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Vt=a;break}Vt=t.return}}var RJe=Math.ceil,o$=$g.ReactCurrentDispatcher,YX=$g.ReactCurrentOwner,td=$g.ReactCurrentBatchConfig,Kr=0,pa=null,_o=null,Ma=0,Mc=0,WE=wv(0),jo=0,rR=null,Gx=0,MF=0,KX=0,YI=null,zl=null,XX=0,ZS=1/0,m0=null,a$=!1,hq=null,g1=null,L3=!1,Qy=null,u$=0,KI=0,pq=null,I4=-1,k4=0;function ul(){return Kr&6?ro():I4!==-1?I4:I4=ro()}function y1(e){return e.mode&1?Kr&2&&Ma!==0?Ma&-Ma:hJe.transition!==null?(k4===0&&(k4=ZEe()),k4):(e=Ai,e!==0||(e=window.event,e=e===void 0?16:oSe(e.type)),e):1}function _h(e,t,n,r){if(50<KI)throw KI=0,pq=null,Error(bt(185));$D(e,n,r),(!(Kr&2)||e!==pa)&&(e===pa&&(!(Kr&2)&&(MF|=n),jo===4&&jy(e,Ma)),rc(e,r),n===1&&Kr===0&&!(t.mode&1)&&(ZS=ro()+500,NF&&Ev()))}function rc(e,t){var n=e.callbackNode;hQe(e,t);var r=q6(e,e===pa?Ma:0);if(r===0)n!==null&&rfe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rfe(n),t===1)e.tag===0?dJe(Kfe.bind(null,e)):TSe(Kfe.bind(null,e)),uJe(function(){!(Kr&6)&&Ev()}),n=null;else{switch(eSe(r)){case 1:n=wX;break;case 4:n=QEe;break;case 16:n=H6;break;case 536870912:n=JEe;break;default:n=H6}n=ETe(n,gTe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gTe(e,t){if(I4=-1,k4=0,Kr&6)throw Error(bt(327));var n=e.callbackNode;if(dS()&&e.callbackNode!==n)return null;var r=q6(e,e===pa?Ma:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=l$(e,r);else{t=r;var i=Kr;Kr|=2;var s=vTe();(pa!==e||Ma!==t)&&(m0=null,ZS=ro()+500,Ix(e,t));do try{PJe();break}catch(a){yTe(e,a)}while(!0);$X(),o$.current=s,Kr=i,_o!==null?t=0:(pa=null,Ma=0,t=jo)}if(t!==0){if(t===2&&(i=UH(e),i!==0&&(r=i,t=mq(e,i))),t===1)throw n=rR,Ix(e,0),jy(e,r),rc(e,ro()),n;if(t===6)jy(e,r);else{if(i=e.current.alternate,!(r&30)&&!DJe(i)&&(t=l$(e,r),t===2&&(s=UH(e),s!==0&&(r=s,t=mq(e,s))),t===1))throw n=rR,Ix(e,0),jy(e,r),rc(e,ro()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(bt(345));case 2:Nb(e,zl,m0);break;case 3:if(jy(e,r),(r&130023424)===r&&(t=XX+500-ro(),10<t)){if(q6(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ul(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=KH(Nb.bind(null,e,zl,m0),t);break}Nb(e,zl,m0);break;case 4:if(jy(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-xh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ro()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RJe(r/1960))-r,10<r){e.timeoutHandle=KH(Nb.bind(null,e,zl,m0),r);break}Nb(e,zl,m0);break;case 5:Nb(e,zl,m0);break;default:throw Error(bt(329))}}}return rc(e,ro()),e.callbackNode===n?gTe.bind(null,e):null}function mq(e,t){var n=YI;return e.current.memoizedState.isDehydrated&&(Ix(e,t).flags|=256),e=l$(e,t),e!==2&&(t=zl,zl=n,t!==null&&gq(t)),e}function gq(e){zl===null?zl=e:zl.push.apply(zl,e)}function DJe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dh(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jy(e,t){for(t&=~KX,t&=~MF,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xh(t),r=1<<n;e[n]=-1,t&=~r}}function Kfe(e){if(Kr&6)throw Error(bt(327));dS();var t=q6(e,0);if(!(t&1))return rc(e,ro()),null;var n=l$(e,t);if(e.tag!==0&&n===2){var r=UH(e);r!==0&&(t=r,n=mq(e,r))}if(n===1)throw n=rR,Ix(e,0),jy(e,t),rc(e,ro()),n;if(n===6)throw Error(bt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nb(e,zl,m0),rc(e,ro()),null}function QX(e,t){var n=Kr;Kr|=1;try{return e(t)}finally{Kr=n,Kr===0&&(ZS=ro()+500,NF&&Ev())}}function Yx(e){Qy!==null&&Qy.tag===0&&!(Kr&6)&&dS();var t=Kr;Kr|=1;var n=td.transition,r=Ai;try{if(td.transition=null,Ai=1,e)return e()}finally{Ai=r,td.transition=n,Kr=t,!(Kr&6)&&Ev()}}function JX(){Mc=WE.current,cs(WE)}function Ix(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aJe(n)),_o!==null)for(n=_o.return;n!==null;){var r=n;switch(NX(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&X6();break;case 3:QS(),cs(tc),cs(ku),UX();break;case 5:jX(r);break;case 4:QS();break;case 13:cs(ks);break;case 19:cs(ks);break;case 10:MX(r.type._context);break;case 22:case 23:JX()}n=n.return}if(pa=e,_o=e=v1(e.current,null),Ma=Mc=t,jo=0,rR=null,KX=MF=Gx=0,zl=YI=null,ux!==null){for(t=0;t<ux.length;t++)if(n=ux[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ux=null}return e}function yTe(e,t){do{var n=_o;try{if($X(),T4.current=s$,i$){for(var r=Rs.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}i$=!1}if(Wx=0,ia=Oo=Rs=null,WI=!1,eR=0,YX.current=null,n===null||n.return===null){jo=1,rR=t,_o=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Ma,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Mfe(o);if(h!==null){h.flags&=-257,Lfe(h,o,a,s,t),h.mode&1&&$fe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){$fe(s,l,t),ZX();break e}u=Error(bt(426))}}else if(_s&&a.mode&1){var g=Mfe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Lfe(g,o,a,s,t),PX(JS(u,a));break e}}s=u=JS(u,a),jo!==4&&(jo=2),YI===null?YI=[s]:YI.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=eTe(s,u,t);kfe(s,y);break e;case 1:a=u;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(g1===null||!g1.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=tTe(s,a,t);kfe(s,w);break e}}s=s.return}while(s!==null)}xTe(n)}catch(E){t=E,_o===n&&n!==null&&(_o=n=n.return);continue}break}while(!0)}function vTe(){var e=o$.current;return o$.current=s$,e===null?s$:e}function ZX(){(jo===0||jo===3||jo===2)&&(jo=4),pa===null||!(Gx&268435455)&&!(MF&268435455)||jy(pa,Ma)}function l$(e,t){var n=Kr;Kr|=2;var r=vTe();(pa!==e||Ma!==t)&&(m0=null,Ix(e,t));do try{NJe();break}catch(i){yTe(e,i)}while(!0);if($X(),Kr=n,o$.current=r,_o!==null)throw Error(bt(261));return pa=null,Ma=0,jo}function NJe(){for(;_o!==null;)bTe(_o)}function PJe(){for(;_o!==null&&!iQe();)bTe(_o)}function bTe(e){var t=wTe(e.alternate,e,Mc);e.memoizedProps=e.pendingProps,t===null?xTe(e):_o=t,YX.current=null}function xTe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CJe(n,t),n!==null){n.flags&=32767,_o=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jo=6,_o=null;return}}else if(n=TJe(n,t,Mc),n!==null){_o=n;return}if(t=t.sibling,t!==null){_o=t;return}_o=t=e}while(t!==null);jo===0&&(jo=5)}function Nb(e,t,n){var r=Ai,i=td.transition;try{td.transition=null,Ai=1,OJe(e,t,n,r)}finally{td.transition=i,Ai=r}return null}function OJe(e,t,n,r){do dS();while(Qy!==null);if(Kr&6)throw Error(bt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(bt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(pQe(e,s),e===pa&&(_o=pa=null,Ma=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||L3||(L3=!0,ETe(H6,function(){return dS(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=td.transition,td.transition=null;var o=Ai;Ai=1;var a=Kr;Kr|=4,YX.current=null,IJe(e,n),pTe(n,e),eJe(GH),W6=!!WH,GH=WH=null,e.current=n,kJe(n),sQe(),Kr=a,Ai=o,td.transition=s}else e.current=n;if(L3&&(L3=!1,Qy=e,u$=i),s=e.pendingLanes,s===0&&(g1=null),uQe(n.stateNode),rc(e,ro()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(a$)throw a$=!1,e=hq,hq=null,e;return u$&1&&e.tag!==0&&dS(),s=e.pendingLanes,s&1?e===pq?KI++:(KI=0,pq=e):KI=0,Ev(),null}function dS(){if(Qy!==null){var e=eSe(u$),t=td.transition,n=Ai;try{if(td.transition=null,Ai=16>e?16:e,Qy===null)var r=!1;else{if(e=Qy,Qy=null,u$=0,Kr&6)throw Error(bt(331));var i=Kr;for(Kr|=4,Vt=e.current;Vt!==null;){var s=Vt,o=s.child;if(Vt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Vt=l;Vt!==null;){var c=Vt;switch(c.tag){case 0:case 11:case 15:GI(8,c,s)}var f=c.child;if(f!==null)f.return=c,Vt=f;else for(;Vt!==null;){c=Vt;var d=c.sibling,h=c.return;if(fTe(c),c===l){Vt=null;break}if(d!==null){d.return=h,Vt=d;break}Vt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Vt=o;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:GI(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Vt=y;break e}Vt=s.return}}var v=e.current;for(Vt=v;Vt!==null;){o=Vt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Vt=x;else e:for(o=v;Vt!==null;){if(a=Vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$F(9,a)}}catch(E){Bs(a,a.return,E)}if(a===o){Vt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Vt=w;break e}Vt=a.return}}if(Kr=i,Ev(),Vp&&typeof Vp.onPostCommitFiberRoot=="function")try{Vp.onPostCommitFiberRoot(AF,e)}catch{}r=!0}return r}finally{Ai=n,td.transition=t}}return!1}function Xfe(e,t,n){t=JS(n,t),t=eTe(e,t,1),e=m1(e,t,1),t=ul(),e!==null&&($D(e,1,t),rc(e,t))}function Bs(e,t,n){if(e.tag===3)Xfe(e,e,n);else for(;t!==null;){if(t.tag===3){Xfe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(g1===null||!g1.has(r))){e=JS(n,e),e=tTe(t,e,1),t=m1(t,e,1),e=ul(),t!==null&&($D(t,1,e),rc(t,e));break}}t=t.return}}function $Je(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ul(),e.pingedLanes|=e.suspendedLanes&n,pa===e&&(Ma&n)===n&&(jo===4||jo===3&&(Ma&130023424)===Ma&&500>ro()-XX?Ix(e,0):KX|=n),rc(e,t)}function _Te(e,t){t===0&&(e.mode&1?(t=A3,A3<<=1,!(A3&130023424)&&(A3=4194304)):t=1);var n=ul();e=lg(e,t),e!==null&&($D(e,t,n),rc(e,n))}function MJe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_Te(e,n)}function LJe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(bt(314))}r!==null&&r.delete(t),_Te(e,n)}var wTe;wTe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tc.current)Kl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Kl=!1,SJe(e,t,n);Kl=!!(e.flags&131072)}else Kl=!1,_s&&t.flags&1048576&&CSe(t,Z6,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;A4(e,t),e=t.pendingProps;var i=YS(t,ku.current);fS(t,n),i=VX(null,t,r,e,i,n);var s=HX();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nc(r)?(s=!0,Q6(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,FX(t),i.updater=OF,t.stateNode=i,i._reactInternals=t,nq(t,r,e,n),t=sq(null,t,r,!0,s,n)):(t.tag=0,_s&&s&&DX(t),Qu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(A4(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=BJe(r),e=Kd(r,e),i){case 0:t=iq(null,t,r,e,n);break e;case 1:t=jfe(null,t,r,e,n);break e;case 11:t=Ffe(null,t,r,e,n);break e;case 14:t=Bfe(null,t,r,Kd(r.type,e),n);break e}throw Error(bt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kd(r,i),iq(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kd(r,i),jfe(e,t,r,i,n);case 3:e:{if(sTe(t),e===null)throw Error(bt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,NSe(e,t),n$(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=JS(Error(bt(423)),t),t=Ufe(e,t,r,n,i);break e}else if(r!==i){i=JS(Error(bt(424)),t),t=Ufe(e,t,r,n,i);break e}else for(Vc=p1(t.stateNode.containerInfo.firstChild),Qc=t,_s=!0,th=null,n=RSe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(KS(),r===i){t=cg(e,t,n);break e}Qu(e,t,r,n)}t=t.child}return t;case 5:return PSe(t),e===null&&ZH(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,YH(r,i)?o=null:s!==null&&YH(r,s)&&(t.flags|=32),iTe(e,t),Qu(e,t,o,n),t.child;case 6:return e===null&&ZH(t),null;case 13:return oTe(e,t,n);case 4:return BX(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=XS(t,null,r,n):Qu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kd(r,i),Ffe(e,t,r,i,n);case 7:return Qu(e,t,t.pendingProps,n),t.child;case 8:return Qu(e,t,t.pendingProps.children,n),t.child;case 12:return Qu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Xi(e$,r._currentValue),r._currentValue=o,s!==null)if(Dh(s.value,o)){if(s.children===i.children&&!tc.current){t=cg(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=W0(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),eq(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(bt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),eq(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fS(t,n),i=id(i),r=r(i),t.flags|=1,Qu(e,t,r,n),t.child;case 14:return r=t.type,i=Kd(r,t.pendingProps),i=Kd(r.type,i),Bfe(e,t,r,i,n);case 15:return nTe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kd(r,i),A4(e,t),t.tag=1,nc(r)?(e=!0,Q6(t)):e=!1,fS(t,n),ZSe(t,r,i),nq(t,r,i,n),sq(null,t,r,!0,e,n);case 19:return aTe(e,t,n);case 22:return rTe(e,t,n)}throw Error(bt(156,t.tag))};function ETe(e,t){return XEe(e,t)}function FJe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xf(e,t,n,r){return new FJe(e,t,n,r)}function eQ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BJe(e){if(typeof e=="function")return eQ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bX)return 11;if(e===xX)return 14}return 2}function v1(e,t){var n=e.alternate;return n===null?(n=Xf(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function R4(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")eQ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ME:return kx(n.children,i,s,t);case vX:o=8,i|=8;break;case CH:return e=Xf(12,n,t,i|2),e.elementType=CH,e.lanes=s,e;case AH:return e=Xf(13,n,t,i),e.elementType=AH,e.lanes=s,e;case IH:return e=Xf(19,n,t,i),e.elementType=IH,e.lanes=s,e;case PEe:return LF(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DEe:o=10;break e;case NEe:o=9;break e;case bX:o=11;break e;case xX:o=14;break e;case ky:o=16,r=null;break e}throw Error(bt(130,e==null?e:typeof e,""))}return t=Xf(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function kx(e,t,n,r){return e=Xf(7,e,r,t),e.lanes=n,e}function LF(e,t,n,r){return e=Xf(22,e,r,t),e.elementType=PEe,e.lanes=n,e.stateNode={isHidden:!1},e}function v7(e,t,n){return e=Xf(6,e,null,t),e.lanes=n,e}function b7(e,t,n){return t=Xf(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jJe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zj(0),this.expirationTimes=Zj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tQ(e,t,n,r,i,s,o,a,u){return e=new jJe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Xf(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},FX(s),e}function UJe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$E,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function STe(e){if(!e)return $1;e=e._reactInternals;e:{if($_(e)!==e||e.tag!==1)throw Error(bt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(bt(171))}if(e.tag===1){var n=e.type;if(nc(n))return SSe(e,n,t)}return t}function TTe(e,t,n,r,i,s,o,a,u){return e=tQ(n,r,!0,e,i,s,o,a,u),e.context=STe(null),n=e.current,r=ul(),i=y1(n),s=W0(r,i),s.callback=t??null,m1(n,s,i),e.current.lanes=i,$D(e,i,r),rc(e,r),e}function FF(e,t,n,r){var i=t.current,s=ul(),o=y1(i);return n=STe(n),t.context===null?t.context=n:t.pendingContext=n,t=W0(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=m1(i,t,o),e!==null&&(_h(e,i,o,s),S4(e,i,o)),o}function c$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qfe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function nQ(e,t){Qfe(e,t),(e=e.alternate)&&Qfe(e,t)}var CTe=typeof reportError=="function"?reportError:function(e){console.error(e)};function rQ(e){this._internalRoot=e}BF.prototype.render=rQ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(bt(409));FF(e,t,null,null)};BF.prototype.unmount=rQ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yx(function(){FF(null,e,null,null)}),t[ug]=null}};function BF(e){this._internalRoot=e}BF.prototype.unstable_scheduleHydration=function(e){if(e){var t=rSe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<By.length&&t!==0&&t<By[n].priority;n++);By.splice(n,0,e),n===0&&sSe(e)}};function iQ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jfe(){}function zJe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=c$(o);s.call(l)}}var o=TTe(t,r,e,0,null,!1,!1,"",Jfe);return e._reactRootContainer=o,e[ug]=o.current,Kk(e.nodeType===8?e.parentNode:e),Yx(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=c$(u);a.call(l)}}var u=tQ(e,0,!1,null,null,!1,!1,"",Jfe);return e._reactRootContainer=u,e[ug]=u.current,Kk(e.nodeType===8?e.parentNode:e),Yx(function(){FF(t,u,n,r)}),u}function UF(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=c$(o);a.call(u)}}FF(t,o,e,i)}else o=zJe(n,t,e,i,r);return c$(o)}tSe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=QA(t.pendingLanes);n!==0&&(EX(t,n|1),rc(t,ro()),!(Kr&6)&&(ZS=ro()+500,Ev()))}break;case 13:Yx(function(){var r=lg(e,1);if(r!==null){var i=ul();_h(r,e,1,i)}}),nQ(e,1)}};SX=function(e){if(e.tag===13){var t=lg(e,134217728);if(t!==null){var n=ul();_h(t,e,134217728,n)}nQ(e,134217728)}};nSe=function(e){if(e.tag===13){var t=y1(e),n=lg(e,t);if(n!==null){var r=ul();_h(n,e,t,r)}nQ(e,t)}};rSe=function(){return Ai};iSe=function(e,t){var n=Ai;try{return Ai=e,t()}finally{Ai=n}};FH=function(e,t,n){switch(t){case"input":if(DH(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=DF(r);if(!i)throw Error(bt(90));$Ee(r),DH(r,i)}}}break;case"textarea":LEe(e,n);break;case"select":t=n.value,t!=null&&aS(e,!!n.multiple,t,!1)}};HEe=QX;qEe=Yx;var VJe={usingClientEntryPoint:!1,Events:[LD,jE,DF,zEe,VEe,QX]},nA={findFiberByHostInstance:ax,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HJe={bundleType:nA.bundleType,version:nA.version,rendererPackageName:nA.rendererPackageName,rendererConfig:nA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$g.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=YEe(e),e===null?null:e.stateNode},findFiberByHostInstance:nA.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var F3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!F3.isDisabled&&F3.supportsFiber)try{AF=F3.inject(HJe),Vp=F3}catch{}}xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VJe;xf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iQ(t))throw Error(bt(200));return UJe(e,t,null,n)};xf.createRoot=function(e,t){if(!iQ(e))throw Error(bt(299));var n=!1,r="",i=CTe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=tQ(e,1,!1,null,null,n,!1,r,i),e[ug]=t.current,Kk(e.nodeType===8?e.parentNode:e),new rQ(t)};xf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(bt(188)):(e=Object.keys(e).join(","),Error(bt(268,e)));return e=YEe(t),e=e===null?null:e.stateNode,e};xf.flushSync=function(e){return Yx(e)};xf.hydrate=function(e,t,n){if(!jF(t))throw Error(bt(200));return UF(null,e,t,!0,n)};xf.hydrateRoot=function(e,t,n){if(!iQ(e))throw Error(bt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=CTe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=TTe(t,null,e,1,n??null,i,!1,s,o),e[ug]=t.current,Kk(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new BF(t)};xf.render=function(e,t,n){if(!jF(t))throw Error(bt(200));return UF(null,e,t,!1,n)};xf.unmountComponentAtNode=function(e){if(!jF(e))throw Error(bt(40));return e._reactRootContainer?(Yx(function(){UF(null,null,e,!1,function(){e._reactRootContainer=null,e[ug]=null})}),!0):!1};xf.unstable_batchedUpdates=QX;xf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jF(n))throw Error(bt(200));if(e==null||e._reactInternals===void 0)throw Error(bt(38));return UF(e,t,n,!1,r)};xf.version="18.3.1-next-f1338f8080-20240426";function ATe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ATe)}catch(e){console.error(e)}}ATe(),AEe.exports=xf;var BD=AEe.exports;const ZA=Am(BD);var Zfe=BD;SH.createRoot=Zfe.createRoot,SH.hydrateRoot=Zfe.hydrateRoot;var Sp=function(){return Sp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Sp.apply(this,arguments)};function jD(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function T0(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function ede(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qJe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Or(e){return this instanceof Or?(this.v=e,this):new Or(e)}function cx(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Or?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function x7(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Or(e[i](o)),done:!1}:s?s(o):o}:s}}function XI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ede=="function"?ede(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var D4="right-scroll-bar-position",N4="width-before-scroll-bar",WJe="with-scroll-bars-hidden",GJe="--removed-body-scroll-bar-size";function _7(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YJe(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var KJe=typeof window<"u"?D.useLayoutEffect:D.useEffect,tde=new WeakMap;function XJe(e,t){var n=YJe(null,function(r){return e.forEach(function(i){return _7(i,r)})});return KJe(function(){var r=tde.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||_7(a,null)}),s.forEach(function(a){i.has(a)||_7(a,o)})}tde.set(n,e)},[e]),n}function QJe(e){return e}function JJe(e,t){t===void 0&&(t=QJe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function ZJe(e){e===void 0&&(e={});var t=JJe(null);return t.options=Sp({async:!0,ssr:!1},e),t}var ITe=function(e){var t=e.sideCar,n=jD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,Sp({},n))};ITe.isSideCarExport=!0;function eZe(e,t){return e.useMedium(t),ITe}var kTe=ZJe(),w7=function(){},zF=D.forwardRef(function(e,t){var n=D.useRef(null),r=D.useState({onScrollCapture:w7,onWheelCapture:w7,onTouchMoveCapture:w7}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,x=jD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=XJe([n,t]),T=Sp(Sp({},x),i);return D.createElement(D.Fragment,null,c&&D.createElement(w,{sideCar:kTe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?D.cloneElement(D.Children.only(a),Sp(Sp({},T),{ref:E})):D.createElement(y,Sp({},T,{className:u,ref:E}),a))});zF.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zF.classNames={fullWidth:N4,zeroRight:D4};var tZe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nZe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=tZe();return t&&e.setAttribute("nonce",t),e}function rZe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function iZe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var sZe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=nZe())&&(rZe(t,n),iZe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oZe=function(){var e=sZe();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},RTe=function(){var e=oZe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},aZe={left:0,top:0,right:0,gap:0},E7=function(e){return parseInt(e||"",10)||0},uZe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[E7(n),E7(r),E7(i)]},lZe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return aZe;var t=uZe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},cZe=RTe(),hS="data-scroll-locked",fZe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(WJe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(hS,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(D4,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(N4,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(D4," .").concat(D4,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(N4," .").concat(N4,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hS,`] {
    `).concat(GJe,": ").concat(a,`px;
  }
`)},nde=function(){var e=parseInt(document.body.getAttribute(hS)||"0",10);return isFinite(e)?e:0},dZe=function(){D.useEffect(function(){return document.body.setAttribute(hS,(nde()+1).toString()),function(){var e=nde()-1;e<=0?document.body.removeAttribute(hS):document.body.setAttribute(hS,e.toString())}},[])},hZe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;dZe();var s=D.useMemo(function(){return lZe(i)},[i]);return D.createElement(cZe,{styles:fZe(s,!t,i,n?"":"!important")})},yq=!1;if(typeof window<"u")try{var B3=Object.defineProperty({},"passive",{get:function(){return yq=!0,!0}});window.addEventListener("test",B3,B3),window.removeEventListener("test",B3,B3)}catch{yq=!1}var qw=yq?{passive:!1}:!1,pZe=function(e){return e.tagName==="TEXTAREA"},DTe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!pZe(e)&&n[t]==="visible")},mZe=function(e){return DTe(e,"overflowY")},gZe=function(e){return DTe(e,"overflowX")},rde=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=NTe(e,r);if(i){var s=PTe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},yZe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},vZe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},NTe=function(e,t){return e==="v"?mZe(t):gZe(t)},PTe=function(e,t){return e==="v"?yZe(t):vZe(t)},bZe=function(e,t){return e==="h"&&t==="rtl"?-1:1},xZe=function(e,t,n,r,i){var s=bZe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=PTe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&NTe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},j3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ide=function(e){return[e.deltaX,e.deltaY]},sde=function(e){return e&&"current"in e?e.current:e},_Ze=function(e,t){return e[0]===t[0]&&e[1]===t[1]},wZe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},EZe=0,Ww=[];function SZe(e){var t=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(EZe++)[0],s=D.useState(RTe)[0],o=D.useRef(e);D.useEffect(function(){o.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=qJe([e.lockRef.current],(e.shards||[]).map(sde),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=j3(m),v=n.current,x="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,T=m.target,C=Math.abs(x)>Math.abs(w)?"h":"v";if("touches"in m&&C==="h"&&T.type==="range")return!1;var I=rde(C,T);if(!I)return!0;if(I?E=C:(E=C==="v"?"h":"v",I=rde(C,T)),!I)return!1;if(!r.current&&"changedTouches"in m&&(x||w)&&(r.current=E),!E)return!0;var N=r.current||E;return xZe(N,g,m,N==="h"?x:w)},[]),u=D.useCallback(function(m){var g=m;if(!(!Ww.length||Ww[Ww.length-1]!==s)){var y="deltaY"in g?ide(g):j3(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&_Ze(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var x=(o.current.shards||[]).map(sde).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=x.length>0?a(g,x[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=D.useCallback(function(m,g,y,v){var x={name:m,delta:g,target:y,should:v,shadowParent:TZe(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(w){return w!==x})},1)},[]),c=D.useCallback(function(m){n.current=j3(m),r.current=void 0},[]),f=D.useCallback(function(m){l(m.type,ide(m),m.target,a(m,e.lockRef.current))},[]),d=D.useCallback(function(m){l(m.type,j3(m),m.target,a(m,e.lockRef.current))},[]);D.useEffect(function(){return Ww.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,qw),document.addEventListener("touchmove",u,qw),document.addEventListener("touchstart",c,qw),function(){Ww=Ww.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,qw),document.removeEventListener("touchmove",u,qw),document.removeEventListener("touchstart",c,qw)}},[]);var h=e.removeScrollBar,p=e.inert;return D.createElement(D.Fragment,null,p?D.createElement(s,{styles:wZe(i)}):null,h?D.createElement(hZe,{gapMode:e.gapMode}):null)}function TZe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CZe=eZe(kTe,SZe);var VF=D.forwardRef(function(e,t){return D.createElement(zF,Sp({},e,{ref:t,sideCar:CZe}))});VF.classNames=zF.classNames;function Gi(e){return Object.keys(e)}function S7(e){return e&&typeof e=="object"&&!Array.isArray(e)}function sQ(e,t){const n={...e},r=t;return S7(e)&&S7(t)&&Object.keys(t).forEach(i=>{S7(r[i])&&i in e?n[i]=sQ(n[i],r[i]):n[i]=r[i]}),n}function AZe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function IZe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function iR(e){const t=IZe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function T7(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function OTe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?T7(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?T7(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?T7(s):s}}return r}return n}const Pe=OTe("rem",{shouldScale:!0}),f$=OTe("em");function Sv(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function $Te(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Tv(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==D.Fragment:!1}function Ga(e){const t=D.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=D.useContext(t);if(i===null)throw new Error(e);return i}]}function p2(e=null){const t=D.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>D.useContext(t)]}function d$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function h$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function kZe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function RZe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function DZe(e,t,n){return h$(e,n)===h$(t,n)}function oQ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=h$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>DZe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=RZe(l,u,r),f=kZe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const NZe={app:100,modal:200,popover:300,overlay:400,max:9999};function md(e){return NZe[e]}const PZe=()=>{};function OZe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||PZe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Wn(e,t="size",n=!0){if(e!==void 0)return $Te(e)?n?Pe(e):e:`var(--${t}-${e})`}function Eo(e){return Wn(e,"mantine-spacing")}function Ii(e){return e===void 0?"var(--mantine-radius-default)":Wn(e,"mantine-radius")}function ll(e){return Wn(e,"mantine-font-size")}function MTe(e){return Wn(e,"mantine-line-height",!1)}function aQ(e){if(e)return Wn(e,"mantine-shadow",!1)}function O0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function uQ(e,t){return e in t.breakpoints?iR(t.breakpoints[e]):iR(e)}function sR(e,t){const n=e.map(r=>({value:r,px:uQ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function dh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function $Ze(e,t,n){var r;return n?Array.from(((r=h$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function MZe(){const[e,t]=D.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function $0(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function pS(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Uy(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function HF(e,t){const n=Uy(e),r=D.useRef(0);return D.useEffect(()=>()=>window.clearTimeout(r.current),[]),D.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const ode=["mousedown","touchstart"];function LZe(e,t,n){const r=D.useRef();return D.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||ode).forEach(s=>document.addEventListener(s,i)),()=>{(t||ode).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function FZe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function BZe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function jZe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=D.useState(n?t:BZe(e)),s=D.useRef();return D.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),FZe(s.current,o=>i(o.matches))},[e]),r}const M_=typeof document<"u"?D.useLayoutEffect:D.useEffect;function om(e,t){const n=D.useRef(!1);D.useEffect(()=>()=>{n.current=!1},[]),D.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function LTe({opened:e,shouldReturnFocus:t=!0}){const n=D.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return om(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function UZe(e,t="body > :not(script)"){const n=pS(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const zZe=/input|select|textarea|button|object/,FTe="a, input, select, textarea, button, object, [tabindex]";function VZe(e){return e.style.display==="none"}function HZe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(VZe(n))return!1;n=n.parentNode}return!0}function BTe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function vq(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(BTe(e));return(zZe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&HZe(e)}function jTe(e){const t=BTe(e);return(Number.isNaN(t)||t>=0)&&vq(e)}function qZe(e){return Array.from(e.querySelectorAll(FTe)).filter(jTe)}function WZe(e,t){const n=qZe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function GZe(e=!0){const t=D.useRef(),n=D.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(FTe));o=a.find(jTe)||a.find(vq)||null,!o&&vq(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=D.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=UZe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return D.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&WZe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const YZe=e=>(e+1)%1e6;function KZe(){const[,e]=D.useReducer(YZe,0);return e}const XZe=ni.useId||(()=>{});function QZe(){const e=XZe();return e?`mantine-${e.replace(/:/g,"")}`:""}function $u(e){const t=QZe(),[n,r]=D.useState(t);return M_(()=>{r(pS())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function UTe(e,t,n){D.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function lQ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function zTe(...e){return t=>{e.forEach(n=>lQ(n,t))}}function co(...e){return D.useCallback(zTe(...e),e)}function VTe(e,t,n="ltr"){const r=D.useRef(null),i=D.useRef(!1),s=D.useRef(!1),o=D.useRef(0),[a,u]=D.useState(!1);return D.useEffect(()=>{i.current=!0},[]),D.useEffect(()=>{var v,x;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const C=$0((w-T.left)/T.width,0,1);e({x:n==="ltr"?C:1-C,y:$0((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ga({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=D.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function qF(e,t){return jZe("(prefers-reduced-motion: reduce)",e,t)}const JZe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Jc(e){const t=D.useRef(0),n=D.useRef(null),[r,i]=D.useState(JZe),s=D.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return D.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function ZZe(e){const[t,{width:n,height:r}]=Jc(e);return{ref:t,width:n,height:r}}function eet(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function tet(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function net(e){return t=>tet(eet(e),t)}function ret(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{net(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function cQ(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=D.useState(e),o=D.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=D.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=D.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function iet(e,t,n={autoInvoke:!1}){const r=D.useRef(null),i=D.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=D.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return D.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function set(e,t,n){const r=D.useRef(),i=D.useRef(null);return D.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function oet(){const[e,t]=D.useState(!1);return D.useEffect(()=>t(!0),[]),e}function aet(e,t){const n=Uy(e),r=D.useRef(),i=D.useRef(),s=D.useRef(!0),o=D.useRef(t),a=D.useRef(-1),u=()=>window.clearTimeout(a.current),l=D.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=D.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=D.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return D.useEffect(()=>{o.current=t},[t]),[f,u]}function uet(e,t){const[n,r]=D.useState(e),[i,s]=aet(r,t);return D.useEffect(()=>s,[]),[n,i]}function cet(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function fet(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});M_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>cet(`${e}:${String(r)}`,i[0])}return[t,n]}var det={};function HTe(){return typeof process<"u"&&det?"production":"development"}function qTe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=qTe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function oo(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=qTe(e))&&(r&&(r+=" "),r+=t);return r}const het={};function pet(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=oo(t[r],i):t[r]=i})}),t}function WF({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||het);return pet(s)}function p$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const WTe=D.createContext(null);function Cv(){const e=D.useContext(WTe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function met(){return Cv().cssVariablesResolver}function get(){return Cv().classNamesPrefix}function fQ(){return Cv().getStyleNonce}function yet(){return Cv().withStaticClasses}function vet(){return Cv().headless}function bet(){var e;return(e=Cv().stylesTransform)==null?void 0:e.sx}function xet(){var e;return(e=Cv().stylesTransform)==null?void 0:e.styles}function _et(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function wet(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function Eet(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function Tet(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function dQ(e){return _et(e)?wet(e):e.startsWith("rgb")?Eet(e):e.startsWith("hsl")?Tet(e):{r:0,g:0,b:0,a:1}}function U3(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=dQ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function oR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function C7(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Cet(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function Aet(e){if(e.startsWith("oklch("))return(Cet(e)||0)/100;const{r:t,g:n,b:r}=dQ(e),i=t/255,s=n/255,o=r/255,a=C7(i),u=C7(s),l=C7(o);return .2126*a+.7152*u+.0722*l}function rA(e,t=.179){return e.startsWith("var(")?!1:Aet(e)>t}function Im({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:rA(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:rA(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:rA(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][oR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:rA(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:rA(e,t.luminanceThreshold),shade:s,variable:void 0}}function Mi(e,t){const n=Im({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function bq(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Mi(n.from,t),i=Mi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function pp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=dQ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Gw=pp,Iet=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Im({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Pe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Pe(1)} solid transparent`}:{background:e,hover:U3(e,.1),color:a,border:`${Pe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Pe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:pp(a,.1),hover:pp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Pe(1)} solid transparent`}}return{background:pp(e,.1),hover:pp(e,.12),color:e,border:`${Pe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Pe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:pp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Pe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:pp(e,.05),color:e,border:`${Pe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Pe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:pp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Pe(1)} solid transparent`}}return{background:"transparent",hover:pp(e,.12),color:e,border:`${Pe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Pe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Pe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Pe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:U3(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Pe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:U3(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Pe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:U3(t.white,.01),color:e,border:`${Pe(1)} solid transparent`}:n==="gradient"?{background:bq(r,t),hover:bq(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Pe(1)} solid var(--mantine-color-default-border)`}:{}},ket={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},ade="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",hQ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:ket,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Iet,autoContrast:!1,luminanceThreshold:.3,fontFamily:ade,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:ade,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Pe(34),lineHeight:"1.3"},h2:{fontSize:Pe(26),lineHeight:"1.35"},h3:{fontSize:Pe(22),lineHeight:"1.4"},h4:{fontSize:Pe(18),lineHeight:"1.45"},h5:{fontSize:Pe(16),lineHeight:"1.5"},h6:{fontSize:Pe(14),lineHeight:"1.5"}}},fontSizes:{xs:Pe(12),sm:Pe(14),md:Pe(16),lg:Pe(18),xl:Pe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Pe(2),sm:Pe(4),md:Pe(8),lg:Pe(16),xl:Pe(32)},spacing:{xs:Pe(10),sm:Pe(12),md:Pe(16),lg:Pe(20),xl:Pe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), 0 ${Pe(1)} ${Pe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(10)} ${Pe(15)} ${Pe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Pe(7)} ${Pe(7)} ${Pe(-5)}`,md:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(20)} ${Pe(25)} ${Pe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Pe(10)} ${Pe(10)} ${Pe(-5)}`,lg:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(28)} ${Pe(23)} ${Pe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Pe(12)} ${Pe(12)} ${Pe(-7)}`,xl:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(36)} ${Pe(28)} ${Pe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Pe(17)} ${Pe(17)} ${Pe(-7)}`},other:{},components:{}};function ude(e){return e==="auto"||e==="dark"||e==="light"}function Ret({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ude(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ude(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const Det="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",lde="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function A7(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function cde(e){if(!(e.primaryColor in e.colors))throw new Error(Det);if(typeof e.primaryShade=="object"&&(!A7(e.primaryShade.dark)||!A7(e.primaryShade.light)))throw new Error(lde);if(typeof e.primaryShade=="number"&&!A7(e.primaryShade))throw new Error(lde)}function Net(e,t){var r;if(!t)return cde(e),e;const n=sQ(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),cde(n),n}const pQ=D.createContext(null),Pet=()=>D.useContext(pQ)||hQ;function fo(){const e=D.useContext(pQ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function GTe({theme:e,children:t,inherit:n=!0}){const r=Pet(),i=D.useMemo(()=>Net(n?r:hQ,e),[e,r,n]);return _.jsx(pQ.Provider,{value:i,children:t})}GTe.displayName="@mantine/core/MantineThemeProvider";function Oet(){const e=fo(),t=fQ(),n=Gi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=iR(e.breakpoints[i]),a=s?`${o-.1}px`:f$(o-.1),u=s?`${o}px`:f$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function I7(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function k7(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function $et(e,t){const n=I7(e.variables),r=n?k7(t,n):"",i=I7(e.dark),s=i?k7(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=I7(e.light),a=o?k7(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Av({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Im({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function fde(e,t){return Av({color:e.colors[e.primaryColor][oR(e,t)],theme:e,autoContrast:null})}function z3({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=oR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Gw(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Gw(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Gw(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=oR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Gw(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Gw(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Gw(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Met(e){return Array.isArray(e)?e:Array(10).fill(e)}function Let(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Yw(e,t,n){Gi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const YTe=e=>{const t=oR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Pe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":fde(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":fde(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Yw(r.variables,e.breakpoints,"breakpoint"),Yw(r.variables,e.spacing,"spacing"),Yw(r.variables,e.fontSizes,"font-size"),Yw(r.variables,e.lineHeights,"line-height"),Yw(r.variables,e.shadows,"shadow"),Yw(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Gi(e.colors).forEach(s=>{const o=e.colors[s];if(Let(o)){Object.assign(r.light,z3({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,z3({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,z3({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,z3({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Gi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Fet({theme:e,generator:t}){const n=YTe(e),r=t==null?void 0:t(e);return r?sQ(n,r):n}const R7=YTe(hQ);function Bet(e){const t={variables:{},light:{},dark:{}};return Gi(e.variables).forEach(n=>{R7.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Gi(e.light).forEach(n=>{R7.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Gi(e.dark).forEach(n=>{R7.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function jet(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function KTe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=fo(),r=fQ(),i=met(),s=Fet({theme:n,generator:i}),o=e===":root"&&t,a=o?Bet(s):s,u=$et(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":jet(e)}`}}):null}KTe.displayName="@mantine/CssVariables";function Uet(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Kw(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function zet({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=D.useRef(),[s,o]=D.useState(()=>e.get(t)),a=r||s,u=D.useCallback(c=>{r||(Kw(c,n),o(c),e.set(c))},[e.set,a,r]),l=D.useCallback(()=>{o(t),Kw(t,n),e.clear()},[e.clear,t]);return D.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),M_(()=>{Kw(e.get(t),n)},[]),D.useEffect(()=>{var f;if(r)return Kw(r,n),()=>{};r===void 0&&Kw(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&Kw(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Vet({respectReducedMotion:e,getRootElement:t}){M_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Uet();function XTe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=Ret(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=zet({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Vet({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(WTe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(GTe,{theme:e,children:[o&&_.jsx(KTe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(Oet,{}),t]})})}XTe.displayName="@mantine/core/MantineProvider";function UD({classNames:e,styles:t,props:n,stylesCtx:r}){const i=fo();return{resolvedClassNames:WF({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:p$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Het={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function qet({theme:e,options:t,unstyled:n}){return oo((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Het[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Wet({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return WF({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function dde({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return WF({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Get({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Yet({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Ket({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Xet({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=WF({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Qet({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Jet({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return oo(qet({theme:e,options:t,unstyled:a||h}),Xet({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Qet({options:t,classes:o,selector:r,unstyled:a}),dde({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),dde({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Wet({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Get({rootSelector:l,selector:r,className:u}),Yet({selector:r,classes:o,unstyled:a||h}),d&&!h&&Ket({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Zet({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return p$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function xq({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...xq({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function ett(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Sv(n[r])}}),t),{})}function ttt({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=ett([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function ntt({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Zet({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&p$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&p$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...ttt({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?xq({style:u,theme:e}):null,...xq({style:r==null?void 0:r.style,theme:e})}}function rtt({props:e,stylesCtx:t,themeName:n}){var o;const r=fo(),i=(o=xet())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Ft({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=fo(),h=get(),p=yet(),m=vet(),g=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:y,getTransformedStyles:v}=rtt({props:n,stylesCtx:r,themeName:g});return(x,w)=>({className:Jet({theme:d,options:w,themeName:g,selector:x,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:ntt({theme:d,themeName:g,selector:x,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function m2(e,t){return typeof e=="boolean"?e:t.autoContrast}function He(e,t,n){var o;const r=fo(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Sv(n)}}function D7(e){return Gi(e).reduce((t,n)=>e[n]!==void 0?`${t}${AZe(n)}:${e[n]};`:t,"").trim()}function itt({selector:e,styles:t,media:n,container:r}){const i=t?D7(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${D7(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${D7(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function L_(e){const t=fQ();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:itt(e)}})}function F_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:x,bg:w,c:E,opacity:T,ff:C,fz:I,fw:N,lts:k,ta:P,lh:M,fs:O,tt:B,td:q,w:H,miw:Y,maw:K,h:J,mih:F,mah:U,bgsz:W,bgp:L,bgr:V,bga:Q,pos:ue,top:we,left:ce,bottom:Se,right:Oe,inset:et,display:Re,flex:St,hiddenFrom:Ze,visibleFrom:It,lightHidden:mt,darkHidden:Ce,sx:Fe,...st}=e;return{styleProps:Sv({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:x,bg:w,c:E,opacity:T,ff:C,fz:I,fw:N,lts:k,ta:P,lh:M,fs:O,tt:B,td:q,w:H,miw:Y,maw:K,h:J,mih:F,mah:U,bgsz:W,bgp:L,bgr:V,bga:Q,pos:ue,top:we,left:ce,bottom:Se,right:Oe,inset:et,display:Re,flex:St,hiddenFrom:Ze,visibleFrom:It,lightHidden:mt,darkHidden:Ce,sx:Fe}),rest:st}}const stt={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function mQ(e,t){const n=Im({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function ott(e,t){const n=Im({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:mQ(e,t)}function att(e,t){if(typeof e=="number")return Pe(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Pe(n)}`;return r&&(s+=` ${r}`),Met.length>0&&(s+=` ${mQ(i.join(" "),t)}`),s.trim()}return e}const hde={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function utt(e){return typeof e=="string"&&e in hde?hde[e]:e}const ltt=["h1","h2","h3","h4","h5","h6"];function ctt(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&ltt.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Pe(e):e}function ftt(e){return e}const dtt=["h1","h2","h3","h4","h5","h6"];function htt(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&dtt.includes(e)?`var(--mantine-${e}-line-height)`:e}function ptt(e){return typeof e=="number"?Pe(e):e}function mtt(e,t){if(typeof e=="number")return Pe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Pe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const N7={color:mQ,textColor:ott,fontSize:ctt,spacing:mtt,identity:ftt,size:ptt,lineHeight:htt,fontFamily:utt,border:att};function pde(e){return e.replace("(min-width: ","").replace("em)","")}function gtt({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(pde(i))-Number(pde(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function ytt(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function vtt(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function btt(e){return typeof e=="object"&&e!==null?Gi(e).filter(t=>t!=="base"):[]}function xtt(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function QTe({styleProps:e,data:t,theme:n}){return gtt(Gi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=vtt(e[i]);if(!ytt(e[i]))return o.forEach(l=>{r.inlineStyles[l]=N7[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=btt(e[i]);return o.forEach(l=>{a&&(r.styles[l]=N7[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:N7[s.type](xtt(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function zD(){return`__m__-${D.useId().replace(/:/g,"")}`}function gQ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...gQ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function JTe(e){return e.startsWith("data-")?e:`data-${e}`}function _tt(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[JTe(n)]=e[n]),t},{})}function ZTe(e){return e?typeof e=="string"?{[JTe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...ZTe(n)}),{}):_tt(e):null}function _q(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,..._q(r,t)}),{}):typeof e=="function"?e(t):e??{}}function wtt({theme:e,style:t,vars:n,styleProps:r}){const i=_q(t,e),s=_q(n,e);return{...i,...s,...r}}const e2e=D.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var I;const m=fo(),g=e||"div",{styleProps:y,rest:v}=F_(h),x=bet(),w=(I=x==null?void 0:x())==null?void 0:I(y.sx),E=zD(),T=QTe({styleProps:y,theme:m,data:stt}),C={ref:p,style:wtt({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:oo(r,w,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":$Te(o)?void 0:o||void 0,size:d,...ZTe(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(L_,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(C):_.jsx(g,{...C})]})});e2e.displayName="@mantine/core/Box";const ke=e2e;function t2e(e){return e}function ft(e){const t=D.forwardRef(e);return t.extend=t2e,t}function To(e){const t=D.forwardRef(e);return t.extend=t2e,t}const Ett=D.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Mg(){return D.useContext(Ett)}function Stt(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function P7(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const iA=typeof window<"u"&&window.requestAnimationFrame;function Ttt({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=D.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=D.useState(r?{}:o),l=p=>{BD.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||Stt(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}om(()=>{typeof iA=="function"&&iA(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),iA(()=>{const p=P7(i);c({...f(p),height:p})})}:()=>{const p=P7(i);c({...f(p),willChange:"height",height:p}),iA(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=P7(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:zTe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const Ctt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},GF=ft((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=He("Collapse",Ctt,e),c=fo(),f=qF(),h=(c.respectReducedMotion?f:!1)?0:i,p=Ttt({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(ke,{...l,children:n}):null:_.jsx(ke,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...gQ(o,c)},ref:t,...l}),children:n})});GF.displayName="@mantine/core/Collapse";const[Att,gd]=Ga("ScrollArea.Root component was not found in tree");function eT(e,t){const n=Uy(t);M_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Itt=D.forwardRef((e,t)=>{const{style:n,...r}=e,i=gd(),[s,o]=D.useState(0),[a,u]=D.useState(0),l=!!(s&&a);return eT(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),eT(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),ktt=D.forwardRef((e,t)=>{const n=gd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(Itt,{...e,ref:t}):null}),Rtt={scrollHideDelay:1e3,type:"hover"},n2e=D.forwardRef((e,t)=>{const n=He("ScrollAreaRoot",Rtt,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=D.useState(null),[l,c]=D.useState(null),[f,d]=D.useState(null),[h,p]=D.useState(null),[m,g]=D.useState(null),[y,v]=D.useState(0),[x,w]=D.useState(0),[E,T]=D.useState(!1),[C,I]=D.useState(!1),N=co(t,k=>u(k));return _.jsx(Att,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:I,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(ke,{...o,ref:N,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});n2e.displayName="@mantine/core/ScrollAreaRoot";function r2e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function YF(e){const t=r2e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function i2e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Dtt(e,[t,n]){return Math.min(n,Math.max(t,e))}function mde(e,t,n="ltr"){const r=YF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Dtt(e,u);return i2e([0,o],[0,a])(l)}function Ntt(e,t,n,r="ltr"){const i=YF(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return i2e([u,l],f)(e)}function s2e(e,t){return e>0&&e<t}function m$(e){return e?parseInt(e,10):0}function Rx(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Ptt,o2e]=Ga("ScrollAreaScrollbar was not found in tree"),a2e=D.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=gd(),[h,p]=D.useState(null),m=co(t,I=>p(I)),g=D.useRef(null),y=D.useRef(""),{viewport:v}=d,x=n.content-n.viewport,w=Uy(l),E=Uy(a),T=HF(c,10),C=I=>{if(g.current){const N=I.clientX-g.current.left,k=I.clientY-g.current.top;u({x:N,y:k})}};return D.useEffect(()=>{const I=N=>{const k=N.target;(h==null?void 0:h.contains(k))&&w(N,x)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[v,h,x,w]),D.useEffect(E,[n,E]),eT(h,T),eT(d.content,T),_.jsx(Ptt,{value:{scrollbar:h,hasThumb:r,onThumbChange:Uy(i),onThumbPointerUp:Uy(s),onThumbPositionChange:E,onThumbPointerDown:Uy(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Rx(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",C(I))}),onPointerMove:Rx(e.onPointerMove,C),onPointerUp:Rx(e.onPointerUp,I=>{const N=I.target;N.hasPointerCapture(I.pointerId)&&N.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Ott=D.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=gd(),[a,u]=D.useState(),l=D.useRef(null),c=co(t,l,o.onScrollbarXChange);return D.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(a2e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${YF(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),s2e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:m$(a.paddingLeft),paddingEnd:m$(a.paddingRight)}})}})}),$tt=D.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=gd(),[a,u]=D.useState(),l=D.useRef(null),c=co(t,l,o.onScrollbarYChange);return D.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(a2e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${YF(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),s2e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:m$(a.paddingTop),paddingEnd:m$(a.paddingBottom)}})}})}),yQ=D.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Mg(),s=gd(),o=D.useRef(null),a=D.useRef(0),[u,l]=D.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=r2e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Ntt(h,a.current,u,p);return n==="horizontal"?_.jsx(Ott,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=mde(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx($tt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=mde(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),u2e=D.forwardRef((e,t)=>{const n=gd(),{forceMount:r,...i}=e,[s,o]=D.useState(!1),a=e.orientation==="horizontal",u=HF(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return eT(n.viewport,u),eT(n.content,u),r||s?_.jsx(yQ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Mtt=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gd(),[s,o]=D.useState(!1);return D.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(u2e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Ltt=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gd(),s=e.orientation==="horizontal",[o,a]=D.useState("hidden"),u=HF(()=>a("idle"),100);return D.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),D.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(yQ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Rx(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Rx(e.onPointerLeave,()=>a("idle"))}):null}),gde=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return D.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(Mtt,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(Ltt,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(u2e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(yQ,{...r,ref:t}):null});function Ftt(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Btt=D.forwardRef((e,t)=>{const{style:n,...r}=e,i=gd(),s=o2e(),{onThumbPositionChange:o}=s,a=co(t,c=>s.onThumbChange(c)),u=D.useRef(),l=HF(()=>{u.current&&(u.current(),u.current=void 0)},100);return D.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Ftt(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Rx(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Rx(e.onPointerUp,s.onThumbPointerUp)})}),yde=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=o2e();return n||i.hasThumb?_.jsx(Btt,{ref:t,...r}):null}),l2e=D.forwardRef(({children:e,style:t,...n},r)=>{const i=gd(),s=co(r,i.onViewportChange);return _.jsx(ke,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});l2e.displayName="@mantine/core/ScrollAreaViewport";var vQ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const c2e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},jtt=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Pe(t)}}),fg=ft((e,t)=>{const n=He("ScrollArea",c2e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[x,w]=D.useState(!1),E=Ft({name:"ScrollArea",props:n,classes:vQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:jtt});return _.jsxs(n2e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(l2e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var C;(C=d==null?void 0:d.onScroll)==null||C.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(gde,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(yde,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(gde,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(yde,{...E("thumb")})}),_.jsx(ktt,{...E("corner"),"data-hovered":x||void 0,"data-hidden":c==="never"||void 0})]})});fg.displayName="@mantine/core/ScrollArea";const bQ=ft((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=He("ScrollAreaAutosize",c2e,e);return _.jsx(ke,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(ke,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(fg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});fg.classes=vQ;bQ.displayName="@mantine/core/ScrollAreaAutosize";bQ.classes=vQ;fg.Autosize=bQ;var f2e={root:"m_87cf2631"};const Utt={__staticSelector:"UnstyledButton"},of=To((e,t)=>{const n=He("UnstyledButton",Utt,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Ft({name:s,props:n,classes:f2e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(ke,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});of.classes=f2e;of.displayName="@mantine/core/UnstyledButton";var d2e={root:"m_515a97f8"};const ztt={},xQ=ft((e,t)=>{const n=He("VisuallyHidden",ztt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Ft({name:"VisuallyHidden",classes:d2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(ke,{component:"span",ref:t,...c("root"),...l})});xQ.classes=d2e;xQ.displayName="@mantine/core/VisuallyHidden";var h2e={root:"m_1b7284a3"};const Vtt={},Htt=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ii(t),"--paper-shadow":aQ(n)}}),g2=To((e,t)=>{const n=He("Paper",Vtt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Ft({name:"Paper",props:n,classes:h2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Htt});return _.jsx(ke,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});g2.classes=h2e;g2.displayName="@mantine/core/Paper";function y2(e){return p2e(e)?(e.nodeName||"").toLowerCase():"#document"}function ic(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Lg(e){var t;return(t=(p2e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function p2e(e){return e instanceof Node||e instanceof ic(e).Node}function ws(e){return e instanceof Element||e instanceof ic(e).Element}function af(e){return e instanceof HTMLElement||e instanceof ic(e).HTMLElement}function wq(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ic(e).ShadowRoot}function VD(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=od(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function qtt(e){return["table","td","th"].includes(y2(e))}function _Q(e){const t=wQ(),n=od(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Wtt(e){let t=dg(e);for(;af(t)&&!M1(t);){if(_Q(t))return t;t=dg(t)}return null}function wQ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function M1(e){return["html","body","#document"].includes(y2(e))}function od(e){return ic(e).getComputedStyle(e)}function KF(e){return ws(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function dg(e){if(y2(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wq(e)&&e.host||Lg(e);return wq(t)?t.host:t}function m2e(e){const t=dg(e);return M1(t)?e.ownerDocument?e.ownerDocument.body:e.body:af(t)&&VD(t)?t:m2e(t)}function G0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=m2e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ic(i);return s?t.concat(o,o.visualViewport||[],VD(i)?i:[],o.frameElement&&n?G0(o.frameElement):[]):t.concat(i,G0(i,[],n))}function vde(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function aR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&wq(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function g2e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function y2e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Gtt(e){return Xtt()?!1:!bde()&&e.width===0&&e.height===0||bde()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ytt(){return/apple/i.test(navigator.vendor)}function bde(){const e=/android/i;return e.test(g2e())||e.test(y2e())}function Ktt(){return g2e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Xtt(){return y2e().includes("jsdom/")}function Eq(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Qtt(e){return"nativeEvent"in e}function Jtt(e){return e.matches("html,body")}function fx(e){return(e==null?void 0:e.ownerDocument)||document}function O7(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _E(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Ztt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ent(e){return af(e)&&e.matches(Ztt)}const Hc=Math.min,gu=Math.max,g$=Math.round,V3=Math.floor,L1=e=>({x:e,y:e}),tnt={left:"right",right:"left",bottom:"top",top:"bottom"},nnt={start:"end",end:"start"};function Sq(e,t,n){return gu(e,Hc(t,n))}function hg(e,t){return typeof e=="function"?e(t):e}function Nh(e){return e.split("-")[0]}function v2(e){return e.split("-")[1]}function EQ(e){return e==="x"?"y":"x"}function SQ(e){return e==="y"?"height":"width"}function B_(e){return["top","bottom"].includes(Nh(e))?"y":"x"}function TQ(e){return EQ(B_(e))}function rnt(e,t,n){n===void 0&&(n=!1);const r=v2(e),i=TQ(e),s=SQ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=y$(o)),[o,y$(o)]}function int(e){const t=y$(e);return[Tq(e),t,Tq(t)]}function Tq(e){return e.replace(/start|end/g,t=>nnt[t])}function snt(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function ont(e,t,n,r){const i=v2(e);let s=snt(Nh(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Tq)))),s}function y$(e){return e.replace(/left|right|bottom|top/g,t=>tnt[t])}function ant(e){return{top:0,right:0,bottom:0,left:0,...e}}function CQ(e){return typeof e!="number"?ant(e):{top:e,right:e,bottom:e,left:e}}function tT(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function xde(e,t,n){let{reference:r,floating:i}=e;const s=B_(t),o=TQ(t),a=SQ(o),u=Nh(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(v2(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const unt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=xde(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:x,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=x??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=xde(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function AQ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=hg(t,e),p=CQ(h),g=a[d?f==="floating"?"reference":"floating":f],y=tT(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},E=tT(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const lnt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=hg(e,t)||{};if(l==null)return{};const f=CQ(c),d={x:n,y:r},h=TQ(i),p=SQ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=T?T[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(T)))&&(C=a.floating[x]||s.floating[p]);const I=w/2-E/2,N=C/2-m[p]/2-1,k=Hc(f[y],N),P=Hc(f[v],N),M=k,O=C-m[p]-P,B=C/2-m[p]/2+I,q=Sq(M,B,O),H=!u.arrow&&v2(i)!=null&&B!==q&&s.reference[p]/2-(B<M?k:P)-m[p]/2<0,Y=H?B<M?B-M:B-O:0;return{[h]:d[h]+Y,data:{[h]:q,centerOffset:B-q-Y,...H&&{alignmentOffset:Y}},reset:H}}}),cnt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=hg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Nh(i),v=Nh(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[y$(a)]:int(a));!d&&p!=="none"&&w.push(...ont(a,m,p,x));const E=[a,...w],T=await AQ(t,g),C=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&C.push(T[y]),f){const M=rnt(i,o,x);C.push(T[M[0]],T[M[1]])}if(I=[...I,{placement:i,overflows:C}],!C.every(M=>M<=0)){var N,k;const M=(((N=s.flip)==null?void 0:N.index)||0)+1,O=E[M];if(O)return{data:{index:M,overflows:I},reset:{placement:O}};let B=(k=I.filter(q=>q.overflows[0]<=0).sort((q,H)=>q.overflows[1]-H.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(h){case"bestFit":{var P;const q=(P=I.map(H=>[H.placement,H.overflows.filter(Y=>Y>0).reduce((Y,K)=>Y+K,0)]).sort((H,Y)=>H[1]-Y[1])[0])==null?void 0:P[0];q&&(B=q);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function v2e(e){const t=Hc(...e.map(s=>s.left)),n=Hc(...e.map(s=>s.top)),r=gu(...e.map(s=>s.right)),i=gu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function fnt(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>tT(v2e(i)))}const dnt=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=hg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=fnt(c),d=tT(v2e(c)),h=CQ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(B_(n)==="y"){const k=f[0],P=f[f.length-1],M=Nh(n)==="top",O=k.top,B=P.bottom,q=M?k.left:P.left,H=M?k.right:P.right,Y=H-q,K=B-O;return{top:O,bottom:B,left:q,right:H,width:Y,height:K,x:q,y:O}}const g=Nh(n)==="left",y=gu(...f.map(k=>k.right)),v=Hc(...f.map(k=>k.left)),x=f.filter(k=>g?k.left===v:k.right===y),w=x[0].top,E=x[x.length-1].bottom,T=v,C=y,I=C-T,N=E-w;return{top:w,bottom:E,left:T,right:C,width:I,height:N,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function hnt(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Nh(n),a=v2(n),u=B_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=hg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const pnt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await hnt(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},mnt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=hg(e,t),l={x:n,y:r},c=await AQ(t,u),f=B_(Nh(i)),d=EQ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],x=h-c[y];h=Sq(v,h,x)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],x=p-c[y];p=Sq(v,p,x)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},gnt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=hg(e,t),c={x:n,y:r},f=B_(i),d=EQ(f);let h=c[d],p=c[f];const m=hg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=d==="y"?"height":"width",w=s.reference[d]-s.floating[x]+g.mainAxis,E=s.reference[d]+s.reference[x]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const x=d==="y"?"width":"height",w=["top","left"].includes(Nh(i)),E=s.reference[f]-s.floating[x]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[x]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},ynt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=hg(e,t),u=await AQ(t,a),l=Nh(n),c=v2(n),f=B_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Hc(h-u[p],g),x=Hc(d-u[m],y),w=!t.middlewareData.shift;let E=v,T=x;if(f?T=c||w?Hc(x,y):y:E=c||w?Hc(v,g):g,w&&!c){const I=gu(u.left,0),N=gu(u.right,0),k=gu(u.top,0),P=gu(u.bottom,0);f?T=d-2*(I!==0||N!==0?I+N:gu(u.left,u.right)):E=h-2*(k!==0||P!==0?k+P:gu(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const C=await i.getDimensions(s.floating);return d!==C.width||h!==C.height?{reset:{rects:!0}}:{}}}};function b2e(e){const t=od(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=af(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=g$(n)!==s||g$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function IQ(e){return ws(e)?e:e.contextElement}function mS(e){const t=IQ(e);if(!af(t))return L1(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=b2e(t);let o=(s?g$(n.width):n.width)/r,a=(s?g$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vnt=L1(0);function x2e(e){const t=ic(e);return!wQ()||!t.visualViewport?vnt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bnt(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ic(e)?!1:t}function Kx(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=IQ(e);let o=L1(1);t&&(r?ws(r)&&(o=mS(r)):o=mS(e));const a=bnt(s,n,r)?x2e(s):L1(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=ic(s),h=r&&ws(r)?ic(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=mS(m),y=m.getBoundingClientRect(),v=od(m),x=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=x,l+=w,p=ic(m),m=p.frameElement}}return tT({width:c,height:f,x:u,y:l})}const xnt=[":popover-open",":modal"];function kQ(e){return xnt.some(t=>{try{return e.matches(t)}catch{return!1}})}function _nt(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Lg(r),a=t?kQ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=L1(1);const c=L1(0),f=af(r);if((f||!f&&!s)&&((y2(r)!=="body"||VD(o))&&(u=KF(r)),af(r))){const d=Kx(r);l=mS(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function wnt(e){return Array.from(e.getClientRects())}function _2e(e){return Kx(Lg(e)).left+KF(e).scrollLeft}function Ent(e){const t=Lg(e),n=KF(e),r=e.ownerDocument.body,i=gu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=gu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_2e(e);const a=-n.scrollTop;return od(r).direction==="rtl"&&(o+=gu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Snt(e,t){const n=ic(e),r=Lg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=wQ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function Tnt(e,t){const n=Kx(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=af(e)?mS(e):L1(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function _de(e,t,n){let r;if(t==="viewport")r=Snt(e,n);else if(t==="document")r=Ent(Lg(e));else if(ws(t))r=Tnt(t,n);else{const i=x2e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return tT(r)}function w2e(e,t){const n=dg(e);return n===t||!ws(n)||M1(n)?!1:od(n).position==="fixed"||w2e(n,t)}function Cnt(e,t){const n=t.get(e);if(n)return n;let r=G0(e,[],!1).filter(a=>ws(a)&&y2(a)!=="body"),i=null;const s=od(e).position==="fixed";let o=s?dg(e):e;for(;ws(o)&&!M1(o);){const a=od(o),u=_Q(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||VD(o)&&!u&&w2e(e,o))?r=r.filter(c=>c!==o):i=a,o=dg(o)}return t.set(e,r),r}function Ant(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?kQ(t)?[]:Cnt(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=_de(t,c,i);return l.top=gu(f.top,l.top),l.right=Hc(f.right,l.right),l.bottom=Hc(f.bottom,l.bottom),l.left=gu(f.left,l.left),l},_de(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Int(e){const{width:t,height:n}=b2e(e);return{width:t,height:n}}function knt(e,t,n){const r=af(t),i=Lg(t),s=n==="fixed",o=Kx(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=L1(0);if(r||!r&&!s)if((y2(t)!=="body"||VD(i))&&(a=KF(t)),r){const f=Kx(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=_2e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function $7(e){return od(e).position==="static"}function wde(e,t){return!af(e)||od(e).position==="fixed"?null:t?t(e):e.offsetParent}function E2e(e,t){const n=ic(e);if(kQ(e))return n;if(!af(e)){let i=dg(e);for(;i&&!M1(i);){if(ws(i)&&!$7(i))return i;i=dg(i)}return n}let r=wde(e,t);for(;r&&qtt(r)&&$7(r);)r=wde(r,t);return r&&M1(r)&&$7(r)&&!_Q(r)?n:r||Wtt(e)||n}const Rnt=async function(e){const t=this.getOffsetParent||E2e,n=this.getDimensions,r=await n(e.floating);return{reference:knt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Dnt(e){return od(e).direction==="rtl"}const Nnt={convertOffsetParentRelativeRectToViewportRelativeRect:_nt,getDocumentElement:Lg,getClippingRect:Ant,getOffsetParent:E2e,getElementRects:Rnt,getClientRects:wnt,getDimensions:Int,getScale:mS,isElement:ws,isRTL:Dnt};function Pnt(e,t){let n=null,r;const i=Lg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=V3(c),p=V3(i.clientWidth-(l+f)),m=V3(i.clientHeight-(c+d)),g=V3(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:gu(0,Hc(1,u))||1};let x=!0;function w(E){const T=E[0].intersectionRatio;if(T!==u){if(!x)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function Ont(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=IQ(e),c=i||s?[...l?G0(l):[],...G0(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Pnt(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Kx(e):null;u&&g();function g(){const y=Kx(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const $nt=pnt,Mnt=mnt,Lnt=cnt,Fnt=ynt,Ede=lnt,Bnt=dnt,jnt=gnt,Unt=(e,t,n)=>{const r=new Map,i={platform:Nnt,...n},s={...i.platform,_c:r};return unt(e,t,{...i,platform:s})};var P4=typeof document<"u"?D.useLayoutEffect:D.useEffect;function v$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!v$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!v$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function S2e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Sde(e,t){const n=S2e(e);return Math.round(t*n)/n}function Tde(e){const t=D.useRef(e);return P4(()=>{t.current=e}),t}function znt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=D.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=D.useState(r);v$(d,r)||h(r);const[p,m]=D.useState(null),[g,y]=D.useState(null),v=D.useCallback(Y=>{Y!==T.current&&(T.current=Y,m(Y))},[]),x=D.useCallback(Y=>{Y!==C.current&&(C.current=Y,y(Y))},[]),w=s||p,E=o||g,T=D.useRef(null),C=D.useRef(null),I=D.useRef(c),N=u!=null,k=Tde(u),P=Tde(i),M=D.useCallback(()=>{if(!T.current||!C.current)return;const Y={placement:t,strategy:n,middleware:d};P.current&&(Y.platform=P.current),Unt(T.current,C.current,Y).then(K=>{const J={...K,isPositioned:!0};O.current&&!v$(I.current,J)&&(I.current=J,BD.flushSync(()=>{f(J)}))})},[d,t,n,P]);P4(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(Y=>({...Y,isPositioned:!1})))},[l]);const O=D.useRef(!1);P4(()=>(O.current=!0,()=>{O.current=!1}),[]),P4(()=>{if(w&&(T.current=w),E&&(C.current=E),w&&E){if(k.current)return k.current(w,E,M);M()}},[w,E,M,k,N]);const B=D.useMemo(()=>({reference:T,floating:C,setReference:v,setFloating:x}),[v,x]),q=D.useMemo(()=>({reference:w,floating:E}),[w,E]),H=D.useMemo(()=>{const Y={position:n,left:0,top:0};if(!q.floating)return Y;const K=Sde(q.floating,c.x),J=Sde(q.floating,c.y);return a?{...Y,transform:"translate("+K+"px, "+J+"px)",...S2e(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:J}},[n,a,q.floating,c.x,c.y]);return D.useMemo(()=>({...c,update:M,refs:B,elements:q,floatingStyles:H}),[c,M,B,q,H])}const Vnt=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ede({element:r.current,padding:i}).fn(n):{}:r?Ede({element:r,padding:i}).fn(n):{}}}},T2e=(e,t)=>({...$nt(e),options:[e,t]}),RQ=(e,t)=>({...Mnt(e),options:[e,t]}),Cde=(e,t)=>({...jnt(e),options:[e,t]}),Cq=(e,t)=>({...Lnt(e),options:[e,t]}),Hnt=(e,t)=>({...Fnt(e),options:[e,t]}),Aq=(e,t)=>({...Bnt(e),options:[e,t]}),C2e=(e,t)=>({...Vnt(e),options:[e,t]}),A2e={...j6},qnt=A2e.useInsertionEffect,Wnt=qnt||(e=>e());function zy(e){const t=D.useRef(()=>{});return Wnt(()=>{t.current=e}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var qp=typeof document<"u"?D.useLayoutEffect:D.useEffect;let Ade=!1,Gnt=0;const Ide=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Gnt++;function Ynt(){const[e,t]=D.useState(()=>Ade?Ide():void 0);return qp(()=>{e==null&&t(Ide())},[]),D.useEffect(()=>{Ade=!0},[]),e}const Knt=A2e.useId,I2e=Knt||Ynt;function Xnt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Qnt=D.createContext(null),Jnt=D.createContext(null),DQ=()=>{var e;return((e=D.useContext(Qnt))==null?void 0:e.id)||null},NQ=()=>D.useContext(Jnt);function PQ(e){return"data-floating-ui-"+e}function kde(e){const t=D.useRef(e);return qp(()=>{t.current=e}),t}const Rde=PQ("safe-polygon");function O4(e,t,n){return n&&!Eq(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Znt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=NQ(),m=DQ(),g=kde(c),y=kde(l),v=D.useRef(),x=D.useRef(-1),w=D.useRef(),E=D.useRef(-1),T=D.useRef(!0),C=D.useRef(!1),I=D.useRef(()=>{}),N=D.useCallback(()=>{var O;const B=(O=i.current.openEvent)==null?void 0:O.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);D.useEffect(()=>{if(!u)return;function O(B){let{open:q}=B;q||(clearTimeout(x.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),D.useEffect(()=>{if(!u||!g.current||!n)return;function O(q){N()&&r(!1,q,"hover")}const B=fx(a).documentElement;return B.addEventListener("mouseleave",O),()=>{B.removeEventListener("mouseleave",O)}},[a,n,r,u,g,N]);const k=D.useCallback(function(O,B,q){B===void 0&&(B=!0),q===void 0&&(q="hover");const H=O4(y.current,"close",v.current);H&&!w.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,O,q),H)):B&&(clearTimeout(x.current),r(!1,O,q))},[y,r]),P=zy(()=>{I.current(),w.current=void 0}),M=zy(()=>{if(C.current){const O=fx(a).body;O.style.pointerEvents="",O.removeAttribute(Rde),C.current=!1}});return D.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(Y){if(clearTimeout(x.current),T.current=!1,f&&!Eq(v.current)||d>0&&!O4(y.current,"open"))return;const K=O4(y.current,"open",v.current);K?x.current=window.setTimeout(()=>{r(!0,Y,"hover")},K):r(!0,Y,"hover")}function q(Y){if(O())return;I.current();const K=fx(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(x.current),w.current=g.current({...i.current.floatingContext,tree:p,x:Y.clientX,y:Y.clientY,onClose(){M(),P(),k(Y,!0,"safe-polygon")}});const F=w.current;K.addEventListener("mousemove",F),I.current=()=>{K.removeEventListener("mousemove",F)};return}(v.current==="touch"?!aR(a,Y.relatedTarget):!0)&&k(Y)}function H(Y){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:Y.clientX,y:Y.clientY,onClose(){M(),P(),k(Y)}})(Y))}if(ws(o)){const Y=o;return n&&Y.addEventListener("mouseleave",H),a==null||a.addEventListener("mouseleave",H),h&&Y.addEventListener("mousemove",B,{once:!0}),Y.addEventListener("mouseenter",B),Y.addEventListener("mouseleave",q),()=>{n&&Y.removeEventListener("mouseleave",H),a==null||a.removeEventListener("mouseleave",H),h&&Y.removeEventListener("mousemove",B),Y.removeEventListener("mouseenter",B),Y.removeEventListener("mouseleave",q)}}},[o,a,u,e,f,d,h,k,P,M,r,n,p,y,g,i]),qp(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&N()){const q=fx(a).body;if(q.setAttribute(Rde,""),q.style.pointerEvents="none",C.current=!0,ws(o)&&a){var B;const H=o,Y=p==null||(B=p.nodesRef.current.find(K=>K.id===m))==null||(B=B.context)==null?void 0:B.elements.floating;return Y&&(Y.style.pointerEvents=""),H.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{H.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,N]),qp(()=>{n||(v.current=void 0,P(),M())},[n,P,M]),D.useEffect(()=>()=>{P(),clearTimeout(x.current),clearTimeout(E.current),M()},[u,o,P,M]),D.useMemo(()=>{if(!u)return{};function O(B){v.current=B.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove(B){function q(){T.current||r(!0,B.nativeEvent,"hover")}f&&!Eq(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?q():E.current=window.setTimeout(q,d))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(B){k(B.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const Iq=()=>{},k2e=D.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Iq,setState:Iq,isInstantPhase:!1}),R2e=()=>D.useContext(k2e);function ert(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=D.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=D.useRef(null),a=D.useCallback(u=>{s({currentId:u})},[]);return qp(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),D.createElement(k2e.Provider,{value:D.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function trt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=R2e(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return qp(()=>{u&&(f({delay:{open:1,close:O4(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),qp(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),qp(()=>{l===Iq||!n||l(o)},[n,l,o]),a}function M7(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const nrt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},rrt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Dde=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function irt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=NQ(),v=zy(typeof c=="function"?c:()=>!1),x=typeof c=="function"?v:c,w=D.useRef(!1),E=D.useRef(!1),{escapeKey:T,outsidePress:C}=Dde(m),{escapeKey:I,outsidePress:N}=Dde(g),k=zy(B=>{var q;if(!n||!u||!l||B.key!=="Escape")return;const H=(q=a.current.floatingContext)==null?void 0:q.nodeId,Y=y?M7(y.nodesRef.current,H):[];if(!T&&(B.stopPropagation(),Y.length>0)){let K=!0;if(Y.forEach(J=>{var F;if((F=J.context)!=null&&F.open&&!J.context.dataRef.current.__escapeKeyBubbles){K=!1;return}}),!K)return}r(!1,Qtt(B)?B.nativeEvent:B,"escape-key")}),P=zy(B=>{var q;const H=()=>{var Y;k(B),(Y=_E(B))==null||Y.removeEventListener("keydown",H)};(q=_E(B))==null||q.addEventListener("keydown",H)}),M=zy(B=>{var q;const H=w.current;w.current=!1;const Y=E.current;if(E.current=!1,f==="click"&&Y||H||typeof x=="function"&&!x(B))return;const K=_E(B),J="["+PQ("inert")+"]",F=fx(o).querySelectorAll(J);let U=ws(K)?K:null;for(;U&&!M1(U);){const Q=dg(U);if(M1(Q)||!ws(Q))break;U=Q}if(F.length&&ws(K)&&!Jtt(K)&&!aR(K,o)&&Array.from(F).every(Q=>!aR(U,Q)))return;if(af(K)&&o){const Q=K.clientWidth>0&&K.scrollWidth>K.clientWidth,ue=K.clientHeight>0&&K.scrollHeight>K.clientHeight;let we=ue&&B.offsetX>K.clientWidth;if(ue&&od(K).direction==="rtl"&&(we=B.offsetX<=K.offsetWidth-K.clientWidth),we||Q&&B.offsetY>K.clientHeight)return}const W=(q=a.current.floatingContext)==null?void 0:q.nodeId,L=y&&M7(y.nodesRef.current,W).some(Q=>{var ue;return O7(B,(ue=Q.context)==null?void 0:ue.elements.floating)});if(O7(B,o)||O7(B,s)||L)return;const V=y?M7(y.nodesRef.current,W):[];if(V.length>0){let Q=!0;if(V.forEach(ue=>{var we;if((we=ue.context)!=null&&we.open&&!ue.context.dataRef.current.__outsidePressBubbles){Q=!1;return}}),!Q)return}r(!1,B,"outside-press")}),O=zy(B=>{var q;const H=()=>{var Y;M(B),(Y=_E(B))==null||Y.removeEventListener(f,H)};(q=_E(B))==null||q.addEventListener(f,H)});return D.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=C;function B(Y){r(!1,Y,"ancestor-scroll")}const q=fx(o);l&&q.addEventListener("keydown",I?P:k,I),x&&q.addEventListener(f,N?O:M,N);let H=[];return p&&(ws(s)&&(H=G0(s)),ws(o)&&(H=H.concat(G0(o))),!ws(i)&&i&&i.contextElement&&(H=H.concat(G0(i.contextElement)))),H=H.filter(Y=>{var K;return Y!==((K=q.defaultView)==null?void 0:K.visualViewport)}),H.forEach(Y=>{Y.addEventListener("scroll",B,{passive:!0})}),()=>{l&&q.removeEventListener("keydown",I?P:k,I),x&&q.removeEventListener(f,N?O:M,N),H.forEach(Y=>{Y.removeEventListener("scroll",B)})}},[a,o,s,i,l,x,f,n,r,p,u,T,C,k,I,P,M,N,O]),D.useEffect(()=>{w.current=!1},[x,f]),D.useMemo(()=>u?{reference:{onKeyDown:k,[nrt[h]]:B=>{d&&r(!1,B.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[rrt[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function srt(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=I2e(),s=D.useRef({}),[o]=D.useState(()=>Xnt()),a=DQ()!=null,[u,l]=D.useState(r.reference),c=zy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=D.useMemo(()=>({setPositionReference:l}),[]),d=D.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return D.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function OQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=srt({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=D.useState(null),[a,u]=D.useState(null),c=(i==null?void 0:i.reference)||s,f=D.useRef(null),d=NQ();qp(()=>{c&&(f.current=c)},[c]);const h=znt({...e,elements:{...i,...a&&{reference:a}}}),p=D.useCallback(x=>{const w=ws(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(w),h.refs.setReference(w)},[h.refs]),m=D.useCallback(x=>{(ws(x)||x===null)&&(f.current=x,o(x)),(ws(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!ws(x))&&h.refs.setReference(x)},[h.refs]),g=D.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=D.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=D.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return qp(()=>{r.dataRef.current.floatingContext=v;const x=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);x&&(x.context=v)}),D.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function ort(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=D.useRef(!1),c=D.useRef(),f=D.useRef(!0);return D.useEffect(()=>{if(!a)return;const d=ic(o);function h(){!n&&af(o)&&o===vde(fx(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),D.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),D.useEffect(()=>()=>{clearTimeout(c.current)},[]),D.useMemo(()=>a?{reference:{onPointerDown(d){Gtt(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=_E(d.nativeEvent);if(u&&ws(h))try{if(Ytt()&&Ktt())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!ent(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=ws(h)&&h.hasAttribute(PQ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=vde(o?o.ownerDocument:document);!h&&g===o||aR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||aR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Nde="active",Pde="selected";function L7(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Nde]:o,[Pde]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Nde,Pde].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function art(e){e===void 0&&(e=[]);const t=e,n=D.useCallback(s=>L7(s,e,"reference"),t),r=D.useCallback(s=>L7(s,e,"floating"),t),i=D.useCallback(s=>L7(s,e,"item"),e.map(s=>s==null?void 0:s.item));return D.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const urt=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function lrt(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=urt.get(o))!=null?n:o,u=I2e(),c=DQ()!=null;return D.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function D2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Ode(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function $de(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const crt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function frt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Pe(t),height:Pe(t),transform:"rotate(45deg)",position:"absolute",[crt[u]]:Pe(r)},f=Pe(-t/2);return u==="left"?{...c,...Ode(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Ode(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...$de(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...$de(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const $Q=D.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Mg();return s?_.jsx("div",{...l,ref:c,style:{...u,...frt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});$Q.displayName="@mantine/core/FloatingArrow";const[drt,N2e]=Ga("Popover component was not found in the tree");function XF({children:e,active:t=!0,refProp:n="ref"}){const r=GZe(t),i=co(r,e==null?void 0:e.ref);return Tv(e)?D.cloneElement(e,{[n]:i}):e}function P2e(e){return _.jsx(xQ,{tabIndex:-1,"data-autofocus":!0,...e})}XF.displayName="@mantine/core/FocusTrap";P2e.displayName="@mantine/core/FocusTrapInitialFocus";XF.InitialFocus=P2e;function hrt(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const prt={},O2e=D.forwardRef((e,t)=>{const{children:n,target:r,...i}=He("Portal",prt,e),[s,o]=D.useState(!1),a=D.useRef(null);return M_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:hrt(i),lQ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:BD.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});O2e.displayName="@mantine/core/Portal";function j_({withinPortal:e=!0,children:t,...n}){return e?_.jsx(O2e,{...n,children:t}):_.jsx(_.Fragment,{children:t})}j_.displayName="@mantine/core/OptionalPortal";const sA=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Pe(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),H3={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Pe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Pe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Pe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Pe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Pe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Pe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Pe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Pe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...sA("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...sA("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...sA("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...sA("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...sA("top"),common:{transformOrigin:"top right"}}},Mde={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function mrt({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in H3?{transitionProperty:H3[e].transitionProperty,...i,...H3[e].common,...H3[e][Mde[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Mde[t]]}}function grt({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=fo(),l=qF(),c=u.respectReducedMotion?l:!1,[f,d]=D.useState(c?0:e),[h,p]=D.useState(r?"entered":"exited"),m=D.useRef(-1),g=D.useRef(-1),y=v=>{const x=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof x=="function"&&x(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{ZA.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof x=="function"&&x(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return om(()=>{y(r)},[r]),D.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Fg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=grt({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(mrt({transition:t,duration:f,state:d,timingFunction:h}))})}Fg.displayName="@mantine/core/Transition";var $2e={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const yrt={},MQ=ft((e,t)=>{var g,y,v,x;const n=He("PopoverDropdown",yrt,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=N2e(),h=LTe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=co(t,d.floating);return d.disabled?null:_.jsx(j_,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Fg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(x=d.transitionProps)==null?void 0:x.duration,children:w=>_.jsx(XF,{active:d.trapFocus,children:_.jsxs(ke,{...p,...f,variant:u,ref:m,onKeyDownCapture:OZe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Pe(d.width)},i]}),children:[o,_.jsx($Q,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});MQ.classes=$2e;MQ.displayName="@mantine/core/PopoverDropdown";const vrt={refProp:"ref",popupType:"dialog"},M2e=ft((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=He("PopoverTarget",vrt,e);if(!Tv(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=N2e(),u=co(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return D.cloneElement(n,{...o,...l,...a.targetProps,className:oo(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});M2e.displayName="@mantine/core/PopoverTarget";function L2e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=D.useState(0);D.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Ont(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),om(()=>{t.update()},r),om(()=>{s(o=>o+1)},[e])}function brt(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function xrt(e,t){const n=brt(e.middlewares),r=[T2e(e.offset)];return n.shift&&r.push(RQ(typeof n.shift=="boolean"?{limiter:Cde(),padding:5}:{limiter:Cde(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Cq():Cq(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Aq():Aq(n.inline)),r.push(C2e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Hnt({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function _rt(e){const[t,n]=ga({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=OQ({strategy:e.strategy,placement:e.position,middleware:xrt(e,()=>s)});return L2e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),om(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),om(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const wrt={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:md("popover"),__staticSelector:"Popover",width:"max-content"},Ert=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ii(t),"--popover-shadow":aQ(n)}});function La(e){var Ce,Fe,st,yt,Dt,Je;const t=He("Popover",wrt,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:x,withinPortal:w,portalProps:E,closeOnEscape:T,clickOutsideEvents:C,trapFocus:I,onClose:N,onOpen:k,onChange:P,zIndex:M,radius:O,shadow:B,id:q,defaultOpened:H,__staticSelector:Y,withRoles:K,disabled:J,returnFocus:F,variant:U,keepMounted:W,vars:L,floatingStrategy:V,...Q}=t,ue=Ft({name:Y,props:t,classes:$2e,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:L,varsResolver:Ert}),we=D.useRef(null),[ce,Se]=D.useState(null),[Oe,et]=D.useState(null),{dir:Re}=Mg(),St=$u(q),Ze=_rt({middlewares:c,width:l,position:D2e(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:we,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:H,onChange:P,onOpen:k,onClose:N,strategy:V});LZe(()=>x&&Ze.onClose(),C,[ce,Oe]);const It=D.useCallback(_e=>{Se(_e),Ze.floating.refs.setReference(_e)},[Ze.floating.refs.setReference]),mt=D.useCallback(_e=>{et(_e),Ze.floating.refs.setFloating(_e)},[Ze.floating.refs.setFloating]);return _.jsx(drt,{value:{returnFocus:F,disabled:J,controlled:Ze.controlled,reference:It,floating:mt,x:Ze.floating.x,y:Ze.floating.y,arrowX:(st=(Fe=(Ce=Ze.floating)==null?void 0:Ce.middlewareData)==null?void 0:Fe.arrow)==null?void 0:st.x,arrowY:(Je=(Dt=(yt=Ze.floating)==null?void 0:yt.middlewareData)==null?void 0:Dt.arrow)==null?void 0:Je.y,opened:Ze.opened,arrowRef:we,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ze.floating.placement,trapFocus:I,withinPortal:w,portalProps:E,zIndex:M,radius:O,shadow:B,closeOnEscape:T,onClose:Ze.onClose,onToggle:Ze.onToggle,getTargetId:()=>`${St}-target`,getDropdownId:()=>`${St}-dropdown`,withRoles:K,targetProps:Q,__staticSelector:Y,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:ue},children:n})}La.Target=M2e;La.Dropdown=MQ;La.displayName="@mantine/core/Popover";La.extend=e=>e;var hh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Srt=D.forwardRef(({className:e,...t},n)=>_.jsxs(ke,{component:"span",className:oo(hh.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:hh.bar}),_.jsx("span",{className:hh.bar}),_.jsx("span",{className:hh.bar})]})),Trt=D.forwardRef(({className:e,...t},n)=>_.jsxs(ke,{component:"span",className:oo(hh.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:hh.dot}),_.jsx("span",{className:hh.dot}),_.jsx("span",{className:hh.dot})]})),Crt=D.forwardRef(({className:e,...t},n)=>_.jsx(ke,{component:"span",className:oo(hh.ovalLoader,e),...t,ref:n})),F2e={bars:Srt,oval:Crt,dots:Trt},Art={loaders:F2e,type:"oval"},Irt=(e,{size:t,color:n})=>({root:{"--loader-size":Wn(t,"loader-size"),"--loader-color":n?Mi(n,e):void 0}}),wc=ft((e,t)=>{const n=He("Loader",Art,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Ft({name:"Loader",props:n,classes:hh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:Irt});return p?_.jsx(ke,{...g("root"),ref:t,...m,children:p}):_.jsx(ke,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});wc.defaultLoaders=F2e;wc.classes=hh;wc.displayName="@mantine/core/Loader";var QF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Lde={orientation:"horizontal"},krt=(e,{borderWidth:t})=>({group:{"--ai-border-width":Pe(t)}}),LQ=ft((e,t)=>{const n=He("ActionIconGroup",Lde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=He("ActionIconGroup",Lde,e),p=Ft({name:"ActionIconGroup",props:n,classes:QF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:krt,rootSelector:"group"});return _.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});LQ.classes=QF;LQ.displayName="@mantine/core/ActionIconGroup";const Rrt={},Drt=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Wn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ii(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},U_=To((e,t)=>{const n=He("ActionIcon",Rrt,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":x,autoContrast:w,mod:E,...T}=n,C=Ft({name:["ActionIcon",p],props:n,className:r,style:u,classes:QF,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:Drt});return _.jsxs(of,{...C("root",{active:!v&&!l&&!x}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||x},E],children:[_.jsx(Fg,{mounted:!!l,transition:"slide-down",duration:150,children:I=>_.jsx(ke,{component:"span",...C("loader",{style:I}),"aria-hidden":!0,children:_.jsx(wc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(ke,{component:"span",mod:{loading:l},...C("icon"),children:y})]})});U_.classes=QF;U_.displayName="@mantine/core/ActionIcon";U_.Group=LQ;const B2e=D.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));B2e.displayName="@mantine/core/CloseIcon";var j2e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Nrt={variant:"subtle"},Prt=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Wn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ii(n),"--cb-icon-size":Pe(r)}}),Iv=To((e,t)=>{const n=He("CloseButton",Nrt,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Ft({name:"CloseButton",props:n,className:a,style:l,classes:j2e,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Prt});return _.jsxs(of,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(B2e,{}),i]})});Iv.classes=j2e;Iv.displayName="@mantine/core/CloseButton";function Ort(e){return D.Children.toArray(e).filter(Boolean)}var U2e={root:"m_4081bf90"};const $rt={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Mrt=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Eo(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),_r=ft((e,t)=>{const n=He("Group",$rt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...x}=n,w=Ort(u),E=w.length,T=Eo(l??"md"),I={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},N=Ft({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:U2e,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Mrt});return _.jsx(ke,{...N("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...x,children:w})});_r.classes=U2e;_r.displayName="@mantine/core/Group";var z2e={root:"m_9814e45f"};const Lrt={zIndex:md("modal")},Frt=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&pp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Pe(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ii(s),"--overlay-z-index":o==null?void 0:o.toString()}}),uR=To((e,t)=>{const n=He("Overlay",Lrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...x}=n,w=Ft({name:"Overlay",props:n,classes:z2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Frt});return _.jsx(ke,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...x,children:f})});uR.classes=z2e;uR.displayName="@mantine/core/Overlay";const[Brt,Bg]=Ga("ModalBase component was not found in tree");function jrt({opened:e,transitionDuration:t}){const[n,r]=D.useState(e),i=D.useRef(),o=qF()?0:t;return D.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Urt({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=$u(e),[u,l]=D.useState(!1),[c,f]=D.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=jrt({opened:n,transitionDuration:d});return UTe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),LTe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const zrt=D.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...x},w)=>{const{_id:E,titleMounted:T,bodyMounted:C,shouldLockScroll:I,setTitleMounted:N,setBodyMounted:k}=Urt({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(j_,{...c,withinPortal:l,children:_.jsx(Brt,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:C,setTitleMounted:N,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(VF,{enabled:I&&f,...v,children:_.jsx(ke,{ref:w,...x,__vars:{...g,"--mb-z-index":(h||md("modal")).toString(),"--mb-shadow":aQ(p),"--mb-padding":Eo(m)},children:d})})})})});function Vrt(){const e=Bg();return D.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var nT={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const V2e=D.forwardRef(({className:e,...t},n)=>{const r=Vrt(),i=Bg();return _.jsx(ke,{ref:n,...t,id:r,className:oo({[nT.body]:!i.unstyled},e)})});V2e.displayName="@mantine/core/ModalBaseBody";const H2e=D.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Bg();return _.jsx(Iv,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:oo({[nT.close]:!i.unstyled},e),unstyled:i.unstyled})});H2e.displayName="@mantine/core/ModalBaseCloseButton";const Hrt=D.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Bg();return _.jsx(Fg,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:oo({[nT.inner]:!a.unstyled},n.className),children:_.jsx(XF,{active:a.opened&&a.trapFocus,children:_.jsx(g2,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:oo({[nT.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),q2e=D.forwardRef(({className:e,...t},n)=>{const r=Bg();return _.jsx(ke,{component:"header",ref:n,className:oo({[nT.header]:!r.unstyled},e),...t})});q2e.displayName="@mantine/core/ModalBaseHeader";const qrt={duration:200,timingFunction:"ease",transition:"fade"};function Wrt(e){const t=Bg();return{...qrt,...t.transitionProps,...e}}const W2e=D.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Bg(),o=Wrt(t);return _.jsx(Fg,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(uR,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});W2e.displayName="@mantine/core/ModalBaseOverlay";function Grt(){const e=Bg();return D.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const G2e=D.forwardRef(({className:e,...t},n)=>{const r=Grt(),i=Bg();return _.jsx(ke,{component:"h2",ref:n,className:oo({[nT.title]:!i.unstyled},e),...t,id:r})});G2e.displayName="@mantine/core/ModalBaseTitle";function Yrt({children:e}){return _.jsx(_.Fragment,{children:e})}const[Krt,b2]=p2({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var yd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Fde={},Xrt=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${ll(t)} - ${Pe(2)})`}}),JF=ft((e,t)=>{const n=He("InputDescription",Fde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=He("InputDescription",Fde,n),p=b2(),m=Ft({name:["InputWrapper",c],props:n,classes:yd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:Xrt}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});JF.classes=yd;JF.displayName="@mantine/core/InputDescription";const Qrt={},Jrt=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${ll(t)} - ${Pe(2)})`}}),ZF=ft((e,t)=>{const n=He("InputError",Qrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Ft({name:["InputWrapper",c],props:n,classes:yd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Jrt}),m=b2(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});ZF.classes=yd;ZF.displayName="@mantine/core/InputError";const Bde={labelElement:"label"},Zrt=(e,{size:t})=>({label:{"--input-label-size":ll(t),"--input-asterisk-color":void 0}}),e5=ft((e,t)=>{const n=He("InputLabel",Bde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=He("InputLabel",Bde,n),x=Ft({name:["InputWrapper",m],props:n,classes:yd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Zrt}),w=b2(),E=(w==null?void 0:w.getStyles)||x;return _.jsxs(ke,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});e5.classes=yd;e5.displayName="@mantine/core/InputLabel";const jde={},FQ=ft((e,t)=>{const n=He("InputPlaceholder",jde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=He("InputPlaceholder",jde,n),p=Ft({name:["InputPlaceholder",l],props:n,classes:yd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(ke,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});FQ.classes=yd;FQ.displayName="@mantine/core/InputPlaceholder";function eit(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const tit={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},nit=(e,{size:t})=>({label:{"--input-label-size":ll(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${ll(t)} - ${Pe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${ll(t)} - ${Pe(2)})`}}),BQ=ft((e,t)=>{const n=He("InputWrapper",tit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:x,labelElement:w,children:E,withAsterisk:T,id:C,required:I,__stylesApiProps:N,mod:k,...P}=n,M=Ft({name:["InputWrapper",f],props:N||n,classes:yd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nit}),O={size:l,variant:c,__staticSelector:f},B=$u(C),q=typeof T=="boolean"?T:I,H=(x==null?void 0:x.id)||`${B}-error`,Y=(v==null?void 0:v.id)||`${B}-description`,K=B,J=!!m&&typeof m!="boolean",F=!!g,U=`${J?H:""} ${F?Y:""}`,W=U.trim().length>0?U.trim():void 0,L=(y==null?void 0:y.id)||`${B}-label`,V=p&&_.jsx(e5,{labelElement:w,id:L,htmlFor:K,required:q,...O,...y,children:p},"label"),Q=F&&_.jsx(JF,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||Y,children:g},"description"),ue=_.jsx(D.Fragment,{children:d(E)},"input"),we=J&&D.createElement(ZF,{...x,...O,size:(x==null?void 0:x.size)||O.size,key:"error",id:(x==null?void 0:x.id)||H},m),ce=h.map(Se=>{switch(Se){case"label":return V;case"input":return ue;case"description":return Q;case"error":return we;default:return null}});return _.jsx(Krt,{value:{getStyles:M,describedBy:W,inputId:K,labelId:L,...eit(h,{hasDescription:F,hasError:J})},children:_.jsx(ke,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...M("root"),...P,children:ce})})});BQ.classes=yd;BQ.displayName="@mantine/core/InputWrapper";const rit={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},iit=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Wn(t.size,"input-height"),"--input-fz":ll(t.size),"--input-radius":t.radius===void 0?void 0:Ii(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Pe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Pe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Wn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ts=To((e,t)=>{const n=He("Input",rit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:x,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:C,vars:I,pointer:N,multiline:k,radius:P,id:M,withAria:O,withErrorStyles:B,mod:q,inputSize:H,...Y}=n,{styleProps:K,rest:J}=F_(Y),F=b2(),U={offsetBottom:F==null?void 0:F.offsetBottom,offsetTop:F==null?void 0:F.offsetTop},W=Ft({name:["Input",l],props:c||n,classes:yd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:I,varsResolver:iit}),L=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":F==null?void 0:F.describedBy,id:(F==null?void 0:F.inputId)||M}:{};return _.jsxs(ke,{...W("wrapper"),...K,...d,mod:[{error:!!h&&B,pointer:N,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},q],variant:C,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(ke,{component:"input",...J,...L,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:C,__size:H,...W("input")}),v&&_.jsx("div",{...x,"data-position":"right",...W("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:v})]})});Ts.classes=yd;Ts.Wrapper=BQ;Ts.Label=e5;Ts.Error=ZF;Ts.Description=JF;Ts.Placeholder=FQ;Ts.displayName="@mantine/core/Input";function sit(e,t,n){const r=He(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:x,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:C,variant:I,vars:N,mod:k,...P}=r,{styleProps:M,rest:O}=F_(P),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:x,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:C,variant:I,id:v,mod:k,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...M},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:x,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:I,id:v}}}const oit={__staticSelector:"InputBase",withAria:!0},vd=To((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=sit("InputBase",oit,e);return _.jsx(Ts.Wrapper,{...r,children:_.jsx(Ts,{...n,...i,ref:t})})});vd.classes={...Ts.classes,...Ts.Wrapper.classes};vd.displayName="@mantine/core/InputBase";const ait={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Y2e={root:"m_8bffd616"};const uit={},qt=To((e,t)=>{const n=He("Flex",uit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Ft({name:"Flex",classes:Y2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=fo(),x=zD(),w=QTe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:ait});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(L_,{selector:`.${x}`,styles:w.styles,media:w.media}),_.jsx(ke,{ref:t,...y("root",{className:x,style:Sv(w.inlineStyles)}),...g})]})});qt.classes=Y2e;qt.displayName="@mantine/core/Flex";function lit(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function cit({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=D.useRef(),[s,o]=D.useState(!1),[a,u]=D.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=D.useRef(),d=D.useRef();return D.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),D.useEffect(()=>{if(t){const h=p=>{lit(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),iet(()=>{HTe()!=="test"&&o(!0)},20,{autoInvoke:!0}),set(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var K2e={root:"m_96b553a6"};const fit={},dit=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),jQ=ft((e,t)=>{const n=He("FloatingIndicator",fit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Ft({name:"FloatingIndicator",classes:K2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dit}),g=D.useRef(null),{initialized:y,hidden:v}=cit({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),x=co(t,g);return!l||!c?null:_.jsx(ke,{ref:x,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});jQ.displayName="@mantine/core/FloatingIndicator";jQ.classes=K2e;const[hit,UQ]=Ga("Accordion component was not found in the tree");function t5({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Pe(t),height:Pe(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}t5.displayName="@mantine/core/AccordionChevron";const[pit,X2e]=Ga("Accordion.Item component was not found in the tree");var HD={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const mit={},zQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=He("AccordionControl",mit,e),{value:m}=X2e(),g=UQ(),y=g.isItemActive(m),v=typeof g.order=="number",x=`h${g.order}`,w=_.jsxs(of,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:oQ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(ke,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(ke,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(x,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});zQ.displayName="@mantine/core/AccordionControl";zQ.classes=HD;const git={},VQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=He("AccordionItem",git,e),c=UQ();return _.jsx(pit,{value:{value:a},children:_.jsx(ke,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});VQ.displayName="@mantine/core/AccordionItem";VQ.classes=HD;const yit={},HQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=He("AccordionPanel",yit,e),{value:l}=X2e(),c=UQ();return _.jsx(GF,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});HQ.displayName="@mantine/core/AccordionPanel";HQ.classes=HD;const vit={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(t5,{})},bit=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Pe(n),"--accordion-radius":r===void 0?void 0:Ii(r)}});function Fl(e){const t=He("Accordion",vit,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:x,chevron:w,variant:E,radius:T,...C}=t,I=$u(h),[N,k]=ga({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),P=B=>Array.isArray(N)?N.includes(B):B===N,M=B=>{const q=Array.isArray(N)?N.includes(B)?N.filter(H=>H!==B):[...N,B]:B===N?null:B;k(q)},O=Ft({name:"Accordion",classes:HD,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:bit});return _.jsx(hit,{value:{isItemActive:P,onChange:M,getControlId:d$(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:d$(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:x,chevron:w,loop:p,getStyles:O,variant:E,unstyled:o},children:_.jsx(ke,{...O("root"),id:I,...C,variant:E,"data-accordion":!0,children:u})})}const xit=e=>e;Fl.extend=xit;Fl.classes=HD;Fl.displayName="@mantine/core/Accordion";Fl.Item=VQ;Fl.Panel=HQ;Fl.Control=zQ;Fl.Chevron=t5;var Q2e={root:"m_7f854edf"};const _it={position:{bottom:0,right:0},zIndex:md("modal"),withinPortal:!0},wit=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":Pe(n==null?void 0:n.top),"--affix-left":Pe(n==null?void 0:n.left),"--affix-bottom":Pe(n==null?void 0:n.bottom),"--affix-right":Pe(n==null?void 0:n.right)}}),qQ=ft((e,t)=>{const n=He("Affix",_it,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=Ft({name:"Affix",classes:Q2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wit});return _.jsx(j_,{...l,withinPortal:f,children:_.jsx(ke,{ref:t,...p("root"),...h})})});qQ.classes=Q2e;qQ.displayName="@mantine/core/Affix";var J2e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Eit={},Sit=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ii(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Y0=ft((e,t)=>{const n=He("Alert",Eit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:x,...w}=n,E=Ft({name:"Alert",classes:J2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sit}),T=$u(h),C=f&&`${T}-title`||void 0,I=`${T}-body`;return _.jsx(ke,{id:T,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":I,"aria-labelledby":C,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:C,...E("label"),children:f})}),d&&_.jsx("div",{id:I,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(Iv,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Y0.classes=J2e;Y0.displayName="@mantine/core/Alert";var Z2e={root:"m_b6d8b162"};function Tit(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const Cit={inherit:!1},Ait=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":ll(i),"--text-lh":MTe(i),"--text-gradient":t==="gradient"?bq(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Mi(s,e):void 0}}),Qe=To((e,t)=>{const n=He("Text",Cit,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...x}=n,w=Ft({name:["Text",l],props:n,classes:Z2e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:Ait});return _.jsx(ke,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":Tit(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...x})});Qe.classes=Z2e;Qe.displayName="@mantine/core/Text";var eCe={root:"m_849cf0da"};const Iit={underline:"hover"},z_=To((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=He("Anchor",Iit,e);return _.jsx(Qe,{component:"a",ref:t,className:oo({[eCe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});z_.classes=eCe;z_.displayName="@mantine/core/Anchor";const[kit,x2]=Ga("AppShell was not found in tree");var kv={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Rit={},WQ=ft((e,t)=>{const n=He("AppShellAside",Rit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=x2();return h.disabled?null:_.jsx(ke,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});WQ.classes=kv;WQ.displayName="@mantine/core/AppShellAside";const Dit={},GQ=ft((e,t)=>{var p;const n=He("AppShellFooter",Dit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=x2();return h.disabled?null:_.jsx(ke,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:oo({[VF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});GQ.classes=kv;GQ.displayName="@mantine/core/AppShellFooter";const Nit={},YQ=ft((e,t)=>{var p;const n=He("AppShellHeader",Nit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=x2();return h.disabled?null:_.jsx(ke,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:oo({[VF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});YQ.classes=kv;YQ.displayName="@mantine/core/AppShellHeader";const Pit={},KQ=ft((e,t)=>{const n=He("AppShellMain",Pit,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=x2();return _.jsx(ke,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});KQ.classes=kv;KQ.displayName="@mantine/core/AppShellMain";function qD(e){return typeof e=="object"?e.base:e}function WD(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function GD(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function Oit({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),WD(s)){const f=Pe(qD(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(GD(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Pe(s.base),e["--app-shell-aside-offset"]=Pe(s.base)),Gi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Pe(s[f]),t[f]["--app-shell-aside-offset"]=Pe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=uQ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function $it({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(WD(r)){const o=Pe(qD(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}GD(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Pe(r.base),s&&(e["--app-shell-footer-offset"]=Pe(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Pe(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Pe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function Mit({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(WD(r)){const o=Pe(qD(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}GD(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Pe(r.base),s&&(e["--app-shell-header-offset"]=Pe(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Pe(r[o]),s&&(t[o]["--app-shell-header-offset"]=Pe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function Lit({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),WD(s)){const f=Pe(qD(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(GD(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Pe(s.base),e["--app-shell-navbar-offset"]=Pe(s.base)),Gi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Pe(s[f]),t[f]["--app-shell-navbar-offset"]=Pe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=uQ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function F7(e){return Number(e)===0?"0px":Eo(e)}function Fit({padding:e,baseStyles:t,minMediaStyles:n}){WD(e)&&(t["--app-shell-padding"]=F7(qD(e))),GD(e)&&(e.base&&(t["--app-shell-padding"]=F7(e.base)),Gi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=F7(e[r]))}))}function Bit({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};Lit({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),Oit({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),Mit({baseStyles:u,minMediaStyles:o,header:t}),$it({baseStyles:u,minMediaStyles:o,footer:n}),Fit({baseStyles:u,minMediaStyles:o,padding:i});const l=sR(Gi(o),s).map(d=>({query:`(min-width: ${f$(d.px)})`,styles:o[d.value]})),c=sR(Gi(a),s).map(d=>({query:`(max-width: ${f$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function jit({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=fo(),o=Cv(),{media:a,baseStyles:u}=Bit({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(L_,{media:a,styles:u,selector:o.cssVariablesSelector})}const Uit={},XQ=ft((e,t)=>{const n=He("AppShellNavbar",Uit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=x2();return h.disabled?null:_.jsx(ke,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});XQ.classes=kv;XQ.displayName="@mantine/core/AppShellNavbar";const zit={},QQ=To((e,t)=>{const n=He("AppShellSection",zit,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=x2();return _.jsx(ke,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});QQ.classes=kv;QQ.displayName="@mantine/core/AppShellSection";function Vit({transitionDuration:e,disabled:t}){const[n,r]=D.useState(!0),i=D.useRef(),s=D.useRef();return UTe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),M_(()=>{D.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Hit={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:md("app")},qit=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),$i=ft((e,t)=>{const n=He("AppShell",Hit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:x,offsetScrollbars:w,mod:E,...T}=n,C=Ft({name:"AppShell",classes:kv,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qit}),I=Vit({disabled:y,transitionDuration:d});return _.jsxs(kit,{value:{getStyles:C,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(jit,{navbar:l,header:p,aside:v,footer:x,padding:f}),_.jsx(ke,{ref:t,...C("root"),mod:[{resizing:I,layout:g,disabled:y},E],...T})]})});$i.classes=kv;$i.displayName="@mantine/core/AppShell";$i.Navbar=XQ;$i.Header=YQ;$i.Main=KQ;$i.Aside=WQ;$i.Footer=GQ;$i.Section=QQ;function tCe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>tCe(t))}:e}function nCe(e){return e?e.map(t=>tCe(t)):[]}function JQ(e){return e.reduce((t,n)=>"group"in n?{...t,...JQ(n.items)}:(t[n.value]=n,t),{})}var cc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Wit={error:null},Git=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Wn(t,"combobox-chevron-size")}}),ZQ=ft((e,t)=>{const n=He("ComboboxChevron",Wit,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Ft({name:"ComboboxChevron",classes:cc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Git,rootSelector:"chevron"});return _.jsx(ke,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});ZQ.classes=cc;ZQ.displayName="@mantine/core/ComboboxChevron";const[Yit,bd]=Ga("Combobox component was not found in tree"),rCe=D.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Iv,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));rCe.displayName="@mantine/core/ComboboxClearButton";const Kit={},eJ=ft((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=He("ComboboxDropdown",Kit,e),u=bd();return _.jsx(La.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});eJ.classes=cc;eJ.displayName="@mantine/core/ComboboxDropdown";const Xit={refProp:"ref"},iCe=ft((e,t)=>{const{children:n,refProp:r}=He("ComboboxDropdownTarget",Xit,e);if(bd(),!Tv(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(La.Target,{ref:t,refProp:r,children:n})});iCe.displayName="@mantine/core/ComboboxDropdownTarget";const Qit={},tJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=He("ComboboxEmpty",Qit,e),u=bd();return _.jsx(ke,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});tJ.classes=cc;tJ.displayName="@mantine/core/ComboboxEmpty";function nJ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=bd(),[a,u]=D.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Jit={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},sCe=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=He("ComboboxEventsTarget",Jit,e);if(!Tv(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=bd(),f=nJ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return D.cloneElement(n,{...f,...l,[r]:co(t,c.store.targetRef,n==null?void 0:n.ref)})});sCe.displayName="@mantine/core/ComboboxEventsTarget";const Zit={},rJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=He("ComboboxFooter",Zit,e),u=bd();return _.jsx(ke,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});rJ.classes=cc;rJ.displayName="@mantine/core/ComboboxFooter";const est={},iJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=He("ComboboxGroup",est,e),c=bd();return _.jsxs(ke,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});iJ.classes=cc;iJ.displayName="@mantine/core/ComboboxGroup";const tst={},sJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=He("ComboboxHeader",tst,e),u=bd();return _.jsx(ke,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});sJ.classes=cc;sJ.displayName="@mantine/core/ComboboxHeader";function oCe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}oCe.displayName="@mantine/core/ComboboxHiddenInput";const nst={},oJ=ft((e,t)=>{const n=He("ComboboxOption",nst,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=bd(),v=D.useId(),x=l||v;return _.jsx(ke,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});oJ.classes=cc;oJ.displayName="@mantine/core/ComboboxOption";const rst={},aJ=ft((e,t)=>{const n=He("ComboboxOptions",rst,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=bd(),d=$u(a);return D.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(ke,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});aJ.classes=cc;aJ.displayName="@mantine/core/ComboboxOptions";const ist={withAriaAttributes:!0,withKeyboardNavigation:!0},uJ=ft((e,t)=>{const n=He("ComboboxSearch",ist,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=bd(),h=d.getStyles("search"),p=nJ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Ts,{ref:co(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});uJ.classes=cc;uJ.displayName="@mantine/core/ComboboxSearch";const sst={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},aCe=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=He("ComboboxTarget",sst,e);if(!Tv(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=bd(),f=nJ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=D.cloneElement(n,{...f,...l});return _.jsx(La.Target,{ref:co(t,c.store.targetRef),children:d})});aCe.displayName="@mantine/core/ComboboxTarget";function ost(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function ast(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function ust(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function lJ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ga({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=D.useRef(null),c=D.useRef(-1),f=D.useRef(null),d=D.useRef(null),h=D.useRef(-1),p=D.useRef(-1),m=D.useRef(-1),g=D.useCallback((H="unknown")=>{a||(u(!0),i==null||i(H))},[u,i,a]),y=D.useCallback((H="unknown")=>{a&&(u(!1),r==null||r(H))},[u,r,a]),v=D.useCallback((H="unknown")=>{a?y(H):g(H)},[y,g,a]),x=D.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-selected]`);H==null||H.removeAttribute("data-combobox-selected"),H==null||H.removeAttribute("aria-selected")},[]),w=D.useCallback(H=>{const Y=document.getElementById(l.current),K=Y==null?void 0:Y.querySelectorAll("[data-combobox-option]");if(!K)return null;const J=H>=K.length?0:H<0?K.length-1:H;return c.current=J,K!=null&&K[J]&&!K[J].hasAttribute("data-combobox-disabled")?(x(),K[J].setAttribute("data-combobox-selected","true"),K[J].setAttribute("aria-selected","true"),K[J].scrollIntoView({block:"nearest",behavior:o}),K[J].id):null},[o,x]),E=D.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-active]`);if(H){const Y=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(Y).findIndex(J=>J===H);return w(K)}return w(0)},[w]),T=D.useCallback(()=>w(ast(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=D.useCallback(()=>w(ost(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),I=D.useCallback(()=>w(ust(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),N=D.useCallback((H="selected",Y)=>{m.current=window.setTimeout(()=>{var F;const K=document.querySelectorAll(`#${l.current} [data-combobox-option]`),J=Array.from(K).findIndex(U=>U.hasAttribute(`data-combobox-${H}`));c.current=J,Y!=null&&Y.scrollIntoView&&((F=K[J])==null||F.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=D.useCallback(()=>{c.current=-1,x()},[x]),P=D.useCallback(()=>{const H=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=H==null?void 0:H[c.current];Y==null||Y.click()},[]),M=D.useCallback(H=>{l.current=H},[]),O=D.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=D.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),q=D.useCallback(()=>c.current,[]);return D.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:q,selectOption:w,selectFirstOption:I,selectActiveOption:E,selectNextOption:T,selectPreviousOption:C,resetSelectedOption:k,updateSelectedOptionIndex:N,listId:l.current,setListId:M,clickSelectedOption:P,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:B}}const lst={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},cst=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":ll(t),"--combobox-option-padding":Wn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Pe(n),"--combobox-option-fz":ll(t),"--combobox-option-padding":Wn(t,"combobox-option-padding")}});function $r(e){const t=He("Combobox",lst,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=lJ(),y=o||g,v=Ft({name:h||"Combobox",classes:cc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:cst}),x=()=>{l==null||l(),y.closeDropdown()};return _.jsx(Yit,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(La,{opened:y.dropdownOpened,...m,onClose:x,withRoles:!1,unstyled:i,children:s})})}const fst=e=>e;$r.extend=fst;$r.classes=cc;$r.displayName="@mantine/core/Combobox";$r.Target=aCe;$r.Dropdown=eJ;$r.Options=aJ;$r.Option=oJ;$r.Search=uJ;$r.Empty=tJ;$r.Chevron=ZQ;$r.Footer=rJ;$r.Header=sJ;$r.EventsTarget=sCe;$r.DropdownTarget=iCe;$r.Group=iJ;$r.ClearButton=rCe;$r.HiddenInput=oCe;var uCe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const lCe=uCe,n5=D.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:x,...w},E)=>{const T=Ft({name:e,props:t,className:n,style:y,classes:uCe,classNames:r,styles:i,unstyled:s});return _.jsx(ke,{...T("root"),ref:E,__vars:{"--label-fz":ll(d),"--label-lh":Wn(d,"label-lh")},mod:[{"label-position":h},x],variant:g,size:d,...w,children:_.jsxs(ke,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(ke,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Ts.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(Ts.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});n5.displayName="@mantine/core/InlineInput";const cCe=D.createContext(null),dst=cCe.Provider,fCe=()=>D.useContext(cCe),[hst,pst]=p2();var dCe={card:"m_26775b0a"};const mst={withBorder:!0},gst=(e,{radius:t})=>({card:{"--card-radius":Ii(t)}}),cJ=ft((e,t)=>{const n=He("CheckboxCard",mst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Ft({name:"CheckboxCard",classes:dCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gst,rootSelector:"card"}),g=fCe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(hst,{value:{checked:y},children:_.jsx(of,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});cJ.displayName="@mantine/core/CheckboxCard";cJ.classes=dCe;function fJ({children:e,role:t}){const n=b2();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const yst={},dJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=He("CheckboxGroup",yst,e),[c,f]=ga({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(dst,{value:{value:c,onChange:d,size:s},children:_.jsx(Ts.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(fJ,{role:"group",children:a})})})});dJ.classes=Ts.Wrapper.classes;dJ.displayName="@mantine/core/CheckboxGroup";function hCe({size:e,style:t,...n}){const r=e!==void 0?{width:Pe(e),height:Pe(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function pCe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(hCe,{...t})}var mCe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const vst={icon:pCe},bst=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Im({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ii(t),"--checkbox-color":s==="outline"?u:Mi(n,e),"--checkbox-icon-color":i?Mi(i,e):m2(o,e)?Av({color:n,theme:e,autoContrast:o}):void 0}}},hJ=ft((e,t)=>{const n=He("CheckboxIndicator",vst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...x}=n,w=l,E=Ft({name:"CheckboxIndicator",classes:mCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bst,rootSelector:"indicator"}),T=pst(),C=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(ke,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:C,disabled:v},g],...x,children:_.jsx(w,{indeterminate:c,...E("icon")})})});hJ.displayName="@mantine/core/CheckboxIndicator";hJ.classes=mCe;var gCe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const xst={labelPosition:"right",icon:pCe},_st=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Im({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ii(t),"--checkbox-color":s==="outline"?u:Mi(n,e),"--checkbox-icon-color":i?Mi(i,e):m2(o,e)?Av({color:n,theme:e,autoContrast:o}):void 0}}},_u=ft((e,t)=>{const n=He("Checkbox",xst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:x,disabled:w,variant:E,indeterminate:T,icon:C,rootRef:I,iconColor:N,onChange:k,autoContrast:P,mod:M,...O}=n,B=fCe(),q=d||(B==null?void 0:B.size),H=C,Y=Ft({name:"Checkbox",props:n,classes:gCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_st}),{styleProps:K,rest:J}=F_(O),F=$u(f),U=B?{checked:B.value.includes(J.value),onChange:W=>{B.onChange(W),k==null||k(W)}}:{};return _.jsx(n5,{...Y("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:F,size:q,labelPosition:y,label:c,description:v,error:x,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:E,ref:I,mod:M,...K,...p,children:_.jsxs(ke,{...Y("inner"),mod:{"data-label-position":y},children:[_.jsx(ke,{component:"input",id:F,ref:t,checked:g,disabled:w,mod:{error:!!x,indeterminate:T},...Y("input",{focusable:!0,variant:E}),onChange:k,...J,...U,type:"checkbox"}),_.jsx(H,{indeterminate:T,...Y("icon")})]})})});_u.classes={...gCe,...lCe};_u.displayName="@mantine/core/Checkbox";_u.Group=dJ;_u.Indicator=hJ;_u.Card=cJ;function rT(e){return"group"in e}function yCe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;rT(o)&&i.push({group:o.group,items:yCe({options:o.items,search:t,limit:n-i.length})}),rT(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function wst(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function vCe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(rT(n))vCe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Est(e,t){return Array.isArray(e)?e.includes(t):e===t}function bCe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!rT(e)){const a=Est(n,e.value),u=t&&a&&_.jsx(hCe,{className:cc.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx($r.Option,{value:e.value,disabled:e.disabled,className:oo({[cc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(bCe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx($r.Group,{label:e.group,children:o})}function xCe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){vCe(e);const x=typeof i=="string"?(r||yCe)({options:e,search:u?i:"",limit:s??1/0}):e,w=wst(x),E=x.map(T=>_.jsx(bCe,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},rT(T)?T.group:T.value));return _.jsx($r.Dropdown,{hidden:t||n&&w,children:_.jsxs($r.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(fg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx($r.Empty,{children:d})]})})}var _Ce={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Sst={},Tst=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Wn(s,"badge-height"),"--badge-padding-x":Wn(s,"badge-padding-x"),"--badge-fz":Wn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ii(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Mi(n,e):void 0}}},wh=To((e,t)=>{const n=He("Badge",Sst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:x,...w}=n,E=Ft({name:"Badge",props:n,classes:_Ce,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Tst});return _.jsxs(ke,{variant:m,mod:[{block:g,circle:v},x],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});wh.classes=_Ce;wh.displayName="@mantine/core/Badge";var r5={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Ude={orientation:"horizontal"},Cst=(e,{borderWidth:t})=>({group:{"--button-border-width":Pe(t)}}),pJ=ft((e,t)=>{const n=He("ButtonGroup",Ude,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=He("ButtonGroup",Ude,e),p=Ft({name:"ButtonGroup",props:n,classes:r5,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Cst,rootSelector:"group"});return _.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});pJ.classes=r5;pJ.displayName="@mantine/core/ButtonGroup";const Ast={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Pe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Ist={},kst=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Wn(s,"button-height"),"--button-padding-x":Wn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?ll(s.replace("compact-","")):ll(s),"--button-radius":t===void 0?void 0:Ii(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},ln=To((e,t)=>{const n=He("Button",Ist,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:x,"data-disabled":w,autoContrast:E,mod:T,...C}=n,I=Ft({name:"Button",props:n,classes:r5,className:s,style:r,classNames:y,styles:v,unstyled:x,vars:i,varsResolver:kst}),N=!!l,k=!!c;return _.jsxs(of,{ref:t,...I("root",{active:!a&&!p&&!w}),unstyled:x,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":N,"with-right-section":k},T],...C,children:[_.jsx(Fg,{mounted:!!p,transition:Ast,duration:150,children:P=>_.jsx(ke,{component:"span",...I("loader",{style:P}),"aria-hidden":!0,children:_.jsx(wc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...I("inner"),children:[l&&_.jsx(ke,{component:"span",...I("section"),mod:{position:"left"},children:l}),_.jsx(ke,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&_.jsx(ke,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});ln.classes=r5;ln.displayName="@mantine/core/Button";ln.Group=pJ;const[Rst,Dst]=Ga("Card component was not found in tree");var mJ={root:"m_e615b15f",section:"m_599a2148"};const Nst={},i5=To((e,t)=>{const n=He("CardSection",Nst,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=Dst();return _.jsx(ke,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});i5.classes=mJ;i5.displayName="@mantine/core/CardSection";const Pst={},Ost=(e,{padding:t})=>({root:{"--card-padding":Eo(t)}}),_2=To((e,t)=>{const n=He("Card",Pst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Ft({name:"Card",props:n,classes:mJ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ost}),h=D.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===i5?D.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(Rst,{value:{getStyles:d},children:_.jsx(g2,{ref:t,unstyled:a,...d("root"),...f,children:p})})});_2.classes=mJ;_2.displayName="@mantine/core/Card";_2.Section=i5;var wCe={root:"m_4451eb3a"};const $st={},Wo=To((e,t)=>{const n=He("Center",$st,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Ft({name:"Center",props:n,classes:wCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(ke,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Wo.classes=wCe;Wo.displayName="@mantine/core/Center";var ECe={root:"m_b183c0a2"};const Mst={},Lst=(e,{color:t})=>({root:{"--code-bg":t?Mi(t,e):void 0}}),QI=ft((e,t)=>{const n=He("Code",Mst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Ft({name:"Code",props:n,classes:ECe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Lst});return _.jsx(ke,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});QI.classes=ECe;QI.displayName="@mantine/core/Code";var SCe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const zde={withShadow:!0},Fst=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Ii(t),"--cs-size":Pe(n)}}),gJ=To((e,t)=>{const n=He("ColorSwatch",zde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=He("ColorSwatch",zde,n),g=Ft({name:"ColorSwatch",props:n,classes:SCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fst});return _.jsxs(ke,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[_.jsx("span",{...g("alphaOverlay")}),d&&_.jsx("span",{...g("shadowOverlay")}),_.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),_.jsx("span",{...g("childrenOverlay"),children:h})]})});gJ.classes=SCe;gJ.displayName="@mantine/core/ColorSwatch";var TCe={root:"m_7485cace"};const Bst={},jst=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Wn(t,"container-size")}}),pg=ft((e,t)=>{const n=He("Container",Bst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Ft({name:"Container",classes:TCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jst});return _.jsx(ke,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});pg.classes=TCe;pg.displayName="@mantine/core/Container";var CCe={root:"m_3eebeb36",label:"m_9e365f20"};const Ust={orientation:"horizontal"},zst=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Mi(t,e):void 0,"--divider-border-style":n,"--divider-size":Wn(r,"divider-size")}}),V_=ft((e,t)=>{const n=He("Divider",Ust,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Ft({name:"Divider",classes:CCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zst});return _.jsx(ke,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(ke,{component:"span",mod:{position:d},...m("label"),children:f})})});V_.classes=CCe;V_.displayName="@mantine/core/Divider";function Vst({open:e,close:t,openDelay:n,closeDelay:r}){const i=D.useRef(-1),s=D.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return D.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Hst,ACe]=Ga("Grid component was not found in tree"),kq=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Vde=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":kq(e,t),Hde=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},qde=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function qst({span:e,order:t,offset:n,selector:r}){var d;const i=fo(),s=ACe(),a=dh(e)===void 0?12:dh(e),u=Sv({"--col-order":(d=dh(t))==null?void 0:d.toString(),"--col-flex-grow":Hde(a,s.grow),"--col-flex-basis":kq(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Vde(a,s.columns,s.grow),"--col-offset":qde(dh(n),s.columns)}),l=Gi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Hde(e[p],s.grow),h[p]["--col-flex-basis"]=kq(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Vde(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=qde(n[p],s.columns)),h},{}),f=sR(Gi(l),i).filter(h=>Gi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(L_,{styles:u,media:f,selector:r})}var yJ={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Wst={span:12},vJ=ft((e,t)=>{const n=He("GridCol",Wst,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=ACe(),h=zD();return _.jsxs(_.Fragment,{children:[_.jsx(qst,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(ke,{ref:t,...d.getStyles("col",{className:oo(i,h),style:s,classNames:r,styles:o}),...f})]})});vJ.classes=yJ;vJ.displayName="@mantine/core/GridCol";function Gst({gutter:e,selector:t}){const n=fo(),r=Sv({"--grid-gutter":Eo(dh(e))}),i=Gi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Eo(e[u])),a),{}),o=sR(Gi(i),n).filter(a=>Gi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(L_,{styles:r,media:o,selector:t})}const Yst={gutter:"md",grow:!1,columns:12},Kst=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),qc=ft((e,t)=>{const n=He("Grid",Yst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Ft({name:"Grid",classes:yJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Kst}),y=zD();return _.jsxs(Hst,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(Gst,{selector:`.${y}`,...n}),_.jsx(ke,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});qc.classes=yJ;qc.displayName="@mantine/core/Grid";qc.Col=vJ;var ICe={root:"m_9e117634"};const Xst={},Qst=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ii(t),"--image-object-fit":n}}),Rv=To((e,t)=>{const n=He("Image",Xst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=D.useState(!c);D.useEffect(()=>y(!c),[c]);const v=Ft({name:"Image",classes:ICe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qst});return g&&h?_.jsx(ke,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(ke,{component:"img",ref:t,...v("root"),src:c,onError:x=>{l==null||l(x),y(!0)},mod:p,...m})});Rv.classes=ICe;Rv.displayName="@mantine/core/Image";function Rq(){return Rq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rq.apply(null,arguments)}function Jst(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Zst=D.useLayoutEffect,eot=function(t){var n=D.useRef(t);return Zst(function(){n.current=t}),n},Wde=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},tot=function(t,n){var r=D.useRef();return D.useCallback(function(i){t.current=i,r.current&&Wde(r.current,null),r.current=n,n&&Wde(n,i)},[n])},Gde={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},not=function(t){Object.keys(Gde).forEach(function(n){t.style.setProperty(n,Gde[n],"important")})},Yde=not,Wu=null,Kde=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function rot(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Wu||(Wu=document.createElement("textarea"),Wu.setAttribute("tabindex","-1"),Wu.setAttribute("aria-hidden","true"),Yde(Wu)),Wu.parentNode===null&&document.body.appendChild(Wu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Wu.style[h]=o[h]}),Yde(Wu),Wu.value=t;var u=Kde(Wu,e);Wu.value=t,u=Kde(Wu,e),Wu.value="x";var l=Wu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Xde=function(){},iot=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},sot=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],oot=!!document.documentElement.currentStyle,aot=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=iot(sot,n),i=r.boxSizing;if(i==="")return null;oot&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},uot=aot;function kCe(e,t,n){var r=eot(n);D.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var lot=function(t){kCe(window,"resize",t)},cot=function(t){kCe(document.fonts,"loadingdone",t)},fot=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],dot=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Xde:o,u=t.onHeightChange,l=u===void 0?Xde:u,c=Jst(t,fot),f=c.value!==void 0,d=D.useRef(null),h=tot(d,n),p=D.useRef(0),m=D.useRef(),g=function(){var x=d.current,w=r&&m.current?m.current:uot(x);if(w){m.current=w;var E=rot(w,x.value||x.placeholder||"x",s,i),T=E[0],C=E[1];p.current!==T&&(p.current=T,x.style.setProperty("height",T+"px","important"),l(T,{rowHeight:C}))}},y=function(x){f||g(),a(x)};return D.useLayoutEffect(g),lot(g),cot(g),D.createElement("textarea",Rq({},c,{onChange:y,ref:h}))},hot=D.forwardRef(dot);const pot={},bJ=ft((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=He("Textarea",pot,e),u=n&&HTe()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(vd,{component:u?hot:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});bJ.classes=vd.classes;bJ.displayName="@mantine/core/Textarea";const[mot,got]=Ga("List component was not found in tree");var xJ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const yot={},_J=ft((e,t)=>{const n=He("ListItem",yot,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=got(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(ke,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});_J.classes=xJ;_J.displayName="@mantine/core/ListItem";const vot={type:"unordered"},bot=(e,{size:t,spacing:n})=>({root:{"--list-fz":ll(t),"--list-lh":MTe(t),"--list-spacing":Eo(n)}}),Eh=ft((e,t)=>{const n=He("List",vot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Ft({name:"List",classes:xJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bot});return _.jsx(mot,{value:{center:p,icon:d,getStyles:v},children:_.jsx(ke,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Eh.classes=xJ;Eh.displayName="@mantine/core/List";Eh.Item=_J;var RCe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Qde={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:md("overlay")},xot=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),uf=ft((e,t)=>{const n=He("LoadingOverlay",Qde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=fo(),g=Ft({name:"LoadingOverlay",classes:RCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xot}),y={...Qde.overlayProps,...f};return _.jsx(Fg,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(ke,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(wc,{...g("loader"),unstyled:a,...c}),_.jsx(uR,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(uR,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});uf.classes=RCe;uf.displayName="@mantine/core/LoadingOverlay";const[_ot,YD]=Ga("Menu component was not found in the tree");var w2={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const wot={},wJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=He("MenuDivider",wot,e),u=YD();return _.jsx(ke,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});wJ.classes=w2;wJ.displayName="@mantine/core/MenuDivider";const Eot={},EJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=He("MenuDropdown",Eot,e),f=D.useRef(null),d=YD(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=O0(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=O0(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(La.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:co(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});EJ.classes=w2;EJ.displayName="@mantine/core/MenuDropdown";const Sot={},SJ=To((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=He("MenuItem",Sot,e),p=YD(),m=fo(),{dir:g}=Mg(),y=D.useRef(),v=p.getItemIndex(y.current),x=h,w=O0(x.onMouseLeave,()=>p.setHovered(-1)),E=O0(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=O0(x.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),C=O0(x.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,N=a?Im({color:a,theme:m}):null;return _.jsxs(of,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:C,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:co(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:T,onKeyDown:oQ({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:x.onKeydown}),__vars:{"--menu-item-color":N!=null&&N.isThemeColor&&(N==null?void 0:N.shade)===void 0?`var(--mantine-color-${N.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});SJ.classes=w2;SJ.displayName="@mantine/core/MenuItem";const Tot={},TJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=He("MenuLabel",Tot,e),u=YD();return _.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});TJ.classes=w2;TJ.displayName="@mantine/core/MenuLabel";const Cot={refProp:"ref"},DCe=D.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=He("MenuTarget",Cot,e);if(!Tv(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=YD(),o=O0(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=O0(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=O0(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(La.Target,{refProp:r,popupType:"menu",ref:t,...i,children:D.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});DCe.displayName="@mantine/core/MenuTarget";const Aot={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Zu(e){const t=He("Menu",Aot,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:x,menuItemTabIndex:w,keepMounted:E,...T}=t,C=Ft({name:"Menu",classes:w2,props:t,classNames:m,styles:g,unstyled:y}),[I,{setHovered:N,resetHovered:k}]=MZe(),[P,M]=ga({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,B]=D.useState(!1),q=()=>{M(!1),B(!1),P&&(i==null||i())},H=()=>{M(!0),!P&&(r==null||r())},Y=()=>{P?q():H()},{openDropdown:K,closeDropdown:J}=Vst({open:H,close:q,closeDelay:p,openDelay:h}),F=L=>$Ze("[data-menu-item]","[data-menu-dropdown]",L),{resolvedClassNames:U,resolvedStyles:W}=UD({classNames:m,styles:g,props:t});return om(()=>{k()},[P]),_.jsx(_ot,{value:{getStyles:C,opened:P,toggleDropdown:Y,getItemIndex:F,hovered:I,setHovered:N,openedViaClick:O,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?q:J,openDropdown:d==="click"?H:K,closeDropdownImmediately:q,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(La,{...T,opened:P,onChange:Y,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Zu.extend=e=>e;Zu.classes=w2;Zu.displayName="@mantine/core/Menu";Zu.Item=SJ;Zu.Label=TJ;Zu.Dropdown=EJ;Zu.Target=DCe;Zu.Divider=wJ;const[Iot,E2]=Ga("Modal component was not found in tree");var jg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const kot={},s5=ft((e,t)=>{const n=He("ModalBody",kot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(V2e,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});s5.classes=jg;s5.displayName="@mantine/core/ModalBody";const Rot={},o5=ft((e,t)=>{const n=He("ModalCloseButton",Rot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(H2e,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});o5.classes=jg;o5.displayName="@mantine/core/ModalCloseButton";const Dot={},a5=ft((e,t)=>{const n=He("ModalContent",Dot,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=E2(),f=c.scrollAreaComponent||Yrt;return _.jsx(Hrt,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Pe(c.yOffset)} * 2))`},children:u})})});a5.classes=jg;a5.displayName="@mantine/core/ModalContent";const Not={},u5=ft((e,t)=>{const n=He("ModalHeader",Not,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(q2e,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});u5.classes=jg;u5.displayName="@mantine/core/ModalHeader";const Pot={},l5=ft((e,t)=>{const n=He("ModalOverlay",Pot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(W2e,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});l5.classes=jg;l5.displayName="@mantine/core/ModalOverlay";const Oot={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:md("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},$ot=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ii(t),"--modal-size":Wn(n,"modal-size"),"--modal-y-offset":Pe(r),"--modal-x-offset":Pe(i)}}),c5=ft((e,t)=>{const n=He("ModalRoot",Oot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Ft({name:m,classes:jg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$ot});return _.jsx(Iot,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(zrt,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});c5.classes=jg;c5.displayName="@mantine/core/ModalRoot";const Mot={},f5=ft((e,t)=>{const n=He("ModalTitle",Mot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(G2e,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});f5.classes=jg;f5.displayName="@mantine/core/ModalTitle";const Lot={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:md("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ws=ft((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=He("Modal",Lot,e),c=!!n||s;return _.jsxs(c5,{ref:t,radius:u,...l,children:[r&&_.jsx(l5,{...i}),_.jsxs(a5,{radius:u,children:[c&&_.jsxs(u5,{children:[n&&_.jsx(f5,{children:n}),s&&_.jsx(o5,{...o})]}),_.jsx(s5,{children:a})]})]})});Ws.classes=jg;Ws.displayName="@mantine/core/Modal";Ws.Root=c5;Ws.Overlay=l5;Ws.Content=a5;Ws.Body=s5;Ws.Header=u5;Ws.Title=f5;Ws.CloseButton=o5;const[Fot,CJ]=p2(),[Bot,jot]=p2();var d5={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Uot={},zot=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Wn(t):Wn(n,"pg-gap")}}),AJ=ft((e,t)=>{const n=He("PillGroup",Uot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=CJ(),h=(d==null?void 0:d.size)||l||void 0,p=Ft({name:"PillGroup",classes:d5,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zot,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(Bot,{value:{size:h,disabled:c},children:_.jsx(ke,{ref:t,size:h,...p("group"),...f})})});AJ.classes=d5;AJ.displayName="@mantine/core/PillGroup";const Vot={variant:"default"},Hot=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Wn(n,"pill-fz"),"--pill-height":Wn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ii(t)}}),lR=ft((e,t)=>{const n=He("Pill",Vot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,x=jot(),w=CJ(),E=m||(x==null?void 0:x.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",C=Ft({name:"Pill",classes:d5,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Hot,stylesCtx:{size:E}});return _.jsxs(ke,{component:"span",ref:t,variant:T,size:E,...C("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(x==null?void 0:x.disabled)},y],...v,children:[_.jsx("span",{...C("label"),children:c}),f&&_.jsx(Iv,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...C("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var N;I.preventDefault(),I.stopPropagation(),(N=h==null?void 0:h.onMouseDown)==null||N.call(h,I)},onClick:I=>{var N;I.stopPropagation(),d==null||d(),(N=h==null?void 0:h.onClick)==null||N.call(h,I)}})]})});lR.classes=d5;lR.displayName="@mantine/core/Pill";lR.Group=AJ;var NCe={field:"m_45c4369d"};const qot={type:"visible"},IJ=ft((e,t)=>{const n=He("PillsInputField",qot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=CJ(),g=b2(),y=Ft({name:"PillsInputField",classes:NCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(ke,{component:"input",ref:co(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:x=>!d&&x.stopPropagation()})});IJ.classes=NCe;IJ.displayName="@mantine/core/PillsInputField";const Wot={},b$=ft((e,t)=>{const n=He("PillsInput",Wot,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=D.useRef();return _.jsx(Fot,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(vd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});b$.displayName="@mantine/core/PillsInput";b$.Field=IJ;function Got({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(rT(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Yot={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},kJ=ft((e,t)=>{const n=He("MultiSelect",Yot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:x,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:T,filter:C,limit:I,withScrollArea:N,maxDropdownHeight:k,searchValue:P,defaultSearchValue:M,onSearchChange:O,readOnly:B,disabled:q,onFocus:H,onBlur:Y,onPaste:K,radius:J,rightSection:F,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:L,leftSection:V,leftSectionWidth:Q,leftSectionPointerEvents:ue,leftSectionProps:we,inputContainer:ce,inputWrapperOrder:Se,withAsterisk:Oe,labelProps:et,descriptionProps:Re,errorProps:St,wrapperProps:Ze,description:It,label:mt,error:Ce,maxValues:Fe,searchable:st,nothingFoundMessage:yt,withCheckIcon:Dt,checkIconPosition:Je,hidePickedOptions:_e,withErrorStyles:kt,name:Rt,form:Ee,id:$e,clearable:ot,clearButtonProps:xt,hiddenInputProps:jt,placeholder:Un,hiddenInputValuesDivider:dr,required:Tr,mod:xi,renderOption:Tn,onRemove:zn,onClear:hr,scrollAreaProps:gr,...Xo}=n,ts=$u($e),ds=nCe(m),Ps=JQ(ds),Vr=lJ({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{x==null||x(),Vr.resetSelectedOption()}}),{styleProps:hs,rest:{type:Cc,autoComplete:Qo,...Bu}}=F_(Xo),[Br,Ri]=ga({value:c,defaultValue:f,finalValue:[],onChange:d}),[gi,Qs]=ga({value:P,defaultValue:M,finalValue:"",onChange:O}),ai=Ft({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Di,resolvedStyles:me}=UD({props:n,styles:o,classNames:r}),ae=_t=>{h==null||h(_t),_t.key===" "&&!st&&(_t.preventDefault(),Vr.toggleDropdown()),_t.key==="Backspace"&&gi.length===0&&Br.length>0&&(zn==null||zn(Br[Br.length-1]),Ri(Br.slice(0,Br.length-1)))},ge=Br.map((_t,Ut)=>{var dn,Zn;return _.jsx(lR,{withRemoveButton:!B&&!((dn=Ps[_t])!=null&&dn.disabled),onRemove:()=>{Ri(Br.filter(ur=>_t!==ur)),zn==null||zn(_t)},unstyled:a,disabled:q,...ai("pill"),children:((Zn=Ps[_t])==null?void 0:Zn.label)||_t},`${_t}-${Ut}`)});D.useEffect(()=>{w&&Vr.selectFirstOption()},[w,Br]);const Le=ot&&Br.length>0&&!q&&!B&&_.jsx($r.ClearButton,{size:l,...xt,onClear:()=>{hr==null||hr(),Ri([]),Qs("")}}),Me=Got({data:ds,value:Br});return _.jsxs(_.Fragment,{children:[_.jsxs($r,{store:Vr,classNames:Di,styles:me,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:_t=>{E==null||E(_t),Qs(""),Vr.updateSelectedOptionIndex("selected"),Br.includes(Ps[_t].value)?(Ri(Br.filter(Ut=>Ut!==Ps[_t].value)),zn==null||zn(Ps[_t].value)):Br.length<Fe&&Ri([...Br,Ps[_t].value])},...T,children:[_.jsx($r.DropdownTarget,{children:_.jsx(b$,{...hs,__staticSelector:"MultiSelect",classNames:Di,styles:me,unstyled:a,size:l,className:i,style:s,variant:p,disabled:q,radius:J,rightSection:F||Le||_.jsx($r.Chevron,{size:l,error:Ce,unstyled:a}),rightSectionPointerEvents:W||(Le?"all":"none"),rightSectionWidth:U,rightSectionProps:L,leftSection:V,leftSectionWidth:Q,leftSectionPointerEvents:ue,leftSectionProps:we,inputContainer:ce,inputWrapperOrder:Se,withAsterisk:Oe,labelProps:et,descriptionProps:Re,errorProps:St,wrapperProps:Ze,description:It,label:mt,error:Ce,multiline:!0,withErrorStyles:kt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Le?"all":"none"),multiline:!0},pointer:!st,onClick:()=>st?Vr.openDropdown():Vr.toggleDropdown(),"data-expanded":Vr.dropdownOpened||void 0,id:ts,required:Tr,mod:xi,children:_.jsxs(lR.Group,{disabled:q,unstyled:a,...ai("pillsList"),children:[ge,_.jsx($r.EventsTarget,{autoComplete:Qo,children:_.jsx(b$.Field,{...Bu,ref:t,id:ts,placeholder:Un,type:!st&&!Un?"hidden":"visible",...ai("inputField"),unstyled:a,onFocus:_t=>{H==null||H(_t),st&&Vr.openDropdown()},onBlur:_t=>{Y==null||Y(_t),Vr.closeDropdown(),Qs("")},onKeyDown:ae,value:gi,onChange:_t=>{Qs(_t.currentTarget.value),st&&Vr.openDropdown(),w&&Vr.selectFirstOption()},disabled:q,readOnly:B||!st,pointer:!st})})]})})}),_.jsx(xCe,{data:_e?Me:ds,hidden:B||q,filter:C,search:gi,limit:I,hiddenWhenEmpty:!st||!yt||_e&&Me.length===0&&gi.trim().length===0,withScrollArea:N,maxDropdownHeight:k,filterOptions:st,value:Br,checkIconPosition:Je,withCheckIcon:Dt,nothingFoundMessage:yt,unstyled:a,labelId:mt?`${ts}-label`:void 0,"aria-label":mt?void 0:Xo["aria-label"],renderOption:Tn,scrollAreaProps:gr})]}),_.jsx($r.HiddenInput,{name:Rt,valuesDivider:dr,value:Br,form:Ee,disabled:q,...jt})]})});kJ.classes={...vd.classes,...$r.classes};kJ.displayName="@mantine/core/MultiSelect";var PCe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const Kot={},Xot=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Eo(r)}}},h5=To((e,t)=>{const n=He("NavLink",Kot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:x,disableRightSectionRotation:w,noWrap:E,childrenOffset:T,onKeyDown:C,autoContrast:I,mod:N,...k}=n,P=Ft({name:"NavLink",props:n,classes:PCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xot}),[M,O]=ga({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,q=H=>{h==null||h(H),B&&(H.preventDefault(),O(!M))};return _.jsxs(_.Fragment,{children:[_.jsxs(of,{...P("root"),component:"a",ref:t,onClick:q,onKeyDown:H=>{C==null||C(H),H.nativeEvent.code==="Space"&&B&&(H.preventDefault(),O(!M))},unstyled:a,mod:[{disabled:m,active:p,expanded:M},N],...k,children:[g&&_.jsx(ke,{component:"span",...P("section"),mod:{position:"left"},children:g}),_.jsxs(ke,{...P("body"),mod:{"no-wrap":E},children:[_.jsx(ke,{component:"span",...P("label"),children:v}),_.jsx(ke,{component:"span",mod:{active:p},...P("description"),children:x})]}),(B||y)&&_.jsx(ke,{...P("section"),component:"span",mod:{rotate:M&&!w,position:"right"},children:B?y||_.jsx(t5,{...P("chevron")}):y})]}),_.jsx(GF,{in:M,...P("collapse"),children:_.jsx("div",{...P("children"),children:d})})]})});h5.classes=PCe;h5.displayName="@mantine/core/NavLink";var OCe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Qot={withCloseButton:!0},Jot=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ii(t),"--notification-color":n?Mi(n,e):void 0}}),RJ=ft((e,t)=>{const n=He("Notification",Qot,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:x,mod:w,...E}=n,T=Ft({name:"Notification",classes:OCe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:x,varsResolver:Jot});return _.jsxs(ke,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(wc,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(ke,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(Iv,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});RJ.classes=OCe;RJ.displayName="@mantine/core/Notification";function $Ce(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var cR;(function(e){e.event="event",e.props="prop"})(cR||(cR={}));function Vy(){}function Zot(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function fR(e){return!!(e||"").match(/\d/)}function gS(e){return e==null}function eat(e){return typeof e=="number"&&isNaN(e)}function MCe(e){return gS(e)||eat(e)||typeof e=="number"&&!isFinite(e)}function LCe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function tat(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function nat(e,t,n){var r=tat(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function rat(e){var t=D.useRef(e);t.current=e;var n=D.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function DJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function iat(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function FCe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Jde(e,t){return Array(t+1).join(e)}function BCe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Jde("0",Math.abs(o))+i:o>=a?i=i+Jde("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Zde(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=DJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=FCe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Yb(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var jCe=Zot(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),sat=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function oat(e,t,n){return Math.min(Math.max(e,t),n)}function B7(e){return Math.max(e.selectionStart,e.selectionEnd)}function aat(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function uat(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function lat(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function cat(e,t,n,r,i,s,o){o===void 0&&(o=lat);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var x=y===-1||d[y]===-1?0:d[y]+1;return x>v?v:r-x<v-r?x:v}function ehe(e,t,n,r){var i=e.length;if(t=oat(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function fat(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(fR(e[n])||fR(e[n-1]));return t}function UCe(e,t,n,r,i,s){s===void 0&&(s=Vy);var o=rat(function(p,m){var g,y;return MCe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?BCe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=D.useState(function(){return o(gS(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;gS(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return D.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function dat(e){return e.replace(/[^0-9]/g,"")}function hat(e){return e}function pat(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=hat);var a=e.removeFormatting;a===void 0&&(a=dat);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Vy);var h=e.onKeyDown;h===void 0&&(h=Vy);var p=e.onMouseUp;p===void 0&&(p=Vy);var m=e.onFocus;m===void 0&&(m=Vy);var g=e.onBlur;g===void 0&&(g=Vy);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=fat);var x=e.isValidInputCharacter;x===void 0&&(x=fR);var w=e.isCharacterSame,E=$Ce(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=UCe(y,u,!!l,o,a,c),C=T[0],I=C.formattedValue,N=C.numAsString,k=T[1],P=D.useRef(),M=D.useRef({formattedValue:I,numAsString:N}),O=function(Ce,Fe){M.current={formattedValue:Ce.formattedValue,numAsString:Ce.value},k(Ce,Fe)},B=D.useState(!1),q=B[0],H=B[1],Y=D.useRef(null),K=D.useRef({setCaretTimeout:null,focusTimeout:null});D.useEffect(function(){return H(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var J=o,F=function(Ce,Fe){var st=parseFloat(Fe);return{formattedValue:Ce,value:Fe,floatValue:isNaN(st)?void 0:st}},U=function(Ce,Fe,st){Ce.selectionStart===0&&Ce.selectionEnd===Ce.value.length||(Yb(Ce,Fe),K.current.setCaretTimeout=setTimeout(function(){Ce.value===st&&Ce.selectionStart!==Fe&&Yb(Ce,Fe)},0))},W=function(Ce,Fe,st){return ehe(Ce,Fe,v(Ce),st)},L=function(Ce,Fe,st){var yt=v(Fe),Dt=cat(Fe,I,Ce,st,yt,x,w);return Dt=ehe(Fe,Dt,yt),Dt},V=function(Ce){var Fe=Ce.formattedValue;Fe===void 0&&(Fe="");var st=Ce.input,yt=Ce.source,Dt=Ce.event,Je=Ce.numAsString,_e;if(st){var kt=Ce.inputValue||st.value,Rt=B7(st);st.value=Fe,_e=L(kt,Fe,Rt),_e!==void 0&&U(st,_e,Fe)}Fe!==I&&O(F(Fe,Je),{event:Dt,source:yt})};D.useEffect(function(){var Ce=M.current,Fe=Ce.formattedValue,st=Ce.numAsString;(I!==Fe||N!==st)&&O(F(I,N),{event:void 0,source:cR.props})},[I,N]);var Q=Y.current?B7(Y.current):void 0,ue=typeof window<"u"?D.useLayoutEffect:D.useEffect;ue(function(){var Ce=Y.current;if(I!==M.current.formattedValue&&Ce){var Fe=L(M.current.formattedValue,I,Q);Ce.value=I,U(Ce,Fe,I)}},[I]);var we=function(Ce,Fe,st){var yt=Fe.target,Dt=P.current?sat(P.current,yt.selectionEnd):jCe(I,Ce),Je=Object.assign(Object.assign({},Dt),{lastValue:I}),_e=a(Ce,Je),kt=J(_e);if(_e=a(kt,void 0),f&&!f(F(kt,_e))){var Rt=Fe.target,Ee=B7(Rt),$e=L(Ce,I,Ee);return Rt.value=I,U(Rt,$e,I),!1}return V({formattedValue:kt,numAsString:_e,inputValue:Ce,event:Fe,source:st,input:Fe.target}),!0},ce=function(Ce,Fe){Fe===void 0&&(Fe=0);var st=Ce.selectionStart,yt=Ce.selectionEnd;P.current={selectionStart:st,selectionEnd:yt+Fe}},Se=function(Ce){var Fe=Ce.target,st=Fe.value,yt=we(st,Ce,cR.event);yt&&d(Ce),P.current=void 0},Oe=function(Ce){var Fe=Ce.target,st=Ce.key,yt=Fe.selectionStart,Dt=Fe.selectionEnd,Je=Fe.value;Je===void 0&&(Je="");var _e;st==="ArrowLeft"||st==="Backspace"?_e=Math.max(yt-1,0):st==="ArrowRight"?_e=Math.min(yt+1,Je.length):st==="Delete"&&(_e=yt);var kt=0;st==="Delete"&&yt===Dt&&(kt=1);var Rt=st==="ArrowLeft"||st==="ArrowRight";if(_e===void 0||yt!==Dt&&!Rt){h(Ce),ce(Fe,kt);return}var Ee=_e;if(Rt){var $e=st==="ArrowLeft"?"left":"right";Ee=W(Je,_e,$e),Ee!==_e&&Ce.preventDefault()}else st==="Delete"&&!x(Je[_e])?Ee=W(Je,_e,"right"):st==="Backspace"&&!x(Je[_e])&&(Ee=W(Je,_e,"left"));Ee!==_e&&U(Fe,Ee,Je),h(Ce),ce(Fe,kt)},et=function(Ce){var Fe=Ce.target,st=function(){var yt=Fe.selectionStart,Dt=Fe.selectionEnd,Je=Fe.value;if(Je===void 0&&(Je=""),yt===Dt){var _e=W(Je,yt);_e!==yt&&U(Fe,_e,Je)}};st(),requestAnimationFrame(function(){st()}),p(Ce),ce(Fe)},Re=function(Ce){Ce.persist&&Ce.persist();var Fe=Ce.target,st=Ce.currentTarget;Y.current=Fe,K.current.focusTimeout=setTimeout(function(){var yt=Fe.selectionStart,Dt=Fe.selectionEnd,Je=Fe.value;Je===void 0&&(Je="");var _e=W(Je,yt);_e!==yt&&!(yt===0&&Dt===Je.length)&&U(Fe,_e,Je),m(Object.assign(Object.assign({},Ce),{currentTarget:st}))},0)},St=function(Ce){Y.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),g(Ce)},Ze=q&&aat()?"numeric":void 0,It=Object.assign({inputMode:Ze},E,{type:t,value:I,onChange:Se,onKeyDown:Oe,onMouseUp:et,onFocus:Re,onBlur:St});if(n==="text")return i?ni.createElement(ni.Fragment,null,i(I,E)||null):ni.createElement("span",Object.assign({},E,{ref:s}),I);if(r){var mt=r;return ni.createElement(mt,Object.assign({},It,{ref:s}))}return ni.createElement("input",Object.assign({},It,{ref:s}))}function the(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=p5(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=DJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=FCe(p,n,!!r)),l&&(h=nat(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function p5(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function mat(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function gat(e,t){return new RegExp("(^-)|[0-9]|"+LCe(e),"g")}function yat(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function vat(e,t,n){var r;t===void 0&&(t=uat(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=p5(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(fR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(Y,K,J){var F=!1,U=!1;s.startsWith("-")?F=!1:Y.startsWith("--")?(F=!1,U=!0):o.startsWith("-")&&Y.length===o.length?F=!1:Y[0]==="-"&&(F=!0);var W=F?1:0;return U&&(W=2),W&&(Y=Y.substring(W),K-=W,J-=W),{value:Y,start:K,end:J,hasNegation:F}},v=y(e,c,f),x=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,T=w.end,C=w.value,I=e.substring(c,f);e.length&&C.length&&(E>C.length-o.length||T<s.length)&&!(I&&o.startsWith(I))&&(e=C);var N=0;e.startsWith(s)?N+=s.length:c<s.length&&(N=c),e=e.substring(N),f-=N;var k=e.length,P=e.length-o.length;e.endsWith(o)?k=P:(f>P||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=mat(x?"-"+e:e,i),e=(e.match(gat(p))||[]).join("");var M=e.indexOf(p);e=e.replace(new RegExp(LCe(p),"g"),function(Y,K){return K===M?".":""});var O=DJ(e,i),B=O.beforeDecimal,q=O.afterDecimal,H=O.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(q)&&(e=H?"-":""),e}function bat(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function xat(e){var t=p5(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function _at(e){e=xat(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Vy);var s=e.onBlur;s===void 0&&(s=Vy);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=$Ce(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=p5(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(H){return the(H,e)},x=function(H,Y){return vat(H,Y,e)},w=gS(f)?c:f,E=d??yat(w,l,t);gS(f)?gS(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(H){return MCe(H)?H:(typeof H=="number"&&(H=BCe(H)),E&&typeof a=="number"?Zde(H,a,!!u):H)},C=UCe(T(f),T(c),!!E,v,x,h),I=C[0],N=I.numAsString,k=I.formattedValue,P=C[1],M=function(H){var Y=H.target,K=H.key,J=Y.selectionStart,F=Y.selectionEnd,U=Y.value;if(U===void 0&&(U=""),(K==="Backspace"||K==="Delete")&&F<l.length){H.preventDefault();return}if(J!==F){i(H);return}K==="Backspace"&&U[0]==="-"&&J===l.length+1&&n&&Yb(Y,1),a&&u&&(K==="Backspace"&&U[J-1]===g?(Yb(Y,J-1),H.preventDefault()):K==="Delete"&&U[J]===g&&H.preventDefault()),y!=null&&y.includes(K)&&U[J]===g&&Yb(Y,J+1);var W=o===!0?",":o;K==="Backspace"&&U[J-1]===W&&Yb(Y,J-1),K==="Delete"&&U[J]===W&&Yb(Y,J+1),i(H)},O=function(H){var Y=N;if(Y.match(/\d/g)||(Y=""),r||(Y=iat(Y)),u&&a&&(Y=Zde(Y,a,u)),Y!==N){var K=the(Y,e);P({formattedValue:K,value:Y,floatValue:parseFloat(Y)},{event:H,source:cR.event})}s(H)},B=function(H){return H===g?!0:fR(H)},q=function(H){var Y=H.currentValue,K=H.lastValue,J=H.formattedValue,F=H.currentValueIndex,U=H.formattedValueIndex,W=Y[F],L=J[U],V=jCe(K,Y),Q=V.to;return F>=Q.start&&F<Q.end&&y&&y.includes(W)&&L===g?!0:W===L};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:q,onValueChange:P,format:v,removeFormatting:x,getCaretBoundary:function(H){return bat(H,e)},onKeyDown:M,onBlur:O})}function wat(e){var t=_at(e);return ni.createElement(pat,Object.assign({},t))}function nhe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Dq={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Eat=/^(0\.0*|-0(\.0*)?)$/,Sat=/^-?0\d+(\.\d+)?\.?$/;function Tat(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function rhe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const Cat={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Aat=(e,{size:t})=>({controls:{"--ni-chevron-size":Wn(t,"ni-chevron-size")}}),NJ=ft((e,t)=>{const n=He("NumberInput",Cat,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:x,allowDecimal:w,decimalScale:E,onKeyDown:T,onKeyDownCapture:C,handlersRef:I,startValue:N,disabled:k,rightSectionPointerEvents:P,allowNegative:M,readOnly:O,size:B,rightSectionWidth:q,stepHoldInterval:H,stepHoldDelay:Y,allowLeadingZeros:K,withKeyboardEvents:J,trimLeadingZeroesOnBlur:F,...U}=n,W=Ft({name:"NumberInput",classes:Dq,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:Aat}),{resolvedClassNames:L,resolvedStyles:V}=UD({classNames:i,styles:s,props:n}),[Q,ue]=ga({value:c,defaultValue:f,onChange:u}),we=Y!==void 0&&H!==void 0,ce=D.useRef(null),Se=D.useRef(null),Oe=D.useRef(0),et=(_e,kt)=>{kt.source==="event"&&ue(Tat(_e.floatValue)&&!Eat.test(_e.value)&&!(K&&Sat.test(_e.value))?_e.floatValue:_e.value),l==null||l(_e,kt)},Re=_e=>{const kt=String(_e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return kt?Math.max(0,(kt[1]?kt[1].length:0)-(kt[2]?+kt[2]:0)):0},St=_e=>{ce.current&&typeof _e<"u"&&ce.current.setSelectionRange(_e,_e)},Ze=D.useRef();Ze.current=()=>{let _e;const kt=Re(Q),Rt=Re(p),Ee=Math.max(kt,Rt),$e=10**Ee;if(typeof Q!="number"||Number.isNaN(Q))_e=$0(N,h,d);else if(d!==void 0){const xt=(Math.round(Q*$e)+Math.round(p*$e))/$e;_e=xt<=d?xt:d}else _e=(Math.round(Q*$e)+Math.round(p*$e))/$e;const ot=_e.toFixed(Ee);ue(parseFloat(ot)),l==null||l({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var xt;return St((xt=ce.current)==null?void 0:xt.value.length)},0)};const It=D.useRef();It.current=()=>{let _e;const kt=h!==void 0?h:M?Number.MIN_SAFE_INTEGER:0,Rt=Re(Q),Ee=Re(p),$e=Math.max(Rt,Ee),ot=10**$e;if(typeof Q!="number"||Number.isNaN(Q))_e=$0(N,kt,d);else{const jt=(Math.round(Q*ot)-Math.round(p*ot))/ot;_e=kt!==void 0&&jt<kt?kt:jt}const xt=_e.toFixed($e);ue(parseFloat(xt)),l==null||l({floatValue:parseFloat(xt),formattedValue:xt,value:xt},{source:"decrement"}),setTimeout(()=>{var jt;return St((jt=ce.current)==null?void 0:jt.value.length)},0)};const mt=_e=>{T==null||T(_e),!(O||!J)&&(_e.key==="ArrowUp"&&(_e.preventDefault(),Ze.current()),_e.key==="ArrowDown"&&(_e.preventDefault(),It.current()))},Ce=_e=>{if(C==null||C(_e),_e.key==="Backspace"){const kt=ce.current;kt.selectionStart===0&&kt.selectionStart===kt.selectionEnd&&(_e.preventDefault(),window.setTimeout(()=>St(0),0))}};lQ(I,{increment:Ze.current,decrement:It.current});const Fe=_e=>{_e?Ze.current():It.current(),Oe.current+=1},st=_e=>{if(Fe(_e),we){const kt=typeof H=="number"?H:H(Oe.current);Se.current=window.setTimeout(()=>st(_e),kt)}},yt=(_e,kt)=>{var Rt;_e.preventDefault(),(Rt=ce.current)==null||Rt.focus(),Fe(kt),we&&(Se.current=window.setTimeout(()=>st(kt),Y))},Dt=()=>{Se.current&&window.clearTimeout(Se.current),Se.current=null,Oe.current=0},Je=_.jsxs("div",{...W("controls"),children:[_.jsx(of,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Q=="number"&&d!==void 0&&Q>=d,mod:{direction:"up"},onMouseDown:_e=>_e.preventDefault(),onPointerDown:_e=>{yt(_e,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(nhe,{direction:"up"})}),_.jsx(of,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Q=="number"&&h!==void 0&&Q<=h,mod:{direction:"down"},onMouseDown:_e=>_e.preventDefault(),onPointerDown:_e=>{yt(_e,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(nhe,{direction:"down"})})]});return _.jsx(vd,{component:wat,allowNegative:M,className:oo(Dq.root,r),size:B,...U,readOnly:O,disabled:k,value:Q,getInputRef:co(t,ce),onValueChange:et,rightSection:m||O?g:g||Je,classNames:L,styles:V,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:mt,onKeyDownCapture:Ce,rightSectionPointerEvents:P??(k?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:K,onBlur:_e=>{if(x==null||x(_e),v==="blur"&&typeof Q=="number"&&$0(Q,h,d)!==Q&&ue($0(Q,h,d)),F&&typeof Q=="string"){const kt=Q.replace(/^0+/,""),Rt=parseFloat(kt);ue(Number.isNaN(Rt)?kt:Rt)}},isAllowed:_e=>v==="strict"?y?y(_e)&&rhe(_e.floatValue,h,d):rhe(_e.floatValue,h,d):y?y(_e):!0})});NJ.classes={...vd.classes,...Dq};NJ.displayName="@mantine/core/NumberInput";const[Iat,zCe]=Ga("Progress.Root component was not found in tree");var KD={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const kat={},PJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=He("ProgressLabel",kat,e),u=zCe();return _.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});PJ.classes=KD;PJ.displayName="@mantine/core/ProgressLabel";const Rat={},Dat=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Wn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ii(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),m5=ft((e,t)=>{const n=He("ProgressRoot",Rat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Ft({name:"Progress",classes:KD,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dat});return _.jsx(Iat,{value:{getStyles:d,autoContrast:l},children:_.jsx(ke,{ref:t,...d("root"),...f})})});m5.classes=KD;m5.displayName="@mantine/core/ProgressRoot";const Nat={withAria:!0},g5=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=He("ProgressSection",Nat,e),p=zCe(),m=fo(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(ke,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Mi(l,m),"--progress-label-color":m2(p.autoContrast,m)?Av({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});g5.classes=KD;g5.displayName="@mantine/core/ProgressSection";const Pat={},S2=ft((e,t)=>{const n=He("Progress",Pat,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=UD({classNames:i,styles:s,props:n});return _.jsx(m5,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(g5,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});S2.classes=KD;S2.displayName="@mantine/core/Progress";S2.Section=g5;S2.Root=m5;S2.Label=PJ;const[Oat,VCe]=p2(),[$at,Mat]=p2();var HCe={card:"m_9dc8ae12"};const Lat={withBorder:!0},Fat=(e,{radius:t})=>({card:{"--card-radius":Ii(t)}}),OJ=ft((e,t)=>{const n=He("RadioCard",Lat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Ft({name:"RadioCard",classes:HCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fat,rootSelector:"card"}),{dir:v}=Mg(),x=VCe(),w=typeof l=="boolean"?l:(x==null?void 0:x.value)===d||!1,E=p||(x==null?void 0:x.name),T=C=>{if(m==null||m(C),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(C.nativeEvent.code)){C.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),N=I.findIndex(M=>M===C.target),k=N+1>=I.length?0:N+1,P=N-1<0?I.length-1:N-1;C.nativeEvent.code==="ArrowDown"&&(I[k].focus(),I[k].click()),C.nativeEvent.code==="ArrowUp"&&(I[P].focus(),I[P].click()),C.nativeEvent.code==="ArrowLeft"&&(I[v==="ltr"?P:k].focus(),I[v==="ltr"?P:k].click()),C.nativeEvent.code==="ArrowRight"&&(I[v==="ltr"?k:P].focus(),I[v==="ltr"?k:P].click())}};return _.jsx($at,{value:{checked:w},children:_.jsx(of,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:C=>{h==null||h(C),x==null||x.onChange(d||"")},onKeyDown:T})})});OJ.displayName="@mantine/core/RadioCard";OJ.classes=HCe;const Bat={},$J=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=He("RadioGroup",Bat,e),f=$u(u),[d,h]=ga({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(Oat,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(Ts.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(fJ,{role:"radiogroup",children:a})})})});$J.classes=Ts.Wrapper.classes;$J.displayName="@mantine/core/RadioGroup";function qCe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Pe(e),height:Pe(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var WCe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const jat={icon:qCe},Uat=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Im({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Wn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ii(t),"--radio-color":s==="outline"?u:Mi(n,e),"--radio-icon-size":Wn(r,"radio-icon-size"),"--radio-icon-color":i?Mi(i,e):m2(o,e)?Av({color:n,theme:e,autoContrast:o}):void 0}}},MJ=ft((e,t)=>{const n=He("RadioIndicator",jat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,x=l,w=Ft({name:"RadioIndicator",classes:WCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uat,rootSelector:"indicator"}),E=Mat(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(ke,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(x,{...w("icon")})})});MJ.displayName="@mantine/core/RadioIndicator";MJ.classes=WCe;var GCe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const zat={labelPosition:"right"},Vat=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Im({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Wn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ii(n),"--radio-color":s==="outline"?u:Mi(r,e),"--radio-icon-color":i?Mi(i,e):m2(o,e)?Av({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Wn(t,"radio-icon-size")}}},Wp=ft((e,t)=>{const n=He("Radio",zat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:x,icon:w=qCe,rootRef:E,iconColor:T,onChange:C,mod:I,...N}=n,k=Ft({name:"Radio",classes:GCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vat}),P=VCe(),M=(P==null?void 0:P.size)??c,O=n.size?c:M,{styleProps:B,rest:q}=F_(N),H=$u(l),Y=P?{checked:P.value===q.value,name:q.name??P.name,onChange:K=>{P.onChange(K),C==null||C(K)}}:{};return _.jsx(n5,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:H,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":Y.checked||void 0,variant:y,ref:E,mod:I,...B,...x,children:_.jsxs(ke,{...k("inner"),mod:{"label-position":d},children:[_.jsx(ke,{...k("radio",{focusable:!0,variant:y}),onChange:C,...q,...Y,component:"input",mod:{error:!!p},ref:t,id:H,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});Wp.classes=GCe;Wp.displayName="@mantine/core/Radio";Wp.Group=$J;Wp.Card=OJ;Wp.Indicator=MJ;const Hat={duration:100,transition:"fade"};function qat(e,t){return{...Hat,...t,...e}}function Wat({offset:e,position:t}){const[n,r]=D.useState(!1),i=D.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=OQ({placement:t,middleware:[RQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=D.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return D.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=G0(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var y5={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Gat={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:md("popover")},Yat=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ii(t),"--tooltip-bg":n?Mi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),LJ=ft((e,t)=>{const n=He("TooltipFloating",Gat,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:x,vars:w,portalProps:E,...T}=n,C=fo(),I=Ft({name:"TooltipFloating",props:n,classes:y5,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:Yat}),{handleMouseMove:N,x:k,y:P,opened:M,boundaryRef:O,floating:B,setOpened:q}=Wat({offset:p,position:m});if(!Tv(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const H=co(O,r.ref,t),Y=J=>{var F,U;(U=(F=r.props).onMouseEnter)==null||U.call(F,J),N(J),q(!0)},K=J=>{var F,U;(U=(F=r.props).onMouseLeave)==null||U.call(F,J),q(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(j_,{...E,withinPortal:s,children:_.jsx(ke,{...T,...I("tooltip",{style:{...gQ(o,C),zIndex:y,display:!v&&M?"block":"none",top:(P&&Math.round(P))??"",left:(k&&Math.round(k))??""}}),variant:x,ref:B,mod:{multiline:g},children:h})}),D.cloneElement(r,{...r.props,[i]:H,onMouseEnter:Y,onMouseLeave:K})]})});LJ.classes=y5;LJ.displayName="@mantine/core/TooltipFloating";const YCe=D.createContext(!1),Kat=YCe.Provider,Xat=()=>D.useContext(YCe),Qat={openDelay:0,closeDelay:0};function KCe(e){const{openDelay:t,closeDelay:n,children:r}=He("TooltipGroup",Qat,e);return _.jsx(Kat,{value:!0,children:_.jsx(ert,{delay:{open:t,close:n},children:r})})}KCe.displayName="@mantine/core/TooltipGroup";function Jat(e){var T,C,I;const[t,n]=D.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Xat(),o=$u(),{delay:a,currentId:u,setCurrentId:l}=R2e(),c=D.useCallback(N=>{n(N),N&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=OQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[T2e(e.offset),RQ({padding:8}),Cq(),C2e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[Aq()]:[]]}),{getReferenceProps:x,getFloatingProps:w}=art([Znt(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((C=e.events)!=null&&C.touch)}),ort(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),lrt(h,{role:"tooltip"}),irt(h,{enabled:typeof e.opened>"u"}),trt(h,{id:o})]);L2e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),om(()=>{var N;(N=e.onPositionChange)==null||N.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:x,isGroupPhase:E,opened:i,placement:g}}const ihe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:md("popover"),positionDependencies:[]},Zat=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ii(t),"--tooltip-bg":n?Mi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),qi=ft((e,t)=>{const n=He("Tooltip",ihe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:x,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:C,offset:I,transitionProps:N,multiline:k,events:P,zIndex:M,disabled:O,positionDependencies:B,onClick:q,onMouseEnter:H,onMouseLeave:Y,inline:K,variant:J,keepMounted:F,vars:U,portalProps:W,mod:L,floatingStrategy:V,...Q}=He("Tooltip",ihe,n),{dir:ue}=Mg(),we=D.useRef(null),ce=Jat({position:D2e(ue,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:P,arrowRef:we,arrowOffset:E,offset:typeof I=="number"?I+(x?w/2:0):I,positionDependencies:[...B,r],inline:K,strategy:V}),Se=Ft({name:"Tooltip",props:n,classes:y5,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:Zat});if(!Tv(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Oe=co(ce.reference,r.ref,t),et=qat(N,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(j_,{...W,withinPortal:f,children:_.jsx(Fg,{...et,keepMounted:F,mounted:!O&&!!ce.opened,duration:ce.isGroupPhase?10:et.duration,children:Re=>_.jsxs(ke,{...Q,variant:J,mod:[{multiline:k},L],...ce.getFloatingProps({ref:ce.floating,className:Se("tooltip").className,style:{...Se("tooltip").style,...Re,zIndex:M,top:ce.y??0,left:ce.x??0}}),children:[o,_.jsx($Q,{ref:we,arrowX:ce.arrowX,arrowY:ce.arrowY,visible:x,position:ce.placement,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:C,...Se("arrow")})]})})}),D.cloneElement(r,ce.getReferenceProps({onClick:q,onMouseEnter:H,onMouseLeave:Y,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Oe,className:oo(v,r.props.className),...r.props}))]})});qi.classes=y5;qi.displayName="@mantine/core/Tooltip";qi.Floating=LJ;qi.Group=KCe;var XCe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const eut={withItemsBorders:!0},tut=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ii(t),"--sc-color":n?Mi(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Wn(i,"sc-padding"),"--sc-font-size":ll(i)}}),v5=ft((e,t)=>{var ue,we;const n=He("SegmentedControl",eut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:x,color:w,transitionDuration:E,transitionTimingFunction:T,variant:C,autoContrast:I,withItemsBorders:N,mod:k,...P}=n,M=Ft({name:"SegmentedControl",props:n,classes:XCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tut}),O=fo(),B=l.map(ce=>typeof ce=="string"?{label:ce,value:ce}:ce),q=oet(),[H,Y]=D.useState(null),[K,J]=D.useState({}),F=(ce,Se)=>{K[Se]=ce,J(K)},[U,W]=ga({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ue=B.find(ce=>!ce.disabled))==null?void 0:ue.value)??((we=l[0])==null?void 0:we.value)??null:null,onChange:d}),L=$u(p),V=B.map(ce=>D.createElement(ke,{...M("control"),mod:{active:U===ce.value,orientation:v},key:ce.value},D.createElement("input",{...M("input"),disabled:m||ce.disabled,type:"radio",name:L,value:ce.value,id:`${L}-${ce.value}`,checked:U===ce.value,onChange:()=>!g&&W(ce.value),"data-focus-ring":O.focusRing,key:`${ce.value}-input`}),D.createElement(ke,{component:"label",...M("label"),mod:{active:U===ce.value&&!(m||ce.disabled),disabled:m||ce.disabled,"read-only":g},htmlFor:`${L}-${ce.value}`,ref:Se=>F(Se,ce.value),__vars:{"--sc-label-color":w!==void 0?Av({color:w,theme:O,autoContrast:I}):void 0},key:`${ce.value}-label`},_.jsx("span",{...M("innerLabel"),children:ce.label})))),Q=co(t,ce=>Y(ce));return l.length===0?null:_.jsxs(ke,{...M("root"),variant:C,size:h,ref:Q,mod:[{"full-width":y,orientation:v,initialized:q,"with-items-borders":N},k],...P,role:"radiogroup",children:[typeof U=="string"&&_.jsx(jQ,{target:K[U],parent:H,component:"span",transitionDuration:"var(--sc-transition-duration)",...M("indicator")}),V]})});v5.classes=XCe;v5.displayName="@mantine/core/SegmentedControl";const nut={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},T2=ft((e,t)=>{const n=He("Select",nut,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:x,comboboxProps:w,readOnly:E,disabled:T,filter:C,limit:I,withScrollArea:N,maxDropdownHeight:k,size:P,searchable:M,rightSection:O,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,name:Y,form:K,searchValue:J,defaultSearchValue:F,onSearchChange:U,allowDeselect:W,error:L,rightSectionPointerEvents:V,id:Q,clearable:ue,clearButtonProps:we,hiddenInputProps:ce,renderOption:Se,onClear:Oe,autoComplete:et,scrollAreaProps:Re,...St}=n,Ze=D.useMemo(()=>nCe(m),[m]),It=D.useMemo(()=>JQ(Ze),[Ze]),mt=$u(Q),[Ce,Fe,st]=ga({value:g,defaultValue:y,finalValue:null,onChange:p}),yt=typeof Ce=="string"?It[Ce]:void 0,[Dt,Je]=ga({value:J,defaultValue:F,finalValue:yt?yt.label:"",onChange:U}),_e=lJ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),_e.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),_e.resetSelectedOption()}}),{resolvedClassNames:kt,resolvedStyles:Rt}=UD({props:n,styles:i,classNames:r});D.useEffect(()=>{v&&_e.selectFirstOption()},[v,Ce]),D.useEffect(()=>{g===null&&Je(""),typeof g=="string"&&yt&&Je(yt.label)},[g,yt]);const Ee=ue&&!!Ce&&!T&&!E&&_.jsx($r.ClearButton,{size:P,...we,onClear:()=>{Fe(null,null),Je(""),Oe==null||Oe()}});return _.jsxs(_.Fragment,{children:[_.jsxs($r,{store:_e,__staticSelector:"Select",classNames:kt,styles:Rt,unstyled:s,readOnly:E,onOptionSubmit:$e=>{x==null||x($e);const ot=W&&It[$e].value===Ce?null:It[$e],xt=ot?ot.value:null;Fe(xt,ot),!st&&Je(typeof xt=="string"&&(ot==null?void 0:ot.label)||""),_e.closeDropdown()},size:P,...w,children:[_.jsx($r.Target,{targetType:M?"input":"button",autoComplete:et,children:_.jsx(vd,{id:mt,ref:t,rightSection:O||Ee||_.jsx($r.Chevron,{size:P,error:L,unstyled:s}),rightSectionPointerEvents:V||(Ee?"all":"none"),...St,size:P,__staticSelector:"Select",disabled:T,readOnly:E||!M,value:Dt,onChange:$e=>{Je($e.currentTarget.value),_e.openDropdown(),v&&_e.selectFirstOption()},onFocus:$e=>{M&&_e.openDropdown(),f==null||f($e)},onBlur:$e=>{var ot;M&&_e.closeDropdown(),Je(Ce!=null&&((ot=It[Ce])==null?void 0:ot.label)||""),d==null||d($e)},onClick:$e=>{M?_e.openDropdown():_e.toggleDropdown(),h==null||h($e)},classNames:kt,styles:Rt,unstyled:s,pointer:!M,error:L})}),_.jsx(xCe,{data:Ze,hidden:E||T,filter:C,search:Dt,limit:I,hiddenWhenEmpty:!M||!H,withScrollArea:N,maxDropdownHeight:k,filterOptions:M&&(yt==null?void 0:yt.label)!==Dt,value:Ce,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,unstyled:s,labelId:St.label?`${mt}-label`:void 0,"aria-label":St.label?void 0:St["aria-label"],renderOption:Se,scrollAreaProps:Re})]}),_.jsx($r.HiddenInput,{value:Ce,name:Y,form:K,disabled:T,...ce})]})});T2.classes={...vd.classes,...$r.classes};T2.displayName="@mantine/core/Select";function rut({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=fo(),s=t===void 0?e:t,o=Sv({"--sg-spacing-x":Eo(dh(e)),"--sg-spacing-y":Eo(dh(s)),"--sg-cols":(c=dh(n))==null?void 0:c.toString()}),a=Gi(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Eo(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Eo(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=sR(Gi(a),i).filter(f=>Gi(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(L_,{styles:o,media:l,selector:r})}function j7(e){return typeof e=="object"&&e!==null?Gi(e):[]}function iut(e){return e.sort((t,n)=>iR(t)-iR(n))}function sut({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...j7(e),...j7(t),...j7(n)]));return iut(r)}function out({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Sv({"--sg-spacing-x":Eo(dh(e)),"--sg-spacing-y":Eo(dh(i)),"--sg-cols":(l=dh(n))==null?void 0:l.toString()}),o=sut({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Eo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Eo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(L_,{styles:s,container:u,selector:r})}var QCe={container:"m_925c2d2c",root:"m_2415a157"};const aut={cols:1,spacing:"md",type:"media"},FJ=ft((e,t)=>{const n=He("SimpleGrid",aut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Ft({name:"SimpleGrid",classes:QCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=zD();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(out,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(ke,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(rut,{...n,selector:`.${m}`}),_.jsx(ke,{ref:t,...p("root",{className:m}),...h})]})});FJ.classes=QCe;FJ.displayName="@mantine/core/SimpleGrid";const[JCe,b5]=Ga("SliderProvider was not found in tree"),BJ=D.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=b5();return _.jsx(ke,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});BJ.displayName="@mantine/core/SliderRoot";const x$=D.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=b5(),[x,w]=D.useState(!1),E=l||s||x||h&&p;return _.jsxs(ke,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(Fg,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});x$.displayName="@mantine/core/SliderThumb";function _$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function uut({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function ZCe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=b5();if(!e)return null;const u=e.map((l,c)=>D.createElement(ke,{...a("markWrapper"),__vars:{"--mark-offset":`${_$({value:l.value,min:t,max:n})}%`},key:c},_.jsx(ke,{...a("mark"),mod:{filled:uut({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}ZCe.displayName="@mantine/core/SliderMarks";function jJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=b5();return _.jsx(_.Fragment,{children:_.jsx(ke,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(ke,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(ke,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(ZCe,{...a,offset:i,disabled:r,inverted:s})]})})})}jJ.displayName="@mantine/core/SliderTrack";function Nq({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function jf(e,t){return parseFloat(e.toFixed(t))}function eAe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var x5={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const lut={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},cut=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wn(t,"slider-size"),"--slider-color":n?Mi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ii(i),"--slider-thumb-size":r!==void 0?Pe(r):"calc(var(--slider-size) * 2)"}}),_5=ft((e,t)=>{const n=He("Slider",lut,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:x,showLabelOnHover:w,thumbChildren:E,disabled:T,unstyled:C,scale:I,inverted:N,className:k,style:P,vars:M,hiddenInputProps:O,...B}=n,q=Ft({name:"Slider",props:n,classes:x5,classNames:r,className:k,styles:i,style:P,vars:M,varsResolver:cut,unstyled:C}),{dir:H}=Mg(),[Y,K]=D.useState(!1),[J,F]=ga({value:typeof s=="number"?$0(s,l,c):s,defaultValue:typeof h=="number"?$0(h,l,c):h,finalValue:$0(0,l,c),onChange:o}),U=D.useRef(J),W=D.useRef(),L=D.useRef(),V=_$({value:J,min:l,max:c}),Q=I(J),ue=typeof g=="function"?g(Q):g,we=d??eAe(f),ce=D.useCallback(({x:Re})=>{if(!T){const St=Nq({value:Re,min:l,max:c,step:f,precision:we});F(St),U.current=St}},[T,l,c,f,we,F]),{ref:Se,active:Oe}=VTe(ce,{onScrubEnd:()=>a==null?void 0:a(U.current)},H),et=Re=>{var St,Ze,It,mt,Ce,Fe;if(!T)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(St=L.current)==null||St.focus();const st=jf(Math.min(Math.max(J+f,l),c),we);F(st),a==null||a(st);break}case"ArrowRight":{Re.preventDefault(),(Ze=L.current)==null||Ze.focus();const st=jf(Math.min(Math.max(H==="rtl"?J-f:J+f,l),c),we);F(st),a==null||a(st);break}case"ArrowDown":{Re.preventDefault(),(It=L.current)==null||It.focus();const st=jf(Math.min(Math.max(J-f,l),c),we);F(st),a==null||a(st);break}case"ArrowLeft":{Re.preventDefault(),(mt=L.current)==null||mt.focus();const st=jf(Math.min(Math.max(H==="rtl"?J+f:J-f,l),c),we);F(st),a==null||a(st);break}case"Home":{Re.preventDefault(),(Ce=L.current)==null||Ce.focus(),F(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Fe=L.current)==null||Fe.focus(),F(c),a==null||a(c);break}}};return _.jsx(JCe,{value:{getStyles:q},children:_.jsxs(BJ,{...B,ref:co(t,W),onKeyDownCapture:et,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:T,children:[_.jsx(jJ,{inverted:N,offset:0,filled:V,marks:m,min:l,max:c,value:Q,disabled:T,containerProps:{ref:Se,onMouseEnter:w?()=>K(!0):void 0,onMouseLeave:w?()=>K(!1):void 0},children:_.jsx(x$,{max:c,min:l,value:Q,position:V,dragging:Oe,label:ue,ref:L,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:x,showLabelOnHover:w,isHovered:Y,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:Q,...O})]})})});_5.classes=x5;_5.displayName="@mantine/core/Slider";function fut(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const dut=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wn(t,"slider-size"),"--slider-color":n?Mi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ii(i),"--slider-thumb-size":r!==void 0?Pe(r):"calc(var(--slider-size) * 2)"}}),hut={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},iT=ft((e,t)=>{const n=He("RangeSlider",hut,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:x,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:C,thumbChildren:I,disabled:N,unstyled:k,scale:P,inverted:M,className:O,style:B,vars:q,hiddenInputProps:H,...Y}=n,K=Ft({name:"Slider",props:n,classes:x5,classNames:r,className:O,styles:i,style:B,vars:q,varsResolver:dut,unstyled:k}),{dir:J}=Mg(),[F,U]=D.useState(-1),[W,L]=D.useState(!1),[V,Q]=ga({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ue=D.useRef(V),we=D.useRef([]),ce=D.useRef(void 0),Se=[_$({value:V[0],min:l,max:c}),_$({value:V[1],min:l,max:c})],Oe=p??eAe(h),et=Je=>{Q(Je),ue.current=Je};D.useEffect(()=>{Array.isArray(s)&&(ue.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(Je,_e,kt)=>{const Rt=[...ue.current];Rt[_e]=Je,_e===0&&(Je>Rt[1]-(f-1e-9)&&(Rt[1]=Math.min(Je+f,c)),Je>(c-(f-1e-9)||l)&&(Rt[_e]=ue.current[_e]),Rt[1]-Je>d&&(Rt[1]=Je+d)),_e===1&&(Je<Rt[0]+f&&(Rt[0]=Math.max(Je-f,l)),Je<Rt[0]+f&&(Rt[_e]=ue.current[_e]),Je-Rt[0]>d&&(Rt[0]=Je-d)),Rt[0]=jf(Rt[0],Oe),Rt[1]=jf(Rt[1],Oe),et(Rt),kt&&(a==null||a(ue.current))},St=Je=>{if(!N){const _e=Nq({value:Je,min:l,max:c,step:h,precision:Oe});Re(_e,ce.current,!1)}},{ref:Ze,active:It}=VTe(({x:Je})=>St(Je),{onScrubEnd:()=>a==null?void 0:a(ue.current)},J);function mt(Je){ce.current=Je}const Ce=Je=>{Ze.current.focus();const _e=Ze.current.getBoundingClientRect(),kt=fut(Je.nativeEvent),Rt=Nq({value:kt-_e.left,max:c,min:l,step:h,containerWidth:_e.width}),Ee=Math.abs(V[0]-Rt)>Math.abs(V[1]-Rt)?1:0,$e=J==="ltr"?Ee:Ee===1?0:1;ce.current=$e},Fe=()=>F!==1&&F!==0?(U(0),0):F,st=Je=>{if(!N)switch(Je.key){case"ArrowUp":{Je.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(ue.current[_e]+h,l),c),Oe),_e,!0);break}case"ArrowRight":{Je.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(J==="rtl"?ue.current[_e]-h:ue.current[_e]+h,l),c),Oe),_e,!0);break}case"ArrowDown":{Je.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(ue.current[_e]-h,l),c),Oe),_e,!0);break}case"ArrowLeft":{Je.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(J==="rtl"?ue.current[_e]+h:ue.current[_e]-h,l),c),Oe),_e,!0);break}}},yt={max:c,min:l,size:u,labelTransitionProps:x,labelAlwaysOn:w,onBlur:()=>U(-1)},Dt=Array.isArray(I);return _.jsx(JCe,{value:{getStyles:K},children:_.jsxs(BJ,{...Y,size:u,ref:t,disabled:N,children:[_.jsxs(jJ,{offset:Se[0],marksOffset:V[0],filled:Se[1]-Se[0],marks:y,inverted:M,min:l,max:c,value:V[1],disabled:N,containerProps:{ref:Ze,onMouseEnter:C?()=>L(!0):void 0,onMouseLeave:C?()=>L(!1):void 0,onTouchStartCapture:Ce,onTouchEndCapture:()=>{ce.current=-1},onMouseDownCapture:Ce,onMouseUpCapture:()=>{ce.current=-1},onKeyDownCapture:st},children:[_.jsx(x$,{...yt,value:P(V[0]),position:Se[0],dragging:It,label:typeof v=="function"?v(jf(P(V[0]),Oe)):v,ref:Je=>{we.current[0]=Je},thumbLabel:E,onMouseDown:()=>mt(0),onFocus:()=>U(0),showLabelOnHover:C,isHovered:W,disabled:N,children:Dt?I[0]:I}),_.jsx(x$,{...yt,thumbLabel:T,value:P(V[1]),position:Se[1],dragging:It,label:typeof v=="function"?v(jf(P(V[1]),Oe)):v,ref:Je=>{we.current[1]=Je},onMouseDown:()=>mt(1),onFocus:()=>U(1),showLabelOnHover:C,isHovered:W,disabled:N,children:Dt?I[1]:I})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:V[0],...H}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:V[1],...H})]})})});iT.classes=x5;iT.displayName="@mantine/core/RangeSlider";const put={},Zc=ft((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=He("Space",put,e);return _.jsx(ke,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Zc.displayName="@mantine/core/Space";var tAe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const mut={maxHeight:100,initialState:!1},gut=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),UJ=ft((e,t)=>{const n=He("Spoiler",mut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Ft({name:"Spoiler",classes:tAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gut}),x=$u(g),w=`${x}-region`,[E,T]=D.useState(l),{ref:C,height:I}=ZZe(),N=E?f:d,k=N!==null&&c<I;return _.jsxs(ke,{...v("root"),id:x,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(z_,{component:"button",type:"button",ref:p,onClick:()=>T(P=>!P),"aria-expanded":E,"aria-controls":w,...v("control"),children:N}),_.jsx("div",{...v("content",{style:{maxHeight:E?I?Pe(I):void 0:Pe(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:C,children:h})})]})});UJ.classes=tAe;UJ.displayName="@mantine/core/Spoiler";var nAe={root:"m_6d731127"};const yut={gap:"md",align:"stretch",justify:"flex-start"},vut=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Eo(t),"--stack-align":n,"--stack-justify":r}}),Gs=ft((e,t)=>{const n=He("Stack",yut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Ft({name:"Stack",props:n,classes:nAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vut});return _.jsx(ke,{ref:t,...p("root"),variant:d,...h})});Gs.classes=nAe;Gs.displayName="@mantine/core/Stack";const rAe=D.createContext(null),but=rAe.Provider,xut=()=>D.useContext(rAe),_ut={},zJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=He("SwitchGroup",_ut,e),[c,f]=ga({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(but,{value:{value:c,onChange:d,size:s},children:_.jsx(Ts.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(fJ,{role:"group",children:a})})})});zJ.classes=Ts.Wrapper.classes;zJ.displayName="@mantine/core/SwitchGroup";var iAe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const wut={labelPosition:"right"},Eut=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ii(t),"--switch-height":Wn(r,"switch-height"),"--switch-width":Wn(r,"switch-width"),"--switch-thumb-size":Wn(r,"switch-thumb-size"),"--switch-label-font-size":Wn(r,"switch-label-font-size"),"--switch-track-label-padding":Wn(r,"switch-track-label-padding"),"--switch-color":n?Mi(n,e):void 0}}),Dx=ft((e,t)=>{const n=He("Switch",wut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:x,defaultChecked:w,onChange:E,labelPosition:T,description:C,error:I,disabled:N,variant:k,rootRef:P,mod:M,...O}=n,B=xut(),q=p||(B==null?void 0:B.size),H=Ft({name:"Switch",props:n,classes:iAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eut}),{styleProps:Y,rest:K}=F_(O),J=$u(h),F=B?{checked:B.value.includes(K.value),onChange:B.onChange}:{},[U,W]=ga({value:F.checked??x,defaultValue:w,finalValue:!1});return _.jsxs(n5,{...H("root"),__staticSelector:"Switch",__stylesApiProps:n,id:J,size:q,labelPosition:T,label:c,description:C,error:I,disabled:N,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":F.checked||void 0,variant:k,ref:P,mod:M,...Y,...g,children:[_.jsx("input",{...K,disabled:N,checked:U,onChange:L=>{var V;B?(V=F.onChange)==null||V.call(F,L):E==null||E(L),W(L.currentTarget.checked)},id:J,ref:t,type:"checkbox",role:"switch",...H("input")}),_.jsxs(ke,{"aria-hidden":"true",mod:{error:I,"label-position":T},...H("track"),children:[_.jsx(ke,{component:"span",mod:"reduce-motion",...H("thumb"),children:v}),_.jsx("span",{...H("trackLabel"),children:U?d:f})]})]})});Dx.classes={...iAe,...lCe};Dx.displayName="@mantine/core/Switch";Dx.Group=zJ;const[Sut,Tut]=Ga("Table component was not found in the tree");var XD={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Cut(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function H_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=ft((i,s)=>{const o=He(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=Tut();return _.jsx(ke,{component:e,ref:s,...Cut(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=XD,r}const Pq=H_("th",{columnBorder:!0}),sAe=H_("td",{columnBorder:!0}),$4=H_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),oAe=H_("thead",{stickyHeader:!0}),aAe=H_("tbody"),uAe=H_("tfoot"),lAe=H_("caption",{captionSide:!0});function VJ({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(lAe,{children:e.caption}),e.head&&_.jsx(oAe,{children:_.jsx($4,{children:e.head.map((t,n)=>_.jsx(Pq,{children:t},n))})}),e.body&&_.jsx(aAe,{children:e.body.map((t,n)=>_.jsx($4,{children:t.map((r,i)=>_.jsx(sAe,{children:r},i))},n))}),e.foot&&_.jsx(uAe,{children:_.jsx($4,{children:e.foot.map((t,n)=>_.jsx(Pq,{children:t},n))})})]})}VJ.displayName="@mantine/core/TableDataRenderer";const Aut={type:"scrollarea"},Iut=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Pe(t),"--table-overflow":n==="native"?"auto":void 0}}),HJ=ft((e,t)=>{const n=He("TableScrollContainer",Aut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Ft({name:"TableScrollContainer",classes:XD,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Iut,rootSelector:"scrollContainer"});return _.jsx(ke,{component:f==="scrollarea"?fg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});HJ.classes=XD;HJ.displayName="@mantine/core/TableScrollContainer";const kut={withRowBorders:!0,verticalSpacing:7},Rut=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Eo(r),"--table-vertical-spacing":Eo(i),"--table-border-color":s?Mi(s,e):void 0,"--table-striped-color":u&&o?Mi(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Mi(a,e):void 0,"--table-sticky-header-offset":f?Pe(c):void 0}}),un=ft((e,t)=>{const n=He("Table",kut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:x,layout:w,variant:E,data:T,children:C,stickyHeader:I,stickyHeaderOffset:N,mod:k,...P}=n,M=Ft({name:"Table",props:n,className:i,style:s,classes:XD,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:Rut});return _.jsx(Sut,{value:{getStyles:M,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(ke,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...M("table"),...P,children:C||!!T&&_.jsx(VJ,{data:T})})})});un.classes=XD;un.displayName="@mantine/core/Table";un.Td=sAe;un.Th=Pq;un.Tr=$4;un.Thead=oAe;un.Tbody=aAe;un.Tfoot=uAe;un.Caption=lAe;un.ScrollContainer=HJ;un.DataRenderer=VJ;const[Dut,qJ]=Ga("Tabs component was not found in the tree");var QD={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Nut={},WJ=ft((e,t)=>{const n=He("TabsList",Nut,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=qJ();return _.jsx(ke,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});WJ.classes=QD;WJ.displayName="@mantine/core/TabsList";const Put={},GJ=ft((e,t)=>{const n=He("TabsPanel",Put,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=qJ(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(ke,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});GJ.classes=QD;GJ.displayName="@mantine/core/TabsPanel";const Out={},YJ=ft((e,t)=>{const n=He("TabsTab",Out,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=fo(),{dir:x}=Mg(),w=qJ(),E=a===w.value,T=I=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(I)},C={classNames:h,styles:p,props:n};return _.jsxs(of,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...C}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Mi(f,v):void 0},onKeyDown:oQ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:x,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",C),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",C),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",C),"data-position":"right",children:s})]})});YJ.classes=QD;YJ.displayName="@mantine/core/TabsTab";const she="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",$ut={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Mut=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ii(t),"--tabs-color":Mi(n,e),"--tabs-text-color":m2(r,e)?Av({color:n,theme:e,autoContrast:r}):void 0}}),Nr=ft((e,t)=>{const n=He("Tabs",$ut,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:x,unstyled:w,className:E,style:T,vars:C,autoContrast:I,mod:N,...k}=n,P=$u(l),[M,O]=ga({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Ft({name:"Tabs",props:n,classes:QD,className:E,style:T,classNames:v,styles:x,unstyled:w,vars:C,varsResolver:Mut});return _.jsx(Dut,{value:{placement:g,value:M,orientation:o,id:P,loop:u,activateTabWithKeyboard:c,getTabId:d$(`${P}-tab`,she),getPanelId:d$(`${P}-panel`,she),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:B},children:_.jsx(ke,{ref:t,id:P,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},N],...B("root"),...k,children:a})})});Nr.classes=QD;Nr.displayName="@mantine/core/Tabs";Nr.Tab=YJ;Nr.Panel=GJ;Nr.List=WJ;const Lut={},M0=ft((e,t)=>{const n=He("TextInput",Lut,e);return _.jsx(vd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});M0.classes=vd.classes;M0.displayName="@mantine/core/TextInput";const Fut=["h1","h2","h3","h4","h5","h6"];function But(e,t){const n=t!==void 0?t:`h${e}`;return Fut.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Pe(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var cAe={root:"m_8a5d1357"};const jut={order:1},Uut=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=But(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Vs=ft((e,t)=>{const n=He("Title",jut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Ft({name:"Title",props:n,classes:cAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Uut});return[1,2,3,4,5,6].includes(u)?_.jsx(ke,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Vs.classes=cAe;Vs.displayName="@mantine/core/Title";function zut(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Vut(e){return D.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Hut(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const qut=()=>zut({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),q_=qut(),Wut=(e=q_)=>Vut(e);function C2(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Hut(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Gut(e,t=q_){const n=e.id||pS();return C2(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function fAe(e,t=q_){return C2(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Yut(e,t=q_){return C2(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Kut(e=q_){C2(e,()=>[])}function Xut(e=q_){C2(e,t=>t.slice(0,e.getState().limit))}const W_={show:Gut,hide:fAe,update:Yut,clean:Kut,cleanQueue:Xut,updateState:C2};function Oq(){return Oq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oq.apply(null,arguments)}function dAe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function $q(e,t){return $q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$q(e,t)}function hAe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$q(e,t)}var pAe={exports:{}},Qut="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jut=Qut,Zut=Jut;function mAe(){}function gAe(){}gAe.resetWarningCache=mAe;var elt=function(){function e(r,i,s,o,a,u){if(u!==Zut){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gAe,resetWarningCache:mAe};return n.PropTypes=n,n};pAe.exports=elt();var tlt=pAe.exports;const ohe=Am(tlt),ahe={disabled:!1},w$=ni.createContext(null);var nlt=function(t){return t.scrollTop},eI="unmounted",Pb="exited",Ob="entering",wE="entered",Mq="exiting",Ug=function(e){hAe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Pb,s.appearStatus=Ob):u=wE:r.unmountOnExit||r.mountOnEnter?u=eI:u=Pb,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===eI?{status:Pb}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Ob&&o!==wE&&(s=Ob):(o===Ob||o===wE)&&(s=Mq)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Ob){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ZA.findDOMNode(this);o&&nlt(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pb&&this.setState({status:eI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[ZA.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||ahe.disabled){this.safeSetState({status:wE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Ob},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:wE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:ZA.findDOMNode(this);if(!s||ahe.disabled){this.safeSetState({status:Pb},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Mq},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Pb},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:ZA.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===eI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=dAe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ni.createElement(w$.Provider,{value:null},typeof o=="function"?o(i,a):ni.cloneElement(ni.Children.only(o),a))},t}(ni.Component);Ug.contextType=w$;Ug.propTypes={};function Xw(){}Ug.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xw,onEntering:Xw,onEntered:Xw,onExit:Xw,onExiting:Xw,onExited:Xw};Ug.UNMOUNTED=eI;Ug.EXITED=Pb;Ug.ENTERING=Ob;Ug.ENTERED=wE;Ug.EXITING=Mq;function rlt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KJ(e,t){var n=function(s){return t&&D.isValidElement(s)?t(s):s},r=Object.create(null);return e&&D.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function ilt(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function dx(e,t,n){return n[t]!=null?n[t]:e.props[t]}function slt(e,t){return KJ(e.children,function(n){return D.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:dx(n,"appear",e),enter:dx(n,"enter",e),exit:dx(n,"exit",e)})})}function olt(e,t,n){var r=KJ(e.children),i=ilt(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(D.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=D.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=D.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:dx(o,"exit",e),enter:dx(o,"enter",e)}):!u&&a&&!c?i[s]=D.cloneElement(o,{in:!1}):u&&a&&D.isValidElement(l)&&(i[s]=D.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:dx(o,"exit",e),enter:dx(o,"enter",e)}))}}),i}var alt=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},ult={component:"div",childFactory:function(t){return t}},Dy=function(e){hAe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(rlt(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?slt(i,a):olt(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=KJ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=Oq({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=dAe(i,["component","childFactory"]),u=this.state.contextValue,l=alt(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ni.createElement(w$.Provider,{value:u},l):ni.createElement(w$.Provider,{value:u},ni.createElement(s,a,l))},t}(ni.Component);Dy.propTypes={};Dy.defaultProps=ult;const yAe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function llt(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),yAe.reduce((n,r)=>(n[r]=[],n),{}))}const uhe={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},clt={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function flt({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:uhe[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:clt[o]},l={opacity:0,maxHeight:0,transform:uhe[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function dlt(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const vAe=D.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=dlt(n,e.autoClose),l=D.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return D.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),D.useEffect(()=>(d(),c),[u]),_.jsx(RJ,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});vAe.displayName="@mantine/notifications/NotificationContainer";var bAe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const hlt=Ug,plt={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:md("overlay"),store:q_,withinPortal:!0},mlt=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Pe(n)}}),zg=ft((e,t)=>{const n=He("Notifications",plt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...x}=n,w=fo(),E=Wut(g),T=KZe(),C=qF(),I=D.useRef({}),N=D.useRef(0),P=(w.respectReducedMotion?C:!1)?1:f,M=Ft({name:"Notifications",classes:bAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mlt});D.useEffect(()=>{g==null||g.updateState(q=>({...q,limit:p||5,defaultPosition:l}))},[p,l]),om(()=>{E.notifications.length>N.current&&setTimeout(()=>T(),0),N.current=E.notifications.length},[E.notifications]);const O=llt(E.notifications,l),B=yAe.reduce((q,H)=>(q[H]=O[H].map(({style:Y,...K})=>_.jsx(hlt,{timeout:P,onEnter:()=>I.current[K.id].offsetHeight,nodeRef:{current:I.current[K.id]},children:J=>_.jsx(vAe,{ref:F=>{I.current[K.id]=F},data:K,onHide:F=>fAe(F,g),autoClose:c,...M("notification",{style:{...flt({state:J,position:H,transitionDuration:P,maxHeight:h}),...Y}})})},K.id)),q),{});return _.jsxs(j_,{withinPortal:v,...y,children:[_.jsx(ke,{...M("root"),"data-position":"top-center",ref:t,...x,children:_.jsx(Dy,{children:B["top-center"]})}),_.jsx(ke,{...M("root"),"data-position":"top-left",...x,children:_.jsx(Dy,{children:B["top-left"]})}),_.jsx(ke,{...M("root"),"data-position":"top-right",...x,children:_.jsx(Dy,{children:B["top-right"]})}),_.jsx(ke,{...M("root"),"data-position":"bottom-right",...x,children:_.jsx(Dy,{children:B["bottom-right"]})}),_.jsx(ke,{...M("root"),"data-position":"bottom-left",...x,children:_.jsx(Dy,{children:B["bottom-left"]})}),_.jsx(ke,{...M("root"),"data-position":"bottom-center",...x,children:_.jsx(Dy,{children:B["bottom-center"]})})]})});zg.classes=bAe;zg.displayName="@mantine/notifications/Notifications";zg.show=W_.show;zg.hide=W_.hide;zg.update=W_.update;zg.clean=W_.clean;zg.cleanQueue=W_.cleanQueue;zg.updateState=W_.updateState;const xAe=D.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),ho=()=>D.useContext(xAe);function glt({children:e}){const[t,n]=D.useState(void 0),r=D.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(xAe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}var Jy;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jy||(Jy={}));const lhe="popstate";function ylt(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Lq("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wAe(i)}return blt(t,n,null,e)}function so(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _Ae(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vlt(){return Math.random().toString(36).substr(2,8)}function che(e,t){return{usr:e.state,key:e.key,idx:t}}function Lq(e,t,n,r){return n===void 0&&(n=null),dR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?A2(t):t,{state:n,key:t&&t.key||r||vlt()})}function wAe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function A2(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function blt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Jy.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(dR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Jy.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Jy.Push;let v=Lq(m.location,g,y);l=c()+1;let x=che(v,l),w=m.createHref(v);try{o.pushState(x,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Jy.Replace;let v=Lq(m.location,g,y);l=c();let x=che(v,l),w=m.createHref(v);o.replaceState(x,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:wAe(g);return v=v.replace(/ $/,"%20"),so(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(lhe,f),u=g,()=>{i.removeEventListener(lhe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var fhe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fhe||(fhe={}));function xlt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?A2(t):t,i=TAe(r.pathname||"/",n);if(i==null)return null;let s=EAe(e);_lt(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=Plt(i);o=Rlt(s[a],u)}return o}function EAe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(so(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=b1([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(so(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),EAe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:Ilt(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of SAe(s.path))i(s,o,u)}),t}function SAe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SAe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function _lt(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:klt(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wlt=/^:[\w-]+$/,Elt=3,Slt=2,Tlt=1,Clt=10,Alt=-2,dhe=e=>e==="*";function Ilt(e,t){let n=e.split("/"),r=n.length;return n.some(dhe)&&(r+=Alt),t&&(r+=Slt),n.filter(i=>!dhe(i)).reduce((i,s)=>i+(wlt.test(s)?Elt:s===""?Tlt:Clt),r)}function klt(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Rlt(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=Dlt({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:b1([i,c.pathname]),pathnameBase:Llt(b1([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=b1([i,c.pathnameBase]))}return s}function Dlt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Nlt(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function Nlt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),_Ae(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Plt(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _Ae(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function TAe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Olt(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?A2(e):e;return{pathname:n?n.startsWith("/")?n:$lt(n,t):t,search:Flt(r),hash:Blt(i)}}function $lt(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function U7(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mlt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function XJ(e,t){let n=Mlt(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function QJ(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=A2(e):(i=dR({},e),so(!i.pathname||!i.pathname.includes("?"),U7("?","pathname","search",i)),so(!i.pathname||!i.pathname.includes("#"),U7("#","pathname","hash",i)),so(!i.search||!i.search.includes("#"),U7("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Olt(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const b1=e=>e.join("/").replace(/\/\/+/g,"/"),Llt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Flt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Blt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jlt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const CAe=["post","put","patch","delete"];new Set(CAe);const Ult=["get",...CAe];new Set(Ult);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hR(){return hR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hR.apply(this,arguments)}const JJ=D.createContext(null),zlt=D.createContext(null),G_=D.createContext(null),w5=D.createContext(null),km=D.createContext({outlet:null,matches:[],isDataRoute:!1}),AAe=D.createContext(null);function IAe(e,t){let{relative:n}={};I2()||so(!1);let{basename:r,navigator:i}=D.useContext(G_),{hash:s,pathname:o,search:a}=Wlt(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:b1([r,o])),i.createHref({pathname:u,search:a,hash:s})}function I2(){return D.useContext(w5)!=null}function Dv(){return I2()||so(!1),D.useContext(w5).location}function kAe(e){D.useContext(G_).static||D.useLayoutEffect(e)}function Rm(){let{isDataRoute:e}=D.useContext(km);return e?rct():Vlt()}function Vlt(){I2()||so(!1);let e=D.useContext(JJ),{basename:t,future:n,navigator:r}=D.useContext(G_),{matches:i}=D.useContext(km),{pathname:s}=Dv(),o=JSON.stringify(XJ(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return kAe(()=>{a.current=!0}),D.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=QJ(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:b1([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Hlt=D.createContext(null);function qlt(e){let t=D.useContext(km).outlet;return t&&D.createElement(Hlt.Provider,{value:e},t)}function am(){let{matches:e}=D.useContext(km),t=e[e.length-1];return t?t.params:{}}function Wlt(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=D.useContext(G_),{matches:i}=D.useContext(km),{pathname:s}=Dv(),o=JSON.stringify(XJ(i,r.v7_relativeSplatPath));return D.useMemo(()=>QJ(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function RAe(e,t){return Glt(e,t)}function Glt(e,t,n,r){I2()||so(!1);let{navigator:i}=D.useContext(G_),{matches:s}=D.useContext(km),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Dv(),c;if(t){var f;let g=typeof t=="string"?A2(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||so(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=xlt(e,{pathname:h}),m=Jlt(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:b1([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:b1([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?D.createElement(w5.Provider,{value:{location:hR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Jy.Pop}},m):m}function Ylt(){let e=nct(),t=jlt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:i},n):null,null)}const Klt=D.createElement(Ylt,null);class Xlt extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(km.Provider,{value:this.props.routeContext},D.createElement(AAe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qlt(e){let{routeContext:t,match:n,children:r}=e,i=D.useContext(JJ);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(km.Provider,{value:t},r)}function Jlt(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||so(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Klt,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let x;return h?x=m:p?x=g:f.route.Component?x=D.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,D.createElement(Qlt,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?D.createElement(Xlt,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var DAe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DAe||{}),E$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(E$||{});function Zlt(e){let t=D.useContext(JJ);return t||so(!1),t}function ect(e){let t=D.useContext(zlt);return t||so(!1),t}function tct(e){let t=D.useContext(km);return t||so(!1),t}function NAe(e){let t=tct(),n=t.matches[t.matches.length-1];return n.route.id||so(!1),n.route.id}function nct(){var e;let t=D.useContext(AAe),n=ect(E$.UseRouteError),r=NAe(E$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function rct(){let{router:e}=Zlt(DAe.UseNavigateStable),t=NAe(E$.UseNavigateStable),n=D.useRef(!1);return kAe(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,hR({fromRouteId:t},s)))},[e,t])}function ZJ(e){let{to:t,replace:n,state:r,relative:i}=e;I2()||so(!1);let{future:s,static:o}=D.useContext(G_),{matches:a}=D.useContext(km),{pathname:u}=Dv(),l=Rm(),c=QJ(t,XJ(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return D.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function ict(e){return qlt(e.context)}function $b(e){so(!1)}function sct(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Jy.Pop,navigator:s,static:o=!1,future:a}=e;I2()&&so(!1);let u=t.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:u,navigator:s,static:o,future:hR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=A2(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=D.useMemo(()=>{let g=TAe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:D.createElement(G_.Provider,{value:l},D.createElement(w5.Provider,{children:n,value:m}))}function oct(e){let{children:t,location:n}=e;return RAe(Fq(t),n)}new Promise(()=>{});function Fq(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,i)=>{if(!D.isValidElement(r))return;let s=[...t,i];if(r.type===D.Fragment){n.push.apply(n,Fq(r.props.children,s));return}r.type!==$b&&so(!1),!r.props.index||!r.props.children||so(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fq(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bq(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function act(e,t){let n=Bq(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const uct="6";try{window.__reactRouterVersion=uct}catch{}const lct="startTransition",hhe=j6[lct];function cct(e){let{basename:t,children:n,future:r,window:i}=e,s=D.useRef();s.current==null&&(s.current=ylt({window:i,v5Compat:!0}));let o=s.current,[a,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=D.useCallback(f=>{l&&hhe?hhe(()=>u(f)):u(f)},[u,l]);return D.useLayoutEffect(()=>o.listen(c),[o,c]),D.createElement(sct,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var phe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(phe||(phe={}));var mhe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mhe||(mhe={}));function Nv(e){let t=D.useRef(Bq(e)),n=D.useRef(!1),r=Dv(),i=D.useMemo(()=>act(r.search,n.current?null:t.current),[r.search]),s=Rm(),o=D.useCallback((a,u)=>{const l=Bq(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const eZ=D.createContext(null);eZ.displayName="@mantine/modals/ModalsContext";function fct(){const e=D.useContext(eZ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function dct({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=fct(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(ke,{mb:"md",children:l}),_.jsxs(_r,{justify:"flex-end",...o,children:[_.jsx(ln,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(ln,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[hct,E5]=fet("mantine-modals");E5("openModal");E5("closeModal");E5("closeAllModals");const ghe=E5("openConfirmModal");function yhe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function pct(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;yhe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{yhe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function mct(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function gct({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=D.useReducer(pct,{modals:[],current:null}),o=D.useRef(i);o.current=i;const a=D.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=D.useCallback(({modalId:g,...y})=>{const v=g||pS();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=D.useCallback(({modalId:g,...y})=>{const v=g||pS();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=D.useCallback((g,{modalId:y,...v})=>{const x=y||pS();return s({type:"OPEN",modal:{id:x,type:"context",props:v,ctx:g}}),x},[s]),f=D.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);hct({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,x=r[g.ctx];return{modalProps:v,content:_.jsx(x,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=mct(g.props);return{modalProps:y,content:_.jsx(dct,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(eZ.Provider,{value:d,children:[_.jsx(Ws,{zIndex:md("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yct={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=(e,t,n,r)=>{const i=D.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>D.createElement("svg",{ref:f,...yct[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>D.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vct=In("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bct=In("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JI=In("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vhe=In("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bhe=In("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xct=In("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ct=In("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wct=In("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ect=In("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sct=In("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tct=In("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PAe=In("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S5=In("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cct=In("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xhe=In("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Act=In("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ict=In("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kct=In("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rct=In("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OAe=In("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dct=In("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nct=In("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tZ=In("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pct=In("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oct=In("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ct=In("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mct=In("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lct=In("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fct=In("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bct=In("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ae=In("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jct=In("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uct=In("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zct=In("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vct=In("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hct=In("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MAe=In("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qct=In("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LAe=In("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wct=In("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FAe=In("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nZ=In("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _he=In("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JD=In("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gct=In("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yct=In("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kct=In("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function BAe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Va="/study/";function whe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function jAe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Xct=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Qct=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jct={};function Ehe(e,t){return(Jct.jsx?Qct:Xct).test(e)}const Zct=/[ \t\n\f\r]/g;function eft(e){return typeof e=="object"?e.type==="text"?She(e.value):!1:She(e)}function She(e){return e.replace(Zct,"")===""}let ZD=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};ZD.prototype.property={};ZD.prototype.normal={};ZD.prototype.space=null;function UAe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new ZD(n,r,t)}function pR(e){return e.toLowerCase()}let xd=class{constructor(t,n){this.property=t,this.attribute=n}};xd.prototype.space=null;xd.prototype.boolean=!1;xd.prototype.booleanish=!1;xd.prototype.overloadedBoolean=!1;xd.prototype.number=!1;xd.prototype.commaSeparated=!1;xd.prototype.spaceSeparated=!1;xd.prototype.commaOrSpaceSeparated=!1;xd.prototype.mustUseProperty=!1;xd.prototype.defined=!1;let tft=0;const Hn=Y_(),bo=Y_(),zAe=Y_(),wt=Y_(),Ki=Y_(),yS=Y_(),Pc=Y_();function Y_(){return 2**++tft}const jq=Object.freeze(Object.defineProperty({__proto__:null,boolean:Hn,booleanish:bo,commaOrSpaceSeparated:Pc,commaSeparated:yS,number:wt,overloadedBoolean:zAe,spaceSeparated:Ki},Symbol.toStringTag,{value:"Module"})),z7=Object.keys(jq);class rZ extends xd{constructor(t,n,r,i){let s=-1;if(super(t,n),The(this,"space",i),typeof r=="number")for(;++s<z7.length;){const o=z7[s];The(this,z7[s],(r&jq[o])===jq[o])}}}rZ.prototype.defined=!0;function The(e,t,n){n&&(e[t]=n)}const nft={}.hasOwnProperty;function k2(e){const t={},n={};let r;for(r in e.properties)if(nft.call(e.properties,r)){const i=e.properties[r],s=new rZ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[pR(r)]=r,n[pR(s.attribute)]=r}return new ZD(t,n,e.space)}const VAe=k2({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),HAe=k2({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function qAe(e,t){return t in e?e[t]:t}function WAe(e,t){return qAe(e,t.toLowerCase())}const GAe=k2({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:WAe,properties:{xmlns:null,xmlnsXLink:null}}),YAe=k2({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bo,ariaAutoComplete:null,ariaBusy:bo,ariaChecked:bo,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:Ki,ariaCurrent:null,ariaDescribedBy:Ki,ariaDetails:null,ariaDisabled:bo,ariaDropEffect:Ki,ariaErrorMessage:null,ariaExpanded:bo,ariaFlowTo:Ki,ariaGrabbed:bo,ariaHasPopup:null,ariaHidden:bo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ki,ariaLevel:wt,ariaLive:null,ariaModal:bo,ariaMultiLine:bo,ariaMultiSelectable:bo,ariaOrientation:null,ariaOwns:Ki,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:bo,ariaReadOnly:bo,ariaRelevant:null,ariaRequired:bo,ariaRoleDescription:Ki,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:bo,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null}}),rft=k2({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:WAe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yS,acceptCharset:Ki,accessKey:Ki,action:null,allow:null,allowFullScreen:Hn,allowPaymentRequest:Hn,allowUserMedia:Hn,alt:null,as:null,async:Hn,autoCapitalize:null,autoComplete:Ki,autoFocus:Hn,autoPlay:Hn,blocking:Ki,capture:null,charSet:null,checked:Hn,cite:null,className:Ki,cols:wt,colSpan:null,content:null,contentEditable:bo,controls:Hn,controlsList:Ki,coords:wt|yS,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Hn,defer:Hn,dir:null,dirName:null,disabled:Hn,download:zAe,draggable:bo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Hn,formTarget:null,headers:Ki,height:wt,hidden:Hn,high:wt,href:null,hrefLang:null,htmlFor:Ki,httpEquiv:Ki,id:null,imageSizes:null,imageSrcSet:null,inert:Hn,inputMode:null,integrity:null,is:null,isMap:Hn,itemId:null,itemProp:Ki,itemRef:Ki,itemScope:Hn,itemType:Ki,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Hn,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:Hn,muted:Hn,name:null,nonce:null,noModule:Hn,noValidate:Hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Hn,optimum:wt,pattern:null,ping:Ki,placeholder:null,playsInline:Hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Hn,referrerPolicy:null,rel:Ki,required:Hn,reversed:Hn,rows:wt,rowSpan:wt,sandbox:Ki,scope:null,scoped:Hn,seamless:Hn,selected:Hn,shadowRootClonable:Hn,shadowRootDelegatesFocus:Hn,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:bo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:Hn,useMap:null,value:bo,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ki,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Hn,declare:Hn,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:Hn,noHref:Hn,noShade:Hn,noWrap:Hn,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:bo,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Hn,disableRemotePlayback:Hn,prefix:null,property:null,results:wt,security:null,unselectable:null}}),ift=k2({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:qAe,properties:{about:Pc,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:Ki,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:Hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yS,g2:yS,glyphName:yS,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:Pc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ki,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pc,rev:Pc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pc,requiredFeatures:Pc,requiredFonts:Pc,requiredFormats:Pc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:Pc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pc,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),sft=/^data[-\w.:]+$/i,Che=/-[a-z]/g,oft=/[A-Z]/g;function T5(e,t){const n=pR(t);let r=t,i=xd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&sft.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Che,uft);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Che.test(s)){let o=s.replace(oft,aft);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=rZ}return new i(r,t)}function aft(e){return"-"+e.toLowerCase()}function uft(e){return e.charAt(1).toUpperCase()}const lft={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},eN=UAe([HAe,VAe,GAe,YAe,rft],"html"),Pv=UAe([HAe,VAe,GAe,YAe,ift],"svg");function Ahe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function KAe(e){return e.join(" ").trim()}var XAe={},Ihe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,cft=/\n/g,fft=/^\s*/,dft=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,hft=/^:\s*/,pft=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,mft=/^[;\s]*/,gft=/^\s+|\s+$/g,yft=`
`,khe="/",Rhe="*",Kb="",vft="comment",bft="declaration",xft=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(cft);m&&(n+=m.length);var g=p.lastIndexOf(yft);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(fft)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(khe!=e.charAt(0)||Rhe!=e.charAt(1))){for(var m=2;Kb!=e.charAt(m)&&(Rhe!=e.charAt(m)||khe!=e.charAt(m+1));)++m;if(m+=2,Kb===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:vft,comment:g})}}function d(){var p=s(),m=u(dft);if(m){if(f(),!u(hft))return a("property missing ':'");var g=u(pft),y=p({type:bft,property:Dhe(m[0].replace(Ihe,Kb)),value:g?Dhe(g[0].replace(Ihe,Kb)):Kb});return u(mft),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Dhe(e){return e?e.replace(gft,Kb):Kb}var _ft=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(XAe,"__esModule",{value:!0});var wft=_ft(xft);function Eft(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,wft.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Nhe=XAe.default=Eft;const Sft=Nhe.default||Nhe,C5=QAe("end"),Dm=QAe("start");function QAe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Tft(e){const t=Dm(e),n=C5(e);if(t&&n)return{start:t,end:n}}function ZI(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Phe(e.position):"start"in e||"end"in e?Phe(e):"line"in e||"column"in e?Uq(e):""}function Uq(e){return Ohe(e&&e.line)+":"+Ohe(e&&e.column)}function Phe(e){return Uq(e&&e.start)+"-"+Uq(e&&e.end)}function Ohe(e){return e&&typeof e=="number"?e:1}class Mu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=ZI(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Mu.prototype.file="";Mu.prototype.name="";Mu.prototype.reason="";Mu.prototype.message="";Mu.prototype.stack="";Mu.prototype.column=void 0;Mu.prototype.line=void 0;Mu.prototype.ancestors=void 0;Mu.prototype.cause=void 0;Mu.prototype.fatal=void 0;Mu.prototype.place=void 0;Mu.prototype.ruleId=void 0;Mu.prototype.source=void 0;const iZ={}.hasOwnProperty,Cft=new Map,Aft=/[A-Z]/g,Ift=/-([a-z])/g,kft=new Set(["table","tbody","thead","tfoot","tr"]),Rft=new Set(["td","th"]),JAe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Dft(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Bft(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Fft(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Pv:eN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=ZAe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function ZAe(e,t,n){if(t.type==="element")return Nft(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Pft(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return $ft(e,t,n);if(t.type==="mdxjsEsm")return Oft(e,t);if(t.type==="root")return Mft(e,t,n);if(t.type==="text")return Lft(e,t)}function Nft(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Pv,e.schema=i),e.ancestors.push(t);const s=tIe(e,t.tagName,!1),o=jft(e,t);let a=oZ(e,t);return kft.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!eft(u):!0})),eIe(e,o,s,t),sZ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Pft(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}mR(e,t.position)}function Oft(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);mR(e,t.position)}function $ft(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Pv,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:tIe(e,t.name,!0),o=Uft(e,t),a=oZ(e,t);return eIe(e,o,s,t),sZ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Mft(e,t,n){const r={};return sZ(r,oZ(e,t)),e.create(t,e.Fragment,r,n)}function Lft(e,t){return t.value}function eIe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function sZ(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Fft(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Bft(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Dm(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function jft(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&iZ.call(t.properties,i)){const s=zft(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Rft.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Uft(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else mR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else mR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function oZ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Cft;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=ZAe(e,s,o);a!==void 0&&n.push(a)}return n}function zft(e,t,n){const r=T5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?jAe(n):KAe(n)),r.property==="style"){let i=typeof n=="object"?n:Vft(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Hft(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?lft[r.property]||r.property:r.attribute,n]}}function Vft(e,t){const n={};try{Sft(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Mu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=JAe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Ift,Wft)),n[o]=s}}function tIe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Ehe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Ehe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return iZ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);mR(e)}function mR(e,t){const n=new Mu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=JAe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Hft(e){const t={};let n;for(n in e)iZ.call(e,n)&&(t[qft(n)]=e[n]);return t}function qft(e){let t=e.replace(Aft,Gft);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Wft(e,t){return t.toUpperCase()}function Gft(e){return"-"+e.toLowerCase()}const V7={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Yft={};function Kft(e,t){const n=Yft,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return nIe(e,r,i)}function nIe(e,t,n){if(Xft(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return $he(e.children,t,n)}return Array.isArray(e)?$he(e,t,n):""}function $he(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=nIe(e[i],t,n);return r.join("")}function Xft(e){return!!(e&&typeof e=="object")}const Mhe=document.createElement("i");function aZ(e){const t="&"+e+";";Mhe.innerHTML=t;const n=Mhe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function mg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Hf(e,t){return e.length>0?(mg(e,e.length,0,t),e):t}const Lhe={}.hasOwnProperty;function Qft(e){const t={};let n=-1;for(;++n<e.length;)Jft(t,e[n]);return t}function Jft(e,t){let n;for(n in t){const i=(Lhe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Lhe.call(i,o)||(i[o]=[]);const a=s[o];Zft(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Zft(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mg(e,0,0,r)}function rIe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function vS(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Tp=Ov(/[A-Za-z]/),Wc=Ov(/[\dA-Za-z]/),edt=Ov(/[#-'*+\--9=?A-Z^-~]/);function zq(e){return e!==null&&(e<32||e===127)}const Vq=Ov(/\d/),tdt=Ov(/[\dA-Fa-f]/),ndt=Ov(/[!-/:-@[-`{-~]/);function Cn(e){return e!==null&&e<-2}function sc(e){return e!==null&&(e<0||e===32)}function hi(e){return e===-2||e===-1||e===32}const rdt=Ov(new RegExp("\\p{P}|\\p{S}","u")),idt=Ov(/\s/);function Ov(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function R2(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Wc(e.charCodeAt(n+1))&&Wc(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Qi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return hi(u)?(e.enter(n),a(u)):t(u)}function a(u){return hi(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const sdt={tokenize:odt};function odt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Qi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Cn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const adt={tokenize:udt},Fhe={tokenize:ldt};function udt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let C=w;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},T),C++;return mg(t.events,E+1,0,t.events.slice(w)),t.events.length=C,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return d(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Fhe,c,f)(x)}function c(x){return i&&v(),y(r),d(x)}function f(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function d(x){return t.containerState={},e.attempt(Fhe,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),d(x)}function p(x){if(x===null){i&&v(),y(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(x);return}return Cn(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,w){const E=t.sliceStream(x);if(w&&E.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(E),t.parser.lazy[x.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const C=t.events.length;let I=C,N,k;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(N){k=t.events[I][1].end;break}N=!0}for(y(r),T=C;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;mg(t.events,I+1,0,t.events.slice(C)),t.events.length=T}}function y(x){let w=n.length;for(;w-- >x;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=x}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function ldt(e,t,n){return Qi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Bhe(e){if(e===null||sc(e)||idt(e))return 1;if(rdt(e))return 2}function uZ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Hq={name:"attention",tokenize:fdt,resolveAll:cdt};function cdt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);jhe(f,-u),jhe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Hf(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Hf(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Hf(l,uZ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Hf(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Hf(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,mg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function fdt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Bhe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Bhe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function jhe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ddt={name:"autolink",tokenize:hdt};function hdt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Tp(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Wc(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Wc(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||zq(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):edt(h)?(e.consume(h),l):n(h)}function c(h){return Wc(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Wc(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const A5={tokenize:pdt,partial:!0};function pdt(e,t,n){return r;function r(s){return hi(s)?Qi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Cn(s)?t(s):n(s)}}const iIe={name:"blockQuote",tokenize:mdt,continuation:{tokenize:gdt},exit:ydt};function mdt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return hi(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function gdt(e,t,n){const r=this;return i;function i(o){return hi(o)?Qi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(iIe,t,n)(o)}}function ydt(e){e.exit("blockQuote")}const sIe={name:"characterEscape",tokenize:vdt};function vdt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return ndt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const oIe={name:"characterReference",tokenize:bdt};function bdt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Wc,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=tdt,c):(e.enter("characterReferenceValue"),s=7,o=Vq,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Wc&&!aZ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Uhe={tokenize:_dt,partial:!0},zhe={name:"codeFenced",tokenize:xdt,concrete:!0};function xdt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),hi(T)?Qi(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Cn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(Uhe,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Cn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):hi(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Qi(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Cn(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Cn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&hi(T)?Qi(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||Cn(T)?e.check(Uhe,m,w)(T):(e.enter("codeFlowValue"),x(T))}function x(T){return T===null||Cn(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),x)}function w(T){return e.exit("codeFenced"),t(T)}function E(T,C,I){let N=0;return k;function k(q){return T.enter("lineEnding"),T.consume(q),T.exit("lineEnding"),P}function P(q){return T.enter("codeFencedFence"),hi(q)?Qi(T,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):M(q)}function M(q){return q===a?(T.enter("codeFencedFenceSequence"),O(q)):I(q)}function O(q){return q===a?(N++,T.consume(q),O):N>=o?(T.exit("codeFencedFenceSequence"),hi(q)?Qi(T,B,"whitespace")(q):B(q)):I(q)}function B(q){return q===null||Cn(q)?(T.exit("codeFencedFence"),C(q)):I(q)}}}function _dt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const H7={name:"codeIndented",tokenize:Edt},wdt={tokenize:Sdt,partial:!0};function Edt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Qi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Cn(l)?e.attempt(wdt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Cn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Sdt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Qi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Cn(o)?i(o):n(o)}}const Tdt={name:"codeText",tokenize:Idt,resolve:Cdt,previous:Adt};function Cdt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Adt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Idt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Cn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class kdt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&oA(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),oA(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),oA(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);oA(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);oA(this.left,n.reverse())}}}function oA(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function aIe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new kdt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Rdt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return mg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Rdt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Ddt={tokenize:Odt,resolve:Pdt},Ndt={tokenize:$dt,partial:!0};function Pdt(e){return aIe(e),e}function Odt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Cn(a)?e.check(Ndt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function $dt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Qi(e,s,"linePrefix")}function s(o){if(o===null||Cn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function uIe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||zq(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Cn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||sc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||zq(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function lIe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Cn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Cn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!hi(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function cIe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Cn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Qi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Cn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ek(e,t){let n;return r;function r(i){return Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):hi(i)?Qi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Mdt={name:"definition",tokenize:Fdt},Ldt={tokenize:Bdt,partial:!0};function Fdt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return lIe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=vS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return sc(h)?ek(e,l)(h):l(h)}function l(h){return uIe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Ldt,f,f)(h)}function f(h){return hi(h)?Qi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Cn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Bdt(e,t,n){return r;function r(a){return sc(a)?ek(e,i)(a):n(a)}function i(a){return cIe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return hi(a)?Qi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Cn(a)?t(a):n(a)}}const jdt={name:"hardBreakEscape",tokenize:Udt};function Udt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Cn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const zdt={name:"headingAtx",tokenize:Hdt,resolve:Vdt};function Vdt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Hdt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||sc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Cn(c)?(e.exit("atxHeading"),t(c)):hi(c)?Qi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||sc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const qdt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Vhe=["pre","script","style","textarea"],Wdt={name:"htmlFlow",tokenize:Xdt,resolveTo:Kdt,concrete:!0},Gdt={tokenize:Jdt,partial:!0},Ydt={tokenize:Qdt,partial:!0};function Kdt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Xdt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(L){return c(L)}function c(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),f}function f(L){return L===33?(e.consume(L),d):L===47?(e.consume(L),s=!0,m):L===63?(e.consume(L),i=3,r.interrupt?t:F):Tp(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function d(L){return L===45?(e.consume(L),i=2,h):L===91?(e.consume(L),i=5,a=0,p):Tp(L)?(e.consume(L),i=4,r.interrupt?t:F):n(L)}function h(L){return L===45?(e.consume(L),r.interrupt?t:F):n(L)}function p(L){const V="CDATA[";return L===V.charCodeAt(a++)?(e.consume(L),a===V.length?r.interrupt?t:M:p):n(L)}function m(L){return Tp(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function g(L){if(L===null||L===47||L===62||sc(L)){const V=L===47,Q=o.toLowerCase();return!V&&!s&&Vhe.includes(Q)?(i=1,r.interrupt?t(L):M(L)):qdt.includes(o.toLowerCase())?(i=6,V?(e.consume(L),y):r.interrupt?t(L):M(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?v(L):x(L))}return L===45||Wc(L)?(e.consume(L),o+=String.fromCharCode(L),g):n(L)}function y(L){return L===62?(e.consume(L),r.interrupt?t:M):n(L)}function v(L){return hi(L)?(e.consume(L),v):k(L)}function x(L){return L===47?(e.consume(L),k):L===58||L===95||Tp(L)?(e.consume(L),w):hi(L)?(e.consume(L),x):k(L)}function w(L){return L===45||L===46||L===58||L===95||Wc(L)?(e.consume(L),w):E(L)}function E(L){return L===61?(e.consume(L),T):hi(L)?(e.consume(L),E):x(L)}function T(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),u=L,C):hi(L)?(e.consume(L),T):I(L)}function C(L){return L===u?(e.consume(L),u=null,N):L===null||Cn(L)?n(L):(e.consume(L),C)}function I(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||sc(L)?E(L):(e.consume(L),I)}function N(L){return L===47||L===62||hi(L)?x(L):n(L)}function k(L){return L===62?(e.consume(L),P):n(L)}function P(L){return L===null||Cn(L)?M(L):hi(L)?(e.consume(L),P):n(L)}function M(L){return L===45&&i===2?(e.consume(L),H):L===60&&i===1?(e.consume(L),Y):L===62&&i===4?(e.consume(L),U):L===63&&i===3?(e.consume(L),F):L===93&&i===5?(e.consume(L),J):Cn(L)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Gdt,W,O)(L)):L===null||Cn(L)?(e.exit("htmlFlowData"),O(L)):(e.consume(L),M)}function O(L){return e.check(Ydt,B,W)(L)}function B(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),q}function q(L){return L===null||Cn(L)?O(L):(e.enter("htmlFlowData"),M(L))}function H(L){return L===45?(e.consume(L),F):M(L)}function Y(L){return L===47?(e.consume(L),o="",K):M(L)}function K(L){if(L===62){const V=o.toLowerCase();return Vhe.includes(V)?(e.consume(L),U):M(L)}return Tp(L)&&o.length<8?(e.consume(L),o+=String.fromCharCode(L),K):M(L)}function J(L){return L===93?(e.consume(L),F):M(L)}function F(L){return L===62?(e.consume(L),U):L===45&&i===2?(e.consume(L),F):M(L)}function U(L){return L===null||Cn(L)?(e.exit("htmlFlowData"),W(L)):(e.consume(L),U)}function W(L){return e.exit("htmlFlow"),t(L)}}function Qdt(e,t,n){const r=this;return i;function i(o){return Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Jdt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(A5,t,n)}}const Zdt={name:"htmlText",tokenize:eht};function eht(e,t,n){const r=this;let i,s,o;return a;function a(F){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(F),u}function u(F){return F===33?(e.consume(F),l):F===47?(e.consume(F),E):F===63?(e.consume(F),x):Tp(F)?(e.consume(F),I):n(F)}function l(F){return F===45?(e.consume(F),c):F===91?(e.consume(F),s=0,p):Tp(F)?(e.consume(F),v):n(F)}function c(F){return F===45?(e.consume(F),h):n(F)}function f(F){return F===null?n(F):F===45?(e.consume(F),d):Cn(F)?(o=f,Y(F)):(e.consume(F),f)}function d(F){return F===45?(e.consume(F),h):f(F)}function h(F){return F===62?H(F):F===45?d(F):f(F)}function p(F){const U="CDATA[";return F===U.charCodeAt(s++)?(e.consume(F),s===U.length?m:p):n(F)}function m(F){return F===null?n(F):F===93?(e.consume(F),g):Cn(F)?(o=m,Y(F)):(e.consume(F),m)}function g(F){return F===93?(e.consume(F),y):m(F)}function y(F){return F===62?H(F):F===93?(e.consume(F),y):m(F)}function v(F){return F===null||F===62?H(F):Cn(F)?(o=v,Y(F)):(e.consume(F),v)}function x(F){return F===null?n(F):F===63?(e.consume(F),w):Cn(F)?(o=x,Y(F)):(e.consume(F),x)}function w(F){return F===62?H(F):x(F)}function E(F){return Tp(F)?(e.consume(F),T):n(F)}function T(F){return F===45||Wc(F)?(e.consume(F),T):C(F)}function C(F){return Cn(F)?(o=C,Y(F)):hi(F)?(e.consume(F),C):H(F)}function I(F){return F===45||Wc(F)?(e.consume(F),I):F===47||F===62||sc(F)?N(F):n(F)}function N(F){return F===47?(e.consume(F),H):F===58||F===95||Tp(F)?(e.consume(F),k):Cn(F)?(o=N,Y(F)):hi(F)?(e.consume(F),N):H(F)}function k(F){return F===45||F===46||F===58||F===95||Wc(F)?(e.consume(F),k):P(F)}function P(F){return F===61?(e.consume(F),M):Cn(F)?(o=P,Y(F)):hi(F)?(e.consume(F),P):N(F)}function M(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),i=F,O):Cn(F)?(o=M,Y(F)):hi(F)?(e.consume(F),M):(e.consume(F),B)}function O(F){return F===i?(e.consume(F),i=void 0,q):F===null?n(F):Cn(F)?(o=O,Y(F)):(e.consume(F),O)}function B(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||sc(F)?N(F):(e.consume(F),B)}function q(F){return F===47||F===62||sc(F)?N(F):n(F)}function H(F){return F===62?(e.consume(F),e.exit("htmlTextData"),e.exit("htmlText"),t):n(F)}function Y(F){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),K}function K(F){return hi(F)?Qi(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):J(F)}function J(F){return e.enter("htmlTextData"),o(F)}}const lZ={name:"labelEnd",tokenize:oht,resolveTo:sht,resolveAll:iht},tht={tokenize:aht},nht={tokenize:uht},rht={tokenize:lht};function iht(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function sht(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Hf(a,e.slice(s+1,s+r+3)),a=Hf(a,[["enter",c,t]]),a=Hf(a,uZ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Hf(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Hf(a,e.slice(o+1)),a=Hf(a,[["exit",u,t]]),mg(e,s,e.length,a),e}function oht(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(vS(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(tht,c,o?c:f)(d):d===91?e.attempt(nht,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(rht,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function aht(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return sc(f)?ek(e,s)(f):s(f)}function s(f){return f===41?c(f):uIe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return sc(f)?ek(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?cIe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return sc(f)?ek(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function uht(e,t,n){const r=this;return i;function i(a){return lIe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(vS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function lht(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const cht={name:"labelStartImage",tokenize:fht,resolveAll:lZ.resolveAll};function fht(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const dht={name:"labelStartLink",tokenize:hht,resolveAll:lZ.resolveAll};function hht(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const q7={name:"lineEnding",tokenize:pht};function pht(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Qi(e,t,"linePrefix")}}const M4={name:"thematicBreak",tokenize:mht};function mht(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Cn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),hi(l)?Qi(e,a,"whitespace")(l):a(l))}}const Ol={name:"list",tokenize:vht,continuation:{tokenize:bht},exit:_ht},ght={tokenize:wht,partial:!0},yht={tokenize:xht,partial:!0};function vht(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Vq(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(M4,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Vq(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(A5,r.interrupt?n:c,e.attempt(ght,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return hi(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function bht(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(A5,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Qi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!hi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(yht,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Qi(e,e.attempt(Ol,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function xht(e,t,n){const r=this;return Qi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function _ht(e){e.exit(this.containerState.type)}function wht(e,t,n){const r=this;return Qi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!hi(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Hhe={name:"setextUnderline",tokenize:Sht,resolveTo:Eht};function Eht(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Sht(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),hi(l)?Qi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Cn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Tht={tokenize:Cht};function Cht(e){const t=this,n=e.attempt(A5,r,e.attempt(this.parser.constructs.flowInitial,i,Qi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ddt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Aht={resolveAll:dIe()},Iht=fIe("string"),kht=fIe("text");function fIe(e){return{tokenize:t,resolveAll:dIe(e==="text"?Rht:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function dIe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Rht(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Dht(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:x,exit:w,attempt:C(E),check:C(T),interrupt:C(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(P){return o=Hf(o,P),g(),o[o.length-1]!==null?[]:(I(t,0),l.events=uZ(s,l.events,l),l.events)}function d(P,M){return Pht(h(P),M)}function h(P){return Nht(o,P)}function p(){const{line:P,column:M,offset:O,_index:B,_bufferIndex:q}=r;return{line:P,column:M,offset:O,_index:B,_bufferIndex:q}}function m(P){i[P.line]=P.column,k()}function g(){let P;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<M.length;)y(M.charCodeAt(r._bufferIndex));else y(M)}}function y(P){c=c(P)}function v(P){Cn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,k()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=P}function x(P,M){const O=M||{};return O.type=P,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function w(P){const M=a.pop();return M.end=p(),l.events.push(["exit",M,l]),M}function E(P,M){I(P,M.from)}function T(P,M){M.restore()}function C(P,M){return O;function O(B,q,H){let Y,K,J,F;return Array.isArray(B)?W(B):"tokenize"in B?W([B]):U(B);function U(ue){return we;function we(ce){const Se=ce!==null&&ue[ce],Oe=ce!==null&&ue.null,et=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Oe)?Oe:Oe?[Oe]:[]];return W(et)(ce)}}function W(ue){return Y=ue,K=0,ue.length===0?H:L(ue[K])}function L(ue){return we;function we(ce){return F=N(),J=ue,ue.partial||(l.currentConstruct=ue),ue.name&&l.parser.constructs.disable.null.includes(ue.name)?Q():ue.tokenize.call(M?Object.assign(Object.create(l),M):l,u,V,Q)(ce)}}function V(ue){return P(J,F),q}function Q(ue){return F.restore(),++K<Y.length?L(Y[K]):H}}}function I(P,M){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&mg(l.events,M,l.events.length-M,P.resolve(l.events.slice(M),l)),P.resolveTo&&(l.events=P.resolveTo(l.events,l))}function N(){const P=p(),M=l.previous,O=l.currentConstruct,B=l.events.length,q=Array.from(a);return{restore:H,from:B};function H(){r=P,l.previous=M,l.currentConstruct=O,l.events.length=B,a=q,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Nht(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Pht(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Oht={42:Ol,43:Ol,45:Ol,48:Ol,49:Ol,50:Ol,51:Ol,52:Ol,53:Ol,54:Ol,55:Ol,56:Ol,57:Ol,62:iIe},$ht={91:Mdt},Mht={[-2]:H7,[-1]:H7,32:H7},Lht={35:zdt,42:M4,45:[Hhe,M4],60:Wdt,61:Hhe,95:M4,96:zhe,126:zhe},Fht={38:oIe,92:sIe},Bht={[-5]:q7,[-4]:q7,[-3]:q7,33:cht,38:oIe,42:Hq,60:[ddt,Zdt],91:dht,92:[jdt,sIe],93:lZ,95:Hq,96:Tdt},jht={null:[Hq,Aht]},Uht={null:[42,95]},zht={null:[]},Vht=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Uht,contentInitial:$ht,disable:zht,document:Oht,flow:Lht,flowInitial:Mht,insideSpan:jht,string:Fht,text:Bht},Symbol.toStringTag,{value:"Module"}));function Hht(e){const n=Qft([Vht,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(sdt),document:i(adt),flow:i(Tht),string:i(Iht),text:i(kht)};return r;function i(s){return o;function o(a){return Dht(r,s,a)}}}function qht(e){for(;!aIe(e););return e}const qhe=/[\0\t\n\r]/g;function Wht(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(qhe.lastIndex=f,l=qhe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Ght=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Yht(e){return e.replace(Ght,Kht)}function Kht(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return rIe(n.slice(s?2:1),s?16:10)}return aZ(n)||e}const hIe={}.hasOwnProperty;function Xht(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Qht(n)(qht(Hht(n).document().write(Wht()(e,t,!0))))}function Qht(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(st),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(It),blockQuote:s(Oe),characterEscape:N,characterReference:N,codeFenced:s(et),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(et,o),codeText:s(Re,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(St),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ze),hardBreakEscape:s(mt),hardBreakTrailing:s(mt),htmlFlow:s(Ce,o),htmlFlowData:N,htmlText:s(Ce,o),htmlTextData:N,image:s(Fe),label:o,link:s(st),listItem:s(Dt),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Je),reference:L,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(It),strong:s(_e),thematicBreak:s(Rt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:Se,autolinkProtocol:ce,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:ue,characterReference:we,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(q),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(O),htmlFlowData:k,htmlText:u(B),htmlTextData:k,image:u(Y),label:J,labelText:K,lineEnding:P,link:u(H),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:V,resourceDestinationString:F,resourceTitleString:U,resource:W,setextHeading:u(I),setextHeadingLineSequence:C,setextHeadingText:T,strong:u(),thematicBreak:u()}};pIe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Ee){let $e={type:"root",children:[]};const ot={stack:[$e],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},xt=[];let jt=-1;for(;++jt<Ee.length;)if(Ee[jt][1].type==="listOrdered"||Ee[jt][1].type==="listUnordered")if(Ee[jt][0]==="enter")xt.push(jt);else{const Un=xt.pop();jt=i(Ee,Un,jt)}for(jt=-1;++jt<Ee.length;){const Un=t[Ee[jt][0]];hIe.call(Un,Ee[jt][1].type)&&Un[Ee[jt][1].type].call(Object.assign({sliceSerialize:Ee[jt][2].sliceSerialize},ot),Ee[jt][1])}if(ot.tokenStack.length>0){const Un=ot.tokenStack[ot.tokenStack.length-1];(Un[1]||Whe).call(ot,void 0,Un[0])}for($e.position={start:yy(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:yy(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},jt=-1;++jt<t.transforms.length;)$e=t.transforms[jt]($e)||$e;return $e}function i(Ee,$e,ot){let xt=$e-1,jt=-1,Un=!1,dr,Tr,xi,Tn;for(;++xt<=ot;){const zn=Ee[xt];switch(zn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zn[0]==="enter"?jt++:jt--,Tn=void 0;break}case"lineEndingBlank":{zn[0]==="enter"&&(dr&&!Tn&&!jt&&!xi&&(xi=xt),Tn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Tn=void 0}if(!jt&&zn[0]==="enter"&&zn[1].type==="listItemPrefix"||jt===-1&&zn[0]==="exit"&&(zn[1].type==="listUnordered"||zn[1].type==="listOrdered")){if(dr){let hr=xt;for(Tr=void 0;hr--;){const gr=Ee[hr];if(gr[1].type==="lineEnding"||gr[1].type==="lineEndingBlank"){if(gr[0]==="exit")continue;Tr&&(Ee[Tr][1].type="lineEndingBlank",Un=!0),gr[1].type="lineEnding",Tr=hr}else if(!(gr[1].type==="linePrefix"||gr[1].type==="blockQuotePrefix"||gr[1].type==="blockQuotePrefixWhitespace"||gr[1].type==="blockQuoteMarker"||gr[1].type==="listItemIndent"))break}xi&&(!Tr||xi<Tr)&&(dr._spread=!0),dr.end=Object.assign({},Tr?Ee[Tr][1].start:zn[1].end),Ee.splice(Tr||xt,0,["exit",dr,zn[2]]),xt++,ot++}if(zn[1].type==="listItemPrefix"){const hr={type:"listItem",_spread:!1,start:Object.assign({},zn[1].start),end:void 0};dr=hr,Ee.splice(xt,0,["enter",hr,zn[2]]),xt++,ot++,xi=void 0,Tn=!0}}}return Ee[$e][1]._spread=Un,ot}function s(Ee,$e){return ot;function ot(xt){a.call(this,Ee(xt),xt),$e&&$e.call(this,xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ee,$e,ot){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([$e,ot]),Ee.position={start:yy($e.start),end:void 0}}function u(Ee){return $e;function $e(ot){Ee&&Ee.call(this,ot),l.call(this,ot)}}function l(Ee,$e){const ot=this.stack.pop(),xt=this.tokenStack.pop();if(xt)xt[0].type!==Ee.type&&($e?$e.call(this,Ee,xt[0]):(xt[1]||Whe).call(this,Ee,xt[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+ZI({start:Ee.start,end:Ee.end})+"): its not open");ot.position.end=yy(Ee.end)}function c(){return Kft(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Ee){if(this.data.expectingFirstListItemValue){const $e=this.stack[this.stack.length-2];$e.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.lang=Ee}function p(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.meta=Ee}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Ee.replace(/(\r?\n|\r)$/g,"")}function v(Ee){const $e=this.resume(),ot=this.stack[this.stack.length-1];ot.label=$e,ot.identifier=vS(this.sliceSerialize(Ee)).toLowerCase()}function x(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.title=Ee}function w(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.url=Ee}function E(Ee){const $e=this.stack[this.stack.length-1];if(!$e.depth){const ot=this.sliceSerialize(Ee).length;$e.depth=ot}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function C(Ee){const $e=this.stack[this.stack.length-1];$e.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function N(Ee){const ot=this.stack[this.stack.length-1].children;let xt=ot[ot.length-1];(!xt||xt.type!=="text")&&(xt=kt(),xt.position={start:yy(Ee.start),end:void 0},ot.push(xt)),this.stack.push(xt)}function k(Ee){const $e=this.stack.pop();$e.value+=this.sliceSerialize(Ee),$e.position.end=yy(Ee.end)}function P(Ee){const $e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=$e.children[$e.children.length-1];ot.position.end=yy(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes($e.type)&&(N.call(this,Ee),k.call(this,Ee))}function M(){this.data.atHardBreak=!0}function O(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Ee}function B(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Ee}function q(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Ee}function H(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const $e=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=$e,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function Y(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const $e=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=$e,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function K(Ee){const $e=this.sliceSerialize(Ee),ot=this.stack[this.stack.length-2];ot.label=Yht($e),ot.identifier=vS($e).toLowerCase()}function J(){const Ee=this.stack[this.stack.length-1],$e=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const xt=Ee.children;ot.children=xt}else ot.alt=$e}function F(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.url=Ee}function U(){const Ee=this.resume(),$e=this.stack[this.stack.length-1];$e.title=Ee}function W(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function V(Ee){const $e=this.resume(),ot=this.stack[this.stack.length-1];ot.label=$e,ot.identifier=vS(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function Q(Ee){this.data.characterReferenceType=Ee.type}function ue(Ee){const $e=this.sliceSerialize(Ee),ot=this.data.characterReferenceType;let xt;ot?(xt=rIe($e,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xt=aZ($e);const jt=this.stack[this.stack.length-1];jt.value+=xt}function we(Ee){const $e=this.stack.pop();$e.position.end=yy(Ee.end)}function ce(Ee){k.call(this,Ee);const $e=this.stack[this.stack.length-1];$e.url=this.sliceSerialize(Ee)}function Se(Ee){k.call(this,Ee);const $e=this.stack[this.stack.length-1];$e.url="mailto:"+this.sliceSerialize(Ee)}function Oe(){return{type:"blockquote",children:[]}}function et(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function St(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ze(){return{type:"emphasis",children:[]}}function It(){return{type:"heading",depth:0,children:[]}}function mt(){return{type:"break"}}function Ce(){return{type:"html",value:""}}function Fe(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function yt(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function Dt(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function Rt(){return{type:"thematicBreak"}}}function yy(e){return{line:e.line,column:e.column,offset:e.offset}}function pIe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?pIe(e,r):Jht(e,r)}}function Jht(e,t){let n;for(n in t)if(hIe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Whe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ZI({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ZI({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ZI({start:t.start,end:t.end})+") is still open")}function Zht(e){const t=this;t.parser=n;function n(r){return Xht(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function ept(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function tpt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function npt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function rpt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ipt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function spt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=R2(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function opt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function apt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function mIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function upt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return mIe(e,t);const i={src:R2(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function lpt(e,t){const n={src:R2(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function cpt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function fpt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return mIe(e,t);const i={href:R2(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function dpt(e,t){const n={href:R2(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function hpt(e,t,n){const r=e.all(t),i=n?ppt(n):gIe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function ppt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=gIe(n[r])}return t}function gIe(e){const t=e.spread;return t??e.children.length>1}function mpt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function gpt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ypt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function vpt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bpt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Dm(t.children[1]),u=C5(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function xpt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function _pt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Ghe=9,Yhe=32;function wpt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Khe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Khe(t.slice(i),i>0,!1)),s.join("")}function Khe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Ghe||s===Yhe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Ghe||s===Yhe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Ept(e,t){const n={type:"text",value:wpt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Spt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Tpt={blockquote:ept,break:tpt,code:npt,delete:rpt,emphasis:ipt,footnoteReference:spt,heading:opt,html:apt,imageReference:upt,image:lpt,inlineCode:cpt,linkReference:fpt,link:dpt,listItem:hpt,list:mpt,paragraph:gpt,root:ypt,strong:vpt,table:bpt,tableCell:_pt,tableRow:xpt,text:Ept,thematicBreak:Spt,toml:q3,yaml:q3,definition:q3,footnoteDefinition:q3};function q3(){}const yIe=-1,I5=0,S$=1,T$=2,cZ=3,fZ=4,dZ=5,hZ=6,vIe=7,bIe=8,Xhe=typeof self=="object"?self:globalThis,Cpt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case I5:case yIe:return n(o,i);case S$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case T$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case cZ:return n(new Date(o),i);case fZ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case dZ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case hZ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case vIe:{const{name:a,message:u}=o;return n(new Xhe[a](u),i)}case bIe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Xhe[s](o),i)};return r},Qhe=e=>Cpt(new Map,e)(0),Qw="",{toString:Apt}={},{keys:Ipt}=Object,aA=e=>{const t=typeof e;if(t!=="object"||!e)return[I5,t];const n=Apt.call(e).slice(8,-1);switch(n){case"Array":return[S$,Qw];case"Object":return[T$,Qw];case"Date":return[cZ,Qw];case"RegExp":return[fZ,Qw];case"Map":return[dZ,Qw];case"Set":return[hZ,Qw]}return n.includes("Array")?[S$,n]:n.includes("Error")?[vIe,n]:[T$,n]},W3=([e,t])=>e===I5&&(t==="function"||t==="symbol"),kpt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=aA(o);switch(a){case I5:{let c=o;switch(u){case"bigint":a=bIe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([yIe],o)}return i([a,c],o)}case S$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case T$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Ipt(o))(e||!W3(aA(o[d])))&&c.push([s(d),s(o[d])]);return f}case cZ:return i([a,o.toISOString()],o);case fZ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case dZ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(W3(aA(d))||W3(aA(h))))&&c.push([s(d),s(h)]);return f}case hZ:{const c=[],f=i([a,c],o);for(const d of o)(e||!W3(aA(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Jhe=(e,{json:t,lossy:n}={})=>{const r=[];return kpt(!(t||n),!!t,new Map,r)(e),r},sT=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Qhe(Jhe(e,t)):structuredClone(e):(e,t)=>Qhe(Jhe(e,t));function Rpt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Dpt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Npt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Rpt,r=e.options.footnoteBackLabel||Dpt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=R2(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...sT(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const xIe=function(e){if(e==null)return Mpt;if(typeof e=="function")return k5(e);if(typeof e=="object")return Array.isArray(e)?Ppt(e):Opt(e);if(typeof e=="string")return $pt(e);throw new Error("Expected function, string, or object as test")};function Ppt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=xIe(e[n]);return k5(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Opt(e){const t=e;return k5(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function $pt(e){return k5(t);function t(n){return n&&n.type===e}}function k5(e){return t;function t(n,r,i){return!!(Lpt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Mpt(){return!0}function Lpt(e){return e!==null&&typeof e=="object"&&"type"in e}const _Ie=[],Fpt=!0,Zhe=!1,Bpt="skip";function jpt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=xIe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=_Ie,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Upt(n(u,c)),h[0]===Zhe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Bpt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Zhe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Upt(e){return Array.isArray(e)?e:typeof e=="number"?[Fpt,e]:e==null?_Ie:[e]}function pZ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),jpt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const qq={}.hasOwnProperty,zpt={};function Vpt(e,t){const n=t||zpt,r=new Map,i=new Map,s=new Map,o={...Tpt,...n.handlers},a={all:l,applyData:qpt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Hpt,wrap:Gpt};return pZ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(qq.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=sT(g);return y.children=a.all(c),y}return sT(c)}return(a.options.unknownHandler||Wpt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=epe(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=epe(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Hpt(e,t){e.position&&(t.position=Tft(e))}function qpt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,sT(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Wpt(e,t){const n=t.data||{},r="value"in t&&!(qq.call(n,"hProperties")||qq.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Gpt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function epe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function tpe(e,t){const n=Vpt(e,t),r=n.one(e,void 0),i=Npt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Ypt(e,t){return e&&"run"in e?async function(n,r){const i=tpe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return tpe(n,{file:r,...t||e})}}function npe(e){if(e)throw e}var L4=Object.prototype.hasOwnProperty,wIe=Object.prototype.toString,rpe=Object.defineProperty,ipe=Object.getOwnPropertyDescriptor,spe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):wIe.call(t)==="[object Array]"},ope=function(t){if(!t||wIe.call(t)!=="[object Object]")return!1;var n=L4.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&L4.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||L4.call(t,i)},ape=function(t,n){rpe&&n.name==="__proto__"?rpe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},upe=function(t,n){if(n==="__proto__")if(L4.call(t,n)){if(ipe)return ipe(t,n).value}else return;return t[n]},Kpt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=upe(a,n),i=upe(t,n),a!==i&&(c&&i&&(ope(i)||(s=spe(i)))?(s?(s=!1,o=r&&spe(r)?r:[]):o=r&&ope(r)?r:{},ape(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&ape(a,{name:n,newValue:i}));return a};const W7=Am(Kpt);function Wq(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Xpt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Qpt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Qpt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const mp={basename:Jpt,dirname:Zpt,extname:emt,join:tmt,sep:"/"};function Jpt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');tN(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Zpt(e){if(tN(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function emt(e){tN(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function tmt(...e){let t=-1,n;for(;++t<e.length;)tN(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":nmt(n)}function nmt(e){tN(e);const t=e.codePointAt(0)===47;let n=rmt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function rmt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function tN(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const imt={cwd:smt};function smt(){return"/"}function Gq(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function omt(e){if(typeof e=="string")e=new URL(e);else if(!Gq(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return amt(e)}function amt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const G7=["history","path","basename","stem","extname","dirname"];class EIe{constructor(t){let n;t?Gq(t)?n={path:t}:typeof t=="string"||umt(t)?n={value:t}:n=t:n={},this.cwd=imt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<G7.length;){const s=G7[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)G7.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?mp.basename(this.path):void 0}set basename(t){K7(t,"basename"),Y7(t,"basename"),this.path=mp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?mp.dirname(this.path):void 0}set dirname(t){lpe(this.basename,"dirname"),this.path=mp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?mp.extname(this.path):void 0}set extname(t){if(Y7(t,"extname"),lpe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=mp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Gq(t)&&(t=omt(t)),K7(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?mp.basename(this.path,this.extname):void 0}set stem(t){K7(t,"stem"),Y7(t,"stem"),this.path=mp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Mu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Y7(e,t){if(e&&e.includes(mp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+mp.sep+"`")}function K7(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function lpe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function umt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const lmt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},cmt={}.hasOwnProperty;class mZ extends lmt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Xpt()}copy(){const t=new mZ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(W7(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(J7("data",this.frozen),this.namespace[t]=n,this):cmt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(J7("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=G3(t),r=this.parser||this.Parser;return X7("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),X7("process",this.parser||this.Parser),Q7("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=G3(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);hmt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),X7("processSync",this.parser||this.Parser),Q7("processSync",this.compiler||this.Compiler),this.process(t,i),fpe("processSync","process",n),r;function i(s,o){n=!0,npe(s),r=o}}run(t,n,r){cpe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=G3(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),fpe("runSync","run",r),i;function s(o,a){npe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=G3(n),i=this.compiler||this.Compiler;return Q7("stringify",i),cpe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(J7("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=W7(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];Wq(m)&&Wq(h)&&(h=W7(!0,m,h)),r[d]=[l,h,...p]}}}}const fmt=new mZ().freeze();function X7(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Q7(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function J7(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function cpe(e){if(!Wq(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function fpe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function G3(e){return dmt(e)?e:new EIe(e)}function dmt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function hmt(e){return typeof e=="string"||pmt(e)}function pmt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const mmt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",dpe=[],hpe={allowDangerousHtml:!0},gmt=/^(https?|ircs?|mailto|xmpp)$/i,ymt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vmt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||dpe,u=e.remarkPlugins||dpe,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...hpe}:hpe,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||bmt,h=fmt().use(Zht).use(u).use(Ypt,l).use(a),p=new EIe;typeof r=="string"&&(p.value=r);for(const v of ymt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+mmt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),pZ(g,y),Dft(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,x,w){if(v.type==="raw"&&w&&typeof x=="number")return c?w.children.splice(x,1):w.children[x]={type:"text",value:v.value},x;if(v.type==="element"){let E;for(E in V7)if(Object.hasOwn(V7,E)&&Object.hasOwn(v.properties,E)){const T=v.properties[E],C=V7[E];(C===null||C.includes(v.tagName))&&(v.properties[E]=d(String(T||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof x=="number"&&(E=!n(v,x,w)),E&&w&&typeof x=="number")return f&&v.children?w.children.splice(x,1,...v.children):w.children.splice(x,1),x}}}function bmt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||gmt.test(e.slice(0,t))?e:""}const ppe=/[#.]/g;function xmt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){ppe.lastIndex=i;const a=ppe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const _mt=new Set(["button","menu","reset","submit"]),Yq={}.hasOwnProperty;function SIe(e,t,n){const r=n&&Tmt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=xmt(s,t),l.tagName=l.tagName.toLowerCase(),r&&Yq.call(r,l.tagName)&&(l.tagName=r[l.tagName]),wmt(o,l.tagName)){let c;for(c in o)Yq.call(o,c)&&Emt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)Kq(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function wmt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?_mt.has(e.type.toLowerCase()):!("value"in e)}function Emt(e,t,n,r){const i=T5(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Ahe(r):i.commaSeparated?o=whe(r):i.commaOrSpaceSeparated?o=Ahe(whe(r).join(" ")):o=mpe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Smt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=mpe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function Kq(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)Kq(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?Kq(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function mpe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||pR(n)===pR(t)))return!0}return n}function Smt(e){const t=[];let n;for(n in e)Yq.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Tmt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Cmt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Amt=SIe(eN,"div"),Imt=SIe(Pv,"g",Cmt),Z7=/\r?\n|\r/g;function kmt(e){const t=String(e),n=[];for(Z7.lastIndex=0;Z7.test(t);)n.push(Z7.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const hx={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},TIe={}.hasOwnProperty,Rmt=Object.prototype;function Dmt(e,t){const n=t;return gZ({file:n.file||void 0,location:!1,schema:n.space==="svg"?Pv:eN,verbose:n.verbose||!1},e)}function gZ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},F4(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:CIe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=kmt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},F4(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},F4(e,r,n),n}default:return n=Nmt(e,t),n}}function CIe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=gZ(e,t[n]);r.push(i)}return r}function Nmt(e,t){const n=e.schema;e.schema=t.namespaceURI===hx.svg?Pv:eN;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;TIe.call(Rmt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Imt:Amt)(t.tagName,i,CIe(e,t.childNodes));if(F4(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&GE(u.startTag),c=u&&u.endTag&&GE(u.endTag),f=gZ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function F4(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Pmt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Pmt(e,t,n){const r=GE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)TIe.call(n.attrs,o)&&(s[T5(e.schema,o).property]=GE(n.attrs[o]));n.startTag;const a=GE(n.startTag),u=n.endTag?GE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function GE(e){const t=gpe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=gpe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function gpe(e){return e.line&&e.column?e:void 0}const ype={}.hasOwnProperty;function AIe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&ype.call(i,e)){const u=String(i[e]);o=ype.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Omt={}.hasOwnProperty,IIe=AIe("type",{handlers:{root:Mmt,element:Umt,text:Bmt,comment:jmt,doctype:Fmt}});function $mt(e,t){const r=t.space;return IIe(e,r==="svg"?Pv:eN)}function Mmt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=yZ(e.children,n,t),D2(e,n),n}function Lmt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=yZ(e.children,n,t),D2(e,n),n}function Fmt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return D2(e,t),t}function Bmt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return D2(e,t),t}function jmt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return D2(e,t),t}function Umt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Pv);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Omt.call(e.properties,s)){const u=zmt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:hx[o],childNodes:[],parentNode:null};return a.childNodes=yZ(e.children,a,r),D2(e,a),e.tagName==="template"&&e.content&&(a.content=Lmt(e.content,r)),a}function zmt(e,t,n){const r=T5(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?jAe(n):KAe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=hx[r.space]}return i}function yZ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=IIe(e[r],n);s.parentNode=t,i.push(s)}return i}function D2(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Vmt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Hmt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gs="";var ie;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ie=ie||(ie={}));const Dl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function kIe(e){return e>=55296&&e<=57343}function qmt(e){return e>=56320&&e<=57343}function Wmt(e,t){return(e-55296)*1024+9216+t}function RIe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function DIe(e){return e>=64976&&e<=65007||Hmt.has(e)}var Ue;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ue=Ue||(Ue={}));const Gmt=65536;class Ymt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Gmt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(qmt(n))return this.pos++,this._addGap(),Wmt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ie.EOF;return this._err(Ue.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;const r=this.html.charCodeAt(n);return r===ie.CARRIAGE_RETURN?ie.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;let t=this.html.charCodeAt(this.pos);return t===ie.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ie.LINE_FEED):t===ie.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,kIe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ie.LINE_FEED||t===ie.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){RIe(t)?this._err(Ue.controlCharacterInInputStream):DIe(t)&&this._err(Ue.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var or;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(or=or||(or={}));function NIe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Ey=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Kmt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var eU;const Xmt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Qmt=(eU=String.fromCodePoint)!==null&&eU!==void 0?eU:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Jmt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Xmt.get(e))!==null&&t!==void 0?t:e}var aa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(aa||(aa={}));const Zmt=32;var Lp;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Lp||(Lp={}));function Xq(e){return e>=aa.ZERO&&e<=aa.NINE}function e0t(e){return e>=aa.UPPER_A&&e<=aa.UPPER_F||e>=aa.LOWER_A&&e<=aa.LOWER_F}function t0t(e){return e>=aa.UPPER_A&&e<=aa.UPPER_Z||e>=aa.LOWER_A&&e<=aa.LOWER_Z||Xq(e)}function n0t(e){return e===aa.EQUALS||t0t(e)}var ea;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ea||(ea={}));var Xb;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Xb||(Xb={}));class r0t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ea.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Xb.Strict}startEntity(t){this.decodeMode=t,this.state=ea.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ea.EntityStart:return t.charCodeAt(n)===aa.NUM?(this.state=ea.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ea.NamedEntity,this.stateNamedEntity(t,n));case ea.NumericStart:return this.stateNumericStart(t,n);case ea.NumericDecimal:return this.stateNumericDecimal(t,n);case ea.NumericHex:return this.stateNumericHex(t,n);case ea.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Zmt)===aa.LOWER_X?(this.state=ea.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ea.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Xq(i)||e0t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Xq(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===aa.SEMI)this.consumed+=1;else if(this.decodeMode===Xb.Strict)return 0;return this.emitCodePoint(Jmt(this.result),this.consumed),this.errors&&(t!==aa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Lp.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=OIe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Xb.Attribute&&(s===0||n0t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Lp.VALUE_LENGTH)>>14,s!==0){if(o===aa.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Xb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Lp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Lp.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ea.NamedEntity:return this.result!==0&&(this.decodeMode!==Xb.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ea.NumericDecimal:return this.emitNumericEntity(0,2);case ea.NumericHex:return this.emitNumericEntity(0,3);case ea.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ea.EntityStart:return 0}}}function PIe(e){let t="";const n=new r0t(e,r=>t+=Qmt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function OIe(e,t,n,r){const i=(t&Lp.BRANCH_LENGTH)>>7,s=t&Lp.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}PIe(Ey);PIe(Kmt);var Ke;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ke=Ke||(Ke={}));var x1;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(x1=x1||(x1={}));var Fc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Fc=Fc||(Fc={}));var Ne;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ne=Ne||(Ne={}));var $;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})($=$||($={}));const i0t=new Map([[Ne.A,$.A],[Ne.ADDRESS,$.ADDRESS],[Ne.ANNOTATION_XML,$.ANNOTATION_XML],[Ne.APPLET,$.APPLET],[Ne.AREA,$.AREA],[Ne.ARTICLE,$.ARTICLE],[Ne.ASIDE,$.ASIDE],[Ne.B,$.B],[Ne.BASE,$.BASE],[Ne.BASEFONT,$.BASEFONT],[Ne.BGSOUND,$.BGSOUND],[Ne.BIG,$.BIG],[Ne.BLOCKQUOTE,$.BLOCKQUOTE],[Ne.BODY,$.BODY],[Ne.BR,$.BR],[Ne.BUTTON,$.BUTTON],[Ne.CAPTION,$.CAPTION],[Ne.CENTER,$.CENTER],[Ne.CODE,$.CODE],[Ne.COL,$.COL],[Ne.COLGROUP,$.COLGROUP],[Ne.DD,$.DD],[Ne.DESC,$.DESC],[Ne.DETAILS,$.DETAILS],[Ne.DIALOG,$.DIALOG],[Ne.DIR,$.DIR],[Ne.DIV,$.DIV],[Ne.DL,$.DL],[Ne.DT,$.DT],[Ne.EM,$.EM],[Ne.EMBED,$.EMBED],[Ne.FIELDSET,$.FIELDSET],[Ne.FIGCAPTION,$.FIGCAPTION],[Ne.FIGURE,$.FIGURE],[Ne.FONT,$.FONT],[Ne.FOOTER,$.FOOTER],[Ne.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[Ne.FORM,$.FORM],[Ne.FRAME,$.FRAME],[Ne.FRAMESET,$.FRAMESET],[Ne.H1,$.H1],[Ne.H2,$.H2],[Ne.H3,$.H3],[Ne.H4,$.H4],[Ne.H5,$.H5],[Ne.H6,$.H6],[Ne.HEAD,$.HEAD],[Ne.HEADER,$.HEADER],[Ne.HGROUP,$.HGROUP],[Ne.HR,$.HR],[Ne.HTML,$.HTML],[Ne.I,$.I],[Ne.IMG,$.IMG],[Ne.IMAGE,$.IMAGE],[Ne.INPUT,$.INPUT],[Ne.IFRAME,$.IFRAME],[Ne.KEYGEN,$.KEYGEN],[Ne.LABEL,$.LABEL],[Ne.LI,$.LI],[Ne.LINK,$.LINK],[Ne.LISTING,$.LISTING],[Ne.MAIN,$.MAIN],[Ne.MALIGNMARK,$.MALIGNMARK],[Ne.MARQUEE,$.MARQUEE],[Ne.MATH,$.MATH],[Ne.MENU,$.MENU],[Ne.META,$.META],[Ne.MGLYPH,$.MGLYPH],[Ne.MI,$.MI],[Ne.MO,$.MO],[Ne.MN,$.MN],[Ne.MS,$.MS],[Ne.MTEXT,$.MTEXT],[Ne.NAV,$.NAV],[Ne.NOBR,$.NOBR],[Ne.NOFRAMES,$.NOFRAMES],[Ne.NOEMBED,$.NOEMBED],[Ne.NOSCRIPT,$.NOSCRIPT],[Ne.OBJECT,$.OBJECT],[Ne.OL,$.OL],[Ne.OPTGROUP,$.OPTGROUP],[Ne.OPTION,$.OPTION],[Ne.P,$.P],[Ne.PARAM,$.PARAM],[Ne.PLAINTEXT,$.PLAINTEXT],[Ne.PRE,$.PRE],[Ne.RB,$.RB],[Ne.RP,$.RP],[Ne.RT,$.RT],[Ne.RTC,$.RTC],[Ne.RUBY,$.RUBY],[Ne.S,$.S],[Ne.SCRIPT,$.SCRIPT],[Ne.SECTION,$.SECTION],[Ne.SELECT,$.SELECT],[Ne.SOURCE,$.SOURCE],[Ne.SMALL,$.SMALL],[Ne.SPAN,$.SPAN],[Ne.STRIKE,$.STRIKE],[Ne.STRONG,$.STRONG],[Ne.STYLE,$.STYLE],[Ne.SUB,$.SUB],[Ne.SUMMARY,$.SUMMARY],[Ne.SUP,$.SUP],[Ne.TABLE,$.TABLE],[Ne.TBODY,$.TBODY],[Ne.TEMPLATE,$.TEMPLATE],[Ne.TEXTAREA,$.TEXTAREA],[Ne.TFOOT,$.TFOOT],[Ne.TD,$.TD],[Ne.TH,$.TH],[Ne.THEAD,$.THEAD],[Ne.TITLE,$.TITLE],[Ne.TR,$.TR],[Ne.TRACK,$.TRACK],[Ne.TT,$.TT],[Ne.U,$.U],[Ne.UL,$.UL],[Ne.SVG,$.SVG],[Ne.VAR,$.VAR],[Ne.WBR,$.WBR],[Ne.XMP,$.XMP]]);function N2(e){var t;return(t=i0t.get(e))!==null&&t!==void 0?t:$.UNKNOWN}const ht=$,s0t={[Ke.HTML]:new Set([ht.ADDRESS,ht.APPLET,ht.AREA,ht.ARTICLE,ht.ASIDE,ht.BASE,ht.BASEFONT,ht.BGSOUND,ht.BLOCKQUOTE,ht.BODY,ht.BR,ht.BUTTON,ht.CAPTION,ht.CENTER,ht.COL,ht.COLGROUP,ht.DD,ht.DETAILS,ht.DIR,ht.DIV,ht.DL,ht.DT,ht.EMBED,ht.FIELDSET,ht.FIGCAPTION,ht.FIGURE,ht.FOOTER,ht.FORM,ht.FRAME,ht.FRAMESET,ht.H1,ht.H2,ht.H3,ht.H4,ht.H5,ht.H6,ht.HEAD,ht.HEADER,ht.HGROUP,ht.HR,ht.HTML,ht.IFRAME,ht.IMG,ht.INPUT,ht.LI,ht.LINK,ht.LISTING,ht.MAIN,ht.MARQUEE,ht.MENU,ht.META,ht.NAV,ht.NOEMBED,ht.NOFRAMES,ht.NOSCRIPT,ht.OBJECT,ht.OL,ht.P,ht.PARAM,ht.PLAINTEXT,ht.PRE,ht.SCRIPT,ht.SECTION,ht.SELECT,ht.SOURCE,ht.STYLE,ht.SUMMARY,ht.TABLE,ht.TBODY,ht.TD,ht.TEMPLATE,ht.TEXTAREA,ht.TFOOT,ht.TH,ht.THEAD,ht.TITLE,ht.TR,ht.TRACK,ht.UL,ht.WBR,ht.XMP]),[Ke.MATHML]:new Set([ht.MI,ht.MO,ht.MN,ht.MS,ht.MTEXT,ht.ANNOTATION_XML]),[Ke.SVG]:new Set([ht.TITLE,ht.FOREIGN_OBJECT,ht.DESC]),[Ke.XLINK]:new Set,[Ke.XML]:new Set,[Ke.XMLNS]:new Set};function $Ie(e){return e===ht.H1||e===ht.H2||e===ht.H3||e===ht.H4||e===ht.H5||e===ht.H6}Ne.STYLE,Ne.SCRIPT,Ne.XMP,Ne.IFRAME,Ne.NOEMBED,Ne.NOFRAMES,Ne.PLAINTEXT;const o0t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var oe;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(oe||(oe={}));const io={DATA:oe.DATA,RCDATA:oe.RCDATA,RAWTEXT:oe.RAWTEXT,SCRIPT_DATA:oe.SCRIPT_DATA,PLAINTEXT:oe.PLAINTEXT,CDATA_SECTION:oe.CDATA_SECTION};function tk(e){return e>=ie.DIGIT_0&&e<=ie.DIGIT_9}function tI(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_Z}function a0t(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_Z}function Sy(e){return a0t(e)||tI(e)}function Qq(e){return Sy(e)||tk(e)}function MIe(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_F}function LIe(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_F}function u0t(e){return tk(e)||MIe(e)||LIe(e)}function Y3(e){return e+32}function FIe(e){return e===ie.SPACE||e===ie.LINE_FEED||e===ie.TABULATION||e===ie.FORM_FEED}function l0t(e){return e===ie.EQUALS_SIGN||Qq(e)}function vpe(e){return FIe(e)||e===ie.SOLIDUS||e===ie.GREATER_THAN_SIGN}class c0t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=oe.DATA,this.returnState=oe.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Ymt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:or.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:or.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:or.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:or.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(NIe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ue.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=N2(t.tagName),t.type===or.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ue.endTagWithAttributes),t.selfClosing&&this._err(Ue.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case or.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case or.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case or.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:or.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=FIe(t)?or.WHITESPACE_CHARACTER:t===ie.NULL?or.NULL_CHARACTER:or.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(or.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Ey[0];s>=0&&(s=OIe(Ey,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Ey[s];const a=o&Lp.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ie.SEMICOLON&&this._isCharacterReferenceInAttribute()&&l0t(this.preprocessor.peek(1))?(n=[ie.AMPERSAND],s+=u):(n=u===0?[Ey[s]&~Lp.VALUE_LENGTH]:u===1?[Ey[++s]]:[Ey[++s],Ey[++s]],r=0,i=t!==ie.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ue.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case oe.DATA:{this._stateData(t);break}case oe.RCDATA:{this._stateRcdata(t);break}case oe.RAWTEXT:{this._stateRawtext(t);break}case oe.SCRIPT_DATA:{this._stateScriptData(t);break}case oe.PLAINTEXT:{this._statePlaintext(t);break}case oe.TAG_OPEN:{this._stateTagOpen(t);break}case oe.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case oe.TAG_NAME:{this._stateTagName(t);break}case oe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case oe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case oe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case oe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case oe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case oe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case oe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case oe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case oe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case oe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case oe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case oe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case oe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case oe.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case oe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case oe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case oe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case oe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case oe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case oe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case oe.BOGUS_COMMENT:{this._stateBogusComment(t);break}case oe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case oe.COMMENT_START:{this._stateCommentStart(t);break}case oe.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case oe.COMMENT:{this._stateComment(t);break}case oe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case oe.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case oe.COMMENT_END:{this._stateCommentEnd(t);break}case oe.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case oe.DOCTYPE:{this._stateDoctype(t);break}case oe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case oe.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case oe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case oe.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case oe.CDATA_SECTION:{this._stateCdataSection(t);break}case oe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case oe.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case oe.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case oe.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case oe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case oe.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case oe.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case oe.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.TAG_OPEN;break}case ie.AMPERSAND:{this.returnState=oe.DATA,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitCodePoint(t);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ie.AMPERSAND:{this.returnState=oe.RCDATA,this.state=oe.CHARACTER_REFERENCE;break}case ie.LESS_THAN_SIGN:{this.state=oe.RCDATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.RAWTEXT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Sy(t))this._createStartTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case ie.EXCLAMATION_MARK:{this.state=oe.MARKUP_DECLARATION_OPEN;break}case ie.SOLIDUS:{this.state=oe.END_TAG_OPEN;break}case ie.QUESTION_MARK:{this._err(Ue.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t);break}case ie.EOF:{this._err(Ue.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ue.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=oe.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Sy(t))this._createEndTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case ie.GREATER_THAN_SIGN:{this._err(Ue.missingEndTagName),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ue.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.tagName+=gs;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(tI(t)?Y3(t):t)}}_stateRcdataLessThanSign(t){t===ie.SOLIDUS?this.state=oe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Sy(t)?(this.state=oe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=oe.BEFORE_ATTRIBUTE_NAME,!1;case ie.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=oe.SELF_CLOSING_START_TAG,!1;case ie.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=oe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ie.SOLIDUS?this.state=oe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Sy(t)?(this.state=oe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ie.SOLIDUS:{this.state=oe.SCRIPT_DATA_END_TAG_OPEN;break}case ie.EXCLAMATION_MARK:{this.state=oe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Sy(t)?(this.state=oe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ie.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ie.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ie.SOLIDUS?this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Sy(t)?(this._emitChars("<"),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Sy(t)?(this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Dl.SCRIPT,!1)&&vpe(this.preprocessor.peek(Dl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Dl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ie.SOLIDUS?(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Dl.SCRIPT,!1)&&vpe(this.preprocessor.peek(Dl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Dl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._err(Ue.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=oe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this._leaveAttrName(),this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._leaveAttrName(),this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:{this._err(Ue.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.name+=gs;break}default:this.currentAttr.name+=String.fromCodePoint(tI(t)?Y3(t):t)}}_stateAfterAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ie.EQUALS_SIGN:{this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{this.state=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this.state=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingAttributeValue),this.state=oe.DATA,this.emitCurrentTagToken();break}default:this.state=oe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=gs;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=gs;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_UNQUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=gs;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:case ie.EQUALS_SIGN:case ie.GRAVE_ACCENT:{this._err(Ue.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this._leaveAttrValue(),this.state=oe.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._err(Ue.missingWhitespaceBetweenAttributes),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ie.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._err(Ue.unexpectedSolidusInTag),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.data+=gs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Dl.DASH_DASH,!0)?(this._createCommentToken(Dl.DASH_DASH.length+1),this.state=oe.COMMENT_START):this._consumeSequenceIfMatch(Dl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Dl.DOCTYPE.length+1),this.state=oe.DOCTYPE):this._consumeSequenceIfMatch(Dl.CDATA_START,!0)?this.inForeignNode?this.state=oe.CDATA_SECTION:(this._err(Ue.cdataInHtmlContent),this._createCommentToken(Dl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=oe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ue.incorrectlyOpenedComment),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_START_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptClosingOfEmptyComment),this.state=oe.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptClosingOfEmptyComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END_DASH;break}case ie.LESS_THAN_SIGN:{n.data+="<",this.state=oe.COMMENT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.data+=gs;break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ie.EXCLAMATION_MARK:{n.data+="!",this.state=oe.COMMENT_LESS_THAN_SIGN_BANG;break}case ie.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ie.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=oe.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ie.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=oe.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ie.GREATER_THAN_SIGN&&t!==ie.EOF&&this._err(Ue.nestedComment),this.state=oe.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EXCLAMATION_MARK:{this.state=oe.COMMENT_END_BANG;break}case ie.HYPHEN_MINUS:{n.data+="-";break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{n.data+="--!",this.state=oe.COMMENT_END_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.incorrectlyClosedComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=oe.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ie.EOF:{this._err(Ue.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingWhitespaceBeforeDoctypeName),this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(tI(t))this._createDoctypeToken(String.fromCharCode(Y3(t))),this.state=oe.DOCTYPE_NAME;else switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._createDoctypeToken(gs),this.state=oe.DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=oe.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.AFTER_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.name+=gs;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(tI(t)?Y3(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Dl.PUBLIC,!1)?this.state=oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Dl.SYSTEM,!1)?this.state=oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ue.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.publicId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.publicId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.systemId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.systemId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter);break}case ie.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ie.RIGHT_SQUARE_BRACKET:{this.state=oe.CDATA_SECTION_BRACKET;break}case ie.EOF:{this._err(Ue.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ie.RIGHT_SQUARE_BRACKET?this.state=oe.CDATA_SECTION_END:(this._emitChars("]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA;break}case ie.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ie.NUMBER_SIGN?this.state=oe.NUMERIC_CHARACTER_REFERENCE:Qq(t)?(this.state=oe.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this.state=oe.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){Qq(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ie.SEMICOLON&&this._err(Ue.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ie.LATIN_SMALL_X||t===ie.LATIN_CAPITAL_X?this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE_START:tk(t)?(this.state=oe.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ue.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){u0t(t)?(this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ue.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){MIe(t)?this.charRefCode=this.charRefCode*16+t-55:LIe(t)?this.charRefCode=this.charRefCode*16+t-87:tk(t)?this.charRefCode=this.charRefCode*16+t-48:t===ie.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ue.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){tk(t)?this.charRefCode=this.charRefCode*10+t-48:t===ie.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ue.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ie.NULL)this._err(Ue.nullCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ue.characterReferenceOutsideUnicodeRange),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(kIe(this.charRefCode))this._err(Ue.surrogateCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(DIe(this.charRefCode))this._err(Ue.noncharacterCharacterReference);else if(RIe(this.charRefCode)||this.charRefCode===ie.CARRIAGE_RETURN){this._err(Ue.controlCharacterReference);const n=o0t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const BIe=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),bpe=new Set([...BIe,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),K3=new Map([[$.APPLET,Ke.HTML],[$.CAPTION,Ke.HTML],[$.HTML,Ke.HTML],[$.MARQUEE,Ke.HTML],[$.OBJECT,Ke.HTML],[$.TABLE,Ke.HTML],[$.TD,Ke.HTML],[$.TEMPLATE,Ke.HTML],[$.TH,Ke.HTML],[$.ANNOTATION_XML,Ke.MATHML],[$.MI,Ke.MATHML],[$.MN,Ke.MATHML],[$.MO,Ke.MATHML],[$.MS,Ke.MATHML],[$.MTEXT,Ke.MATHML],[$.DESC,Ke.SVG],[$.FOREIGN_OBJECT,Ke.SVG],[$.TITLE,Ke.SVG]]),f0t=[$.H1,$.H2,$.H3,$.H4,$.H5,$.H6],d0t=[$.TR,$.TEMPLATE,$.HTML],h0t=[$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML],p0t=[$.TABLE,$.TEMPLATE,$.HTML],m0t=[$.TD,$.TH];class g0t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ke.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ke.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(f0t,Ke.HTML)}popUntilTableCellPopped(){this.popUntilPopped(m0t,Ke.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(p0t,Ke.HTML)}clearBackToTableBodyContext(){this.clearBackTo(h0t,Ke.HTML)}clearBackToTableRowContext(){this.clearBackTo(d0t,Ke.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ke.HTML)return!0;if(K3.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if($Ie(n)&&r===Ke.HTML)return!0;if(K3.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ke.HTML)return!0;if((r===$.UL||r===$.OL)&&i===Ke.HTML||K3.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ke.HTML)return!0;if(r===$.BUTTON&&i===Ke.HTML||K3.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ke.HTML){if(r===t)return!0;if(r===$.TABLE||r===$.TEMPLATE||r===$.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ke.HTML){if(n===$.TBODY||n===$.THEAD||n===$.TFOOT)return!0;if(n===$.TABLE||n===$.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ke.HTML){if(r===t)return!0;if(r!==$.OPTION&&r!==$.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;BIe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;bpe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&bpe.has(this.currentTagId);)this.pop()}}const tU=3;var nh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(nh=nh||(nh={}));const xpe={type:nh.Marker};class y0t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===nh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<tU)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<tU)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=tU&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(xpe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:nh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:nh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(xpe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===nh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===nh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===nh.Element&&n.element===t)}}function _pe(e){return{nodeName:"#text",value:e,parentNode:null}}const EE={createDocument(){return{nodeName:"#document",mode:Fc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};EE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(EE.isTextNode(n)){n.value+=t;return}}EE.appendChild(e,_pe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&EE.isTextNode(r)?r.value+=t:EE.insertBefore(e,_pe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},jIe="html",v0t="about:legacy-compat",b0t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",UIe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],x0t=[...UIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],_0t=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),zIe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],w0t=[...zIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function wpe(e,t){return t.some(n=>e.startsWith(n))}function E0t(e){return e.name===jIe&&e.publicId===null&&(e.systemId===null||e.systemId===v0t)}function S0t(e){if(e.name!==jIe)return Fc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===b0t)return Fc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),_0t.has(n))return Fc.QUIRKS;let r=t===null?x0t:UIe;if(wpe(n,r))return Fc.QUIRKS;if(r=t===null?zIe:w0t,wpe(n,r))return Fc.LIMITED_QUIRKS}return Fc.NO_QUIRKS}const Epe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},T0t="definitionurl",C0t="definitionURL",A0t=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),I0t=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ke.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ke.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ke.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ke.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ke.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ke.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ke.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ke.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ke.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ke.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ke.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ke.XMLNS}]]),k0t=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),R0t=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function D0t(e){const t=e.tagID;return t===$.FONT&&e.attrs.some(({name:r})=>r===x1.COLOR||r===x1.SIZE||r===x1.FACE)||R0t.has(t)}function VIe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===T0t){e.attrs[t].name=C0t;break}}function HIe(e){for(let t=0;t<e.attrs.length;t++){const n=A0t.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function vZ(e){for(let t=0;t<e.attrs.length;t++){const n=I0t.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function N0t(e){const t=k0t.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=N2(e.tagName))}function P0t(e,t){return t===Ke.MATHML&&(e===$.MI||e===$.MO||e===$.MN||e===$.MS||e===$.MTEXT)}function O0t(e,t,n){if(t===Ke.MATHML&&e===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===x1.ENCODING){const i=n[r].value.toLowerCase();return i===Epe.TEXT_HTML||i===Epe.APPLICATION_XML}}return t===Ke.SVG&&(e===$.FOREIGN_OBJECT||e===$.DESC||e===$.TITLE)}function $0t(e,t,n,r){return(!r||r===Ke.HTML)&&O0t(e,t,n)||(!r||r===Ke.MATHML)&&P0t(e,t)}const M0t="hidden",L0t=8,F0t=3;var he;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(he||(he={}));const B0t={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},qIe=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),Spe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:EE,onParseError:null};let Tpe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=he.INITIAL,this.originalInsertionMode=he.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Spe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new c0t(this.options,this),this.activeFormattingElements=new y0t(this.treeAdapter),this.fragmentContextID=r?N2(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new g0t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Spe,...n};t??(t=r.treeAdapter.createElement(Ne.TEMPLATE,Ke.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ke.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===$.TEMPLATE&&s.tmplInsertionModeStack.unshift(he.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:B0t,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ke.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ke.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=he.TEXT}switchToPlaintextParsing(){this.insertionMode=he.TEXT,this.originalInsertionMode=he.IN_BODY,this.tokenizer.state=io.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ne.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ke.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=io.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=io.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=io.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=io.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ke.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ke.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ne.HTML,Ke.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,$.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===or.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===$.SVG&&this.treeAdapter.getTagName(n)===Ne.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ke.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===$.MGLYPH||t.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ke.HTML)}_processToken(t){switch(t.type){case or.CHARACTER:{this.onCharacter(t);break}case or.NULL_CHARACTER:{this.onNullCharacter(t);break}case or.COMMENT:{this.onComment(t);break}case or.DOCTYPE:{this.onDoctype(t);break}case or.START_TAG:{this._processStartTag(t);break}case or.END_TAG:{this.onEndTag(t);break}case or.EOF:{this.onEof(t);break}case or.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return $0t(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===nh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=he.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case $.TR:{this.insertionMode=he.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=he.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=he.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=he.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=he.IN_TABLE;return}case $.BODY:{this.insertionMode=he.IN_BODY;return}case $.FRAMESET:{this.insertionMode=he.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(t);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?he.AFTER_HEAD:he.BEFORE_HEAD;return}case $.TD:case $.TH:{if(t>0){this.insertionMode=he.IN_CELL;return}break}case $.HEAD:{if(t>0){this.insertionMode=he.IN_HEAD;return}break}}this.insertionMode=he.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=he.IN_SELECT_IN_TABLE;return}}this.insertionMode=he.IN_SELECT}_isElementCausesFosterParenting(t){return qIe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ke.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return s0t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){myt(this,t);return}switch(this.insertionMode){case he.INITIAL:{uA(this,t);break}case he.BEFORE_HTML:{nk(this,t);break}case he.BEFORE_HEAD:{rk(this,t);break}case he.IN_HEAD:{ik(this,t);break}case he.IN_HEAD_NO_SCRIPT:{sk(this,t);break}case he.AFTER_HEAD:{ok(this,t);break}case he.IN_BODY:case he.IN_CAPTION:case he.IN_CELL:case he.IN_TEMPLATE:{GIe(this,t);break}case he.TEXT:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{nU(this,t);break}case he.IN_TABLE_TEXT:{ZIe(this,t);break}case he.IN_COLUMN_GROUP:{C$(this,t);break}case he.AFTER_BODY:{A$(this,t);break}case he.AFTER_AFTER_BODY:{B4(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){pyt(this,t);return}switch(this.insertionMode){case he.INITIAL:{uA(this,t);break}case he.BEFORE_HTML:{nk(this,t);break}case he.BEFORE_HEAD:{rk(this,t);break}case he.IN_HEAD:{ik(this,t);break}case he.IN_HEAD_NO_SCRIPT:{sk(this,t);break}case he.AFTER_HEAD:{ok(this,t);break}case he.TEXT:{this._insertCharacters(t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{nU(this,t);break}case he.IN_COLUMN_GROUP:{C$(this,t);break}case he.AFTER_BODY:{A$(this,t);break}case he.AFTER_AFTER_BODY:{B4(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Jq(this,t);return}switch(this.insertionMode){case he.INITIAL:case he.BEFORE_HTML:case he.BEFORE_HEAD:case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:case he.IN_BODY:case he.IN_TABLE:case he.IN_CAPTION:case he.IN_COLUMN_GROUP:case he.IN_TABLE_BODY:case he.IN_ROW:case he.IN_CELL:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:case he.IN_TEMPLATE:case he.IN_FRAMESET:case he.AFTER_FRAMESET:{Jq(this,t);break}case he.IN_TABLE_TEXT:{lA(this,t);break}case he.AFTER_BODY:{W0t(this,t);break}case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{G0t(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case he.INITIAL:{Y0t(this,t);break}case he.BEFORE_HEAD:case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:{this._err(t,Ue.misplacedDoctype);break}case he.IN_TABLE_TEXT:{lA(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ue.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?gyt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case he.INITIAL:{uA(this,t);break}case he.BEFORE_HTML:{K0t(this,t);break}case he.BEFORE_HEAD:{Q0t(this,t);break}case he.IN_HEAD:{Vh(this,t);break}case he.IN_HEAD_NO_SCRIPT:{egt(this,t);break}case he.AFTER_HEAD:{ngt(this,t);break}case he.IN_BODY:{Lu(this,t);break}case he.IN_TABLE:{oT(this,t);break}case he.IN_TABLE_TEXT:{lA(this,t);break}case he.IN_CAPTION:{Jgt(this,t);break}case he.IN_COLUMN_GROUP:{_Z(this,t);break}case he.IN_TABLE_BODY:{N5(this,t);break}case he.IN_ROW:{P5(this,t);break}case he.IN_CELL:{tyt(this,t);break}case he.IN_SELECT:{nke(this,t);break}case he.IN_SELECT_IN_TABLE:{ryt(this,t);break}case he.IN_TEMPLATE:{syt(this,t);break}case he.AFTER_BODY:{ayt(this,t);break}case he.IN_FRAMESET:{uyt(this,t);break}case he.AFTER_FRAMESET:{cyt(this,t);break}case he.AFTER_AFTER_BODY:{dyt(this,t);break}case he.AFTER_AFTER_FRAMESET:{hyt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?yyt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case he.INITIAL:{uA(this,t);break}case he.BEFORE_HTML:{X0t(this,t);break}case he.BEFORE_HEAD:{J0t(this,t);break}case he.IN_HEAD:{Z0t(this,t);break}case he.IN_HEAD_NO_SCRIPT:{tgt(this,t);break}case he.AFTER_HEAD:{rgt(this,t);break}case he.IN_BODY:{D5(this,t);break}case he.TEXT:{zgt(this,t);break}case he.IN_TABLE:{gR(this,t);break}case he.IN_TABLE_TEXT:{lA(this,t);break}case he.IN_CAPTION:{Zgt(this,t);break}case he.IN_COLUMN_GROUP:{eyt(this,t);break}case he.IN_TABLE_BODY:{Zq(this,t);break}case he.IN_ROW:{tke(this,t);break}case he.IN_CELL:{nyt(this,t);break}case he.IN_SELECT:{rke(this,t);break}case he.IN_SELECT_IN_TABLE:{iyt(this,t);break}case he.IN_TEMPLATE:{oyt(this,t);break}case he.AFTER_BODY:{ske(this,t);break}case he.IN_FRAMESET:{lyt(this,t);break}case he.AFTER_FRAMESET:{fyt(this,t);break}case he.AFTER_AFTER_BODY:{B4(this,t);break}}}onEof(t){switch(this.insertionMode){case he.INITIAL:{uA(this,t);break}case he.BEFORE_HTML:{nk(this,t);break}case he.BEFORE_HEAD:{rk(this,t);break}case he.IN_HEAD:{ik(this,t);break}case he.IN_HEAD_NO_SCRIPT:{sk(this,t);break}case he.AFTER_HEAD:{ok(this,t);break}case he.IN_BODY:case he.IN_TABLE:case he.IN_CAPTION:case he.IN_COLUMN_GROUP:case he.IN_TABLE_BODY:case he.IN_ROW:case he.IN_CELL:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:{QIe(this,t);break}case he.TEXT:{Vgt(this,t);break}case he.IN_TABLE_TEXT:{lA(this,t);break}case he.IN_TEMPLATE:{ike(this,t);break}case he.AFTER_BODY:case he.IN_FRAMESET:case he.AFTER_FRAMESET:case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{xZ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ie.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:case he.TEXT:case he.IN_COLUMN_GROUP:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:case he.IN_FRAMESET:case he.AFTER_FRAMESET:{this._insertCharacters(t);break}case he.IN_BODY:case he.IN_CAPTION:case he.IN_CELL:case he.IN_TEMPLATE:case he.AFTER_BODY:case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{WIe(this,t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{nU(this,t);break}case he.IN_TABLE_TEXT:{JIe(this,t);break}}}};function j0t(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):XIe(e,t),n}function U0t(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function z0t(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=F0t;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=V0t(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function V0t(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function H0t(e,t,n){const r=e.treeAdapter.getTagName(t),i=N2(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===$.TEMPLATE&&s===Ke.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function q0t(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function bZ(e,t){for(let n=0;n<L0t;n++){const r=j0t(e,t);if(!r)break;const i=U0t(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=z0t(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&H0t(e,o,s),q0t(e,i,r)}}function Jq(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function W0t(e,t){e._appendCommentNode(t,e.openElements.items[0])}function G0t(e,t){e._appendCommentNode(t,e.document)}function xZ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Y0t(e,t){e._setDocumentType(t);const n=t.forceQuirks?Fc.QUIRKS:S0t(t);E0t(t)||e._err(t,Ue.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=he.BEFORE_HTML}function uA(e,t){e._err(t,Ue.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Fc.QUIRKS),e.insertionMode=he.BEFORE_HTML,e._processToken(t)}function K0t(e,t){t.tagID===$.HTML?(e._insertElement(t,Ke.HTML),e.insertionMode=he.BEFORE_HEAD):nk(e,t)}function X0t(e,t){const n=t.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&nk(e,t)}function nk(e,t){e._insertFakeRootElement(),e.insertionMode=he.BEFORE_HEAD,e._processToken(t)}function Q0t(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.HEAD:{e._insertElement(t,Ke.HTML),e.headElement=e.openElements.current,e.insertionMode=he.IN_HEAD;break}default:rk(e,t)}}function J0t(e,t){const n=t.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?rk(e,t):e._err(t,Ue.endTagWithoutMatchingOpenElement)}function rk(e,t){e._insertFakeElement(Ne.HEAD,$.HEAD),e.headElement=e.openElements.current,e.insertionMode=he.IN_HEAD,e._processToken(t)}function Vh(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0;break}case $.TITLE:{e._switchToTextParsing(t,io.RCDATA);break}case $.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,io.RAWTEXT):(e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{e._switchToTextParsing(t,io.RAWTEXT);break}case $.SCRIPT:{e._switchToTextParsing(t,io.SCRIPT_DATA);break}case $.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=he.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(he.IN_TEMPLATE);break}case $.HEAD:{e._err(t,Ue.misplacedStartTagForHeadElement);break}default:ik(e,t)}}function Z0t(e,t){switch(t.tagID){case $.HEAD:{e.openElements.pop(),e.insertionMode=he.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{ik(e,t);break}case $.TEMPLATE:{K_(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function K_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==$.TEMPLATE&&e._err(t,Ue.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ue.endTagWithoutMatchingOpenElement)}function ik(e,t){e.openElements.pop(),e.insertionMode=he.AFTER_HEAD,e._processToken(t)}function egt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{Vh(e,t);break}case $.NOSCRIPT:{e._err(t,Ue.nestedNoscriptInHead);break}default:sk(e,t)}}function tgt(e,t){switch(t.tagID){case $.NOSCRIPT:{e.openElements.pop(),e.insertionMode=he.IN_HEAD;break}case $.BR:{sk(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function sk(e,t){const n=t.type===or.EOF?Ue.openElementsLeftAfterEof:Ue.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=he.IN_HEAD,e._processToken(t)}function ngt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.BODY:{e._insertElement(t,Ke.HTML),e.framesetOk=!1,e.insertionMode=he.IN_BODY;break}case $.FRAMESET:{e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{e._err(t,Ue.abandonedHeadElementChild),e.openElements.push(e.headElement,$.HEAD),Vh(e,t),e.openElements.remove(e.headElement);break}case $.HEAD:{e._err(t,Ue.misplacedStartTagForHeadElement);break}default:ok(e,t)}}function rgt(e,t){switch(t.tagID){case $.BODY:case $.HTML:case $.BR:{ok(e,t);break}case $.TEMPLATE:{K_(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function ok(e,t){e._insertFakeElement(Ne.BODY,$.BODY),e.insertionMode=he.IN_BODY,R5(e,t)}function R5(e,t){switch(t.type){case or.CHARACTER:{GIe(e,t);break}case or.WHITESPACE_CHARACTER:{WIe(e,t);break}case or.COMMENT:{Jq(e,t);break}case or.START_TAG:{Lu(e,t);break}case or.END_TAG:{D5(e,t);break}case or.EOF:{QIe(e,t);break}}}function WIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function GIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function igt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function sgt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function ogt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_FRAMESET)}function agt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Ke.HTML)}function ugt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),$Ie(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ke.HTML)}function lgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function cgt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),n||(e.formElement=e.openElements.current))}function fgt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===$.LI&&i===$.LI||(n===$.DD||n===$.DT)&&(i===$.DD||i===$.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==$.ADDRESS&&i!==$.DIV&&i!==$.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Ke.HTML)}function dgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),e.tokenizer.state=io.PLAINTEXT}function hgt(e,t){e.openElements.hasInScope($.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.framesetOk=!1}function pgt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ne.A);n&&(bZ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function mgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ggt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($.NOBR)&&(bZ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ke.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ygt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function vgt(e,t){e.treeAdapter.getDocumentMode(e.document)!==Fc.QUIRKS&&e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),e.framesetOk=!1,e.insertionMode=he.IN_TABLE}function YIe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ke.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function KIe(e){const t=NIe(e,x1.TYPE);return t!=null&&t.toLowerCase()===M0t}function bgt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ke.HTML),KIe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function xgt(e,t){e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0}function _gt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._appendElement(t,Ke.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function wgt(e,t){t.tagName=Ne.IMG,t.tagID=$.IMG,YIe(e,t)}function Egt(e,t){e._insertElement(t,Ke.HTML),e.skipNextNewLine=!0,e.tokenizer.state=io.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=he.TEXT}function Sgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,io.RAWTEXT)}function Tgt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,io.RAWTEXT)}function Cpe(e,t){e._switchToTextParsing(t,io.RAWTEXT)}function Cgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===he.IN_TABLE||e.insertionMode===he.IN_CAPTION||e.insertionMode===he.IN_TABLE_BODY||e.insertionMode===he.IN_ROW||e.insertionMode===he.IN_CELL?he.IN_SELECT_IN_TABLE:he.IN_SELECT}function Agt(e,t){e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML)}function Igt(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ke.HTML)}function kgt(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($.RTC),e._insertElement(t,Ke.HTML)}function Rgt(e,t){e._reconstructActiveFormattingElements(),VIe(t),vZ(t),t.selfClosing?e._appendElement(t,Ke.MATHML):e._insertElement(t,Ke.MATHML),t.ackSelfClosing=!0}function Dgt(e,t){e._reconstructActiveFormattingElements(),HIe(t),vZ(t),t.selfClosing?e._appendElement(t,Ke.SVG):e._insertElement(t,Ke.SVG),t.ackSelfClosing=!0}function Ape(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML)}function Lu(e,t){switch(t.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{mgt(e,t);break}case $.A:{pgt(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{ugt(e,t);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{agt(e,t);break}case $.LI:case $.DD:case $.DT:{fgt(e,t);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{YIe(e,t);break}case $.HR:{_gt(e,t);break}case $.RB:case $.RTC:{Igt(e,t);break}case $.RT:case $.RP:{kgt(e,t);break}case $.PRE:case $.LISTING:{lgt(e,t);break}case $.XMP:{Sgt(e,t);break}case $.SVG:{Dgt(e,t);break}case $.HTML:{igt(e,t);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{Vh(e,t);break}case $.BODY:{sgt(e,t);break}case $.FORM:{cgt(e,t);break}case $.NOBR:{ggt(e,t);break}case $.MATH:{Rgt(e,t);break}case $.TABLE:{vgt(e,t);break}case $.INPUT:{bgt(e,t);break}case $.PARAM:case $.TRACK:case $.SOURCE:{xgt(e,t);break}case $.IMAGE:{wgt(e,t);break}case $.BUTTON:{hgt(e,t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{ygt(e,t);break}case $.IFRAME:{Tgt(e,t);break}case $.SELECT:{Cgt(e,t);break}case $.OPTION:case $.OPTGROUP:{Agt(e,t);break}case $.NOEMBED:{Cpe(e,t);break}case $.FRAMESET:{ogt(e,t);break}case $.TEXTAREA:{Egt(e,t);break}case $.NOSCRIPT:{e.options.scriptingEnabled?Cpe(e,t):Ape(e,t);break}case $.PLAINTEXT:{dgt(e,t);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:Ape(e,t)}}function Ngt(e,t){if(e.openElements.hasInScope($.BODY)&&(e.insertionMode=he.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Pgt(e,t){e.openElements.hasInScope($.BODY)&&(e.insertionMode=he.AFTER_BODY,ske(e,t))}function Ogt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function $gt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($.FORM):n&&e.openElements.remove(n))}function Mgt(e){e.openElements.hasInButtonScope($.P)||e._insertFakeElement(Ne.P,$.P),e._closePElement()}function Lgt(e){e.openElements.hasInListItemScope($.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($.LI),e.openElements.popUntilTagNamePopped($.LI))}function Fgt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Bgt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function jgt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Ugt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ne.BR,$.BR),e.openElements.pop(),e.framesetOk=!1}function XIe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==$.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function D5(e,t){switch(t.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{bZ(e,t);break}case $.P:{Mgt(e);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{Ogt(e,t);break}case $.LI:{Lgt(e);break}case $.DD:case $.DT:{Fgt(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{Bgt(e);break}case $.BR:{Ugt(e);break}case $.BODY:{Ngt(e,t);break}case $.HTML:{Pgt(e,t);break}case $.FORM:{$gt(e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{jgt(e,t);break}case $.TEMPLATE:{K_(e,t);break}default:XIe(e,t)}}function QIe(e,t){e.tmplInsertionModeStack.length>0?ike(e,t):xZ(e,t)}function zgt(e,t){var n;t.tagID===$.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Vgt(e,t){e._err(t,Ue.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function nU(e,t){if(qIe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=he.IN_TABLE_TEXT,t.type){case or.CHARACTER:{ZIe(e,t);break}case or.WHITESPACE_CHARACTER:{JIe(e,t);break}}else nN(e,t)}function Hgt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_CAPTION}function qgt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_COLUMN_GROUP}function Wgt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ne.COLGROUP,$.COLGROUP),e.insertionMode=he.IN_COLUMN_GROUP,_Z(e,t)}function Ggt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_TABLE_BODY}function Ygt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ne.TBODY,$.TBODY),e.insertionMode=he.IN_TABLE_BODY,N5(e,t)}function Kgt(e,t){e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Xgt(e,t){KIe(t)?e._appendElement(t,Ke.HTML):nN(e,t),t.ackSelfClosing=!0}function Qgt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ke.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function oT(e,t){switch(t.tagID){case $.TD:case $.TH:case $.TR:{Ygt(e,t);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{Vh(e,t);break}case $.COL:{Wgt(e,t);break}case $.FORM:{Qgt(e,t);break}case $.TABLE:{Kgt(e,t);break}case $.TBODY:case $.TFOOT:case $.THEAD:{Ggt(e,t);break}case $.INPUT:{Xgt(e,t);break}case $.CAPTION:{Hgt(e,t);break}case $.COLGROUP:{qgt(e,t);break}default:nN(e,t)}}function gR(e,t){switch(t.tagID){case $.TABLE:{e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode());break}case $.TEMPLATE:{K_(e,t);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:nN(e,t)}}function nN(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,R5(e,t),e.fosterParentingEnabled=n}function JIe(e,t){e.pendingCharacterTokens.push(t)}function ZIe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function lA(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)nN(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const eke=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function Jgt(e,t){const n=t.tagID;eke.has(n)?e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_TABLE,oT(e,t)):Lu(e,t)}function Zgt(e,t){const n=t.tagID;switch(n){case $.CAPTION:case $.TABLE:{e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_TABLE,n===$.TABLE&&gR(e,t));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:D5(e,t)}}function _Z(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.COL:{e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0;break}case $.TEMPLATE:{Vh(e,t);break}default:C$(e,t)}}function eyt(e,t){switch(t.tagID){case $.COLGROUP:{e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=he.IN_TABLE);break}case $.TEMPLATE:{K_(e,t);break}case $.COL:break;default:C$(e,t)}}function C$(e,t){e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=he.IN_TABLE,e._processToken(t))}function N5(e,t){switch(t.tagID){case $.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_ROW;break}case $.TH:case $.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ne.TR,$.TR),e.insertionMode=he.IN_ROW,P5(e,t);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE,oT(e,t));break}default:oT(e,t)}}function Zq(e,t){const n=t.tagID;switch(t.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE);break}case $.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE,gR(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:gR(e,t)}}function P5(e,t){switch(t.tagID){case $.TH:case $.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ke.HTML),e.insertionMode=he.IN_CELL,e.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,N5(e,t));break}default:oT(e,t)}}function tke(e,t){switch(t.tagID){case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY);break}case $.TABLE:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,Zq(e,t));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope($.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,Zq(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:gR(e,t)}}function tyt(e,t){const n=t.tagID;eke.has(n)?(e.openElements.hasInTableScope($.TD)||e.openElements.hasInTableScope($.TH))&&(e._closeTableCell(),P5(e,t)):Lu(e,t)}function nyt(e,t){const n=t.tagID;switch(n){case $.TD:case $.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),tke(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:D5(e,t)}}function nke(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._insertElement(t,Ke.HTML);break}case $.OPTGROUP:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ke.HTML);break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),t.tagID!==$.SELECT&&e._processStartTag(t));break}case $.SCRIPT:case $.TEMPLATE:{Vh(e,t);break}}}function rke(e,t){switch(t.tagID){case $.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===$.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===$.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop();break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop();break}case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode());break}case $.TEMPLATE:{K_(e,t);break}}}function ryt(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e._processStartTag(t)):nke(e,t)}function iyt(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e.onEndTag(t)):rke(e,t)}function syt(e,t){switch(t.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{Vh(e,t);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.tmplInsertionModeStack[0]=he.IN_TABLE,e.insertionMode=he.IN_TABLE,oT(e,t);break}case $.COL:{e.tmplInsertionModeStack[0]=he.IN_COLUMN_GROUP,e.insertionMode=he.IN_COLUMN_GROUP,_Z(e,t);break}case $.TR:{e.tmplInsertionModeStack[0]=he.IN_TABLE_BODY,e.insertionMode=he.IN_TABLE_BODY,N5(e,t);break}case $.TD:case $.TH:{e.tmplInsertionModeStack[0]=he.IN_ROW,e.insertionMode=he.IN_ROW,P5(e,t);break}default:e.tmplInsertionModeStack[0]=he.IN_BODY,e.insertionMode=he.IN_BODY,Lu(e,t)}}function oyt(e,t){t.tagID===$.TEMPLATE&&K_(e,t)}function ike(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):xZ(e,t)}function ayt(e,t){t.tagID===$.HTML?Lu(e,t):A$(e,t)}function ske(e,t){var n;if(t.tagID===$.HTML){if(e.fragmentContext||(e.insertionMode=he.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===$.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else A$(e,t)}function A$(e,t){e.insertionMode=he.IN_BODY,R5(e,t)}function uyt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.FRAMESET:{e._insertElement(t,Ke.HTML);break}case $.FRAME:{e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0;break}case $.NOFRAMES:{Vh(e,t);break}}}function lyt(e,t){t.tagID===$.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==$.FRAMESET&&(e.insertionMode=he.AFTER_FRAMESET))}function cyt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.NOFRAMES:{Vh(e,t);break}}}function fyt(e,t){t.tagID===$.HTML&&(e.insertionMode=he.AFTER_AFTER_FRAMESET)}function dyt(e,t){t.tagID===$.HTML?Lu(e,t):B4(e,t)}function B4(e,t){e.insertionMode=he.IN_BODY,R5(e,t)}function hyt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.NOFRAMES:{Vh(e,t);break}}}function pyt(e,t){t.chars=gs,e._insertCharacters(t)}function myt(e,t){e._insertCharacters(t),e.framesetOk=!1}function oke(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ke.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function gyt(e,t){if(D0t(t))oke(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ke.MATHML?VIe(t):r===Ke.SVG&&(N0t(t),HIe(t)),vZ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function yyt(e,t){if(t.tagID===$.P||t.tagID===$.BR){oke(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ke.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ne.AREA,Ne.BASE,Ne.BASEFONT,Ne.BGSOUND,Ne.BR,Ne.COL,Ne.EMBED,Ne.FRAME,Ne.HR,Ne.IMG,Ne.INPUT,Ne.KEYGEN,Ne.LINK,Ne.META,Ne.PARAM,Ne.SOURCE,Ne.TRACK,Ne.WBR;const vyt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Ipe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ake(e,t){const n=Iyt(e),r=AIe("type",{handlers:{root:byt,element:xyt,text:_yt,comment:lke,doctype:wyt,raw:Syt},unknown:Tyt}),i={parser:n?new Tpe(Ipe):Tpe.getFragmentParser(void 0,Ipe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),P2(i,Dm());const s=n?i.parser.document:i.parser.getFragment(),o=Dmt(s,{file:i.options.file});return i.stitches&&pZ(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function uke(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function byt(e,t){uke(e.children,t)}function xyt(e,t){Cyt(e,t),uke(e.children,t),Ayt(e,t)}function _yt(e,t){const n={type:or.CHARACTER,chars:e.value,location:rN(e)};P2(t,Dm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function wyt(e,t){const n={type:or.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:rN(e)};P2(t,Dm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Eyt(e,t){t.stitches=!0;const n=kyt(e);if("children"in e&&"children"in n){const r=ake({type:"root",children:e.children},t.options);n.children=r.children}lke({type:"comment",value:{stitch:n}},t)}function lke(e,t){const n=e.value,r={type:or.COMMENT,data:n,location:rN(e)};P2(t,Dm(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Syt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,cke(t,Dm(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Tyt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Eyt(n,t);else{let r="";throw vyt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function P2(e,t){cke(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=io.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function cke(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Cyt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===io.PLAINTEXT)return;P2(t,Dm(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:hx.html;i===hx.html&&n==="svg"&&(i=hx.svg);const s=$mt({...e,children:[]},{space:i===hx.svg?"svg":"html"}),o={type:or.START_TAG,tagName:n,tagID:N2(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:rN(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Ayt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Vmt.includes(n)||t.parser.tokenizer.state===io.PLAINTEXT)return;P2(t,C5(e));const r={type:or.END_TAG,tagName:n,tagID:N2(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:rN(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===io.RCDATA||t.parser.tokenizer.state===io.RAWTEXT||t.parser.tokenizer.state===io.SCRIPT_DATA)&&(t.parser.tokenizer.state=io.DATA)}function Iyt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function rN(e){const t=Dm(e)||{line:void 0,column:void 0,offset:void 0},n=C5(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function kyt(e){return"children"in e?sT({...e,children:[]}):sT(e)}function Ryt(e){return function(t,n){return ake(t,{...e,file:n})}}function Ru({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Rv,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(Qe,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Vs,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Vs,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Vs,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Vs,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Vs,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Vs,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(z_,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Eh,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Eh,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(vmt,{components:n,rehypePlugins:[Ryt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function j4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ru,{text:n})}const Jw=14;function Dyt({completed:e,inProgress:t,rejected:n}){return _.jsxs(qt,{ml:4,gap:4,children:[_.jsx(qi,{label:"Completed",children:_.jsx(wh,{variant:"light",color:"green",leftSection:_.jsx(S5,{width:Jw,height:Jw,style:{paddingTop:1}}),pb:1,children:e})}),_.jsx(qi,{label:"In Progress",children:_.jsx(wh,{variant:"light",color:"orange",leftSection:_.jsx($Ae,{width:Jw,height:Jw,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(qi,{label:"Rejected",children:_.jsx(wh,{variant:"light",color:"red",leftSection:_.jsx(JD,{width:Jw,height:Jw,style:{paddingTop:1}}),pb:1,children:n})})]})}const Nyt="https://github.com/revisit-studies/study/tree/main/public/";function Pyt({configName:e,config:t,url:n}){const{storageEngine:r}=ho(),[i,s]=D.useState(null);D.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=D.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=D.useState(null);D.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=D.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return _.jsx(_2,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Qe,{fw:"bold",children:e}),_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(JI,{color:"red"}),_.jsx(Qe,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(j4,{issues:t.errors,type:"error"}),t.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(JI,{color:"orange"}),_.jsx(Qe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(j4,{issues:t.warnings,type:"warning"})]})]}):_.jsxs(_.Fragment,{children:[_.jsx(qt,{direction:"row",justify:"space-between",children:_.jsx(Qe,{fw:"bold",children:t.studyMetadata.title})}),_.jsxs(Qe,{c:"dimmed",children:[_.jsx(Qe,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),_.jsx(Qe,{c:"dimmed",children:t.studyMetadata.description}),_.jsx(Qe,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(z_,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Nyt}${n}`,children:["View source:"," ",n,_.jsx(OAe,{style:{width:Pe(18),height:Pe(18),marginLeft:Pe(2),marginBottom:Pe(-3)}})]})}),t.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(JI,{color:"orange"}),_.jsx(Qe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(j4,{issues:t.warnings,type:"warning"})]}),_.jsx(V_,{my:"md"}),_.jsxs(qt,{direction:"row",gap:"sm",children:[_.jsxs(Qe,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&_.jsx(Dyt,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&_.jsxs(Qe,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),_.jsxs(qt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[_.jsx(ln,{leftSection:_.jsx(PAe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Va}analysis/stats/${n}`,children:"Analyze & Manage Study"}),_.jsx(ln,{leftSection:_.jsx(Oct,{}),component:"a",href:`${Va}${n}`,children:"Go to Study"})]})]})},e)}function Zw({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=BAe(n);return _.jsx(Pyt,{configName:n,config:r,url:i},n)})}function Oyt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return _.jsx($i.Main,{children:_.jsxs(pg,{size:"sm",px:0,children:[_.jsx(Rv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Va}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsxs(Nr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[_.jsxs(Nr.List,{children:[u.length>0&&_.jsx(Nr.Tab,{value:"Others",children:"Your Studies"}),_.jsx(Nr.Tab,{value:"Demos",children:"Demo Studies"}),_.jsx(Nr.Tab,{value:"Examples",children:"Example Studies"}),_.jsx(Nr.Tab,{value:"Tutorials",children:"Tutorials"}),_.jsx(Nr.Tab,{value:"Tests",children:"Tests"}),_.jsx(Nr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&_.jsx(Nr.Panel,{value:"Others",children:_.jsx(Zw,{configNames:u,studyConfigs:t})}),_.jsxs(Nr.Panel,{value:"Demos",children:[_.jsx(Qe,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),_.jsx(Zw,{configNames:r,studyConfigs:t})]}),_.jsxs(Nr.Panel,{value:"Examples",children:[_.jsx(Qe,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),_.jsx(Zw,{configNames:s,studyConfigs:t})]}),_.jsxs(Nr.Panel,{value:"Tutorials",children:[_.jsx(Qe,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),_.jsx(Zw,{configNames:i,studyConfigs:t})]}),_.jsxs(Nr.Panel,{value:"Tests",children:[_.jsx(Qe,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),_.jsx(Zw,{configNames:o,studyConfigs:t})]}),_.jsxs(Nr.Panel,{value:"Libraries",children:[_.jsx(Qe,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish"}),_.jsx(Zw,{configNames:a,studyConfigs:t})]})]})]})})}var fke={exports:{}},dke={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iN=D;function $yt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Myt=typeof Object.is=="function"?Object.is:$yt,Lyt=iN.useSyncExternalStore,Fyt=iN.useRef,Byt=iN.useEffect,jyt=iN.useMemo,Uyt=iN.useDebugValue;dke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Fyt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=jyt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Myt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Lyt(e,s[0],s[1]);return Byt(function(){o.hasValue=!0,o.value=a},[a]),Uyt(a),a};fke.exports=dke;var zyt=fke.exports,Gc="default"in j6?ni:j6,kpe=Symbol.for("react-redux-context"),Rpe=typeof globalThis<"u"?globalThis:{};function Vyt(){if(!Gc.createContext)return{};const e=Rpe[kpe]??(Rpe[kpe]=new Map);let t=e.get(Gc.createContext);return t||(t=Gc.createContext(null),e.set(Gc.createContext,t)),t}var F1=Vyt(),Hyt=()=>{throw new Error("uSES not initialized!")};function wZ(e=F1){return function(){return Gc.useContext(e)}}var hke=wZ(),pke=Hyt,qyt=e=>{pke=e},Wyt=(e,t)=>e===t;function Gyt(e=F1){const t=e===F1?hke:wZ(e),n=(r,i={})=>{const{equalityFn:s=Wyt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Gc.useRef(!0);const d=Gc.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=pke(u.addNestedSub,a.getState,l||a.getState,d,s);return Gc.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Yyt=Gyt();function Kyt(e){e()}function Xyt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Kyt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Dpe={notify(){},get:()=>[]};function Qyt(e,t){let n,r=Dpe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Xyt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Dpe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Jyt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zyt=typeof navigator<"u"&&navigator.product==="ReactNative",e1t=Jyt||Zyt?Gc.useLayoutEffect:Gc.useEffect;function t1t({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Gc.useMemo(()=>{const l=Qyt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Gc.useMemo(()=>e.getState(),[e]);e1t(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||F1;return Gc.createElement(u.Provider,{value:o},n)}var n1t=t1t;function mke(e=F1){const t=e===F1?hke:wZ(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var r1t=mke();function i1t(e=F1){const t=e===F1?r1t:mke(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var gke=i1t();qyt(zyt.useSyncExternalStoreWithSelector);function Aa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var s1t=typeof Symbol=="function"&&Symbol.observable||"@@observable",Npe=s1t,rU=()=>Math.random().toString(36).substring(7).split("").join("."),o1t={INIT:`@@redux/INIT${rU()}`,REPLACE:`@@redux/REPLACE${rU()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${rU()}`},I$=o1t;function EZ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yke(e,t,n){if(typeof e!="function")throw new Error(Aa(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Aa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Aa(1));return n(yke)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Aa(3));return i}function f(g){if(typeof g!="function")throw new Error(Aa(4));if(u)throw new Error(Aa(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Aa(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!EZ(g))throw new Error(Aa(7));if(typeof g.type>"u")throw new Error(Aa(8));if(typeof g.type!="string")throw new Error(Aa(17));if(u)throw new Error(Aa(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Aa(10));r=g,d({type:I$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Aa(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Npe](){return this}}}return d({type:I$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Npe]:p}}function a1t(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:I$.INIT})>"u")throw new Error(Aa(12));if(typeof n(void 0,{type:I$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Aa(13))})}function u1t(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{a1t(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Aa(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function k$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function l1t(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Aa(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=k$(...a)(i.dispatch),{...i,dispatch:s}}}function c1t(e){return EZ(e)&&"type"in e&&typeof e.type=="string"}var vke=Symbol.for("immer-nothing"),Ppe=Symbol.for("immer-draftable"),lf=Symbol.for("immer-state");function sh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var aT=Object.getPrototypeOf;function B1(e){return!!e&&!!e[lf]}function gg(e){var t;return e?bke(e)||Array.isArray(e)||!!e[Ppe]||!!((t=e.constructor)!=null&&t[Ppe])||$5(e)||M5(e):!1}var f1t=Object.prototype.constructor.toString();function bke(e){if(!e||typeof e!="object")return!1;const t=aT(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===f1t}function R$(e,t){O5(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function O5(e){const t=e[lf];return t?t.type_:Array.isArray(e)?1:$5(e)?2:M5(e)?3:0}function eW(e,t){return O5(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xke(e,t,n){const r=O5(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function d1t(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $5(e){return e instanceof Map}function M5(e){return e instanceof Set}function Mb(e){return e.copy_||e.base_}function tW(e,t){if($5(e))return new Map(e);if(M5(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=bke(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[lf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(aT(e),r)}else{const r=aT(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function SZ(e,t=!1){return L5(e)||B1(e)||!gg(e)||(O5(e)>1&&(e.set=e.add=e.clear=e.delete=h1t),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>SZ(r,!0))),e}function h1t(){sh(2)}function L5(e){return Object.isFrozen(e)}var p1t={};function Xx(e){const t=p1t[e];return t||sh(0,e),t}var yR;function _ke(){return yR}function m1t(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ope(e,t){t&&(Xx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function nW(e){rW(e),e.drafts_.forEach(g1t),e.drafts_=null}function rW(e){e===yR&&(yR=e.parent_)}function $pe(e){return yR=m1t(yR,e)}function g1t(e){const t=e[lf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Mpe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[lf].modified_&&(nW(t),sh(4)),gg(e)&&(e=D$(t,e),t.parent_||N$(t,e)),t.patches_&&Xx("Patches").generateReplacementPatches_(n[lf].base_,e,t.patches_,t.inversePatches_)):e=D$(t,n,[]),nW(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vke?e:void 0}function D$(e,t,n){if(L5(t))return t;const r=t[lf];if(!r)return R$(t,(i,s)=>Lpe(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return N$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),R$(s,(a,u)=>Lpe(e,r,i,a,u,n,o)),N$(e,i,!1),n&&e.patches_&&Xx("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Lpe(e,t,n,r,i,s,o){if(B1(i)){const a=s&&t&&t.type_!==3&&!eW(t.assigned_,r)?s.concat(r):void 0,u=D$(e,i,a);if(xke(n,r,u),B1(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gg(i)&&!L5(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;D$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&N$(e,i)}}function N$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&SZ(t,n)}function y1t(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:_ke(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=TZ;n&&(i=[r],s=vR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var TZ={get(e,t){if(t===lf)return e;const n=Mb(e);if(!eW(n,t))return v1t(e,n,t);const r=n[t];return e.finalized_||!gg(r)?r:r===iU(e.base_,t)?(sU(e),e.copy_[t]=sW(r,e)):r},has(e,t){return t in Mb(e)},ownKeys(e){return Reflect.ownKeys(Mb(e))},set(e,t,n){const r=wke(Mb(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=iU(Mb(e),t),s=i==null?void 0:i[lf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(d1t(n,i)&&(n!==void 0||eW(e.base_,t)))return!0;sU(e),iW(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return iU(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,sU(e),iW(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Mb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){sh(11)},getPrototypeOf(e){return aT(e.base_)},setPrototypeOf(){sh(12)}},vR={};R$(TZ,(e,t)=>{vR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vR.deleteProperty=function(e,t){return vR.set.call(this,e,t,void 0)};vR.set=function(e,t,n){return TZ.set.call(this,e[0],t,n,e[0])};function iU(e,t){const n=e[lf];return(n?Mb(n):e)[t]}function v1t(e,t,n){var i;const r=wke(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function wke(e,t){if(!(t in e))return;let n=aT(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=aT(n)}}function iW(e){e.modified_||(e.modified_=!0,e.parent_&&iW(e.parent_))}function sU(e){e.copy_||(e.copy_=tW(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var b1t=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&sh(6),r!==void 0&&typeof r!="function"&&sh(7);let i;if(gg(t)){const s=$pe(this),o=sW(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?nW(s):rW(s)}return Ope(s,r),Mpe(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===vke&&(i=void 0),this.autoFreeze_&&SZ(i,!0),r){const s=[],o=[];Xx("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else sh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gg(e)||sh(8),B1(e)&&(e=Eke(e));const t=$pe(this),n=sW(e,void 0);return n[lf].isManual_=!0,rW(t),n}finishDraft(e,t){const n=e&&e[lf];(!n||!n.isManual_)&&sh(9);const{scope_:r}=n;return Ope(r,t),Mpe(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Xx("Patches").applyPatches_;return B1(e)?r(e,t):this.produce(e,i=>r(i,t))}};function sW(e,t){const n=$5(e)?Xx("MapSet").proxyMap_(e,t):M5(e)?Xx("MapSet").proxySet_(e,t):y1t(e,t);return(t?t.scope_:_ke()).drafts_.push(n),n}function Eke(e){return B1(e)||sh(10,e),Ske(e)}function Ske(e){if(!gg(e)||L5(e))return e;const t=e[lf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=tW(e,t.scope_.immer_.useStrictShallowCopy_)}else n=tW(e,!0);return R$(n,(r,i)=>{xke(n,r,Ske(i))}),t&&(t.finalized_=!1),n}var cf=new b1t,Tke=cf.produce;cf.produceWithPatches.bind(cf);cf.setAutoFreeze.bind(cf);cf.setUseStrictShallowCopy.bind(cf);cf.applyPatches.bind(cf);cf.createDraft.bind(cf);cf.finishDraft.bind(cf);function x1t(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _1t(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function w1t(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Fpe=e=>Array.isArray(e)?e:[e];function E1t(e){const t=Array.isArray(e[0])?e[0]:e;return w1t(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function S1t(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var T1t=class{constructor(e){this.value=e}deref(){return this.value}},C1t=typeof WeakRef<"u"?WeakRef:T1t,A1t=0,Bpe=1;function X3(){return{s:A1t,v:void 0,o:null,p:null}}function CZ(e,t={}){let n=X3();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=X3(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=X3(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Bpe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new C1t(c):c}return l.s=Bpe,l.v=c,c}return o.clearCache=()=>{n=X3(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Cke(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),x1t(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=CZ,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Fpe(d),y=Fpe(p),v=E1t(i),x=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=S1t(v,arguments);return a=x.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:x,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Ake=Cke(CZ),I1t=Object.assign((e,t=Ake)=>{_1t(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>I1t});function Ike(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var k1t=Ike(),R1t=Ike,D1t=(...e)=>{const t=Cke(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(B1(o)?Eke(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};D1t(CZ);var N1t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?k$:k$.apply(null,arguments)};function uT(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(oc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>c1t(r)&&r.type===e,n}var kke=class nI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,nI.prototype)}static get[Symbol.species](){return nI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new nI(...t[0].concat(this)):new nI(...t.concat(this))}};function jpe(e){return gg(e)?Tke(e,()=>{}):e}function Upe(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(oc(10));const r=n.insert(t,e);return e.set(t,r),r}function P1t(e){return typeof e=="boolean"}var O1t=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new kke;return n&&(P1t(n)?o.push(k1t):o.push(R1t(n.extraArgument))),o},$1t="RTK_autoBatch",Rke=e=>t=>{setTimeout(t,e)},M1t=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Rke(10),L1t=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?M1t:e.type==="callback"?e.queueNotification:Rke(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[$1t]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},F1t=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new kke(e);return r&&i.push(L1t(typeof r=="object"?r:void 0)),i};function B1t(e){const t=O1t(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(EZ(n))a=u1t(n);else throw new Error(oc(1));let u;typeof r=="function"?u=r(t):u=t();let l=k$;i&&(l=N1t({trace:!1,...typeof i=="object"&&i}));const c=l1t(...u),f=F1t(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return yke(a,s,h)}function Dke(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(oc(28));if(a in t)throw new Error(oc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function j1t(e){return typeof e=="function"}function U1t(e,t){let[n,r,i]=Dke(t),s;if(j1t(e))s=()=>jpe(e());else{const a=jpe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(B1(c)){const h=f(c,u);return h===void 0?c:h}else{if(gg(c))return Tke(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(oc(9))}return d}}return c},a)}return o.getInitialState=s,o}var z1t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",V1t=(e=21)=>{let t="",n=e;for(;n--;)t+=z1t[Math.random()*64|0];return t},H1t=Symbol.for("rtk-slice-createasyncthunk");function q1t(e,t){return`${e}/${t}`}function W1t({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[H1t];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(oc(11));const a=(typeof i.reducers=="function"?i.reducers(K1t()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,w){const E=typeof x=="string"?x:x.type;if(!E)throw new Error(oc(12));if(E in l.sliceCaseReducersByType)throw new Error(oc(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(x,w){return l.sliceMatchers.push({matcher:x,reducer:w}),c},exposeAction(x,w){return l.actionCreators[x]=w,c},exposeCaseReducer(x,w){return l.sliceCaseReducersByName[x]=w,c}};u.forEach(x=>{const w=a[x],E={reducerName:x,type:q1t(s,x),createNotation:typeof i.reducers=="function"};Q1t(w)?Z1t(E,w,c,t):X1t(E,w,c)});function f(){const[x={},w=[],E=void 0]=typeof i.extraReducers=="function"?Dke(i.extraReducers):[i.extraReducers],T={...x,...l.sliceCaseReducersByType};return U1t(i.initialState,C=>{for(let I in T)C.addCase(I,T[I]);for(let I of l.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of w)C.addMatcher(I.matcher,I.reducer);E&&C.addDefaultCase(E)})}const d=x=>x,h=new Map;let p;function m(x,w){return p||(p=f()),p(x,w)}function g(){return p||(p=f()),p.getInitialState()}function y(x,w=!1){function E(C){let I=C[x];return typeof I>"u"&&w&&(I=g()),I}function T(C=d){const I=Upe(h,w,{insert:()=>new WeakMap});return Upe(I,C,{insert:()=>{const N={};for(const[k,P]of Object.entries(i.selectors??{}))N[k]=G1t(P,C,g,w);return N}})}return{reducerPath:x,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(x,{reducerPath:w,...E}={}){const T=w??o;return x.inject({reducerPath:T,reducer:m},E),{...v,...y(T,!0)}}};return v}}function G1t(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Y1t=W1t();function K1t(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function X1t({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!J1t(r))throw new Error(oc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?uT(e,o):uT(e))}function Q1t(e){return e._reducerDefinitionType==="asyncThunk"}function J1t(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Z1t({type:e,reducerName:t},n,r,i){if(!i)throw new Error(oc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||Q3,pending:a||Q3,rejected:u||Q3,settled:l||Q3})}function Q3(){}var evt=(e,t)=>{if(typeof e!="function")throw new Error(oc(32))},AZ="listenerMiddleware",tvt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=uT(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(oc(21));return evt(s),{predicate:i,type:t,effect:s}},nvt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=tvt(e);return{id:V1t(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(oc(22))}}},{withTypes:()=>nvt}),rvt=Object.assign(uT(`${AZ}/add`),{withTypes:()=>rvt});uT(`${AZ}/removeAll`);var ivt=Object.assign(uT(`${AZ}/remove`),{withTypes:()=>ivt});function oc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Ph(e){return e.components.flatMap(t=>typeof t=="string"?t:Ph(t))}function Nke(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Nke(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Pke(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Ph(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Ph(e).length-1}];r+=1}else{const o=Pke(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function IZ(e,t){const n=Pke(e,t,0);return typeof n=="number"?null:n}function Oke(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Oke(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function svt(e,t){const n=Oke(e,t,0);return n.found?n.distance:-1}function $ke(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...$ke(i,`${t}-${s}`))}),n}function kZ(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>kZ(n,`${t}-${r}`))}}async function ovt(e,t,n,r,i,s,o){const a=Ph(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=Y1t({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:y,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:y,questionKey:v,value:x,isChecked:w,choiceOptions:E}=m.payload,T=((g=p.matrixAnswers[y])==null?void 0:g[v])??"";let C="";w?T.length>0?C=[...T.split("|"),x].sort((I,N)=>E.map(k=>k.value).indexOf(I)-E.map(k=>k.value).indexOf(N)).join("|"):C=`${x}`:C=T.split("|").filter(I=>I!==x).join("|"),p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:C}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:x,provenanceGraph:w,windowEvents:E,timedOut:T,incorrectAnswers:C,helpButtonClickedCount:I}=m;p.answers[g]={incorrectAnswers:C,answer:y,startTime:v,endTime:x,provenanceGraph:w,windowEvents:E,timedOut:T,helpButtonClickedCount:I}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(y)}}});return{store:B1t({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const Mke=D.createContext(null);function Ha(){return D.useContext(Mke).actions}const Fu=gke,ri=Yyt;function avt(e){return ri(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const uvt=Ake(e=>e.sequence,e=>Ph(e));function RZ(){return ri(uvt)}var Lke={exports:{}};function rI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oU={exports:{}};const lvt={},cvt=Object.freeze(Object.defineProperty({__proto__:null,default:lvt},Symbol.toStringTag,{value:"Module"})),Fke=xXe(cvt);var zpe;function Fr(){return zpe||(zpe=1,function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Jt<"u"&&Jt.crypto&&(s=Jt.crypto),!s&&typeof rI=="function")try{s=Fke}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(x){var w;return v.prototype=x,w=new v,v.prototype=null,w}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(v){var x=a(this);return v&&x.mixIn(v),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var x in v)v.hasOwnProperty(x)&&(this[x]=v[x]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(v,x){v=this.words=v||[],x!=i?this.sigBytes=x:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var x=this.words,w=v.words,E=this.sigBytes,T=v.sigBytes;if(this.clamp(),E%4)for(var C=0;C<T;C++){var I=w[C>>>2]>>>24-C%4*8&255;x[E+C>>>2]|=I<<24-(E+C)%4*8}else for(var N=0;N<T;N+=4)x[E+N>>>2]=w[N>>>2];return this.sigBytes+=T,this},clamp:function(){var v=this.words,x=this.sigBytes;v[x>>>2]&=4294967295<<32-x%4*8,v.length=r.ceil(x/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var x=[],w=0;w<v;w+=4)x.push(o());return new f.init(x,v)}}),d=u.enc={},h=d.Hex={stringify:function(v){for(var x=v.words,w=v.sigBytes,E=[],T=0;T<w;T++){var C=x[T>>>2]>>>24-T%4*8&255;E.push((C>>>4).toString(16)),E.push((C&15).toString(16))}return E.join("")},parse:function(v){for(var x=v.length,w=[],E=0;E<x;E+=2)w[E>>>3]|=parseInt(v.substr(E,2),16)<<24-E%8*4;return new f.init(w,x/2)}},p=d.Latin1={stringify:function(v){for(var x=v.words,w=v.sigBytes,E=[],T=0;T<w;T++){var C=x[T>>>2]>>>24-T%4*8&255;E.push(String.fromCharCode(C))}return E.join("")},parse:function(v){for(var x=v.length,w=[],E=0;E<x;E++)w[E>>>2]|=(v.charCodeAt(E)&255)<<24-E%4*8;return new f.init(w,x)}},m=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var x,w=this._data,E=w.words,T=w.sigBytes,C=this.blockSize,I=C*4,N=T/I;v?N=r.ceil(N):N=r.max((N|0)-this._minBufferSize,0);var k=N*C,P=r.min(k*4,T);if(k){for(var M=0;M<k;M+=C)this._doProcessBlock(E,M);x=E.splice(0,k),w.sigBytes-=P}return new f.init(x,P)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(v){return function(x,w){return new v.init(w).finalize(x)}},_createHmacHelper:function(v){return function(x,w){return new y.HMAC.init(v,w).finalize(x)}}});var y=u.algo={};return u}(Math);return n})}(oU)),oU.exports}var aU={exports:{}},Vpe;function F5(){return Vpe||(Vpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(aU)),aU.exports}var uU={exports:{}},Hpe;function fvt(){return Hpe||(Hpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(uU)),uU.exports}var lU={exports:{}},qpe;function dvt(){return qpe||(qpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(lU)),lU.exports}var cU={exports:{}},Wpe;function X_(){return Wpe||(Wpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)d.push(f.charAt(y>>>6*(3-v)&63));var x=f.charAt(64);if(x)for(;d.length%4;)d.push(x);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(cU)),cU.exports}var fU={exports:{}},Gpe;function hvt(){return Gpe||(Gpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,x=0;x<4&&p+x*.75<f;x++)h.push(d.charAt(v>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(fU)),fU.exports}var dU={exports:{}},Ype;function Q_(){return Ype||(Ype=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,x=m[v];m[v]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,E=m[g+0],T=m[g+1],C=m[g+2],I=m[g+3],N=m[g+4],k=m[g+5],P=m[g+6],M=m[g+7],O=m[g+8],B=m[g+9],q=m[g+10],H=m[g+11],Y=m[g+12],K=m[g+13],J=m[g+14],F=m[g+15],U=w[0],W=w[1],L=w[2],V=w[3];U=f(U,W,L,V,E,7,l[0]),V=f(V,U,W,L,T,12,l[1]),L=f(L,V,U,W,C,17,l[2]),W=f(W,L,V,U,I,22,l[3]),U=f(U,W,L,V,N,7,l[4]),V=f(V,U,W,L,k,12,l[5]),L=f(L,V,U,W,P,17,l[6]),W=f(W,L,V,U,M,22,l[7]),U=f(U,W,L,V,O,7,l[8]),V=f(V,U,W,L,B,12,l[9]),L=f(L,V,U,W,q,17,l[10]),W=f(W,L,V,U,H,22,l[11]),U=f(U,W,L,V,Y,7,l[12]),V=f(V,U,W,L,K,12,l[13]),L=f(L,V,U,W,J,17,l[14]),W=f(W,L,V,U,F,22,l[15]),U=d(U,W,L,V,T,5,l[16]),V=d(V,U,W,L,P,9,l[17]),L=d(L,V,U,W,H,14,l[18]),W=d(W,L,V,U,E,20,l[19]),U=d(U,W,L,V,k,5,l[20]),V=d(V,U,W,L,q,9,l[21]),L=d(L,V,U,W,F,14,l[22]),W=d(W,L,V,U,N,20,l[23]),U=d(U,W,L,V,B,5,l[24]),V=d(V,U,W,L,J,9,l[25]),L=d(L,V,U,W,I,14,l[26]),W=d(W,L,V,U,O,20,l[27]),U=d(U,W,L,V,K,5,l[28]),V=d(V,U,W,L,C,9,l[29]),L=d(L,V,U,W,M,14,l[30]),W=d(W,L,V,U,Y,20,l[31]),U=h(U,W,L,V,k,4,l[32]),V=h(V,U,W,L,O,11,l[33]),L=h(L,V,U,W,H,16,l[34]),W=h(W,L,V,U,J,23,l[35]),U=h(U,W,L,V,T,4,l[36]),V=h(V,U,W,L,N,11,l[37]),L=h(L,V,U,W,M,16,l[38]),W=h(W,L,V,U,q,23,l[39]),U=h(U,W,L,V,K,4,l[40]),V=h(V,U,W,L,E,11,l[41]),L=h(L,V,U,W,I,16,l[42]),W=h(W,L,V,U,P,23,l[43]),U=h(U,W,L,V,B,4,l[44]),V=h(V,U,W,L,Y,11,l[45]),L=h(L,V,U,W,F,16,l[46]),W=h(W,L,V,U,C,23,l[47]),U=p(U,W,L,V,E,6,l[48]),V=p(V,U,W,L,M,10,l[49]),L=p(L,V,U,W,J,15,l[50]),W=p(W,L,V,U,k,21,l[51]),U=p(U,W,L,V,Y,6,l[52]),V=p(V,U,W,L,I,10,l[53]),L=p(L,V,U,W,q,15,l[54]),W=p(W,L,V,U,T,21,l[55]),U=p(U,W,L,V,O,6,l[56]),V=p(V,U,W,L,F,10,l[57]),L=p(L,V,U,W,P,15,l[58]),W=p(W,L,V,U,K,21,l[59]),U=p(U,W,L,V,N,6,l[60]),V=p(V,U,W,L,H,10,l[61]),L=p(L,V,U,W,C,15,l[62]),W=p(W,L,V,U,B,21,l[63]),w[0]=w[0]+U|0,w[1]=w[1]+W|0,w[2]=w[2]+L|0,w[3]=w[3]+V|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var x=r.floor(y/4294967296),w=y;g[(v+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var E=this._hash,T=E.words,C=0;C<4;C++){var I=T[C];T[C]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return E},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,v,x,w,E){var T=m+(g&y|~g&v)+x+E;return(T<<w|T>>>32-w)+g}function d(m,g,y,v,x,w,E){var T=m+(g&v|y&~v)+x+E;return(T<<w|T>>>32-w)+g}function h(m,g,y,v,x,w,E){var T=m+(g^y^v)+x+E;return(T<<w|T>>>32-w)+g}function p(m,g,y,v,x,w,E){var T=m+(y^(g|~v))+x+E;return(T<<w|T>>>32-w)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(dU)),dU.exports}var hU={exports:{}},Kpe;function Bke(){return Kpe||(Kpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)u[v]=c[f+v]|0;else{var x=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=x<<1|x>>>31}var w=(h<<5|h>>>27)+y+u[v];v<20?w+=(p&m|~p&g)+1518500249:v<40?w+=(p^m^g)+1859775393:v<60?w+=(p&m|p&g|m&g)-1894007588:w+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=w}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(hU)),hU.exports}var pU={exports:{}},Xpe;function DZ(){return Xpe||(Xpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),x=2;x<=v;x++)if(!(y%x))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],x=m[3],w=m[4],E=m[5],T=m[6],C=m[7],I=0;I<64;I++){if(I<16)f[I]=h[p+I]|0;else{var N=f[I-15],k=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,P=f[I-2],M=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;f[I]=k+f[I-7]+M+f[I-16]}var O=w&E^~w&T,B=g&y^g&v^y&v,q=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),H=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),Y=C+H+O+c[I]+f[I],K=q+B;C=T,T=E,E=w,w=x+Y|0,x=v,v=y,y=g,g=Y+K|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+x|0,m[4]=m[4]+w|0,m[5]=m[5]+E|0,m[6]=m[6]+T|0,m[7]=m[7]+C|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(pU)),pU.exports}var mU={exports:{}},Qpe;function pvt(){return Qpe||(Qpe=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),DZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(mU)),mU.exports}var gU={exports:{}},Jpe;function jke(){return Jpe||(Jpe=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),F5())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],x=g[2],w=g[3],E=g[4],T=g[5],C=g[6],I=g[7],N=y.high,k=y.low,P=v.high,M=v.low,O=x.high,B=x.low,q=w.high,H=w.low,Y=E.high,K=E.low,J=T.high,F=T.low,U=C.high,W=C.low,L=I.high,V=I.low,Q=N,ue=k,we=P,ce=M,Se=O,Oe=B,et=q,Re=H,St=Y,Ze=K,It=J,mt=F,Ce=U,Fe=W,st=L,yt=V,Dt=0;Dt<80;Dt++){var Je,_e,kt=d[Dt];if(Dt<16)_e=kt.high=p[m+Dt*2]|0,Je=kt.low=p[m+Dt*2+1]|0;else{var Rt=d[Dt-15],Ee=Rt.high,$e=Rt.low,ot=(Ee>>>1|$e<<31)^(Ee>>>8|$e<<24)^Ee>>>7,xt=($e>>>1|Ee<<31)^($e>>>8|Ee<<24)^($e>>>7|Ee<<25),jt=d[Dt-2],Un=jt.high,dr=jt.low,Tr=(Un>>>19|dr<<13)^(Un<<3|dr>>>29)^Un>>>6,xi=(dr>>>19|Un<<13)^(dr<<3|Un>>>29)^(dr>>>6|Un<<26),Tn=d[Dt-7],zn=Tn.high,hr=Tn.low,gr=d[Dt-16],Xo=gr.high,ts=gr.low;Je=xt+hr,_e=ot+zn+(Je>>>0<xt>>>0?1:0),Je=Je+xi,_e=_e+Tr+(Je>>>0<xi>>>0?1:0),Je=Je+ts,_e=_e+Xo+(Je>>>0<ts>>>0?1:0),kt.high=_e,kt.low=Je}var ds=St&It^~St&Ce,Ps=Ze&mt^~Ze&Fe,Vr=Q&we^Q&Se^we&Se,hs=ue&ce^ue&Oe^ce&Oe,Cc=(Q>>>28|ue<<4)^(Q<<30|ue>>>2)^(Q<<25|ue>>>7),Qo=(ue>>>28|Q<<4)^(ue<<30|Q>>>2)^(ue<<25|Q>>>7),Bu=(St>>>14|Ze<<18)^(St>>>18|Ze<<14)^(St<<23|Ze>>>9),Br=(Ze>>>14|St<<18)^(Ze>>>18|St<<14)^(Ze<<23|St>>>9),Ri=f[Dt],gi=Ri.high,Qs=Ri.low,ai=yt+Br,Di=st+Bu+(ai>>>0<yt>>>0?1:0),ai=ai+Ps,Di=Di+ds+(ai>>>0<Ps>>>0?1:0),ai=ai+Qs,Di=Di+gi+(ai>>>0<Qs>>>0?1:0),ai=ai+Je,Di=Di+_e+(ai>>>0<Je>>>0?1:0),me=Qo+hs,ae=Cc+Vr+(me>>>0<Qo>>>0?1:0);st=Ce,yt=Fe,Ce=It,Fe=mt,It=St,mt=Ze,Ze=Re+ai|0,St=et+Di+(Ze>>>0<Re>>>0?1:0)|0,et=Se,Re=Oe,Se=we,Oe=ce,we=Q,ce=ue,ue=ai+me|0,Q=Di+ae+(ue>>>0<ai>>>0?1:0)|0}k=y.low=k+ue,y.high=N+Q+(k>>>0<ue>>>0?1:0),M=v.low=M+ce,v.high=P+we+(M>>>0<ce>>>0?1:0),B=x.low=B+Oe,x.high=O+Se+(B>>>0<Oe>>>0?1:0),H=w.low=H+Re,w.high=q+et+(H>>>0<Re>>>0?1:0),K=E.low=K+Ze,E.high=Y+St+(K>>>0<Ze>>>0?1:0),F=T.low=F+mt,T.high=J+It+(F>>>0<mt>>>0?1:0),W=C.low=W+Fe,C.high=U+Ce+(W>>>0<Fe>>>0?1:0),V=I.low=V+yt,I.high=L+st+(V>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(gU)),gU.exports}var yU={exports:{}},Zpe;function mvt(){return Zpe||(Zpe=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),F5(),jke())})(Jt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(yU)),yU.exports}var vU={exports:{}},eme;function gvt(){return eme||(eme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),F5())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){f[g+5*y]=(v+1)*(v+2)/2%64;var x=y%5,w=(2*g+3*y)%5;g=x,y=w}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var E=1,T=0;T<24;T++){for(var C=0,I=0,N=0;N<7;N++){if(E&1){var k=(1<<N)-1;k<32?I^=1<<k:C^=1<<k-32}E&128?E=E<<1^113:E<<=1}h[T]=l.create(C,I)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,x=this.blockSize/2,w=0;w<x;w++){var E=g[y+2*w],T=g[y+2*w+1];E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var C=v[w];C.high^=T,C.low^=E}for(var I=0;I<24;I++){for(var N=0;N<5;N++){for(var k=0,P=0,M=0;M<5;M++){var C=v[N+5*M];k^=C.high,P^=C.low}var O=p[N];O.high=k,O.low=P}for(var N=0;N<5;N++)for(var B=p[(N+4)%5],q=p[(N+1)%5],H=q.high,Y=q.low,k=B.high^(H<<1|Y>>>31),P=B.low^(Y<<1|H>>>31),M=0;M<5;M++){var C=v[N+5*M];C.high^=k,C.low^=P}for(var K=1;K<25;K++){var k,P,C=v[K],J=C.high,F=C.low,U=f[K];U<32?(k=J<<U|F>>>32-U,P=F<<U|J>>>32-U):(k=F<<U-32|J>>>64-U,P=J<<U-32|F>>>64-U);var W=p[d[K]];W.high=k,W.low=P}var L=p[0],V=v[0];L.high=V.high,L.low=V.low;for(var N=0;N<5;N++)for(var M=0;M<5;M++){var K=N+5*M,C=v[K],Q=p[K],ue=p[(N+1)%5+5*M],we=p[(N+2)%5+5*M];C.high=Q.high^~ue.high&we.high,C.low=Q.low^~ue.low&we.low}var C=v[0],ce=h[I];C.high^=ce.high,C.low^=ce.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,x=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/x)*x>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var w=this._state,E=this.cfg.outputLength/8,T=E/8,C=[],I=0;I<T;I++){var N=w[I],k=N.high,P=N.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,C.push(P),C.push(k)}return new o.init(C,E)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(vU)),vU.exports}var bU={exports:{}},tme;function yvt(){return tme||(tme=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,C){for(var I=0;I<16;I++){var N=C+I,k=T[N];T[N]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var P=this._hash.words,M=h.words,O=p.words,B=l.words,q=c.words,H=f.words,Y=d.words,K,J,F,U,W,L,V,Q,ue,we;L=K=P[0],V=J=P[1],Q=F=P[2],ue=U=P[3],we=W=P[4];for(var ce,I=0;I<80;I+=1)ce=K+T[C+B[I]]|0,I<16?ce+=g(J,F,U)+M[0]:I<32?ce+=y(J,F,U)+M[1]:I<48?ce+=v(J,F,U)+M[2]:I<64?ce+=x(J,F,U)+M[3]:ce+=w(J,F,U)+M[4],ce=ce|0,ce=E(ce,H[I]),ce=ce+W|0,K=W,W=U,U=E(F,10),F=J,J=ce,ce=L+T[C+q[I]]|0,I<16?ce+=w(V,Q,ue)+O[0]:I<32?ce+=x(V,Q,ue)+O[1]:I<48?ce+=v(V,Q,ue)+O[2]:I<64?ce+=y(V,Q,ue)+O[3]:ce+=g(V,Q,ue)+O[4],ce=ce|0,ce=E(ce,Y[I]),ce=ce+we|0,L=we,we=ue,ue=E(Q,10),Q=V,V=ce;ce=P[1]+F+ue|0,P[1]=P[2]+U+we|0,P[2]=P[3]+W+L|0,P[3]=P[4]+K+V|0,P[4]=P[0]+J+Q|0,P[0]=ce},_doFinalize:function(){var T=this._data,C=T.words,I=this._nDataBytes*8,N=T.sigBytes*8;C[N>>>5]|=128<<24-N%32,C[(N+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,T.sigBytes=(C.length+1)*4,this._process();for(var k=this._hash,P=k.words,M=0;M<5;M++){var O=P[M];P[M]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return k},clone:function(){var T=a.clone.call(this);return T._hash=this._hash.clone(),T}});function g(T,C,I){return T^C^I}function y(T,C,I){return T&C|~T&I}function v(T,C,I){return(T|~C)^I}function x(T,C,I){return T&I|C&~I}function w(T,C,I){return T^(C|~I)}function E(T,C){return T<<C|T>>>32-C}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(bU)),bU.exports}var xU={exports:{}},nme;function NZ(){return nme||(nme=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(xU)),xU.exports}var _U={exports:{}},rme;function vvt(){return rme||(rme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),DZ(),NZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,v=g.words,x=h.keySize,w=h.iterations;y.length<x;){var E=p.update(d).finalize(g);p.reset();for(var T=E.words,C=T.length,I=E,N=1;N<w;N++){I=p.finalize(I),p.reset();for(var k=I.words,P=0;P<C;P++)T[P]^=k[P]}m.concat(E),v[0]++}return m.sigBytes=x*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(_U)),_U.exports}var wU={exports:{}},ime;function $v(){return ime||(ime=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bke(),NZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var x=1;x<v;x++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(wU)),wU.exports}var EU={exports:{}},sme;function va(){return sme||(sme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),$v())})(Jt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(k,P){return this.create(this._ENC_XFORM_MODE,k,P)},createDecryptor:function(k,P){return this.create(this._DEC_XFORM_MODE,k,P)},init:function(k,P,M){this.cfg=this.cfg.extend(M),this._xformMode=k,this._key=P,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(P){return typeof P=="string"?N:T}return function(P){return{encrypt:function(M,O,B){return k(O).encrypt(P,M,O,B)},decrypt:function(M,O,B){return k(O).decrypt(P,M,O,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(k,P){return this.Encryptor.create(k,P)},createDecryptor:function(k,P){return this.Decryptor.create(k,P)},init:function(k,P){this._cipher=k,this._iv=P}}),g=p.CBC=function(){var k=m.extend();k.Encryptor=k.extend({processBlock:function(M,O){var B=this._cipher,q=B.blockSize;P.call(this,M,O,q),B.encryptBlock(M,O),this._prevBlock=M.slice(O,O+q)}}),k.Decryptor=k.extend({processBlock:function(M,O){var B=this._cipher,q=B.blockSize,H=M.slice(O,O+q);B.decryptBlock(M,O),P.call(this,M,O,q),this._prevBlock=H}});function P(M,O,B){var q,H=this._iv;H?(q=H,this._iv=r):q=this._prevBlock;for(var Y=0;Y<B;Y++)M[O+Y]^=q[Y]}return k}(),y=i.pad={},v=y.Pkcs7={pad:function(k,P){for(var M=P*4,O=M-k.sigBytes%M,B=O<<24|O<<16|O<<8|O,q=[],H=0;H<O;H+=4)q.push(B);var Y=a.create(q,O);k.concat(Y)},unpad:function(k){var P=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=P}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var k;h.reset.call(this);var P=this.cfg,M=P.iv,O=P.mode;this._xformMode==this._ENC_XFORM_MODE?k=O.createEncryptor:(k=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,M&&M.words):(this._mode=k.call(O,this,M&&M.words),this._mode.__creator=k)},_doProcessBlock:function(k,P){this._mode.processBlock(k,P)},_doFinalize:function(){var k,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),P.unpad(k)),k},blockSize:128/32});var x=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),w=i.format={},E=w.OpenSSL={stringify:function(k){var P,M=k.ciphertext,O=k.salt;return O?P=a.create([1398893684,1701076831]).concat(O).concat(M):P=M,P.toString(c)},parse:function(k){var P,M=c.parse(k),O=M.words;return O[0]==1398893684&&O[1]==1701076831&&(P=a.create(O.slice(2,4)),O.splice(0,4),M.sigBytes-=16),x.create({ciphertext:M,salt:P})}},T=s.SerializableCipher=o.extend({cfg:o.extend({format:E}),encrypt:function(k,P,M,O){O=this.cfg.extend(O);var B=k.createEncryptor(M,O),q=B.finalize(P),H=B.cfg;return x.create({ciphertext:q,key:M,iv:H.iv,algorithm:k,mode:H.mode,padding:H.padding,blockSize:k.blockSize,formatter:O.format})},decrypt:function(k,P,M,O){O=this.cfg.extend(O),P=this._parse(P,O.format);var B=k.createDecryptor(M,O).finalize(P.ciphertext);return B},_parse:function(k,P){return typeof k=="string"?P.parse(k,this):k}}),C=i.kdf={},I=C.OpenSSL={execute:function(k,P,M,O,B){if(O||(O=a.random(64/8)),B)var q=d.create({keySize:P+M,hasher:B}).compute(k,O);else var q=d.create({keySize:P+M}).compute(k,O);var H=a.create(q.words.slice(P),M*4);return q.sigBytes=P*4,x.create({key:q,iv:H,salt:O})}},N=s.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:I}),encrypt:function(k,P,M,O){O=this.cfg.extend(O);var B=O.kdf.execute(M,k.keySize,k.ivSize,O.salt,O.hasher);O.iv=B.iv;var q=T.encrypt.call(this,k,P,B.key,O);return q.mixIn(B),q},decrypt:function(k,P,M,O){O=this.cfg.extend(O),P=this._parse(P,O.format);var B=O.kdf.execute(M,k.keySize,k.ivSize,P.salt,O.hasher);O.iv=B.iv;var q=T.decrypt.call(this,k,P,B.key,O);return q}})}()})}(EU)),EU.exports}var SU={exports:{}},ome;function bvt(){return ome||(ome=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(SU)),SU.exports}var TU={exports:{}},ame;function xvt(){return ame||(ame=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(TU)),TU.exports}var CU={exports:{}},ume;function _vt(){return ume||(ume=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(CU)),CU.exports}var AU={exports:{}},lme;function wvt(){return lme||(lme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(AU)),AU.exports}var IU={exports:{}},cme;function Evt(){return cme||(cme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(IU)),IU.exports}var kU={exports:{}},fme;function Svt(){return fme||(fme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(kU)),kU.exports}var RU={exports:{}},dme;function Tvt(){return dme||(dme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(RU)),RU.exports}var DU={exports:{}},hme;function Cvt(){return hme||(hme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(DU)),DU.exports}var NU={exports:{}},pme;function Avt(){return pme||(pme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(NU)),NU.exports}var PU={exports:{}},mme;function Ivt(){return mme||(mme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(PU)),PU.exports}var OU={exports:{}},gme;function kvt(){return gme||(gme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),va())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(OU)),OU.exports}var $U={exports:{}},yme;function Rvt(){return yme||(yme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),X_(),Q_(),$v(),va())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var E=0,T=0,w=0;w<256;w++){var C=T^T<<1^T<<2^T<<3^T<<4;C=C>>>8^C&255^99,a[E]=C,u[C]=E;var I=x[E],N=x[I],k=x[N],P=x[C]*257^C*16843008;l[E]=P<<24|P>>>8,c[E]=P<<16|P>>>16,f[E]=P<<8|P>>>24,d[E]=P;var P=k*16843009^N*65537^I*257^E*16843008;h[C]=P<<24|P>>>8,p[C]=P<<16|P>>>16,m[C]=P<<8|P>>>24,g[C]=P,E?(E=I^x[x[x[k^I]]],T^=x[x[T]]):E=T=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,E=w.words,T=w.sigBytes/4,C=this._nRounds=T+6,I=(C+1)*4,N=this._keySchedule=[],k=0;k<I;k++)k<T?N[k]=E[k]:(x=N[k-1],k%T?T>6&&k%T==4&&(x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255]):(x=x<<8|x>>>24,x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255],x^=y[k/T|0]<<24),N[k]=N[k-T]^x);for(var P=this._invKeySchedule=[],M=0;M<I;M++){var k=I-M;if(M%4)var x=N[k];else var x=N[k-4];M<4||k<=4?P[M]=x:P[M]=h[a[x>>>24]]^p[a[x>>>16&255]]^m[a[x>>>8&255]]^g[a[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,l,c,f,d,a)},decryptBlock:function(x,w){var E=x[w+1];x[w+1]=x[w+3],x[w+3]=E,this._doCryptBlock(x,w,this._invKeySchedule,h,p,m,g,u);var E=x[w+1];x[w+1]=x[w+3],x[w+3]=E},_doCryptBlock:function(x,w,E,T,C,I,N,k){for(var P=this._nRounds,M=x[w]^E[0],O=x[w+1]^E[1],B=x[w+2]^E[2],q=x[w+3]^E[3],H=4,Y=1;Y<P;Y++){var K=T[M>>>24]^C[O>>>16&255]^I[B>>>8&255]^N[q&255]^E[H++],J=T[O>>>24]^C[B>>>16&255]^I[q>>>8&255]^N[M&255]^E[H++],F=T[B>>>24]^C[q>>>16&255]^I[M>>>8&255]^N[O&255]^E[H++],U=T[q>>>24]^C[M>>>16&255]^I[O>>>8&255]^N[B&255]^E[H++];M=K,O=J,B=F,q=U}var K=(k[M>>>24]<<24|k[O>>>16&255]<<16|k[B>>>8&255]<<8|k[q&255])^E[H++],J=(k[O>>>24]<<24|k[B>>>16&255]<<16|k[q>>>8&255]<<8|k[M&255])^E[H++],F=(k[B>>>24]<<24|k[q>>>16&255]<<16|k[M>>>8&255]<<8|k[O&255])^E[H++],U=(k[q>>>24]<<24|k[M>>>16&255]<<16|k[O>>>8&255]<<8|k[B&255])^E[H++];x[w]=K,x[w+1]=J,x[w+2]=F,x[w+3]=U},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}($U)),$U.exports}var MU={exports:{}},vme;function Dvt(){return vme||(vme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),X_(),Q_(),$v(),va())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,x=[],w=0;w<56;w++){var E=u[w]-1;x[w]=v[E>>>5]>>>31-E%32&1}for(var T=this._subKeys=[],C=0;C<16;C++){for(var I=T[C]=[],N=c[C],w=0;w<24;w++)I[w/6|0]|=x[(l[w]-1+N)%28]<<31-w%6,I[4+(w/6|0)]|=x[28+(l[w+24]-1+N)%28]<<31-w%6;I[0]=I[0]<<1|I[0]>>>31;for(var w=1;w<7;w++)I[w]=I[w]>>>(w-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var k=this._invSubKeys=[],w=0;w<16;w++)k[w]=T[15-w]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,x){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var E=x[w],T=this._lBlock,C=this._rBlock,I=0,N=0;N<8;N++)I|=f[N][((C^E[N])&d[N])>>>0];this._lBlock=C,this._rBlock=T^I}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var x=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=x,this._lBlock^=x<<y}function m(y,v){var x=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=x,this._rBlock^=x<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=v.slice(0,2),w=v.length<4?v.slice(0,2):v.slice(2,4),E=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(x)),this._des2=h.createEncryptor(s.create(w)),this._des3=h.createEncryptor(s.create(E))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(MU)),MU.exports}var LU={exports:{}},bme;function Nvt(){return bme||(bme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),X_(),Q_(),$v(),va())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(LU)),LU.exports}var FU={exports:{}},xme;function Pvt(){return xme||(xme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),X_(),Q_(),$v(),va())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],x=y[1],w=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=w>>>16|E&4294901760,C=E<<16|w&65535;g[0]^=w,g[1]^=T,g[2]^=E,g[3]^=C,g[4]^=w,g[5]^=T,g[6]^=E,g[7]^=C;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(FU)),FU.exports}var BU={exports:{}},_me;function Ovt(){return _me||(_me=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),X_(),Q_(),$v(),va())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],x=y[1],w=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=w>>>16|E&4294901760,C=E<<16|w&65535;m[0]^=w,m[1]^=T,m[2]^=E,m[3]^=C,m[4]^=w,m[5]^=T,m[6]^=E,m[7]^=C;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(BU)),BU.exports}var jU={exports:{}},wme;function $vt(){return wme||(wme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),X_(),Q_(),$v(),va())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let v=y>>24&255,x=y>>16&255,w=y>>8&255,E=y&255,T=g.sbox[0][v]+g.sbox[1][x];return T=T^g.sbox[2][w],T=T+g.sbox[3][E],T}function d(g,y,v){let x=y,w=v,E;for(let T=0;T<a;++T)x=x^g.pbox[T],w=f(g,x)^w,E=x,x=w,w=E;return E=x,x=w,w=E,w=w^g.pbox[a],x=x^g.pbox[a+1],{left:x,right:w}}function h(g,y,v){let x=y,w=v,E;for(let T=a+1;T>1;--T)x=x^g.pbox[T],w=f(g,x)^w,E=x,x=w,w=E;return E=x,x=w,w=E,w=w^g.pbox[1],x=x^g.pbox[0],{left:x,right:w}}function p(g,y,v){for(let C=0;C<4;C++){g.sbox[C]=[];for(let I=0;I<256;I++)g.sbox[C][I]=l[C][I]}let x=0;for(let C=0;C<a+2;C++)g.pbox[C]=u[C]^y[x],x++,x>=v&&(x=0);let w=0,E=0,T=0;for(let C=0;C<a+2;C+=2)T=d(g,w,E),w=T.left,E=T.right,g.pbox[C]=w,g.pbox[C+1]=E;for(let C=0;C<4;C++)for(let I=0;I<256;I+=2)T=d(g,w,E),w=T.left,E=T.right,g.sbox[C][I]=w,g.sbox[C][I+1]=E;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(jU)),jU.exports}(function(e,t){(function(n,r,i){e.exports=r(Fr(),F5(),fvt(),dvt(),X_(),hvt(),Q_(),Bke(),DZ(),pvt(),jke(),mvt(),gvt(),yvt(),NZ(),vvt(),$v(),va(),bvt(),xvt(),_vt(),wvt(),Evt(),Svt(),Tvt(),Cvt(),Avt(),Ivt(),kvt(),Rvt(),Dvt(),Nvt(),Pvt(),Ovt(),$vt())})(Jt,function(n){return n})})(Lke);var oW=Lke.exports;function oh(e){const t=oW.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function Mvt(e){const t=oW.AES.decrypt(atob(e),"notSecret").toString(oW.enc.Utf8);return parseInt(t,10)}function J_(){const{studyId:e}=am();return`${e}`}function _d(){const{index:e}=am();return e===void 0?0:e.startsWith("reviewer-")?e:Mvt(e)}function wd(){const e=_d(),t=RZ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var P$={exports:{}};P$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",x="[object Proxy]",w="[object RegExp]",E="[object Set]",T="[object String]",C="[object Undefined]",I="[object WeakMap]",N="[object ArrayBuffer]",k="[object DataView]",P="[object Float32Array]",M="[object Float64Array]",O="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",K="[object Uint16Array]",J="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,L={};L[P]=L[M]=L[O]=L[B]=L[q]=L[H]=L[Y]=L[K]=L[J]=!0,L[a]=L[u]=L[N]=L[c]=L[k]=L[f]=L[d]=L[h]=L[m]=L[g]=L[v]=L[w]=L[E]=L[T]=L[I]=!1;var V=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,Q=typeof self=="object"&&self&&self.Object===Object&&self,ue=V||Q||Function("return this")(),we=t&&!t.nodeType&&t,ce=we&&!0&&e&&!e.nodeType&&e,Se=ce&&ce.exports===we,Oe=Se&&V.process,et=function(){try{var le=ce&&ce.require&&ce.require("util").types;return le||Oe&&Oe.binding&&Oe.binding("util")}catch{}}(),Re=et&&et.isTypedArray;function St(le,ye,Be){switch(Be.length){case 0:return le.call(ye);case 1:return le.call(ye,Be[0]);case 2:return le.call(ye,Be[0],Be[1]);case 3:return le.call(ye,Be[0],Be[1],Be[2])}return le.apply(ye,Be)}function Ze(le,ye){for(var Be=-1,Ht=Array(le);++Be<le;)Ht[Be]=ye(Be);return Ht}function It(le){return function(ye){return le(ye)}}function mt(le,ye){return le==null?void 0:le[ye]}function Ce(le,ye){return function(Be){return le(ye(Be))}}var Fe=Array.prototype,st=Function.prototype,yt=Object.prototype,Dt=ue["__core-js_shared__"],Je=st.toString,_e=yt.hasOwnProperty,kt=function(){var le=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),Rt=yt.toString,Ee=Je.call(Object),$e=RegExp("^"+Je.call(_e).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=Se?ue.Buffer:void 0,xt=ue.Symbol,jt=ue.Uint8Array;ot&&ot.allocUnsafe;var Un=Ce(Object.getPrototypeOf,Object),dr=Object.create,Tr=yt.propertyIsEnumerable,xi=Fe.splice,Tn=xt?xt.toStringTag:void 0,zn=function(){try{var le=at(Object,"defineProperty");return le({},"",{}),le}catch{}}(),hr=ot?ot.isBuffer:void 0,gr=Math.max,Xo=Date.now,ts=at(ue,"Map"),ds=at(Object,"create"),Ps=function(){function le(){}return function(ye){if(!Dd(ye))return{};if(dr)return dr(ye);le.prototype=ye;var Be=new le;return le.prototype=void 0,Be}}();function Vr(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function hs(){this.__data__=ds?ds(null):{},this.size=0}function Cc(le){var ye=this.has(le)&&delete this.__data__[le];return this.size-=ye?1:0,ye}function Qo(le){var ye=this.__data__;if(ds){var Be=ye[le];return Be===r?void 0:Be}return _e.call(ye,le)?ye[le]:void 0}function Bu(le){var ye=this.__data__;return ds?ye[le]!==void 0:_e.call(ye,le)}function Br(le,ye){var Be=this.__data__;return this.size+=this.has(le)?0:1,Be[le]=ds&&ye===void 0?r:ye,this}Vr.prototype.clear=hs,Vr.prototype.delete=Cc,Vr.prototype.get=Qo,Vr.prototype.has=Bu,Vr.prototype.set=Br;function Ri(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function gi(){this.__data__=[],this.size=0}function Qs(le){var ye=this.__data__,Be=yr(ye,le);if(Be<0)return!1;var Ht=ye.length-1;return Be==Ht?ye.pop():xi.call(ye,Be,1),--this.size,!0}function ai(le){var ye=this.__data__,Be=yr(ye,le);return Be<0?void 0:ye[Be][1]}function Di(le){return yr(this.__data__,le)>-1}function me(le,ye){var Be=this.__data__,Ht=yr(Be,le);return Ht<0?(++this.size,Be.push([le,ye])):Be[Ht][1]=ye,this}Ri.prototype.clear=gi,Ri.prototype.delete=Qs,Ri.prototype.get=ai,Ri.prototype.has=Di,Ri.prototype.set=me;function ae(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function ge(){this.size=0,this.__data__={hash:new Vr,map:new(ts||Ri),string:new Vr}}function Le(le){var ye=it(this,le).delete(le);return this.size-=ye?1:0,ye}function Me(le){return it(this,le).get(le)}function _t(le){return it(this,le).has(le)}function Ut(le,ye){var Be=it(this,le),Ht=Be.size;return Be.set(le,ye),this.size+=Be.size==Ht?0:1,this}ae.prototype.clear=ge,ae.prototype.delete=Le,ae.prototype.get=Me,ae.prototype.has=_t,ae.prototype.set=Ut;function dn(le){var ye=this.__data__=new Ri(le);this.size=ye.size}function Zn(){this.__data__=new Ri,this.size=0}function ur(le){var ye=this.__data__,Be=ye.delete(le);return this.size=ye.size,Be}function On(le){return this.__data__.get(le)}function Cr(le){return this.__data__.has(le)}function ui(le,ye){var Be=this.__data__;if(Be instanceof Ri){var Ht=Be.__data__;if(!ts||Ht.length<n-1)return Ht.push([le,ye]),this.size=++Be.size,this;Be=this.__data__=new ae(Ht)}return Be.set(le,ye),this.size=Be.size,this}dn.prototype.clear=Zn,dn.prototype.delete=ur,dn.prototype.get=On,dn.prototype.has=Cr,dn.prototype.set=ui;function on(le,ye){var Be=kd(le),Ht=!Be&&Xa(le),ir=!Be&&!Ht&&Rd(le),Wr=!Be&&!Ht&&!ir&&Cw(le),_i=Be||Ht||ir||Wr,an=_i?Ze(le.length,String):[],li=an.length;for(var wi in le)_i&&(wi=="length"||ir&&(wi=="offset"||wi=="parent")||Wr&&(wi=="buffer"||wi=="byteLength"||wi=="byteOffset")||Mt(wi,li))||an.push(wi);return an}function Ar(le,ye,Be){(Be!==void 0&&!ju(le[ye],Be)||Be===void 0&&!(ye in le))&&Ni(le,ye,Be)}function Qr(le,ye,Be){var Ht=le[ye];(!(_e.call(le,ye)&&ju(Ht,Be))||Be===void 0&&!(ye in le))&&Ni(le,ye,Be)}function yr(le,ye){for(var Be=le.length;Be--;)if(ju(le[Be][0],ye))return Be;return-1}function Ni(le,ye,Be){ye=="__proto__"&&zn?zn(le,ye,{configurable:!0,enumerable:!0,value:Be,writable:!0}):le[ye]=Be}var mo=qe();function Pi(le){return le==null?le===void 0?C:y:Tn&&Tn in Object(le)?ut(le):Io(le)}function Co(le){return Jo(le)&&Pi(le)==a}function ns(le){if(!Dd(le)||er(le))return!1;var ye=ib(le)?$e:U;return ye.test(nb(le))}function rs(le){return Jo(le)&&Tw(le.length)&&!!L[Pi(le)]}function Ao(le){if(!Dd(le))return vr(le);var ye=Hr(le),Be=[];for(var Ht in le)Ht=="constructor"&&(ye||!_e.call(le,Ht))||Be.push(Ht);return Be}function _a(le,ye,Be,Ht,ir){le!==ye&&mo(ye,function(Wr,_i){if(ir||(ir=new dn),Dd(Wr))go(le,ye,_i,Be,_a,Ht,ir);else{var an=Ht?Ht(Id(le,_i),Wr,_i+"",le,ye,ir):void 0;an===void 0&&(an=Wr),Ar(le,_i,an)}},Km)}function go(le,ye,Be,Ht,ir,Wr,_i){var an=Id(le,Be),li=Id(ye,Be),wi=_i.get(li);if(wi){Ar(le,Be,wi);return}var ko=Wr?Wr(an,li,Be+"",le,ye,_i):void 0,Nd=ko===void 0;if(Nd){var Os=kd(li),Xm=!Os&&Rd(li),Qm=!Os&&!Xm&&Cw(li);ko=li,Os||Xm||Qm?kd(an)?ko=an:rb(an)?ko=xe(an):Xm?(Nd=!1,ko=ee(li)):Qm?(Nd=!1,ko=se(li)):ko=[]:NC(li)||Xa(li)?(ko=an,Xa(an)?ko=Ym(an):(!Dd(an)||ib(an))&&(ko=vt(li))):Nd=!1}Nd&&(_i.set(li,ko),ir(ko,li,Ht,Wr,_i),_i.delete(li)),Ar(le,Be,ko)}function Tl(le,ye){return sy(Ac(le,ye,Ir),le+"")}var Ef=zn?function(le,ye){return zn(le,"toString",{configurable:!0,enumerable:!1,value:qr(ye),writable:!0})}:Ir;function ee(le,ye){return le.slice()}function pe(le){var ye=new le.constructor(le.byteLength);return new jt(ye).set(new jt(le)),ye}function se(le,ye){var Be=pe(le.buffer);return new le.constructor(Be,le.byteOffset,le.length)}function xe(le,ye){var Be=-1,Ht=le.length;for(ye||(ye=Array(Ht));++Be<Ht;)ye[Be]=le[Be];return ye}function Ae(le,ye,Be,Ht){var ir=!Be;Be||(Be={});for(var Wr=-1,_i=ye.length;++Wr<_i;){var an=ye[Wr],li=void 0;li===void 0&&(li=le[an]),ir?Ni(Be,an,li):Qr(Be,an,li)}return Be}function be(le){return Tl(function(ye,Be){var Ht=-1,ir=Be.length,Wr=ir>1?Be[ir-1]:void 0,_i=ir>2?Be[2]:void 0;for(Wr=le.length>3&&typeof Wr=="function"?(ir--,Wr):void 0,_i&&$n(Be[0],Be[1],_i)&&(Wr=ir<3?void 0:Wr,ir=1),ye=Object(ye);++Ht<ir;){var an=Be[Ht];an&&le(ye,an,Ht,Wr)}return ye})}function qe(le){return function(ye,Be,Ht){for(var ir=-1,Wr=Object(ye),_i=Ht(ye),an=_i.length;an--;){var li=_i[++ir];if(Be(Wr[li],li,Wr)===!1)break}return ye}}function it(le,ye){var Be=le.__data__;return Kt(ye)?Be[typeof ye=="string"?"string":"hash"]:Be.map}function at(le,ye){var Be=mt(le,ye);return ns(Be)?Be:void 0}function ut(le){var ye=_e.call(le,Tn),Be=le[Tn];try{le[Tn]=void 0;var Ht=!0}catch{}var ir=Rt.call(le);return Ht&&(ye?le[Tn]=Be:delete le[Tn]),ir}function vt(le){return typeof le.constructor=="function"&&!Hr(le)?Ps(Un(le)):{}}function Mt(le,ye){var Be=typeof le;return ye=ye??o,!!ye&&(Be=="number"||Be!="symbol"&&W.test(le))&&le>-1&&le%1==0&&le<ye}function $n(le,ye,Be){if(!Dd(Be))return!1;var Ht=typeof ye;return(Ht=="number"?oy(Be)&&Mt(ye,Be.length):Ht=="string"&&ye in Be)?ju(Be[ye],le):!1}function Kt(le){var ye=typeof le;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?le!=="__proto__":le===null}function er(le){return!!kt&&kt in le}function Hr(le){var ye=le&&le.constructor,Be=typeof ye=="function"&&ye.prototype||yt;return le===Be}function vr(le){var ye=[];if(le!=null)for(var Be in Object(le))ye.push(Be);return ye}function Io(le){return Rt.call(le)}function Ac(le,ye,Be){return ye=gr(ye===void 0?le.length-1:ye,0),function(){for(var Ht=arguments,ir=-1,Wr=gr(Ht.length-ye,0),_i=Array(Wr);++ir<Wr;)_i[ir]=Ht[ye+ir];ir=-1;for(var an=Array(ye+1);++ir<ye;)an[ir]=Ht[ir];return an[ye]=Be(_i),St(le,this,an)}}function Id(le,ye){if(!(ye==="constructor"&&typeof le[ye]=="function")&&ye!="__proto__")return le[ye]}var sy=np(Ef);function np(le){var ye=0,Be=0;return function(){var Ht=Xo(),ir=s-(Ht-Be);if(Be=Ht,ir>0){if(++ye>=i)return arguments[0]}else ye=0;return le.apply(void 0,arguments)}}function nb(le){if(le!=null){try{return Je.call(le)}catch{}try{return le+""}catch{}}return""}function ju(le,ye){return le===ye||le!==le&&ye!==ye}var Xa=Co(function(){return arguments}())?Co:function(le){return Jo(le)&&_e.call(le,"callee")&&!Tr.call(le,"callee")},kd=Array.isArray;function oy(le){return le!=null&&Tw(le.length)&&!ib(le)}function rb(le){return Jo(le)&&oy(le)}var Rd=hr||Iw;function ib(le){if(!Dd(le))return!1;var ye=Pi(le);return ye==h||ye==p||ye==l||ye==x}function Tw(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=o}function Dd(le){var ye=typeof le;return le!=null&&(ye=="object"||ye=="function")}function Jo(le){return le!=null&&typeof le=="object"}function NC(le){if(!Jo(le)||Pi(le)!=v)return!1;var ye=Un(le);if(ye===null)return!0;var Be=_e.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&Je.call(Be)==Ee}var Cw=Re?It(Re):rs;function Ym(le){return Ae(le,Km(le))}function Km(le){return oy(le)?on(le):Ao(le)}var Aw=be(function(le,ye,Be){_a(le,ye,Be)});function qr(le){return function(){return le}}function Ir(le){return le}function Iw(){return!1}e.exports=Aw})(P$,P$.exports);var Lvt=P$.exports;const PZ=Am(Lvt);function K0(e){return structuredClone(e)}function OZ(){const e=_d(),n=`${wd()}_${e}`;return ri(i=>i.answers[n])}const Uke=D.createContext(null);function Fvt(){const e=D.useContext(Uke);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function yg(){return ri(e=>e.config)}function O2(){const[e]=Nv();return!!e.get("participantId")}function Eme(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function zke(){const e=_d(),t=RZ(),r=`${wd()}_${e}`,i=ri(P=>P.trialValidation),s=ri(P=>P.sequence),o=ri(P=>P.answers),a=ri(P=>P.modes),u=ri(P=>P.otherTexts),l=Fu(),{saveTrialAnswer:c,setIframeAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Ha(),{storageEngine:m}=ho(),g=J_(),y=D.useMemo(()=>a.dataCollectionEnabled,[a]),v=avt(r),x=O2(),w=typeof e!="number"||x||!v,E=OZ(),T=Rm(),C=yg(),I=D.useMemo(()=>Date.now(),[]),N=Fvt(),k=D.useCallback((P=!0)=>{if(typeof e!="number")return;const M=K0(i[r]),O=Object.values(M).reduce((L,V)=>Object.hasOwn(V,"values")?{...L,...V.values}:L,{});Object.entries(u).forEach(([L,V])=>{Array.isArray(O[L])&&O[L].includes("__other")&&(O[L]=O[L].filter(Q=>Q!=="__other"),O[L].push(`other:${V}`)),typeof O[L]=="string"&&O[L]==="__other"&&(O[L]=`other:${V}`)});const{provenanceGraph:B}=M,q=Date.now(),{incorrectAnswers:H,helpButtonClickedCount:Y}=E,K=N&&"current"in N&&N.current?N.current.splice(0,N.current.length):[];if(y&&E.endTime===-1){const L={answer:P?O:{},startTime:I,endTime:q,incorrectAnswers:H,provenanceGraph:B,windowEvents:K,timedOut:!P,helpButtonClickedCount:Y};l(c({identifier:r,...L})),m&&m.saveAnswers({...o,[r]:L}),l(f({})),l(p()),l(h(null)),l(d(null))}let J=e+1;const F=IZ(s,e),U=F!==null&&F.some(L=>Object.hasOwn(L.currentBlock,"skip")&&L.currentBlock.skip!==void 0),W={...o,[r]:{answer:O,startTime:I,endTime:q,provenanceGraph:B,windowEvents:K}};U&&[...F.flatMap(V=>V.currentBlock.skip?V.currentBlock.skip.map(Q=>({...Q,firstIndex:V.firstIndex,lastIndex:V.lastIndex})):[])].some(V=>{let Q=!1;const ue=Object.fromEntries(Object.entries(W).filter(([ce])=>{const Se=parseInt(ce.slice(ce.lastIndexOf("_")+1),10);return Se>=V.firstIndex&&Se<=e})),we=V.check!=="block"?Object.entries(ue).filter(([ce])=>ce.slice(0,ce.lastIndexOf("_"))===V.name):Object.entries(ue);if(we.length===0)return!1;if(we.some(([ce,Se])=>!Se))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(V,null,2)}`);if(V.check==="response"||V.check==="responses"){const[ce,Se]=we[0];V.check==="response"?Q=V.comparison==="equal"?V.value===Se.answer[V.responseId]:V.value!==Se.answer[V.responseId]:Q=!Eme(Se.answer,ce,C.components[ce.slice(0,ce.lastIndexOf("_"))],C)}else if(V.check==="block"||V.check==="repeatedComponent"){if(we.length<V.value)return!1;const ce=we.map(([et,Re])=>Eme(Re.answer,et,C.components[et.slice(0,et.lastIndexOf("_"))],C)),Se=ce.filter(et=>et).length,Oe=ce.length-Se;Q=V.condition==="numCorrect"&&Se===V.value||V.condition==="numIncorrect"&&Oe===V.value}if(Q){const ce=t.indexOf(V.to),Se=ce===-1?svt(s,V.to):-1;return J=ce===-1?Se:ce,!0}return!1}),T(`/${g}/${oh(J)}${window.location.search}`)},[e,i,r,u,E,N,y,s,o,I,T,g,l,c,m,f,p,h,d,C,t]);return{isNextDisabled:w,goToNextStep:k}}function Bvt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=zke(),o=yg(),a=Rm(),u=D.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=D.useState(void 0);D.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),D.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=D.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return _.jsxs(_.Fragment,{children:[_.jsx(ln,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&_.jsxs(Y0,{mt:"md",title:"Please wait",color:"blue",icon:_.jsx(tZ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?_.jsxs(Y0,{mt:"md",title:"Next button disables soon",color:"yellow",icon:_.jsx(JI,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&_.jsxs(Y0,{mt:"md",title:"Next button disabled",color:"red",icon:_.jsx(JI,{}),children:["The next button has timed out and is now disabled.",_.jsx(_r,{justify:"right",mt:"sm",children:_.jsx(ln,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function jvt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Uvt=typeof window<"u"?D.useLayoutEffect:D.useEffect;function Ea(e,t){Uvt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function zvt(e,t){e&&jvt(e),Ea(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ea(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ea(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ea(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ea(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ea(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ea(`mantine-form:${e}:clear-errors`,t.clearErrors),Ea(`mantine-form:${e}:reset`,t.reset),Ea(`mantine-form:${e}:validate`,t.validate),Ea(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ea(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ea(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ea(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ea(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ea(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ea(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ea(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Vvt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function aW(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Hvt(e){const[t,n]=D.useState(aW(e)),r=D.useRef(t),i=D.useCallback(u=>{n(l=>{const c=aW(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=D.useCallback(()=>i({}),[]),o=D.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=D.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Vke(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Sme(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Tme(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Vke(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Sme(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Sme(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function qvt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Cme(e,t,n){typeof n.value=="object"&&(n.value=YE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function YE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(YE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(YE(a),YE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(YE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Cme(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Cme(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Hke(e){return typeof e!="string"?[]:e.split(".")}function Xl(e,t){const n=Hke(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function B5(e,t,n){const r=Hke(e);if(r.length===0)return n;const i=YE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Wvt(e,{from:t,to:n},r){const i=Xl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),B5(e,s,r)}function Gvt(e,t,n,r){const i=Xl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),B5(e,s,r)}function Yvt(e,t,n){const r=Xl(e,n);return Array.isArray(r)?B5(e,r.filter((i,s)=>s!==t),n):n}function Kvt({$values:e,$errors:t,$status:n}){const r=D.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>qvt(o,a,u)),e.setValues({values:Wvt(o,a,e.refValues.current),updateState:!0})},[]),i=D.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Tme(o,a,u,-1)),e.setValues({values:Yvt(o,a,e.refValues.current),updateState:!0})},[]),s=D.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Tme(o,u,l,1)),e.setValues({values:Gvt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var $Z=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const U4=Am($Z);function J3(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Xvt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=D.useState(t),[o,a]=D.useState(e),u=D.useRef(t),l=D.useRef(e),c=D.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=D.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=D.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=D.useCallback((E,T)=>{c(C=>J3(C,E)===T?C:{...C,[E]:T})},[]),m=D.useCallback((E,T)=>{f(C=>J3(C,E)===T?C:{...C,[E]:T})},[]),g=D.useCallback(E=>J3(u.current,E),[]),y=D.useCallback(E=>f(T=>{if(typeof E!="string")return T;const C=Vke(E,T);return delete C[E],U4(C,T)?T:C}),[]),v=D.useCallback(E=>{if(E){const C=Xl(E,l.current);if(typeof C=="boolean")return C;const I=Xl(E,r.refValues.current),N=Xl(E,r.valuesSnapshot.current);return!U4(I,N)}return Object.keys(l.current).length>0?J3(l.current):!U4(r.refValues.current,r.valuesSnapshot.current)},[]),x=D.useCallback(()=>l.current,[]),w=D.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:x,getTouched:w}}function Qvt({initialValues:e,onValuesChange:t,mode:n}){const r=D.useRef(!1),[i,s]=D.useState(e||{}),o=D.useRef(i),a=D.useRef(i),u=D.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,x=p instanceof Function?p(o.current):p,w=y?{...v,...x}:x;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=D.useCallback(p=>{var y;const m=Xl(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,x=B5(p.path,g,o.current);u({values:x,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:x,previousValues:v}))}},[]),c=D.useCallback(p=>{a.current=p},[]),f=D.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=D.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=D.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Jvt({$status:e}){const t=D.useRef({}),n=D.useCallback((i,s)=>{D.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=D.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Xl(i,o.previousValues),value:Xl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Ame(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Ime(e){const t=aW(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function uW(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Xl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>uW(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||uW(o,t,a,i)),i},r)}function lW(e,t){return Ime(typeof e=="function"?e(t):uW(e,t))}function Z3(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=lW(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Zvt="__MANTINE_FORM_INDEX__";function kme(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Zvt}`)):!1:!1}function qke({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Hvt(r),p=Qvt({initialValues:n,onValuesChange:l,mode:t}),m=Xvt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Kvt({$values:p,$errors:h,$status:m}),y=Jvt({$status:m}),[v,x]=D.useState(0),[w,E]=D.useState({}),T=D.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&x(F=>F+1)},[]),C=D.useCallback(F=>{p.initialize(F,()=>t==="uncontrolled"&&x(U=>U+1))},[]),I=D.useCallback((F,U,W)=>{const L=kme(F,a);m.clearFieldDirty(F),m.setFieldTouched(F,!0),!L&&o&&h.clearFieldError(F),p.setFieldValue({path:F,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(F),L?V=>{const Q=Z3(F,d,V.updatedValues);Q.hasError?h.setFieldError(F,Q.error):h.clearFieldError(F)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(V=>({...V,[F]:(V[F]||0)+1})):null]})},[l,d]),N=D.useCallback(F=>{const U=p.refValues.current;p.setValues({values:F,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&x(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const L=Xl(W,p.refValues.current),V=Xl(W,U);L!==V&&y.getFieldSubscribers(W).forEach(Q=>Q({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),k=D.useCallback(()=>{const F=lW(d,p.refValues.current);return h.setErrors(F.errors),F},[d]),P=D.useCallback(F=>{const U=Z3(F,d,p.refValues.current);return U.hasError?h.setFieldError(F,U.error):h.clearFieldError(F),U},[d]),M=(F,{type:U="input",withError:W=!0,withFocus:L=!0,...V}={})=>{const ue={onChange:Vvt(we=>I(F,we,{forceUpdate:!1})),"data-path":Ame(e,F)};return W&&(ue.error=h.errorsState[F]),U==="checkbox"?ue[t==="controlled"?"checked":"defaultChecked"]=Xl(F,p.refValues.current):ue[t==="controlled"?"value":"defaultValue"]=Xl(F,p.refValues.current),L&&(ue.onFocus=()=>m.setFieldTouched(F,!0),ue.onBlur=()=>{if(kme(F,u)){const we=Z3(F,d,p.refValues.current);we.hasError?h.setFieldError(F,we.error):h.clearFieldError(F)}}),Object.assign(ue,f==null?void 0:f({inputProps:ue,field:F,options:{type:U,withError:W,withFocus:L,...V},form:J}))},O=(F,U)=>W=>{W==null||W.preventDefault();const L=k();L.hasErrors?U==null||U(L.errors,p.refValues.current,W):F==null||F(c(p.refValues.current),W)},B=F=>c(F||p.refValues.current),q=D.useCallback(F=>{F.preventDefault(),T()},[]),H=D.useCallback(F=>F?!Z3(F,d,p.refValues.current).hasError:!lW(d,p.refValues.current).hasErrors,[d]),Y=F=>`${v}-${F}-${w[F]||0}`,K=D.useCallback(F=>document.querySelector(`[data-path="${Ame(e,F)}"]`),[]),J={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:C,setValues:N,setFieldValue:I,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:P,getInputProps:M,onSubmit:O,onReset:q,isValid:H,getTransformedValues:B,key:Y,getInputNode:K};return zvt(e,J),J}function ebt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function tbt(e){return ebt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Wke(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const nbt=new URLSearchParams(window.location.search),rbt=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=nbt.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s,[`${r.id}-dontKnow`]:""}}}),{...n}},ibt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?Wke(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function sbt(e,t,n){const[r,i]=D.useState(null),s=qke({initialValues:rbt(e,n),validate:ibt(e)});return D.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Z_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Wke(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Gke({horizontal:e,children:t,style:n}){return e?_.jsx(_r,{mt:Pe(4),gap:"lg",style:n,children:t}):_.jsx(Gs,{gap:"md",style:n,children:t})}function obt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(v=>typeof v=="string"?{value:v,label:v}:v),[d,h]=D.useState(!1),[p,m]=D.useState(""),{setOtherText:g}=Ha(),y=Fu();return D.useEffect(()=>{y(g({key:e.id,value:p}))},[p,e.id,g,y]),_.jsx(_u.Group,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:s,required:o})})]}),description:u,...n,error:Z_(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(_r,{mt:"xs",children:_.jsxs(Gke,{horizontal:!!l,style:{flexGrow:1},children:[f.map(v=>_.jsx(_u,{disabled:t,value:v.value,label:v.label},v.value)),c&&_.jsx(_u,{disabled:t,value:"__other",checked:d,onClick:v=>h(v.currentTarget.checked),label:_.jsx(Ts,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:v=>m(v.currentTarget.value)})},"__other")]})})})}function abt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(T2,{disabled:t,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Z_(e,n,c)})}function ubt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(Ts.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&_.jsx(Eh,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Eh.Item,{children:a},a)):_.jsx(Eh.Item,{children:t.value})})})}function Yke({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(E=>typeof E=="string"?{value:E,label:E}:E),[m,g]=D.useState(!1),[y,v]=D.useState(""),{setOtherText:x}=Ha(),w=Fu();return D.useEffect(()=>{w(x({key:e.id,value:y}))},[y,e.id,x,w]),_.jsx(Wp.Group,{name:`radioInput${e.id}`,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:o,required:a})})]}),description:f,...n,error:Z_(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(_r,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?_.jsx(Qe,{children:l}):null,_.jsxs(Gke,{horizontal:!!d,style:{flexGrow:1},children:[p.map(E=>_.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Pe(12),flex:s?1:"unset",alignItems:"center"},children:[d&&_.jsx(Qe,{size:"sm",children:E.label}),_.jsx(Wp,{disabled:t,value:E.value,label:E.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&_.jsx(Qe,{size:"sm",children:E.label})]},E.label)),h&&_.jsx(Wp,{disabled:t,value:"__other",checked:m,onClick:E=>g(E.currentTarget.checked),label:_.jsx(Ts,{mt:-8,placeholder:"Other",disabled:!m,value:y,onChange:E=>v(E.currentTarget.value)})},"__other")]}),_.jsx(Qe,{children:c})]})},e.id)}function lbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return _.jsx(Yke,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function cbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(NJ,{disabled:t,placeholder:l,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Z_(e,n)})}function fbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=D.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=Z_(e,n);return _.jsx(Ts.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(_5,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function dbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(M0,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Z_(e,n)})}function hbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(bJ,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Z_(e,n)})}function pbt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return _.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>_.jsx(_u,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function mbt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return _.jsx(Wp.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:_.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>_.jsx(Wp,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function gbt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Ha(),a=Fu(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(x=>({value:x,label:x})):u.map(x=>typeof x=="string"?{value:x,label:x}:x),p=l.map(x=>typeof x=="string"?{value:x,label:x}:x),m=(x,w)=>{const E={type:"radio",questionKey:w,val:x,responseId:e.id};a(s(E))},g=(x,w,E)=>{const T=x.target.checked,C={questionKey:w,responseId:e.id,value:E.value,label:E.label,isChecked:T,choiceOptions:h};a(o(C))},y=h.length,v=p.length;return _.jsxs(_.Fragment,{children:[_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ru,{text:c,required:f})})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[_.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((x,w)=>_.jsx(Qe,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:x.label},`choice-${w}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v}, 1fr)`},children:p.map((x,w)=>_.jsx(Qe,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(w+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:x.label},`question-${w}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v},1fr)`},children:p.map((x,w)=>_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(w+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?_.jsx(mbt,{disabled:r,idx:w,question:x,answer:t,_choices:h,_n:y,onChange:m,response:e}):_.jsx(pbt,{disabled:r,idx:w,question:x,answer:t,_choices:h,_n:y,onChange:g})},`question-${w}`))})]})]})}function ybt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=Nv(),c=yg().uiConfig.enumerateQuestions??!1,f=D.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=D.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return D.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,!!d),d&&s.setFieldValue(e.id,"")},[d,s,e.id]),_.jsxs(ke,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&_.jsx(cbt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&_.jsx(dbt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&_.jsx(hbt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&_.jsx(lbt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&_.jsx(abt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&_.jsx(fbt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&_.jsx(Yke,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&_.jsx(obt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="iframe"&&_.jsx(ubt,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&_.jsx(gbt,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&_.jsx(_u,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&_.jsx(V_,{mt:"xl",mb:"xs"})]})}function O$({config:e,location:t,status:n,style:r}){var F;const{storageEngine:i}=ho(),s=Fu(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Ha(),c=_d(),f=wd(),d=n==null?void 0:n.answer,h=J_(),p=Rm(),m=e,g=D.useMemo(()=>{var U;return((U=m==null?void 0:m.response)==null?void 0:U.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=D.useMemo(()=>g.map(U=>({...U,required:U.required===void 0?!0:U.required})),[g]),v=sbt(y,c,d||{}),[x,w]=D.useState(void 0),E=ri(U=>U.iframeAnswers),T=ri(U=>U.iframeProvenance),C=ri(U=>U.matrixAnswers),I=(m==null?void 0:m.provideFeedback)&&(((F=m==null?void 0:m.correctAnswer)==null?void 0:F.length)||0)>0,N=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[k,P]=D.useState(0),M=(m==null?void 0:m.trainingAttempts)||2,[O,B]=D.useState(!1),q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");D.useEffect(()=>{const U=y.find(W=>W.type==="iframe");if(E&&U){const W=U.id;v.setValues({...v.values,[W]:E[W]})}},[E]),D.useEffect(()=>{T&&w(T)},[T]),D.useEffect(()=>{const U=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(C&&U.length>0){const W={...v.values};U.forEach(L=>{const{id:V}=L;W[V]={...v.getInputProps(V).value,...C[V]}}),v.setValues(W)}},[C]),D.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:v.isValid(),values:K0(v.values),provenanceGraph:x}))},[v.values,f,c,t,s,o,x]);const[H,Y]=D.useState(Object.fromEntries(y.map(U=>[U.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),K=(U,W,L,V,Q)=>{Y(ue=>({...ue,[U]:{visible:W,title:L,message:V,color:Q}}))},J=()=>{const U=k+1;P(U);const W=Object.fromEntries(y.map(L=>{var ue,we;const V=(we=(ue=m.correctAnswer)==null?void 0:ue.find(ce=>ce.id===L.id))==null?void 0:we.answer,Q=v.values[L.id];return[L.id,Array.isArray(Q)?typeof V=="string"?Q.length===1&&V===Q[0]:Q.length===V.length&&Q.every(ce=>V.includes(ce)):V===Q]}));I&&(y.forEach(L=>{var V;if(W[L.id]&&!((V=H[L.id])!=null&&V.message.includes("You've failed to answer this question correctly")))K(L.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:L.id,answer:v.values[L.id]}));let Q="";M===-1?Q="Please try again.":U>=M?(Q=`You didn't answer this question correctly after ${M} attempts. ${N?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!N&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):M-U===1?Q="Please try again. You have 1 attempt left.":Q=`Please try again. You have ${M-U} attempts left.`,K(L.id,!0,"Incorrect Answer",Q,"red")}}),B(N&&U>=M||Object.values(W).every(L=>L)&&U<=M))};return _.jsxs("div",{style:r,children:[y.map((U,W)=>{var V,Q;const L=(Q=(V=m.correctAnswer)==null?void 0:V.find(ue=>ue.id===U.id))==null?void 0:Q.answer;return _.jsx(ni.Fragment,{children:U.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(ybt,{storedAnswer:d,answer:{...v.getInputProps(U.id,{type:U.type==="checkbox"?"checkbox":"input"})},response:U,index:W+1,configInUse:m,form:v}),H[U.id].visible&&_.jsxs(Y0,{mb:"md",title:H[U.id].title,color:H[U.id].color,children:[H[U.id].message," ",H[U.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:[_.jsx("br",{}),_.jsx("br",{}),"If you're unsure"," ",_.jsx(z_,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),_.jsx("br",{}),_.jsx("br",{}),k>=M&&M>=0&&L&&` The correct answer was: ${L}.`]})]})},`${U.id}-${c}`)}),_.jsxs(_r,{justify:"right",gap:"xs",children:[I&&q&&_.jsx(ln,{onClick:()=>J(),disabled:!v.isValid()||k>=M&&M>=0,children:"Check Answer"}),q&&_.jsx(Bvt,{disabled:I&&!O||!v.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const cA="@REVISIT_COMMS",vbt={minHeight:"500px",width:"100%",border:0};function bbt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Ha(),r=Fu(),i=gke(),s=D.useRef(null),o=D.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=wd(),u=Rm(),l=D.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${cA}/${c}`,iframeId:o,message:f},"*")},[s,o]);return D.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${cA}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${cA}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${cA}/ANSWERS`:r(t(d.message));break;case`${cA}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Va}${e.path}?trialid=${a}&id=${o}`,style:vbt})}async function MZ(e){const n=await(await fetch(`${Va}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function xbt(e){const t=await fetch(`${Va}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function j1({email:e,path:t}){const n=Dv();return _.jsxs(pg,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Vs,{order:2,children:_.jsx(Qe,{span:!0,c:"orange",children:"404"})}),_.jsxs(Qe,{children:[_.jsx(Qe,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Zc,{h:"lg"}),_.jsxs(Eh,{children:[_.jsx(Eh.Item,{children:_.jsx(Qe,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Eh.Item,{children:_.jsxs(Qe,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(z_,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const _bt={maxWidth:"100%"};function wbt({currentConfig:e}){const t={..._bt,...e.style},[n,r]=D.useState(!0),[i,s]=D.useState(!1);return D.useEffect(()=>{async function o(){const a=await MZ(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Rv,{mx:"auto",src:`${Va}${e.path}`,style:t}):_.jsx(j1,{path:e.path})}function X0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ebt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $2(e){let t,n,r;e.length!==2?(t=X0,n=(a,u)=>X0(e(a),u),r=(a,u)=>e(a)-u):(t=e===X0||e===Ebt?e:Sbt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Sbt(){return 0}function Kke(e){return e===null?NaN:+e}function*Tbt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Xke=$2(X0),U1=Xke.right,Cbt=Xke.left;$2(Kke).center;function Abt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Ibt(e,t){const n=Abt(e,t);return n&&Math.sqrt(n)}function bR(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class cl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Rme extends Map{constructor(t,n=Zke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(cW(this,t))}has(t){return super.has(cW(this,t))}set(t,n){return super.set(Qke(this,t),n)}delete(t){return super.delete(Jke(this,t))}}class $$ extends Set{constructor(t,n=Zke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(cW(this,t))}add(t){return super.add(Qke(this,t))}delete(t){return super.delete(Jke(this,t))}}function cW({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Qke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Jke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Zke(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kbt(e,t){return Array.from(t,n=>e[n])}function Rbt(e=X0){if(e===X0)return eRe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function eRe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Dbt=Math.sqrt(50),Nbt=Math.sqrt(10),Pbt=Math.sqrt(2);function M$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Dbt?10:s>=Nbt?5:s>=Pbt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?M$(e,t,n*2):[a,u,l]}function fW(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?M$(t,e,n):M$(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function dW(e,t,n){return t=+t,e=+e,n=+n,M$(e,t,n)[2]}function z1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?dW(t,e,n):dW(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Q0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hW(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function tRe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?eRe:Rbt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));tRe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(fA(e,n,t),i(e[r],s)>0&&fA(e,n,r);o<a;){for(fA(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?fA(e,n,a):(++a,fA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function fA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pW(e,t,n){if(e=Float64Array.from(Tbt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hW(e);if(t>=1)return Q0(e);var r,i=(r-1)*t,s=Math.floor(i),o=Q0(tRe(e,s).subarray(0,s+1)),a=hW(e.subarray(s+1));return o+(a-o)*(i-s)}}function nRe(e,t,n=Kke){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Obt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function rRe(e,t){return pW(e,.5,t)}function*$bt(e){for(const t of e)yield*t}function iRe(e){return Array.from($bt(e))}function Ql(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function sRe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Mbt(e,...t){e=new $$(e),t=t.map(Lbt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Lbt(e){return e instanceof $$?e:new $$(e)}function Fbt(...e){const t=new $$;for(const n of e)for(const r of n)t.add(r);return t}var Bbt={value:()=>{}};function j5(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new z4(n)}function z4(e){this._=e}function jbt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}z4.prototype=j5.prototype={constructor:z4,on:function(e,t){var n=this._,r=jbt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Ubt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Dme(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Dme(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new z4(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Ubt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Dme(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Bbt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var mW="http://www.w3.org/1999/xhtml";const Nme={svg:"http://www.w3.org/2000/svg",xhtml:mW,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function U5(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nme.hasOwnProperty(t)?{space:Nme[t],local:e}:e}function zbt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mW&&t.documentElement.namespaceURI===mW?t.createElement(e):t.createElementNS(n,e)}}function Vbt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function oRe(e){var t=U5(e);return(t.local?Vbt:zbt)(t)}function Hbt(){}function LZ(e){return e==null?Hbt:function(){return this.querySelector(e)}}function qbt(e){typeof e!="function"&&(e=LZ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new hl(r,this._parents)}function aRe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wbt(){return[]}function uRe(e){return e==null?Wbt:function(){return this.querySelectorAll(e)}}function Gbt(e){return function(){return aRe(e.apply(this,arguments))}}function Ybt(e){typeof e=="function"?e=Gbt(e):e=uRe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new hl(r,i)}function lRe(e){return function(){return this.matches(e)}}function cRe(e){return function(t){return t.matches(e)}}var Kbt=Array.prototype.find;function Xbt(e){return function(){return Kbt.call(this.children,e)}}function Qbt(){return this.firstElementChild}function Jbt(e){return this.select(e==null?Qbt:Xbt(typeof e=="function"?e:cRe(e)))}var Zbt=Array.prototype.filter;function ext(){return Array.from(this.children)}function txt(e){return function(){return Zbt.call(this.children,e)}}function nxt(e){return this.selectAll(e==null?ext:txt(typeof e=="function"?e:cRe(e)))}function rxt(e){typeof e!="function"&&(e=lRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new hl(r,this._parents)}function fRe(e){return new Array(e.length)}function ixt(){return new hl(this._enter||this._groups.map(fRe),this._parents)}function L$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}L$.prototype={constructor:L$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sxt(e){return function(){return e}}function oxt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new L$(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function axt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new L$(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function uxt(e){return e.__data__}function lxt(e,t){if(!arguments.length)return Array.from(this,uxt);var n=t?axt:oxt,r=this._parents,i=this._groups;typeof e!="function"&&(e=sxt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=cxt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,x=0,w,E;v<p;++v)if(w=m[v]){for(v>=x&&(x=v+1);!(E=g[x])&&++x<p;);w._next=E||null}}return o=new hl(o,r),o._enter=a,o._exit=u,o}function cxt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fxt(){return new hl(this._exit||this._groups.map(fRe),this._parents)}function dxt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function hxt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new hl(a,this._parents)}function pxt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function mxt(e){e||(e=gxt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new hl(i,this._parents).order()}function gxt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yxt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vxt(){return Array.from(this)}function bxt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function xxt(){let e=0;for(const t of this)++e;return e}function _xt(){return!this.node()}function wxt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Ext(e){return function(){this.removeAttribute(e)}}function Sxt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Txt(e,t){return function(){this.setAttribute(e,t)}}function Cxt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Axt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ixt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function kxt(e,t){var n=U5(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Sxt:Ext:typeof t=="function"?n.local?Ixt:Axt:n.local?Cxt:Txt)(n,t))}function dRe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rxt(e){return function(){this.style.removeProperty(e)}}function Dxt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Nxt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pxt(e,t,n){return arguments.length>1?this.each((t==null?Rxt:typeof t=="function"?Nxt:Dxt)(e,t,n??"")):lT(this.node(),e)}function lT(e,t){return e.style.getPropertyValue(t)||dRe(e).getComputedStyle(e,null).getPropertyValue(t)}function Oxt(e){return function(){delete this[e]}}function $xt(e,t){return function(){this[e]=t}}function Mxt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Lxt(e,t){return arguments.length>1?this.each((t==null?Oxt:typeof t=="function"?Mxt:$xt)(e,t)):this.node()[e]}function hRe(e){return e.trim().split(/^|\s+/)}function FZ(e){return e.classList||new pRe(e)}function pRe(e){this._node=e,this._names=hRe(e.getAttribute("class")||"")}pRe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mRe(e,t){for(var n=FZ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function gRe(e,t){for(var n=FZ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Fxt(e){return function(){mRe(this,e)}}function Bxt(e){return function(){gRe(this,e)}}function jxt(e,t){return function(){(t.apply(this,arguments)?mRe:gRe)(this,e)}}function Uxt(e,t){var n=hRe(e+"");if(arguments.length<2){for(var r=FZ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?jxt:t?Fxt:Bxt)(n,t))}function zxt(){this.textContent=""}function Vxt(e){return function(){this.textContent=e}}function Hxt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function qxt(e){return arguments.length?this.each(e==null?zxt:(typeof e=="function"?Hxt:Vxt)(e)):this.node().textContent}function Wxt(){this.innerHTML=""}function Gxt(e){return function(){this.innerHTML=e}}function Yxt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Kxt(e){return arguments.length?this.each(e==null?Wxt:(typeof e=="function"?Yxt:Gxt)(e)):this.node().innerHTML}function Xxt(){this.nextSibling&&this.parentNode.appendChild(this)}function Qxt(){return this.each(Xxt)}function Jxt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zxt(){return this.each(Jxt)}function e_t(e){var t=typeof e=="function"?e:oRe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function t_t(){return null}function n_t(e,t){var n=typeof e=="function"?e:oRe(e),r=t==null?t_t:typeof t=="function"?t:LZ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function r_t(){var e=this.parentNode;e&&e.removeChild(this)}function i_t(){return this.each(r_t)}function s_t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function o_t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function a_t(e){return this.select(e?o_t:s_t)}function u_t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function l_t(e){return function(t){e.call(this,t,this.__data__)}}function c_t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function f_t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function d_t(e,t,n){return function(){var r=this.__on,i,s=l_t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function h_t(e,t,n){var r=c_t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?d_t:f_t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function yRe(e,t,n){var r=dRe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function p_t(e,t){return function(){return yRe(this,e,t)}}function m_t(e,t){return function(){return yRe(this,e,t.apply(this,arguments))}}function g_t(e,t){return this.each((typeof t=="function"?m_t:p_t)(e,t))}function*y_t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var BZ=[null];function hl(e,t){this._groups=e,this._parents=t}function sN(){return new hl([[document.documentElement]],BZ)}function v_t(){return this}hl.prototype=sN.prototype={constructor:hl,select:qbt,selectAll:Ybt,selectChild:Jbt,selectChildren:nxt,filter:rxt,data:lxt,enter:ixt,exit:fxt,join:dxt,merge:hxt,selection:v_t,order:pxt,sort:mxt,call:yxt,nodes:vxt,node:bxt,size:xxt,empty:_xt,each:wxt,attr:kxt,style:Pxt,property:Lxt,classed:Uxt,text:qxt,html:Kxt,raise:Qxt,lower:Zxt,append:e_t,insert:n_t,remove:i_t,clone:a_t,datum:u_t,on:h_t,dispatch:g_t,[Symbol.iterator]:y_t};function Jr(e){return typeof e=="string"?new hl([[document.querySelector(e)]],[document.documentElement]):new hl([[e]],BZ)}function b_t(e){let t;for(;t=e.sourceEvent;)e=t;return e}function F$(e,t){if(e=b_t(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function vRe(e){return typeof e=="string"?new hl([document.querySelectorAll(e)],[document.documentElement]):new hl([aRe(e)],BZ)}const gW={capture:!0,passive:!1};function yW(e){e.preventDefault(),e.stopImmediatePropagation()}function x_t(e){var t=e.document.documentElement,n=Jr(e).on("dragstart.drag",yW,gW);"onselectstart"in t?n.on("selectstart.drag",yW,gW):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function __t(e,t){var n=e.document.documentElement,r=Jr(e).on("dragstart.drag",null);t&&(r.on("click.drag",yW,gW),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function M2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function oN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Mv(){}var Qx=.7,cT=1/Qx,bS="\\s*([+-]?\\d+)\\s*",xR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w_t=/^#([0-9a-f]{3,8})$/,E_t=new RegExp(`^rgb\\(${bS},${bS},${bS}\\)$`),S_t=new RegExp(`^rgb\\(${Gp},${Gp},${Gp}\\)$`),T_t=new RegExp(`^rgba\\(${bS},${bS},${bS},${xR}\\)$`),C_t=new RegExp(`^rgba\\(${Gp},${Gp},${Gp},${xR}\\)$`),A_t=new RegExp(`^hsl\\(${xR},${Gp},${Gp}\\)$`),I_t=new RegExp(`^hsla\\(${xR},${Gp},${Gp},${xR}\\)$`),Pme={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M2(Mv,Jx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ome,formatHex:Ome,formatHex8:k_t,formatHsl:R_t,formatRgb:$me,toString:$me});function Ome(){return this.rgb().formatHex()}function k_t(){return this.rgb().formatHex8()}function R_t(){return bRe(this).formatHsl()}function $me(){return this.rgb().formatRgb()}function Jx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=w_t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mme(t):n===3?new la(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?eO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?eO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=E_t.exec(e))?new la(t[1],t[2],t[3],1):(t=S_t.exec(e))?new la(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=T_t.exec(e))?eO(t[1],t[2],t[3],t[4]):(t=C_t.exec(e))?eO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=A_t.exec(e))?Bme(t[1],t[2]/100,t[3]/100,1):(t=I_t.exec(e))?Bme(t[1],t[2]/100,t[3]/100,t[4]):Pme.hasOwnProperty(e)?Mme(Pme[e]):e==="transparent"?new la(NaN,NaN,NaN,0):null}function Mme(e){return new la(e>>16&255,e>>8&255,e&255,1)}function eO(e,t,n,r){return r<=0&&(e=t=n=NaN),new la(e,t,n,r)}function jZ(e){return e instanceof Mv||(e=Jx(e)),e?(e=e.rgb(),new la(e.r,e.g,e.b,e.opacity)):new la}function V1(e,t,n,r){return arguments.length===1?jZ(e):new la(e,t,n,r??1)}function la(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}M2(la,V1,oN(Mv,{brighter(e){return e=e==null?cT:Math.pow(cT,e),new la(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qx:Math.pow(Qx,e),new la(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new la(Nx(this.r),Nx(this.g),Nx(this.b),B$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lme,formatHex:Lme,formatHex8:D_t,formatRgb:Fme,toString:Fme}));function Lme(){return`#${px(this.r)}${px(this.g)}${px(this.b)}`}function D_t(){return`#${px(this.r)}${px(this.g)}${px(this.b)}${px((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fme(){const e=B$(this.opacity);return`${e===1?"rgb(":"rgba("}${Nx(this.r)}, ${Nx(this.g)}, ${Nx(this.b)}${e===1?")":`, ${e})`}`}function B$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function px(e){return e=Nx(e),(e<16?"0":"")+e.toString(16)}function Bme(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ah(e,t,n,r)}function bRe(e){if(e instanceof ah)return new ah(e.h,e.s,e.l,e.opacity);if(e instanceof Mv||(e=Jx(e)),!e)return new ah;if(e instanceof ah)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new ah(o,a,u,e.opacity)}function j$(e,t,n,r){return arguments.length===1?bRe(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}M2(ah,j$,oN(Mv,{brighter(e){return e=e==null?cT:Math.pow(cT,e),new ah(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qx:Math.pow(Qx,e),new ah(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new la(UU(e>=240?e-240:e+120,i,r),UU(e,i,r),UU(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ah(jme(this.h),tO(this.s),tO(this.l),B$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=B$(this.opacity);return`${e===1?"hsl(":"hsla("}${jme(this.h)}, ${tO(this.s)*100}%, ${tO(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jme(e){return e=(e||0)%360,e<0?e+360:e}function tO(e){return Math.max(0,Math.min(1,e||0))}function UU(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xRe=Math.PI/180,_Re=180/Math.PI,U$=18,wRe=.96422,ERe=1,SRe=.82521,TRe=4/29,xS=6/29,CRe=3*xS*xS,N_t=xS*xS*xS;function ARe(e){if(e instanceof Yp)return new Yp(e.l,e.a,e.b,e.opacity);if(e instanceof L0)return IRe(e);e instanceof la||(e=jZ(e));var t=qU(e.r),n=qU(e.g),r=qU(e.b),i=zU((.2225045*t+.7168786*n+.0606169*r)/ERe),s,o;return t===n&&n===r?s=o=i:(s=zU((.4360747*t+.3850649*n+.1430804*r)/wRe),o=zU((.0139322*t+.0971045*n+.7141733*r)/SRe)),new Yp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function z$(e,t,n,r){return arguments.length===1?ARe(e):new Yp(e,t,n,r??1)}function Yp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}M2(Yp,z$,oN(Mv,{brighter(e){return new Yp(this.l+U$*(e??1),this.a,this.b,this.opacity)},darker(e){return new Yp(this.l-U$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=wRe*VU(t),e=ERe*VU(e),n=SRe*VU(n),new la(HU(3.1338561*t-1.6168667*e-.4906146*n),HU(-.9787684*t+1.9161415*e+.033454*n),HU(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function zU(e){return e>N_t?Math.pow(e,1/3):e/CRe+TRe}function VU(e){return e>xS?e*e*e:CRe*(e-TRe)}function HU(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qU(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function P_t(e){if(e instanceof L0)return new L0(e.h,e.c,e.l,e.opacity);if(e instanceof Yp||(e=ARe(e)),e.a===0&&e.b===0)return new L0(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*_Re;return new L0(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function V$(e,t,n,r){return arguments.length===1?P_t(e):new L0(e,t,n,r??1)}function L0(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function IRe(e){if(isNaN(e.h))return new Yp(e.l,0,0,e.opacity);var t=e.h*xRe;return new Yp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}M2(L0,V$,oN(Mv,{brighter(e){return new L0(this.h,this.c,this.l+U$*(e??1),this.opacity)},darker(e){return new L0(this.h,this.c,this.l-U$*(e??1),this.opacity)},rgb(){return IRe(this).rgb()}}));var kRe=-.14861,UZ=1.78277,zZ=-.29227,z5=-.90649,_R=1.97294,Ume=_R*z5,zme=_R*UZ,Vme=UZ*zZ-z5*kRe;function O_t(e){if(e instanceof Px)return new Px(e.h,e.s,e.l,e.opacity);e instanceof la||(e=jZ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Vme*r+Ume*t-zme*n)/(Vme+Ume-zme),s=r-i,o=(_R*(n-i)-zZ*s)/z5,a=Math.sqrt(o*o+s*s)/(_R*i*(1-i)),u=a?Math.atan2(o,s)*_Re-120:NaN;return new Px(u<0?u+360:u,a,i,e.opacity)}function vW(e,t,n,r){return arguments.length===1?O_t(e):new Px(e,t,n,r??1)}function Px(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}M2(Px,vW,oN(Mv,{brighter(e){return e=e==null?cT:Math.pow(cT,e),new Px(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qx:Math.pow(Qx,e),new Px(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*xRe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new la(255*(t+n*(kRe*r+UZ*i)),255*(t+n*(zZ*r+z5*i)),255*(t+n*(_R*r)),this.opacity)}}));function RRe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function DRe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return RRe((n-r/t)*t,o,i,s,a)}}function NRe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return RRe((n-r/t)*t,i,s,o,a)}}const V5=e=>()=>e;function PRe(e,t){return function(n){return e+n*t}}function $_t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function H5(e,t){var n=t-e;return n?PRe(e,n>180||n<-180?n-360*Math.round(n/360):n):V5(isNaN(e)?t:e)}function M_t(e){return(e=+e)==1?ca:function(t,n){return n-t?$_t(t,n,e):V5(isNaN(t)?n:t)}}function ca(e,t){var n=t-e;return n?PRe(e,n):V5(isNaN(e)?t:e)}const wR=function e(t){var n=M_t(t);function r(i,s){var o=n((i=V1(i)).r,(s=V1(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ca(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function ORe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=V1(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var L_t=ORe(DRe),F_t=ORe(NRe);function VZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function $Re(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function B_t(e,t){return($Re(t)?VZ:MRe)(e,t)}function MRe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Vg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function LRe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function qf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function FRe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Vg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var bW=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,WU=new RegExp(bW.source,"g");function j_t(e){return function(){return e}}function U_t(e){return function(t){return e(t)+""}}function HZ(e,t){var n=bW.lastIndex=WU.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=bW.exec(e))&&(i=WU.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:qf(r,i)})),n=WU.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?U_t(u[0].x):j_t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Vg(e,t){var n=typeof t,r;return t==null||n==="boolean"?V5(t):(n==="number"?qf:n==="string"?(r=Jx(t))?(t=r,wR):HZ:t instanceof Jx?wR:t instanceof Date?LRe:$Re(t)?VZ:Array.isArray(t)?MRe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?FRe:qf)(e,t)}function z_t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function V_t(e,t){var n=H5(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function aN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Hme=180/Math.PI,xW={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BRe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Hme,skewX:Math.atan(u)*Hme,scaleX:o,scaleY:a}}var nO;function H_t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xW:BRe(t.a,t.b,t.c,t.d,t.e,t.f)}function q_t(e){return e==null||(nO||(nO=document.createElementNS("http://www.w3.org/2000/svg","g")),nO.setAttribute("transform",e),!(e=nO.transform.baseVal.consolidate()))?xW:(e=e.matrix,BRe(e.a,e.b,e.c,e.d,e.e,e.f))}function jRe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:qf(l,f)},{i:m-2,x:qf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:qf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:qf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:qf(l,f)},{i:m-2,x:qf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var URe=jRe(H_t,"px, ","px)","deg)"),zRe=jRe(q_t,", ",")",")"),W_t=1e-12;function qme(e){return((e=Math.exp(e))+1/e)/2}function G_t(e){return((e=Math.exp(e))-1/e)/2}function Y_t(e){return((e=Math.exp(2*e))-1)/(e+1)}const K_t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<W_t)y=Math.log(d/l)/t,g=function(C){return[a+C*h,u+C*p,l*Math.exp(t*C*y)]};else{var v=Math.sqrt(m),x=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(x*x+1)-x),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-E)/t,g=function(C){var I=C*y,N=qme(E),k=l/(n*v)*(N*Y_t(t*I+E)-G_t(E));return[a+k*h,u+k*p,l*N/qme(t*I+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function VRe(e){return function(t,n){var r=e((t=j$(t)).h,(n=j$(n)).h),i=ca(t.s,n.s),s=ca(t.l,n.l),o=ca(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const X_t=VRe(H5);var Q_t=VRe(ca);function J_t(e,t){var n=ca((e=z$(e)).l,(t=z$(t)).l),r=ca(e.a,t.a),i=ca(e.b,t.b),s=ca(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function HRe(e){return function(t,n){var r=e((t=V$(t)).h,(n=V$(n)).h),i=ca(t.c,n.c),s=ca(t.l,n.l),o=ca(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Z_t=HRe(H5);var ewt=HRe(ca);function qRe(e){return function t(n){n=+n;function r(i,s){var o=e((i=vW(i)).h,(s=vW(s)).h),a=ca(i.s,s.s),u=ca(i.l,s.l),l=ca(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const twt=qRe(H5);var nwt=qRe(ca);function qZ(e,t){t===void 0&&(t=e,e=Vg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function rwt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const iwt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Vg,interpolateArray:B_t,interpolateBasis:DRe,interpolateBasisClosed:NRe,interpolateCubehelix:twt,interpolateCubehelixLong:nwt,interpolateDate:LRe,interpolateDiscrete:z_t,interpolateHcl:Z_t,interpolateHclLong:ewt,interpolateHsl:X_t,interpolateHslLong:Q_t,interpolateHue:V_t,interpolateLab:J_t,interpolateNumber:qf,interpolateNumberArray:VZ,interpolateObject:FRe,interpolateRgb:wR,interpolateRgbBasis:L_t,interpolateRgbBasisClosed:F_t,interpolateRound:aN,interpolateString:HZ,interpolateTransformCss:URe,interpolateTransformSvg:zRe,interpolateZoom:K_t,piecewise:qZ,quantize:rwt},Symbol.toStringTag,{value:"Module"}));var fT=0,iI=0,dA=0,WRe=1e3,H$,sI,q$=0,Zx=0,q5=0,ER=typeof performance=="object"&&performance.now?performance:Date,GRe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function W5(){return Zx||(GRe(swt),Zx=ER.now()+q5)}function swt(){Zx=0}function SR(){this._call=this._time=this._next=null}SR.prototype=WZ.prototype={constructor:SR,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?W5():+n)+(t==null?0:+t),!this._next&&sI!==this&&(sI?sI._next=this:H$=this,sI=this),this._call=e,this._time=n,_W()},stop:function(){this._call&&(this._call=null,this._time=1/0,_W())}};function WZ(e,t,n){var r=new SR;return r.restart(e,t,n),r}function owt(){W5(),++fT;for(var e=H$,t;e;)(t=Zx-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fT}function Wme(){Zx=(q$=ER.now())+q5,fT=iI=0;try{owt()}finally{fT=0,uwt(),Zx=0}}function awt(){var e=ER.now(),t=e-q$;t>WRe&&(q5-=t,q$=e)}function uwt(){for(var e,t=H$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:H$=n);sI=e,_W(r)}function _W(e){if(!fT){iI&&(iI=clearTimeout(iI));var t=e-Zx;t>24?(e<1/0&&(iI=setTimeout(Wme,e-ER.now()-q5)),dA&&(dA=clearInterval(dA))):(dA||(q$=ER.now(),dA=setInterval(awt,WRe)),fT=1,GRe(Wme))}}function Gme(e,t,n){var r=new SR;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function lwt(e,t,n){var r=new SR,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?W5():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var cwt=j5("start","end","cancel","interrupt"),fwt=[],YRe=0,Yme=1,wW=2,V4=3,Kme=4,EW=5,H4=6;function G5(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;dwt(e,n,{name:t,index:r,group:i,on:cwt,tween:fwt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:YRe})}function GZ(e,t){var n=Hh(e,t);if(n.state>YRe)throw new Error("too late; already scheduled");return n}function Nm(e,t){var n=Hh(e,t);if(n.state>V4)throw new Error("too late; already running");return n}function Hh(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dwt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=WZ(s,0,n.time);function s(l){n.state=Yme,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Yme)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===V4)return Gme(o);h.state===Kme?(h.state=H4,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=H4,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Gme(function(){n.state===V4&&(n.state=Kme,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=wW,n.on.call("start",e,e.__data__,n.index,n.group),n.state===wW){for(n.state=V4,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=EW,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===EW&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=H4,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function SW(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>wW&&r.state<EW,r.state=H4,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function hwt(e){return this.each(function(){SW(this,e)})}function pwt(e,t){var n,r;return function(){var i=Nm(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function mwt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Nm(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function gwt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Hh(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?pwt:mwt)(n,e,t))}function YZ(e,t,n){var r=e._id;return e.each(function(){var i=Nm(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Hh(i,r).value[t]}}function KRe(e,t){var n;return(typeof t=="number"?qf:t instanceof Jx?wR:(n=Jx(t))?(t=n,wR):HZ)(e,t)}function ywt(e){return function(){this.removeAttribute(e)}}function vwt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bwt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function xwt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function _wt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function wwt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Ewt(e,t){var n=U5(e),r=n==="transform"?zRe:KRe;return this.attrTween(e,typeof t=="function"?(n.local?wwt:_wt)(n,r,YZ(this,"attr."+e,t)):t==null?(n.local?vwt:ywt)(n):(n.local?xwt:bwt)(n,r,t))}function Swt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Twt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Cwt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Twt(e,s)),n}return i._value=t,i}function Awt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Swt(e,s)),n}return i._value=t,i}function Iwt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=U5(e);return this.tween(n,(r.local?Cwt:Awt)(r,t))}function kwt(e,t){return function(){GZ(this,e).delay=+t.apply(this,arguments)}}function Rwt(e,t){return t=+t,function(){GZ(this,e).delay=t}}function Dwt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kwt:Rwt)(t,e)):Hh(this.node(),t).delay}function Nwt(e,t){return function(){Nm(this,e).duration=+t.apply(this,arguments)}}function Pwt(e,t){return t=+t,function(){Nm(this,e).duration=t}}function Owt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nwt:Pwt)(t,e)):Hh(this.node(),t).duration}function $wt(e,t){if(typeof t!="function")throw new Error;return function(){Nm(this,e).ease=t}}function Mwt(e){var t=this._id;return arguments.length?this.each($wt(t,e)):Hh(this.node(),t).ease}function Lwt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Nm(this,e).ease=n}}function Fwt(e){if(typeof e!="function")throw new Error;return this.each(Lwt(this._id,e))}function Bwt(e){typeof e!="function"&&(e=lRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new vg(r,this._parents,this._name,this._id)}function jwt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new vg(o,this._parents,this._name,this._id)}function Uwt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zwt(e,t,n){var r,i,s=Uwt(t)?GZ:Nm;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Vwt(e,t){var n=this._id;return arguments.length<2?Hh(this.node(),n).on.on(e):this.each(zwt(n,e,t))}function Hwt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qwt(){return this.on("end.remove",Hwt(this._id))}function Wwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=LZ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,G5(l[d],t,n,d,l,Hh(c,n)));return new vg(s,this._parents,t,n)}function Gwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uRe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Hh(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&G5(h,t,n,m,d,p);s.push(d),o.push(c)}return new vg(s,o,t,n)}var Ywt=sN.prototype.constructor;function Kwt(){return new Ywt(this._groups,this._parents)}function Xwt(e,t){var n,r,i;return function(){var s=lT(this,e),o=(this.style.removeProperty(e),lT(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function XRe(e){return function(){this.style.removeProperty(e)}}function Qwt(e,t,n){var r,i=n+"",s;return function(){var o=lT(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Jwt(e,t,n){var r,i,s;return function(){var o=lT(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),lT(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Zwt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Nm(this,e),l=u.on,c=u.value[s]==null?a||(a=XRe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function eEt(e,t,n){var r=(e+="")=="transform"?URe:KRe;return t==null?this.styleTween(e,Xwt(e,r)).on("end.style."+e,XRe(e)):typeof t=="function"?this.styleTween(e,Jwt(e,r,YZ(this,"style."+e,t))).each(Zwt(this._id,e)):this.styleTween(e,Qwt(e,r,t),n).on("end.style."+e,null)}function tEt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function nEt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&tEt(e,o,n)),r}return s._value=t,s}function rEt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,nEt(e,t,n??""))}function iEt(e){return function(){this.textContent=e}}function sEt(e){return function(){var t=e(this);this.textContent=t??""}}function oEt(e){return this.tween("text",typeof e=="function"?sEt(YZ(this,"text",e)):iEt(e==null?"":e+""))}function aEt(e){return function(t){this.textContent=e.call(this,t)}}function uEt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&aEt(i)),t}return r._value=e,r}function lEt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,uEt(e))}function cEt(){for(var e=this._name,t=this._id,n=QRe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Hh(u,t);G5(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vg(r,this._parents,e,n)}function fEt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Nm(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var dEt=0;function vg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function QRe(){return++dEt}var u0=sN.prototype;vg.prototype={constructor:vg,select:Wwt,selectAll:Gwt,selectChild:u0.selectChild,selectChildren:u0.selectChildren,filter:Bwt,merge:jwt,selection:Kwt,transition:cEt,call:u0.call,nodes:u0.nodes,node:u0.node,size:u0.size,empty:u0.empty,each:u0.each,on:Vwt,attr:Ewt,attrTween:Iwt,style:eEt,styleTween:rEt,text:oEt,textTween:lEt,remove:qwt,tween:gwt,delay:Dwt,duration:Owt,ease:Mwt,easeVarying:Fwt,end:fEt,[Symbol.iterator]:u0[Symbol.iterator]};const hEt=e=>+e;function pEt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mEt={time:null,delay:0,duration:250,ease:pEt};function gEt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function yEt(e){var t,n;e instanceof vg?(t=e._id,e=e._name):(t=QRe(),(n=mEt).time=W5(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&G5(u,e,t,l,o,n||gEt(u,t));return new vg(r,this._parents,e,t)}sN.prototype.interrupt=hwt;sN.prototype.transition=yEt;const GU=e=>()=>e;function vEt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function bEt(e){e.stopImmediatePropagation()}function YU(e){e.preventDefault(),e.stopImmediatePropagation()}var Xme={name:"drag"},KU={name:"space"},eE={name:"handle"},tE={name:"center"};const{abs:Qme,max:ru,min:iu}=Math;function Jme(e){return[+e[0],+e[1]]}function TW(e){return[Jme(e[0]),Jme(e[1])]}var q4={name:"x",handles:["w","e"].map(TR),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},W4={name:"y",handles:["n","s"].map(TR),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},xEt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(TR),input:function(e){return e==null?null:TW(e)},output:function(e){return e}},l0={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zme={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},e0e={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_Et={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},wEt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function TR(e){return{type:e}}function EEt(e){return!e.ctrlKey&&!e.button}function SEt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function TEt(){return navigator.maxTouchPoints||"ontouchstart"in this}function XU(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function CEt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function JRe(){return KZ(q4)}function ZRe(){return KZ(W4)}function eDe(){return KZ(xEt)}function KZ(e){var t=SEt,n=EEt,r=TEt,i=!0,s=j5("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([TR("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",l0.overlay).merge(y).each(function(){var x=XU(this).extent;Jr(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),g.selectAll(".selection").data([TR("selection")]).enter().append("rect").attr("class","selection").attr("cursor",l0.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(x){return x.type});v.exit().remove(),v.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return l0[x.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(x){c(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){c(this,arguments).end(x)}).tween("brush",function(){var x=this,w=x.__brush,E=c(x,arguments),T=w.selection,C=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),I=Vg(T,C);function N(k){w.selection=k===1&&C===null?null:I(k),l.call(x),E.brush()}return T!==null&&C!==null?N:N(1)}):g.each(function(){var x=this,w=arguments,E=x.__brush,T=e.input(typeof y=="function"?y.apply(x,w):y,E.extent),C=c(x,w).beforestart();SW(x),E.selection=T===null?null:T,l.call(x),C.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Jr(this),y=XU(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var x=g.__brush.emitter;return x&&(!v||!x.clean)?x:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var x=Jr(this.that).datum();s.call(g,this.that,new vEt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),x)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,x=(i&&g.metaKey?v="overlay":v)==="selection"?Xme:i&&g.altKey?tE:eE,w=e===W4?null:_Et[v],E=e===q4?null:wEt[v],T=XU(y),C=T.extent,I=T.selection,N=C[0][0],k,P,M=C[0][1],O,B,q=C[1][0],H,Y,K=C[1][1],J,F,U=0,W=0,L,V=w&&E&&i&&g.shiftKey,Q,ue,we=Array.from(g.touches||[g],Ce=>{const Fe=Ce.identifier;return Ce=F$(Ce,y),Ce.point0=Ce.slice(),Ce.identifier=Fe,Ce});SW(y);var ce=c(y,arguments,!0).beforestart();if(v==="overlay"){I&&(L=!0);const Ce=[we[0],we[1]||we[0]];T.selection=I=[[k=e===W4?N:iu(Ce[0][0],Ce[1][0]),O=e===q4?M:iu(Ce[0][1],Ce[1][1])],[H=e===W4?q:ru(Ce[0][0],Ce[1][0]),J=e===q4?K:ru(Ce[0][1],Ce[1][1])]],we.length>1&&St(g)}else k=I[0][0],O=I[0][1],H=I[1][0],J=I[1][1];P=k,B=O,Y=H,F=J;var Se=Jr(y).attr("pointer-events","none"),Oe=Se.selectAll(".overlay").attr("cursor",l0[v]);if(g.touches)ce.moved=Re,ce.ended=Ze;else{var et=Jr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Ze,!0);i&&et.on("keydown.brush",It,!0).on("keyup.brush",mt,!0),x_t(g.view)}l.call(y),ce.start(g,x.name);function Re(Ce){for(const Fe of Ce.changedTouches||[Ce])for(const st of we)st.identifier===Fe.identifier&&(st.cur=F$(Fe,y));if(V&&!Q&&!ue&&we.length===1){const Fe=we[0];Qme(Fe.cur[0]-Fe[0])>Qme(Fe.cur[1]-Fe[1])?ue=!0:Q=!0}for(const Fe of we)Fe.cur&&(Fe[0]=Fe.cur[0],Fe[1]=Fe.cur[1]);L=!0,YU(Ce),St(Ce)}function St(Ce){const Fe=we[0],st=Fe.point0;var yt;switch(U=Fe[0]-st[0],W=Fe[1]-st[1],x){case KU:case Xme:{w&&(U=ru(N-k,iu(q-H,U)),P=k+U,Y=H+U),E&&(W=ru(M-O,iu(K-J,W)),B=O+W,F=J+W);break}case eE:{we[1]?(w&&(P=ru(N,iu(q,we[0][0])),Y=ru(N,iu(q,we[1][0])),w=1),E&&(B=ru(M,iu(K,we[0][1])),F=ru(M,iu(K,we[1][1])),E=1)):(w<0?(U=ru(N-k,iu(q-k,U)),P=k+U,Y=H):w>0&&(U=ru(N-H,iu(q-H,U)),P=k,Y=H+U),E<0?(W=ru(M-O,iu(K-O,W)),B=O+W,F=J):E>0&&(W=ru(M-J,iu(K-J,W)),B=O,F=J+W));break}case tE:{w&&(P=ru(N,iu(q,k-U*w)),Y=ru(N,iu(q,H+U*w))),E&&(B=ru(M,iu(K,O-W*E)),F=ru(M,iu(K,J+W*E)));break}}Y<P&&(w*=-1,yt=k,k=H,H=yt,yt=P,P=Y,Y=yt,v in Zme&&Oe.attr("cursor",l0[v=Zme[v]])),F<B&&(E*=-1,yt=O,O=J,J=yt,yt=B,B=F,F=yt,v in e0e&&Oe.attr("cursor",l0[v=e0e[v]])),T.selection&&(I=T.selection),Q&&(P=I[0][0],Y=I[1][0]),ue&&(B=I[0][1],F=I[1][1]),(I[0][0]!==P||I[0][1]!==B||I[1][0]!==Y||I[1][1]!==F)&&(T.selection=[[P,B],[Y,F]],l.call(y),ce.brush(Ce,x.name))}function Ze(Ce){if(bEt(Ce),Ce.touches){if(Ce.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else __t(Ce.view,L),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Se.attr("pointer-events","all"),Oe.attr("cursor",l0.overlay),T.selection&&(I=T.selection),CEt(I)&&(T.selection=null,l.call(y)),ce.end(Ce,x.name)}function It(Ce){switch(Ce.keyCode){case 16:{V=w&&E;break}case 18:{x===eE&&(w&&(H=Y-U*w,k=P+U*w),E&&(J=F-W*E,O=B+W*E),x=tE,St(Ce));break}case 32:{(x===eE||x===tE)&&(w<0?H=Y-U:w>0&&(k=P-U),E<0?J=F-W:E>0&&(O=B-W),x=KU,Oe.attr("cursor",l0.selection),St(Ce));break}default:return}YU(Ce)}function mt(Ce){switch(Ce.keyCode){case 16:{V&&(Q=ue=V=!1,St(Ce));break}case 18:{x===tE&&(w<0?H=Y:w>0&&(k=P),E<0?J=F:E>0&&(O=B),x=eE,St(Ce));break}case 32:{x===KU&&(Ce.altKey?(w&&(H=Y-U*w,k=P+U*w),E&&(J=F-W*E,O=B+W*E),x=tE):(w<0?H=Y:w>0&&(k=P),E<0?J=F:E>0&&(O=B),x=eE),Oe.attr("cursor",l0[v]),St(Ce));break}default:return}YU(Ce)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=TW(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:GU(TW(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:GU(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:GU(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const CW=Math.PI,AW=2*CW,Lb=1e-6,AEt=AW-Lb;function tDe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function IEt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tDe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let XZ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tDe:IEt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Lb)if(!(Math.abs(f*u-l*c)>Lb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),x=s*Math.tan((CW-Math.acos((m+d-g)/(2*y*v)))/2),w=x/v,E=x/y;Math.abs(w-1)>Lb&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Lb||Math.abs(this._y1-c)>Lb)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%AW+AW),d>AEt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Lb&&this._append`A${r},${r},0,${+(d>=CW)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Y5(){return new XZ}Y5.prototype=XZ.prototype;const J0=11102230246251565e-32,su=134217729,kEt=(3+8*J0)*J0;function QU(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function REt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function uN(e){return new Float64Array(e)}const DEt=(3+16*J0)*J0,NEt=(2+12*J0)*J0,PEt=(9+64*J0)*J0*J0,nE=uN(4),t0e=uN(8),n0e=uN(12),r0e=uN(16),Gu=uN(4);function OEt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,x,w,E,T,C,I;const N=e-i,k=n-i,P=t-s,M=r-s;w=N*M,d=su*N,h=d-(d-N),p=N-h,d=su*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),T=P*k,d=su*P,h=d-(d-P),p=P-h,d=su*k,m=d-(d-k),g=k-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,nE[0]=E-(y+f)+(f-C),v=w+y,f=v-w,x=w-(v-f)+(y-f),y=x-T,f=x-y,nE[1]=x-(y+f)+(f-T),I=v+y,f=I-v,nE[2]=v-(I-f)+(y-f),nE[3]=I;let O=REt(4,nE),B=NEt*o;if(O>=B||-O>=B||(f=e-N,a=e-(N+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-P,u=t-(P+f)+(f-s),f=r-M,c=r-(M+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=PEt*o+kEt*Math.abs(O),O+=N*c+M*a-(P*l+k*u),O>=B||-O>=B))return O;w=a*M,d=su*a,h=d-(d-a),p=a-h,d=su*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),T=u*k,d=su*u,h=d-(d-u),p=u-h,d=su*k,m=d-(d-k),g=k-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,Gu[0]=E-(y+f)+(f-C),v=w+y,f=v-w,x=w-(v-f)+(y-f),y=x-T,f=x-y,Gu[1]=x-(y+f)+(f-T),I=v+y,f=I-v,Gu[2]=v-(I-f)+(y-f),Gu[3]=I;const q=QU(4,nE,4,Gu,t0e);w=N*c,d=su*N,h=d-(d-N),p=N-h,d=su*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=P*l,d=su*P,h=d-(d-P),p=P-h,d=su*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,Gu[0]=E-(y+f)+(f-C),v=w+y,f=v-w,x=w-(v-f)+(y-f),y=x-T,f=x-y,Gu[1]=x-(y+f)+(f-T),I=v+y,f=I-v,Gu[2]=v-(I-f)+(y-f),Gu[3]=I;const H=QU(q,t0e,4,Gu,n0e);w=a*c,d=su*a,h=d-(d-a),p=a-h,d=su*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=u*l,d=su*u,h=d-(d-u),p=u-h,d=su*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,Gu[0]=E-(y+f)+(f-C),v=w+y,f=v-w,x=w-(v-f)+(y-f),y=x-T,f=x-y,Gu[1]=x-(y+f)+(f-T),I=v+y,f=I-v,Gu[2]=v-(I-f)+(y-f),Gu[3]=I;const Y=QU(H,n0e,4,Gu,r0e);return r0e[Y-1]}function rO(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=DEt*l?u:-OEt(e,t,n,r,i,s,l)}const i0e=Math.pow(2,-52),iO=new Uint32Array(512);class W${static from(t,n=BEt,r=jEt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new W$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<o;N++){const k=t[2*N],P=t[2*N+1];k<a&&(a=k),P<u&&(u=P),k>l&&(l=k),P>c&&(c=P),this._ids[N]=N}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let N=0,k=1/0;N<o;N++){const P=JU(f,d,t[2*N],t[2*N+1]);P<k&&(h=N,k=P)}const g=t[2*h],y=t[2*h+1];for(let N=0,k=1/0;N<o;N++){if(N===h)continue;const P=JU(g,y,t[2*N],t[2*N+1]);P<k&&P>0&&(p=N,k=P)}let v=t[2*p],x=t[2*p+1],w=1/0;for(let N=0;N<o;N++){if(N===h||N===p)continue;const k=LEt(g,y,v,x,t[2*N],t[2*N+1]);k<w&&(m=N,w=k)}let E=t[2*m],T=t[2*m+1];if(w===1/0){for(let P=0;P<o;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];KE(this._ids,this._dists,0,o-1);const N=new Uint32Array(o);let k=0;for(let P=0,M=-1/0;P<o;P++){const O=this._ids[P],B=this._dists[O];B>M&&(N[k++]=O,M=B)}this.hull=N.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(rO(g,y,v,x,E,T)<0){const N=p,k=v,P=x;p=m,v=E,x=T,m=N,E=k,T=P}const C=FEt(g,y,v,x,E,T);this._cx=C.x,this._cy=C.y;for(let N=0;N<o;N++)this._dists[N]=JU(t[2*N],t[2*N+1],C.x,C.y);KE(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,x)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let N=0,k,P;N<this._ids.length;N++){const M=this._ids[N],O=t[2*M],B=t[2*M+1];if(N>0&&Math.abs(O-k)<=i0e&&Math.abs(B-P)<=i0e||(k=O,P=B,M===h||M===p||M===m))continue;let q=0;for(let F=0,U=this._hashKey(O,B);F<this._hashSize&&(q=s[(U+F)%this._hashSize],!(q!==-1&&q!==r[q]));F++);q=n[q];let H=q,Y;for(;Y=r[H],rO(O,B,t[2*H],t[2*H+1],t[2*Y],t[2*Y+1])>=0;)if(H=Y,H===q){H=-1;break}if(H===-1)continue;let K=this._addTriangle(H,M,r[H],-1,-1,i[H]);i[M]=this._legalize(K+2),i[H]=K,I++;let J=r[H];for(;Y=r[J],rO(O,B,t[2*J],t[2*J+1],t[2*Y],t[2*Y+1])<0;)K=this._addTriangle(J,M,Y,i[M],-1,i[J]),i[M]=this._legalize(K+2),r[J]=J,I--,J=Y;if(H===q)for(;Y=n[H],rO(O,B,t[2*Y],t[2*Y+1],t[2*H],t[2*H+1])<0;)K=this._addTriangle(Y,M,H,-1,i[H],i[Y]),this._legalize(K+2),i[Y]=K,r[H]=H,I--,H=Y;this._hullStart=n[M]=H,r[H]=n[J]=M,r[M]=J,s[this._hashKey(O,B)]=M,s[this._hashKey(t[2*H],t[2*H+1])]=H}this.hull=new Uint32Array(I);for(let N=0,k=this._hullStart;N<I;N++)this.hull[N]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor($Et(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=iO[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(MEt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<iO.length&&(iO[s++]=v)}else{if(s===0)break;t=iO[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function $Et(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function JU(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function MEt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function LEt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function FEt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function KE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;hA(e,i,s),t[e[n]]>t[e[r]]&&hA(e,n,r),t[e[s]]>t[e[r]]&&hA(e,s,r),t[e[n]]>t[e[s]]&&hA(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;hA(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(KE(e,t,s,r),KE(e,t,n,o-1)):(KE(e,t,n,o-1),KE(e,t,s,r))}}function hA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function BEt(e){return e[0]}function jEt(e){return e[1]}const s0e=1e-6;class mx{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>s0e||Math.abs(this._y1-s)>s0e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class IW{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let UEt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,x;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,C=t[w],I=t[w+1],N=t[E],k=t[E+1],P=t[T],M=t[T+1],O=N-C,B=k-I,q=P-C,H=M-I,Y=(O*H-B*q)*2;if(Math.abs(Y)<1e-9){if(s===void 0){s=o=0;for(const J of n)s+=t[J*2],o+=t[J*2+1];s/=n.length,o/=n.length}const K=1e9*Math.sign((s-C)*H-(o-I)*q);v=(C+P)/2-K*H,x=(I+M)/2+K*q}else{const K=1/Y,J=O*O+B*B,F=q*q+H*H;v=C+(H*J-B*F)*K,x=I+(O*F-q*J)*K}a[g]=v,a[g+1]=x}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new mx:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new mx:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new mx:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new IW;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const zEt=2*Math.PI,rE=Math.pow;function VEt(e){return e[0]}function HEt(e){return e[1]}function qEt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function WEt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class QZ{static from(t,n=VEt,r=HEt,i){return new QZ("length"in t?GEt(t,n,r,i):Float64Array.from(YEt(t,n,r,i)))}constructor(t){this._delaunator=new W$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&qEt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=WEt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new W$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new UEt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=rE(n-l[t*2],2)+rE(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=rE(n-l[p*2],2)+rE(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&rE(n-l[h*2],2)+rE(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new mx:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new mx:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,zEt)}return r&&r.value()}renderHull(t){const n=t==null?t=new mx:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new IW;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new mx:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new IW;return this.renderTriangle(t,n),n.value()}}function GEt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*YEt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var o0e={},ZU={},ez=34,pA=10,tz=13;function nDe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function KEt(e,t){var n=nDe(e);return function(r,i){return t(n(r),i,e)}}function a0e(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function $l(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function XEt(e){return e<0?"-"+$l(-e,6):e>9999?"+"+$l(e,6):$l(e,4)}function QEt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":XEt(e.getUTCFullYear())+"-"+$l(e.getUTCMonth()+1,2)+"-"+$l(e.getUTCDate(),2)+(i?"T"+$l(t,2)+":"+$l(n,2)+":"+$l(r,2)+"."+$l(i,3)+"Z":r?"T"+$l(t,2)+":"+$l(n,2)+":"+$l(r,2)+"Z":n||t?"T"+$l(t,2)+":"+$l(n,2)+"Z":"")}function rDe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?KEt(g,d):nDe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,x=!1;f.charCodeAt(p-1)===pA&&--p,f.charCodeAt(p-1)===tz&&--p;function w(){if(v)return ZU;if(x)return x=!1,o0e;var T,C=m,I;if(f.charCodeAt(C)===ez){for(;m++<p&&f.charCodeAt(m)!==ez||f.charCodeAt(++m)===ez;);return(T=m)>=p?v=!0:(I=f.charCodeAt(m++))===pA?x=!0:I===tz&&(x=!0,f.charCodeAt(m)===pA&&++m),f.slice(C+1,T-1).replace(/""/g,'"')}for(;m<p;){if((I=f.charCodeAt(T=m++))===pA)x=!0;else if(I===tz)x=!0,f.charCodeAt(m)===pA&&++m;else if(I!==n)continue;return f.slice(C,T)}return v=!0,f.slice(C,p)}for(;(y=w())!==ZU;){for(var E=[];y!==o0e&&y!==ZU;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=a0e(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=a0e(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?QEt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var JEt=rDe(","),ZEt=JEt.parse;function eSt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function tSt(e,t){return fetch(e,t).then(eSt)}function nSt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),tSt(t,n).then(function(i){return e(i,r)})}}var iDe=nSt(ZEt);function rSt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function iSt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return sDe(this.cover(t,n),t,n,e)}function sDe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function sSt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)sDe(this,o[n],a[n],e[n]);return this}function oSt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function aSt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function uSt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function il(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function lSt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new il(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new il(h[3],g,y,u,l),new il(h[2],o,y,g,l),new il(h[1],g,a,u,y),new il(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),w=v*v+x*x;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function cSt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function fSt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function dSt(){return this._root}function hSt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function pSt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new il(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new il(i,l,c,a,u)),(i=r[2])&&t.push(new il(i,s,c,l,u)),(i=r[1])&&t.push(new il(i,l,o,a,c)),(i=r[0])&&t.push(new il(i,s,o,l,c))}return this}function mSt(e){var t=[],n=[],r;for(this._root&&t.push(new il(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new il(s,o,a,c,f)),(s=i[1])&&t.push(new il(s,c,a,u,f)),(s=i[2])&&t.push(new il(s,o,f,c,l)),(s=i[3])&&t.push(new il(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function gSt(e){return e[0]}function ySt(e){return arguments.length?(this._x=e,this):this._x}function vSt(e){return e[1]}function bSt(e){return arguments.length?(this._y=e,this):this._y}function JZ(e,t,n){var r=new ZZ(t??gSt,n??vSt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ZZ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function u0e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var _l=JZ.prototype=ZZ.prototype;_l.copy=function(){var e=new ZZ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=u0e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=u0e(r));return e};_l.add=iSt;_l.addAll=sSt;_l.cover=oSt;_l.data=aSt;_l.extent=uSt;_l.find=lSt;_l.remove=cSt;_l.removeAll=fSt;_l.root=dSt;_l.size=hSt;_l.visit=pSt;_l.visitAfter=mSt;_l.x=ySt;_l.y=bSt;function ol(e){return function(){return e}}function Zy(e){return(e()-.5)*1e-6}function xSt(e){return e.x+e.vx}function _St(e){return e.y+e.vy}function wSt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ol(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=JZ(t,xSt,_St).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(x,w,E,T,C){var I=x.data,N=x.r,k=m+N;if(I){if(I.index>d.index){var P=h-I.x-I.vx,M=p-I.y-I.vy,O=P*P+M*M;O<k*k&&(P===0&&(P=Zy(r),O+=P*P),M===0&&(M=Zy(r),O+=M*M),O=(k-(O=Math.sqrt(O)))/O*i,d.vx+=(P*=O)*(k=(N*=N)/(g+N)),d.vy+=(M*=O)*k,I.vx-=P*(k=1-k),I.vy-=M*k)}return}return w>h+k||T<h-k||E>p+k||C<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ol(+l),u(),o):e},o}function ESt(e){return e.index}function l0e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function SSt(e){var t=ESt,n=f,r,i=ol(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var x=0,w,E,T,C,I,N,k;x<v;++x)w=e[x],E=w.source,T=w.target,C=T.x+T.vx-E.x-E.vx||Zy(l),I=T.y+T.vy-E.y-E.vy||Zy(l),N=Math.sqrt(C*C+I*I),N=(N-s[x])/N*g*r[x],C*=N,I*=N,T.vx-=C*(k=u[x]),T.vy-=I*k,E.vx+=C*(k=1-k),E.vy+=I*k}function h(){if(o){var g,y=o.length,v=e.length,x=new Map(o.map((E,T)=>[t(E,T,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=l0e(x,w.source)),typeof w.target!="object"&&(w.target=l0e(x,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ol(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ol(+g),m(),d):i},d}const TSt=1664525,CSt=1013904223,c0e=4294967296;function ASt(){let e=1;return()=>(e=(TSt*e+CSt)%c0e)/c0e}function ISt(e){return e.x}function kSt(e){return e.y}var RSt=10,DSt=Math.PI*(3-Math.sqrt(5));function NSt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=WZ(f),l=j5("tick","end"),c=ASt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=RSt*Math.sqrt(.5+m),x=m*DSt;y.x=v*Math.cos(x),y.y=v*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,x=e.length,w,E,T,C,I;for(y==null?y=1/0:y*=y,v=0;v<x;++v)C=e[v],w=m-C.x,E=g-C.y,T=w*w+E*E,T<y&&(I=C,y=T);return I},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function PSt(){var e,t,n,r,i=ol(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=JZ(e,ISt,kSt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,x,w;if(h.length){for(v=x=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,x+=g*m.y);h.x=v/y,h.y=x/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,x=g-p,w=y*y+v*v;if(x*x/u<w)return w<a&&(y===0&&(y=Zy(n),w+=y*y),v===0&&(v=Zy(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zy(n),w+=y*y),v===0&&(v=Zy(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(x=s[h.data.index]*r/w,t.vx+=y*x,t.vy+=v*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ol(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function OSt(e){var t=ol(.1),n,r,i;typeof e!="function"&&(e=ol(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ol(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ol(+a),o(),s):e},s}function $St(e){var t=ol(.1),n,r,i;typeof e!="function"&&(e=ol(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ol(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ol(+a),o(),s):e},s}function MSt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function G$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function dT(e){return e=G$(Math.abs(e)),e?e[1]:NaN}function LSt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function FSt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var BSt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function e_(e){if(!(t=BSt.exec(e)))throw new Error("invalid format: "+e);var t;return new eee({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}e_.prototype=eee.prototype;function eee(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}eee.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jSt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oDe;function USt(e,t){var n=G$(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(oDe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+G$(e,Math.max(0,t+s-1))[0]}function f0e(e,t){var n=G$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const d0e={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MSt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>f0e(e*100,t),r:f0e,s:USt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function h0e(e){return e}var p0e=Array.prototype.map,m0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aDe(e){var t=e.grouping===void 0||e.thousands===void 0?h0e:LSt(p0e.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?h0e:FSt(p0e.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=e_(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,x=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):d0e[E]||(x===void 0&&(x=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",C=m==="$"?r:/[%p]/.test(E)?o:"",I=d0e[E],N=/[defgprs%]/.test(E);x=x===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function k(P){var M=T,O=C,B,q,H;if(E==="c")O=I(P)+O,P="";else{P=+P;var Y=P<0||1/P<0;if(P=isNaN(P)?u:I(Math.abs(P),x),w&&(P=jSt(P)),Y&&+P==0&&p!=="+"&&(Y=!1),M=(Y?p==="("?p:a:p==="-"||p==="("?"":p)+M,O=(E==="s"?m0e[8+oDe/3]:"")+O+(Y&&p==="("?")":""),N){for(B=-1,q=P.length;++B<q;)if(H=P.charCodeAt(B),48>H||H>57){O=(H===46?i+P.slice(B+1):P.slice(B))+O,P=P.slice(0,B);break}}}v&&!g&&(P=t(P,1/0));var K=M.length+P.length+O.length,J=K<y?new Array(y-K+1).join(d):"";switch(v&&g&&(P=t(J+P,J.length?y-O.length:1/0),J=""),h){case"<":P=M+P+O+J;break;case"=":P=M+J+P+O;break;case"^":P=J.slice(0,K=J.length>>1)+M+P+O+J.slice(K);break;default:P=J+M+P+O;break}return s(P)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=e_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(dT(d)/3)))*3,m=Math.pow(10,-p),g=m0e[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var sO,Lv,tee;zSt({thousands:",",grouping:[3],currency:["$",""]});function zSt(e){return sO=aDe(e),Lv=sO.format,tee=sO.formatPrefix,sO}function uDe(e){return Math.max(0,-dT(Math.abs(e)))}function lDe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dT(t)/3)))*3-dT(Math.abs(e)))}function cDe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dT(t)-dT(e))+1}var hn=1e-6,kW=1e-12,cr=Math.PI,qs=cr/2,Y$=cr/4,pl=cr*2,no=180/cr,ar=cr/180,Mr=Math.abs,L2=Math.atan,ad=Math.atan2,fn=Math.cos,oO=Math.ceil,fDe=Math.exp,RW=Math.hypot,K$=Math.log,nz=Math.pow,rn=Math.sin,Qf=Math.sign||function(e){return e>0?1:e<0?-1:0},ml=Math.sqrt,nee=Math.tan;function dDe(e){return e>1?0:e<-1?cr:Math.acos(e)}function fc(e){return e>1?qs:e<-1?-qs:Math.asin(e)}function Oa(){}function X$(e,t){e&&y0e.hasOwnProperty(e.type)&&y0e[e.type](e,t)}var g0e={Feature:function(e,t){X$(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)X$(n[r].geometry,t)}},y0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){DW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)DW(n[r],t,0)},Polygon:function(e,t){v0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)v0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)X$(n[r],t)}};function DW(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function v0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)DW(e[n],t,1);t.polygonEnd()}function C0(e,t){e&&g0e.hasOwnProperty(e.type)?g0e[e.type](e,t):X$(e,t)}var Q$=new cl,J$=new cl,hDe,pDe,NW,PW,OW,um={point:Oa,lineStart:Oa,lineEnd:Oa,polygonStart:function(){Q$=new cl,um.lineStart=VSt,um.lineEnd=HSt},polygonEnd:function(){var e=+Q$;J$.add(e<0?pl+e:e),this.lineStart=this.lineEnd=this.point=Oa},sphere:function(){J$.add(pl)}};function VSt(){um.point=qSt}function HSt(){mDe(hDe,pDe)}function qSt(e,t){um.point=mDe,hDe=e,pDe=t,e*=ar,t*=ar,NW=e,PW=fn(t=t/2+Y$),OW=rn(t)}function mDe(e,t){e*=ar,t*=ar,t=t/2+Y$;var n=e-NW,r=n>=0?1:-1,i=r*n,s=fn(t),o=rn(t),a=OW*o,u=PW*s+a*fn(i),l=a*r*rn(i);Q$.add(ad(l,u)),NW=e,PW=s,OW=o}function WSt(e){return J$=new cl,C0(e,um),J$*2}function Z$(e){return[ad(e[1],e[0]),fc(e[2])]}function t_(e){var t=e[0],n=e[1],r=fn(n);return[r*fn(t),r*rn(t),rn(n)]}function aO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function rz(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function uO(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function eM(e){var t=ml(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Is,Vl,Ms,Bc,Fb,gDe,yDe,_S,ak,Ny,bg,_0={point:$W,lineStart:b0e,lineEnd:x0e,polygonStart:function(){_0.point=bDe,_0.lineStart=GSt,_0.lineEnd=YSt,ak=new cl,um.polygonStart()},polygonEnd:function(){um.polygonEnd(),_0.point=$W,_0.lineStart=b0e,_0.lineEnd=x0e,Q$<0?(Is=-(Ms=180),Vl=-(Bc=90)):ak>hn?Bc=90:ak<-1e-6&&(Vl=-90),bg[0]=Is,bg[1]=Ms},sphere:function(){Is=-(Ms=180),Vl=-(Bc=90)}};function $W(e,t){Ny.push(bg=[Is=e,Ms=e]),t<Vl&&(Vl=t),t>Bc&&(Bc=t)}function vDe(e,t){var n=t_([e*ar,t*ar]);if(_S){var r=hT(_S,n),i=[r[1],-r[0],0],s=hT(i,r);eM(s),s=Z$(s);var o=e-Fb,a=o>0?1:-1,u=s[0]*no*a,l,c=Mr(o)>180;c^(a*Fb<u&&u<a*e)?(l=s[1]*no,l>Bc&&(Bc=l)):(u=(u+360)%360-180,c^(a*Fb<u&&u<a*e)?(l=-s[1]*no,l<Vl&&(Vl=l)):(t<Vl&&(Vl=t),t>Bc&&(Bc=t))),c?e<Fb?Lc(Is,e)>Lc(Is,Ms)&&(Ms=e):Lc(e,Ms)>Lc(Is,Ms)&&(Is=e):Ms>=Is?(e<Is&&(Is=e),e>Ms&&(Ms=e)):e>Fb?Lc(Is,e)>Lc(Is,Ms)&&(Ms=e):Lc(e,Ms)>Lc(Is,Ms)&&(Is=e)}else Ny.push(bg=[Is=e,Ms=e]);t<Vl&&(Vl=t),t>Bc&&(Bc=t),_S=n,Fb=e}function b0e(){_0.point=vDe}function x0e(){bg[0]=Is,bg[1]=Ms,_0.point=$W,_S=null}function bDe(e,t){if(_S){var n=e-Fb;ak.add(Mr(n)>180?n+(n>0?360:-360):n)}else gDe=e,yDe=t;um.point(e,t),vDe(e,t)}function GSt(){um.lineStart()}function YSt(){bDe(gDe,yDe),um.lineEnd(),Mr(ak)>hn&&(Is=-(Ms=180)),bg[0]=Is,bg[1]=Ms,_S=null}function Lc(e,t){return(t-=e)<0?t+360:t}function KSt(e,t){return e[0]-t[0]}function _0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function XSt(e){var t,n,r,i,s,o,a;if(Bc=Ms=-(Is=Vl=1/0),Ny=[],C0(e,_0),n=Ny.length){for(Ny.sort(KSt),t=1,r=Ny[0],s=[r];t<n;++t)i=Ny[t],_0e(r,i[0])||_0e(r,i[1])?(Lc(r[0],i[1])>Lc(r[0],r[1])&&(r[1]=i[1]),Lc(i[0],r[1])>Lc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Lc(r[1],i[0]))>o&&(o=a,Is=i[0],Ms=r[1])}return Ny=bg=null,Is===1/0||Vl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Is,Vl],[Ms,Bc]]}var oI,tM,nM,rM,iM,sM,oM,aM,MW,LW,FW,xDe,_De,tl,nl,rl,ph={sphere:Oa,point:ree,lineStart:w0e,lineEnd:E0e,polygonStart:function(){ph.lineStart=ZSt,ph.lineEnd=eTt},polygonEnd:function(){ph.lineStart=w0e,ph.lineEnd=E0e}};function ree(e,t){e*=ar,t*=ar;var n=fn(t);lN(n*fn(e),n*rn(e),rn(t))}function lN(e,t,n){++oI,nM+=(e-nM)/oI,rM+=(t-rM)/oI,iM+=(n-iM)/oI}function w0e(){ph.point=QSt}function QSt(e,t){e*=ar,t*=ar;var n=fn(t);tl=n*fn(e),nl=n*rn(e),rl=rn(t),ph.point=JSt,lN(tl,nl,rl)}function JSt(e,t){e*=ar,t*=ar;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=ad(ml((o=nl*s-rl*i)*o+(o=rl*r-tl*s)*o+(o=tl*i-nl*r)*o),tl*r+nl*i+rl*s);tM+=o,sM+=o*(tl+(tl=r)),oM+=o*(nl+(nl=i)),aM+=o*(rl+(rl=s)),lN(tl,nl,rl)}function E0e(){ph.point=ree}function ZSt(){ph.point=tTt}function eTt(){wDe(xDe,_De),ph.point=ree}function tTt(e,t){xDe=e,_De=t,e*=ar,t*=ar,ph.point=wDe;var n=fn(t);tl=n*fn(e),nl=n*rn(e),rl=rn(t),lN(tl,nl,rl)}function wDe(e,t){e*=ar,t*=ar;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=nl*s-rl*i,a=rl*r-tl*s,u=tl*i-nl*r,l=RW(o,a,u),c=fc(l),f=l&&-c/l;MW.add(f*o),LW.add(f*a),FW.add(f*u),tM+=c,sM+=c*(tl+(tl=r)),oM+=c*(nl+(nl=i)),aM+=c*(rl+(rl=s)),lN(tl,nl,rl)}function nTt(e){oI=tM=nM=rM=iM=sM=oM=aM=0,MW=new cl,LW=new cl,FW=new cl,C0(e,ph);var t=+MW,n=+LW,r=+FW,i=RW(t,n,r);return i<kW&&(t=sM,n=oM,r=aM,tM<hn&&(t=nM,n=rM,r=iM),i=RW(t,n,r),i<kW)?[NaN,NaN]:[ad(n,t)*no,fc(r/i)*no]}function BW(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function jW(e,t){return Mr(e)>cr&&(e-=Math.round(e/pl)*pl),[e,t]}jW.invert=jW;function EDe(e,t,n){return(e%=pl)?t||n?BW(T0e(e),C0e(t,n)):T0e(e):t||n?C0e(t,n):jW}function S0e(e){return function(t,n){return t+=e,Mr(t)>cr&&(t-=Math.round(t/pl)*pl),[t,n]}}function T0e(e){var t=S0e(e);return t.invert=S0e(-e),t}function C0e(e,t){var n=fn(e),r=rn(e),i=fn(t),s=rn(t);function o(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*n+c*r;return[ad(f*i-h*s,c*n-d*r),fc(h*i+f*s)]}return o.invert=function(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*i-f*s;return[ad(f*i+d*s,c*n+h*r),fc(h*n-c*r)]},o}function rTt(e){e=EDe(e[0]*ar,e[1]*ar,e.length>2?e[2]*ar:0);function t(n){return n=e(n[0]*ar,n[1]*ar),n[0]*=no,n[1]*=no,n}return t.invert=function(n){return n=e.invert(n[0]*ar,n[1]*ar),n[0]*=no,n[1]*=no,n},t}function iTt(e,t,n,r,i,s){if(n){var o=fn(t),a=rn(t),u=r*n;i==null?(i=t+r*pl,s=t-u/2):(i=A0e(o,i),s=A0e(o,s),(r>0?i<s:i>s)&&(i+=r*pl));for(var l,c=i;r>0?c>s:c<s;c-=u)l=Z$([o,-a*fn(c),-a*rn(c)]),e.point(l[0],l[1])}}function A0e(e,t){t=t_(t),t[0]-=e,eM(t);var n=dDe(-t[1]);return((-t[2]<0?-n:n)+pl-hn)%pl}function SDe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Oa,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function G4(e,t){return Mr(e[0]-t[0])<hn&&Mr(e[1]-t[1])<hn}function lO(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function TDe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(G4(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*hn}s.push(v=new lO(g,p,null,!0)),o.push(v.o=new lO(g,null,v,!1)),s.push(v=new lO(y,p,null,!1)),o.push(v.o=new lO(y,null,v,!0))}}),!!s.length){for(o.sort(t),I0e(s),I0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function I0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function iz(e){return Mr(e[0])<=cr?e[0]:Qf(e[0])*((Mr(e[0])+cr)%pl-cr)}function sTt(e,t){var n=iz(t),r=t[1],i=rn(r),s=[rn(n),-fn(n),0],o=0,a=0,u=new cl;i===1?r=qs+hn:i===-1&&(r=-qs-hn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=iz(h),m=h[1]/2+Y$,g=rn(m),y=fn(m),v=0;v<d;++v,p=w,g=T,y=C,h=x){var x=f[v],w=iz(x),E=x[1]/2+Y$,T=rn(E),C=fn(E),I=w-p,N=I>=0?1:-1,k=N*I,P=k>cr,M=g*T;if(u.add(ad(M*N*rn(k),y*C+M*fn(k))),o+=P?I+N*pl:I,P^p>=n^w>=n){var O=hT(t_(h),t_(x));eM(O);var B=hT(s,O);eM(B);var q=(P^I>=0?-1:1)*fc(B[2]);(r>q||r===q&&(O[0]||O[1]))&&(a+=P^I>=0?1:-1)}}return(o<-1e-6||o<hn&&u<-1e-12)^a&1}function CDe(e,t,n,r){return function(i){var s=t(i),o=SDe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=iRe(c);var w=sTt(l,r);c.length?(u||(i.polygonStart(),u=!0),TDe(c,aTt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function x(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),T,C=E.length,I,N,k;if(f.pop(),l.push(f),f=null,!!C){if(w&1){if(N=E[0],(I=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<I;++T)i.point((k=N[T])[0],k[1]);i.lineEnd()}return}C>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(oTt))}}return d}}function oTt(e){return e.length>1}function aTt(e,t){return((e=e.x)[0]<0?e[1]-qs-hn:qs-e[1])-((t=t.x)[0]<0?t[1]-qs-hn:qs-t[1])}const k0e=CDe(function(){return!0},uTt,cTt,[-cr,-qs]);function uTt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?cr:-cr,u=Mr(s-t);Mr(u-cr)<hn?(e.point(t,n=(n+o)/2>0?qs:-qs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=cr&&(Mr(t-r)<hn&&(t-=r*hn),Mr(s-a)<hn&&(s-=a*hn),n=lTt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function lTt(e,t,n,r){var i,s,o=rn(e-n);return Mr(o)>hn?L2((rn(t)*(s=fn(r))*rn(n)-rn(r)*(i=fn(t))*rn(e))/(i*s*o)):(t+r)/2}function cTt(e,t,n,r){var i;if(e==null)i=n*qs,r.point(-cr,i),r.point(0,i),r.point(cr,i),r.point(cr,0),r.point(cr,-i),r.point(0,-i),r.point(-cr,-i),r.point(-cr,0),r.point(-cr,i);else if(Mr(e[0]-t[0])>hn){var s=e[0]<t[0]?cr:-cr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function fTt(e){var t=fn(e),n=2*ar,r=t>0,i=Mr(t)>hn;function s(c,f,d,h){iTt(h,e,n,d,c,f)}function o(c,f){return fn(c)*fn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],x,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?cr:-cr),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(x=u(f,v),(!x||G4(f,x)||G4(v,x))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),x=u(v,f),c.point(x[0],x[1])):(x=u(f,v),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^w){var T;!(E&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!G4(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=t_(c),p=t_(f),m=[1,0,0],g=hT(h,p),y=aO(g,g),v=g[0],x=y-v*v;if(!x)return!d&&c;var w=t*y/x,E=-t*v/x,T=hT(m,g),C=uO(m,w),I=uO(g,E);rz(C,I);var N=T,k=aO(C,N),P=aO(N,N),M=k*k-P*(aO(C,C)-1);if(!(M<0)){var O=ml(M),B=uO(N,(-k-O)/P);if(rz(B,C),B=Z$(B),!d)return B;var q=c[0],H=f[0],Y=c[1],K=f[1],J;H<q&&(J=q,q=H,H=J);var F=H-q,U=Mr(F-cr)<hn,W=U||F<hn;if(!U&&K<Y&&(J=Y,Y=K,K=J),W?U?Y+K>0^B[1]<(Mr(B[0]-q)<hn?Y:K):Y<=B[1]&&B[1]<=K:F>cr^(q<=B[0]&&B[0]<=H)){var L=uO(N,(-k+O)/P);return rz(L,C),[B,Z$(L)]}}}function l(c,f){var d=r?e:cr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return CDe(o,a,s,r?[0,-e]:[-cr,e-cr])}function dTt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var cO=1e9,fO=-1e9;function ADe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Mr(l[0]-e)<hn?c>0?0:3:Mr(l[0]-n)<hn?c>0?2:1:Mr(l[1]-t)<hn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=SDe(),d,h,p,m,g,y,v,x,w,E,T,C={point:I,lineStart:M,lineEnd:O,polygonStart:k,polygonEnd:P};function I(q,H){i(q,H)&&c.point(q,H)}function N(){for(var q=0,H=0,Y=h.length;H<Y;++H)for(var K=h[H],J=1,F=K.length,U=K[0],W,L,V=U[0],Q=U[1];J<F;++J)W=V,L=Q,U=K[J],V=U[0],Q=U[1],L<=r?Q>r&&(V-W)*(r-L)>(Q-L)*(e-W)&&++q:Q<=r&&(V-W)*(r-L)<(Q-L)*(e-W)&&--q;return q}function k(){c=f,d=[],h=[],T=!0}function P(){var q=N(),H=T&&q,Y=(d=iRe(d)).length;(H||Y)&&(l.polygonStart(),H&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),Y&&TDe(d,a,q,s,l),l.polygonEnd()),c=l,d=h=p=null}function M(){C.point=B,h&&h.push(p=[]),E=!0,w=!1,v=x=NaN}function O(){d&&(B(m,g),y&&w&&f.rejoin(),d.push(f.result())),C.point=I,w&&c.lineEnd()}function B(q,H){var Y=i(q,H);if(h&&p.push([q,H]),E)m=q,g=H,y=Y,E=!1,Y&&(c.lineStart(),c.point(q,H));else if(Y&&w)c.point(q,H);else{var K=[v=Math.max(fO,Math.min(cO,v)),x=Math.max(fO,Math.min(cO,x))],J=[q=Math.max(fO,Math.min(cO,q)),H=Math.max(fO,Math.min(cO,H))];dTt(K,J,e,t,n,r)?(w||(c.lineStart(),c.point(K[0],K[1])),c.point(J[0],J[1]),Y||c.lineEnd(),T=!1):Y&&(c.lineStart(),c.point(q,H),T=!1)}v=q,x=H,w=Y}return C}}function R0e(e,t,n){var r=Ql(e,t-hn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function D0e(e,t,n){var r=Ql(e,t-hn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function hTt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ql(oO(r/c)*c,n,c).map(p).concat(Ql(oO(a/f)*f,o,f).map(m)).concat(Ql(oO(t/u)*u,e,u).filter(function(x){return Mr(x%c)>hn}).map(d)).concat(Ql(oO(s/l)*l,i,l).filter(function(x){return Mr(x%f)>hn}).map(h))}return y.lines=function(){return v().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),y.precision(g)):[[t,s],[e,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],y):[c,f]},y.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],y):[u,l]},y.precision=function(x){return arguments.length?(g=+x,d=R0e(s,i,90),h=D0e(t,e,g),p=R0e(a,o,90),m=D0e(r,n,g),y):g},y.extentMajor([[-180,-90+hn],[180,90-hn]]).extentMinor([[-180,-80-hn],[180,80+hn]])}const CR=e=>e;var sz=new cl,UW=new cl,IDe,kDe,zW,VW,A0={point:Oa,lineStart:Oa,lineEnd:Oa,polygonStart:function(){A0.lineStart=pTt,A0.lineEnd=gTt},polygonEnd:function(){A0.lineStart=A0.lineEnd=A0.point=Oa,sz.add(Mr(UW)),UW=new cl},result:function(){var e=sz/2;return sz=new cl,e}};function pTt(){A0.point=mTt}function mTt(e,t){A0.point=RDe,IDe=zW=e,kDe=VW=t}function RDe(e,t){UW.add(VW*e-zW*t),zW=e,VW=t}function gTt(){RDe(IDe,kDe)}var pT=1/0,uM=pT,AR=-pT,lM=AR,cM={point:yTt,lineStart:Oa,lineEnd:Oa,polygonStart:Oa,polygonEnd:Oa,result:function(){var e=[[pT,uM],[AR,lM]];return AR=lM=-(uM=pT=1/0),e}};function yTt(e,t){e<pT&&(pT=e),e>AR&&(AR=e),t<uM&&(uM=t),t>lM&&(lM=t)}var HW=0,qW=0,aI=0,fM=0,dM=0,XE=0,WW=0,GW=0,uI=0,DDe,NDe,Cp,Ap,Yf={point:n_,lineStart:N0e,lineEnd:P0e,polygonStart:function(){Yf.lineStart=xTt,Yf.lineEnd=_Tt},polygonEnd:function(){Yf.point=n_,Yf.lineStart=N0e,Yf.lineEnd=P0e},result:function(){var e=uI?[WW/uI,GW/uI]:XE?[fM/XE,dM/XE]:aI?[HW/aI,qW/aI]:[NaN,NaN];return HW=qW=aI=fM=dM=XE=WW=GW=uI=0,e}};function n_(e,t){HW+=e,qW+=t,++aI}function N0e(){Yf.point=vTt}function vTt(e,t){Yf.point=bTt,n_(Cp=e,Ap=t)}function bTt(e,t){var n=e-Cp,r=t-Ap,i=ml(n*n+r*r);fM+=i*(Cp+e)/2,dM+=i*(Ap+t)/2,XE+=i,n_(Cp=e,Ap=t)}function P0e(){Yf.point=n_}function xTt(){Yf.point=wTt}function _Tt(){PDe(DDe,NDe)}function wTt(e,t){Yf.point=PDe,n_(DDe=Cp=e,NDe=Ap=t)}function PDe(e,t){var n=e-Cp,r=t-Ap,i=ml(n*n+r*r);fM+=i*(Cp+e)/2,dM+=i*(Ap+t)/2,XE+=i,i=Ap*e-Cp*t,WW+=i*(Cp+e),GW+=i*(Ap+t),uI+=i*3,n_(Cp=e,Ap=t)}function ODe(e){this._context=e}ODe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,pl);break}}},result:Oa};var YW=new cl,oz,$De,MDe,lI,cI,IR={point:Oa,lineStart:function(){IR.point=ETt},lineEnd:function(){oz&&LDe($De,MDe),IR.point=Oa},polygonStart:function(){oz=!0},polygonEnd:function(){oz=null},result:function(){var e=+YW;return YW=new cl,e}};function ETt(e,t){IR.point=LDe,$De=lI=e,MDe=cI=t}function LDe(e,t){lI-=e,cI-=t,YW.add(ml(lI*lI+cI*cI)),lI=e,cI=t}let O0e,hM,$0e,M0e;class L0e{constructor(t){this._append=t==null?FDe:STt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==$0e||this._append!==hM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,$0e=r,hM=this._append,M0e=this._,this._=i}this._+=M0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function FDe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function STt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return FDe;if(t!==O0e){const n=10**t;O0e=t,hM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return hM}function BDe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),C0(a,i(s))),s.result()}return o.area=function(a){return C0(a,i(A0)),A0.result()},o.measure=function(a){return C0(a,i(IR)),IR.result()},o.bounds=function(a){return C0(a,i(cM)),cM.result()},o.centroid=function(a){return C0(a,i(Yf)),Yf.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,CR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new L0e(n)):new ODe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new L0e(n)),o},o.projection(e).digits(n).context(t)}function K5(e){return function(t){var n=new KW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function KW(){}KW.prototype={constructor:KW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function iee(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),C0(n,e.stream(cM)),t(cM.result()),r!=null&&e.clipExtent(r),e}function X5(e,t,n){return iee(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function see(e,t,n){return X5(e,[[0,0],t],n)}function oee(e,t,n){return iee(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function aee(e,t,n){return iee(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var F0e=16,TTt=fn(30*ar);function B0e(e,t){return+t?ATt(e,t):CTt(e)}function CTt(e){return K5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ATt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,x=y*y+v*v;if(x>4*t&&m--){var w=o+d,E=a+h,T=u+p,C=ml(w*w+E*E+T*T),I=fc(T/=C),N=Mr(Mr(T)-1)<hn||Mr(s-f)<hn?(s+f)/2:ad(E,w),k=e(N,I),P=k[0],M=k[1],O=P-r,B=M-i,q=v*O-y*B;(q*q/x>t||Mr((y*O+v*B)/x-.5)>.3||o*d+a*h+u*p<TTt)&&(n(r,i,s,o,a,u,P,M,N,w/=C,E/=C,T,m,g),g.point(P,M),n(P,M,N,w,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(I,N){I=e(I,N),r.point(I[0],I[1])}function v(){f=NaN,g.point=x,r.lineStart()}function x(I,N){var k=t_([I,N]),P=e(I,N);n(f,d,c,h,p,m,f=P[0],d=P[1],c=I,h=k[0],p=k[1],m=k[2],F0e,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=T,g.lineEnd=C}function T(I,N){x(i=I,N),s=f,o=d,a=h,u=p,l=m,g.point=x}function C(){n(f,d,c,h,p,m,s,o,i,a,u,l,F0e,r),g.lineEnd=w,w()}return g}}var ITt=K5({point:function(e,t){this.stream.point(e*ar,t*ar)}});function kTt(e){return K5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function RTt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function j0e(e,t,n,r,i,s){if(!s)return RTt(e,t,n,r,i);var o=fn(s),a=rn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Pm(e){return jDe(function(){return e})()}function jDe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=k0e,g=null,y,v,x,w=CR,E=.5,T,C,I,N,k;function P(q){return I(q[0]*ar,q[1]*ar)}function M(q){return q=I.invert(q[0],q[1]),q&&[q[0]*no,q[1]*no]}P.stream=function(q){return N&&k===q?N:N=ITt(kTt(c)(m(T(w(k=q)))))},P.preclip=function(q){return arguments.length?(m=q,p=void 0,B()):m},P.postclip=function(q){return arguments.length?(w=q,g=y=v=x=null,B()):w},P.clipAngle=function(q){return arguments.length?(m=+q?fTt(p=q*ar):(p=null,k0e),B()):p*no},P.clipExtent=function(q){return arguments.length?(w=q==null?(g=y=v=x=null,CR):ADe(g=+q[0][0],y=+q[0][1],v=+q[1][0],x=+q[1][1]),B()):g==null?null:[[g,y],[v,x]]},P.scale=function(q){return arguments.length?(n=+q,O()):n},P.translate=function(q){return arguments.length?(r=+q[0],i=+q[1],O()):[r,i]},P.center=function(q){return arguments.length?(s=q[0]%360*ar,o=q[1]%360*ar,O()):[s*no,o*no]},P.rotate=function(q){return arguments.length?(a=q[0]%360*ar,u=q[1]%360*ar,l=q.length>2?q[2]%360*ar:0,O()):[a*no,u*no,l*no]},P.angle=function(q){return arguments.length?(f=q%360*ar,O()):f*no},P.reflectX=function(q){return arguments.length?(d=q?-1:1,O()):d<0},P.reflectY=function(q){return arguments.length?(h=q?-1:1,O()):h<0},P.precision=function(q){return arguments.length?(T=B0e(C,E=q*q),B()):ml(E)},P.fitExtent=function(q,H){return X5(P,q,H)},P.fitSize=function(q,H){return see(P,q,H)},P.fitWidth=function(q,H){return oee(P,q,H)},P.fitHeight=function(q,H){return aee(P,q,H)};function O(){var q=j0e(n,0,0,d,h,f).apply(null,t(s,o)),H=j0e(n,r-q[0],i-q[1],d,h,f);return c=EDe(a,u,l),C=BW(t,H),I=BW(c,C),T=B0e(C,E),B()}function B(){return N=k=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&M,O()}}function uee(e){var t=0,n=cr/3,r=jDe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*ar,n=s[1]*ar):[t*no,n*no]},i}function DTt(e){var t=fn(e);function n(r,i){return[r*t,rn(i)/t]}return n.invert=function(r,i){return[r/t,fc(i*t)]},n}function NTt(e,t){var n=rn(e),r=(n+rn(t))/2;if(Mr(r)<hn)return DTt(e);var i=1+n*(2*r-n),s=ml(i)/r;function o(a,u){var l=ml(i-2*r*rn(u))/r;return[l*rn(a*=r),s-l*fn(a)]}return o.invert=function(a,u){var l=s-u,c=ad(a,Mr(l))*Qf(l);return l*r<0&&(c-=cr*Qf(a)*Qf(l)),[c/r,fc((i-(a*a+l*l)*r*r)/(2*r))]},o}function pM(){return uee(NTt).scale(155.424).center([0,33.6442])}function UDe(){return pM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function PTt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function OTt(){var e,t,n=UDe(),r,i=pM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=pM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=PTt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+hn,m+.12*h+hn],[p-.214*h-hn,m+.234*h-hn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+hn,m+.166*h+hn],[p-.115*h-hn,m+.234*h-hn]]).stream(l),f()},c.fitExtent=function(d,h){return X5(c,d,h)},c.fitSize=function(d,h){return see(c,d,h)},c.fitWidth=function(d,h){return oee(c,d,h)},c.fitHeight=function(d,h){return aee(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function zDe(e){return function(t,n){var r=fn(t),i=fn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*rn(t),s*rn(n)]}}function cN(e){return function(t,n){var r=ml(t*t+n*n),i=e(r),s=rn(i),o=fn(i);return[ad(t*s,r*o),fc(r&&n*s/r)]}}var VDe=zDe(function(e){return ml(2/(1+e))});VDe.invert=cN(function(e){return 2*fc(e/2)});function $Tt(){return Pm(VDe).scale(124.75).clipAngle(180-.001)}var HDe=zDe(function(e){return(e=dDe(e))&&e/rn(e)});HDe.invert=cN(function(e){return e});function MTt(){return Pm(HDe).scale(79.4188).clipAngle(180-.001)}function Q5(e,t){return[e,K$(nee((qs+t)/2))]}Q5.invert=function(e,t){return[e,2*L2(fDe(t))-qs]};function LTt(){return qDe(Q5).scale(961/pl)}function qDe(e){var t=Pm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=cr*r(),d=t(rTt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Q5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function dO(e){return nee((qs+e)/2)}function FTt(e,t){var n=fn(e),r=e===t?rn(e):K$(n/fn(t))/K$(dO(t)/dO(e)),i=n*nz(dO(e),r)/r;if(!r)return Q5;function s(o,a){i>0?a<-qs+hn&&(a=-qs+hn):a>qs-hn&&(a=qs-hn);var u=i/nz(dO(a),r);return[u*rn(r*o),i-u*fn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Qf(r)*ml(o*o+u*u),c=ad(o,Mr(u))*Qf(u);return u*r<0&&(c-=cr*Qf(o)*Qf(u)),[c/r,2*L2(nz(i/l,1/r))-qs]},s}function BTt(){return uee(FTt).scale(109.5).parallels([30,30])}function mM(e,t){return[e,t]}mM.invert=mM;function jTt(){return Pm(mM).scale(152.63)}function UTt(e,t){var n=fn(e),r=e===t?rn(e):(n-fn(t))/(t-e),i=n/r+e;if(Mr(r)<hn)return mM;function s(o,a){var u=i-a,l=r*o;return[u*rn(l),i-u*fn(l)]}return s.invert=function(o,a){var u=i-a,l=ad(o,Mr(u))*Qf(u);return u*r<0&&(l-=cr*Qf(o)*Qf(u)),[l/r,i-Qf(r)*ml(o*o+u*u)]},s}function zTt(){return uee(UTt).scale(131.154).center([0,13.9389])}var uk=1.340264,lk=-.081106,ck=893e-6,fk=.003796,gM=ml(3)/2,VTt=12;function WDe(e,t){var n=fc(gM*rn(t)),r=n*n,i=r*r*r;return[e*fn(n)/(gM*(uk+3*lk*r+i*(7*ck+9*fk*r))),n*(uk+lk*r+i*(ck+fk*r))]}WDe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<VTt&&(a=n*(uk+lk*r+i*(ck+fk*r))-t,u=uk+3*lk*r+i*(7*ck+9*fk*r),n-=o=a/u,r=n*n,i=r*r*r,!(Mr(o)<kW));++s);return[gM*e*(uk+3*lk*r+i*(7*ck+9*fk*r))/fn(n),fc(rn(n)/gM)]};function HTt(){return Pm(WDe).scale(177.158)}function GDe(e,t){var n=fn(t),r=fn(e)*n;return[n*rn(e)/r,rn(t)/r]}GDe.invert=cN(L2);function qTt(){return Pm(GDe).scale(144.049).clipAngle(60)}function WTt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=K5({point:function(w,E){var T=x([w,E]);this.stream.point(T[0],T[1])}}),m=CR,g,y;function v(){return d=e*r,h=e*i,g=y=null,x}function x(w){var E=w[0]*d,T=w[1]*h;if(s){var C=T*o-E*a;E=E*o+T*a,T=C}return[E+t,T+n]}return x.invert=function(w){var E=w[0]-t,T=w[1]-n;if(s){var C=T*o+E*a;E=E*o-T*a,T=C}return[E/d,T/h]},x.stream=function(w){return g&&y===w?g:g=p(m(y=w))},x.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},x.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,CR):ADe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},x.scale=function(w){return arguments.length?(e=+w,v()):e},x.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},x.angle=function(w){return arguments.length?(s=w%360*ar,a=rn(s),o=fn(s),v()):s*no},x.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},x.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},x.fitExtent=function(w,E){return X5(x,w,E)},x.fitSize=function(w,E){return see(x,w,E)},x.fitWidth=function(w,E){return oee(x,w,E)},x.fitHeight=function(w,E){return aee(x,w,E)},x}function YDe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}YDe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Mr(i)>hn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function GTt(){return Pm(YDe).scale(175.295)}function KDe(e,t){return[fn(t)*rn(e),rn(t)]}KDe.invert=cN(fc);function YTt(){return Pm(KDe).scale(249.5).clipAngle(90+hn)}function XDe(e,t){var n=fn(t),r=1+fn(e)*n;return[n*rn(e)/r,rn(t)/r]}XDe.invert=cN(function(e){return 2*L2(e)});function KTt(){return Pm(XDe).scale(250).clipAngle(142)}function QDe(e,t){return[K$(nee((qs+t)/2)),-e]}QDe.invert=function(e,t){return[-t,2*L2(fDe(e))-qs]};function XTt(){var e=qDe(QDe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function QTt(e,t){return e.parent===t.parent?1:2}function JTt(e){return e.reduce(ZTt,0)/e.length}function ZTt(e,t){return e+t.x}function e2t(e){return 1+e.reduce(t2t,0)}function t2t(e,t){return Math.max(e,t.y)}function n2t(e){for(var t;t=e.children;)e=t[0];return e}function r2t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function i2t(){var e=QTt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=JTt(h),d.y=e2t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=n2t(s),l=r2t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function s2t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function o2t(){return this.eachAfter(s2t)}function a2t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function u2t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function l2t(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function c2t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function f2t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function d2t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function h2t(e){for(var t=this,n=p2t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function p2t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function m2t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function g2t(){return Array.from(this)}function y2t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function v2t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*b2t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function J5(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=w2t)):t===void 0&&(t=_2t);for(var n=new mT(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new mT(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(JDe)}function x2t(){return J5(this).eachBefore(E2t)}function _2t(e){return e.children}function w2t(e){return Array.isArray(e)?e[1]:null}function E2t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function JDe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function mT(e){this.data=e,this.depth=this.height=0,this.parent=null}mT.prototype=J5.prototype={constructor:mT,count:o2t,each:a2t,eachAfter:l2t,eachBefore:u2t,find:c2t,sum:f2t,sort:d2t,path:h2t,ancestors:m2t,descendants:g2t,leaves:y2t,links:v2t,copy:x2t,[Symbol.iterator]:b2t};function Y4(e){return e==null?null:ZDe(e)}function ZDe(e){if(typeof e!="function")throw new Error;return e}function Qb(){return 0}function SE(e){return function(){return e}}const S2t=1664525,T2t=1013904223,U0e=4294967296;function C2t(){let e=1;return()=>(e=(S2t*e+T2t)%U0e)/U0e}function A2t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function I2t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function k2t(e,t){for(var n=0,r=(e=I2t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&eNe(o,s)?++n:(o=D2t(i=R2t(i,s)),n=0);return o}function R2t(e,t){var n,r;if(az(t,e))return[t];for(n=0;n<e.length;++n)if(hO(t,e[n])&&az(fI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(hO(fI(e[n],e[r]),t)&&hO(fI(e[n],t),e[r])&&hO(fI(e[r],t),e[n])&&az(tNe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function hO(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function eNe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function az(e,t){for(var n=0;n<t.length;++n)if(!eNe(e,t[n]))return!1;return!0}function D2t(e){switch(e.length){case 1:return N2t(e[0]);case 2:return fI(e[0],e[1]);case 3:return tNe(e[0],e[1],e[2])}}function N2t(e){return{x:e.x,y:e.y,r:e.r}}function fI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function tNe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,x=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,T=(p*w-m*x)/(E*2)-r,C=(m*g-p*y)/E,I=(h*x-d*w)/(E*2)-i,N=(d*y-h*g)/E,k=C*C+N*N-1,P=2*(s+T*C+I*N),M=T*T+I*I-s*s,O=-(Math.abs(k)>1e-6?(P+Math.sqrt(P*P-4*k*M))/(2*k):M/P);return{x:r+T+C*O,y:i+I+N*O,r:O}}function z0e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function V0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function H0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function pO(e){this._=e,this.next=null,this.previous=null}function P2t(e,t){if(!(s=(e=A2t(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;z0e(r,n,i=e[2]),n=new pO(n),r=new pO(r),i=new pO(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){z0e(n._,r._,i=e[u]),i=new pO(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(V0e(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(V0e(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=H0e(n);(i=i.next)!==r;)(a=H0e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=k2t(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function O2t(e){return Math.sqrt(e.value)}function nNe(){var e=null,t=1,n=1,r=Qb;function i(s){const o=C2t();return s.x=t/2,s.y=n/2,e?s.eachBefore(q0e(e)).eachAfter(uz(r,.5,o)).eachBefore(W0e(1)):s.eachBefore(q0e(O2t)).eachAfter(uz(Qb,1,o)).eachAfter(uz(r,s.r/Math.min(t,n),o)).eachBefore(W0e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=Y4(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:SE(+s),i):r},i}function q0e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function uz(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=P2t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function W0e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function rNe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function fN(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function $2t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(rNe),o}function s(o,a){return function(u){u.children&&fN(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var M2t={depth:-1},G0e={},lz={};function L2t(e){return e.id}function F2t(e){return e.parentId}function Y0e(){var e=L2t,t=F2t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>B2t(n(w,E,i))),v=y.map(K0e),x=new Set(y).add("");for(const w of v)x.has(w)||(x.add(w),y.push(w),v.push(K0e(w)),s.push(lz));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new mT(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?G0e:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===G0e)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===lz&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===lz);--y)h.data=null}if(f.parent=M2t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(JDe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Y4(i),r):e},r.parentId=function(i){return arguments.length?(t=Y4(i),r):t},r.path=function(i){return arguments.length?(n=Y4(i),r):n},r}function B2t(e){e=`${e}`;let t=e.length;return XW(e,t-1)&&!XW(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function K0e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!XW(e,t););return e.slice(0,t)}function XW(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function j2t(e,t){return e.parent===t.parent?1:2}function cz(e){var t=e.children;return t?t[0]:e.t}function fz(e){var t=e.children;return t?t[t.length-1]:e.t}function U2t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function z2t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function V2t(e,t,n){return e.a.parent===t.parent?e.a:n}function K4(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}K4.prototype=Object.create(mT.prototype);function H2t(e){for(var t=new K4(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new K4(s[o],o)),i.parent=n;return(t.parent=new K4(null,0)).children=[t],t}function q2t(){var e=j2t,t=1,n=1,r=null;function i(l){var c=H2t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){z2t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,x=m.m,w;p=fz(p),d=cz(d),p&&d;)m=cz(m),h=fz(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(U2t(V2t(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,x+=m.m,y+=h.m;p&&!fz(h)&&(h.t=p,h.m+=v-y),d&&!cz(m)&&(m.t=d,m.m+=g-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function Z5(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var iNe=(1+Math.sqrt(5))/2;function sNe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,x,w,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*E,x=Math.max(v/T,T/y),x>w){g-=l;break}w=x}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?fN(u,n,r,i,m?r+=p*g/m:s):Z5(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const oNe=function e(t){function n(r,i,s,o,a){sNe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iNe);function W2t(){var e=oNe,t=!1,n=1,r=1,i=[0],s=Qb,o=Qb,a=Qb,u=Qb,l=Qb;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(rNe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=ZDe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:SE(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:SE(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:SE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:SE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:SE(+d),c):l},c}function G2t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var x=l[f],w=h/2+x,E=f+1,T=d-1;E<T;){var C=E+T>>>1;l[C]<w?E=C+1:T=C}w-l[E-1]<l[E]-w&&f+1<E&&--E;var I=l[E]-x,N=h-I;if(g-p>y-m){var k=h?(p*N+g*I)/h:g;c(f,E,I,p,m,k,y),c(E,d,N,k,m,g,y)}else{var P=h?(m*N+y*I)/h:y;c(f,E,I,p,m,g,P),c(E,d,N,p,P,g,y)}}}function Y2t(e,t,n,r,i){(e.depth&1?Z5:fN)(e,t,n,r,i)}const K2t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?fN(l,i,s,o,m?s+=(a-s)*l.value/m:a):Z5(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=sNe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iNe);function qh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const QW=Symbol("implicit");function Bv(){var e=new Rme,t=[],n=[],r=QW;function i(s){let o=e.get(s);if(o===void 0){if(r!==QW)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Rme;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Bv(t,n).unknown(r)},qh.apply(i,arguments),i}function F2(){var e=Bv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Ql(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return F2(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},qh.apply(f(),arguments)}function X2t(e){return function(){return e}}function JW(e){return+e}var X0e=[0,1];function Jl(e){return e}function ZW(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:X2t(isNaN(t)?NaN:.5)}function Q2t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function J2t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=ZW(i,r),s=n(o,s)):(r=ZW(r,i),s=n(s,o)),function(a){return s(r(a))}}function Z2t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ZW(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=U1(e,a,1,r)-1;return s[u](i[u](a))}}function dN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function e8(){var e=X0e,t=X0e,n=Vg,r,i,s,o=Jl,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Jl&&(o=Q2t(e[0],e[d-1])),a=d>2?Z2t:J2t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),qf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,JW),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=aN,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Jl,c()):o!==Jl},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function aNe(){return e8()(Jl,Jl)}function uNe(e,t,n,r){var i=z1(e,t,n),s;switch(r=e_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=lDe(i,o))&&(r.precision=s),tee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=cDe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=uDe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Lv(r)}function ew(e){var t=e.domain;return e.ticks=function(n){var r=t();return fW(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return uNe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=dW(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function dc(){var e=aNe();return e.copy=function(){return dN(e,dc())},qh.apply(e,arguments),ew(e)}function lNe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,JW),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return lNe(e).unknown(t)},e=arguments.length?Array.from(e,JW):[0,1],ew(n)}function cNe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Q0e(e){return Math.log(e)}function J0e(e){return Math.exp(e)}function eCt(e){return-Math.log(-e)}function tCt(e){return-Math.exp(-e)}function nCt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function rCt(e){return e===10?nCt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function iCt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Z0e(e){return(t,n)=>-e(-t,n)}function lee(e){const t=e(Q0e,J0e),n=t.domain;let r=10,i,s;function o(){return i=iCt(r),s=rCt(r),n()[0]<0?(i=Z0e(i),s=Z0e(s),e(eCt,tCt)):e(Q0e,J0e),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=fW(l,c,g))}else y=fW(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=e_(u)).precision==null&&(u.trim=!0),u=Lv(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(cNe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function fNe(){const e=lee(e8()).domain([1,10]);return e.copy=()=>dN(e,fNe()).base(e.base()),qh.apply(e,arguments),e}function ege(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tge(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cee(e){var t=1,n=e(ege(t),tge(t));return n.constant=function(r){return arguments.length?e(ege(t=+r),tge(t)):t},ew(n)}function dNe(){var e=cee(e8());return e.copy=function(){return dN(e,dNe()).constant(e.constant())},qh.apply(e,arguments)}function nge(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sCt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function oCt(e){return e<0?-e*e:e*e}function fee(e){var t=e(Jl,Jl),n=1;function r(){return n===1?e(Jl,Jl):n===.5?e(sCt,oCt):e(nge(n),nge(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ew(t)}function dee(){var e=fee(e8());return e.copy=function(){return dN(e,dee()).exponent(e.exponent())},qh.apply(e,arguments),e}function aCt(){return dee.apply(null,arguments).exponent(.5)}function hNe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=nRe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[U1(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(X0),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return hNe().domain(e).range(t).unknown(r)},qh.apply(s,arguments)}function pNe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[U1(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return pNe().domain([e,t]).range(i).unknown(s)},qh.apply(ew(o),arguments)}function mNe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[U1(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return mNe().domain(e).range(t).unknown(n)},qh.apply(i,arguments)}const dz=new Date,hz=new Date;function Yo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Yo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(dz.setTime(+s),hz.setTime(+o),e(dz),e(hz),Math.floor(n(dz,hz))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const gT=Yo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gT.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Yo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gT);gT.range;const F0=1e3,Jf=F0*60,B0=Jf*60,xg=B0*24,hee=xg*7,rge=xg*30,pz=xg*365,j0=Yo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*F0)},(e,t)=>(t-e)/F0,e=>e.getUTCSeconds());j0.range;const t8=Yo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*F0)},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getMinutes());t8.range;const n8=Yo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getUTCMinutes());n8.range;const r8=Yo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*F0-e.getMinutes()*Jf)},(e,t)=>{e.setTime(+e+t*B0)},(e,t)=>(t-e)/B0,e=>e.getHours());r8.range;const i8=Yo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*B0)},(e,t)=>(t-e)/B0,e=>e.getUTCHours());i8.range;const Z0=Yo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jf)/xg,e=>e.getDate()-1);Z0.range;const _1=Yo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xg,e=>e.getUTCDate()-1);_1.range;const gNe=Yo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xg,e=>Math.floor(e/xg));gNe.range;function tw(e){return Yo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Jf)/hee)}const B2=tw(0),yM=tw(1),uCt=tw(2),lCt=tw(3),yT=tw(4),cCt=tw(5),fCt=tw(6);B2.range;yM.range;uCt.range;lCt.range;yT.range;cCt.range;fCt.range;function nw(e){return Yo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/hee)}const j2=nw(0),vM=nw(1),dCt=nw(2),hCt=nw(3),vT=nw(4),pCt=nw(5),mCt=nw(6);j2.range;vM.range;dCt.range;hCt.range;vT.range;pCt.range;mCt.range;const kR=Yo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kR.range;const RR=Yo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());RR.range;const lm=Yo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());lm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});lm.range;const cm=Yo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});cm.range;function yNe(e,t,n,r,i,s){const o=[[j0,1,F0],[j0,5,5*F0],[j0,15,15*F0],[j0,30,30*F0],[s,1,Jf],[s,5,5*Jf],[s,15,15*Jf],[s,30,30*Jf],[i,1,B0],[i,3,3*B0],[i,6,6*B0],[i,12,12*B0],[r,1,xg],[r,2,2*xg],[n,1,hee],[t,1,rge],[t,3,3*rge],[e,1,pz]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=$2(([,,g])=>g).right(o,d);if(h===o.length)return e.every(z1(l/pz,c/pz,f));if(h===0)return gT.every(Math.max(z1(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[gCt,yCt]=yNe(cm,RR,j2,gNe,i8,n8),[vCt,bCt]=yNe(lm,kR,B2,Z0,r8,t8);function mz(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gz(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mA(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vNe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=gA(i),c=yA(i),f=gA(s),d=yA(s),h=gA(o),p=yA(o),m=gA(a),g=yA(a),y=gA(u),v=yA(u),x={a:Y,A:K,b:J,B:F,c:null,d:lge,e:lge,f:zCt,g:JCt,G:eAt,H:BCt,I:jCt,j:UCt,L:bNe,m:VCt,M:HCt,p:U,q:W,Q:dge,s:hge,S:qCt,u:WCt,U:GCt,V:YCt,w:KCt,W:XCt,x:null,X:null,y:QCt,Y:ZCt,Z:tAt,"%":fge},w={a:L,A:V,b:Q,B:ue,c:null,d:cge,e:cge,f:sAt,g:mAt,G:yAt,H:nAt,I:rAt,j:iAt,L:_Ne,m:oAt,M:aAt,p:we,q:ce,Q:dge,s:hge,S:uAt,u:lAt,U:cAt,V:fAt,w:dAt,W:hAt,x:null,X:null,y:pAt,Y:gAt,Z:vAt,"%":fge},E={a:k,A:P,b:M,B:O,c:B,d:age,e:age,f:$Ct,g:oge,G:sge,H:uge,I:uge,j:DCt,L:OCt,m:RCt,M:NCt,p:N,q:kCt,Q:LCt,s:FCt,S:PCt,u:SCt,U:TCt,V:CCt,w:ECt,W:ACt,x:q,X:H,y:oge,Y:sge,Z:ICt,"%":MCt};x.x=T(n,x),x.X=T(r,x),x.c=T(t,x),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(Se,Oe){return function(et){var Re=[],St=-1,Ze=0,It=Se.length,mt,Ce,Fe;for(et instanceof Date||(et=new Date(+et));++St<It;)Se.charCodeAt(St)===37&&(Re.push(Se.slice(Ze,St)),(Ce=ige[mt=Se.charAt(++St)])!=null?mt=Se.charAt(++St):Ce=mt==="e"?" ":"0",(Fe=Oe[mt])&&(mt=Fe(et,Ce)),Re.push(mt),Ze=St+1);return Re.push(Se.slice(Ze,St)),Re.join("")}}function C(Se,Oe){return function(et){var Re=mA(1900,void 0,1),St=I(Re,Se,et+="",0),Ze,It;if(St!=et.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(Oe&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Ze=gz(mA(Re.y,0,1)),It=Ze.getUTCDay(),Ze=It>4||It===0?vM.ceil(Ze):vM(Ze),Ze=_1.offset(Ze,(Re.V-1)*7),Re.y=Ze.getUTCFullYear(),Re.m=Ze.getUTCMonth(),Re.d=Ze.getUTCDate()+(Re.w+6)%7):(Ze=mz(mA(Re.y,0,1)),It=Ze.getDay(),Ze=It>4||It===0?yM.ceil(Ze):yM(Ze),Ze=Z0.offset(Ze,(Re.V-1)*7),Re.y=Ze.getFullYear(),Re.m=Ze.getMonth(),Re.d=Ze.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),It="Z"in Re?gz(mA(Re.y,0,1)).getUTCDay():mz(mA(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(It+5)%7:Re.w+Re.U*7-(It+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,gz(Re)):mz(Re)}}function I(Se,Oe,et,Re){for(var St=0,Ze=Oe.length,It=et.length,mt,Ce;St<Ze;){if(Re>=It)return-1;if(mt=Oe.charCodeAt(St++),mt===37){if(mt=Oe.charAt(St++),Ce=E[mt in ige?Oe.charAt(St++):mt],!Ce||(Re=Ce(Se,et,Re))<0)return-1}else if(mt!=et.charCodeAt(Re++))return-1}return Re}function N(Se,Oe,et){var Re=l.exec(Oe.slice(et));return Re?(Se.p=c.get(Re[0].toLowerCase()),et+Re[0].length):-1}function k(Se,Oe,et){var Re=h.exec(Oe.slice(et));return Re?(Se.w=p.get(Re[0].toLowerCase()),et+Re[0].length):-1}function P(Se,Oe,et){var Re=f.exec(Oe.slice(et));return Re?(Se.w=d.get(Re[0].toLowerCase()),et+Re[0].length):-1}function M(Se,Oe,et){var Re=y.exec(Oe.slice(et));return Re?(Se.m=v.get(Re[0].toLowerCase()),et+Re[0].length):-1}function O(Se,Oe,et){var Re=m.exec(Oe.slice(et));return Re?(Se.m=g.get(Re[0].toLowerCase()),et+Re[0].length):-1}function B(Se,Oe,et){return I(Se,t,Oe,et)}function q(Se,Oe,et){return I(Se,n,Oe,et)}function H(Se,Oe,et){return I(Se,r,Oe,et)}function Y(Se){return o[Se.getDay()]}function K(Se){return s[Se.getDay()]}function J(Se){return u[Se.getMonth()]}function F(Se){return a[Se.getMonth()]}function U(Se){return i[+(Se.getHours()>=12)]}function W(Se){return 1+~~(Se.getMonth()/3)}function L(Se){return o[Se.getUTCDay()]}function V(Se){return s[Se.getUTCDay()]}function Q(Se){return u[Se.getUTCMonth()]}function ue(Se){return a[Se.getUTCMonth()]}function we(Se){return i[+(Se.getUTCHours()>=12)]}function ce(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Oe=T(Se+="",x);return Oe.toString=function(){return Se},Oe},parse:function(Se){var Oe=C(Se+="",!1);return Oe.toString=function(){return Se},Oe},utcFormat:function(Se){var Oe=T(Se+="",w);return Oe.toString=function(){return Se},Oe},utcParse:function(Se){var Oe=C(Se+="",!0);return Oe.toString=function(){return Se},Oe}}}var ige={"-":"",_:" ",0:"0"},ba=/^\s*\d+/,xCt=/^%/,_Ct=/[\\^$*+?|[\]().{}]/g;function ii(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function wCt(e){return e.replace(_Ct,"\\$&")}function gA(e){return new RegExp("^(?:"+e.map(wCt).join("|")+")","i")}function yA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ECt(e,t,n){var r=ba.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function SCt(e,t,n){var r=ba.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function TCt(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function CCt(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ACt(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sge(e,t,n){var r=ba.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function oge(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ICt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kCt(e,t,n){var r=ba.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function RCt(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function age(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function DCt(e,t,n){var r=ba.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function uge(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function NCt(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function PCt(e,t,n){var r=ba.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function OCt(e,t,n){var r=ba.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $Ct(e,t,n){var r=ba.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function MCt(e,t,n){var r=xCt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function LCt(e,t,n){var r=ba.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function FCt(e,t,n){var r=ba.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function lge(e,t){return ii(e.getDate(),t,2)}function BCt(e,t){return ii(e.getHours(),t,2)}function jCt(e,t){return ii(e.getHours()%12||12,t,2)}function UCt(e,t){return ii(1+Z0.count(lm(e),e),t,3)}function bNe(e,t){return ii(e.getMilliseconds(),t,3)}function zCt(e,t){return bNe(e,t)+"000"}function VCt(e,t){return ii(e.getMonth()+1,t,2)}function HCt(e,t){return ii(e.getMinutes(),t,2)}function qCt(e,t){return ii(e.getSeconds(),t,2)}function WCt(e){var t=e.getDay();return t===0?7:t}function GCt(e,t){return ii(B2.count(lm(e)-1,e),t,2)}function xNe(e){var t=e.getDay();return t>=4||t===0?yT(e):yT.ceil(e)}function YCt(e,t){return e=xNe(e),ii(yT.count(lm(e),e)+(lm(e).getDay()===4),t,2)}function KCt(e){return e.getDay()}function XCt(e,t){return ii(yM.count(lm(e)-1,e),t,2)}function QCt(e,t){return ii(e.getFullYear()%100,t,2)}function JCt(e,t){return e=xNe(e),ii(e.getFullYear()%100,t,2)}function ZCt(e,t){return ii(e.getFullYear()%1e4,t,4)}function eAt(e,t){var n=e.getDay();return e=n>=4||n===0?yT(e):yT.ceil(e),ii(e.getFullYear()%1e4,t,4)}function tAt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ii(t/60|0,"0",2)+ii(t%60,"0",2)}function cge(e,t){return ii(e.getUTCDate(),t,2)}function nAt(e,t){return ii(e.getUTCHours(),t,2)}function rAt(e,t){return ii(e.getUTCHours()%12||12,t,2)}function iAt(e,t){return ii(1+_1.count(cm(e),e),t,3)}function _Ne(e,t){return ii(e.getUTCMilliseconds(),t,3)}function sAt(e,t){return _Ne(e,t)+"000"}function oAt(e,t){return ii(e.getUTCMonth()+1,t,2)}function aAt(e,t){return ii(e.getUTCMinutes(),t,2)}function uAt(e,t){return ii(e.getUTCSeconds(),t,2)}function lAt(e){var t=e.getUTCDay();return t===0?7:t}function cAt(e,t){return ii(j2.count(cm(e)-1,e),t,2)}function wNe(e){var t=e.getUTCDay();return t>=4||t===0?vT(e):vT.ceil(e)}function fAt(e,t){return e=wNe(e),ii(vT.count(cm(e),e)+(cm(e).getUTCDay()===4),t,2)}function dAt(e){return e.getUTCDay()}function hAt(e,t){return ii(vM.count(cm(e)-1,e),t,2)}function pAt(e,t){return ii(e.getUTCFullYear()%100,t,2)}function mAt(e,t){return e=wNe(e),ii(e.getUTCFullYear()%100,t,2)}function gAt(e,t){return ii(e.getUTCFullYear()%1e4,t,4)}function yAt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vT(e):vT.ceil(e),ii(e.getUTCFullYear()%1e4,t,4)}function vAt(){return"+0000"}function fge(){return"%"}function dge(e){return+e}function hge(e){return Math.floor(+e/1e3)}var iE,pee,ENe,hN,SNe;bAt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bAt(e){return iE=vNe(e),pee=iE.format,ENe=iE.parse,hN=iE.utcFormat,SNe=iE.utcParse,iE}function xAt(e){return new Date(e)}function _At(e){return e instanceof Date?+e:+new Date(+e)}function mee(e,t,n,r,i,s,o,a,u,l){var c=aNe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),x=l("%B"),w=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?x:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,_At)):d().map(xAt)},c.ticks=function(T){var C=d();return e(C[0],C[C.length-1],T??10)},c.tickFormat=function(T,C){return C==null?E:l(C)},c.nice=function(T){var C=d();return(!T||typeof T.range!="function")&&(T=t(C[0],C[C.length-1],T??10)),T?d(cNe(C,T)):c},c.copy=function(){return dN(c,mee(e,t,n,r,i,s,o,a,u,l))},c}function gee(){return qh.apply(mee(vCt,bCt,lm,kR,B2,Z0,r8,t8,j0,pee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wAt(){return qh.apply(mee(gCt,yCt,cm,RR,j2,_1,i8,n8,j0,hN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function s8(){var e=0,t=1,n,r,i,s,o=Jl,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Vg),l.rangeRound=c(aN),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function jv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yee(){var e=ew(s8()(Jl));return e.copy=function(){return jv(e,yee())},Fv.apply(e,arguments)}function TNe(){var e=lee(s8()).domain([1,10]);return e.copy=function(){return jv(e,TNe()).base(e.base())},Fv.apply(e,arguments)}function CNe(){var e=cee(s8());return e.copy=function(){return jv(e,CNe()).constant(e.constant())},Fv.apply(e,arguments)}function vee(){var e=fee(s8());return e.copy=function(){return jv(e,vee()).exponent(e.exponent())},Fv.apply(e,arguments)}function EAt(){return vee.apply(null,arguments).exponent(.5)}function o8(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Jl,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,x;return arguments.length?([y,v,x]=g,l=qZ(m,[y,v,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(Vg),h.rangeRound=p(aN),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function ANe(){var e=ew(o8()(Jl));return e.copy=function(){return jv(e,ANe())},Fv.apply(e,arguments)}function INe(){var e=lee(o8()).domain([.1,1,10]);return e.copy=function(){return jv(e,INe()).base(e.base())},Fv.apply(e,arguments)}function kNe(){var e=cee(o8());return e.copy=function(){return jv(e,kNe()).constant(e.constant())},Fv.apply(e,arguments)}function bee(){var e=fee(o8());return e.copy=function(){return jv(e,bee()).exponent(e.exponent())},Fv.apply(e,arguments)}function SAt(){return bee.apply(null,arguments).exponent(.5)}function Wh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const TAt=Wh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),CAt=Wh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),AAt=Wh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),IAt=Wh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),kAt=Wh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),RAt=Wh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),DAt=Wh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),NAt=Wh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),PAt=Wh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),OAt=Wh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),a8=Wh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Qn(e){return function(){return e}}const pge=Math.abs,ou=Math.atan2,bb=Math.cos,$At=Math.max,yz=Math.min,ap=Math.sin,gx=Math.sqrt,cu=1e-12,bT=Math.PI,bM=bT/2,dk=2*bT;function MAt(e){return e>1?0:e<-1?bT:Math.acos(e)}function mge(e){return e>=1?bM:e<=-1?-bM:Math.asin(e)}function u8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new XZ(t)}function LAt(e){return e.innerRadius}function FAt(e){return e.outerRadius}function BAt(e){return e.startAngle}function jAt(e){return e.endAngle}function UAt(e){return e&&e.padAngle}function zAt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<cu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function mO(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/gx(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,x=m-h,w=v*v+x*x,E=i-s,T=d*m-p*h,C=(x<0?-1:1)*gx($At(0,E*E*w-T*T)),I=(T*x-v*C)/w,N=(-T*v-x*C)/w,k=(T*x+v*C)/w,P=(-T*v+x*C)/w,M=I-g,O=N-y,B=k-g,q=P-y;return M*M+O*O>B*B+q*q&&(I=k,N=P),{cx:I,cy:N,x01:-c,y01:-f,x11:I*(i/E-1),y11:N*(i/E-1)}}function eG(){var e=LAt,t=FAt,n=Qn(0),r=null,i=BAt,s=jAt,o=UAt,a=null,u=u8(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-bM,m=s.apply(this,arguments)-bM,g=pge(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>cu))a.moveTo(0,0);else if(g>dk-cu)a.moveTo(h*bb(p),h*ap(p)),a.arc(0,0,h,p,m,!y),d>cu&&(a.moveTo(d*bb(m),d*ap(m)),a.arc(0,0,d,m,p,y));else{var v=p,x=m,w=p,E=m,T=g,C=g,I=o.apply(this,arguments)/2,N=I>cu&&(r?+r.apply(this,arguments):gx(d*d+h*h)),k=yz(pge(h-d)/2,+n.apply(this,arguments)),P=k,M=k,O,B;if(N>cu){var q=mge(N/d*ap(I)),H=mge(N/h*ap(I));(T-=q*2)>cu?(q*=y?1:-1,w+=q,E-=q):(T=0,w=E=(p+m)/2),(C-=H*2)>cu?(H*=y?1:-1,v+=H,x-=H):(C=0,v=x=(p+m)/2)}var Y=h*bb(v),K=h*ap(v),J=d*bb(E),F=d*ap(E);if(k>cu){var U=h*bb(x),W=h*ap(x),L=d*bb(w),V=d*ap(w),Q;if(g<bT)if(Q=zAt(Y,K,L,V,U,W,J,F)){var ue=Y-Q[0],we=K-Q[1],ce=U-Q[0],Se=W-Q[1],Oe=1/ap(MAt((ue*ce+we*Se)/(gx(ue*ue+we*we)*gx(ce*ce+Se*Se)))/2),et=gx(Q[0]*Q[0]+Q[1]*Q[1]);P=yz(k,(d-et)/(Oe-1)),M=yz(k,(h-et)/(Oe+1))}else P=M=0}C>cu?M>cu?(O=mO(L,V,Y,K,h,M,y),B=mO(U,W,J,F,h,M,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),M<k?a.arc(O.cx,O.cy,M,ou(O.y01,O.x01),ou(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,M,ou(O.y01,O.x01),ou(O.y11,O.x11),!y),a.arc(0,0,h,ou(O.cy+O.y11,O.cx+O.x11),ou(B.cy+B.y11,B.cx+B.x11),!y),a.arc(B.cx,B.cy,M,ou(B.y11,B.x11),ou(B.y01,B.x01),!y))):(a.moveTo(Y,K),a.arc(0,0,h,v,x,!y)):a.moveTo(Y,K),!(d>cu)||!(T>cu)?a.lineTo(J,F):P>cu?(O=mO(J,F,U,W,d,-P,y),B=mO(Y,K,L,V,d,-P,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),P<k?a.arc(O.cx,O.cy,P,ou(O.y01,O.x01),ou(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,P,ou(O.y01,O.x01),ou(O.y11,O.x11),!y),a.arc(0,0,d,ou(O.cy+O.y11,O.cx+O.x11),ou(B.cy+B.y11,B.cx+B.x11),y),a.arc(B.cx,B.cy,P,ou(B.y11,B.x11),ou(B.y01,B.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-bT/2;return[bb(f)*c,ap(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Qn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Qn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Qn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Qn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Qn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Qn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Qn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function l8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RNe(e){this._context=e}RNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xee(e){return new RNe(e)}function DNe(e){return e[0]}function NNe(e){return e[1]}function PNe(e,t){var n=Qn(!0),r=null,i=xee,s=null,o=u8(a);e=typeof e=="function"?e:e===void 0?DNe:Qn(e),t=typeof t=="function"?t:t===void 0?NNe:Qn(t);function a(u){var l,c=(u=l8(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Qn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Qn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Qn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function ONe(e,t,n){var r=null,i=Qn(!0),s=null,o=xee,a=null,u=u8(l);e=typeof e=="function"?e:e===void 0?DNe:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?NNe:Qn(+n);function l(f){var d,h,p,m=(f=l8(f)).length,g,y=!1,v,x=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(x[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):x[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return PNe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function VAt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function HAt(e){return e}function qAt(){var e=HAt,t=VAt,n=null,r=Qn(0),i=Qn(dk),s=Qn(0);function o(a){var u,l=(a=l8(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(dk,Math.max(-dk,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),x=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*x)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+x,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Qn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Qn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Qn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Qn(+a),o):s},o}const WAt={draw(e,t){const n=gx(t/bT);e.moveTo(n,0),e.arc(0,0,n,0,dk)}};function GAt(e,t){let n=null,r=u8(i);e=typeof e=="function"?e:Qn(e||WAt),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Qn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function H1(){}function xM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function c8(e){this._context=e}c8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YAt(e){return new c8(e)}function $Ne(e){this._context=e}$Ne.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KAt(e){return new $Ne(e)}function MNe(e){this._context=e}MNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XAt(e){return new MNe(e)}function LNe(e,t){this._basis=new c8(e),this._beta=t}LNe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const QAt=function e(t){function n(r){return t===1?new c8(r):new LNe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function _M(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function _ee(e,t){this._context=e,this._k=(1-t)/6}_ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_M(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:_M(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JAt=function e(t){function n(r){return new _ee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function wee(e,t){this._context=e,this._k=(1-t)/6}wee.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_M(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZAt=function e(t){function n(r){return new wee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Eee(e,t){this._context=e,this._k=(1-t)/6}Eee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_M(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eIt=function e(t){function n(r){return new Eee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function See(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>cu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>cu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function FNe(e,t){this._context=e,this._alpha=t}FNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:See(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tIt=function e(t){function n(r){return t?new FNe(r,t):new _ee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function BNe(e,t){this._context=e,this._alpha=t}BNe.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:See(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nIt=function e(t){function n(r){return t?new BNe(r,t):new wee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jNe(e,t){this._context=e,this._alpha=t}jNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:See(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rIt=function e(t){function n(r){return t?new jNe(r,t):new Eee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function UNe(e){this._context=e}UNe.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function iIt(e){return new UNe(e)}function gge(e){return e<0?-1:1}function yge(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(gge(s)+gge(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function vge(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function vz(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function wM(e){this._context=e}wM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vz(this,this._t0,vge(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,vz(this,vge(this,n=yge(this,e,t)),n);break;default:vz(this,this._t0,n=yge(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function zNe(e){this._context=new VNe(e)}(zNe.prototype=Object.create(wM.prototype)).point=function(e,t){wM.prototype.point.call(this,t,e)};function VNe(e){this._context=e}VNe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function sIt(e){return new wM(e)}function oIt(e){return new zNe(e)}function HNe(e){this._context=e}HNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=bge(e),i=bge(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bge(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function aIt(e){return new HNe(e)}function f8(e,t){this._context=e,this._t=t}f8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function uIt(e){return new f8(e,.5)}function lIt(e){return new f8(e,0)}function cIt(e){return new f8(e,1)}function xge(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _ge(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function fIt(e,t){return e[t]}function dIt(e){const t=[];return t.key=e,t}function hIt(){var e=Qn([]),t=_ge,n=xge,r=fIt;function i(s){var o=Array.from(e.apply(this,arguments),dIt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=l8(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Qn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?_ge:typeof s=="function"?s:Qn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??xge,i):n},i}function dI(e,t,n){this.k=e,this.x=t,this.y=n}dI.prototype={constructor:dI,scale:function(e){return e===1?this:new dI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new dI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};dI.prototype;function uh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function q1(e){return!!e&&!!e[bs]}function _g(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===wIt}(e)||Array.isArray(e)||!!e[Ige]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ige])||Tee(e)||Cee(e))}function r_(e,t,n){n===void 0&&(n=!1),U2(e)===0?(n?Object.keys:ES)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function U2(e){var t=e[bs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Tee(e)?2:Cee(e)?3:0}function wS(e,t){return U2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pIt(e,t){return U2(e)===2?e.get(t):e[t]}function qNe(e,t,n){var r=U2(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function WNe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Tee(e){return xIt&&e instanceof Map}function Cee(e){return _It&&e instanceof Set}function Bb(e){return e.o||e.t}function Aee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=YNe(e);delete t[bs];for(var n=ES(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Iee(e,t){return t===void 0&&(t=!1),kee(e)||q1(e)||!_g(e)||(U2(e)>1&&(e.set=e.add=e.clear=e.delete=mIt),Object.freeze(e),t&&r_(e,function(n,r){return Iee(r,!0)},!0)),e}function mIt(){uh(2)}function kee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Kp(e){var t=iG[e];return t||uh(18,e),t}function gIt(e,t){iG[e]||(iG[e]=t)}function tG(){return DR}function bz(e,t){t&&(Kp("Patches"),e.u=[],e.s=[],e.v=t)}function EM(e){nG(e),e.p.forEach(yIt),e.p=null}function nG(e){e===DR&&(DR=e.l)}function wge(e){return DR={p:[],l:DR,h:e,m:!0,_:0}}function yIt(e){var t=e[bs];t.i===0||t.i===1?t.j():t.g=!0}function xz(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Kp("ES5").S(t,e,r),r?(n[bs].P&&(EM(t),uh(4)),_g(e)&&(e=SM(t,e),t.l||TM(t,e)),t.u&&Kp("Patches").M(n[bs].t,e,t.u,t.s)):e=SM(t,n,[]),EM(t),t.u&&t.v(t.u,t.s),e!==GNe?e:void 0}function SM(e,t,n){if(kee(t))return t;var r=t[bs];if(!r)return r_(t,function(a,u){return Ege(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return TM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Aee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),r_(s,function(a,u){return Ege(e,r,i,a,u,n,o)}),TM(e,i,!1),n&&e.u&&Kp("Patches").N(r,n,e.u,e.s)}return r.o}function Ege(e,t,n,r,i,s,o){if(q1(i)){var a=SM(e,i,s&&t&&t.i!==3&&!wS(t.R,r)?s.concat(r):void 0);if(qNe(n,r,a),!q1(a))return;e.m=!1}else o&&n.add(i);if(_g(i)&&!kee(i)){if(!e.h.D&&e._<1)return;SM(e,i),t&&t.A.l||TM(e,i)}}function TM(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Iee(t,n)}function _z(e,t){var n=e[bs];return(n?Bb(n):e)[t]}function Sge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Hy(e){e.P||(e.P=!0,e.l&&Hy(e.l))}function wz(e){e.o||(e.o=Aee(e.t))}function rG(e,t,n){var r=Tee(t)?Kp("MapSet").F(t,n):Cee(t)?Kp("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:tG(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=NR;o&&(u=[a],l=hI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Kp("ES5").J(t,n);return(n?n.A:tG()).p.push(r),r}function vIt(e){return q1(e)||uh(22,e),function t(n){if(!_g(n))return n;var r,i=n[bs],s=U2(n);if(i){if(!i.P&&(i.i<4||!Kp("ES5").K(i)))return i.t;i.I=!0,r=Tge(n,s),i.I=!1}else r=Tge(n,s);return r_(r,function(o,a){i&&pIt(i.t,o)===a||qNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Tge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Aee(e)}function bIt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[bs];return NR.get(u,s)},set:function(u){var l=this[bs];NR.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][bs];if(!a.P)switch(a.i){case 5:r(a)&&Hy(a);break;case 4:n(a)&&Hy(a)}}}function n(s){for(var o=s.t,a=s.k,u=ES(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==bs){var f=o[c];if(f===void 0&&!wS(o,c))return!0;var d=a[c],h=d&&d[bs];if(h?h.t!==f:!WNe(d,f))return!0}}var p=!!o[bs];return u.length!==ES(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};gIt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=YNe(f);delete p[bs];for(var m=ES(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:tG(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,bs,{value:l,writable:!0}),u},S:function(s,o,a){a?q1(o)&&o[bs].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[bs];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)r_(d,function(x){x!==bs&&(f[x]!==void 0||wS(f,x)?h[x]||u(d[x]):(h[x]=!0,Hy(c)))}),r_(f,function(x){d[x]!==void 0||wS(d,x)||(h[x]=!1,Hy(c))});else if(p===5){if(r(c)&&(Hy(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Cge,DR,Ree=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xIt=typeof Map<"u",_It=typeof Set<"u",Age=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",GNe=Ree?Symbol.for("immer-nothing"):((Cge={})["immer-nothing"]=!0,Cge),Ige=Ree?Symbol.for("immer-draftable"):"__$immer_draftable",bs=Ree?Symbol.for("immer-state"):"__$immer_state",wIt=""+Object.prototype.constructor,ES=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,YNe=Object.getOwnPropertyDescriptors||function(e){var t={};return ES(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},iG={},NR={get:function(e,t){if(t===bs)return e;var n=Bb(e);if(!wS(n,t))return function(i,s,o){var a,u=Sge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!_g(r)?r:r===_z(e.t,t)?(wz(e),e.o[t]=rG(e.A.h,r,e)):r},has:function(e,t){return t in Bb(e)},ownKeys:function(e){return Reflect.ownKeys(Bb(e))},set:function(e,t,n){var r=Sge(Bb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=_z(Bb(e),t),s=i==null?void 0:i[bs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(WNe(n,i)&&(n!==void 0||wS(e.t,t)))return!0;wz(e),Hy(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return _z(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,wz(e),Hy(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Bb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){uh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){uh(12)}},hI={};r_(NR,function(e,t){hI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),hI.deleteProperty=function(e,t){return hI.set.call(this,e,t,void 0)},hI.set=function(e,t,n){return NR.set.call(this,e[0],t,n,e[0])};var EIt=function(){function e(n){var r=this;this.O=Age,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),x=1;x<y;x++)v[x-1]=arguments[x];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&uh(6),o!==void 0&&typeof o!="function"&&uh(7),_g(i)){var c=wge(r),f=rG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?EM(c):nG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return bz(c,o),xz(m,c)},function(m){throw EM(c),m}):(bz(c,o),xz(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===GNe&&(l=void 0),r.D&&Iee(l,!0),o){var h=[],p=[];Kp("Patches").M(i,l,h,p),o(h,p)}return l}uh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){_g(n)||uh(8),q1(n)&&(n=vIt(n));var r=wge(this),i=rG(this,n,void 0);return i[bs].C=!0,nG(r),i},t.finishDraft=function(n,r){var i=n&&n[bs],s=i.A;return bz(s,r),xz(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Age&&uh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Kp("Patches").$;return q1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ff=new EIt,KNe=ff.produce;ff.produceWithPatches.bind(ff);ff.setAutoFreeze.bind(ff);ff.setUseProxies.bind(ff);ff.applyPatches.bind(ff);ff.createDraft.bind(ff);ff.finishDraft.bind(ff);function PR(e){"@babel/helpers - typeof";return PR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PR(e)}function SIt(e,t){if(PR(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(PR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TIt(e){var t=SIt(e,"string");return PR(t)=="symbol"?t:t+""}function CIt(e,t,n){return(t=TIt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kge(Object(n),!0).forEach(function(r){CIt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kge(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function du(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Dge=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ez=function(){return Math.random().toString(36).substring(7).split("").join(".")},CM={INIT:"@@redux/INIT"+Ez(),REPLACE:"@@redux/REPLACE"+Ez(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ez()}};function AIt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function XNe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(du(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(du(1));return n(XNe)(e,t)}if(typeof e!="function")throw new Error(du(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(du(3));return s}function f(m){if(typeof m!="function")throw new Error(du(4));if(u)throw new Error(du(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(du(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!AIt(m))throw new Error(du(7));if(typeof m.type>"u")throw new Error(du(8));if(u)throw new Error(du(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(du(10));i=m,d({type:CM.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(du(11));function x(){v.next&&v.next(c())}x();var w=g(x);return{unsubscribe:w}}},m[Dge]=function(){return this},m}return d({type:CM.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Dge]=p,r}function IIt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:CM.INIT});if(typeof r>"u")throw new Error(du(12));if(typeof n(void 0,{type:CM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(du(13))})}function kIt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{IIt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(du(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function AM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function RIt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(du(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=AM.apply(void 0,a)(i.dispatch),Rge(Rge({},i),{},{dispatch:s})}}}function QNe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var sG=QNe();sG.withExtraArgument=QNe;var JNe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pN=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},i_=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},DIt=Object.defineProperty,NIt=Object.defineProperties,PIt=Object.getOwnPropertyDescriptors,Nge=Object.getOwnPropertySymbols,OIt=Object.prototype.hasOwnProperty,$It=Object.prototype.propertyIsEnumerable,Pge=function(e,t,n){return t in e?DIt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w1=function(e,t){for(var n in t||(t={}))OIt.call(t,n)&&Pge(e,n,t[n]);if(Nge)for(var r=0,i=Nge(t);r<i.length;r++){var n=i[r];$It.call(t,n)&&Pge(e,n,t[n])}return e},Sz=function(e,t){return NIt(e,PIt(t))},mN=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},MIt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?AM:AM.apply(null,arguments)};function ZNe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var LIt=function(e){return e&&typeof e.match=="function"};function Xp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return w1(w1({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function FIt(e){return ZNe(e)&&"type"in e}var BIt=function(e){JNe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,i_([void 0],n[0].concat(this)))):new(t.bind.apply(t,i_([void 0],n.concat(this))))},t}(Array),jIt=function(e){JNe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,i_([void 0],n[0].concat(this)))):new(t.bind.apply(t,i_([void 0],n.concat(this))))},t}(Array);function oG(e){return _g(e)?KNe(e,function(){}):e}function UIt(e){return typeof e=="boolean"}function zIt(){return function(t){return VIt(t)}}function VIt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new BIt;return n&&(UIt(n)?r.push(sG):r.push(sG.withExtraArgument(n.extraArgument))),r}function HIt(e){var t=zIt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(ZNe(i))h=kIt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=RIt.apply(void 0,p),g=AM;u&&(g=MIt(w1({trace:!1},typeof u=="object"&&u)));var y=new jIt(m),v=y;Array.isArray(d)?v=i_([m],d):typeof d=="function"&&(v=d(y));var x=g.apply(void 0,v);return XNe(h,c,x)}function ePe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function qIt(e){return typeof e=="function"}function WIt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?ePe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(qIt(e))u=function(){return oG(e())};else{var l=oG(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=i_([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(q1(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(_g(p))return KNe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function GIt(e,t){return e+"/"+t}function YIt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:oG(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=GIt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Xp(d,p):Xp(d)});function u(){var c=typeof e.extraReducers=="function"?ePe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=w1(w1({},d),o);return WIt(n,function(v){for(var x in y)v.addCase(x,y[x]);for(var w=0,E=p;w<E.length;w++){var T=E[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var KIt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tPe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=KIt[Math.random()*64|0];return t},XIt=["name","message","stack","code"],Tz=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Oge=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),QIt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=XIt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Xp(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Sz(w1({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Xp(t+"/pending",function(l,c,f){return{payload:void 0,meta:Sz(w1({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Xp(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||QIt)(l||"Rejected"),meta:Sz(w1({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):tPe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return mN(this,null,function(){var v,x,w,E,T,C,I;return pN(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),ZIt(E)?[4,E]:[3,2];case 1:E=N.sent(),N.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,P){return new Tz(k,P)},fulfillWithValue:function(k,P){return new Oge(k,P)}})).then(function(k){if(k instanceof Tz)throw k;return k instanceof Oge?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=N.sent(),[3,5];case 4:return C=N.sent(),w=C instanceof Tz?o(null,h,l,C.payload,C.meta):o(C,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,I||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(JIt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function JIt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function ZIt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ekt=function(e,t){return LIt(e)?e.match(t):e(t)};function $ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return ekt(r,n)})}}var Dee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},aG=function(){},nPe=function(e,t){return t===void 0&&(t=aG),e.catch(t),e},rPe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},SS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},tkt="task",iPe="listener",sPe="completed",Nee="cancelled",nkt="task-"+Nee,rkt="task-"+sPe,oPe=iPe+"-"+Nee,ikt=iPe+"-"+sPe,d8=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=tkt+" "+Nee+" (reason: "+t+")"}return e}(),TS=function(e){if(e.aborted)throw new d8(e.reason)};function aPe(e,t){var n=aG;return new Promise(function(r,i){var s=function(){return i(new d8(e.reason))};if(e.aborted){s();return}n=rPe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=aG})}var skt=function(e,t){return mN(void 0,null,function(){var n,r;return pN(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof d8?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},IM=function(e){return function(t){return nPe(aPe(e,t).then(function(n){return TS(e),n}))}},uPe=function(e){var t=IM(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},okt=Object.assign,Mge={},gN="listenerMiddleware",akt=function(e,t){var n=function(r){return rPe(e,function(){return SS(r,e.reason)})};return function(r,i){Dee(r,"taskExecutor");var s=new AbortController;n(s);var o=skt(function(){return mN(void 0,null,function(){var a;return pN(this,function(u){switch(u.label){case 0:return TS(e),TS(s.signal),[4,r({pause:IM(s.signal),delay:uPe(s.signal),signal:s.signal})];case 1:return a=u.sent(),TS(s.signal),[2,a]}})})},function(){return SS(s,rkt)});return i!=null&&i.autoJoin&&t.push(o),{result:IM(e)(o),cancel:function(){SS(s,nkt)}}}},ukt=function(e,t){var n=function(r,i){return mN(void 0,null,function(){var s,o,a,u;return pN(this,function(l){switch(l.label){case 0:TS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,aPe(t,Promise.race(a))];case 2:return u=l.sent(),TS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return nPe(n(r,i))}},lPe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Xp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Dee(s,"options.listener"),{predicate:i,type:t,effect:s}},lkt=function(e){var t=lPe(e),n=t.type,r=t.predicate,i=t.effect,s=tPe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},uG=function(e){e.pending.forEach(function(t){SS(t,oPe)})},ckt=function(e){return function(){e.forEach(uG),e.clear()}},Lge=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},fkt=Xp(gN+"/add"),dkt=Xp(gN+"/removeAll"),hkt=Xp(gN+"/remove"),pkt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,i_([gN+"/error"],e))};function mkt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?pkt:i;Dee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&uG(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=lkt(h)),o(p)},l=function(h){var p=lPe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(x){var w=typeof m=="string"?x.type===m:x.predicate===y;return w&&x.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&uG(v)),!!v},c=function(h,p,m,g){return mN(t,null,function(){var y,v,x,w;return pN(this,function(E){switch(E.label){case 0:y=new AbortController,v=ukt(u,y.signal),x=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,okt({},m,{getOriginalState:g,condition:function(T,C){return v(T,C).then(Boolean)},take:v,delay:uPe(y.signal),pause:IM(y.signal),extra:r,signal:y.signal,fork:akt(y.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,C,I){T!==y&&(SS(T,oPe),I.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof d8||Lge(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return E.sent(),SS(y,ikt),h.pending.delete(y),[7];case 6:return[2]}})})},f=ckt(n),d=function(h){return function(p){return function(m){if(!FIt(m))return p(m);if(fkt.match(m))return u(m.payload);if(dkt.match(m)){f();return}if(hkt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Mge)throw new Error(gN+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var x=h.getState(),w=Array.from(n.values()),E=0,T=w;E<T.length;E++){var C=T[E],I=!1;try{I=C.predicate(m,x,g)}catch(N){I=!1,Lge(s,N,{raisedBy:"predicate"})}I&&c(C,m,h,y)}}finally{g=Mge}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Fge;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);bIt();function gkt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let gO;const ykt=new Uint8Array(16);function vkt(){if(!gO&&(gO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gO(ykt)}const Sa=[];for(let e=0;e<256;++e)Sa.push((e+256).toString(16).slice(1));function bkt(e,t=0){return(Sa[e[t+0]]+Sa[e[t+1]]+Sa[e[t+2]]+Sa[e[t+3]]+"-"+Sa[e[t+4]]+Sa[e[t+5]]+"-"+Sa[e[t+6]]+Sa[e[t+7]]+"-"+Sa[e[t+8]]+Sa[e[t+9]]+"-"+Sa[e[t+10]]+Sa[e[t+11]]+Sa[e[t+12]]+Sa[e[t+13]]+Sa[e[t+14]]+Sa[e[t+15]]).toLowerCase()}const xkt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bge={randomUUID:xkt};function jge(e,t,n){if(Bge.randomUUID&&!e)return Bge.randomUUID();e=e||{};const r=e.random||(e.rng||vkt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,bkt(r)}class Qp{static get(){let t=jge();for(;this.ids.has(t);)t=jge();return this.ids.set(t,!0),t}}Qp.ids=new Map;function Sh(e){return"parent"in e}function _kt(e){return!Sh(e)}function wkt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Qp.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Qp.get(),createdOn:Date.now(),val:r}]:[];return{id:Qp.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Ekt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Qp.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Qp.get(),createdOn:Date.now(),val:s}]:[];return{id:Qp.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Us(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Nkt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function s_(e){return!!e&&!!e[df]}function W1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Pkt}(e)||Array.isArray(e)||!!e[hk]||!!(!((t=e.constructor)===null||t===void 0)&&t[hk])||h8(e)||p8(e))}function xT(e,t,n){n===void 0&&(n=!1),G1(e)===0?(n?Object.keys:Fee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function G1(e){var t=e[df];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h8(e)?2:p8(e)?3:0}function OR(e,t){return G1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function X4(e,t){return G1(e)===2?e.get(t):e[t]}function cPe(e,t,n){var r=G1(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Skt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function h8(e){return Rkt&&e instanceof Map}function p8(e){return Dkt&&e instanceof Set}function jb(e){return e.o||e.t}function Pee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Okt(e);delete t[df];for(var n=Fee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Oee(e,t){return t===void 0&&(t=!1),$ee(e)||s_(e)||!W1(e)||(G1(e)>1&&(e.set=e.add=e.clear=e.delete=Tkt),Object.freeze(e),t&&xT(e,function(n,r){return Oee(r,!0)},!0)),e}function Tkt(){Us(2)}function $ee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Jp(e){var t=dG[e];return t||Us(18,e),t}function Ckt(e,t){dG[e]||(dG[e]=t)}function Uge(){return{}.NODE_ENV==="production"||_T||Us(0),_T}function Cz(e,t){t&&(Jp("Patches"),e.u=[],e.s=[],e.v=t)}function kM(e){lG(e),e.p.forEach(Akt),e.p=null}function lG(e){e===_T&&(_T=e.l)}function zge(e){return _T={p:[],l:_T,h:e,m:!0,_:0}}function Akt(e){var t=e[df];t.i===0||t.i===1?t.j():t.O=!0}function Az(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Jp("ES5").S(t,e,r),r?(n[df].P&&(kM(t),Us(4)),W1(e)&&(e=RM(t,e),t.l||DM(t,e)),t.u&&Jp("Patches").M(n[df].t,e,t.u,t.s)):e=RM(t,n,[]),kM(t),t.u&&t.v(t.u,t.s),e!==Lee?e:void 0}function RM(e,t,n){if($ee(t))return t;var r=t[df];if(!r)return xT(t,function(s,o){return Vge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return DM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Pee(r.k):r.o;xT(r.i===3?new Set(i):i,function(s,o){return Vge(e,r,i,s,o,n)}),DM(e,i,!1),n&&e.u&&Jp("Patches").R(r,n,e.u,e.s)}return r.o}function Vge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Us(5),s_(i)){var o=RM(e,i,s&&t&&t.i!==3&&!OR(t.D,r)?s.concat(r):void 0);if(cPe(n,r,o),!s_(o))return;e.m=!1}if(W1(i)&&!$ee(i)){if(!e.h.F&&e._<1)return;RM(e,i),t&&t.A.l||DM(e,i)}}function DM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Oee(t,n)}function Iz(e,t){var n=e[df];return(n?jb(n):e)[t]}function Hge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function cG(e){e.P||(e.P=!0,e.l&&cG(e.l))}function kz(e){e.o||(e.o=Pee(e.t))}function fG(e,t,n){var r=h8(t)?Jp("MapSet").N(t,n):p8(t)?Jp("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Uge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=hG;o&&(u=[a],l=pI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Jp("ES5").J(t,n);return(n?n.A:Uge()).p.push(r),r}function Ikt(e){return s_(e)||Us(22,e),function t(n){if(!W1(n))return n;var r,i=n[df],s=G1(n);if(i){if(!i.P&&(i.i<4||!Jp("ES5").K(i)))return i.t;i.I=!0,r=qge(n,s),i.I=!1}else r=qge(n,s);return xT(r,function(o,a){i&&X4(i.t,o)===a||cPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function qge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Pee(e)}function kkt(){function e(r){if(!W1(r))return r;if(Array.isArray(r))return r.map(e);if(h8(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(p8(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return OR(r,hk)&&(i[hk]=r[hk]),i}function t(r){return s_(r)?e(r):r}var n="add";Ckt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=G1(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Us(24),typeof u=="function"&&f==="prototype"&&Us(24),typeof(u=X4(u,f))!="object"&&Us(15,o.join("/"))}var d=G1(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Us(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Us(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;xT(a.D,function(h,p){var m=X4(f,h),g=X4(d,h),y=p?OR(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var x=u.concat([v]);l.push({op:n,path:x,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Lee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Wge,_T,Mee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Rkt=typeof Map<"u",Dkt=typeof Set<"u",Gge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Lee=Mee?Symbol.for("immer-nothing"):((Wge={})["immer-nothing"]=!0,Wge),hk=Mee?Symbol.for("immer-draftable"):"__$immer_draftable",df=Mee?Symbol.for("immer-state"):"__$immer_state",Nkt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Pkt=""+Object.prototype.constructor,Fee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Okt=Object.getOwnPropertyDescriptors||function(e){var t={};return Fee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},dG={},hG={get:function(e,t){if(t===df)return e;var n=jb(e);if(!OR(n,t))return function(i,s,o){var a,u=Hge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!W1(r)?r:r===Iz(e.t,t)?(kz(e),e.o[t]=fG(e.A.h,r,e)):r},has:function(e,t){return t in jb(e)},ownKeys:function(e){return Reflect.ownKeys(jb(e))},set:function(e,t,n){var r=Hge(jb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Iz(jb(e),t),s=i==null?void 0:i[df];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Skt(n,i)&&(n!==void 0||OR(e.t,t)))return!0;kz(e),cG(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Iz(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,kz(e),cG(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=jb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Us(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Us(12)}},pI={};xT(hG,function(e,t){pI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),pI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Us(13),pI.set.call(this,e,t,void 0)},pI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Us(14),hG.set.call(this,e[0],t,n,e[0])};var $kt=function(){function e(n){var r=this;this.g=Gge,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),x=1;x<y;x++)v[x-1]=arguments[x];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Us(6),o!==void 0&&typeof o!="function"&&Us(7),W1(i)){var c=zge(r),f=fG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?kM(c):lG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Cz(c,o),Az(m,c)},function(m){throw kM(c),m}):(Cz(c,o),Az(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Lee&&(l=void 0),r.F&&Oee(l,!0),o){var h=[],p=[];Jp("Patches").M(i,l,h,p),o(h,p)}return l}Us(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){W1(n)||Us(8),s_(n)&&(n=Ikt(n));var r=zge(this),i=fG(this,n,void 0);return i[df].C=!0,lG(r),i},t.finishDraft=function(n,r){var i=n&&n[df];({}).NODE_ENV!=="production"&&(i&&i.C||Us(9),i.I&&Us(10));var s=i.A;return Cz(s,r),Az(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Gge&&Us(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Jp("Patches").$;return s_(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),hf=new $kt,Mkt=hf.produce;hf.produceWithPatches.bind(hf);hf.setAutoFreeze.bind(hf);hf.setUseProxies.bind(hf);hf.applyPatches.bind(hf);hf.createDraft.bind(hf);hf.finishDraft.bind(hf);function Lkt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=wkt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return YIt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Qp.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Qp.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function Fkt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=Lkt(e),s=mkt();s.startListening({matcher:$ge(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=$ge(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=HIt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Qp.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Bkt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jkt=Object.prototype.hasOwnProperty;function pG(e,t){return jkt.call(e,t)}function mG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)pG(e,i)&&r.push(i);return r}function Zl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function gG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ub(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fPe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function yG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(yG(e[t]))return!0}else if(typeof e=="object"){for(var r=mG(e),i=r.length,s=0;s<i;s++)if(yG(e[r[s]]))return!0}}return!1}function Yge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dPe=function(e){Bkt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Yge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Yge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ls=dPe,Ukt=Zl,QE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=NM(n,this.path);r&&(r=Zl(r));var i=Ox(n,{op:"remove",path:this.from}).removed;return Ox(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=NM(n,this.from);return Ox(n,{op:"add",path:this.path,value:Zl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$R(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},zkt={add:function(e,t,n){return gG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:QE.move,copy:QE.copy,test:QE.test,_get:QE._get};function NM(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ox(e,n),n.value}function Ox(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):PM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=NM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$R(e,t.value),o.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ls("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Zl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=PM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fPe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!gG(h))throw new Ls("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);gG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ls("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=zkt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=QE[t.op].call(t,l,h,e);if(o.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ls("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function m8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ls("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Zl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Ox(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Vkt(e,t,n){var r=Ox(e,t);if(r.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function PM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ls("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(QE[e.op]){if(typeof e.path!="string")throw new Ls("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ls('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ls("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ls("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&yG(e.value))throw new Ls("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ls("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ls("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hPe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ls("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ls("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hPe(e,t,n){try{if(!Array.isArray(e))throw new Ls("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)m8(Zl(t),Zl(e),n||!0);else{n=n||PM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ls)return i;throw i}}function $R(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$R(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$R(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Hkt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ls,_areEquals:$R,applyOperation:Ox,applyPatch:m8,applyReducer:Vkt,deepClone:Ukt,getValueByPointer:NM,validate:hPe,validator:PM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Bee=new WeakMap,qkt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Wkt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Gkt(e){return Bee.get(e)}function Ykt(e,t){return e.observers.get(t)}function Kkt(e,t){e.observers.delete(t.callback)}function Xkt(e,t){t.unobserve()}function Qkt(e,t){var n=[],r,i=Gkt(e);if(!i)i=new qkt(e),Bee.set(e,i);else{var s=Ykt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Zl(e),t){r.callback=t,r.next=null;var o=function(){vG(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){vG(r),clearTimeout(r.next),Kkt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Wkt(t,r)),r}function vG(e,t){t===void 0&&(t=!1);var n=Bee.get(e.object);jee(n.value,e.object,e.patches,"",t),e.patches.length&&m8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function jee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=mG(t),o=mG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(pG(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?jee(c,f,n,r+"/"+Ub(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ub(l),value:Zl(c)}),n.push({op:"replace",path:r+"/"+Ub(l),value:Zl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ub(l),value:Zl(c)}),n.push({op:"remove",path:r+"/"+Ub(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!pG(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Ub(l),value:Zl(t[l])})}}}function pPe(e,t,n){n===void 0&&(n=!1);var r=[];return jee(e,t,r,"",n),r}const Jkt=Object.freeze(Object.defineProperty({__proto__:null,compare:pPe,generate:vG,observe:Qkt,unobserve:Xkt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Hkt,Jkt,{JsonPatchError:dPe,deepClone:Zl,escapePathComponent:Ub,unescapePathComponent:fPe});var mI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(mI||{});function Q4(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=mPe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=Q4(i,t);return m8(a,Zl(o),!0,!1).newDocument}function Zkt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function yN({registry:e,initialState:t}){let n=!1;const r=gkt(),i=Fkt(t);function s(c){return i.backend.nodes[c]}r.listen(mI.TRAVERSAL_START,()=>{n=!0}),r.listen(mI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return Q4(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=Q4(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=pPe(y,f);if(Zkt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:x}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Ekt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=Q4(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(mI.TRAVERSAL_START);const f=mPe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);tRt(p,m)?Sh(p)&&d.push(...p.sideEffects.undo):Sh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(mI.TRAVERSAL_END)},undo(){const{current:c}=i;return Sh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return gPe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function eRt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Sh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Sh(r)&&(r=n[r.parent]),Sh(i)&&(i=n[i.parent]);return r.id}function mPe(e,t,n){const r=eRt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Sh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Sh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function tRt(e,t){if(Sh(e)&&e.parent===t.id)return!0;if(Sh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function gPe(e,t){return{...e,children:e.children.map(n=>gPe(t[n],t)),name:`${e.label}`}}kkt();function nRt(e){return e.length===2?Mkt(e):e}class rw{static create(){return new rw}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:nRt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Xp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const Kge=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},z2=e=>{const t=D.useRef(null),n=Kge(e),[r,i]=D.useState(0),[s,o]=D.useState(0);D.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Kge({...n,width:n.width||r,height:n.height||s});return[t,a]},rRt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:z2},Symbol.toStringTag,{value:"Module"})),iRt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function sRt({parameters:e,setAnswer:t}){const[n,r]=z2(iRt),[i,s]=D.useState(100),[o,a]=D.useState(100),[u,l]=D.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=D.useMemo(()=>{const p=rw.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=yN({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=D.useCallback(p=>{const m=Jr("#movingCircle"),g=Jr("#clickAccuracySvg"),y=F$(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],x=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+x,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:x}})},[f,t,c,d]);return D.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Jr(n.current).select("circle").transition().duration(y).ease(hEt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(ke,{children:["Adjust speed (px/s):",_.jsx(_5,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const oRt=Object.freeze(Object.defineProperty({__proto__:null,default:sRt},Symbol.toStringTag,{value:"Module"}));function Uee({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=D.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=D.useCallback(c=>(s?hN("%B"):Lv(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Wo,{children:_.jsx(_r,{gap:3,children:_.jsx(Qe,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Wo,{children:_.jsx(qi,{withinPortal:!0,label:c,children:_.jsx(Qe,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const aRt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Uee},Symbol.toStringTag,{value:"Module"}));function yPe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=D.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Wo,{children:_.jsx(_r,{gap:3,children:_.jsx(Qe,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(_r,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(Qe,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const uRt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:yPe},Symbol.toStringTag,{value:"Module"})),Nf={top:15,left:100,right:50,bottom:50};function bG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Jc(),o=D.useMemo(()=>s-Nf.left-Nf.right,[s]),a=D.useMemo(()=>i-Nf.top-Nf.bottom,[i]),u=D.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Bv(a8).domain(d)},[n,t.category]),l=D.useMemo(()=>e?dc([Nf.left,o+Nf.left]).domain([0,Q0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=D.useMemo(()=>e?F2([Nf.top,a+Nf.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=D.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Nf.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Nf.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(Uee,{xScale:l,yRange:c.range(),vertPosition:a+Nf.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(yPe,{yScale:c,horizontalPosition:Nf.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(wc,{})}const lRt=Object.freeze(Object.defineProperty({__proto__:null,Bar:bG,default:bG},Symbol.toStringTag,{value:"Module"})),Zr=Array.isArray;function hc(e){return e!=null?Zr(e)?e:[e]:[]}function cRt(e=0,t=1/0){return`${Xge(e)} < row_number() && row_number() <= ${Xge(t)}`}function Xge(e){return e<0?`count() + ${e}`:e}class vPe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(cRt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,hc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Jn(e){throw Error(e)}function gl(e){return typeof e=="number"}function fs(e){return typeof e=="function"}function g8(e,t){const n=Array(e);if(fs(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let fRt=class extends vPe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Jn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Jn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Jn("Not implemented")}getter(t){Jn("Not implemented")}objects(t){Jn("Not implemented")}object(t){Jn("Not implemented")}[Symbol.iterator](){Jn("Not implemented")}print(t={}){gl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=g8(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},dRt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},hRt=function(e){return e&&fs(e.get)?e:new dRt(e)};function wg(e){return e instanceof Date}function Du(e){return e===Object(e)}function OM(e){return e instanceof RegExp}function Ya(e){return typeof e=="string"}function pRt(e,t){const n=r=>Jn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Qge(e.entries(),t):wg(e)?n("Date"):OM(e)?n("RegExp"):Ya(e)?n():Zr(e)?mRt(e,t):fs(e[Symbol.iterator])?gRt(e,t):Du(e)?Qge(Object.entries(e),t):n()}function Qge(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function mRt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function gRt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:yRt}=Object.prototype;function Oh(e,t){return yRt.call(e,t)}function wf(e){return e?new Jge({...e.data()},e.columnNames()):new Jge}class Jge{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Oh(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Yr=void 0,vRt=Object.getPrototypeOf(Int8Array);function vN(e){return e instanceof vRt}function yx(e){return Zr(e)||vN(e)}function mh(e){return e!=null&&e===e}const vA=e=>yx(e)||Ya(e),bRt={compact:e=>yx(e)?e.filter(t=>mh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>vA(e)?e.includes(t,n):!1,indexof:(e,t)=>vA(e)?e.indexOf(t):-1,join:(e,t)=>yx(e)?e.join(t):Yr,lastindexof:(e,t)=>vA(e)?e.lastIndexOf(t):-1,length:e=>vA(e)?e.length:0,pluck:(e,t)=>yx(e)?e.map(n=>mh(n)?n[t]:Yr):Yr,reverse:e=>yx(e)?e.slice().reverse():Ya(e)?e.split("").reverse().join(""):Yr,slice:(e,t,n)=>vA(e)?e.slice(t,n):Yr};function xRt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function J4(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const up=e=>(e<10?"0":"")+e,_Rt=e=>e<0?"-"+J4(-e,6):e>9999?"+"+J4(e,6):J4(e,4);function bPe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return _Rt(e)+"-"+up(t+1)+"-"+up(n)+(!u||o?"T"+up(r)+":"+up(i)+":"+up(s)+"."+J4(o,3)+l:s?"T"+up(r)+":"+up(i)+":"+up(s)+l:i||r||!a?"T"+up(r)+":"+up(i)+l:"")}function xPe(e,t){return isNaN(e)?"Invalid Date":bPe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function y8(e,t){return isNaN(e)?"Invalid Date":bPe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const wRt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function ERt(e){return e.match(wRt)&&!isNaN(Date.parse(e))}function SRt(e,t=Date.parse){return ERt(e)?t(e):e}const _Pe=6e4,wPe=864e5,EPe=6048e5,js=new Date,zs=new Date,eo=e=>(js.setTime(typeof e=="string"?SRt(e):e),js);function TRt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function CRt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function ARt(e){zs.setTime(+e),zs.setHours(0,0,0,0),js.setTime(+zs),js.setMonth(0),js.setDate(1);const t=(zs.getTimezoneOffset()-js.getTimezoneOffset())*_Pe;return Math.floor(1+(zs-js-t)/wPe)}function IRt(e){zs.setTime(+e),zs.setUTCHours(0,0,0,0);const t=Date.UTC(zs.getUTCFullYear(),0,1);return Math.floor(1+(zs-t)/wPe)}function kRt(e,t){const n=t||0;zs.setTime(+e),zs.setDate(zs.getDate()-(zs.getDay()+7-n)%7),zs.setHours(0,0,0,0),js.setTime(+e),js.setMonth(0),js.setDate(1),js.setDate(1-(js.getDay()+7-n)%7),js.setHours(0,0,0,0);const r=(zs.getTimezoneOffset()-js.getTimezoneOffset())*_Pe;return Math.floor((1+(zs-js)-r)/EPe)}function RRt(e,t){const n=t||0;return zs.setTime(+e),zs.setUTCDate(zs.getUTCDate()-(zs.getUTCDay()+7-n)%7),zs.setUTCHours(0,0,0,0),js.setTime(+e),js.setUTCMonth(0),js.setUTCDate(1),js.setUTCDate(1-(js.getUTCDay()+7-n)%7),js.setUTCHours(0,0,0,0),Math.floor((1+(zs-js))/EPe)}const DRt={format_date:(e,t)=>xPe(eo(e),!t),format_utcdate:(e,t)=>y8(eo(e),!t),timestamp:e=>+eo(e),year:e=>eo(e).getFullYear(),quarter:e=>Math.floor(eo(e).getMonth()/3),month:e=>eo(e).getMonth(),date:e=>eo(e).getDate(),dayofweek:e=>eo(e).getDay(),hours:e=>eo(e).getHours(),minutes:e=>eo(e).getMinutes(),seconds:e=>eo(e).getSeconds(),milliseconds:e=>eo(e).getMilliseconds(),utcyear:e=>eo(e).getUTCFullYear(),utcquarter:e=>Math.floor(eo(e).getUTCMonth()/3),utcmonth:e=>eo(e).getUTCMonth(),utcdate:e=>eo(e).getUTCDate(),utcdayofweek:e=>eo(e).getUTCDay(),utchours:e=>eo(e).getUTCHours(),utcminutes:e=>eo(e).getUTCMinutes(),utcseconds:e=>eo(e).getUTCSeconds(),utcmilliseconds:e=>eo(e).getUTCMilliseconds(),datetime:TRt,dayofyear:ARt,week:kRt,utcdatetime:CRt,utcdayofyear:IRt,utcweek:RRt,now:Date.now};function zee(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:wg(e)||wg(t)?+e==+t:OM(e)&&OM(t)?e+""==t+"":Du(e)&&Du(t)?NRt(e,t):!1}function NRt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Zge(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Zge(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!zee(e[o],t[o]))return!1}return!0}function Zge(e,t,n=zee){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const PRt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let ORt=Math.random;function V2(){return ORt()}const $Rt={random:V2,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Vee(e){return e instanceof Map}function MRt(e){return e instanceof Set}function Z4(e){return Vee(e)||MRt(e)}function Rz(e){return Array.from(e)}const LRt={has:(e,t)=>Z4(e)?e.has(t):e!=null?Oh(e,t):!1,keys:e=>Vee(e)?Rz(e.keys()):e!=null?Object.keys(e):[],values:e=>Z4(e)?Rz(e.values()):e!=null?Object.values(e):[],entries:e=>Z4(e)?Rz(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Yr};function FRt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Oh(t,e))return t[e];return n!==void 0?n:e}function BRt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const jRt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},JE={bin:xRt,equal:zee,recode:FRt,sequence:BRt,...bRt,...DRt,...PRt,...$Rt,...LRt,...jRt};function MR(e){return typeof e=="bigint"}function fm(e){return e===void 0?e+"":MR(e)?e+"n":JSON.stringify(e)}function qn(e,t=[],n=[]){return new URt(e,hc(t),hc(n))}let URt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${fm(n)}]`),...this.params.map(fm)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const SPe=e=>qn("any",e),TPe=()=>qn("count"),CPe=e=>qn("array_agg",e),APe=e=>qn("array_agg_distinct",e),IPe=(e,t)=>qn("map_agg",[e,t]),kPe=(e,t)=>qn("object_agg",[e,t]),RPe=(e,t)=>qn("entries_agg",[e,t]);({...JE});function zRt(e,t){e=Z4(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function VRt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function HRt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function qRt(e,t,n,r){const i=r==="map"||r===!0?IPe:r==="entries"?RPe:r==="object"?kPe:Jn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=zRt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:CPe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const WRt="ArrayPattern",GRt="ArrowFunctionExpression",YRt="FunctionExpression",E1="Identifier",H2="Literal",DPe="MemberExpression",KRt="ObjectExpression",NPe="ObjectPattern",PPe="Property",bN="Column",XRt="Constant",QRt="Dictionary",JRt="Function",ZRt="Parameter",OPe="Op",Yi=(e,t)=>{const n=eDt[e.type];return n?n(e,t):Jn(`Unsupported expression construct: ${e.type}`)},Dz=(e,t)=>"("+Yi(e.left,t)+" "+e.operator+" "+Yi(e.right,t)+")",Nz=(e,t)=>"("+gp(e.params,t)+")=>"+Yi(e.body,t),eye=(e,t)=>Yi(e.callee,t)+"("+gp(e.arguments,t)+")",gp=(e,t,n=",")=>e.map(r=>Yi(r,t)).join(n),$Pe=e=>e.computed?`[${fm(e.name)}]`:`.${e.name}`,tye=(e,t,n)=>{const r=e.table||"";return`data${r}${$Pe(e)}.${n}(${t.index}${r})`},eDt={Constant:e=>e.raw,Column:(e,t)=>tye(e,t,"get"),Dictionary:(e,t)=>tye(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${$Pe(e)}`,Op:(e,t)=>`op(${fm(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Yi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Yi(e.object,t),i=Yi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:eye,NewExpression:(e,t)=>"new "+eye(e,t),ArrayExpression:(e,t)=>"["+gp(e.elements,t)+"]",AssignmentExpression:Dz,BinaryExpression:Dz,LogicalExpression:Dz,UnaryExpression:(e,t)=>"("+e.operator+Yi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Yi(e.test,t)+"?"+Yi(e.consequent,t)+":"+Yi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+gp(e.properties,t)+"})",Property:(e,t)=>{const n=Yi(e.key,t);return(e.computed?`[${n}]`:n)+":"+Yi(e.value,t)},ArrowFunctionExpression:Nz,FunctionExpression:Nz,FunctionDeclaration:Nz,ArrayPattern:(e,t)=>"["+gp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+gp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+gp(e.declarations,t,","),VariableDeclarator:(e,t)=>Yi(e.id,t)+"="+Yi(e.init,t),SpreadElement:(e,t)=>"..."+Yi(e.argument,t),BlockStatement:(e,t)=>"{"+gp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Yi(e.expression,t),IfStatement:(e,t)=>"if ("+Yi(e.test,t)+")"+Yi(e.consequent,t)+(e.alternate?" else "+Yi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Yi(e.discriminant,t)+") {"+gp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Yi(e.test,t):"default")+": "+gp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Yi(e.argument,t),Program:(e,t)=>Yi(e.body[0],t)};function $M(e,t={index:"row"}){return Yi(e,t)}function tDt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function wT(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:wg(e)?+e:Zr(e)||vN(e)?`[${e.map(wT)}]`:OM(e)?e+"":nDt(e)}function nDt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${wT(e[r])}`;return t+="}",t}function MM(e,t){const n=e.length;return n===1?(r,i)=>wT(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=wT(a)}return s}}function rDt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=wT(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=wT(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function w0(){}function iDt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Po(e){return e.init=e.init||w0,e.add=e.add||w0,e.rem=e.rem||w0,e}function nye(e,t){return e.product_v=!1,e.product=t}const MPe={count:{create:()=>Po({value:e=>e.count}),param:[]},array_agg:{create:()=>Po({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Po({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Po({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Po({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Po({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Yr}),param:[1]},valid:{create:()=>Po({value:e=>e.valid}),param:[1]},invalid:{create:()=>Po({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=rDt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Po({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Po({value:e=>{let t=Yr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Yr,add:(e,t)=>MR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>nye(e,1),value:e=>e.valid?e.product_v?nye(e,iDt(e.list.values())):e.product:void 0,add:(e,t)=>MR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Yr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Po({value:e=>e.valid?e.mean:Yr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Yr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Po({value:e=>e.valid>1?e.dev/e.valid:Yr}),param:[1],req:["variance"]},stdev:{create:()=>Po({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Yr}),param:[1],req:["variance"]},stdevp:{create:()=>Po({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Yr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Yr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Yr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Yr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Yr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Po({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Po({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Yr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Po({value:e=>e.valid>1?e.cov/e.valid:Yr}),param:[2],req:["covariance"]},corr:{create:()=>Po({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Yr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Po({value:i=>tDt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},rye={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},iye={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},LPe={row_number:{create(){return{init:w0,value:e=>e.index+1}},param:[]},rank:rye,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=rye.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:iye,ntile:{create(e){e=+e,e>0||Jn("ntile num must be greater than zero.");const{init:t,value:n}=iye.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Yr){return e=+e||1,{init:w0,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Yr){return e=+e||1,{init:w0,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:w0,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:w0,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Jn("nth_value nth must be greater than zero."),{init:w0,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Yr}}},param:[1,1]},fill_down:{create(e=Yr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return mh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Yr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=sDt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function sDt(e,t,n){for(const r=e.size;n<r;++n)if(mh(e.value(n,t)))return n;return-1}function Hee(e){return Oh(MPe,e)}function qee(e){return Oh(LPe,e)}function FPe(e){return Oh(JE,e)||e==="row_object"}function BPe(e){return Hee(e)&&MPe[e]}function jPe(e){return qee(e)&&LPe[e]}function bA(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Wee={escape:(e,t,n)=>bA(e,t,n),expr:(e,t)=>bA(`(row,data,op)=>${e}`,JE,t),expr2:(e,t)=>bA(`(row0,data0,row,data)=>${e}`,JE,t),join:(e,t)=>bA(`(row1,data1,row2,data2)=>${e}`,JE,t),param:(e,t)=>bA(e,JE,t)},oDt={"==":1,"!=":1,"===":1,"!==":1};function UPe(e,t,n=0,r,i){if(e.type=bN,e.name=t,e.table=n,i&&r&&fs(r.keyFor)){const s=oDt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===H2&&aDt(i,e,s,r.keyFor(s.value))}return e}function aDt(e,t,n,r){return r<0?(e.type=H2,e.value=!1,e.raw="false"):(t.type=QRt,n.value=r,n.raw=r+""),!0}function v8(e){return Zr(e)?e:Vee(e)?e.entries():e?Object.entries(e):[]}const zPe="row_object";function VPe(e,t){e.type=KRt;const n=e.properties=[];for(const r of v8(t)){const[i,s]=Zr(r)?r:[r,r];n.push({type:PPe,key:{type:H2,raw:fm(s)},value:UPe({computed:!0},i)})}return e}function HPe(e){return $M(VPe({},e))}function qPe(e){return Wee.expr(HPe(e))}const uDt=new TextDecoder("utf-8"),xG=e=>uDt.decode(e),lDt=new TextEncoder,Gee=e=>lDt.encode(e),cDt=e=>typeof e=="boolean",Bl=e=>typeof e=="function",Uv=e=>e!=null&&Object(e)===e,b8=e=>Uv(e)&&Bl(e.then),Yee=e=>Uv(e)&&Bl(e[Symbol.iterator]),x8=e=>Uv(e)&&Bl(e[Symbol.asyncIterator]),fDt=e=>Uv(e)&&"done"in e&&"value"in e,WPe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,dDt=e=>Uv(e)&&Bl(e.abort)&&Bl(e.getWriter)&&!WPe(e),hDt=e=>Uv(e)&&Bl(e.end)&&Bl(e.write)&&cDt(e.writable)&&!WPe(e),pDt=e=>Uv(e)&&Bl(e.clear)&&Bl(e.bytes)&&Bl(e.position)&&Bl(e.setPosition)&&Bl(e.capacity)&&Bl(e.getBufferIdentifier)&&Bl(e.createLong),Kee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function mDt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function LM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function dm(e,t){const n=mDt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?LM(o,s,a):o=s;break}LM(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function na(e,t){let n=fDt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Gee(n)),n instanceof ArrayBuffer?new e(n):n instanceof Kee?new e(n):pDt(n)?na(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const xA=e=>na(Int32Array,e),Ti=e=>na(Uint8Array,e),_G=e=>(e.next(),e);function*gDt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Kee?n(t):Yee(t)?t:n(t);return yield*_G(function*(i){let s=null;do s=i.next(yield na(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const yDt=e=>gDt(Uint8Array,e);function GPe(e,t){return cx(this,arguments,function*(){if(b8(t))return yield Or(yield Or(yield*x7(XI(GPe(e,yield Or(t))))));const r=function(o){return cx(this,arguments,function*(){yield yield Or(yield Or(o))})},i=function(o){return cx(this,arguments,function*(){yield Or(yield*x7(XI(_G(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Kee?r(t):Yee(t)?i(t):x8(t)?t:r(t);return yield Or(yield*x7(XI(_G(function(o){return cx(this,arguments,function*(){let a=null;do a=yield Or(o.next(yield yield Or(na(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Or(new e)})}const vDt=e=>GPe(Uint8Array,e);function YPe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function bDt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const sye={fromIterable(e){return yO(xDt(e))},fromAsyncIterable(e){return yO(_Dt(e))},fromDOMStream(e){return yO(wDt(e))},fromNodeStream(e){return yO(SDt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},yO=e=>(e.next(),e);function*xDt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?dm(r,o)[0]:([i,r,a]=dm(r,o),i)}({cmd:s,size:o}=yield null);const l=yDt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function _Dt(e){return cx(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?dm(i,a)[0]:([s,i,u]=dm(i,a),s)}({cmd:o,size:a}=yield yield Or(null));const c=vDt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Or(c.next()):yield Or(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Or(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Or(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Or(c.return(new Uint8Array(0))))}return yield Or(null)})}function wDt(e){return cx(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?dm(i,a)[0]:([s,i,u]=dm(i,a),s)}({cmd:o,size:a}=yield yield Or(null));const c=new EDt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Or(c.read()):yield Or(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Ti(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Or(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Or(c.cancel(f)))}finally{r===!1?yield Or(c.cancel()):e.locked&&c.releaseLock()}return yield Or(null)})}class EDt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return T0(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return T0(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Ti(n)),n})}}const Pz=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function SDt(e){return cx(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?dm(l,a)[0]:([c,l,u]=dm(l,a),c)}if({cmd:o,size:a}=yield yield Or(null),e.isTTY)return yield yield Or(new Uint8Array(0)),yield Or(null);try{n[0]=Pz(e,"end"),n[1]=Pz(e,"error");do{if(n[2]=Pz(e,"readable"),[r,s]=yield Or(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Ti(e.read(a-u)),c.byteLength<a-u&&(c=Ti(e.read()))):c=Ti(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Or(f()));while(a<u)}while(!i)}finally{yield Or(d(n,r==="error"?s:null))}return yield Or(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var sl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(sl||(sl={}));var pc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(pc||(pc={}));var Fa;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Fa||(Fa={}));var hm;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(hm||(hm={}));var yn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(yn||(yn={}));var pm;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(pm||(pm={}));var sa;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(sa||(sa={}));var de;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(de||(de={}));var g0;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(g0||(g0={}));const TDt=void 0;function o_(e){if(e===null)return"null";if(e===TDt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>o_(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const CDt=Symbol.for("isArrowBigNum");function Gh(e,...t){return t.length===0?Object.setPrototypeOf(na(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Gh.prototype[CDt]=!0;Gh.prototype.toJSON=function(){return`"${FR(this)}"`};Gh.prototype.valueOf=function(){return KPe(this)};Gh.prototype.toString=function(){return FR(this)};Gh.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return KPe(this);case"string":return FR(this);case"default":return ADt(this)}return FR(this)};function CS(...e){return Gh.apply(this,e)}function AS(...e){return Gh.apply(this,e)}function LR(...e){return Gh.apply(this,e)}Object.setPrototypeOf(CS.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(AS.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(LR.prototype,Object.create(Uint32Array.prototype));Object.assign(CS.prototype,Gh.prototype,{constructor:CS,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(AS.prototype,Gh.prototype,{constructor:AS,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(LR.prototype,Gh.prototype,{constructor:LR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function KPe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const FR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Oz(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Oz(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${Oz(t)}`},ADt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:FR(e);function Oz(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Xee{static new(t,n){switch(n){case!0:return new CS(t);case!1:return new AS(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new CS(t)}return t.byteLength===16?new LR(t):new AS(t)}static signed(t){return new CS(t)}static unsigned(t){return new AS(t)}static decimal(t){return new LR(t)}constructor(t,n){return Xee.new(t,n)}}function $h(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var XPe,QPe,JPe,ZPe,e3e,t3e,n3e,r3e,i3e,s3e,o3e,a3e,u3e,l3e,c3e,f3e,d3e,h3e,p3e,m3e;let nr=class wG{static isNull(t){return(t==null?void 0:t.typeId)===de.Null}static isInt(t){return(t==null?void 0:t.typeId)===de.Int}static isFloat(t){return(t==null?void 0:t.typeId)===de.Float}static isBinary(t){return(t==null?void 0:t.typeId)===de.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===de.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===de.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===de.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===de.Date}static isTime(t){return(t==null?void 0:t.typeId)===de.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===de.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===de.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===de.Duration}static isList(t){return(t==null?void 0:t.typeId)===de.List}static isStruct(t){return(t==null?void 0:t.typeId)===de.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===de.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===de.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===de.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===de.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===de.Dictionary}static isDenseUnion(t){return wG.isUnion(t)&&t.mode===pc.Dense}static isSparseUnion(t){return wG.isUnion(t)&&t.mode===pc.Sparse}get typeId(){return de.NONE}};XPe=Symbol.toStringTag;nr[XPe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(nr.prototype);let Eg=class extends nr{toString(){return"Null"}get typeId(){return de.Null}};QPe=Symbol.toStringTag;Eg[QPe]=(e=>e[Symbol.toStringTag]="Null")(Eg.prototype);class yl extends nr{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return de.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}JPe=Symbol.toStringTag;yl[JPe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(yl.prototype);class Qee extends yl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Jee extends yl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Y1 extends yl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Zee extends yl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ete extends yl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class tte extends yl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class nte extends yl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class rte extends yl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Qee.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Jee.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Y1.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Zee.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ete.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(tte.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(nte.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(rte.prototype,"ArrayType",{value:BigUint64Array});class K1 extends nr{constructor(t){super(),this.precision=t}get typeId(){return de.Float}get ArrayType(){switch(this.precision){case Fa.HALF:return Uint16Array;case Fa.SINGLE:return Float32Array;case Fa.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ZPe=Symbol.toStringTag;K1[ZPe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(K1.prototype);class g3e extends K1{constructor(){super(Fa.HALF)}}class ite extends K1{constructor(){super(Fa.SINGLE)}}class ste extends K1{constructor(){super(Fa.DOUBLE)}}Object.defineProperty(g3e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ite.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(ste.prototype,"ArrayType",{value:Float64Array});let BR=class extends nr{constructor(){super()}get typeId(){return de.Binary}toString(){return"Binary"}};e3e=Symbol.toStringTag;BR[e3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(BR.prototype);let ET=class extends nr{constructor(){super()}get typeId(){return de.Utf8}toString(){return"Utf8"}};t3e=Symbol.toStringTag;ET[t3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(ET.prototype);let jR=class extends nr{constructor(){super()}get typeId(){return de.Bool}toString(){return"Bool"}};n3e=Symbol.toStringTag;jR[n3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(jR.prototype);let FM=class extends nr{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return de.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};r3e=Symbol.toStringTag;FM[r3e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(FM.prototype);class ST extends nr{constructor(t){super(),this.unit=t}get typeId(){return de.Date}toString(){return`Date${(this.unit+1)*32}<${hm[this.unit]}>`}}i3e=Symbol.toStringTag;ST[i3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(ST.prototype);class IDt extends ST{constructor(){super(hm.DAY)}}class kDt extends ST{constructor(){super(hm.MILLISECOND)}}class Sg extends nr{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return de.Time}toString(){return`Time${this.bitWidth}<${yn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}s3e=Symbol.toStringTag;Sg[s3e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Sg.prototype);class RDt extends Sg{constructor(){super(yn.SECOND,32)}}class DDt extends Sg{constructor(){super(yn.MILLISECOND,32)}}class NDt extends Sg{constructor(){super(yn.MICROSECOND,64)}}class PDt extends Sg{constructor(){super(yn.NANOSECOND,64)}}class BM extends nr{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return de.Timestamp}toString(){return`Timestamp<${yn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}o3e=Symbol.toStringTag;BM[o3e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(BM.prototype);class TT extends nr{constructor(t){super(),this.unit=t}get typeId(){return de.Interval}toString(){return`Interval<${pm[this.unit]}>`}}a3e=Symbol.toStringTag;TT[a3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(TT.prototype);class ODt extends TT{constructor(){super(pm.DAY_TIME)}}class $Dt extends TT{constructor(){super(pm.YEAR_MONTH)}}let jM=class extends nr{constructor(t){super(),this.unit=t}get typeId(){return de.Duration}toString(){return`Duration<${yn[this.unit]}>`}};u3e=Symbol.toStringTag;jM[u3e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(jM.prototype);let CT=class extends nr{constructor(t){super(),this.children=[t]}get typeId(){return de.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};l3e=Symbol.toStringTag;CT[l3e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(CT.prototype);class vu extends nr{constructor(t){super(),this.children=t}get typeId(){return de.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}c3e=Symbol.toStringTag;vu[c3e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(vu.prototype);class UR extends nr{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return de.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}f3e=Symbol.toStringTag;UR[f3e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(UR.prototype);let UM=class extends nr{constructor(t){super(),this.byteWidth=t}get typeId(){return de.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};d3e=Symbol.toStringTag;UM[d3e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(UM.prototype);let AT=class extends nr{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return de.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};h3e=Symbol.toStringTag;AT[h3e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(AT.prototype);class zR extends nr{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return de.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}p3e=Symbol.toStringTag;zR[p3e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(zR.prototype);const MDt=(e=>()=>++e)(-1);class X1 extends nr{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?MDt():$h(r)}get typeId(){return de.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}m3e=Symbol.toStringTag;X1[m3e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(X1.prototype);function bp(e){const t=e;switch(e.typeId){case de.Decimal:return e.bitWidth/32;case de.Timestamp:return 2;case de.Date:return 1+t.unit;case de.Interval:return 1+t.unit;case de.FixedSizeList:return t.listSize;case de.FixedSizeBinary:return t.byteWidth;default:return 1}}class rr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return LDt(this,t,n)}getVisitFnByTypeId(t,n=!0){return TE(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function LDt(e,t,n=!0){return typeof t=="number"?TE(e,t,n):typeof t=="string"&&t in de?TE(e,de[t],n):t&&t instanceof nr?TE(e,oye(t),n):t!=null&&t.type&&t.type instanceof nr?TE(e,oye(t.type),n):TE(e,de.NONE,n)}function TE(e,t,n=!0){let r=null;switch(t){case de.Null:r=e.visitNull;break;case de.Bool:r=e.visitBool;break;case de.Int:r=e.visitInt;break;case de.Int8:r=e.visitInt8||e.visitInt;break;case de.Int16:r=e.visitInt16||e.visitInt;break;case de.Int32:r=e.visitInt32||e.visitInt;break;case de.Int64:r=e.visitInt64||e.visitInt;break;case de.Uint8:r=e.visitUint8||e.visitInt;break;case de.Uint16:r=e.visitUint16||e.visitInt;break;case de.Uint32:r=e.visitUint32||e.visitInt;break;case de.Uint64:r=e.visitUint64||e.visitInt;break;case de.Float:r=e.visitFloat;break;case de.Float16:r=e.visitFloat16||e.visitFloat;break;case de.Float32:r=e.visitFloat32||e.visitFloat;break;case de.Float64:r=e.visitFloat64||e.visitFloat;break;case de.Utf8:r=e.visitUtf8;break;case de.Binary:r=e.visitBinary;break;case de.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case de.Date:r=e.visitDate;break;case de.DateDay:r=e.visitDateDay||e.visitDate;break;case de.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case de.Timestamp:r=e.visitTimestamp;break;case de.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case de.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case de.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case de.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case de.Time:r=e.visitTime;break;case de.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case de.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case de.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case de.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case de.Decimal:r=e.visitDecimal;break;case de.List:r=e.visitList;break;case de.Struct:r=e.visitStruct;break;case de.Union:r=e.visitUnion;break;case de.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case de.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case de.Dictionary:r=e.visitDictionary;break;case de.Interval:r=e.visitInterval;break;case de.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case de.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case de.Duration:r=e.visitDuration;break;case de.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case de.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case de.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case de.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case de.FixedSizeList:r=e.visitFixedSizeList;break;case de.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${de[t]}'`)}function oye(e){switch(e.typeId){case de.Null:return de.Null;case de.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?de.Int8:de.Uint8;case 16:return n?de.Int16:de.Uint16;case 32:return n?de.Int32:de.Uint32;case 64:return n?de.Int64:de.Uint64}return de.Int}case de.Float:switch(e.precision){case Fa.HALF:return de.Float16;case Fa.SINGLE:return de.Float32;case Fa.DOUBLE:return de.Float64}return de.Float;case de.Binary:return de.Binary;case de.Utf8:return de.Utf8;case de.Bool:return de.Bool;case de.Decimal:return de.Decimal;case de.Time:switch(e.unit){case yn.SECOND:return de.TimeSecond;case yn.MILLISECOND:return de.TimeMillisecond;case yn.MICROSECOND:return de.TimeMicrosecond;case yn.NANOSECOND:return de.TimeNanosecond}return de.Time;case de.Timestamp:switch(e.unit){case yn.SECOND:return de.TimestampSecond;case yn.MILLISECOND:return de.TimestampMillisecond;case yn.MICROSECOND:return de.TimestampMicrosecond;case yn.NANOSECOND:return de.TimestampNanosecond}return de.Timestamp;case de.Date:switch(e.unit){case hm.DAY:return de.DateDay;case hm.MILLISECOND:return de.DateMillisecond}return de.Date;case de.Interval:switch(e.unit){case pm.DAY_TIME:return de.IntervalDayTime;case pm.YEAR_MONTH:return de.IntervalYearMonth}return de.Interval;case de.Duration:switch(e.unit){case yn.SECOND:return de.DurationSecond;case yn.MILLISECOND:return de.DurationMillisecond;case yn.MICROSECOND:return de.DurationMicrosecond;case yn.NANOSECOND:return de.DurationNanosecond}return de.Duration;case de.Map:return de.Map;case de.List:return de.List;case de.Struct:return de.Struct;case de.Union:switch(e.mode){case pc.Dense:return de.DenseUnion;case pc.Sparse:return de.SparseUnion}return de.Union;case de.FixedSizeBinary:return de.FixedSizeBinary;case de.FixedSizeList:return de.FixedSizeList;case de.Dictionary:return de.Dictionary}throw new Error(`Unrecognized type '${de[e.typeId]}'`)}rr.prototype.visitInt8=null;rr.prototype.visitInt16=null;rr.prototype.visitInt32=null;rr.prototype.visitInt64=null;rr.prototype.visitUint8=null;rr.prototype.visitUint16=null;rr.prototype.visitUint32=null;rr.prototype.visitUint64=null;rr.prototype.visitFloat16=null;rr.prototype.visitFloat32=null;rr.prototype.visitFloat64=null;rr.prototype.visitDateDay=null;rr.prototype.visitDateMillisecond=null;rr.prototype.visitTimestampSecond=null;rr.prototype.visitTimestampMillisecond=null;rr.prototype.visitTimestampMicrosecond=null;rr.prototype.visitTimestampNanosecond=null;rr.prototype.visitTimeSecond=null;rr.prototype.visitTimeMillisecond=null;rr.prototype.visitTimeMicrosecond=null;rr.prototype.visitTimeNanosecond=null;rr.prototype.visitDenseUnion=null;rr.prototype.visitSparseUnion=null;rr.prototype.visitIntervalDayTime=null;rr.prototype.visitIntervalYearMonth=null;rr.prototype.visitDuration=null;rr.prototype.visitDurationSecond=null;rr.prototype.visitDurationMillisecond=null;rr.prototype.visitDurationMicrosecond=null;rr.prototype.visitDurationNanosecond=null;const y3e=new Float64Array(1),sE=new Uint32Array(y3e.buffer);function v3e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function b3e(e){if(e!==e)return 32256;y3e[0]=e;const t=(sE[1]&2147483648)>>16&65535;let n=sE[1]&2146435072,r=0;return n>=1089470464?sE[0]>0?n=31744:(n=(n&2080374784)>>16,r=(sE[1]&1048575)>>10):n<=1056964608?(r=1048576+(sE[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(sE[1]&1048575)+512>>10),t|n|r&65535}class wn extends rr{}function kn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const FDt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},ote=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},BDt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},jDt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},x3e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},UDt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Hg=({values:e},t,n)=>{e[t]=n},ate=({values:e},t,n)=>{e[t]=n},_3e=({values:e},t,n)=>{e[t]=b3e(n)},zDt=(e,t,n)=>{switch(e.type.precision){case Fa.HALF:return _3e(e,t,n);case Fa.SINGLE:case Fa.DOUBLE:return ate(e,t,n)}},ute=({values:e},t,n)=>{FDt(e,t,n.valueOf())},lte=({values:e},t,n)=>{ote(e,t*2,n.valueOf())},w3e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},VDt=({values:e,valueOffsets:t},n,r)=>x3e(e,t,n,r),HDt=({values:e,valueOffsets:t},n,r)=>{x3e(e,t,n,Gee(r))},E3e=(e,t,n)=>{e.type.unit===hm.DAY?ute(e,t,n):lte(e,t,n)},cte=({values:e},t,n)=>ote(e,t*2,n/1e3),fte=({values:e},t,n)=>ote(e,t*2,n),dte=({values:e},t,n)=>BDt(e,t*2,n),hte=({values:e},t,n)=>jDt(e,t*2,n),S3e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return cte(e,t,n);case yn.MILLISECOND:return fte(e,t,n);case yn.MICROSECOND:return dte(e,t,n);case yn.NANOSECOND:return hte(e,t,n)}},pte=({values:e},t,n)=>{e[t]=n},mte=({values:e},t,n)=>{e[t]=n},gte=({values:e},t,n)=>{e[t]=n},yte=({values:e},t,n)=>{e[t]=n},T3e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return pte(e,t,n);case yn.MILLISECOND:return mte(e,t,n);case yn.MICROSECOND:return gte(e,t,n);case yn.NANOSECOND:return yte(e,t,n)}},C3e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},qDt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ud.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},WDt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ud.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},GDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),YDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),KDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),XDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),QDt=(e,t,n)=>{const r=e.type.children.map(s=>ud.getVisitFn(s.type)),i=n instanceof Map?KDt(t,n):n instanceof ei?YDt(t,n):Array.isArray(n)?GDt(t,n):XDt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},JDt=(e,t,n)=>{e.type.mode===pc.Dense?A3e(e,t,n):I3e(e,t,n)},A3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ud.visit(i,e.valueOffsets[t],n)},I3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ud.visit(i,t,n)},ZDt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},k3e=(e,t,n)=>{e.type.unit===pm.DAY_TIME?vte(e,t,n):bte(e,t,n)},vte=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},bte=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},xte=({values:e},t,n)=>{e[t]=n},_te=({values:e},t,n)=>{e[t]=n},wte=({values:e},t,n)=>{e[t]=n},Ete=({values:e},t,n)=>{e[t]=n},R3e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return xte(e,t,n);case yn.MILLISECOND:return _te(e,t,n);case yn.MICROSECOND:return wte(e,t,n);case yn.NANOSECOND:return Ete(e,t,n)}},eNt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ud.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};wn.prototype.visitBool=kn(UDt);wn.prototype.visitInt=kn(Hg);wn.prototype.visitInt8=kn(Hg);wn.prototype.visitInt16=kn(Hg);wn.prototype.visitInt32=kn(Hg);wn.prototype.visitInt64=kn(Hg);wn.prototype.visitUint8=kn(Hg);wn.prototype.visitUint16=kn(Hg);wn.prototype.visitUint32=kn(Hg);wn.prototype.visitUint64=kn(Hg);wn.prototype.visitFloat=kn(zDt);wn.prototype.visitFloat16=kn(_3e);wn.prototype.visitFloat32=kn(ate);wn.prototype.visitFloat64=kn(ate);wn.prototype.visitUtf8=kn(HDt);wn.prototype.visitBinary=kn(VDt);wn.prototype.visitFixedSizeBinary=kn(w3e);wn.prototype.visitDate=kn(E3e);wn.prototype.visitDateDay=kn(ute);wn.prototype.visitDateMillisecond=kn(lte);wn.prototype.visitTimestamp=kn(S3e);wn.prototype.visitTimestampSecond=kn(cte);wn.prototype.visitTimestampMillisecond=kn(fte);wn.prototype.visitTimestampMicrosecond=kn(dte);wn.prototype.visitTimestampNanosecond=kn(hte);wn.prototype.visitTime=kn(T3e);wn.prototype.visitTimeSecond=kn(pte);wn.prototype.visitTimeMillisecond=kn(mte);wn.prototype.visitTimeMicrosecond=kn(gte);wn.prototype.visitTimeNanosecond=kn(yte);wn.prototype.visitDecimal=kn(C3e);wn.prototype.visitList=kn(qDt);wn.prototype.visitStruct=kn(QDt);wn.prototype.visitUnion=kn(JDt);wn.prototype.visitDenseUnion=kn(A3e);wn.prototype.visitSparseUnion=kn(I3e);wn.prototype.visitDictionary=kn(ZDt);wn.prototype.visitInterval=kn(k3e);wn.prototype.visitIntervalDayTime=kn(vte);wn.prototype.visitIntervalYearMonth=kn(bte);wn.prototype.visitDuration=kn(R3e);wn.prototype.visitDurationSecond=kn(xte);wn.prototype.visitDurationMillisecond=kn(_te);wn.prototype.visitDurationMicrosecond=kn(wte);wn.prototype.visitDurationNanosecond=kn(Ete);wn.prototype.visitFixedSizeList=kn(eNt);wn.prototype.visitMap=kn(WDt);const ud=new wn,Jd=Symbol.for("parent"),IS=Symbol.for("rowIndex");class Ste{constructor(t,n){return this[Jd]=t,this[IS]=n,new Proxy(this,new nNt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[IS],n=this[Jd],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=mc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${o_(t)}: ${o_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new tNt(this[Jd],this[IS])}}class tNt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,mc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Ste.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Jd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[IS]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class nNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Jd].type.children.map(n=>n.name)}has(t,n){return t[Jd].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Jd].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Jd].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=mc.visit(t[Jd].children[r],t[IS]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Jd].type.children.findIndex(s=>s.name===n);return i!==-1?(ud.visit(t[Jd].children[i],t[IS],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class vn extends rr{}function En(e){return(t,n)=>t.getValid(n)?e(t,n):null}const rNt=(e,t)=>864e5*e[t],Tte=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),iNt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,sNt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,D3e=e=>new Date(e),oNt=(e,t)=>D3e(rNt(e,t)),aNt=(e,t)=>D3e(Tte(e,t)),uNt=(e,t)=>null,N3e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},lNt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},P3e=({values:e},t)=>oNt(e,t),O3e=({values:e},t)=>aNt(e,t*2),zv=({stride:e,values:t},n)=>t[e*n],cNt=({stride:e,values:t},n)=>v3e(t[e*n]),$3e=({values:e},t)=>e[t],fNt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),dNt=({values:e,valueOffsets:t},n)=>N3e(e,t,n),hNt=({values:e,valueOffsets:t},n)=>{const r=N3e(e,t,n);return r!==null?xG(r):null},pNt=({values:e},t)=>e[t],mNt=({type:e,values:t},n)=>e.precision!==Fa.HALF?t[n]:v3e(t[n]),gNt=(e,t)=>e.type.unit===hm.DAY?P3e(e,t):O3e(e,t),M3e=({values:e},t)=>1e3*Tte(e,t*2),L3e=({values:e},t)=>Tte(e,t*2),F3e=({values:e},t)=>iNt(e,t*2),B3e=({values:e},t)=>sNt(e,t*2),yNt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return M3e(e,t);case yn.MILLISECOND:return L3e(e,t);case yn.MICROSECOND:return F3e(e,t);case yn.NANOSECOND:return B3e(e,t)}},j3e=({values:e},t)=>e[t],U3e=({values:e},t)=>e[t],z3e=({values:e},t)=>e[t],V3e=({values:e},t)=>e[t],vNt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return j3e(e,t);case yn.MILLISECOND:return U3e(e,t);case yn.MICROSECOND:return z3e(e,t);case yn.NANOSECOND:return V3e(e,t)}},bNt=({values:e,stride:t},n)=>Xee.decimal(e.subarray(t*n,t*(n+1))),xNt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new ei([u])},_Nt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new _8(o.slice(i,s-i))},wNt=(e,t)=>new Ste(e,t),ENt=(e,t)=>e.type.mode===pc.Dense?H3e(e,t):q3e(e,t),H3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return mc.visit(r,e.valueOffsets[t])},q3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return mc.visit(r,t)},SNt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},TNt=(e,t)=>e.type.unit===pm.DAY_TIME?W3e(e,t):G3e(e,t),W3e=({values:e},t)=>e.subarray(2*t,2*(t+1)),G3e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},Y3e=({values:e},t)=>e[t],K3e=({values:e},t)=>e[t],X3e=({values:e},t)=>e[t],Q3e=({values:e},t)=>e[t],CNt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return Y3e(e,t);case yn.MILLISECOND:return K3e(e,t);case yn.MICROSECOND:return X3e(e,t);case yn.NANOSECOND:return Q3e(e,t)}},ANt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new ei([s])};vn.prototype.visitNull=En(uNt);vn.prototype.visitBool=En(lNt);vn.prototype.visitInt=En(pNt);vn.prototype.visitInt8=En(zv);vn.prototype.visitInt16=En(zv);vn.prototype.visitInt32=En(zv);vn.prototype.visitInt64=En($3e);vn.prototype.visitUint8=En(zv);vn.prototype.visitUint16=En(zv);vn.prototype.visitUint32=En(zv);vn.prototype.visitUint64=En($3e);vn.prototype.visitFloat=En(mNt);vn.prototype.visitFloat16=En(cNt);vn.prototype.visitFloat32=En(zv);vn.prototype.visitFloat64=En(zv);vn.prototype.visitUtf8=En(hNt);vn.prototype.visitBinary=En(dNt);vn.prototype.visitFixedSizeBinary=En(fNt);vn.prototype.visitDate=En(gNt);vn.prototype.visitDateDay=En(P3e);vn.prototype.visitDateMillisecond=En(O3e);vn.prototype.visitTimestamp=En(yNt);vn.prototype.visitTimestampSecond=En(M3e);vn.prototype.visitTimestampMillisecond=En(L3e);vn.prototype.visitTimestampMicrosecond=En(F3e);vn.prototype.visitTimestampNanosecond=En(B3e);vn.prototype.visitTime=En(vNt);vn.prototype.visitTimeSecond=En(j3e);vn.prototype.visitTimeMillisecond=En(U3e);vn.prototype.visitTimeMicrosecond=En(z3e);vn.prototype.visitTimeNanosecond=En(V3e);vn.prototype.visitDecimal=En(bNt);vn.prototype.visitList=En(xNt);vn.prototype.visitStruct=En(wNt);vn.prototype.visitUnion=En(ENt);vn.prototype.visitDenseUnion=En(H3e);vn.prototype.visitSparseUnion=En(q3e);vn.prototype.visitDictionary=En(SNt);vn.prototype.visitInterval=En(TNt);vn.prototype.visitIntervalDayTime=En(W3e);vn.prototype.visitIntervalYearMonth=En(G3e);vn.prototype.visitDuration=En(CNt);vn.prototype.visitDurationSecond=En(Y3e);vn.prototype.visitDurationMillisecond=En(K3e);vn.prototype.visitDurationMicrosecond=En(X3e);vn.prototype.visitDurationNanosecond=En(Q3e);vn.prototype.visitFixedSizeList=En(ANt);vn.prototype.visitMap=En(_Nt);const mc=new vn,lh=Symbol.for("keys"),kS=Symbol.for("vals");class _8{constructor(t){return this[lh]=new ei([t.children[0]]).memoize(),this[kS]=t.children[1],new Proxy(this,new kNt)}[Symbol.iterator](){return new INt(this[lh],this[kS])}get size(){return this[lh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[lh],n=this[kS],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=mc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${o_(t)}: ${o_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class INt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),mc.visit(this.vals,t)]})}}class kNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[lh].toArray().map(String)}has(t,n){return t[lh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[lh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[lh].indexOf(n);if(r!==-1){const i=mc.visit(Reflect.get(t,kS),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[lh].indexOf(n);return i!==-1?(ud.visit(Reflect.get(t,kS),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(_8.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[lh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kS]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let aye;function J3e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(aye=s,s=o,o=aye),o>i&&(o=i),r?r(e,s,o):[s,o]}const uye=e=>e!==e;function q2(e){if(typeof e!=="object"||e===null)return uye(e)?uye:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?bDt(e,n):!1:e instanceof Map?DNt(e):Array.isArray(e)?RNt(e):e instanceof ei?NNt(e):PNt(e,!0)}function RNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=q2(e[n]);return w8(t)}function DNt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=q2(r);return w8(n)}function NNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=q2(e.get(n));return w8(t)}function PNt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=q2(e[n[i]]);return w8(r,n)}function w8(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return ONt(e,n);case Map:return lye(e,n,n.keys());case _8:case Ste:case Object:case void 0:return lye(e,n,t||Object.keys(n))}return n instanceof ei?$Nt(e,n):!1}}function ONt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function $Nt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function lye(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function Z3e(e,t,n,r){return(n&1<<r)!==0}function MNt(e,t,n,r){return(n&1<<r)>>r}function zM(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):eOe(new Cte(n,e,t,null,Z3e)).subarray(0,r)),i}return n}function eOe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Cte{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function EG(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new Cte(e,t,n-t,e,MNt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return EG(e,t,i)+EG(e,r,n)+LNt(e,i>>3,r-i>>3)}function LNt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=$z(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=$z(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=$z(s.getUint8(i)),i+=1;return r}function $z(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const FNt=-1;class Si{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return nr.isSparseUnion(t)?this.children.some(n=>n.nullable):nr.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(nr.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=FNt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-EG(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Si?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=bp(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(nr.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===pc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(nr.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===pc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(zM(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Si(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===de.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(zM(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[g0.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[g0.TYPE])&&(o[g0.TYPE]=s.subarray(t,t+n)),(s=o[g0.OFFSET])&&(o[g0.OFFSET]=s.subarray(t,t+n+1))||(s=o[g0.DATA])&&(o[g0.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Si.prototype.children=Object.freeze([]);class pk extends rr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Si(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.data),s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.data),s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ti(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=na(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(nr.isSparseUnion(n))return new Si(n,r,o,a,[void 0,void 0,void 0,s],i);const u=xA(t.valueOffsets);return new Si(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.indices.ArrayType,t.data),{["dictionary"]:o=new ei([new pk().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=na(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new pk().visit({type:n.valueType})}=t,s=Ti(t.nullBitmap),{["length"]:o=i.length/bp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new pk().visit({type:n.childType})}=t,s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,void 0,s],[i])}}const BNt=new pk;function pu(e){return BNt.visit(e)}class cye{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function tOe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function nOe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function rOe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Ate(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function Ite(e,t){return e.getValid(t)}function RS(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Ate(r,this._offsets,n,t)}}function iOe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Ate(s,this._offsets,r,n);return t=void 0,o}}function sOe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Ate(s,this._offsets,i,n);return t=void 0,o}}class bn extends rr{}function jNt(e,t){return t===null&&e.length>0?0:-1}function UNt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new Cte(n,e.offset+(t||0),e.length,n,Z3e)){if(!i)return r;++r}return-1}function Ln(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case de.Union:break;case de.Dictionary:break;default:return UNt(e,n)}const r=mc.getVisitFn(e),i=q2(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function oOe(e,t,n){const r=mc.getVisitFn(e),i=q2(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}bn.prototype.visitNull=jNt;bn.prototype.visitBool=Ln;bn.prototype.visitInt=Ln;bn.prototype.visitInt8=Ln;bn.prototype.visitInt16=Ln;bn.prototype.visitInt32=Ln;bn.prototype.visitInt64=Ln;bn.prototype.visitUint8=Ln;bn.prototype.visitUint16=Ln;bn.prototype.visitUint32=Ln;bn.prototype.visitUint64=Ln;bn.prototype.visitFloat=Ln;bn.prototype.visitFloat16=Ln;bn.prototype.visitFloat32=Ln;bn.prototype.visitFloat64=Ln;bn.prototype.visitUtf8=Ln;bn.prototype.visitBinary=Ln;bn.prototype.visitFixedSizeBinary=Ln;bn.prototype.visitDate=Ln;bn.prototype.visitDateDay=Ln;bn.prototype.visitDateMillisecond=Ln;bn.prototype.visitTimestamp=Ln;bn.prototype.visitTimestampSecond=Ln;bn.prototype.visitTimestampMillisecond=Ln;bn.prototype.visitTimestampMicrosecond=Ln;bn.prototype.visitTimestampNanosecond=Ln;bn.prototype.visitTime=Ln;bn.prototype.visitTimeSecond=Ln;bn.prototype.visitTimeMillisecond=Ln;bn.prototype.visitTimeMicrosecond=Ln;bn.prototype.visitTimeNanosecond=Ln;bn.prototype.visitDecimal=Ln;bn.prototype.visitList=Ln;bn.prototype.visitStruct=Ln;bn.prototype.visitUnion=Ln;bn.prototype.visitDenseUnion=oOe;bn.prototype.visitSparseUnion=oOe;bn.prototype.visitDictionary=Ln;bn.prototype.visitInterval=Ln;bn.prototype.visitIntervalDayTime=Ln;bn.prototype.visitIntervalYearMonth=Ln;bn.prototype.visitDuration=Ln;bn.prototype.visitDurationSecond=Ln;bn.prototype.visitDurationMillisecond=Ln;bn.prototype.visitDurationMicrosecond=Ln;bn.prototype.visitDurationNanosecond=Ln;bn.prototype.visitFixedSizeList=Ln;bn.prototype.visitMap=Ln;const VM=new bn;class xn extends rr{}function Sn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===de.Timestamp||t instanceof yl&&t.bitWidth!==64||t instanceof Sg&&t.bitWidth!==64||t instanceof K1&&t.precision!==Fa.HALF))return new cye(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new cye(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new zNt(o)})}class zNt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}xn.prototype.visitNull=Sn;xn.prototype.visitBool=Sn;xn.prototype.visitInt=Sn;xn.prototype.visitInt8=Sn;xn.prototype.visitInt16=Sn;xn.prototype.visitInt32=Sn;xn.prototype.visitInt64=Sn;xn.prototype.visitUint8=Sn;xn.prototype.visitUint16=Sn;xn.prototype.visitUint32=Sn;xn.prototype.visitUint64=Sn;xn.prototype.visitFloat=Sn;xn.prototype.visitFloat16=Sn;xn.prototype.visitFloat32=Sn;xn.prototype.visitFloat64=Sn;xn.prototype.visitUtf8=Sn;xn.prototype.visitBinary=Sn;xn.prototype.visitFixedSizeBinary=Sn;xn.prototype.visitDate=Sn;xn.prototype.visitDateDay=Sn;xn.prototype.visitDateMillisecond=Sn;xn.prototype.visitTimestamp=Sn;xn.prototype.visitTimestampSecond=Sn;xn.prototype.visitTimestampMillisecond=Sn;xn.prototype.visitTimestampMicrosecond=Sn;xn.prototype.visitTimestampNanosecond=Sn;xn.prototype.visitTime=Sn;xn.prototype.visitTimeSecond=Sn;xn.prototype.visitTimeMillisecond=Sn;xn.prototype.visitTimeMicrosecond=Sn;xn.prototype.visitTimeNanosecond=Sn;xn.prototype.visitDecimal=Sn;xn.prototype.visitList=Sn;xn.prototype.visitStruct=Sn;xn.prototype.visitUnion=Sn;xn.prototype.visitDenseUnion=Sn;xn.prototype.visitSparseUnion=Sn;xn.prototype.visitDictionary=Sn;xn.prototype.visitInterval=Sn;xn.prototype.visitIntervalDayTime=Sn;xn.prototype.visitIntervalYearMonth=Sn;xn.prototype.visitDuration=Sn;xn.prototype.visitDurationSecond=Sn;xn.prototype.visitDurationMillisecond=Sn;xn.prototype.visitDurationMicrosecond=Sn;xn.prototype.visitDurationNanosecond=Sn;xn.prototype.visitFixedSizeList=Sn;xn.prototype.visitMap=Sn;const kte=new xn,VNt=(e,t)=>e+t;class Vv extends rr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===yn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+mm.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+mm.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const HNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),qNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),WNt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=mm.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},GNt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=mm.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},YNt=(e,t)=>e.type.mode===pc.Dense?aOe(e,t):uOe(e,t),aOe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+mm.visit(t[s],r[i])},uOe=({children:e},t)=>4+mm.visitMany(e,e.map(()=>t)).reduce(VNt,0);Vv.prototype.visitUtf8=HNt;Vv.prototype.visitBinary=qNt;Vv.prototype.visitList=WNt;Vv.prototype.visitFixedSizeList=GNt;Vv.prototype.visitUnion=YNt;Vv.prototype.visitDenseUnion=aOe;Vv.prototype.visitSparseUnion=uOe;const mm=new Vv;var lOe;const cOe={},fOe={};class ei{constructor(t){var n,r,i;const s=t[0]instanceof ei?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Si)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=cOe[o.typeId],f=s[0];this.isValid=d=>Ite(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,fOe[o.typeId]),this._offsets=nOe(s);break}this.data=s,this.type=o,this.stride=bp(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return tOe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${de[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return kte.visit(this)}concat(...t){return new ei(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ei(J3e(this,t,n,({data:r,_offsets:i},s,o)=>rOe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case de.Int:case de.Float:case de.Decimal:case de.Time:case de.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ei(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return nr.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(nr.isDictionary(this.type)){const t=new HM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ei(n)}return new HM(this)}unmemoize(){if(nr.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ei(n)}return this}}lOe=Symbol.toStringTag;ei[lOe]=(e=>{e.type=nr.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(de).map(n=>de[n]).filter(n=>typeof n=="number"&&n!==de.NONE);for(const n of t){const r=mc.getVisitFnByTypeId(n),i=ud.getVisitFnByTypeId(n),s=VM.getVisitFnByTypeId(n),o=mm.getVisitFnByTypeId(n);cOe[n]={get:r,set:i,indexOf:s,byteLength:o},fOe[n]=Object.create(e,{isValid:{value:RS(Ite)},get:{value:RS(mc.getVisitFnByTypeId(n))},set:{value:iOe(ud.getVisitFnByTypeId(n))},indexOf:{value:sOe(VM.getVisitFnByTypeId(n))},getByteLength:{value:RS(mm.getVisitFnByTypeId(n))}})}return"Vector"})(ei.prototype);class HM extends ei{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new HM(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ei(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function KNt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${XNt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function XNt(e){return typeof e!="bigint"?o_(e):`${o_(e)}n`}const Mz=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,QNt=(e,t=0)=>e.length>=t?e.subarray(0,t):LM(new e.constructor(t),e,0);class E8{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?Mz(r*1,this.BYTES_PER_ELEMENT):Mz(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Mz(t*this.stride,this.BYTES_PER_ELEMENT);const n=QNt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=LM(new this.ArrayType(t),this.buffer)}}E8.prototype.offset=0;class xN extends E8{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class dOe extends xN{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class hOe extends xN{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Ec=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=bp(t),this._nulls=new dOe,n&&n.length>0&&(this._isValid=KNt(n))}toVector(){return new ei([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),pu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Ec.prototype.length=1;Ec.prototype.stride=1;Ec.prototype.children=null;Ec.prototype.finished=!1;Ec.prototype.nullValues=null;Ec.prototype._isValid=()=>!0;class qg extends Ec{constructor(t){super(t),this._values=new xN(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class S8 extends Ec{constructor(t){super(t),this._pendingLength=0,this._offsets=new hOe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof _8?n[lh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class SG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const Lz=2,Ip=4,I0=4,ji=4,Py=new Int32Array(2),fye=new Float32Array(Py.buffer),dye=new Float64Array(Py.buffer),vO=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var TG;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(TG||(TG={}));let qM=class pOe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new pOe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Py[0]=this.readInt32(t),fye[0]}readFloat64(t){return Py[vO?0:1]=this.readInt32(t),Py[vO?1:0]=this.readInt32(t+4),dye[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){fye[0]=n,this.writeInt32(t,Py[0])}writeFloat64(t,n){dye[0]=n,this.writeInt32(t,Py[vO?0:1]),this.writeInt32(t+4,Py[vO?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ip+I0)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<I0;n++)t+=String.fromCharCode(this.readInt8(this.position_+Ip+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Ip;const i=this.bytes_.subarray(t,t+r);return n===TG.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Ip}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=I0)throw new Error("FlatBuffers: file identifier must be length "+I0);for(let n=0;n<I0;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Ip+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},mOe=class gOe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=qM.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=gOe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=qM.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Ip,0),this.writeInt32(this.offset()-t+Ip)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Lz;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=Lz;l<s;l+=Lz)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ji:0;if(n){const s=n;if(this.prep(this.minalign,Ip+I0+i),s.length!=I0)throw new TypeError("FlatBuffers: file identifier must be length "+I0);for(let o=I0-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ip+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Ip,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ji),(n||new Mo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Mo.startKeyValue(t),Mo.addKey(t,n),Mo.addValue(t,r),Mo.endKeyValue(t)}}var IT;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(IT||(IT={}));var kT;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(kT||(kT={}));var WM;(function(e){e[e.DenseArray=0]="DenseArray"})(WM||(WM={}));class jc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new jc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ji),(n||new jc).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return jc.startInt(t),jc.addBitWidth(t,n),jc.addIsSigned(t,r),jc.endInt(t)}}class k0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new k0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ji),(n||new k0).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new jc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):WM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,WM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class vx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new vx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ji),(n||new vx).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return vx.startBinary(t),vx.endBinary(t)}}class bx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new bx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ji),(n||new bx).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return bx.startBool(t),bx.endBool(t)}}var GM;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(GM||(GM={}));let e6=class CE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new CE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ji),(n||new CE).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):GM.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,GM.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return CE.startDate(t),CE.addUnit(t,n),CE.endDate(t)}};class jl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new jl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ji),(n||new jl).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return jl.startDecimal(t),jl.addPrecision(t,n),jl.addScale(t,r),jl.addBitWidth(t,i),jl.endDecimal(t)}}var Q1;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Q1||(Q1={}));class kp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+ji),(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q1.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Q1.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return kp.startDuration(t),kp.addUnit(t,n),kp.endDuration(t)}}class Rp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ji),(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Rp.startFixedSizeBinary(t),Rp.addByteWidth(t,n),Rp.endFixedSizeBinary(t)}}class Dp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ji),(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Dp.startFixedSizeList(t),Dp.addListSize(t,n),Dp.endFixedSizeList(t)}}var YM;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(YM||(YM={}));class Np{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ji),(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):YM.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,YM.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Np.startFloatingPoint(t),Np.addPrecision(t,n),Np.endFloatingPoint(t)}}var KM;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(KM||(KM={}));class Pp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ji),(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):KM.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,KM.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Pp.startInterval(t),Pp.addUnit(t,n),Pp.endInterval(t)}}class xx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new xx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ji),(n||new xx).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return xx.startList(t),xx.endList(t)}}let t6=class AE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new AE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ji),(n||new AE).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return AE.startMap(t),AE.addKeysSorted(t,n),AE.endMap(t)}};class _x{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new _x).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ji),(n||new _x).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return _x.startNull(t),_x.endNull(t)}}class wx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new wx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ji),(n||new wx).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return wx.startStruct_(t),wx.endStruct_(t)}}let gI=class zb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new zb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ji),(n||new zb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q1.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q1.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return zb.startTime(t),zb.addUnit(t,n),zb.addBitWidth(t,r),zb.endTime(t)}},yI=class Vb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Vb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ji),(n||new Vb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q1.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q1.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Vb.startTimestamp(t),Vb.addUnit(t,n),Vb.addTimezone(t,r),Vb.endTimestamp(t)}};var XM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(XM||(XM={}));let Hb=class qb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new qb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ji),(n||new qb).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):XM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,XM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return qb.startUnion(t),qb.addMode(t,n),qb.addTypeIds(t,r),qb.endUnion(t)}};class Ex{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ji),(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Ex.startUtf8(t),Ex.endUtf8(t)}}var ys;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(ys||(ys={}));let Ff=class n6{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new n6).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ji),(n||new n6).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ys.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new k0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new n6).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Mo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ys.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},yp=class p0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new p0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ji),(n||new p0).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kT.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Ff).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Mo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,kT.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return p0.startSchema(t),p0.addEndianness(t,n),p0.addFields(t,r),p0.addCustomMetadata(t,i),p0.addFeatures(t,s),p0.endSchema(t)}};class $c{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new $c).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ji),(n||new $c).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):IT.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new yp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new SG).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new SG).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Mo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,IT.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class bi{constructor(t=[],n,r,i=sl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=AG(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new bi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new bi(n,this.metadata)}assign(...t){const n=t[0]instanceof bi?t[0]:Array.isArray(t[0])?new bi(t[0]):new bi(t),r=[...this.fields],i=bO(bO(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:bO(bO(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=AG(s,new Map);return new bi([...r,...s],i,new Map([...this.dictionaries,...o]))}}bi.prototype.fields=null;bi.prototype.metadata=null;bi.prototype.dictionaries=null;let Li=class CG{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new CG(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],CG.new(n,r,i,s)}};Li.prototype.type=null;Li.prototype.name=null;Li.prototype.nullable=null;Li.prototype.metadata=null;function bO(e,t){return new Map([...e||new Map,...t||new Map])}function AG(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(nr.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&AG(s.children,t)}return t}var JNt=mOe,ZNt=qM;class IG{static decode(t){t=new ZNt(Ti(t));const n=$c.getRootAsFooter(t),r=bi.decode(n.schema(),new Map,n.version());return new ePt(r,n)}static encode(t){const n=new JNt,r=bi.encode(n,t.schema);$c.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())J1.encode(n,o);const i=n.endVector();$c.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())J1.encode(n,o);const s=n.endVector();return $c.startFooter(n),$c.addSchema(n,r),$c.addVersion(n,sl.V5),$c.addRecordBatches(n,i),$c.addDictionaries(n,s),$c.finishFooterBuffer(n,$c.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=sl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class ePt extends IG{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return J1.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return J1.decode(n)}return null}}class J1{static decode(t){return new J1(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return SG.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=$h(r),this.bodyLength=$h(n)}}const xO=Object.freeze({done:!0,value:void 0});class yOe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class tPt extends yOe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return T0(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(xO);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return sye.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return sye.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return T0(this,void 0,void 0,function*(){return yield this.abort(t),xO})}return(t){return T0(this,void 0,void 0,function*(){return yield this.close(),xO})}read(t){return T0(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return T0(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(xO)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Fz extends tPt{write(t){if((t=Ti(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?xG(this.toUint8Array(!0)):this.toUint8Array(!1).then(xG)}toUint8Array(t=!1){return t?dm(this._values)[0]:T0(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=XI(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return dm(o,a)[0]})}}class vOe extends S8{constructor(t){super(t),this._values=new E8(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Ti(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class nPt extends Ec{constructor(t){super(t),this._values=new dOe}setValue(t,n){this._values.set(t,+n)}}class T8 extends qg{}T8.prototype._setValue=E3e;class bOe extends T8{}bOe.prototype._setValue=ute;class xOe extends T8{}xOe.prototype._setValue=lte;class _Oe extends qg{}_Oe.prototype._setValue=C3e;class rPt extends Ec{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new X1(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=QM({type:this.type.indices,nullValues:n}),this.dictionary=QM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wOe extends qg{}wOe.prototype._setValue=w3e;class iPt extends Ec{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new AT(this.type.listSize,new Li(n,t.type,!0)),r}}class C8 extends qg{setValue(t,n){this._values.set(t,n)}}class sPt extends C8{setValue(t,n){super.setValue(t,b3e(n))}}class oPt extends C8{}class aPt extends C8{}class A8 extends qg{}A8.prototype._setValue=k3e;class EOe extends A8{}EOe.prototype._setValue=vte;class SOe extends A8{}SOe.prototype._setValue=bte;class W2 extends qg{}W2.prototype._setValue=R3e;class TOe extends W2{}TOe.prototype._setValue=xte;class COe extends W2{}COe.prototype._setValue=_te;class AOe extends W2{}AOe.prototype._setValue=wte;class IOe extends W2{}IOe.prototype._setValue=Ete;class Wg extends qg{setValue(t,n){this._values.set(t,n)}}class uPt extends Wg{}class lPt extends Wg{}class cPt extends Wg{}class fPt extends Wg{}class dPt extends Wg{}class hPt extends Wg{}class pPt extends Wg{}class mPt extends Wg{}class gPt extends S8{constructor(t){super(t),this._offsets=new hOe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new CT(new Li(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class yPt extends S8{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new zR(new Li(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class vPt extends Ec{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class bPt extends Ec{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new vu([...this.type.children,new Li(n,t.type,!0)]),r}}class G2 extends qg{}G2.prototype._setValue=S3e;class kOe extends G2{}kOe.prototype._setValue=cte;class ROe extends G2{}ROe.prototype._setValue=fte;class DOe extends G2{}DOe.prototype._setValue=dte;class NOe extends G2{}NOe.prototype._setValue=hte;class Y2 extends qg{}Y2.prototype._setValue=T3e;class POe extends Y2{}POe.prototype._setValue=pte;class OOe extends Y2{}OOe.prototype._setValue=mte;class $Oe extends Y2{}$Oe.prototype._setValue=gte;class MOe extends Y2{}MOe.prototype._setValue=yte;class Rte extends Ec{constructor(t){super(t),this._typeIds=new xN(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Li(n,t.type)];return this.type=new UR(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class xPt extends Rte{}class _Pt extends Rte{constructor(t){super(t),this._offsets=new xN(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class LOe extends S8{constructor(t){super(t),this._values=new E8(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Gee(n))}_flushPending(t,n){}}LOe.prototype._flushPending=vOe.prototype._flushPending;class wPt extends rr{visitNull(){return vPt}visitBool(){return nPt}visitInt(){return Wg}visitInt8(){return uPt}visitInt16(){return lPt}visitInt32(){return cPt}visitInt64(){return fPt}visitUint8(){return dPt}visitUint16(){return hPt}visitUint32(){return pPt}visitUint64(){return mPt}visitFloat(){return C8}visitFloat16(){return sPt}visitFloat32(){return oPt}visitFloat64(){return aPt}visitUtf8(){return LOe}visitBinary(){return vOe}visitFixedSizeBinary(){return wOe}visitDate(){return T8}visitDateDay(){return bOe}visitDateMillisecond(){return xOe}visitTimestamp(){return G2}visitTimestampSecond(){return kOe}visitTimestampMillisecond(){return ROe}visitTimestampMicrosecond(){return DOe}visitTimestampNanosecond(){return NOe}visitTime(){return Y2}visitTimeSecond(){return POe}visitTimeMillisecond(){return OOe}visitTimeMicrosecond(){return $Oe}visitTimeNanosecond(){return MOe}visitDecimal(){return _Oe}visitList(){return gPt}visitStruct(){return bPt}visitUnion(){return Rte}visitDenseUnion(){return _Pt}visitSparseUnion(){return xPt}visitDictionary(){return rPt}visitInterval(){return A8}visitIntervalDayTime(){return EOe}visitIntervalYearMonth(){return SOe}visitDuration(){return W2}visitDurationSecond(){return TOe}visitDurationMillisecond(){return COe}visitDurationMicrosecond(){return AOe}visistDurationNanosecond(){return IOe}visitFixedSizeList(){return iPt}visitMap(){return yPt}}const EPt=new wPt;class _n extends rr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function wl(e,t){return t instanceof e.constructor}function _N(e,t){return e===t||wl(e,t)}function Gg(e,t){return e===t||wl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function I8(e,t){return e===t||wl(e,t)&&e.precision===t.precision}function SPt(e,t){return e===t||wl(e,t)&&e.byteWidth===t.byteWidth}function Dte(e,t){return e===t||wl(e,t)&&e.unit===t.unit}function wN(e,t){return e===t||wl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function EN(e,t){return e===t||wl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function TPt(e,t){return e===t||wl(e,t)&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}function CPt(e,t){return e===t||wl(e,t)&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}function Nte(e,t){return e===t||wl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Z1.compareManyFields(e.children,t.children)}function APt(e,t){return e===t||wl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Z1.visit(e.indices,t.indices)&&Z1.visit(e.dictionary,t.dictionary)}function Pte(e,t){return e===t||wl(e,t)&&e.unit===t.unit}function SN(e,t){return e===t||wl(e,t)&&e.unit===t.unit}function IPt(e,t){return e===t||wl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}function kPt(e,t){return e===t||wl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}_n.prototype.visitNull=_N;_n.prototype.visitBool=_N;_n.prototype.visitInt=Gg;_n.prototype.visitInt8=Gg;_n.prototype.visitInt16=Gg;_n.prototype.visitInt32=Gg;_n.prototype.visitInt64=Gg;_n.prototype.visitUint8=Gg;_n.prototype.visitUint16=Gg;_n.prototype.visitUint32=Gg;_n.prototype.visitUint64=Gg;_n.prototype.visitFloat=I8;_n.prototype.visitFloat16=I8;_n.prototype.visitFloat32=I8;_n.prototype.visitFloat64=I8;_n.prototype.visitUtf8=_N;_n.prototype.visitBinary=_N;_n.prototype.visitFixedSizeBinary=SPt;_n.prototype.visitDate=Dte;_n.prototype.visitDateDay=Dte;_n.prototype.visitDateMillisecond=Dte;_n.prototype.visitTimestamp=wN;_n.prototype.visitTimestampSecond=wN;_n.prototype.visitTimestampMillisecond=wN;_n.prototype.visitTimestampMicrosecond=wN;_n.prototype.visitTimestampNanosecond=wN;_n.prototype.visitTime=EN;_n.prototype.visitTimeSecond=EN;_n.prototype.visitTimeMillisecond=EN;_n.prototype.visitTimeMicrosecond=EN;_n.prototype.visitTimeNanosecond=EN;_n.prototype.visitDecimal=_N;_n.prototype.visitList=TPt;_n.prototype.visitStruct=CPt;_n.prototype.visitUnion=Nte;_n.prototype.visitDenseUnion=Nte;_n.prototype.visitSparseUnion=Nte;_n.prototype.visitDictionary=APt;_n.prototype.visitInterval=Pte;_n.prototype.visitIntervalDayTime=Pte;_n.prototype.visitIntervalYearMonth=Pte;_n.prototype.visitDuration=SN;_n.prototype.visitDurationSecond=SN;_n.prototype.visitDurationMillisecond=SN;_n.prototype.visitDurationMicrosecond=SN;_n.prototype.visitDurationNanosecond=SN;_n.prototype.visitFixedSizeList=IPt;_n.prototype.visitMap=kPt;const Z1=new _n;function kG(e,t){return Z1.compareSchemas(e,t)}function QM(e){const t=e.type,n=new(EPt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(QM(Object.assign(Object.assign({},l),{type:u})))}}return n}function Bz(e,t){return RPt(e,t.map(n=>n.data.concat()))}function RPt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=DPt(n,o,c,t,i),o>0&&(r[s++]=pu({type:new vu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Uc(e,f))]}function DPt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:pu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var FOe;class Hl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new bi([]),this._offsets=[0],this;let i,s;t[0]instanceof bi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Uc)return[u];if(u instanceof Hl)return u.batches;if(u instanceof Si){if(u.type instanceof vu)return[new Uc(new bi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new ei([u[h]])),f=new bi(l.map((h,p)=>new Li(String(h),c[p].type))),[,d]=Bz(f,c);return d.length===0?[new Uc(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new bi([]),!(i instanceof bi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Uc))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!kG(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??nOe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=tOe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?kte.visit(new ei(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Hl(n,r.map(i=>new Uc(n,i)))}slice(t,n){const r=this.schema;[t,n]=J3e({length:this.numRows},t,n);const i=rOe(this.data,this._offsets,t,n);return new Hl(r,i.map(s=>new Uc(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=pu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new ei(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new ei([pu({type:new Eg,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=Bz(r,a)}return new Hl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Hl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Hl(...Bz(s,o))}}FOe=Symbol.toStringTag;Hl[FOe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=RS(Ite),e.get=RS(mc.getVisitFn(de.Struct)),e.set=iOe(ud.getVisitFn(de.Struct)),e.indexOf=sOe(VM.getVisitFn(de.Struct)),e.getByteLength=RS(mm.getVisitFn(de.Struct)),"Table"))(Hl.prototype);var BOe;let Uc=class vI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof bi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=pu({nullCount:0,type:new vu(this.schema.fields),children:this.schema.fields.map(n=>pu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Si))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=hye(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Li.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new bi(r),a=pu({type:new vu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=hye(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=jOe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return mc.visit(this.data,t)}set(t,n){return ud.visit(this.data,t,n)}indexOf(t,n){return VM.visit(this.data,t,n)}getByteLength(t){return mm.visit(this.data,t)}[Symbol.iterator](){return kte.visit(new ei([this.data]))}toArray(){return[...this]}concat(...t){return new Hl(this.schema,[this,...t])}slice(t,n){const[r]=new ei([this.data]).slice(t,n).data;return new vI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ei([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new ei([pu({type:new Eg,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new bi(s,new Map(this.schema.metadata)),i=pu({type:new vu(s),children:o})}return new vI(r,i)}select(t){const n=this.schema.select(t),r=new vu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new vI(n,pu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=pu({type:new vu(n.fields),length:this.numRows,children:r});return new vI(n,i)}};BOe=Symbol.toStringTag;Uc[BOe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Uc.prototype);function hye(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:pu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),pu({type:new vu(i),length:n,children:s})]}function jOe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])jOe(a.children,l==null?void 0:l.children,n);if(nr.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class NPt extends Uc{constructor(t){const n=t.fields.map(i=>pu({type:i.type})),r=pu({type:new vu(t.fields),nullCount:0,children:n});super(t,r)}}var JM;(function(e){e[e.BUFFER=0]="BUFFER"})(JM||(JM={}));var ZM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(ZM||(ZM={}));class Oy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ji),(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):ZM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):JM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,ZM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,JM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Oy.startBodyCompression(t),Oy.addCodec(t,n),Oy.addMethod(t,r),Oy.endBodyCompression(t)}}let UOe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},zOe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},y0=class RG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new RG).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ji),(n||new RG).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new zOe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new UOe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Oy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},IE=class DG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new DG).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ji),(n||new DG).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new y0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var eL;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(eL||(eL={}));let vy=class cp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new cp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ji),(n||new cp).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):IT.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):eL.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Mo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,IT.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,eL.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return cp.startMessage(t),cp.addVersion(t,n),cp.addHeaderType(t,r),cp.addHeader(t,i),cp.addBodyLength(t,s),cp.addCustomMetadata(t,o),cp.endMessage(t)}};class PPt extends rr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return _x.startNull(n),_x.endNull(n)}visitInt(t,n){return jc.startInt(n),jc.addBitWidth(n,t.bitWidth),jc.addIsSigned(n,t.isSigned),jc.endInt(n)}visitFloat(t,n){return Np.startFloatingPoint(n),Np.addPrecision(n,t.precision),Np.endFloatingPoint(n)}visitBinary(t,n){return vx.startBinary(n),vx.endBinary(n)}visitBool(t,n){return bx.startBool(n),bx.endBool(n)}visitUtf8(t,n){return Ex.startUtf8(n),Ex.endUtf8(n)}visitDecimal(t,n){return jl.startDecimal(n),jl.addScale(n,t.scale),jl.addPrecision(n,t.precision),jl.addBitWidth(n,t.bitWidth),jl.endDecimal(n)}visitDate(t,n){return e6.startDate(n),e6.addUnit(n,t.unit),e6.endDate(n)}visitTime(t,n){return gI.startTime(n),gI.addUnit(n,t.unit),gI.addBitWidth(n,t.bitWidth),gI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return yI.startTimestamp(n),yI.addUnit(n,t.unit),r!==void 0&&yI.addTimezone(n,r),yI.endTimestamp(n)}visitInterval(t,n){return Pp.startInterval(n),Pp.addUnit(n,t.unit),Pp.endInterval(n)}visitDuration(t,n){return kp.startDuration(n),kp.addUnit(n,t.unit),kp.endDuration(n)}visitList(t,n){return xx.startList(n),xx.endList(n)}visitStruct(t,n){return wx.startStruct_(n),wx.endStruct_(n)}visitUnion(t,n){Hb.startTypeIdsVector(n,t.typeIds.length);const r=Hb.createTypeIdsVector(n,t.typeIds);return Hb.startUnion(n),Hb.addMode(n,t.mode),Hb.addTypeIds(n,r),Hb.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return k0.startDictionaryEncoding(n),k0.addId(n,BigInt(t.id)),k0.addIsOrdered(n,t.isOrdered),r!==void 0&&k0.addIndexType(n,r),k0.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Rp.startFixedSizeBinary(n),Rp.addByteWidth(n,t.byteWidth),Rp.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Dp.startFixedSizeList(n),Dp.addListSize(n,t.listSize),Dp.endFixedSizeList(n)}visitMap(t,n){return t6.startMap(n),t6.addKeysSorted(n,t.keysSorted),t6.endMap(n)}}const jz=new PPt;function OPt(e,t=new Map){return new bi(MPt(e,t),r6(e.metadata),t)}function VOe(e){return new pf(e.count,HOe(e.columns),qOe(e.columns))}function $Pt(e){return new gm(VOe(e.data),e.id,e.isDelta)}function MPt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Li.fromJSON(n,t))}function pye(e,t){return(e.children||[]).filter(Boolean).map(n=>Li.fromJSON(n,t))}function HOe(e){return(e||[]).reduce((t,n)=>[...t,new ev(n.count,LPt(n.VALIDITY)),...HOe(n.children)],[])}function qOe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Fp(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Fp(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Fp(t.length,i.OFFSET.length)),i.DATA&&t.push(new Fp(t.length,i.DATA.length)),t=qOe(i.children,t)}return t}function LPt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function FPt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=gye(e,pye(e,t)),i=new Li(e.name,o,e.nullable,r6(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?mye(r):new Y1,a=new X1(t.get(n),r,n,s.isOrdered),i=new Li(e.name,a,e.nullable,r6(e.metadata))):(r=(r=s.indexType)?mye(r):new Y1,t.set(n,o=gye(e,pye(e,t))),a=new X1(o,r,n,s.isOrdered),i=new Li(e.name,a,e.nullable,r6(e.metadata))),i||null}function r6(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function mye(e){return new yl(e.isSigned,e.bitWidth)}function gye(e,t){const n=e.type.name;switch(n){case"NONE":return new Eg;case"null":return new Eg;case"binary":return new BR;case"utf8":return new ET;case"bool":return new jR;case"list":return new CT((t||[])[0]);case"struct":return new vu(t||[]);case"struct_":return new vu(t||[])}switch(n){case"int":{const r=e.type;return new yl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new K1(Fa[r.precision])}case"decimal":{const r=e.type;return new FM(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new ST(hm[r.unit])}case"time":{const r=e.type;return new Sg(yn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new BM(yn[r.unit],r.timezone)}case"interval":{const r=e.type;return new TT(pm[r.unit])}case"duration":{const r=e.type;return new jM(yn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new UR(pc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new UM(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new AT(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new zR((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var BPt=mOe,jPt=qM;class Op{static fromJSON(t,n){const r=new Op(0,sl.V5,n);return r._createHeader=UPt(t,n),r}static decode(t){t=new jPt(Ti(t));const n=vy.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Op(r,i,s);return o._createHeader=zPt(n,s),o}static encode(t){const n=new BPt;let r=-1;return t.isSchema()?r=bi.encode(n,t.header()):t.isRecordBatch()?r=pf.encode(n,t.header()):t.isDictionaryBatch()&&(r=gm.encode(n,t.header())),vy.startMessage(n),vy.addVersion(n,sl.V5),vy.addHeader(n,r),vy.addHeaderType(n,t.headerType),vy.addBodyLength(n,BigInt(t.bodyLength)),vy.finishMessageBuffer(n,vy.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof bi)return new Op(0,sl.V5,sa.Schema,t);if(t instanceof pf)return new Op(n,sl.V5,sa.RecordBatch,t);if(t instanceof gm)return new Op(n,sl.V5,sa.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===sa.Schema}isRecordBatch(){return this.headerType===sa.RecordBatch}isDictionaryBatch(){return this.headerType===sa.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=$h(t)}}class pf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=$h(t)}}class gm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=$h(n)}}class Fp{constructor(t,n){this.offset=$h(t),this.length=$h(n)}}class ev{constructor(t,n){this.length=$h(t),this.nullCount=$h(n)}}function UPt(e,t){return()=>{switch(t){case sa.Schema:return bi.fromJSON(e);case sa.RecordBatch:return pf.fromJSON(e);case sa.DictionaryBatch:return gm.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${sa[t]}, type: ${t} }`)}}function zPt(e,t){return()=>{switch(t){case sa.Schema:return bi.decode(e.header(new yp),new Map,e.version());case sa.RecordBatch:return pf.decode(e.header(new y0),e.version());case sa.DictionaryBatch:return gm.decode(e.header(new IE),e.version())}throw new Error(`Unrecognized Message type: { name: ${sa[t]}, type: ${t} }`)}}Li.encode=ZPt;Li.decode=QPt;Li.fromJSON=FPt;bi.encode=JPt;bi.decode=VPt;bi.fromJSON=OPt;pf.encode=e3t;pf.decode=HPt;pf.fromJSON=VOe;gm.encode=t3t;gm.decode=qPt;gm.fromJSON=$Pt;ev.encode=n3t;ev.decode=GPt;Fp.encode=r3t;Fp.decode=WPt;function VPt(e,t=new Map,n=sl.V5){const r=XPt(e,t);return new bi(r,i6(e),t,n)}function HPt(e,t=sl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new pf(e.length(),YPt(e),KPt(e,t))}function qPt(e,t=sl.V5){return new gm(pf.decode(e.data(),t),e.id(),e.isDelta())}function WPt(e){return new Fp(e.offset(),e.length())}function GPt(e){return new ev(e.length(),e.nullCount())}function YPt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ev.decode(n));return t}function KPt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<sl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Fp.decode(r));return n}function XPt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Li.decode(r,t));return n}function yye(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Li.decode(r,t));return n}function QPt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=bye(e,yye(e,t)),r=new Li(e.name(),i,e.nullable(),i6(e))):t.has(n=$h(a.id()))?(s=(s=a.indexType())?vye(s):new Y1,o=new X1(t.get(n),s,n,a.isOrdered()),r=new Li(e.name(),o,e.nullable(),i6(e))):(s=(s=a.indexType())?vye(s):new Y1,t.set(n,i=bye(e,yye(e,t))),o=new X1(i,s,n,a.isOrdered()),r=new Li(e.name(),o,e.nullable(),i6(e))),r||null}function i6(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function vye(e){return new yl(e.isSigned(),e.bitWidth())}function bye(e,t){const n=e.typeType();switch(n){case ys.NONE:return new Eg;case ys.Null:return new Eg;case ys.Binary:return new BR;case ys.Utf8:return new ET;case ys.Bool:return new jR;case ys.List:return new CT((t||[])[0]);case ys.Struct_:return new vu(t||[])}switch(n){case ys.Int:{const r=e.type(new jc);return new yl(r.isSigned(),r.bitWidth())}case ys.FloatingPoint:{const r=e.type(new Np);return new K1(r.precision())}case ys.Decimal:{const r=e.type(new jl);return new FM(r.scale(),r.precision(),r.bitWidth())}case ys.Date:{const r=e.type(new e6);return new ST(r.unit())}case ys.Time:{const r=e.type(new gI);return new Sg(r.unit(),r.bitWidth())}case ys.Timestamp:{const r=e.type(new yI);return new BM(r.unit(),r.timezone())}case ys.Interval:{const r=e.type(new Pp);return new TT(r.unit())}case ys.Duration:{const r=e.type(new kp);return new jM(r.unit())}case ys.Union:{const r=e.type(new Hb);return new UR(r.mode(),r.typeIdsArray()||[],t||[])}case ys.FixedSizeBinary:{const r=e.type(new Rp);return new UM(r.byteWidth())}case ys.FixedSizeList:{const r=e.type(new Dp);return new AT(r.listSize(),(t||[])[0])}case ys.Map:{const r=e.type(new t6);return new zR((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ys[n]}" (${n})`)}function JPt(e,t){const n=t.fields.map(s=>Li.encode(e,s));yp.startFieldsVector(e,n.length);const r=yp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?yp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Mo.startKeyValue(e),Mo.addKey(e,a),Mo.addValue(e,u),Mo.endKeyValue(e)})):-1;return yp.startSchema(e),yp.addFields(e,r),yp.addEndianness(e,i3t?kT.Little:kT.Big),i!==-1&&yp.addCustomMetadata(e,i),yp.endSchema(e)}function ZPt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;nr.isDictionary(s)?(o=s.dictionary.typeId,i=jz.visit(s,e),r=jz.visit(s.dictionary,e)):r=jz.visit(s,e);const a=(s.children||[]).map(c=>Li.encode(e,c)),u=Ff.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Ff.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Mo.startKeyValue(e),Mo.addKey(e,d),Mo.addValue(e,h),Mo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Ff.startField(e),Ff.addType(e,r),Ff.addTypeType(e,o),Ff.addChildren(e,u),Ff.addNullable(e,!!t.nullable),n!==-1&&Ff.addName(e,n),i!==-1&&Ff.addDictionary(e,i),l!==-1&&Ff.addCustomMetadata(e,l),Ff.endField(e)}function e3t(e,t){const n=t.nodes||[],r=t.buffers||[];y0.startNodesVector(e,n.length);for(const o of n.slice().reverse())ev.encode(e,o);const i=e.endVector();y0.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Fp.encode(e,o);const s=e.endVector();return y0.startRecordBatch(e),y0.addLength(e,BigInt(t.length)),y0.addNodes(e,i),y0.addBuffers(e,s),y0.endRecordBatch(e)}function t3t(e,t){const n=pf.encode(e,t.data);return IE.startDictionaryBatch(e),IE.addId(e,BigInt(t.id)),IE.addIsDelta(e,t.isDelta),IE.addData(e,n),IE.endDictionaryBatch(e)}function n3t(e,t){return zOe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function r3t(e,t){return UOe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const i3t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),NG="ARROW1",Ote=new Uint8Array(NG.length);for(let e=0;e<NG.length;e+=1)Ote[e]=NG.codePointAt(e);Ote.length;class ao extends rr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Uc?s.data.children:s.data),r=new ao;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ei)return this.visitMany(t.data),this;const{type:n}=t;if(!nr.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(nr.isUnion(n))this.nodes.push(new ev(r,0));else{const{nullCount:i}=t;nr.isNull(n)||Th.call(this,i<=0?new Uint8Array(0):zM(t.offset,r,t.nullBitmap)),this.nodes.push(new ev(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Th(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Fp(this._byteLength,t)),this._byteLength+=t,this}function s3t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Th.call(this,i),n.mode===pc.Sparse)return PG.call(this,e);if(n.mode===pc.Dense){if(e.offset<=0)return Th.call(this,s),PG.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Th.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function o3t(e){let t;return e.nullCount>=e.length?Th.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Th.call(this,zM(e.offset,e.length,t)):Th.call(this,eOe(e.values))}function Yg(e){return Th.call(this,e.values.subarray(0,e.length*e.stride))}function WOe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Th.call(this,YPe(-i,t+1,r)),Th.call(this,n.subarray(i,i+o)),this}function $te(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Th.call(this,YPe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function PG(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ao.prototype.visitBool=o3t;ao.prototype.visitInt=Yg;ao.prototype.visitFloat=Yg;ao.prototype.visitUtf8=WOe;ao.prototype.visitBinary=WOe;ao.prototype.visitFixedSizeBinary=Yg;ao.prototype.visitDate=Yg;ao.prototype.visitTimestamp=Yg;ao.prototype.visitTime=Yg;ao.prototype.visitDecimal=Yg;ao.prototype.visitList=$te;ao.prototype.visitStruct=PG;ao.prototype.visitUnion=s3t;ao.prototype.visitInterval=Yg;ao.prototype.visitDuration=Yg;ao.prototype.visitFixedSizeList=$te;ao.prototype.visitMap=$te;class GOe extends yOe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Fz,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Uv(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return b8(t)?t.then(n=>this.writeAll(n)):x8(t)?Bte(this,t):Fte(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Fz?this._sink=t:(this._sink=new Fz,t&&dDt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&hDt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!kG(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Hl&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Uc&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!kG(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Uc?t instanceof NPt||this._writeRecordBatch(t):t instanceof Hl?this.writeAll(t.batches):Yee(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Op.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===sa.RecordBatch?this._recordBatchBlocks.push(new J1(a,t.bodyLength,this._position)):t.headerType===sa.DictionaryBatch&&this._dictionaryBlocks.push(new J1(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Ti(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Op.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Ote)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ao.assemble(t),o=new pf(t.numRows,r,i),a=Op.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ao.assemble(new ei([t])),u=new pf(t.length,s,o),l=new gm(u,n,r),c=Op.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Mte extends GOe{static writeAll(t,n){const r=new Mte(n);return b8(t)?t.then(i=>r.writeAll(i)):x8(t)?Bte(r,t):Fte(r,t)}}class Lte extends GOe{static writeAll(t){const n=new Lte;return b8(t)?t.then(r=>n.writeAll(r)):x8(t)?Bte(n,t):Fte(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=IG.encode(new IG(t,sl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Fte(e,t){let n=t;t instanceof Hl&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Bte(e,t){var n,r,i,s,o,a,u;return T0(this,void 0,void 0,function*(){try{for(n=!0,r=XI(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function a3t(e,t="stream"){return(t==="stream"?Mte:Lte).writeAll(e).toUint8Array(!0)}function jte(e,t=1){return(e*t+63&-64||64)/t}function tv(e,t,n=e.BYTES_PER_ELEMENT){return new e(jte(t,n))}function Ute(e){return e instanceof Si?e:new Si(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function u3t(e){return new ei([Ute(e)])}const zte=new TextEncoder;function l3t(e,t,n){const r=zte.encode(n);return e.set(r,t),r.length}function c3t(e,t,n){return zte.encodeInto(n,e.subarray(t)).written}const f3t=zte.encodeInto?c3t:l3t;function xye(e,t){const n=tv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function d3t(e,t){const n=tv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function h3t(e,t){const n=tv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function p3t(e,t){const n=tv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function m3t(e){const t=QM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function g3t(e,t,n){const r=tv(Int32Array,t+1),i=tv(Uint8Array,3*n);let s=0;return{set(o,a){s+=f3t(i,s,o),r[a+1]=s},data:()=>{const o=jte(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function y3t(e,t){const n=[],r=tv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:v3t(e.dictionary,n,o)})}}function v3t(e,t,n){const r=g3t(e,t.length,n);return t.forEach(r.set),u3t(r.data())}function b3t(e,t){const n=tv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function x3t(e,t,n=!0){let r;switch(e.typeId){case de.Int:r=e.bitWidth<64?xye:null;break;case de.Float:r=e.precision>0?xye:null;break;case de.Dictionary:r=e.dictionary.typeId===de.Utf8&&e.indices.typeId===de.Int&&e.indices.bitWidth<64?y3t:null;break;case de.Bool:r=d3t;break;case de.Date:r=e.unit?p3t:h3t;break}return r==null?m3t(e):n?b3t(r(e,t),t):r(e,t)}function _3t(e,t){const n=e.length,r=jte(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Ute({type:t,length:n,buffers:[null,i]})}function YOe(e,t,n,r,i=!0){const s=x3t(r,e,i);return t(n,s.set),Ute(s.data())}function Vte(e){if(e instanceof nr||e==null)return e;switch(e){case de.Binary:return new BR;case de.Bool:return new jR;case de.DateDay:return new IDt;case de.DateMillisecond:case de.Date:return new kDt;case de.Dictionary:return new X1(new ET,new Y1);case de.Float16:return new g3e;case de.Float32:return new ite;case de.Float64:case de.Float:return new ste;case de.Int8:return new Qee;case de.Int16:return new Jee;case de.Int32:case de.Int:return new Y1;case de.Int64:return new Zee;case de.IntervalDayTime:return new ODt;case de.Interval:case de.IntervalYearMonth:return new $Dt;case de.Null:return new Eg;case de.TimeMicrosecond:return new NDt;case de.TimeMillisecond:case de.Time:return new DDt;case de.TimeNanosecond:return new PDt;case de.TimeSecond:return new RDt;case de.Uint8:return new ete;case de.Uint16:return new tte;case de.Uint32:return new nte;case de.Uint64:return new rte;case de.Utf8:return new ET;default:Jn(`Unsupported type code: ${fm(e)}. Use a data type constructor instead?`)}}function w3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function KOe(e,t){const n=OG();return e(t,n.add),n}function OG(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(wg(t))++e.dates,w3t(t)&&++e.utcdays;else if(yx(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=OG());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=OG())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Vte(E3t(e))}};return e}function E3t(e){const t=e.count-e.nulls;if(t===0)return de.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?de.Float64:n<128?de.Int8:n<32768?de.Int16:de.Int32:n>=2**32?de.Float64:n<256?de.Uint8:n<65536?de.Uint16:de.Uint32}else{if(e.nums===t)return de.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?de.Int64:Jn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?de.Uint64:Jn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return de.Bool;if(e.utcdays===t)return de.DateDay;if(e.dates===t)return de.DateMillisecond;if(e.arrays===t){const n=Li.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new AT(e.minlen,n):new CT(n)}else if(e.structs===t){const n=e.struct_prof;return new vu(Object.keys(n).map(r=>Li.new(r,n[r].type(),!0)))}else{if(e.strings>0)return de.Dictionary;Jn("Type inference failure")}}}}function S3t(e,t,n,r,i,s=!0){if(i=Vte(i),!i){const o=KOe(r,t);s=o.nulls>0,i=o.type()}return YOe(n,r,t,i,s)}function T3t(e,t,n,r,i,s=!0){i=Vte(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=C3t(o);if(u&&a&&_ye(u.type,i))return u;const l=o.data;if(vN(l)){const c=A3t(l);if(a&&c&&_ye(c,i))return _3t(l,c);i=i||c,s=!1}if(!i){const c=KOe(r,o);s=c.nulls>0,i=c.type()}return YOe(n,r,o,i,s)}function C3t(e){return e instanceof ei?e:e.vector instanceof ei?e.vector:null}function A3t(e){const n={Float32Array:ite,Float64Array:ste,Int8Array:Qee,Int16Array:Jee,Int32Array:Y1,Uint8Array:ete,Uint16Array:tte,Uint32Array:nte,BigInt64Array:Zee,BigUint64Array:rte}[e.constructor.name];return n?new n:null}function _ye(e,t){return!e||!t?!0:e.compareTo(t)}function I3t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function k3t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&yx(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const R3t=()=>Jn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function D3t(){try{return Hl}catch{R3t()}}function XOe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=N3t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Jn("Column length mismatch"),a[l]=c});const u=D3t();return new u(a)}function N3t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=fs(n)?n(e):Zr(n)?n:null;if(Zr(e))return{dataFrom:S3t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:I3t(e,r,i)};if(P3t(e))return{dataFrom:T3t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:k3t(e,r,i)};Jn("Unsupported input data type")}function P3t(e){return e&&fs(e.reify)}function O3t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return a3t(XOe(e,r),n)}function $3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function M3t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&wg(u))++i,$3t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function k8(e,t){return fs(t)?t(e):t||e.columnNames()}function QOe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=M3t(L3t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function L3t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Hte(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function F3t(e,t={}){const n=k8(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":wg(l)?y8(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Hte(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function JOe(e,t={}){if(fs(t))return t(e)+"";const n=typeof e;if(n==="object"){if(wg(e))return t.utc?y8(e):xPe(e);{const r=JSON.stringify(e,(s,o)=>vN(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function R8(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function B3t(e,t={}){const n=k8(e,t.columns),{align:r,format:i}=QOe(e,n,t),s=j3t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(JOe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",x=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(x?" ":""):"")+x;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Hte(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function j3t(e){return R8(e.style,t=>fs(t)?t:()=>t)}function U3t(e,t=!0,n=!1){return e===void 0||e?t:n}const z3t=e=>wg(e)?y8(e,!0):e;function V3t(e,t={}){const n=U3t(t.schema),r=t.format||{},i=k8(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||z3t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function H3t(e,t={}){const n=k8(e,t.columns),{align:r,format:i}=QOe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Hte(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(JOe(u,i[l]))+"|"}}),a+`
`}function ZOe(e,t){for(const[n,r]of v8(t))e.set(n,r);return e}function q3t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Tg(e,t,n=new Map){return t=gl(t)?e.columnName(t):t,Ya(t)?n.set(t,t):Zr(t)?t.forEach(r=>Tg(e,r,n)):fs(t)?Tg(e,t(e),n):Du(t)?ZOe(n,t):Jn(`Invalid column selection: ${fm(t)}`),n}function D8(e,t){return e.toObject=t,e}function e4e(e){return Zr(e)?e.map(e4e):e&&e.toObject?e.toObject():e}function RT(){return D8(e=>e.columnNames(),()=>({all:[]}))}function t4e(...e){return e=e.flat(),D8(t=>{const n=Tg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:e4e(e)}))}function W3t(e,t){return D8(n=>{let r=gl(e)?e:n.columnIndex(e),i=gl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function G3t(e){return Ya(e)&&(e=RegExp(q3t(e))),D8(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Y3t(e){return vN(e.data)?e.data.constructor:Array}class R0 extends fRt{static from(t,n){return new R0(pRt(t,n),n)}static new(t,n){if(t instanceof R0)return t;const r={},i=[];for(const[s,o]of v8(t))r[s]=o,i.push(s);return new R0(r,n||i)}constructor(t,n,r,i,s,o){R8(t,hRt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new R0(t||this._data,n||(t?null:this._names),o,i!==void 0?i:VRt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=wf(r).groupby(r.groups());return t.forEach(s=>{s=R0.new(s),s.numRows()!==n&&Jn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Jn(`Unrecognized column: ${t}`)}object(t=0){return wye(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Tg(this,t.columns||RT()),o=qPe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),qRt(this,u,a,n)}return a}*[Symbol.iterator](){const t=wye(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(Y3t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=HRt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return XOe(this,t)}toArrowBuffer(t){return O3t(this,t)}toCSV(t){return F3t(this,t)}toHTML(t){return B3t(this,t)}toJSON(t){return V3t(this,t)}toMarkdown(t){return H3t(this,t)}}function wye(e){let t=e._builder;if(!t){const n=qPe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class K3t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Ur(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=X3t[e.type];s&&s(e,t,n)}const _O=(e,t,n)=>{Ur(e.argument,t,n,e)},Uz=(e,t,n)=>{Ur(e.left,t,n,e),Ur(e.right,t,n,e)},Eye=(e,t,n)=>{Ur(e.test,t,n,e),Ur(e.consequent,t,n,e),e.alternate&&Ur(e.alternate,t,n,e)},zz=(e,t,n)=>{vp(e.params,t,n,e),Ur(e.body,t,n,e)},Sye=(e,t,n)=>{Ur(e.callee,t,n,e),vp(e.arguments,t,n,e)},vp=(e,t,n,r)=>{e.forEach(i=>Ur(i,t,n,r))},X3t={TemplateLiteral:(e,t,n)=>{vp(e.expressions,t,n,e),vp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Ur(e.object,t,n,e),Ur(e.property,t,n,e)},CallExpression:Sye,NewExpression:Sye,ArrayExpression:(e,t,n)=>{vp(e.elements,t,n,e)},AssignmentExpression:Uz,AwaitExpression:_O,BinaryExpression:Uz,LogicalExpression:Uz,UnaryExpression:_O,UpdateExpression:_O,ConditionalExpression:Eye,ObjectExpression:(e,t,n)=>{vp(e.properties,t,n,e)},Property:(e,t,n)=>{Ur(e.key,t,n,e),Ur(e.value,t,n,e)},ArrowFunctionExpression:zz,FunctionExpression:zz,FunctionDeclaration:zz,VariableDeclaration:(e,t,n)=>{vp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Ur(e.id,t,n,e),Ur(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Ur(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{vp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Ur(e.expression,t,n,e)},IfStatement:Eye,ForStatement:(e,t,n)=>{Ur(e.init,t,n,e),Ur(e.test,t,n,e),Ur(e.update,t,n,e),Ur(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Ur(e.test,t,n,e),Ur(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Ur(e.body,t,n,e),Ur(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Ur(e.discriminant,t,n,e),vp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Ur(e.test,t,n,e),vp(e.consequent,t,n,e)},ReturnStatement:_O,Program:(e,t,n)=>{Ur(e.body[0],t,n,e)}};function n4e(e){delete e.start,delete e.end,delete e.optional}function Tye(e){n4e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Q3t(e){return Ur(e,null,{Column:Tye,Constant:Tye,Default:n4e}),e}function Fo(e,t){return t&&t.type===e}function J3t(e){return Fo(YRt,e)||Fo(GRt,e)}function Z3t(e){return fs(e)?e:()=>e}const eOt="Escaped functions are not valid as rollup or pivot values.";function tOt(e,t,n){e.aggronly&&Jn(eOt);const r="(row,data)=>fn("+HPe(e.table.columnNames())+",$)";return{escape:Wee.escape(r,Z3t(t.expr),n)}}var nOt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],r4e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],rOt="-----------------------------------------------------------------------------------------------------------------------------------------------------",i4e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Vz={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Hz="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",iOt={5:Hz,"5module":Hz+" export import",6:Hz+" const class extends export import super"},sOt=/^in(stanceof)?$/,oOt=new RegExp("["+i4e+"]"),aOt=new RegExp("["+i4e+rOt+"]");function $G(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Cg(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&oOt.test(String.fromCharCode(e)):t===!1?!1:$G(e,r4e)}function DT(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&aOt.test(String.fromCharCode(e)):t===!1?!1:$G(e,r4e)||$G(e,nOt)}var Gr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Pf(e,t){return new Gr(e,{beforeExpr:!0,binop:t})}var Of={beforeExpr:!0},Nl={startsExpr:!0},qte={};function Dr(e,t){return t===void 0&&(t={}),t.keyword=e,qte[e]=new Gr(e,t)}var te={num:new Gr("num",Nl),regexp:new Gr("regexp",Nl),string:new Gr("string",Nl),name:new Gr("name",Nl),privateId:new Gr("privateId",Nl),eof:new Gr("eof"),bracketL:new Gr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Gr("]"),braceL:new Gr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Gr("}"),parenL:new Gr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Gr(")"),comma:new Gr(",",Of),semi:new Gr(";",Of),colon:new Gr(":",Of),dot:new Gr("."),question:new Gr("?",Of),questionDot:new Gr("?."),arrow:new Gr("=>",Of),template:new Gr("template"),invalidTemplate:new Gr("invalidTemplate"),ellipsis:new Gr("...",Of),backQuote:new Gr("`",Nl),dollarBraceL:new Gr("${",{beforeExpr:!0,startsExpr:!0}),eq:new Gr("=",{beforeExpr:!0,isAssign:!0}),assign:new Gr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Gr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Gr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Pf("||",1),logicalAND:Pf("&&",2),bitwiseOR:Pf("|",3),bitwiseXOR:Pf("^",4),bitwiseAND:Pf("&",5),equality:Pf("==/!=/===/!==",6),relational:Pf("</>/<=/>=",7),bitShift:Pf("<</>>/>>>",8),plusMin:new Gr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Pf("%",10),star:Pf("*",10),slash:Pf("/",10),starstar:new Gr("**",{beforeExpr:!0}),coalesce:Pf("??",1),_break:Dr("break"),_case:Dr("case",Of),_catch:Dr("catch"),_continue:Dr("continue"),_debugger:Dr("debugger"),_default:Dr("default",Of),_do:Dr("do",{isLoop:!0,beforeExpr:!0}),_else:Dr("else",Of),_finally:Dr("finally"),_for:Dr("for",{isLoop:!0}),_function:Dr("function",Nl),_if:Dr("if"),_return:Dr("return",Of),_switch:Dr("switch"),_throw:Dr("throw",Of),_try:Dr("try"),_var:Dr("var"),_const:Dr("const"),_while:Dr("while",{isLoop:!0}),_with:Dr("with"),_new:Dr("new",{beforeExpr:!0,startsExpr:!0}),_this:Dr("this",Nl),_super:Dr("super",Nl),_class:Dr("class",Nl),_extends:Dr("extends",Of),_export:Dr("export"),_import:Dr("import",Nl),_null:Dr("null",Nl),_true:Dr("true",Nl),_false:Dr("false",Nl),_in:Dr("in",{beforeExpr:!0,binop:7}),_instanceof:Dr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Dr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Dr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Dr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ed=/\r\n?|\n|\u2028|\u2029/,uOt=new RegExp(Ed.source,"g");function K2(e){return e===10||e===13||e===8232||e===8233}function s4e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(K2(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var o4e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Wf=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,a4e=Object.prototype,lOt=a4e.hasOwnProperty,cOt=a4e.toString,TN=Object.hasOwn||function(e,t){return lOt.call(e,t)},Cye=Array.isArray||function(e){return cOt.call(e)==="[object Array]"},Aye=Object.create(null);function e1(e){return Aye[e]||(Aye[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function nv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var fOt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,VR=function(t,n){this.line=t,this.column=n};VR.prototype.offset=function(t){return new VR(this.line,this.column+t)};var N8=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function u4e(e,t){for(var n=1,r=0;;){var i=s4e(e,r,t);if(i<0)return new VR(n,t-r);++n,r=i}}var MG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Iye=!1;function dOt(e){var t={};for(var n in MG)t[n]=e&&TN(e,n)?e[n]:MG[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Iye&&typeof console=="object"&&console.warn&&(Iye=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Cye(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Cye(t.onComment)&&(t.onComment=hOt(t,t.onComment)),t}function hOt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new N8(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var HR=1,X2=2,Wte=4,l4e=8,c4e=16,f4e=32,Gte=64,d4e=128,CN=256,Yte=HR|X2|CN;function Kte(e,t){return X2|(e?Wte:0)|(t?l4e:0)}var tL=0,Xte=1,Kg=2,h4e=3,p4e=4,m4e=5,Go=function(t,n,r){this.options=t=dOt(t),this.sourceFile=t.sourceFile,this.keywords=e1(iOt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=Vz[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=e1(i);var s=(i?i+" ":"")+Vz.strict;this.reservedWordsStrict=e1(s),this.reservedWordsStrictBind=e1(s+" "+Vz.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ed).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(HR),this.regexpState=null,this.privateNameStack=[]},Om={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Go.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Om.inFunction.get=function(){return(this.currentVarScope().flags&X2)>0};Om.inGenerator.get=function(){return(this.currentVarScope().flags&l4e)>0&&!this.currentVarScope().inClassFieldInit};Om.inAsync.get=function(){return(this.currentVarScope().flags&Wte)>0&&!this.currentVarScope().inClassFieldInit};Om.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&CN)return!1;if(t.flags&X2)return(t.flags&Wte)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Om.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Gte)>0||n||this.options.allowSuperOutsideMethod};Om.allowDirectSuper.get=function(){return(this.currentThisScope().flags&d4e)>0};Om.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Om.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(X2|CN))>0||n};Om.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&CN)>0};Go.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Go.parse=function(t,n){return new this(n,t).parse()};Go.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Go.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Go.prototype,Om);var El=Go.prototype,pOt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;El.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Wf.lastIndex=e,e+=Wf.exec(this.input)[0].length;var t=pOt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Wf.lastIndex=e+t[0].length;var n=Wf.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Ed.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Wf.lastIndex=e,e+=Wf.exec(this.input)[0].length,this.input[e]===";"&&e++}};El.eat=function(e){return this.type===e?(this.next(),!0):!1};El.isContextual=function(e){return this.type===te.name&&this.value===e&&!this.containsEsc};El.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};El.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};El.canInsertSemicolon=function(){return this.type===te.eof||this.type===te.braceR||Ed.test(this.input.slice(this.lastTokEnd,this.start))};El.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};El.semicolon=function(){!this.eat(te.semi)&&!this.insertSemicolon()&&this.unexpected()};El.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};El.expect=function(e){this.eat(e)||this.unexpected()};El.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var P8=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};El.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};El.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};El.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};El.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var en=Go.prototype;en.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==te.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Qte={kind:"loop"},mOt={kind:"switch"};en.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Wf.lastIndex=this.pos;var t=Wf.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Cg(r,!0)){for(var i=n+1;DT(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!sOt.test(s))return!0}return!1};en.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Wf.lastIndex=this.pos;var e=Wf.exec(this.input),t=this.pos+e[0].length,n;return!Ed.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(DT(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};en.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=te._var,s="let"),r){case te._break:case te._continue:return this.parseBreakContinueStatement(i,r.keyword);case te._debugger:return this.parseDebuggerStatement(i);case te._do:return this.parseDoStatement(i);case te._for:return this.parseForStatement(i);case te._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case te._class:return e&&this.unexpected(),this.parseClass(i,!0);case te._if:return this.parseIfStatement(i);case te._return:return this.parseReturnStatement(i);case te._switch:return this.parseSwitchStatement(i);case te._throw:return this.parseThrowStatement(i);case te._try:return this.parseTryStatement(i);case te._const:case te._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case te._while:return this.parseWhileStatement(i);case te._with:return this.parseWithStatement(i);case te.braceL:return this.parseBlock(!0,i);case te.semi:return this.parseEmptyStatement(i);case te._export:case te._import:if(this.options.ecmaVersion>10&&r===te._import){Wf.lastIndex=this.pos;var o=Wf.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===te._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===te.name&&c.type==="Identifier"&&this.eat(te.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};en.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(te.semi)||this.insertSemicolon()?e.label=null:this.type!==te.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};en.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};en.parseDoStatement=function(e){return this.next(),this.labels.push(Qte),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(te._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(te.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};en.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Qte),this.enterScope(0),this.expect(te.parenL),this.type===te.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===te._var||this.type===te._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new P8,u=this.parseExpression(t>-1?"await":!0,a);return this.type===te._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};en.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,mk|(n?0:LG),!1,t)};en.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(te._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};en.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(te.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};en.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(te.braceL),this.labels.push(mOt),this.enterScope(0);for(var t,n=!1;this.type!==te.braceR;)if(this.type===te._case||this.type===te._default){var r=this.type===te._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(te.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};en.parseThrowStatement=function(e){return this.next(),Ed.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var gOt=[];en.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?f4e:0),this.checkLValPattern(e,t?p4e:Kg),this.expect(te.parenR),e};en.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===te._catch){var t=this.startNode();this.next(),this.eat(te.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(te._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};en.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};en.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Qte),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};en.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};en.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};en.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===te._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};en.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};en.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(te.braceL),e&&this.enterScope(0);this.type!==te.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};en.parseFor=function(e,t){return e.init=t,this.expect(te.semi),e.test=this.type===te.semi?null:this.parseExpression(),this.expect(te.semi),e.update=this.type===te.parenR?null:this.parseExpression(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};en.parseForIn=function(e,t){var n=this.type===te._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};en.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(te.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(te.comma))break}return e};en.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Xte:Kg,!1)};var mk=1,LG=2,g4e=4;en.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===te.star&&t&LG&&this.unexpected(),e.generator=this.eat(te.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&mk&&(e.id=t&g4e&&this.type!==te.name?null:this.parseIdent(),e.id&&!(t&LG)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Xte:Kg:h4e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kte(e.async,e.generator)),t&mk||(e.id=this.type===te.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&mk?"FunctionDeclaration":"FunctionExpression")};en.parseFunctionParams=function(e){this.expect(te.parenL),e.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};en.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(te.braceL);this.type!==te.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&yOt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};en.parseClassElement=function(e){if(this.eat(te.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(te.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===te.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===te.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(te.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===te.parenL||o!=="method"||i||s){var l=!n.static&&nL(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};en.isClassElementNameStart=function(){return this.type===te.name||this.type===te.privateId||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword};en.parseClassElementName=function(e){this.type===te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};en.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&nL(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};en.parseClassField=function(e){if(nL(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&nL(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(te.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};en.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(CN|Gte);this.type!==te.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};en.parseClassId=function(e,t){this.type===te.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Kg,!1)):(t===!0&&this.unexpected(),e.id=null)};en.parseClassSuper=function(e){e.superClass=this.eat(te._extends)?this.parseExprSubscripts(null,!1):null};en.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};en.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];TN(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function yOt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function nL(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}en.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};en.parseExport=function(e,t){if(this.next(),this.eat(te.star))return this.parseExportAllDeclaration(e,t);if(this.eat(te._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};en.parseExportDeclaration=function(e){return this.parseStatement(null)};en.parseExportDefaultDeclaration=function(){var e;if(this.type===te._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,mk|g4e,!1,e)}else if(this.type===te._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};en.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),TN(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};en.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};en.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};en.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};en.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};en.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(te.braceL);!this.eat(te.braceR);){if(n)n=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;t.push(this.parseExportSpecifier(e))}return t};en.parseImport=function(e){return this.next(),this.type===te.string?(e.specifiers=gOt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};en.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Kg),this.finishNode(e,"ImportSpecifier")};en.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Kg),this.finishNode(e,"ImportDefaultSpecifier")};en.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Kg),this.finishNode(e,"ImportNamespaceSpecifier")};en.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===te.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(te.comma)))return e;if(this.type===te.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(te.braceL);!this.eat(te.braceR);){if(t)t=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;e.push(this.parseImportSpecifier())}return e};en.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===te.string){var e=this.parseLiteral(this.value);return fOt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};en.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};en.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Sd=Go.prototype;Sd.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Sd.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Sd.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Sd.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==te.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Sd.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case te.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(te.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case te.braceL:return this.parseObj(!0)}return this.parseIdent()};Sd.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(te.comma),t&&this.type===te.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===te.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Sd.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Sd.parseBindingListItem=function(e){return e};Sd.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(te.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Sd.checkLValSimple=function(e,t,n){t===void 0&&(t=tL);var r=t!==tL;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Kg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(TN(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==m4e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Sd.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=tL),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Sd.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=tL),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var zd=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Es={b_stat:new zd("{",!1),b_expr:new zd("{",!0),b_tmpl:new zd("${",!1),p_stat:new zd("(",!1),p_expr:new zd("(",!0),q_tmpl:new zd("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new zd("function",!1),f_expr:new zd("function",!0),f_expr_gen:new zd("function",!0,!1,null,!0),f_gen:new zd("function",!1,!1,null,!0)},Q2=Go.prototype;Q2.initialContext=function(){return[Es.b_stat]};Q2.curContext=function(){return this.context[this.context.length-1]};Q2.braceIsBlock=function(e){var t=this.curContext();return t===Es.f_expr||t===Es.f_stat?!0:e===te.colon&&(t===Es.b_stat||t===Es.b_expr)?!t.isExpr:e===te._return||e===te.name&&this.exprAllowed?Ed.test(this.input.slice(this.lastTokEnd,this.start)):e===te._else||e===te.semi||e===te.eof||e===te.parenR||e===te.arrow?!0:e===te.braceL?t===Es.b_stat:e===te._var||e===te._const||e===te.name?!1:!this.exprAllowed};Q2.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Q2.updateContext=function(e){var t,n=this.type;n.keyword&&e===te.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Q2.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};te.parenR.updateContext=te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Es.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};te.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Es.b_stat:Es.b_expr),this.exprAllowed=!0};te.dollarBraceL.updateContext=function(){this.context.push(Es.b_tmpl),this.exprAllowed=!0};te.parenL.updateContext=function(e){var t=e===te._if||e===te._for||e===te._with||e===te._while;this.context.push(t?Es.p_stat:Es.p_expr),this.exprAllowed=!0};te.incDec.updateContext=function(){};te._function.updateContext=te._class.updateContext=function(e){e.beforeExpr&&e!==te._else&&!(e===te.semi&&this.curContext()!==Es.p_stat)&&!(e===te._return&&Ed.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===te.colon||e===te.braceL)&&this.curContext()===Es.b_stat)?this.context.push(Es.f_expr):this.context.push(Es.f_stat),this.exprAllowed=!1};te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};te.backQuote.updateContext=function(){this.curContext()===Es.q_tmpl?this.context.pop():this.context.push(Es.q_tmpl),this.exprAllowed=!1};te.star.updateContext=function(e){if(e===te._function){var t=this.context.length-1;this.context[t]===Es.f_expr?this.context[t]=Es.f_expr_gen:this.context[t]=Es.f_gen}this.exprAllowed=!0};te.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Pn=Go.prototype;Pn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Pn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===te.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(te.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Pn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new P8,r=!0);var a=this.start,u=this.startLoc;(this.type===te.parenL||this.type===te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===te.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===te.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Pn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(te.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(te.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Pn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Pn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==te._in)&&s>r){var o=this.type===te.logicalOR||this.type===te.logicalAND,a=this.type===te.coalesce;a&&(s=te.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===te.coalesce||a&&(this.type===te.logicalOR||this.type===te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Pn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Pn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===te.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&y4e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===te.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==te._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(te.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function y4e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&y4e(e.expression)}Pn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Pn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Pn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(te.arrow)};Pn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Pn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(te.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(te.bracketL);if(l||u&&this.type!==te.parenL&&this.type!==te.backQuote||this.eat(te.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(te.bracketR)):this.type===te.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(te.parenL)){var f=new P8,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===te.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Pn.parseExprAtom=function(e,t,n){this.type===te.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===te.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==te.dot&&this.type!==te.bracketL&&this.type!==te.parenL&&this.unexpected(),this.finishNode(r,"Super");case te._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case te.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(te._function))return this.overrideContext(Es.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(te.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===te.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case te.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case te.num:case te.string:return this.parseLiteral(this.value);case te._null:case te._true:case te._false:return r=this.startNode(),r.value=this.type===te._null?null:this.type===te._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case te.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case te.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(te.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case te.braceL:return this.overrideContext(Es.b_expr),this.parseObj(!1,e);case te._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case te._class:return this.parseClass(this.startNode(),!1);case te._new:return this.parseNew();case te.backQuote:return this.parseTemplate();case te._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Pn.parseExprAtomDefault=function(){this.unexpected()};Pn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===te.parenL&&!e)return this.parseDynamicImport(t);if(this.type===te.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Pn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(te.parenR)){var t=this.start;this.eat(te.comma)&&this.eat(te.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Pn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Pn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Pn.parseParenExpression=function(){this.expect(te.parenL);var e=this.parseExpression();return this.expect(te.parenR),e};Pn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Pn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new P8,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==te.parenR;)if(l?l=!1:this.expect(te.comma),s&&this.afterTrailingComma(te.parenR,!0)){c=!0;break}else if(this.type===te.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(te.parenR),e&&this.shouldParseArrow(u)&&this.eat(te.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Pn.parseParenItem=function(e){return e};Pn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var vOt=[];Pn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===te.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(te.parenL)?e.arguments=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1):e.arguments=vOt,this.finishNode(e,"NewExpression")};Pn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===te.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===te.backQuote,this.finishNode(n,"TemplateElement")};Pn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(te.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(te.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Pn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===te.name||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===te.star)&&!Ed.test(this.input.slice(this.lastTokEnd,this.start))};Pn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(te.braceR);){if(r)r=!1;else if(this.expect(te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(te.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Pn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(te.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===te.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(te.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(te.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Pn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Pn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===te.colon&&this.unexpected(),this.eat(te.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===te.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==te.comma&&this.type!==te.braceR&&this.type!==te.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===te.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Pn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(te.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(te.bracketR),e.key;e.computed=!1}return e.key=this.type===te.num||this.type===te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Pn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Pn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kte(t,r.generator)|Gte|(n?d4e:0)),this.expect(te.parenL),r.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Pn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Kte(n,!1)|c4e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Pn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==te.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,m4e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Pn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Pn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,Xte,t?null:n)}};Pn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(te.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===te.comma?o=null:this.type===te.ellipsis?(o=this.parseSpread(r),r&&this.type===te.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Pn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Pn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Pn.parseIdentNode=function(){var e=this.startNode();return this.type===te.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=te.name):this.unexpected(),e};Pn.parsePrivateIdent=function(){var e=this.startNode();return this.type===te.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Pn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===te.semi||this.canInsertSemicolon()||this.type!==te.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(te.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Pn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var rL=Go.prototype;rL.raise=function(e,t){var n=u4e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};rL.raiseRecoverable=rL.raise;rL.curPosition=function(){if(this.options.locations)return new VR(this.curLine,this.pos-this.lineStart)};var Hv=Go.prototype,bOt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Hv.enterScope=function(e){this.scopeStack.push(new bOt(e))};Hv.exitScope=function(){this.scopeStack.pop()};Hv.treatFunctionsAsVarInScope=function(e){return e.flags&X2||!this.inModule&&e.flags&HR};Hv.declareName=function(e,t,n){var r=!1;if(t===Kg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&HR&&delete this.undefinedExports[e]}else if(t===p4e){var s=this.currentScope();s.lexical.push(e)}else if(t===h4e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&f4e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&HR&&delete this.undefinedExports[e],u.flags&Yte)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Hv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Hv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Hv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Yte)return t}};Hv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Yte&&!(t.flags&c4e))return t}};var O8=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new N8(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},AN=Go.prototype;AN.startNode=function(){return new O8(this,this.start,this.startLoc)};AN.startNodeAt=function(e,t){return new O8(this,e,t)};function v4e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}AN.finishNode=function(e,t){return v4e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};AN.finishNodeAt=function(e,t,n,r){return v4e.call(this,e,t,n,r)};AN.copyNode=function(e){var t=new O8(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var b4e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",x4e=b4e+" Extended_Pictographic",_4e=x4e,w4e=_4e+" EBase EComp EMod EPres ExtPict",E4e=w4e,xOt=E4e,_Ot={9:b4e,10:x4e,11:_4e,12:w4e,13:E4e,14:xOt},wOt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",EOt={9:"",10:"",11:"",12:"",13:"",14:wOt},kye="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",S4e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",T4e=S4e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",C4e=T4e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",A4e=C4e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",I4e=A4e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",SOt=I4e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",TOt={9:S4e,10:T4e,11:C4e,12:A4e,13:I4e,14:SOt},k4e={};function COt(e){var t=k4e[e]={binary:e1(_Ot[e]+" "+kye),binaryOfStrings:e1(EOt[e]),nonBinary:{General_Category:e1(kye),Script:e1(TOt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var qz=0,Rye=[9,10,11,12,13,14];qz<Rye.length;qz+=1){var AOt=Rye[qz];COt(AOt)}var Wt=Go.prototype,$m=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=k4e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};$m.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};$m.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};$m.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};$m.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};$m.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};$m.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};$m.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};$m.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};$m.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Wt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Wt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Wt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Wt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Wt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Wt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Wt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Wt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Wt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Wt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Wt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Wt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Wt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Wt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Wt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Wt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Wt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return R4e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function R4e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Wt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!R4e(n);)e.advance();return e.pos!==t};Wt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Wt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Wt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Wt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=nv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=nv(e.lastIntValue);return!0}return!1};Wt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),IOt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function IOt(e){return Cg(e,!0)||e===36||e===95}Wt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),kOt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function kOt(e){return DT(e,!0)||e===36||e===95||e===8204||e===8205}Wt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Wt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Wt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Wt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Wt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Wt.regexp_eatZero=function(e){return e.current()===48&&!$8(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Wt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Wt.regexp_eatControlLetter=function(e){var t=e.current();return D4e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function D4e(e){return e>=65&&e<=90||e>=97&&e<=122}Wt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&ROt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function ROt(e){return e>=0&&e<=1114111}Wt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Wt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var N4e=0,Ag=1,Kf=2;Wt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(DOt(t))return e.lastIntValue=-1,e.advance(),Ag;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Kf&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return N4e};function DOt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Wt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Ag}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return N4e};Wt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){TN(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Wt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Ag;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Kf;e.raise("Invalid property name")};Wt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";P4e(t=e.current());)e.lastStringValue+=nv(t),e.advance();return e.lastStringValue!==""};function P4e(e){return D4e(e)||e===95}Wt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";NOt(t=e.current());)e.lastStringValue+=nv(t),e.advance();return e.lastStringValue!==""};function NOt(e){return P4e(e)||$8(e)}Wt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Wt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Kf&&e.raise("Negated character class may contain strings"),!0}return!1};Wt.regexp_classContents=function(e){return e.current()===93?Ag:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Ag)};Wt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Wt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||M4e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Wt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Wt.regexp_classSetExpression=function(e){var t=Ag,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Kf&&(t=Kf);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Kf&&(t=Ag);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Kf&&(t=Kf)}};Wt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Wt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Ag:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Wt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Kf&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Wt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Wt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Kf&&(t=Kf);return t};Wt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Ag:Kf};Wt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&POt(n)||OOt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function POt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function OOt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Wt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return $Ot(t)?(e.lastIntValue=t,e.advance(),!0):!1};function $Ot(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Wt.regexp_eatClassControlLetter=function(e){var t=e.current();return $8(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Wt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Wt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;$8(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function $8(e){return e>=48&&e<=57}Wt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;O4e(n=e.current());)e.lastIntValue=16*e.lastIntValue+$4e(n),e.advance();return e.pos!==t};function O4e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function $4e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Wt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Wt.regexp_eatOctalDigit=function(e){var t=e.current();return M4e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function M4e(e){return e>=48&&e<=55}Wt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!O4e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+$4e(i),e.advance()}return!0};var Jte=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new N8(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Sr=Go.prototype;Sr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Jte(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Sr.getToken=function(){return this.next(),new Jte(this)};typeof Symbol<"u"&&(Sr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===te.eof,value:t}}}});Sr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(te.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Sr.readToken=function(e){return Cg(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Sr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Sr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=s4e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Sr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!K2(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Sr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&o4e.test(String.fromCharCode(e)))++this.pos;else break e}}};Sr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Sr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(te.ellipsis)):(++this.pos,this.finishToken(te.dot))};Sr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(te.assign,2):this.finishOp(te.slash,1)};Sr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?te.star:te.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=te.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(te.assign,n+1):this.finishOp(r,n)};Sr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(te.assign,3)}return this.finishOp(e===124?te.logicalOR:te.logicalAND,2)}return t===61?this.finishOp(te.assign,2):this.finishOp(e===124?te.bitwiseOR:te.bitwiseAND,1)};Sr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(te.assign,2):this.finishOp(te.bitwiseXOR,1)};Sr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ed.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(te.incDec,2):t===61?this.finishOp(te.assign,2):this.finishOp(te.plusMin,1)};Sr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(te.assign,n+1):this.finishOp(te.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(te.relational,n))};Sr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(te.arrow)):this.finishOp(e===61?te.eq:te.prefix,1)};Sr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(te.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(te.assign,3)}return this.finishOp(te.coalesce,2)}}return this.finishOp(te.question,1)};Sr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Cg(t,!0)||t===92))return this.finishToken(te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+nv(t)+"'")};Sr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(te.parenL);case 41:return++this.pos,this.finishToken(te.parenR);case 59:return++this.pos,this.finishToken(te.semi);case 44:return++this.pos,this.finishToken(te.comma);case 91:return++this.pos,this.finishToken(te.bracketL);case 93:return++this.pos,this.finishToken(te.bracketR);case 123:return++this.pos,this.finishToken(te.braceL);case 125:return++this.pos,this.finishToken(te.braceR);case 58:return++this.pos,this.finishToken(te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(te.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+nv(e)+"'")};Sr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Sr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Ed.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new $m(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(te.regexp,{pattern:i,flags:o,value:u})};Sr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function MOt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function L4e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Sr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=L4e(this.input.slice(t,this.pos)),++this.pos):Cg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,n)};Sr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=L4e(this.input.slice(t,this.pos));return++this.pos,Cg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Cg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=MOt(this.input.slice(t,this.pos),n);return this.finishToken(te.num,s)};Sr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Sr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(K2(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(te.string,t)};var F4e={};Sr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===F4e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Sr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw F4e;this.raise(e,t)};Sr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===te.template||this.type===te.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(te.dollarBraceL)):(++this.pos,this.finishToken(te.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(te.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(K2(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Sr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Sr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return nv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return K2(t)?"":String.fromCharCode(t)}};Sr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Sr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(DT(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Cg:DT)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=nv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Sr.readWord=function(){var e=this.readWord1(),t=te.name;return this.keywords.test(e)&&(t=qte[e]),this.finishToken(t,e)};var LOt="8.11.3";Go.acorn={Parser:Go,version:LOt,defaultOptions:MG,Position:VR,SourceLocation:N8,getLineInfo:u4e,Node:O8,TokenType:Gr,tokTypes:te,keywordTypes:qte,TokContext:zd,tokContexts:Es,isIdentifierChar:DT,isIdentifierStart:Cg,Token:Jte,isNewLine:K2,lineBreak:Ed,lineBreakG:uOt,nonASCIIwhitespace:o4e};function FOt(e,t){return Go.parse(e,t)}const Zte={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},BOt={ecmaVersion:11},Dye="$",jOt="d",UOt="d1",zOt="d2",ka=e=>(t,n)=>n.error(t,e+" not allowed"),VOt=ka("Aggregate function"),HOt=ka("Window function"),qOt="Invalid argument",ene="Invalid column reference",WOt=ene+" (must be input to an aggregate function)",B4e="Invalid function call",GOt="Invalid member expression",YOt="Invalid operator parameter",KOt="Invalid param reference",XOt="Invalid variable reference",QOt="Variable not accessible in operator call",JOt="Unsupported variable declaration",ZOt="Unsupported destructuring pattern",j4e="Table expressions do not support closures",U4e="Use aq.escape(fn) to use a function as-is (including closures)",e4t="use table.params({ name: value }) to define dynamic parameters",t4t="use aq.addFunction(name, fn) to add new op functions",n4t=`
Note: ${j4e}. ${U4e}, or ${e4t}.`,z4e=`
Note: ${j4e}. ${U4e}, or ${t4t}.`,r4t=`The ${zPe} method is not valid in multi-table expressions.`;function i4t(e,t){const n=s4t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,J3t(r)?(a4t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=UOt),e.scope.add(e.tuple2=zOt),e.scope.add(e.$param=Dye)):(e.scope.add(e.tuple=jOt),e.scope.add(e.$param=Dye)),Ur(r,e,tne),e.root}function s4t(e){try{const t=e.field?o4t(e):Zr(e)?fm(e):e;return FOt(`expr=(${t})`,BOt).body[0].expression.right}catch{Jn(`Expression parse error: ${e+""}`)}}function o4t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const tne={FunctionDeclaration:ka("Function definitions"),ForStatement:ka("For loops"),ForOfStatement:ka("For-of loops"),ForInStatement:ka("For-in loops"),WhileStatement:ka("While loops"),DoWhileStatement:ka("Do-while loops"),AwaitExpression:ka("Await expressions"),ArrowFunctionExpression:ka("Function definitions"),AssignmentExpression:ka("Assignments"),FunctionExpression:ka("Function definitions"),NewExpression:ka('Use of "new"'),UpdateExpression:ka("Update expressions"),VariableDeclarator(e,t){jG(e.id,t)},Identifier(e,t,n){q4e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,XOt,n4t)},CallExpression(e,t){const n=V4e(e.callee),r=BPe(n)||jPe(n);if(r){if((t.join||t.aggregate===!1)&&Hee(n)&&VOt(e,t),(t.join||t.window===!1)&&qee(n)&&HOt(e,t),t.$op=1,t.ast)BG(e,n,t),e.arguments.forEach(i=>Ur(i,t,FG));else{const i=t.op(u4t(t,r,n,e.arguments));Object.assign(e,{type:OPe,name:i.id})}return t.$op=0,!1}else FPe(n)?BG(e,n,t):t.error(e,B4e,z4e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Fo(E1,r))return;const{name:s}=r;if(H4e(e)&&Fo(E1,i)&&Oh(Zte,i.name)){Y4e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Nye(e,o,t,W4e,n);if(s===t.$param)return Nye(e,o,t,c4t);t.paramsRef.has(s)?qR(e,t.paramsRef.get(s)):t.columnRef.has(s)?G4e(r,s,t,e):Oh(t.params,s)&&qR(r,s)}};function Nye(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Fo(H2,s))a=s.value;else try{Ur(s,n,tne,e),a=n.param(s)}catch{n.error(e,GOt)}return r(e,a,t,n,i),!1}const FG={...tne,VariableDeclarator:ka("Variable declaration in operator call"),Identifier(e,t,n){q4e(e,t,n)&&t.error(e,QOt)},CallExpression(e,t){const n=V4e(e.callee);FPe(n)?BG(e,n,t):t.error(e,B4e,z4e)}};function a4t(e,t){e.generator&&ka("Generator functions")(e,t),e.async&&ka("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(_A(t,n[0],"tuple1",i(1)),r>1&&_A(t,n[1],"tuple2",i(2)),r>2&&_A(t,n[2],"$param",s)):(_A(t,n[0],"tuple",i(0)),r>1&&_A(t,n[1],"$param",s))),t.root=e.body}function _A(e,t,n,r){Fo(E1,t)?(e.scope.add(t.name),e[n]=t.name):Fo(NPe,t)&&t.properties.forEach(i=>{const s=Fo(E1,i.key)?i.key.name:Fo(H2,i.key)?i.key.value:e.error(i,qOt);Fo(E1,i.value)||e.error(i.value,ZOt),r(i.value.name,s)})}function u4t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Ur(u,e,FG),i.push(e.field(u))):l<a?(Ur(u,e,FG),s.push(e.param(u))):e.error(u,YOt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function V4e(e){return Fo(E1,e)?e.name:Fo(DPe,e)?H4e(e)?l4t(e.property.name):e.property.name:null}function H4e(e){return Fo(E1,e.object)&&e.object.name==="Math"}function l4t(e){return e==="max"?"greatest":e==="min"?"least":e}function q4e(e,t,n){const{name:r}=e;if(!(Fo(DPe,n)&&n.property===e)){if(!(Fo(PPe,n)&&n.key===e))if(t.paramsRef.has(r))qR(e,t.paramsRef.get(r));else if(t.columnRef.has(r))G4e(e,r,t,n);else if(Oh(t.params,r))qR(e,r);else if(Oh(Zte,r))Y4e(e,r);else return!0}}function W4e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,ene),r.aggronly&&!r.$op&&r.error(e,WOt),UPe(e,t,n,o,i)}function G4e(e,t,n,r){const[i,s]=n.columnRef.get(t);W4e(e,i,s,n,r)}function c4t(e,t,n,r){r.params&&!Oh(r.params,t)&&r.error(e,KOt),qR(e,t)}function qR(e,t){e.type=ZRt,e.name=t}function Y4e(e,t){e.type=XRt,e.name=t,e.raw=Zte[t]}function BG(e,t,n){if(t===zPe){const r=n.table;r||n.error(e,r4t),VPe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=gl(s)?r.columnName(s):s;return r.column(o)||n.error(i,ene),o}):r.columnNames())}else e.callee={type:JRt,name:t}}function jG(e,t){Fo(E1,e)?t.scope.add(e.name):Fo(WRt,e)?e.elements.forEach(n=>jG(n,t)):Fo(NPe,e)?e.properties.forEach(n=>jG(n.value,t)):t.error(e.id,JOt)}const f4t={[bN]:1,[OPe]:1};function gc(e,t={}){const n=t.generate||$M,r=t.compiler||Wee,i=h4t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=d4t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Fo(H2,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?Q3t(g):f(n(g),i));u.push(y),f4t[g.type]&&y!==g&&Du(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,x=m.end-6,w=String(d.spec).slice(v,x);Jn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of v8(e))d.value(m+"",g.escape?tOt(d,g,i):i4t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function d4t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function h4t(e){return(e.table?Wz(e.table):e.join?{...Wz(e.join[1]),...Wz(e.join[0])}:{})||{}}function Wz(e){return e&&fs(e.params)?e.params():{}}const K4e="Expr",Vd="ExprList",X4e="ExprNumber",bI="ExprObject",ZE="JoinKeys",iL="JoinValues",Bf="Options",nne="OrderKeys",Ty="SelectionList",Jb="TableRef",eS="TableRefList",p4t="Descending",m4t="Query",g4t="Selection",y4t="Verb",v4t="Window";function M8(e,t){return e&&e.expr?new Pye({...e,...t}):new Pye(t,e)}class Pye{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...fs(this.expr)?{func:!0}:{}}}}function b4t(e){return M8(e,{desc:!0})}function a_(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return M8(e,t?{expr:t,...r}:r)}function x4t(e,t,n){return M8(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function _4t(e){const t=n=>n;return t.toString=()=>e,t}function Oye(e,t){return t=t&&fs(t.query)?t.query():t,t&&fs(t.evaluate)?t.evaluate(null,e):e(t)}function Q4e(e){return Du(e)&&(Zr(e.all)||Zr(e.matches)||Zr(e.not)||Zr(e.range))}function WR(e){return e&&fs(e.toObject)?e.toObject():fs(e)?{expr:String(e),func:!0}:Zr(e)?e.map(WR):Du(e)?R8(e,t=>WR(t)):e}function rne(e){return Zr(e)?e.map(rne):Du(e)?Zr(e.verbs)?sne.from(e):Zr(e.all)?RT():Zr(e.range)?W3t(...e.range):Zr(e.match)?G3t(RegExp(...e.match)):Zr(e.not)?t4e(e.not.map(WR)):w4t(e):e}function w4t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=a_(n):e.func===!0&&(t=n=_4t(n)),Du(e.window)){const{frame:r,peers:i}=e.window;t=n=x4t(n,r,i)}e.desc===!0&&(t=b4t(n))}return e===t?R8(e,r=>rne(r)):t}function E4t(e){return Zr(e)?e.map(S4t):e}function S4t(e){const t=[];return hc(e).forEach(n=>{gl(n)?t.push(n):Ya(n)?t.push(a_(n,null)):Du(n)&&n.expr||fs(n)?t.push(n):Jn(`Invalid key value: ${n+""}`)}),t}function T4t(e){return Zr(e)?e.map(C4t):e}function C4t(e,t){return t<2?hc(e):e}function A4t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Du(r)&&!fs(r))for(const i in r)t.push(r[i]);else n=gl(r)?r:Ya(r)?a_(n):fs(r)?n:Jn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const I4t={[K4e]:t6e,[Vd]:NT,[X4e]:O4t,[bI]:rv,[ZE]:$4t,[iL]:M4t,[nne]:NT,[Ty]:N4t};function k4t(e,t,n){return t===Jb?$ye(e):t===eS?e.map($ye):J4e(WR(e),t,n)}function J4e(e,t,n){return t===Bf?e&&R4t(e,n):I4t[t](e)}function R4t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?J4e(i,t[r]):i}return n}function D4t(e,t){return gc({expr:e},{...t,ast:!0}).exprs[0]}function ine(e){return{type:bN,name:e}}function Z4e(e){return{type:bN,index:e}}function rv(e,t){if(Ya(e))return D4t(e,t);if(e.expr){let n;if(e.field===!0?n=ine(e.expr):e.func===!0&&(n=rv(e.expr,t)),n)return e.desc&&(n={type:p4t,expr:n}),e.window&&(n={type:v4t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...rv(e[n],t),as:n}))}function e6e(e){const t=g4t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:NT(e.not)}:e.range?{type:t,operator:"range",arguments:NT(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Jn("Invalid input")}function N4t(e){return hc(e).map(P4t).flat()}function P4t(e){return Q4e(e)?e6e(e):gl(e)?Z4e(e):Ya(e)?ine(e):Du(e)?Object.keys(e).map(t=>({type:bN,name:t,as:e[t]})):Jn("Invalid input")}function t6e(e){return Q4e(e)?e6e(e):gl(e)?Z4e(e):Ya(e)?ine(e):Du(e)?rv(e):Jn("Invalid input")}function NT(e){return hc(e).map(t6e).flat()}function O4t(e){return gl(e)?e:rv(e)}function $4t(e){return Zr(e)?e.map(NT):rv(e,{join:!0})}function M4t(e){return Zr(e)?e.map((t,n)=>n<2?NT(t):rv(t,{join:!0})):rv(e,{join:!0})}function $ye(e){return e&&fs(e.toAST)?e.toAST():e}class n6e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===ZE?E4t(a):o===iL?T4t(a):o===nne?A4t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=UG[t.verb],r=(n.schema||[]).map(({name:i})=>rne(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Jb?Oye(n,o):s===eS?o.map(a=>Oye(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=WR(this[n])}),t}toAST(){const t={type:y4t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=k4t(this[n],r,i)}),t}}function Oi(e,t){return Object.assign((...n)=>new n6e(e,t,n),{schema:t})}const UG={count:Oi("count",[{name:"options",type:Bf}]),derive:Oi("derive",[{name:"values",type:bI},{name:"options",type:Bf,props:{before:Ty,after:Ty}}]),filter:Oi("filter",[{name:"criteria",type:bI}]),groupby:Oi("groupby",[{name:"keys",type:Vd}]),orderby:Oi("orderby",[{name:"keys",type:nne}]),relocate:Oi("relocate",[{name:"columns",type:Ty},{name:"options",type:Bf,props:{before:Ty,after:Ty}}]),rename:Oi("rename",[{name:"columns",type:Ty}]),rollup:Oi("rollup",[{name:"values",type:bI}]),sample:Oi("sample",[{name:"size",type:X4e},{name:"options",type:Bf,props:{weight:K4e}}]),select:Oi("select",[{name:"columns",type:Ty}]),ungroup:Oi("ungroup"),unorder:Oi("unorder"),reify:Oi("reify"),dedupe:Oi("dedupe",[{name:"keys",type:Vd,default:[]}]),impute:Oi("impute",[{name:"values",type:bI},{name:"options",type:Bf,props:{expand:Vd}}]),fold:Oi("fold",[{name:"values",type:Vd},{name:"options",type:Bf}]),pivot:Oi("pivot",[{name:"keys",type:Vd},{name:"values",type:Vd},{name:"options",type:Bf}]),spread:Oi("spread",[{name:"values",type:Vd},{name:"options",type:Bf}]),unroll:Oi("unroll",[{name:"values",type:Vd},{name:"options",type:Bf,props:{drop:Vd}}]),lookup:Oi("lookup",[{name:"table",type:Jb},{name:"on",type:ZE},{name:"values",type:Vd}]),join:Oi("join",[{name:"table",type:Jb},{name:"on",type:ZE},{name:"values",type:iL},{name:"options",type:Bf}]),cross:Oi("cross",[{name:"table",type:Jb},{name:"values",type:iL},{name:"options",type:Bf}]),semijoin:Oi("semijoin",[{name:"table",type:Jb},{name:"on",type:ZE}]),antijoin:Oi("antijoin",[{name:"table",type:Jb},{name:"on",type:ZE}]),concat:Oi("concat",[{name:"tables",type:eS}]),union:Oi("union",[{name:"tables",type:eS}]),intersect:Oi("intersect",[{name:"tables",type:eS}]),except:Oi("except",[{name:"tables",type:eS}])};let sne=class r6e extends vPe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new r6e(t.map(n6e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Mye(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Mye(this,"toAST",{type:m4t})}};function Mye(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function L4t(e,t){return new sne(e._verbs.concat(t),e._params,e._table)}for(const e in UG){const t=UG[e];sne.prototype["__"+e]=function(n,...r){return L4t(n,t(...r))}}function J2(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function F4t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function one(e,t){const n=wf();return t.forEach((r,i)=>{const s=Ya(r)?r:i;if(s){const o=e.column(i)||Jn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function i6e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Jn("relocate requires a before or after option."),i&&s&&Jn("relocate accepts only one of the before or after options."),t=Tg(e,t);const o=[...Tg(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),one(e,u)}function IN(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function ane(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function B4t(e,t=0,n=e.length){let r=n?e[t++]:Yr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function j4t(e,t=0,n=e.length){let r=n?e[t++]:Yr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function wO(e){return MR(e)?e:+e}function U4t(e,t){const n=e.length;if(!n)return Yr;if((t=+t)<=0||n<2)return wO(e[0]);if(t>=1)return wO(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=wO(e[i]);return MR(s)?s:s+(wO(e[i+1])-s)*(r-i)}class z4t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:B4t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:j4t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(ane)),U4t(this._sorted,t)}}const sL=(e,t,n)=>J2(t,"{"+IN(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function V4t(e,t){const{ops:n,output:r}=H4t(e,t),i=e[0].fields,s=i.length,o=s===0?une:s===1?q4t:s===2?W4t:Jn("Unsupported field count: "+s);return new o(i,n,r,t)}function H4t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=BPe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class une extends K3t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new z4t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class q4t extends une{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=sL(n,s,"add"),this._rem=sL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,mh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,mh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class W4t extends une{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=sL(n,s,"add"),this._rem=sL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,mh(i)&&mh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,mh(i)&&mh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function iw(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=Z2(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function Z2(e,t,n){if(!t.length)return n;const r=s6e(t),i=e.groups(),s=i?i.size:1;return n=n||g8(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=a6e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=o6e(e,o);o.write(a,n,0)}),n}function s6e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(V4t(r[i],t));return n}function o6e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function a6e(e,t,n){const{keys:r,size:i}=n,s=g8(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function u6e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function l6e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Lye=l6e(ane);function G4t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?J2(["w","r","k"],"{"+IN(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i.map(x=>x.init());for(let x=0;x<f;++x)r[x].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,x=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Lye.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Lye.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],C=a[E];for(let I=x;I<p.i0;++I)T.rem(C,s[I],e);for(let I=w;I<p.i1;++I)T.add(C,s[I],e);T.write(C,u,l)}return h(p,u,l),u}};return p}const Y4t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),K4t=e=>!!e.peers;function X4t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=jPe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Q4t(e,t,n,r={},i){const s=e.data(),o=J4t(i,s),a=o.length,u=J2(["r","d","op"],"{"+IN(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Z4t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function J4t(e,t){const n={};return e.forEach(r=>{const i=Y4t(r),s=K4t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Hee(r.name)?a.push(r):u.push(X4t(r))}),Object.values(n).map(r=>G4t(t,r.frame,r.peers,r.winOps,s6e(r.aggOps,r.frame[0]!=null?-1:1)))}function Z4t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function e6t(e){return qee(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function lne(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=wf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=t6t(r),c=e.isGrouped()?e.groups().size:1,f=Z2(e,u,g8(r.length,()=>Array(c)));return l.length?Q4t(e,a,n,f,l):n6t(e,a,n,f),e.create(o)}function t6t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(e6t(s)?n:t).push(s)}return[t,n]}function n6t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function r6t(e,t,n={}){const r=lne(e,gc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:i6e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function i6t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const EO=2147483648,s6t=4294967295;class c6e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&EO>>>t}set(t){this._bits[t>>5]|=EO>>>t}clear(t){this._bits[t>>5]&=~(EO>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&s6t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=EO>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function o6t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new c6e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function a6t(e,t){const n=gc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=lne(e,n,{drop:!0}).column("p");r=s=>i[s]}return o6t(e,r)}function f6e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=iw(e,r,n),l=wf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(w),m,m+E)},x=p?(w,E)=>{for(let T=0;T<E;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((T,C)=>{const I=hc(w(T,C)),N=Math.min(I.length,s);v(T,N);for(let k=0;k<N;++k)E[m+k]=I[k];x(m,N),m+=N})}else e.scan((w,E)=>{let T=0;const C=u.map(I=>{const N=hc(I(w,E));return T=Math.min(Math.max(T,N.length),s),N});v(w,T);for(let I=0;I<y;++I){const N=h[I],k=C[I];for(let P=0;P<T;++P)N[m+P]=k[P]}x(m,T),m+=T});return e.create(l.new())}function u6t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=iw(e,r,n);return f6e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Mh(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=gl(o)?t.columnName(o):o,Ya(o)?i.set(o,a_(o)):fs(o)?Tg(t,o).forEach(s):Du(o)?ZOe(i,o):Jn(`Invalid ${e} value: ${o+""}`)};return hc(n).forEach(s),r.preparse&&r.preparse(i),gc(i,{table:t,...r})}function l6t(e,t,n){return u6t(e,Mh("fold",e,t),n)}function Fye(e,t,n,r){const i=n&&n.length;return c6t(i?f6t(e,n,r):e,t,i)}function c6t(e,{names:t,exprs:n,ops:r},i){const s=iw(e,r,n),o=i?null:wf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=mh(p)?p:d(h)})}),i?e:e.create(o)}function f6t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=MM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=wf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=MM(o.map((p,m)=>g=>g[m])),h=J2("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Bye(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Bye(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Bye(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function cne(e,{names:t,exprs:n,ops:r}){const i=wf(),s=e.groups();return s&&u6e(i,s),d6t(t,n,s,Z2(e,r),i),e.create(i.new())}function d6t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function h6t(e,t,n={}){if(t=gc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Jn(`Invalid impute column ${fm(r)}`)),n.expand){const r={preparse:p6t,aggronly:!0},i=Mh("impute",e,n.expand,r),s=cne(e.ungroup(),i);return Fye(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Fye(e,t)}function p6t(e){e.forEach((t,n)=>t.field?e.set(n,APe(t+"")):0)}function m6t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function d6e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function g6t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function y6t(e,t){const n=["i","a","j","b"];return J2(n,"{"+IN(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function v6t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=wf(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=y6t(g,y);if((Zr(n)?x6t:b6t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function b6t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function x6t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,x=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,x=(T,C,I,N)=>e(I,N,T,C));const w=g6t(v,m,g),E=p.length;for(let T=0;T<E;++T){const C=p[T],I=w.get(d(C,f));if(I){const N=I.length;for(let k=0;k<N;++k){const P=I[k];x(C,f,v[P],m),y[P]=1}h[T]=1}}}function oL(e,t,n){const r=new Map;hc(n).forEach((s,o)=>{s=gl(s)?t.columnName(s):s,Ya(s)?r.set(o,a_(s)):fs(s)||Du(s)&&s.expr?r.set(o,s):Jn(`Invalid ${e} key value: ${s+""}`)});const i=gc(r,{table:t,aggregate:!1,window:!1});return MM(i.exprs,!0)}function _6t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function fne(e,t,n){if(n)Ya(n)?n=[n,n]:Zr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=_6t(e.columnNames(),t.columnNames());r.length||Jn("Natural join requires shared column names."),n=[r,r]}return n}function h6e(e,t,n,r){return n.length!==r.length&&Jn("Mismatched number of join keys"),[oL("join",e,n),oL("join",t,r)]}const w6t={aggregate:!1,window:!1},E6t={...w6t,index:1};function jye(e,t,n,r,i={}){n=fne(e,t,n);const s={join:[e,t]};let o;if(Zr(n)){const[a,u]=n.map(hc);o=h6e(e,t,a,u),r||(r=S6t(e,a,u,i))}else o=gc({on:n},s).exprs[0],r||(r=[RT(),RT()]);return v6t(e,t,o,T6t(e,t,r,s,i&&i.suffix),i)}function S6t(e,t,n,r){const i=[];t.forEach((o,a)=>Ya(o)&&o===n[a]?i.push(o):0);const s=t4e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${fm(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,RT()]:[RT(),s]}function T6t(e,t,n,r,i=[]){if(Zr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Mh("join",e,n[0],r)),u--&&(o=Mh("join",t,n[1],E6t)),u--&&(a=gc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Uye(s.names,l,i[0]||"_1"),i[1]!==""&&Uye(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return gc(n,r)}function Uye(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function C6t(e,t,n,r={}){const i=new c6e(e.totalRows());return(Zr(n)?A6t:I6t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function A6t(e,t,n,[r,i]){const s=d6e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function I6t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function zye(e,t,n,r){n=fne(e,t,n);const i=Zr(n)?h6e(e,t,...n.map(hc)):gc({on:n},{join:[e,t]}).exprs[0];return C6t(e,t,i,r)}function k6t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=wf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Yr)));const l=d6e(t,r),c=J2(["lr","rr","data"],"{"+IN(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),iw(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function R6t(e,t,n,r){return n=fne(e,t,n),k6t(e,t,[oL("lookup",e,n[0]),oL("lookup",t,n[1])],Mh("lookup",t,r))}const zG=(e,t)=>e??t;function D6t(e,t,n,r={}){const{keys:i,keyColumn:s}=N6t(e,t,r),o=zG(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>Z2(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(P6t(n,a,e.groups(),u))}function N6t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=zG(n.sort,!0),s=zG(n.keySeparator,"_"),o=iw(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=Z2(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function P6t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=wf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&u6e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function O6t(e,t,n,r){return D6t(e,Mh("fold",e,t),Mh("fold",e,n,{preparse:$6t,aggronly:!0}),r)}function $6t(e){e.forEach((t,n)=>t.field?e.set(n,SPe(t+"")):0)}function M6t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),one(e,Tg(e,t,n))}function Vye(e,t){return cne(e,gc(t,{table:e,aggronly:!0,window:!1}))}function L6t(e,t,n,r){return(t?r?B6t:F6t:r?U6t:j6t)(e.length,e,n,r)}function F6t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*V2()|0];return t}function B6t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=l6e(ane).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*V2())];return t}function j6t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*V2();s<e&&(t[s|0]=n[i])}return t}function U6t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(V2())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function z6t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=V2()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function V6t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):L6t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&z6t(u),e.reify(u)}function H6t(e,t,n={}){return V6t(e,q6t(e,t),W6t(e,n.weight),n)}const p6e=e=>t=>e.get(t)||0;function q6t(e,t){return gl(t)?()=>t:p6e(cne(e,gc({size:t},{table:e,window:!1})).column("size"))}function W6t(e,t){return t==null?null:(t=gl(t)?e.columnName(t):t,p6e(Ya(t)?e.column(t):lne(e,gc({w:t},{table:e}),{drop:!0}).column("w")))}function G6t(e,t){return one(e,Tg(e,t))}function Y6t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=iw(e,r,n),l=wf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=K6t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function K6t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=hc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Yr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function X6t(e,t,n){return Y6t(e,Mh("spread",e,t),n)}function Q6t(e,t){return e.concat(t).dedupe()}function J6t(e,t,n){return f6e(e,Mh("unroll",e,t),n&&n.drop?{...n,drop:Mh("unroll",e,n.drop).names}:n)}function Z6t(e,t){return e.create({groups:e$t(e,t)})}function e$t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=iw(e,r,n);const o=MM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function t$t(e,t){return Z6t(e,Mh("groupby",e,t))}function n$t(e,t){return e.create({order:t})}const r$t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function i$t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=gc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([$M(p,{index:"a",op:o}),$M(p,{index:"b",op:a})])},window:!1}),l=Z2(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=r$t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function s$t(e,t){return n$t(e,o$t(e,t))}function o$t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Du(o)&&!fs(o))for(const a in o)i(o[a]);else i(gl(o)?a_(s,e.columnName(o)):Ya(o)?a_(s):fs(o)?s:Jn(`Invalid orderby field: ${s+""}`))}),i$t(e,r)}function a$t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=wf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Yr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function u$t(e,t){const n=wf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?a6e(e,t,r):[o6e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function l$t(e){return e.isGrouped()?e.create({groups:null}):e}function c$t(e){return e.isOrdered()?e.create({order:null}):e}const f$t={__antijoin:(e,t,n)=>zye(e,t,n,{anti:!0}),__count:(e,t={})=>Vye(e,{[t.as||"count"]:TPe()}),__cross:(e,t,n,r)=>jye(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:a$t,__dedupe:F4t,__derive:r6t,__except:i6t,__filter:a6t,__fold:l6t,__impute:h6t,__intersect:m6t,__join:jye,__lookup:R6t,__pivot:O6t,__relocate:i6e,__rename:M6t,__rollup:Vye,__sample:H6t,__select:G6t,__semijoin:zye,__spread:X6t,__union:Q6t,__unroll:J6t,__groupby:t$t,__orderby:s$t,__ungroup:l$t,__unorder:c$t,__reduce:u$t};Object.assign(R0.prototype,f$t);function m6e(e,t){return R0.from(e,t)}function DS(e){return M8(e,{escape:!0,toString(){Jn("Escaped values can not be serialized.")}})}R0.prototype;var d$t="Expected a function",Hye=NaN,h$t="[object Symbol]",p$t=/^\s+|\s+$/g,m$t=/^[-+]0x[0-9a-f]+$/i,g$t=/^0b[01]+$/i,y$t=/^0o[0-7]+$/i,v$t=parseInt,b$t=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,x$t=typeof self=="object"&&self&&self.Object===Object&&self,_$t=b$t||x$t||Function("return this")(),w$t=Object.prototype,E$t=w$t.toString,S$t=Math.max,T$t=Math.min,Gz=function(){return _$t.Date.now()};function C$t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(d$t);t=qye(t)||0,VG(n)&&(c=!!n.leading,f="maxWait"in n,s=f?S$t(qye(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var C=r,I=i;return r=i=void 0,l=T,o=e.apply(I,C),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var C=T-u,I=T-l,N=t-C;return f?T$t(N,s-I):N}function g(T){var C=T-u,I=T-l;return u===void 0||C>=t||C<0||f&&I>=s}function y(){var T=Gz();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Gz())}function E(){var T=Gz(),C=g(T);if(r=arguments,i=this,u=T,C){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=x,E.flush=w,E}function VG(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function A$t(e){return!!e&&typeof e=="object"}function I$t(e){return typeof e=="symbol"||A$t(e)&&E$t.call(e)==h$t}function qye(e){if(typeof e=="number")return e;if(I$t(e))return Hye;if(VG(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VG(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(p$t,"");var n=g$t.test(e);return n||y$t.test(e)?v$t(e.slice(2),n?2:8):m$t.test(e)?Hye:+e}var k$t=C$t;const Gd=Am(k$t);function g6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=D.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=D.useMemo(()=>Lv(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Wo,{children:_.jsx(_r,{gap:3,children:_.jsx(Qe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const R$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:g6e},Symbol.toStringTag,{value:"Module"})),Yz=15;function y6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=D.useState([0,0]),[l,c]=D.useState(!1);return D.useEffect(()=>{const f=Jr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Yz&&Math.abs(t(g[r.y])-p[1])<Yz);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Yz,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const D$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:y6e},Symbol.toStringTag,{value:"Module"})),ps={top:15,left:100,right:15,bottom:70};function HG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Jc(),[c]=Jc(),[f]=Jc(),[d,h]=D.useState(!0),p=D.useMemo(()=>l-ps.left-ps.right,[l]),m=D.useMemo(()=>u-ps.top-ps.bottom,[u]),g=D.useMemo(()=>{const k=Array.from(new Set(s.map(P=>P[i.category])));return Bv(a8).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:x,yMax:w}=D.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[P,M]=bR(k),O=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=bR(O);return{xMin:P,xMax:M,yMin:B,yMax:q}},[s,i.x,i.y]),E=D.useMemo(()=>{const k=x-y;return p<=0?null:i.dataType==="date"?gee([ps.left,p+ps.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):dc([ps.left,p+ps.left]).domain([y-k/10,x+k/10]).nice()},[i.dataType,p,x,y]),T=D.useMemo(()=>{const k=w-v;return m<=0?null:dc([m+ps.top,ps.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),C=D.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=JRe().extent([[ps.left,ps.top+m-5],[ps.left+p,ps.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],E,T,M.mode)}),P=ZRe().extent([[ps.left-5,ps.top],[ps.left+5,ps.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],E,T,M.mode)});return c.current&&f.current&&(Jr(f.current).call(P),Jr(c.current).call(k),t.hasBrush||(Jr(f.current).call(P.move,[T(w),T(v)]),Jr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{Jr(f.current).call(P.move,[T(w),T(v)]),Jr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=eDe().extent([[ps.left,ps.top],[ps.left+p,ps.top+m]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],E,T,P.mode)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(Jr(a.current).call(k.move,null),e(null))});return Jr(a.current).call(k),()=>{Jr(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(x),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(x),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(x),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,x,y,E,w,v,T]),I=D.useMemo(()=>o.length===0?null:new Set(o),[o]),N=D.useMemo(()=>!E||!T?null:s.map((k,P)=>{if(k[i.x]===null||k[i.y]===null)return null;const M=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:I&&!I.has(k[i.ids])?.3:1,r:3,fill:I&&!I.has(k[i.ids])?"lightgray":g(k[i.category]),cx:M,cy:T(k[i.y])},P)}),[I,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return D.useEffect(()=>{r==="Axis Selection"&&vRe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Gs,{children:[_.jsxs(_r,{children:[_.jsx(ln,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(v5,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(_r,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(g6e,{yScale:T,label:i.y,horizontalPosition:ps.left,xRange:E.range()}),_.jsx(Uee,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+ps.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,N,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(y6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Gs,{style:{flexGrow:1},gap:50,children:[_.jsxs(Gs,{gap:0,children:[_.jsx(Qe,{children:i.x}),_.jsx(iT,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Gs,{gap:0,children:[_.jsx(Qe,{children:i.y}),_.jsx(iT,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const N$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:HG,default:HG},Symbol.toStringTag,{value:"Module"}));function Wye({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=D.useState(null),[s,o]=D.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});D.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=D.useState(null);D.useEffect(()=>{iDe(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=D.useMemo(()=>a?m6e(a):null,[a]),{actions:c,trrack:f}=D.useMemo(()=>{const y=rw.create(),v=y.register("brush",(C,I)=>(C.all={brush:I},C)),x=y.register("brushMove",(C,I)=>(C.all={brush:I},C)),w=y.register("brushResize",(C,I)=>(C.all={brush:I},C)),E=y.register("brushClear",(C,I)=>(C.all={brush:I},C)),T=yN({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:x,brushResize:w,clearBrush:E},trrack:T}},[]),d=D.useCallback((y,v)=>{y==="drag"?f.apply("Move Brush",c.brushMove(v)):y==="handle"&&f.apply("Brush",c.brush(v))},[c,f]),h=D.useMemo(()=>Gd(d,100,{maxWait:100}),[d]),p=D.useCallback((y,v,x,w,E)=>{if(!v||!x)return;const T=v.invert(y[0][0]||s.x1),C=v.invert(y[1][0]||s.x2),I=x.invert(y[1][1]||s.y2),N=x.invert(y[0][1]||s.y1);let k=null;if(w==="clear")k=l;else if(E){const M=new Set(E);k=l.filter(DS(O=>M.has(O[e.ids])))}else e.brushType==="Axis Selection"?k=l.filter(DS(M=>new Date(M[e.x])>=new Date(T)&&new Date(M[e.x])<=new Date(C)&&M[e.y]>=I&&M[e.y]<=N)):k=l.filter(DS(M=>M[e.x]>=T&&M[e.x]<=C&&M[e.y]>=I&&M[e.y]<=N));const P={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?k==null?void 0:k.array("id"):[]};o(P),w==="drag"||w==="handle"?h(w,P):w==="clear"&&f.apply("Clear Brush",c.clearBrush(P)),i(k),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=D.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=D.useCallback(y=>{i(y)},[]);return a?_.jsxs(Gs,{gap:"xs",children:[_.jsx(HG,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),_.jsx(bG,{data:a,parameters:e,barsTable:m})]}):_.jsx(wc,{})}const P$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Wye,default:Wye},Symbol.toStringTag,{value:"Module"})),O$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function v6e({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const $$t=Object.freeze(Object.defineProperty({__proto__:null,Bars:v6e},Symbol.toStringTag,{value:"Module"}));function dne({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=D.useMemo(()=>{const o=dc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const M$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:dne},Symbol.toStringTag,{value:"Module"}));function b6e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=D.useMemo(()=>{const o=F2().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const L$t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:b6e},Symbol.toStringTag,{value:"Module"})),F$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function B$t({parameters:e}){const[n,r]=z2(F$t),i=F2().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=dc().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(b6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(dne,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(v6e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const j$t=Object.freeze(Object.defineProperty({__proto__:null,default:B$t},Symbol.toStringTag,{value:"Module"}));function x6e({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const U$t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:x6e},Symbol.toStringTag,{value:"Module"}));function hne({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const z$t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:hne},Symbol.toStringTag,{value:"Module"})),V$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},H$t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=nNe().size([t-10,n-10]).padding(1.5),o=J5(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},q$t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function W$t({parameters:e}){const[t,n]=z2(V$t),r=H$t(e,n.width,n.height),i=q$t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(x6e,{data:r}),_.jsx(hne,{positions:i})]})})})}const G$t=Object.freeze(Object.defineProperty({__proto__:null,default:W$t},Symbol.toStringTag,{value:"Module"}));function _6e({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const Y$t=Object.freeze(Object.defineProperty({__proto__:null,Slices:_6e},Symbol.toStringTag,{value:"Module"}));function w6e({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const K$t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:w6e},Symbol.toStringTag,{value:"Module"})),X$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},Q$t=qAt().value(e=>e.value),wA=150;function J$t({parameters:e}){const[t,n]=z2(X$t),r=Q$t(e.data),i=r.map(o=>eG().innerRadius(0).outerRadius(wA).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>eG().outerRadius(wA+10).innerRadius(wA+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+wA,n.marginTop+wA].join(",")})`,children:[_.jsx(_6e,{arcs:i}),_.jsx(w6e,{positions:s})]})})})}const Z$t=Object.freeze(Object.defineProperty({__proto__:null,default:J$t},Symbol.toStringTag,{value:"Module"}));function E6e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=D.useMemo(()=>{const o=dc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const eMt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:E6e},Symbol.toStringTag,{value:"Module"}));function S6e({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const tMt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:S6e},Symbol.toStringTag,{value:"Module"})),nMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function rMt({parameters:e}){const[n,r]=z2(nMt),i=F2().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=dc().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(x=>+x.value),g=p.reduce((x,w)=>Number(x)+Number(w))/100,y={};p.forEach((x,w)=>{y[String.fromCharCode(w+65)]=x/g});const v=[y];return hIt().keys(e.data.map(x=>x.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(E6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(dne,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(S6e,{data:c,barWidth:f,yScale:s}),_.jsx(hne,{positions:d})]})]})})})}const iMt=Object.freeze(Object.defineProperty({__proto__:null,default:rMt},Symbol.toStringTag,{value:"Module"}));function Gye({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function sMt({parameters:e,setAnswer:t}){const n=wd(),[r,i]=D.useState(""),{goToNextStep:s,isNextDisabled:o}=zke(),a=D.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=D.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=D.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=D.useCallback(()=>{o||s()},[o,s]);D.useEffect(()=>{const h=ret([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(qc,{children:[_.jsxs(qc.Col,{span:2,children:[_.jsx(Gye,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(ln,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(xhe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(qc.Col,{span:2,children:[_.jsx(Gye,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(ln,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(xhe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const oMt=Object.freeze(Object.defineProperty({__proto__:null,default:sMt},Symbol.toStringTag,{value:"Module"})),aMt=D.createContext(null);function bu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let kN=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const SO={decode:function(e,t){return bu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function T6e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(T6e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Yye(e,t,n){const r=T6e(e,t||{});return n==null||n.appendChild(r),r}var uMt=Object.freeze({__proto__:null,createElement:Yye,default:Yye});const lMt={fetchBlob:function(e,t,n){return bu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){bu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>bu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>bu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class cMt extends kN{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return bu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let qG=class WG extends kN{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=E=>{if(E.preventDefault(),E.stopPropagation(),u&&Date.now()-m<a)return;const T=E.clientX,C=E.clientY,I=T-d,N=C-h;if(p||Math.abs(I)>s||Math.abs(N)>s){const k=t.getBoundingClientRect(),{left:P,top:M}=k;p||(r==null||r(d-P,h-M),p=!0),n(I,N,T-P,C-M),d=T,h=C}},y=E=>{if(p){const T=E.clientX,C=E.clientY,I=t.getBoundingClientRect(),{left:N,top:k}=I;i==null||i(T-N,C-k)}l()},v=E=>{E.relatedTarget&&E.relatedTarget!==document.documentElement||y(E)},x=E=>{p&&(E.stopPropagation(),E.preventDefault())},w=E=>{p&&E.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",x,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,x=0;for(let w=0;w<=a;w++){const E=Math.round(w*m);if(E>y){const I=Math.round(v*c*i),N=I+Math.round(x*c*i)||1;let k=c-I;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-N),r[g](y*(d+h),k,d,N,p),y=E,v=0,x=0}const T=Math.abs(s[w]||0),C=Math.abs(o[w]||0);T>v&&(v=T),C>x&&(x=C)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(WG.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,v=Math.min(l-y,c);if(v<=0)return;const x=t.map(w=>{const E=Math.floor(y/l*w.length),T=Math.floor((y+v)/l*w.length);return w.slice(E,T)});this.renderSingleCanvas(x,n,v,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,v=Math.floor(y/l*h);Object.keys(f).length>WG.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(v-1),d(v),d(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return bu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return bu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};qG.MAX_CANVAS_WIDTH=8e3,qG.MAX_NODES=10;class fMt extends kN{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Kye extends kN{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return bu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return bu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return bu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const dMt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class GR extends cMt{static create(t){return new GR(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Kye:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},dMt,t),this.timer=new fMt;const r=n?void 0:this.getMediaElement();this.renderer=new qG(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=SO.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=SO.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return bu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield lMt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Kye&&(a.duration=o)}if(r)this.decodedData=SO.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield SO.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return bu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return bu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return bu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return bu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}GR.BasePlugin=class extends kN{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},GR.dom=uMt;function hMt(e){return GR.create(e)}function pMt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Xye=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),mMt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:Xye(i),enabled:Xye(s)}};function Qye(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=pMt(i)}return n}function gMt({container:e,plugins:t=[],onMount:n,...r}){const i=D.useRef(!1),[s,o]=D.useState({}),a=D.useRef([]),[u,l]=D.useState(null);return D.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Qye(s,t);a.current=Object.keys(f);const d=hMt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),D.useEffect(()=>{if(u){const c=Qye(s,t),{disabled:f,enabled:d}=mMt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function C6e({children:e,plugins:t=[],onMount:n,...r}){const i=gMt({plugins:t,onMount:n,...r});return ni.createElement(aMt.Provider,{value:i},e)}const A6e=({id:e="waveform",children:t})=>ni.createElement("div",{id:e},t);function Kz(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let I6e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},yMt=class extends I6e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class vMt extends I6e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const bMt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class pne extends yMt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new vMt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new pne(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return Kz(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Kz(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||bMt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Kz(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function k6e({width:e=70,height:t=36}){const n=D.useRef(null),r=D.useRef(null),[i,s]=D.useState(!1);D.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(pne.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=D.useCallback(a=>{n.current=a,s(!0)},[]);return _.jsx(ke,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:_.jsx(C6e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:_.jsx(A6e,{id:"waveform",height:t})})})}function Jye({setAnswer:e}){return D.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),_.jsx(Wo,{style:{height:"70%",width:"100%"},children:_.jsxs(Gs,{children:[_.jsx(Qe,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),_.jsx(Qe,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),_.jsx(Qe,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),_.jsx(Wo,{children:_.jsx(k6e,{height:200,width:400})})]})})}const xMt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Jye,default:Jye},Symbol.toStringTag,{value:"Module"}));function _Mt(){return _.jsx("div",{children:"test react file"})}const wMt=Object.freeze(Object.defineProperty({__proto__:null,default:_Mt},Symbol.toStringTag,{value:"Module"}));function EMt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=D.useRef(null),o=10,a=D.useCallback(u=>{const l=Jr("#Circle"),c=Jr("#click_svg"),f=F$(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return _.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:_.jsx("svg",{id:"click_svg",width:400,height:400,children:_.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const SMt=Object.freeze(Object.defineProperty({__proto__:null,default:EMt},Symbol.toStringTag,{value:"Module"}));function mne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=D.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=D.useCallback(c=>(s?hN("%B"):Lv(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Wo,{children:_.jsx(_r,{gap:3,children:_.jsx(Qe,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Wo,{children:_.jsx(qi,{withinPortal:!0,label:c,children:_.jsx(Qe,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const TMt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:mne},Symbol.toStringTag,{value:"Module"}));function R6e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=D.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Wo,{children:_.jsx(_r,{gap:3,children:_.jsx(Qe,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(_r,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(Qe,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const CMt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:R6e},Symbol.toStringTag,{value:"Module"})),$f={top:15,left:100,right:50,bottom:50};function GG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Jc(),o=D.useMemo(()=>s-$f.left-$f.right,[s]),a=D.useMemo(()=>i-$f.top-$f.bottom,[i]),u=D.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Bv(a8).domain(d)},[n,t.category]),l=D.useMemo(()=>e?dc([$f.left,o+$f.left]).domain([0,Q0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=D.useMemo(()=>e?F2([$f.top,a+$f.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=D.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:$f.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-$f.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(mne,{xScale:l,yRange:c.range(),vertPosition:a+$f.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(R6e,{yScale:c,horizontalPosition:$f.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(wc,{})}const AMt=Object.freeze(Object.defineProperty({__proto__:null,Bar:GG,default:GG},Symbol.toStringTag,{value:"Module"}));function D6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=D.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=D.useMemo(()=>Lv(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Wo,{children:_.jsx(_r,{gap:3,children:_.jsx(Qe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const IMt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:D6e},Symbol.toStringTag,{value:"Module"})),Xz=15;function N6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=D.useState([0,0]),[l,c]=D.useState(!1);return D.useEffect(()=>{const f=Jr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Xz&&Math.abs(t(g[r.y])-p[1])<Xz);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Xz,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const kMt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:N6e},Symbol.toStringTag,{value:"Module"})),ms={top:15,left:100,right:15,bottom:70};function YG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Jc(),[c]=Jc(),[f]=Jc(),[d,h]=D.useState(!0),p=D.useMemo(()=>l-ms.left-ms.right,[l]),m=D.useMemo(()=>u-ms.top-ms.bottom,[u]),g=D.useMemo(()=>{const k=Array.from(new Set(s.map(P=>P[i.category])));return Bv(a8).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:x,yMax:w}=D.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[P,M]=bR(k),O=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=bR(O);return{xMin:P,xMax:M,yMin:B,yMax:q}},[s,i.x,i.y]),E=D.useMemo(()=>{const k=x-y;return p<=0?null:i.dataType==="date"?gee([ms.left,p+ms.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):dc([ms.left,p+ms.left]).domain([y-k/10,x+k/10]).nice()},[i.dataType,p,x,y]),T=D.useMemo(()=>{const k=w-v;return m<=0?null:dc([m+ms.top,ms.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),C=D.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=JRe().extent([[ms.left,ms.top+m-5],[ms.left+p,ms.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],E,T,M.mode)}),P=ZRe().extent([[ms.left-5,ms.top],[ms.left+5,ms.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],E,T,M.mode)});return c.current&&f.current&&(Jr(f.current).call(P),Jr(c.current).call(k),t.hasBrush||(Jr(f.current).call(P.move,[T(w),T(v)]),Jr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{Jr(f.current).call(P.move,[T(w),T(v)]),Jr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=eDe().extent([[ms.left,ms.top],[ms.left+p,ms.top+m]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],E,T,P.mode)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(Jr(a.current).call(k.move,null),e(null))});return Jr(a.current).call(k),()=>{Jr(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(x),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(x),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(x),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,x,y,E,w,v,T]),I=D.useMemo(()=>o.length===0?null:new Set(o),[o]),N=D.useMemo(()=>!E||!T?null:s.map((k,P)=>{if(k[i.x]===null||k[i.y]===null)return null;const M=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:I&&!I.has(k[i.ids])?.3:1,r:3,fill:I&&!I.has(k[i.ids])?"lightgray":g(k[i.category]),cx:M,cy:T(k[i.y])},P)}),[I,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return D.useEffect(()=>{r==="Axis Selection"&&vRe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Gs,{children:[_.jsxs(_r,{children:[_.jsx(ln,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(v5,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(_r,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(D6e,{yScale:T,label:i.y,horizontalPosition:ms.left,xRange:E.range()}),_.jsx(mne,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+ms.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,N,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(N6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Gs,{style:{flexGrow:1},gap:50,children:[_.jsxs(Gs,{gap:0,children:[_.jsx(Qe,{children:i.x}),_.jsx(iT,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Gs,{gap:0,children:[_.jsx(Qe,{children:i.y}),_.jsx(iT,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const RMt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:YG,default:YG},Symbol.toStringTag,{value:"Module"}));function Zye({parameters:e,setAnswer:t}){const[n,r]=D.useState(null),[i,s]=D.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=D.useState(null);D.useEffect(()=>{iDe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=D.useMemo(()=>o?m6e(o):null,[o]),{actions:l,trrack:c}=D.useMemo(()=>{const g=rw.create(),y=g.register("brush",(T,C)=>(T.all={brush:C},T)),v=g.register("brushMove",(T,C)=>(T.all={brush:C},T)),x=g.register("brushResize",(T,C)=>(T.all={brush:C},T)),w=g.register("brushClear",(T,C)=>(T.all={brush:C},T)),E=yN({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:x,clearBrush:w},trrack:E}},[]),f=D.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=D.useMemo(()=>Gd(f,100,{maxWait:100}),[f]),h=D.useCallback((g,y,v,x,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),C=v.invert(g[1][1]||i.y2),I=v.invert(g[0][1]||i.y1);let N=null;if(x==="clear")N=u;else if(w){const P=new Set(w);N=u.filter(DS(M=>P.has(M[e.ids])))}else e.brushType==="Axis Selection"?N=u.filter(DS(P=>new Date(P[e.x])>=new Date(E)&&new Date(P[e.x])<=new Date(T)&&P[e.y]>=C&&P[e.y]<=I)):N=u.filter(DS(P=>P[e.x]>=E&&P[e.x]<=T&&P[e.y]>=C&&P[e.y]<=I));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:x!=="clear",ids:x!=="clear"?N==null?void 0:N.array("id"):[]};s(k),x==="drag"||x==="handle"?d(x,k):x==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(N),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=D.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=D.useCallback(g=>{r(g)},[]);return o?_.jsxs(Gs,{gap:"xs",children:[_.jsx(YG,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(GG,{data:o,parameters:e,barsTable:p})]}):_.jsx(wc,{})}const DMt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Zye,default:Zye},Symbol.toStringTag,{value:"Module"})),NMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),PMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class OMt extends ni.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?_.jsx(Qe,{children:this.state.error.toString()}):this.props.children}}const e1e=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":oRt,"../public/example-brush-interactions/assets/Bar.tsx":lRt,"../public/example-brush-interactions/assets/BrushPlot.tsx":P$t,"../public/example-brush-interactions/assets/Paintbrush.tsx":D$t,"../public/example-brush-interactions/assets/Scatter.tsx":N$t,"../public/example-brush-interactions/assets/XAxisBar.tsx":aRt,"../public/example-brush-interactions/assets/YAxis.tsx":R$t,"../public/example-brush-interactions/assets/YAxisBar.tsx":uRt,"../public/example-brush-interactions/assets/types.ts":O$t,"../public/example-cleveland/assets/BarChart.tsx":j$t,"../public/example-cleveland/assets/BubbleChart.tsx":G$t,"../public/example-cleveland/assets/PieChart.tsx":Z$t,"../public/example-cleveland/assets/StackedBarChart.tsx":iMt,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":$$t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":U$t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":z$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":eMt,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":M$t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":L$t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":Y$t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":K$t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":tMt,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":rRt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":oMt,"../public/libraries/mic-check/assets/AudioTest.tsx":xMt,"../public/libraries/test/assets/test.tsx":wMt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":SMt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":AMt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":DMt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":kMt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":RMt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":TMt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":IMt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":CMt,"../public/tutorial/react-and-randomization/assets/some.tsx":NMt,"../public/tutorial/react-and-randomization/assets/types.ts":PMt});function $Mt({currentConfig:e,provState:t}){const n=_d(),r=wd(),i=`../public/${e.path}`,s=i in e1e?e1e[i].default:null,o=Fu(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Ha(),l=D.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return _.jsx(D.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:s?_.jsx(OMt,{children:_.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):_.jsx(j1,{path:e.path})})}function MMt({currentConfig:e}){const[t,n]=D.useState(""),[r,i]=D.useState(!0);return D.useEffect(()=>{async function s(){const o=await MZ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ru,{text:t}):_.jsx(j1,{path:e.path})}function eC(e){return e.baseComponent!==void 0}function P6e(){const e=_d(),{setAlertModal:t}=Ha(),n=Fu();D.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var t1e=Object.prototype.hasOwnProperty;function n1e(e,t,n){for(n of e.keys())if(gk(n,t))return n}function gk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&gk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=n1e(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=n1e(t,i),!i)||!gk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(t1e.call(e,n)&&++r&&!t1e.call(t,n)||!(n in t)||!gk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function LMt(e){var t=D.useRef(e),n=D.useRef(0);return gk(e,t.current)||(t.current=e,n.current+=1),D.useMemo(function(){return t.current},[n.current])}function FMt(e,t){return D.useEffect(e,LMt(t))}const aL=(e,t=null)=>{const[n,r]=D.useState("idle"),[i,s]=D.useState(null),[o,a]=D.useState(null),u=D.useRef(),l=D.useRef(!1);D.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=D.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return FMt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function O6e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const BMt="_root_1spq0_1",jMt="_description_1spq0_9",UMt="_title_1spq0_10",zMt="_closeButton_1spq0_14",VMt={root:BMt,description:jMt,title:UMt,closeButton:zMt},YR=e=>{const{title:t,message:n,color:r}=e;W_.show({title:t,message:n,position:"top-center",classNames:VMt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},r1e=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],$6e=["participantId","trialId","trialOrder","responseId"];function gne(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function HMt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(Ph(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=eC(u)&&u.baseComponent&&n.baseComponents?PZ({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=O6e(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(x=>x.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const x=(v=(y=l.correctAnswer)==null?void 0:y.find(w=>w.id===h))==null?void 0:v.answer;m.correctAnswer=typeof x=="object"?JSON.stringify(x):x}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function qMt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...$6e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await HMt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function WMt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=D.useState([...r1e].filter(p=>p!=="meta")),a=ho(),{value:u,status:l,error:c}=aL(qMt,[s,r,a.storageEngine,i]),f=D.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);gne(p,n)},[n,u]),d=D.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),YR({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=D.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return _.jsxs(Ws,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(kJ,{searchable:!0,nothingFoundMessage:"Property not found",data:[...r1e],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:_.jsx(Pct,{}),variant:"filled"}),_.jsx(Zc,{h:"md"}),_.jsxs(ke,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(un,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(un.Thead,{children:_.jsx(un.Tr,{children:u.header.map(p=>_.jsx(un.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:_.jsxs(qt,{direction:"row",justify:"space-between",align:"center",children:[p,!$6e.includes(p)&&_.jsx(U_,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(JD,{size:16})})]})},p))})}),_.jsx(un.Tbody,{children:u.rows.slice(0,5).map((p,m)=>_.jsx(un.Tr,{children:u.header.map(g=>_.jsx(un.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?_.jsx(Y0,{variant:"light",children:c.message}):null,_.jsx(uf,{visible:l==="pending"||l==="idle"})]}),_.jsx(Zc,{h:"sm"}),_.jsx(qt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(Qe,{children:h})}),_.jsx(Zc,{h:"md"}),_.jsxs(_r,{justify:"right",children:[_.jsx(ln,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(ln,{leftSection:_.jsx(LAe,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&_.jsx(ln,{onClick:d,children:_.jsx(Ect,{})})]})]})}function GMt(){const e=yg(),{storageEngine:t}=ho(),n=ri(x=>x.answers),r=O2(),[i,s]=D.useState(!1);D.useEffect(()=>{if(r){s(!0);return}const x=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(x))},1e3)},[]),P6e();const[o,a]=D.useState(),[u,l]=D.useState(""),c=e.studyMetadata.title.replace(" ","_");D.useEffect(()=>{async function x(){if(t){const w=await t.getCurrentParticipantId(),E=await t.getParticipantData();l(w),a(E)}}x()},[t]);const f=D.useCallback(async()=>{gne(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=D.useState(Math.floor(h/1e3));D.useEffect(()=>{if(i){const x=setInterval(()=>{m(w=>w-1)},1e3);return p<=0?(d&&f(),clearInterval(x),()=>clearInterval(x)):()=>clearInterval(x)}return()=>{}},[d,i,p,f]);const g=J_(),[y,v]=D.useState(!1);return D.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(g);v(w.dataCollectionEnabled)}})()},[t,g]),_.jsx(Wo,{style:{height:"100%"},children:_.jsx(qt,{direction:"column",children:i||!y?_.jsx(Qe,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ru,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(Qe,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Zc,{h:"lg"}),_.jsx(Wo,{children:_.jsx(wc,{color:"blue"})})]})})})}function YMt(){return _.jsx(Qe,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function KMt(){return _.jsx(Qe,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const i1e={};function KG(e,t){e===void 0&&(e=i1e),t===void 0&&(t=i1e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var XMt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QMt=Object.prototype.hasOwnProperty;function XG(e,t){return QMt.call(e,t)}function QG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)XG(e,i)&&r.push(i);return r}function Yc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function JG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Wb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function M6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ZG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(ZG(e[t]))return!0}else if(typeof e=="object"){for(var r=QG(e),i=r.length,s=0;s<i;s++)if(ZG(e[r[s]]))return!0}}return!1}function s1e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var L6e=function(e){XMt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,s1e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=s1e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Fs=L6e,JMt=Yc,tS={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=uL(n,this.path);r&&(r=Yc(r));var i=$x(n,{op:"remove",path:this.from}).removed;return $x(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=uL(n,this.from);return $x(n,{op:"add",path:this.path,value:Yc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:KR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ZMt={add:function(e,t,n){return JG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:tS.move,copy:tS.copy,test:tS.test,_get:tS._get};function uL(e,t){if(t=="")return e;var n={op:"_get",path:t};return $x(e,n),n.value}function $x(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):lL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=uL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=KR(e,t.value),o.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Yc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=lL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=M6e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!JG(h))throw new Fs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);JG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Fs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=ZMt[t.op].call(t,l,h,e);if(o.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=tS[t.op].call(t,l,h,e);if(o.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Fs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function L8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=$x(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function eLt(e,t,n){var r=$x(e,t);if(r.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function lL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(tS[e.op]){if(typeof e.path!="string")throw new Fs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&ZG(e.value))throw new Fs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=F6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function F6e(e,t,n){try{if(!Array.isArray(e))throw new Fs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)L8(Yc(t),Yc(e),n||!0);else{n=n||lL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fs)return i;throw i}}function KR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!KR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!KR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const tLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fs,_areEquals:KR,applyOperation:$x,applyPatch:L8,applyReducer:eLt,deepClone:JMt,getValueByPointer:uL,validate:F6e,validator:lL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var yne=new WeakMap,nLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),rLt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function iLt(e){return yne.get(e)}function sLt(e,t){return e.observers.get(t)}function oLt(e,t){e.observers.delete(t.callback)}function aLt(e,t){t.unobserve()}function uLt(e,t){var n=[],r,i=iLt(e);if(!i)i=new nLt(e),yne.set(e,i);else{var s=sLt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Yc(e),t){r.callback=t,r.next=null;var o=function(){eY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){eY(r),clearTimeout(r.next),oLt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new rLt(t,r)),r}function eY(e,t){t===void 0&&(t=!1);var n=yne.get(e.object);vne(n.value,e.object,e.patches,"",t),e.patches.length&&L8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function vne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=QG(t),o=QG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(XG(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?vne(c,f,n,r+"/"+Wb(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Wb(l),value:Yc(c)}),n.push({op:"replace",path:r+"/"+Wb(l),value:Yc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Wb(l),value:Yc(c)}),n.push({op:"remove",path:r+"/"+Wb(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!XG(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Wb(l),value:Yc(t[l])})}}}function lLt(e,t,n){n===void 0&&(n=!1);var r=[];return vne(e,t,r,"",n),r}const cLt=Object.freeze(Object.defineProperty({__proto__:null,compare:lLt,generate:eY,observe:uLt,unobserve:aLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},tLt,cLt,{JsonPatchError:L6e,deepClone:Yc,escapePathComponent:Wb,unescapePathComponent:M6e});var fLt=/("(?:[^\\"]|\\.)*")|[:,]/g,dLt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,x,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(fLt,function(T,C){return C||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(x="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(x="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[x,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const Qz=Am(dLt);function Sc(e,t,n){return e.fields=t||[],e.fname=n,e}function Ys(e){return e==null?null:e.fname}function Tu(e){return e==null?null:e.fields}function B6e(e){return e.length===1?hLt(e[0]):pLt(e)}const hLt=e=>function(t){return t[e]},pLt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ye(e){throw Error(e)}function Mm(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ye("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ye("Access path missing closing bracket: "+e),r&&Ye("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function ld(e,t,n){const r=Mm(e);return e=r.length===1?r[0]:e,Sc((n&&n.get||B6e)(r),[e],t||e)}const RN=ld("id"),Nu=Sc(e=>e,[],"identity"),qy=Sc(()=>0,[],"zero"),tC=Sc(()=>1,[],"one"),cd=Sc(()=>!0,[],"true"),Cy=Sc(()=>!1,[],"false");function mLt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const j6e=0,bne=1,xne=2,U6e=3,z6e=4;function _ne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mLt,r=e||j6e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=bne&&n(t||"error","ERROR",arguments),this},warn(){return r>=xne&&n(t||"warn","WARN",arguments),this},info(){return r>=U6e&&n(t||"log","INFO",arguments),this},debug(){return r>=z6e&&n(t||"log","DEBUG",arguments),this}}}var Xe=Array.isArray;function Ot(e){return e===Object(e)}const o1e=e=>e!=="__proto__";function nC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=gLt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;rC(r,s,i[s],o)}return r},{})}function rC(e,t,n,r){if(!o1e(t))return;let i,s;if(Ot(n)&&!Xe(n)){s=Ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?rC(s,i,n[i]):o1e(i)&&(s[i]=n[i])}else e[t]=n}function gLt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Lr(e){return e[e.length-1]}function wu(e){return e==null||e===""?null:+e}const V6e=e=>t=>e*Math.exp(t),H6e=e=>t=>Math.log(e*t),q6e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),W6e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,cL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function F8(e,t,n,r){const i=n(e[0]),s=n(Lr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function G6e(e,t){return F8(e,t,wu,Nu)}function Y6e(e,t){var n=Math.sign(e[0]);return F8(e,t,H6e(n),V6e(n))}function K6e(e,t,n){return F8(e,t,cL(n),cL(1/n))}function X6e(e,t,n){return F8(e,t,q6e(n),W6e(n))}function B8(e,t,n,r,i){const s=r(e[0]),o=r(Lr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function wne(e,t,n){return B8(e,t,n,wu,Nu)}function Ene(e,t,n){const r=Math.sign(e[0]);return B8(e,t,n,H6e(r),V6e(r))}function fL(e,t,n,r){return B8(e,t,n,cL(r),cL(1/r))}function Sne(e,t,n,r){return B8(e,t,n,q6e(r),W6e(r))}function Q6e(e){return 1+~~(new Date(e).getMonth()/3)}function J6e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Nt(e){return e!=null?Xe(e)?e:[e]:[]}function Z6e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Yn(e){return typeof e=="function"}const yLt="descending";function Tne(e,t,n){n=n||{},t=Nt(t)||[];const r=[],i=[],s={},o=n.comparator||vLt;return Nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===yLt?-1:1),i.push(a=Yn(a)?a:ld(a,null,n)),(Tu(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Sc(o(i,r),Object.keys(s))}const j8=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),vLt=(e,t)=>e.length===1?bLt(e[0],t[0]):xLt(e,t,e.length),bLt=(e,t)=>function(n,r){return j8(e(n),e(r))*t},xLt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=j8(s(r),s(i));return o*t[a]});function Pu(e){return Yn(e)?e:()=>e}function Cne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function ym(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function e$e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const _Lt=Object.prototype.hasOwnProperty;function sn(e,t){return _Lt.call(e,t)}const TO={};function iC(e){let t={},n;function r(s){return sn(t,s)&&t[s]!==TO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===TO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=TO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==TO&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function t$e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Lr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ct(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Gn(r,n)}function nS(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function qv(e){return typeof e=="boolean"}function S1(e){return Object.prototype.toString.call(e)==="[object Date]"}function n$e(e){return e&&Yn(e[Symbol.iterator])}function Xr(e){return typeof e=="number"}function r$e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Pt(e){return typeof e=="string"}function Ane(e,t,n){e&&(e=t?Nt(e).map(a=>a.replace(/\\(.)/g,"$1")):Nt(e));const r=e&&e.length,i=n&&n.get||B6e,s=a=>i(t?[a]:Mm(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Sc(o,e,"key")}function i$e(e,t){const n=e[0],r=Lr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const wLt=1e4;function s$e(e){e=+e||wLt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>sn(t,o)||sn(n,o),get:o=>sn(t,o)?t[o]:sn(n,o)?s(o,n[o]):void 0,set:(o,a)=>sn(t,o)?t[o]=a:s(o,a)}}function o$e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function xI(e,t){let n="";for(;--t>=0;)n+=e;return n}function a$e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?xI(i,o)+s:r==="center"?xI(i,~~(o/2))+s+xI(i,Math.ceil(o/2)):s+xI(i,o)}function DN(e){return e&&Lr(e)-e[0]||0}function Et(e){return Xe(e)?"["+e.map(Et)+"]":Ot(e)||Pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Ine(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const ELt=e=>Xr(e)||S1(e)?e:Date.parse(e);function kne(e,t){return t=t||ELt,e==null||e===""?null:t(e)}function Rne(e){return e==null||e===""?null:e+""}function Lh(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function u$e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function $y(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function SLt(e){return e}function TLt(e){if(e==null)return SLt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function CLt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function ALt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return a1e(e,n)})}:a1e(e,t)}function a1e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=l$e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function l$e(e,t){var n=TLt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&CLt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function ILt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function kLt(e){return l$e(e,RLt.apply(this,arguments))}function RLt(e,t,n){var r,i,s;if(arguments.length>1)r=DLt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:ILt(e,r)}}function DLt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Ba="year",yc="quarter",Cu="month",Uo="week",vc="date",xu="day",vm="dayofyear",mf="hours",gf="minutes",fd="seconds",Fh="milliseconds",Dne=[Ba,yc,Cu,Uo,vc,xu,vm,mf,gf,fd,Fh],Jz=Dne.reduce((e,t,n)=>(e[t]=1+n,e),{});function Nne(e){const t=Nt(e).slice(),n={};return t.length||Ye("Missing time unit."),t.forEach(i=>{sn(Jz,i)?n[i]=1:Ye(`Invalid time unit: ${i}.`)}),(n[Uo]||n[xu]?1:0)+(n[yc]||n[Cu]||n[vc]?1:0)+(n[vm]?1:0)>1&&Ye(`Incompatible time units: ${e}`),t.sort((i,s)=>Jz[i]-Jz[s]),t}const NLt={[Ba]:"%Y ",[yc]:"Q%q ",[Cu]:"%b ",[vc]:"%d ",[Uo]:"W%U ",[xu]:"%a ",[vm]:"%j ",[mf]:"%H:00",[gf]:"00:%M",[fd]:":%S",[Fh]:".%L",[`${Ba}-${Cu}`]:"%Y-%m ",[`${Ba}-${Cu}-${vc}`]:"%Y-%m-%d ",[`${mf}-${gf}`]:"%H:%M"};function c$e(e,t){const n=Gn({},NLt,t),r=Nne(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Zb=new Date;function Pne(e){return Zb.setFullYear(e),Zb.setMonth(0),Zb.setDate(1),Zb.setHours(0,0,0,0),Zb}function f$e(e){return h$e(new Date(e))}function d$e(e){return tY(new Date(e))}function h$e(e){return Z0.count(Pne(e.getFullYear())-1,e)}function tY(e){return B2.count(Pne(e.getFullYear())-1,e)}function nY(e){return Pne(e).getDay()}function PLt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function p$e(e){return g$e(new Date(e))}function m$e(e){return rY(new Date(e))}function g$e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return _1.count(t-1,e)}function rY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return j2.count(t-1,e)}function iY(e){return Zb.setTime(Date.UTC(e,0,1)),Zb.getUTCDay()}function OLt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function y$e(e,t,n,r,i){const s=t||1,o=Lr(e),a=(y,v,x)=>(x=x||y,$Lt(n[x],r[x],y===o&&s,v)),u=new Date,l=Lh(e),c=l[Ba]?a(Ba):Pu(2012),f=l[Cu]?a(Cu):l[yc]?a(yc):qy,d=l[Uo]&&l[xu]?a(xu,1,Uo+xu):l[Uo]?a(Uo,1):l[xu]?a(xu,1):l[vc]?a(vc,1):l[vm]?a(vm,1):tC,h=l[mf]?a(mf):qy,p=l[gf]?a(gf):qy,m=l[fd]?a(fd):qy,g=l[Fh]?a(Fh):qy;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function $Lt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function PT(e,t,n){return t+e*7-(n+6)%7}const MLt={[Ba]:e=>e.getFullYear(),[yc]:e=>Math.floor(e.getMonth()/3),[Cu]:e=>e.getMonth(),[vc]:e=>e.getDate(),[mf]:e=>e.getHours(),[gf]:e=>e.getMinutes(),[fd]:e=>e.getSeconds(),[Fh]:e=>e.getMilliseconds(),[vm]:e=>h$e(e),[Uo]:e=>tY(e),[Uo+xu]:(e,t)=>PT(tY(e),e.getDay(),nY(t)),[xu]:(e,t)=>PT(1,e.getDay(),nY(t))},LLt={[yc]:e=>3*e,[Uo]:(e,t)=>PT(e,0,nY(t))};function v$e(e,t){return y$e(e,t||1,MLt,LLt,PLt)}const FLt={[Ba]:e=>e.getUTCFullYear(),[yc]:e=>Math.floor(e.getUTCMonth()/3),[Cu]:e=>e.getUTCMonth(),[vc]:e=>e.getUTCDate(),[mf]:e=>e.getUTCHours(),[gf]:e=>e.getUTCMinutes(),[fd]:e=>e.getUTCSeconds(),[Fh]:e=>e.getUTCMilliseconds(),[vm]:e=>g$e(e),[Uo]:e=>rY(e),[xu]:(e,t)=>PT(1,e.getUTCDay(),iY(t)),[Uo+xu]:(e,t)=>PT(rY(e),e.getUTCDay(),iY(t))},BLt={[yc]:e=>3*e,[Uo]:(e,t)=>PT(e,0,iY(t))};function b$e(e,t){return y$e(e,t||1,FLt,BLt,OLt)}const jLt={[Ba]:lm,[yc]:kR.every(3),[Cu]:kR,[Uo]:B2,[vc]:Z0,[xu]:Z0,[vm]:Z0,[mf]:r8,[gf]:t8,[fd]:j0,[Fh]:gT},ULt={[Ba]:cm,[yc]:RR.every(3),[Cu]:RR,[Uo]:j2,[vc]:_1,[xu]:_1,[vm]:_1,[mf]:i8,[gf]:n8,[fd]:j0,[Fh]:gT};function sC(e){return jLt[e]}function oC(e){return ULt[e]}function x$e(e,t,n){return e?e.offset(t,n):void 0}function _$e(e,t,n){return x$e(sC(e),t,n)}function w$e(e,t,n){return x$e(oC(e),t,n)}function E$e(e,t,n,r){return e?e.range(t,n,r):void 0}function S$e(e,t,n,r){return E$e(sC(e),t,n,r)}function T$e(e,t,n,r){return E$e(oC(e),t,n,r)}const _I=1e3,wI=_I*60,EI=wI*60,U8=EI*24,zLt=U8*7,u1e=U8*30,sY=U8*365,C$e=[Ba,Cu,vc,mf,gf,fd,Fh],SI=C$e.slice(0,-1),TI=SI.slice(0,-1),CI=TI.slice(0,-1),VLt=CI.slice(0,-1),HLt=[Ba,Uo],l1e=[Ba,Cu],A$e=[Ba],EA=[[SI,1,_I],[SI,5,5*_I],[SI,15,15*_I],[SI,30,30*_I],[TI,1,wI],[TI,5,5*wI],[TI,15,15*wI],[TI,30,30*wI],[CI,1,EI],[CI,3,3*EI],[CI,6,6*EI],[CI,12,12*EI],[VLt,1,U8],[HLt,1,zLt],[l1e,1,u1e],[l1e,3,3*u1e],[A$e,1,sY]];function I$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(DN(t))/n;let i=$2(a=>a[2]).right(EA,r),s,o;return i===EA.length?(s=A$e,o=z1(t[0]/sY,t[1]/sY,n)):i?(i=EA[r/EA[i-1][2]<EA[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=C$e,o=Math.max(z1(t[0],t[1],n),1)),{units:s,step:o}}function AI(e){const t={};return n=>t[n]||(t[n]=e(n))}function qLt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=WLt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function WLt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function k$e(e){const t=AI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=e_(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return qLt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=e_(o??",f");const a=z1(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=lDe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=cDe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=uDe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let oY;R$e();function R$e(){return oY=k$e({format:Lv,formatPrefix:tee})}function D$e(e){return k$e(aDe(e))}function dL(e){return arguments.length?oY=D$e(e):oY}function c1e(e,t,n){n=n||{},Ot(n)||Ye(`Invalid time multi-format specifier: ${n}`);const r=t(fd),i=t(gf),s=t(mf),o=t(vc),a=t(Uo),u=t(Cu),l=t(yc),c=t(Ba),f=e(n[Fh]||".%L"),d=e(n[fd]||":%S"),h=e(n[gf]||"%I:%M"),p=e(n[mf]||"%I %p"),m=e(n[vc]||n[xu]||"%a %d"),g=e(n[Uo]||"%b %d"),y=e(n[Cu]||"%B"),v=e(n[yc]||"%B"),x=e(n[Ba]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:x)(w)}function N$e(e){const t=AI(e.format),n=AI(e.utcFormat);return{timeFormat:r=>Pt(r)?t(r):c1e(t,sC,r),utcFormat:r=>Pt(r)?n(r):c1e(n,oC,r),timeParse:AI(e.parse),utcParse:AI(e.utcParse)}}let aY;P$e();function P$e(){return aY=N$e({format:pee,parse:ENe,utcFormat:hN,utcParse:SNe})}function O$e(e){return N$e(vNe(e))}function XR(e){return arguments.length?aY=O$e(e):aY}const uY=(e,t)=>Gn({},e,t);function $$e(e,t){const n=e?D$e(e):dL(),r=t?O$e(t):XR();return uY(n,r)}function One(e,t){const n=arguments.length;return n&&n!==2&&Ye("defaultLocale expects either zero or two arguments."),n?uY(dL(e),XR(t)):uY(dL(),XR())}function GLt(){return R$e(),P$e(),One()}const YLt=/^(data:|([A-Za-z]+:)?\/\/)/,KLt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,XLt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,f1e="file://";function QLt(e,t){return n=>({options:n||{},sanitize:ZLt,load:JLt,fileAccess:!1,file:eFt(t),http:nFt(e)})}async function JLt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function ZLt(e,t){t=Gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=KLt.test(e.replace(XLt,""));(e==null||typeof e!="string"||!a)&&Ye("Sanitize failure, invalid URI: "+Et(e));const u=YLt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(f1e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(f1e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function eFt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):tFt}async function tFt(){Ye("No file system access.")}function nFt(e){return e?async function(t,n){const r=Gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Yn(s[i])?s[i]():s.text():Ye(s.status+""+s.statusText)}:rFt}async function rFt(){Ye("No HTTP fetch method available.")}const iFt=e=>e!=null&&e===e,sFt=e=>e==="true"||e==="false"||e===!0||e===!1,oFt=e=>!Number.isNaN(Date.parse(e)),M$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),aFt=e=>M$e(e)&&Number.isInteger(+e),lY={boolean:Ine,integer:wu,number:wu,date:kne,string:Rne,unknown:Nu},CO=[sFt,aFt,M$e,oFt],uFt=["boolean","integer","number","date"];function L$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=CO.length,i=CO.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&iFt(u)&&!CO[a](u)&&(i[a]=0,++o,o===CO.length))return"string";return uFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function F$e(e,t){return t.reduce((n,r)=>(n[r]=L$e(e,r),n),{})}function d1e(e){const t=function(n,r){const i={delimiter:e};return $ne(n,r?Gn(r,i):i)};return t.responseType="text",t}function $ne(e,t){return t.header&&(e=t.header.map(Et).join(t.delimiter)+`
`+e),rDe(t.delimiter).parse(e+"")}$ne.responseType="text";function lFt(e){return typeof Buffer=="function"&&Yn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Mne(e,t){const n=t&&t.property?ld(t.property):Nu;return Ot(e)&&!lFt(e)?cFt(n(e),t):n(JSON.parse(e))}Mne.responseType="json";function cFt(e,t){return!Xe(e)&&n$e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const fFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function B$e(e,t){let n,r,i,s;return e=Mne(e,t),t&&t.feature?(n=ALt,i=t.feature):t&&t.mesh?(n=kLt,i=t.mesh,s=fFt[t.filter]):Ye("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ye("Invalid TopoJSON object: "+i),r&&r.features||[r]}B$e.responseType="json";const s6={dsv:$ne,csv:d1e(","),tsv:d1e("	"),json:Mne,topojson:B$e};function Lne(e,t){return arguments.length>1?(s6[e]=t,this):sn(s6,e)?s6[e]:null}function j$e(e){const t=Lne(e);return t&&t.responseType||"text"}function U$e(e,t,n,r){t=t||{};const i=Lne(t.type||"json");return i||Ye("Unknown data format type: "+t.type),e=i(e,t),t.parse&&dFt(e,t.parse,n,r),sn(e,"columns")&&delete e.columns,e}function dFt(e,t,n,r){if(!e.length)return;const i=XR();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=F$e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!lY[p])throw Error("Illegal format pattern: "+h+":"+p);return lY[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const z8=QLt(typeof fetch<"u"&&fetch,null);function V8(e){const t=e||Nu,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function o6(e,t){try{await t(e)}catch(n){e.error(n)}}const z$e=Symbol("vega_id");let hFt=1;function H8(e){return!!(e&&nn(e))}function nn(e){return e[z$e]}function V$e(e,t){return e[z$e]=t,e}function mi(e){const t=e===Object(e)?e:{data:e};return nn(t)?t:V$e(t,hFt++)}function Fne(e){return q8(e,mi({}))}function q8(e,t){for(const n in e)t[n]=e[n];return t}function H$e(e,t){return V$e(t,nn(e))}function sw(e,t){return e?t?(n,r)=>e(n,r)||nn(t(n))-nn(t(r)):(n,r)=>e(n,r)||nn(n)-nn(r):null}function q$e(e){return e&&e.constructor===ow}function ow(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:ow,insert(a){const u=Nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Yn(a)?r:t,l=Nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Pu(l)};return Yn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Yn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[nn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[nn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[nn(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=nn(m),l[g]?l[g]=1:a.add.push(mi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[nn(m)]<0&&a.rem.push(m);function y(v,x,w){w?v[x]=w(v):a.encode=x,o||(c[nn(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[nn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[nn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[nn(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const a6="_:mod:_";function W8(){Object.defineProperty(this,a6,{writable:!0,value:{}})}W8.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[a6];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Xe(n)?1+n.length:-1),i},modified(e,t){const n=this[a6];if(arguments.length){if(Xe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[a6]={},this}};let pFt=0;const mFt="pulse",gFt=new W8,yFt=1,vFt=2;function Wi(e,t,n,r){this.id=++pFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function h1e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wi.prototype={targets(){return this._targets||(this._targets=V8(RN))},set(e){return this.value!==e?(this.value=e,1):0},skip:h1e(yFt),modified:h1e(vFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new W8,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Wi?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===mFt)Nt(a).forEach(f=>{f instanceof Wi?f!==this&&(f.targets().add(this),s.push(f)):Ye("Pulse parameters must be operator instances.")}),this.source=a;else if(Xe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||gFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function bFt(e,t,n,r){let i=1,s;return e instanceof Wi?s=e:e&&e.prototype instanceof Wi?s=new e:Yn(e)?s=new Wi(null,e):(i=0,s=new Wi(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function xFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let _Ft=0;function G8(e,t,n){this.id=++_Ft,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ay(e,t,n){return new G8(e,t,n)}G8.prototype={_filter:cd,_apply:Nu,targets(){return this._targets||(this._targets=V8(RN))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ay(e);return this.targets().add(t),t},apply(e){const t=Ay(null,e);return this.targets().add(t),t},merge(){const e=Ay();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ay();return this.targets().add(Ay(null,null,Cne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ay(null,null,()=>n=!0)),t.targets().add(Ay(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=cd,this._targets=null}};function wFt(e,t,n,r){const i=this,s=Ay(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function EFt(e,t){const n=this.locale();return U$e(e,t,n.timeParse,n.utcParse)}function SFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function TFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:j$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function CFt(e,t,n){const r=this,i=r._pending||AFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(cd).insert(s.data||[])),i.done(),s}function AFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const IFt={skip:!0};function kFt(e,t,n,r,i){return(e instanceof Wi?DFt:RFt)(this,e,t,n,r,i),this}function RFt(e,t,n,r,i,s){const o=Gn({},s,IFt);let a,u;Yn(n)||(n=Pu(n)),r===void 0?a=l=>e.touch(n(l)):Yn(r)?(u=new Wi(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;q$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function DFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Wi(null,NFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function NFt(e,t){return t=Yn(t)?t:Pu(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function PFt(e){e.rank=++this._rank}function OFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ye("Cycle detected in dataflow graph.")}const hL={},xp=1,My=2,v0=4,$Ft=xp|My,p1e=xp|v0,oE=xp|My|v0,m1e=8,SA=16,g1e=32,y1e=64;function T1(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Zz(e,t){const n=[];return $y(e,t,r=>n.push(r)),n}function v1e(e,t){const n={};return e.visit(t,r=>{n[nn(r)]=1}),r=>n[nn(r)]?null:r}function AO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}T1.prototype={StopPropagation:hL,ADD:xp,REM:My,MOD:v0,ADD_REM:$Ft,ADD_MOD:p1e,ALL:oE,REFLOW:m1e,SOURCE:SA,NO_SOURCE:g1e,NO_FIELDS:y1e,fork(e){return new T1(this.dataflow).init(this,e)},clone(){const e=this.fork(oE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(oE|SA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new T1(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&y1e)&&(n.fields=e.fields),t&xp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&My?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&v0?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&g1e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||oE;return t&xp&&this.add.length||t&My&&this.rem.length||t&v0&&this.mod.length},reflow(e){if(e)return this.fork(oE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(v0,v1e(this,xp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Xe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Xe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&xp&&(n.addF=AO(n.addF,t)),e&My&&(n.remF=AO(n.remF,t)),e&v0&&(n.modF=AO(n.modF,t)),e&SA&&(n.srcF=AO(n.srcF,t)),n},materialize(e){e=e||oE;const t=this;return e&xp&&t.addF&&(t.add=Zz(t.add,t.addF),t.addF=null),e&My&&t.remF&&(t.rem=Zz(t.rem,t.remF),t.remF=null),e&v0&&t.modF&&(t.mod=Zz(t.mod,t.modF),t.modF=null),e&SA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&SA)return $y(n.source,n.srcF,r),n;e&xp&&$y(n.add,n.addF,r),e&My&&$y(n.rem,n.remF,r),e&v0&&$y(n.mod,n.modF,r);const i=n.source;if(e&m1e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$y(i,v1e(n,p1e),r):$y(i,n.srcF,r))}return n}};function Bne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ct(Bne,T1,{fork(e){const t=new T1(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Xe(e)?e.some(r=>n[r]):n[e]:0},filter(){Ye("MultiPulse does not support filtering.")},materialize(){Ye("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function MFt(e,t,n){const r=this,i=[];if(r._pulse)return W$e(r);if(r._pending&&await r._pending,t&&await o6(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new T1(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=V8(RN);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=hL),u!==hL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await o6(r,c[f].callback)}return n&&await o6(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function LFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function FFt(e,t,n){return this._pulse?W$e(this):(this.evaluate(e,t,n),this)}function BFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function W$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function jFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function UFt(e,t){const n=e.source,r=this._clock;return n&&Xe(n)?new Bne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||zFt(this._pulse,n&&n.pulse)}function zFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==hL&&(e.source=t.source),e)}const jne={skip:!1,force:!1};function VFt(e,t){const n=t||jne;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function HFt(e,t,n){const r=n||jne;return(e.set(t)||r.force)&&this.touch(e,r),this}function qFt(e,t,n){this.touch(e,n||jne);const r=new T1(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function WFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),G$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,GFt(t,0,e)):r=n,r}}}function G$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function GFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,G$e(e,r,t,n)}function NS(){this.logger(_ne()),this.logLevel(bne),this._clock=0,this._rank=0,this._locale=One();try{this._loader=z8()}catch{}this._touched=V8(RN),this._input={},this._pulse=null,this._heap=WFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function TA(e){return function(){return this._log[e].apply(this,arguments)}}NS.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:TA("error"),warn:TA("warn"),info:TA("info"),debug:TA("debug"),logLevel:TA("level"),cleanThreshold:1e4,add:bFt,connect:xFt,rank:PFt,rerank:OFt,pulse:qFt,touch:VFt,update:HFt,changeset:ow,ingest:SFt,parse:EFt,preload:CFt,request:TFt,events:wFt,on:kFt,evaluate:MFt,run:FFt,runAsync:LFt,runAfter:BFt,_enqueue:jFt,_getPulse:UFt};function Ve(e,t){Wi.call(this,e,null,t)}Ct(Ve,Wi,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const OT={};function Y$e(e){const t=K$e(e);return t&&t.Definition||null}function K$e(e){return e=e&&e.toLowerCase(),sn(OT,e)?OT[e]:null}function*X$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Une(e,t,n){const r=Float64Array.from(X$e(e,n));return r.sort(X0),t.map(i=>nRe(r,i))}function zne(e,t){return Une(e,[.25,.5,.75],t)}function Vne(e,t){const n=e.length,r=Ibt(e,t),i=zne(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Q$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var dd=Math.random;function YFt(e){dd=e}function J$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(X$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(dd()*s)];c[l]=a/s}return c.sort(X0),[pW(c,n/2),pW(c,1-n/2)]}function Z$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?KFt(s,t+t/4):s}function KFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function XFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function QFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*dd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const eMe=Math.sqrt(2*Math.PI),JFt=Math.SQRT2;let CA=NaN;function Y8(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(CA===CA)n=CA,CA=NaN;else{do n=dd()*2-1,r=dd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,CA=r*s}return e+n*t}function Hne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*eMe)}function K8(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function X8(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*JFt*ZFt(2*e-1)}function ZFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function qne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Y8(n,r),pdf:s=>Hne(s,n,r),cdf:s=>K8(s,n,r),icdf:s=>X8(s,n,r)};return i.mean(e).stdev(t)}function Wne(e,t){const n=qne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Vne(e)),i):t},sample(){return e[~~(dd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Gne(e,t){return e=e||0,t=t??1,Math.exp(e+Y8()*t)}function Yne(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*eMe*e)}function Kne(e,t,n){return K8(Math.log(e),t,n)}function Xne(e,t,n){return Math.exp(X8(e,t,n))}function tMe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Gne(n,r),pdf:s=>Yne(s,n,r),cdf:s=>Kne(s,n,r),icdf:s=>Xne(s,n,r)};return i.mean(e).stdev(t)}function nMe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=dd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Qne(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*dd()}function Jne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Zne(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function ere(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function rMe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Qne(n,r),pdf:s=>Jne(s,n,r),cdf:s=>Zne(s,n,r),icdf:s=>ere(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function tre(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function NN(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function Q8(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function PN(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function aC(e,t,n,r,i){let s=0,o=0;return PN(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function nre(e,t,n){let r=0,i=0,s=0,o=0,a=0;PN(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=NN(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:aC(e,t,n,i,l)}}function iMe(e,t,n){let r=0,i=0,s=0,o=0,a=0;PN(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=NN(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:aC(e,t,n,i,l)}}function sMe(e,t,n){const[r,i,s,o]=Q8(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;PN(e,t,n,(v,x)=>{d=r[f++],h=Math.log(x),p=d*x,a+=(x*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=NN(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:aC(e,t,n,o,y)}}function oMe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;PN(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=NN(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:aC(e,t,n,a,c)}}function rre(e,t,n){const[r,i,s,o]=Q8(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,x=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-x*u,T=C=>(C=C-s,x*C*C+w*C+E+o);return{coef:[E-w*s+x*s*s+o,w-2*x*s,x],predict:T,rSquared:aC(e,t,n,o,T)}}function aMe(e,t,n,r){if(r===0)return tre(e,t,n);if(r===1)return nre(e,t,n);if(r===2)return rre(e,t,n);const[i,s,o,a]=Q8(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=t5t(c),v=x=>{x-=o;let w=a+y[0]+y[1]*x+y[2]*x*x;for(d=3;d<f;++d)w+=y[d]*Math.pow(x,d);return w};return{coef:e5t(f,y,-o,a),predict:v,rSquared:aC(e,t,n,a,v)}}function e5t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function t5t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const b1e=2,x1e=1e-12;function uMe(e,t,n,r){const[i,s,o,a]=Q8(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=b1e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],x=p[1],w=y-i[v]>i[x]-y?v:x;let E=0,T=0,C=0,I=0,N=0;const k=1/Math.abs(i[w]-y||1);for(let O=v;O<=x;++O){const B=i[O],q=s[O],H=n5t(Math.abs(y-B)*k)*d[O],Y=B*H;E+=H,T+=Y,C+=q*H,I+=q*Y,N+=B*Y}const[P,M]=NN(T/E,C/E,I/E,N/E);c[g]=P+M*y,f[g]=Math.abs(s[g]-c[g]),r5t(i,g+1,p)}if(h===b1e)break;const m=rRe(f);if(Math.abs(m)<x1e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?x1e:(v=1-y*y)*v}return i5t(i,c,o,a)}function n5t(e){return(e=1-e*e*e)*e*e}function r5t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function i5t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const s5t=.5*Math.PI/180;function J8(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=o5t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&a5t(f,m,d,h,p)>s5t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function o5t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function a5t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function u5t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function cY(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:u5t(e)}function lMe(e,t,n){return n||e+(t?"_"+t:"")}const eV=()=>{},l5t={init:eV,add:eV,rem:eV,idx:0},QR={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},ON=Object.keys(QR).filter(e=>e!=="__count__");function c5t(e,t){return(n,r)=>Gn({name:e,aggregate_param:r,out:n||e},l5t,t)}[...ON,"__count__"].forEach(e=>{QR[e]=c5t(e,QR[e])});function cMe(e,t,n){return QR[e](n,t)}function fMe(e,t){return e.idx-t.idx}function f5t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=QR[i]())})};return e.forEach(n),Object.values(t).sort(fMe)}function d5t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function h5t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function p5t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function m5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function dMe(e,t){const n=t||Nu,r=f5t(e),i=e.slice().sort(fMe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=d5t,s.prototype.add=h5t,s.prototype.rem=p5t,s.prototype.set=m5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function ire(e){this._key=e?ld(e):nn,this.reset()}const Ka=ire.prototype;Ka.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ka.add=function(e){this._add.push(e)};Ka.rem=function(e){this._rem.push(e)};Ka.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ka.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",sn(n,s)||(n[s]=1,++i);return i};Ka.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=e$e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ka.argmin=function(e){return this.extent(e)[0]||{}};Ka.argmax=function(e){return this.extent(e)[1]||{}};Ka.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ka.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ka.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=zne(this.values(),e),this._get=e),this._q};Ka.q1=function(e){return this.quartile(e)[0]};Ka.q2=function(e){return this.quartile(e)[1]};Ka.q3=function(e){return this.quartile(e)[2]};Ka.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=J$e(this.values(),1e3,.05,e),this._get=e),this._ci};Ka.ci0=function(e){return this.ci(e)[0]};Ka.ci1=function(e){return this.ci(e)[1]};function iv(e){Ve.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}iv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ON},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ct(iv,Ve,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const x=Nt(Tu(v)),w=x.length;let E=0,T;for(;E<w;++E)r[T=x[E]]||(r[T]=1,t.push(T))}this._dims=Nt(e.groupby),this._dnames=this._dims.map(v=>{const x=Ys(v);return i(v),n.push(x),x}),this.cellkey=e.key?e.key:cY(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Ye("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Ye("Null aggregate field specified."),m=Ys(f),g=lMe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(cMe(d,h,g))}return this._measures=this._measures.map(v=>dMe(v,v.field)),Object.create(null)},cellkey:cY(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new ire),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?H$e(t.tuple,s):mi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const g5t=1e-14;function sre(e){Ve.call(this,null,e)}sre.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ct(sre,Ve,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Tu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Q$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=wu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(g5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Sc(u,Tu(t),e.name||"bin_"+Ys(t))}});function hMe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?o$e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function ore(e){Ve.call(this,[],e)}ore.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ct(ore,Ve,{transform(e,t){const n=t.fork(t.ALL),r=hMe(nn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(sw(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function pMe(e){Wi.call(this,null,y5t,e)}Ct(pMe,Wi);function y5t(e){return this.value&&!e.modified()?this.value:Tne(e.fields,e.orders)}function are(e){Ve.call(this,null,e)}are.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function v5t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ct(are,Ve,{transform(e,t){const n=f=>d=>{for(var h=v5t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=mi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function ure(e){Ve.call(this,null,e)}ure.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ct(ure,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=b5t(a,i,s,e.filter||cd)):n.mod=a,n.source=this.value,n.modifies(r)}});function b5t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(mi(s)),s={},s[t]=l);return i}const _1e={kde:Wne,mixture:nMe,normal:qne,lognormal:tMe,uniform:rMe},x5t="distributions",w1e="function",_5t="field";function mMe(e,t){const n=e[w1e];sn(_1e,n)||Ye("Unknown distribution function: "+n);const r=_1e[n]();for(const i in e)i===_5t?r.data((e.from||t()).map(e[i])):i===x5t?r[i](e[i].map(s=>mMe(s,t))):typeof r[i]===w1e&&r[i](e[i]);return r}function lre(e){Ve.call(this,null,e)}const gMe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],w5t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:gMe},{name:"weights",type:"number",array:!0}]};lre.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:gMe.concat(w5t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(lre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=mMe(e.distribution,E5t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ye("Invalid density method: "+o),!e.extent&&!r.data&&Ye("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||ym(r.data()),l=J8(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],mi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function E5t(e){return()=>e.materialize(e.SOURCE).source}function yMe(e,t){return e?e.map((n,r)=>t[r]||Ys(n)):null}function cre(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const vMe="bin";function fre(e){Ve.call(this,null,e)}fre.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:vMe}]};const S5t=(e,t)=>DN(ym(e,t))/30;Ct(fre,Ve,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=cre(t.source,e.groupby,Nu),i=e.smooth||!1,s=e.field,o=e.step||S5t(n,s),a=sw((p,m)=>s(p)-s(m)),u=e.as||vMe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of Z$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function bMe(e){Wi.call(this,null,T5t,e),this.modified(!0)}Ct(bMe,Wi);function T5t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Sc(n=>t(n,e),Tu(t),Ys(t))}function dre(e){Ve.call(this,[void 0,void 0],e)}dre.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ct(dre,Ve,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=wu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ys(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function hre(e,t){Wi.call(this,e),this.parent=t,this.count=0}Ct(hre,Wi,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Z8(e){Ve.call(this,{},e),this._keys=iC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ct(Z8,Ve,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=sn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new hre(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=nn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(nn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=nn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(nn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=nn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function xMe(e){Wi.call(this,null,C5t,e)}Ct(xMe,Wi);function C5t(e){return this.value&&!e.modified()?this.value:Xe(e.name)?Nt(e.name).map(t=>ld(t)):ld(e.name,e.as)}function pre(e){Ve.call(this,iC(),e)}pre.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ct(pre,Ve,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=nn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(nn(f),1)});function c(f){const d=nn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function mre(e){Ve.call(this,[],e)}mre.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ct(mre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yMe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Fne(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function gre(e){Ve.call(this,[],e)}gre.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ct(gre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ys),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Fne(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function yre(e){Ve.call(this,null,e)}yre.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ct(yre,Ve,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function _Me(e){Ve.call(this,[],e)}Ct(_Me,Ve,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=mi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const IO={value:"value",median:rRe,mean:Obt,min:hW,max:Q0},A5t=[];function vre(e){Ve.call(this,[],e)}vre.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function I5t(e){var t=e.method||IO.value,n;if(IO[t]==null)Ye("Unrecognized imputation method: "+t);else return t===IO.value?(n=e.value!==void 0?e.value:0,()=>n):IO[t]}function k5t(e){const t=e.field;return n=>n?t(n):NaN}Ct(vre,Ve,{transform(e,t){var n=t.fork(t.ALL),r=I5t(e),i=k5t(e),s=Ys(e.field),o=Ys(e.key),a=(e.groupby||[]).map(Ys),u=R5t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,x,w,E;for(g=0,x=u.length;g<x;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(mi(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function R5t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):A5t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function bre(e){iv.call(this,e)}bre.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ON},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ct(bre,iv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function xre(e){Ve.call(this,null,e)}xre.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(xre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=cre(r,e.groupby,e.field),s=(e.groupby||[]).map(Ys),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ye("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=ym(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Wne(h,o)[a],m=e.counts?h.length:1,g=c||ym(h);J8(p,g,f,d).forEach(y=>{const v={};for(let x=0;x<s.length;++x)v[s[x]]=h.dims[x];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(mi(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function wMe(e){Wi.call(this,null,D5t,e)}Ct(wMe,Wi);function D5t(e){return this.value&&!e.modified()?this.value:Ane(e.fields,e.flat)}function EMe(e){Ve.call(this,[],e),this._pending=null}Ct(EMe,Ve,{transform(e,t){const n=t.dataflow;return this._pending?tV(this,t,this._pending):N5t(e)?t.StopPropagation:e.values?tV(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>tV(this,t,Nt(r.data)))}});function N5t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function tV(e,t,n){n.forEach(mi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function _re(e){Ve.call(this,{},e)}_re.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ct(_re,Ve,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Ye('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Ye('The "as" parameter has too few output field names.'),c=c||i.map(Ys),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Ye("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function SMe(e){Wi.call(this,null,P5t,e)}Ct(SMe,Wi);function P5t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function TMe(e){Wi.call(this,null,O5t,e)}Ct(TMe,Wi);function O5t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function CMe(e){Ve.call(this,null,e)}Ct(CMe,Ve,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function wre(e){iv.call(this,e)}wre.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ON,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ct(wre,iv,{_transform:iv.prototype.transform,transform(e,t){return this._transform($5t(e,t),t)}});function $5t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Tu(n).concat(Tu(r)),o=L5t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>M5t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function M5t(e,t,n,r){return Sc(i=>t(i)===e?n(i):NaN,r,e+"")}function L5t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(j8),t?i.slice(0,t):i}function AMe(e){Z8.call(this,e)}Ct(AMe,Z8,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(nn(s),n,t,s);return(e.modified("field")||r&&t.modified(Tu(r)))&&Ye("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(mi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Ere(e){Ve.call(this,null,e)}Ere.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ct(Ere,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yMe(e.fields,e.as||[]),s=r?(a,u)=>F5t(a,u,r,i):q8;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=nn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,mi({}));o[nn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[nn(a)]))}),n}});function F5t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function IMe(e){Ve.call(this,null,e)}Ct(IMe,Ve,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Sre(e){Ve.call(this,null,e)}Sre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const B5t=1e-14;Ct(Sre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=cre(i,e.groupby,e.field),o=(e.groupby||[]).map(Ys),a=[],u=e.step||.01,l=e.probs||Ql(u/2,1-B5t,u),c=l.length;return s.forEach(f=>{const d=Une(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(mi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function kMe(e){Ve.call(this,null,e)}Ct(kMe,Ve,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=nn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Fne(i);r[nn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[nn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Tre(e){Ve.call(this,[],e),this.count=0}Tre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ct(Tre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[nn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*dd()),d<o.length&&d>=u&&(f=o[d],s[nn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=nn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[nn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[nn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[nn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[nn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[nn(c)])),this.count=a,this.value=n.source=o,n}});function Cre(e){Ve.call(this,null,e)}Cre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ct(Cre,Ve,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ql(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,mi(s)}),n.add=t.add.concat(this.value),n}});function RMe(e){Ve.call(this,null,e),this.modified(!0)}Ct(RMe,Ve,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Are(e){Ve.call(this,null,e)}const DMe=["unit0","unit1"];Are.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Dne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:DMe}]};Ct(Are,Ve,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?oC:sC)(s.unit).offset,a=e.as||DMe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Tu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:I$e({extent:e.extent||ym(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Nne(r),o=this.value||{},a=(n?b$e:v$e)(s,i);return a.unit=Lr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function NMe(e){Ve.call(this,iC(),e)}Ct(NMe,Ve,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function PMe(e){Ve.call(this,null,e)}Ct(PMe,Ve,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(sw(e.sort)):t.source).map(e.field))}});function j5t(e,t,n,r){const i=JR[e](t,n);return{init:i.init||qy,update:function(s,o){o[r]=i.next(s)}}}const JR={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=JR.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ye("ntile num must be greater than zero.");const n=JR.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ye("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=U5t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function U5t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const z5t=Object.keys(JR);function OMe(e){const t=Nt(e.ops),n=Nt(e.fields),r=Nt(e.params),i=Nt(e.aggregate_params),s=Nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Nt(Tu(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,x=Ys(g),w=lMe(p,x,s[m]);if(h(g),o.push(w),sn(JR,p))a.push(j5t(p,g,y,w));else{if(g==null&&p!=="count"&&Ye("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[x];E||(E=l[x]=[],E.field=g,f.push(E)),E.push(cMe(p,v,w))}}),(c.length||f.length)&&(this.cell=V5t(f,c,d)),this.inputs=Object.keys(u)}const $Me=OMe.prototype;$Me.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};$Me.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function V5t(e,t,n){e=e.map(u=>dMe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new ire;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Ire(e){Ve.call(this,{},e),this._mlen=0,this._mods=[]}Ire.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:z5t.concat(ON)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ct(Ire,Ve,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=sw(e.sort),i=cY(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new OMe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)H5t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=hMe(nn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function H5t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?$2(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Pu(-1)};t.init();for(let f=0;f<u;++f)q5t(c,o,f,u),s&&W5t(c,l),t.update(c,a[f])}function q5t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function W5t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const G5t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:iv,bin:sre,collect:ore,compare:pMe,countpattern:are,cross:ure,density:lre,dotbin:fre,expression:bMe,extent:dre,facet:Z8,field:xMe,filter:pre,flatten:mre,fold:gre,formula:yre,generate:_Me,impute:vre,joinaggregate:bre,kde:xre,key:wMe,load:EMe,lookup:_re,multiextent:SMe,multivalues:TMe,params:CMe,pivot:wre,prefacet:AMe,project:Ere,proxy:IMe,quantile:Sre,relay:kMe,sample:Tre,sequence:Cre,sieve:RMe,subflow:hre,timeunit:Are,tupleindex:NMe,values:PMe,window:Ire},Symbol.toStringTag,{value:"Module"}));function C1(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Y5t=()=>typeof Image<"u"?Image:null;function kre(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const K5t="identity",$T="linear",Ig="log",$N="pow",MN="sqrt",eB="symlog",u_="time",l_="utc",Zp="sequential",uC="diverging",MT="quantile",tB="quantize",nB="threshold",Rre="ordinal",fY="point",MMe="band",Dre="bin-ordinal",Ko="continuous",LN="discrete",FN="discretizing",Td="interpolating",Nre="temporal";function X5t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Q5t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Pre(){const e=Bv().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=kre(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ql(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,x;if(!(m!==m||g!==g)&&(g<m&&(x=m,m=g,g=x),!(g<h[0]||m>r[1-d])))return y=Math.max(0,U1(h,m)-1),v=m===g?y:U1(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(x=y,y=p-v,v=p-x),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Pre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function LMe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return LMe(t())},e}function J5t(){return LMe(Pre().paddingInner(1))}var Z5t=Array.prototype.map;function e8t(e){return Z5t.call(e,wu)}const t8t=Array.prototype.slice;function FMe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(U1(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=e8t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=t8t.call(r),n):t.slice()},n.tickFormat=function(r,i){return uNe(e[0],Lr(e),r??10,i)},n.copy=function(){return FMe().domain(n.domain()).range(n.range())},n}const pL=new Map,BMe=Symbol("vega_scale");function jMe(e){return e[BMe]=!0,e}function n8t(e){return e&&e[BMe]===!0}function r8t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?X5t(s):s.invertExtent?Q5t(s):void 0),s.type=e,jMe(s)};return r.metadata=Lh(Nt(n)),r}function si(e,t,n){return arguments.length>1?(pL.set(e,r8t(e,t,n)),this):UMe(e)?pL.get(e):void 0}si(K5t,lNe);si($T,dc,Ko);si(Ig,fNe,[Ko,Ig]);si($N,dee,Ko);si(MN,aCt,Ko);si(eB,dNe,Ko);si(u_,gee,[Ko,Nre]);si(l_,wAt,[Ko,Nre]);si(Zp,yee,[Ko,Td]);si(`${Zp}-${$T}`,yee,[Ko,Td]);si(`${Zp}-${Ig}`,TNe,[Ko,Td,Ig]);si(`${Zp}-${$N}`,vee,[Ko,Td]);si(`${Zp}-${MN}`,EAt,[Ko,Td]);si(`${Zp}-${eB}`,CNe,[Ko,Td]);si(`${uC}-${$T}`,ANe,[Ko,Td]);si(`${uC}-${Ig}`,INe,[Ko,Td,Ig]);si(`${uC}-${$N}`,bee,[Ko,Td]);si(`${uC}-${MN}`,SAt,[Ko,Td]);si(`${uC}-${eB}`,kNe,[Ko,Td]);si(MT,hNe,[FN,MT]);si(tB,pNe,FN);si(nB,mNe,FN);si(Dre,FMe,[LN,FN]);si(Rre,Bv,LN);si(MMe,Pre,LN);si(fY,J5t,LN);function UMe(e){return pL.has(e)}function aw(e,t){const n=pL.get(e);return n&&n.metadata[t]}function Ore(e){return aw(e,Ko)}function LT(e){return aw(e,LN)}function dY(e){return aw(e,FN)}function zMe(e){return aw(e,Ig)}function i8t(e){return aw(e,Nre)}function VMe(e){return aw(e,Td)}function HMe(e){return aw(e,MT)}const s8t=["clamp","base","constant","exponent"];function qMe(e,t){const n=t[0],r=Lr(t)-n;return function(i){return e(n+i*r)}}function rB(e,t,n){return qZ($re(t||"rgb",n),e)}function WMe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function GMe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Pu(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=si(s)().domain([t,n]).range([0,1]),s8t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function $re(e,t){const n=iwt[o8t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function o8t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const a8t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},u8t={accent:CAt,category10:TAt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:AAt,observable10:IAt,paired:kAt,pastel1:RAt,pastel2:DAt,set1:NAt,set2:PAt,set3:OAt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function YMe(e){if(Xe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function KMe(e,t){for(const n in e)Mre(n,t(e[n]))}const E1e={};KMe(u8t,YMe);KMe(a8t,e=>rB(YMe(e)));function Mre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(E1e[e]=t,this):E1e[e]}const u6="symbol",l8t="discrete",c8t="gradient",f8t=e=>Xe(e)?e.map(t=>String(t)):String(e),d8t=(e,t)=>e[1]-t[1],h8t=(e,t)=>t[1]-e[1];function Lre(e,t,n){let r;return Xr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(DN(e.domain())/n||1)+1))),Ot(t)&&(r=t.step,t=t.interval),Pt(t)&&(t=e.type===u_?sC(t):e.type==l_?oC(t):Ye("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function XMe(e,t,n){let r=e.range(),i=r[0],s=Lr(r),o=d8t;if(i>s&&(r=s,s=i,i=r,o=h8t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Lr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Fre(e,t){return e.bins?XMe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function QMe(e,t,n,r,i,s){const o=t.type;let a=f8t;if(o===u_||i===u_)a=e.timeFormat(r);else if(o===l_||i===l_)a=e.utcFormat(r);else if(zMe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=JMe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function JMe(e,t,n){const r=Fre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const hY={[MT]:"quantiles",[tB]:"thresholds",[nB]:"domain"},ZMe={[MT]:"quantiles",[tB]:"domain"};function eLe(e,t){return e.bins?g8t(e.bins):e.type===Ig?JMe(e,t,!0):hY[e.type]?m8t(e[hY[e.type]]()):Fre(e,t)}function p8t(e,t,n){const r=t[ZMe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function m8t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function g8t(e){const t=e.slice(0,-1);return t.max=Lr(e),t}const y8t=e=>hY[e.type]||e.bins;function tLe(e,t,n,r,i,s,o){const a=ZMe[t.type]&&s!==u_&&s!==l_?p8t(e,t,i):QMe(e,t,n,i,s,o);return r===u6&&y8t(t)?v8t(a):r===l8t?b8t(a):x8t(a)}const v8t=e=>(t,n,r)=>{const i=S1e(r[n+1],S1e(r.max,1/0)),s=T1e(t,e),o=T1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},S1e=(e,t)=>e??t,b8t=e=>(t,n)=>n?e(t):null,x8t=e=>t=>e(t),T1e=(e,t)=>Number.isFinite(e)?t(e):null;function _8t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Lr(t),s=i-r;if(e.type===nB){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function w8t(e,t,n,r){const i=r||t.type;return Pt(n)&&i8t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===u_?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===l_?e.utcFormat("%A, %d %B %Y, %X UTC"):tLe(e,t,5,null,n,r,!0)}function nLe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=w8t(e,t,n.format,n.formatType);if(dY(t.type)){const s=eLe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(LT(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Lr(s))}`}}let rLe=0;function E8t(){rLe=0}const mL="p_";function Bre(e){return e&&e.gradient}function iLe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?mL:"";return i||(i=e.id="gradient_"+rLe++,r==="radial"?(e.x1=lp(e.x1,.5),e.y1=lp(e.y1,.5),e.r1=lp(e.r1,0),e.x2=lp(e.x2,.5),e.y2=lp(e.y2,.5),e.r2=lp(e.r2,.5),s=mL):(e.x1=lp(e.x1,0),e.y1=lp(e.y1,0),e.x2=lp(e.x2,1),e.y2=lp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function lp(e,t){return e??t}function sLe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const C1e={basis:{curve:YAt},"basis-closed":{curve:KAt},"basis-open":{curve:XAt},bundle:{curve:QAt,tension:"beta",value:.85},cardinal:{curve:JAt,tension:"tension",value:0},"cardinal-open":{curve:eIt,tension:"tension",value:0},"cardinal-closed":{curve:ZAt,tension:"tension",value:0},"catmull-rom":{curve:tIt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:nIt,tension:"alpha",value:.5},"catmull-rom-open":{curve:rIt,tension:"alpha",value:.5},linear:{curve:xee},"linear-closed":{curve:iIt},monotone:{horizontal:oIt,vertical:sIt},natural:{curve:aIt},step:{curve:uIt},"step-after":{curve:cIt},"step-before":{curve:lIt}};function jre(e,t,n){var r=sn(C1e,e)&&C1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const S8t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},T8t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,C8t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,A8t=/^((\s+,?\s*)|(,\s*))/,I8t=/^[01]/;function FT(e){const t=[];return(e.match(T8t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=S8t[s],a=k8t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function k8t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?I8t:C8t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(A8t);u!==null&&(i+=u[0].length)}return r}const sv=Math.PI/180,R8t=1e-14,ex=Math.PI/2,$p=Math.PI*2,aE=Math.sqrt(3)/2;var nV={},rV={},oLe=[].join;function D8t(e,t,n,r,i,s,o,a,u){const l=oLe.call(arguments);if(nV[l])return nV[l];const c=o*sv,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,x=d/r,w=g*a+y*u,E=v*a+x*u,T=g*e+y*t,C=v*e+x*t;let N=1/((T-w)*(T-w)+(C-E)*(C-E))-.25;N<0&&(N=0);let k=Math.sqrt(N);s==i&&(k=-k);const P=.5*(w+T)-k*(C-E),M=.5*(E+C)+k*(T-w),O=Math.atan2(E-M,w-P);let q=Math.atan2(C-M,T-P)-O;q<0&&s===1?q+=$p:q>0&&s===0&&(q-=$p);const H=Math.ceil(Math.abs(q/(ex+.001))),Y=[];for(let K=0;K<H;++K){const J=O+K*q/H,F=O+(K+1)*q/H;Y[K]=[P,M,J,F,n,r,f,d]}return nV[l]=Y}function N8t(e){const t=oLe.call(e);if(rV[t])return rV[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),x=Math.sin(v*.5),w=8/3*x*x/Math.sin(v),E=n+p-w*m,T=r+m+w*p,C=n+g,I=r+y,N=C+w*y,k=I-w*g;return rV[t]=[c*E+f*T,d*E+h*T,c*N+f*k,d*N+h*k,c*C+f*I,d*C+h*I]}const Mf=["l",0,0,0,0,0,0,0];function P8t(e,t,n){const r=Mf[0]=e[0];if(r==="a"||r==="A")Mf[1]=t*e[1],Mf[2]=n*e[2],Mf[3]=e[3],Mf[4]=e[4],Mf[5]=e[5],Mf[6]=t*e[6],Mf[7]=n*e[7];else if(r==="h"||r==="H")Mf[1]=t*e[1];else if(r==="v"||r==="V")Mf[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Mf[i]=(i%2==1?t:n)*e[i];return Mf}function ZR(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,x=t.length;v<x;++v){switch(o=t[v],(i!==1||s!==1)&&(o=P8t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":A1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":A1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function A1e(e,t,n,r){const i=D8t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=N8t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const I1e=.5773502691896257,k1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,$p)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n,i=r-n*I1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n,i=r-n*I1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function aLe(e){return sn(k1e,e)?k1e[e]:O8t(e)}var iV={};function O8t(e){if(!sn(iV,e)){const t=FT(e);iV[e]={draw:function(n,r){ZR(n,t,0,0,Math.sqrt(r)/2)}}}return iV[e]}const by=.448084975506;function $8t(e){return e.x}function M8t(e){return e.y}function L8t(e){return e.width}function F8t(e){return e.height}function c0(e){return typeof e=="function"?e:()=>+e}function kO(e,t,n){return Math.max(t,Math.min(e,n))}function uLe(){var e=$8t,t=M8t,n=L8t,r=F8t,i=c0(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,x=kO(+i.call(this,c),0,v),w=kO(+s.call(this,c),0,v),E=kO(+o.call(this,c),0,v),T=kO(+a.call(this,c),0,v);if(u||(u=h=Y5()),x<=0&&w<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var C=p+g,I=m+y;u.moveTo(p+x,m),u.lineTo(C-w,m),u.bezierCurveTo(C-by*w,m,C,m+by*w,C,m+w),u.lineTo(C,I-T),u.bezierCurveTo(C,I-by*T,C-by*T,I,C-T,I),u.lineTo(p+E,I),u.bezierCurveTo(p+by*E,I,p,I-by*E,p,I-E),u.lineTo(p,m+x),u.bezierCurveTo(p,m+by*x,p+by*x,m,p+x,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=c0(c),l):e},l.y=function(c){return arguments.length?(t=c0(c),l):t},l.width=function(c){return arguments.length?(n=c0(c),l):n},l.height=function(c){return arguments.length?(r=c0(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=c0(c),s=f!=null?c0(f):i,a=d!=null?c0(d):i,o=h!=null?c0(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function lLe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,x=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-x),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+x),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,$p);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=Y5()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function BN(e,t){return e??t}const jN=e=>e.x||0,UN=e=>e.y||0,B8t=e=>e.width||0,j8t=e=>e.height||0,U8t=e=>(e.x||0)+(e.width||0),z8t=e=>(e.y||0)+(e.height||0),V8t=e=>e.startAngle||0,H8t=e=>e.endAngle||0,q8t=e=>e.padAngle||0,W8t=e=>e.innerRadius||0,G8t=e=>e.outerRadius||0,Y8t=e=>e.cornerRadius||0,K8t=e=>BN(e.cornerRadiusTopLeft,e.cornerRadius)||0,X8t=e=>BN(e.cornerRadiusTopRight,e.cornerRadius)||0,Q8t=e=>BN(e.cornerRadiusBottomRight,e.cornerRadius)||0,J8t=e=>BN(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Z8t=e=>BN(e.size,64),eBt=e=>e.size||1,iB=e=>e.defined!==!1,tBt=e=>aLe(e.shape||"circle"),nBt=eG().startAngle(V8t).endAngle(H8t).padAngle(q8t).innerRadius(W8t).outerRadius(G8t).cornerRadius(Y8t),rBt=ONe().x(jN).y1(UN).y0(z8t).defined(iB),iBt=ONe().y(UN).x1(jN).x0(U8t).defined(iB),sBt=PNe().x(jN).y(UN).defined(iB),oBt=uLe().x(jN).y(UN).width(B8t).height(j8t).cornerRadius(K8t,X8t,Q8t,J8t),aBt=GAt().type(tBt).size(Z8t),uBt=lLe().x(jN).y(UN).defined(iB).size(eBt);function Ure(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function lBt(e,t){return nBt.context(e)(t)}function cBt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?iBt:rBt).curve(jre(r,n.orient,n.tension)).context(e)(t)}function fBt(e,t){const n=t[0],r=n.interpolate||"linear";return sBt.curve(jre(r,n.orient,n.tension)).context(e)(t)}function lC(e,t,n,r){return oBt.context(e)(t,n,r)}function dBt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function hBt(e,t){return aBt.context(e)(t)}function pBt(e,t){return uBt.context(e)(t)}var cLe=1;function fLe(){cLe=1}function zre(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+cLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Yn(r)?o.path=r(null):Ure(n)?o.path=lC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function So(e){this.clear(),e&&this.union(e)}So.prototype={clone(){return new So(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function sB(e){this.mark=e,this.bounds=this.bounds||new So}function oB(e){sB.call(this,e),this.items=this.items||[]}Ct(oB,sB);class dLe{constructor(t){this._pending=0,this._loader=t||z8()}pending(){return this._pending}sanitizeURL(t){const n=this;return R1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(AA(n),r)).catch(()=>(AA(n),null))}loadImage(t){const n=this,r=Y5t();return R1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=sn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>AA(n),o.onerror=()=>AA(n),o.src=s,o}).catch(i=>(AA(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function R1e(e){e._pending+=1}function AA(e){e._pending-=1}function Xg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?mBt(t,r):0))}return e}function mBt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const gBt=$p-1e-8;let aB,l6,c6,Sx,pY,f6,mY,gY;const t1=(e,t)=>aB.add(e,t),d6=(e,t)=>t1(l6=e,c6=t),D1e=e=>t1(e,aB.y1),N1e=e=>t1(aB.x1,e),tx=(e,t)=>pY*e+mY*t,nx=(e,t)=>f6*e+gY*t,sV=(e,t)=>t1(tx(e,t),nx(e,t)),oV=(e,t)=>d6(tx(e,t),nx(e,t));function zN(e,t){return aB=e,t?(Sx=t*sv,pY=gY=Math.cos(Sx),f6=Math.sin(Sx),mY=-f6):(pY=gY=1,Sx=f6=mY=0),yBt}const yBt={beginPath(){},closePath(){},moveTo:oV,lineTo:oV,rect(e,t,n,r){Sx?(sV(e+n,t),sV(e+n,t+r),sV(e,t+r),oV(e,t)):(t1(e+n,t+r),d6(e,t))},quadraticCurveTo(e,t,n,r){const i=tx(e,t),s=nx(e,t),o=tx(n,r),a=nx(n,r);P1e(l6,i,o,D1e),P1e(c6,s,a,N1e),d6(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=tx(e,t),a=nx(e,t),u=tx(n,r),l=nx(n,r),c=tx(i,s),f=nx(i,s);O1e(l6,o,u,c,D1e),O1e(c6,a,l,f,N1e),d6(c,f)},arc(e,t,n,r,i,s){if(r+=Sx,i+=Sx,l6=n*Math.cos(i)+e,c6=n*Math.sin(i)+t,Math.abs(i-r)>gBt)t1(e-n,t-n),t1(e+n,t+n);else{const o=l=>t1(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%$p,r<0&&(r+=$p),i=i%$p,i<0&&(i+=$p),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=$p,a=r-r%ex,u=0;u<4&&a>i;++u,a-=ex)o(a);else for(a=r-r%ex+ex,u=0;u<4&&a<i;++u,a=a+ex)o(a)}}};function P1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function O1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>R8t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i($1e(u,e,t,n,r)),0<l&&l<1&&i($1e(l,e,t,n,r))}function $1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var A1=(A1=C1(1,1))?A1.getContext("2d"):null;const yY=new So;function Vre(e){return function(t,n){if(!A1)return!0;e(A1,t),yY.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=yY;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(A1.isPointInPath(u,a))return!0;return!1}}function Hre(e,t){return t.contains(e.x||0,e.y||0)}function hLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(yY.set(n,r,n+i,r+s))}function pLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return rS(t,n,r,i,s)}function rS(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function BT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Hd(e,t){return e??t}function M1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function vBt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Hd(t.x1,.5)*r,n.y1+Hd(t.y1,.5)*i,Math.max(r,i)*Hd(t.r1,0),n.x1+Hd(t.x2,.5)*r,n.y1+Hd(t.y2,.5)*i,Math.max(r,i)*Hd(t.r2,.5));else{const o=Hd(t.x1,0),a=Hd(t.y1,0),u=Hd(t.x2,1),l=Hd(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=C1(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=M1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return M1e(s,t.stops)}function mLe(e,t,n){return Bre(n)?vBt(e,n,t.bounds):n}function gL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=mLe(e,t,t.fill),!0):!1}var bBt=[];function jT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=mLe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||bBt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function xBt(e,t){return e.zindex-t.zindex||e.index-t.index}function qre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(xBt)}function Bh(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=qre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function yL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=qre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Wre(e){return function(t,n,r){Bh(n,i=>{(!r||r.intersects(i.bounds))&&gLe(e,t,i,i)})}}function _Bt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&gLe(e,t,n.items[0],n.items)}}function gLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(BT(t,n),n.fill&&gL(t,n,i)&&t.fill(),n.stroke&&jT(t,n,i)&&t.stroke()))}function uB(e){return e=e||cd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,yL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function VN(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Gre(e){return uB(VN(e))}function Mx(e,t){return"translate("+e+","+t+")"}function Yre(e){return"rotate("+e+")"}function wBt(e,t){return"scale("+e+","+t+")"}function yLe(e){return Mx(e.x||0,e.y||0)}function EBt(e){return Mx(e.x||0,e.y||0)+(e.angle?" "+Yre(e.angle):"")}function SBt(e){return Mx(e.x||0,e.y||0)+(e.angle?" "+Yre(e.angle):"")+(e.scaleX||e.scaleY?" "+wBt(e.scaleX||1,e.scaleY||1):"")}function Kre(e,t,n){function r(o,a){o("transform",EBt(a)),o("d",t(null,a))}function i(o,a){return t(zN(o,a.angle),a),Xg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=sv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Wre(s),pick:Gre(s),isect:n||Vre(s)}}var TBt=Kre("arc",lBt);function CBt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function ABt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function IBt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Xre(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(zN(u),c),Xg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=VN(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:_Bt(s),pick:a,isect:Hre,tip:n}}var kBt=Xre("area",cBt,CBt);function RBt(e,t){var n=t.clip;e.save(),Yn(n)?(e.beginPath(),n(e),e.clip()):vLe(e,t.group)}function vLe(e,t){e.beginPath(),Ure(t)?lC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function bLe(e){const t=Hd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function DBt(e,t){e("transform",yLe(t))}function xLe(e,t){const n=bLe(t);e("d",lC(null,t,n,n))}function NBt(e,t){e("class","background"),e("aria-hidden",!0),xLe(e,t)}function PBt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?xLe(e,t):e("d","")}function OBt(e,t,n){const r=t.clip?zre(n,t,t):null;e("clip-path",r)}function $Bt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Xg(e,t),e.translate(t.x||0,t.y||0)}function eD(e,t,n,r){const i=bLe(t);e.beginPath(),lC(e,t,(n||0)+i,(r||0)+i)}const MBt=VN(eD),LBt=VN(eD,!1),FBt=VN(eD,!0);function BBt(e,t,n,r){Bh(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(eD(e,i,s,o),BT(e,i),i.fill&&gL(e,i,u)&&e.fill(),i.stroke&&!a&&jT(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&vLe(e,i),n&&n.translate(-s,-o),Bh(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(eD(e,i,s,o),BT(e,i),jT(e,i,u)&&e.stroke())})}function jBt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return yL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Ure(u)&&!FBt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&LBt(e,u,o,a)?(e.restore(),u):(l=yL(u,v=>UBt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&MBt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function UBt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var zBt={type:"group",tag:"g",nested:!1,attr:DBt,bound:$Bt,draw:BBt,pick:jBt,isect:hLe,content:OBt,background:NBt,foreground:PBt},tD={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Qre(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Jre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Zre(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function lB(e,t){return e==="center"?t/2:e==="right"?t:0}function cB(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function VBt(e,t,n){const r=Qre(t,n),i=Jre(t,r),s=Zre(t,r),o=(t.x||0)-lB(t.align,i),a=(t.y||0)-cB(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,tD["xmlns:xlink"],"xlink:href"),e("transform",Mx(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function HBt(e,t){const n=t.image,r=Jre(t,n),i=Zre(t,n),s=(t.x||0)-lB(t.align,r),o=(t.y||0)-cB(t.baseline,i);return e.set(s,o,s+r,o+i)}function qBt(e,t,n){Bh(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Qre(r,this);let s=Jre(r,i),o=Zre(r,i);if(s===0||o===0)return;let a=(r.x||0)-lB(r.align,s),u=(r.y||0)-cB(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(BT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var WBt={type:"image",tag:"image",nested:!1,attr:VBt,bound:HBt,draw:qBt,pick:uB(),isect:cd,get:Qre,xOffset:lB,yOffset:cB},GBt=Xre("line",fBt,ABt);function YBt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",SBt(t)),e("d",t.path)}function h6(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*sv,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=FT(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),ZR(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):ZR(e,u,r,i,s,o)}function KBt(e,t){return h6(zN(e,t.angle),t)?e.set(0,0,0,0):Xg(e,t,!0)}var XBt={type:"path",tag:"path",nested:!1,attr:YBt,bound:KBt,draw:Wre(h6),pick:Gre(h6),isect:Vre(h6)};function QBt(e,t){e("d",lC(null,t))}function JBt(e,t){var n,r;return Xg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function L1e(e,t){e.beginPath(),lC(e,t)}var ZBt={type:"rect",tag:"path",nested:!1,attr:QBt,bound:JBt,draw:Wre(L1e),pick:Gre(L1e),isect:hLe};function e9t(e,t){e("transform",yLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function t9t(e,t){var n,r;return Xg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function _Le(e,t,n){var r,i,s,o;return t.stroke&&jT(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function n9t(e,t,n){Bh(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&_Le(e,r,i)&&(BT(e,r),e.stroke())}})}function r9t(e,t,n,r){return e.isPointInStroke?_Le(e,t,1)&&e.isPointInStroke(n,r):!1}var i9t={type:"rule",tag:"line",nested:!1,attr:e9t,bound:t9t,draw:n9t,pick:uB(r9t),isect:pLe},s9t=Kre("shape",dBt),o9t=Kre("symbol",hBt,Hre);const F1e=s$e();var ef={height:Lm,measureWidth:eie,estimateWidth:vL,width:vL,canvas:wLe};wLe(!0);function wLe(e){ef.width=e&&A1?eie:vL}function vL(e,t){return ELe(av(e,t),Lm(e))}function ELe(e,t){return~~(.8*e.length*t)}function eie(e,t){return Lm(e)<=0||!(t=av(e,t))?0:SLe(t,fB(e))}function SLe(e,t){const n=`(${t}) ${e}`;let r=F1e.get(n);return r===void 0&&(A1.font=t,r=A1.measureText(e).width,F1e.set(n,r)),r}function Lm(e){return e.fontSize!=null?+e.fontSize||0:11}function ov(e){return e.lineHeight!=null?e.lineHeight:Lm(e)+2}function a9t(e){return Xe(e)?e.length>1?e:e[0]:e}function HN(e){return a9t(e.lineBreak&&e.text&&!Xe(e.text)?e.text.split(e.lineBreak):e.text)}function tie(e){const t=HN(e);return(Xe(t)?t.length-1:0)*ov(e)}function av(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?l9t(e,n):n}function u9t(e){if(ef.width===eie){const t=fB(e);return n=>SLe(n,t)}else if(ef.width===vL){const t=Lm(e);return n=>ELe(n,t)}else return t=>ef.width(e,t)}function l9t(e,t){var n=+e.limit,r=u9t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function qN(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function fB(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Lm(e)+"px "+qN(e,t)}function nie(e){var t=e.baseline,n=Lm(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ov(e):t==="line-bottom"?.29*n-.5*ov(e):0)}const c9t={left:"start",center:"middle",right:"end"},yk=new So;function dB(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-ex,t+=r*Math.cos(i),n+=r*Math.sin(i)),yk.x1=t,yk.y1=n,yk}function f9t(e,t){var n=t.dx||0,r=(t.dy||0)+nie(t),i=dB(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",c9t[t.align]||"start"),a?(u=Mx(s,o)+" "+Yre(a),(n||r)&&(u+=" "+Mx(n,r))):u=Mx(s+n,o+r),e("transform",u)}function rie(e,t,n){var r=ef.height(t),i=t.align,s=dB(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+nie(t)-Math.round(.8*r),c=HN(t),f;if(Xe(c)?(r+=ov(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ef.width(t,h)),0)):f=ef.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*sv,o,a);else if(n===2)return e.rotatedPoints(t.angle*sv,o,a);return e}function d9t(e,t,n){Bh(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=fB(r),e.textAlign=r.align||"left",s=dB(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*sv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+nie(r),c=HN(r),BT(e,r),Xe(c))for(l=ov(r),u=0;u<c.length;++u)f=av(r,c[u]),r.fill&&gL(e,r,i)&&e.fillText(f,o,a),r.stroke&&jT(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=av(r,c),r.fill&&gL(e,r,i)&&e.fillText(f,o,a),r.stroke&&jT(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function h9t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=dB(t),a=o.x1,u=o.y1,l=rie(yk,t,1),c=-t.angle*sv,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function p9t(e,t){const n=rie(yk,e,2);return rS(t,n[0],n[1],n[2],n[3])||rS(t,n[0],n[1],n[4],n[5])||rS(t,n[4],n[5],n[6],n[7])||rS(t,n[2],n[3],n[6],n[7])}var m9t={type:"text",tag:"text",nested:!1,attr:f9t,bound:rie,draw:d9t,pick:uB(h9t),isect:p9t},g9t=Xre("trail",pBt,IBt),yf={arc:TBt,area:kBt,group:zBt,image:WBt,line:GBt,path:XBt,rect:ZBt,rule:i9t,shape:s9t,symbol:o9t,text:m9t,trail:g9t};function vY(e,t,n){var r=yf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new So),e,n)}var B1e={mark:null};function TLe(e,t,n){var r=yf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(B1e.mark=e,l=B1e),c=vY(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new So,o)for(a=0,u=s.length;a<u;++a)t.union(vY(s[a],i,n));return e.bounds=t}const y9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function CLe(e,t){return JSON.stringify(e,y9t,t)}function ALe(e){const t=typeof e=="string"?JSON.parse(e):e;return ILe(t)}function ILe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&ILe(n[i]);return t&&TLe(e),e}class kLe{constructor(t){arguments.length?this.root=ALe(t):(this.root=j1e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new oB(this.root)])}toJSON(t){return CLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=j1e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function j1e(e,t){const n={bounds:new So,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function n1(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function iie(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Bo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=n1(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Gf(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function RLe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function hB(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function v9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=yf[i.marktype]).tip){for(o=hB(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let sie=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||z8(),this._tooltip=n||b9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=n1(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=v9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function b9t(e,t,n,r){e.element().setAttribute("title",r||"")}class WN{constructor(t){this._el=null,this._bgcolor=null,this._loader=new dLe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const x9t="keydown",_9t="keypress",w9t="keyup",DLe="dragenter",p6="dragleave",NLe="dragover",bY="pointerdown",E9t="pointerup",bL="pointermove",m6="pointerout",PLe="pointerover",xY="mousedown",S9t="mouseup",OLe="mousemove",xL="mouseout",$Le="mouseover",_L="click",T9t="dblclick",C9t="wheel",MLe="mousewheel",wL="touchstart",EL="touchmove",SL="touchend",A9t=[x9t,_9t,w9t,DLe,p6,NLe,bY,E9t,bL,m6,PLe,xY,S9t,OLe,xL,$Le,_L,T9t,C9t,MLe,wL,EL,SL],_Y=bL,vk=xL,wY=_L;class GN extends sie{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=A9t,this.pointermove=z1e([bL,OLe],[PLe,$Le],[m6,xL]),this.dragover=z1e([NLe],[DLe],[p6]),this.pointerout=V1e([m6,xL]),this.dragleave=V1e([p6])}initialize(t,n,r){return this._canvas=t&&iie(t,"canvas"),[_L,xY,bY,bL,m6,p6].forEach(i=>U1e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(MLe,t)}pointerdown(t){this._down=this._active,this.fire(bY,t)}mousedown(t){this._down=this._active,this.fire(xY,t)}click(t){this._down===this._active&&(this.fire(_L,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(wL,t,!0)}touchmove(t){this.fire(EL,t,!0)}touchend(t){this.fire(SL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===wY&&i&&i.href?this.handleHref(n,i,i.href):(t===_Y||t===vk)&&this.handleTooltip(n,i,t!==vk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(U1e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=hB(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return yf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const I9t=e=>e===wL||e===EL||e===SL?[wL,EL,SL]:[e];function U1e(e,t){I9t(t).forEach(n=>k9t(e,n))}function k9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function II(e,t,n){t.forEach(r=>e.fire(r,n))}function z1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?II(this,e,r):((!i||!i.exit)&&II(this,n,r),this._active=s,II(this,t,r),II(this,e,r))}}function V1e(e){return function(t){II(this,e,t),this._active=null}}function R9t(){return typeof window<"u"&&window.devicePixelRatio||1}function D9t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?R9t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class TL extends WN{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new So,this._tempb=new So}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:C1(1,1,this._options.type),t&&this._canvas&&(Gf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)D9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ye("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=N9t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):P9t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=yf[n.marktype];n.clip&&RBt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const N9t=(e,t,n)=>new So().set(0,0,t,n).translate(-e[0],-e[1]);function P9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class LLe extends sie{constructor(t,n){super(t,n);const r=this;r._hrefHandler=aV(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=aV(r,(i,s)=>{r.handleTooltip(i,s,i.type!==vk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(wY,this._hrefHandler),i.removeEventListener(_Y,this._tooltipHandler),i.removeEventListener(vk,this._tooltipHandler)),this._svg=i=t&&iie(t,"svg"),i&&(i.addEventListener(wY,this._hrefHandler),i.addEventListener(_Y,this._tooltipHandler),i.addEventListener(vk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:aV(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const aV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},FLe="aria-hidden",oie="aria-label",aie="role",uie="aria-roledescription",BLe="graphics-object",lie="graphics-symbol",jLe=(e,t,n)=>({[aie]:e,[uie]:t,[oie]:n||void 0}),O9t=Lh(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),H1e={axis:{desc:"axis",caption:L9t},legend:{desc:"legend",caption:F9t},"title-text":{desc:"title",caption:e=>`Title text '${W1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${W1e(e)}'`}},q1e={ariaRole:aie,ariaRoleDescription:uie,description:oie};function ULe(e,t){const n=t.aria===!1;if(e(FLe,n||void 0),n||t.description==null)for(const r in q1e)e(q1e[r],void 0);else{const r=t.mark.marktype;e(oie,t.description),e(aie,t.ariaRole||(r==="group"?BLe:lie)),e(uie,t.ariaRoleDescription||`${r} mark`)}}function zLe(e){return e.aria===!1?{[FLe]:!0}:O9t[e.role]?null:H1e[e.role]?M9t(e,H1e[e.role]):$9t(e)}function $9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return jLe(n?BLe:lie,`${t} mark container`,e.description)}function M9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return jLe(t.role||lie,t.desc,n.description||r(n))}catch{return null}}function W1e(e){return Nt(e.text).join(" ")}function L9t(e){const t=e.datum,n=e.orient,r=t.title?VLe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${LT(a)?"discrete":a} scale with ${nLe(o,s,e)}`}function F9t(e){const t=e.datum,n=t.title?VLe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return j9t(r)+(n?` titled '${n}'`:"")+` for ${B9t(s)} with ${nLe(u,a,e)}`}function VLe(e){try{return Nt(Lr(e.items).items[0].text).join(" ")}catch{return null}}function B9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Lr(e)}function j9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const HLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),U9t=e=>HLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function cie(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${U9t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=HLe(u),a),toString:()=>e};return a}const qLe=e=>WLe(cie(),e)+"";function WLe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):WLe(e,r)}return e.close()}const CL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},AL={blend:"mix-blend-mode"},GLe={fill:"none","stroke-miterlimit":10},IA=0,G1e="http://www.w3.org/2000/xmlns/",Lo=tD.xmlns;class fie extends WN{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Bo(t,0,"svg",Lo),this._svg.setAttributeNS(G1e,"xmlns",Lo),this._svg.setAttributeNS(G1e,"xmlns:xlink",tD["xmlns:xlink"]),this._svg.setAttribute("version",tD.version),this._svg.setAttribute("class","marks"),Gf(t,1),this._root=Bo(this._svg,IA,"g",Lo),r1(this._root,GLe),Gf(this._svg,IA+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(r1(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Bo(t,IA,"rect",Lo),r1(r,{width:this._width,height:this._height,fill:n}));const i=qLe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Gf(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=yf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Y1e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Y1e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=yf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=K1e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Gf(c,0),n._svg;c.setAttribute("class",RLe(n));const f=zLe(n);for(const m in f)Xu(c,m,f[m]);l||Xu(c,"pointer-events",u),Xu(c,"clip-path",n.clip?zre(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=K1e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&H9t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Bh(n,p),Gf(c,h),c}_update(t,n,r){U0=n,hu=n.__values__,ULe(bk,r),t.attr(bk,r,this);const i=W9t[t.type];i&&i.call(this,t,n,r),U0&&this.style(U0,r)}style(t,n){if(n!=null){for(const r in CL){let i=r==="font"?qN(n):n[r];if(i===hu[r])continue;const s=CL[r];i==null?t.removeAttribute(s):(Bre(i)&&(i=iLe(i,this._defs.gradient,YLe())),t.setAttribute(s,i+"")),hu[r]=i}for(const r in AL)g6(t,AL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Bo(t,IA+1,"defs",Lo)),i=z9t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Bo(t,IA+1,"defs",Lo)),i=V9t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Gf(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Y1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function z9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Bo(e,n++,"pattern",Lo);r1(o,{id:mL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Bo(o,0,"rect",Lo),r1(o,{width:1,height:1,fill:`url(${YLe()}#${t.id})`}),e=Bo(e,n++,"radialGradient",Lo),r1(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Bo(e,n++,"linearGradient",Lo),r1(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Bo(e,r,"stop",Lo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Gf(e,r),n}function V9t(e,t,n){let r;return e=Bo(e,n,"clipPath",Lo),e.setAttribute("id",t.id),t.path?(r=Bo(e,0,"path",Lo),r.setAttribute("d",t.path)):(r=Bo(e,0,"rect",Lo),r1(r,{x:0,y:0,width:t.width,height:t.height})),Gf(e,1),n+1}function H9t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Bh(n,o=>{i=e.mark(t,o,i,r),++s}),Gf(t,1+s)}function K1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=n1(o,r,Lo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=n1(o,"path",Lo);s.appendChild(a),a.__data__=e;const u=n1(o,"g",Lo);s.appendChild(u),u.__data__=e;const l=n1(o,"path",Lo);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||q9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function q9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let U0=null,hu=null;const W9t={group(e,t,n){const r=U0=t.childNodes[2];hu=r.__values__,e.foreground(bk,n,this),hu=t.__values__,U0=t.childNodes[1],e.content(bk,n,this);const i=U0=t.childNodes[0];e.background(bk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==hu.events&&(Xu(r,"pointer-events",s),Xu(i,"pointer-events",s),hu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Xu(r,"display",null),this.style(i,n),Xu(i,"stroke",null),o&&(n.fill=null),hu=r.__values__,this.style(r,n),o&&(n.fill=o),U0=null}else Xu(r,"display","none")},image(e,t,n){n.smooth===!1?(g6(t,"image-rendering","optimizeSpeed"),g6(t,"image-rendering","pixelated")):g6(t,"image-rendering",null)},text(e,t,n){const r=HN(n);let i,s,o,a;Xe(r)?(s=r.map(u=>av(n,u)),i=s.join(`
`),i!==hu.text&&(Gf(t,0),o=t.ownerDocument,a=ov(n),s.forEach((u,l)=>{const c=n1(o,"tspan",Lo);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),hu.text=i)):(s=av(n,r),s!==hu.text&&(t.textContent=s,hu.text=s)),Xu(t,"font-family",qN(n)),Xu(t,"font-size",Lm(n)+"px"),Xu(t,"font-style",n.fontStyle),Xu(t,"font-variant",n.fontVariant),Xu(t,"font-weight",n.fontWeight)}};function bk(e,t,n){t!==hu[e]&&(n?G9t(U0,e,t,n):Xu(U0,e,t),hu[e]=t)}function g6(e,t,n){n!==hu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),hu[t]=n)}function r1(e,t){for(const n in t)Xu(e,n,t[n])}function Xu(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function G9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function YLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KLe extends WN{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=cie();n.open("svg",Gn({},tD,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",GLe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=yf[n.marktype],i=r.tag,s=[ULe,r.attr];t.open("g",{class:RLe(n),"clip-path":n.clip?zre(this,n,n.group):null},zLe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=HN(a);if(Xe(l)){const c={x:0,dy:ov(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(av(a,l[f])).close()}else t.text(av(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Bh(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Bh(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&Y9t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:mL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Y9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=qN(t),e["font-size"]=Lm(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in CL){let a=t[o];const u=CL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Bre(a)&&(a=iLe(a,i.gradient,"")),e[u]=a)}for(const o in AL){const a=t[o];a!=null&&(s=s||[],s.push(`${AL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Zd={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function K9t(e){Zd.svgMarkTypes=e.svgMarkTypes??["text"],Zd.svgOnTop=e.svgOnTop??!0,Zd.debug=e.debug??!1}class EY extends WN{constructor(t){super(t),this._svgRenderer=new fie(t),this._canvasRenderer=new TL(t)}initialize(t,n,r,i,s){this._root_el=Bo(t,0,"div");const o=Bo(this._root_el,0,"div"),a=Bo(this._root_el,1,"div");return this._root_el.style.position="relative",Zd.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Zd.svgOnTop?a:o,this._canvasEl=Zd.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Zd.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Zd.svgMarkTypes.includes(s));this._svgRenderer.render(t,Zd.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Zd.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class XLe extends GN{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Bo(Bo(t,0,"div"),Zd.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const QLe="canvas",JLe="hybrid",ZLe="png",eFe="svg",tFe="none",i1={Canvas:QLe,PNG:ZLe,SVG:eFe,Hybrid:JLe,None:tFe},c_={};c_[QLe]=c_[ZLe]={renderer:TL,headless:TL,handler:GN};c_[eFe]={renderer:fie,headless:KLe,handler:LLe};c_[JLe]={renderer:EY,headless:EY,handler:XLe};c_[tFe]={};function pB(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(c_[e]=t,this):c_[e]}function nFe(e,t,n){const r=[],i=new So().union(t),s=e.marktype;return s?rFe(e,i,n,r):s==="group"?iFe(e,i,n,r):Ye("Intersect scene must be mark node or group item.")}function rFe(e,t,n,r){if(X9t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)iFe(i[a],t,n,r);else for(const u=yf[s].isect;a<o;++a){const l=i[a];sFe(l,t,u)&&r.push(l)}}return r}function X9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function iFe(e,t,n,r){n&&n(e.mark)&&sFe(e,t,yf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)rFe(i[u],t,n,r);t.translate(o,a)}return r}function sFe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const uV=new So;function oFe(e){const t=e.clip;if(Yn(t))t(zN(uV.clear()));else if(t)uV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(uV)}const Q9t=1e-9;function die(e,t,n){return e===t?!0:n==="path"?aFe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Xr(e)&&Xr(t)?Math.abs(e-t)<=Q9t:!e||!t||!Ot(e)&&!Ot(t)?e==t:J9t(e,t)}function aFe(e,t){return die(FT(e),FT(t))}function J9t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!die(e[i],t[i],i))return!1;return typeof e==typeof t}function Z9t(){fLe(),E8t()}const UT="top",ch="left",gh="right",uv="bottom",ejt="top-left",tjt="top-right",njt="bottom-left",rjt="bottom-right",hie="start",SY="middle",el="end",ijt="x",sjt="y",mB="group",pie="axis",mie="title",ojt="frame",ajt="scope",gie="legend",uFe="row-header",lFe="row-footer",cFe="row-title",fFe="column-header",dFe="column-footer",hFe="column-title",ujt="padding",ljt="symbol",pFe="fit",mFe="fit-x",gFe="fit-y",cjt="pad",yie="none",RO="all",TY="each",vie="flush",s1="column",o1="row";function yFe(e){Ve.call(this,null,e)}Ct(yFe,Ve,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=yf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=DO(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===mB||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(DO(l,o))),r.role){case pie:case gie:case mie:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(DO(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(DO(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return oFe(r),t.modifies("bounds")}});function DO(e,t,n){return t(e.bounds.clear(),e,n)}const X1e=":vega_identifier:";function bie(e){Ve.call(this,0,e)}bie.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ct(bie,Ve,{transform(e,t){const n=fjt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function fjt(e){return e._signals[X1e]||(e._signals[X1e]=e.add(0))}function vFe(e){Ve.call(this,null,e)}Ct(vFe,Ve,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,djt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===mB?oB:sB;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function djt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function bFe(e){Ve.call(this,null,e)}const Q1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!xFe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},xFe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),J1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(xFe(i,s=e[n].bounds,t))return!0},hjt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},pjt=(e,t,n)=>{var r=e.range(),i=new So;return t===UT||t===uv?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Z1e=e=>(e.forEach(t=>t.opacity=1),e),eve=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ct(bFe,Ve,{transform(e,t){const n=Q1e[e.method]||Q1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Z1e(i),t=eve(t,e)),t;if(i=i.filter(hjt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Z1e(i),t=eve(t,e),s.length>=3&&J1e(s,r)){do s=n(s,r);while(s.length>=3&&J1e(s,r));s.length<3&&!Lr(i).opacity&&(s.length>1&&(Lr(s).opacity=0),Lr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=pjt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function _Fe(e){Ve.call(this,null,e)}Ct(_Fe,Ve,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const fu=new So;function iS(e,t,n){return e[t]===n?0:(e[t]=n,1)}function mjt(e){var t=e.items[0].orient;return t===ch||t===gh}function gjt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function yjt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=gjt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&tie(p),v=0,x=0,w,E;switch(fu.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case UT:v=f||0,x=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&NO(e,p,E,m,y,0,-1,g);break;case ch:v=-c,x=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&NO(e,p,E,m,y,1,-1,g);break;case gh:v=n+c,x=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&NO(e,p,E,m,y,1,1,g);break;case uv:v=f||0,x=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&NO(e,p,E,m,0,0,1,g);break;default:v=i.x,x=i.y}return Xg(g.translate(v,x),i),iS(i,"x",v+o)|iS(i,"y",x+o)&&(i.bounds=fu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function NO(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const tve=(e,t)=>Math.floor(Math.min(e,t)),nve=(e,t)=>Math.ceil(Math.max(e,t));function vjt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===mB)switch(i.role){case pie:case gie:case mie:break;case uFe:o.rowheaders.push(...s);break;case lFe:o.rowfooters.push(...s);break;case fFe:o.colheaders.push(...s);break;case dFe:o.colfooters.push(...s);break;case cFe:o.rowtitle=s[0];break;case hFe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function bjt(e){return new So().set(0,0,e.width||0,e.height||0)}function xjt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vs(e,t,n){const r=Ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function rve(e){return e<0?Math.ceil(-e):0}function wFe(e,t,n){var r=!n.nodirty,i=n.bounds===vie?bjt:xjt,s=fu.set(0,0,0,0),o=vs(n.align,s1),a=vs(n.align,o1),u=vs(n.padding,s1),l=vs(n.padding,o1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,x=Array(d),w=Array(d),E=Array(d),T,C,I,N,k,P,M,O,B,q,H;for(C=0;C<c;++C)p[C]=0;for(C=0;C<f;++C)y[C]=0;for(C=0;C<d;++C)P=t[C],k=E[C]=i(P),P.x=P.x||0,x[C]=0,P.y=P.y||0,w[C]=0,I=C%c,N=~~(C/c),m=Math.max(m,M=Math.ceil(k.x2)),v=Math.max(v,O=Math.ceil(k.y2)),p[I]=Math.max(p[I],M),y[N]=Math.max(y[N],O),h[C]=u+rve(k.x1),g[C]=l+rve(k.y1),r&&e.dirty(t[C]);for(C=0;C<d;++C)C%c===0&&(h[C]=0),C<c&&(g[C]=0);if(o===TY)for(I=1;I<c;++I){for(H=0,C=I;C<d;C+=c)H<h[C]&&(H=h[C]);for(C=I;C<d;C+=c)h[C]=H+p[I-1]}else if(o===RO){for(H=0,C=0;C<d;++C)C%c&&H<h[C]&&(H=h[C]);for(C=0;C<d;++C)C%c&&(h[C]=H+m)}else for(o=!1,I=1;I<c;++I)for(C=I;C<d;C+=c)h[C]+=p[I-1];if(a===TY)for(N=1;N<f;++N){for(H=0,C=N*c,T=C+c;C<T;++C)H<g[C]&&(H=g[C]);for(C=N*c;C<T;++C)g[C]=H+y[N-1]}else if(a===RO){for(H=0,C=c;C<d;++C)H<g[C]&&(H=g[C]);for(C=c;C<d;++C)g[C]=H+v}else for(a=!1,N=1;N<f;++N)for(C=N*c,T=C+c;C<T;++C)g[C]+=y[N-1];for(B=0,C=0;C<d;++C)B=h[C]+(C%c?B:0),x[C]+=B-t[C].x;for(I=0;I<c;++I)for(q=0,C=I;C<d;C+=c)q+=g[C],w[C]+=q-t[C].y;if(o&&vs(n.center,s1)&&f>1)for(C=0;C<d;++C)k=o===RO?m:p[C%c],B=k-E[C].x2-t[C].x-x[C],B>0&&(x[C]+=B/2);if(a&&vs(n.center,o1)&&c!==1)for(C=0;C<d;++C)k=a===RO?v:y[~~(C/c)],q=k-E[C].y2-t[C].y-w[C],q>0&&(w[C]+=q/2);for(C=0;C<d;++C)s.union(E[C].translate(x[C],w[C]));switch(B=vs(n.anchor,ijt),q=vs(n.anchor,sjt),vs(n.anchor,s1)){case el:B-=s.width();break;case SY:B-=s.width()/2}switch(vs(n.anchor,o1)){case el:q-=s.height();break;case SY:q-=s.height()/2}for(B=Math.round(B),q=Math.round(q),s.clear(),C=0;C<d;++C)t[C].mark.bounds.clear();for(C=0;C<d;++C)P=t[C],P.x+=x[C]+=B,P.y+=w[C]+=q,s.union(P.mark.bounds.union(P.bounds.translate(x[C],w[C]))),r&&e.dirty(P);return s}function _jt(e,t,n){var r=vjt(t),i=r.marks,s=n.bounds===vie?wjt:Ejt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=wFe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=vs(n.headerBand,o1,null),c=PO(e,r.rowheaders,i,a,u,-vs(o,"rowHeader"),tve,0,s,"x1",0,a,1,m)),r.colheaders&&(m=vs(n.headerBand,s1,null),f=PO(e,r.colheaders,i,a,a,-vs(o,"columnHeader"),tve,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=vs(n.footerBand,o1,null),d=PO(e,r.rowfooters,i,a,u,vs(o,"rowFooter"),nve,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=vs(n.footerBand,s1,null),h=PO(e,r.colfooters,i,a,a,vs(o,"columnFooter"),nve,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=vs(n.titleAnchor,o1),g=vs(o,"rowTitle"),g=p===el?d+g:c-g,m=vs(n.titleBand,o1,.5),ive(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=vs(n.titleAnchor,s1),g=vs(o,"columnTitle"),g=p===el?h+g:f-g,m=vs(n.titleBand,s1,.5),ive(e,r.coltitle,g,1,y,m))}function wjt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Ejt(e,t){return e.bounds[t]}function PO(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,x,w,E,T,C,I,N;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],E=T.mark.bounds,x=y;x>=0&&(C=n[x])==null;x-=d);a?(I=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),N=m):(I=m,N=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),E.union(T.bounds.translate(I-(T.x||0),N-(T.y||0))),T.x=I,T.y=N,e.dirty(T),g=o(g,E[l])}return g}function ive(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Sjt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Tjt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Cjt(e,t,n,r,i,s,o){const a=Sjt(n,t),u=Tjt(e,a("offset",0)),l=a("anchor",hie),c=l===el?1:l===SY?.5:0,f={align:TY,bounds:a("bounds",vie),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ch:f.anchor={x:Math.floor(r.x1)-u,column:el,y:c*(o||r.height()+2*r.y1),row:l};break;case gh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case UT:f.anchor={y:Math.floor(i.y1)-u,row:el,x:c*(s||i.width()+2*i.x1),column:l};break;case uv:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case ejt:f.anchor={x:u,y:u};break;case tjt:f.anchor={x:s-u,y:u,column:el};break;case njt:f.anchor={x:u,y:o-u,row:el};break;case rjt:f.anchor={x:s-u,y:o-u,column:el,row:el};break}return f}function Ajt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),kjt(e,n,n.items[0].items[0]),s=Ijt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===ljt&&Rjt(n.items[0].items[0].items[0].items),i!==yie&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Xg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Ijt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function kjt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&kA(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case ch:i+=Math.ceil(o.bounds.width())+u;break;case gh:case uv:break;default:s+=o.bounds.height()+u}switch((i||s)&&kA(e,n,i,s),o.orient){case ch:c+=uE(t,n,o,a,1,1);break;case gh:l+=uE(t,n,o,el,0,0)+u,c+=uE(t,n,o,a,1,1);break;case uv:l+=uE(t,n,o,a,0,0),c+=uE(t,n,o,el,-1,0,1)+u;break;default:l+=uE(t,n,o,a,0,0)}(l||c)&&kA(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(kA(e,n,-l,0),kA(e,o,-l,0))}}function uE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:tie(n);return Math.round(r===hie?f:r===el?d-h:.5*(c-h))}function kA(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Rjt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Djt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===ch||a===gh?r:n,p=0,m=0,g=0,y=0,v=0,x;if(o!==mB?a===ch?(p=i.y2,h=i.y1):a===gh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===ch&&(p=r,h=0),x=u===hie?p:u===el?h:(p+h)/2,d&&d.text){switch(a){case UT:case uv:v=f.bounds.height()+c;break;case ch:y=f.bounds.width()+c;break;case gh:y=-f.bounds.width()-c;break}fu.clear().union(d.bounds),fu.translate(y-(d.x||0),v-(d.y||0)),iS(d,"x",y)|iS(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(fu),d.mark.bounds.clear().union(fu),e.dirty(d)),fu.clear().union(d.bounds)}else fu.clear();switch(fu.union(f.bounds),a){case UT:m=x,g=i.y1-fu.height()-l;break;case ch:m=i.x1-fu.width()-l,g=x;break;case gh:m=i.x2+fu.width()+l,g=x;break;case uv:m=x,g=i.y2+l;break;default:m=s.x,g=s.y}return iS(s,"x",m)|iS(s,"y",g)&&(fu.translate(m,g),e.dirty(s),s.bounds.clear().union(fu),t.bounds.clear().union(fu),e.dirty(s)),s.bounds}function EFe(e){Ve.call(this,null,e)}Ct(EFe,Ve,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&_jt(n,r,e.layout),Pjt(n,r,e)}),Njt(e.mark.group)?t.reflow():t}});function Njt(e){return e&&e.mark.role!=="legend-entry"}function Pjt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new So().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case pie:h=mjt(f)?a:u,h.union(yjt(e,f,i,s));break;case mie:c=f;break;case gie:l.push(Ajt(e,f));break;case ojt:case ajt:case uFe:case lFe:case cFe:case fFe:case dFe:case hFe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||gh,d!==yie&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];wFe(e,v,Cjt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===pFe||n.autosize.type===mFe||n.autosize.type===gFe))switch(y.orient){case ch:case gh:o.add(v.x1,0).add(v.x2,0);break;case UT:case uv:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Djt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Ojt(e,t,o,n)}function Ojt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===ujt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===yie?(l=0,f=0,u=o,c=a):s===pFe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===mFe?(u=Math.max(0,o-l-d),a=c+f+h):s===gFe?(o=u+l+d,c=Math.max(0,a-f-h)):s===cjt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const $jt=Object.freeze(Object.defineProperty({__proto__:null,bound:yFe,identifier:bie,mark:vFe,overlap:bFe,render:_Fe,viewlayout:EFe},Symbol.toStringTag,{value:"Module"}));function SFe(e){Ve.call(this,null,e)}Ct(SFe,Ve,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Lre(s,o,e.minstep),u=e.format||QMe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?XMe(s,e.values,a):Fre(s,a);return i&&(r.rem=i),i=l.map((c,f)=>mi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(mi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function TFe(e){Ve.call(this,null,e)}function Mjt(){return mi({})}function Ljt(e){const t=iC().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ct(TFe,Ve,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Mjt,s=e.key||nn,o=this.value;return Xe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ye("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Ljt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function CFe(e){Ve.call(this,null,e)}Ct(CFe,Ve,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Xe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Cy,u=i.enter||Cy,l=i.exit||Cy,c=(s&&!o?i[s]:a)||Cy;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Cy&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Cy&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Cy){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function AFe(e){Ve.call(this,[],e)}Ct(AFe,Ve,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||u6,o=e.scale,a=+e.limit,u=Lre(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===u6,c=e.format||tLe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||eLe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===u6?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Yn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Pu(m=p||8),i=i.map((y,v)=>mi({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(mi({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===c8t?(d=o.domain(),h=GMe(o,d[0],Lr(d)),f.length<3&&!e.values&&d[0]!==Lr(d)&&(f=[d[0],Lr(d)]),i=f.map((y,v)=>mi({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=_8t(o),i=f.map((y,v)=>mi({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Fjt=e=>e.source.x,Bjt=e=>e.source.y,jjt=e=>e.target.x,Ujt=e=>e.target.y;function xie(e){Ve.call(this,{},e)}xie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ct(xie,Ve,{transform(e,t){var n=e.sourceX||Fjt,r=e.sourceY||Bjt,i=e.targetX||jjt,s=e.targetY||Ujt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=sve.get(u+"-"+a)||sve.get(u);return l||Ye("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const IFe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,zjt=(e,t,n,r)=>IFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),kFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Vjt=(e,t,n,r)=>kFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),RFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Hjt=(e,t,n,r)=>RFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),qjt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Wjt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Gjt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Yjt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Kjt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Xjt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},sve=iC({line:IFe,"line-radial":zjt,arc:kFe,"arc-radial":Vjt,curve:RFe,"curve-radial":Hjt,"orthogonal-horizontal":qjt,"orthogonal-vertical":Wjt,"orthogonal-radial":Gjt,"diagonal-horizontal":Yjt,"diagonal-vertical":Kjt,"diagonal-radial":Xjt});function _ie(e){Ve.call(this,null,e)}_ie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ct(_ie,Ve,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||tC,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/sRe(l),h=Ql(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Qjt=5;function Jjt(e){const t=e.type;return!e.bins&&(t===$T||t===$N||t===MN)}function DFe(e){return Ore(e)&&e!==Zp}const Zjt=Lh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function NFe(e){Ve.call(this,null,e),this.modified(!0)}Ct(NFe,Ve,{transform(e,t){var n=t.dataflow,r=this.value,i=e7t(e);(!r||i!==r.type)&&(this.value=r=si(i)());for(i in e)if(!Zjt[i]){if(i==="padding"&&DFe(r.type))continue;Yn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return o7t(r,e,s7t(r,e,n7t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function e7t(e){var t=e.type,n="",r;return t===Zp?Zp+"-"+$T:(t7t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Zp+"-":r===3?uC+"-":""),(n+t||$T).toLowerCase())}function t7t(e){const t=e.type;return Ore(t)&&t!==u_&&t!==l_&&(e.scheme||e.range&&e.range.length&&e.range.every(Pt))}function n7t(e,t,n){const r=r7t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Jjt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return DFe(s)&&t.padding&&i[0]!==Lr(i)&&(i=i7t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(PFe(s,i,n)),s===Rre&&e.unknown(t.domainImplicit?QW:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Lre(e,t.nice)||null),i.length}function r7t(e,t,n){return t?(e.domain(PFe(e.type,t,n)),t.length):-1}function i7t(e,t,n,r,i,s){var o=Math.abs(Lr(n)-n[0]),a=o/(o-2*r),u=e===Ig?Ene(t,null,a):e===MN?fL(t,null,a,.5):e===$N?fL(t,null,a,i||1):e===eB?Sne(t,null,a,s||1):wne(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function PFe(e,t,n){if(zMe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Et(t))}return t}function s7t(e,t,n){let r=t.bins;if(r&&!Xe(r)){const i=e.domain(),s=i[0],o=Lr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Ye("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Ql(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Dre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function o7t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=a7t(r,t,n);else if(t.scheme&&(s=u7t(r,t,n),Yn(s))){if(e.interpolator)return e.interpolator(s);Ye(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&VMe(r))return e.interpolator(rB(CY(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate($re(t.interpolate,t.interpolateGamma)):Yn(e.round)?e.round(i):Yn(e.rangeRound)&&e.interpolate(i?aN:Vg),s&&e.range(CY(s,t.reverse))}function a7t(e,t,n){e!==MMe&&e!==fY&&Ye("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===fY?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*kre(n,i,r)]}function u7t(e,t,n){var r=t.schemeExtent,i,s;return Xe(t.scheme)?s=rB(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Mre(i),s||Ye(`Unrecognized scheme name: ${t.scheme}`)),n=e===nB?n+1:e===Dre?n-1:e===MT||e===tB?+t.schemeCount||Qjt:n,VMe(e)?ove(s,r,t.reverse):Yn(s)?WMe(ove(s,r),n):e===Rre?s:s.slice(0,n)}function ove(e,t,n){return Yn(e)&&(t||n)?qMe(e,CY(t||[0,1],n)):e}function CY(e,t){return t?e.slice().reverse():e}function OFe(e){Ve.call(this,null,e)}Ct(OFe,Ve,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(sw(e.sort)),this.modified(n),t}});const ave="zero",$Fe="center",MFe="normalize",LFe=["y0","y1"];function wie(e){Ve.call(this,null,e)}wie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:ave,values:[ave,$Fe,MFe]},{name:"as",type:"string",array:!0,length:2,default:LFe}]};Ct(wie,Ve,{transform(e,t){var n=e.as||LFe,r=n[0],i=n[1],s=sw(e.sort),o=e.field||tC,a=e.offset===$Fe?l7t:e.offset===MFe?c7t:f7t,u,l,c,f;for(u=d7t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function l7t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function c7t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function f7t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function d7t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const h7t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:SFe,datajoin:TFe,encode:CFe,legendentries:AFe,linkpath:xie,pie:_ie,scale:NFe,sortitems:OFe,stack:wie},Symbol.toStringTag,{value:"Module"}));var p7t=Math.abs,AY=Math.cos,IL=Math.sin,m7t=1e-6,FFe=Math.PI,IY=FFe/2,uve=g7t(2);function lve(e){return e>1?IY:e<-1?-IY:Math.asin(e)}function g7t(e){return e>0?Math.sqrt(e):0}function y7t(e,t){var n=e*IL(t),r=30,i;do t-=i=(t+IL(t)-n)/(1+AY(t));while(p7t(i)>m7t&&--r>0);return t/2}function v7t(e,t,n){function r(i,s){return[e*i*AY(s=y7t(n,s)),t*IL(s)]}return r.invert=function(i,s){return s=lve(s/t),[i/(e*AY(s)),lve((2*s+IL(2*s))/n)]},r}var b7t=v7t(uve/IY,uve,FFe);function x7t(){return Pm(b7t).scale(169.529)}const _7t=BDe(),kY=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function w7t(e,t){return function n(){const r=t();return r.type=e,r.path=BDe().projection(r),r.copy=r.copy||function(){const i=n();return kY.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},jMe(r)}}function Eie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(kL[e]=w7t(e,t),this):kL[e]||null}function BFe(e){return e&&e.path||_7t}const kL={albers:UDe,albersusa:OTt,azimuthalequalarea:$Tt,azimuthalequidistant:MTt,conicconformal:BTt,conicequalarea:pM,conicequidistant:zTt,equalEarth:HTt,equirectangular:jTt,gnomonic:qTt,identity:WTt,mercator:LTt,mollweide:x7t,naturalEarth1:GTt,orthographic:YTt,stereographic:KTt,transversemercator:XTt};for(const e in kL)Eie(e,kL[e]);function E7t(){}const f0=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function jFe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),S7t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(T7t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,f0[g<<1].forEach(x);++h<e-1;)m=g,g=u[h+1]>=l,f0[m|g<<1].forEach(x);for(f0[g<<0].forEach(x);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,f0[g<<1|y<<2].forEach(x);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,f0[m|g<<1|y<<2|v<<3].forEach(x);f0[g|y<<3].forEach(x)}for(h=-1,y=u[p*e]>=l,f0[y<<2].forEach(x);++h<e-1;)v=y,y=u[p*e+h+1]>=l,f0[y<<2|v<<3].forEach(x);f0[y<<3].forEach(x);function x(w){var E=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],C=o(E),I=o(T),N,k;(N=d[C])?(k=f[I])?(delete d[N.end],delete f[k.start],N===k?(N.ring.push(T),c(N.ring)):f[N.start]=d[k.end]={start:N.start,end:k.end,ring:N.ring.concat(k.ring)}):(delete d[N.end],N.ring.push(T),d[N.end=I]=N):(N=f[I])?(k=d[C])?(delete f[N.start],delete d[k.end],N===k?(N.ring.push(T),c(N.ring)):f[k.start]=d[N.end]={start:k.start,end:N.end,ring:k.ring.concat(N.ring)}):(delete f[N.start],N.ring.unshift(E),f[N.start=C]=N):f[C]=d[I]={start:C,end:I,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Ye("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:E7t,r):n===a},r}function S7t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function T7t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=C7t(e,t[n]))return i;return 0}function C7t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(A7t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function A7t(e,t,n){var r;return I7t(e,t,n)&&k7t(e[r=+(e[0]===t[0])],n[r],t[r])}function I7t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function k7t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function UFe(e,t,n){return function(r){var i=ym(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?z1(s,o,e):a/(e+1);return Ql(s+u,o,u)}}function Sie(e){Ve.call(this,null,e)}Sie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ct(Sie,Ve,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Nu,s=jFe().smooth(e.smooth!==!1),o=e.thresholds||R7t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Xe(o)?o:o(c.values));D7t(f,c,l,e),f.forEach(d=>{u.push(q8(l,mi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function R7t(e,t,n){const r=UFe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Q0(t(i).values)))}function D7t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Yn(i)&&(i=i(n,r)),Yn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Xr(i)?i:i[0])||1,a=(Xr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(zFe(t,o,a,u,l))}function zFe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function cve(e,t,n){const r=e>=0?e:Vne(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function lV(e){return Yn(e)?e:Pu(+e)}function VFe(){var e=u=>u[0],t=u=>u[1],n=tC,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=cve(r[0],u,e)>>o,f=cve(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),T=h+(+t(w)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(w))}),c>0&&f>0?(lE(p,m,g,y,c),cE(p,m,y,g,f),lE(p,m,g,y,c),cE(p,m,y,g,f),lE(p,m,g,y,c),cE(p,m,y,g,f)):c>0?(lE(p,m,g,y,c),lE(p,m,y,g,c),lE(p,m,g,y,c),v=y):f>0&&(cE(p,m,g,y,f),cE(p,m,y,g,f),cE(p,m,g,y,f),v=y);const x=l?Math.pow(2,-2*o):1/sRe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=x;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=lV(u),a):e},a.y=function(u){return arguments.length?(t=lV(u),a):t},a.weight=function(u){return arguments.length?(n=lV(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Ye("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Ye("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Ye("invalid bandwidth"),r=u,a):r},a}function lE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function cE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Tie(e){Ve.call(this,null,e)}Tie.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const N7t=["x","y","weight","size","cellSize","bandwidth"];function HFe(e,t){return N7t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ct(Tie,Ve,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=P7t(r,e.groupby),s=(e.groupby||[]).map(Ys),o=HFe(VFe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>mi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function P7t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Cie(e){Ve.call(this,null,e)}Cie.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ct(Cie,Ve,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=jFe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||UFe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=HFe(VFe(),e)(i,!0),u=zFe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Xe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(mi),n}});const RY="Feature",Aie="FeatureCollection",O7t="MultiPoint";function Iie(e){Ve.call(this,null,e)}Iie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ct(Iie,Ve,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Nu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Tu(a))||s&&t.modified(Tu(s))||o&&t.modified(Tu(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:RY,geometry:{type:O7t,coordinates:r}})),this.value={type:Aie,features:n}}});function kie(e){Ve.call(this,null,e)}kie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ct(kie,Ve,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Nu,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=BFe(e.projection),n.materialize().reflow()):o=i===Nu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=$7t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function $7t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Rie(e){Ve.call(this,null,e)}Rie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ct(Rie,Ve,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Die(e){Ve.call(this,null,e)}Die.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ct(Die,Ve,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=M7t(BFe(e.projection),e.field||ld("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function M7t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Nie(e){Ve.call(this,[],e),this.generator=hTt()}Nie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ct(Nie,Ve,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Yn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(H$e(n[0],i)):t.add.push(mi(i)),n[0]=i,t}});function Pie(e){Ve.call(this,null,e)}Pie.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ct(Pie,Ve,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Nu,s=F7t(e.opacity,e),o=L7t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Q0(n.map(l=>Q0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Gn({},l,u);r||(f.$max=Q0(c.values||[])),l[a]=B7t(c,f,o.dep?o:Pu(o(f)),s.dep?s:Pu(s(f)))}),t.reflow(!0).modifies(a)}});function L7t(e,t){let n;return Yn(e)?(n=r=>V1(e(r,t)),n.dep=qFe(e)):n=Pu(V1(e||"#888")),n}function F7t(e,t){let n;return Yn(e)?(n=r=>e(r,t),n.dep=qFe(e)):e?n=Pu(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function qFe(e){if(!Yn(e))return!1;const t=Lh(Tu(e));return t.$x||t.$y||t.$value||t.$max}function B7t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:qy,d=C1(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,x=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+x);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function WFe(e){Ve.call(this,null,e),this.modified(!0)}Ct(WFe,Ve,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=U7t(e.type),kY.forEach(r=>{e[r]!=null&&fve(n,r,e[r])})):kY.forEach(r=>{e.modified(r)&&fve(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&j7t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function j7t(e,t){const n=z7t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function U7t(e){const t=Eie((e||"mercator").toLowerCase());return t||Ye("Unrecognized projection type: "+e),t()}function fve(e,t,n){Yn(e[t])&&e[t](n)}function z7t(e){return e=Nt(e),e.length===1?e[0]:{type:Aie,features:e.reduce((t,n)=>t.concat(V7t(n)),[])}}function V7t(e){return e.type===Aie?e.features:Nt(e).filter(t=>t!=null).map(t=>t.type===RY?t:{type:RY,geometry:t})}const H7t=Object.freeze(Object.defineProperty({__proto__:null,contour:Cie,geojson:Iie,geopath:kie,geopoint:Rie,geoshape:Die,graticule:Nie,heatmap:Pie,isocontour:Sie,kde2d:Tie,projection:WFe},Symbol.toStringTag,{value:"Module"})),dve={center:rSt,collide:wSt,nbody:PSt,link:SSt,x:OSt,y:$St},kI="forces",DY=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],q7t=["static","iterations"],GFe=["x","y","vx","vy"];function Oie(e){Ve.call(this,null,e)}Oie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:GFe}]};Ct(Oie,Ve,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(DY),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&YFe(n,e,0,t)):(this.value=n=G7t(t.source,e),n.on("tick",W7t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(q7t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==kI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(GFe)}});function W7t(e,t){return()=>e.touch(t).run()}function G7t(e,t){const n=NSt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),YFe(n,t,!0).on("end",()=>s=!0)}function YFe(e,t,n,r){var i=Nt(t.forces),s,o,a,u;for(s=0,o=DY.length;s<o;++s)a=DY[s],a!==kI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=kI+s,a=n||t.modified(kI,s)?K7t(i[s]):r&&Y7t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(kI+s,null);return e.numForces=i.length,e}function Y7t(e,t){var n,r;for(n in e)if(Yn(r=e[n])&&t.modified(Tu(r)))return 1;return 0}function K7t(e){var t,n;sn(dve,e.force)||Ye("Unrecognized force: "+e.force),t=dve[e.force]();for(n in e)Yn(t[n])&&X7t(t[n],e[n],e);return t}function X7t(e,t,n){e(Yn(t)?r=>t(r,n):t)}const Q7t=Object.freeze(Object.defineProperty({__proto__:null,force:Oie},Symbol.toStringTag,{value:"Module"}));function NY(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function $ie(e){Ve.call(this,null,e)}$ie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const J7t=e=>e.values;Ct($ie,Ve,{transform(e,t){t.source||Ye("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&H8(o.data)&&i.rem.push(o.data)}),this.value=s=J5({values:Nt(e.keys).reduce((o,a)=>(o.key(a),o),Z7t()).entries(i.source)},J7t),n&&s.each(o=>{o.children&&(o=mi(o.data),i.add.push(o),i.source.push(o))}),NY(s,nn,nn)),i.source.root=s,i}});function Z7t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Qg(e){Ve.call(this,null,e)}const eUt=(e,t)=>e.parent===t.parent?1:2;Ct(Qg,Ve,{transform(e,t){(!t.source||!t.source.root)&&Ye(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(sw(e.sort,o=>o.data)),tUt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?eUt:tC);try{this.value=n(i)}catch(o){Ye(o)}return i.each(o=>nUt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function tUt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function nUt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const PY=["x","y","r","depth","children"];function Mie(e){Qg.call(this,e)}Mie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PY.length,default:PY}]};Ct(Mie,Qg,{layout:nNe,params:["radius","size","padding"],fields:PY});const OY=["x0","y0","x1","y1","depth","children"];function Lie(e){Qg.call(this,e)}Lie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OY.length,default:OY}]};Ct(Lie,Qg,{layout:$2t,params:["size","round","padding"],fields:OY});function Fie(e){Ve.call(this,null,e)}Fie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ct(Fie,Ve,{transform(e,t){t.source||Ye("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?NY(Y0e().id(e.key).parentId(e.parentKey)(i.source),e.key,cd):NY(Y0e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const hve={tidy:q2t,cluster:i2t},$Y=["x","y","depth","children"];function Bie(e){Qg.call(this,e)}Bie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:$Y.length,default:$Y}]};Ct(Bie,Qg,{layout(e){const t=e||"tidy";if(sn(hve,t))return hve[t]();Ye("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:$Y});function jie(e){Ve.call(this,[],e)}jie.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ct(jie,Ve,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ye("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[nn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[nn(a)]&&s[nn(u)]&&i.add.push(mi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[nn(o)]=1),n.forEach(o=>{(s[nn(o.source)]||s[nn(o.target)])&&i.mod.push(o)})),i}});const pve={binary:G2t,dice:fN,slice:Z5,slicedice:Y2t,squarify:oNe,resquarify:K2t},MY=["x0","y0","x1","y1","depth","children"];function Uie(e){Qg.call(this,e)}Uie.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:MY.length,default:MY}]};Ct(Uie,Qg,{layout(){const e=W2t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{sn(pve,t)?e.tile(pve[t]):Ye("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:MY});const rUt=Object.freeze(Object.defineProperty({__proto__:null,nest:$ie,pack:Mie,partition:Lie,stratify:Fie,tree:Bie,treelinks:jie,treemap:Uie},Symbol.toStringTag,{value:"Module"})),cV=4278190080;function iUt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function sUt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=C1(s,o).getContext("2d"),l=C1(s,o).getContext("2d"),c=a&&C1(s,o).getContext("2d");n.forEach(I=>y6(u,I,!1)),y6(l,t,!1),a&&y6(c,t,!0);const f=fV(u,s,o),d=fV(l,s,o),h=a&&fV(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,x,w,E,T,C;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&cV,C=d[w]&cV,T=a&&h[w]&cV,(E||T||C)&&(v=e(g),x=e(y),!i&&(E||C)&&p.set(v,x),a&&(E||T)&&m.set(v,x));return[p,m]}function fV(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function y6(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>y6(e,s.items,n))}):yf[r].draw(e,{items:n?t.map(oUt):t})}function oUt(e){const t=q8(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const d0=5,Yu=31,nD=32,Ly=new Uint32Array(nD+1),rh=new Uint32Array(nD+1);rh[0]=0;Ly[0]=~rh[0];for(let e=1;e<=nD;++e)rh[e]=rh[e-1]<<1|1,Ly[e]=~rh[e];function aUt(e,t){const n=new Uint32Array(~~((e*t+nD)/nD));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>d0]&1<<(a&Yu)},set:(s,o)=>{const a=o*e+s;r(a>>>d0,1<<(a&Yu))},clear:(s,o)=>{const a=o*e+s;i(a>>>d0,~(1<<(a&Yu)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>d0,h=f>>>d0,d===h){if(n[d]&Ly[c&Yu]&rh[(f&Yu)+1])return!0}else{if(n[d]&Ly[c&Yu]||n[h]&rh[(f&Yu)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>d0,d=c>>>d0,f===d)r(f,Ly[l&Yu]&rh[(c&Yu)+1]);else for(r(f,Ly[l&Yu]),r(d,rh[(c&Yu)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>d0,d=c>>>d0,f===d)i(f,rh[l&Yu]|Ly[(c&Yu)+1]);else for(i(f,rh[l&Yu]),i(d,Ly[(c&Yu)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function uUt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>aUt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function lUt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ef.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let x=0;x<u;++x)d=a[x].x,p=a[x].y,h=a[x].x2===void 0?d:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function RL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function a1(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function cUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!RL(p,m,d,h,i,s)&&!a1(e,p,m,h,d,g,o,a)&&!a1(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,a1(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ef.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,x,w,E,T,C,I,N,k,P,M,O,B,q,H,Y,K;for(let J=0;J<f;++J){for(v=c[J].x,w=c[J].y,x=c[J].x2===void 0?v:c[J].x2,E=c[J].y2===void 0?w:c[J].y2,v>x&&(K=v,v=x,x=K),w>E&&(K=w,w=E,E=K),k=e(v),M=e(x),P=~~((k+M)/2),O=e(w),q=e(E),B=~~((O+q)/2),I=P;I>=k;--I)for(N=B;N>=O;--N)Y=u(I,N,p,h,d),Y&&([l.x,l.y,p,m]=Y);for(I=P;I<=M;++I)for(N=B;N<=q;++N)Y=u(I,N,p,h,d),Y&&([l.x,l.y,p,m]=Y);!m&&!n&&(H=Math.abs(x-v+E-w),T=(v+x)/2,C=(w+E)/2,H>=y&&!RL(T,C,h,d,i,s)&&!a1(e,T,C,d,h,d,o,null)&&(y=H,l.x=T,l.y=C,g=!0))}return m||g?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const fUt=[-1,-1,1,1],dUt=[-1,1,-1,1];function hUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ef.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,x,w,E,T,C,I,N,k,P,M,O,B;for(let q=0;q<f;++q){for(x=c[q].x,E=c[q].y,w=c[q].x2===void 0?x:c[q].x2,T=c[q].y2===void 0?E:c[q].y2,p.push([e((x+w)/2),e((E+T)/2)]);p.length;)if([N,k]=p.pop(),!(o.get(N,k)||a.get(N,k)||u.get(N,k))){u.set(N,k);for(let H=0;H<4;++H)C=N+fUt[H],I=k+dUt[H],u.outOfBounds(C,I,C,I)||p.push([C,I]);if(C=e.invert(N),I=e.invert(k),P=m,M=s,!RL(C,I,h,d,i,s)&&!a1(e,C,I,d,h,P,o,a)&&!a1(e,C,I,d,h,d,o,null)){for(;M-P>=1;)O=(P+M)/2,a1(e,C,I,d,h,O,o,a)?M=O:P=O;P>m&&(l.x=C,l.y=I,m=P,g=!0)}}!g&&!n&&(B=Math.abs(w-x+T-E),C=(x+w)/2,I=(E+T)/2,B>=v&&!RL(C,I,h,d,i,s)&&!a1(e,C,I,d,h,d,o,null)&&(v=B,l.x=C,l.y=I,y=!0))}return g||y?(C=h/2,I=d/2,o.setRange(e(l.x-C),e(l.y-I),e(l.x+C),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const pUt=["right","center","left"],mUt=["bottom","middle","top"];function gUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,x,w,E,T,C,I,N,k,P;for(let M=0;M<u;++M){if(h=(n[M]&3)-1,p=(n[M]>>>2&3)-1,m=h===0&&p===0||r[M]<0,g=h&&p?Math.SQRT1_2:1,y=r[M]<0?-1:1,v=c[1+h]+r[M]*h*g,C=c[4+p]+y*f*p/2+r[M]*p*g,w=C-f/2,E=C+f/2,I=e(v),k=e(w),P=e(E),!d)if(mve(I,I,k,P,o,a,v,v,w,E,c,m))d=ef.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,x=T+d/2,I=e(v),N=e(x),mve(I,N,k,P,o,a,v,x,w,E,c,m))return l.x=h?h*y<0?x:v:T,l.y=p?p*y<0?E:w:C,l.align=pUt[h*y+1],l.baseline=mUt[p*y+1],o.setRange(I,k,N,P),!0}return!1}}function mve(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const dV=0,hV=4,pV=8,mV=0,gV=1,yV=2,yUt={"top-left":dV+mV,top:dV+gV,"top-right":dV+yV,left:hV+mV,middle:hV+gV,right:hV+yV,"bottom-left":pV+mV,bottom:pV+gV,"bottom-right":pV+yV},vUt={naive:lUt,"reduced-search":cUt,floodfill:hUt};function bUt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=xUt(r,f),h=_Ut(i,f),p=wUt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=EUt(p,m,a,u),v=l===null||l===1/0,x=g&&c==="naive";let w=-1,E=-1;const T=e.map(k=>{const P=v?ef.width(k,k.text):void 0;return w=Math.max(w,P),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:P}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const C=uUt(t[0],t[1],l);let I;if(!x){n&&T.sort((M,O)=>n(M.datum,O.datum));let k=!1;for(let M=0;M<h.length&&!k;++M)k=h[M]===5||d[M]<0;const P=(p&&o||g)&&e.map(M=>M.datum);I=s.length||P?sUt(C,P||[],s,k,g):iUt(C,o&&T)}const N=g?vUt[c](C,I,o,u):gUt(C,I,h,d);return T.forEach(k=>k.opacity=+N(k)),T}function xUt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function _Ut(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=yUt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function wUt(e){return e&&e.mark&&e.mark.marktype}function EUt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const LY=["x","y","opacity","align","baseline"],KFe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function zie(e){Ve.call(this,null,e)}zie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:KFe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:LY.length,default:LY}]};Ct(zie,Ve,{transform(e,t){function n(s){const o=e[s];return Yn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ye("Size parameter should be specified as a [width, height] array.");const i=e.as||LY;return bUt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Nt(e.offset==null?1:e.offset),Nt(e.anchor||KFe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const SUt=Object.freeze(Object.defineProperty({__proto__:null,label:zie},Symbol.toStringTag,{value:"Module"}));function XFe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Vie(e){Ve.call(this,null,e)}Vie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ct(Vie,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=XFe(r,e.groupby),s=(e.groupby||[]).map(Ys),o=s.length,a=e.as||[Ys(e.x),Ys(e.y)],u=[];i.forEach(l=>{uMe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(mi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const FY={constant:tre,linear:nre,log:iMe,exp:sMe,pow:oMe,quad:rre,poly:aMe},TUt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Hie(e){Ve.call(this,null,e)}Hie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(FY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ct(Hie,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=XFe(r,e.groupby),s=(e.groupby||[]).map(Ys),o=e.method||"linear",a=e.order==null?3:e.order,u=TUt(o,a),l=e.as||[Ys(e.x),Ys(e.y)],c=FY[o],f=[];let d=e.extent;sn(FY,o)||Ye("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(mi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||ym(h,e.x),y=v=>{const x={};for(let w=0;w<s.length;++w)x[s[w]]=h.dims[w];x[l[0]]=v[0],x[l[1]]=v[1],f.push(mi(x))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):J8(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const CUt=Object.freeze(Object.defineProperty({__proto__:null,loess:Vie,regression:Hie},Symbol.toStringTag,{value:"Module"}));function qie(e){Ve.call(this,null,e)}qie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const AUt=[-1e5,-1e5,1e5,1e5];Ct(qie,Ve,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:AUt;const s=this.value=QZ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!kUt(u)?IUt(u):null}return t.reflow(e.modified()).modifies(n)}});function IUt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function kUt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const RUt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:qie},Symbol.toStringTag,{value:"Module"}));var vV=Math.PI/180,RI=64,v6=2048;function DUt(){var e=[256,256],t,n,r,i,s,o,a,u=QFe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(C1()),m=LUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,x=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,C)=>C.size-T.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,NUt(p,E,w,v),E.hasText&&h(m,E,g)&&(x.push(E),g?OUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return x};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(RI<<5)/m,p.height=v6/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,x=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,T=-E,C,I,N;(C=w(T+=E))&&(I=~~C[0],N=~~C[1],!(Math.min(Math.abs(I),Math.abs(N))>=x));)if(m.x=y+I,m.y=v+N,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!PUt(m,p,e[0]))&&(!g||$Ut(m,g))){for(var k=m.sprite,P=m.width>>5,M=e[0]>>5,O=m.x-(P<<4),B=O&127,q=32-B,H=m.y1-m.y0,Y=(m.y+m.y0)*M+(O>>5),K,J=0;J<H;J++){K=0;for(var F=0;F<=P;F++)p[Y+F]|=K<<q|(F<P?(K=k[J*P+F])>>>B:0);Y+=M}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=xb(p),f):n},f.fontStyle=function(p){return arguments.length?(i=xb(p),f):i},f.fontWeight=function(p){return arguments.length?(s=xb(p),f):s},f.rotate=function(p){return arguments.length?(o=xb(p),f):o},f.text=function(p){return arguments.length?(t=xb(p),f):t},f.spiral=function(p){return arguments.length?(u=FUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=xb(p),f):r},f.padding=function(p){return arguments.length?(a=xb(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function NUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(RI<<5)/s,v6/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*vV),g=Math.cos(t.rotate*vV),y=c*g,v=c*m,x=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+x),Math.abs(v-x))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=RI<<5&&(o=0,a+=u,u=0),a+d>=v6)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*vV),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(RI<<5)/s,v6/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var C=0,I=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var N=f*p+(h>>5),k=E[(a+p)*(RI<<5)+(o+h)<<2]?1<<31-h%32:0;T[N]|=k,C|=k}C?I=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+I,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function PUt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function OUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function $Ut(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function QFe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function MUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function LUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function xb(e){return typeof e=="function"?e:function(){return e}}var FUt={archimedean:QFe,rectangular:MUt};const JFe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],BUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wie(e){Ve.call(this,DUt(),e)}Wie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:JFe}]};Ct(Wie,Ve,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ye("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Yn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||BUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||JFe;let a=e.fontSize||14,u;if(Yn(a)?u=e.fontSizeRange:a=Pu(a),u){const p=a,m=si("sqrt")().domain(ym(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(dd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const jUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Wie},Symbol.toStringTag,{value:"Module"})),UUt=e=>new Uint8Array(e),zUt=e=>new Uint16Array(e),xk=e=>new Uint32Array(e);function VUt(){let e=8,t=[],n=xk(0),r=OO(0,e),i=OO(0,e);return{data:()=>t,seen:()=>n=HUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=OO(s,e,r),i=OO(s,e))}}}function HUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function OO(e,t,n){const r=(t<257?UUt:t<65537?zUt:xk)(e);return n&&r.set(n),r}function gve(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function yve(){let e=xk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=xk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=qUt(h,d),c)p=t,m=e,t=Array(c+f),e=xk(c+f),WUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Cbt(u,a[0],0,l),U1(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function qUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),kbt(e,t)}function WUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Gie(e){Ve.call(this,VUt(),e),this._indices=null,this._dims=null}Gie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ct(Gie,Ve,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=yve()),s.push(gve(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,x,w,E,T,C;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,T=v.length;E<T;++E)w[v[E]._index]=1;for(E=0;E<h;++E)C=r[E],(!o[E]||e.modified("fields",E)||t.modified(C.fields))&&(y=C.fname,(m=p[y])||(s[y]=g=yve(),p[y]=m=g.insert(C,t.source,0)),o[E]=gve(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)x[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Yie(e){Ve.call(this,null,e)}Yie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ct(Yie,Ve,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const GUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Gie,resolvefilter:Yie},Symbol.toStringTag,{value:"Module"})),YUt="RawCode",f_="Literal",KUt="Property",XUt="Identifier",QUt="ArrayExpression",JUt="BinaryExpression",ZFe="CallExpression",ZUt="ConditionalExpression",ezt="LogicalExpression",tzt="MemberExpression",nzt="ObjectExpression",rzt="UnaryExpression";function Yh(e){this.type=e}Yh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=izt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function izt(e){switch(e.type){case QUt:return e.elements;case JUt:case ezt:return[e.left,e.right];case ZFe:return[e.callee].concat(e.arguments);case ZUt:return[e.test,e.consequent,e.alternate];case tzt:return[e.object,e.property];case nzt:return e.properties;case KUt:return[e.key,e.value];case rzt:return[e.argument];case XUt:case f_:case YUt:default:return[]}}var Fm,Gt,We,Au,Ci,gB=1,YN=2,d_=3,Wv=4,yB=5,uw=6,Ul=7,KN=8,szt=9;Fm={};Fm[gB]="Boolean";Fm[YN]="<end>";Fm[d_]="Identifier";Fm[Wv]="Keyword";Fm[yB]="Null";Fm[uw]="Numeric";Fm[Ul]="Punctuator";Fm[KN]="String";Fm[szt]="RegularExpression";var ozt="ArrayExpression",azt="BinaryExpression",uzt="CallExpression",lzt="ConditionalExpression",e5e="Identifier",czt="Literal",fzt="LogicalExpression",dzt="MemberExpression",hzt="ObjectExpression",pzt="Property",mzt="UnaryExpression",fa="Unexpected token %0",gzt="Unexpected number",yzt="Unexpected string",vzt="Unexpected identifier",bzt="Unexpected reserved word",xzt="Unexpected end of input",BY="Invalid regular expression",bV="Invalid regular expression: missing /",t5e="Octal literals are not allowed in strict mode.",_zt="Duplicate data property in object literal not allowed in strict mode",$a="ILLEGAL",rD="Disabled.",wzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ezt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function vB(e,t){if(!e)throw new Error("ASSERT: "+t)}function E0(e){return e>=48&&e<=57}function Kie(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function _k(e){return"01234567".indexOf(e)>=0}function Szt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function iD(e){return e===10||e===13||e===8232||e===8233}function XN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&wzt.test(String.fromCharCode(e))}function DL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Ezt.test(String.fromCharCode(e))}const Tzt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function n5e(){for(;We<Au;){const e=Gt.charCodeAt(We);if(Szt(e)||iD(e))++We;else break}}function jY(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)We<Au&&Kie(Gt[We])?(r=Gt[We++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ti({},fa,$a);return String.fromCharCode(i)}function Czt(){var e,t,n,r;for(e=Gt[We],t=0,e==="}"&&ti({},fa,$a);We<Au&&(e=Gt[We++],!!Kie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ti({},fa,$a),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function r5e(){var e,t;for(e=Gt.charCodeAt(We++),t=String.fromCharCode(e),e===92&&(Gt.charCodeAt(We)!==117&&ti({},fa,$a),++We,e=jY("u"),(!e||e==="\\"||!XN(e.charCodeAt(0)))&&ti({},fa,$a),t=e);We<Au&&(e=Gt.charCodeAt(We),!!DL(e));)++We,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Gt.charCodeAt(We)!==117&&ti({},fa,$a),++We,e=jY("u"),(!e||e==="\\"||!DL(e.charCodeAt(0)))&&ti({},fa,$a),t+=e);return t}function Azt(){var e,t;for(e=We++;We<Au;){if(t=Gt.charCodeAt(We),t===92)return We=e,r5e();if(DL(t))++We;else break}return Gt.slice(e,We)}function Izt(){var e,t,n;return e=We,t=Gt.charCodeAt(We)===92?r5e():Azt(),t.length===1?n=d_:Tzt.hasOwnProperty(t)?n=Wv:t==="null"?n=yB:t==="true"||t==="false"?n=gB:n=d_,{type:n,value:t,start:e,end:We}}function xV(){var e=We,t=Gt.charCodeAt(We),n,r=Gt[We],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++We,{type:Ul,value:String.fromCharCode(t),start:e,end:We};default:if(n=Gt.charCodeAt(We+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return We+=2,{type:Ul,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:We};case 33:case 61:return We+=2,Gt.charCodeAt(We)===61&&++We,{type:Ul,value:Gt.slice(e,We),start:e,end:We}}}if(o=Gt.substr(We,4),o===">>>=")return We+=4,{type:Ul,value:o,start:e,end:We};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return We+=3,{type:Ul,value:s,start:e,end:We};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return We+=2,{type:Ul,value:i,start:e,end:We};if(i==="//"&&ti({},fa,$a),"<>=!+-*%&|^/".indexOf(r)>=0)return++We,{type:Ul,value:r,start:e,end:We};ti({},fa,$a)}function kzt(e){let t="";for(;We<Au&&Kie(Gt[We]);)t+=Gt[We++];return t.length===0&&ti({},fa,$a),XN(Gt.charCodeAt(We))&&ti({},fa,$a),{type:uw,value:parseInt("0x"+t,16),start:e,end:We}}function Rzt(e){let t="0"+Gt[We++];for(;We<Au&&_k(Gt[We]);)t+=Gt[We++];return(XN(Gt.charCodeAt(We))||E0(Gt.charCodeAt(We)))&&ti({},fa,$a),{type:uw,value:parseInt(t,8),octal:!0,start:e,end:We}}function vve(){var e,t,n;if(n=Gt[We],vB(E0(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=We,e="",n!=="."){if(e=Gt[We++],n=Gt[We],e==="0"){if(n==="x"||n==="X")return++We,kzt(t);if(_k(n))return Rzt(t);n&&E0(n.charCodeAt(0))&&ti({},fa,$a)}for(;E0(Gt.charCodeAt(We));)e+=Gt[We++];n=Gt[We]}if(n==="."){for(e+=Gt[We++];E0(Gt.charCodeAt(We));)e+=Gt[We++];n=Gt[We]}if(n==="e"||n==="E")if(e+=Gt[We++],n=Gt[We],(n==="+"||n==="-")&&(e+=Gt[We++]),E0(Gt.charCodeAt(We)))for(;E0(Gt.charCodeAt(We));)e+=Gt[We++];else ti({},fa,$a);return XN(Gt.charCodeAt(We))&&ti({},fa,$a),{type:uw,value:parseFloat(e),start:t,end:We}}function Dzt(){var e="",t,n,r,i,s=!1;for(t=Gt[We],vB(t==="'"||t==='"',"String literal must starts with a quote"),n=We,++We;We<Au;)if(r=Gt[We++],r===t){t="";break}else if(r==="\\")if(r=Gt[We++],!r||!iD(r.charCodeAt(0)))switch(r){case"u":case"x":Gt[We]==="{"?(++We,e+=Czt()):e+=jY(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:_k(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),We<Au&&_k(Gt[We])&&(s=!0,i=i*8+"01234567".indexOf(Gt[We++]),"0123".indexOf(r)>=0&&We<Au&&_k(Gt[We])&&(i=i*8+"01234567".indexOf(Gt[We++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Gt[We]===`
`&&++We;else{if(iD(r.charCodeAt(0)))break;e+=r}return t!==""&&ti({},fa,$a),{type:KN,value:e,octal:s,start:n,end:We}}function Nzt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ti({},BY)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ti({},BY)}try{return new RegExp(e,t)}catch{return null}}function Pzt(){var e,t,n,r,i;for(e=Gt[We],vB(e==="/","Regular expression literal must start with a slash"),t=Gt[We++],n=!1,r=!1;We<Au;)if(e=Gt[We++],t+=e,e==="\\")e=Gt[We++],iD(e.charCodeAt(0))&&ti({},bV),t+=e;else if(iD(e.charCodeAt(0)))ti({},bV);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ti({},bV),i=t.substr(1,t.length-2),{value:i,literal:t}}function Ozt(){var e,t,n;for(t="",n="";We<Au&&(e=Gt[We],!!DL(e.charCodeAt(0)));)++We,e==="\\"&&We<Au?ti({},fa,$a):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ti({},BY,n),{value:n,literal:t}}function $zt(){var e,t,n,r;return Ci=null,n5e(),e=We,t=Pzt(),n=Ozt(),r=Nzt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:We}}function Mzt(e){return e.type===d_||e.type===Wv||e.type===gB||e.type===yB}function i5e(){if(n5e(),We>=Au)return{type:YN,start:We,end:We};const e=Gt.charCodeAt(We);return XN(e)?Izt():e===40||e===41||e===59?xV():e===39||e===34?Dzt():e===46?E0(Gt.charCodeAt(We+1))?vve():xV():E0(e)?vve():xV()}function Wl(){const e=Ci;return We=e.end,Ci=i5e(),We=e.end,e}function s5e(){const e=We;Ci=i5e(),We=e}function Lzt(e){const t=new Yh(ozt);return t.elements=e,t}function bve(e,t,n){const r=new Yh(e==="||"||e==="&&"?fzt:azt);return r.operator=e,r.left=t,r.right=n,r}function Fzt(e,t){const n=new Yh(uzt);return n.callee=e,n.arguments=t,n}function Bzt(e,t,n){const r=new Yh(lzt);return r.test=e,r.consequent=t,r.alternate=n,r}function Xie(e){const t=new Yh(e5e);return t.name=e,t}function DI(e){const t=new Yh(czt);return t.value=e.value,t.raw=Gt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function xve(e,t,n){const r=new Yh(dzt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function jzt(e){const t=new Yh(hzt);return t.properties=e,t}function _ve(e,t,n){const r=new Yh(pzt);return r.key=t,r.value=n,r.kind=e,r}function Uzt(e,t){const n=new Yh(mzt);return n.operator=e,n.argument=t,n.prefix=!0,n}function ti(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(vB(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=We,n.description=i,n}function bB(e){e.type===YN&&ti(e,xzt),e.type===uw&&ti(e,gzt),e.type===KN&&ti(e,yzt),e.type===d_&&ti(e,vzt),e.type===Wv&&ti(e,bzt),ti(e,fa,e.value)}function Iu(e){const t=Wl();(t.type!==Ul||t.value!==e)&&bB(t)}function os(e){return Ci.type===Ul&&Ci.value===e}function _V(e){return Ci.type===Wv&&Ci.value===e}function zzt(){const e=[];for(We=Ci.start,Iu("[");!os("]");)os(",")?(Wl(),e.push(null)):(e.push(h_()),os("]")||Iu(","));return Wl(),Lzt(e)}function wve(){We=Ci.start;const e=Wl();return e.type===KN||e.type===uw?(e.octal&&ti(e,t5e),DI(e)):Xie(e.value)}function Vzt(){var e,t,n,r;if(We=Ci.start,e=Ci,e.type===d_)return n=wve(),Iu(":"),r=h_(),_ve("init",n,r);if(e.type===YN||e.type===Ul)bB(e);else return t=wve(),Iu(":"),r=h_(),_ve("init",t,r)}function Hzt(){var e=[],t,n,r,i={},s=String;for(We=Ci.start,Iu("{");!os("}");)t=Vzt(),t.key.type===e5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ti({},_zt):i[r]=!0,e.push(t),os("}")||Iu(",");return Iu("}"),jzt(e)}function qzt(){Iu("(");const e=Qie();return Iu(")"),e}const Wzt={if:1};function Gzt(){var e,t,n;if(os("("))return qzt();if(os("["))return zzt();if(os("{"))return Hzt();if(e=Ci.type,We=Ci.start,e===d_||Wzt[Ci.value])n=Xie(Wl().value);else if(e===KN||e===uw)Ci.octal&&ti(Ci,t5e),n=DI(Wl());else{if(e===Wv)throw new Error(rD);e===gB?(t=Wl(),t.value=t.value==="true",n=DI(t)):e===yB?(t=Wl(),t.value=null,n=DI(t)):os("/")||os("/=")?(n=DI($zt()),s5e()):bB(Wl())}return n}function Yzt(){const e=[];if(Iu("("),!os(")"))for(;We<Au&&(e.push(h_()),!os(")"));)Iu(",");return Iu(")"),e}function Kzt(){We=Ci.start;const e=Wl();return Mzt(e)||bB(e),Xie(e.value)}function Xzt(){return Iu("."),Kzt()}function Qzt(){Iu("[");const e=Qie();return Iu("]"),e}function Jzt(){var e,t,n;for(e=Gzt();;)if(os("."))n=Xzt(),e=xve(".",e,n);else if(os("("))t=Yzt(),e=Fzt(e,t);else if(os("["))n=Qzt(),e=xve("[",e,n);else break;return e}function Eve(){const e=Jzt();if(Ci.type===Ul&&(os("++")||os("--")))throw new Error(rD);return e}function b6(){var e,t;if(Ci.type!==Ul&&Ci.type!==Wv)t=Eve();else{if(os("++")||os("--"))throw new Error(rD);if(os("+")||os("-")||os("~")||os("!"))e=Wl(),t=b6(),t=Uzt(e.value,t);else{if(_V("delete")||_V("void")||_V("typeof"))throw new Error(rD);t=Eve()}}return t}function Sve(e){let t=0;if(e.type!==Ul&&e.type!==Wv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Zzt(){var e,t,n,r,i,s,o,a,u,l;if(e=Ci,u=b6(),r=Ci,i=Sve(r),i===0)return u;for(r.prec=i,Wl(),t=[e,Ci],o=b6(),s=[u,r,o];(i=Sve(Ci))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=bve(a,u,o),s.push(n);r=Wl(),r.prec=i,s.push(r),t.push(Ci),n=b6(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=bve(s[l-1].value,s[l-2],n),l-=2;return n}function h_(){var e,t,n;return e=Zzt(),os("?")&&(Wl(),t=h_(),Iu(":"),n=h_(),e=Bzt(e,t,n)),e}function Qie(){const e=h_();if(os(","))throw new Error(rD);return e}function Jie(e){Gt=e,We=0,Au=Gt.length,Ci=null,s5e();const t=Qie();if(Ci.type!==YN)throw new Error("Unexpect token after expression.");return t}var o5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function a5e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ye("Missing arguments to clamp function."),o.length>3&&Ye("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ye("Missing arguments to if function."),o.length>3&&Ye("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function eVt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function u5e(e){e=e||{};const t=e.allowed?Lh(e.allowed):{},n=e.forbidden?Lh(e.forbidden):{},r=e.constants||o5e,i=(e.functions||a5e)(f),s=e.globalvar,o=e.fieldvar,a=Yn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Pt(p))return p;const m=d[p.type];return m==null&&Ye("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:sn(n,m)?Ye("Illegal identifier: "+m):sn(r,m)?r[m]:sn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[eVt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ye("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=sn(i,m)&&i[m];return y||Ye("Unrecognized function: "+m),Yn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Tve=Symbol("vega_selection_getter");function l5e(e){return(!e.getter||!e.getter[Tve])&&(e.getter=ld(e.field),e.getter[Tve]=!0),e.getter}const Zie="intersect",Cve="union",tVt="vlMulti",nVt="vlPoint",Ave="or",rVt="and",wp="_vgsid_",sD=ld(wp),iVt="E",sVt="R",oVt="R-E",aVt="R-LE",uVt="R-RE",NL="index:unit";function Ive(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=l5e(a)(e),S1(o)&&(o=wu(o)),S1(r[s])&&(r[s]=wu(r[s])),Xe(r[s])&&S1(r[s][0])&&(r[s]=r[s].map(wu)),a.type===iVt){if(Xe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===sVt){if(!nS(o,r[s]))return!1}else if(a.type===uVt){if(!nS(o,r[s],!0,!1))return!1}else if(a.type===oVt){if(!nS(o,r[s],!1,!1))return!1}else if(a.type===aVt&&!nS(o,r[s],!1,!0))return!1;return!0}function lVt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[NL]&&r[NL].value:void 0,o=n===Zie,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Ive(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Ive(t,l),o^h)return h;return a&&o}const c5e=$2(sD),cVt=c5e.left,fVt=c5e.right;function dVt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[NL]&&r[NL].value:void 0,o=n===Zie,a=sD(t),u=cVt(i,a);if(u===i.length||sD(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(fVt(i,a)-u<s.size)return!1}return!0}function hVt(e,t){return e.map(n=>Gn(t.fields?{values:t.fields.map(r=>l5e(r)(n.datum))}:{[wp]:sD(n.datum)},t))}function pVt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,x=s.length,w=0,E,T;w<x;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=wV[`${y}_union`],m[d]=v(g,Nt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(Nt(f).reduce((C,I,N)=>(C[c[N].field]=I,C),{})))}else h=wp,p=sD(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[wp]:p}));if(t=t||Cve,o[wp]?o[wp]=wV[`${wp}_${t}`](...Object.values(o[wp])):Object.keys(o).forEach(C=>{o[C]=Object.keys(o[C]).map(I=>o[C][I]).reduce((I,N)=>I===void 0?N:wV[`${u[C]}_${t}`](I,N))}),s=Object.keys(a),n&&s.length){const C=r?nVt:tVt;o[C]=t===Cve?{[Ave]:s.reduce((I,N)=>(I.push(...a[N]),I),[])}:{[rVt]:s.map(I=>({[Ave]:a[I]}))}}return o}var wV={[`${wp}_union`]:Fbt,[`${wp}_intersect`]:Mbt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=wu(t[0]),r=wu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=wu(t[0]),r=wu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const mVt=":",gVt="@";function ese(e,t,n,r){t[0].type!==f_&&Ye("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Lr(t).value,o="unit",a=gVt+o,u=mVt+i;s===Zie&&!sn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),sn(r,u)||(r[u]=n.getData(i).tuplesRef())}function f5e(e){const t=this.context.data[e];return t?t.values.value:[]}function yVt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function vVt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(cd).insert(t)),1}function bVt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const QN=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},xVt=QN("format"),d5e=QN("timeFormat"),_Vt=QN("utcFormat"),wVt=QN("timeParse"),EVt=QN("utcParse"),$O=new Date(2e3,0,1);function xB(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":($O.setYear(2e3),$O.setMonth(e),$O.setDate(t),d5e.call(this,$O,n))}function SVt(e){return xB.call(this,e,1,"%B")}function TVt(e){return xB.call(this,e,1,"%b")}function CVt(e){return xB.call(this,0,2+e,"%A")}function AVt(e){return xB.call(this,0,2+e,"%a")}const IVt=":",kVt="@",UY="%",h5e="$";function tse(e,t,n,r){t[0].type!==f_&&Ye("First argument to data functions must be a string literal.");const i=t[0].value,s=IVt+i;if(!sn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function RVt(e,t,n,r){t[0].type!==f_&&Ye("First argument to indata must be a string literal."),t[1].type!==f_&&Ye("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=kVt+s;sn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function fl(e,t,n,r){if(t[0].type===f_)kve(n,r,t[0].value);else for(e in n.scales)kve(n,r,e)}function kve(e,t,n){const r=UY+n;if(!sn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Bm(e,t){if(Yn(e))return e;if(Pt(e)){const n=t.scales[e];return n&&n8t(n.value)?n.value:void 0}}function DVt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=fl,n._range=fl,n._scale=fl;const r=i=>"_["+(i.type===f_?Et(UY+i.value):Et(UY)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function nse(e,t){return function(n,r,i){if(n){const s=Bm(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const NVt=nse("area",WSt),PVt=nse("bounds",XSt),OVt=nse("centroid",nTt);function $Vt(e,t){const n=Bm(e,(t||this).context);return n&&n.scale()}function MVt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function rse(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function LVt(){return rse(this.context.dataflow,"warn",arguments)}function FVt(){return rse(this.context.dataflow,"info",arguments)}function BVt(){return rse(this.context.dataflow,"debug",arguments)}function EV(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zY(e){const t=V1(e),n=EV(t.r),r=EV(t.g),i=EV(t.b);return .2126*n+.7152*r+.0722*i}function jVt(e,t){const n=zY(e),r=zY(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function UVt(){const e=[].slice.call(arguments);return e.unshift({}),Gn(...e)}function p5e(e,t){return e===t||e!==e&&t!==t?!0:Xe(e)?Xe(t)&&e.length===t.length?zVt(e,t):!1:Ot(e)&&Ot(t)?m5e(e,t):!1}function zVt(e,t){for(let n=0,r=e.length;n<r;++n)if(!p5e(e[n],t[n]))return!1;return!0}function m5e(e,t){for(const n in e)if(!p5e(e[n],t[n]))return!1;return!0}function Rve(e){return t=>m5e(e,t)}function VVt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?cd:Xe(n)||H8(n)?n:Rve(n),c.remove(f)),t&&c.insert(t),r&&(f=Rve(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function HVt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function qVt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Dve={};function WVt(e,t){const n=Dve[t]||(Dve[t]=ld(t));return Xe(e)?e.map(n):n(e)}function ise(e){return Xe(e)||ArrayBuffer.isView(e)?e:null}function sse(e){return ise(e)||(Pt(e)?e:null)}function GVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ise(e).join(...n)}function YVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sse(e).indexOf(...n)}function KVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sse(e).lastIndexOf(...n)}function XVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sse(e).slice(...n)}function QVt(e,t,n){return Yn(n)&&Ye("Function argument passed to replace."),String(e).replace(t,n)}function JVt(e){return ise(e).slice().reverse()}function ZVt(e,t,n){return kre(e||0,t||0,n||0)}function eHt(e,t){const n=Bm(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function tHt(e,t){const n=Bm(e,(t||this).context);return n?n.copy():void 0}function nHt(e,t){const n=Bm(e,(t||this).context);return n?n.domain():[]}function rHt(e,t,n){const r=Bm(e,(n||this).context);return r?Xe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function iHt(e,t){const n=Bm(e,(t||this).context);return n&&n.range?n.range():[]}function sHt(e,t,n){const r=Bm(e,(n||this).context);return r?r(t):void 0}function oHt(e,t,n,r,i){e=Bm(e,(i||this).context);const s=sLe(t,n);let o=e.domain(),a=o[0],u=Lr(o),l=Nu;return u-a?l=GMe(e,a,u):e=(e.interpolator?si("sequential")().interpolator(e.interpolator()):si("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Lr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function aHt(e,t,n){const r=Bm(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function uHt(e){let t=null;return function(n){return n?ZR(n,t=t||FT(e)):e}}const g5e=e=>e.data;function y5e(e,t){const n=f5e.call(t,e);return n.root&&n.root.lookup||{}}function lHt(e,t,n){const r=y5e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(g5e):void 0}function cHt(e,t){const n=y5e(e,this)[t];return n?n.ancestors().map(g5e):void 0}const v5e=()=>typeof window<"u"&&window||null;function fHt(){const e=v5e();return e?e.screen:{}}function dHt(){const e=v5e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function hHt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function b5e(e,t,n){if(!e)return[];const[r,i]=e,s=new So().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return nFe(o,s,pHt(t))}function pHt(e){let t=null;if(e){const n=Nt(e.marktype),r=Nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function mHt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function gHt(e){return Nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function yHt(e,t,n){const{x:r,y:i,mark:s}=n,o=new So().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),b5e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>vHt(u.x,u.y,t))}function vHt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const oD={random(){return dd()},cumulativeNormal:K8,cumulativeLogNormal:Kne,cumulativeUniform:Zne,densityNormal:Hne,densityLogNormal:Yne,densityUniform:Jne,quantileNormal:X8,quantileLogNormal:Xne,quantileUniform:ere,sampleNormal:Y8,sampleLogNormal:Gne,sampleUniform:Qne,isArray:Xe,isBoolean:qv,isDate:S1,isDefined(e){return e!==void 0},isNumber:Xr,isObject:Ot,isRegExp:r$e,isString:Pt,isTuple:H8,isValid(e){return e!=null&&e===e},toBoolean:Ine,toDate(e){return kne(e)},toNumber:wu,toString:Rne,indexof:YVt,join:GVt,lastindexof:KVt,replace:QVt,reverse:JVt,slice:XVt,flush:t$e,lerp:i$e,merge:UVt,pad:a$e,peek:Lr,pluck:WVt,span:DN,inrange:nS,truncate:u$e,rgb:V1,lab:z$,hcl:V$,hsl:j$,luminance:zY,contrast:jVt,sequence:Ql,format:xVt,utcFormat:_Vt,utcParse:EVt,utcOffset:w$e,utcSequence:T$e,timeFormat:d5e,timeParse:wVt,timeOffset:_$e,timeSequence:S$e,timeUnitSpecifier:c$e,monthFormat:SVt,monthAbbrevFormat:TVt,dayFormat:CVt,dayAbbrevFormat:AVt,quarter:Q6e,utcquarter:J6e,week:d$e,utcweek:m$e,dayofyear:f$e,utcdayofyear:p$e,warn:LVt,info:FVt,debug:BVt,extent(e){return ym(e)},inScope:MVt,intersect:b5e,clampRange:Z6e,pinchDistance:HVt,pinchAngle:qVt,screen:fHt,containerSize:hHt,windowSize:dHt,bandspace:ZVt,setdata:vVt,pathShape:uHt,panLinear:G6e,panLog:Y6e,panPow:K6e,panSymlog:X6e,zoomLinear:wne,zoomLog:Ene,zoomPow:fL,zoomSymlog:Sne,encode:bVt,modify:VVt,lassoAppend:mHt,lassoPath:gHt,intersectLasso:yHt},bHt=["view","item","group","xy","x","y"],xHt="event.vega.",x5e="this.",ose={},_5e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Et(h5e+e)}]`,functions:_Ht,constants:o5e,visitors:ose},w5e=u5e(_5e);function _Ht(e){const t=a5e(e);bHt.forEach(n=>t[n]=xHt+n);for(const n in oD)t[n]=x5e+n;return Gn(t,DVt(e,oD,ose)),t}function po(e,t,n){return arguments.length===1?oD[e]:(oD[e]=t,n&&(ose[e]=n),w5e.functions[e]=x5e+e,this)}po("bandwidth",eHt,fl);po("copy",tHt,fl);po("domain",nHt,fl);po("range",iHt,fl);po("invert",rHt,fl);po("scale",sHt,fl);po("gradient",oHt,fl);po("geoArea",NVt,fl);po("geoBounds",PVt,fl);po("geoCentroid",OVt,fl);po("geoShape",aHt,fl);po("geoScale",$Vt,fl);po("indata",yVt,RVt);po("data",f5e,tse);po("treePath",lHt,tse);po("treeAncestors",cHt,tse);po("vlSelectionTest",lVt,ese);po("vlSelectionIdTest",dVt,ese);po("vlSelectionResolve",pVt,ese);po("vlSelectionTuples",hVt);function bm(e,t){const n={};let r;try{e=Pt(e)?e:Et(e)+"",r=Jie(e)}catch{Ye("Expression parse error: "+e)}r.visit(s=>{if(s.type!==ZFe)return;const o=s.callee.name,a=_5e.visitors[o];a&&a(o,s.arguments,t,n)});const i=w5e(r);return i.globals.forEach(s=>{const o=h5e+s;!sn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function wHt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const EHt=Lh(["rule"]),Nve=Lh(["group","image","rect"]);function SHt(e,t){let n="";return EHt[t]||(e.x2&&(e.x?(Nve[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Nve[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ase(e){return(e+"").toLowerCase()}function THt(e){return ase(e)==="operator"}function CHt(e){return ase(e)==="collect"}function RA(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function AHt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var IHt={operator:(e,t)=>RA(e,["_"],t.code),parameter:(e,t)=>RA(e,["datum","_"],t.code),event:(e,t)=>RA(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return RA(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Et(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=SHt(r,n),i+="return m;",RA(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Et).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),AHt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function kHt(e){const t=this;THt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function RHt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ye("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function DHt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Xe(i)?i.map(s=>Pve(s,n,t)):Pve(i,n,t)}return t}function Pve(e,t,n){if(!e||!Ot(e))return e;for(let r=0,i=Ove.length,s;r<i;++r)if(s=Ove[r],sn(e,s.key))return s.parse(e,t,n);return e}var Ove=[{key:"$ref",parse:NHt},{key:"$key",parse:OHt},{key:"$expr",parse:PHt},{key:"$field",parse:$Ht},{key:"$encode",parse:LHt},{key:"$compare",parse:MHt},{key:"$context",parse:FHt},{key:"$subflow",parse:BHt},{key:"$tupleid",parse:jHt}];function NHt(e,t){return t.get(e.$ref)||Ye("Operator not defined: "+e.$ref)}function PHt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Sc(t.parameterExpression(e.$expr),e.$fields))}function OHt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Ane(e.$key,e.$flat,t.expr.codegen))}function $Ht(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ld(e.$field,e.$name,t.expr.codegen))}function MHt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Nt(e.$compare).map(i=>i&&i.$tupleid?nn:i);return t.fn[n]||(t.fn[n]=Tne(r,e.$order,t.expr.codegen))}function LHt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Sc(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function FHt(e,t){return t}function BHt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function jHt(){return nn}function UHt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ye("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function zHt(e){var t=this,n=Ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ye("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const VHt={skip:!0};function HHt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function qHt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],VHt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(cd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function E5e(e,t,n,r){return new S5e(e,t,n,r)}function S5e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||IHt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function $ve(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}S5e.prototype=$ve.prototype={fork(){const e=new $ve(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),CHt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ase(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:wHt,parseOperator:kHt,parseOperatorParameters:RHt,parseParameters:DHt,parseStream:UHt,parseUpdate:zHt,getState:HHt,setState:qHt};function WHt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),T5e(t,e.description()))}function T5e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function GHt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const SV="default";function YHt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:SV,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Pt(i)?i:i.user:SV,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Pt(r)||(i=r.item,r=r.user),VY(e,r&&r!==SV?r:i||r),i},{cursor:t})}function VY(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function PL(e,t){var n=e._runtime.data;return sn(n,t)||Ye("Unrecognized data set: "+t),n[t]}function KHt(e,t){return arguments.length<2?PL(this,e).values.value:_B.call(this,e,ow().remove(cd).insert(t))}function _B(e,t){q$e(t)||Ye("Second argument to changes must be a changeset.");const n=PL(this,e);return n.modified=!0,this.pulse(n.input,t)}function XHt(e,t){return _B.call(this,e,ow().insert(t))}function QHt(e,t){return _B.call(this,e,ow().remove(t))}function C5e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function A5e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function wB(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function JHt(e){var t=wB(e),n=C5e(e),r=A5e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function ZHt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=wB(e),o=t.changedTouches?t.changedTouches[0]:t,s=hB(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=eqt(e,n,s),t}function eqt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Pu(e),item:Pu(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Mve="view",tqt="timer",nqt="window",rqt={trap:!1};function iqt(e){const t=Gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Xe(r[s])&&(r[s]=Lh(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function I5e(e,t,n,r){e._eventListeners.push({type:n,sources:Nt(t),handler:r})}function sqt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function MO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function oqt(e,t,n){var r=this,i=new G8(n),s=function(l,c){r.runAsync(null,()=>{e===Mve&&sqt(r,t)&&l.preventDefault(),i.receive(ZHt(r,l,c))})},o;if(e===tqt)MO(r,"timer",t)&&r.timer(s,t);else if(e===Mve)MO(r,"view",t)&&r.addEventListener(t,s,rqt);else if(e===nqt?MO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&MO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);I5e(r,o,t,s)}return i}function Lve(e){return e.item}function Fve(e){return e.item.mark.source}function Bve(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function aqt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Lve),Fve,Bve(e)),this.on(this.events("view","pointerout",Lve),Fve,Bve(t)),this}function uqt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function tf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const lqt="vega-bind",cqt="vega-bind-name",fqt="vega-bind-radio";function dqt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Cne(r.debounce,i.update))),(r.input==null&&r.element?hqt:mqt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function hqt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),I5e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(pqt(i))}}function pqt(e){return typeof Event<"u"?new Event(e):{type:e}}function mqt(e,t,n,r){const i=r.signal(n.signal),s=tf("div",{class:lqt}),o=n.input==="radio"?s:s.appendChild(tf("label"));o.appendChild(tf("span",{class:cqt},n.name||n.signal)),t.appendChild(s);let a=gqt;switch(n.input){case"checkbox":a=yqt;break;case"select":a=vqt;break;case"radio":a=bqt;break;case"range":a=xqt;break}a(e,o,n,i)}function gqt(e,t,n,r){const i=tf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function yqt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=tf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function vqt(e,t,n,r){const i=tf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};OL(o,r)&&(u.selected=!0),i.appendChild(tf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(OL(n.options[a],o)){i.selectedIndex=a;return}}}function bqt(e,t,n,r){const i=tf("span",{class:fqt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};OL(o,r)&&(u.checked=!0);const l=tf("input",u);l.addEventListener("change",()=>e.update(o));const c=tf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)OL(a[l].value,o)&&(a[l].checked=!0)}}function xqt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||z1(s,i,100),a=tf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=tf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function OL(e,t){return e===t||e+""==t+""}function k5e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,C5e(e),A5e(e),wB(e),i,s).background(e.background())}function use(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function _qt(e,t,n,r){const i=new r(e.loader(),use(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,wB(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function wqt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=pB(r);e=n._el=e?TV(n,e,!0):null,WHt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||GN,a=e?s.renderer:s.headless;return n._renderer=a?k5e(n,n._renderer,e,a):null,n._handler=_qt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=TV(n,t,!0):e.appendChild(tf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=TV(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{dqt(n,u.element||t,u)})),n}function TV(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const DA=e=>+e||0,Eqt=e=>({top:e,bottom:e,left:e,right:e});function jve(e){return Ot(e)?{top:DA(e.top),bottom:DA(e.bottom),left:DA(e.left),right:DA(e.right)}:Eqt(DA(e))}async function lse(e,t,n,r){const i=pB(t),s=i&&i.headless;return s||Ye("Unrecognized renderer type: "+t),await e.runAsync(),k5e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Sqt(e,t){e!==i1.Canvas&&e!==i1.SVG&&e!==i1.PNG&&Ye("Unrecognized image type: "+e);const n=await lse(this,e,t);return e===i1.SVG?Tqt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Tqt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Cqt(e,t){return(await lse(this,i1.Canvas,e,t)).canvas()}async function Aqt(e){return(await lse(this,i1.SVG,e)).svg()}function Iqt(e,t,n){return E5e(e,OT,oD,n).parse(t)}function kqt(e){var t=this._runtime.scales;return sn(t,e)||Ye("Unrecognized scale or projection: "+e),t[e].value}var R5e="width",D5e="height",cse="padding",Uve={skip:!0};function N5e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===cse?r.left+r.right:0)}function P5e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===cse?r.top+r.bottom:0)}function Rqt(e){var t=e._signals,n=t[R5e],r=t[D5e],i=t[cse];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=N5e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=P5e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Dqt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(R5e,n,Uve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(D5e,r,Uve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Nqt(e){return this._runtime.getState(e||{data:Pqt,signals:Oqt,recurse:!0})}function Pqt(e,t){return t.modified&&Xe(t.input.value)&&!e.startsWith("_:vega:_")}function Oqt(e,t){return!(e==="parent"||t instanceof OT.proxy)}function $qt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Mqt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(lwt(n,t))}function Lqt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Fqt(r))}function Fqt(e){return e==null?"":Xe(e)?O5e(e):Ot(e)&&!S1(e)?Bqt(e):e+""}function Bqt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Xe(n)?O5e(n):$5e(n))}).join(`
`)}function O5e(e){return"["+e.map($5e).join(", ")+"]"}function $5e(e){return Xe(e)?"[]":Ot(e)&&!S1(e)?"{}":e}function jqt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function M5e(e,t){const n=this;if(t=t||{},NS.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Gn({},e.locale,t.locale);n.locale($$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||i1.Canvas,n._scenegraph=new kLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Lqt,n._redraw=!0,n._handler=new GN().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=iqt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Iqt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=N5e(n,n._width),n._viewHeight=P5e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Rqt(n),GHt(n),YHt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function LO(e,t){return sn(e._signals,t)?e._signals[t]:Ye("Unrecognized signal name: "+Et(t))}function L5e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function zve(e,t,n,r){let i=L5e(n,r);return i||(i=use(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Vve(e,t,n){const r=L5e(t,n);return r&&t._targets.remove(r),e}Ct(M5e,NS,{async evaluate(e,t,n){if(await NS.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,JHt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&o6(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&T5e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=LO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",jve(e)):jve(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(pB(e)||Ye("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(NS.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(LO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dqt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=use(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return zve(this,e,LO(this,e),t)},removeSignalListener(e,t){return Vve(this,LO(this,e),t)},addDataListener(e,t){return zve(this,e,PL(this,e).values,t)},removeDataListener(e,t){return Vve(this,PL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=VY(this,null);this._globalCursor=!!e,t&&VY(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Mqt,events:oqt,finalize:uqt,hover:aqt,data:KHt,change:_B,insert:XHt,remove:QHt,scale:kqt,initialize:wqt,toImageURL:Sqt,toCanvas:Cqt,toSVG:Aqt,getState:Nqt,setState:$qt,_watchPixelRatio:jqt});const Uqt="view",$L="[",ML="]",F5e="{",B5e="}",zqt=":",j5e=",",Vqt="@",Hqt=">",qqt=/[[\]{}]/,Wqt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let U5e,z5e;function Gv(e,t,n){return U5e=t||Uqt,z5e=n||Wqt,V5e(e.trim()).map(HY)}function Gqt(e){return z5e[e]}function wk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function V5e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=wk(e,i,j5e,$L+F5e,ML+B5e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function HY(e){return e[0]==="["?Yqt(e):Kqt(e)}function Yqt(e){const t=e.length;let n=1,r;if(n=wk(e,n,ML,$L,ML),n===t)throw"Empty between selector: "+e;if(r=V5e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Hqt)throw"Expected '>' after between selector: "+e;r=r.map(HY);const i=HY(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Kqt(e){const t={source:U5e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===B5e){if(a=e.lastIndexOf(F5e),a>=0){try{r=Xqt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Vqt&&(i=++a),u=wk(e,a,zqt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=wk(e,a,$L),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=wk(e,a,ML),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==$L)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||qqt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Gqt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Xqt(e){const t=e.split(j5e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Qqt(e){return Ot(e)?e:{type:e||"pad"}}const NA=e=>+e||0,Jqt=e=>({top:e,bottom:e,left:e,right:e});function Zqt(e){return Ot(e)?e.signal?e:{top:NA(e.top),bottom:NA(e.bottom),left:NA(e.left),right:NA(e.right)}:Jqt(NA(e))}const da=e=>Ot(e)&&!Xe(e)?Gn({},e):{value:e};function Hve(e,t,n,r){return n!=null?(Ot(n)&&!Xe(n)||Xe(n)&&n.length&&Ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function qa(e,t,n){for(const r in t)Hve(e,r,t[r]);for(const r in n)Hve(e,r,n[r],"update")}function cC(e,t,n){for(const r in t)n&&sn(n,r)||(e[r]=Gn(e[r]||{},t[r]));return e}function kE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const fse="mark",dse="frame",hse="scope",eWt="axis",tWt="axis-domain",nWt="axis-grid",rWt="axis-label",iWt="axis-tick",sWt="axis-title",oWt="legend",aWt="legend-band",uWt="legend-entry",lWt="legend-gradient",H5e="legend-label",cWt="legend-symbol",fWt="legend-title",dWt="title",hWt="title-text",pWt="title-subtitle";function mWt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!kE(u,e)&&CV(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===dse?i.group:n===fse?Gn({},i.mark,i[t]):null;for(u in c)l=kE(u,e)||(u==="fill"||u==="stroke")&&(kE("fill",e)||kE("stroke",e)),l||CV(s,u,c[u]);Nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)kE(h,e)||CV(s,h,d[h])}),e=Gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Gn(o,e.enter),a&&(e.update=Gn(a,e.update)),e}function CV(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const q5e=e=>Pt(e)?Et(e):e.signal?`(${e.signal})`:W5e(e);function EB(e){if(e.gradient!=null)return yWt(e);let t=e.signal?`(${e.signal})`:e.color?gWt(e.color):e.field!=null?W5e(e.field):e.value!==void 0?Et(e.value):void 0;return e.scale!=null&&(t=vWt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${x6(e.exponent)})`),e.mult!=null&&(t+=`*${x6(e.mult)}`),e.offset!=null&&(t+=`+${x6(e.offset)}`),e.round&&(t=`round(${t})`),t}const FO=(e,t,n,r)=>`(${e}(${[t,n,r].map(EB).join(",")})+'')`;function gWt(e){return e.c?FO("hcl",e.h,e.c,e.l):e.h||e.s?FO("hsl",e.h,e.s,e.l):e.l||e.a?FO("lab",e.l,e.a,e.b):e.r||e.g||e.b?FO("rgb",e.r,e.g,e.b):null}function yWt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Et(n));for(;t.length&&Lr(t)==null;)t.pop();return t.unshift(q5e(e.gradient)),`gradient(${t.join(",")})`}function x6(e){return Ot(e)?"("+EB(e)+")":e}function W5e(e){return G5e(Ot(e)?e:{datum:e})}function G5e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ye("Invalid field reference: "+Et(e));return e.signal||(r=Pt(r)?Mm(r).map(Et).join("]["):G5e(r)),t+"["+r+"]"}function vWt(e,t){const n=q5e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+x6(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function bWt(e){let t="";return e.forEach(n=>{const r=EB(n);t+=n.test?`(${n.test})?${r}:`:r}),Lr(t)===":"&&(t+="null"),t}function Y5e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=mWt(e,t,n,r,i.config);for(const a in e)o[a]=xWt(e[a],t,s,i);return s}function xWt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=wWt(_Wt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function _Wt(e){return Xe(e)?bWt(e):EB(e)}function wWt(e,t,n,r){const i=bm(e,t);return i.$fields.forEach(s=>r[s]=1),Gn(n,i.$params),i.$expr}const EWt="outer",SWt=["value","update","init","react","bind"];function qve(e,t){Ye(e+' for "outer" push: '+Et(t))}function K5e(e,t){const n=e.name;if(e.push===EWt)t.signals[n]||qve("No prior signal definition",n),SWt.forEach(r=>{e[r]!==void 0&&qve("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function qY(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function SB(e,t,n,r){return new qY(e,t,n,r)}function LL(e,t){return SB("operator",e,t)}function tn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function aD(e,t){return t?{$field:e,$name:t}:{$field:e}}const WY=aD("key");function Wve(e,t){return{$compare:e,$order:t}}function TWt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const CWt="ascending",AWt="descending";function IWt(e){return Ot(e)?(e.order===AWt?"-":"+")+TB(e.op,e.field):""}function TB(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const pse="scope",GY="view";function Vo(e){return e&&e.signal}function kWt(e){return e&&e.expr}function _6(e){if(Vo(e))return!0;if(Ot(e)){for(const t in e)if(_6(e[t]))return!0}return!1}function eh(e,t){return e??t}function Lx(e){return e&&e.signal||e}const Gve="timer";function uD(e,t){return(e.merge?DWt:e.stream?NWt:e.type?PWt:Ye("Invalid stream specification: "+Et(e)))(e,t)}function RWt(e){return e===pse?GY:e||GY}function DWt(e,t){const n=e.merge.map(i=>uD(i,t)),r=mse({merge:n},e,t);return t.addStream(r).id}function NWt(e,t){const n=uD(e.stream,t),r=mse({stream:n},e,t);return t.addStream(r).id}function PWt(e,t){let n;e.type===Gve?(n=t.event(Gve,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(RWt(e.source),e.type);const r=mse({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function mse(e,t,n){let r=t.between;return r&&(r.length!==2&&Ye('Stream "between" parameter must have 2 entries: '+Et(t)),e.between=[uD(r[0],n),uD(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(OWt(t.marktype,t.markname,t.markrole)),t.source===pse&&r.push("inScope(event.item)"),r.length&&(e.filter=bm("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function OWt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const $Wt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function MWt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ye("Signal update missing events specification."),Pt(s)&&(s=Gv(s,t.isSubscope()?pse:GY)),s=Nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[FWt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ye("Signal encode and update are mutually exclusive."),o="encode(item(),"+Et(r)+")"),i.update=Pt(o)?bm(o,t):o.expr!=null?bm(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:$Wt,$params:{$value:t.signalRef(o.signal)}}:Ye("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Gn(LWt(u,t),i)))}function LWt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):uD(e,t)}}function FWt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function BWt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ye("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=bm(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>MWt(i,t,n.id))}const Ui=e=>(t,n,r)=>SB(e,n,t||void 0,r),X5e=Ui("aggregate"),jWt=Ui("axisticks"),Q5e=Ui("bound"),Kh=Ui("collect"),Yve=Ui("compare"),UWt=Ui("datajoin"),J5e=Ui("encode"),zWt=Ui("expression"),VWt=Ui("facet"),HWt=Ui("field"),qWt=Ui("key"),WWt=Ui("legendentries"),GWt=Ui("load"),YWt=Ui("mark"),KWt=Ui("multiextent"),XWt=Ui("multivalues"),QWt=Ui("overlap"),JWt=Ui("params"),Z5e=Ui("prefacet"),ZWt=Ui("projection"),eGt=Ui("proxy"),tGt=Ui("relay"),e8e=Ui("render"),nGt=Ui("scale"),lw=Ui("sieve"),rGt=Ui("sortitems"),t8e=Ui("viewlayout"),iGt=Ui("values");let sGt=0;const n8e={min:"min",max:"max",count:"sum"};function oGt(e,t){const n=e.type||"linear";UMe(n)||Ye("Unrecognized scale type: "+Et(n)),t.addScale(e.name,{type:n,domain:void 0})}function aGt(e,t){const n=t.getScale(e.name).params;let r;n.domain=r8e(e.domain,e,t),e.range!=null&&(n.range=s8e(e,t,n)),e.interpolate!=null&&yGt(e.interpolate,n),e.nice!=null&&(n.nice=gGt(e.nice,t)),e.bins!=null&&(n.bins=mGt(e.bins,t));for(r in e)sn(n,r)||r==="name"||(n[r]=Zf(e[r],t))}function Zf(e,t){return Ot(e)?e.signal?t.signalRef(e.signal):Ye("Unsupported object: "+Et(e)):e}function w6(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Zf(n,t))}function CB(e){Ye("Can not find data set: "+Et(e))}function r8e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ye("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Xe(e)?uGt:e.fields?cGt:lGt)(e,t,n)}function uGt(e,t,n){return e.map(r=>Zf(r,n))}function lGt(e,t,n){const r=n.getData(e.data);return r||CB(e.data),LT(t.type)?r.valuesRef(n,e.field,i8e(e.sort,!1)):HMe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function cGt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Pt(o)?{data:r,field:o}:Xe(o)||o.signal?fGt(o,n):o,s.push(o),s),[]);return(LT(t.type)?dGt:HMe(t.type)?hGt:pGt)(e,n,i)}function fGt(e,t){const n="_:vega:_"+sGt++,r=Kh({});if(Xe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Et(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,lw({})]),{data:n,field:"data"}}function dGt(e,t,n){const r=i8e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||CB(l.data),c.countsRef(t,l.field,r)}),a={groupby:WY,pulse:o};r&&(i=r.op||"count",s=r.field?TB(i,r.field):"count",a.ops=[n8e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(X5e(a));const u=t.add(Kh({pulse:tn(i)}));return s=t.add(iGt({field:WY,sort:t.sortRef(r),pulse:tn(u)})),tn(s)}function i8e(e,t){return e&&(!e.field&&!e.op?Ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ye("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!n8e[e.op]&&Ye("Multiple domain scales can not be sorted using "+e.op)),e}function hGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||CB(i.data),s.domainRef(t,i.field)});return tn(t.add(XWt({values:r})))}function pGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||CB(i.data),s.extentRef(t,i.field)});return tn(t.add(KWt({extents:r})))}function mGt(e,t){return e.signal||Xe(e)?w6(e,t):t.objectProperty(e)}function gGt(e,t){return e.signal?t.signalRef(e.signal):Ot(e)?{interval:Zf(e.interval),step:Zf(e.step)}:Zf(e)}function yGt(e,t){t.interpolate=Zf(e.type||e),e.gamma!=null&&(t.interpolateGamma=Zf(e.gamma))}function s8e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Pt(i)){if(r&&sn(r,i))return e=Gn({},e,{range:r[i]}),s8e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=LT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ye("Unrecognized scale range value: "+Et(i))}else if(i.scheme){n.scheme=Xe(i.scheme)?w6(i.scheme,t):Zf(i.scheme,t),i.extent&&(n.schemeExtent=w6(i.extent,t)),i.count&&(n.schemeCount=Zf(i.count,t));return}else if(i.step){n.rangeStep=Zf(i.step,t);return}else{if(LT(e.type)&&!Xe(i))return r8e(i,e,t);Xe(i)||Ye("Unsupported range type: "+Et(i))}return i.map(s=>(Xe(s)?w6:Zf)(s,t))}function vGt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=YY(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=YY(n[i],i,t));t.addProjection(e.name,r)}function YY(e,t,n){return Xe(e)?e.map(r=>YY(r,t,n)):Ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ye("Unsupported parameter object: "+Et(e)):e}const Xh="top",fC="left",dC="right",lv="bottom",o8e="center",bGt="vertical",xGt="start",_Gt="middle",wGt="end",KY="index",gse="label",EGt="offset",zT="perc",SGt="perc2",nd="value",JN="guide-label",yse="guide-title",TGt="group-title",CGt="group-subtitle",Kve="symbol",E6="gradient",XY="discrete",QY="size",AGt="shape",IGt="fill",kGt="stroke",RGt="strokeWidth",DGt="strokeDash",NGt="opacity",vse=[QY,AGt,IGt,kGt,RGt,DGt,NGt],ZN={name:1,style:1,interactive:1},zr={value:0},rd={value:1},AB="group",a8e="rect",bse="rule",PGt="symbol",cw="text";function lD(e){return e.type=AB,e.interactive=e.interactive||!1,e}function Tc(e,t){const n=(r,i)=>eh(e[r],eh(t[r],i));return n.isVertical=r=>bGt===eh(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>eh(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>eh(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>eh(e.columns,eh(t.columns,+n.isVertical(!0))),n}function u8e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function OGt(e,t,n){const r=t.config.style[n];return r&&r[e]}function IB(e,t,n){return`item.anchor === '${xGt}' ? ${e} : item.anchor === '${wGt}' ? ${t} : ${n}`}const xse=IB(Et(fC),Et(dC),Et(o8e));function $Gt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function l8e(e,t){return t?e?Ot(e)?Object.assign({},e,{offset:l8e(e.offset,t)}):{value:e,offset:t}:t:e}function vf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=cC(e.encode,t,ZN)):e.interactive=!1,e}function MGt(e,t,n,r){const i=Tc(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:zr,x:zr,y:zr,width:da(f),height:da(d)},update:Gn({},u,{opacity:rd,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:zr}};return qa(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vf({type:a8e,role:lWt,encode:h},r)}function LGt(e,t,n,r,i){const s=Tc(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:zr,fill:{scale:t,field:nd}};p[l]={signal:h+"datum."+zT,mult:u},p[c]=zr,p[f]={signal:h+"datum."+SGt,mult:u},p[d]=da(a);const m={enter:p,update:Gn({},p,{opacity:rd}),exit:{opacity:zr}};return qa(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),vf({type:a8e,role:aWt,key:nd,from:i,encode:m},r)}const FGt=`datum.${zT}<=0?"${fC}":datum.${zT}>=1?"${dC}":"${o8e}"`,BGt=`datum.${zT}<=0?"${lv}":datum.${zT}>=1?"${Xh}":"${_Gt}"`;function Xve(e,t,n,r){const i=Tc(e,t),s=i.isVertical(),o=da(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:zr},update:c={opacity:rd,text:{field:gse}},exit:{opacity:zr}};return qa(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:eh(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:BGt},f="y",d="x",h="1-"):(l.align=c.align={signal:FGt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+zT,mult:a},l[d]=c[d]=o,o.offset=eh(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+KY}:void 0,vf({type:cw,role:H5e,style:JN,key:nd,from:r,encode:p,overlap:u},n)}function jGt(e,t,n,r,i){const s=Tc(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${EGt} : datum.${QY}`,h=l?da(l):{field:QY},p=`datum.${KY}`,m=`max(1, ${i})`;let g,y,v,x,w;h.mult=.5,g={enter:y={opacity:zr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:rd,x:y.x,y:y.y},exit:{opacity:zr}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),qa(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),vse.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:nd})});const C=vf({type:PGt,role:cWt,key:nd,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=da(c);I.offset=s("labelOffset"),g={enter:y={opacity:zr,x:{signal:d,offset:I},y:h},update:v={opacity:rd,text:{field:gse},x:y.x,y:y.y},exit:{opacity:zr}},qa(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const N=vf({type:cw,role:H5e,style:JN,key:nd,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:zr,height:l?da(l):zr,opacity:zr},exit:{opacity:zr},update:v={opacity:rd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${x}`,v.column.signal=`floor(${p} / ${x})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:KY}},lD({role:hse,from:r,encode:cC(g,o,ZN),marks:[C,N],name:u,interactive:a,sort:w})}function UGt(e,t){const n=Tc(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const _se='item.orient === "left"',wse='item.orient === "right"',kB=`(${_se} || ${wse})`,zGt=`datum.vgrad && ${kB}`,VGt=IB('"top"','"bottom"','"middle"'),HGt=IB('"right"','"left"','"center"'),qGt=`datum.vgrad && ${wse} ? (${HGt}) : (${kB} && !(datum.vgrad && ${_se})) ? "left" : ${xse}`,WGt=`item._anchor || (${kB} ? "middle" : "start")`,GGt=`${zGt} ? (${_se} ? -90 : 90) : 0`,YGt=`${kB} ? (datum.vgrad ? (${wse} ? "bottom" : "top") : ${VGt}) : "top"`;function KGt(e,t,n,r){const i=Tc(e,t),s={enter:{opacity:zr},update:{opacity:rd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:zr}};return qa(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:WGt},angle:{signal:GGt},align:{signal:qGt},baseline:{signal:YGt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vf({type:cw,role:fWt,style:yse,from:r,encode:s},n)}function XGt(e,t){let n;return Ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Qve(e.path)+")":e.sphere&&(n="geoShape("+Qve(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Qve(e){return Ot(e)&&e.signal?e.signal:Et(e)}function c8e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===AB?hse:t||fse}function QGt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||c8e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function JGt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Ese(e,t){const n=Y$e(e.type);n||Ye("Unrecognized transform type: "+Et(e.type));const r=SB(n.type.toLowerCase(),null,f8e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function f8e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=ZGt(o,t,n)}return r}function ZGt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return eYt(e,t,n);if(i===void 0){e.required&&Ye("Missing required "+Et(t.type)+" parameter: "+Et(e.name));return}else{if(r==="param")return tYt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vo(i)?i.map(s=>Jve(e,s,n)):Jve(e,i,n)}function Jve(e,t,n){const r=e.type;if(Vo(t))return ebe(r)?Ye("Expression references can not be signals."):AV(r)?n.fieldRef(t):tbe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||AV(r);return i&&nYt(t)?n.exprRef(t.expr,t.as):i&&rYt(t)?aD(t.field,t.as):ebe(r)?bm(t,n):iYt(r)?tn(n.getData(t).values):AV(r)?aD(t):tbe(r)?n.compareRef(t):t}}function eYt(e,t,n){return Pt(t.from)||Ye('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function tYt(e,t,n){const r=t[e.name];return e.array?(Xe(r)||Ye("Expected an array of sub-parameters. Instead: "+Et(r)),r.map(i=>Zve(e,i,n))):Zve(e,r,n)}function Zve(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ye("Unsupported parameter: "+Et(t));const s=Gn(f8e(i,t,n),i.key);return tn(n.add(JWt(s)))}const nYt=e=>e&&e.expr,rYt=e=>e&&e.field,iYt=e=>e==="data",ebe=e=>e==="expr",AV=e=>e==="field",tbe=e=>e==="compare";function sYt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ye("Only group marks can be faceted."),r.field!=null?o=a=S6(r,n):(e.data?a=tn(n.getData(e.data).aggregate):(s=Ese(Gn({type:"aggregate",groupby:Nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=S6(r,n),o=a=tn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=tn(n.add(Kh(null,[{}]))),o||(o=S6(e,n)),{key:i,pulse:o,parent:a}}function S6(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:tn(t.getData(e.data).output)}function p_(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}p_.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=tn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new p_(e,s,i,r,o)};function d8e(e){return Pt(e)?e:null}function nbe(e,t,n){const r=TB(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function PA(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=IWt(s);let l=d8e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:WY,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:tn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(SB(r,void 0,d)),o&&(t.index[i]=f),c=tn(f),l!=null&&(a[l]=c)}return c}p_.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=d8e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&nbe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:tn(r.output)},n&&n.field&&nbe(e,u,n),a=e.add(X5e(u)),o=e.add(Kh({pulse:tn(a)})),o={agg:a,ref:tn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return tn(this.values)},extentRef(e,t){return PA(e,this,"extent","extent",t,!1)},domainRef(e,t){return PA(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return PA(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return PA(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return PA(e,this,"indata","tupleindex",t,!0,!0)}};function oYt(e,t,n){const r=e.from.facet,i=r.name,s=S6(r,t);let o;r.name||Ye("Facet must have a name: "+Et(r)),r.data||Ye("Facet must reference a data set: "+Et(r)),r.field?o=t.add(Z5e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(VWt({key:t.keyRef(r.groupby),group:tn(t.proxy(n.parent)),pulse:s})):Ye("Facet must specify groupby or field: "+Et(r));const a=t.fork(),u=a.add(Kh()),l=a.add(lw({pulse:tn(u)}));a.addData(i,new p_(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function aYt(e,t,n){const r=t.add(Z5e({pulse:n.pulse})),i=t.fork();i.add(lw()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function h8e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(LL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=bm(l,t);u.update=c.$expr,u.params=c.$params}function RB(e,t){const n=c8e(e),r=e.type===AB,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===hse||n===dse,a,u,l,c,f,d,h;const p=n===fse||o||i,m=sYt(e.from,r,t);u=t.add(UWt({key:m.key||(e.key?aD(e.key):void 0),pulse:m.pulse,clean:!r}));const g=tn(u);u=l=t.add(Kh({pulse:g})),u=t.add(YWt({markdef:QGt(e),interactive:JGt(e.interactive,t),clip:XGt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:tn(u)}));const y=tn(u);u=c=t.add(J5e(Y5e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const C=Ese(T,t),I=C.metadata;(I.generates||I.changes)&&Ye("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),C.params.pulse=tn(u),t.add(u=C)}),e.sort&&(u=t.add(rGt({sort:t.compareRef(e.sort),pulse:tn(u)})));const v=tn(u);(i||o)&&(o=t.add(t8e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=tn(o));const x=t.add(Q5e({mark:y,pulse:d||v}));h=tn(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?oYt(e,t,m):p?aYt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=uYt(s,h,t));const w=t.add(e8e({pulse:h})),E=t.add(lw({pulse:tn(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new p_(t,l,w,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Ye("Marks only support modify triggers."),h8e(T,t,f)}))}function uYt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vo(s)?n.signalRef(s.signal):s,method:Vo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return tn(n.add(QWt(o)))}function lYt(e,t){const n=t.config.legend,r=e.encode||{},i=Tc(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;vse.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||Ye("Missing valid scale for legend.");const p=cYt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=tn(t.add(Kh(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=tn(t.add(WWt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===E6?(h=[MGt(e,c,n,r.gradient),Xve(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Lx(i.gradientLength())})/100))`)):p===XY?h=[LGt(e,c,n,r.gradient,v),Xve(e,n,r.labels,v)]:(f=UGt(e,n),h=[jGt(e,n,r,v,Lx(f.columns))],d.size=hYt(e,t,h[0].marks)),h=[lD({role:uWt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(KGt(e,n,r.title,g)),RB(lD({role:oWt,from:g,encode:cC(dYt(i,e,n),s,ZN),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function cYt(e,t){let n=e.type||Kve;return!e.type&&fYt(e)===1&&(e.fill||e.stroke)&&(n=Ore(t)?E6:dY(t)?XY:Kve),n!==E6?n:dY(t)?XY:E6}function fYt(e){return vse.reduce((t,n)=>t+(e[n]?1:0),0)}function dYt(e,t,n){const r={enter:{},update:{}};return qa(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function hYt(e,t,n){const r=Lx(rbe("size",e,n)),i=Lx(rbe("strokeWidth",e,n)),s=Lx(pYt(n[1].encode,t,JN));return bm(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function rbe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:u8e(e,n[0].encode)}function pYt(e,t,n){return u8e("fontSize",e)||OGt("fontSize",t,n)}const mYt=`item.orient==="${fC}"?-90:item.orient==="${dC}"?90:0`;function gYt(e,t){e=Pt(e)?{text:e}:e;const n=Tc(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=tn(t.add(Kh(null,[l])));return u.push(bYt(e,n,yYt(e),c)),e.subtitle&&u.push(xYt(e,n,r.subtitle,c)),RB(lD({role:dWt,from:c,encode:vYt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function yYt(e){const t=e.encode;return t&&t.title||Gn({name:e.name,interactive:e.interactive,style:e.style},t)}function vYt(e,t){const n={enter:{},update:{}};return qa(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:xse},angle:{signal:mYt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),cC(n,t,ZN)}function bYt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return qa(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vf({type:cw,role:hWt,style:TGt,from:r,encode:o},n)}function xYt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return qa(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vf({type:cw,role:pWt,style:CGt,from:r,encode:o},n)}function _Yt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Ese(r,t))}),e.on&&e.on.forEach(r=>{h8e(r,t,e.name)}),t.addDataPipeline(e.name,wYt(e,t,n))}function wYt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vo(e.values)||_6(e.format)?(r.push(ibe(t,e)),r.push(i=_b())):r.push(i=_b({$ingest:e.values,$format:e.format})):e.url?_6(e.url)||_6(e.format)?(r.push(ibe(t,e)),r.push(i=_b())):r.push(i=_b({$request:e.url,$format:e.format})):e.source&&(i=a=Nt(e.source).map(d=>tn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=_b()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=tGt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,_b())),i||r.push(_b()),r.push(lw({})),r}function _b(e){const t=Kh({},e);return t.metadata={source:!0},t}function ibe(e,t){return GWt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const p8e=e=>e===lv||e===Xh,DB=(e,t,n)=>Vo(e)?CYt(e.signal,t,n):e===fC||e===Xh?t:n,ha=(e,t,n)=>Vo(e)?SYt(e.signal,t,n):p8e(e)?t:n,Ch=(e,t,n)=>Vo(e)?TYt(e.signal,t,n):p8e(e)?n:t,m8e=(e,t,n)=>Vo(e)?AYt(e.signal,t,n):e===Xh?{value:t}:{value:n},EYt=(e,t,n)=>Vo(e)?IYt(e.signal,t,n):e===dC?{value:t}:{value:n},SYt=(e,t,n)=>g8e(`${e} === '${Xh}' || ${e} === '${lv}'`,t,n),TYt=(e,t,n)=>g8e(`${e} !== '${Xh}' && ${e} !== '${lv}'`,t,n),CYt=(e,t,n)=>Sse(`${e} === '${fC}' || ${e} === '${Xh}'`,t,n),AYt=(e,t,n)=>Sse(`${e} === '${Xh}'`,t,n),IYt=(e,t,n)=>Sse(`${e} === '${dC}'`,t,n),g8e=(e,t,n)=>(t=t!=null?da(t):t,n=n!=null?da(n):n,sbe(t)&&sbe(n)?(t=t?t.signal||Et(t.value):null,n=n?n.signal||Et(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Gn({test:e},t)].concat(n||[])),sbe=e=>e==null||Object.keys(e).length===1,Sse=(e,t,n)=>({signal:`${e} ? (${sS(t)}) : (${sS(n)})`}),kYt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${fC}' ? (${sS(r)}) : `:"")+(n!=null?`${e} === '${lv}' ? (${sS(n)}) : `:"")+(i!=null?`${e} === '${dC}' ? (${sS(i)}) : `:"")+(t!=null?`${e} === '${Xh}' ? (${sS(t)}) : `:"")+"(null)"}),sS=e=>Vo(e)?e.signal:e==null?null:Et(e),RYt=(e,t)=>t===0?0:Vo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},PS=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function fE(e,t,n,r){let i;if(t&&sn(t,e))return t[e];if(sn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[yse][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[JN][i]}return null}function obe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function DYt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vo(o)){const f=obe([n.axisX,n.axisY]),d=obe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ha(o,fE(l,n.axisX,i,r),fE(l,n.axisY,i,r));u={};for(l of d)u[l]=kYt(o.signal,fE(l,n.axisTop,i,r),fE(l,n.axisBottom,i,r),fE(l,n.axisLeft,i,r),fE(l,n.axisRight,i,r))}else a=o===Xh||o===lv?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Gn({},i,a,u,s):i}function NYt(e,t,n,r){const i=Tc(e,t),s=e.orient;let o,a;const u={enter:o={opacity:zr},update:a={opacity:rd},exit:{opacity:zr}};qa(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=abe(e,0),c=abe(e,1);return o.x=a.x=ha(s,l,zr),o.x2=a.x2=ha(s,c),o.y=a.y=Ch(s,l,zr),o.y2=a.y2=Ch(s,c),vf({type:bse,role:tWt,from:r,encode:u},n)}function abe(e,t){return{scale:e.scale,range:t}}function PYt(e,t,n,r,i){const s=Tc(e,t),o=e.orient,a=e.gridScale,u=DB(o,1,-1),l=OYt(e.offset,u);let c,f,d;const h={enter:c={opacity:zr},update:d={opacity:rd},exit:f={opacity:zr}};qa(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:nd,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ha(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Gn(m,{mult:u,offset:l});return c.x=d.x=ha(o,p,g),c.y=d.y=Ch(o,p,g),c.x2=d.x2=Ch(o,y),c.y2=d.y2=ha(o,y),f.x=ha(o,p),f.y=Ch(o,p),vf({type:bse,role:nWt,key:nd,from:r,encode:h},n)}function OYt(e,t){if(t!==1)if(!Ot(e))e=Vo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Gn({},e);for(;n.mult!=null;)if(Ot(n.mult))n=n.mult=Gn({},n.mult);else return n.mult=Vo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function $Yt(e,t,n,r,i,s){const o=Tc(e,t),a=e.orient,u=DB(a,-1,1);let l,c,f;const d={enter:l={opacity:zr},update:f={opacity:rd},exit:c={opacity:zr}};qa(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=da(i);h.mult=u;const p={scale:e.scale,field:nd,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ha(a,zr,p),f.y2=l.y2=ha(a,h),c.x=ha(a,p),f.x=l.x=Ch(a,zr,p),f.x2=l.x2=Ch(a,h),c.y=Ch(a,p),vf({type:bse,role:iWt,key:nd,from:r,encode:d},n)}function IV(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function MYt(e,t,n,r,i,s){const o=Tc(e,t),a=e.orient,u=e.scale,l=DB(a,-1,1),c=Lx(o("labelFlush")),f=Lx(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=da(i);g.mult=l,g.offset=da(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:nd,band:.5,offset:l8e(s.offset,o("labelOffset"))},v=ha(a,p?IV(u,c,'"left"','"right"','"center"'):{value:"center"},EYt(a,"left","right")),x=ha(a,m8e(a,"bottom","top"),p?IV(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=IV(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:zr,x:ha(a,y,g),y:Ch(a,y,g)},T={enter:E,update:m={opacity:rd,text:{field:gse},x:E.x,y:E.y,align:v,baseline:x},exit:{opacity:zr,x:E.x,y:E.y}};qa(T,{dx:!d&&p?ha(a,w):null,dy:!h&&p?Ch(a,w):null}),qa(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const C=o("labelBound");let I=o("labelOverlap");return I=I||C?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:C?{scale:u,orient:a,tolerance:C}:null}:void 0,m.align!==v&&(m.align=PS(m.align,v)),m.baseline!==x&&(m.baseline=PS(m.baseline,x)),vf({type:cw,role:rWt,style:JN,key:nd,from:r,encode:T,overlap:I},n)}function LYt(e,t,n,r){const i=Tc(e,t),s=e.orient,o=DB(s,-1,1);let a,u;const l={enter:a={opacity:zr,anchor:da(i("titleAnchor",null)),align:{signal:xse}},update:u=Gn({},a,{opacity:rd,text:da(e.title)}),exit:{opacity:zr}},c={signal:`lerp(range("${e.scale}"), ${IB(0,1,.5)})`};return u.x=ha(s,c),u.y=Ch(s,c),a.angle=ha(s,zr,RYt(o,90)),a.baseline=ha(s,m8e(s,lv,Xh),{value:lv}),u.angle=a.angle,u.baseline=a.baseline,qa(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),FYt(i,s,l,n),l.update.align=PS(l.update.align,a.align),l.update.angle=PS(l.update.angle,a.angle),l.update.baseline=PS(l.update.baseline,a.baseline),vf({type:cw,role:sWt,style:yse,from:r,encode:l},n)}function FYt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=PS(da(a),n.update[u]),!1):!kE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?da(o):ha(t,da(o),da(s))}function BYt(e,t){const n=DYt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Tc(e,n),l=$Gt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=tn(t.add(Kh({},[c]))),d=tn(t.add(jWt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(PYt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push($Yt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(MYt(e,n,r.labels,d,p,l))),c.domain&&h.push(NYt(e,n,r.domain,f)),c.title&&h.push(LYt(e,n,r.title,f)),RB(lD({role:eWt,from:f,encode:cC(jYt(u,e),i,ZN),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function jYt(e,t){const n={enter:{},update:{}};return qa(n,{orient:e("orient"),offset:e("offset")||0,position:eh(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function y8e(e,t,n){const r=Nt(e.signals),i=Nt(e.scales);return n||r.forEach(s=>K5e(s,t)),Nt(e.projections).forEach(s=>vGt(s,t)),i.forEach(s=>oGt(s,t)),Nt(e.data).forEach(s=>_Yt(s,t)),i.forEach(s=>aGt(s,t)),(n||r).forEach(s=>BWt(s,t)),Nt(e.axes).forEach(s=>BYt(s,t)),Nt(e.marks).forEach(s=>RB(s,t)),Nt(e.legends).forEach(s=>lYt(s,t)),e.title&&gYt(e.title,t),t.parseLambdas(),t}const UYt=e=>cC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function zYt(e,t){const n=t.config,r=tn(t.root=t.add(LL())),i=VYt(e,n);i.forEach(l=>K5e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Kh()),o=t.add(J5e(Y5e(UYt(e.encode),AB,dse,e.style,t,{pulse:tn(s)}))),a=t.add(t8e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:tn(o)}));t.operators.pop(),t.pushState(tn(o),tn(a),null),y8e(e,t,i),t.operators.push(a);let u=t.add(Q5e({mark:r,pulse:tn(a)}));return u=t.add(e8e({pulse:tn(u)})),u=t.add(lw({pulse:tn(u)})),t.addData("root",new p_(t,s,s,u)),t}function OA(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function VYt(e,t){const n=o=>eh(e[o],t[o]),r=[OA("background",n("background")),OA("autosize",Qqt(n("autosize"))),OA("padding",Zqt(n("padding"))),OA("width",n("width")||0),OA("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Nt(e.signals).forEach(o=>{sn(i,o.name)?o=Gn(i[o.name],o):r.push(o),s[o.name]=o}),Nt(t.signals).forEach(o=>{!sn(s,o.name)&&!sn(i,o.name)&&r.push(o)}),r}function v8e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function ube(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}v8e.prototype=ube.prototype={parse(e){return y8e(e,this)},fork(){return new ube(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof qY?tn(e):e;return this.add(eGt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(tn(this.add(lw({pulse:e})))),this._parent.push(t),this._lookup.push(n?tn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Lr(this._parent)},encode(){return Lr(this._encode)},lookup(){return Lr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Pt(e))return aD(e,t);e.signal||Ye("Unsupported field reference: "+Et(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=tn(this.add(HWt(i)))}return r},compareRef(e){let t=!1;const n=s=>Vo(s)?(t=!0,this.signalRef(s.signal)):kWt(s)?(t=!0,this.exprRef(s.expr)):s,r=Nt(e.field).map(n),i=Nt(e.order).map(n);return t?tn(this.add(Yve({fields:r,orders:i}))):Wve(r,i)},keyRef(e,t){let n=!1;const r=s=>Vo(s)?(n=!0,tn(i[s.signal])):s,i=this.signals;return e=Nt(e).map(r),n?tn(this.add(qWt({fields:e,flat:t}))):TWt(e,t)},sortRef(e){if(!e)return e;const t=TB(e.op,e.field),n=e.order||CWt;return n.signal?tn(this.add(Yve({fields:t,orders:this.signalRef(n.signal)}))):Wve(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return sn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ye("Duplicate signal name: "+Et(e));const n=t instanceof qY?t:this.add(LL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ye("Unrecognized signal name: "+Et(e)),this.signals[e]},signalRef(e){return this.signals[e]?tn(this.signals[e]):(sn(this.lambdas,e)||(this.lambdas[e]=this.add(LL(null))),tn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=bm(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ot(e)?e:this.signalRef(e.signal||Tse(e))},exprRef(e,t){const n={expr:bm(e,this)};return t&&(n.expr.$name=t),tn(this.add(zWt(n)))},addBinding(e,t){this.bindings||Ye("Nested signals do not support binding: "+Et(e)),this.bindings.push(Gn({signal:e},t))},addScaleProj(e,t){sn(this.scales,e)&&Ye("Duplicate scale or projection name: "+Et(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,nGt(t))},addProjection(e,t){this.addScaleProj(e,ZWt(t))},getScale(e){return this.scales[e]||Ye("Unrecognized scale name: "+Et(e)),this.scales[e]},scaleRef(e){return tn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return sn(this.data,e)&&Ye("Duplicate data set name: "+Et(e)),this.data[e]=t},getData(e){return this.data[e]||Ye("Undefined data set name: "+Et(e)),this.data[e]},addDataPipeline(e,t){return sn(this.data,e)&&Ye("Duplicate data set name: "+Et(e)),this.addData(e,p_.fromEntries(this,t))}};function Tse(e){return(Xe(e)?HYt:qYt)(e)}function HYt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ot(i)?i.signal||Tse(i):Et(i))}return n+"]"}function qYt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Et(r)+":"+(Ot(i)?i.signal||Tse(i):Et(i));return t+"}"}function WYt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function GYt(e,t,n){return Ot(e)||Ye("Input Vega specification must be an object."),t=nC(WYt(),t,e.config),zYt(e,new v8e(t,n)).toRuntime()}var YYt="5.29.0";Gn(OT,G5t,$jt,h7t,H7t,Q7t,SUt,rUt,CUt,RUt,jUt,GUt);const KYt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:So,CanvasHandler:GN,CanvasRenderer:TL,DATE:vc,DAY:xu,DAYOFYEAR:vm,Dataflow:NS,Debug:z6e,Error:bne,EventStream:G8,Gradient:sLe,GroupItem:oB,HOURS:mf,Handler:sie,HybridHandler:XLe,HybridRenderer:EY,Info:U6e,Item:sB,MILLISECONDS:Fh,MINUTES:gf,MONTH:Cu,Marks:yf,MultiPulse:Bne,None:j6e,Operator:Wi,Parameters:W8,Pulse:T1,QUARTER:yc,RenderType:i1,Renderer:WN,ResourceLoader:dLe,SECONDS:fd,SVGHandler:LLe,SVGRenderer:fie,SVGStringRenderer:KLe,Scenegraph:kLe,TIME_UNITS:Dne,Transform:Ve,View:M5e,WEEK:Uo,Warn:xne,YEAR:Ba,accessor:Sc,accessorFields:Tu,accessorName:Ys,array:Nt,ascending:j8,bandwidthNRD:Vne,bin:Q$e,bootstrapCI:J$e,boundClip:oFe,boundContext:zN,boundItem:vY,boundMark:TLe,boundStroke:Xg,changeset:ow,clampRange:Z6e,codegenExpression:u5e,compare:Tne,constant:Pu,cumulativeLogNormal:Kne,cumulativeNormal:K8,cumulativeUniform:Zne,dayofyear:f$e,debounce:Cne,defaultLocale:One,definition:Y$e,densityLogNormal:Yne,densityNormal:Hne,densityUniform:Jne,domChild:Bo,domClear:Gf,domCreate:n1,domFind:iie,dotbin:Z$e,error:Ye,expressionFunction:po,extend:Gn,extent:ym,extentIndex:e$e,falsy:Cy,fastmap:iC,field:ld,flush:t$e,font:fB,fontFamily:qN,fontSize:Lm,format:s6,formatLocale:dL,formats:Lne,hasOwnProperty:sn,id:RN,identity:Nu,inferType:L$e,inferTypes:F$e,ingest:mi,inherits:Ct,inrange:nS,interpolate:$re,interpolateColors:rB,interpolateRange:qMe,intersect:nFe,intersectBoxLine:rS,intersectPath:Vre,intersectPoint:Hre,intersectRule:pLe,isArray:Xe,isBoolean:qv,isDate:S1,isFunction:Yn,isIterable:n$e,isNumber:Xr,isObject:Ot,isRegExp:r$e,isString:Pt,isTuple:H8,key:Ane,lerp:i$e,lineHeight:ov,loader:z8,locale:$$e,logger:_ne,lruCache:s$e,markup:cie,merge:o$e,mergeConfig:nC,multiLineOffset:tie,one:tC,pad:a$e,panLinear:G6e,panLog:Y6e,panPow:K6e,panSymlog:X6e,parse:GYt,parseExpression:Jie,parseSelector:Gv,path:Y5,pathCurves:jre,pathEqual:aFe,pathParse:FT,pathRectangle:uLe,pathRender:ZR,pathSymbols:aLe,pathTrail:lLe,peek:Lr,point:hB,projection:Eie,quantileLogNormal:Xne,quantileNormal:X8,quantileUniform:ere,quantiles:Une,quantizeInterpolator:WMe,quarter:Q6e,quartiles:zne,get random(){return dd},randomInteger:QFt,randomKDE:Wne,randomLCG:XFt,randomLogNormal:tMe,randomMixture:nMe,randomNormal:qne,randomUniform:rMe,read:U$e,regressionConstant:tre,regressionExp:sMe,regressionLinear:nre,regressionLoess:uMe,regressionLog:iMe,regressionPoly:aMe,regressionPow:oMe,regressionQuad:rre,renderModule:pB,repeat:xI,resetDefaultLocale:GLt,resetSVGClipId:fLe,resetSVGDefIds:Z9t,responseType:j$e,runtimeContext:E5e,sampleCurve:J8,sampleLogNormal:Gne,sampleNormal:Y8,sampleUniform:Qne,scale:si,sceneEqual:die,sceneFromJSON:ALe,scenePickVisit:yL,sceneToJSON:CLe,sceneVisit:Bh,sceneZOrder:qre,scheme:Mre,serializeXML:qLe,setHybridRendererOptions:K9t,setRandom:YFt,span:DN,splitAccessPath:Mm,stringValue:Et,textMetrics:ef,timeBin:I$e,timeFloor:v$e,timeFormatLocale:XR,timeInterval:sC,timeOffset:_$e,timeSequence:S$e,timeUnitSpecifier:c$e,timeUnits:Nne,toBoolean:Ine,toDate:kne,toNumber:wu,toSet:Lh,toString:Rne,transform:K$e,transforms:OT,truncate:u$e,truthy:cd,tupleid:nn,typeParsers:lY,utcFloor:b$e,utcInterval:oC,utcOffset:w$e,utcSequence:T$e,utcdayofyear:p$e,utcquarter:J6e,utcweek:m$e,version:YYt,visitArray:$y,week:d$e,writeConfig:rC,zero:qy,zoomLinear:wne,zoomLog:Ene,zoomPow:fL,zoomSymlog:Sne},Symbol.toStringTag,{value:"Module"}));function XYt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var QYt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},JYt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},ZYt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const eKt=Array.prototype.slice,wb=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,eKt.call(t,1))},tKt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var nKt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:tKt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return wb("join",arguments)},indexof:function(){return wb("indexOf",arguments)},lastindexof:function(){return wb("lastIndexOf",arguments)},slice:function(){return wb("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return wb("substring",arguments,String)},split:function(){return wb("split",arguments,String)},replace:function(){return wb("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const rKt=["view","item","group","xy","x","y"],JY=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&JY.add(setImmediate);const iKt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:QYt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),JY.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||nKt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>JYt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>ZYt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,JY.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function $A(e,t,n,r,i,s){const o=a=>iKt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,rKt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var sKt={operator(e,t){const n=t.ast,r=e.functions;return i=>$A(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>$A(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>$A(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return $A(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=$A(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&XYt(o,r,s),l}}};const oKt="vega-lite",aKt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',uKt="5.18.1",lKt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],cKt="https://vega.github.io/vega-lite/",fKt="Vega-Lite is a concise high-level language for interactive visualization.",dKt=["vega","chart","visualization"],hKt="build/vega-lite.js",pKt="build/vega-lite.min.js",mKt="build/vega-lite.min.js",gKt="build/src/index",yKt="build/src/index.d.ts",vKt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},bKt=["bin","build","src","vega-lite*","tsconfig.json"],xKt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},_Kt={type:"git",url:"https://github.com/vega/vega-lite.git"},wKt="BSD-3-Clause",EKt={url:"https://github.com/vega/vega-lite/issues"},SKt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},TKt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},CKt={vega:"^5.24.0"},AKt={node:">=18"},IKt="yarn@1.22.19",kKt={name:oKt,author:aKt,version:uKt,collaborators:lKt,homepage:cKt,description:fKt,keywords:dKt,main:hKt,unpkg:pKt,jsdelivr:mKt,module:gKt,types:yKt,bin:vKt,files:bKt,scripts:xKt,repository:_Kt,license:wKt,bugs:EKt,devDependencies:SKt,dependencies:TKt,peerDependencies:CKt,engines:AKt,packageManager:IKt};function Cse(e){return!!e.or}function Ase(e){return!!e.and}function Ise(e){return!!e.not}function T6(e,t){if(Ise(e))T6(e.not,t);else if(Ase(e))for(const n of e.and)T6(n,t);else if(Cse(e))for(const n of e.or)T6(n,t);else t(e)}function OS(e,t){return Ise(e)?{not:OS(e.not,t)}:Ase(e)?{and:e.and.map(n=>OS(n,t))}:Cse(e)?{or:e.or.map(n=>OS(n,t))}:t(e)}const An=structuredClone;function b8e(e){throw new Error(e)}function VT(e,t){const n={};for(const r of t)sn(e,r)&&(n[r]=e[r]);return n}function ac(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Bi(e)).join(",")})`};function wr(e){if(Xr(e))return e;const t=Pt(e)?e:Bi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function ZY(e){return e===!1||e===null}function Er(e,t){return e.includes(t)}function m_(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function kse(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function x8e(e,...t){for(const n of t)RKt(e,n??{});return e}function RKt(e,t){for(const n of ct(t))rC(e,n,t[n],!0)}function Bp(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function DKt(e,t){const n=ct(e),r=ct(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function _8e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Rse(e,t){for(const n of e)if(t.has(n))return!0;return!1}function eK(e){const t=new Set;for(const n of e){const i=Mm(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Dse(e,t){return e===void 0||t===void 0?!0:Rse(eK(e),eK(t))}function Fi(e){return ct(e).length===0}const ct=Object.keys,ja=Object.values,cv=Object.entries;function cD(e){return e===!0||e===!1}function Ss(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Ek(e,t){return Ise(e)?`!(${Ek(e.not,t)})`:Ase(e)?`(${e.and.map(n=>Ek(n,t)).join(") && (")})`:Cse(e)?`(${e.or.map(n=>Ek(n,t)).join(") || (")})`:t(e)}function FL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&FL(e[n],t)&&delete e[n],Fi(e)}function eP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Nse(e,t="datum"){const n=Mm(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Et).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function w8e(e,t="datum"){return`${t}[${Et(Mm(e).join("."))}]`}function NKt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function hd(e){return`${Mm(e).map(NKt).join("\\.")}`}function g_(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function hC(e){return`${Mm(e).join(".")}`}function HT(e){return e?Mm(e).length:0}function uo(...e){for(const t of e)if(t!==void 0)return t}let E8e=42;function S8e(e){const t=++E8e;return e?String(e)+t:t}function PKt(){E8e=42}function T8e(e){return C8e(e)?e:`__${e}`}function C8e(e){return e.startsWith("__")}function fD(e){if(e!==void 0)return(e%360+360)%360}function NB(e){return Xr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const lbe=Object.getPrototypeOf(structuredClone({}));function Kc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Kc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Kc(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==lbe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==lbe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Kc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Bi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const eg="row",tg="column",PB="facet",Cs="x",xa="y",Qh="x2",jm="y2",Yv="xOffset",pC="yOffset",Jh="radius",Jg="radius2",Cd="theta",Zg="theta2",Zh="latitude",ep="longitude",tp="latitude2",pd="longitude2",bc="color",Um="fill",zm="stroke",xc="shape",ey="size",fw="angle",ty="opacity",Kv="fillOpacity",Xv="strokeOpacity",Qv="strokeWidth",Jv="strokeDash",tP="text",qT="order",nP="detail",OB="key",y_="tooltip",$B="href",MB="url",LB="description",OKt={x:1,y:1,x2:1,y2:1},A8e={theta:1,theta2:1,radius:1,radius2:1};function I8e(e){return e in A8e}const Pse={longitude:1,longitude2:1,latitude:1,latitude2:1};function k8e(e){switch(e){case Zh:return"y";case tp:return"y2";case ep:return"x";case pd:return"x2"}}function R8e(e){return e in Pse}const $Kt=ct(Pse),Ose={...OKt,...A8e,...Pse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function $S(e){return e===bc||e===Um||e===zm}const D8e={row:1,column:1,facet:1},ed=ct(D8e),$se={...Ose,...D8e},MKt=ct($se),{order:Mbn,detail:Lbn,tooltip:Fbn,...LKt}=$se,{row:Bbn,column:jbn,facet:Ubn,...FKt}=LKt;function BKt(e){return!!FKt[e]}function N8e(e){return!!$se[e]}const jKt=[Qh,jm,tp,pd,Zg,Jg];function P8e(e){return dw(e)!==e}function dw(e){switch(e){case Qh:return Cs;case jm:return xa;case tp:return Zh;case pd:return ep;case Zg:return Cd;case Jg:return Jh}return e}function fv(e){if(I8e(e))switch(e){case Cd:return"startAngle";case Zg:return"endAngle";case Jh:return"outerRadius";case Jg:return"innerRadius"}return e}function Vm(e){switch(e){case Cs:return Qh;case xa:return jm;case Zh:return tp;case ep:return pd;case Cd:return Zg;case Jh:return Jg}}function _c(e){switch(e){case Cs:case Qh:return"width";case xa:case jm:return"height"}}function O8e(e){switch(e){case Cs:return"xOffset";case xa:return"yOffset";case Qh:return"x2Offset";case jm:return"y2Offset";case Cd:return"thetaOffset";case Jh:return"radiusOffset";case Zg:return"theta2Offset";case Jg:return"radius2Offset"}}function Mse(e){switch(e){case Cs:return"xOffset";case xa:return"yOffset"}}function UKt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const zKt=ct(Ose),{x:zbn,y:Vbn,x2:Hbn,y2:qbn,xOffset:Wbn,yOffset:Gbn,latitude:Ybn,longitude:Kbn,latitude2:Xbn,longitude2:Qbn,theta:Jbn,theta2:Zbn,radius:exn,radius2:txn,...Lse}=Ose,VKt=ct(Lse),Fse={x:1,y:1},Hm=ct(Fse);function lo(e){return e in Fse}const Bse={theta:1,radius:1},HKt=ct(Bse);function FB(e){return e==="width"?Cs:xa}const $8e={xOffset:1,yOffset:1};function rP(e){return e in $8e}const{text:nxn,tooltip:rxn,href:ixn,url:sxn,description:oxn,detail:axn,key:uxn,order:lxn,...M8e}=Lse,qKt=ct(M8e);function WKt(e){return!!Lse[e]}function GKt(e){switch(e){case bc:case Um:case zm:case ey:case xc:case ty:case Qv:case Jv:return!0;case Kv:case Xv:case fw:return!1}}const L8e={...Fse,...Bse,...$8e,...M8e},BB=ct(L8e);function ny(e){return!!L8e[e]}function YKt(e,t){return XKt(e)[t]}const F8e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:cxn,...KKt}=F8e;function XKt(e){switch(e){case bc:case Um:case zm:case LB:case nP:case OB:case y_:case $B:case qT:case ty:case Kv:case Xv:case Qv:case PB:case eg:case tg:return F8e;case Cs:case xa:case Yv:case pC:case Zh:case ep:return KKt;case Qh:case jm:case tp:case pd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ey:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Jv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case xc:return{point:"always",geoshape:"always"};case tP:return{text:"always"};case fw:return{point:"always",square:"always",text:"always"};case MB:return{image:"always"};case Cd:return{text:"always",arc:"always"};case Jh:return{text:"always",arc:"always"};case Zg:case Jg:return{arc:"always"}}}function kV(e){switch(e){case Cs:case xa:case Cd:case Jh:case Yv:case pC:case ey:case fw:case Qv:case ty:case Kv:case Xv:case Qh:case jm:case Zg:case Jg:return;case PB:case eg:case tg:case xc:case Jv:case tP:case y_:case $B:case MB:case LB:return"discrete";case bc:case Um:case zm:return"flexible";case Zh:case ep:case tp:case pd:case nP:case OB:case qT:return}}const QKt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},JKt={count:1,min:1,max:1};function kg(e){return!!e&&!!e.argmin}function Zv(e){return!!e&&!!e.argmax}function jse(e){return Pt(e)&&!!QKt[e]}const ZKt=new Set(["count","valid","missing","distinct"]);function B8e(e){return Pt(e)&&ZKt.has(e)}function eXt(e){return Pt(e)&&Er(["min","max"],e)}const tXt=new Set(["count","sum","distinct","valid","missing"]),nXt=new Set(["mean","average","median","q1","q3","min","max"]);function j8e(e){return qv(e)&&(e=QB(e,void 0)),"bin"+ct(e).map(t=>jB(e[t])?Ss(`_${t}_${cv(e[t])}`):Ss(`_${t}_${e[t]}`)).join("")}function Zi(e){return e===!0||hw(e)&&!e.binned}function Ra(e){return e==="binned"||hw(e)&&e.binned===!0}function hw(e){return Ot(e)}function jB(e){return e==null?void 0:e.param}function cbe(e){switch(e){case eg:case tg:case ey:case bc:case Um:case zm:case Qv:case ty:case Kv:case Xv:case xc:return 6;case Jv:return 4;default:return 10}}function iP(e){return!!(e!=null&&e.expr)}function ql(e){const t=ct(e||{}),n={};for(const r of t)n[r]=zc(e[r]);return n}function U8e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=VT(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:x,nonMarkTitleProperties:y,subtitle:v}}function Fy(e){return Pt(e)||Xe(e)&&Pt(e[0])}function Xt(e){return!!(e!=null&&e.signal)}function eb(e){return!!e.step}function rXt(e){return Xe(e)?!1:"fields"in e&&!("data"in e)}function iXt(e){return Xe(e)?!1:"fields"in e&&"data"in e}function z0(e){return Xe(e)?!1:"field"in e&&"data"in e}const sXt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},oXt=ct(sXt),aXt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},tK=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function z8e(e){const t=Xe(e.condition)?e.condition.map(fbe):fbe(e.condition);return{...zc(e),condition:t}}function zc(e){if(iP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function fbe(e){if(iP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function as(e){if(iP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Xt(e)?e:e!==void 0?{value:e}:void 0}function uXt(e){return Xt(e)?e.signal:Et(e)}function dbe(e){return Xt(e)?e.signal:Et(e.value)}function yh(e){return Xt(e)?e.signal:e==null?null:Et(e)}function lXt(e,t,n){for(const r of n){const i=Rg(r,t.markDef,t.config);i!==void 0&&(e[r]=as(i))}return e}function V8e(e){return[].concat(e.type,e.style??[])}function pi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Rg(e,t,n,r)}function Rg(e,t,n,{vgChannel:r}={}){return uo(r?BL(e,t,n.style):void 0,BL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function BL(e,t,n){return H8e(e,V8e(t),n)}function H8e(e,t,n){t=Nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function q8e(e,t){return Nt(e).reduce((n,r)=>(n.field.push(Tt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function W8e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Kc(i,r))return;n.push(r)}),n}function G8e(e,t){return Kc(e,t)||!t?e:e?[...Nt(e),...Nt(t)].join(", "):t}function Y8e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Fy(n)||Xt(n))&&(Fy(r)||Xt(r)))return{explicit:e.explicit,value:G8e(n,r)};if(Fy(n)||Xt(n))return{explicit:e.explicit,value:n};if(Fy(r)||Xt(r))return{explicit:e.explicit,value:r};if(!Fy(n)&&!Xt(n)&&!Fy(r)&&!Xt(r))return{explicit:e.explicit,value:W8e(n,r)};throw new Error("It should never reach here")}function Use(e){return`Invalid specification ${Bi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const cXt='Autosize "fit" only works for single views and layered views.';function hbe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function pbe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function mbe(e){return e?`Dropping "fit-${e}" because spec has discrete ${_c(e)}.`:'Dropping "fit" because spec has discrete size.'}function zse(e){return`Unknown field for ${e}. Cannot calculate view size.`}function gbe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function fXt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function dXt(e){return`The "nearest" transform is not supported for ${e} marks.`}function K8e(e){return`Selection not supported for ${e} yet.`}function hXt(e){return`Cannot find a selection named "${e}".`}const pXt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",mXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",gXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function yXt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function vXt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const bXt="The same selection must be used to override scale domains in a layered view.",xXt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function _Xt(e){return`Unknown repeated value "${e}".`}function ybe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const wXt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function EXt(e){return`Unrecognized parse "${e}".`}function vbe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const SXt="Attempt to add the same child twice.";function TXt(e){return`Ignoring an invalid transform: ${Bi(e)}.`}const CXt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function bbe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function AXt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Bi(t)} is overridden by a child projection ${Bi(n)}.`}const IXt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kXt(e){return`${e}Offset dropped because ${e} is continuous`}function RXt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Bi(n)}}.`}function X8e(e){return`Invalid field type "${e}".`}function DXt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function NXt(e){return`Invalid aggregation operator "${e}".`}function Q8e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function PXt(e){return`Position range does not support relative band size for ${e}.`}function nK(e,t){return`Dropping ${Bi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const OXt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function UB(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function $Xt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function MXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function LXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function FXt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function RV(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function BXt(e){return`The ${e} for range marks cannot be an expression`}function jXt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function UXt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function zXt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function VXt(e){return`Cannot use the relative band size with ${e} scale.`}function HXt(e){return`Using unaggregated domain with raw field has no effect (${Bi(e)}).`}function qXt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function WXt(e){return`Unaggregated domain is currently unsupported for log scale (${Bi(e)}).`}function GXt(e){return`Cannot apply size to non-oriented mark "${e}".`}function YXt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function KXt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function J8e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Z8e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function XXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bi(n)} and ${Bi(r)}). Using ${Bi(n)}.`}function QXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bi(n)} and ${Bi(r)}). Using the union of the two domains.`}function JXt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ZXt(e){return`Dropping sort property ${Bi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const xbe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",eQt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",tQt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",nQt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function rQt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function iQt(e){return`Stack is applied to a non-linear scale (${e}).`}function sQt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function jL(e,t){return`Invalid ${e}: ${Bi(t)}.`}function oQt(e){return`Dropping day from datetime ${Bi(e)} as day cannot be combined with other units.`}function aQt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function uQt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function lQt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function _be(e){return`1D error band does not support ${e}.`}function eBe(e){return`Channel ${e} is required for "binned" bin.`}function cQt(e){return`Channel ${e} should not be used with "binned" bin.`}function fQt(e){return`Domain for ${e} is required for threshold scale.`}const tBe=_ne(xne);let WT=tBe;function dQt(e){return WT=e,WT}function hQt(){return WT=tBe,WT}function pt(...e){WT.warn(...e)}function pQt(...e){WT.debug(...e)}function pw(e){if(e&&Ot(e)){for(const t of Hse)if(t in e)return!0}return!1}const nBe=["january","february","march","april","may","june","july","august","september","october","november","december"],mQt=nBe.map(e=>e.substr(0,3)),rBe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],gQt=rBe.map(e=>e.substr(0,3));function yQt(e){if(NB(e)&&(e=+e),Xr(e))return e>4&&pt(jL("quarter",e)),e-1;throw new Error(jL("quarter",e))}function vQt(e){if(NB(e)&&(e=+e),Xr(e))return e-1;{const t=e.toLowerCase(),n=nBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=mQt.indexOf(r);if(i!==-1)return i;throw new Error(jL("month",e))}}function bQt(e){if(NB(e)&&(e=+e),Xr(e))return e%7;{const t=e.toLowerCase(),n=rBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=gQt.indexOf(r);if(i!==-1)return i;throw new Error(jL("day",e))}}function Vse(e,t){const n=[];if(t&&e.day!==void 0&&ct(e).length>1&&(pt(oQt(e)),e=An(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?vQt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?yQt(e.quarter):e.quarter;n.push(Xr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?bQt(e.day):e.day;n.push(Xr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function v_(e){const n=Vse(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function xQt(e){const n=Vse(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function _Qt(e){const t=Vse(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const iBe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Hse=ct(iBe);function wQt(e){return!!iBe[e]}function mw(e){return Ot(e)?e.binned:sBe(e)}function sBe(e){return e&&e.startsWith("binned")}function qse(e){return e.startsWith("utc")}function EQt(e){return e.substring(3)}const SQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function zB(e){return Hse.filter(t=>aBe(e,t))}function oBe(e){const t=zB(e);return t[t.length-1]}function aBe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function TQt(e,t,{end:n}={end:!1}){const r=Nse(t),i=qse(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Hse)aBe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),xQt(a)}function uBe(e){if(!e)return;const t=zB(e);return`timeUnitSpecifier(${Bi(t)}, ${Bi(SQt)})`}function CQt(e,t,n){if(!e)return;const r=uBe(e);return`${n||qse(e)?"utc":"time"}Format(${t}, ${r})`}function ma(e){if(!e)return;let t;return Pt(e)?sBe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),qse(t.unit)&&(t.utc=!0,t.unit=EQt(t.unit)),t}function AQt(e){const{utc:t,...n}=ma(e);return n.unit?(t?"utc":"")+ct(n).map(r=>Ss(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ct(n).map(r=>Ss(`_${r}_${n[r]}`)).join("")}function lBe(e,t=n=>n){const n=ma(e),r=oBe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=cBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(v_(a))} - ${t(v_(i))}`}}const IQt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function kQt(e){return!!IQt[e]}function cBe(e,t=1){if(kQt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function RQt(e){return e==null?void 0:e.param}function Wse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Gse(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Yse(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Kse(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Xse(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Qse(e){if(e!=null&&e.field){if(Xe(e.range)&&e.range.length===2)return!0;if(Xt(e.range))return!0}return!1}function Jse(e){return!!(e!=null&&e.field)&&(Xe(e.oneOf)||Xe(e.in))}function DQt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function fBe(e){return Jse(e)||Wse(e)||Qse(e)||Gse(e)||Kse(e)||Yse(e)||Xse(e)}function fp(e,t){return JB(e,{timeUnit:t,wrapTime:!0})}function NQt(e,t){return e.map(n=>fp(n,t))}function dBe(e,t=!0){const{field:n}=e,r=ma(e.timeUnit),{unit:i,binned:s}=r||{},o=Tt(e,{expr:"datum"}),a=i?`time(${s?o:TQt(i,n)})`:o;if(Wse(e))return`${a}===${fp(e.equal,i)}`;if(Gse(e)){const u=e.lt;return`${a}<${fp(u,i)}`}else if(Kse(e)){const u=e.gt;return`${a}>${fp(u,i)}`}else if(Yse(e)){const u=e.lte;return`${a}<=${fp(u,i)}`}else if(Xse(e)){const u=e.gte;return`${a}>=${fp(u,i)}`}else{if(Jse(e))return`indexof([${NQt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(DQt(e))return Zse(a,e.valid);if(Qse(e)){const{range:u}=e,l=Xt(u)?{signal:`${u.signal}[0]`}:u[0],c=Xt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+fp(l,i)+", "+fp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${fp(l,i)}`),c!==null&&f.push(`${a} <= ${fp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Bi(e)}`)}function Zse(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function PQt(e){return fBe(e)&&e.timeUnit?{...e,timeUnit:ma(e.timeUnit)}:e}const sP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function OQt(e){return e==="quantitative"||e==="temporal"}function hBe(e){return e==="ordinal"||e==="nominal"}const b_=sP.quantitative,eoe=sP.ordinal,GT=sP.temporal,toe=sP.nominal,mC=sP.geojson;function $Qt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case b_:return"quantitative";case"t":case GT:return"temporal";case"o":case eoe:return"ordinal";case"n":case toe:return"nominal";case mC:return"geojson"}}const uc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},rK={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function MQt(e,t){const n=rK[e],r=rK[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const LQt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function wbe(e){return LQt[e]}const pBe=new Set(["linear","log","pow","sqrt","symlog"]),mBe=new Set([...pBe,"time","utc"]);function gBe(e){return pBe.has(e)}const yBe=new Set(["quantile","quantize","threshold"]),FQt=new Set([...mBe,...yBe,"sequential","identity"]),BQt=new Set(["ordinal","bin-ordinal","point","band"]);function ya(e){return BQt.has(e)}function bf(e){return FQt.has(e)}function vh(e){return mBe.has(e)}function YT(e){return yBe.has(e)}const jQt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function UQt(e){return!Pt(e)&&!!e.name}function vBe(e){return e==null?void 0:e.param}function zQt(e){return e==null?void 0:e.unionWith}function VQt(e){return Ot(e)&&"field"in e}const HQt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:fxn,domain:dxn,range:hxn,rangeMax:pxn,rangeMin:mxn,scheme:gxn,...qQt}=HQt,WQt=ct(qQt);function iK(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return vh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return vh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return vh(e);case"nice":return vh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return bf(e)&&!Er(["log","time","utc","threshold","quantile"],e)}}function bBe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return $S(e)?void 0:zXt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function GQt(e,t){return Er([eoe,toe],t)?e===void 0||ya(e):t===GT?Er([uc.TIME,uc.UTC,void 0],e):t===b_?gBe(e)||YT(e)||e===void 0:!0}function YQt(e,t,n=!1){if(!ny(e))return!1;switch(e){case Cs:case xa:case Yv:case pC:case Cd:case Jh:return vh(t)||t==="band"?!0:t==="point"?!n:!1;case ey:case Qv:case ty:case Kv:case Xv:case fw:return vh(t)||YT(t)||Er(["band","point","ordinal"],t);case bc:case Um:case zm:return t!=="band";case Jv:case xc:return t==="ordinal"||YT(t)}}function noe(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=ioe(e);return gt(n)&&!B8e(n.aggregate)&&i&&vh(i.get("type"))?KQt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function KQt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return pi("invalid",n,i)===null?[XQt(e,t),r]:r}function XQt(e,t){const n=roe(e,!0),i=dw(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function roe(e,t=!0){return Zse(Pt(e)?e:Tt(e,{expr:"datum"}),!t)}function QQt(e){const{datum:t}=e;return pw(t)?v_(t):`${Bi(t)}`}function Fx(e,t,n,r){const i={};if(t&&(i.scale=t),qm(e)){const{datum:s}=e;pw(s)?i.signal=v_(s):Xt(s)?i.signal=s.signal:iP(s)?i.signal=s.expr:i.value=s}else i.field=Tt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function UL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Xt(o)&&0<o&&o<1?"datum":void 0,u=Tt(t,{expr:a,suffix:i}),l=n!==void 0?Tt(n,{expr:a}):Tt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Xt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function JQt({scaleName:e,fieldDef:t}){const n=Tt(t,{expr:"datum"}),r=Tt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function ioe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Mn(t)){const f=o==null?void 0:o.get("type");if(vl(t)){c??(c=dv({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Zi(d)||c&&h&&p===GT)return a!=null&&a.impute?Fx(t,s,{binSuffix:"mid"},{offset:u}):c&&!ya(f)?UL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Fx(t,s,lP(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ra(d)){if(gt(n))return UL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});pt(eBe(e===Cs?Qh:jm))}}return Fx(t,s,ya(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(jh(t)){const f=t.value,d=u?{offset:u}:{};return{...Sk(e,f),...d}}}return Yn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Sk(e,t){return Er(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Er(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:as(t)}function x_(e){return e&&e!=="number"&&e!=="time"}function xBe(e,t,n){return`${e}(${t}${n?`, ${Bi(n)}`:""})`}const ZQt="  ";function soe({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(x_(n))return bh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=_Be(e,r,i),a=KT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return bh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return bh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&gt(e)&&e.timeUnit===void 0)return bh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(QT(e)){const c=tJt({field:o,timeUnit:gt(e)?(u=ma(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:yw(e)&&((l=e.scale)==null?void 0:l.type)===uc.UTC});return c?{signal:c}:void 0}if(t=sK({type:a,specifiedFormat:t,config:s,normalizeStack:i}),gt(e)&&Zi(e.bin)){const c=Tt(e,{expr:r,binSuffix:"end"});return{signal:oP(o,c,t,n,s)}}else return t||KT(e)==="quantitative"?{signal:`${SBe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function _Be(e,t,n){return gt(e)?n?`${Tt(e,{expr:t,suffix:"end"})}-${Tt(e,{expr:t,suffix:"start"})}`:Tt(e,{expr:t}):QQt(e)}function bh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=_Be(e,r,i)),o!=="datum.value"&&gt(e)&&Zi(e.bin)){const a=Tt(e,{expr:r,binSuffix:"end"});return{signal:oP(o,a,t,n,s)}}return{signal:xBe(n,o,t)}}function wBe(e,t,n,r,i,s){var o;if(!(Pt(r)&&x_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&KT(e)==="quantitative"&&(i.normalizedNumberFormatType&&XT(e)&&e.stack==="normalize"||i.numberFormatType))){if(XT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return sK({type:"quantitative",config:i,normalizeStack:!0});if(QT(e)){const a=gt(e)?(o=ma(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:eJt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return sK({type:t,specifiedFormat:n,config:i})}}function EBe(e,t,n){var r;if(e&&(Xt(e)||e==="number"||e==="time"))return e;if(QT(t)&&n!=="time"&&n!=="utc")return gt(t)&&((r=ma(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function sK({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Pt(t))return t;if(e===b_)return r?n.normalizedNumberFormat:n.numberFormat}function eJt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:uBe(t)}:r?void 0:n.timeFormat)}function SBe(e,t){return`format(${e}, "${t||""}")`}function Ebe(e,t,n,r){return x_(n)?xBe(n,e,t):SBe(e,(Pt(t)?t:void 0)??r.numberFormat)}function oP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return oP(e,t,i.numberFormat,i.numberFormatType,i);const s=Ebe(e,n,r,i),o=Ebe(t,n,r,i);return`${Zse(e,!1)} ? "null" : ${s} + "${ZQt}" + ${o}`}function tJt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):CQt(t,e,s)}const Sl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},TBe=Sl.arc,VB=Sl.area,HB=Sl.bar,nJt=Sl.image,qB=Sl.line,WB=Sl.point,rJt=Sl.rect,zL=Sl.rule,CBe=Sl.text,ooe=Sl.tick,iJt=Sl.trail,aoe=Sl.circle,uoe=Sl.square,ABe=Sl.geoshape;function gw(e){return["line","area","trail"].includes(e)}function dD(e){return["rect","bar","image","arc"].includes(e)}const sJt=new Set(ct(Sl));function xm(e){return e.type}const oJt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],aJt=["fill","fillOpacity"],uJt=[...oJt,...aJt],lJt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Sbe=ct(lJt),cJt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},fJt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},dJt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},IBe=ct(dJt);function __(e){return e&&e.band!=null}const hJt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},kBe=5,pJt={binSpacing:1,continuousBandSize:kBe,minBandSize:.25,timeUnitBandPosition:.5},mJt={binSpacing:0,continuousBandSize:kBe,minBandSize:.25,timeUnitBandPosition:.5},gJt={thickness:1};function yJt(e){return xm(e)?e.type:e}const GB="min",vJt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Tbe(e){return e in vJt}function RBe(e){return!!(e!=null&&e.encoding)}function em(e){return e&&(e.op==="count"||!!e.field)}function DBe(e){return e&&Xe(e)}function aP(e){return"row"in e||"column"in e}function loe(e){return!!e&&"header"in e}function YB(e){return"facet"in e}function bJt(e){return e.param}function xJt(e){return e&&!Pt(e)&&"repeat"in e}function Cbe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function coe(e){return"sort"in e}function dv({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Mn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(gt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Rg("timeUnitBandPosition",n,r);if(Zi(s))return .5}}function NBe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=_c(e),u=pi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(gt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Rg("timeUnitBandSize",r,i)};if(Zi(h)&&!ya(s))return{band:1}}if(dD(r.type))return s?ya(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function PBe(e,t,n,r){return Zi(e.bin)||e.timeUnit&&vl(e)&&e.type==="temporal"?dv({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function OBe(e){return e&&!!e.sort&&!e.field}function KB(e){return e&&"condition"in e}function XB(e){const t=e==null?void 0:e.condition;return!!t&&!Xe(t)&&gt(t)}function uP(e){const t=e==null?void 0:e.condition;return!!t&&!Xe(t)&&Mn(t)}function _Jt(e){const t=e==null?void 0:e.condition;return!!t&&(Xe(t)||jh(t))}function gt(e){return e&&(!!e.field||e.aggregate==="count")}function KT(e){return e==null?void 0:e.type}function qm(e){return e&&"datum"in e}function u1(e){return vl(e)&&!HL(e)||VL(e)}function Abe(e){return vl(e)&&e.type==="quantitative"&&!e.bin||VL(e)}function VL(e){return qm(e)&&Xr(e.datum)}function Mn(e){return gt(e)||qm(e)}function vl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function jh(e){return e&&"value"in e&&"value"in e}function yw(e){return e&&("scale"in e||"sort"in e)}function XT(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function $Be(e){return e&&"legend"in e}function MBe(e){return e&&("format"in e||"formatType"in e)}function wJt(e){return ac(e,["legend","axis","header","scale"])}function EJt(e){return"op"in e}function Tt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(TJt(e))n=T8e("count");else{let o;if(!t.nofn)if(EJt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Zi(a)?(o=j8e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Zv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):kg(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!mw(l)&&(o=AQt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?hC(n):t.expr?w8e(n,t.expr)+s:hd(n)+s}function HL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gt(e)&&!!e.bin;case"temporal":return!1}throw new Error(X8e(e.type))}function SJt(e){var t;return yw(e)&&YT((t=e.scale)==null?void 0:t.type)}function TJt(e){return e.aggregate==="count"}function CJt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Zi(r))return`${n} (binned)`;if(i&&!mw(i)){const a=(o=ma(i))==null?void 0:o.unit;if(a)return`${n} (${zB(a).join("-")})`}else if(s)return Zv(s)?`${n} for max ${s.argmax}`:kg(s)?`${n} for min ${s.argmin}`:`${eP(s)} of ${n}`;return n}function AJt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Zv(t))return`${i} for argmax(${t.argmax})`;if(kg(t))return`${i} for argmin(${t.argmin})`;const s=r&&!mw(r)?ma(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Zi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const LBe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return AJt(e);default:return CJt(e,t)}};let FBe=LBe;function BBe(e){FBe=e}function IJt(){BBe(LBe)}function MS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=foe(e))==null?void 0:a.title;if(!gt(e))return i??e.title;const s=e,o=r?doe(s,t):void 0;return n?uo(i,s.title,o):i??s.title??o}function foe(e){if(XT(e)&&e.axis)return e.axis;if($Be(e)&&e.legend)return e.legend;if(loe(e)&&e.header)return e.header}function doe(e,t){return FBe(e,t)}function qL(e){if(MBe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=foe(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function kJt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(coe(e)&&Xe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Zv(n)&&!kg(n))return"quantitative";if(yw(e)&&((s=e.scale)!=null&&s.type))switch(rK[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function _m(e){if(gt(e))return e;if(XB(e))return e.condition}function zo(e){if(Mn(e))return e;if(uP(e))return e.condition}function jBe(e,t,n,r={}){if(Pt(e)||Xr(e)||qv(e)){const i=Pt(e)?"string":Xr(e)?"number":"boolean";return pt(RXt(t,i,e)),{value:e}}return Mn(e)?WL(e,t,n,r):uP(e)?{...e,condition:WL(e.condition,t,n,r)}:e}function WL(e,t,n,r){if(MBe(e)){const{format:i,formatType:s,...o}=e;if(x_(s)&&!n.customFormatTypes)return pt(bbe(t)),WL(o,t,n,r)}else{const i=XT(e)?"axis":$Be(e)?"legend":loe(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(x_(o)&&!n.customFormatTypes)return pt(bbe(t)),WL({...e,[i]:a},t,n,r)}}return gt(e)?hoe(e,t,r):RJt(e)}function RJt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Xr(n)?"quantitative":Pt(n)?"nominal":pw(n)?"temporal":void 0,{...e,type:t}}function hoe(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!jse(r)&&!Zv(r)&&!kg(r)&&(pt(NXt(r)),delete a.aggregate),i&&(a.timeUnit=ma(i)),o&&(a.field=`${o}`),Zi(s)&&(a.bin=QB(s,t)),Ra(s)&&!lo(t)&&pt(cQt(t)),vl(a)){const{type:u}=a,l=$Qt(u);u!==l&&(a.type=l),u!=="quantitative"&&B8e(r)&&(pt(DXt(u,r)),a.type="quantitative")}else if(!P8e(t)){const u=kJt(a,t);a.type=u}if(vl(a)){const{compatible:u,warning:l}=DJt(a,t)||{};u===!1&&pt(l)}if(coe(a)&&Pt(a.sort)){const{sort:u}=a;if(Tbe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Tbe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(loe(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function QB(e,t){return qv(e)?{maxbins:cbe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:cbe(t)}:e}const dE={compatible:!0};function DJt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case eg:case tg:case PB:return HL(e)?dE:{compatible:!1,warning:MXt(t)};case Cs:case xa:case Yv:case pC:case bc:case Um:case zm:case tP:case nP:case OB:case y_:case $B:case MB:case fw:case Cd:case Jh:case LB:return dE;case ep:case pd:case Zh:case tp:return n!==b_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:dE;case ty:case Kv:case Xv:case Qv:case ey:case Zg:case Jg:case Qh:case jm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:dE;case xc:case Jv:return!HL(e)&&!SJt(e)?{compatible:!1,warning:LXt(t)}:dE;case qT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:dE}}function QT(e){const{formatType:t}=qL(e);return t==="time"||!t&&NJt(e)}function NJt(e){return e&&(e.type==="temporal"||gt(e)&&!!e.timeUnit)}function JB(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=ma(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return iP(e)?a=e.expr:Xt(e)?a=e.signal:pw(e)?(o=!0,a=v_(e)):(Pt(e)||Xr(e))&&o&&(a=`datetime(${Bi(e)})`,wQt(s)&&(Xr(e)&&e<1e4||Pt(e)&&isNaN(Date.parse(e)))&&(a=v_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Bi(e)}function UBe(e,t){const{type:n}=e;return t.map(r=>{const i=gt(e)&&!mw(e.timeUnit)?e.timeUnit:void 0,s=JB(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function lP(e,t){return Zi(e.bin)?ny(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Ibe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function cP(e){return e==null?void 0:e.condition}const zBe=["domain","grid","labels","ticks","title"],PJt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},VBe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},OJt={...VBe,style:1,labelExpr:1,encoding:1};function kbe(e){return!!OJt[e]}const $Jt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},HBe=ct($Jt);function ry(e){return"mark"in e}class ZB{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ry(t)?yJt(t.mark)===this.name:!1}}function Bx(e,t){const n=e&&e[t];return n?Xe(n)?m_(n,r=>!!r.field):gt(n)||XB(n):!1}function qBe(e,t){const n=e&&e[t];return n?Xe(n)?m_(n,r=>!!r.field):gt(n)||qm(n)||uP(n):!1}function WBe(e,t){if(lo(t)){const n=e[t];if((gt(n)||qm(n))&&(hBe(n.type)||gt(n)&&n.timeUnit)){const r=Mse(t);return qBe(e,r)}}return!1}function poe(e){return m_(MKt,t=>{if(Bx(e,t)){const n=e[t];if(Xe(n))return m_(n,r=>!!r.aggregate);{const r=_m(n);return r&&!!r.aggregate}}return!1})}function GBe(e,t){const n=[],r=[],i=[],s=[],o={};return moe(e,(a,u)=>{if(gt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=foe(a),m=p==null?void 0:p.title;let g=Tt(a,{forAs:!0});const y={...m?[]:{title:MS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Zv(c)?(v="argmax",g=Tt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):kg(c)?(v="argmin",g=Tt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const x={op:v,as:g};l&&(x.field=l),s.push(x)}}else if(n.push(g),vl(a)&&Zi(f)){if(r.push({bin:f,field:l,as:g}),n.push(Tt(a,{binSuffix:"end"})),lP(a,u)&&n.push(Tt(a,{binSuffix:"range"})),lo(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",P8e(u)||(y.type=b_)}else if(d&&!mw(d)){i.push({timeUnit:d,field:l,as:g});const v=vl(a)&&a.type!==GT&&"time";v&&(u===tP||u===y_?y.formatType=v:WKt(u)?y.legend={formatType:v,...y.legend}:lo(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function MJt(e,t,n){const r=YKt(t,n);if(r){if(r==="binned"){const i=e[t===Qh?Cs:xa];return!!(gt(i)&&gt(e[t])&&Ra(i.bin))}}else return!1;return!0}function LJt(e,t,n,r){const i={};for(const s of ct(e))N8e(s)||pt($Xt(s));for(let s of zKt){if(!e[s])continue;const o=e[s];if(rP(s)){const a=UKt(s),u=i[a];if(gt(u)&&OQt(u.type)&&gt(o)&&!u.timeUnit){pt(kXt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(pt(IXt),s=Cd),!MJt(e,s,t)){pt(UB(s,t));continue}if(s===ey&&t==="line"){const a=_m(e[s]);if(a!=null&&a.aggregate){pt(OXt);continue}}if(s===bc&&(n?"fill"in e:"stroke"in e)){pt(Q8e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===nP||s===qT&&!Xe(o)&&!jh(o)||s===y_&&Xe(o)){if(o){if(s===qT){const a=e[s];if(OBe(a)){i[s]=a;continue}}i[s]=Nt(o).reduce((a,u)=>(gt(u)?a.push(hoe(u,s)):pt(nK(u,s)),a),[])}}else{if(s===y_&&o===null)i[s]=null;else if(!gt(o)&&!qm(o)&&!jh(o)&&!KB(o)&&!Xt(o)){pt(nK(o,s));continue}i[s]=jBe(o,s,r)}}return i}function e9(e,t){const n={};for(const r of ct(e)){const i=jBe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function FJt(e){const t=[];for(const n of ct(e))if(Bx(e,n)){const r=e[n],i=Nt(r);for(const s of i)gt(s)?t.push(s):XB(s)&&t.push(s.condition)}return t}function moe(e,t,n){if(e)for(const r of ct(e)){const i=e[r];if(Xe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function BJt(e,t,n,r){return e?ct(e).reduce((i,s)=>{const o=e[s];return Xe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function YBe(e,t){return ct(t).reduce((n,r)=>{switch(r){case Cs:case xa:case $B:case LB:case MB:case Qh:case jm:case Yv:case pC:case Cd:case Zg:case Jh:case Jg:case Zh:case ep:case tp:case pd:case tP:case xc:case fw:case y_:return n;case qT:if(e==="line"||e==="trail")return n;case nP:case OB:{const i=t[r];if(Xe(i)||gt(i))for(const s of Nt(i))s.aggregate||n.push(Tt(s,{}));return n}case ey:if(e==="trail")return n;case bc:case Um:case zm:case ty:case Kv:case Xv:case Jv:case Qv:{const i=_m(t[r]);return i&&!i.aggregate&&n.push(Tt(i,{})),n}}},[])}function jJt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Xe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Xe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function oK(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${goe(t)}`:"";return{field:o+t.field,type:t.type,title:Xt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=FJt(n).map(wJt);return{tooltip:[...i,...Bp(s,wr)]}}function goe(e){const{title:t,field:n}=e;return uo(t,n)}function yoe(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=goe(n);return KBe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function KBe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...xm(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...qv(e[t])?{}:e[t]}}]:[]}function XBe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:BO(s,n),continuousAxisChannelDef2:BO(o,n),continuousAxisChannelDefError:BO(a,n),continuousAxisChannelDefError2:BO(u,n),continuousAxis:i}}function BO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&pt(lQt(n,t)),r}else return e}function QBe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(xm(n)&&n.orient)return n.orient;if(u1(i)){if(u1(s)){const o=gt(i)&&i.aggregate,a=gt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return QT(s)&&!QT(i)?"horizontal":"vertical"}return"horizontal"}else{if(u1(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const GL="boxplot",UJt=["box","median","outliers","rule","ticks"],zJt=new ZB(GL,ZBe);function JBe(e){return Xr(e)?"tukey":e}function ZBe(e,{config:t}){e={...e,encoding:e9(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=xm(n)?n:{type:n};i&&pt(K8e("boxplot"));const u=a.extent??t.boxplot.extent,l=pi("size",a,t),c=a.invalid,f=JBe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:T}=VJt(e,u,t),C=hC(m.field),{color:I,size:N,...k}=x,P=Fe=>yoe(a,g,m,Fe,t.boxplot),M=P(k),O=P(x),B=(Ot(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",q=P({...k,...N?{size:N}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...I||{value:B}}}}),H=oK([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),Y={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},K=f==="min-max"?H:oK([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),J=[...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...M({partName:"ticks",mark:Y,positionPrefix:"lower_whisker",extraEncoding:K}),...M({partName:"ticks",mark:Y,positionPrefix:"upper_whisker",extraEncoding:K})],F=[...f!=="tukey"?J:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...q({partName:"median",mark:{type:"tick",invalid:c,...Ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:H})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:F};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,L=`(${W} - ${U})`,V=`${U} - ${u} * ${L}`,Q=`${W} + ${u} * ${L}`,ue=`datum["${m.field}"]`,we={joinaggregate:e9e(m.field),groupby:y},ce={transform:[{filter:`(${V} <= ${ue}) && (${ue} <= ${Q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${C}`},{op:"max",field:m.field,as:`upper_whisker_${C}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${C}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${C}`},...v],groupby:y}],layer:J},{tooltip:Se,...Oe}=k,{scale:et,axis:Re}=m,St=goe(m),Ze=ac(Re,["title"]),It=KBe(a,"outliers",t.boxplot,{transform:[{filter:`(${ue} < ${V}) || (${ue} > ${Q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...St!==void 0?{title:St}:{},...et!==void 0?{scale:et}:{},...Fi(Ze)?{}:{axis:Ze}},...Oe,...I?{color:I}:{},...T?{tooltip:T}:{}}})[0];let mt;const Ce=[...d,...h,we];return It?mt={transform:Ce,layer:[It,ce]}:(mt=ce,mt.transform.unshift(...Ce)),{...o,layer:[mt,{transform:p,layer:F}]}}function e9e(e){const t=hC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function VJt(e,t,n){const r=QBe(e,GL),{continuousAxisChannelDef:i,continuousAxis:s}=XBe(e,r,GL),o=i.field,a=hC(o),u=JBe(t),l=[...e9e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=jJt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:x}=GBe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const voe="errorbar",HJt=["ticks","rule"],qJt=new ZB(voe,t9e);function t9e(e,{config:t}){e={...e,encoding:e9(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=n9e(e,voe,t);delete s.size;const c=yoe(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function WJt(e,t){const{encoding:n}=e;if(GJt(n))return{orient:QBe(e,t),inputType:"raw"};const r=YJt(n),i=KJt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Mn(a)&&Mn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Mn(a)){if(u1(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Mn(u)){if(u1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Mn(u)&&!Mn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Mn(c)&&!Mn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Mn(a)&&Mn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Mn(a)){if(u1(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Mn(l)){if(u1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function GJt(e){return(Mn(e.x)||Mn(e.y))&&!Mn(e.x2)&&!Mn(e.y2)&&!Mn(e.xError)&&!Mn(e.xError2)&&!Mn(e.yError)&&!Mn(e.yError2)}function YJt(e){return Mn(e.x2)||Mn(e.y2)}function KJt(e){return Mn(e.xError)||Mn(e.xError2)||Mn(e.yError)||Mn(e.yError2)}function n9e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=xm(r)?r:{type:r};s&&pt(K8e(t));const{orient:l,inputType:c}=WJt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=XBe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:x}=XJt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:C,...I}=i,{bins:N,timeUnits:k,aggregate:P,groupby:M,encoding:O}=GBe(I,n),B=[...P,...g],q=c!=="raw"?[]:M,H=oK(v,f,O,x);return{transform:[...a.transform??[],...N,...k,...B.length===0?[]:[{aggregate:B,groupby:q}],...y],groupby:q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:H}}function XJt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&pt(uQt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:eP(h)},{fieldPrefix:"upper_",titlePrefix:Rbe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Rbe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:MS({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:MS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:MS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&pt(aQt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:g_(g_(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Rbe(e,t,n){return`${eP(e)} ${n} ${t}`}const boe="errorband",QJt=["band","borders"],JJt=new ZB(boe,r9e);function r9e(e,{config:t}){e={...e,encoding:e9(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=n9e(e,boe,t),l=o,c=yoe(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?pt(_be("interpolate")):l.tension&&pt(_be("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const i9e={};function xoe(e,t,n){const r=new ZB(e,t);i9e[e]={normalizer:r,parts:n}}function ZJt(){return ct(i9e)}xoe(GL,ZBe,UJt);xoe(voe,t9e,HJt);xoe(boe,r9e,QJt);const eZt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],s9e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},o9e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},tZt=ct(s9e),nZt=ct(o9e),rZt={header:1,headerRow:1,headerColumn:1,headerFacet:1},a9e=ct(rZt),u9e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],iZt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},sZt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Uh="_vgsid_",oZt={point:{on:"click",fields:[Uh],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function _oe(e){return e==="legend"||!!(e!=null&&e.legend)}function DV(e){return _oe(e)&&Ot(e)}function woe(e){return!!(e!=null&&e.select)}function l9e(e){const t=[];for(const n of e||[]){if(woe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function aZt(e){return t9(e)||Soe(e)||Eoe(e)}function Eoe(e){return"concat"in e}function t9(e){return"vconcat"in e}function Soe(e){return"hconcat"in e}function c9e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function wm(e){return Ot(e)&&e.step!==void 0}function Dbe(e){return e.view||e.width||e.height}const Nbe=20,uZt={align:1,bounds:1,center:1,columns:1,spacing:1},lZt=ct(uZt);function cZt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(YB(e)&&!aP(e.facet)||Eoe(e))&&(i.columns=o),t9(e)&&(i.columns=1);for(const a of lZt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Xr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function aK(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function YL(e,t){const n=KL(e,t);return wm(n)?n.step:f9e}function KL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return uo(n,{step:e.step})}const f9e=20,fZt={continuousWidth:200,continuousHeight:200,step:f9e},dZt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:fZt,mark:fJt,arc:{},area:{},bar:pJt,circle:{},geoshape:{},image:{},line:{},point:{},rect:mJt,rule:{color:"black"},square:{},text:{color:"black"},tick:gJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:jQt,projection:{},legend:iZt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:oZt,style:{},title:{},facet:{spacing:Nbe},concat:{spacing:Nbe},normalizedNumberFormat:".0%"},h0=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Pbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Obe={blue:h0[0],orange:h0[1],red:h0[2],teal:h0[3],green:h0[4],yellow:h0[5],purple:h0[6],pink:h0[7],brown:h0[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function hZt(e={}){return{signals:[{name:"color",value:Ot(e)?{...Obe,...e}:Obe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function pZt(e){return{signals:[{name:"fontSize",value:Ot(e)?{...Pbe,...e}:Pbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function mZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function d9e(e){const t=ct(e||{}),n={};for(const r of t){const i=e[r];n[r]=cP(i)?z8e(i):zc(i)}return n}function gZt(e){const t=ct(e),n={};for(const r of t)n[r]=d9e(e[r]);return n}const yZt=[...IBe,...HBe,...a9e,"background","padding","legend","lineBreak","scale","style","title","view"];function h9e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=nC({},An(dZt),n?mZt(n):{},t?hZt(t):{},r?pZt(r):{},s||{});i&&rC(o,"selection",i,!0);const a=ac(o,yZt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=zc(o[u]));for(const u of IBe)o[u]&&(a[u]=ql(o[u]));for(const u of HBe)o[u]&&(a[u]=d9e(o[u]));for(const u of a9e)o[u]&&(a[u]=ql(o[u]));return o.legend&&(a.legend=ql(o.legend)),o.scale&&(a.scale=ql(o.scale)),o.style&&(a.style=gZt(o.style)),o.title&&(a.title=ql(o.title)),o.view&&(a.view=ql(o.view)),a}const vZt=new Set(["view",...sJt]),bZt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],xZt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...cJt};function _Zt(e){e=An(e);for(const t of bZt)delete e[t];if(e.axis)for(const t in e.axis)cP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of eZt)delete e.legend[t];if(e.mark){for(const t of Sbe)delete e.mark[t];e.mark.tooltip&&Ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(l9e(e.params)),delete e.params);for(const t of vZt){for(const r of Sbe)delete e[t][r];const n=xZt[t];if(n)for(const r of n)delete e[t][r];EZt(e,t)}for(const t of ZJt())delete e[t];wZt(e);for(const t in e)Ot(e[t])&&Fi(e[t])&&delete e[t];return Fi(e)?void 0:e}function wZt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=U8e(e.title);Fi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Fi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Fi(r)?delete e.title:e.title=r}function EZt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Fi(s)||(e.style[n??t]=s),delete e[t]}function n9(e){return"layer"in e}function SZt(e){return"repeat"in e}function TZt(e){return!Xe(e.repeat)&&e.repeat.layer}class Toe{map(t,n){return YB(t)?this.mapFacet(t,n):SZt(t)?this.mapRepeat(t,n):Soe(t)?this.mapHConcat(t,n):t9(t)?this.mapVConcat(t,n):Eoe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(n9(t))return this.mapLayer(t,n);if(ry(t))return this.mapUnit(t,n);throw new Error(Use(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const CZt={zero:1,center:1,normalize:1};function AZt(e){return e in CZt}const IZt=new Set([TBe,HB,VB,zL,WB,aoe,uoe,qB,CBe,ooe]),kZt=new Set([HB,VB,TBe]);function hE(e){return gt(e)&&KT(e)==="quantitative"&&!e.bin}function $be(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(gt(o)&&gt(a))if(hE(o)&&hE(a)){if(o.stack)return t;if(a.stack)return i;const u=gt(o)&&!!o.aggregate,l=gt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(hE(o))return t;if(hE(a))return i}else{if(hE(o))return s&&n==="vertical"?void 0:t;if(hE(a))return s&&n==="horizontal"?void 0:i}}function RZt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function p9e(e,t){var m,g;const n=xm(e)?e:{type:e},r=n.type;if(!IZt.has(r))return null;const i=$be(t,"x",n)||$be(t,"theta",n);if(!i)return null;const s=t[i],o=gt(s)?Tt(s,{}):void 0,a=RZt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=gt(y)?Tt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=gt(f)?Tt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=VKt.reduce((y,v)=>{if(v!=="tooltip"&&Bx(t,v)){const x=t[v];for(const w of Nt(x)){const E=_m(w);if(E.aggregate)continue;const T=Tt(E,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?qv(s.stack)?p=s.stack?"zero":null:p=s.stack:kZt.has(r)&&(p="zero"),!p||!AZt(p)||poe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==uc.LINEAR&&s!=null&&s.stack&&pt(iQt(s.scale.type)),Mn(t[Vm(i)])?(s.stack!==void 0&&pt(rQt(i)),null):(gt(s)&&s.aggregate&&!tXt.has(s.aggregate)&&pt(sQt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:gw(r),stackBy:h,offset:p}))}function m9e(e,t,n){const r=ql(e),i=pi("orient",r,n);if(r.orient=OZt(r.type,t,i),i!==void 0&&i!==r.orient&&pt(UXt(r.orient,i)),r.type==="bar"&&r.orient){const u=pi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:hJt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=pi("opacity",r,n),o=pi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=NZt(r.type,t)),pi("cursor",r,n)===void 0&&(r.cursor=DZt(r,t,n)),r}function DZt(e,t,n){return t.href||e.href||pi("href",e,n)?"pointer":e.cursor}function NZt(e,t){if(Er([WB,ooe,aoe,uoe],e)&&!poe(t))return .7}function PZt(e,t,{graticule:n}){if(n)return!1;const r=Rg("filled",e,t),i=e.type;return uo(r,i!==WB&&i!==qB&&i!==zL)}function OZt(e,t,n){switch(e){case WB:case aoe:case uoe:case CBe:case rJt:case nJt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case HB:if(gt(r)&&(Ra(r.bin)||gt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gt(i)&&(Ra(i.bin)||gt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(gt(r)&&r.type===b_&&!Zi(r.bin)||VL(r))&&gt(i)&&Ra(i.bin)?"horizontal":"vertical";if(!o)return(gt(i)&&i.type===b_&&!Zi(i.bin)||VL(i))&&gt(r)&&Ra(r.bin)?"vertical":"horizontal"}case zL:if(s&&!(gt(r)&&Ra(r.bin))&&o&&!(gt(i)&&Ra(i.bin)))return;case VB:if(o)return gt(i)&&Ra(i.bin)?"horizontal":"vertical";if(s)return gt(r)&&Ra(r.bin)?"vertical":"horizontal";if(e===zL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case qB:case ooe:{const a=Abe(r),u=Abe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=vl(r)&&r.type===GT,c=vl(i)&&i.type===GT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function $Zt(e){const{point:t,line:n,...r}=e;return ct(r).length>1?r:r.type}function MZt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ac(e[t],["point","line"])});return e}function NV(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ot(t.point)?t.point:{}:void 0}function Mbe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class LZt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ry(t)){const{mark:r,encoding:i}=t,s=xm(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!NV(s,n[s.type],i);case"area":return!!NV(s,n[s.type],i)||!!Mbe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=e9(l,i),d=xm(a)?a:{type:a},h=NV(d,i[d.type],f),p=d.type==="area"&&Mbe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:$Zt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ac(f,["shape"])}],g=p9e(m9e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:x}=g;y={...f,[v]:{...f[v],...x?{stack:x}:{}}}}return y=ac(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...VT(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...VT(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:MZt(i)})}}function FZt(e,t){return t?aP(e)?y9e(e,t):g9e(e,t):e}function PV(e,t){return t?y9e(e,t):e}function uK(e,t,n){const r=t[e];if(xJt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};pt(_Xt(r.repeat));return}return t}function g9e(e,t){if(e=uK("field",e,t),e!==void 0){if(e===null)return null;if(coe(e)&&em(e.sort)){const n=uK("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Lbe(e,t){if(gt(e))return g9e(e,t);{const n=uK("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Fbe(e,t){if(Mn(e)){const n=Lbe(e,t);if(n)return n;if(KB(e))return{condition:e.condition}}else{if(uP(e)){const n=Lbe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function y9e(e,t){const n={};for(const r in e)if(sn(e,r)){const i=e[r];if(Xe(i))n[r]=i.map(s=>Fbe(s,t)).filter(s=>s);else{const s=Fbe(i,t);s!==void 0&&(n[r]=s)}}return n}class BZt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ry(t)){const{encoding:n,mark:r}=t;if(r==="line"||xm(r)&&r.type==="line")for(const i of jKt){const s=dw(i),o=n[s];if(n[i]&&(gt(o)&&!Ra(o.bin)||qm(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return pt(jXt(!!i.x2,!!i.y2)),r({...t,mark:Ot(s)?{...s,type:"rule"}:"rule"},n)}}class jZt extends Toe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[zJt,qJt,JJt,new LZt,new BZt]}map(t,n){if(ry(t)){const r=Bx(t.encoding,eg),i=Bx(t.encoding,tg),s=Bx(t.encoding,PB);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=PV(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return TZt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ss(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Xe(r)&&t.columns&&(t=ac(t,["columns"]),pt(ybe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Xe(r)&&r.row||[u?u.row:null],f=!Xe(r)&&r.column||[u?u.column:null],d=Xe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Xe(r)?`${Ss(p)}`:(r.row?`row_${Ss(m)}`:"")+(r.column?`column_${Ss(g)}`:"")),x=this.map(i,{...n,repeater:y,repeaterPrefix:v});x.name=v,a.push(ac(x,["data"]))}const h=Xe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return aP(r)&&t.columns&&(t=ac(t,["columns"]),pt(ybe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=jbe({parentProjection:o,projection:i}),l=Bbe({parentEncoding:s,encoding:PV(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=PV(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&pt(FXt([...r?[eg]:[],...i?[tg]:[]]));const o={},a={};for(const u of[eg,tg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:FZt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Bbe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:jbe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Bbe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ct(e),...ct(t)]);for(const s of i){const o=t[s],a=e[s];if(Mn(o)){const u={...a,...o};r[s]=u}else uP(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||jh(a)||Xt(a)||Mn(a)||Xe(a))&&(r[s]=a)}}else r=t;return!r||Fi(r)?void 0:r}function jbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&pt(AXt({parentProjection:t,projection:n})),n??t}function Coe(e){return"filter"in e}function UZt(e){return(e==null?void 0:e.stop)!==void 0}function v9e(e){return"lookup"in e}function zZt(e){return"data"in e}function VZt(e){return"param"in e}function HZt(e){return"pivot"in e}function qZt(e){return"density"in e}function WZt(e){return"quantile"in e}function GZt(e){return"regression"in e}function YZt(e){return"loess"in e}function KZt(e){return"sample"in e}function XZt(e){return"window"in e}function QZt(e){return"joinaggregate"in e}function JZt(e){return"flatten"in e}function ZZt(e){return"calculate"in e}function b9e(e){return"bin"in e}function een(e){return"impute"in e}function ten(e){return"timeUnit"in e}function nen(e){return"aggregate"in e}function ren(e){return"stack"in e}function ien(e){return"fold"in e}function sen(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function oen(e){return e.map(t=>Coe(t)?{filter:OS(t.filter,PQt)}:t)}class aen extends Toe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Ube(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Ube(t,n),t.encoding){const r={};for(const[i,s]of cv(t.encoding))r[i]=x9e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:cv(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of ja(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Ube(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Coe(s))return{filter:lK(s,t)};if(b9e(s)&&hw(s.bin))return{...s,bin:_9e(s.bin)};if(v9e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function x9e(e,t){var r,i;const n=An(e);if(gt(n)&&hw(n.bin)&&(n.bin=_9e(n.bin)),yw(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(KB(n))if(Xe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:lK(s,t)}});else{const{selection:s,param:o,test:a,...u}=x9e(n.condition,t);n.condition=o?n.condition:{...u,test:lK(n.condition,t)}}return n}function _9e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function lK(e,t){const n=r=>OS(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):OS(e.test||e.filter,r=>r.selection?n(r.selection):r)}class cK extends Toe{map(t,n){const r=n.selections??[];if(t.params&&!ry(t)){const i=[];for(const s of t.params)woe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Pt(a)&&(a===t.name||i.includes(a))||Xe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=cK.prototype[e];cK.prototype[e]=function(n,r){return t.call(this,n,uen(n,r))}}function uen(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function w9e(e,t){t===void 0&&(t=h9e(e.config));const n=den(e,t),{width:r,height:i}=e,s=hen(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const len=new jZt,cen=new aen,fen=new cK;function den(e,t={}){const n={config:t};return fen.map(len.map(cen.map(e,n),n),n)}function zbe(e){return Pt(e)?{type:e}:e??{}}function hen(e,t,n){let{width:r,height:i}=t;const s=ry(e)||n9(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(pt(hbe("width")),r=void 0),i=="container"&&(pt(hbe("height")),i=void 0));const a={type:"pad",...o,...n?zbe(n.autosize):{},...zbe(e.autosize)};if(a.type==="fit"&&!s&&(pt(cXt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&pt(pbe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&pt(pbe("height")),!Kc(a,{type:"pad"}))return a}function pen(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function men(e){return e?`fit-${FB(e)}`:"fit"}const gen=["background","padding"];function Vbe(e,t){const n={};for(const r of gen)e&&e[r]!==void 0&&(n[r]=zc(e[r]));return t&&(n.params=e.params),n}class iy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new iy(An(this.explicit),An(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return uo(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ct(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function _p(e){return{explicit:!0,value:e}}function Oc(e){return{explicit:!1,value:e}}function E9e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:r9(t,n,r,i)}}function r9(e,t,n,r){return e.explicit&&t.explicit&&pt(XXt(n,r,e.value,t.value)),e}function hv(e,t,n,r,i=r9){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Kc(e.value,t.value)?e:i(e,t,n,r)}class yen extends iy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function JT(e){return"url"in e}function hD(e){return"values"in e}function S9e(e){return"name"in e&&!JT(e)&&!hD(e)&&!I1(e)}function I1(e){return e&&(T9e(e)||C9e(e)||Aoe(e))}function T9e(e){return"sequence"in e}function C9e(e){return"sphere"in e}function Aoe(e){return"graticule"in e}var xs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(xs||(xs={}));function A9e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=hd(i.field),i}function w_(e,t=!0,n=Nu){if(Xe(e)){const r=e.map(i=>w_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(pw(e))return n(t?v_(e):_Qt(e));return t?n(Bi(e)):e}function ven(e,t){for(const n of ja(e.component.selection??{})){const r=n.name;let i=`${r}${mv}, ${n.resolve==="global"?"true":`{unit: ${jx(e)}}`}`;for(const s of a9)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Xen,on:[{events:{signal:n.name+mv},update:`modify(${Et(n.name+E_)}, ${i})`}]})}return Ioe(t)}function ben(e,t){if(e.component.selection&&ct(e.component.selection).length){const n=Et(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Gv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ioe(t)}function xen(e,t){let n=!1;for(const r of ja(e.component.selection??{})){const i=r.name,s=Et(i+E_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${q9e}(${s}, ${Et(a)}${u}`})}n=!0;for(const a of a9)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Ioe(t)}function _en(e,t){const n=[...t],r=jx(e,{escape:!1});for(const i of ja(e.component.selection??{})){const s={name:i.name+E_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Uh}}]),i.init){const a=i.project.items.map(A9e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Uh]:w_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:w_(u,!1)}))}n.filter(a=>a.name===i.name+E_).length||n.push(s)}return n}function I9e(e,t){for(const n of ja(e.component.selection??{}))for(const r of a9)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function wen(e,t){for(const n of e.children)Hs(n)&&(t=I9e(n,t));return t}function Een(e,t,n,r){const i=X9e(e,t.param,t);return{signal:bf(n.get("type"))&&Xe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Ioe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class ki{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){pt(SXt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class lc extends ki{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${S8e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function OV(e){return e.as!==void 0}function Hbe(e){return`${e}_end`}class tm extends ki{clone(){return new tm(null,An(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(mw(u)){if(Hs(n)){const{mark:c,markDef:f,config:d}=n,h=dv({fieldDef:s,markDef:f,config:d});(dD(c)||h)&&(l={timeUnit:ma(u),field:a})}}else l={as:Tt(s,{forAs:!0}),field:a,timeUnit:u};if(Hs(n)){const{mark:c,markDef:f,config:d}=n,h=dv({fieldDef:s,markDef:f,config:d});dD(c)&&lo(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[wr(l)]=l)}return i},{});return Fi(r)?null:new tm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=ma(r),o={...i,timeUnit:s};return new tm(t,{[wr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of cv(this.timeUnits)){const s=OV(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ja(this.timeUnits).map(t=>OV(t)?t.as:Hbe(t.field)))}dependentFields(){return new Set(ja(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${wr(this.timeUnits)}`}assemble(){const t=[];for(const n of ja(this.timeUnits)){const{rectBandPosition:r}=n,i=ma(n.timeUnit);if(OV(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:hd(s),type:"timeunit",...a?{units:zB(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...qbe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=k9e({timeUnit:i,field:o}),u=Hbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...qbe([o,u],r,i))}}return t}}const i9="offsetted_rect_start",s9="offsetted_rect_end";function k9e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=oBe(r),{part:o,step:a}=cBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function qbe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Wbe([k9e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${i9}`},{type:"formula",expr:Wbe([i,s],n+.5),as:`${e}_${s9}`}]}return[]}function Wbe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const fP="_tuple_fields";class Sen{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Ten={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Sen),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ss(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ss(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Nt(n.value):null;let{fields:d,encodings:h}=Ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ot(p))for(const m of ct(p))BKt(m)?(h||(h=[])).push(m):l==="interval"?(pt(xXt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){pt(fXt(p,m.aggregate));continue}else if(!g){pt(gbe(p));continue}if(m.timeUnit&&!mw(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[wr(y)]=y}if(!s[g]){const y=l==="interval"&&ny(p)&&bf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Uh,R8e(p)?(v.geoChannel=p,v.channel=k8e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else pt(gbe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Uh}f&&(t.init=f.map(p=>i.items.map(m=>Ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Fi(o)||(i.timeUnit=new tm(null,o))},signals:(e,t,n)=>{const r=t.name+fP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(A9e)})}},ng={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ny(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&pt(mXt),!s||!bf(o)){pt(pXt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Gbe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(q9e)>=0)i.update=`{${r.map(o=>`${Et(hd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Et(hd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Gbe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function fK(e,t){return`domain(${Et(e.scaleName(t))})`}function Gbe(e){return e.parent&&xC(e.parent)&&!e.parent.parent}const LS="_brush",R9e="_scale_trigger",MA="geo_interval_init_tick",D9e="_init",Cen="_center",Aen={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ot(n.select)?n.select:{}};i.fields=[Uh],i.encodings||(i.encodings=n.value?ct(n.value):[ep,Zh]),n.select={type:"interval",...i}}if(t.translate&&!ng.defined(t)){const i=`!event.item || event.item.mark.name !== ${Et(t.name+LS)}`;for(const s of t.events){if(!s.between){pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+mv,s=ja(t.project.hasChannel).filter(a=>a.channel===Cs||a.channel===xa),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Ien(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Et(e.projectionName()),u=e.projectionName()+Cen,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+D9e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Et(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${jx(e)}}`,x=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:MA}]:[]],update:x}]})}else{if(!ng.defined(t)){const l=r+R9e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Et(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=bf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${jx(e)}, fields: ${r+fP}, values`;return n.concat({name:i,...o?{init:`{${u}: ${w_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Hs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===MA).length||n.unshift({name:MA,value:null,on:[{events:"timer{1}",update:`${MA} === null ? {} : ${MA}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Et(t.name+E_)})`;if(ng.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of ct(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${jx(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ct(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+LS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+LS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Ien(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Et(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Cs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=ng.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:w_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+R9e},update:bf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:w_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Cs?0:1,h=t.name+D9e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const ken={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+fP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ja(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+LS):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${jx(e)}, `;if(t.project.hasSelectionId)l+=`${Uh}: ${o}[${Et(Uh)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Et(e.vgField(d.channel,{}))}], ${o}[${Et(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Et(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+mv,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function gC(e,t,n,r){const i=KB(t)&&t.condition,s=r(t);if(i){const a=Nt(i).map(u=>{const l=r(u);if(bJt(u)){const{param:c,empty:f}=u;return{test:K9e(e,{param:c,empty:f}),...l}}else return{test:JL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function koe(e,t="text"){const n=e.encoding[t];return gC(e,n,t,r=>o9(r,e.config))}function o9(e,t,n="datum"){if(e){if(jh(e))return as(e.value);if(Mn(e)){const{format:r,formatType:i}=qL(e);return soe({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function N9e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Xe(o))return{tooltip:Ybe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return gC(e,o,"tooltip",u=>{const l=o9(u,i,a);if(l)return l;if(u===null)return;let c=pi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Pt(c))return{value:c};if(Ot(c))return Xt(c)?c:c.content==="encoding"?Ybe(n,s,i,t):{signal:a}})}}function P9e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=dw(f),h=vl(c)?c:{...c,type:e[d].type},p=h.title||doe(h,i),m=Nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(lo(f)){const y=f==="x"?"x2":"y2",v=_m(e[y]);if(Ra(h.bin)&&v){const x=Tt(h,{expr:o}),w=Tt(v,{expr:o}),{format:E,formatType:T}=qL(h);g=oP(x,w,E,T,i),s[y]=!0}}if((lo(f)||f===Cd||f===Jh)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=qL(h);g=soe({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=o9(h,i,o).signal),a.push({channel:f,key:m,value:g})}moe(e,(c,f)=>{gt(c)?u(c,f):XB(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Ybe(e,t,n,{reactiveGeom:r}={}){const i=P9e(e,t,n,{reactiveGeom:r}),s=cv(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Ren(e){const{markDef:t,config:n}=e,r=pi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Den(e),...Nen(e)}}function Den(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=pi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in aXt?{}:{ariaRoleDescription:{value:t}}}function Nen(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return gC(e,s,"description",u=>o9(u,e.config));const o=pi("description",n,r);if(o!=null)return{description:as(o)};if(r.aria===!1)return{};const a=P9e(t,i,r);if(!Fi(a))return{description:{signal:cv(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function ua(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=pi(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=as(u)));const l=i[e];return gC(t,l,o??e,c=>ioe({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function O9e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??pi("filled",n,i),a=Er(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=pi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=pi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:as(u)}:{},...l?{stroke:as(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&pt(Q8e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ua("color",e,{vgChannel:c,defaultValue:o?u:l}),...ua("fill",e,{defaultValue:r.fill?u:void 0}),...ua("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Pen(e){const{encoding:t,mark:n}=e,r=t.order;return!gw(n)&&jh(r)?gC(e,r,"zindex",i=>as(i.value)):{}}function ZT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:ioe({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:as(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Eu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Vm(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=ZT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Roe({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&lo(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Oen({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Oen(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Mn(n)&&i&&t===i.fieldChannel){if(gt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return UL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Fx(n,r,{suffix:"end"},{offset:s})}return noe(e)}function Roe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=dw(n),u=fv(n),l=pi(n,s,o,{vgChannel:u});if(l!==void 0)return Sk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Er([uc.LOG,uc.TIME,uc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[_c(n)],mult:.5}}}}const $en={left:"x",center:"xc",right:"x2"},Men={top:"y",middle:"yc",bottom:"y2"};function $9e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return fv(e);const i=e==="x"?"align":"baseline",s=pi(i,t,n);let o;return Xt(s)?(pt(BXt(i)),o=void 0):o=s,e==="x"?$en[o||(r==="top"?"left":"center")]:Men[o||r]}function XL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?M9e(e,t,{defaultPos:n,defaultPos2:r}):Eu(e,t,{defaultPos:n})}function M9e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Vm(e),a=_c(e),u=Len(t,r,o),l=u[a]?$9e(e,i,s):fv(e);return{...Eu(e,t,{defaultPos:n,vgChannel:l}),...u}}function Len(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=dw(n),l=_c(n),c=fv(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?ZT({channel:n,markDef:s,encoding:r,model:e}):ZT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=_c(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Fen({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:jO(n,s)||jO(n,{[n]:BL(n,s,a.style),[l]:BL(l,s,a.style)})||jO(n,a[i])||jO(n,a.mark)||{[c]:Roe({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Fen({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Mn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Fx(t,s,{suffix:"start"},{offset:u}):noe({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function jO(e,t){const n=_c(e),r=fv(e);if(t[r]!==void 0)return{[r]:Sk(e,t[r])};if(t[e]!==void 0)return{[r]:Sk(e,t[e])};if(t[n]){const i=t[n];if(__(i))pt(PXt(n));else return{[n]:Sk(e,i)}}}function pv(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Vm(t),a=_c(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??pi("size",i,n,{vgChannel:a}),p=O8e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return gt(u)&&(Zi(u.bin)||Ra(u.bin)||u.timeUnit&&!l)&&!(h&&!__(h))&&!r[p]&&!ya(f)?Uen({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Mn(u)&&ya(f)||m)&&!l?jen(u,t,e):M9e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Ben(e,t,n,r,i,s,o){if(__(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Rg("minBandSize",{type:o},r);return{signal:c?`max(${yh(c)}, ${l})`:l}}else i.band!==1&&(pt(VXt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Xt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(eb(u)&&Xr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=uo(u,o==="bar"?l:c);if(Xt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Xr(f))return{signal:`${1-f} * ${e}`}}return{value:YL(r.view,e)-2}}function jen(e,t,n){var N,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=_c(t),f=Vm(t),d=O8e(t),h=n.scaleName(d),p=n.getScaleComponent(Mse(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=ua("size",n,{vgChannel:c,defaultRef:as(r.size)}):pt(GXt(r.type)));const y=!!g,v=NBe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(N=l||p)==null?void 0:N.get("type"),useVlSizeChannel:m});g=g||{[c]:Ben(c,h||u,p||l,s,v,!!e,r.type)};const x=((k=l||p)==null?void 0:k.get("type"))==="band"&&__(v)&&!y?"top":"middle",w=$9e(t,r,s,x),E=w==="xc"||w==="yc",{offset:T,offsetType:C}=ZT({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),I=noe({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:Roe({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?C==="encoding"?0:.5:Xt(v)?{signal:`(1-${v})/2`}:__(v)?(1-v.band)/2:0});if(c)return{[w]:I,...g};{const P=fv(f),M=g[c],O=T?{...M,offset:T}:M;return{[w]:I,[P]:Xe(I)?[I[0],{...I[1],offset:O}]:{...I,offset:O}}}}function Kbe(e,t,n,r,i,s,o){if(I8e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Xt(n)||Xt(i)||Xt(r)||s){const l=yh(n),c=yh(i),f=yh(r),d=yh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Uen({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=NBe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=lo(n)?pi("binSpacing",s,i)??0:0,m=Vm(n),g=fv(n),y=fv(m),v=Rg("minBandSize",s,i),{offset:x}=ZT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=ZT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=JQt({fieldDef:e,scaleName:u}),T=Kbe(n,p,c,h,x,v,E),C=Kbe(m,p,c,h,w??x,v,E),I=Xt(f)?{signal:`(1-${f.signal})/2`}:__(f)?(1-f.band)/2:.5,N=dv({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Zi(e.bin)||e.timeUnit){const P=e.timeUnit&&N!==.5;return{[y]:Xbe({fieldDef:e,scaleName:u,bandPosition:I,offset:C,useRectOffsetField:P}),[g]:Xbe({fieldDef:e,scaleName:u,bandPosition:Xt(I)?{signal:`1-${I.signal}`}:1-I,offset:T,useRectOffsetField:P})}}else if(Ra(e.bin)){const P=Fx(e,u,{},{offset:C});if(gt(t))return{[y]:P,[g]:Fx(t,u,{},{offset:T})};if(hw(e.bin)&&e.bin.step)return{[y]:P,[g]:{signal:`scale("${u}", ${Tt(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}pt(eBe(m))}function Xbe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return UL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:i9,endSuffix:s9}:{}})}const zen=new Set(["aria","width","height"]);function Ad(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?O9e(e):{};return{...Ven(e.markDef,t),...Qbe(e,"fill",n),...Qbe(e,"stroke",r),...ua("opacity",e),...ua("fillOpacity",e),...ua("strokeOpacity",e),...ua("strokeWidth",e),...ua("strokeDash",e),...Pen(e),...N9e(e),...koe(e,"href"),...Ren(e)}}function Qbe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(pi("invalid",s,r)==="hide"&&n&&!gw(i)){const a=Hen(e,{invalid:!0,channels:BB});if(a)return{[t]:[{test:a,value:null},...Nt(n)]}}return n?{[t]:n}:{}}function Ven(e,t){return oXt.reduce((n,r)=>(!zen.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=as(e[r])),n),{})}function Hen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&bf(u)&&(s[l]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>roe(o,t)).join(` ${s} `)}}function Doe(e){const{config:t,markDef:n}=e;if(pi("invalid",n,t)){const i=qen(e,{channels:Hm});if(i)return{defined:{signal:i}}}return{}}function qen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&bf(l)&&(s[c]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>roe(o,t)).join(` ${s} `)}}function Jbe(e,t){if(t!==void 0)return{[e]:as(t)}}const $V="voronoi",L9e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName($V)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(gw(s))return pt(dXt(s)),n;const o={name:e.getName($V),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...N9e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf($V)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},F9e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!_oe(e.bind),parse:(e,t,n)=>W9e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=L9e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ss(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:w_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Et(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+mv)[0],o=r+fP,a=i.items.map(l=>Ss(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},QL="_toggle",B9e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+QL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+mv,r=t.name+QL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${jx(e)}}, `)+`${r} ? ${n} : null`}},Wen={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Pt(t.clear)?Gv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(F9e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ss(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+mv);r(i,"null"),B9e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+QL),r(i,"false"))}return n}},j9e={defined:e=>{const t=e.resolve==="global"&&e.bind&&_oe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Uh;return t&&!n&&pt(gXt),t&&n},parse:(e,t,n)=>{const r=An(n);if(r.select=Pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},W9e(t,r),Ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=DV(t.bind)?t.bind.legend:"click",s=Pt(i)?Gv(i,"view"):Nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=DV(t.bind)&&t.bind.legend,s=o=>a=>{const u=An(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ss(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+mv),o=r+fP,a=i.items.filter(d=>d.hasLegend).map(d=>Ss(`${r}_${Ss(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+QL),f=DV(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Gen(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of ja(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&j9e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const U9e="_translate_anchor",z9e="_translate_delta",Yen={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=ng.defined(t),s=r+U9e,{x:o,y:a}=t.project.hasChannel;let u=Gv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+LS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?fK(e,Cs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?fK(e,xa):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+z9e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Zbe(e,t,o,"width",n),a!==void 0&&Zbe(e,t,a,"height",n),n}};function Zbe(e,t,n,r,i){const s=t.name,o=s+U9e,a=s+z9e,u=n.channel,l=ng.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Cs?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${x})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const V9e="_zoom_anchor",H9e="_zoom_delta",Ken={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=ng.defined(t),s=r+H9e,{x:o,y:a}=t.project.hasChannel,u=Et(e.scaleName(Cs)),l=Et(e.scaleName(xa));let c=Gv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+LS,f))),n.push({name:r+V9e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&exe(e,t,o,"width",n),a!==void 0&&exe(e,t,a,"height",n),n}};function exe(e,t,n,r,i){const s=t.name,o=n.channel,a=ng.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?fK(e,o):u.name,h=s+H9e,p=`${s}${V9e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const E_="_store",mv="_tuple",Xen="_modify",q9e="vlSelectionResolve",a9=[ken,Aen,Ten,B9e,F9e,ng,j9e,Wen,Yen,Ken,L9e];function Qen(e){let t=e.parent;for(;t&&!nf(t);)t=t.parent;return t}function jx(e,{escape:t}={escape:!0}){let n=t?Et(e.name):e.name;const r=Qen(e);if(r){const{facet:i}=r;for(const s of ed)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Et(r.vgField(s))}])`)}return n}function Noe(e){return ja(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function W9e(e,t){(Pt(t.select)||!t.select.on)&&delete e.events,(Pt(t.select)||!t.select.clear)&&delete e.clear,(Pt(t.select)||!t.select.toggle)&&delete e.toggle}function dK(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...dK(e.object)),t.push(...dK(e.property))),t)}function G9e(e){return e.object.type==="MemberExpression"?G9e(e.object):e.object.name==="datum"}function Y9e(e){const t=Jie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&G9e(r)&&n.add(dK(r).slice(1).join("."))}),n}class yC extends ki{clone(){return new yC(null,this.model,An(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=JL(this.model,this.filter,this),this._dependentFields=Y9e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Jen(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ss(i.name),o=i.select,a=Pt(o)?o:o.type,u=Ot(o)?An(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=An(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Pt(u.on)?Gv(u.on,"scope"):Nt(An(u.on))},f=An(i);for(const d of a9)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function K9e(e,t,n,r="datum"){const i=Pt(t)?t:t.param,s=Ss(i),o=Et(s+E_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Et(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function X9e(e,t,n){const r=Ss(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&pt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Et(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,pt((a.length?"Multiple ":"No ")+`matching ${Et(i)} encoding found for selection ${Et(n.param)}. Using "field": ${Et(s)}.`)):s=a[0].field}return`${o.name}[${Et(hd(s))}]`}function Zen(e,t){for(const[n,r]of cv(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new lc(new yC(t,e,{param:n}),i,xs.Lookup,e.component.data.outputNodeRefCounts)}}function JL(e,t,n){return Ek(t,r=>Pt(r)?r:RQt(r)?K9e(e,r,n):dBe(r))}function etn(e,t){if(e)return Xe(e)&&!Fy(e)?e.map(n=>doe(n,t)).join(", "):e}function MV(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function NI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=PJt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(cP(m)){const{condition:g,...y}=m,v=Nt(g),x=Ibe[h];if(x){const{vgProp:w,part:E}=x,T=[...v.map(C=>{const{test:I,...N}=C;return{test:JL(null,I),...N}}),y];MV(c,E,w,T),delete c[h]}else if(x===null){const w={signal:v.map(E=>{const{test:T,...C}=E;return`${JL(null,T)} ? ${dbe(C)} : `}).join("")+dbe(y)};c[h]=w}}else if(Xt(m)){const g=Ibe[h];if(g){const{vgProp:y,part:v}=g;MV(c,v,y,m),delete c[h]}}Er(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Fi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:uo(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Xt(c.encode.labels.update.text)&&(p=g_(a,"datum.label",c.encode.labels.update.text.signal)),MV(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of zBe)e.hasAxisPart(p)||delete c.encode[p];Fi(c.encode)&&delete c.encode}const h=etn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:uo(l,0)}}}}function Q9e(e){const{axes:t}=e.component,n=[];for(const r of Hm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function ttn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>NI(i,"grid",t)),...r.map(i=>NI(i,"grid",t)),...n.map(i=>NI(i,"main",t)),...r.map(i=>NI(i,"main",t))].filter(i=>i)}function txe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ct(o),...ct(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${yh(o[c])} : ${yh(a[c])}`};return l}return t[i]})])}function ntn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:gBe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Xt(n)?"axisOrient":`axis${eP(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:txe(a,r,e,n),vgAxisConfig:txe(u,r,e,n),axisConfigStyle:rtn([...u,...a],r)}}function rtn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function hK(e,t,n,r={}){var s;const i=H8e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const nxe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??itn(n,e),gridScale:({model:e,channel:t})=>stn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Z9e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||J9e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??atn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??utn(t.type,n,gt(t)&&!!t.timeUnit,gt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??ctn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:ftn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=eje(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return W8e(i?[Cbe(i)]:[],gt(o)?[Cbe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>dtn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??htn(n,t)};function itn(e,t){return!ya(e)&&gt(t)&&!Zi(t==null?void 0:t.bin)&&!Ra(t==null?void 0:t.bin)}function stn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function otn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Xt(s)?s:fD(s);{const{configValue:o}=hK("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?fD(o):n===Cs&&Er([toe,eoe],e.type)&&!(gt(e)&&e.timeUnit)?270:void 0}}function pK(e){return`(((${e.signal} % 360) + 360) % 360)`}function J9e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Xt(e)){const i=pK(e),s=Xt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Xt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Xt(e)){const i=pK(e),s=Xt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Xt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Z9e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Xt(e)){const o=pK(e),a=Xt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Xt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function atn(e,t){if(t==="x"&&Er(["quantitative","temporal"],e))return!0}function utn(e,t,n,r){if(n&&!Ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function ltn(e){return e==="x"?"bottom":"left"}function ctn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ya(t)&&t!=="log"){if(gt(e)){if(Zi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Er(["month","hours","day","quarter"],(i=ma(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ftn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(gt(t)){const{timeUnit:n}=t;if(n){const r=lBe(n);if(r)return{signal:r}}}}function eje(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return G8e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function dtn(e,t){const n=e.values;if(Xe(n))return UBe(t,n);if(Xt(n))return n}function htn(e,t){return e==="rect"&&HL(t)?1:0}class e2 extends ki{clone(){return new e2(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Y9e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(yw(r)&&DBe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${dBe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new e2(t,{calculate:u,as:t2(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${wr(this.transform)}`}}function t2(e,t,n){return Tt(e,{prefix:t,suffix:"sort_index",...n})}function u9(e,t){return Er(["top","bottom"],t)?"column":Er(["left","right"],t)||e==="row"?"row":"column"}function n2(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return uo((t||{})[e],i[e],n.header[e])}function l9(e,t,n,r){const i={};for(const s of e){const o=n2(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Poe=["row","column"],Ooe=["header","footer"];function ptn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=l9(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=u9(t,a),l=fD(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...nje(l,u),...tje(u,l,s),...rje(r,i,t,tZt,s9e)}}}function tje(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Z9e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function nje(e,t){const n=J9e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function mtn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Ooe)if(n[i])for(const s of n[i]){const o=ytn(e,t,i,n,s);o!=null&&r.push(o)}return r}function gtn(e,t){const{sort:n}=e;return em(n)?{field:Tt(n,{expr:"datum"}),order:n.order??"ascending"}:Xe(n)?{field:t2(e,t,{expr:"datum"}),order:"ascending"}:{field:Tt(e,{expr:"datum"}),order:n??"ascending"}}function mK(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=l9(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=soe({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=u9(t,a);return{text:{signal:u?g_(g_(u,"datum.label",l),"datum.value",Tt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...nje(s,c),...tje(c,s,o),...rje(n,e,t,nZt,o9e)}}function ytn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=l9(["labelOrient"],o.header,a,t);(t==="row"&&!Er(["top","bottom"],f)||t==="column"&&!Er(["left","right"],f))&&(s=mK(o,t,a))}const u=nf(e)&&!aP(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:gtn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const vtn={column:{start:0,end:1},row:{start:1,end:0}};function btn(e,t){return vtn[t][e]}function xtn(e,t){const n={};for(const r of ed){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=l9(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=u9(r,o),u=btn(s,a);u!==void 0&&(n[a]=u)}}return Fi(n)?void 0:n}function rje(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=n2(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function $oe(e){return[...UO(e,"width"),...UO(e,"height"),...UO(e,"childWidth"),...UO(e,"childHeight")]}function UO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ya(o)&&eb(a)){const u=e.scaleName(n);return nf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[rxe(u,a)]:[rxe(u,a),{name:i,update:ije(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=aK(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function rxe(e,t){const n=`${e}_step`;return Xt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function ije(e,t,n){const r=t.get("type"),i=t.get("padding"),s=uo(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${yh(o)}, ${yh(s)}) * ${e}_step`}function sje(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function oje(e,t){return ct(e).reduce((n,r)=>{const i=e[r];return{...n,...gC(t,i,r,s=>as(s.value))}},{})}function aje(e,t){if(nf(t))return e==="theta"?"independent":"shared";if(xC(t))return"shared";if(zoe(t))return lo(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Moe(e,t){const n=e.scale[t],r=lo(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&pt(JXt(t)),"independent"):e[r][t]||"shared"}const _tn={...sZt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},uje=ct(_tn);class wtn extends iy{}const ixe={symbols:Etn,gradient:Stn,labels:Ttn,entries:Ctn};function Etn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...lXt({},n,uJt),...O9e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?lje(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===bc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=as(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=as(m??1));else if(Xe(f.fill)){const g=gK(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=as(g))}}if(f.stroke){if(r==="stroke"||!c&&r===bc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Xe(f.stroke)){const g=uo(gK(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ty){const g=gt(t)&&fje(n,i,t);g?f.opacity=[{test:g,...as(m??1)},as(u.legend.unselectedOpacity)]:m&&(f.opacity=as(m))}return f={...f,...e},Fi(f)?void 0:f}function Stn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?lje(o.opacity)||s.opacity:void 0;return l&&(a.opacity=as(l)),a={...a,...e},Fi(a)?void 0:a}function Ttn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=gt(t)?fje(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;x_(c)?f=bh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=bh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&gt(t)&&t.timeUnit===void 0&&(f=bh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Fi(d)?void 0:d}function Ctn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function lje(e){return cje(e,(t,n)=>Math.max(t,n.value))}function gK(e){return cje(e,(t,n)=>uo(t,n.value))}function cje(e,t){if(_Jt(e))return Nt(e.condition).reduce(t,e.value);if(jh(e))return e.value}function fje(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Et(n.field);return r.map(s=>`(!length(data(${Et(Ss(s)+E_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const sxe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return wBe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return EBe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Ptn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Otn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Itn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>MS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if($S(n)&&vh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Atn(t,e)};function Atn(e,t){const n=e.values;if(Xe(n))return UBe(t,n);if(Xt(n))return n}function Itn(e,t,n,r){if(t!=="shape"){const i=gK(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function ktn(e){const{legend:t}=e;return uo(t.type,Rtn(e))}function Rtn({channel:e,timeUnit:t,scaleType:n}){if($S(e)){if(Er(["quarter","month","day"],t))return"symbol";if(vh(n))return"gradient"}return"symbol"}function Dtn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Ntn(n,t)}function Ntn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Ptn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(vh(i))return n==="horizontal"?r==="top"||r==="bottom"?oxe(t,"width",o,s):o:oxe(t,"height",u,a)}function oxe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Otn(e){if(Er(["quantile","threshold","log","symlog"],e))return"greedy"}function dje(e){const t=Hs(e)?$tn(e):Btn(e);return e.component.legends=t,t}function $tn(e){const{encoding:t}=e,n={};for(const r of[bc,...u9e]){const i=zo(t[r]);!i||!e.getScaleComponent(r)||r===xc&&gt(i)&&i.type===mC||(n[r]=Ftn(e,r))}return n}function Mtn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Ltn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Ftn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new wtn({},Mtn(e,t));Gen(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=zo(i[t]),f=gt(c)?(w=ma(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=ktn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Dtn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of uje){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in sxe?sxe[E](m):n[E];if(T!==void 0){const C=Ltn(T,E,n,e.fieldDef(t));(C||s.legend[E]===void 0)&&a.set(E,T,C)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=oje(g[E]??{},e),C=E in ixe?ixe[E](T,x):T;C!==void 0&&!Fi(C)&&(v[E]={...y!=null&&y.length&&gt(c)?{name:`${Ss(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:C})}return Fi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Btn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){dje(r);for(const i of ct(r.component.legends))n.legend[i]=Moe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=hje(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ct(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function hje(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of uje){const c=hv(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return jtn(f,d);case"title":return Y8e(f,d);case"type":return i=!0,Oc("symbol")}return r9(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&FL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&FL(e.explicit,["encode","gradient"])),e}function jtn(e,t){return t.value==="circle"?t:e}function Utn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function pje(e){const t=e.component.legends,n={};for(const i of ct(t)){const s=e.getScaleComponent(i),o=Bi(s.get("domains"));if(n[o])for(const a of n[o])hje(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return ja(n).flat().map(i=>ztn(i,e.config)).filter(i=>i!==void 0)}function ztn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of u9e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Xt(s.encode.labels.update.text)&&(l=g_(r,"datum.label",s.encode.labels.update.text.signal)),Utn(s,"labels","text",{signal:l})}return s}}function Vtn(e){return xC(e)||zoe(e)?Htn(e):mje(e)}function Htn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),mje(e))}function mje(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Xt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Er(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const qtn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class gje extends iy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function yje(e){e.component.projection=Hs(e)?Wtn(e):Ktn(e)}function Wtn(e){if(e.hasProjection){const t=ql(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Gtn(e):void 0,s=new gje(e.projectionName(!0),{...ql(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Gtn(e){const t=[],{encoding:n}=e;for(const r of[[ep,Zh],[pd,tp]])(zo(n[r[0]])||zo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(xc)&&e.typedFieldDef(xc).type===mC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(xs.Main)),t}function Ytn(e,t){const n=kse(qtn,i=>!!(!sn(e.explicit,i)&&!sn(t.explicit,i)||sn(e.explicit,i)&&sn(t.explicit,i)&&Kc(e.get(i),t.get(i))));if(Kc(e.size,t.size)){if(n)return e;if(Kc(e.explicit,{}))return t;if(Kc(t.explicit,{}))return e}return null}function Ktn(e){if(e.children.length===0)return;let t;for(const r of e.children)yje(r);const n=kse(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Ytn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new gje(r,t.specifiedProjection,t.size,An(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Xtn(e,t,n,r){if(lP(t,n)){const i=Hs(e)?e.axis(n)??e.legend(n)??{}:{},s=Tt(t,{expr:"datum"}),o=Tt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Tt(t,{binSuffix:"range",forAs:!0}),formula:oP(s,o,i.format,i.formatType,r)}}return{}}function vje(e,t){return`${j8e(e)}_${t}`}function Qtn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Loe(e,t,n){const r=QB(n,void 0)??{},i=vje(r,t);return e.getName(`${i}_bins`)}function Jtn(e){return"as"in e}function axe(e,t,n){let r,i;Jtn(e)?r=Pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Tt(e,{forAs:!0}),Tt(e,{binSuffix:"end",forAs:!0})];const s={...QB(t,void 0)},o=vje(s,e.field),{signal:a,extentSignal:u}=Qtn(n,o);if(jB(s.extent)){const c=s.extent;i=X9e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class nm extends ki{clone(){return new nm(null,An(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(vl(s)&&Zi(s.bin)){const{key:a,binComponent:u}=axe(s,s.bin,n);i[a]={...u,...i[a],...Xtn(n,s,o,n.config)}}return i},{});return Fi(r)?null:new nm(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=axe(n,n.bin,r);return new nm(t,{[i]:s})}merge(t,n){for(const r of ct(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Bp([...this.bins[r].as,...t.bins[r].as],wr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(ja(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ja(this.bins).map(t=>t.field))}hash(){return`Bin ${wr(this.bins)}`}assemble(){return ja(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:hd(t.field),as:r,signal:t.signal,...jB(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:hd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Tt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ztn(e,t,n,r){var s;const i=Hs(r)?r.encoding[Vm(t)]:void 0;if(vl(n)&&Hs(r)&&PBe(n,i,r.markDef,r.config)){e.add(Tt(n,{})),e.add(Tt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=dv({fieldDef:n,markDef:a,config:u});dD(o)&&l!==.5&&lo(t)&&(e.add(Tt(n,{suffix:i9})),e.add(Tt(n,{suffix:s9}))),n.bin&&lP(n,t)&&e.add(Tt(n,{binSuffix:"range"}))}else if(R8e(t)){const o=k8e(t);e.add(r.getName(o))}else e.add(Tt(n));return yw(n)&&VQt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function enn(e,t){for(const n of ct(t)){const r=t[n];for(const i of ct(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ah extends ki{clone(){return new Ah(null,new Set(this.dimensions),An(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Tt(o,{forAs:!0})]);else{if(kg(u)||Zv(u)){const c=kg(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Tt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Tt(o,{forAs:!0})]);ny(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Tt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Tt({field:l,aggregate:"max"},{forAs:!0})]))}else Ztn(s,a,o,n)}),s.size+ct(i).length===0)?null:new Ah(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Tt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Tt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+ct(i).length===0?null:new Ah(t,r,i)}merge(t){return _8e(this.dimensions,t.dimensions)?(enn(this.measures,t.measures),!0):(pQt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ct(this.measures)])}producedFields(){const t=new Set;for(const n of ct(this.measures))for(const r of ct(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${wr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ct(this.measures))for(const o of ct(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:hd(s));return{type:"aggregate",groupby:[...this.dimensions].map(hd),ops:t,fields:n,as:r}}}class vC extends ki{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of ed){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Tt(o),...Zi(a)?[Tt(o,{binSuffix:"end"})]:[]],...em(u)?{sortField:u}:Xe(u)?{sortIndexField:t2(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ed)this[n]&&(t+=` ${n.charAt(0)}:${wr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ed)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ed)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Hm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ya(i)&&eb(s)){const o=c9(this.childModel,n),a=Uoe(o);a?t[n]=a:pt(zse(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=GB,field:f}=u;s.push(f),o.push(c),a.push(Tt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Poe){for(const c of Ooe){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[tg,eg])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function uxe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function tnn(e,t){const n=Nse(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=uxe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=uxe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return pt(EXt(t)),null}function nnn(e){const t={};return T6(e.filter,n=>{if(fBe(n)){let r=null;Wse(n)?r=zc(n.equal):Yse(n)?r=zc(n.lte):Gse(n)?r=zc(n.lt):Kse(n)?r=zc(n.gt):Xse(n)?r=zc(n.gte):Qse(n)?r=n.range[0]:Jse(n)&&(r=(n.oneOf??n.in)[0]),r&&(pw(r)?t[n.field]="date":Xr(r)?t[n.field]="number":Pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function rnn(e){const t={};function n(r){QT(r)?t[r.field]="date":r.type==="quantitative"&&eXt(r.aggregate)?t[r.field]="number":HT(r.field)>1?r.field in t||(t[r.field]="flatten"):yw(r)&&em(r.sort)&&HT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Hs(e)||nf(e))&&e.forEachFieldDef((r,i)=>{if(vl(r))n(r);else{const s=dw(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Hs(e)){const{mark:r,markDef:i,encoding:s}=e;if(gw(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];gt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function inn(e){const t={};if(Hs(e)&&e.component.selection)for(const n of ct(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&HT(i.field)>1&&(t[i.field]="flatten")}return t}class Su extends ki{clone(){return new Su(null,An(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${wr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!I1(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ct(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:pt(vbe(a,r[a],u.value)))}for(const a of ct(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:pt(vbe(a,n[a],u)))}const s=new iy(n,r);i.copyAll(s);const o={};for(const a of ct(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return ct(o).length===0||i.parseNothing?null:new Su(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ct(this._parse)){const r=this._parse[n];HT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ct(this._parse))}dependentFields(){return new Set(ct(this._parse))}assembleTransforms(t=!1){return ct(this._parse).filter(n=>t?HT(n)>1:!0).map(n=>{const r=tnn(n,this._parse[n]);return r?{type:"formula",expr:r,as:hC(n)}:null}).filter(n=>n!==null)}}class gv extends ki{clone(){return new gv(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Uh])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Uh}}}class dP extends ki{clone(){return new dP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${wr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class hP extends ki{clone(){return new hP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${wr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class S_ extends ki{constructor(t){super(null),t??(t={name:"source"});let n;if(I1(t)||(n=t.format?{...ac(t.format,["parse"])}:{}),hD(t))this._data={values:t.values};else if(JT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Er(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else C9e(t)?this._data={values:[{type:"Sphere"}]}:(S9e(t)||I1(t))&&(this._data={});this._generator=I1(t),t.name&&(this._name=t.name),n&&!Fi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var lxe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},snn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},PI;function Foe(e){return e instanceof S_||e instanceof dP||e instanceof hP}class Boe{constructor(){PI.set(this,void 0),lxe(this,PI,!1,"f")}setModified(){lxe(this,PI,!0,"f")}get modifiedFlag(){return snn(this,PI,"f")}}PI=new WeakMap;class vw extends Boe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class joe extends Boe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class onn extends joe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ct(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class ann extends joe{constructor(t){super(),this.requiresSelectionId=t&&Noe(t)}run(t){t instanceof gv&&(this.requiresSelectionId&&(Foe(t.parent)||t.parent instanceof Ah||t.parent instanceof Su)||(this.setModified(),t.remove()))}}class unn extends Boe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof tm&&(r=t.producedFields(),Rse(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class lnn extends joe{constructor(){super()}run(t){t instanceof lc&&!t.isRequired()&&(this.setModified(),t.remove())}}class cnn extends vw{run(t){if(!Foe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Su)if(t instanceof Su)this.setModified(),t.merge(n);else{if(Dse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class fnn extends vw{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Su);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of ct(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Fi(i)){this.setModified();const o=new Su(t,i);for(const a of n){if(a instanceof Su)for(const u of ct(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Su&&ct(a.parse).length===0&&a.remove()}}}}}class dnn extends vw{run(t){t instanceof lc||t.numChildren()>0||t instanceof vC||t instanceof S_||(this.setModified(),t.remove())}}class hnn extends vw{run(t){const n=t.children.filter(i=>i instanceof tm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class pnn extends vw{run(t){const n=t.children.filter(i=>i instanceof Ah),r={};for(const i of n){const s=wr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ct(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class mnn extends vw{constructor(t){super(),this.model=t}run(t){const n=!(Foe(t)||t instanceof yC||t instanceof Su||t instanceof gv),r=[],i=[];for(const s of t.children)s instanceof nm&&(n&&!Dse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof nm?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class gnn extends vw{run(t){const n=[...t.children];if(!m_(n,o=>o instanceof lc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof lc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof lc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class bw extends ki{clone(){return new bw(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Tt(t)}hash(){return`JoinAggregateTransform ${wr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function ynn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Tt(r);return i&&t.push(i),t},[])}function vnn(e){return Xe(e)&&e.every(t=>Pt(t))&&e.length>1}class rg extends ki{clone(){return new rg(null,An(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(uo(f.order,"ascending"));const l={field:a,order:u};let c;return vnn(s)?c=s:Pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return _m(p)}).filter(h=>!!h),c=ynn(n),f=n.encoding.order;let d;if(Xe(f)||gt(f))d=q8e(f);else{const h=OBe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rg(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${wr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Tt(i,{binSuffix:"mid"})]:[Tt(i,{}),Tt(i,{binSuffix:"end"})]:[Tt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Tt(c,{expr:"datum"}),p=Tt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Tt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Tt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class bC extends ki{clone(){return new bC(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Tt(t)}hash(){return`WindowTransform ${wr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>jse(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function bnn(e){function t(n){if(!(n instanceof vC)){const r=n.clone();if(r instanceof lc){const i=vK+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ah||r instanceof rg||r instanceof bC||r instanceof bw)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function yK(e){if(e instanceof vC)if(e.numChildren()===1&&!(e.children[0]instanceof lc)){const t=e.children[0];(t instanceof Ah||t instanceof rg||t instanceof bC||t instanceof bw)&&t.addDimensions(e.fields),t.swapWithParent(),yK(e)}else{const t=e.model.component.data.main;bje(t);const n=bnn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(yK)}function bje(e){if(e instanceof lc&&e.type===xs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof vC||(t.swapWithParent(),bje(e))}}const vK="scale_",zO=5;function bK(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!bK(t.children))return!1}return!0}function jd(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function cxe(e,t,n){let r=e.sources,i=!1;return i=jd(new lnn,r)||i,i=jd(new ann(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=jd(new dnn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=jd(new cnn,r)||i,i=jd(new mnn(t),r)||i,i=jd(new unn,r)||i,i=jd(new fnn,r)||i,i=jd(new pnn,r)||i,i=jd(new hnn,r)||i,i=jd(new onn,r)||i,i=jd(new gnn,r)||i),e.sources=r,i}function xnn(e,t){bK(e.sources);let n=0,r=0;for(let i=0;i<zO&&cxe(e,t,!0);i++)n++;e.sources.map(yK);for(let i=0;i<zO&&cxe(e,t,!1);i++)r++;bK(e.sources),Math.max(n,r)===zO&&pt(`Maximum optimization runs(${zO}) reached.`)}class oa{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new oa(()=>t(n))}}function xje(e){Hs(e)?_nn(e):wnn(e)}function _nn(e){const t=e.component.scales;for(const n of ct(t)){const r=Snn(e,n);if(t[n].setWithExplicit("domains",r),Cnn(e,n),e.component.data.isFaceted){let s=e;for(;!nf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)z0(a)&&(a.data=vK+a.data.replace(vK,""))}}}function wnn(e){for(const n of e.children)xje(n);const t=e.component.scales;for(const n of ct(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=hv(r,o.getWithExplicit("domains"),"domains","scale",xK);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&pt(bXt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Enn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=fxe(t,n);if(!i){pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=fxe(t,n);if(i)return"unaggregated"}return e}function Snn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Enn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&zo(r.x2)?zo(r.x)?hv(Iy(n,i,e,"x"),Iy(n,i,e,"x2"),"domain","scale",xK):Iy(n,i,e,"x2"):t==="y"&&zo(r.y2)?zo(r.y)?hv(Iy(n,i,e,"y"),Iy(n,i,e,"y2"),"domain","scale",xK):Iy(n,i,e,"y2"):Iy(n,i,e,t)}function Tnn(e,t,n){return e.map(r=>({signal:`{data: ${JB(r,{timeUnit:n,type:t})}}`}))}function LV(e,t,n){var i;const r=(i=ma(n))==null?void 0:i.unit;return t==="temporal"||r?Tnn(e,t,r):[e]}function Iy(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=zo(i[r]),{type:c}=l,f=l.timeUnit;if(zQt(t)){const p=Iy(e,void 0,n,r),m=LV(t.unionWith,c,f);return _p([...m,...p.value])}else{if(Xt(t))return _p([t]);if(t&&t!=="unaggregated"&&!vBe(t))return _p(LV(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Oc([[0,1]]);const p=n.requestDataName(xs.Main);return Oc([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=ny(r)&&gt(l)?Ann(n,r,e):void 0;if(qm(l)){const p=LV([l.datum],c,f);return Oc(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(xs.Main),{field:m}=l;return Oc([{data:p,field:Tt({field:m,aggregate:"min"})},{data:p,field:Tt({field:m,aggregate:"max"})}])}else if(Zi(h.bin)){if(ya(e))return Oc(e==="bin-ordinal"?[]:[{data:cD(d)?n.requestDataName(xs.Main):n.requestDataName(xs.Raw),field:n.vgField(r,lP(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!Ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Zi(p)){const m=Loe(n,h.field,p);return Oc([new oa(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Oc([{data:n.requestDataName(xs.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Er(["time","utc"],e)){const p=i[Vm(r)];if(PBe(h,p,s,a)){const m=n.requestDataName(xs.Main),g=dv({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=dD(o)&&g!==.5&&lo(r);return Oc([{data:m,field:n.vgField(r,y?{suffix:i9}:{})},{data:m,field:n.vgField(r,{suffix:y?s9:"end"})}])}}return Oc(d?[{data:cD(d)?n.requestDataName(xs.Main):n.requestDataName(xs.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(xs.Main),field:n.vgField(r)}])}function FV(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":GB),...r?{field:hd(r)}:{},...i?{order:i}:{}}}function Cnn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=vBe(r)&&r,o=hw(i)&&jB(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ann(e,t,n){if(!ya(n))return;const r=e.fieldDef(t),i=r.sort;if(DBe(i))return{op:"min",field:t2(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(em(i)){const a=s&&!o.has(i.field);return FV(i,a)}else if(RBe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(kg(c)||Zv(c))return FV({field:Tt(l),order:u},d);if(jse(c)||!c)return FV({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Er(["ascending",void 0],i))return!0}}function fxe(e,t){const{aggregate:n,type:r}=e;return n?Pt(n)&&!nXt.has(n)?{valid:!1,reason:qXt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:WXt(e)}:{valid:!0}:{valid:!1,reason:HXt(e)}}function xK(e,t,n,r){return e.explicit&&t.explicit&&pt(QXt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Inn(e){const t=Bp(e.map(o=>{if(z0(o)){const{sort:a,...u}=o;return u}return o}),wr),n=Bp(e.map(o=>{if(z0(o)){const a=o.sort;return a!==void 0&&!cD(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),wr);if(t.length===0)return;if(t.length===1){const o=e[0];if(z0(o)&&n.length>0){let a=n[0];if(n.length>1){pt(xbe);const u=n.filter(l=>Ot(l)&&"op"in l&&l.op!=="min");n.every(l=>Ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Bp(n.map(o=>cD(o)||!("op"in o)||Pt(o.op)&&o.op in JKt?o:(pt(ZXt(o)),!0)),wr);let i;r.length===1?i=r[0]:r.length>1&&(pt(xbe),i=!0);const s=Bp(e.map(o=>z0(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Uoe(e){if(z0(e)&&Pt(e.field))return e.field;if(rXt(e)){let t;for(const n of e.fields)if(z0(n)&&Pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return pt(eQt),t}return pt(tQt),t}else if(iXt(e)){pt(nQt);const t=e.fields[0];return Pt(t)?t:void 0}}function c9(e,t){const r=e.component.scales[t].get("domains").map(i=>(z0(i)&&(i.data=e.lookupDataSource(i.data)),i));return Inn(r)}function _je(e){return xC(e)||zoe(e)?e.children.reduce((t,n)=>t.concat(_je(n)),dxe(e)):dxe(e)}function dxe(e){return ct(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=knn(i.range,s,n,e),h=c9(e,n),p=a?Een(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function knn(e,t,n,r){if(lo(n)){if(eb(e))return{step:{signal:`${t}_step`}}}else if(Ot(e)&&z0(e))return{...e,data:r.lookupDataSource(e.data)};return e}class wje extends iy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:m_(this.get("domains"),t=>Xe(t)&&t.length===2&&Xr(t[0])&&t[0]<=0&&Xr(t[1])&&t[1]>=0)}}const Rnn=["range","scheme"];function Dnn(e){const t=e.component.scales;for(const n of BB){const r=t[n];if(!r)continue;const i=Nnn(n,e);r.setWithExplicit("range",i)}}function hxe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=_c(t),o=e.getName(s);if(Ot(r)&&r.binned&&r.step!==void 0)return new oa(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Zi(r)){const a=Loe(e,i,r);return new oa(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Nnn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Rnn)if(n[f]!==void 0){const d=iK(s,f),h=bBe(e,f);if(!d)pt(J8e(s,f,e));else if(h)pt(h);else switch(f){case"range":{const p=n.range;if(Xe(p)){if(lo(e))return _p(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return oa.fromName(y,g)}return m}))}else if(Ot(p))return _p({data:t.requestDataName(xs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return _p(p)}case"scheme":return _p(Pnn(n[f]))}}const o=e===Cs||e==="xOffset"?"width":"height",a=r[o];if(wm(a)){if(lo(e))if(ya(s)){const f=Sje(a,t,e);if(f)return _p({step:f})}else pt(Z8e(o));else if(rP(e)){const f=e===Yv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Tje(a,s);if(p)return _p(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Onn(e,t);return(u!==void 0||l!==void 0)&&iK(s,"rangeMin")&&Xe(c)&&c.length===2?_p([u??c[0],l??c[1]]):Oc(c)}function Pnn(e){return UQt(e)?{scheme:e.name,...ac(e,["name"])}:{scheme:e}}function Eje(e,t,n,{center:r}={}){const i=_c(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===xa&&bf(n)?r?[oa.fromName(a=>`${o(a)}/2`,s),oa.fromName(a=>`-${o(a)}/2`,s)]:[oa.fromName(o,s),0]:r?[oa.fromName(a=>`-${o(a)}/2`,s),oa.fromName(a=>`${o(a)}/2`,s)]:[0,oa.fromName(o,s)]}function Onn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=zo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Cs:case xa:{if(Er(["point","band"],u)){const f=Cje(e,n,r.view);if(wm(f))return{step:Sje(f,t,e)}}return Eje(e,t,u)}case Yv:case pC:return $nn(e,t,u);case ey:{const f=t.component.scales[e].get("zero"),d=Aje(i,f,r),h=Fnn(i,n,t,r);return YT(u)?Lnn(d,h,Mnn(u,r,l,e)):[d,h]}case Cd:return[0,Math.PI*2];case fw:return[0,360];case Jh:return[0,new oa(()=>{const f=t.getSignalName(nf(t.parent)?"child_width":"width"),d=t.getSignalName(nf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Qv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Jv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case xc:return"symbol";case bc:case Um:case zm:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ty:case Kv:case Xv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Sje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Mse(n),o=r[s];if(c9e({step:e,offsetIsDiscrete:Mn(o)&&hBe(o.type)})==="offset"&&qBe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${uXt(f)})`}}else return e.step}function Tje(e,t){if(c9e({step:e,offsetIsDiscrete:ya(t)})==="offset")return{step:e.step}}function $nn(e,t,n){const r=e===Yv?"x":"y",i=t.getScaleComponent(r);if(!i)return Eje(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=Cje(r,t.size,t.config.view);if(wm(l)){const c=Tje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(gt(l)&&l.timeUnit){const c=lBe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=dv({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Xt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Xt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return b8e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Cje(e,t,n){const r=e===Cs?"width":"height",i=t[r];return i||KL(n,r)}function Mnn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Xe(n)?n.length+1:(pt(fQt(r)),3)}}function Lnn(e,t,n){const r=()=>{const i=yh(t),s=yh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Xt(t)?new oa(r):{signal:r()}}function Aje(e,t,n){if(t)return Xt(t)?{signal:`${t.signal} ? 0 : ${Aje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(UB("size",e))}const pxe=.95;function Fnn(e,t,n,r){const i={x:hxe(n,"x"),y:hxe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=mxe(t,i,r.view);return Xr(s)?s-1:new oa(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=mxe(t,i,r.view);return Xr(s)?Math.pow(pxe*s,2):new oa(()=>`pow(${pxe} * ${s.signal}, 2)`)}}throw new Error(UB("size",e))}function mxe(e,t,n){const r=wm(e.width)?e.width.step:YL(n,"width"),i=wm(e.height)?e.height.step:YL(n,"height");return t.x||t.y?new oa(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Ije(e,t){Hs(e)?Bnn(e,t):Rje(e,t)}function Bnn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of ct(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=zo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=iK(h,t),y=bBe(a,t);if(d!==void 0&&(g?y&&pt(y):pt(J8e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":pw(u[t])||x==="temporal"||v?l.set(t,{signal:JB(u[t],{type:x,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in gxe?gxe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:WBe(i,a),hasSecondaryRangeChannel:!!i[Vm(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const gxe={bins:({model:e,fieldOrDatumDef:t})=>gt(t)?jnn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Unn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>znn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Vnn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Hnn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>qnn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=gt(e)?e.sort:void 0;return Wnn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Gnn(e,t,n,r,i,s.scale,o)};function kje(e){Hs(e)?Dnn(e):Rje(e,"range")}function Rje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?kje(r):Ije(r,t);for(const r of ct(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=hv(i,a,t,"scale",E9e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function jnn(e,t){const n=t.bin;if(Zi(n)){const r=Loe(e,t.field,n);return new oa(()=>e.getSignalName(r))}else if(Ra(n)&&hw(n)&&n.step!==void 0)return{step:n.step}}function Unn(e,t){if(Er([bc,Um,zm],e)&&t!=="nominal")return"hcl"}function znn(e,t,n,r,i,s){var o;if(!((o=_m(s))!=null&&o.bin||Xe(n)||i!=null||r!=null||Er([uc.TIME,uc.UTC],e)))return lo(t)?!0:void 0}function Vnn(e,t,n,r,i,s){if(lo(e)){if(vh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(gt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===uc.POINT)return n.pointPadding}}function Hnn(e,t,n,r,i,s=!1){if(e===void 0){if(lo(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:uo(o,n==="bar"?a:u)}else if(rP(t)&&r===uc.BAND)return i.offsetBandPaddingInner}}function qnn(e,t,n,r,i,s=!1){if(e===void 0){if(lo(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===uc.BAND)return uo(o,Xt(r)?{signal:`${r.signal}/2`}:r/2)}else if(rP(t)){if(n===uc.POINT)return .5;if(n===uc.BAND)return i.offsetBandPaddingOuter}}}function Wnn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return bf(e)&&t==="descending"?Xt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(bf(e)&&t==="descending")return!0}function Gnn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&bf(i)){if(Xe(n)){const u=n[0],l=n[n.length-1];if(Xr(u)&&u<=0&&Xr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!YT(i))return!0;if(!(gt(t)&&t.bin)&&Er([...Hm,...HKt],e)){const{orient:u,type:l}=r;return Er(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Er(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Ynn(e,t,n,r,i=!1){const s=Knn(t,n,r,i),{type:o}=e;return ny(t)?o!==void 0?YQt(t,o)?gt(n)&&!GQt(o,n.type)?(pt(KXt(o,s)),s):o:(pt(YXt(t,o,s)),s):s:null}function Knn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if($S(e)||kV(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&pt(RV(e,"ordinal")),"ordinal";if(lo(e)||rP(e)){if(Er(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Bse)return"band";const s=n[_c(e)];return __(s)||XT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return $S(e)?"time":kV(e)==="discrete"?(pt(RV(e,"temporal")),"ordinal"):gt(t)&&t.timeUnit&&ma(t.timeUnit).utc?"utc":"time";case"quantitative":return $S(e)?gt(t)&&Zi(t.bin)?"bin-ordinal":"linear":kV(e)==="discrete"?(pt(RV(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(X8e(t.type))}function Xnn(e,{ignoreRange:t}={}){Dje(e),xje(e);for(const n of WQt)Ije(e,n);t||kje(e)}function Dje(e){Hs(e)?e.component.scales=Qnn(e):e.component.scales=Znn(e)}function Qnn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of BB){const o=zo(t[s]);if(o&&n===ABe&&s===xc&&o.type===mC)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=WBe(t,s),l=Ynn(a,s,o,r,u);i[s]=new wje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Jnn=E9e((e,t)=>wbe(e)-wbe(t));function Znn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Dje(s);for(const o of ct(s.component.scales))if((t=i.scale)[o]??(t[o]=aje(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?MQt(a.value,u.value)?r[o]=hv(a,u,"type","scale",Jnn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of ct(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new wje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class BV{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Hs(e){return(e==null?void 0:e.type)==="unit"}function nf(e){return(e==null?void 0:e.type)==="facet"}function zoe(e){return(e==null?void 0:e.type)==="concat"}function xC(e){return(e==null?void 0:e.type)==="layer"}class Voe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=ql(a),this.name=t.name??i,this.title=Fy(t.title)?{text:t.title}:t.title?ql(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new BV,this.projectionNameMap=r?r.projectionNameMap:new BV,this.signalNameMap=r?r.signalNameMap:new BV,this.data=t.data,this.description=t.description,this.transforms=oen(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:cZt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:YB(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new iy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?An(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Xnn(this)}parseProjection(){yje(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){dje(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of ct(r)){const o=r[s];o!==void 0&&(i[s]=as(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=as(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Fi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=xtn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ed)t[r].title&&n.push(ptn(this,r));for(const r of Poe)n=n.concat(mtn(this,r));return n}assembleAxes(){return ttn(this.component.axes,this.config)}assembleLegends(){return pje(this)}assembleProjections(){return Vtn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...U8e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Er(["unit","layer"],this.type)?Er(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Fi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||nf(this.parent)?_je(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ss((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(xs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(nf(this.parent)){const n=sje(t),r=FB(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ya(s)&&eb(o)){const a=i.get("name"),u=c9(this,r),l=Uoe(u);if(l){const c=Tt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:ije(a,i,c)}}else return pt(zse(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(N8e(t)&&ny(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(hXt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Nje extends Voe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Tt(r,n)}reduceFieldDef(t,n){return BJt(this.getMapping(),(r,i,s)=>{const o=_m(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){moe(this.getMapping(),(r,i)=>{const s=_m(r);s&&t(s,i)},n)}}class f9 extends ki{clone(){return new f9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${wr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class d9 extends ki{clone(){return new d9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${wr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class pD extends ki{clone(){return new pD(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(pi("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=ny(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");bf(d)&&l.aggregate!=="count"&&!gw(i)&&(u[l.field]=l)}return u},{});return ct(a).length?new pD(t,a):null}dependentFields(){return new Set(ct(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${wr(this.filter)}`}assemble(){const t=ct(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Tt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class h9 extends ki{clone(){return new h9(this.parent,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${wr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class p9 extends ki{clone(){return new p9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${wr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class FS extends ki{clone(){return new FS(null,An(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ep,Zh],[pd,tp]]){const s=i.map(o=>{const a=zo(n.encoding[o]);return gt(a)?a.field:qm(a)?{expr:`${a.datum}`}:jh(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new FS(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(xc)){const i=n.typedFieldDef(xc);i.type===mC&&(t=new FS(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${wr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class mD extends ki{clone(){return new mD(null,this.projection,An(this.fields),An(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ep,Zh],[pd,tp]]){const i=r.map(o=>{const a=zo(n.encoding[o]);return gt(a)?a.field:qm(a)?{expr:`${a.datum}`}:jh(a)?{expr:`${a.value}`}:void 0}),s=r[0]===pd?"2":"";(i[0]||i[1])&&(t=new mD(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${wr(this.fields)} ${wr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ux extends ki{clone(){return new Ux(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ux(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(gt(i)&&gt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=YBe(n.mark,r);return new Ux(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${wr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:UZt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class m9 extends ki{clone(){return new m9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${wr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class gD extends ki{clone(){return new gD(null,An(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(zZt(o)){let u=$je(o.data,s);u||(u=new S_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new lc(u,l,xs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(VZt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ss(u),u)}catch{throw new Error(yXt(u))}if(a=l.materialized,!a)throw new Error(vXt(u))}return new gD(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${wr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Nt(this.transform.as)}:{}};else{let n=this.transform.as;Pt(n)||(pt(CXt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class g9 extends ki{clone(){return new g9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${wr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class y9 extends ki{clone(){return new y9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${wr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class v9 extends ki{clone(){return new v9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${wr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class b9 extends ki{clone(){return new b9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${wr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Pje(e){let t=0;function n(r,i){if(r instanceof S_&&!r.isGenerator&&!JT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Su&&(r.parent instanceof S_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof vC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof dP||r instanceof hP||r instanceof pD||r instanceof yC||r instanceof e2||r instanceof mD||r instanceof Ah||r instanceof gD||r instanceof bC||r instanceof bw||r instanceof p9||r instanceof h9||r instanceof f9||r instanceof m9||r instanceof g9||r instanceof y9||r instanceof gv||r instanceof b9||r instanceof v9||r instanceof d9)&&i.transform.push(r.assemble()),(r instanceof nm||r instanceof tm||r instanceof Ux||r instanceof rg||r instanceof FS)&&i.transform.push(...r.assemble()),r instanceof lc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof lc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof lc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function ern(e){const t=[],n=Pje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function trn(e,t){const n=[],r=Pje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function nrn(e){return e==="top"||e==="left"||Xt(e)?"header":"footer"}function rrn(e){for(const t of ed)irn(e,t);yxe(e,"x"),yxe(e,"y")}function irn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=n2("title",null,r,t);let l=MS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Xe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=n2("labelOrient",a.header,r,t),f=a.header!==null?uo((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Er(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Oje(e,t,f)]}}}function Oje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function yxe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Moe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=nrn(a.get("orient"));o[u]??(o[u]=[Oje(e,s,!1)]);const l=NI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function srn(e){Hoe(e),ZL(e,"width"),ZL(e,"height")}function orn(e){Hoe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";ZL(e,t),ZL(e,n)}function Hoe(e){for(const t of e.children)t.parseLayoutSize()}function ZL(e,t){const n=sje(t),r=FB(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??aje(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=hv(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function arn(e){const{size:t,component:n}=e;for(const r of Hm){const i=_c(r);if(t[i]){const s=t[i];n.layoutSize.set(i,wm(s)?"step":s,!0)}else{const s=urn(e,i);n.layoutSize.set(i,s,!1)}}}function urn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ya(s)){const a=KL(r.view,t);return eb(o)||wm(a)?"step":a}else return aK(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return aK(r.view,t);{const s=KL(r.view,t);return wm(s)?s.step:s}}}function _K(e,t,n){return Tt(t,{suffix:`by_${Tt(e)}`,...n})}class Tk extends Nje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Koe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!aP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ct(t),r={};for(const i of n){if(![eg,tg].includes(i)){pt(UB(i,"facet"));break}const s=t[i];if(s.field===void 0){pt(nK(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=hoe(t,n);return r.header?r.header=ql(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=x9(this),this.child.parseData()}parseLayoutSize(){Hoe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),rrn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ed)for(const r of Ooe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=n2("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=u9(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Tk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Tk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Tt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Tk){if(this.child.channelHasField("column")){const i=Tt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Hm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ya(o)&&eb(a)){const u=c9(this.child,i),l=Uoe(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):pt(zse(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of ed){const f=this.facet[c];if(f){u.push(Tt(f));const{bin:d,sort:h}=f;if(Zi(d)&&u.push(Tt(f,{binSuffix:"end"})),em(h)){const{field:p,op:m=GB}=h,g=_K(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Xe(h)){const p=t2(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?em(r.sort)?[_K(r,r.sort,{expr:"datum"})]:Xe(r.sort)?[t2(r,t,{expr:"datum"})]:[Tt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(em(i)?i.order:!Xe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return mK(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Poe)if(t[s]){const o=n2("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return mK(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=ern(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:ed.map(u=>this.facetSortFields(u)).flat(),order:ed.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(ben(this,[]))}]}getMapping(){return this.facet}}function lrn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(em(s.sort)){const{field:o,op:a=GB}=s.sort;e=i=new bw(e,{joinaggregate:[{op:a,field:o,as:_K(s,s.sort,{forAs:!0})}],groupby:[Tt(s)]})}return i}return null}function $je(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(hD(e)&&hD(a)){if(Kc(e.values,a.values))return o}else if(JT(e)&&JT(a)){if(e.url===a.url)return o}else if(S9e(e)&&e.name===o.dataName)return o}}return null}function crn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new S_({values:[]});return t.push(r),r}const n=$je(e.data,t);if(n)return I1(e.data)||(n.data.format=x8e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new S_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function frn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ZZt(i))o=e=new e2(e,i),s="derived";else if(Coe(i)){const a=nnn(i);o=e=Su.makeWithAncestors(e,{},a,n)??e,e=new yC(e,t,i.filter)}else if(b9e(i))o=e=nm.makeFromTransform(e,i,t),s="number";else if(ten(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Su(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=tm.makeFromTransform(e,i);else if(nen(i))o=e=Ah.makeFromTransform(e,i),s="number",Noe(t)&&(e=new gv(e));else if(v9e(i))o=e=gD.make(e,t,i,r++),s="derived";else if(XZt(i))o=e=new bC(e,i),s="number";else if(QZt(i))o=e=new bw(e,i),s="number";else if(ren(i))o=e=rg.makeFromTransform(e,i),s="derived";else if(ien(i))o=e=new p9(e,i),s="derived";else if(sen(i))o=e=new d9(e,i),s="derived";else if(JZt(i))o=e=new h9(e,i),s="derived";else if(HZt(i))o=e=new v9(e,i),s="derived";else if(KZt(i))e=new b9(e,i);else if(een(i))o=e=Ux.makeFromTransform(e,i),s="derived";else if(qZt(i))o=e=new f9(e,i),s="derived";else if(WZt(i))o=e=new g9(e,i),s="derived";else if(GZt(i))o=e=new y9(e,i),s="derived";else if(YZt(i))o=e=new m9(e,i),s="derived";else{pt(TXt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function x9(e){var h;let t=crn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(I1(i)||JT(i)||hD(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new yen;I1(i)?(T9e(i)?t=new hP(t,i.sequence):Aoe(i)&&(t=new dP(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Su.makeExplicit(t,e,o)??t,t=new gv(t);const a=e.parent&&xC(e.parent);(Hs(e)||nf(e))&&a&&(t=nm.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=frn(t,e,o));const u=inn(e),l=rnn(e);t=Su.makeWithAncestors(t,{},{...u,...l},o)??t,Hs(e)&&(t=FS.parseAll(t,e),t=mD.parseAll(t,e)),(Hs(e)||nf(e))&&(a||(t=nm.makeFromEncoding(t,e)??t),t=tm.makeFromEncoding(t,e)??t,t=e2.parseAllForSortIndex(t,e));const c=t=vxe(xs.Raw,e,t);if(Hs(e)){const p=Ah.makeFromEncoding(t,e);p&&(t=p,Noe(e)&&(t=new gv(t))),t=Ux.makeFromEncoding(t,e)??t,t=rg.makeFromEncoding(t,e)??t}Hs(e)&&(t=pD.make(t,e)??t);const f=t=vxe(xs.Main,e,t);Hs(e)&&Zen(e,f);let d=null;if(nf(e)){const p=e.getName("facet");t=lrn(t,e.facet)??t,d=new vC(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function vxe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new lc(n,s,e,i);return r[s]=o,o}class drn extends Voe{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&pt(wXt),this.children=this.getChildren(t).map((l,c)=>Koe(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=x9(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return t9(t)?t.vconcat:Soe(t)?t.hconcat:t.concat}parseLayoutSize(){orn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=$oe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function hrn(e){return e===!1||e===null}const prn={disable:1,gridScale:1,scale:1,...VBe,labelExpr:1,encode:1},Mje=ct(prn);class qoe extends iy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new qoe(An(this.explicit),An(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!hrn(this.get(t))}hasOrientSignalRef(){return Xt(this.explicit.orient)}}function mrn(e,t,n){const{encoding:r,config:i}=e,s=zo(r[t])??zo(r[Vm(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(x_(u))return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(KT(s)==="quantitative"){if(XT(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(KT(s)==="temporal"&&i.timeFormatType&&gt(s)&&!s.timeUnit)return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function grn(e){return Hm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Ern(n,e)]),t),{})}const yrn={bottom:"top",top:"bottom",left:"right",right:"left"};function vrn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of ct(i.component.axes))n.axis[s]=Moe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=brn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Hm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Xt(a)){if(r[a]>0&&!u){const l=yrn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function brn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=xrn(i,s)}}}else return t.map(n=>n.clone());return e}function xrn(e,t){for(const n of Mje){const r=hv(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return Y8e(i,s);case"gridScale":return{explicit:i.explicit,value:uo(i.value,s.value)}}return r9(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function _rn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Xt(n.labelAngle)?n.labelAngle:fD(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===eje(r,i))return!0}return e===n[t]}const wrn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Ern(e,t){var y,v;let n=t.axis(e);const r=new qoe,i=zo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||ltn(e),u=t.getScaleComponent(e).get("type"),l=ntn(e,u,a,t.config),c=n!==void 0?!n:hK("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=otn(i,n,e,o.style,l),d=EBe(n.formatType,i,u),h=wBe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const x of Mje){const w=x in nxe?nxe[x](p):kbe(x)?n[x]:void 0,E=w!==void 0,T=_rn(w,x,n,t,e);if(E&&T)r.set(x,w,T);else{const{configValue:C=void 0,configFrom:I=void 0}=kbe(x)&&x!=="values"?hK(x,o.style,n.style,l):{},N=C!==void 0;E&&!N?r.set(x,w,T):(I!=="vgAxisConfig"||wrn.has(x)&&N||cP(C)||Xt(C))&&r.set(x,C,!1)}}const m=n.encoding??{},g=zBe.reduce((x,w)=>{if(!r.hasAxisPart(w))return x;const E=oje(m[w]??{},t),T=w==="labels"?mrn(t,e,E):E;return T!==void 0&&!Fi(T)&&(x[w]={update:T}),x},{});return Fi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Srn({encoding:e,size:t}){for(const n of Hm){const r=_c(n);wm(t[r])&&u1(e[n])&&(delete t[r],pt(Z8e(r)))}return t}const Trn={vgMark:"arc",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Eu("x",e,{defaultPos:"mid"}),...Eu("y",e,{defaultPos:"mid"}),...pv(e,"radius"),...pv(e,"theta")})},Crn={vgMark:"area",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...XL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...XL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Doe(e)})},Arn={vgMark:"rect",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pv(e,"x"),...pv(e,"y")})},Irn={vgMark:"shape",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gt(n)&&n.type===mC?{field:Tt(n,{expr:"datum"})}:{}}]}},krn={vgMark:"image",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...pv(e,"x"),...pv(e,"y"),...koe(e,"url")})},Rrn={vgMark:"line",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Eu("x",e,{defaultPos:"mid"}),...Eu("y",e,{defaultPos:"mid"}),...ua("size",e,{vgChannel:"strokeWidth"}),...Doe(e)})},Drn={vgMark:"trail",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Eu("x",e,{defaultPos:"mid"}),...Eu("y",e,{defaultPos:"mid"}),...ua("size",e),...Doe(e)})};function Woe(e,t){const{config:n}=e;return{...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Eu("x",e,{defaultPos:"mid"}),...Eu("y",e,{defaultPos:"mid"}),...ua("size",e),...ua("angle",e),...Nrn(e,n,t)}}function Nrn(e,t,n){return n?{shape:{value:n}}:ua("shape",e)}const Prn={vgMark:"symbol",encodeEntry:e=>Woe(e)},Orn={vgMark:"symbol",encodeEntry:e=>Woe(e,"circle")},$rn={vgMark:"symbol",encodeEntry:e=>Woe(e,"square")},Mrn={vgMark:"rect",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pv(e,"x"),...pv(e,"y")})},Lrn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...XL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...XL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ua("size",e,{vgChannel:"strokeWidth"})}}},Frn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ad(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Eu("x",e,{defaultPos:"mid"}),...Eu("y",e,{defaultPos:"mid"}),...koe(e),...ua("size",e,{vgChannel:"fontSize"}),...ua("angle",e),...Jbe("align",Brn(e.markDef,n,t)),...Jbe("baseline",jrn(e.markDef,n,t)),...Eu("radius",e,{defaultPos:null}),...Eu("theta",e,{defaultPos:null})}}};function Brn(e,t,n){if(pi("align",e,n)===void 0)return"center"}function jrn(e,t,n){if(pi("baseline",e,n)===void 0)return"middle"}const Urn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Eu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Eu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ua("size",e,{defaultValue:zrn(e),vgChannel:i}),[s]:as(pi("thickness",n,t))}}};function zrn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=pi("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&eb(a)&&Xr(a.step)?a.step*3/4:YL(t.view,i)*3/4}}const VO={arc:Trn,area:Crn,bar:Arn,circle:Orn,geoshape:Irn,image:krn,line:Rrn,point:Prn,rect:Mrn,rule:Lrn,square:$rn,text:Frn,tick:Urn,trail:Drn};function Vrn(e){if(Er([qB,VB,iJt],e.mark)){const t=YBe(e.mark,e.encoding);if(t.length>0)return Hrn(e,t)}else if(e.mark===HB){const t=tK.some(n=>pi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return qrn(e)}return Goe(e)}const bxe="faceted_path_";function Hrn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:bxe+e.requestDataName(xs.Main),data:e.requestDataName(xs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Goe(e,{fromPrefix:bxe})}]}const xxe="stack_group_";function qrn(e){var l;const[t]=Goe(e,{fromPrefix:xxe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...VT(t.encode.update,["y","yc","y2","height",...tK]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ac(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...VT(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ac(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of tK){const f=Rg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=as(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Tt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Tt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Rg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:as(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(xs.Main),name:xxe+e.requestDataName(xs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Wrn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Xe(o)&&jh(o)&&ZY(o.value)||!o&&ZY(pi("order",i,s)))){if((Xe(o)||gt(o))&&!n)return q8e(o,{expr:"datum"});if(gw(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(gt(l)){const c=l.sort;if(Xe(c))return{field:Tt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(em(c))return{field:Tt({aggregate:poe(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(RBe(c)){const f=e.fieldDef(c.encoding);return{field:Tt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Tt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Goe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=uo(r.clip,Grn(e),Yrn(e)),a=V8e(r),u=i.key,l=Wrn(e),c=Krn(e),f=pi("aria",r,s),d=VO[n].postEncodingTransform?VO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:VO[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(xs.Main)},encode:{update:VO[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Grn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Yrn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Krn(e){if(!e.component.selection)return null;const t=ct(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ct(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Lje extends Nje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Dbe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=xm(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=PZt(o,s,{graticule:t.data&&Aoe(t.data)}));const u=this.encoding=LJt(t.encoding||{},a,o.filled,s);this.markDef=m9e(o,u,s),this.size=Srn({encoding:u,size:Dbe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=p9e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>woe(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===ABe,r=t&&$Kt.some(i=>Mn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return BB.reduce((r,i)=>{const s=zo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ql(t);return Xe(n)&&(i.domain=n.map(zc)),Xe(r)&&(i.range=r.map(zc)),i}initAxes(t){return Hm.reduce((n,r)=>{const i=t[r];if(Mn(i)||r===Cs&&Mn(t.x2)||r===xa&&Mn(t.y2)){const s=Mn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=ct(t),r={};for(const i of n){const s=t[i];r[i]=cP(s)?z8e(s):zc(s)}return r}initLegends(t){return qKt.reduce((n,r)=>{const i=zo(t[r]);if(i&&GKt(r)){const s=i.legend;n[r]=s&&ql(s)}return n},{})}parseData(){this.component.data=x9(this)}parseLayoutSize(){arn(this)}parseSelections(){this.component.selection=Jen(this,this.selection)}parseMarkGroup(){this.component.mark=Vrn(this)}parseAxesAndHeaders(){this.component.axes=grn(this)}assembleSelectionTopLevelSignals(t){return xen(this,t)}assembleSignals(){return[...Q9e(this),...ven(this,[])]}assembleSelectionData(t){return _en(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return $oe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!xC(this.parent))&&(t=I9e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Bx(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return _m(n)}typedFieldDef(t){const n=this.fieldDef(t);return vl(n)?n:null}}class Yoe extends Voe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(n9(a))return new Yoe(a,this,this.getName(`layer_${u}`),o,s);if(ry(a))return new Lje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Use(a))})}parseData(){this.component.data=x9(this);for(const t of this.children)t.parseData()}parseLayoutSize(){srn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){vrn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Q9e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),$oe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return wen(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),pje(this))}}function Koe(e,t,n,r,i){if(YB(e))return new Tk(e,t,n,i);if(n9(e))return new Yoe(e,t,n,r,i);if(ry(e))return new Lje(e,t,n,r,i);if(aZt(e))return new drn(e,t,n,i);throw new Error(Use(e))}function Xrn(e,t={}){t.logger&&dQt(t.logger),t.fieldTitle&&BBe(t.fieldTitle);try{const n=h9e(nC(t.config,e.config)),r=w9e(e,n),i=Koe(r,null,"",void 0,n);return i.parse(),xnn(i.component.data,i),{spec:Jrn(i,Qrn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&hQt(),t.fieldTitle&&IJt()}}function Qrn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Pt(t)&&(t={type:t}),i&&s&&pen(t.type)){if(i==="step"&&s==="step")pt(mbe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";pt(mbe(FB(o)));const a=o==="width"?"height":"width";t.type=men(a)}}return{...ct(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Vbe(n,!1),...Vbe(e,!0)}}function Jrn(e,t,n={},r){const i=e.config?_Zt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),trn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...l9e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Zrn=kKt.version,ein=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:HT,accessPathWithDatum:Nse,compile:Xrn,contains:Er,deepEqual:Kc,deleteNestedProperty:FL,duplicate:An,entries:cv,every:kse,fieldIntersection:Dse,flatAccessWithDatum:w8e,getFirstDefined:uo,hasIntersection:Rse,hash:wr,internalField:T8e,isBoolean:cD,isEmpty:Fi,isEqual:DKt,isInternalField:C8e,isNullOrFalse:ZY,isNumeric:NB,keys:ct,logicalExpr:Ek,mergeDeep:x8e,never:b8e,normalize:w9e,normalizeAngle:fD,omit:ac,pick:VT,prefixGenerator:eK,removePathFromField:hC,replaceAll:g_,replacePathInField:hd,resetIdCounter:PKt,setEqual:_8e,some:m_,stringify:Bi,titleCase:eP,unique:Bp,uniqueId:S8e,vals:ja,varName:Ss,version:Zrn},Symbol.toStringTag,{value:"Module"}));function Fje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var tin="vega-themes",nin="2.15.0",rin="Themes for stylized Vega and Vega-Lite visualizations.",iin=["vega","vega-lite","themes","style"],sin="BSD-3-Clause",oin={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ain=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],uin="build/vega-themes.js",Xoe="build/vega-themes.module.js",lin="build/vega-themes.min.js",cin="build/vega-themes.min.js",fin="build/vega-themes.module.d.ts",din={type:"git",url:"https://github.com/vega/vega-themes.git"},hin=["src","build"],pin={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},min={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},gin={vega:"*","vega-lite":"*"},yin={},vin={name:tin,version:nin,description:rin,keywords:iin,license:sin,author:oin,contributors:ain,main:uin,module:Xoe,unpkg:lin,jsdelivr:cin,types:fin,repository:din,files:hin,scripts:pin,devDependencies:min,peerDependencies:gin,dependencies:yin};const pE="#fff",_xe="#888",bin={background:"#333",view:{stroke:_xe},title:{color:pE,subtitleColor:pE},style:{"guide-label":{fill:pE},"guide-title":{fill:pE}},axis:{domainColor:pE,gridColor:_xe,tickColor:pE}},Eb="#4572a7",xin={background:"#fff",arc:{fill:Eb},area:{fill:Eb},line:{stroke:Eb,strokeWidth:2},path:{stroke:Eb},rect:{fill:Eb},shape:{stroke:Eb},symbol:{fill:Eb,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Sb="#30a2da",jV="#cbcbcb",_in="#999",win="#333",wxe="#f0f0f0",Exe="#333",Ein={arc:{fill:Sb},area:{fill:Sb},axis:{domainColor:jV,grid:!0,gridColor:jV,gridWidth:1,labelColor:_in,labelFontSize:10,titleColor:win,tickColor:jV,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:wxe,group:{fill:wxe},legend:{labelColor:Exe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Exe,titleFontSize:14,titlePadding:10},line:{stroke:Sb,strokeWidth:2},path:{stroke:Sb,strokeWidth:.5},rect:{fill:Sb},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Sb},bar:{binSpacing:2,fill:Sb,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Tb="#000",Sin={group:{fill:"#e5e5e5"},arc:{fill:Tb},area:{fill:Tb},line:{stroke:Tb},path:{stroke:Tb},rect:{fill:Tb},shape:{stroke:Tb},symbol:{fill:Tb,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Tin=22,Cin="normal",Sxe="Benton Gothic, sans-serif",Txe=11.5,Ain="normal",Cb="#82c6df",UV="Benton Gothic Bold, sans-serif",Cxe="normal",Axe=13,LA={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Iin={background:"#ffffff",title:{anchor:"start",color:"#000000",font:UV,fontSize:Tin,fontWeight:Cin},arc:{fill:Cb},area:{fill:Cb},line:{stroke:Cb,strokeWidth:2},path:{stroke:Cb},rect:{fill:Cb},shape:{stroke:Cb},symbol:{fill:Cb,size:30},axis:{labelFont:Sxe,labelFontSize:Txe,labelFontWeight:Ain,titleFont:UV,titleFontSize:Axe,titleFontWeight:Cxe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Sxe,labelFontSize:Txe,symbolType:"square",titleFont:UV,titleFontSize:Axe,titleFontWeight:Cxe},range:{category:LA["category-6"],diverging:LA["fireandice-6"],heatmap:LA["fire-7"],ordinal:LA["fire-7"],ramp:LA["fire-7"]}},Ab="#ab5787",HO="#979797",kin={background:"#f9f9f9",arc:{fill:Ab},area:{fill:Ab},line:{stroke:Ab},path:{stroke:Ab},rect:{fill:Ab},shape:{stroke:Ab},symbol:{fill:Ab,size:30},axis:{domainColor:HO,domainWidth:.5,gridWidth:.2,labelColor:HO,tickColor:HO,tickWidth:.2,titleColor:HO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ib="#3e5c69",Rin={background:"#fff",arc:{fill:Ib},area:{fill:Ib},line:{stroke:Ib},path:{stroke:Ib},rect:{fill:Ib},shape:{stroke:Ib},symbol:{fill:Ib},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Lf="#1696d2",Ixe="#000000",Din="#FFFFFF",qO="Lato",zV="Lato",Nin="Lato",Pin="#DEDDDD",Oin=18,FA={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},$in={background:Din,title:{anchor:"start",fontSize:Oin,font:qO},axisX:{domain:!0,domainColor:Ixe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:zV,labelAngle:0,tickColor:Ixe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:qO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Pin,gridWidth:1,labelFontSize:12,labelFont:zV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:qO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:zV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:qO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:FA["six-groups-cat-1"],diverging:FA["diverging-colors"],heatmap:FA["diverging-colors"],ordinal:FA["six-groups-seq"],ramp:FA["shades-blue"]},area:{fill:Lf},rect:{fill:Lf},line:{color:Lf,stroke:Lf,strokeWidth:5},trail:{color:Lf,stroke:Lf,strokeWidth:0,size:1},path:{stroke:Lf,strokeWidth:.5},point:{filled:!0},text:{font:Nin,color:Lf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Lf,stroke:null}},arc:{fill:Lf},shape:{stroke:Lf},symbol:{fill:Lf,size:30}},kb="#3366CC",kxe="#ccc",WO="Arial, sans-serif",Min={arc:{fill:kb},area:{fill:kb},path:{stroke:kb},rect:{fill:kb},shape:{stroke:kb},symbol:{stroke:kb},circle:{fill:kb},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:WO,fontSize:12},"guide-title":{font:WO,fontSize:12},"group-title":{font:WO,fontSize:12}},title:{font:WO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:kxe,tickColor:kxe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Qoe=e=>e*(1/3+1),Rxe=Qoe(9),Dxe=Qoe(10),Nxe=Qoe(12),BA="Segoe UI",Pxe="wf_standard-font, helvetica, arial, sans-serif",Oxe="#252423",jA="#605E5C",$xe="transparent",Lin="#C8C6C4",qd="#118DFF",Fin="#12239E",Bin="#E66C37",jin="#6B007B",Uin="#E044A7",zin="#744EC2",Vin="#D9B300",Hin="#D64550",Bje=qd,jje="#DEEFFF",Mxe=[jje,Bje],qin=[jje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Bje],Win={view:{stroke:$xe},background:$xe,font:BA,header:{titleFont:Pxe,titleFontSize:Nxe,titleColor:Oxe,labelFont:BA,labelFontSize:Dxe,labelColor:jA},axis:{ticks:!1,grid:!1,domain:!1,labelColor:jA,labelFontSize:Rxe,titleFont:Pxe,titleColor:Oxe,titleFontSize:Nxe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Lin,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:qd},line:{stroke:qd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:BA,fontSize:Rxe,fill:jA},arc:{fill:qd},area:{fill:qd,line:!0,opacity:.6},path:{stroke:qd},rect:{fill:qd},point:{fill:qd,filled:!0,size:75},shape:{stroke:qd},symbol:{fill:qd,strokeWidth:1.5,size:50},legend:{titleFont:BA,titleFontWeight:"bold",titleColor:jA,labelFont:BA,labelFontSize:Dxe,labelColor:jA,symbolType:"circle",symbolSize:75},range:{category:[qd,Fin,Bin,jin,Uin,zin,Vin,Hin],diverging:Mxe,heatmap:Mxe,ordinal:qin}},VV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Gin='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',HV=400,GO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Yin=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Kin=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function _9({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=GO.gridBg[e],i=GO.textPrimary[e],s=GO.textSecondary[e],o=n==="dark"?Yin:Kin,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:VV,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Gin,labelFontWeight:HV,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:GO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:VV,fill:s,fontWeight:HV},"guide-title":{font:VV,fill:s,fontWeight:HV}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Xin=_9({theme:"white",background:"#ffffff"}),Qin=_9({theme:"g10",background:"#f4f4f4"}),Jin=_9({theme:"g90",background:"#262626"}),Zin=_9({theme:"g100",background:"#161616"}),esn=vin.version,tsn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Qin,carbong100:Zin,carbong90:Jin,carbonwhite:Xin,dark:bin,excel:xin,fivethirtyeight:Ein,ggplot2:Sin,googlecharts:Min,latimes:Iin,powerbi:Win,quartz:kin,urbaninstitute:$in,version:esn,vox:Rin},Symbol.toStringTag,{value:"Module"}));function nsn(e,t,n,r){if(Xe(e))return`[${e.map(i=>t(Pt(i)?i:Lxe(i,n))).join(", ")}]`;if(Ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ot(c)&&(c=Lxe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function rsn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Lxe(e,t){return JSON.stringify(e,rsn(t))}var isn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Uje="vg-tooltip-element",ssn={offsetX:10,offsetY:10,id:Uje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:osn,maxDepth:2,formatTooltip:nsn,baseURL:""};function osn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function asn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return isn.toString().replace(Uje,e)}function usn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class lsn{constructor(t){this.options={...ssn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=asn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=usn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var qV={};function csn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WV,Fxe;function fsn(){return Fxe||(Fxe=1,WV=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),WV}var dsn=oi;oi.Node=T_;oi.create=oi;function oi(e){var t=this;if(t instanceof oi||(t=new oi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}oi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};oi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};oi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};oi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)psn(this,arguments[e]);return this.length};oi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)msn(this,arguments[e]);return this.length};oi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};oi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};oi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};oi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};oi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};oi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};oi.prototype.map=function(e,t){t=t||this;for(var n=new oi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};oi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new oi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};oi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};oi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};oi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};oi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};oi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new oi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};oi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new oi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};oi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=hsn(this,i,n[r]);return s};oi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function hsn(e,t,n){var r=t===e.head?new T_(n,null,t,e):new T_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function psn(e,t){e.tail=new T_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function msn(e,t){e.head=new T_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function T_(e,t,n,r){if(!(this instanceof T_))return new T_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{fsn()(oi)}catch{}const gsn=dsn,rx=Symbol("max"),S0=Symbol("length"),mE=Symbol("lengthCalculator"),Ck=Symbol("allowStale"),Tx=Symbol("maxAge"),b0=Symbol("dispose"),Bxe=Symbol("noDisposeOnSet"),ta=Symbol("lruList"),Yd=Symbol("cache"),zje=Symbol("updateAgeOnGet"),GV=()=>1;class ysn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[rx]=t.max||1/0;const n=t.length||GV;if(this[mE]=typeof n!="function"?GV:n,this[Ck]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Tx]=t.maxAge||0,this[b0]=t.dispose,this[Bxe]=t.noDisposeOnSet||!1,this[zje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[rx]=t||1/0,UA(this)}get max(){return this[rx]}set allowStale(t){this[Ck]=!!t}get allowStale(){return this[Ck]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Tx]=t,UA(this)}get maxAge(){return this[Tx]}set lengthCalculator(t){typeof t!="function"&&(t=GV),t!==this[mE]&&(this[mE]=t,this[S0]=0,this[ta].forEach(n=>{n.length=this[mE](n.value,n.key),this[S0]+=n.length})),UA(this)}get lengthCalculator(){return this[mE]}get length(){return this[S0]}get itemCount(){return this[ta].length}rforEach(t,n){n=n||this;for(let r=this[ta].tail;r!==null;){const i=r.prev;jxe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[ta].head;r!==null;){const i=r.next;jxe(this,t,r,n),r=i}}keys(){return this[ta].toArray().map(t=>t.key)}values(){return this[ta].toArray().map(t=>t.value)}reset(){this[b0]&&this[ta]&&this[ta].length&&this[ta].forEach(t=>this[b0](t.key,t.value)),this[Yd]=new Map,this[ta]=new gsn,this[S0]=0}dump(){return this[ta].map(t=>eF(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ta]}set(t,n,r){if(r=r||this[Tx],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[mE](n,t);if(this[Yd].has(t)){if(s>this[rx])return BS(this,this[Yd].get(t)),!1;const u=this[Yd].get(t).value;return this[b0]&&(this[Bxe]||this[b0](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[S0]+=s-u.length,u.length=s,this.get(t),UA(this),!0}const o=new vsn(t,n,s,i,r);return o.length>this[rx]?(this[b0]&&this[b0](t,n),!1):(this[S0]+=o.length,this[ta].unshift(o),this[Yd].set(t,this[ta].head),UA(this),!0)}has(t){if(!this[Yd].has(t))return!1;const n=this[Yd].get(t).value;return!eF(this,n)}get(t){return YV(this,t,!0)}peek(t){return YV(this,t,!1)}pop(){const t=this[ta].tail;return t?(BS(this,t),t.value):null}del(t){BS(this,this[Yd].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Yd].forEach((t,n)=>YV(this,n,!1))}}const YV=(e,t,n)=>{const r=e[Yd].get(t);if(r){const i=r.value;if(eF(e,i)){if(BS(e,r),!e[Ck])return}else n&&(e[zje]&&(r.value.now=Date.now()),e[ta].unshiftNode(r));return i.value}},eF=(e,t)=>{if(!t||!t.maxAge&&!e[Tx])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Tx]&&n>e[Tx]},UA=e=>{if(e[S0]>e[rx])for(let t=e[ta].tail;e[S0]>e[rx]&&t!==null;){const n=t.prev;BS(e,t),t=n}},BS=(e,t)=>{if(t){const n=t.value;e[b0]&&e[b0](n.key,n.value),e[S0]-=n.length,e[Yd].delete(n.key),e[ta].removeNode(t)}};class vsn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const jxe=(e,t,n,r)=>{let i=n.value;eF(e,i)&&(BS(e,n),e[Ck]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var bsn=ysn;const xsn=Object.freeze({loose:!0}),_sn=Object.freeze({}),wsn=e=>e?typeof e!="object"?xsn:e:_sn;var Joe=wsn,wK={exports:{}};const Esn="2.0.0",Vje=256,Ssn=Number.MAX_SAFE_INTEGER||9007199254740991,Tsn=16,Csn=Vje-6,Asn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Zoe={MAX_LENGTH:Vje,MAX_SAFE_COMPONENT_LENGTH:Tsn,MAX_SAFE_BUILD_LENGTH:Csn,MAX_SAFE_INTEGER:Ssn,RELEASE_TYPES:Asn,SEMVER_SPEC_VERSION:Esn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Isn=typeof process=="object"&&qV&&qV.NODE_DEBUG&&/\bsemver\b/i.test(qV.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var w9=Isn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Zoe,s=w9;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),x=c++;s(m,x,g),l[m]=x,u[x]=g,o[x]=new RegExp(g,y?"g":void 0),a[x]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(wK,wK.exports);var eae=wK.exports;const Uxe=/^[0-9]+$/,Hje=(e,t)=>{const n=Uxe.test(e),r=Uxe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ksn=(e,t)=>Hje(t,e);var Rsn={compareIdentifiers:Hje,rcompareIdentifiers:ksn};const YO=w9,{MAX_LENGTH:zxe,MAX_SAFE_INTEGER:KO}=Zoe,{safeRe:Vxe,t:Hxe}=eae,Dsn=Joe,{compareIdentifiers:gE}=Rsn;let Nsn=class dp{constructor(t,n){if(n=Dsn(n),t instanceof dp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>zxe)throw new TypeError(`version is longer than ${zxe} characters`);YO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Vxe[Hxe.LOOSE]:Vxe[Hxe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>KO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>KO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>KO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<KO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(YO("SemVer.compare",this.version,this.options,t),!(t instanceof dp)){if(typeof t=="string"&&t===this.version)return 0;t=new dp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof dp||(t=new dp(t,this.options)),gE(this.major,t.major)||gE(this.minor,t.minor)||gE(this.patch,t.patch)}comparePre(t){if(t instanceof dp||(t=new dp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(YO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gE(r,i)}while(++n)}compareBuild(t){t instanceof dp||(t=new dp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(YO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),gE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var tae=Nsn;const qxe=tae,Psn=(e,t,n)=>new qxe(e,n).compare(new qxe(t,n));var _C=Psn;const Osn=_C,$sn=(e,t,n)=>Osn(e,t,n)===0;var Msn=$sn;const Lsn=_C,Fsn=(e,t,n)=>Lsn(e,t,n)!==0;var Bsn=Fsn;const jsn=_C,Usn=(e,t,n)=>jsn(e,t,n)>0;var zsn=Usn;const Vsn=_C,Hsn=(e,t,n)=>Vsn(e,t,n)>=0;var qsn=Hsn;const Wsn=_C,Gsn=(e,t,n)=>Wsn(e,t,n)<0;var Ysn=Gsn;const Ksn=_C,Xsn=(e,t,n)=>Ksn(e,t,n)<=0;var Qsn=Xsn;const Jsn=Msn,Zsn=Bsn,eon=zsn,ton=qsn,non=Ysn,ron=Qsn,ion=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Jsn(e,n,r);case"!=":return Zsn(e,n,r);case">":return eon(e,n,r);case">=":return ton(e,n,r);case"<":return non(e,n,r);case"<=":return ron(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var son=ion,KV,Wxe;function oon(){if(Wxe)return KV;Wxe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}KV=t;const n=Joe,{safeRe:r,t:i}=eae,s=son,o=w9,a=tae,u=qje();return KV}var XV,Gxe;function qje(){if(Gxe)return XV;Gxe=1;class e{constructor(B,q){if(q=r(q),B instanceof e)return B.loose===!!q.loose&&B.includePrerelease===!!q.includePrerelease?B:new e(B.raw,q);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(Y=>!p(Y[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&m(Y[0])){this.set=[Y];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const H=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,Y=n.get(H);if(Y)return Y;const K=this.options.loose,J=K?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(J,P(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let F=B.split(" ").map(V=>y(V,this.options)).join(" ").split(/\s+/).map(V=>k(V,this.options));K&&(F=F.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(a[u.COMPARATORLOOSE])))),s("range list",F);const U=new Map,W=F.map(V=>new i(V,this.options));for(const V of W){if(p(V))return[V];U.set(V.value,V)}U.size>1&&U.has("")&&U.delete("");const L=[...U.values()];return n.set(H,L),L}intersects(B,q){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>g(H,q)&&B.set.some(Y=>g(Y,q)&&H.every(K=>Y.every(J=>K.intersects(J,q)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(M(this.set[q],B,this.options))return!0;return!1}}XV=e;const t=bsn,n=new t({max:1e3}),r=Joe,i=oon(),s=w9,o=tae,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=eae,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Zoe,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,B)=>{let q=!0;const H=O.slice();let Y=H.pop();for(;q&&H.length;)q=H.every(K=>Y.intersects(K,B)),Y=H.pop();return q},y=(O,B)=>(s("comp",O,B),O=E(O,B),s("caret",O),O=x(O,B),s("tildes",O),O=C(O,B),s("xrange",O),O=N(O,B),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",x=(O,B)=>O.trim().split(/\s+/).map(q=>w(q,B)).join(" "),w=(O,B)=>{const q=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(q,(H,Y,K,J,F)=>{s("tilde",O,H,Y,K,J,F);let U;return v(Y)?U="":v(K)?U=`>=${Y}.0.0 <${+Y+1}.0.0-0`:v(J)?U=`>=${Y}.${K}.0 <${Y}.${+K+1}.0-0`:F?(s("replaceTilde pr",F),U=`>=${Y}.${K}.${J}-${F} <${Y}.${+K+1}.0-0`):U=`>=${Y}.${K}.${J} <${Y}.${+K+1}.0-0`,s("tilde return",U),U})},E=(O,B)=>O.trim().split(/\s+/).map(q=>T(q,B)).join(" "),T=(O,B)=>{s("caret",O,B);const q=B.loose?a[u.CARETLOOSE]:a[u.CARET],H=B.includePrerelease?"-0":"";return O.replace(q,(Y,K,J,F,U)=>{s("caret",O,Y,K,J,F,U);let W;return v(K)?W="":v(J)?W=`>=${K}.0.0${H} <${+K+1}.0.0-0`:v(F)?K==="0"?W=`>=${K}.${J}.0${H} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.0${H} <${+K+1}.0.0-0`:U?(s("replaceCaret pr",U),K==="0"?J==="0"?W=`>=${K}.${J}.${F}-${U} <${K}.${J}.${+F+1}-0`:W=`>=${K}.${J}.${F}-${U} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.${F}-${U} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?J==="0"?W=`>=${K}.${J}.${F}${H} <${K}.${J}.${+F+1}-0`:W=`>=${K}.${J}.${F}${H} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.${F} <${+K+1}.0.0-0`),s("caret return",W),W})},C=(O,B)=>(s("replaceXRanges",O,B),O.split(/\s+/).map(q=>I(q,B)).join(" ")),I=(O,B)=>{O=O.trim();const q=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(q,(H,Y,K,J,F,U)=>{s("xRange",O,H,Y,K,J,F,U);const W=v(K),L=W||v(J),V=L||v(F),Q=V;return Y==="="&&Q&&(Y=""),U=B.includePrerelease?"-0":"",W?Y===">"||Y==="<"?H="<0.0.0-0":H="*":Y&&Q?(L&&(J=0),F=0,Y===">"?(Y=">=",L?(K=+K+1,J=0,F=0):(J=+J+1,F=0)):Y==="<="&&(Y="<",L?K=+K+1:J=+J+1),Y==="<"&&(U="-0"),H=`${Y+K}.${J}.${F}${U}`):L?H=`>=${K}.0.0${U} <${+K+1}.0.0-0`:V&&(H=`>=${K}.${J}.0${U} <${K}.${+J+1}.0-0`),s("xRange return",H),H})},N=(O,B)=>(s("replaceStars",O,B),O.trim().replace(a[u.STAR],"")),k=(O,B)=>(s("replaceGTE0",O,B),O.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=O=>(B,q,H,Y,K,J,F,U,W,L,V,Q,ue)=>(v(H)?q="":v(Y)?q=`>=${H}.0.0${O?"-0":""}`:v(K)?q=`>=${H}.${Y}.0${O?"-0":""}`:J?q=`>=${q}`:q=`>=${q}${O?"-0":""}`,v(W)?U="":v(L)?U=`<${+W+1}.0.0-0`:v(V)?U=`<${W}.${+L+1}.0-0`:Q?U=`<=${W}.${L}.${V}-${Q}`:O?U=`<${W}.${L}.${+V+1}-0`:U=`<=${U}`,`${q} ${U}`.trim()),M=(O,B,q)=>{for(let H=0;H<O.length;H++)if(!O[H].test(B))return!1;if(B.prerelease.length&&!q.includePrerelease){for(let H=0;H<O.length;H++)if(s(O[H].semver),O[H].semver!==i.ANY&&O[H].semver.prerelease.length>0){const Y=O[H].semver;if(Y.major===B.major&&Y.minor===B.minor&&Y.patch===B.patch)return!0}return!1}return!0};return XV}const aon=qje(),uon=(e,t,n)=>{try{t=new aon(t,n)}catch{return!1}return t.test(e)};var lon=uon,Wje=csn(lon);function con(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var fon=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Gje(e,...t){for(const n of t)don(e,n);return e}function don(e,t){for(const n of Object.keys(t))rC(e,n,t[n],!0)}const Xd=KYt;let yD=ein;const XO=typeof window<"u"?window:void 0;var mEe;yD===void 0&&((mEe=XO==null?void 0:XO.vl)!=null&&mEe.compile)&&(yD=XO.vl);const hon={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},pon={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},OI={vega:"Vega","vega-lite":"Vega-Lite"},tF={vega:Xd.version,"vega-lite":yD?yD.version:"not available"},mon={vega:e=>e,"vega-lite":(e,t)=>yD.compile(e,{config:t}).spec},gon=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,yon="chart-wrapper";function von(e){return typeof e=="function"}function Yxe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${OI[r]} JSON Source`}function bon(e,t){if(e.$schema){const n=Fje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${OI[n.library]}, but mode argument sets ${OI[t]??t}.`);const r=n.library;return Wje(tF[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${OI[r]} ${n.version}, but the current version of ${OI[r]} is v${tF[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Yje(e){return!!(e&&"load"in e)}function Kxe(e){return Yje(e)?e:Xd.loader(e)}function xon(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function _on(e,t,n={}){let r,i;Pt(t)?(i=Kxe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=xon(r),o=s.loader;(!i||o)&&(i=Kxe(n.loader??o));const a=await Xxe(s,i),u=await Xxe(n,i),l={...Gje(u,a),config:nC(u.config??{},a.config??{})};return await Eon(e,r,l,i)}async function Xxe(e,t){const n=Pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function won(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Eon(e,t,n={},r){const i=n.theme?nC(tsn[n.theme],n.config??{}):n.config,s=qv(n.actions)?n.actions:Gje({},hon,n.actions??{}),o={...pon,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Xd.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:C}=won(c);if(!T.getElementById(E)){const I=document.createElement("style");I.id=E,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?fon.toString():n.defaultStyle,C.appendChild(I)}}const f=bon(t,n.mode);let d=mon[f](t,i);if(f==="vega-lite"&&d.$schema){const E=Fje(d.$schema);Wje(tF.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${tF.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(yon),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):L8(d,p,!0,!1).newDocument),n.formatLocale&&Xd.formatLocale(n.formatLocale),n.timeFormatLocale&&Xd.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?Xd.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&Xd.expressionFunction(E,T)}const{ast:m}=n,g=Xd.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Xd.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Xd.expressionInterpreter??n.expr??sKt}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:C}=T;C=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):C=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):C=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,C=E&&!Yje(E)?E==null?void 0:E.baseURL:void 0,I=von(T)?T:new lsn({baseURL:C,...T===!0?{}:T}).call;y.tooltip(I)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let x;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const C=document.createElement("details");C.title=o.CLICK_TO_VIEW_ACTIONS,c.append(C),E=C;const I=document.createElement("summary");I.innerHTML=gon,C.append(I),x=N=>{C.contains(N.target)||C.removeAttribute("open")},document.addEventListener("click",x)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const C of["svg","png"])if(s===!0||s.export===!0||s.export[C]){const I=o[`${C.toUpperCase()}_ACTION`],N=document.createElement("a"),k=Ot(n.scaleFactor)?n.scaleFactor[C]:n.scaleFactor;N.text=I,N.href="#",N.target="_blank",N.download=`${l}.${C}`,N.addEventListener("mousedown",async function(P){P.preventDefault();const M=await y.toImageURL(C,k);this.href=M}),T.append(N)}}if(s===!0||s.source!==!1){const C=document.createElement("a");C.text=o.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(I){Yxe(Qz(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),T.append(C)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const C=document.createElement("a");C.text=o.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(I){Yxe(Qz(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),T.append(C)}if(s===!0||s.editor!==!1){const C=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(N){con(window,C,{config:i,mode:f,renderer:a,spec:Qz(t)}),N.preventDefault()}),T.append(I)}}function w(){x&&document.removeEventListener("click",x),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Son(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Ton(e,t,n){n&&(Son(n)?n(e.data(t)):e.change(t,Xd.changeset().remove(()=>!0).insert(n)))}function Con(e,t){Object.keys(t).forEach(n=>{Ton(e,n,t[n])})}function Kje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Xje=()=>{};function QV(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Aon(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Kje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!U4(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Qxe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function JV(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function $I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qje extends ni.PureComponent{constructor(){super(...arguments),$I(this,"containerRef",ni.createRef()),$I(this,"resultPromise",void 0),$I(this,"handleError",t=>{const{onError:n=Xje}=this.props;n(t,this.containerRef.current),console.warn(t)}),$I(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Kje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Aon(JV(this.props),JV(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!KG(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Qxe(a,s),i&&QV(a,i)),a.run()})}else KG(i,s)||this.modifyView(o=>{s&&Qxe(o,s),i&&QV(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=JV(this.props);this.resultPromise=_on(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;QV(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ni.createElement("div",{ref:this.containerRef,className:t,style:n})}}$I(Qje,"propTypes",{className:ohe.string,onError:ohe.func});function EK(){return EK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EK.apply(this,arguments)}function SK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ion={};class nae extends ni.PureComponent{constructor(){super(...arguments),SK(this,"vegaEmbed",ni.createRef()),SK(this,"handleNewView",t=>{this.update();const{onNewView:n=Xje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){KG(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Con(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ni.createElement(Qje,EK({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}SK(nae,"defaultProps",{data:Ion});function TK(){return TK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TK.apply(this,arguments)}function Jxe(e){return ni.createElement(nae,TK({},e,{mode:"vega-lite"}))}function kon({currentConfig:e,provState:t}){const n=_d(),r=wd(),i=Fu(),[s,o]=D.useState(null),[a,u]=D.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=Ha(),[f,d]=D.useState(),{actions:h,trrack:p}=D.useMemo(()=>{const x=rw.create(),w=x.register("signal",(T,C)=>(T.event=C,T)),E=yN({registry:x,initialState:{event:{}}});return{actions:{signalAction:w},trrack:E}},[]),m=D.useCallback(({status:x,provenanceGraph:w,answers:E})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:x,values:E,provenanceGraph:w})),i(c(E))},[r,n,i,c,l]),g=D.useCallback((x,w)=>{p.apply(x,h.signalAction({key:x,value:w}))},[h,p]),y=D.useCallback((x,w)=>{const{responseId:E,response:T}=w;m({status:!0,provenanceGraph:p.graph.backend,answers:{[E]:T}})},[m,p.graph.backend]),v=D.useMemo(()=>{var w;const x=(w=s==null?void 0:s.config)==null?void 0:w.signals;return x?x.reduce((E,T)=>(T.name==="revisitAnswer"?E[T.name]=y:E[T.name]=g,E),{}):{}},[y,g,s]);return D.useEffect(()=>{async function x(){u(!0);let w;"path"in e?w=await xbt(e.path):w=e.config,w!==void 0&&o(w),u(!1)}e&&x()},[e]),D.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?_.jsx("div",{children:"Loading..."}):"path"in e&&!s?_.jsx(j1,{path:e.path}):s?_.jsx(nae,{spec:structuredClone(s),signalListeners:v,onNewView:x=>d(x)}):_.jsx("div",{children:"Failed to load vega config"})}function Ron(){const e=yg(),t=_d(),n=wd()||"Notfound",r=e.components[n],{storageEngine:i}=ho(),s=D.useRef(null),[o,a]=D.useState(null),{setIsRecording:u}=Ha(),l=ri(N=>N.analysisProvState),c=O2(),f=OZ(),d=ri(N=>N.sequence),[h]=Nv(),p=ri(N=>N.participantId),m=D.useMemo(()=>h.get("participantId"),[h]);P6e();const g=Fu(),{setAlertModal:y}=Ha();D.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&g(y({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),D.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(N=>{var k;N.stop(),(k=s.current)==null||k.stream.removeTrack(N)}),s.current.stream.getAudioTracks().forEach(N=>{var k;N.stop(),(k=s.current)==null||k.stream.removeTrack(N)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(N=>{const k=new MediaRecorder(N);s.current=k,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[v,x]=D.useState([]),w=D.useRef([]);D.useEffect(()=>{async function N(){var M;const P=((M=IZ(d,t))==null?void 0:M.map(O=>O.currentBlock.id).filter(O=>O!==void 0))||[];x(P)}async function k(){const P=w.current;JSON.stringify(P)!==JSON.stringify(v)&&v.length>0&&i&&await i.addParticipantTags(v),w.current=v}N().then(k)},[t,i,d]);const E=D.useMemo(()=>{var N;return n!=="end"&&eC(r)&&e.baseComponents?PZ({},(N=e.baseComponents)==null?void 0:N[r.baseComponent],r):r},[r,e]);if(n==="end")return _.jsx(GMt,{});if(n==="__trainingFailed")return _.jsx(YMt,{});if(n==="__timedOut")return _.jsx(KMt,{});if(n==="Notfound")return _.jsx(j1,{email:e.uiConfig.contactEmail});if(m&&p!==m)return _.jsx(Wo,{style:{height:"80vh"},children:_.jsx(wc,{})});const T=E.instruction||"",{instructionLocation:C}=E,I=e.uiConfig.sidebar&&(C==="sidebar"||C===void 0);return _.jsxs(_.Fragment,{children:[C==="aboveStimulus"&&_.jsx(Ru,{text:T}),_.jsx(O$,{status:f,config:E,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(D.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[E.type==="markdown"&&_.jsx(MMt,{currentConfig:E}),E.type==="website"&&_.jsx(bbt,{currentConfig:E}),E.type==="image"&&_.jsx(wbt,{currentConfig:E}),E.type==="react-component"&&_.jsx($Mt,{currentConfig:E,provState:l}),E.type==="vega"&&_.jsx(kon,{currentConfig:E,provState:l})]},`${t}-stimulus`),(C==="belowStimulus"||C===void 0&&!I)&&_.jsx(Ru,{text:T}),_.jsx(O$,{status:f,config:E,location:"belowStimulus"},`${t}-below-response-block`)]})}function Jje(e){const[t]=Nv();return _.jsx(ZJ,{...e,to:{pathname:e.to,search:t.toString()}})}function Zje(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=Zje(o,t,n,r),r.includes(o.orderPath))break}return i}function e7e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=e7e(s,r)}}),n}function Don(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Non({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=J_(),c=Rm(),f=_d(),[d,{close:h,open:p}]=cQ(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?Zje(n,e,r,a.orderPath):-1,{trialId:y}=am(),[v]=Nv(),x=D.useMemo(()=>v.get("participantId"),[v]),w=y===e,E=s?f===g:f===`reviewer-${e}`,T=u?w:E,C=D.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),N=u?C:()=>c(s?x?`/${l}/${oh(g)}?participantId=${x}`:`/${l}/${oh(g)}`:`/${l}/reviewer-${e}`),k=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,P=e.includes("$")&&k&&e.includes(k)?e.split(k).at(-1):e;return _.jsxs(La,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(La.Target,{children:_.jsx(ke,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(h5,{active:T,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(ke,{children:[i&&_.jsx(wct,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==P&&_.jsx(Lct,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),_.jsx(Qe,{size:"sm",span:T,fw:T?"700":void 0,display:"inline",children:P})]}),onClick:N,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(La.Dropdown,{onMouseLeave:h,children:_.jsxs(ke,{children:[m.description&&_.jsxs(ke,{children:[_.jsx(Qe,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(Qe,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(ke,{children:[_.jsx(Qe,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(Qe,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function nF({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=K0(e.components);return n&&r&&(o=Don(K0(e.components),K0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(Non,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Ph(c).length-e7e(u,c):0,d=Ph(u);return _.jsx(h5,{label:_.jsxs(ke,{style:{opacity:f>0?1:.5},children:[_.jsx(Qe,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(qi,{label:u.order,position:"right",withArrow:!0,children:_.jsx(xct,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&_.jsxs(wh,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(wh,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(ke,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(nF,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function t7e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Zxe({text:e}){return _.jsx(qi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(tZ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function Pon(){const e=ri(h=>h.sequence),t=ri(h=>h.metadata),{toggleStudyBrowser:n}=Ha(),r=yg(),i=Fu(),s=J_(),o=IAe(`/${s}`),{storageEngine:a}=ho(),u=O2(),l=D.useMemo(()=>{let h=K0(r.sequence);return h=kZ(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=D.useState("participant"),d=D.useMemo(()=>c==="allTrials"||u,[c,u]);return _.jsxs($i.Aside,{p:"0",children:[_.jsx($i.Section,{p:"md",children:_.jsxs(qt,{direction:"row",justify:"space-between",children:[_.jsx(Qe,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(qi,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:_.jsx(ln,{variant:"light",leftSection:_.jsx(nZ,{size:14}),onClick:()=>t7e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),_.jsx(Iv,{onClick:()=>i(n()),mt:1})]})}),_.jsx($i.Section,{grow:!0,component:fg,p:"md",children:_.jsxs(Nr,{value:c,onChange:f,children:[_.jsx(ke,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(Nr.List,{grow:!0,children:[_.jsxs(Nr.Tab,{value:"participant",children:["Participant View",_.jsx(Zxe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(Nr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",_.jsx(Zxe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(Nr.Panel,{value:"participant",children:_.jsx(nF,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(Nr.Panel,{value:"allTrials",children:_.jsx(nF,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function Oon({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=ri(I=>I.config),r=ri(I=>I.metadata),i=RZ(),s=Fu(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Ha(),{storageEngine:l}=ho(),c=wd(),f=_d(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=D.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=J_(),x=IAe(`/${v}`),w=D.useRef(null),[E,T]=D.useState(!1),C=ri(I=>I.isRecording);return D.useEffect(()=>{const I=w.current;I&&T(I.scrollWidth>I.offsetWidth)},[n]),_.jsx($i.Header,{p:"md",children:_.jsxs(qc,{mt:-7,align:"center",children:[_.jsx(qc.Col,{span:4,children:_.jsxs(qt,{align:"center",children:[_.jsx(Rv,{w:40,src:`${Va}${g}`,alt:"Study Logo"}),_.jsx(Zc,{w:"md"}),_.jsx(Vs,{ref:w,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:E?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(qc.Col,{span:4,children:y&&_.jsx(S2,{radius:"md",size:"lg",value:h})}),_.jsx(qc.Col,{span:4,children:_.jsxs(_r,{wrap:"nowrap",justify:"right",children:[C?_.jsxs(_r,{ml:"xl",gap:20,wrap:"nowrap",children:[_.jsx(Qe,{color:"red",children:"Recording audio"}),_.jsx(k6e,{})]}):null,!t&&_.jsx(qi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(wh,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(ln,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),_.jsxs(Zu,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[_.jsx(Zu.Target,{children:_.jsx(U_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(kct,{})})}),_.jsxs(Zu.Dropdown,{children:[e&&_.jsx(Zu.Item,{leftSection:_.jsx(zct,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Zu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx($ct,{size:14}),children:"Contact"}),e&&_.jsx(Zu.Item,{leftSection:_.jsx(nZ,{size:14}),onClick:()=>t7e(l,n,r,x),children:"Next Participant"}),e&&_.jsx(Zu.Item,{leftSection:_.jsx(PAe,{size:14}),component:"a",href:`${Va}analysis/stats/${v}`,children:"Analyze & Manage"})]})]})]})})]})})}function n7e(e,t){var n;return eC(e)&&t.baseComponents?PZ({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function $on(){var u;const e=(u=yg())==null?void 0:u.uiConfig.sidebar,t=yg(),n=wd(),r=t.components[n],i=D.useMemo(()=>r?n7e(r,t):null,[r,t]),s=OZ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs($i.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx($i.Section,{bg:"gray.3",p:"md",children:_.jsxs(Qe,{c:"gray.9",children:[_.jsx(Qe,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ru,{text:o})]})}),_.jsx($i.Section,{p:"md",children:_.jsx(O$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx($i.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(O$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Mon(){const e=ri(u=>u.showHelpText),t=ri(u=>u.config),n=Fu(),{toggleShowHelpText:r}=Ha(),[i,s]=D.useState(""),[o,a]=D.useState(!0);return D.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await MZ(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Ws,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ru,{text:i}):_.jsx(j1,{path:t.uiConfig.helpTextPath})})}function Lon(){const e=ri(o=>o.alertModal),{setAlertModal:t}=Ha(),n=Fu(),[r,i]=D.useState(e.show),s=D.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return D.useEffect(()=>i(e.show),[e.show]),_.jsx(Ws,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(Y0,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(bct,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(Qe,{my:"md",children:e.message}),_.jsx(_r,{w:"100%",justify:"end",children:_.jsx(ln,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const e_e=15,t_e=3;function Fon({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return _.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return _.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:_.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-t_e/2,y:n/2-e_e/2,width:t_e,height:e_e})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?_.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,_.jsx(qQ,{position:{bottom:10,left:10},children:_.jsxs(La,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[_.jsx(La.Target,{children:_.jsx(ln,{children:"Show Legend"})}),_.jsx(La.Dropdown,{children:_.jsx(Gs,{children:Array.from(a.keys()).map(u=>_.jsxs(_r,{children:[_.jsx(gJ,{color:a.get(u)}),_.jsx("span",{children:u})]},u))})})]})})]})}const n_e={left:5,top:0,right:5,bottom:0};function Bon({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=D.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=D.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=D.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return _.jsx(Fon,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return _.jsxs("svg",{style:{width:n,height:r},children:[_.jsx("line",{stroke:"black",strokeWidth:1,x1:n_e.left,x2:n+n_e.left,y1:r/2,y2:r/2}),c]})}function jon(e){const t=D.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return D.useLayoutEffect(()=>{t.current=e}),D.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Uon({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=D.useRef(0),u=D.useRef(Date.now()),[l,c]=D.useState(0);D.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=jon(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});D.useEffect(()=>{let h=null;return i&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[f,i]);const d=D.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return _.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:_.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function CK(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const ZV={left:0,top:0,right:0,bottom:0};function zon(e,t){return t?t.getParticipantData(e):null}function Von({setTimeString:e}){const[t]=Nv(),n=D.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=ho(),i=ri(U=>U.analysisIsPlaying),s=ri(U=>U.analysisHasAudio),o=ri(U=>U.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l}=Ha(),c=Fu(),f=wd(),d=_d();D.useEffect(()=>{c(a(null))},[d,a,c]);const[h,{width:p}]=Jc(),[m,g]=D.useState(0),[y,v]=D.useState(null),[x,w]=D.useState(0),{value:E,status:T}=aL(zon,[n,r]),[C,I]=uet(0,100),N=D.useRef(null),[k,P]=D.useState(!0),M=D.useRef(null),O=D.useMemo(()=>`${f}_${d}`,[f,d]);D.useEffect(()=>{var U;if(O&&E&&((U=E.answers[O])!=null&&U.provenanceGraph)){const W=rw.create(),L=yN({registry:W,initialState:{}});E.answers[O].provenanceGraph&&(L.importObject(K0(E.answers[O].provenanceGraph)),c(l(!0)),M.current=L)}else c(l(!1))},[E,O,c,l]);const B=D.useCallback(U=>{var W;U&&(O&&E&&M.current&&(c(a(M.current.getState((W=E.answers[O].provenanceGraph)==null?void 0:W.nodes[U]))),M.current.to(U)),v(U))},[E,a,c,O]);D.useEffect(()=>{var L;if(!O||!E||!M.current||!((L=E.answers[O])!=null&&L.provenanceGraph))return;const U=E.answers[O].provenanceGraph;if(!U)return;if(!y||!U.nodes[y]){B(U.root);return}let W=U.nodes[y];for(;;)if(C<W.createdOn){if(_kt(W))break;{const V=W.parent;W=U.nodes[V]}}else if(W.children.length>0){const V=W.children[0];if(C>U.nodes[V].createdOn)W=U.nodes[V];else break}else break;W.id!==y&&B(W.id)},[B,y,E,n,C,O]);const q=D.useMemo(()=>(E==null?void 0:E.answers[O].startTime)||0,[E,O]);D.useEffect(()=>{x===0?e(""):C!==0&&e(`${CK(C-q)} / ${CK(x*1e3)}`)},[O,E,C,e,q,x]),D.useEffect(()=>{if(!s&&o&&E){const U=E.answers[O].endTime-E.answers[O].startTime;w(U>-1?U/1e3:0)}},[s,o,O,E]);const H=O2(),Y=D.useRef(null),K=D.useCallback(async U=>{if(Y.current=U,U&&E&&H&&O&&r)try{const W=await r.getAudio(O,n);await U.load(W),P(!1),c(u(!0)),w(U.getDuration()),g(U.getWidth()),U.seekTo(0),U.on("redrawcomplete",()=>g(U.getWidth()))}catch(W){throw c(u(!1)),new Error(W)}else c(u(!1)),w(0)},[E,H,O,r,n,c,u]),J=D.useCallback((U,W)=>{I(U),Y.current&&W&&setTimeout(()=>{var L;(L=Y.current)==null||L.seekTo(W)})},[I,Y]);D.useEffect(()=>{Y.current&&(i?Y.current.play():Y.current.pause())},[Y,i]);const F=D.useMemo(()=>{var L,V;if(!E||!((L=E.answers[O])!=null&&L.startTime)||!((V=E.answers[O])!=null&&V.endTime))return null;const U=x>0?E.answers[O].startTime+x*1e3:E.answers[O].endTime;return dc([ZV.left,p+ZV.left+ZV.right]).domain([E.answers[O].startTime,U]).clamp(!0)},[E,O,p,x]);return D.useEffect(()=>{K(Y.current)},[J,K,E,n,Y]),_.jsx(_r,{wrap:"nowrap",gap:10,mx:10,children:_.jsxs(Gs,{ref:h,style:{width:"100%"},gap:0,children:[_.jsx(Wo,{}),E!==null&&O?_.jsxs(ke,{ref:N,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[_.jsx(C6e,{onMount:K,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:_.jsx(A6e,{id:"waveform",height:50})}),k?_.jsx(wc,{}):null]}):null,T==="success"&&E&&F&&O&&E.answers[O].provenanceGraph?_.jsx(Bon,{xScale:F,trialName:O,setPlayTime:J,currentNode:y,setCurrentNode:B,participantData:E,width:m||p,height:25}):null,F&&E&&(s||o)?_.jsx(Uon,{duration:x*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:E.answers[O].startTime,width:p,xScale:F,updateTimer:J}):null]})})}function Hon(e,t){return t?t.getParticipantData(e):null}function qon(e){return e?e.getAllParticipantsData():null}function Won(){const[e]=Nv(),t=D.useMemo(()=>e.get("participantId")||void 0,[e]),n=wd(),r=_d(),i=Rm(),{setAnalysisIsPlaying:s}=Ha(),o=Fu(),a=ri(y=>y.analysisIsPlaying),{storageEngine:u}=ho(),{value:l,status:c}=aL(Hon,[t,u]),{value:f}=aL(qon,[u]),[d,h]=D.useMemo(()=>{if(f&&l&&t&&n){const y=f.filter(E=>E.participantConfigHash===l.participantConfigHash),v=y.findIndex(E=>E.participantId===t),x=v<y.length-1?y[v+1]:y[0],w=v>0?y[v-1]:y[y.length-1];return[[x.participantId,Ph(x.sequence).indexOf(n)],[w.participantId,Ph(w.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=D.useMemo(()=>{const y={};return f==null||f.forEach(v=>{y[v.participantConfigHash]||(y[v.participantConfigHash]=new Set),y[v.participantConfigHash].add(v.participantId)}),Object.keys(y).sort((v,x)=>v===(l==null?void 0:l.participantConfigHash)?-1:x===(l==null?void 0:l.participantConfigHash)?1:0).map(v=>({group:`Config version: ${v}`,items:[...y[v]].map(x=>({value:x,label:x,disabled:v!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=D.useState("");return _.jsx($i.Footer,{zIndex:101,withBorder:!1,children:_.jsxs(ke,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[_.jsx(uf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),_.jsx(Von,{setTimeString:g}),_.jsx(Wo,{children:_.jsxs(_r,{gap:"xs",style:{height:"50px"},children:[_.jsx(Qe,{size:"sm",ff:"monospace",children:m}),_.jsx(U_,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?_.jsx(Yct,{}):_.jsx(Kct,{})}),_.jsx(Qe,{mx:"0",children:"Participant:"}),_.jsx(T2,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:y=>{i(`./${oh(0)}?participantId=${y}`,{relative:"path"})},data:p}),_.jsx(ln,{onClick:()=>i(`./${oh(+r-1)}?participantId=${t}`,{relative:"path"}),children:_.jsx(vhe,{})}),_.jsx(ln,{onClick:()=>i(`./${oh(+r+1)}?participantId=${t}`,{relative:"path"}),children:_.jsx(bhe,{})}),_.jsxs(ln,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${oh(h[1])}?participantId=${h[0]}`),children:[_.jsx(vhe,{}),_.jsx(_he,{})]}),_.jsxs(ln,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${oh(d[1])}?participantId=${d[0]}`),children:[_.jsx(_he,{}),_.jsx(bhe,{})]})]})})]})})}function Gon(){const e=D.useRef([]),t=yg(),n=t.uiConfig.windowEventDebounceTime??100,r=ri(d=>d.showStudyBrowser),i=ri(d=>d.analysisHasAudio),s=ri(d=>d.analysisHasProvenance),o=ri(d=>d.modes);D.useEffect(()=>{const d=Gd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Gd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Gd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Gd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Gd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Gd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Gd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),x=Gd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Gd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",x),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",x),document.removeEventListener("visibilitychange",w)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=D.useMemo(()=>o,[o]),c=D.useMemo(()=>u&&r,[u,r]),f=O2();return _.jsx(Uke.Provider,{value:e,children:_.jsxs($i,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[_.jsx($on,{}),_.jsx(Pon,{}),_.jsx(Oon,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),_.jsx(Mon,{}),_.jsx(Lon,{}),_.jsx($i.Main,{children:_.jsx(ict,{})}),f&&_.jsx(Won,{})]})})}function Yon(e,t=!1){return typeof e=="number"?r_e(e,t):r_e(e.length,t).map(r=>r.map(i=>e[i]))}function r_e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function r7e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=r7e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function Kon(e,t){const n=K0(e);return r7e(n,t,"root")}function i7e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&i7e(s,t,i,o)})}function Xon(e){const t=[];return i7e(e,t,"",0),t}function i_e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return Yon(i.sort(()=>.5-Math.random()),!0)}function s_e(e){const n=Xon(e.sequence).map(s=>({[s]:i_e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Kon(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=i_e(e,o))})}),i}var Qon=Fke;function Jon(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Zon(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function ean(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function tan(e){return e.__COMMENTS__}function nan(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var E9={EOL:Qon.EOL||`
`,tryParseNumber:Jon,createComment:Zon,removeComment:ean,getComment:tan,forceComment:nan},ran="3.2.1";function ian(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return o_e}else if(e.length===0)return o_e;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return oan(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),san.bind(null,n)}function san(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function o_e(){}function oan(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function s7e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}s7e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function o7e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}o7e.description="parse hexadecimal numbers prefixed with 0x";function a7e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}a7e.description="support ISO dates";var rae={loadDsf:ian,std:{math:s7e,hex:o7e,date:a7e}},aan=function(e,t){var n=E9,r=rae,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var q,H=0,Y=1;for(q=s-1;q>0&&i[q]!==`
`;q--,H++);for(;q>0;q--)i[q]===`
`&&Y++;throw new Error(B+" at line "+Y+","+H+" >>>"+i.substr(s-H,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var q="",H=o;h();){if(o===H)return h(),B&&H==="'"&&o==="'"&&q.length===0?(h(),g()):q;if(o==="\\")if(h(),o==="u"){for(var Y=0,K=0;K<4;K++){h();var J=o.charCodeAt(0),F;o>="0"&&o<="9"?F=J-48:o>="a"&&o<="f"?F=J-97+10:o>="A"&&o<="F"?F=J-65+10:d("Bad \\u char "+o),Y=Y*16+F}q+=String.fromCharCode(Y)}else if(typeof a[o]=="string")q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):q+=o}d("Bad string")}function g(){for(var B="",q=0,H=0;;){var Y=p(-H-5);if(!Y||Y===`
`)break;H++}function K(){for(var J=H;o&&o<=" "&&o!==`
`&&J-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),K());;){if(!o)d("Bad multiline string");else if(o==="'"){if(q++,h(),q===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;q>0;)B+="'",q--;o===`
`?(B+=`
`,h(),K()):(o!=="\r"&&(B+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var B="",q=s,H=-1;;){if(o===":")return B?H>=0&&H!==B.length&&(s=q+H,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?H<0&&(H=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var q=o==="\r"||o===`
`||o==="";if(q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var H=B[0];switch(H){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(H==="-"||H>="0"&&H<="9"){var Y=n.tryParseNumber(B);if(Y!==void 0)return Y}}if(q){B=B.trim();var K=l(B);return K!==void 0?K:B}}B+=o}}function w(B,q){var H;for(B--,H=s-2;H>B&&i[H]<=" "&&i[H]!==`
`;H--);i[H]===`
`&&H--,i[H]==="\r"&&H--;var Y=i.substr(B,H-B+1);for(H=0;H<Y.length;H++)if(Y[H]>" "){var K=Y.indexOf(`
`);if(K>=0){var J=[Y.substr(0,K),Y.substr(K+1)];return q&&J[0].trim().length===0&&J.shift(),J}else return[Y]}return[]}function E(B){function q(Y,K){var J,F,U,W;switch(typeof Y){case"string":Y.indexOf(K)>=0&&(W=Y);break;case"object":if(Object.prototype.toString.apply(Y)==="[object Array]")for(J=0,U=Y.length;J<U;J++)W=q(Y[J],K)||W;else for(F in Y)Object.prototype.hasOwnProperty.call(Y,F)&&(W=q(Y[F],K)||W)}return W}function H(Y){var K=q(B,Y);return K?"found '"+Y+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return H("}")||H("]")}function T(){var B=[],q,H,Y;try{if(u&&(q=n.createComment(B,{a:[]})),h(),H=s,v(),q&&(Y=w(H,!0).join(`
`)),o==="]")return h(),q&&(q.e=[Y]),B;for(;o;){if(B.push(I()),H=s,v(),o===","&&(h(),H=s,v()),q){var K=w(H);q.a.push([Y||"",K[0]||""]),Y=K[1]}if(o==="]")return h(),q&&(q.a[q.a.length-1][1]+=Y||""),B;v()}d("End of input while parsing an array (missing ']')")}catch(J){throw J.hint=J.hint||E(B),J}}function C(B){var q="",H={},Y,K,J;try{if(u&&(Y=n.createComment(H,{c:{},o:[]})),B?K=1:(h(),K=s),v(),Y&&(J=w(K,!0).join(`
`)),o==="}"&&!B)return Y&&(Y.e=[J]),h(),H;for(;o;){if(q=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),H[q]=I(),K=s,v(),o===","&&(h(),K=s,v()),Y){var F=w(K);Y.c[q]=[J||"",F[0]||""],J=F[1],Y.o.push(q)}if(o==="}"&&!B)return h(),Y&&(Y.c[q][1]+=J||""),H;v()}if(B)return H;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||E(H),U}}function I(){switch(v(),o){case"{":return C();case"[":return T();case"'":case'"':return m(!0);default:return x()}}function N(B,q){var H=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var Y=q.join(`
`),K=w(H).join(`
`);if(K||Y){var J=n.createComment(B,n.getComment(B));J.r=[Y,K]}}return B}function k(){v();var B=u?w(1):null;switch(o){case"{":return N(C(),B);case"[":return N(T(),B);default:return N(I(),B)}}function P(){v();var B=u?w(1):null;switch(o){case"{":return N(C(),B);case"[":return N(T(),B)}try{return N(C(!0),B)}catch(q){c();try{return N(I(),B)}catch{throw q}}}if(typeof e!="string")throw new Error("source is not a string");var M=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,M=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(M,"parse"),i=e,c(),O?P():k()},uan=function(e,t){var n=E9,r=rae,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var x=v[y];g[x].push(i[x][0].length,i[x][1].length)}}var w,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),C=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),N=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,M="",O=0;function B(W,L){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+L+W[1]}function q(W){return W.replace(T,function(L){var V=k[L];return typeof V=="string"?B(g.esc,V):B(g.uni,("0000"+L.charCodeAt(0).toString(16)).slice(-4))})}function H(W,L,V,Q){return W?(C.lastIndex=0,N.lastIndex=0,c||V||C.test(W)||n.tryParseNumber(W,!0)!==void 0||N.test(W)?(T.lastIndex=0,I.lastIndex=0,T.test(W)?!I.test(W)&&!Q&&d?Y(W,L):B(g.qstr,q(W)):B(g.qstr,W)):B(g.str,W)):B(g.qstr,"")}function Y(W,L){var V,Q=W.replace(/\r/g,"").split(`
`);if(L+=o,Q.length===1)return B(g.mstr,Q[0]);var ue=s+L+g.mstr[0];for(V=0;V<Q.length;V++)ue+=s,Q[V]&&(ue+=L+Q[V]);return ue+s+L+g.mstr[1]}function K(W){return W?l||P.test(W)?(T.lastIndex=0,B(g.qkey,T.test(W)?q(W):W)):B(g.key,W):'""'}function J(W,L,V,Q){function ue(Tn){return Tn&&Tn[Tn[0]==="\r"?1:0]===`
`}function we(Tn){return Tn&&!ue(Tn)}function ce(Tn,zn,hr){if(!Tn)return"";Tn=n.forceComment(Tn);var gr,Xo=Tn.length;for(gr=0;gr<Xo&&Tn[gr]<=" ";gr++);return hr&&gr>0&&(Tn=Tn.substr(gr)),gr<Xo?zn+B(g.rem,Tn):Tn}var Se=w(W);if(Se!==void 0)return B(g.dsf,Se);switch(typeof W){case"string":return H(W,M,L,Q);case"number":return isFinite(W)?B(g.num,String(W)):B(g.lit,"null");case"boolean":return B(g.lit,String(W));case"object":if(!W)return B(g.lit,"null");var Oe;a&&(Oe=n.getComment(W));var et=Object.prototype.toString.apply(W)==="[object Array]",Re=M;M+=o;var St=s+Re,Ze=s+M,It=V||u?"":St,mt=[],Ce,Fe=f?[]:null,st=c,yt=d,Dt=h?"":g.com[0],Je=0,_e,kt,Rt,Ee,$e,ot,xt,jt,Un;if(et){for(_e=0,kt=W.length;_e<kt;_e++){if(Ce=_e<kt-1,Oe?(ot=Oe.a[_e]||[],xt=we(ot[1]),mt.push(ce(ot[0],`
`)+Ze),Fe&&(ot[0]||ot[1]||xt)&&(Fe=null)):mt.push(Ze),O=0,Ee=W[_e],mt.push(J(Ee,Oe?xt:!1,!0)+(Ce?h:"")),Fe){switch(typeof Ee){case"string":O=0,c=!0,d=0,Fe.push(J(Ee,!1,!0)+(Ce?g.com[0]:"")),c=st,d=yt;break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Ce?Dt:""));break}Ce&&(O+=g.com[0].length-g.com[2]),Je+=O}Oe&&ot[1]&&mt.push(ce(ot[1],xt?" ":`
`,xt))}kt===0?Oe&&Oe.e&&mt.push(ce(Oe.e[0],`
`)+St):mt.push(St),mt.length===0?jt=B(g.arr,""):(jt=It+B(g.arr,mt.join("")),Fe&&(Un=Fe.join(" "),Un.length-Je<=f&&(jt=B(g.arr,Un))))}else{var dr=Oe?Oe.o.slice():[],Tr=[];for(Rt in W)Object.prototype.hasOwnProperty.call(W,Rt)&&dr.indexOf(Rt)<0&&Tr.push(Rt);m&&Tr.sort();var xi=dr.concat(Tr);for(_e=0,kt=xi.length;_e<kt;_e++)if(Ce=_e<kt-1,Rt=xi[_e],Oe?(ot=Oe.c[Rt]||[],xt=we(ot[1]),mt.push(ce(ot[0],`
`)+Ze),Fe&&(ot[0]||ot[1]||xt)&&(Fe=null)):mt.push(Ze),O=0,Ee=W[Rt],$e=J(Ee,Oe&&xt),mt.push(K(Rt)+g.col[0]+(ue($e)?"":" ")+$e+(Ce?h:"")),Oe&&ot[1]&&mt.push(ce(ot[1],xt?" ":`
`,xt)),Fe){switch(typeof Ee){case"string":O=0,c=!0,d=0,$e=J(Ee,!1),c=st,d=yt,Fe.push(K(Rt)+g.col[0]+" "+$e+(Ce?g.com[0]:""));break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Ce?Dt:""));break}O+=g.col[0].length-g.col[2],Ce&&(O+=g.com[0].length-g.com[2]),Je+=O}kt===0?Oe&&Oe.e&&mt.push(ce(Oe.e[0],`
`)+St):mt.push(St),mt.length===0?jt=B(g.obj,""):(jt=It+B(g.obj,mt.join("")),Fe&&(Un=Fe.join(" "),Un.length-Je<=f&&(jt=B(g.obj,Un))))}return M=Re,jt}}w=r.loadDsf(p,"stringify");var F="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(F=U[0]+`
`),F+=J(e,null,!0,!0),U&&(F+=U[1]||""),F},jS=E9;function Ak(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function AK(e,t){if(!(e===null||typeof e!="object")){var n=jS.getComment(e);n&&jS.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)a_e(o.a,r,n.a[r],AK(e[r]))&&(s=!0);!s&&n.e&&(o.e=Ak(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];a_e(o.s,l,n.c[l],AK(e[l]))&&(s=!0)}!s&&n.e&&(o.e=Ak(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=Ak(n.r[0],n.r[1])),s?o:void 0}}function lan(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function can(e,t){var n=[];if(IK(e,t,n,[]),n.length>0){var r=rF(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+lan(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),rF(t,r,1)}}function a_e(e,t,n,r){var i=Ak(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function Ik(e,t){var n=Ak(t.b,t.a);return n.path=e,n}function kk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(Ik(s,o)),kk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(Ik(u,l)),kk(l.x,t,u))});e.e&&t.push(Ik(n,e.e))}}function IK(e,t,n,r){if(e){if(t===null||typeof t!="object"){kk(e,n,r);return}var i,s=jS.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],IK(u.x,t[i],n,l)):(n.push(Ik(l,u)),kk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],IK(d.x,t[c],n,f))):d&&(n.push(Ik(f,d)),kk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function rF(e,t,n){var r=jS.createComment(e,jS.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=jS.forceComment(t)),r.r[n]||""}var fan={extract:function(e){return AK(e,!0)},merge:can,header:function(e,t){return rF(e,t,0)},footer:function(e,t){return rF(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var u_e=E9,dan=ran,l_e=aan,c_e=uan,han=fan,pan=rae,S9={parse:l_e,stringify:c_e,endOfLine:function(){return u_e.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(u_e.EOL=e)},version:dan,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,l_e(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,c_e(e,t)}},comments:han,dsf:pan.std},kK={exports:{}},u7e={},Ih={},r2={},pP={},fr={},vD={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((x,w)=>`${x}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((x,w)=>(w instanceof n&&(x[w.str]=(x[w.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const x=[y[0]];let w=0;for(;w<v.length;)a(x,v[w]),x.push(y[++w]);return new r(x)}e._=i;const s=new r("+");function o(y,...v){const x=[h(y[0])];let w=0;for(;w<v.length;)x.push(s),a(x,v[w]),x.push(s,h(y[++w]));return u(x),new r(x)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const x=l(y[v-1],y[v+1]);if(x!==void 0){y.splice(v-1,3,x);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(vD);var RK={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=vD;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(RK);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=vD,n=RK;var r=vD;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=RK;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(V,Q){return this}}class o extends s{constructor(V,Q,ue){super(),this.varKind=V,this.name=Q,this.rhs=ue}render({es5:V,_n:Q}){const ue=V?n.varKinds.var:this.varKind,we=this.rhs===void 0?"":` = ${this.rhs}`;return`${ue} ${this.name}${we};`+Q}optimizeNames(V,Q){if(V[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,V,Q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(V,Q,ue){super(),this.lhs=V,this.rhs=Q,this.sideEffects=ue}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,Q){if(!(this.lhs instanceof t.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,V,Q),this}get names(){const V=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(V,this.rhs)}}class u extends a{constructor(V,Q,ue,we){super(V,ue,we),this.op=Q}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class l extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class c extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends s{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends s{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,Q){return this.code=B(this.code,V,Q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((Q,ue)=>Q+ue.render(V),"")}optimizeNodes(){const{nodes:V}=this;let Q=V.length;for(;Q--;){const ue=V[Q].optimizeNodes();Array.isArray(ue)?V.splice(Q,1,...ue):ue?V[Q]=ue:V.splice(Q,1)}return V.length>0?this:void 0}optimizeNames(V,Q){const{nodes:ue}=this;let we=ue.length;for(;we--;){const ce=ue[we];ce.optimizeNames(V,Q)||(q(V,ce.names),ue.splice(we,1))}return ue.length>0?this:void 0}get names(){return this.nodes.reduce((V,Q)=>M(V,Q.names),{})}}class p extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(V,Q){super(Q),this.condition=V}render(V){let Q=`if(${this.condition})`+super.render(V);return this.else&&(Q+="else "+this.else.render(V)),Q}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let Q=this.else;if(Q){const ue=Q.optimizeNodes();Q=this.else=Array.isArray(ue)?new g(ue):ue}if(Q)return V===!1?Q instanceof y?Q:Q.nodes:this.nodes.length?this:new y(H(V),Q instanceof y?[Q]:Q.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,Q){var ue;if(this.else=(ue=this.else)===null||ue===void 0?void 0:ue.optimizeNames(V,Q),!!(super.optimizeNames(V,Q)||this.else))return this.condition=B(this.condition,V,Q),this}get names(){const V=super.names;return O(V,this.condition),this.else&&M(V,this.else.names),V}}y.kind="if";class v extends p{}v.kind="for";class x extends v{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,Q){if(super.optimizeNames(V,Q))return this.iteration=B(this.iteration,V,Q),this}get names(){return M(super.names,this.iteration.names)}}class w extends v{constructor(V,Q,ue,we){super(),this.varKind=V,this.name=Q,this.from=ue,this.to=we}render(V){const Q=V.es5?n.varKinds.var:this.varKind,{name:ue,from:we,to:ce}=this;return`for(${Q} ${ue}=${we}; ${ue}<${ce}; ${ue}++)`+super.render(V)}get names(){const V=O(super.names,this.from);return O(V,this.to)}}class E extends v{constructor(V,Q,ue,we){super(),this.loop=V,this.varKind=Q,this.name=ue,this.iterable=we}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,Q){if(super.optimizeNames(V,Q))return this.iterable=B(this.iterable,V,Q),this}get names(){return M(super.names,this.iterable.names)}}class T extends p{constructor(V,Q,ue){super(),this.name=V,this.args=Q,this.async=ue}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}T.kind="func";class C extends h{render(V){return"return "+super.render(V)}}C.kind="return";class I extends p{render(V){let Q="try"+super.render(V);return this.catch&&(Q+=this.catch.render(V)),this.finally&&(Q+=this.finally.render(V)),Q}optimizeNodes(){var V,Q;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(Q=this.finally)===null||Q===void 0||Q.optimizeNodes(),this}optimizeNames(V,Q){var ue,we;return super.optimizeNames(V,Q),(ue=this.catch)===null||ue===void 0||ue.optimizeNames(V,Q),(we=this.finally)===null||we===void 0||we.optimizeNames(V,Q),this}get names(){const V=super.names;return this.catch&&M(V,this.catch.names),this.finally&&M(V,this.finally.names),V}}class N extends p{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}N.kind="catch";class k extends p{render(V){return"finally"+super.render(V)}}k.kind="finally";class P{constructor(V,Q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Q,_n:Q.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,Q){const ue=this._extScope.value(V,Q);return(this._values[ue.prefix]||(this._values[ue.prefix]=new Set)).add(ue),ue}getScopeValue(V,Q){return this._extScope.getValue(V,Q)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,Q,ue,we){const ce=this._scope.toName(Q);return ue!==void 0&&we&&(this._constants[ce.str]=ue),this._leafNode(new o(V,ce,ue)),ce}const(V,Q,ue){return this._def(n.varKinds.const,V,Q,ue)}let(V,Q,ue){return this._def(n.varKinds.let,V,Q,ue)}var(V,Q,ue){return this._def(n.varKinds.var,V,Q,ue)}assign(V,Q,ue){return this._leafNode(new a(V,Q,ue))}add(V,Q){return this._leafNode(new u(V,e.operators.ADD,Q))}code(V){return typeof V=="function"?V():V!==t.nil&&this._leafNode(new d(V)),this}object(...V){const Q=["{"];for(const[ue,we]of V)Q.length>1&&Q.push(","),Q.push(ue),(ue!==we||this.opts.es5)&&(Q.push(":"),(0,t.addCodeArg)(Q,we));return Q.push("}"),new t._Code(Q)}if(V,Q,ue){if(this._blockNode(new y(V)),Q&&ue)this.code(Q).else().code(ue).endIf();else if(Q)this.code(Q).endIf();else if(ue)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new y(V))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(V,Q){return this._blockNode(V),Q&&this.code(Q).endFor(),this}for(V,Q){return this._for(new x(V),Q)}forRange(V,Q,ue,we,ce=this.opts.es5?n.varKinds.var:n.varKinds.let){const Se=this._scope.toName(V);return this._for(new w(ce,Se,Q,ue),()=>we(Se))}forOf(V,Q,ue,we=n.varKinds.const){const ce=this._scope.toName(V);if(this.opts.es5){const Se=Q instanceof t.Name?Q:this.var("_arr",Q);return this.forRange("_i",0,(0,t._)`${Se}.length`,Oe=>{this.var(ce,(0,t._)`${Se}[${Oe}]`),ue(ce)})}return this._for(new E("of",we,ce,Q),()=>ue(ce))}forIn(V,Q,ue,we=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,t._)`Object.keys(${Q})`,ue);const ce=this._scope.toName(V);return this._for(new E("in",we,ce,Q),()=>ue(ce))}endFor(){return this._endBlockNode(v)}label(V){return this._leafNode(new l(V))}break(V){return this._leafNode(new c(V))}return(V){const Q=new C;if(this._blockNode(Q),this.code(V),Q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(V,Q,ue){if(!Q&&!ue)throw new Error('CodeGen: "try" without "catch" and "finally"');const we=new I;if(this._blockNode(we),this.code(V),Q){const ce=this.name("e");this._currNode=we.catch=new N(ce),Q(ce)}return ue&&(this._currNode=we.finally=new k,this.code(ue)),this._endBlockNode(N,k)}throw(V){return this._leafNode(new f(V))}block(V,Q){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(Q),this}endBlock(V){const Q=this._blockStarts.pop();if(Q===void 0)throw new Error("CodeGen: not in self-balancing block");const ue=this._nodes.length-Q;if(ue<0||V!==void 0&&ue!==V)throw new Error(`CodeGen: wrong number of nodes: ${ue} vs ${V} expected`);return this._nodes.length=Q,this}func(V,Q=t.nil,ue,we){return this._blockNode(new T(V,Q,ue)),we&&this.code(we).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,Q){const ue=this._currNode;if(ue instanceof V||Q&&ue instanceof Q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Q?`${V.kind}/${Q.kind}`:V.kind}"`)}_elseNode(V){const Q=this._currNode;if(!(Q instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Q.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const Q=this._nodes;Q[Q.length-1]=V}}e.CodeGen=P;function M(L,V){for(const Q in V)L[Q]=(L[Q]||0)+(V[Q]||0);return L}function O(L,V){return V instanceof t._CodeOrName?M(L,V.names):L}function B(L,V,Q){if(L instanceof t.Name)return ue(L);if(!we(L))return L;return new t._Code(L._items.reduce((ce,Se)=>(Se instanceof t.Name&&(Se=ue(Se)),Se instanceof t._Code?ce.push(...Se._items):ce.push(Se),ce),[]));function ue(ce){const Se=Q[ce.str];return Se===void 0||V[ce.str]!==1?ce:(delete V[ce.str],Se)}function we(ce){return ce instanceof t._Code&&ce._items.some(Se=>Se instanceof t.Name&&V[Se.str]===1&&Q[Se.str]!==void 0)}}function q(L,V){for(const Q in V)L[Q]=(L[Q]||0)-(V[Q]||0)}function H(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${W(L)}`}e.not=H;const Y=U(e.operators.AND);function K(...L){return L.reduce(Y)}e.and=K;const J=U(e.operators.OR);function F(...L){return L.reduce(J)}e.or=F;function U(L){return(V,Q)=>V===t.nil?Q:Q===t.nil?V:(0,t._)`${W(V)} ${L} ${W(Q)}`}function W(L){return L instanceof t.Name?L:(0,t._)`(${L})`}})(fr);var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.checkStrictMode=Bt.getErrorPath=Bt.Type=Bt.useFunc=Bt.setEvaluated=Bt.evaluatedPropsToName=Bt.mergeEvaluated=Bt.eachItem=Bt.unescapeJsonPointer=Bt.escapeJsonPointer=Bt.escapeFragment=Bt.unescapeFragment=Bt.schemaRefOrVal=Bt.schemaHasRulesButRef=Bt.schemaHasRules=Bt.checkUnknownRules=Bt.alwaysValidSchema=Bt.toHash=void 0;const Hi=fr,man=vD;function gan(e){const t={};for(const n of e)t[n]=!0;return t}Bt.toHash=gan;function yan(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(l7e(e,t),!c7e(t,e.self.RULES.all))}Bt.alwaysValidSchema=yan;function l7e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||h7e(e,`unknown keyword: "${s}"`)}Bt.checkUnknownRules=l7e;function c7e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Bt.schemaHasRules=c7e;function van(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Bt.schemaHasRulesButRef=van;function ban({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Hi._)`${n}`}return(0,Hi._)`${e}${t}${(0,Hi.getProperty)(r)}`}Bt.schemaRefOrVal=ban;function xan(e){return f7e(decodeURIComponent(e))}Bt.unescapeFragment=xan;function _an(e){return encodeURIComponent(iae(e))}Bt.escapeFragment=_an;function iae(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Bt.escapeJsonPointer=iae;function f7e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Bt.unescapeJsonPointer=f7e;function wan(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Bt.eachItem=wan;function f_e({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Hi.Name?(s instanceof Hi.Name?e(i,s,o):t(i,s,o),o):s instanceof Hi.Name?(t(i,o,s),s):n(s,o);return a===Hi.Name&&!(u instanceof Hi.Name)?r(i,u):u}}Bt.mergeEvaluated={props:f_e({mergeNames:(e,t,n)=>e.if((0,Hi._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Hi._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Hi._)`${n} || {}`).code((0,Hi._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Hi._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Hi._)`${n} || {}`),sae(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:d7e}),items:f_e({mergeNames:(e,t,n)=>e.if((0,Hi._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Hi._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Hi._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Hi._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function d7e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Hi._)`{}`);return t!==void 0&&sae(e,n,t),n}Bt.evaluatedPropsToName=d7e;function sae(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Hi._)`${t}${(0,Hi.getProperty)(r)}`,!0))}Bt.setEvaluated=sae;const d_e={};function Ean(e,t){return e.scopeValue("func",{ref:t,code:d_e[t.code]||(d_e[t.code]=new man._Code(t.code))})}Bt.useFunc=Ean;var DK;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(DK||(Bt.Type=DK={}));function San(e,t,n){if(e instanceof Hi.Name){const r=t===DK.Num;return n?r?(0,Hi._)`"[" + ${e} + "]"`:(0,Hi._)`"['" + ${e} + "']"`:r?(0,Hi._)`"/" + ${e}`:(0,Hi._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Hi.getProperty)(e).toString():"/"+iae(e)}Bt.getErrorPath=San;function h7e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Bt.checkStrictMode=h7e;var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});const au=fr,Tan={data:new au.Name("data"),valCxt:new au.Name("valCxt"),instancePath:new au.Name("instancePath"),parentData:new au.Name("parentData"),parentDataProperty:new au.Name("parentDataProperty"),rootData:new au.Name("rootData"),dynamicAnchors:new au.Name("dynamicAnchors"),vErrors:new au.Name("vErrors"),errors:new au.Name("errors"),this:new au.Name("this"),self:new au.Name("self"),scope:new au.Name("scope"),json:new au.Name("json"),jsonPos:new au.Name("jsonPos"),jsonLen:new au.Name("jsonLen"),jsonPart:new au.Name("jsonPart")};Wm.default=Tan;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=fr,n=Bt,r=Wm;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,x){const{it:w}=g,{gen:E,compositeRule:T,allErrors:C}=w,I=f(g,y,v);x??(T||C)?u(E,I):l(w,(0,t._)`[${I}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:x}=g,{gen:w,compositeRule:E,allErrors:T}=x,C=f(g,y,v);u(w,C),E||T||l(x,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:x,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,C=>{g.const(T,(0,t._)`${r.default.vErrors}[${C}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,x))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:x,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${x}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:x}=g.it;return x===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:x,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),x.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:x}){let w=x?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},x){const{keyword:w,data:E,schemaValue:T,it:C}=g,{opts:I,propertyName:N,topSchemaRef:k,schemaPath:P}=C;x.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),I.messages&&x.push([c.message,typeof v=="function"?v(g):v]),I.verbose&&x.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${P}`],[r.default.data,E]),N&&x.push([c.propertyName,N])}})(pP);Object.defineProperty(r2,"__esModule",{value:!0});r2.boolOrEmptySchema=r2.topBoolOrEmptySchema=void 0;const Can=pP,Aan=fr,Ian=Wm,kan={message:"boolean schema is false"};function Ran(e){const{gen:t,schema:n,validateName:r}=e;n===!1?p7e(e,!1):typeof n=="object"&&n.$async===!0?t.return(Ian.default.data):(t.assign((0,Aan._)`${r}.errors`,null),t.return(!0))}r2.topBoolOrEmptySchema=Ran;function Dan(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),p7e(e)):n.var(t,!0)}r2.boolOrEmptySchema=Dan;function p7e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Can.reportError)(i,kan,void 0,t)}var $o={},C_={};Object.defineProperty(C_,"__esModule",{value:!0});C_.getRules=C_.isJSONType=void 0;const Nan=["string","number","integer","boolean","null","object","array"],Pan=new Set(Nan);function Oan(e){return typeof e=="string"&&Pan.has(e)}C_.isJSONType=Oan;function $an(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}C_.getRules=$an;var ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.shouldUseRule=ig.shouldUseGroup=ig.schemaHasRulesForType=void 0;function Man({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&m7e(e,r)}ig.schemaHasRulesForType=Man;function m7e(e,t){return t.rules.some(n=>g7e(e,n))}ig.shouldUseGroup=m7e;function g7e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}ig.shouldUseRule=g7e;Object.defineProperty($o,"__esModule",{value:!0});$o.reportTypeError=$o.checkDataTypes=$o.checkDataType=$o.coerceAndCheckDataType=$o.getJSONTypes=$o.getSchemaTypes=$o.DataType=void 0;const Lan=C_,Fan=ig,Ban=pP,Xn=fr,y7e=Bt;var US;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(US||($o.DataType=US={}));function jan(e){const t=v7e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}$o.getSchemaTypes=jan;function v7e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Lan.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}$o.getJSONTypes=v7e;function Uan(e,t){const{gen:n,data:r,opts:i}=e,s=zan(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Fan.schemaHasRulesForType)(e,t[0]));if(o){const a=oae(t,r,i.strictNumbers,US.Wrong);n.if(a,()=>{s.length?Van(e,t,s):aae(e)})}return o}$o.coerceAndCheckDataType=Uan;const b7e=new Set(["string","number","integer","boolean","null"]);function zan(e,t){return t?e.filter(n=>b7e.has(n)||t==="array"&&n==="array"):[]}function Van(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Xn._)`typeof ${i}`),a=r.let("coerced",(0,Xn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Xn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Xn._)`${i}[0]`).assign(o,(0,Xn._)`typeof ${i}`).if(oae(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Xn._)`${a} !== undefined`);for(const l of n)(b7e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),aae(e),r.endIf(),r.if((0,Xn._)`${a} !== undefined`,()=>{r.assign(i,a),Han(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Xn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Xn._)`"" + ${i}`).elseIf((0,Xn._)`${i} === null`).assign(a,(0,Xn._)`""`);return;case"number":r.elseIf((0,Xn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Xn._)`+${i}`);return;case"integer":r.elseIf((0,Xn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Xn._)`+${i}`);return;case"boolean":r.elseIf((0,Xn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Xn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Xn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Xn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Xn._)`[${i}]`)}}}function Han({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Xn._)`${t} !== undefined`,()=>e.assign((0,Xn._)`${t}[${n}]`,r))}function NK(e,t,n,r=US.Correct){const i=r===US.Correct?Xn.operators.EQ:Xn.operators.NEQ;let s;switch(e){case"null":return(0,Xn._)`${t} ${i} null`;case"array":s=(0,Xn._)`Array.isArray(${t})`;break;case"object":s=(0,Xn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Xn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Xn._)`typeof ${t} ${i} ${e}`}return r===US.Correct?s:(0,Xn.not)(s);function o(a=Xn.nil){return(0,Xn.and)((0,Xn._)`typeof ${t} == "number"`,a,n?(0,Xn._)`isFinite(${t})`:Xn.nil)}}$o.checkDataType=NK;function oae(e,t,n,r){if(e.length===1)return NK(e[0],t,n,r);let i;const s=(0,y7e.toHash)(e);if(s.array&&s.object){const o=(0,Xn._)`typeof ${t} != "object"`;i=s.null?o:(0,Xn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Xn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Xn.and)(i,NK(o,t,n,r));return i}$o.checkDataTypes=oae;const qan={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Xn._)`{type: ${e}}`:(0,Xn._)`{type: ${t}}`};function aae(e){const t=Wan(e);(0,Ban.reportError)(t,qan)}$o.reportTypeError=aae;function Wan(e){const{gen:t,data:n,schema:r}=e,i=(0,y7e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var T9={};Object.defineProperty(T9,"__esModule",{value:!0});T9.assignDefaults=void 0;const yE=fr,Gan=Bt;function Yan(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)h_e(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>h_e(e,s,i.default))}T9.assignDefaults=Yan;function h_e(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,yE._)`${s}${(0,yE.getProperty)(t)}`;if(i){(0,Gan.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,yE._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,yE._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,yE._)`${a} = ${(0,yE.stringify)(n)}`)}var jp={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.validateUnion=lr.validateArray=lr.usePattern=lr.callValidateCode=lr.schemaProperties=lr.allSchemaProperties=lr.noPropertyInData=lr.propertyInData=lr.isOwnProperty=lr.hasPropFunc=lr.reportMissingProp=lr.checkMissingProp=lr.checkReportMissingProp=void 0;const us=fr,uae=Bt,xy=Wm,Kan=Bt;function Xan(e,t){const{gen:n,data:r,it:i}=e;n.if(cae(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,us._)`${t}`},!0),e.error()})}lr.checkReportMissingProp=Xan;function Qan({gen:e,data:t,it:{opts:n}},r,i){return(0,us.or)(...r.map(s=>(0,us.and)(cae(e,t,s,n.ownProperties),(0,us._)`${i} = ${s}`)))}lr.checkMissingProp=Qan;function Jan(e,t){e.setParams({missingProperty:t},!0),e.error()}lr.reportMissingProp=Jan;function x7e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,us._)`Object.prototype.hasOwnProperty`})}lr.hasPropFunc=x7e;function lae(e,t,n){return(0,us._)`${x7e(e)}.call(${t}, ${n})`}lr.isOwnProperty=lae;function Zan(e,t,n,r){const i=(0,us._)`${t}${(0,us.getProperty)(n)} !== undefined`;return r?(0,us._)`${i} && ${lae(e,t,n)}`:i}lr.propertyInData=Zan;function cae(e,t,n,r){const i=(0,us._)`${t}${(0,us.getProperty)(n)} === undefined`;return r?(0,us.or)(i,(0,us.not)(lae(e,t,n))):i}lr.noPropertyInData=cae;function _7e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}lr.allSchemaProperties=_7e;function eun(e,t){return _7e(t).filter(n=>!(0,uae.alwaysValidSchema)(e,t[n]))}lr.schemaProperties=eun;function tun({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,us._)`${e}, ${t}, ${r}${i}`:t,f=[[xy.default.instancePath,(0,us.strConcat)(xy.default.instancePath,s)],[xy.default.parentData,o.parentData],[xy.default.parentDataProperty,o.parentDataProperty],[xy.default.rootData,xy.default.rootData]];o.opts.dynamicRef&&f.push([xy.default.dynamicAnchors,xy.default.dynamicAnchors]);const d=(0,us._)`${c}, ${n.object(...f)}`;return u!==us.nil?(0,us._)`${a}.call(${u}, ${d})`:(0,us._)`${a}(${d})`}lr.callValidateCode=tun;const nun=(0,us._)`new RegExp`;function run({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,us._)`${i.code==="new RegExp"?nun:(0,Kan.useFunc)(e,i)}(${n}, ${r})`})}lr.usePattern=run;function iun(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,us._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:uae.Type.Num},s),t.if((0,us.not)(s),a)})}}lr.validateArray=iun;function sun(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,uae.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,us._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,us.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}lr.validateUnion=sun;Object.defineProperty(jp,"__esModule",{value:!0});jp.validateKeywordUsage=jp.validSchemaType=jp.funcKeywordCode=jp.macroKeywordCode=void 0;const Ju=fr,ix=Wm,oun=lr,aun=pP;function uun(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=w7e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Ju.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}jp.macroKeywordCode=uun;function lun(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;fun(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=w7e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&p_e(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&p_e(e),g(()=>cun(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Ju._)`await `),v=>r.assign(f,!1).if((0,Ju._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Ju._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Ju._)`${c}.errors`;return r.assign(y,null),m(Ju.nil),y}function m(y=t.async?(0,Ju._)`await `:Ju.nil){const v=u.opts.passContext?ix.default.this:ix.default.self,x=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Ju._)`${y}${(0,oun.callValidateCode)(e,c,v,x)}`,t.modifying)}function g(y){var v;r.if((0,Ju.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}jp.funcKeywordCode=lun;function p_e(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Ju._)`${r.parentData}[${r.parentDataProperty}]`))}function cun(e,t){const{gen:n}=e;n.if((0,Ju._)`Array.isArray(${t})`,()=>{n.assign(ix.default.vErrors,(0,Ju._)`${ix.default.vErrors} === null ? ${t} : ${ix.default.vErrors}.concat(${t})`).assign(ix.default.errors,(0,Ju._)`${ix.default.vErrors}.length`),(0,aun.extendErrors)(e)},()=>e.error())}function fun({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function w7e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ju.stringify)(n)})}function dun(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}jp.validSchemaType=dun;function hun({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}jp.validateKeywordUsage=hun;var k1={};Object.defineProperty(k1,"__esModule",{value:!0});k1.extendSubschemaMode=k1.extendSubschemaData=k1.getSubschema=void 0;const Mp=fr,E7e=Bt;function pun(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Mp._)`${e.schemaPath}${(0,Mp.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Mp._)`${e.schemaPath}${(0,Mp.getProperty)(t)}${(0,Mp.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,E7e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}k1.getSubschema=pun;function mun(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Mp._)`${t.data}${(0,Mp.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Mp.str)`${l}${(0,E7e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Mp._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Mp.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}k1.extendSubschemaData=mun;function gun(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}k1.extendSubschemaMode=gun;var Na={},S7e={exports:{}},l1=S7e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};C6(t,r,i,e,"",e)};l1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};l1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};l1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};l1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function C6(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in l1.arrayKeywords)for(var d=0;d<f.length;d++)C6(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in l1.propsKeywords){if(f&&typeof f=="object")for(var h in f)C6(e,t,n,f[h],i+"/"+c+"/"+yun(h),s,i,c,r,h)}else(c in l1.keywords||e.allKeys&&!(c in l1.skipKeywords))&&C6(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function yun(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var vun=S7e.exports;Object.defineProperty(Na,"__esModule",{value:!0});Na.getSchemaRefs=Na.resolveUrl=Na.normalizeId=Na._getFullPath=Na.getFullPath=Na.inlineRef=void 0;const bun=Bt,xun=$Z,_un=vun,wun=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Eun(e,t=!0){return typeof e=="boolean"?!0:t===!0?!PK(e):t?T7e(e)<=t:!1}Na.inlineRef=Eun;const Sun=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function PK(e){for(const t in e){if(Sun.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(PK)||typeof n=="object"&&PK(n))return!0}return!1}function T7e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!wun.has(n)&&(typeof e[n]=="object"&&(0,bun.eachItem)(e[n],r=>t+=T7e(r)),t===1/0))return 1/0}return t}function C7e(e,t="",n){n!==!1&&(t=zS(t));const r=e.parse(t);return A7e(e,r)}Na.getFullPath=C7e;function A7e(e,t){return e.serialize(t).split("#")[0]+"#"}Na._getFullPath=A7e;const Tun=/#\/?$/;function zS(e){return e?e.replace(Tun,""):""}Na.normalizeId=zS;function Cun(e,t,n){return n=zS(n),e.resolve(t,n)}Na.resolveUrl=Cun;const Aun=/^[a-z_][-a-z0-9._]*$/i;function Iun(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=zS(e[n]||t),s={"":i},o=C7e(r,i,!1),a={},u=new Set;return _un(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(x){const w=this.opts.uriResolver.resolve;if(x=zS(g?w(g,x):x),u.has(x))throw c(x);u.add(x);let E=this.refs[x];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,x):x!==zS(m)&&(x[0]==="#"?(l(f,a[x],x),a[x]=f):this.refs[x]=m),x}function v(x){if(typeof x=="string"){if(!Aun.test(x))throw new Error(`invalid anchor "${x}"`);y.call(this,`#${x}`)}}}),a;function l(f,d,h){if(d!==void 0&&!xun(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Na.getSchemaRefs=Iun;Object.defineProperty(Ih,"__esModule",{value:!0});Ih.getData=Ih.KeywordCxt=Ih.validateFunctionCode=void 0;const I7e=r2,m_e=$o,fae=ig,iF=$o,kun=T9,Rk=jp,eH=k1,Zt=fr,Rn=Wm,Run=Na,sg=Bt,zA=pP;function Dun(e){if(D7e(e)&&(N7e(e),R7e(e))){Oun(e);return}k7e(e,()=>(0,I7e.topBoolOrEmptySchema)(e))}Ih.validateFunctionCode=Dun;function k7e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Zt._)`${Rn.default.data}, ${Rn.default.valCxt}`,r.$async,()=>{e.code((0,Zt._)`"use strict"; ${g_e(n,i)}`),Pun(e,i),e.code(s)}):e.func(t,(0,Zt._)`${Rn.default.data}, ${Nun(i)}`,r.$async,()=>e.code(g_e(n,i)).code(s))}function Nun(e){return(0,Zt._)`{${Rn.default.instancePath}="", ${Rn.default.parentData}, ${Rn.default.parentDataProperty}, ${Rn.default.rootData}=${Rn.default.data}${e.dynamicRef?(0,Zt._)`, ${Rn.default.dynamicAnchors}={}`:Zt.nil}}={}`}function Pun(e,t){e.if(Rn.default.valCxt,()=>{e.var(Rn.default.instancePath,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.instancePath}`),e.var(Rn.default.parentData,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.parentData}`),e.var(Rn.default.parentDataProperty,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.parentDataProperty}`),e.var(Rn.default.rootData,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.rootData}`),t.dynamicRef&&e.var(Rn.default.dynamicAnchors,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.dynamicAnchors}`)},()=>{e.var(Rn.default.instancePath,(0,Zt._)`""`),e.var(Rn.default.parentData,(0,Zt._)`undefined`),e.var(Rn.default.parentDataProperty,(0,Zt._)`undefined`),e.var(Rn.default.rootData,Rn.default.data),t.dynamicRef&&e.var(Rn.default.dynamicAnchors,(0,Zt._)`{}`)})}function Oun(e){const{schema:t,opts:n,gen:r}=e;k7e(e,()=>{n.$comment&&t.$comment&&O7e(e),Bun(e),r.let(Rn.default.vErrors,null),r.let(Rn.default.errors,0),n.unevaluated&&$un(e),P7e(e),zun(e)})}function $un(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Zt._)`${n}.evaluated`),t.if((0,Zt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Zt._)`${e.evaluated}.props`,(0,Zt._)`undefined`)),t.if((0,Zt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Zt._)`${e.evaluated}.items`,(0,Zt._)`undefined`))}function g_e(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Zt._)`/*# sourceURL=${n} */`:Zt.nil}function Mun(e,t){if(D7e(e)&&(N7e(e),R7e(e))){Lun(e,t);return}(0,I7e.boolOrEmptySchema)(e,t)}function R7e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function D7e(e){return typeof e.schema!="boolean"}function Lun(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&O7e(e),jun(e),Uun(e);const s=r.const("_errs",Rn.default.errors);P7e(e,s),r.var(t,(0,Zt._)`${s} === ${Rn.default.errors}`)}function N7e(e){(0,sg.checkUnknownRules)(e),Fun(e)}function P7e(e,t){if(e.opts.jtd)return y_e(e,[],!1,t);const n=(0,m_e.getSchemaTypes)(e.schema),r=(0,m_e.coerceAndCheckDataType)(e,n);y_e(e,n,!r,t)}function Fun(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,sg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Bun(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,sg.checkStrictMode)(e,"default is ignored in the schema root")}function jun(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Run.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Uun(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function O7e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Zt._)`${Rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Zt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Zt._)`${Rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function zun(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Zt._)`${Rn.default.errors} === 0`,()=>t.return(Rn.default.data),()=>t.throw((0,Zt._)`new ${i}(${Rn.default.vErrors})`)):(t.assign((0,Zt._)`${r}.errors`,Rn.default.vErrors),s.unevaluated&&Vun(e),t.return((0,Zt._)`${Rn.default.errors} === 0`))}function Vun({gen:e,evaluated:t,props:n,items:r}){n instanceof Zt.Name&&e.assign((0,Zt._)`${t}.props`,n),r instanceof Zt.Name&&e.assign((0,Zt._)`${t}.items`,r)}function y_e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,sg.schemaHasRulesButRef)(s,c))){i.block(()=>L7e(e,"$ref",c.all.$ref.definition));return}u.jtd||Hun(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,fae.shouldUseGroup)(s,d)&&(d.type?(i.if((0,iF.checkDataType)(d.type,o,u.strictNumbers)),v_e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,iF.reportTypeError)(e)),i.endIf()):v_e(e,d),a||i.if((0,Zt._)`${Rn.default.errors} === ${r||0}`))}}function v_e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,kun.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,fae.shouldUseRule)(r,s)&&L7e(e,s.keyword,s.definition,t.type)})}function Hun(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(qun(e,t),e.opts.allowUnionTypes||Wun(e,t),Gun(e,e.dataTypes))}function qun(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{$7e(e.dataTypes,n)||dae(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Kun(e,t)}}function Wun(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&dae(e,"use allowUnionTypes to allow union type keyword")}function Gun(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,fae.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Yun(t,o))&&dae(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Yun(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function $7e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Kun(e,t){const n=[];for(const r of e.dataTypes)$7e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function dae(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,sg.checkStrictMode)(e,t,e.opts.strictTypes)}class M7e{constructor(t,n,r){if((0,Rk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,sg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",F7e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Rk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Rn.default.errors))}result(t,n,r){this.failResult((0,Zt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Zt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Zt._)`${n} !== undefined && (${(0,Zt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?zA.reportExtraError:zA.reportError)(this,this.def.error,n)}$dataError(){(0,zA.reportError)(this,this.def.$dataError||zA.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,zA.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Zt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Zt.nil,n=Zt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Zt.or)((0,Zt._)`${i} === undefined`,n)),t!==Zt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Zt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Zt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Zt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Zt._)`${(0,iF.checkDataTypes)(u,n,s.opts.strictNumbers,iF.DataType.Wrong)}`}return Zt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Zt._)`!${u}(${n})`}return Zt.nil}}subschema(t,n){const r=(0,eH.getSubschema)(this.it,t);(0,eH.extendSubschemaData)(r,this.it,t),(0,eH.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Mun(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=sg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=sg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Zt.Name)),!0}}Ih.KeywordCxt=M7e;function L7e(e,t,n,r){const i=new M7e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Rk.funcKeywordCode)(i,n):"macro"in n?(0,Rk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Rk.funcKeywordCode)(i,n)}const Xun=/^\/(?:[^~]|~0|~1)*$/,Qun=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function F7e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Rn.default.rootData;if(e[0]==="/"){if(!Xun.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Rn.default.rootData}else{const l=Qun.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Zt._)`${s}${(0,Zt.getProperty)((0,sg.unescapeJsonPointer)(l))}`,o=(0,Zt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Ih.getData=F7e;var mP={};Object.defineProperty(mP,"__esModule",{value:!0});class Jun extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}mP.default=Jun;var wC={};Object.defineProperty(wC,"__esModule",{value:!0});const tH=Na;class Zun extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,tH.resolveUrl)(t,n,r),this.missingSchema=(0,tH.normalizeId)((0,tH.getFullPath)(t,this.missingRef))}}wC.default=Zun;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.resolveSchema=Gl.getCompilingSchema=Gl.resolveRef=Gl.compileSchema=Gl.SchemaEnv=void 0;const Ud=fr,eln=mP,Rb=Wm,fh=Na,b_e=Bt,tln=Ih;class C9{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,fh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Gl.SchemaEnv=C9;function hae(e){const t=B7e.call(this,e);if(t)return t;const n=(0,fh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Ud.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:eln.default,code:(0,Ud._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Rb.default.data,parentData:Rb.default.parentData,parentDataProperty:Rb.default.parentDataProperty,dataNames:[Rb.default.data],dataPathArr:[Ud.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ud.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Ud.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ud._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,tln.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Rb.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Rb.default.self}`,`${Rb.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Ud.Name?void 0:p,items:m instanceof Ud.Name?void 0:m,dynamicProps:p instanceof Ud.Name,dynamicItems:m instanceof Ud.Name},h.source&&(h.source.evaluated=(0,Ud.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Gl.compileSchema=hae;function nln(e,t,n){var r;n=(0,fh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=sln.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new C9({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=rln.call(this,s)}Gl.resolveRef=nln;function rln(e){return(0,fh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:hae.call(this,e)}function B7e(e){for(const t of this._compilations)if(iln(t,e))return t}Gl.getCompilingSchema=B7e;function iln(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function sln(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||A9.call(this,e,t)}function A9(e,t){const n=this.opts.uriResolver.parse(t),r=(0,fh._getFullPath)(this.opts.uriResolver,n);let i=(0,fh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return nH.call(this,n,e);const s=(0,fh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=A9.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:nH.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||hae.call(this,o),s===(0,fh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,fh.resolveUrl)(this.opts.uriResolver,i,l)),new C9({schema:a,schemaId:u,root:e,baseId:i})}return nH.call(this,n,o)}}Gl.resolveSchema=A9;const oln=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function nH(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,b_e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!oln.has(a)&&l&&(t=(0,fh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,b_e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,fh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=A9.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new C9({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const aln="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",uln="Meta-schema for $data reference (JSON AnySchema extension proposal)",lln="object",cln=["$data"],fln={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},dln=!1,hln={$id:aln,description:uln,type:lln,required:cln,properties:fln,additionalProperties:dln};var pae={},OK={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Jt,function(n){function r(){for(var me=arguments.length,ae=Array(me),ge=0;ge<me;ge++)ae[ge]=arguments[ge];if(ae.length>1){ae[0]=ae[0].slice(0,-1);for(var Le=ae.length-1,Me=1;Me<Le;++Me)ae[Me]=ae[Me].slice(1,-1);return ae[Le]=ae[Le].slice(1),ae.join("")}else return ae[0]}function i(me){return"(?:"+me+")"}function s(me){return me===void 0?"undefined":me===null?"null":Object.prototype.toString.call(me).split(" ").pop().split("]").shift().toLowerCase()}function o(me){return me.toUpperCase()}function a(me){return me!=null?me instanceof Array?me:typeof me.length!="number"||me.split||me.setInterval||me.call?[me]:Array.prototype.slice.call(me):[]}function u(me,ae){var ge=me;if(ae)for(var Le in ae)ge[Le]=ae[Le];return ge}function l(me){var ae="[A-Za-z]",ge="[0-9]",Le=r(ge,"[A-Fa-f]"),Me=i(i("%[EFef]"+Le+"%"+Le+Le+"%"+Le+Le)+"|"+i("%[89A-Fa-f]"+Le+"%"+Le+Le)+"|"+i("%"+Le+Le)),_t="[\\:\\/\\?\\#\\[\\]\\@]",Ut="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",dn=r(_t,Ut),Zn=me?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ur=me?"[\\uE000-\\uF8FF]":"[]",On=r(ae,ge,"[\\-\\.\\_\\~]",Zn);i(ae+r(ae,ge,"[\\+\\-\\.]")+"*"),i(i(Me+"|"+r(On,Ut,"[\\:]"))+"*");var Cr=i(i("25[0-5]")+"|"+i("2[0-4]"+ge)+"|"+i("1"+ge+ge)+"|"+i("0?[1-9]"+ge)+"|0?0?"+ge),ui=i(Cr+"\\."+Cr+"\\."+Cr+"\\."+Cr),on=i(Le+"{1,4}"),Ar=i(i(on+"\\:"+on)+"|"+ui),Qr=i(i(on+"\\:")+"{6}"+Ar),yr=i("\\:\\:"+i(on+"\\:")+"{5}"+Ar),Ni=i(i(on)+"?\\:\\:"+i(on+"\\:")+"{4}"+Ar),mo=i(i(i(on+"\\:")+"{0,1}"+on)+"?\\:\\:"+i(on+"\\:")+"{3}"+Ar),Pi=i(i(i(on+"\\:")+"{0,2}"+on)+"?\\:\\:"+i(on+"\\:")+"{2}"+Ar),Co=i(i(i(on+"\\:")+"{0,3}"+on)+"?\\:\\:"+on+"\\:"+Ar),ns=i(i(i(on+"\\:")+"{0,4}"+on)+"?\\:\\:"+Ar),rs=i(i(i(on+"\\:")+"{0,5}"+on)+"?\\:\\:"+on),Ao=i(i(i(on+"\\:")+"{0,6}"+on)+"?\\:\\:"),_a=i([Qr,yr,Ni,mo,Pi,Co,ns,rs,Ao].join("|")),go=i(i(On+"|"+Me)+"+");i("[vV]"+Le+"+\\."+r(On,Ut,"[\\:]")+"+"),i(i(Me+"|"+r(On,Ut))+"*");var Tl=i(Me+"|"+r(On,Ut,"[\\:\\@]"));return i(i(Me+"|"+r(On,Ut,"[\\@]"))+"+"),i(i(Tl+"|"+r("[\\/\\?]",ur))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ae,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",On,Ut),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",On,Ut),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",On,Ut),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",On,Ut),"g"),NOT_QUERY:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]",ur),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",On,Ut),"g"),UNRESERVED:new RegExp(On,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",On,dn),"g"),PCT_ENCODED:new RegExp(Me,"g"),IPV4ADDRESS:new RegExp("^("+ui+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_a+")"+i(i("\\%25|\\%(?!"+Le+"{2})")+"("+go+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function me(ae,ge){var Le=[],Me=!0,_t=!1,Ut=void 0;try{for(var dn=ae[Symbol.iterator](),Zn;!(Me=(Zn=dn.next()).done)&&(Le.push(Zn.value),!(ge&&Le.length===ge));Me=!0);}catch(ur){_t=!0,Ut=ur}finally{try{!Me&&dn.return&&dn.return()}finally{if(_t)throw Ut}}return Le}return function(ae,ge){if(Array.isArray(ae))return ae;if(Symbol.iterator in Object(ae))return me(ae,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(me){if(Array.isArray(me)){for(var ae=0,ge=Array(me.length);ae<me.length;ae++)ge[ae]=me[ae];return ge}else return Array.from(me)},p=2147483647,m=36,g=1,y=26,v=38,x=700,w=72,E=128,T="-",C=/^xn--/,I=/[^\0-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-g,M=Math.floor,O=String.fromCharCode;function B(me){throw new RangeError(k[me])}function q(me,ae){for(var ge=[],Le=me.length;Le--;)ge[Le]=ae(me[Le]);return ge}function H(me,ae){var ge=me.split("@"),Le="";ge.length>1&&(Le=ge[0]+"@",me=ge[1]),me=me.replace(N,".");var Me=me.split("."),_t=q(Me,ae).join(".");return Le+_t}function Y(me){for(var ae=[],ge=0,Le=me.length;ge<Le;){var Me=me.charCodeAt(ge++);if(Me>=55296&&Me<=56319&&ge<Le){var _t=me.charCodeAt(ge++);(_t&64512)==56320?ae.push(((Me&1023)<<10)+(_t&1023)+65536):(ae.push(Me),ge--)}else ae.push(Me)}return ae}var K=function(ae){return String.fromCodePoint.apply(String,h(ae))},J=function(ae){return ae-48<10?ae-22:ae-65<26?ae-65:ae-97<26?ae-97:m},F=function(ae,ge){return ae+22+75*(ae<26)-((ge!=0)<<5)},U=function(ae,ge,Le){var Me=0;for(ae=Le?M(ae/x):ae>>1,ae+=M(ae/ge);ae>P*y>>1;Me+=m)ae=M(ae/P);return M(Me+(P+1)*ae/(ae+v))},W=function(ae){var ge=[],Le=ae.length,Me=0,_t=E,Ut=w,dn=ae.lastIndexOf(T);dn<0&&(dn=0);for(var Zn=0;Zn<dn;++Zn)ae.charCodeAt(Zn)>=128&&B("not-basic"),ge.push(ae.charCodeAt(Zn));for(var ur=dn>0?dn+1:0;ur<Le;){for(var On=Me,Cr=1,ui=m;;ui+=m){ur>=Le&&B("invalid-input");var on=J(ae.charCodeAt(ur++));(on>=m||on>M((p-Me)/Cr))&&B("overflow"),Me+=on*Cr;var Ar=ui<=Ut?g:ui>=Ut+y?y:ui-Ut;if(on<Ar)break;var Qr=m-Ar;Cr>M(p/Qr)&&B("overflow"),Cr*=Qr}var yr=ge.length+1;Ut=U(Me-On,yr,On==0),M(Me/yr)>p-_t&&B("overflow"),_t+=M(Me/yr),Me%=yr,ge.splice(Me++,0,_t)}return String.fromCodePoint.apply(String,ge)},L=function(ae){var ge=[];ae=Y(ae);var Le=ae.length,Me=E,_t=0,Ut=w,dn=!0,Zn=!1,ur=void 0;try{for(var On=ae[Symbol.iterator](),Cr;!(dn=(Cr=On.next()).done);dn=!0){var ui=Cr.value;ui<128&&ge.push(O(ui))}}catch(qe){Zn=!0,ur=qe}finally{try{!dn&&On.return&&On.return()}finally{if(Zn)throw ur}}var on=ge.length,Ar=on;for(on&&ge.push(T);Ar<Le;){var Qr=p,yr=!0,Ni=!1,mo=void 0;try{for(var Pi=ae[Symbol.iterator](),Co;!(yr=(Co=Pi.next()).done);yr=!0){var ns=Co.value;ns>=Me&&ns<Qr&&(Qr=ns)}}catch(qe){Ni=!0,mo=qe}finally{try{!yr&&Pi.return&&Pi.return()}finally{if(Ni)throw mo}}var rs=Ar+1;Qr-Me>M((p-_t)/rs)&&B("overflow"),_t+=(Qr-Me)*rs,Me=Qr;var Ao=!0,_a=!1,go=void 0;try{for(var Tl=ae[Symbol.iterator](),Ef;!(Ao=(Ef=Tl.next()).done);Ao=!0){var ee=Ef.value;if(ee<Me&&++_t>p&&B("overflow"),ee==Me){for(var pe=_t,se=m;;se+=m){var xe=se<=Ut?g:se>=Ut+y?y:se-Ut;if(pe<xe)break;var Ae=pe-xe,be=m-xe;ge.push(O(F(xe+Ae%be,0))),pe=M(Ae/be)}ge.push(O(F(pe,0))),Ut=U(_t,rs,Ar==on),_t=0,++Ar}}}catch(qe){_a=!0,go=qe}finally{try{!Ao&&Tl.return&&Tl.return()}finally{if(_a)throw go}}++_t,++Me}return ge.join("")},V=function(ae){return H(ae,function(ge){return C.test(ge)?W(ge.slice(4).toLowerCase()):ge})},Q=function(ae){return H(ae,function(ge){return I.test(ge)?"xn--"+L(ge):ge})},ue={version:"2.1.0",ucs2:{decode:Y,encode:K},decode:W,encode:L,toASCII:Q,toUnicode:V},we={};function ce(me){var ae=me.charCodeAt(0),ge=void 0;return ae<16?ge="%0"+ae.toString(16).toUpperCase():ae<128?ge="%"+ae.toString(16).toUpperCase():ae<2048?ge="%"+(ae>>6|192).toString(16).toUpperCase()+"%"+(ae&63|128).toString(16).toUpperCase():ge="%"+(ae>>12|224).toString(16).toUpperCase()+"%"+(ae>>6&63|128).toString(16).toUpperCase()+"%"+(ae&63|128).toString(16).toUpperCase(),ge}function Se(me){for(var ae="",ge=0,Le=me.length;ge<Le;){var Me=parseInt(me.substr(ge+1,2),16);if(Me<128)ae+=String.fromCharCode(Me),ge+=3;else if(Me>=194&&Me<224){if(Le-ge>=6){var _t=parseInt(me.substr(ge+4,2),16);ae+=String.fromCharCode((Me&31)<<6|_t&63)}else ae+=me.substr(ge,6);ge+=6}else if(Me>=224){if(Le-ge>=9){var Ut=parseInt(me.substr(ge+4,2),16),dn=parseInt(me.substr(ge+7,2),16);ae+=String.fromCharCode((Me&15)<<12|(Ut&63)<<6|dn&63)}else ae+=me.substr(ge,9);ge+=9}else ae+=me.substr(ge,3),ge+=3}return ae}function Oe(me,ae){function ge(Le){var Me=Se(Le);return Me.match(ae.UNRESERVED)?Me:Le}return me.scheme&&(me.scheme=String(me.scheme).replace(ae.PCT_ENCODED,ge).toLowerCase().replace(ae.NOT_SCHEME,"")),me.userinfo!==void 0&&(me.userinfo=String(me.userinfo).replace(ae.PCT_ENCODED,ge).replace(ae.NOT_USERINFO,ce).replace(ae.PCT_ENCODED,o)),me.host!==void 0&&(me.host=String(me.host).replace(ae.PCT_ENCODED,ge).toLowerCase().replace(ae.NOT_HOST,ce).replace(ae.PCT_ENCODED,o)),me.path!==void 0&&(me.path=String(me.path).replace(ae.PCT_ENCODED,ge).replace(me.scheme?ae.NOT_PATH:ae.NOT_PATH_NOSCHEME,ce).replace(ae.PCT_ENCODED,o)),me.query!==void 0&&(me.query=String(me.query).replace(ae.PCT_ENCODED,ge).replace(ae.NOT_QUERY,ce).replace(ae.PCT_ENCODED,o)),me.fragment!==void 0&&(me.fragment=String(me.fragment).replace(ae.PCT_ENCODED,ge).replace(ae.NOT_FRAGMENT,ce).replace(ae.PCT_ENCODED,o)),me}function et(me){return me.replace(/^0*(.*)/,"$1")||"0"}function Re(me,ae){var ge=me.match(ae.IPV4ADDRESS)||[],Le=d(ge,2),Me=Le[1];return Me?Me.split(".").map(et).join("."):me}function St(me,ae){var ge=me.match(ae.IPV6ADDRESS)||[],Le=d(ge,3),Me=Le[1],_t=Le[2];if(Me){for(var Ut=Me.toLowerCase().split("::").reverse(),dn=d(Ut,2),Zn=dn[0],ur=dn[1],On=ur?ur.split(":").map(et):[],Cr=Zn.split(":").map(et),ui=ae.IPV4ADDRESS.test(Cr[Cr.length-1]),on=ui?7:8,Ar=Cr.length-on,Qr=Array(on),yr=0;yr<on;++yr)Qr[yr]=On[yr]||Cr[Ar+yr]||"";ui&&(Qr[on-1]=Re(Qr[on-1],ae));var Ni=Qr.reduce(function(rs,Ao,_a){if(!Ao||Ao==="0"){var go=rs[rs.length-1];go&&go.index+go.length===_a?go.length++:rs.push({index:_a,length:1})}return rs},[]),mo=Ni.sort(function(rs,Ao){return Ao.length-rs.length})[0],Pi=void 0;if(mo&&mo.length>1){var Co=Qr.slice(0,mo.index),ns=Qr.slice(mo.index+mo.length);Pi=Co.join(":")+"::"+ns.join(":")}else Pi=Qr.join(":");return _t&&(Pi+="%"+_t),Pi}else return me}var Ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,It="".match(/(){0}/)[1]===void 0;function mt(me){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},Le=ae.iri!==!1?f:c;ae.reference==="suffix"&&(me=(ae.scheme?ae.scheme+":":"")+"//"+me);var Me=me.match(Ze);if(Me){It?(ge.scheme=Me[1],ge.userinfo=Me[3],ge.host=Me[4],ge.port=parseInt(Me[5],10),ge.path=Me[6]||"",ge.query=Me[7],ge.fragment=Me[8],isNaN(ge.port)&&(ge.port=Me[5])):(ge.scheme=Me[1]||void 0,ge.userinfo=me.indexOf("@")!==-1?Me[3]:void 0,ge.host=me.indexOf("//")!==-1?Me[4]:void 0,ge.port=parseInt(Me[5],10),ge.path=Me[6]||"",ge.query=me.indexOf("?")!==-1?Me[7]:void 0,ge.fragment=me.indexOf("#")!==-1?Me[8]:void 0,isNaN(ge.port)&&(ge.port=me.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Me[4]:void 0)),ge.host&&(ge.host=St(Re(ge.host,Le),Le)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",ae.reference&&ae.reference!=="suffix"&&ae.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+ae.reference+" reference.");var _t=we[(ae.scheme||ge.scheme||"").toLowerCase()];if(!ae.unicodeSupport&&(!_t||!_t.unicodeSupport)){if(ge.host&&(ae.domainHost||_t&&_t.domainHost))try{ge.host=ue.toASCII(ge.host.replace(Le.PCT_ENCODED,Se).toLowerCase())}catch(Ut){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Ut}Oe(ge,c)}else Oe(ge,Le);_t&&_t.parse&&_t.parse(ge,ae)}else ge.error=ge.error||"URI can not be parsed.";return ge}function Ce(me,ae){var ge=ae.iri!==!1?f:c,Le=[];return me.userinfo!==void 0&&(Le.push(me.userinfo),Le.push("@")),me.host!==void 0&&Le.push(St(Re(String(me.host),ge),ge).replace(ge.IPV6ADDRESS,function(Me,_t,Ut){return"["+_t+(Ut?"%25"+Ut:"")+"]"})),(typeof me.port=="number"||typeof me.port=="string")&&(Le.push(":"),Le.push(String(me.port))),Le.length?Le.join(""):void 0}var Fe=/^\.\.?\//,st=/^\/\.(\/|$)/,yt=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function Je(me){for(var ae=[];me.length;)if(me.match(Fe))me=me.replace(Fe,"");else if(me.match(st))me=me.replace(st,"/");else if(me.match(yt))me=me.replace(yt,"/"),ae.pop();else if(me==="."||me==="..")me="";else{var ge=me.match(Dt);if(ge){var Le=ge[0];me=me.slice(Le.length),ae.push(Le)}else throw new Error("Unexpected dot segment condition")}return ae.join("")}function _e(me){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ae.iri?f:c,Le=[],Me=we[(ae.scheme||me.scheme||"").toLowerCase()];if(Me&&Me.serialize&&Me.serialize(me,ae),me.host&&!ge.IPV6ADDRESS.test(me.host)){if(ae.domainHost||Me&&Me.domainHost)try{me.host=ae.iri?ue.toUnicode(me.host):ue.toASCII(me.host.replace(ge.PCT_ENCODED,Se).toLowerCase())}catch(dn){me.error=me.error||"Host's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+dn}}Oe(me,ge),ae.reference!=="suffix"&&me.scheme&&(Le.push(me.scheme),Le.push(":"));var _t=Ce(me,ae);if(_t!==void 0&&(ae.reference!=="suffix"&&Le.push("//"),Le.push(_t),me.path&&me.path.charAt(0)!=="/"&&Le.push("/")),me.path!==void 0){var Ut=me.path;!ae.absolutePath&&(!Me||!Me.absolutePath)&&(Ut=Je(Ut)),_t===void 0&&(Ut=Ut.replace(/^\/\//,"/%2F")),Le.push(Ut)}return me.query!==void 0&&(Le.push("?"),Le.push(me.query)),me.fragment!==void 0&&(Le.push("#"),Le.push(me.fragment)),Le.join("")}function kt(me,ae){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Le=arguments[3],Me={};return Le||(me=mt(_e(me,ge),ge),ae=mt(_e(ae,ge),ge)),ge=ge||{},!ge.tolerant&&ae.scheme?(Me.scheme=ae.scheme,Me.userinfo=ae.userinfo,Me.host=ae.host,Me.port=ae.port,Me.path=Je(ae.path||""),Me.query=ae.query):(ae.userinfo!==void 0||ae.host!==void 0||ae.port!==void 0?(Me.userinfo=ae.userinfo,Me.host=ae.host,Me.port=ae.port,Me.path=Je(ae.path||""),Me.query=ae.query):(ae.path?(ae.path.charAt(0)==="/"?Me.path=Je(ae.path):((me.userinfo!==void 0||me.host!==void 0||me.port!==void 0)&&!me.path?Me.path="/"+ae.path:me.path?Me.path=me.path.slice(0,me.path.lastIndexOf("/")+1)+ae.path:Me.path=ae.path,Me.path=Je(Me.path)),Me.query=ae.query):(Me.path=me.path,ae.query!==void 0?Me.query=ae.query:Me.query=me.query),Me.userinfo=me.userinfo,Me.host=me.host,Me.port=me.port),Me.scheme=me.scheme),Me.fragment=ae.fragment,Me}function Rt(me,ae,ge){var Le=u({scheme:"null"},ge);return _e(kt(mt(me,Le),mt(ae,Le),Le,!0),Le)}function Ee(me,ae){return typeof me=="string"?me=_e(mt(me,ae),ae):s(me)==="object"&&(me=mt(_e(me,ae),ae)),me}function $e(me,ae,ge){return typeof me=="string"?me=_e(mt(me,ge),ge):s(me)==="object"&&(me=_e(me,ge)),typeof ae=="string"?ae=_e(mt(ae,ge),ge):s(ae)==="object"&&(ae=_e(ae,ge)),me===ae}function ot(me,ae){return me&&me.toString().replace(!ae||!ae.iri?c.ESCAPE:f.ESCAPE,ce)}function xt(me,ae){return me&&me.toString().replace(!ae||!ae.iri?c.PCT_ENCODED:f.PCT_ENCODED,Se)}var jt={scheme:"http",domainHost:!0,parse:function(ae,ge){return ae.host||(ae.error=ae.error||"HTTP URIs must have a host."),ae},serialize:function(ae,ge){var Le=String(ae.scheme).toLowerCase()==="https";return(ae.port===(Le?443:80)||ae.port==="")&&(ae.port=void 0),ae.path||(ae.path="/"),ae}},Un={scheme:"https",domainHost:jt.domainHost,parse:jt.parse,serialize:jt.serialize};function dr(me){return typeof me.secure=="boolean"?me.secure:String(me.scheme).toLowerCase()==="wss"}var Tr={scheme:"ws",domainHost:!0,parse:function(ae,ge){var Le=ae;return Le.secure=dr(Le),Le.resourceName=(Le.path||"/")+(Le.query?"?"+Le.query:""),Le.path=void 0,Le.query=void 0,Le},serialize:function(ae,ge){if((ae.port===(dr(ae)?443:80)||ae.port==="")&&(ae.port=void 0),typeof ae.secure=="boolean"&&(ae.scheme=ae.secure?"wss":"ws",ae.secure=void 0),ae.resourceName){var Le=ae.resourceName.split("?"),Me=d(Le,2),_t=Me[0],Ut=Me[1];ae.path=_t&&_t!=="/"?_t:void 0,ae.query=Ut,ae.resourceName=void 0}return ae.fragment=void 0,ae}},xi={scheme:"wss",domainHost:Tr.domainHost,parse:Tr.parse,serialize:Tr.serialize},Tn={},zn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",hr="[0-9A-Fa-f]",gr=i(i("%[EFef]"+hr+"%"+hr+hr+"%"+hr+hr)+"|"+i("%[89A-Fa-f]"+hr+"%"+hr+hr)+"|"+i("%"+hr+hr)),Xo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ts="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ds=r(ts,'[\\"\\\\]'),Ps="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Vr=new RegExp(zn,"g"),hs=new RegExp(gr,"g"),Cc=new RegExp(r("[^]",Xo,"[\\.]",'[\\"]',ds),"g"),Qo=new RegExp(r("[^]",zn,Ps),"g"),Bu=Qo;function Br(me){var ae=Se(me);return ae.match(Vr)?ae:me}var Ri={scheme:"mailto",parse:function(ae,ge){var Le=ae,Me=Le.to=Le.path?Le.path.split(","):[];if(Le.path=void 0,Le.query){for(var _t=!1,Ut={},dn=Le.query.split("&"),Zn=0,ur=dn.length;Zn<ur;++Zn){var On=dn[Zn].split("=");switch(On[0]){case"to":for(var Cr=On[1].split(","),ui=0,on=Cr.length;ui<on;++ui)Me.push(Cr[ui]);break;case"subject":Le.subject=xt(On[1],ge);break;case"body":Le.body=xt(On[1],ge);break;default:_t=!0,Ut[xt(On[0],ge)]=xt(On[1],ge);break}}_t&&(Le.headers=Ut)}Le.query=void 0;for(var Ar=0,Qr=Me.length;Ar<Qr;++Ar){var yr=Me[Ar].split("@");if(yr[0]=xt(yr[0]),ge.unicodeSupport)yr[1]=xt(yr[1],ge).toLowerCase();else try{yr[1]=ue.toASCII(xt(yr[1],ge).toLowerCase())}catch(Ni){Le.error=Le.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ni}Me[Ar]=yr.join("@")}return Le},serialize:function(ae,ge){var Le=ae,Me=a(ae.to);if(Me){for(var _t=0,Ut=Me.length;_t<Ut;++_t){var dn=String(Me[_t]),Zn=dn.lastIndexOf("@"),ur=dn.slice(0,Zn).replace(hs,Br).replace(hs,o).replace(Cc,ce),On=dn.slice(Zn+1);try{On=ge.iri?ue.toUnicode(On):ue.toASCII(xt(On,ge).toLowerCase())}catch(Ar){Le.error=Le.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+Ar}Me[_t]=ur+"@"+On}Le.path=Me.join(",")}var Cr=ae.headers=ae.headers||{};ae.subject&&(Cr.subject=ae.subject),ae.body&&(Cr.body=ae.body);var ui=[];for(var on in Cr)Cr[on]!==Tn[on]&&ui.push(on.replace(hs,Br).replace(hs,o).replace(Qo,ce)+"="+Cr[on].replace(hs,Br).replace(hs,o).replace(Bu,ce));return ui.length&&(Le.query=ui.join("&")),Le}},gi=/^([^\:]+)\:(.*)/,Qs={scheme:"urn",parse:function(ae,ge){var Le=ae.path&&ae.path.match(gi),Me=ae;if(Le){var _t=ge.scheme||Me.scheme||"urn",Ut=Le[1].toLowerCase(),dn=Le[2],Zn=_t+":"+(ge.nid||Ut),ur=we[Zn];Me.nid=Ut,Me.nss=dn,Me.path=void 0,ur&&(Me=ur.parse(Me,ge))}else Me.error=Me.error||"URN can not be parsed.";return Me},serialize:function(ae,ge){var Le=ge.scheme||ae.scheme||"urn",Me=ae.nid,_t=Le+":"+(ge.nid||Me),Ut=we[_t];Ut&&(ae=Ut.serialize(ae,ge));var dn=ae,Zn=ae.nss;return dn.path=(Me||ge.nid)+":"+Zn,dn}},ai=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Di={scheme:"urn:uuid",parse:function(ae,ge){var Le=ae;return Le.uuid=Le.nss,Le.nss=void 0,!ge.tolerant&&(!Le.uuid||!Le.uuid.match(ai))&&(Le.error=Le.error||"UUID is not valid."),Le},serialize:function(ae,ge){var Le=ae;return Le.nss=(ae.uuid||"").toLowerCase(),Le}};we[jt.scheme]=jt,we[Un.scheme]=Un,we[Tr.scheme]=Tr,we[xi.scheme]=xi,we[Ri.scheme]=Ri,we[Qs.scheme]=Qs,we[Di.scheme]=Di,n.SCHEMES=we,n.pctEncChar=ce,n.pctDecChars=Se,n.parse=mt,n.removeDotSegments=Je,n.serialize=_e,n.resolveComponents=kt,n.resolve=Rt,n.normalize=Ee,n.equal=$e,n.escapeComponent=ot,n.unescapeComponent=xt,Object.defineProperty(n,"__esModule",{value:!0})})})(OK,OK.exports);var pln=OK.exports;Object.defineProperty(pae,"__esModule",{value:!0});const j7e=pln;j7e.code='require("ajv/dist/runtime/uri").default';pae.default=j7e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ih;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=fr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=mP,i=wC,s=C_,o=Gl,a=fr,u=Na,l=$o,c=Bt,f=hln,d=pae,h=(F,U)=>new RegExp(F,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function x(F){var U,W,L,V,Q,ue,we,ce,Se,Oe,et,Re,St,Ze,It,mt,Ce,Fe,st,yt,Dt,Je,_e,kt,Rt;const Ee=F.strict,$e=(U=F.code)===null||U===void 0?void 0:U.optimize,ot=$e===!0||$e===void 0?1:$e||0,xt=(L=(W=F.code)===null||W===void 0?void 0:W.regExp)!==null&&L!==void 0?L:h,jt=(V=F.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(ue=(Q=F.strictSchema)!==null&&Q!==void 0?Q:Ee)!==null&&ue!==void 0?ue:!0,strictNumbers:(ce=(we=F.strictNumbers)!==null&&we!==void 0?we:Ee)!==null&&ce!==void 0?ce:!0,strictTypes:(Oe=(Se=F.strictTypes)!==null&&Se!==void 0?Se:Ee)!==null&&Oe!==void 0?Oe:"log",strictTuples:(Re=(et=F.strictTuples)!==null&&et!==void 0?et:Ee)!==null&&Re!==void 0?Re:"log",strictRequired:(Ze=(St=F.strictRequired)!==null&&St!==void 0?St:Ee)!==null&&Ze!==void 0?Ze:!1,code:F.code?{...F.code,optimize:ot,regExp:xt}:{optimize:ot,regExp:xt},loopRequired:(It=F.loopRequired)!==null&&It!==void 0?It:v,loopEnum:(mt=F.loopEnum)!==null&&mt!==void 0?mt:v,meta:(Ce=F.meta)!==null&&Ce!==void 0?Ce:!0,messages:(Fe=F.messages)!==null&&Fe!==void 0?Fe:!0,inlineRefs:(st=F.inlineRefs)!==null&&st!==void 0?st:!0,schemaId:(yt=F.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Dt=F.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(Je=F.validateSchema)!==null&&Je!==void 0?Je:!0,validateFormats:(_e=F.validateFormats)!==null&&_e!==void 0?_e:!0,unicodeRegExp:(kt=F.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(Rt=F.int32range)!==null&&Rt!==void 0?Rt:!0,uriResolver:jt}}class w{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...x(U)};const{es5:W,lines:L}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:L}),this.logger=M(U.logger);const V=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,U,"NOT SUPPORTED"),E.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=k.call(this),U.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&N.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),C.call(this),U.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:L}=this.opts;let V=f;L==="id"&&(V={...f},V.id=V.$id,delete V.$id),W&&U&&this.addMetaSchema(V,V[L],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let L;if(typeof U=="string"){if(L=this.getSchema(U),!L)throw new Error(`no schema with key or ref "${U}"`)}else L=this.compile(U);const V=L(W);return"$async"in L||(this.errors=L.errors),V}compile(U,W){const L=this._addSchema(U,W);return L.validate||this._compileSchemaEnv(L)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return V.call(this,U,W);async function V(Oe,et){await Q.call(this,Oe.$schema);const Re=this._addSchema(Oe,et);return Re.validate||ue.call(this,Re)}async function Q(Oe){Oe&&!this.getSchema(Oe)&&await V.call(this,{$ref:Oe},!0)}async function ue(Oe){try{return this._compileSchemaEnv(Oe)}catch(et){if(!(et instanceof i.default))throw et;return we.call(this,et),await ce.call(this,et.missingSchema),ue.call(this,Oe)}}function we({missingSchema:Oe,missingRef:et}){if(this.refs[Oe])throw new Error(`AnySchema ${Oe} is loaded but ${et} cannot be resolved`)}async function ce(Oe){const et=await Se.call(this,Oe);this.refs[Oe]||await Q.call(this,et.$schema),this.refs[Oe]||this.addSchema(et,Oe,W)}async function Se(Oe){const et=this._loading[Oe];if(et)return et;try{return await(this._loading[Oe]=L(Oe))}finally{delete this._loading[Oe]}}}addSchema(U,W,L,V=this.opts.validateSchema){if(Array.isArray(U)){for(const ue of U)this.addSchema(ue,void 0,L,V);return this}let Q;if(typeof U=="object"){const{schemaId:ue}=this.opts;if(Q=U[ue],Q!==void 0&&typeof Q!="string")throw new Error(`schema ${ue} must be string`)}return W=(0,u.normalizeId)(W||Q),this._checkUnique(W),this.schemas[W]=this._addSchema(U,L,W,V,!0),this}addMetaSchema(U,W,L=this.opts.validateSchema){return this.addSchema(U,W,!0,L),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let L;if(L=U.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(L,U);if(!V&&W){const Q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Q);else throw new Error(Q)}return V}getSchema(U){let W;for(;typeof(W=T.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:L}=this.opts,V=new o.SchemaEnv({schema:{},schemaId:L});if(W=o.resolveSchema.call(this,V,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let L=U[this.opts.schemaId];return L&&(L=(0,u.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let L;if(typeof U=="string")L=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=L);else if(typeof U=="object"&&W===void 0){if(W=U,L=W.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,L,W),!W)return(0,c.eachItem)(L,Q=>q.call(this,Q)),this;Y.call(this,W);const V={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(L,V.type.length===0?Q=>q.call(this,Q,V):Q=>V.type.forEach(ue=>q.call(this,Q,V,ue))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const L of W.rules){const V=L.rules.findIndex(Q=>Q.keyword===U);V>=0&&L.rules.splice(V,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:L="data"}={}){return!U||U.length===0?"No errors":U.map(V=>`${L}${V.instancePath} ${V.message}`).reduce((V,Q)=>V+W+Q)}$dataMetaSchema(U,W){const L=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const V of W){const Q=V.split("/").slice(1);let ue=U;for(const we of Q)ue=ue[we];for(const we in L){const ce=L[we];if(typeof ce!="object")continue;const{$data:Se}=ce.definition,Oe=ue[we];Se&&Oe&&(ue[we]=J(Oe))}}return U}_removeAllSchemas(U,W){for(const L in U){const V=U[L];(!W||W.test(L))&&(typeof V=="string"?delete U[L]:V&&!V.meta&&(this._cache.delete(V.schema),delete U[L]))}}_addSchema(U,W,L,V=this.opts.validateSchema,Q=this.opts.addUsedSchema){let ue;const{schemaId:we}=this.opts;if(typeof U=="object")ue=U[we];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let ce=this._cache.get(U);if(ce!==void 0)return ce;L=(0,u.normalizeId)(ue||L);const Se=u.getSchemaRefs.call(this,U,L);return ce=new o.SchemaEnv({schema:U,schemaId:we,meta:W,baseId:L,localRefs:Se}),this._cache.set(ce.schema,ce),Q&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=ce),V&&this.validateSchema(U,!0),ce}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(F,U,W,L="error"){for(const V in F){const Q=V;Q in U&&this.logger[L](`${W}: option ${V}. ${F[Q]}`)}}function T(F){return F=(0,u.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const U in F)this.addSchema(F[U],U)}function I(){for(const F in this.opts.formats){const U=this.opts.formats[F];U&&this.addFormat(F,U)}}function N(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in F){const W=F[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function k(){const F={...this.opts};for(const U of p)delete F[U];return F}const P={log(){},warn(){},error(){}};function M(F){if(F===!1)return P;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function B(F,U){const{RULES:W}=this;if((0,c.eachItem)(F,L=>{if(W.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!O.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function q(F,U,W){var L;const V=U==null?void 0:U.post;if(W&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Q}=this;let ue=V?Q.post:Q.rules.find(({type:ce})=>ce===W);if(ue||(ue={type:W,rules:[]},Q.rules.push(ue)),Q.keywords[F]=!0,!U)return;const we={keyword:F,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?H.call(this,ue,we,U.before):ue.rules.push(we),Q.all[F]=we,(L=U.implements)===null||L===void 0||L.forEach(ce=>this.addKeyword(ce))}function H(F,U,W){const L=F.rules.findIndex(V=>V.keyword===W);L>=0?F.rules.splice(L,0,U):(F.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function Y(F){let{metaSchema:U}=F;U!==void 0&&(F.$data&&this.opts.$data&&(U=J(U)),F.validateSchema=this.compile(U,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function J(F){return{anyOf:[F,K]}}})(u7e);var mae={},gae={},yae={};Object.defineProperty(yae,"__esModule",{value:!0});const mln={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};yae.default=mln;var A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.callRef=A_.getValidate=void 0;const gln=wC,x_e=lr,Ml=fr,vE=Wm,__e=Gl,QO=Bt,yln={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=__e.resolveRef.call(u,l,i,n);if(c===void 0)throw new gln.default(r.opts.uriResolver,i,n);if(c instanceof __e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return A6(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return A6(e,(0,Ml._)`${p}.validate`,l,l.$async)}function d(p){const m=U7e(e,p);A6(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ml.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ml.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function U7e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ml._)`${n.scopeValue("wrapper",{ref:t})}.validate`}A_.getValidate=U7e;function A6(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?vE.default.this:Ml.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ml._)`await ${(0,x_e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ml._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,x_e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ml._)`${p}.errors`;i.assign(vE.default.vErrors,(0,Ml._)`${vE.default.vErrors} === null ? ${m} : ${vE.default.vErrors}.concat(${m})`),i.assign(vE.default.errors,(0,Ml._)`${vE.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=QO.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ml._)`${p}.evaluated.props`);s.props=QO.mergeEvaluated.props(i,y,s.props,Ml.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=QO.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ml._)`${p}.evaluated.items`);s.items=QO.mergeEvaluated.items(i,y,s.items,Ml.Name)}}}A_.callRef=A6;A_.default=yln;Object.defineProperty(gae,"__esModule",{value:!0});const vln=yae,bln=A_,xln=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",vln.default,bln.default];gae.default=xln;var vae={},bae={};Object.defineProperty(bae,"__esModule",{value:!0});const sF=fr,_y=sF.operators,oF={maximum:{okStr:"<=",ok:_y.LTE,fail:_y.GT},minimum:{okStr:">=",ok:_y.GTE,fail:_y.LT},exclusiveMaximum:{okStr:"<",ok:_y.LT,fail:_y.GTE},exclusiveMinimum:{okStr:">",ok:_y.GT,fail:_y.LTE}},_ln={message:({keyword:e,schemaCode:t})=>(0,sF.str)`must be ${oF[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,sF._)`{comparison: ${oF[e].okStr}, limit: ${t}}`},wln={keyword:Object.keys(oF),type:"number",schemaType:"number",$data:!0,error:_ln,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,sF._)`${n} ${oF[t].fail} ${r} || isNaN(${n})`)}};bae.default=wln;var xae={};Object.defineProperty(xae,"__esModule",{value:!0});const Dk=fr,Eln={message:({schemaCode:e})=>(0,Dk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Dk._)`{multipleOf: ${e}}`},Sln={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Eln,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Dk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Dk._)`${o} !== parseInt(${o})`;e.fail$data((0,Dk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};xae.default=Sln;var _ae={},wae={};Object.defineProperty(wae,"__esModule",{value:!0});function z7e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}wae.default=z7e;z7e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(_ae,"__esModule",{value:!0});const sx=fr,Tln=Bt,Cln=wae,Aln={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,sx.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,sx._)`{limit: ${e}}`},Iln={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Aln,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?sx.operators.GT:sx.operators.LT,o=i.opts.unicode===!1?(0,sx._)`${n}.length`:(0,sx._)`${(0,Tln.useFunc)(e.gen,Cln.default)}(${n})`;e.fail$data((0,sx._)`${o} ${s} ${r}`)}};_ae.default=Iln;var Eae={};Object.defineProperty(Eae,"__esModule",{value:!0});const kln=lr,aF=fr,Rln={message:({schemaCode:e})=>(0,aF.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,aF._)`{pattern: ${e}}`},Dln={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Rln,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,aF._)`(new RegExp(${i}, ${o}))`:(0,kln.usePattern)(e,r);e.fail$data((0,aF._)`!${a}.test(${t})`)}};Eae.default=Dln;var Sae={};Object.defineProperty(Sae,"__esModule",{value:!0});const Nk=fr,Nln={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Nk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Nk._)`{limit: ${e}}`},Pln={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Nln,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Nk.operators.GT:Nk.operators.LT;e.fail$data((0,Nk._)`Object.keys(${n}).length ${i} ${r}`)}};Sae.default=Pln;var Tae={};Object.defineProperty(Tae,"__esModule",{value:!0});const VA=lr,Pk=fr,Oln=Bt,$ln={message:({params:{missingProperty:e}})=>(0,Pk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Pk._)`{missingProperty: ${e}}`},Mln={keyword:"required",type:"object",schemaType:"array",$data:!0,error:$ln,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Oln.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Pk.nil,f);else for(const h of n)(0,VA.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,VA.checkMissingProp)(e,n,h)),(0,VA.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,VA.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,VA.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Pk.not)(p),()=>{e.error(),t.break()})},Pk.nil)}}};Tae.default=Mln;var Cae={};Object.defineProperty(Cae,"__esModule",{value:!0});const Ok=fr,Lln={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Ok.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Ok._)`{limit: ${e}}`},Fln={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Lln,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Ok.operators.GT:Ok.operators.LT;e.fail$data((0,Ok._)`${n}.length ${i} ${r}`)}};Cae.default=Fln;var Aae={},gP={};Object.defineProperty(gP,"__esModule",{value:!0});const V7e=$Z;V7e.code='require("ajv/dist/runtime/equal").default';gP.default=V7e;Object.defineProperty(Aae,"__esModule",{value:!0});const rH=$o,Ca=fr,Bln=Bt,jln=gP,Uln={message:({params:{i:e,j:t}})=>(0,Ca.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ca._)`{i: ${e}, j: ${t}}`},zln={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Uln,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,rH.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Ca._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Ca._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Ca._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,rH.checkDataTypes)(l,g,a.opts.strictNumbers,rH.DataType.Wrong),v=t.const("indices",(0,Ca._)`{}`);t.for((0,Ca._)`;${p}--;`,()=>{t.let(g,(0,Ca._)`${n}[${p}]`),t.if(y,(0,Ca._)`continue`),l.length>1&&t.if((0,Ca._)`typeof ${g} == "string"`,(0,Ca._)`${g} += "_"`),t.if((0,Ca._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Ca._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Ca._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Bln.useFunc)(t,jln.default),y=t.name("outer");t.label(y).for((0,Ca._)`;${p}--;`,()=>t.for((0,Ca._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Ca._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};Aae.default=zln;var Iae={};Object.defineProperty(Iae,"__esModule",{value:!0});const $K=fr,Vln=Bt,Hln=gP,qln={message:"must be equal to constant",params:({schemaCode:e})=>(0,$K._)`{allowedValue: ${e}}`},Wln={keyword:"const",$data:!0,error:qln,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,$K._)`!${(0,Vln.useFunc)(t,Hln.default)}(${n}, ${i})`):e.fail((0,$K._)`${s} !== ${n}`)}};Iae.default=Wln;var kae={};Object.defineProperty(kae,"__esModule",{value:!0});const MI=fr,Gln=Bt,Yln=gP,Kln={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,MI._)`{allowedValues: ${e}}`},Xln={keyword:"enum",schemaType:"array",$data:!0,error:Kln,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Gln.useFunc)(t,Yln.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,MI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,MI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,MI._)`${l()}(${n}, ${h}[${p}])`:(0,MI._)`${n} === ${m}`}}};kae.default=Xln;Object.defineProperty(vae,"__esModule",{value:!0});const Qln=bae,Jln=xae,Zln=_ae,ecn=Eae,tcn=Sae,ncn=Tae,rcn=Cae,icn=Aae,scn=Iae,ocn=kae,acn=[Qln.default,Jln.default,Zln.default,ecn.default,tcn.default,ncn.default,rcn.default,icn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},scn.default,ocn.default];vae.default=acn;var Rae={},EC={};Object.defineProperty(EC,"__esModule",{value:!0});EC.validateAdditionalItems=void 0;const ox=fr,MK=Bt,ucn={message:({params:{len:e}})=>(0,ox.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ox._)`{limit: ${e}}`},lcn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:ucn,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,MK.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}H7e(e,r)}};function H7e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,ox._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,ox._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,MK.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,ox._)`${a} <= ${t.length}`);n.if((0,ox.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:MK.Type.Num},l),o.allErrors||n.if((0,ox.not)(l),()=>n.break())})}}EC.validateAdditionalItems=H7e;EC.default=lcn;var Dae={},SC={};Object.defineProperty(SC,"__esModule",{value:!0});SC.validateTuple=void 0;const w_e=fr,I6=Bt,ccn=lr,fcn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return q7e(e,"additionalItems",t);n.items=!0,!(0,I6.alwaysValidSchema)(n,t)&&e.ok((0,ccn.validateArray)(e))}};function q7e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=I6.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,w_e._)`${s}.length`);n.forEach((f,d)=>{(0,I6.alwaysValidSchema)(a,f)||(r.if((0,w_e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,I6.checkStrictMode)(a,g,d.strictTuples)}}}SC.validateTuple=q7e;SC.default=fcn;Object.defineProperty(Dae,"__esModule",{value:!0});const dcn=SC,hcn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,dcn.validateTuple)(e,"items")};Dae.default=hcn;var Nae={};Object.defineProperty(Nae,"__esModule",{value:!0});const E_e=fr,pcn=Bt,mcn=lr,gcn=EC,ycn={message:({params:{len:e}})=>(0,E_e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,E_e._)`{limit: ${e}}`},vcn={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ycn,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,pcn.alwaysValidSchema)(r,t)&&(i?(0,gcn.validateAdditionalItems)(e,i):e.ok((0,mcn.validateArray)(e)))}};Nae.default=vcn;var Pae={};Object.defineProperty(Pae,"__esModule",{value:!0});const Uf=fr,JO=Bt,bcn={message:({params:{min:e,max:t}})=>t===void 0?(0,Uf.str)`must contain at least ${e} valid item(s)`:(0,Uf.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Uf._)`{minContains: ${e}}`:(0,Uf._)`{minContains: ${e}, maxContains: ${t}}`},xcn={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:bcn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Uf._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,JO.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,JO.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,JO.alwaysValidSchema)(s,n)){let m=(0,Uf._)`${c} >= ${o}`;a!==void 0&&(m=(0,Uf._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Uf._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:JO.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Uf._)`${m}++`),a===void 0?t.if((0,Uf._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Uf._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Uf._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Pae.default=xcn;var W7e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=fr,n=Bt,r=lr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(W7e);var Oae={};Object.defineProperty(Oae,"__esModule",{value:!0});const G7e=fr,_cn=Bt,wcn={message:"property name must be valid",params:({params:e})=>(0,G7e._)`{propertyName: ${e.propertyName}}`},Ecn={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:wcn,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,_cn.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,G7e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Oae.default=Ecn;var I9={};Object.defineProperty(I9,"__esModule",{value:!0});const ZO=lr,Wd=fr,Scn=Wm,e4=Bt,Tcn={message:"must NOT have additional properties",params:({params:e})=>(0,Wd._)`{additionalProperty: ${e.additionalProperty}}`},Ccn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Tcn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,e4.alwaysValidSchema)(o,n))return;const l=(0,ZO.allSchemaProperties)(r.properties),c=(0,ZO.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Wd._)`${s} === ${Scn.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,e4.schemaRefOrVal)(o,r.properties,"properties");y=(0,ZO.isOwnProperty)(t,v,g)}else l.length?y=(0,Wd.or)(...l.map(v=>(0,Wd._)`${g} === ${v}`)):y=Wd.nil;return c.length&&(y=(0,Wd.or)(y,...c.map(v=>(0,Wd._)`${(0,ZO.usePattern)(e,v)}.test(${g})`))),(0,Wd.not)(y)}function h(g){t.code((0,Wd._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,e4.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Wd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Wd.not)(y),()=>t.break()))}}function m(g,y,v){const x={keyword:"additionalProperties",dataProp:g,dataPropType:e4.Type.Str};v===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(x,y)}}};I9.default=Ccn;var $ae={};Object.defineProperty($ae,"__esModule",{value:!0});const Acn=Ih,S_e=lr,iH=Bt,T_e=I9,Icn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&T_e.default.code(new Acn.KeywordCxt(s,T_e.default,"additionalProperties"));const o=(0,S_e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=iH.mergeEvaluated.props(t,(0,iH.toHash)(o),s.props));const a=o.filter(f=>!(0,iH.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,S_e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};$ae.default=Icn;var Mae={};Object.defineProperty(Mae,"__esModule",{value:!0});const C_e=lr,t4=fr,A_e=Bt,I_e=Bt,kcn={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,C_e.allSchemaProperties)(n),u=a.filter(m=>(0,A_e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof t4.Name)&&(s.props=(0,I_e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,A_e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,t4._)`${(0,C_e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:I_e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,t4._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,t4.not)(c),()=>t.break())})})}}};Mae.default=kcn;var Lae={};Object.defineProperty(Lae,"__esModule",{value:!0});const Rcn=Bt,Dcn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Rcn.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Lae.default=Dcn;var Fae={};Object.defineProperty(Fae,"__esModule",{value:!0});const Ncn=lr,Pcn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ncn.validateUnion,error:{message:"must match a schema in anyOf"}};Fae.default=Pcn;var Bae={};Object.defineProperty(Bae,"__esModule",{value:!0});const k6=fr,Ocn=Bt,$cn={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,k6._)`{passingSchemas: ${e.passing}}`},Mcn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:$cn,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Ocn.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,k6._)`${u} && ${o}`).assign(o,!1).assign(a,(0,k6._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,k6.Name)})})}}};Bae.default=Mcn;var jae={};Object.defineProperty(jae,"__esModule",{value:!0});const Lcn=Bt,Fcn={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Lcn.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};jae.default=Fcn;var Uae={};Object.defineProperty(Uae,"__esModule",{value:!0});const uF=fr,Y7e=Bt,Bcn={message:({params:e})=>(0,uF.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,uF._)`{failingKeyword: ${e.ifClause}}`},jcn={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Bcn,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Y7e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=k_e(r,"then"),s=k_e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,uF.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,uF._)`${c}`):e.setParams({ifClause:c})}}}};function k_e(e,t){const n=e.schema[t];return n!==void 0&&!(0,Y7e.alwaysValidSchema)(e,n)}Uae.default=jcn;var zae={};Object.defineProperty(zae,"__esModule",{value:!0});const Ucn=Bt,zcn={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Ucn.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};zae.default=zcn;Object.defineProperty(Rae,"__esModule",{value:!0});const Vcn=EC,Hcn=Dae,qcn=SC,Wcn=Nae,Gcn=Pae,Ycn=W7e,Kcn=Oae,Xcn=I9,Qcn=$ae,Jcn=Mae,Zcn=Lae,efn=Fae,tfn=Bae,nfn=jae,rfn=Uae,ifn=zae;function sfn(e=!1){const t=[Zcn.default,efn.default,tfn.default,nfn.default,rfn.default,ifn.default,Kcn.default,Xcn.default,Ycn.default,Qcn.default,Jcn.default];return e?t.push(Hcn.default,Wcn.default):t.push(Vcn.default,qcn.default),t.push(Gcn.default),t}Rae.default=sfn;var Vae={},Hae={};Object.defineProperty(Hae,"__esModule",{value:!0});const to=fr,ofn={message:({schemaCode:e})=>(0,to.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,to._)`{format: ${e}}`},afn={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:ofn,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,to._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,to._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,to._)`${m}.type || "string"`).assign(y,(0,to._)`${m}.validate`),()=>n.assign(g,(0,to._)`"string"`).assign(y,m)),e.fail$data((0,to.or)(v(),x()));function v(){return u.strictSchema===!1?to.nil:(0,to._)`${o} && !${y}`}function x(){const w=c.$async?(0,to._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,to._)`${y}(${r})`,E=(0,to._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,to._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=x(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function x(E){const T=E instanceof RegExp?(0,to.regexpCode)(E):u.code.formats?(0,to._)`${u.code.formats}${(0,to.getProperty)(s)}`:void 0,C=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,to._)`${C}.validate`]:["string",E,C]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,to._)`await ${y}(${r})`}return typeof g=="function"?(0,to._)`${y}(${r})`:(0,to._)`${y}.test(${r})`}}}};Hae.default=afn;Object.defineProperty(Vae,"__esModule",{value:!0});const ufn=Hae,lfn=[ufn.default];Vae.default=lfn;var i2={};Object.defineProperty(i2,"__esModule",{value:!0});i2.contentVocabulary=i2.metadataVocabulary=void 0;i2.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];i2.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(mae,"__esModule",{value:!0});const cfn=gae,ffn=vae,dfn=Rae,hfn=Vae,R_e=i2,pfn=[cfn.default,ffn.default,(0,dfn.default)(),hfn.default,R_e.metadataVocabulary,R_e.contentVocabulary];mae.default=pfn;var qae={},k9={};Object.defineProperty(k9,"__esModule",{value:!0});k9.DiscrError=void 0;var D_e;(function(e){e.Tag="tag",e.Mapping="mapping"})(D_e||(k9.DiscrError=D_e={}));Object.defineProperty(qae,"__esModule",{value:!0});const RE=fr,LK=k9,N_e=Gl,mfn=wC,gfn=Bt,yfn={message:({params:{discrError:e,tagName:t}})=>e===LK.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,RE._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},vfn={keyword:"discriminator",type:"object",schemaType:"object",error:yfn,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,RE._)`${n}${(0,RE.getProperty)(a)}`);t.if((0,RE._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:LK.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,RE._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:LK.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,RE.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,gfn.schemaHasRulesButRef)(E,s.self.RULES)){const C=E.$ref;if(E=N_e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,C),E instanceof N_e.SchemaEnv&&(E=E.schema),E===void 0)throw new mfn.default(s.opts.uriResolver,s.baseId,C)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)x(w.const,E);else if(w.enum)for(const T of w.enum)x(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function x(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};qae.default=vfn;const bfn="http://json-schema.org/draft-07/schema#",xfn="http://json-schema.org/draft-07/schema#",_fn="Core schema meta-schema",wfn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Efn=["object","boolean"],Sfn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Tfn={$schema:bfn,$id:xfn,title:_fn,definitions:wfn,type:Efn,properties:Sfn,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=u7e,r=mae,i=qae,s=Tfn,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Ih;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=fr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=mP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=wC;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(kK,kK.exports);var Cfn=kK.exports;const Wae=Am(Cfn),Afn="#/definitions/StudyConfig",Ifn="http://json-schema.org/draft-07/schema#",kfn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},horizontal:{description:"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"},withOther:{description:'Whether to render the checkboxes with an "other" option.',type:"boolean"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},horizontal:{description:"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"},withOther:{description:'Whether to render the radios with an "other" option.',type:"boolean"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},participantNameField:{description:"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response 'prolificId' from the task 'introduction' to be the name, this field would be 'introduction.prolificId'",type:"string"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Rfn={$ref:Afn,$schema:Ifn,definitions:kfn},Dfn="#/definitions/GlobalConfig",Nfn="http://json-schema.org/draft-07/schema#",Pfn={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},Ofn={$ref:Dfn,$schema:Nfn,definitions:Pfn};var lF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lF.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,v=4,x=8,w=16,E=32,T=64,C=128,I=256,N=512,k=30,P="...",M=800,O=16,B=1,q=2,H=3,Y=1/0,K=9007199254740991,J=17976931348623157e292,F=NaN,U=4294967295,W=U-1,L=U>>>1,V=[["ary",C],["bind",g],["bindKey",y],["curry",x],["curryRight",w],["flip",N],["partial",E],["partialRight",T],["rearg",I]],Q="[object Arguments]",ue="[object Array]",we="[object AsyncFunction]",ce="[object Boolean]",Se="[object Date]",Oe="[object DOMException]",et="[object Error]",Re="[object Function]",St="[object GeneratorFunction]",Ze="[object Map]",It="[object Number]",mt="[object Null]",Ce="[object Object]",Fe="[object Promise]",st="[object Proxy]",yt="[object RegExp]",Dt="[object Set]",Je="[object String]",_e="[object Symbol]",kt="[object Undefined]",Rt="[object WeakMap]",Ee="[object WeakSet]",$e="[object ArrayBuffer]",ot="[object DataView]",xt="[object Float32Array]",jt="[object Float64Array]",Un="[object Int8Array]",dr="[object Int16Array]",Tr="[object Int32Array]",xi="[object Uint8Array]",Tn="[object Uint8ClampedArray]",zn="[object Uint16Array]",hr="[object Uint32Array]",gr=/\b__p \+= '';/g,Xo=/\b(__p \+=) '' \+/g,ts=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ds=/&(?:amp|lt|gt|quot|#39);/g,Ps=/[&<>"']/g,Vr=RegExp(ds.source),hs=RegExp(Ps.source),Cc=/<%-([\s\S]+?)%>/g,Qo=/<%([\s\S]+?)%>/g,Bu=/<%=([\s\S]+?)%>/g,Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ri=/^\w*$/,gi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qs=/[\\^$.*+?()[\]{}|]/g,ai=RegExp(Qs.source),Di=/^\s+/,me=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/[()=,{}\[\]\/\s]/,Ut=/\\(\\)?/g,dn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zn=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,On=/^0b[01]+$/i,Cr=/^\[object .+?Constructor\]$/,ui=/^0o[0-7]+$/i,on=/^(?:0|[1-9]\d*)$/,Ar=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qr=/($^)/,yr=/['\n\r\u2028\u2029\\]/g,Ni="\\ud800-\\udfff",mo="\\u0300-\\u036f",Pi="\\ufe20-\\ufe2f",Co="\\u20d0-\\u20ff",ns=mo+Pi+Co,rs="\\u2700-\\u27bf",Ao="a-z\\xdf-\\xf6\\xf8-\\xff",_a="\\xac\\xb1\\xd7\\xf7",go="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Tl="\\u2000-\\u206f",Ef=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",se=_a+go+Tl+Ef,xe="[']",Ae="["+Ni+"]",be="["+se+"]",qe="["+ns+"]",it="\\d+",at="["+rs+"]",ut="["+Ao+"]",vt="[^"+Ni+se+it+rs+Ao+ee+"]",Mt="\\ud83c[\\udffb-\\udfff]",$n="(?:"+qe+"|"+Mt+")",Kt="[^"+Ni+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",Hr="[\\ud800-\\udbff][\\udc00-\\udfff]",vr="["+ee+"]",Io="\\u200d",Ac="(?:"+ut+"|"+vt+")",Id="(?:"+vr+"|"+vt+")",sy="(?:"+xe+"(?:d|ll|m|re|s|t|ve))?",np="(?:"+xe+"(?:D|LL|M|RE|S|T|VE))?",nb=$n+"?",ju="["+pe+"]?",Xa="(?:"+Io+"(?:"+[Kt,er,Hr].join("|")+")"+ju+nb+")*",kd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rb=ju+nb+Xa,Rd="(?:"+[at,er,Hr].join("|")+")"+rb,ib="(?:"+[Kt+qe+"?",qe,er,Hr,Ae].join("|")+")",Tw=RegExp(xe,"g"),Dd=RegExp(qe,"g"),Jo=RegExp(Mt+"(?="+Mt+")|"+ib+rb,"g"),NC=RegExp([vr+"?"+ut+"+"+sy+"(?="+[be,vr,"$"].join("|")+")",Id+"+"+np+"(?="+[be,vr+Ac,"$"].join("|")+")",vr+"?"+Ac+"+"+sy,vr+"+"+np,oy,kd,it,Rd].join("|"),"g"),Cw=RegExp("["+Io+Ni+ns+pe+"]"),Ym=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Km=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Aw=-1,qr={};qr[xt]=qr[jt]=qr[Un]=qr[dr]=qr[Tr]=qr[xi]=qr[Tn]=qr[zn]=qr[hr]=!0,qr[Q]=qr[ue]=qr[$e]=qr[ce]=qr[ot]=qr[Se]=qr[et]=qr[Re]=qr[Ze]=qr[It]=qr[Ce]=qr[yt]=qr[Dt]=qr[Je]=qr[Rt]=!1;var Ir={};Ir[Q]=Ir[ue]=Ir[$e]=Ir[ot]=Ir[ce]=Ir[Se]=Ir[xt]=Ir[jt]=Ir[Un]=Ir[dr]=Ir[Tr]=Ir[Ze]=Ir[It]=Ir[Ce]=Ir[yt]=Ir[Dt]=Ir[Je]=Ir[_e]=Ir[xi]=Ir[Tn]=Ir[zn]=Ir[hr]=!0,Ir[et]=Ir[Re]=Ir[Rt]=!1;var Iw={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,ir=parseInt,Wr=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,_i=typeof self=="object"&&self&&self.Object===Object&&self,an=Wr||_i||Function("return this")(),li=t&&!t.nodeType&&t,wi=li&&!0&&e&&!e.nodeType&&e,ko=wi&&wi.exports===li,Nd=ko&&Wr.process,Os=function(){try{var Te=wi&&wi.require&&wi.require("util").types;return Te||Nd&&Nd.binding&&Nd.binding("util")}catch{}}(),Xm=Os&&Os.isArrayBuffer,Qm=Os&&Os.isDate,sb=Os&&Os.isMap,PC=Os&&Os.isRegExp,ob=Os&&Os.isSet,OP=Os&&Os.isTypedArray;function Qa(Te,Ge,je){switch(je.length){case 0:return Te.call(Ge);case 1:return Te.call(Ge,je[0]);case 2:return Te.call(Ge,je[0],je[1]);case 3:return Te.call(Ge,je[0],je[1],je[2])}return Te.apply(Ge,je)}function ab(Te,Ge,je,zt){for(var Fn=-1,fi=Te==null?0:Te.length;++Fn<fi;){var Do=Te[Fn];Ge(zt,Do,je(Do),Te)}return zt}function Uu(Te,Ge){for(var je=-1,zt=Te==null?0:Te.length;++je<zt&&Ge(Te[je],je,Te)!==!1;);return Te}function $P(Te,Ge){for(var je=Te==null?0:Te.length;je--&&Ge(Te[je],je,Te)!==!1;);return Te}function kw(Te,Ge){for(var je=-1,zt=Te==null?0:Te.length;++je<zt;)if(!Ge(Te[je],je,Te))return!1;return!0}function Sf(Te,Ge){for(var je=-1,zt=Te==null?0:Te.length,Fn=0,fi=[];++je<zt;){var Do=Te[je];Ge(Do,je,Te)&&(fi[Fn++]=Do)}return fi}function ub(Te,Ge){var je=Te==null?0:Te.length;return!!je&&Jm(Te,Ge,0)>-1}function ay(Te,Ge,je){for(var zt=-1,Fn=Te==null?0:Te.length;++zt<Fn;)if(je(Ge,Te[zt]))return!0;return!1}function zi(Te,Ge){for(var je=-1,zt=Te==null?0:Te.length,Fn=Array(zt);++je<zt;)Fn[je]=Ge(Te[je],je,Te);return Fn}function Pd(Te,Ge){for(var je=-1,zt=Ge.length,Fn=Te.length;++je<zt;)Te[Fn+je]=Ge[je];return Te}function Od(Te,Ge,je,zt){var Fn=-1,fi=Te==null?0:Te.length;for(zt&&fi&&(je=Te[++Fn]);++Fn<fi;)je=Ge(je,Te[Fn],Fn,Te);return je}function MP(Te,Ge,je,zt){var Fn=Te==null?0:Te.length;for(zt&&Fn&&(je=Te[--Fn]);Fn--;)je=Ge(je,Te[Fn],Fn,Te);return je}function Rw(Te,Ge){for(var je=-1,zt=Te==null?0:Te.length;++je<zt;)if(Ge(Te[je],je,Te))return!0;return!1}var LP=G("length");function FP(Te){return Te.split("")}function Dw(Te){return Te.match(Me)||[]}function Ja(Te,Ge,je){var zt;return je(Te,function(Fn,fi,Do){if(Ge(Fn,fi,Do))return zt=fi,!1}),zt}function lb(Te,Ge,je,zt){for(var Fn=Te.length,fi=je+(zt?1:-1);zt?fi--:++fi<Fn;)if(Ge(Te[fi],fi,Te))return fi;return-1}function Jm(Te,Ge,je){return Ge===Ge?nHe(Te,Ge,je):lb(Te,A,je)}function uy(Te,Ge,je,zt){for(var Fn=je-1,fi=Te.length;++Fn<fi;)if(zt(Te[Fn],Ge))return Fn;return-1}function A(Te){return Te!==Te}function j(Te,Ge){var je=Te==null?0:Te.length;return je?At(Te,Ge)/je:F}function G(Te){return function(Ge){return Ge==null?n:Ge[Te]}}function ne(Te){return function(Ge){return Te==null?n:Te[Ge]}}function De(Te,Ge,je,zt,Fn){return Fn(Te,function(fi,Do,Vi){je=zt?(zt=!1,fi):Ge(je,fi,Do,Vi)}),je}function ze(Te,Ge){var je=Te.length;for(Te.sort(Ge);je--;)Te[je]=Te[je].value;return Te}function At(Te,Ge){for(var je,zt=-1,Fn=Te.length;++zt<Fn;){var fi=Ge(Te[zt]);fi!==n&&(je=je===n?fi:je+fi)}return je}function ci(Te,Ge){for(var je=-1,zt=Array(Te);++je<Te;)zt[je]=Ge(je);return zt}function Ro(Te,Ge){return zi(Ge,function(je){return[je,Te[je]]})}function kr(Te){return Te&&Te.slice(0,tle(Te)+1).replace(Di,"")}function yi(Te){return function(Ge){return Te(Ge)}}function yo(Te,Ge){return zi(Ge,function(je){return Te[je]})}function Tf(Te,Ge){return Te.has(Ge)}function Cl(Te,Ge){for(var je=-1,zt=Te.length;++je<zt&&Jm(Ge,Te[je],0)>-1;);return je}function cb(Te,Ge){for(var je=Te.length;je--&&Jm(Ge,Te[je],0)>-1;);return je}function OC(Te,Ge){for(var je=Te.length,zt=0;je--;)Te[je]===Ge&&++zt;return zt}var KVe=ne(Iw),XVe=ne(le);function QVe(Te){return"\\"+Be[Te]}function JVe(Te,Ge){return Te==null?n:Te[Ge]}function Nw(Te){return Cw.test(Te)}function ZVe(Te){return Ym.test(Te)}function eHe(Te){for(var Ge,je=[];!(Ge=Te.next()).done;)je.push(Ge.value);return je}function Z9(Te){var Ge=-1,je=Array(Te.size);return Te.forEach(function(zt,Fn){je[++Ge]=[Fn,zt]}),je}function ele(Te,Ge){return function(je){return Te(Ge(je))}}function ly(Te,Ge){for(var je=-1,zt=Te.length,Fn=0,fi=[];++je<zt;){var Do=Te[je];(Do===Ge||Do===c)&&(Te[je]=c,fi[Fn++]=je)}return fi}function BP(Te){var Ge=-1,je=Array(Te.size);return Te.forEach(function(zt){je[++Ge]=zt}),je}function tHe(Te){var Ge=-1,je=Array(Te.size);return Te.forEach(function(zt){je[++Ge]=[zt,zt]}),je}function nHe(Te,Ge,je){for(var zt=je-1,Fn=Te.length;++zt<Fn;)if(Te[zt]===Ge)return zt;return-1}function rHe(Te,Ge,je){for(var zt=je+1;zt--;)if(Te[zt]===Ge)return zt;return zt}function Pw(Te){return Nw(Te)?sHe(Te):LP(Te)}function $d(Te){return Nw(Te)?oHe(Te):FP(Te)}function tle(Te){for(var Ge=Te.length;Ge--&&me.test(Te.charAt(Ge)););return Ge}var iHe=ne(ye);function sHe(Te){for(var Ge=Jo.lastIndex=0;Jo.test(Te);)++Ge;return Ge}function oHe(Te){return Te.match(Jo)||[]}function aHe(Te){return Te.match(NC)||[]}var uHe=function Te(Ge){Ge=Ge==null?an:Ow.defaults(an.Object(),Ge,Ow.pick(an,Km));var je=Ge.Array,zt=Ge.Date,Fn=Ge.Error,fi=Ge.Function,Do=Ge.Math,Vi=Ge.Object,ej=Ge.RegExp,lHe=Ge.String,Cf=Ge.TypeError,jP=je.prototype,cHe=fi.prototype,$w=Vi.prototype,UP=Ge["__core-js_shared__"],zP=cHe.toString,Ei=$w.hasOwnProperty,fHe=0,nle=function(){var b=/[^.]+$/.exec(UP&&UP.keys&&UP.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),VP=$w.toString,dHe=zP.call(Vi),hHe=an._,pHe=ej("^"+zP.call(Ei).replace(Qs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),HP=ko?Ge.Buffer:n,cy=Ge.Symbol,qP=Ge.Uint8Array,rle=HP?HP.allocUnsafe:n,WP=ele(Vi.getPrototypeOf,Vi),ile=Vi.create,sle=$w.propertyIsEnumerable,GP=jP.splice,ole=cy?cy.isConcatSpreadable:n,$C=cy?cy.iterator:n,fb=cy?cy.toStringTag:n,YP=function(){try{var b=gb(Vi,"defineProperty");return b({},"",{}),b}catch{}}(),mHe=Ge.clearTimeout!==an.clearTimeout&&Ge.clearTimeout,gHe=zt&&zt.now!==an.Date.now&&zt.now,yHe=Ge.setTimeout!==an.setTimeout&&Ge.setTimeout,KP=Do.ceil,XP=Do.floor,tj=Vi.getOwnPropertySymbols,vHe=HP?HP.isBuffer:n,ale=Ge.isFinite,bHe=jP.join,xHe=ele(Vi.keys,Vi),No=Do.max,Za=Do.min,_He=zt.now,wHe=Ge.parseInt,ule=Do.random,EHe=jP.reverse,nj=gb(Ge,"DataView"),MC=gb(Ge,"Map"),rj=gb(Ge,"Promise"),Mw=gb(Ge,"Set"),LC=gb(Ge,"WeakMap"),FC=gb(Vi,"create"),QP=LC&&new LC,Lw={},SHe=yb(nj),THe=yb(MC),CHe=yb(rj),AHe=yb(Mw),IHe=yb(LC),JP=cy?cy.prototype:n,BC=JP?JP.valueOf:n,lle=JP?JP.toString:n;function Z(b){if($s(b)&&!Vn(b)&&!(b instanceof br)){if(b instanceof Af)return b;if(Ei.call(b,"__wrapped__"))return cce(b)}return new Af(b)}var Fw=function(){function b(){}return function(S){if(!As(S))return{};if(ile)return ile(S);b.prototype=S;var R=new b;return b.prototype=n,R}}();function ZP(){}function Af(b,S){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=n}Z.templateSettings={escape:Cc,evaluate:Qo,interpolate:Bu,variable:"",imports:{_:Z}},Z.prototype=ZP.prototype,Z.prototype.constructor=Z,Af.prototype=Fw(ZP.prototype),Af.prototype.constructor=Af;function br(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function kHe(){var b=new br(this.__wrapped__);return b.__actions__=Al(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Al(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Al(this.__views__),b}function RHe(){if(this.__filtered__){var b=new br(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function DHe(){var b=this.__wrapped__.value(),S=this.__dir__,R=Vn(b),z=S<0,X=R?b.length:0,re=Vqe(0,X,this.__views__),fe=re.start,ve=re.end,Ie=ve-fe,tt=z?ve:fe-1,nt=this.__iteratees__,lt=nt.length,$t=0,Qt=Za(Ie,this.__takeCount__);if(!R||!z&&X==Ie&&Qt==Ie)return Ple(b,this.__actions__);var mn=[];e:for(;Ie--&&$t<Qt;){tt+=S;for(var tr=-1,gn=b[tt];++tr<lt;){var pr=nt[tr],Rr=pr.iteratee,Rc=pr.type,Hu=Rr(gn);if(Rc==q)gn=Hu;else if(!Hu){if(Rc==B)continue e;break e}}mn[$t++]=gn}return mn}br.prototype=Fw(ZP.prototype),br.prototype.constructor=br;function db(b){var S=-1,R=b==null?0:b.length;for(this.clear();++S<R;){var z=b[S];this.set(z[0],z[1])}}function NHe(){this.__data__=FC?FC(null):{},this.size=0}function PHe(b){var S=this.has(b)&&delete this.__data__[b];return this.size-=S?1:0,S}function OHe(b){var S=this.__data__;if(FC){var R=S[b];return R===u?n:R}return Ei.call(S,b)?S[b]:n}function $He(b){var S=this.__data__;return FC?S[b]!==n:Ei.call(S,b)}function MHe(b,S){var R=this.__data__;return this.size+=this.has(b)?0:1,R[b]=FC&&S===n?u:S,this}db.prototype.clear=NHe,db.prototype.delete=PHe,db.prototype.get=OHe,db.prototype.has=$He,db.prototype.set=MHe;function Zm(b){var S=-1,R=b==null?0:b.length;for(this.clear();++S<R;){var z=b[S];this.set(z[0],z[1])}}function LHe(){this.__data__=[],this.size=0}function FHe(b){var S=this.__data__,R=e3(S,b);if(R<0)return!1;var z=S.length-1;return R==z?S.pop():GP.call(S,R,1),--this.size,!0}function BHe(b){var S=this.__data__,R=e3(S,b);return R<0?n:S[R][1]}function jHe(b){return e3(this.__data__,b)>-1}function UHe(b,S){var R=this.__data__,z=e3(R,b);return z<0?(++this.size,R.push([b,S])):R[z][1]=S,this}Zm.prototype.clear=LHe,Zm.prototype.delete=FHe,Zm.prototype.get=BHe,Zm.prototype.has=jHe,Zm.prototype.set=UHe;function e0(b){var S=-1,R=b==null?0:b.length;for(this.clear();++S<R;){var z=b[S];this.set(z[0],z[1])}}function zHe(){this.size=0,this.__data__={hash:new db,map:new(MC||Zm),string:new db}}function VHe(b){var S=d3(this,b).delete(b);return this.size-=S?1:0,S}function HHe(b){return d3(this,b).get(b)}function qHe(b){return d3(this,b).has(b)}function WHe(b,S){var R=d3(this,b),z=R.size;return R.set(b,S),this.size+=R.size==z?0:1,this}e0.prototype.clear=zHe,e0.prototype.delete=VHe,e0.prototype.get=HHe,e0.prototype.has=qHe,e0.prototype.set=WHe;function hb(b){var S=-1,R=b==null?0:b.length;for(this.__data__=new e0;++S<R;)this.add(b[S])}function GHe(b){return this.__data__.set(b,u),this}function YHe(b){return this.__data__.has(b)}hb.prototype.add=hb.prototype.push=GHe,hb.prototype.has=YHe;function Md(b){var S=this.__data__=new Zm(b);this.size=S.size}function KHe(){this.__data__=new Zm,this.size=0}function XHe(b){var S=this.__data__,R=S.delete(b);return this.size=S.size,R}function QHe(b){return this.__data__.get(b)}function JHe(b){return this.__data__.has(b)}function ZHe(b,S){var R=this.__data__;if(R instanceof Zm){var z=R.__data__;if(!MC||z.length<i-1)return z.push([b,S]),this.size=++R.size,this;R=this.__data__=new e0(z)}return R.set(b,S),this.size=R.size,this}Md.prototype.clear=KHe,Md.prototype.delete=XHe,Md.prototype.get=QHe,Md.prototype.has=JHe,Md.prototype.set=ZHe;function cle(b,S){var R=Vn(b),z=!R&&vb(b),X=!R&&!z&&my(b),re=!R&&!z&&!X&&zw(b),fe=R||z||X||re,ve=fe?ci(b.length,lHe):[],Ie=ve.length;for(var tt in b)(S||Ei.call(b,tt))&&!(fe&&(tt=="length"||X&&(tt=="offset"||tt=="parent")||re&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||i0(tt,Ie)))&&ve.push(tt);return ve}function fle(b){var S=b.length;return S?b[pj(0,S-1)]:n}function eqe(b,S){return h3(Al(b),pb(S,0,b.length))}function tqe(b){return h3(Al(b))}function ij(b,S,R){(R!==n&&!Ld(b[S],R)||R===n&&!(S in b))&&t0(b,S,R)}function jC(b,S,R){var z=b[S];(!(Ei.call(b,S)&&Ld(z,R))||R===n&&!(S in b))&&t0(b,S,R)}function e3(b,S){for(var R=b.length;R--;)if(Ld(b[R][0],S))return R;return-1}function nqe(b,S,R,z){return fy(b,function(X,re,fe){S(z,X,R(X),fe)}),z}function dle(b,S){return b&&ip(S,Zo(S),b)}function rqe(b,S){return b&&ip(S,kl(S),b)}function t0(b,S,R){S=="__proto__"&&YP?YP(b,S,{configurable:!0,enumerable:!0,value:R,writable:!0}):b[S]=R}function sj(b,S){for(var R=-1,z=S.length,X=je(z),re=b==null;++R<z;)X[R]=re?n:Bj(b,S[R]);return X}function pb(b,S,R){return b===b&&(R!==n&&(b=b<=R?b:R),S!==n&&(b=b>=S?b:S)),b}function If(b,S,R,z,X,re){var fe,ve=S&f,Ie=S&d,tt=S&h;if(R&&(fe=X?R(b,z,X,re):R(b)),fe!==n)return fe;if(!As(b))return b;var nt=Vn(b);if(nt){if(fe=qqe(b),!ve)return Al(b,fe)}else{var lt=eu(b),$t=lt==Re||lt==St;if(my(b))return Mle(b,ve);if(lt==Ce||lt==Q||$t&&!X){if(fe=Ie||$t?{}:tce(b),!ve)return Ie?Oqe(b,rqe(fe,b)):Pqe(b,dle(fe,b))}else{if(!Ir[lt])return X?b:{};fe=Wqe(b,lt,ve)}}re||(re=new Md);var Qt=re.get(b);if(Qt)return Qt;re.set(b,fe),Rce(b)?b.forEach(function(gn){fe.add(If(gn,S,R,gn,b,re))}):Ice(b)&&b.forEach(function(gn,pr){fe.set(pr,If(gn,S,R,pr,b,re))});var mn=tt?Ie?Tj:Sj:Ie?kl:Zo,tr=nt?n:mn(b);return Uu(tr||b,function(gn,pr){tr&&(pr=gn,gn=b[pr]),jC(fe,pr,If(gn,S,R,pr,b,re))}),fe}function iqe(b){var S=Zo(b);return function(R){return hle(R,b,S)}}function hle(b,S,R){var z=R.length;if(b==null)return!z;for(b=Vi(b);z--;){var X=R[z],re=S[X],fe=b[X];if(fe===n&&!(X in b)||!re(fe))return!1}return!0}function ple(b,S,R){if(typeof b!="function")throw new Cf(o);return GC(function(){b.apply(n,R)},S)}function UC(b,S,R,z){var X=-1,re=ub,fe=!0,ve=b.length,Ie=[],tt=S.length;if(!ve)return Ie;R&&(S=zi(S,yi(R))),z?(re=ay,fe=!1):S.length>=i&&(re=Tf,fe=!1,S=new hb(S));e:for(;++X<ve;){var nt=b[X],lt=R==null?nt:R(nt);if(nt=z||nt!==0?nt:0,fe&&lt===lt){for(var $t=tt;$t--;)if(S[$t]===lt)continue e;Ie.push(nt)}else re(S,lt,z)||Ie.push(nt)}return Ie}var fy=Ule(rp),mle=Ule(aj,!0);function sqe(b,S){var R=!0;return fy(b,function(z,X,re){return R=!!S(z,X,re),R}),R}function t3(b,S,R){for(var z=-1,X=b.length;++z<X;){var re=b[z],fe=S(re);if(fe!=null&&(ve===n?fe===fe&&!kc(fe):R(fe,ve)))var ve=fe,Ie=re}return Ie}function oqe(b,S,R,z){var X=b.length;for(R=Kn(R),R<0&&(R=-R>X?0:X+R),z=z===n||z>X?X:Kn(z),z<0&&(z+=X),z=R>z?0:Nce(z);R<z;)b[R++]=S;return b}function gle(b,S){var R=[];return fy(b,function(z,X,re){S(z,X,re)&&R.push(z)}),R}function wa(b,S,R,z,X){var re=-1,fe=b.length;for(R||(R=Yqe),X||(X=[]);++re<fe;){var ve=b[re];S>0&&R(ve)?S>1?wa(ve,S-1,R,z,X):Pd(X,ve):z||(X[X.length]=ve)}return X}var oj=zle(),yle=zle(!0);function rp(b,S){return b&&oj(b,S,Zo)}function aj(b,S){return b&&yle(b,S,Zo)}function n3(b,S){return Sf(S,function(R){return s0(b[R])})}function mb(b,S){S=hy(S,b);for(var R=0,z=S.length;b!=null&&R<z;)b=b[sp(S[R++])];return R&&R==z?b:n}function vle(b,S,R){var z=S(b);return Vn(b)?z:Pd(z,R(b))}function zu(b){return b==null?b===n?kt:mt:fb&&fb in Vi(b)?zqe(b):tWe(b)}function uj(b,S){return b>S}function aqe(b,S){return b!=null&&Ei.call(b,S)}function uqe(b,S){return b!=null&&S in Vi(b)}function lqe(b,S,R){return b>=Za(S,R)&&b<No(S,R)}function lj(b,S,R){for(var z=R?ay:ub,X=b[0].length,re=b.length,fe=re,ve=je(re),Ie=1/0,tt=[];fe--;){var nt=b[fe];fe&&S&&(nt=zi(nt,yi(S))),Ie=Za(nt.length,Ie),ve[fe]=!R&&(S||X>=120&&nt.length>=120)?new hb(fe&&nt):n}nt=b[0];var lt=-1,$t=ve[0];e:for(;++lt<X&&tt.length<Ie;){var Qt=nt[lt],mn=S?S(Qt):Qt;if(Qt=R||Qt!==0?Qt:0,!($t?Tf($t,mn):z(tt,mn,R))){for(fe=re;--fe;){var tr=ve[fe];if(!(tr?Tf(tr,mn):z(b[fe],mn,R)))continue e}$t&&$t.push(mn),tt.push(Qt)}}return tt}function cqe(b,S,R,z){return rp(b,function(X,re,fe){S(z,R(X),re,fe)}),z}function zC(b,S,R){S=hy(S,b),b=sce(b,S);var z=b==null?b:b[sp(Rf(S))];return z==null?n:Qa(z,b,R)}function ble(b){return $s(b)&&zu(b)==Q}function fqe(b){return $s(b)&&zu(b)==$e}function dqe(b){return $s(b)&&zu(b)==Se}function VC(b,S,R,z,X){return b===S?!0:b==null||S==null||!$s(b)&&!$s(S)?b!==b&&S!==S:hqe(b,S,R,z,VC,X)}function hqe(b,S,R,z,X,re){var fe=Vn(b),ve=Vn(S),Ie=fe?ue:eu(b),tt=ve?ue:eu(S);Ie=Ie==Q?Ce:Ie,tt=tt==Q?Ce:tt;var nt=Ie==Ce,lt=tt==Ce,$t=Ie==tt;if($t&&my(b)){if(!my(S))return!1;fe=!0,nt=!1}if($t&&!nt)return re||(re=new Md),fe||zw(b)?Jle(b,S,R,z,X,re):jqe(b,S,Ie,R,z,X,re);if(!(R&p)){var Qt=nt&&Ei.call(b,"__wrapped__"),mn=lt&&Ei.call(S,"__wrapped__");if(Qt||mn){var tr=Qt?b.value():b,gn=mn?S.value():S;return re||(re=new Md),X(tr,gn,R,z,re)}}return $t?(re||(re=new Md),Uqe(b,S,R,z,X,re)):!1}function pqe(b){return $s(b)&&eu(b)==Ze}function cj(b,S,R,z){var X=R.length,re=X,fe=!z;if(b==null)return!re;for(b=Vi(b);X--;){var ve=R[X];if(fe&&ve[2]?ve[1]!==b[ve[0]]:!(ve[0]in b))return!1}for(;++X<re;){ve=R[X];var Ie=ve[0],tt=b[Ie],nt=ve[1];if(fe&&ve[2]){if(tt===n&&!(Ie in b))return!1}else{var lt=new Md;if(z)var $t=z(tt,nt,Ie,b,S,lt);if(!($t===n?VC(nt,tt,p|m,z,lt):$t))return!1}}return!0}function xle(b){if(!As(b)||Xqe(b))return!1;var S=s0(b)?pHe:Cr;return S.test(yb(b))}function mqe(b){return $s(b)&&zu(b)==yt}function gqe(b){return $s(b)&&eu(b)==Dt}function yqe(b){return $s(b)&&b3(b.length)&&!!qr[zu(b)]}function _le(b){return typeof b=="function"?b:b==null?Rl:typeof b=="object"?Vn(b)?Sle(b[0],b[1]):Ele(b):Vce(b)}function fj(b){if(!WC(b))return xHe(b);var S=[];for(var R in Vi(b))Ei.call(b,R)&&R!="constructor"&&S.push(R);return S}function vqe(b){if(!As(b))return eWe(b);var S=WC(b),R=[];for(var z in b)z=="constructor"&&(S||!Ei.call(b,z))||R.push(z);return R}function dj(b,S){return b<S}function wle(b,S){var R=-1,z=Il(b)?je(b.length):[];return fy(b,function(X,re,fe){z[++R]=S(X,re,fe)}),z}function Ele(b){var S=Aj(b);return S.length==1&&S[0][2]?rce(S[0][0],S[0][1]):function(R){return R===b||cj(R,b,S)}}function Sle(b,S){return kj(b)&&nce(S)?rce(sp(b),S):function(R){var z=Bj(R,b);return z===n&&z===S?jj(R,b):VC(S,z,p|m)}}function r3(b,S,R,z,X){b!==S&&oj(S,function(re,fe){if(X||(X=new Md),As(re))bqe(b,S,fe,R,r3,z,X);else{var ve=z?z(Dj(b,fe),re,fe+"",b,S,X):n;ve===n&&(ve=re),ij(b,fe,ve)}},kl)}function bqe(b,S,R,z,X,re,fe){var ve=Dj(b,R),Ie=Dj(S,R),tt=fe.get(Ie);if(tt){ij(b,R,tt);return}var nt=re?re(ve,Ie,R+"",b,S,fe):n,lt=nt===n;if(lt){var $t=Vn(Ie),Qt=!$t&&my(Ie),mn=!$t&&!Qt&&zw(Ie);nt=Ie,$t||Qt||mn?Vn(ve)?nt=ve:Js(ve)?nt=Al(ve):Qt?(lt=!1,nt=Mle(Ie,!0)):mn?(lt=!1,nt=Lle(Ie,!0)):nt=[]:YC(Ie)||vb(Ie)?(nt=ve,vb(ve)?nt=Pce(ve):(!As(ve)||s0(ve))&&(nt=tce(Ie))):lt=!1}lt&&(fe.set(Ie,nt),X(nt,Ie,z,re,fe),fe.delete(Ie)),ij(b,R,nt)}function Tle(b,S){var R=b.length;if(R)return S+=S<0?R:0,i0(S,R)?b[S]:n}function Cle(b,S,R){S.length?S=zi(S,function(re){return Vn(re)?function(fe){return mb(fe,re.length===1?re[0]:re)}:re}):S=[Rl];var z=-1;S=zi(S,yi(pn()));var X=wle(b,function(re,fe,ve){var Ie=zi(S,function(tt){return tt(re)});return{criteria:Ie,index:++z,value:re}});return ze(X,function(re,fe){return Nqe(re,fe,R)})}function xqe(b,S){return Ale(b,S,function(R,z){return jj(b,z)})}function Ale(b,S,R){for(var z=-1,X=S.length,re={};++z<X;){var fe=S[z],ve=mb(b,fe);R(ve,fe)&&HC(re,hy(fe,b),ve)}return re}function _qe(b){return function(S){return mb(S,b)}}function hj(b,S,R,z){var X=z?uy:Jm,re=-1,fe=S.length,ve=b;for(b===S&&(S=Al(S)),R&&(ve=zi(b,yi(R)));++re<fe;)for(var Ie=0,tt=S[re],nt=R?R(tt):tt;(Ie=X(ve,nt,Ie,z))>-1;)ve!==b&&GP.call(ve,Ie,1),GP.call(b,Ie,1);return b}function Ile(b,S){for(var R=b?S.length:0,z=R-1;R--;){var X=S[R];if(R==z||X!==re){var re=X;i0(X)?GP.call(b,X,1):yj(b,X)}}return b}function pj(b,S){return b+XP(ule()*(S-b+1))}function wqe(b,S,R,z){for(var X=-1,re=No(KP((S-b)/(R||1)),0),fe=je(re);re--;)fe[z?re:++X]=b,b+=R;return fe}function mj(b,S){var R="";if(!b||S<1||S>K)return R;do S%2&&(R+=b),S=XP(S/2),S&&(b+=b);while(S);return R}function sr(b,S){return Nj(ice(b,S,Rl),b+"")}function Eqe(b){return fle(Vw(b))}function Sqe(b,S){var R=Vw(b);return h3(R,pb(S,0,R.length))}function HC(b,S,R,z){if(!As(b))return b;S=hy(S,b);for(var X=-1,re=S.length,fe=re-1,ve=b;ve!=null&&++X<re;){var Ie=sp(S[X]),tt=R;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return b;if(X!=fe){var nt=ve[Ie];tt=z?z(nt,Ie,ve):n,tt===n&&(tt=As(nt)?nt:i0(S[X+1])?[]:{})}jC(ve,Ie,tt),ve=ve[Ie]}return b}var kle=QP?function(b,S){return QP.set(b,S),b}:Rl,Tqe=YP?function(b,S){return YP(b,"toString",{configurable:!0,enumerable:!1,value:zj(S),writable:!0})}:Rl;function Cqe(b){return h3(Vw(b))}function kf(b,S,R){var z=-1,X=b.length;S<0&&(S=-S>X?0:X+S),R=R>X?X:R,R<0&&(R+=X),X=S>R?0:R-S>>>0,S>>>=0;for(var re=je(X);++z<X;)re[z]=b[z+S];return re}function Aqe(b,S){var R;return fy(b,function(z,X,re){return R=S(z,X,re),!R}),!!R}function i3(b,S,R){var z=0,X=b==null?z:b.length;if(typeof S=="number"&&S===S&&X<=L){for(;z<X;){var re=z+X>>>1,fe=b[re];fe!==null&&!kc(fe)&&(R?fe<=S:fe<S)?z=re+1:X=re}return X}return gj(b,S,Rl,R)}function gj(b,S,R,z){var X=0,re=b==null?0:b.length;if(re===0)return 0;S=R(S);for(var fe=S!==S,ve=S===null,Ie=kc(S),tt=S===n;X<re;){var nt=XP((X+re)/2),lt=R(b[nt]),$t=lt!==n,Qt=lt===null,mn=lt===lt,tr=kc(lt);if(fe)var gn=z||mn;else tt?gn=mn&&(z||$t):ve?gn=mn&&$t&&(z||!Qt):Ie?gn=mn&&$t&&!Qt&&(z||!tr):Qt||tr?gn=!1:gn=z?lt<=S:lt<S;gn?X=nt+1:re=nt}return Za(re,W)}function Rle(b,S){for(var R=-1,z=b.length,X=0,re=[];++R<z;){var fe=b[R],ve=S?S(fe):fe;if(!R||!Ld(ve,Ie)){var Ie=ve;re[X++]=fe===0?0:fe}}return re}function Dle(b){return typeof b=="number"?b:kc(b)?F:+b}function Ic(b){if(typeof b=="string")return b;if(Vn(b))return zi(b,Ic)+"";if(kc(b))return lle?lle.call(b):"";var S=b+"";return S=="0"&&1/b==-1/0?"-0":S}function dy(b,S,R){var z=-1,X=ub,re=b.length,fe=!0,ve=[],Ie=ve;if(R)fe=!1,X=ay;else if(re>=i){var tt=S?null:Fqe(b);if(tt)return BP(tt);fe=!1,X=Tf,Ie=new hb}else Ie=S?[]:ve;e:for(;++z<re;){var nt=b[z],lt=S?S(nt):nt;if(nt=R||nt!==0?nt:0,fe&&lt===lt){for(var $t=Ie.length;$t--;)if(Ie[$t]===lt)continue e;S&&Ie.push(lt),ve.push(nt)}else X(Ie,lt,R)||(Ie!==ve&&Ie.push(lt),ve.push(nt))}return ve}function yj(b,S){return S=hy(S,b),b=sce(b,S),b==null||delete b[sp(Rf(S))]}function Nle(b,S,R,z){return HC(b,S,R(mb(b,S)),z)}function s3(b,S,R,z){for(var X=b.length,re=z?X:-1;(z?re--:++re<X)&&S(b[re],re,b););return R?kf(b,z?0:re,z?re+1:X):kf(b,z?re+1:0,z?X:re)}function Ple(b,S){var R=b;return R instanceof br&&(R=R.value()),Od(S,function(z,X){return X.func.apply(X.thisArg,Pd([z],X.args))},R)}function vj(b,S,R){var z=b.length;if(z<2)return z?dy(b[0]):[];for(var X=-1,re=je(z);++X<z;)for(var fe=b[X],ve=-1;++ve<z;)ve!=X&&(re[X]=UC(re[X]||fe,b[ve],S,R));return dy(wa(re,1),S,R)}function Ole(b,S,R){for(var z=-1,X=b.length,re=S.length,fe={};++z<X;){var ve=z<re?S[z]:n;R(fe,b[z],ve)}return fe}function bj(b){return Js(b)?b:[]}function xj(b){return typeof b=="function"?b:Rl}function hy(b,S){return Vn(b)?b:kj(b,S)?[b]:lce(vi(b))}var Iqe=sr;function py(b,S,R){var z=b.length;return R=R===n?z:R,!S&&R>=z?b:kf(b,S,R)}var $le=mHe||function(b){return an.clearTimeout(b)};function Mle(b,S){if(S)return b.slice();var R=b.length,z=rle?rle(R):new b.constructor(R);return b.copy(z),z}function _j(b){var S=new b.constructor(b.byteLength);return new qP(S).set(new qP(b)),S}function kqe(b,S){var R=S?_j(b.buffer):b.buffer;return new b.constructor(R,b.byteOffset,b.byteLength)}function Rqe(b){var S=new b.constructor(b.source,Zn.exec(b));return S.lastIndex=b.lastIndex,S}function Dqe(b){return BC?Vi(BC.call(b)):{}}function Lle(b,S){var R=S?_j(b.buffer):b.buffer;return new b.constructor(R,b.byteOffset,b.length)}function Fle(b,S){if(b!==S){var R=b!==n,z=b===null,X=b===b,re=kc(b),fe=S!==n,ve=S===null,Ie=S===S,tt=kc(S);if(!ve&&!tt&&!re&&b>S||re&&fe&&Ie&&!ve&&!tt||z&&fe&&Ie||!R&&Ie||!X)return 1;if(!z&&!re&&!tt&&b<S||tt&&R&&X&&!z&&!re||ve&&R&&X||!fe&&X||!Ie)return-1}return 0}function Nqe(b,S,R){for(var z=-1,X=b.criteria,re=S.criteria,fe=X.length,ve=R.length;++z<fe;){var Ie=Fle(X[z],re[z]);if(Ie){if(z>=ve)return Ie;var tt=R[z];return Ie*(tt=="desc"?-1:1)}}return b.index-S.index}function Ble(b,S,R,z){for(var X=-1,re=b.length,fe=R.length,ve=-1,Ie=S.length,tt=No(re-fe,0),nt=je(Ie+tt),lt=!z;++ve<Ie;)nt[ve]=S[ve];for(;++X<fe;)(lt||X<re)&&(nt[R[X]]=b[X]);for(;tt--;)nt[ve++]=b[X++];return nt}function jle(b,S,R,z){for(var X=-1,re=b.length,fe=-1,ve=R.length,Ie=-1,tt=S.length,nt=No(re-ve,0),lt=je(nt+tt),$t=!z;++X<nt;)lt[X]=b[X];for(var Qt=X;++Ie<tt;)lt[Qt+Ie]=S[Ie];for(;++fe<ve;)($t||X<re)&&(lt[Qt+R[fe]]=b[X++]);return lt}function Al(b,S){var R=-1,z=b.length;for(S||(S=je(z));++R<z;)S[R]=b[R];return S}function ip(b,S,R,z){var X=!R;R||(R={});for(var re=-1,fe=S.length;++re<fe;){var ve=S[re],Ie=z?z(R[ve],b[ve],ve,R,b):n;Ie===n&&(Ie=b[ve]),X?t0(R,ve,Ie):jC(R,ve,Ie)}return R}function Pqe(b,S){return ip(b,Ij(b),S)}function Oqe(b,S){return ip(b,Zle(b),S)}function o3(b,S){return function(R,z){var X=Vn(R)?ab:nqe,re=S?S():{};return X(R,b,pn(z,2),re)}}function Bw(b){return sr(function(S,R){var z=-1,X=R.length,re=X>1?R[X-1]:n,fe=X>2?R[2]:n;for(re=b.length>3&&typeof re=="function"?(X--,re):n,fe&&Vu(R[0],R[1],fe)&&(re=X<3?n:re,X=1),S=Vi(S);++z<X;){var ve=R[z];ve&&b(S,ve,z,re)}return S})}function Ule(b,S){return function(R,z){if(R==null)return R;if(!Il(R))return b(R,z);for(var X=R.length,re=S?X:-1,fe=Vi(R);(S?re--:++re<X)&&z(fe[re],re,fe)!==!1;);return R}}function zle(b){return function(S,R,z){for(var X=-1,re=Vi(S),fe=z(S),ve=fe.length;ve--;){var Ie=fe[b?ve:++X];if(R(re[Ie],Ie,re)===!1)break}return S}}function $qe(b,S,R){var z=S&g,X=qC(b);function re(){var fe=this&&this!==an&&this instanceof re?X:b;return fe.apply(z?R:this,arguments)}return re}function Vle(b){return function(S){S=vi(S);var R=Nw(S)?$d(S):n,z=R?R[0]:S.charAt(0),X=R?py(R,1).join(""):S.slice(1);return z[b]()+X}}function jw(b){return function(S){return Od(Uce(jce(S).replace(Tw,"")),b,"")}}function qC(b){return function(){var S=arguments;switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3]);case 5:return new b(S[0],S[1],S[2],S[3],S[4]);case 6:return new b(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new b(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var R=Fw(b.prototype),z=b.apply(R,S);return As(z)?z:R}}function Mqe(b,S,R){var z=qC(b);function X(){for(var re=arguments.length,fe=je(re),ve=re,Ie=Uw(X);ve--;)fe[ve]=arguments[ve];var tt=re<3&&fe[0]!==Ie&&fe[re-1]!==Ie?[]:ly(fe,Ie);if(re-=tt.length,re<R)return Yle(b,S,a3,X.placeholder,n,fe,tt,n,n,R-re);var nt=this&&this!==an&&this instanceof X?z:b;return Qa(nt,this,fe)}return X}function Hle(b){return function(S,R,z){var X=Vi(S);if(!Il(S)){var re=pn(R,3);S=Zo(S),R=function(ve){return re(X[ve],ve,X)}}var fe=b(S,R,z);return fe>-1?X[re?S[fe]:fe]:n}}function qle(b){return r0(function(S){var R=S.length,z=R,X=Af.prototype.thru;for(b&&S.reverse();z--;){var re=S[z];if(typeof re!="function")throw new Cf(o);if(X&&!fe&&f3(re)=="wrapper")var fe=new Af([],!0)}for(z=fe?z:R;++z<R;){re=S[z];var ve=f3(re),Ie=ve=="wrapper"?Cj(re):n;Ie&&Rj(Ie[0])&&Ie[1]==(C|x|E|I)&&!Ie[4].length&&Ie[9]==1?fe=fe[f3(Ie[0])].apply(fe,Ie[3]):fe=re.length==1&&Rj(re)?fe[ve]():fe.thru(re)}return function(){var tt=arguments,nt=tt[0];if(fe&&tt.length==1&&Vn(nt))return fe.plant(nt).value();for(var lt=0,$t=R?S[lt].apply(this,tt):nt;++lt<R;)$t=S[lt].call(this,$t);return $t}})}function a3(b,S,R,z,X,re,fe,ve,Ie,tt){var nt=S&C,lt=S&g,$t=S&y,Qt=S&(x|w),mn=S&N,tr=$t?n:qC(b);function gn(){for(var pr=arguments.length,Rr=je(pr),Rc=pr;Rc--;)Rr[Rc]=arguments[Rc];if(Qt)var Hu=Uw(gn),Dc=OC(Rr,Hu);if(z&&(Rr=Ble(Rr,z,X,Qt)),re&&(Rr=jle(Rr,re,fe,Qt)),pr-=Dc,Qt&&pr<tt){var Zs=ly(Rr,Hu);return Yle(b,S,a3,gn.placeholder,R,Rr,Zs,ve,Ie,tt-pr)}var Fd=lt?R:this,a0=$t?Fd[b]:b;return pr=Rr.length,ve?Rr=nWe(Rr,ve):mn&&pr>1&&Rr.reverse(),nt&&Ie<pr&&(Rr.length=Ie),this&&this!==an&&this instanceof gn&&(a0=tr||qC(a0)),a0.apply(Fd,Rr)}return gn}function Wle(b,S){return function(R,z){return cqe(R,b,S(z),{})}}function u3(b,S){return function(R,z){var X;if(R===n&&z===n)return S;if(R!==n&&(X=R),z!==n){if(X===n)return z;typeof R=="string"||typeof z=="string"?(R=Ic(R),z=Ic(z)):(R=Dle(R),z=Dle(z)),X=b(R,z)}return X}}function wj(b){return r0(function(S){return S=zi(S,yi(pn())),sr(function(R){var z=this;return b(S,function(X){return Qa(X,z,R)})})})}function l3(b,S){S=S===n?" ":Ic(S);var R=S.length;if(R<2)return R?mj(S,b):S;var z=mj(S,KP(b/Pw(S)));return Nw(S)?py($d(z),0,b).join(""):z.slice(0,b)}function Lqe(b,S,R,z){var X=S&g,re=qC(b);function fe(){for(var ve=-1,Ie=arguments.length,tt=-1,nt=z.length,lt=je(nt+Ie),$t=this&&this!==an&&this instanceof fe?re:b;++tt<nt;)lt[tt]=z[tt];for(;Ie--;)lt[tt++]=arguments[++ve];return Qa($t,X?R:this,lt)}return fe}function Gle(b){return function(S,R,z){return z&&typeof z!="number"&&Vu(S,R,z)&&(R=z=n),S=o0(S),R===n?(R=S,S=0):R=o0(R),z=z===n?S<R?1:-1:o0(z),wqe(S,R,z,b)}}function c3(b){return function(S,R){return typeof S=="string"&&typeof R=="string"||(S=Df(S),R=Df(R)),b(S,R)}}function Yle(b,S,R,z,X,re,fe,ve,Ie,tt){var nt=S&x,lt=nt?fe:n,$t=nt?n:fe,Qt=nt?re:n,mn=nt?n:re;S|=nt?E:T,S&=~(nt?T:E),S&v||(S&=-4);var tr=[b,S,X,Qt,lt,mn,$t,ve,Ie,tt],gn=R.apply(n,tr);return Rj(b)&&oce(gn,tr),gn.placeholder=z,ace(gn,b,S)}function Ej(b){var S=Do[b];return function(R,z){if(R=Df(R),z=z==null?0:Za(Kn(z),292),z&&ale(R)){var X=(vi(R)+"e").split("e"),re=S(X[0]+"e"+(+X[1]+z));return X=(vi(re)+"e").split("e"),+(X[0]+"e"+(+X[1]-z))}return S(R)}}var Fqe=Mw&&1/BP(new Mw([,-0]))[1]==Y?function(b){return new Mw(b)}:qj;function Kle(b){return function(S){var R=eu(S);return R==Ze?Z9(S):R==Dt?tHe(S):Ro(S,b(S))}}function n0(b,S,R,z,X,re,fe,ve){var Ie=S&y;if(!Ie&&typeof b!="function")throw new Cf(o);var tt=z?z.length:0;if(tt||(S&=-97,z=X=n),fe=fe===n?fe:No(Kn(fe),0),ve=ve===n?ve:Kn(ve),tt-=X?X.length:0,S&T){var nt=z,lt=X;z=X=n}var $t=Ie?n:Cj(b),Qt=[b,S,R,z,X,nt,lt,re,fe,ve];if($t&&Zqe(Qt,$t),b=Qt[0],S=Qt[1],R=Qt[2],z=Qt[3],X=Qt[4],ve=Qt[9]=Qt[9]===n?Ie?0:b.length:No(Qt[9]-tt,0),!ve&&S&(x|w)&&(S&=-25),!S||S==g)var mn=$qe(b,S,R);else S==x||S==w?mn=Mqe(b,S,ve):(S==E||S==(g|E))&&!X.length?mn=Lqe(b,S,R,z):mn=a3.apply(n,Qt);var tr=$t?kle:oce;return ace(tr(mn,Qt),b,S)}function Xle(b,S,R,z){return b===n||Ld(b,$w[R])&&!Ei.call(z,R)?S:b}function Qle(b,S,R,z,X,re){return As(b)&&As(S)&&(re.set(S,b),r3(b,S,n,Qle,re),re.delete(S)),b}function Bqe(b){return YC(b)?n:b}function Jle(b,S,R,z,X,re){var fe=R&p,ve=b.length,Ie=S.length;if(ve!=Ie&&!(fe&&Ie>ve))return!1;var tt=re.get(b),nt=re.get(S);if(tt&&nt)return tt==S&&nt==b;var lt=-1,$t=!0,Qt=R&m?new hb:n;for(re.set(b,S),re.set(S,b);++lt<ve;){var mn=b[lt],tr=S[lt];if(z)var gn=fe?z(tr,mn,lt,S,b,re):z(mn,tr,lt,b,S,re);if(gn!==n){if(gn)continue;$t=!1;break}if(Qt){if(!Rw(S,function(pr,Rr){if(!Tf(Qt,Rr)&&(mn===pr||X(mn,pr,R,z,re)))return Qt.push(Rr)})){$t=!1;break}}else if(!(mn===tr||X(mn,tr,R,z,re))){$t=!1;break}}return re.delete(b),re.delete(S),$t}function jqe(b,S,R,z,X,re,fe){switch(R){case ot:if(b.byteLength!=S.byteLength||b.byteOffset!=S.byteOffset)return!1;b=b.buffer,S=S.buffer;case $e:return!(b.byteLength!=S.byteLength||!re(new qP(b),new qP(S)));case ce:case Se:case It:return Ld(+b,+S);case et:return b.name==S.name&&b.message==S.message;case yt:case Je:return b==S+"";case Ze:var ve=Z9;case Dt:var Ie=z&p;if(ve||(ve=BP),b.size!=S.size&&!Ie)return!1;var tt=fe.get(b);if(tt)return tt==S;z|=m,fe.set(b,S);var nt=Jle(ve(b),ve(S),z,X,re,fe);return fe.delete(b),nt;case _e:if(BC)return BC.call(b)==BC.call(S)}return!1}function Uqe(b,S,R,z,X,re){var fe=R&p,ve=Sj(b),Ie=ve.length,tt=Sj(S),nt=tt.length;if(Ie!=nt&&!fe)return!1;for(var lt=Ie;lt--;){var $t=ve[lt];if(!(fe?$t in S:Ei.call(S,$t)))return!1}var Qt=re.get(b),mn=re.get(S);if(Qt&&mn)return Qt==S&&mn==b;var tr=!0;re.set(b,S),re.set(S,b);for(var gn=fe;++lt<Ie;){$t=ve[lt];var pr=b[$t],Rr=S[$t];if(z)var Rc=fe?z(Rr,pr,$t,S,b,re):z(pr,Rr,$t,b,S,re);if(!(Rc===n?pr===Rr||X(pr,Rr,R,z,re):Rc)){tr=!1;break}gn||(gn=$t=="constructor")}if(tr&&!gn){var Hu=b.constructor,Dc=S.constructor;Hu!=Dc&&"constructor"in b&&"constructor"in S&&!(typeof Hu=="function"&&Hu instanceof Hu&&typeof Dc=="function"&&Dc instanceof Dc)&&(tr=!1)}return re.delete(b),re.delete(S),tr}function r0(b){return Nj(ice(b,n,hce),b+"")}function Sj(b){return vle(b,Zo,Ij)}function Tj(b){return vle(b,kl,Zle)}var Cj=QP?function(b){return QP.get(b)}:qj;function f3(b){for(var S=b.name+"",R=Lw[S],z=Ei.call(Lw,S)?R.length:0;z--;){var X=R[z],re=X.func;if(re==null||re==b)return X.name}return S}function Uw(b){var S=Ei.call(Z,"placeholder")?Z:b;return S.placeholder}function pn(){var b=Z.iteratee||Vj;return b=b===Vj?_le:b,arguments.length?b(arguments[0],arguments[1]):b}function d3(b,S){var R=b.__data__;return Kqe(S)?R[typeof S=="string"?"string":"hash"]:R.map}function Aj(b){for(var S=Zo(b),R=S.length;R--;){var z=S[R],X=b[z];S[R]=[z,X,nce(X)]}return S}function gb(b,S){var R=JVe(b,S);return xle(R)?R:n}function zqe(b){var S=Ei.call(b,fb),R=b[fb];try{b[fb]=n;var z=!0}catch{}var X=VP.call(b);return z&&(S?b[fb]=R:delete b[fb]),X}var Ij=tj?function(b){return b==null?[]:(b=Vi(b),Sf(tj(b),function(S){return sle.call(b,S)}))}:Wj,Zle=tj?function(b){for(var S=[];b;)Pd(S,Ij(b)),b=WP(b);return S}:Wj,eu=zu;(nj&&eu(new nj(new ArrayBuffer(1)))!=ot||MC&&eu(new MC)!=Ze||rj&&eu(rj.resolve())!=Fe||Mw&&eu(new Mw)!=Dt||LC&&eu(new LC)!=Rt)&&(eu=function(b){var S=zu(b),R=S==Ce?b.constructor:n,z=R?yb(R):"";if(z)switch(z){case SHe:return ot;case THe:return Ze;case CHe:return Fe;case AHe:return Dt;case IHe:return Rt}return S});function Vqe(b,S,R){for(var z=-1,X=R.length;++z<X;){var re=R[z],fe=re.size;switch(re.type){case"drop":b+=fe;break;case"dropRight":S-=fe;break;case"take":S=Za(S,b+fe);break;case"takeRight":b=No(b,S-fe);break}}return{start:b,end:S}}function Hqe(b){var S=b.match(ge);return S?S[1].split(Le):[]}function ece(b,S,R){S=hy(S,b);for(var z=-1,X=S.length,re=!1;++z<X;){var fe=sp(S[z]);if(!(re=b!=null&&R(b,fe)))break;b=b[fe]}return re||++z!=X?re:(X=b==null?0:b.length,!!X&&b3(X)&&i0(fe,X)&&(Vn(b)||vb(b)))}function qqe(b){var S=b.length,R=new b.constructor(S);return S&&typeof b[0]=="string"&&Ei.call(b,"index")&&(R.index=b.index,R.input=b.input),R}function tce(b){return typeof b.constructor=="function"&&!WC(b)?Fw(WP(b)):{}}function Wqe(b,S,R){var z=b.constructor;switch(S){case $e:return _j(b);case ce:case Se:return new z(+b);case ot:return kqe(b,R);case xt:case jt:case Un:case dr:case Tr:case xi:case Tn:case zn:case hr:return Lle(b,R);case Ze:return new z;case It:case Je:return new z(b);case yt:return Rqe(b);case Dt:return new z;case _e:return Dqe(b)}}function Gqe(b,S){var R=S.length;if(!R)return b;var z=R-1;return S[z]=(R>1?"& ":"")+S[z],S=S.join(R>2?", ":" "),b.replace(ae,`{
/* [wrapped with `+S+`] */
`)}function Yqe(b){return Vn(b)||vb(b)||!!(ole&&b&&b[ole])}function i0(b,S){var R=typeof b;return S=S??K,!!S&&(R=="number"||R!="symbol"&&on.test(b))&&b>-1&&b%1==0&&b<S}function Vu(b,S,R){if(!As(R))return!1;var z=typeof S;return(z=="number"?Il(R)&&i0(S,R.length):z=="string"&&S in R)?Ld(R[S],b):!1}function kj(b,S){if(Vn(b))return!1;var R=typeof b;return R=="number"||R=="symbol"||R=="boolean"||b==null||kc(b)?!0:Ri.test(b)||!Br.test(b)||S!=null&&b in Vi(S)}function Kqe(b){var S=typeof b;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?b!=="__proto__":b===null}function Rj(b){var S=f3(b),R=Z[S];if(typeof R!="function"||!(S in br.prototype))return!1;if(b===R)return!0;var z=Cj(R);return!!z&&b===z[0]}function Xqe(b){return!!nle&&nle in b}var Qqe=UP?s0:Gj;function WC(b){var S=b&&b.constructor,R=typeof S=="function"&&S.prototype||$w;return b===R}function nce(b){return b===b&&!As(b)}function rce(b,S){return function(R){return R==null?!1:R[b]===S&&(S!==n||b in Vi(R))}}function Jqe(b){var S=y3(b,function(z){return R.size===l&&R.clear(),z}),R=S.cache;return S}function Zqe(b,S){var R=b[1],z=S[1],X=R|z,re=X<(g|y|C),fe=z==C&&R==x||z==C&&R==I&&b[7].length<=S[8]||z==(C|I)&&S[7].length<=S[8]&&R==x;if(!(re||fe))return b;z&g&&(b[2]=S[2],X|=R&g?0:v);var ve=S[3];if(ve){var Ie=b[3];b[3]=Ie?Ble(Ie,ve,S[4]):ve,b[4]=Ie?ly(b[3],c):S[4]}return ve=S[5],ve&&(Ie=b[5],b[5]=Ie?jle(Ie,ve,S[6]):ve,b[6]=Ie?ly(b[5],c):S[6]),ve=S[7],ve&&(b[7]=ve),z&C&&(b[8]=b[8]==null?S[8]:Za(b[8],S[8])),b[9]==null&&(b[9]=S[9]),b[0]=S[0],b[1]=X,b}function eWe(b){var S=[];if(b!=null)for(var R in Vi(b))S.push(R);return S}function tWe(b){return VP.call(b)}function ice(b,S,R){return S=No(S===n?b.length-1:S,0),function(){for(var z=arguments,X=-1,re=No(z.length-S,0),fe=je(re);++X<re;)fe[X]=z[S+X];X=-1;for(var ve=je(S+1);++X<S;)ve[X]=z[X];return ve[S]=R(fe),Qa(b,this,ve)}}function sce(b,S){return S.length<2?b:mb(b,kf(S,0,-1))}function nWe(b,S){for(var R=b.length,z=Za(S.length,R),X=Al(b);z--;){var re=S[z];b[z]=i0(re,R)?X[re]:n}return b}function Dj(b,S){if(!(S==="constructor"&&typeof b[S]=="function")&&S!="__proto__")return b[S]}var oce=uce(kle),GC=yHe||function(b,S){return an.setTimeout(b,S)},Nj=uce(Tqe);function ace(b,S,R){var z=S+"";return Nj(b,Gqe(z,rWe(Hqe(z),R)))}function uce(b){var S=0,R=0;return function(){var z=_He(),X=O-(z-R);if(R=z,X>0){if(++S>=M)return arguments[0]}else S=0;return b.apply(n,arguments)}}function h3(b,S){var R=-1,z=b.length,X=z-1;for(S=S===n?z:S;++R<S;){var re=pj(R,X),fe=b[re];b[re]=b[R],b[R]=fe}return b.length=S,b}var lce=Jqe(function(b){var S=[];return b.charCodeAt(0)===46&&S.push(""),b.replace(gi,function(R,z,X,re){S.push(X?re.replace(Ut,"$1"):z||R)}),S});function sp(b){if(typeof b=="string"||kc(b))return b;var S=b+"";return S=="0"&&1/b==-1/0?"-0":S}function yb(b){if(b!=null){try{return zP.call(b)}catch{}try{return b+""}catch{}}return""}function rWe(b,S){return Uu(V,function(R){var z="_."+R[0];S&R[1]&&!ub(b,z)&&b.push(z)}),b.sort()}function cce(b){if(b instanceof br)return b.clone();var S=new Af(b.__wrapped__,b.__chain__);return S.__actions__=Al(b.__actions__),S.__index__=b.__index__,S.__values__=b.__values__,S}function iWe(b,S,R){(R?Vu(b,S,R):S===n)?S=1:S=No(Kn(S),0);var z=b==null?0:b.length;if(!z||S<1)return[];for(var X=0,re=0,fe=je(KP(z/S));X<z;)fe[re++]=kf(b,X,X+=S);return fe}function sWe(b){for(var S=-1,R=b==null?0:b.length,z=0,X=[];++S<R;){var re=b[S];re&&(X[z++]=re)}return X}function oWe(){var b=arguments.length;if(!b)return[];for(var S=je(b-1),R=arguments[0],z=b;z--;)S[z-1]=arguments[z];return Pd(Vn(R)?Al(R):[R],wa(S,1))}var aWe=sr(function(b,S){return Js(b)?UC(b,wa(S,1,Js,!0)):[]}),uWe=sr(function(b,S){var R=Rf(S);return Js(R)&&(R=n),Js(b)?UC(b,wa(S,1,Js,!0),pn(R,2)):[]}),lWe=sr(function(b,S){var R=Rf(S);return Js(R)&&(R=n),Js(b)?UC(b,wa(S,1,Js,!0),n,R):[]});function cWe(b,S,R){var z=b==null?0:b.length;return z?(S=R||S===n?1:Kn(S),kf(b,S<0?0:S,z)):[]}function fWe(b,S,R){var z=b==null?0:b.length;return z?(S=R||S===n?1:Kn(S),S=z-S,kf(b,0,S<0?0:S)):[]}function dWe(b,S){return b&&b.length?s3(b,pn(S,3),!0,!0):[]}function hWe(b,S){return b&&b.length?s3(b,pn(S,3),!0):[]}function pWe(b,S,R,z){var X=b==null?0:b.length;return X?(R&&typeof R!="number"&&Vu(b,S,R)&&(R=0,z=X),oqe(b,S,R,z)):[]}function fce(b,S,R){var z=b==null?0:b.length;if(!z)return-1;var X=R==null?0:Kn(R);return X<0&&(X=No(z+X,0)),lb(b,pn(S,3),X)}function dce(b,S,R){var z=b==null?0:b.length;if(!z)return-1;var X=z-1;return R!==n&&(X=Kn(R),X=R<0?No(z+X,0):Za(X,z-1)),lb(b,pn(S,3),X,!0)}function hce(b){var S=b==null?0:b.length;return S?wa(b,1):[]}function mWe(b){var S=b==null?0:b.length;return S?wa(b,Y):[]}function gWe(b,S){var R=b==null?0:b.length;return R?(S=S===n?1:Kn(S),wa(b,S)):[]}function yWe(b){for(var S=-1,R=b==null?0:b.length,z={};++S<R;){var X=b[S];z[X[0]]=X[1]}return z}function pce(b){return b&&b.length?b[0]:n}function vWe(b,S,R){var z=b==null?0:b.length;if(!z)return-1;var X=R==null?0:Kn(R);return X<0&&(X=No(z+X,0)),Jm(b,S,X)}function bWe(b){var S=b==null?0:b.length;return S?kf(b,0,-1):[]}var xWe=sr(function(b){var S=zi(b,bj);return S.length&&S[0]===b[0]?lj(S):[]}),_We=sr(function(b){var S=Rf(b),R=zi(b,bj);return S===Rf(R)?S=n:R.pop(),R.length&&R[0]===b[0]?lj(R,pn(S,2)):[]}),wWe=sr(function(b){var S=Rf(b),R=zi(b,bj);return S=typeof S=="function"?S:n,S&&R.pop(),R.length&&R[0]===b[0]?lj(R,n,S):[]});function EWe(b,S){return b==null?"":bHe.call(b,S)}function Rf(b){var S=b==null?0:b.length;return S?b[S-1]:n}function SWe(b,S,R){var z=b==null?0:b.length;if(!z)return-1;var X=z;return R!==n&&(X=Kn(R),X=X<0?No(z+X,0):Za(X,z-1)),S===S?rHe(b,S,X):lb(b,A,X,!0)}function TWe(b,S){return b&&b.length?Tle(b,Kn(S)):n}var CWe=sr(mce);function mce(b,S){return b&&b.length&&S&&S.length?hj(b,S):b}function AWe(b,S,R){return b&&b.length&&S&&S.length?hj(b,S,pn(R,2)):b}function IWe(b,S,R){return b&&b.length&&S&&S.length?hj(b,S,n,R):b}var kWe=r0(function(b,S){var R=b==null?0:b.length,z=sj(b,S);return Ile(b,zi(S,function(X){return i0(X,R)?+X:X}).sort(Fle)),z});function RWe(b,S){var R=[];if(!(b&&b.length))return R;var z=-1,X=[],re=b.length;for(S=pn(S,3);++z<re;){var fe=b[z];S(fe,z,b)&&(R.push(fe),X.push(z))}return Ile(b,X),R}function Pj(b){return b==null?b:EHe.call(b)}function DWe(b,S,R){var z=b==null?0:b.length;return z?(R&&typeof R!="number"&&Vu(b,S,R)?(S=0,R=z):(S=S==null?0:Kn(S),R=R===n?z:Kn(R)),kf(b,S,R)):[]}function NWe(b,S){return i3(b,S)}function PWe(b,S,R){return gj(b,S,pn(R,2))}function OWe(b,S){var R=b==null?0:b.length;if(R){var z=i3(b,S);if(z<R&&Ld(b[z],S))return z}return-1}function $We(b,S){return i3(b,S,!0)}function MWe(b,S,R){return gj(b,S,pn(R,2),!0)}function LWe(b,S){var R=b==null?0:b.length;if(R){var z=i3(b,S,!0)-1;if(Ld(b[z],S))return z}return-1}function FWe(b){return b&&b.length?Rle(b):[]}function BWe(b,S){return b&&b.length?Rle(b,pn(S,2)):[]}function jWe(b){var S=b==null?0:b.length;return S?kf(b,1,S):[]}function UWe(b,S,R){return b&&b.length?(S=R||S===n?1:Kn(S),kf(b,0,S<0?0:S)):[]}function zWe(b,S,R){var z=b==null?0:b.length;return z?(S=R||S===n?1:Kn(S),S=z-S,kf(b,S<0?0:S,z)):[]}function VWe(b,S){return b&&b.length?s3(b,pn(S,3),!1,!0):[]}function HWe(b,S){return b&&b.length?s3(b,pn(S,3)):[]}var qWe=sr(function(b){return dy(wa(b,1,Js,!0))}),WWe=sr(function(b){var S=Rf(b);return Js(S)&&(S=n),dy(wa(b,1,Js,!0),pn(S,2))}),GWe=sr(function(b){var S=Rf(b);return S=typeof S=="function"?S:n,dy(wa(b,1,Js,!0),n,S)});function YWe(b){return b&&b.length?dy(b):[]}function KWe(b,S){return b&&b.length?dy(b,pn(S,2)):[]}function XWe(b,S){return S=typeof S=="function"?S:n,b&&b.length?dy(b,n,S):[]}function Oj(b){if(!(b&&b.length))return[];var S=0;return b=Sf(b,function(R){if(Js(R))return S=No(R.length,S),!0}),ci(S,function(R){return zi(b,G(R))})}function gce(b,S){if(!(b&&b.length))return[];var R=Oj(b);return S==null?R:zi(R,function(z){return Qa(S,n,z)})}var QWe=sr(function(b,S){return Js(b)?UC(b,S):[]}),JWe=sr(function(b){return vj(Sf(b,Js))}),ZWe=sr(function(b){var S=Rf(b);return Js(S)&&(S=n),vj(Sf(b,Js),pn(S,2))}),eGe=sr(function(b){var S=Rf(b);return S=typeof S=="function"?S:n,vj(Sf(b,Js),n,S)}),tGe=sr(Oj);function nGe(b,S){return Ole(b||[],S||[],jC)}function rGe(b,S){return Ole(b||[],S||[],HC)}var iGe=sr(function(b){var S=b.length,R=S>1?b[S-1]:n;return R=typeof R=="function"?(b.pop(),R):n,gce(b,R)});function yce(b){var S=Z(b);return S.__chain__=!0,S}function sGe(b,S){return S(b),b}function p3(b,S){return S(b)}var oGe=r0(function(b){var S=b.length,R=S?b[0]:0,z=this.__wrapped__,X=function(re){return sj(re,b)};return S>1||this.__actions__.length||!(z instanceof br)||!i0(R)?this.thru(X):(z=z.slice(R,+R+(S?1:0)),z.__actions__.push({func:p3,args:[X],thisArg:n}),new Af(z,this.__chain__).thru(function(re){return S&&!re.length&&re.push(n),re}))});function aGe(){return yce(this)}function uGe(){return new Af(this.value(),this.__chain__)}function lGe(){this.__values__===n&&(this.__values__=Dce(this.value()));var b=this.__index__>=this.__values__.length,S=b?n:this.__values__[this.__index__++];return{done:b,value:S}}function cGe(){return this}function fGe(b){for(var S,R=this;R instanceof ZP;){var z=cce(R);z.__index__=0,z.__values__=n,S?X.__wrapped__=z:S=z;var X=z;R=R.__wrapped__}return X.__wrapped__=b,S}function dGe(){var b=this.__wrapped__;if(b instanceof br){var S=b;return this.__actions__.length&&(S=new br(this)),S=S.reverse(),S.__actions__.push({func:p3,args:[Pj],thisArg:n}),new Af(S,this.__chain__)}return this.thru(Pj)}function hGe(){return Ple(this.__wrapped__,this.__actions__)}var pGe=o3(function(b,S,R){Ei.call(b,R)?++b[R]:t0(b,R,1)});function mGe(b,S,R){var z=Vn(b)?kw:sqe;return R&&Vu(b,S,R)&&(S=n),z(b,pn(S,3))}function gGe(b,S){var R=Vn(b)?Sf:gle;return R(b,pn(S,3))}var yGe=Hle(fce),vGe=Hle(dce);function bGe(b,S){return wa(m3(b,S),1)}function xGe(b,S){return wa(m3(b,S),Y)}function _Ge(b,S,R){return R=R===n?1:Kn(R),wa(m3(b,S),R)}function vce(b,S){var R=Vn(b)?Uu:fy;return R(b,pn(S,3))}function bce(b,S){var R=Vn(b)?$P:mle;return R(b,pn(S,3))}var wGe=o3(function(b,S,R){Ei.call(b,R)?b[R].push(S):t0(b,R,[S])});function EGe(b,S,R,z){b=Il(b)?b:Vw(b),R=R&&!z?Kn(R):0;var X=b.length;return R<0&&(R=No(X+R,0)),x3(b)?R<=X&&b.indexOf(S,R)>-1:!!X&&Jm(b,S,R)>-1}var SGe=sr(function(b,S,R){var z=-1,X=typeof S=="function",re=Il(b)?je(b.length):[];return fy(b,function(fe){re[++z]=X?Qa(S,fe,R):zC(fe,S,R)}),re}),TGe=o3(function(b,S,R){t0(b,R,S)});function m3(b,S){var R=Vn(b)?zi:wle;return R(b,pn(S,3))}function CGe(b,S,R,z){return b==null?[]:(Vn(S)||(S=S==null?[]:[S]),R=z?n:R,Vn(R)||(R=R==null?[]:[R]),Cle(b,S,R))}var AGe=o3(function(b,S,R){b[R?0:1].push(S)},function(){return[[],[]]});function IGe(b,S,R){var z=Vn(b)?Od:De,X=arguments.length<3;return z(b,pn(S,4),R,X,fy)}function kGe(b,S,R){var z=Vn(b)?MP:De,X=arguments.length<3;return z(b,pn(S,4),R,X,mle)}function RGe(b,S){var R=Vn(b)?Sf:gle;return R(b,v3(pn(S,3)))}function DGe(b){var S=Vn(b)?fle:Eqe;return S(b)}function NGe(b,S,R){(R?Vu(b,S,R):S===n)?S=1:S=Kn(S);var z=Vn(b)?eqe:Sqe;return z(b,S)}function PGe(b){var S=Vn(b)?tqe:Cqe;return S(b)}function OGe(b){if(b==null)return 0;if(Il(b))return x3(b)?Pw(b):b.length;var S=eu(b);return S==Ze||S==Dt?b.size:fj(b).length}function $Ge(b,S,R){var z=Vn(b)?Rw:Aqe;return R&&Vu(b,S,R)&&(S=n),z(b,pn(S,3))}var MGe=sr(function(b,S){if(b==null)return[];var R=S.length;return R>1&&Vu(b,S[0],S[1])?S=[]:R>2&&Vu(S[0],S[1],S[2])&&(S=[S[0]]),Cle(b,wa(S,1),[])}),g3=gHe||function(){return an.Date.now()};function LGe(b,S){if(typeof S!="function")throw new Cf(o);return b=Kn(b),function(){if(--b<1)return S.apply(this,arguments)}}function xce(b,S,R){return S=R?n:S,S=b&&S==null?b.length:S,n0(b,C,n,n,n,n,S)}function _ce(b,S){var R;if(typeof S!="function")throw new Cf(o);return b=Kn(b),function(){return--b>0&&(R=S.apply(this,arguments)),b<=1&&(S=n),R}}var $j=sr(function(b,S,R){var z=g;if(R.length){var X=ly(R,Uw($j));z|=E}return n0(b,z,S,R,X)}),wce=sr(function(b,S,R){var z=g|y;if(R.length){var X=ly(R,Uw(wce));z|=E}return n0(S,z,b,R,X)});function Ece(b,S,R){S=R?n:S;var z=n0(b,x,n,n,n,n,n,S);return z.placeholder=Ece.placeholder,z}function Sce(b,S,R){S=R?n:S;var z=n0(b,w,n,n,n,n,n,S);return z.placeholder=Sce.placeholder,z}function Tce(b,S,R){var z,X,re,fe,ve,Ie,tt=0,nt=!1,lt=!1,$t=!0;if(typeof b!="function")throw new Cf(o);S=Df(S)||0,As(R)&&(nt=!!R.leading,lt="maxWait"in R,re=lt?No(Df(R.maxWait)||0,S):re,$t="trailing"in R?!!R.trailing:$t);function Qt(Zs){var Fd=z,a0=X;return z=X=n,tt=Zs,fe=b.apply(a0,Fd),fe}function mn(Zs){return tt=Zs,ve=GC(pr,S),nt?Qt(Zs):fe}function tr(Zs){var Fd=Zs-Ie,a0=Zs-tt,Hce=S-Fd;return lt?Za(Hce,re-a0):Hce}function gn(Zs){var Fd=Zs-Ie,a0=Zs-tt;return Ie===n||Fd>=S||Fd<0||lt&&a0>=re}function pr(){var Zs=g3();if(gn(Zs))return Rr(Zs);ve=GC(pr,tr(Zs))}function Rr(Zs){return ve=n,$t&&z?Qt(Zs):(z=X=n,fe)}function Rc(){ve!==n&&$le(ve),tt=0,z=Ie=X=ve=n}function Hu(){return ve===n?fe:Rr(g3())}function Dc(){var Zs=g3(),Fd=gn(Zs);if(z=arguments,X=this,Ie=Zs,Fd){if(ve===n)return mn(Ie);if(lt)return $le(ve),ve=GC(pr,S),Qt(Ie)}return ve===n&&(ve=GC(pr,S)),fe}return Dc.cancel=Rc,Dc.flush=Hu,Dc}var FGe=sr(function(b,S){return ple(b,1,S)}),BGe=sr(function(b,S,R){return ple(b,Df(S)||0,R)});function jGe(b){return n0(b,N)}function y3(b,S){if(typeof b!="function"||S!=null&&typeof S!="function")throw new Cf(o);var R=function(){var z=arguments,X=S?S.apply(this,z):z[0],re=R.cache;if(re.has(X))return re.get(X);var fe=b.apply(this,z);return R.cache=re.set(X,fe)||re,fe};return R.cache=new(y3.Cache||e0),R}y3.Cache=e0;function v3(b){if(typeof b!="function")throw new Cf(o);return function(){var S=arguments;switch(S.length){case 0:return!b.call(this);case 1:return!b.call(this,S[0]);case 2:return!b.call(this,S[0],S[1]);case 3:return!b.call(this,S[0],S[1],S[2])}return!b.apply(this,S)}}function UGe(b){return _ce(2,b)}var zGe=Iqe(function(b,S){S=S.length==1&&Vn(S[0])?zi(S[0],yi(pn())):zi(wa(S,1),yi(pn()));var R=S.length;return sr(function(z){for(var X=-1,re=Za(z.length,R);++X<re;)z[X]=S[X].call(this,z[X]);return Qa(b,this,z)})}),Mj=sr(function(b,S){var R=ly(S,Uw(Mj));return n0(b,E,n,S,R)}),Cce=sr(function(b,S){var R=ly(S,Uw(Cce));return n0(b,T,n,S,R)}),VGe=r0(function(b,S){return n0(b,I,n,n,n,S)});function HGe(b,S){if(typeof b!="function")throw new Cf(o);return S=S===n?S:Kn(S),sr(b,S)}function qGe(b,S){if(typeof b!="function")throw new Cf(o);return S=S==null?0:No(Kn(S),0),sr(function(R){var z=R[S],X=py(R,0,S);return z&&Pd(X,z),Qa(b,this,X)})}function WGe(b,S,R){var z=!0,X=!0;if(typeof b!="function")throw new Cf(o);return As(R)&&(z="leading"in R?!!R.leading:z,X="trailing"in R?!!R.trailing:X),Tce(b,S,{leading:z,maxWait:S,trailing:X})}function GGe(b){return xce(b,1)}function YGe(b,S){return Mj(xj(S),b)}function KGe(){if(!arguments.length)return[];var b=arguments[0];return Vn(b)?b:[b]}function XGe(b){return If(b,h)}function QGe(b,S){return S=typeof S=="function"?S:n,If(b,h,S)}function JGe(b){return If(b,f|h)}function ZGe(b,S){return S=typeof S=="function"?S:n,If(b,f|h,S)}function eYe(b,S){return S==null||hle(b,S,Zo(S))}function Ld(b,S){return b===S||b!==b&&S!==S}var tYe=c3(uj),nYe=c3(function(b,S){return b>=S}),vb=ble(function(){return arguments}())?ble:function(b){return $s(b)&&Ei.call(b,"callee")&&!sle.call(b,"callee")},Vn=je.isArray,rYe=Xm?yi(Xm):fqe;function Il(b){return b!=null&&b3(b.length)&&!s0(b)}function Js(b){return $s(b)&&Il(b)}function iYe(b){return b===!0||b===!1||$s(b)&&zu(b)==ce}var my=vHe||Gj,sYe=Qm?yi(Qm):dqe;function oYe(b){return $s(b)&&b.nodeType===1&&!YC(b)}function aYe(b){if(b==null)return!0;if(Il(b)&&(Vn(b)||typeof b=="string"||typeof b.splice=="function"||my(b)||zw(b)||vb(b)))return!b.length;var S=eu(b);if(S==Ze||S==Dt)return!b.size;if(WC(b))return!fj(b).length;for(var R in b)if(Ei.call(b,R))return!1;return!0}function uYe(b,S){return VC(b,S)}function lYe(b,S,R){R=typeof R=="function"?R:n;var z=R?R(b,S):n;return z===n?VC(b,S,n,R):!!z}function Lj(b){if(!$s(b))return!1;var S=zu(b);return S==et||S==Oe||typeof b.message=="string"&&typeof b.name=="string"&&!YC(b)}function cYe(b){return typeof b=="number"&&ale(b)}function s0(b){if(!As(b))return!1;var S=zu(b);return S==Re||S==St||S==we||S==st}function Ace(b){return typeof b=="number"&&b==Kn(b)}function b3(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=K}function As(b){var S=typeof b;return b!=null&&(S=="object"||S=="function")}function $s(b){return b!=null&&typeof b=="object"}var Ice=sb?yi(sb):pqe;function fYe(b,S){return b===S||cj(b,S,Aj(S))}function dYe(b,S,R){return R=typeof R=="function"?R:n,cj(b,S,Aj(S),R)}function hYe(b){return kce(b)&&b!=+b}function pYe(b){if(Qqe(b))throw new Fn(s);return xle(b)}function mYe(b){return b===null}function gYe(b){return b==null}function kce(b){return typeof b=="number"||$s(b)&&zu(b)==It}function YC(b){if(!$s(b)||zu(b)!=Ce)return!1;var S=WP(b);if(S===null)return!0;var R=Ei.call(S,"constructor")&&S.constructor;return typeof R=="function"&&R instanceof R&&zP.call(R)==dHe}var Fj=PC?yi(PC):mqe;function yYe(b){return Ace(b)&&b>=-9007199254740991&&b<=K}var Rce=ob?yi(ob):gqe;function x3(b){return typeof b=="string"||!Vn(b)&&$s(b)&&zu(b)==Je}function kc(b){return typeof b=="symbol"||$s(b)&&zu(b)==_e}var zw=OP?yi(OP):yqe;function vYe(b){return b===n}function bYe(b){return $s(b)&&eu(b)==Rt}function xYe(b){return $s(b)&&zu(b)==Ee}var _Ye=c3(dj),wYe=c3(function(b,S){return b<=S});function Dce(b){if(!b)return[];if(Il(b))return x3(b)?$d(b):Al(b);if($C&&b[$C])return eHe(b[$C]());var S=eu(b),R=S==Ze?Z9:S==Dt?BP:Vw;return R(b)}function o0(b){if(!b)return b===0?b:0;if(b=Df(b),b===Y||b===-1/0){var S=b<0?-1:1;return S*J}return b===b?b:0}function Kn(b){var S=o0(b),R=S%1;return S===S?R?S-R:S:0}function Nce(b){return b?pb(Kn(b),0,U):0}function Df(b){if(typeof b=="number")return b;if(kc(b))return F;if(As(b)){var S=typeof b.valueOf=="function"?b.valueOf():b;b=As(S)?S+"":S}if(typeof b!="string")return b===0?b:+b;b=kr(b);var R=On.test(b);return R||ui.test(b)?ir(b.slice(2),R?2:8):ur.test(b)?F:+b}function Pce(b){return ip(b,kl(b))}function EYe(b){return b?pb(Kn(b),-9007199254740991,K):b===0?b:0}function vi(b){return b==null?"":Ic(b)}var SYe=Bw(function(b,S){if(WC(S)||Il(S)){ip(S,Zo(S),b);return}for(var R in S)Ei.call(S,R)&&jC(b,R,S[R])}),Oce=Bw(function(b,S){ip(S,kl(S),b)}),_3=Bw(function(b,S,R,z){ip(S,kl(S),b,z)}),TYe=Bw(function(b,S,R,z){ip(S,Zo(S),b,z)}),CYe=r0(sj);function AYe(b,S){var R=Fw(b);return S==null?R:dle(R,S)}var IYe=sr(function(b,S){b=Vi(b);var R=-1,z=S.length,X=z>2?S[2]:n;for(X&&Vu(S[0],S[1],X)&&(z=1);++R<z;)for(var re=S[R],fe=kl(re),ve=-1,Ie=fe.length;++ve<Ie;){var tt=fe[ve],nt=b[tt];(nt===n||Ld(nt,$w[tt])&&!Ei.call(b,tt))&&(b[tt]=re[tt])}return b}),kYe=sr(function(b){return b.push(n,Qle),Qa($ce,n,b)});function RYe(b,S){return Ja(b,pn(S,3),rp)}function DYe(b,S){return Ja(b,pn(S,3),aj)}function NYe(b,S){return b==null?b:oj(b,pn(S,3),kl)}function PYe(b,S){return b==null?b:yle(b,pn(S,3),kl)}function OYe(b,S){return b&&rp(b,pn(S,3))}function $Ye(b,S){return b&&aj(b,pn(S,3))}function MYe(b){return b==null?[]:n3(b,Zo(b))}function LYe(b){return b==null?[]:n3(b,kl(b))}function Bj(b,S,R){var z=b==null?n:mb(b,S);return z===n?R:z}function FYe(b,S){return b!=null&&ece(b,S,aqe)}function jj(b,S){return b!=null&&ece(b,S,uqe)}var BYe=Wle(function(b,S,R){S!=null&&typeof S.toString!="function"&&(S=VP.call(S)),b[S]=R},zj(Rl)),jYe=Wle(function(b,S,R){S!=null&&typeof S.toString!="function"&&(S=VP.call(S)),Ei.call(b,S)?b[S].push(R):b[S]=[R]},pn),UYe=sr(zC);function Zo(b){return Il(b)?cle(b):fj(b)}function kl(b){return Il(b)?cle(b,!0):vqe(b)}function zYe(b,S){var R={};return S=pn(S,3),rp(b,function(z,X,re){t0(R,S(z,X,re),z)}),R}function VYe(b,S){var R={};return S=pn(S,3),rp(b,function(z,X,re){t0(R,X,S(z,X,re))}),R}var HYe=Bw(function(b,S,R){r3(b,S,R)}),$ce=Bw(function(b,S,R,z){r3(b,S,R,z)}),qYe=r0(function(b,S){var R={};if(b==null)return R;var z=!1;S=zi(S,function(re){return re=hy(re,b),z||(z=re.length>1),re}),ip(b,Tj(b),R),z&&(R=If(R,f|d|h,Bqe));for(var X=S.length;X--;)yj(R,S[X]);return R});function WYe(b,S){return Mce(b,v3(pn(S)))}var GYe=r0(function(b,S){return b==null?{}:xqe(b,S)});function Mce(b,S){if(b==null)return{};var R=zi(Tj(b),function(z){return[z]});return S=pn(S),Ale(b,R,function(z,X){return S(z,X[0])})}function YYe(b,S,R){S=hy(S,b);var z=-1,X=S.length;for(X||(X=1,b=n);++z<X;){var re=b==null?n:b[sp(S[z])];re===n&&(z=X,re=R),b=s0(re)?re.call(b):re}return b}function KYe(b,S,R){return b==null?b:HC(b,S,R)}function XYe(b,S,R,z){return z=typeof z=="function"?z:n,b==null?b:HC(b,S,R,z)}var Lce=Kle(Zo),Fce=Kle(kl);function QYe(b,S,R){var z=Vn(b),X=z||my(b)||zw(b);if(S=pn(S,4),R==null){var re=b&&b.constructor;X?R=z?new re:[]:As(b)?R=s0(re)?Fw(WP(b)):{}:R={}}return(X?Uu:rp)(b,function(fe,ve,Ie){return S(R,fe,ve,Ie)}),R}function JYe(b,S){return b==null?!0:yj(b,S)}function ZYe(b,S,R){return b==null?b:Nle(b,S,xj(R))}function eKe(b,S,R,z){return z=typeof z=="function"?z:n,b==null?b:Nle(b,S,xj(R),z)}function Vw(b){return b==null?[]:yo(b,Zo(b))}function tKe(b){return b==null?[]:yo(b,kl(b))}function nKe(b,S,R){return R===n&&(R=S,S=n),R!==n&&(R=Df(R),R=R===R?R:0),S!==n&&(S=Df(S),S=S===S?S:0),pb(Df(b),S,R)}function rKe(b,S,R){return S=o0(S),R===n?(R=S,S=0):R=o0(R),b=Df(b),lqe(b,S,R)}function iKe(b,S,R){if(R&&typeof R!="boolean"&&Vu(b,S,R)&&(S=R=n),R===n&&(typeof S=="boolean"?(R=S,S=n):typeof b=="boolean"&&(R=b,b=n)),b===n&&S===n?(b=0,S=1):(b=o0(b),S===n?(S=b,b=0):S=o0(S)),b>S){var z=b;b=S,S=z}if(R||b%1||S%1){var X=ule();return Za(b+X*(S-b+Ht("1e-"+((X+"").length-1))),S)}return pj(b,S)}var sKe=jw(function(b,S,R){return S=S.toLowerCase(),b+(R?Bce(S):S)});function Bce(b){return Uj(vi(b).toLowerCase())}function jce(b){return b=vi(b),b&&b.replace(Ar,KVe).replace(Dd,"")}function oKe(b,S,R){b=vi(b),S=Ic(S);var z=b.length;R=R===n?z:pb(Kn(R),0,z);var X=R;return R-=S.length,R>=0&&b.slice(R,X)==S}function aKe(b){return b=vi(b),b&&hs.test(b)?b.replace(Ps,XVe):b}function uKe(b){return b=vi(b),b&&ai.test(b)?b.replace(Qs,"\\$&"):b}var lKe=jw(function(b,S,R){return b+(R?"-":"")+S.toLowerCase()}),cKe=jw(function(b,S,R){return b+(R?" ":"")+S.toLowerCase()}),fKe=Vle("toLowerCase");function dKe(b,S,R){b=vi(b),S=Kn(S);var z=S?Pw(b):0;if(!S||z>=S)return b;var X=(S-z)/2;return l3(XP(X),R)+b+l3(KP(X),R)}function hKe(b,S,R){b=vi(b),S=Kn(S);var z=S?Pw(b):0;return S&&z<S?b+l3(S-z,R):b}function pKe(b,S,R){b=vi(b),S=Kn(S);var z=S?Pw(b):0;return S&&z<S?l3(S-z,R)+b:b}function mKe(b,S,R){return R||S==null?S=0:S&&(S=+S),wHe(vi(b).replace(Di,""),S||0)}function gKe(b,S,R){return(R?Vu(b,S,R):S===n)?S=1:S=Kn(S),mj(vi(b),S)}function yKe(){var b=arguments,S=vi(b[0]);return b.length<3?S:S.replace(b[1],b[2])}var vKe=jw(function(b,S,R){return b+(R?"_":"")+S.toLowerCase()});function bKe(b,S,R){return R&&typeof R!="number"&&Vu(b,S,R)&&(S=R=n),R=R===n?U:R>>>0,R?(b=vi(b),b&&(typeof S=="string"||S!=null&&!Fj(S))&&(S=Ic(S),!S&&Nw(b))?py($d(b),0,R):b.split(S,R)):[]}var xKe=jw(function(b,S,R){return b+(R?" ":"")+Uj(S)});function _Ke(b,S,R){return b=vi(b),R=R==null?0:pb(Kn(R),0,b.length),S=Ic(S),b.slice(R,R+S.length)==S}function wKe(b,S,R){var z=Z.templateSettings;R&&Vu(b,S,R)&&(S=n),b=vi(b),S=_3({},S,z,Xle);var X=_3({},S.imports,z.imports,Xle),re=Zo(X),fe=yo(X,re),ve,Ie,tt=0,nt=S.interpolate||Qr,lt="__p += '",$t=ej((S.escape||Qr).source+"|"+nt.source+"|"+(nt===Bu?dn:Qr).source+"|"+(S.evaluate||Qr).source+"|$","g"),Qt="//# sourceURL="+(Ei.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Aw+"]")+`
`;b.replace($t,function(gn,pr,Rr,Rc,Hu,Dc){return Rr||(Rr=Rc),lt+=b.slice(tt,Dc).replace(yr,QVe),pr&&(ve=!0,lt+=`' +
__e(`+pr+`) +
'`),Hu&&(Ie=!0,lt+=`';
`+Hu+`;
__p += '`),Rr&&(lt+=`' +
((__t = (`+Rr+`)) == null ? '' : __t) +
'`),tt=Dc+gn.length,gn}),lt+=`';
`;var mn=Ei.call(S,"variable")&&S.variable;if(!mn)lt=`with (obj) {
`+lt+`
}
`;else if(_t.test(mn))throw new Fn(a);lt=(Ie?lt.replace(gr,""):lt).replace(Xo,"$1").replace(ts,"$1;"),lt="function("+(mn||"obj")+`) {
`+(mn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(Ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+lt+`return __p
}`;var tr=zce(function(){return fi(re,Qt+"return "+lt).apply(n,fe)});if(tr.source=lt,Lj(tr))throw tr;return tr}function EKe(b){return vi(b).toLowerCase()}function SKe(b){return vi(b).toUpperCase()}function TKe(b,S,R){if(b=vi(b),b&&(R||S===n))return kr(b);if(!b||!(S=Ic(S)))return b;var z=$d(b),X=$d(S),re=Cl(z,X),fe=cb(z,X)+1;return py(z,re,fe).join("")}function CKe(b,S,R){if(b=vi(b),b&&(R||S===n))return b.slice(0,tle(b)+1);if(!b||!(S=Ic(S)))return b;var z=$d(b),X=cb(z,$d(S))+1;return py(z,0,X).join("")}function AKe(b,S,R){if(b=vi(b),b&&(R||S===n))return b.replace(Di,"");if(!b||!(S=Ic(S)))return b;var z=$d(b),X=Cl(z,$d(S));return py(z,X).join("")}function IKe(b,S){var R=k,z=P;if(As(S)){var X="separator"in S?S.separator:X;R="length"in S?Kn(S.length):R,z="omission"in S?Ic(S.omission):z}b=vi(b);var re=b.length;if(Nw(b)){var fe=$d(b);re=fe.length}if(R>=re)return b;var ve=R-Pw(z);if(ve<1)return z;var Ie=fe?py(fe,0,ve).join(""):b.slice(0,ve);if(X===n)return Ie+z;if(fe&&(ve+=Ie.length-ve),Fj(X)){if(b.slice(ve).search(X)){var tt,nt=Ie;for(X.global||(X=ej(X.source,vi(Zn.exec(X))+"g")),X.lastIndex=0;tt=X.exec(nt);)var lt=tt.index;Ie=Ie.slice(0,lt===n?ve:lt)}}else if(b.indexOf(Ic(X),ve)!=ve){var $t=Ie.lastIndexOf(X);$t>-1&&(Ie=Ie.slice(0,$t))}return Ie+z}function kKe(b){return b=vi(b),b&&Vr.test(b)?b.replace(ds,iHe):b}var RKe=jw(function(b,S,R){return b+(R?" ":"")+S.toUpperCase()}),Uj=Vle("toUpperCase");function Uce(b,S,R){return b=vi(b),S=R?n:S,S===n?ZVe(b)?aHe(b):Dw(b):b.match(S)||[]}var zce=sr(function(b,S){try{return Qa(b,n,S)}catch(R){return Lj(R)?R:new Fn(R)}}),DKe=r0(function(b,S){return Uu(S,function(R){R=sp(R),t0(b,R,$j(b[R],b))}),b});function NKe(b){var S=b==null?0:b.length,R=pn();return b=S?zi(b,function(z){if(typeof z[1]!="function")throw new Cf(o);return[R(z[0]),z[1]]}):[],sr(function(z){for(var X=-1;++X<S;){var re=b[X];if(Qa(re[0],this,z))return Qa(re[1],this,z)}})}function PKe(b){return iqe(If(b,f))}function zj(b){return function(){return b}}function OKe(b,S){return b==null||b!==b?S:b}var $Ke=qle(),MKe=qle(!0);function Rl(b){return b}function Vj(b){return _le(typeof b=="function"?b:If(b,f))}function LKe(b){return Ele(If(b,f))}function FKe(b,S){return Sle(b,If(S,f))}var BKe=sr(function(b,S){return function(R){return zC(R,b,S)}}),jKe=sr(function(b,S){return function(R){return zC(b,R,S)}});function Hj(b,S,R){var z=Zo(S),X=n3(S,z);R==null&&!(As(S)&&(X.length||!z.length))&&(R=S,S=b,b=this,X=n3(S,Zo(S)));var re=!(As(R)&&"chain"in R)||!!R.chain,fe=s0(b);return Uu(X,function(ve){var Ie=S[ve];b[ve]=Ie,fe&&(b.prototype[ve]=function(){var tt=this.__chain__;if(re||tt){var nt=b(this.__wrapped__),lt=nt.__actions__=Al(this.__actions__);return lt.push({func:Ie,args:arguments,thisArg:b}),nt.__chain__=tt,nt}return Ie.apply(b,Pd([this.value()],arguments))})}),b}function UKe(){return an._===this&&(an._=hHe),this}function qj(){}function zKe(b){return b=Kn(b),sr(function(S){return Tle(S,b)})}var VKe=wj(zi),HKe=wj(kw),qKe=wj(Rw);function Vce(b){return kj(b)?G(sp(b)):_qe(b)}function WKe(b){return function(S){return b==null?n:mb(b,S)}}var GKe=Gle(),YKe=Gle(!0);function Wj(){return[]}function Gj(){return!1}function KKe(){return{}}function XKe(){return""}function QKe(){return!0}function JKe(b,S){if(b=Kn(b),b<1||b>K)return[];var R=U,z=Za(b,U);S=pn(S),b-=U;for(var X=ci(z,S);++R<b;)S(R);return X}function ZKe(b){return Vn(b)?zi(b,sp):kc(b)?[b]:Al(lce(vi(b)))}function eXe(b){var S=++fHe;return vi(b)+S}var tXe=u3(function(b,S){return b+S},0),nXe=Ej("ceil"),rXe=u3(function(b,S){return b/S},1),iXe=Ej("floor");function sXe(b){return b&&b.length?t3(b,Rl,uj):n}function oXe(b,S){return b&&b.length?t3(b,pn(S,2),uj):n}function aXe(b){return j(b,Rl)}function uXe(b,S){return j(b,pn(S,2))}function lXe(b){return b&&b.length?t3(b,Rl,dj):n}function cXe(b,S){return b&&b.length?t3(b,pn(S,2),dj):n}var fXe=u3(function(b,S){return b*S},1),dXe=Ej("round"),hXe=u3(function(b,S){return b-S},0);function pXe(b){return b&&b.length?At(b,Rl):0}function mXe(b,S){return b&&b.length?At(b,pn(S,2)):0}return Z.after=LGe,Z.ary=xce,Z.assign=SYe,Z.assignIn=Oce,Z.assignInWith=_3,Z.assignWith=TYe,Z.at=CYe,Z.before=_ce,Z.bind=$j,Z.bindAll=DKe,Z.bindKey=wce,Z.castArray=KGe,Z.chain=yce,Z.chunk=iWe,Z.compact=sWe,Z.concat=oWe,Z.cond=NKe,Z.conforms=PKe,Z.constant=zj,Z.countBy=pGe,Z.create=AYe,Z.curry=Ece,Z.curryRight=Sce,Z.debounce=Tce,Z.defaults=IYe,Z.defaultsDeep=kYe,Z.defer=FGe,Z.delay=BGe,Z.difference=aWe,Z.differenceBy=uWe,Z.differenceWith=lWe,Z.drop=cWe,Z.dropRight=fWe,Z.dropRightWhile=dWe,Z.dropWhile=hWe,Z.fill=pWe,Z.filter=gGe,Z.flatMap=bGe,Z.flatMapDeep=xGe,Z.flatMapDepth=_Ge,Z.flatten=hce,Z.flattenDeep=mWe,Z.flattenDepth=gWe,Z.flip=jGe,Z.flow=$Ke,Z.flowRight=MKe,Z.fromPairs=yWe,Z.functions=MYe,Z.functionsIn=LYe,Z.groupBy=wGe,Z.initial=bWe,Z.intersection=xWe,Z.intersectionBy=_We,Z.intersectionWith=wWe,Z.invert=BYe,Z.invertBy=jYe,Z.invokeMap=SGe,Z.iteratee=Vj,Z.keyBy=TGe,Z.keys=Zo,Z.keysIn=kl,Z.map=m3,Z.mapKeys=zYe,Z.mapValues=VYe,Z.matches=LKe,Z.matchesProperty=FKe,Z.memoize=y3,Z.merge=HYe,Z.mergeWith=$ce,Z.method=BKe,Z.methodOf=jKe,Z.mixin=Hj,Z.negate=v3,Z.nthArg=zKe,Z.omit=qYe,Z.omitBy=WYe,Z.once=UGe,Z.orderBy=CGe,Z.over=VKe,Z.overArgs=zGe,Z.overEvery=HKe,Z.overSome=qKe,Z.partial=Mj,Z.partialRight=Cce,Z.partition=AGe,Z.pick=GYe,Z.pickBy=Mce,Z.property=Vce,Z.propertyOf=WKe,Z.pull=CWe,Z.pullAll=mce,Z.pullAllBy=AWe,Z.pullAllWith=IWe,Z.pullAt=kWe,Z.range=GKe,Z.rangeRight=YKe,Z.rearg=VGe,Z.reject=RGe,Z.remove=RWe,Z.rest=HGe,Z.reverse=Pj,Z.sampleSize=NGe,Z.set=KYe,Z.setWith=XYe,Z.shuffle=PGe,Z.slice=DWe,Z.sortBy=MGe,Z.sortedUniq=FWe,Z.sortedUniqBy=BWe,Z.split=bKe,Z.spread=qGe,Z.tail=jWe,Z.take=UWe,Z.takeRight=zWe,Z.takeRightWhile=VWe,Z.takeWhile=HWe,Z.tap=sGe,Z.throttle=WGe,Z.thru=p3,Z.toArray=Dce,Z.toPairs=Lce,Z.toPairsIn=Fce,Z.toPath=ZKe,Z.toPlainObject=Pce,Z.transform=QYe,Z.unary=GGe,Z.union=qWe,Z.unionBy=WWe,Z.unionWith=GWe,Z.uniq=YWe,Z.uniqBy=KWe,Z.uniqWith=XWe,Z.unset=JYe,Z.unzip=Oj,Z.unzipWith=gce,Z.update=ZYe,Z.updateWith=eKe,Z.values=Vw,Z.valuesIn=tKe,Z.without=QWe,Z.words=Uce,Z.wrap=YGe,Z.xor=JWe,Z.xorBy=ZWe,Z.xorWith=eGe,Z.zip=tGe,Z.zipObject=nGe,Z.zipObjectDeep=rGe,Z.zipWith=iGe,Z.entries=Lce,Z.entriesIn=Fce,Z.extend=Oce,Z.extendWith=_3,Hj(Z,Z),Z.add=tXe,Z.attempt=zce,Z.camelCase=sKe,Z.capitalize=Bce,Z.ceil=nXe,Z.clamp=nKe,Z.clone=XGe,Z.cloneDeep=JGe,Z.cloneDeepWith=ZGe,Z.cloneWith=QGe,Z.conformsTo=eYe,Z.deburr=jce,Z.defaultTo=OKe,Z.divide=rXe,Z.endsWith=oKe,Z.eq=Ld,Z.escape=aKe,Z.escapeRegExp=uKe,Z.every=mGe,Z.find=yGe,Z.findIndex=fce,Z.findKey=RYe,Z.findLast=vGe,Z.findLastIndex=dce,Z.findLastKey=DYe,Z.floor=iXe,Z.forEach=vce,Z.forEachRight=bce,Z.forIn=NYe,Z.forInRight=PYe,Z.forOwn=OYe,Z.forOwnRight=$Ye,Z.get=Bj,Z.gt=tYe,Z.gte=nYe,Z.has=FYe,Z.hasIn=jj,Z.head=pce,Z.identity=Rl,Z.includes=EGe,Z.indexOf=vWe,Z.inRange=rKe,Z.invoke=UYe,Z.isArguments=vb,Z.isArray=Vn,Z.isArrayBuffer=rYe,Z.isArrayLike=Il,Z.isArrayLikeObject=Js,Z.isBoolean=iYe,Z.isBuffer=my,Z.isDate=sYe,Z.isElement=oYe,Z.isEmpty=aYe,Z.isEqual=uYe,Z.isEqualWith=lYe,Z.isError=Lj,Z.isFinite=cYe,Z.isFunction=s0,Z.isInteger=Ace,Z.isLength=b3,Z.isMap=Ice,Z.isMatch=fYe,Z.isMatchWith=dYe,Z.isNaN=hYe,Z.isNative=pYe,Z.isNil=gYe,Z.isNull=mYe,Z.isNumber=kce,Z.isObject=As,Z.isObjectLike=$s,Z.isPlainObject=YC,Z.isRegExp=Fj,Z.isSafeInteger=yYe,Z.isSet=Rce,Z.isString=x3,Z.isSymbol=kc,Z.isTypedArray=zw,Z.isUndefined=vYe,Z.isWeakMap=bYe,Z.isWeakSet=xYe,Z.join=EWe,Z.kebabCase=lKe,Z.last=Rf,Z.lastIndexOf=SWe,Z.lowerCase=cKe,Z.lowerFirst=fKe,Z.lt=_Ye,Z.lte=wYe,Z.max=sXe,Z.maxBy=oXe,Z.mean=aXe,Z.meanBy=uXe,Z.min=lXe,Z.minBy=cXe,Z.stubArray=Wj,Z.stubFalse=Gj,Z.stubObject=KKe,Z.stubString=XKe,Z.stubTrue=QKe,Z.multiply=fXe,Z.nth=TWe,Z.noConflict=UKe,Z.noop=qj,Z.now=g3,Z.pad=dKe,Z.padEnd=hKe,Z.padStart=pKe,Z.parseInt=mKe,Z.random=iKe,Z.reduce=IGe,Z.reduceRight=kGe,Z.repeat=gKe,Z.replace=yKe,Z.result=YYe,Z.round=dXe,Z.runInContext=Te,Z.sample=DGe,Z.size=OGe,Z.snakeCase=vKe,Z.some=$Ge,Z.sortedIndex=NWe,Z.sortedIndexBy=PWe,Z.sortedIndexOf=OWe,Z.sortedLastIndex=$We,Z.sortedLastIndexBy=MWe,Z.sortedLastIndexOf=LWe,Z.startCase=xKe,Z.startsWith=_Ke,Z.subtract=hXe,Z.sum=pXe,Z.sumBy=mXe,Z.template=wKe,Z.times=JKe,Z.toFinite=o0,Z.toInteger=Kn,Z.toLength=Nce,Z.toLower=EKe,Z.toNumber=Df,Z.toSafeInteger=EYe,Z.toString=vi,Z.toUpper=SKe,Z.trim=TKe,Z.trimEnd=CKe,Z.trimStart=AKe,Z.truncate=IKe,Z.unescape=kKe,Z.uniqueId=eXe,Z.upperCase=RKe,Z.upperFirst=Uj,Z.each=vce,Z.eachRight=bce,Z.first=pce,Hj(Z,function(){var b={};return rp(Z,function(S,R){Ei.call(Z.prototype,R)||(b[R]=S)}),b}(),{chain:!1}),Z.VERSION=r,Uu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){Z[b].placeholder=Z}),Uu(["drop","take"],function(b,S){br.prototype[b]=function(R){R=R===n?1:No(Kn(R),0);var z=this.__filtered__&&!S?new br(this):this.clone();return z.__filtered__?z.__takeCount__=Za(R,z.__takeCount__):z.__views__.push({size:Za(R,U),type:b+(z.__dir__<0?"Right":"")}),z},br.prototype[b+"Right"]=function(R){return this.reverse()[b](R).reverse()}}),Uu(["filter","map","takeWhile"],function(b,S){var R=S+1,z=R==B||R==H;br.prototype[b]=function(X){var re=this.clone();return re.__iteratees__.push({iteratee:pn(X,3),type:R}),re.__filtered__=re.__filtered__||z,re}}),Uu(["head","last"],function(b,S){var R="take"+(S?"Right":"");br.prototype[b]=function(){return this[R](1).value()[0]}}),Uu(["initial","tail"],function(b,S){var R="drop"+(S?"":"Right");br.prototype[b]=function(){return this.__filtered__?new br(this):this[R](1)}}),br.prototype.compact=function(){return this.filter(Rl)},br.prototype.find=function(b){return this.filter(b).head()},br.prototype.findLast=function(b){return this.reverse().find(b)},br.prototype.invokeMap=sr(function(b,S){return typeof b=="function"?new br(this):this.map(function(R){return zC(R,b,S)})}),br.prototype.reject=function(b){return this.filter(v3(pn(b)))},br.prototype.slice=function(b,S){b=Kn(b);var R=this;return R.__filtered__&&(b>0||S<0)?new br(R):(b<0?R=R.takeRight(-b):b&&(R=R.drop(b)),S!==n&&(S=Kn(S),R=S<0?R.dropRight(-S):R.take(S-b)),R)},br.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},br.prototype.toArray=function(){return this.take(U)},rp(br.prototype,function(b,S){var R=/^(?:filter|find|map|reject)|While$/.test(S),z=/^(?:head|last)$/.test(S),X=Z[z?"take"+(S=="last"?"Right":""):S],re=z||/^find/.test(S);X&&(Z.prototype[S]=function(){var fe=this.__wrapped__,ve=z?[1]:arguments,Ie=fe instanceof br,tt=ve[0],nt=Ie||Vn(fe),lt=function(pr){var Rr=X.apply(Z,Pd([pr],ve));return z&&$t?Rr[0]:Rr};nt&&R&&typeof tt=="function"&&tt.length!=1&&(Ie=nt=!1);var $t=this.__chain__,Qt=!!this.__actions__.length,mn=re&&!$t,tr=Ie&&!Qt;if(!re&&nt){fe=tr?fe:new br(this);var gn=b.apply(fe,ve);return gn.__actions__.push({func:p3,args:[lt],thisArg:n}),new Af(gn,$t)}return mn&&tr?b.apply(this,ve):(gn=this.thru(lt),mn?z?gn.value()[0]:gn.value():gn)})}),Uu(["pop","push","shift","sort","splice","unshift"],function(b){var S=jP[b],R=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",z=/^(?:pop|shift)$/.test(b);Z.prototype[b]=function(){var X=arguments;if(z&&!this.__chain__){var re=this.value();return S.apply(Vn(re)?re:[],X)}return this[R](function(fe){return S.apply(Vn(fe)?fe:[],X)})}}),rp(br.prototype,function(b,S){var R=Z[S];if(R){var z=R.name+"";Ei.call(Lw,z)||(Lw[z]=[]),Lw[z].push({name:S,func:R})}}),Lw[a3(n,y).name]=[{name:"wrapper",func:n}],br.prototype.clone=kHe,br.prototype.reverse=RHe,br.prototype.value=DHe,Z.prototype.at=oGe,Z.prototype.chain=aGe,Z.prototype.commit=uGe,Z.prototype.next=lGe,Z.prototype.plant=fGe,Z.prototype.reverse=dGe,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=hGe,Z.prototype.first=Z.prototype.head,$C&&(Z.prototype[$C]=cGe),Z},Ow=uHe();wi?((wi.exports=Ow)._=Ow,li._=Ow):an._=Ow}).call(Jt)})(lF,lF.exports);var $fn=lF.exports;const Mfn="#/definitions/LibraryConfig",Lfn="http://json-schema.org/draft-07/schema#",Ffn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},horizontal:{description:"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"},withOther:{description:'Whether to render the checkboxes with an "other" option.',type:"boolean"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},description:{description:"A description of the library.",type:"string"},reference:{description:"The reference to the paper where the content of the library is based on.",type:"string"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},horizontal:{description:"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"},withOther:{description:'Whether to render the radios with an "other" option.',type:"boolean"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"},withDivider:{description:"Renders the response with a trailing divider.",type:"boolean"},withDontKnow:{description:`Renders the response with an option for "I don't know". This counts as a completed answer for the validation.`,type:"boolean"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},responseDividers:{description:"Whether to show the response dividers. Defaults to false.",type:"boolean"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Bfn={$ref:Mfn,$schema:Lfn,definitions:Ffn},K7e=new Wae;K7e.addSchema(Bfn);const jfn=K7e.getSchema("#/definitions/LibraryConfig");function X7e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?X7e(n,t):`$${t}.components.${n}`)}}function Q7e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return Q7e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=X7e(l,a),l}return r})}}function Ufn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;eC(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function zfn(e,t){let n=!1,r;try{r=S9.parse(e),n=jfn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function Vfn(e){const t=await(await fetch(`${Va}libraries/${e}/config.json`)).text();return zfn(t,e)}async function Hfn(e,t,n){const r=e.map(async s=>{const o=await Vfn(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(eC(a)){const u=$fn.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const J7e=new Wae;J7e.addSchema(Ofn);const P_e=J7e.getSchema("#/definitions/GlobalConfig"),Z7e=new Wae;Z7e.addSchema(Rfn);const O_e=Z7e.getSchema("#/definitions/StudyConfig");function qfn(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Wfn(e){const t=S9.parse(e),n=P_e(t),r=qfn(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...P_e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function eUe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):eUe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Gfn(e,t){const n=[],r=[];Ufn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;eC(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=Nke(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return eUe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Gae(e){let t=!1,n;try{n=S9.parse(e),t=O_e(n)}catch{t=!1}let r=O_e.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await Hfn(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=Q7e(n.sequence,o,r);const{errors:a,warnings:u}=Gfn(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function Yfn(e){const t=await(await fetch(`${Va}${e}`)).text();return await Gae(t)}async function Yae(e,t){const n=t.configsList.find(r=>BAe(r)===e);if(n){const r=t.configs[n];return await Yfn(`${r.path}`)}return null}async function Kfn(e){const t={},n=e.configsList.map(async i=>Yae(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Xfn({globalConfig:e}){const t=J_(),[n,r]=D.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";D.useEffect(()=>{if(t!=="__revisit-widget")return Yae(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&Gae(m.data.payload).then(async g=>{r(g);const y=await s_e(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=D.useState([]),[a,u]=D.useState(null),{storageEngine:l}=ho(),[c]=Nv(),f=D.useMemo(()=>c.get("participantId"),[c]);D.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await s_e(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(I=>""),x=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:x.ip},E=await l.initializeParticipantSession(t,y,n,w,f||g),T=await l.getModes(t),C=await ovt(t,n,E.sequence,w,E.answers,T,E.participantId);u(C),o([{element:_.jsx(Gon,{}),children:[{path:"/",element:_.jsx(Jje,{to:oh(0),replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Vs,{order:2,mb:8,children:"Error loading config"}),_.jsx(j4,{issues:n.errors,type:"error"})]}):_.jsx(Ron,{})}]}])}p()},[l,n,t,c,f]);const d=RAe(s);let h=null;return i?s.length===0?h=_.jsx(uf,{visible:!0}):h=d&&a?_.jsx(Mke.Provider,{value:a,children:_.jsx(n1t,{store:a.store,children:d})}):_.jsx(j1,{}):h=_.jsx(j1,{}),h}function R6({studyIds:e}){const t=Rm(),{studyId:n}=am(),r=Dv(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return _.jsx($i.Header,{p:"md",children:_.jsxs(qc,{mt:-7,align:"center",children:[_.jsx(qc.Col,{span:6,children:_.jsxs(qt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[_.jsx(Rv,{w:40,src:`${Va}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Zc,{w:"md"}),_.jsx(Vs,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(qc.Col,{span:6,children:_.jsxs(qt,{justify:"flex-end",direction:"row",children:[s&&_.jsx(T2,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),_.jsx(MAe,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function tUe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=cQ(!1),[a,u]=D.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;gne(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(_r,{style:{gap:n},children:[_.jsx(qi,{label:"Download all participants data as JSON",children:_.jsx(ln,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(Ict,{})})}),_.jsx(qi,{label:"Download all participants data as a tidy CSV",children:_.jsx(ln,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(LAe,{})})})]}),i&&a.length>0&&_.jsx(WMt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var $_e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nUe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Qfn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Kae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nUe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Qfn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Jfn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Jfn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zfn=function(e){const t=nUe(e);return Kae.encodeByteArray(t,!0)},cF=function(e){return Zfn(e).replace(/\./g,"")},rUe=function(e){try{return Kae.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iUe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const edn=()=>iUe().__FIREBASE_DEFAULTS__,tdn=()=>{if(typeof process>"u"||typeof $_e>"u")return;const e=$_e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ndn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rUe(e[1]);return t&&JSON.parse(t)},R9=()=>{try{return edn()||tdn()||ndn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sUe=e=>{var t,n;return(n=(t=R9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},rdn=e=>{const t=sUe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},oUe=()=>{var e;return(e=R9())===null||e===void 0?void 0:e.config},aUe=e=>{var t;return(t=R9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function idn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[cF(JSON.stringify(n)),cF(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sdn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wa())}function odn(){var e;const t=(e=R9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function adn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function udn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ldn(){const e=Wa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function cdn(){return!odn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xae(){try{return typeof indexedDB=="object"}catch{return!1}}function fdn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ddn="FirebaseError";class Gm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ddn,Object.setPrototypeOf(this,Gm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,TC.prototype.create)}}class TC{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?hdn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gm(i,a,r)}}function hdn(e,t){return e.replace(pdn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const pdn=/\{\$([^}]+)}/g;function mdn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xD(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(M_e(s)&&M_e(o)){if(!xD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function M_e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function gdn(e,t){const n=new ydn(e,t);return n.subscribe.bind(n)}class ydn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vdn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=sH),i.error===void 0&&(i.error=sH),i.complete===void 0&&(i.complete=sH);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vdn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function sH(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bdn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xdn=1e3,_dn=2,wdn=4*60*60*1e3,Edn=.5;function Sdn(e,t=xdn,n=_dn){const r=t*Math.pow(n,e),i=Math.round(Edn*r*(Math.random()-.5)*2);return Math.min(wdn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}class Em{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tdn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new bD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Adn(t))try{this.getOrInitializeService({instanceIdentifier:Gb})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Gb){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gb){return this.instances.has(t)}getOptions(t=Gb){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cdn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Gb){return this.component?this.component.multipleInstances?t:Gb:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cdn(e){return e===Gb?void 0:e}function Adn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Idn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Tdn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Pr||(Pr={}));const kdn={debug:Pr.DEBUG,verbose:Pr.VERBOSE,info:Pr.INFO,warn:Pr.WARN,error:Pr.ERROR,silent:Pr.SILENT},Rdn=Pr.INFO,Ddn={[Pr.DEBUG]:"log",[Pr.VERBOSE]:"log",[Pr.INFO]:"info",[Pr.WARN]:"warn",[Pr.ERROR]:"error"},Ndn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Ddn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class D9{constructor(t){this.name=t,this._logLevel=Rdn,this._logHandler=Ndn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?kdn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pr.DEBUG,...t),this._logHandler(this,Pr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pr.VERBOSE,...t),this._logHandler(this,Pr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pr.INFO,...t),this._logHandler(this,Pr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pr.WARN,...t),this._logHandler(this,Pr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pr.ERROR,...t),this._logHandler(this,Pr.ERROR,...t)}}const Pdn=(e,t)=>t.some(n=>e instanceof n);let L_e,F_e;function Odn(){return L_e||(L_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $dn(){return F_e||(F_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uUe=new WeakMap,FK=new WeakMap,lUe=new WeakMap,oH=new WeakMap,Qae=new WeakMap;function Mdn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(R1(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&uUe.set(n,e)}).catch(()=>{}),Qae.set(t,e),t}function Ldn(e){if(FK.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});FK.set(e,t)}let BK={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return FK.get(e);if(t==="objectStoreNames")return e.objectStoreNames||lUe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return R1(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Fdn(e){BK=e(BK)}function Bdn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(aH(this),t,...n);return lUe.set(r,t.sort?t.sort():[t]),R1(r)}:$dn().includes(e)?function(...t){return e.apply(aH(this),t),R1(uUe.get(this))}:function(...t){return R1(e.apply(aH(this),t))}}function jdn(e){return typeof e=="function"?Bdn(e):(e instanceof IDBTransaction&&Ldn(e),Pdn(e,Odn())?new Proxy(e,BK):e)}function R1(e){if(e instanceof IDBRequest)return Mdn(e);if(oH.has(e))return oH.get(e);const t=jdn(e);return t!==e&&(oH.set(e,t),Qae.set(t,e)),t}const aH=e=>Qae.get(e);function Udn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=R1(o);return r&&o.addEventListener("upgradeneeded",u=>{r(R1(o.result),u.oldVersion,u.newVersion,R1(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const zdn=["get","getKey","getAll","getAllKeys","count"],Vdn=["put","add","delete","clear"],uH=new Map;function B_e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(uH.get(t))return uH.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vdn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zdn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return uH.set(t,s),s}Fdn(e=>({...e,get:(t,n,r)=>B_e(t,n)||e.get(t,n,r),has:(t,n)=>!!B_e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hdn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qdn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qdn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const jK="@firebase/app",j_e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new D9("@firebase/app"),Wdn="@firebase/app-compat",Gdn="@firebase/analytics-compat",Ydn="@firebase/analytics",Kdn="@firebase/app-check-compat",Xdn="@firebase/app-check",Qdn="@firebase/auth",Jdn="@firebase/auth-compat",Zdn="@firebase/database",ehn="@firebase/database-compat",thn="@firebase/functions",nhn="@firebase/functions-compat",rhn="@firebase/installations",ihn="@firebase/installations-compat",shn="@firebase/messaging",ohn="@firebase/messaging-compat",ahn="@firebase/performance",uhn="@firebase/performance-compat",lhn="@firebase/remote-config",chn="@firebase/remote-config-compat",fhn="@firebase/storage",dhn="@firebase/storage-compat",hhn="@firebase/firestore",phn="@firebase/vertexai-preview",mhn="@firebase/firestore-compat",ghn="firebase",yhn="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK="[DEFAULT]",vhn={[jK]:"fire-core",[Wdn]:"fire-core-compat",[Ydn]:"fire-analytics",[Gdn]:"fire-analytics-compat",[Xdn]:"fire-app-check",[Kdn]:"fire-app-check-compat",[Qdn]:"fire-auth",[Jdn]:"fire-auth-compat",[Zdn]:"fire-rtdb",[ehn]:"fire-rtdb-compat",[thn]:"fire-fn",[nhn]:"fire-fn-compat",[rhn]:"fire-iid",[ihn]:"fire-iid-compat",[shn]:"fire-fcm",[ohn]:"fire-fcm-compat",[ahn]:"fire-perf",[uhn]:"fire-perf-compat",[lhn]:"fire-rc",[chn]:"fire-rc-compat",[fhn]:"fire-gcs",[dhn]:"fire-gcs-compat",[hhn]:"fire-fst",[mhn]:"fire-fst-compat",[phn]:"fire-vertex","fire-js":"fire-js",[ghn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=new Map,bhn=new Map,zK=new Map;function U_e(e,t){try{e.container.addComponent(t)}catch(n){I_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Dg(e){const t=e.name;if(zK.has(t))return I_.debug(`There were multiple attempts to register component ${t}.`),!1;zK.set(t,e);for(const n of fF.values())U_e(n,e);for(const n of bhn.values())U_e(n,e);return!0}function CC(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Up(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xhn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},D1=new TC("app","Firebase",xhn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _hn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Em("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw D1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=yhn;function cUe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:UK,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw D1.create("bad-app-name",{appName:String(i)});if(n||(n=oUe()),!n)throw D1.create("no-options");const s=fF.get(i);if(s){if(xD(n,s.options)&&xD(r,s.config))return s;throw D1.create("duplicate-app",{appName:i})}const o=new Idn(i);for(const u of zK.values())o.addComponent(u);const a=new _hn(n,r,o);return fF.set(i,a),a}function Jae(e=UK){const t=fF.get(e);if(!t&&e===UK&&oUe())return cUe();if(!t)throw D1.create("no-app",{appName:e});return t}function kh(e,t,n){var r;let i=(r=vhn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),I_.warn(a.join(" "));return}Dg(new Em(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const whn="firebase-heartbeat-database",Ehn=1,_D="firebase-heartbeat-store";let lH=null;function fUe(){return lH||(lH=Udn(whn,Ehn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(_D)}catch(n){console.warn(n)}}}}).catch(e=>{throw D1.create("idb-open",{originalErrorMessage:e.message})})),lH}async function Shn(e){try{const n=(await fUe()).transaction(_D),r=await n.objectStore(_D).get(dUe(e));return await n.done,r}catch(t){if(t instanceof Gm)I_.warn(t.message);else{const n=D1.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});I_.warn(n.message)}}}async function z_e(e,t){try{const r=(await fUe()).transaction(_D,"readwrite");await r.objectStore(_D).put(t,dUe(e)),await r.done}catch(n){if(n instanceof Gm)I_.warn(n.message);else{const r=D1.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});I_.warn(r.message)}}}function dUe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Thn=1024,Chn=30*24*60*60*1e3;class Ahn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new khn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=V_e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Chn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V_e(),{heartbeatsToSend:r,unsentEntries:i}=Ihn(this._heartbeatsCache.heartbeats),s=cF(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function V_e(){return new Date().toISOString().substring(0,10)}function Ihn(e,t=Thn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),H_e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H_e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class khn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xae()?fdn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Shn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return z_e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return z_e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function H_e(e){return cF(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rhn(e){Dg(new Em("platform-logger",t=>new Hdn(t),"PRIVATE")),Dg(new Em("heartbeat",t=>new Ahn(t),"PRIVATE")),kh(jK,j_e,e),kh(jK,j_e,"esm2017"),kh("fire-js","")}Rhn("");function hUe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dhn=hUe,pUe=new TC("auth","Firebase",hUe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new D9("@firebase/auth");function Nhn(e,...t){dF.logLevel<=Pr.WARN&&dF.warn(`Auth (${xw}): ${e}`,...t)}function D6(e,...t){dF.logLevel<=Pr.ERROR&&dF.error(`Auth (${xw}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(e,...t){throw eue(e,...t)}function Rh(e,...t){return eue(e,...t)}function Zae(e,t,n){const r=Object.assign(Object.assign({},Dhn()),{[t]:n});return new TC("auth","Firebase",r).create(t,{appName:e.name})}function N1(e){return Zae(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Phn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Sm(e,"argument-error"),Zae(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function eue(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return pUe.create(e,...t)}function Dn(e,t,...n){if(!e)throw eue(t,...n)}function V0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw D6(t),new Error(t)}function Ng(e,t){e||V0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VK(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Ohn(){return q_e()==="http:"||q_e()==="https:"}function q_e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $hn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ohn()||adn()||"connection"in navigator)?navigator.onLine:!0}function Mhn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ng(n>t,"Short delay should be less than long delay!"),this.isMobile=sdn()||udn()}get(){return $hn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tue(e,t){Ng(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mUe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;V0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;V0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;V0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lhn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fhn=new vP(3e4,6e4);function N9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function AC(e,t,n,r,i={}){return gUe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=yP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),mUe.fetch()(vUe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function gUe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Lhn),t);try{const i=new Bhn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw n4(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw n4(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw n4(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw n4(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Zae(e,c,l);Sm(e,c)}}catch(i){if(i instanceof Gm)throw i;Sm(e,"network-request-failed",{message:String(i)})}}async function yUe(e,t,n,r,i={}){const s=await AC(e,t,n,r,i);return"mfaPendingCredential"in s&&Sm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function vUe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?tue(e.config,i):`${e.config.apiScheme}://${i}`}class Bhn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rh(this.auth,"network-request-failed")),Fhn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function n4(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rh(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jhn(e,t){return AC(e,"POST","/v1/accounts:delete",t)}async function bUe(e,t){return AC(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Uhn(e,t=!1){const n=es(e),r=await n.getIdToken(t),i=nue(r);Dn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$k(cH(i.auth_time)),issuedAtTime:$k(cH(i.iat)),expirationTime:$k(cH(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cH(e){return Number(e)*1e3}function nue(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return D6("JWT malformed, contained fewer than 3 sections"),null;try{const i=rUe(n);return i?JSON.parse(i):(D6("Failed to decode base64 JWT payload"),null)}catch(i){return D6("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function W_e(e){const t=nue(e);return Dn(t,"internal-error"),Dn(typeof t.exp<"u","internal-error"),Dn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Gm&&zhn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function zhn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vhn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$k(this.lastLoginAt),this.creationTime=$k(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(e){var t;const n=e.auth,r=await e.getIdToken(),i=await wD(e,bUe(n,{idToken:r}));Dn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?xUe(s.providerUserInfo):[],a=qhn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new HK(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Hhn(e){const t=es(e);await hF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qhn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function xUe(e){return e.map(t=>{var{providerId:n}=t,r=jD(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Whn(e,t){const n=await gUe(e,{},async()=>{const r=yP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=vUe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mUe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ghn(e,t){return AC(e,"POST","/v2/accounts:revokeToken",N9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dn(t.idToken,"internal-error"),Dn(typeof t.idToken<"u","internal-error"),Dn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):W_e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Dn(t.length!==0,"internal-error");const n=W_e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Dn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Whn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new VS;return r&&(Dn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Dn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Dn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new VS,this.toJSON())}_performRefresh(){return V0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(e,t){Dn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class H0{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=jD(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vhn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new HK(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await wD(this,this.stsTokenManager.getToken(this.auth,t));return Dn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Uhn(this,t)}reload(){return Hhn(this)}_assign(t){this!==t&&(Dn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new H0(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Dn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await hF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Up(this.auth.app))return Promise.reject(N1(this.auth));const t=await this.getIdToken();return await wD(this,jhn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:C}=n;Dn(x&&C,t,"internal-error");const I=VS.fromJSON(this.name,C);Dn(typeof x=="string",t,"internal-error"),wy(f,t.name),wy(d,t.name),Dn(typeof w=="boolean",t,"internal-error"),Dn(typeof E=="boolean",t,"internal-error"),wy(h,t.name),wy(p,t.name),wy(m,t.name),wy(g,t.name),wy(y,t.name),wy(v,t.name);const N=new H0({uid:x,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(N.providerData=T.map(k=>Object.assign({},k))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(t,n,r=!1){const i=new VS;i.updateFromServerResponse(n);const s=new H0({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await hF(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Dn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?xUe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new VS;a.updateFromIdToken(r);const u=new H0({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new HK(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_e=new Map;function q0(e){Ng(e instanceof Function,"Expected a class definition");let t=G_e.get(e);return t?(Ng(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,G_e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ue{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}_Ue.type="NONE";const Y_e=_Ue;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(e,t,n){return`firebase:${e}:${t}:${n}`}class HS{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=N6(this.userKey,i.apiKey,s),this.fullPersistenceKey=N6("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?H0._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new HS(q0(Y_e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||q0(Y_e);const o=N6(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=H0._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new HS(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new HS(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(SUe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wUe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CUe(t))return"Blackberry";if(AUe(t))return"Webos";if(rue(t))return"Safari";if((t.includes("chrome/")||EUe(t))&&!t.includes("edge/"))return"Chrome";if(TUe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wUe(e=Wa()){return/firefox\//i.test(e)}function rue(e=Wa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function EUe(e=Wa()){return/crios\//i.test(e)}function SUe(e=Wa()){return/iemobile/i.test(e)}function TUe(e=Wa()){return/android/i.test(e)}function CUe(e=Wa()){return/blackberry/i.test(e)}function AUe(e=Wa()){return/webos/i.test(e)}function P9(e=Wa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Yhn(e=Wa()){var t;return P9(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Khn(){return ldn()&&document.documentMode===10}function IUe(e=Wa()){return P9(e)||TUe(e)||AUe(e)||CUe(e)||/windows phone/i.test(e)||SUe(e)}function Xhn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kUe(e,t=[]){let n;switch(e){case"Browser":n=K_e(Wa());break;case"Worker":n=`${K_e(Wa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${xw}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qhn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jhn(e,t={}){return AC(e,"GET","/v2/passwordPolicy",N9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zhn=6;class epn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Zhn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X_e(this),this.idTokenSubscription=new X_e(this),this.beforeStateQueue=new Qhn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pUe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=q0(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await HS.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await bUe(this,{idToken:t}),r=await H0._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Up(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Dn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await hF(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Mhn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Up(this.app))return Promise.reject(N1(this));const n=t?es(t):null;return n&&Dn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Dn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Up(this.app)?Promise.reject(N1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Up(this.app)?Promise.reject(N1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(q0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Jhn(this),n=new epn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new TC("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ghn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&q0(t)||this._popupRedirectResolver;Dn(n,this,"argument-error"),this.redirectPersistenceManager=await HS.create(this,[q0(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kUe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Nhn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bP(e){return es(e)}class X_e{constructor(t){this.auth=t,this.observer=null,this.addObserver=gdn(n=>this.observer=n)}get next(){return Dn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iue={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function npn(e){iue=e}function rpn(e){return iue.loadJS(e)}function ipn(){return iue.gapiScript}function spn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function opn(e,t){const n=CC(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xD(s,t??{}))return i;Sm(i,"already-initialized")}return n.initialize({options:t})}function apn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(q0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function upn(e,t,n){const r=bP(e);Dn(r._canInitEmulator,r,"emulator-config-failed"),Dn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=RUe(t),{host:o,port:a}=lpn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),cpn()}function RUe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function lpn(e){const t=RUe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Q_e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Q_e(o)}}}function Q_e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function cpn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DUe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return V0("not implemented")}_getIdTokenResponse(t){return V0("not implemented")}_linkToIdToken(t,n){return V0("not implemented")}_getReauthenticationResolver(t){return V0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(e,t){return yUe(e,"POST","/v1/accounts:signInWithIdp",N9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fpn="http://localhost";class k_ extends DUe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new k_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Sm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=jD(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new k_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return qS(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,qS(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qS(t,n)}buildRequest(){const t={requestUri:fpn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=yP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sue{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP extends sue{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends xP{constructor(){super("facebook.com")}static credential(t){return k_._fromParams({providerId:Wy.PROVIDER_ID,signInMethod:Wy.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wy.credentialFromTaggedObject(t)}static credentialFromError(t){return Wy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wy.credential(t.oauthAccessToken)}catch{return null}}}Wy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends xP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return k_._fromParams({providerId:D0.PROVIDER_ID,signInMethod:D0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return D0.credentialFromTaggedObject(t)}static credentialFromError(t){return D0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return D0.credential(n,r)}catch{return null}}}D0.GOOGLE_SIGN_IN_METHOD="google.com";D0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends xP{constructor(){super("github.com")}static credential(t){return k_._fromParams({providerId:Gy.PROVIDER_ID,signInMethod:Gy.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gy.credentialFromTaggedObject(t)}static credentialFromError(t){return Gy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gy.credential(t.oauthAccessToken)}catch{return null}}}Gy.GITHUB_SIGN_IN_METHOD="github.com";Gy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends xP{constructor(){super("twitter.com")}static credential(t,n){return k_._fromParams({providerId:Yy.PROVIDER_ID,signInMethod:Yy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Yy.credentialFromTaggedObject(t)}static credentialFromError(t){return Yy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Yy.credential(n,r)}catch{return null}}}Yy.TWITTER_SIGN_IN_METHOD="twitter.com";Yy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dpn(e,t){return yUe(e,"POST","/v1/accounts:signUp",N9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await H0._fromIdTokenResponse(t,r,i),o=J_e(r);return new yv({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=J_e(r);return new yv({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function J_e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hpn(e){var t;if(Up(e.app))return Promise.reject(N1(e));const n=bP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new yv({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await dpn(n,{returnSecureToken:!0}),i=await yv._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF extends Gm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,pF.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new pF(t,n,r,i)}}function NUe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pF._fromErrorAndOperation(e,s,t,r):s})}async function ppn(e,t,n=!1){const r=await wD(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yv._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mpn(e,t,n=!1){const{auth:r}=e;if(Up(r.app))return Promise.reject(N1(r));const i="reauthenticate";try{const s=await wD(e,NUe(r,i,t,e),n);Dn(s.idToken,r,"internal-error");const o=nue(s.idToken);Dn(o,r,"internal-error");const{sub:a}=o;return Dn(e.uid===a,r,"user-mismatch"),yv._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gpn(e,t,n=!1){if(Up(e.app))return Promise.reject(N1(e));const r="signIn",i=await NUe(e,r,t),s=await yv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function ypn(e,t,n,r){return es(e).onIdTokenChanged(t,n,r)}function vpn(e,t,n){return es(e).beforeAuthStateChanged(t,n)}function bpn(e,t,n,r){return es(e).onAuthStateChanged(t,n,r)}function xpn(e){return es(e).signOut()}const mF="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PUe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mF,"1"),this.storage.removeItem(mF),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pn(){const e=Wa();return rue(e)||P9(e)}const wpn=1e3,Epn=10;class OUe extends PUe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_pn()&&Xhn(),this.fallbackToPolling=IUe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Khn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Epn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},wpn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}OUe.type="LOCAL";const Spn=OUe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ue extends PUe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$Ue.type="SESSION";const MUe=$Ue;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tpn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new O9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Tpn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}O9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oue(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cpn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=oue("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(){return window}function Apn(e){rm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LUe(){return typeof rm().WorkerGlobalScope<"u"&&typeof rm().importScripts=="function"}async function Ipn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kpn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Rpn(){return LUe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FUe="firebaseLocalStorageDb",Dpn=1,gF="firebaseLocalStorage",BUe="fbase_key";class _P{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $9(e,t){return e.transaction([gF],t?"readwrite":"readonly").objectStore(gF)}function Npn(){const e=indexedDB.deleteDatabase(FUe);return new _P(e).toPromise()}function qK(){const e=indexedDB.open(FUe,Dpn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(gF,{keyPath:BUe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(gF)?t(r):(r.close(),await Npn(),t(await qK()))})})}async function Z_e(e,t,n){const r=$9(e,!0).put({[BUe]:t,value:n});return new _P(r).toPromise()}async function Ppn(e,t){const n=$9(e,!1).get(t),r=await new _P(n).toPromise();return r===void 0?null:r.value}function ewe(e,t){const n=$9(e,!0).delete(t);return new _P(n).toPromise()}const Opn=800,$pn=3;class jUe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qK(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>$pn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LUe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O9._getInstance(Rpn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Ipn(),!this.activeServiceWorker)return;this.sender=new Cpn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kpn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qK();return await Z_e(t,mF,"1"),await ewe(t,mF),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Z_e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Ppn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ewe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=$9(i,!1).getAll();return new _P(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Opn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jUe.type="LOCAL";const Mpn=jUe;new vP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UUe(e,t){return t?q0(t):(Dn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aue extends DUe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qS(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qS(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qS(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Lpn(e){return gpn(e.auth,new aue(e),e.bypassAuthState)}function Fpn(e){const{auth:t,user:n}=e;return Dn(n,t,"internal-error"),mpn(n,new aue(e),e.bypassAuthState)}async function Bpn(e){const{auth:t,user:n}=e;return Dn(n,t,"internal-error"),ppn(n,new aue(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zUe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Lpn;case"linkViaPopup":case"linkViaRedirect":return Bpn;case"reauthViaPopup":case"reauthViaRedirect":return Fpn;default:Sm(this.auth,"internal-error")}}resolve(t){Ng(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ng(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jpn=new vP(2e3,1e4);async function Upn(e,t,n){if(Up(e.app))return Promise.reject(Rh(e,"operation-not-supported-in-this-environment"));const r=bP(e);Phn(e,t,sue);const i=UUe(r,n);return new Cx(r,"signInViaPopup",t,i).executeNotNull()}class Cx extends zUe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Cx.currentPopupAction&&Cx.currentPopupAction.cancel(),Cx.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dn(t,this.auth,"internal-error"),t}async onExecution(){Ng(this.filter.length===1,"Popup operations only handle one event");const t=oue();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Rh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cx.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jpn.get())};t()}}Cx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpn="pendingRedirect",P6=new Map;class Vpn extends zUe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=P6.get(this.auth._key());if(!t){try{const r=await Hpn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}P6.set(this.auth._key(),t)}return this.bypassAuthState||P6.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hpn(e,t){const n=Gpn(t),r=Wpn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function qpn(e,t){P6.set(e._key(),t)}function Wpn(e){return q0(e._redirectPersistence)}function Gpn(e){return N6(zpn,e.config.apiKey,e.name)}async function Ypn(e,t,n=!1){if(Up(e.app))return Promise.reject(N1(e));const r=bP(e),i=UUe(r,t),o=await new Vpn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpn=10*60*1e3;class Xpn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Qpn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!VUe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rh(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Kpn&&this.cachedEventUids.clear(),this.cachedEventUids.has(twe(t))}saveEventToCache(t){this.cachedEventUids.add(twe(t)),this.lastProcessedEventTime=Date.now()}}function twe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function VUe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Qpn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VUe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jpn(e,t={}){return AC(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zpn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,emn=/^https?/;async function tmn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Jpn(e);for(const n of t)try{if(nmn(n))return}catch{}Sm(e,"unauthorized-domain")}function nmn(e){const t=VK(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!emn.test(n))return!1;if(Zpn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rmn=new vP(3e4,6e4);function nwe(){const e=rm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function imn(e){return new Promise((t,n)=>{var r,i,s;function o(){nwe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nwe(),n(Rh(e,"network-request-failed"))},timeout:rmn.get()})}if(!((i=(r=rm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=rm().gapi)===null||s===void 0)&&s.load)o();else{const a=spn("iframefcb");return rm()[a]=()=>{gapi.load?o():n(Rh(e,"network-request-failed"))},rpn(`${ipn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw O6=null,t})}let O6=null;function smn(e){return O6=O6||imn(e),O6}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const omn=new vP(5e3,15e3),amn="__/auth/iframe",umn="emulator/auth/iframe",lmn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cmn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fmn(e){const t=e.config;Dn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tue(t,umn):`https://${e.config.authDomain}/${amn}`,r={apiKey:t.apiKey,appName:e.name,v:xw},i=cmn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yP(r).slice(1)}`}async function dmn(e){const t=await smn(e),n=rm().gapi;return Dn(n,e,"internal-error"),t.open({where:document.body,url:fmn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lmn,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Rh(e,"network-request-failed"),a=rm().setTimeout(()=>{s(o)},omn.get());function u(){rm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hmn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pmn=500,mmn=600,gmn="_blank",ymn="http://localhost";class rwe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vmn(e,t,n,r=pmn,i=mmn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},hmn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Wa().toLowerCase();n&&(a=EUe(l)?gmn:n),wUe(l)&&(t=t||ymn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Yhn(l)&&a!=="_self")return bmn(t||"",a),new rwe(null);const f=window.open(t||"",a,c);Dn(f,e,"popup-blocked");try{f.focus()}catch{}return new rwe(f)}function bmn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xmn="__/auth/handler",_mn="emulator/auth/handler",wmn=encodeURIComponent("fac");async function iwe(e,t,n,r,i,s){Dn(e.config.authDomain,e,"auth-domain-config-required"),Dn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xw,eventId:i};if(t instanceof sue){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",mdn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof xP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${wmn}=${encodeURIComponent(u)}`:"";return`${Emn(e)}?${yP(a).slice(1)}${l}`}function Emn({config:e}){return e.emulator?tue(e,_mn):`https://${e.authDomain}/${xmn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH="webStorageSupport";class Smn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MUe,this._completeRedirectFn=Ypn,this._overrideRedirectResult=qpn}async _openPopup(t,n,r,i){var s;Ng((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await iwe(t,n,r,VK(),i);return vmn(t,o,oue())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await iwe(t,n,r,VK(),i);return Apn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ng(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await dmn(t),r=new Xpn(t);return n.register("authEvent",i=>(Dn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(fH,{type:fH},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fH];o!==void 0&&n(!!o),Sm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tmn(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return IUe()||rue()||P9()}}const HUe=Smn;var swe="@firebase/auth",owe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tmn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Dn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cmn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Amn(e){Dg(new Em("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Dn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kUe(e)},l=new tpn(r,i,s,u);return apn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Dg(new Em("auth-internal",t=>{const n=bP(t.getProvider("auth").getImmediate());return(r=>new Tmn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kh(swe,owe,Cmn(e)),kh(swe,owe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Imn=5*60,kmn=aUe("authIdTokenMaxAge")||Imn;let awe=null;const Rmn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kmn)return;const i=n==null?void 0:n.token;awe!==i&&(awe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yF(e=Jae()){const t=CC(e,"auth");if(t.isInitialized())return t.getImmediate();const n=opn(e,{popupRedirectResolver:HUe,persistence:[Mpn,Spn,MUe]}),r=aUe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Rmn(s.toString());vpn(n,o,()=>o(n.currentUser)),ypn(n,a=>o(a))}}const i=sUe("auth");return i&&upn(n,`http://${i}`),n}function Dmn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}npn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Rh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Dmn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Amn("Browser");var Nmn="firebase",Pmn="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kh(Nmn,Pmn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qUe="firebasestorage.googleapis.com",WUe="storageBucket",Omn=2*60*1e3,$mn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Gm{constructor(t,n,r=0){super(dH(t),`Firebase Storage: ${n} (${dH(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return dH(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ks;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ks||(Ks={}));function dH(e){return"storage/"+e}function uue(){const e="An unknown error occurred, please check the error payload for server response.";return new Xs(Ks.UNKNOWN,e)}function Mmn(e){return new Xs(Ks.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Lmn(e){return new Xs(Ks.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Fmn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xs(Ks.UNAUTHENTICATED,e)}function Bmn(){return new Xs(Ks.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jmn(e){return new Xs(Ks.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Umn(){return new Xs(Ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zmn(){return new Xs(Ks.CANCELED,"User canceled the upload/download.")}function Vmn(e){return new Xs(Ks.INVALID_URL,"Invalid URL '"+e+"'.")}function Hmn(e){return new Xs(Ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function qmn(){return new Xs(Ks.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WUe+"' property when initializing the app?")}function Wmn(){return new Xs(Ks.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gmn(){return new Xs(Ks.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ymn(e){return new Xs(Ks.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function WK(e){return new Xs(Ks.INVALID_ARGUMENT,e)}function GUe(){return new Xs(Ks.APP_DELETED,"The Firebase app was deleted.")}function Kmn(e){return new Xs(Ks.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mk(e,t){return new Xs(Ks.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function HA(e){throw new Xs(Ks.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=al.makeFromUrl(t,n)}catch{return new al(t,"")}if(r.path==="")return r;throw Hmn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===qUe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),x=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<x.length;w++){const E=x[w],T=E.regex.exec(t);if(T){const C=T[E.indices.bucket];let I=T[E.indices.path];I||(I=""),r=new al(C,I),E.postModify(r);break}}if(r==null)throw Vmn(t);return r}}class Xmn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qmn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function Jmn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zmn(e){return e!==void 0}function e0n(e){return typeof e=="object"&&!Array.isArray(e)}function lue(e){return typeof e=="string"||e instanceof String}function uwe(e){return cue()&&e instanceof Blob}function cue(){return typeof Blob<"u"}function GK(e,t,n,r){if(r<t)throw WK(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw WK(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function YUe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zx;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(zx||(zx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0n(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0n{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new r4(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zx.NO_ERROR,u=s.getStatus();if(!a||t0n(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===zx.ABORT;r(!1,new r4(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new r4(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Zmn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=uue();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?GUe():zmn();o(u)}else{const u=Umn();o(u)}};this.canceled_?n(!1,new r4(!1,null,!0)):this.backoffId_=Qmn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Jmn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class r4{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function r0n(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function i0n(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function s0n(e,t){t&&(e["X-Firebase-GMPID"]=t)}function o0n(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function a0n(e,t,n,r,i,s,o=!0){const a=YUe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return s0n(l,t),r0n(l,n),i0n(l,s),o0n(l,r),new n0n(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0n(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l0n(...e){const t=u0n();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(cue())return new Blob(e);throw new Xs(Ks.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function c0n(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0n(e){if(typeof atob>"u")throw Ymn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hH{constructor(t,n){this.data=t,this.contentType=n||null}}function d0n(e,t){switch(e){case zp.RAW:return new hH(KUe(t));case zp.BASE64:case zp.BASE64URL:return new hH(XUe(e,t));case zp.DATA_URL:return new hH(p0n(t),m0n(t))}throw uue()}function KUe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function h0n(e){let t;try{t=decodeURIComponent(e)}catch{throw Mk(zp.DATA_URL,"Malformed data URL.")}return KUe(t)}function XUe(e,t){switch(e){case zp.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Mk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zp.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Mk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=f0n(t)}catch(i){throw i.message.includes("polyfill")?i:Mk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class QUe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Mk(zp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=g0n(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function p0n(e){const t=new QUe(e);return t.base64?XUe(zp.BASE64,t.rest):h0n(t.rest)}function m0n(e){return new QUe(e).contentType}function g0n(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,n){let r=0,i="";uwe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(uwe(this.data_)){const r=this.data_,i=c0n(r,t,n);return i===null?null:new Ky(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Ky(r,!0)}}static getBlob(...t){if(cue()){const n=t.map(r=>r instanceof Ky?r.data_:r);return new Ky(l0n.apply(null,n))}else{const n=t.map(o=>lue(o)?d0n(zp.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ky(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fue(e){let t;try{t=JSON.parse(e)}catch{return null}return e0n(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0n(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function v0n(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function JUe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0n(e,t){return t}class Ku{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||b0n}}let i4=null;function x0n(e){return!lue(e)||e.length<2?e:JUe(e)}function ZUe(){if(i4)return i4;const e=[];e.push(new Ku("bucket")),e.push(new Ku("generation")),e.push(new Ku("metageneration")),e.push(new Ku("name","fullPath",!0));function t(s,o){return x0n(o)}const n=new Ku("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ku("size");return i.xform=r,e.push(i),e.push(new Ku("timeCreated")),e.push(new Ku("updated")),e.push(new Ku("md5Hash",null,!0)),e.push(new Ku("cacheControl",null,!0)),e.push(new Ku("contentDisposition",null,!0)),e.push(new Ku("contentEncoding",null,!0)),e.push(new Ku("contentLanguage",null,!0)),e.push(new Ku("contentType",null,!0)),e.push(new Ku("metadata","customMetadata",!0)),i4=e,i4}function _0n(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new al(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function w0n(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return _0n(r,e),r}function eze(e,t,n){const r=fue(t);return r===null?null:w0n(e,r,n)}function E0n(e,t,n,r){const i=fue(t);if(i===null||!lue(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=wP(d,n,r),p=YUe({alt:"media",token:l});return h+p})[0]}function S0n(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lwe="prefixes",cwe="items";function T0n(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[lwe])for(const i of n[lwe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new al(t,s));r.prefixes.push(o)}if(n[cwe])for(const i of n[cwe]){const s=e._makeStorageReference(new al(t,i.name));r.items.push(s)}return r}function C0n(e,t,n){const r=fue(n);return r===null?null:T0n(e,t,r)}class M9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function due(e){if(!e)throw uue()}function A0n(e,t){function n(r,i){const s=eze(e,i,t);return due(s!==null),s}return n}function I0n(e,t){function n(r,i){const s=C0n(e,t,i);return due(s!==null),s}return n}function k0n(e,t){function n(r,i){const s=eze(e,i,t);return due(s!==null),E0n(s,i,e.host,e._protocol)}return n}function hue(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Bmn():i=Fmn():n.getStatus()===402?i=Lmn(e.bucket):n.getStatus()===403?i=jmn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function tze(e){const t=hue(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=Mmn(e.path)),s.serverResponse=i.serverResponse,s}return n}function R0n(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=wP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new M9(a,u,I0n(e,t.bucket),l);return c.urlParams=s,c.errorHandler=hue(t),c}function D0n(e,t,n){const r=t.fullServerUrl(),i=wP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new M9(i,s,k0n(e,n),o);return a.errorHandler=tze(t),a}function N0n(e,t){const n=t.fullServerUrl(),r=wP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new M9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=tze(t),a}function P0n(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function O0n(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=P0n(null,t)),r}function $0n(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=O0n(t,r,i),c=S0n(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Ky.getBlob(f,r,d);if(h===null)throw Wmn();const p={name:l.fullPath},m=wP(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new M9(m,g,A0n(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=hue(t),v}class M0n{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zx.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zx.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zx.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw HA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw HA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw HA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw HA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw HA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class L0n extends M0n{initXhr(){this.xhr_.responseType="text"}}function L9(){return new L0n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(t,n){this._service=t,n instanceof al?this._location=n:this._location=al.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new R_(t,n)}get root(){const t=new al(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JUe(this._location.path)}get storage(){return this._service}get parent(){const t=y0n(this._location.path);if(t===null)return null;const n=new al(this._location.bucket,t);return new R_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Kmn(t)}}function F0n(e,t,n){e._throwIfRoot("uploadBytes");const r=$0n(e.storage,e._location,ZUe(),new Ky(t,!0),n);return e.storage.makeRequestWithTokens(r,L9).then(i=>({metadata:i,ref:e}))}function B0n(e){const t={prefixes:[],items:[]};return nze(e,t).then(()=>t)}async function nze(e,t,n){const i=await j0n(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await nze(e,t,i.nextPageToken)}function j0n(e,t){t!=null&&typeof t.maxResults=="number"&&GK("options.maxResults",1,1e3,t.maxResults);const n=t,r=R0n(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,L9)}function U0n(e){e._throwIfRoot("getDownloadURL");const t=D0n(e.storage,e._location,ZUe());return e.storage.makeRequestWithTokens(t,L9).then(n=>{if(n===null)throw Gmn();return n})}function z0n(e){e._throwIfRoot("deleteObject");const t=N0n(e.storage,e._location);return e.storage.makeRequestWithTokens(t,L9)}function V0n(e,t){const n=v0n(e._location.path,t),r=new al(e._location.bucket,n);return new R_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0n(e){return/^[A-Za-z]+:\/\//.test(e)}function q0n(e,t){return new R_(e,t)}function rze(e,t){if(e instanceof pue){const n=e;if(n._bucket==null)throw qmn();const r=new R_(n,n._bucket);return t!=null?rze(r,t):r}else return t!==void 0?V0n(e,t):e}function W0n(e,t){if(t&&H0n(t)){if(e instanceof pue)return q0n(e,t);throw WK("To use ref(service, url), the first argument must be a Storage instance.")}else return rze(e,t)}function fwe(e,t){const n=t==null?void 0:t[WUe];return n==null?null:al.makeFromBucketSpec(n,e)}function G0n(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:idn(i,e.app.options.projectId))}class pue{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=qUe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Omn,this._maxUploadRetryTime=$mn,this._requests=new Set,i!=null?this._bucket=al.makeFromBucketSpec(i,this._host):this._bucket=fwe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=al.makeFromBucketSpec(this._url,t):this._bucket=fwe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){GK("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){GK("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new R_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new Xmn(GUe());{const o=a0n(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const dwe="@firebase/storage",hwe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ize="storage";function s4(e,t,n){return e=es(e),F0n(e,t,n)}function qA(e){return e=es(e),B0n(e)}function o4(e){return e=es(e),U0n(e)}function pwe(e){return e=es(e),z0n(e)}function Nc(e,t){return e=es(e),W0n(e,t)}function mwe(e=Jae(),t){e=es(e);const r=CC(e,ize).getImmediate({identifier:t}),i=rdn("storage");return i&&Y0n(r,...i),r}function Y0n(e,t,n,r={}){G0n(e,t,n,r)}function K0n(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new pue(n,r,i,t,xw)}function X0n(){Dg(new Em(ize,K0n,"PUBLIC").setMultipleInstances(!0)),kh(dwe,hwe,""),kh(dwe,hwe,"esm2017")}X0n();var gwe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vx,sze;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,I){function N(){}N.prototype=I.prototype,C.D=I.prototype,C.prototype=new N,C.prototype.constructor=C,C.C=function(k,P,M){for(var O=Array(arguments.length-2),B=2;B<arguments.length;B++)O[B-2]=arguments[B];return I.prototype[P].apply(k,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,N){N||(N=0);var k=Array(16);if(typeof I=="string")for(var P=0;16>P;++P)k[P]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(P=0;16>P;++P)k[P]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=C.g[0],N=C.g[1],P=C.g[2];var M=C.g[3],O=I+(M^N&(P^M))+k[0]+3614090360&4294967295;I=N+(O<<7&4294967295|O>>>25),O=M+(P^I&(N^P))+k[1]+3905402710&4294967295,M=I+(O<<12&4294967295|O>>>20),O=P+(N^M&(I^N))+k[2]+606105819&4294967295,P=M+(O<<17&4294967295|O>>>15),O=N+(I^P&(M^I))+k[3]+3250441966&4294967295,N=P+(O<<22&4294967295|O>>>10),O=I+(M^N&(P^M))+k[4]+4118548399&4294967295,I=N+(O<<7&4294967295|O>>>25),O=M+(P^I&(N^P))+k[5]+1200080426&4294967295,M=I+(O<<12&4294967295|O>>>20),O=P+(N^M&(I^N))+k[6]+2821735955&4294967295,P=M+(O<<17&4294967295|O>>>15),O=N+(I^P&(M^I))+k[7]+4249261313&4294967295,N=P+(O<<22&4294967295|O>>>10),O=I+(M^N&(P^M))+k[8]+1770035416&4294967295,I=N+(O<<7&4294967295|O>>>25),O=M+(P^I&(N^P))+k[9]+2336552879&4294967295,M=I+(O<<12&4294967295|O>>>20),O=P+(N^M&(I^N))+k[10]+4294925233&4294967295,P=M+(O<<17&4294967295|O>>>15),O=N+(I^P&(M^I))+k[11]+2304563134&4294967295,N=P+(O<<22&4294967295|O>>>10),O=I+(M^N&(P^M))+k[12]+1804603682&4294967295,I=N+(O<<7&4294967295|O>>>25),O=M+(P^I&(N^P))+k[13]+4254626195&4294967295,M=I+(O<<12&4294967295|O>>>20),O=P+(N^M&(I^N))+k[14]+2792965006&4294967295,P=M+(O<<17&4294967295|O>>>15),O=N+(I^P&(M^I))+k[15]+1236535329&4294967295,N=P+(O<<22&4294967295|O>>>10),O=I+(P^M&(N^P))+k[1]+4129170786&4294967295,I=N+(O<<5&4294967295|O>>>27),O=M+(N^P&(I^N))+k[6]+3225465664&4294967295,M=I+(O<<9&4294967295|O>>>23),O=P+(I^N&(M^I))+k[11]+643717713&4294967295,P=M+(O<<14&4294967295|O>>>18),O=N+(M^I&(P^M))+k[0]+3921069994&4294967295,N=P+(O<<20&4294967295|O>>>12),O=I+(P^M&(N^P))+k[5]+3593408605&4294967295,I=N+(O<<5&4294967295|O>>>27),O=M+(N^P&(I^N))+k[10]+38016083&4294967295,M=I+(O<<9&4294967295|O>>>23),O=P+(I^N&(M^I))+k[15]+3634488961&4294967295,P=M+(O<<14&4294967295|O>>>18),O=N+(M^I&(P^M))+k[4]+3889429448&4294967295,N=P+(O<<20&4294967295|O>>>12),O=I+(P^M&(N^P))+k[9]+568446438&4294967295,I=N+(O<<5&4294967295|O>>>27),O=M+(N^P&(I^N))+k[14]+3275163606&4294967295,M=I+(O<<9&4294967295|O>>>23),O=P+(I^N&(M^I))+k[3]+4107603335&4294967295,P=M+(O<<14&4294967295|O>>>18),O=N+(M^I&(P^M))+k[8]+1163531501&4294967295,N=P+(O<<20&4294967295|O>>>12),O=I+(P^M&(N^P))+k[13]+2850285829&4294967295,I=N+(O<<5&4294967295|O>>>27),O=M+(N^P&(I^N))+k[2]+4243563512&4294967295,M=I+(O<<9&4294967295|O>>>23),O=P+(I^N&(M^I))+k[7]+1735328473&4294967295,P=M+(O<<14&4294967295|O>>>18),O=N+(M^I&(P^M))+k[12]+2368359562&4294967295,N=P+(O<<20&4294967295|O>>>12),O=I+(N^P^M)+k[5]+4294588738&4294967295,I=N+(O<<4&4294967295|O>>>28),O=M+(I^N^P)+k[8]+2272392833&4294967295,M=I+(O<<11&4294967295|O>>>21),O=P+(M^I^N)+k[11]+1839030562&4294967295,P=M+(O<<16&4294967295|O>>>16),O=N+(P^M^I)+k[14]+4259657740&4294967295,N=P+(O<<23&4294967295|O>>>9),O=I+(N^P^M)+k[1]+2763975236&4294967295,I=N+(O<<4&4294967295|O>>>28),O=M+(I^N^P)+k[4]+1272893353&4294967295,M=I+(O<<11&4294967295|O>>>21),O=P+(M^I^N)+k[7]+4139469664&4294967295,P=M+(O<<16&4294967295|O>>>16),O=N+(P^M^I)+k[10]+3200236656&4294967295,N=P+(O<<23&4294967295|O>>>9),O=I+(N^P^M)+k[13]+681279174&4294967295,I=N+(O<<4&4294967295|O>>>28),O=M+(I^N^P)+k[0]+3936430074&4294967295,M=I+(O<<11&4294967295|O>>>21),O=P+(M^I^N)+k[3]+3572445317&4294967295,P=M+(O<<16&4294967295|O>>>16),O=N+(P^M^I)+k[6]+76029189&4294967295,N=P+(O<<23&4294967295|O>>>9),O=I+(N^P^M)+k[9]+3654602809&4294967295,I=N+(O<<4&4294967295|O>>>28),O=M+(I^N^P)+k[12]+3873151461&4294967295,M=I+(O<<11&4294967295|O>>>21),O=P+(M^I^N)+k[15]+530742520&4294967295,P=M+(O<<16&4294967295|O>>>16),O=N+(P^M^I)+k[2]+3299628645&4294967295,N=P+(O<<23&4294967295|O>>>9),O=I+(P^(N|~M))+k[0]+4096336452&4294967295,I=N+(O<<6&4294967295|O>>>26),O=M+(N^(I|~P))+k[7]+1126891415&4294967295,M=I+(O<<10&4294967295|O>>>22),O=P+(I^(M|~N))+k[14]+2878612391&4294967295,P=M+(O<<15&4294967295|O>>>17),O=N+(M^(P|~I))+k[5]+4237533241&4294967295,N=P+(O<<21&4294967295|O>>>11),O=I+(P^(N|~M))+k[12]+1700485571&4294967295,I=N+(O<<6&4294967295|O>>>26),O=M+(N^(I|~P))+k[3]+2399980690&4294967295,M=I+(O<<10&4294967295|O>>>22),O=P+(I^(M|~N))+k[10]+4293915773&4294967295,P=M+(O<<15&4294967295|O>>>17),O=N+(M^(P|~I))+k[1]+2240044497&4294967295,N=P+(O<<21&4294967295|O>>>11),O=I+(P^(N|~M))+k[8]+1873313359&4294967295,I=N+(O<<6&4294967295|O>>>26),O=M+(N^(I|~P))+k[15]+4264355552&4294967295,M=I+(O<<10&4294967295|O>>>22),O=P+(I^(M|~N))+k[6]+2734768916&4294967295,P=M+(O<<15&4294967295|O>>>17),O=N+(M^(P|~I))+k[13]+1309151649&4294967295,N=P+(O<<21&4294967295|O>>>11),O=I+(P^(N|~M))+k[4]+4149444226&4294967295,I=N+(O<<6&4294967295|O>>>26),O=M+(N^(I|~P))+k[11]+3174756917&4294967295,M=I+(O<<10&4294967295|O>>>22),O=P+(I^(M|~N))+k[2]+718787259&4294967295,P=M+(O<<15&4294967295|O>>>17),O=N+(M^(P|~I))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var N=I-this.blockSize,k=this.B,P=this.h,M=0;M<I;){if(P==0)for(;M<=N;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<I;)if(k[P++]=C.charCodeAt(M++),P==this.blockSize){i(this,k),P=0;break}}else for(;M<I;)if(k[P++]=C[M++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var N=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=N&255,N/=256;for(this.u(C),C=Array(16),I=N=0;4>I;++I)for(var k=0;32>k;k+=8)C[N++]=this.g[I]>>>k&255;return C};function s(C,I){var N=a;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=I(C)}function o(C,I){this.h=I;for(var N=[],k=!0,P=C.length-1;0<=P;P--){var M=C[P]|0;k&&M==I||(N[P]=M,k=!1)}this.g=N}var a={};function u(C){return-128<=C&&128>C?s(C,function(I){return new o([I|0],0>I?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return g(l(-C));for(var I=[],N=1,k=0;C>=N;k++)I[k]=C/N|0,N*=4294967296;return new o(I,0)}function c(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return g(c(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=l(Math.pow(I,8)),k=f,P=0;P<C.length;P+=8){var M=Math.min(8,C.length-P),O=parseInt(C.substring(P,P+M),I);8>M?(M=l(Math.pow(I,M)),k=k.j(M).add(l(O))):(k=k.j(N),k=k.add(l(O)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var C=0,I=1,N=0;N<this.g.length;N++){var k=this.i(N);C+=(0<=k?k:4294967296+k)*I,I*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(p(this))return"0";if(m(this))return"-"+g(this).toString(C);for(var I=l(Math.pow(C,6)),N=this,k="";;){var P=w(N,I).g;N=y(N,P.j(I));var M=((0<N.g.length?N.g[0]:N.h)>>>0).toString(C);if(N=P,p(N))return M+k;for(;6>M.length;)M="0"+M;k=M+k}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function p(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function m(C){return C.h==-1}e.l=function(C){return C=y(this,C),m(C)?-1:p(C)?0:1};function g(C){for(var I=C.g.length,N=[],k=0;k<I;k++)N[k]=~C.g[k];return new o(N,~C.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(C){for(var I=Math.max(this.g.length,C.g.length),N=[],k=0,P=0;P<=I;P++){var M=k+(this.i(P)&65535)+(C.i(P)&65535),O=(M>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);k=O>>>16,M&=65535,O&=65535,N[P]=O<<16|M}return new o(N,N[N.length-1]&-2147483648?-1:0)};function y(C,I){return C.add(g(I))}e.j=function(C){if(p(this)||p(C))return f;if(m(this))return m(C)?g(this).j(g(C)):g(g(this).j(C));if(m(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return l(this.m()*C.m());for(var I=this.g.length+C.g.length,N=[],k=0;k<2*I;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<C.g.length;P++){var M=this.i(k)>>>16,O=this.i(k)&65535,B=C.i(P)>>>16,q=C.i(P)&65535;N[2*k+2*P]+=O*q,v(N,2*k+2*P),N[2*k+2*P+1]+=M*q,v(N,2*k+2*P+1),N[2*k+2*P+1]+=O*B,v(N,2*k+2*P+1),N[2*k+2*P+2]+=M*B,v(N,2*k+2*P+2)}for(k=0;k<I;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=I;k<2*I;k++)N[k]=0;return new o(N,0)};function v(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function x(C,I){this.g=C,this.h=I}function w(C,I){if(p(I))throw Error("division by zero");if(p(C))return new x(f,f);if(m(C))return I=w(g(C),I),new x(g(I.g),g(I.h));if(m(I))return I=w(C,g(I)),new x(g(I.g),I.h);if(30<C.g.length){if(m(C)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var N=d,k=I;0>=k.l(C);)N=E(N),k=E(k);var P=T(N,1),M=T(k,1);for(k=T(k,2),N=T(N,2);!p(k);){var O=M.add(k);0>=O.l(C)&&(P=P.add(N),M=O),k=T(k,1),N=T(N,1)}return I=y(C,P.j(I)),new x(P,I)}for(P=f;0<=C.l(I);){for(N=Math.max(1,Math.floor(C.m()/I.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),M=l(N),O=M.j(I);m(O)||0<O.l(C);)N-=k,M=l(N),O=M.j(I);p(M)&&(M=d),P=P.add(M),C=y(C,O)}return new x(P,C)}e.A=function(C){return w(this,C).h},e.and=function(C){for(var I=Math.max(this.g.length,C.g.length),N=[],k=0;k<I;k++)N[k]=this.i(k)&C.i(k);return new o(N,this.h&C.h)},e.or=function(C){for(var I=Math.max(this.g.length,C.g.length),N=[],k=0;k<I;k++)N[k]=this.i(k)|C.i(k);return new o(N,this.h|C.h)},e.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),N=[],k=0;k<I;k++)N[k]=this.i(k)^C.i(k);return new o(N,this.h^C.h)};function E(C){for(var I=C.g.length+1,N=[],k=0;k<I;k++)N[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(N,C.h)}function T(C,I){var N=I>>5;I%=32;for(var k=C.g.length-N,P=[],M=0;M<k;M++)P[M]=0<I?C.i(M+N)>>>I|C.i(M+N+1)<<32-I:C.i(M+N);return new o(P,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sze=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Vx=o}).apply(typeof gwe<"u"?gwe:typeof self<"u"?self:typeof window<"u"?window:{});var a4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oze,aze,LI,uze,$6,YK,lze,cze,fze;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,j,G){return A==Array.prototype||A==Object.prototype||(A[j]=G.value),A};function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof a4=="object"&&a4];for(var j=0;j<A.length;++j){var G=A[j];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=n(this);function i(A,j){if(j)e:{var G=r;A=A.split(".");for(var ne=0;ne<A.length-1;ne++){var De=A[ne];if(!(De in G))break e;G=G[De]}A=A[A.length-1],ne=G[A],j=j(ne),j!=ne&&j!=null&&t(G,A,{configurable:!0,writable:!0,value:j})}}function s(A,j){A instanceof String&&(A+="");var G=0,ne=!1,De={next:function(){if(!ne&&G<A.length){var ze=G++;return{value:j(ze,A[ze]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return De[Symbol.iterator]=function(){return De},De}i("Array.prototype.values",function(A){return A||function(){return s(this,function(j,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(A){var j=typeof A;return j=j!="object"?j:A?Array.isArray(A)?"array":j:"null",j=="array"||j=="object"&&typeof A.length=="number"}function l(A){var j=typeof A;return j=="object"&&A!=null||j=="function"}function c(A,j,G){return A.call.apply(A.bind,arguments)}function f(A,j,G){if(!A)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var De=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(De,ne),A.apply(j,De)}}return function(){return A.apply(j,arguments)}}function d(A,j,G){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(A,j){var G=Array.prototype.slice.call(arguments,1);return function(){var ne=G.slice();return ne.push.apply(ne,arguments),A.apply(this,ne)}}function p(A,j){function G(){}G.prototype=j.prototype,A.aa=j.prototype,A.prototype=new G,A.prototype.constructor=A,A.Qb=function(ne,De,ze){for(var At=Array(arguments.length-2),ci=2;ci<arguments.length;ci++)At[ci-2]=arguments[ci];return j.prototype[De].apply(ne,At)}}function m(A){const j=A.length;if(0<j){const G=Array(j);for(let ne=0;ne<j;ne++)G[ne]=A[ne];return G}return[]}function g(A,j){for(let G=1;G<arguments.length;G++){const ne=arguments[G];if(u(ne)){const De=A.length||0,ze=ne.length||0;A.length=De+ze;for(let At=0;At<ze;At++)A[De+At]=ne[At]}else A.push(ne)}}class y{constructor(j,G){this.i=j,this.j=G,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function v(A){return/^[\s\xa0]*$/.test(A)}function x(){var A=a.navigator;return A&&(A=A.userAgent)?A:""}function w(A){return w[" "](A),A}w[" "]=function(){};var E=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function T(A,j,G){for(const ne in A)j.call(G,A[ne],ne,A)}function C(A,j){for(const G in A)j.call(void 0,A[G],G,A)}function I(A){const j={};for(const G in A)j[G]=A[G];return j}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(A,j){let G,ne;for(let De=1;De<arguments.length;De++){ne=arguments[De];for(G in ne)A[G]=ne[G];for(let ze=0;ze<N.length;ze++)G=N[ze],Object.prototype.hasOwnProperty.call(ne,G)&&(A[G]=ne[G])}}function P(A){var j=1;A=A.split(":");const G=[];for(;0<j&&A.length;)G.push(A.shift()),j--;return A.length&&G.push(A.join(":")),G}function M(A){a.setTimeout(()=>{throw A},0)}function O(){var A=J;let j=null;return A.g&&(j=A.g,A.g=A.g.next,A.g||(A.h=null),j.next=null),j}class B{constructor(){this.h=this.g=null}add(j,G){const ne=q.get();ne.set(j,G),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var q=new y(()=>new H,A=>A.reset());class H{constructor(){this.next=this.g=this.h=null}set(j,G){this.h=j,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,K=!1,J=new B,F=()=>{const A=a.Promise.resolve(void 0);Y=()=>{A.then(U)}};var U=()=>{for(var A;A=O();){try{A.h.call(A.g)}catch(G){M(G)}var j=q;j.j(A),100>j.h&&(j.h++,A.next=j.g,j.g=A)}K=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(A,j){this.type=A,this.g=this.target=j,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var A=!1,j=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const G=()=>{};a.addEventListener("test",G,j),a.removeEventListener("test",G,j)}catch{}return A}();function Q(A,j){if(L.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var G=this.type=A.type,ne=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=j,j=A.relatedTarget){if(E){e:{try{w(j.nodeName);var De=!0;break e}catch{}De=!1}De||(j=null)}}else G=="mouseover"?j=A.fromElement:G=="mouseout"&&(j=A.toElement);this.relatedTarget=j,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:ue[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&Q.aa.h.call(this)}}p(Q,L);var ue={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),ce=0;function Se(A,j,G,ne,De){this.listener=A,this.proxy=null,this.src=j,this.type=G,this.capture=!!ne,this.ha=De,this.key=++ce,this.da=this.fa=!1}function Oe(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function et(A){this.src=A,this.g={},this.h=0}et.prototype.add=function(A,j,G,ne,De){var ze=A.toString();A=this.g[ze],A||(A=this.g[ze]=[],this.h++);var At=St(A,j,ne,De);return-1<At?(j=A[At],G||(j.fa=!1)):(j=new Se(j,this.src,ze,!!ne,De),j.fa=G,A.push(j)),j};function Re(A,j){var G=j.type;if(G in A.g){var ne=A.g[G],De=Array.prototype.indexOf.call(ne,j,void 0),ze;(ze=0<=De)&&Array.prototype.splice.call(ne,De,1),ze&&(Oe(j),A.g[G].length==0&&(delete A.g[G],A.h--))}}function St(A,j,G,ne){for(var De=0;De<A.length;++De){var ze=A[De];if(!ze.da&&ze.listener==j&&ze.capture==!!G&&ze.ha==ne)return De}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),It={};function mt(A,j,G,ne,De){if(Array.isArray(j)){for(var ze=0;ze<j.length;ze++)mt(A,j[ze],G,ne,De);return null}return G=Rt(G),A&&A[we]?A.K(j,G,l(ne)?!!ne.capture:!1,De):Ce(A,j,G,!1,ne,De)}function Ce(A,j,G,ne,De,ze){if(!j)throw Error("Invalid event type");var At=l(De)?!!De.capture:!!De,ci=_e(A);if(ci||(A[Ze]=ci=new et(A)),G=ci.add(j,G,ne,At,ze),G.proxy)return G;if(ne=Fe(),G.proxy=ne,ne.src=A,ne.listener=G,A.addEventListener)V||(De=At),De===void 0&&(De=!1),A.addEventListener(j.toString(),ne,De);else if(A.attachEvent)A.attachEvent(Dt(j.toString()),ne);else if(A.addListener&&A.removeListener)A.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return G}function Fe(){function A(G){return j.call(A.src,A.listener,G)}const j=Je;return A}function st(A,j,G,ne,De){if(Array.isArray(j))for(var ze=0;ze<j.length;ze++)st(A,j[ze],G,ne,De);else ne=l(ne)?!!ne.capture:!!ne,G=Rt(G),A&&A[we]?(A=A.i,j=String(j).toString(),j in A.g&&(ze=A.g[j],G=St(ze,G,ne,De),-1<G&&(Oe(ze[G]),Array.prototype.splice.call(ze,G,1),ze.length==0&&(delete A.g[j],A.h--)))):A&&(A=_e(A))&&(j=A.g[j.toString()],A=-1,j&&(A=St(j,G,ne,De)),(G=-1<A?j[A]:null)&&yt(G))}function yt(A){if(typeof A!="number"&&A&&!A.da){var j=A.src;if(j&&j[we])Re(j.i,A);else{var G=A.type,ne=A.proxy;j.removeEventListener?j.removeEventListener(G,ne,A.capture):j.detachEvent?j.detachEvent(Dt(G),ne):j.addListener&&j.removeListener&&j.removeListener(ne),(G=_e(j))?(Re(G,A),G.h==0&&(G.src=null,j[Ze]=null)):Oe(A)}}}function Dt(A){return A in It?It[A]:It[A]="on"+A}function Je(A,j){if(A.da)A=!0;else{j=new Q(j,this);var G=A.listener,ne=A.ha||A.src;A.fa&&yt(A),A=G.call(ne,j)}return A}function _e(A){return A=A[Ze],A instanceof et?A:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(A){return typeof A=="function"?A:(A[kt]||(A[kt]=function(j){return A.handleEvent(j)}),A[kt])}function Ee(){W.call(this),this.i=new et(this),this.M=this,this.F=null}p(Ee,W),Ee.prototype[we]=!0,Ee.prototype.removeEventListener=function(A,j,G,ne){st(this,A,j,G,ne)};function $e(A,j){var G,ne=A.F;if(ne)for(G=[];ne;ne=ne.F)G.push(ne);if(A=A.M,ne=j.type||j,typeof j=="string")j=new L(j,A);else if(j instanceof L)j.target=j.target||A;else{var De=j;j=new L(ne,A),k(j,De)}if(De=!0,G)for(var ze=G.length-1;0<=ze;ze--){var At=j.g=G[ze];De=ot(At,ne,!0,j)&&De}if(At=j.g=A,De=ot(At,ne,!0,j)&&De,De=ot(At,ne,!1,j)&&De,G)for(ze=0;ze<G.length;ze++)At=j.g=G[ze],De=ot(At,ne,!1,j)&&De}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var A=this.i,j;for(j in A.g){for(var G=A.g[j],ne=0;ne<G.length;ne++)Oe(G[ne]);delete A.g[j],A.h--}}this.F=null},Ee.prototype.K=function(A,j,G,ne){return this.i.add(String(A),j,!1,G,ne)},Ee.prototype.L=function(A,j,G,ne){return this.i.add(String(A),j,!0,G,ne)};function ot(A,j,G,ne){if(j=A.i.g[String(j)],!j)return!0;j=j.concat();for(var De=!0,ze=0;ze<j.length;++ze){var At=j[ze];if(At&&!At.da&&At.capture==G){var ci=At.listener,Ro=At.ha||At.src;At.fa&&Re(A.i,At),De=ci.call(Ro,ne)!==!1&&De}}return De&&!ne.defaultPrevented}function xt(A,j,G){if(typeof A=="function")G&&(A=d(A,G));else if(A&&typeof A.handleEvent=="function")A=d(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:a.setTimeout(A,j||0)}function jt(A){A.g=xt(()=>{A.g=null,A.i&&(A.i=!1,jt(A))},A.l);const j=A.h;A.h=null,A.m.apply(null,j)}class Un extends W{constructor(j,G){super(),this.m=j,this.l=G,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(A){W.call(this),this.h=A,this.g={}}p(dr,W);var Tr=[];function xi(A){T(A.g,function(j,G){this.g.hasOwnProperty(G)&&yt(j)},A),A.g={}}dr.prototype.N=function(){dr.aa.N.call(this),xi(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=a.JSON.stringify,zn=a.JSON.parse,hr=class{stringify(A){return a.JSON.stringify(A,void 0)}parse(A){return a.JSON.parse(A,void 0)}};function gr(){}gr.prototype.h=null;function Xo(A){return A.h||(A.h=A.i())}function ts(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ps(){L.call(this,"d")}p(Ps,L);function Vr(){L.call(this,"c")}p(Vr,L);var hs={},Cc=null;function Qo(){return Cc=Cc||new Ee}hs.La="serverreachability";function Bu(A){L.call(this,hs.La,A)}p(Bu,L);function Br(A){const j=Qo();$e(j,new Bu(j))}hs.STAT_EVENT="statevent";function Ri(A,j){L.call(this,hs.STAT_EVENT,A),this.stat=j}p(Ri,L);function gi(A){const j=Qo();$e(j,new Ri(j,A))}hs.Ma="timingevent";function Qs(A,j){L.call(this,hs.Ma,A),this.size=j}p(Qs,L);function ai(A,j){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){A()},j)}function Di(){this.g=!0}Di.prototype.xa=function(){this.g=!1};function me(A,j,G,ne,De,ze){A.info(function(){if(A.g)if(ze)for(var At="",ci=ze.split("&"),Ro=0;Ro<ci.length;Ro++){var kr=ci[Ro].split("=");if(1<kr.length){var yi=kr[0];kr=kr[1];var yo=yi.split("_");At=2<=yo.length&&yo[1]=="type"?At+(yi+"="+kr+"&"):At+(yi+"=redacted&")}}else At=null;else At=ze;return"XMLHTTP REQ ("+ne+") [attempt "+De+"]: "+j+`
`+G+`
`+At})}function ae(A,j,G,ne,De,ze,At){A.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+De+"]: "+j+`
`+G+`
`+ze+" "+At})}function ge(A,j,G,ne){A.info(function(){return"XMLHTTP TEXT ("+j+"): "+Me(A,G)+(ne?" "+ne:"")})}function Le(A,j){A.info(function(){return"TIMEOUT: "+j})}Di.prototype.info=function(){};function Me(A,j){if(!A.g)return j;if(!j)return null;try{var G=JSON.parse(j);if(G){for(A=0;A<G.length;A++)if(Array.isArray(G[A])){var ne=G[A];if(!(2>ne.length)){var De=ne[1];if(Array.isArray(De)&&!(1>De.length)){var ze=De[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var At=1;At<De.length;At++)De[At]=""}}}}return Tn(G)}catch{return j}}var _t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function Zn(){}p(Zn,gr),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},dn=new Zn;function ur(A,j,G,ne){this.j=A,this.i=j,this.l=G,this.R=ne||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}var Cr={},ui={};function on(A,j,G){A.L=1,A.v=er(ut(j)),A.m=G,A.P=!0,Ar(A,null)}function Ar(A,j){A.F=Date.now(),Ni(A),A.A=ut(A.v);var G=A.A,ne=A.R;Array.isArray(ne)||(ne=[String(ne)]),rb(G.i,"t",ne),A.C=0,G=A.j.J,A.h=new On,A.g=LP(A.j,G?j:null,!A.m),0<A.O&&(A.M=new Un(d(A.Y,A,A.g),A.O)),j=A.U,G=A.g,ne=A.ca;var De="readystatechange";Array.isArray(De)||(De&&(Tr[0]=De.toString()),De=Tr);for(var ze=0;ze<De.length;ze++){var At=mt(G,De[ze],ne||j.handleEvent,!1,j.h||j);if(!At)break;j.g[At.key]=At}j=A.H?I(A.H):{},A.m?(A.u||(A.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,j)):(A.u="GET",A.g.ea(A.A,A.u,null,j)),Br(),me(A.i,A.u,A.A,A.l,A.R,A.m)}ur.prototype.ca=function(A){A=A.target;const j=this.M;j&&wi(A)==3?j.j():this.Y(A)},ur.prototype.Y=function(A){try{if(A==this.g)e:{const yo=wi(this.g);var j=this.g.Ba();const Tf=this.g.Z();if(!(3>yo)&&(yo!=3||this.g&&(this.h.h||this.g.oa()||ko(this.g)))){this.J||yo!=4||j==7||(j==8||0>=Tf?Br(3):Br(2)),Pi(this);var G=this.g.Z();this.X=G;t:if(Qr(this)){var ne=ko(this.g);A="";var De=ne.length,ze=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),Co(this);var At="";break t}this.h.i=new a.TextDecoder}for(j=0;j<De;j++)this.h.h=!0,A+=this.h.i.decode(ne[j],{stream:!(ze&&j==De-1)});ne.length=0,this.h.g+=A,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=G==200,ae(this.i,this.u,this.A,this.l,this.R,yo,G),this.o){if(this.T&&!this.K){t:{if(this.g){var ci,Ro=this.g;if((ci=Ro.g?Ro.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ci)){var kr=ci;break t}}kr=null}if(G=kr)ge(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,G);else{this.o=!1,this.s=3,gi(12),ns(this),Co(this);break e}}if(this.P){G=!0;let Cl;for(;!this.J&&this.C<At.length;)if(Cl=yr(this,At),Cl==ui){yo==4&&(this.s=4,gi(14),G=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if(Cl==Cr){this.s=4,gi(15),ge(this.i,this.l,At,"[Invalid Chunk]"),G=!1;break}else ge(this.i,this.l,Cl,null),rs(this,Cl);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yo!=4||At.length!=0||this.h.h||(this.s=1,gi(16),G=!1),this.o=this.o&&G,!G)ge(this.i,this.l,At,"[Invalid Chunked Response]"),ns(this),Co(this);else if(0<At.length&&!this.W){this.W=!0;var yi=this.j;yi.g==this&&yi.ba&&!yi.M&&(yi.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),Sf(yi),yi.M=!0,gi(11))}}else ge(this.i,this.l,At,null),rs(this,At);yo==4&&ns(this),this.o&&!this.J&&(yo==4?zi(this.j,this):(this.o=!1,Ni(this)))}else Nd(this.g),G==400&&0<At.indexOf("Unknown SID")?(this.s=3,gi(12)):(this.s=0,gi(13)),ns(this),Co(this)}}}catch{}finally{}};function Qr(A){return A.g?A.u=="GET"&&A.L!=2&&A.j.Ca:!1}function yr(A,j){var G=A.C,ne=j.indexOf(`
`,G);return ne==-1?ui:(G=Number(j.substring(G,ne)),isNaN(G)?Cr:(ne+=1,ne+G>j.length?ui:(j=j.slice(ne,ne+G),A.C=ne+G,j)))}ur.prototype.cancel=function(){this.J=!0,ns(this)};function Ni(A){A.S=Date.now()+A.I,mo(A,A.I)}function mo(A,j){if(A.B!=null)throw Error("WatchDog timer not null");A.B=ai(d(A.ba,A),j)}function Pi(A){A.B&&(a.clearTimeout(A.B),A.B=null)}ur.prototype.ba=function(){this.B=null;const A=Date.now();0<=A-this.S?(Le(this.i,this.A),this.L!=2&&(Br(),gi(17)),ns(this),this.s=2,Co(this)):mo(this,this.S-A)};function Co(A){A.j.G==0||A.J||zi(A.j,A)}function ns(A){Pi(A);var j=A.M;j&&typeof j.ma=="function"&&j.ma(),A.M=null,xi(A.U),A.g&&(j=A.g,A.g=null,j.abort(),j.ma())}function rs(A,j){try{var G=A.j;if(G.G!=0&&(G.g==A||Ef(G.h,A))){if(!A.K&&Ef(G.h,A)&&G.G==3){try{var ne=G.Da.g.parse(j)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var De=ne;if(De[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<A.F)ay(G),sb(G);else break e;kw(G),gi(18)}}else G.za=De[1],0<G.za-G.T&&37500>De[2]&&G.F&&G.v==0&&!G.C&&(G.C=ai(d(G.Za,G),6e3));if(1>=Tl(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else Od(G,11)}else if((A.K||G.g==A)&&ay(G),!v(j))for(De=G.Da.g.parse(j),j=0;j<De.length;j++){let kr=De[j];if(G.T=kr[0],kr=kr[1],G.G==2)if(kr[0]=="c"){G.K=kr[1],G.ia=kr[2];const yi=kr[3];yi!=null&&(G.la=yi,G.j.info("VER="+G.la));const yo=kr[4];yo!=null&&(G.Aa=yo,G.j.info("SVER="+G.Aa));const Tf=kr[5];Tf!=null&&typeof Tf=="number"&&0<Tf&&(ne=1.5*Tf,G.L=ne,G.j.info("backChannelRequestTimeoutMs_="+ne)),ne=G;const Cl=A.g;if(Cl){const cb=Cl.g?Cl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cb){var ze=ne.h;ze.g||cb.indexOf("spdy")==-1&&cb.indexOf("quic")==-1&&cb.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(ee(ze,ze.h),ze.h=null))}if(ne.D){const OC=Cl.g?Cl.g.getResponseHeader("X-HTTP-Session-Id"):null;OC&&(ne.ya=OC,Kt(ne.I,ne.D,OC))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-A.F,G.j.info("Handshake RTT: "+G.R+"ms")),ne=G;var At=A;if(ne.qa=Rw(ne,ne.J?ne.ia:null,ne.W),At.K){pe(ne.h,At);var ci=At,Ro=ne.L;Ro&&(ci.I=Ro),ci.B&&(Pi(ci),Ni(ci)),ne.g=At}else $P(ne);0<G.i.length&&ob(G)}else kr[0]!="stop"&&kr[0]!="close"||Od(G,7);else G.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?Od(G,7):Qm(G):kr[0]!="noop"&&G.l&&G.l.ta(kr),G.v=0)}}Br(4)}catch{}}var Ao=class{constructor(A,j){this.g=A,this.map=j}};function _a(A){this.l=A||10,a.PerformanceNavigationTiming?(A=a.performance.getEntriesByType("navigation"),A=0<A.length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function go(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Tl(A){return A.h?1:A.g?A.g.size:0}function Ef(A,j){return A.h?A.h==j:A.g?A.g.has(j):!1}function ee(A,j){A.g?A.g.add(j):A.h=j}function pe(A,j){A.h&&A.h==j?A.h=null:A.g&&A.g.has(j)&&A.g.delete(j)}_a.prototype.cancel=function(){if(this.i=se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function se(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let j=A.i;for(const G of A.g.values())j=j.concat(G.D);return j}return m(A.i)}function xe(A){if(A.V&&typeof A.V=="function")return A.V();if(typeof Map<"u"&&A instanceof Map||typeof Set<"u"&&A instanceof Set)return Array.from(A.values());if(typeof A=="string")return A.split("");if(u(A)){for(var j=[],G=A.length,ne=0;ne<G;ne++)j.push(A[ne]);return j}j=[],G=0;for(ne in A)j[G++]=A[ne];return j}function Ae(A){if(A.na&&typeof A.na=="function")return A.na();if(!A.V||typeof A.V!="function"){if(typeof Map<"u"&&A instanceof Map)return Array.from(A.keys());if(!(typeof Set<"u"&&A instanceof Set)){if(u(A)||typeof A=="string"){var j=[];A=A.length;for(var G=0;G<A;G++)j.push(G);return j}j=[],G=0;for(const ne in A)j[G++]=ne;return j}}}function be(A,j){if(A.forEach&&typeof A.forEach=="function")A.forEach(j,void 0);else if(u(A)||typeof A=="string")Array.prototype.forEach.call(A,j,void 0);else for(var G=Ae(A),ne=xe(A),De=ne.length,ze=0;ze<De;ze++)j.call(void 0,ne[ze],G&&G[ze],A)}var qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(A,j){if(A){A=A.split("&");for(var G=0;G<A.length;G++){var ne=A[G].indexOf("="),De=null;if(0<=ne){var ze=A[G].substring(0,ne);De=A[G].substring(ne+1)}else ze=A[G];j(ze,De?decodeURIComponent(De.replace(/\+/g," ")):"")}}}function at(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof at){this.h=A.h,vt(this,A.j),this.o=A.o,this.g=A.g,Mt(this,A.s),this.l=A.l;var j=A.i,G=new ju;G.i=j.i,j.g&&(G.g=new Map(j.g),G.h=j.h),$n(this,G),this.m=A.m}else A&&(j=String(A).match(qe))?(this.h=!1,vt(this,j[1]||"",!0),this.o=Hr(j[2]||""),this.g=Hr(j[3]||"",!0),Mt(this,j[4]),this.l=Hr(j[5]||"",!0),$n(this,j[6]||"",!0),this.m=Hr(j[7]||"")):(this.h=!1,this.i=new ju(null,this.h))}at.prototype.toString=function(){var A=[],j=this.j;j&&A.push(vr(j,Ac,!0),":");var G=this.g;return(G||j=="file")&&(A.push("//"),(j=this.o)&&A.push(vr(j,Ac,!0),"@"),A.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&A.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&A.push("/"),A.push(vr(G,G.charAt(0)=="/"?sy:Id,!0))),(G=this.i.toString())&&A.push("?",G),(G=this.m)&&A.push("#",vr(G,nb)),A.join("")};function ut(A){return new at(A)}function vt(A,j,G){A.j=G?Hr(j,!0):j,A.j&&(A.j=A.j.replace(/:$/,""))}function Mt(A,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);A.s=j}else A.s=null}function $n(A,j,G){j instanceof ju?(A.i=j,ib(A.i,A.h)):(G||(j=vr(j,np)),A.i=new ju(j,A.h))}function Kt(A,j,G){A.i.set(j,G)}function er(A){return Kt(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function Hr(A,j){return A?j?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function vr(A,j,G){return typeof A=="string"?(A=encodeURI(A).replace(j,Io),G&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Io(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var Ac=/[#\/\?@]/g,Id=/[#\?:]/g,sy=/[#\?]/g,np=/[#\?@]/g,nb=/#/g;function ju(A,j){this.h=this.g=null,this.i=A||null,this.j=!!j}function Xa(A){A.g||(A.g=new Map,A.h=0,A.i&&it(A.i,function(j,G){A.add(decodeURIComponent(j.replace(/\+/g," ")),G)}))}e=ju.prototype,e.add=function(A,j){Xa(this),this.i=null,A=Rd(this,A);var G=this.g.get(A);return G||this.g.set(A,G=[]),G.push(j),this.h+=1,this};function kd(A,j){Xa(A),j=Rd(A,j),A.g.has(j)&&(A.i=null,A.h-=A.g.get(j).length,A.g.delete(j))}function oy(A,j){return Xa(A),j=Rd(A,j),A.g.has(j)}e.forEach=function(A,j){Xa(this),this.g.forEach(function(G,ne){G.forEach(function(De){A.call(j,De,ne,this)},this)},this)},e.na=function(){Xa(this);const A=Array.from(this.g.values()),j=Array.from(this.g.keys()),G=[];for(let ne=0;ne<j.length;ne++){const De=A[ne];for(let ze=0;ze<De.length;ze++)G.push(j[ne])}return G},e.V=function(A){Xa(this);let j=[];if(typeof A=="string")oy(this,A)&&(j=j.concat(this.g.get(Rd(this,A))));else{A=Array.from(this.g.values());for(let G=0;G<A.length;G++)j=j.concat(A[G])}return j},e.set=function(A,j){return Xa(this),this.i=null,A=Rd(this,A),oy(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[j]),this.h+=1,this},e.get=function(A,j){return A?(A=this.V(A),0<A.length?String(A[0]):j):j};function rb(A,j,G){kd(A,j),0<G.length&&(A.i=null,A.g.set(Rd(A,j),m(G)),A.h+=G.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],j=Array.from(this.g.keys());for(var G=0;G<j.length;G++){var ne=j[G];const ze=encodeURIComponent(String(ne)),At=this.V(ne);for(ne=0;ne<At.length;ne++){var De=ze;At[ne]!==""&&(De+="="+encodeURIComponent(String(At[ne]))),A.push(De)}}return this.i=A.join("&")};function Rd(A,j){return j=String(j),A.j&&(j=j.toLowerCase()),j}function ib(A,j){j&&!A.j&&(Xa(A),A.i=null,A.g.forEach(function(G,ne){var De=ne.toLowerCase();ne!=De&&(kd(this,ne),rb(this,De,G))},A)),A.j=j}function Tw(A,j){const G=new Di;if(a.Image){const ne=new Image;ne.onload=h(Jo,G,"TestLoadImage: loaded",!0,j,ne),ne.onerror=h(Jo,G,"TestLoadImage: error",!1,j,ne),ne.onabort=h(Jo,G,"TestLoadImage: abort",!1,j,ne),ne.ontimeout=h(Jo,G,"TestLoadImage: timeout",!1,j,ne),a.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=A}else j(!1)}function Dd(A,j){const G=new Di,ne=new AbortController,De=setTimeout(()=>{ne.abort(),Jo(G,"TestPingServer: timeout",!1,j)},1e4);fetch(A,{signal:ne.signal}).then(ze=>{clearTimeout(De),ze.ok?Jo(G,"TestPingServer: ok",!0,j):Jo(G,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(De),Jo(G,"TestPingServer: error",!1,j)})}function Jo(A,j,G,ne,De){try{De&&(De.onload=null,De.onerror=null,De.onabort=null,De.ontimeout=null),ne(G)}catch{}}function NC(){this.g=new hr}function Cw(A,j,G){const ne=G||"";try{be(A,function(De,ze){let At=De;l(De)&&(At=Tn(De)),j.push(ne+ze+"="+encodeURIComponent(At))})}catch(De){throw j.push(ne+"type="+encodeURIComponent("_badmap")),De}}function Ym(A){this.l=A.Ub||null,this.j=A.eb||!1}p(Ym,gr),Ym.prototype.g=function(){return new Km(this.l,this.j)},Ym.prototype.i=function(A){return function(){return A}}({});function Km(A,j){Ee.call(this),this.D=A,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Km,Ee),e=Km.prototype,e.open=function(A,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=j,this.readyState=1,Ir(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(j.body=A),(this.D||a).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},e.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Aw(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))};function Aw(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}e.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var j=A.value?A.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!A.done}))&&(this.response=this.responseText+=j)}A.done?qr(this):Ir(this),this.readyState==3&&Aw(this)}},e.Ra=function(A){this.g&&(this.response=this.responseText=A,qr(this))},e.Qa=function(A){this.g&&(this.response=A,qr(this))},e.ga=function(){this.g&&qr(this)};function qr(A){A.readyState=4,A.l=null,A.j=null,A.v=null,Ir(A)}e.setRequestHeader=function(A,j){this.u.append(A,j)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],j=this.h.entries();for(var G=j.next();!G.done;)G=G.value,A.push(G[0]+": "+G[1]),G=j.next();return A.join(`\r
`)};function Ir(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Km.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function Iw(A){let j="";return T(A,function(G,ne){j+=ne,j+=":",j+=G,j+=`\r
`}),j}function le(A,j,G){e:{for(ne in G){var ne=!1;break e}ne=!0}ne||(G=Iw(G),typeof A=="string"?G!=null&&encodeURIComponent(String(G)):Kt(A,j,G))}function ye(A){Ee.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ye,Ee);var Be=/^https?$/i,Ht=["POST","PUT"];e=ye.prototype,e.Ha=function(A){this.J=A},e.ea=function(A,j,G,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);j=j?j.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?Xo(this.o):Xo(dn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(j,String(A),!0),this.B=!1}catch(ze){ir(this,ze);return}if(A=G||"",G=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var De in ne)G.set(De,ne[De]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const ze of ne.keys())G.set(ze,ne.get(ze));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(G.keys()).find(ze=>ze.toLowerCase()=="content-type"),De=a.FormData&&A instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ht,j,void 0))||ne||De||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,At]of G)this.g.setRequestHeader(ze,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{li(this),this.u=!0,this.g.send(A),this.u=!1}catch(ze){ir(this,ze)}};function ir(A,j){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=j,A.m=5,Wr(A),an(A)}function Wr(A){A.A||(A.A=!0,$e(A,"complete"),$e(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,$e(this,"complete"),$e(this,"abort"),an(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),an(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?_i(this):this.bb())},e.bb=function(){_i(this)};function _i(A){if(A.h&&typeof o<"u"&&(!A.v[1]||wi(A)!=4||A.Z()!=2)){if(A.u&&wi(A)==4)xt(A.Ea,0,A);else if($e(A,"readystatechange"),wi(A)==4){A.h=!1;try{const At=A.Z();e:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var G;if(!(G=j)){var ne;if(ne=At===0){var De=String(A.D).match(qe)[1]||null;!De&&a.self&&a.self.location&&(De=a.self.location.protocol.slice(0,-1)),ne=!Be.test(De?De.toLowerCase():"")}G=ne}if(G)$e(A,"complete"),$e(A,"success");else{A.m=6;try{var ze=2<wi(A)?A.g.statusText:""}catch{ze=""}A.l=ze+" ["+A.Z()+"]",Wr(A)}}finally{an(A)}}}}function an(A,j){if(A.g){li(A);const G=A.g,ne=A.v[0]?()=>{}:null;A.g=null,A.v=null,j||$e(A,"ready");try{G.onreadystatechange=ne}catch{}}}function li(A){A.I&&(a.clearTimeout(A.I),A.I=null)}e.isActive=function(){return!!this.g};function wi(A){return A.g?A.g.readyState:0}e.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(A){if(this.g){var j=this.g.responseText;return A&&j.indexOf(A)==0&&(j=j.substring(A.length)),zn(j)}};function ko(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function Nd(A){const j={};A=(A.g&&2<=wi(A)&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<A.length;ne++){if(v(A[ne]))continue;var G=P(A[ne]);const De=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const ze=j[De]||[];j[De]=ze,ze.push(G)}C(j,function(ne){return ne.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(A,j,G){return G&&G.internalChannelParams&&G.internalChannelParams[A]||j}function Xm(A){this.Aa=0,this.i=[],this.j=new Di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,A),this.cb=Os("retryDelaySeedMs",1e4,A),this.Wa=Os("forwardChannelMaxRetries",2,A),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new _a(A&&A.concurrentRequestLimit),this.Da=new NC,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Xm.prototype,e.la=8,e.G=1,e.connect=function(A,j,G,ne){gi(0),this.W=A,this.H=j||{},G&&ne!==void 0&&(this.H.OSID=G,this.H.OAID=ne),this.F=this.X,this.I=Rw(this,null,this.W),ob(this)};function Qm(A){if(PC(A),A.G==3){var j=A.U++,G=ut(A.I);if(Kt(G,"SID",A.K),Kt(G,"RID",j),Kt(G,"TYPE","terminate"),ab(A,G),j=new ur(A,A.j,j),j.L=2,j.v=er(ut(G)),G=!1,a.navigator&&a.navigator.sendBeacon)try{G=a.navigator.sendBeacon(j.v.toString(),"")}catch{}!G&&a.Image&&(new Image().src=j.v,G=!0),G||(j.g=LP(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Ni(j)}MP(A)}function sb(A){A.g&&(Sf(A),A.g.cancel(),A.g=null)}function PC(A){sb(A),A.u&&(a.clearTimeout(A.u),A.u=null),ay(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&a.clearTimeout(A.s),A.s=null)}function ob(A){if(!go(A.h)&&!A.s){A.s=!0;var j=A.Ga;Y||F(),K||(Y(),K=!0),J.add(j,A),A.B=0}}function OP(A,j){return Tl(A.h)>=A.h.j-(A.s?1:0)?!1:A.s?(A.i=j.D.concat(A.i),!0):A.G==1||A.G==2||A.B>=(A.Va?0:A.Wa)?!1:(A.s=ai(d(A.Ga,A,j),Pd(A,A.B)),A.B++,!0)}e.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;const De=new ur(this,this.j,A);let ze=this.o;if(this.S&&(ze?(ze=I(ze),k(ze,this.S)):ze=this.S),this.m!==null||this.O||(De.H=ze,ze=null),this.P)e:{for(var j=0,G=0;G<this.i.length;G++){t:{var ne=this.i[G];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(j+=ne,4096<j){j=G;break e}if(j===4096||G===this.i.length-1){j=G+1;break e}}j=1e3}else j=1e3;j=Uu(this,De,j),G=ut(this.I),Kt(G,"RID",A),Kt(G,"CVER",22),this.D&&Kt(G,"X-HTTP-Session-Id",this.D),ab(this,G),ze&&(this.O?j="headers="+encodeURIComponent(String(Iw(ze)))+"&"+j:this.m&&le(G,this.m,ze)),ee(this.h,De),this.Ua&&Kt(G,"TYPE","init"),this.P?(Kt(G,"$req",j),Kt(G,"SID","null"),De.T=!0,on(De,G,null)):on(De,G,j),this.G=2}}else this.G==3&&(A?Qa(this,A):this.i.length==0||go(this.h)||Qa(this))};function Qa(A,j){var G;j?G=j.l:G=A.U++;const ne=ut(A.I);Kt(ne,"SID",A.K),Kt(ne,"RID",G),Kt(ne,"AID",A.T),ab(A,ne),A.m&&A.o&&le(ne,A.m,A.o),G=new ur(A,A.j,G,A.B+1),A.m===null&&(G.H=A.o),j&&(A.i=j.D.concat(A.i)),j=Uu(A,G,1e3),G.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),ee(A.h,G),on(G,ne,j)}function ab(A,j){A.H&&T(A.H,function(G,ne){Kt(j,ne,G)}),A.l&&be({},function(G,ne){Kt(j,ne,G)})}function Uu(A,j,G){G=Math.min(A.i.length,G);var ne=A.l?d(A.l.Na,A.l,A):null;e:{var De=A.i;let ze=-1;for(;;){const At=["count="+G];ze==-1?0<G?(ze=De[0].g,At.push("ofs="+ze)):ze=0:At.push("ofs="+ze);let ci=!0;for(let Ro=0;Ro<G;Ro++){let kr=De[Ro].g;const yi=De[Ro].map;if(kr-=ze,0>kr)ze=Math.max(0,De[Ro].g-100),ci=!1;else try{Cw(yi,At,"req"+kr+"_")}catch{ne&&ne(yi)}}if(ci){ne=At.join("&");break e}}}return A=A.i.splice(0,G),j.D=A,ne}function $P(A){if(!A.g&&!A.u){A.Y=1;var j=A.Fa;Y||F(),K||(Y(),K=!0),J.add(j,A),A.v=0}}function kw(A){return A.g||A.u||3<=A.v?!1:(A.Y++,A.u=ai(d(A.Fa,A),Pd(A,A.v)),A.v++,!0)}e.Fa=function(){if(this.u=null,ub(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=ai(d(this.ab,this),A)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gi(10),sb(this),ub(this))};function Sf(A){A.A!=null&&(a.clearTimeout(A.A),A.A=null)}function ub(A){A.g=new ur(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var j=ut(A.qa);Kt(j,"RID","rpc"),Kt(j,"SID",A.K),Kt(j,"AID",A.T),Kt(j,"CI",A.F?"0":"1"),!A.F&&A.ja&&Kt(j,"TO",A.ja),Kt(j,"TYPE","xmlhttp"),ab(A,j),A.m&&A.o&&le(j,A.m,A.o),A.L&&(A.g.I=A.L);var G=A.g;A=A.ia,G.L=1,G.v=er(ut(j)),G.m=null,G.P=!0,Ar(G,A)}e.Za=function(){this.C!=null&&(this.C=null,sb(this),kw(this),gi(19))};function ay(A){A.C!=null&&(a.clearTimeout(A.C),A.C=null)}function zi(A,j){var G=null;if(A.g==j){ay(A),Sf(A),A.g=null;var ne=2}else if(Ef(A.h,j))G=j.D,pe(A.h,j),ne=1;else return;if(A.G!=0){if(j.o)if(ne==1){G=j.m?j.m.length:0,j=Date.now()-j.F;var De=A.B;ne=Qo(),$e(ne,new Qs(ne,G)),ob(A)}else $P(A);else if(De=j.s,De==3||De==0&&0<j.X||!(ne==1&&OP(A,j)||ne==2&&kw(A)))switch(G&&0<G.length&&(j=A.h,j.i=j.i.concat(G)),De){case 1:Od(A,5);break;case 4:Od(A,10);break;case 3:Od(A,6);break;default:Od(A,2)}}}function Pd(A,j){let G=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||(G*=2),G*j}function Od(A,j){if(A.j.info("Error code "+j),j==2){var G=d(A.fb,A),ne=A.Xa;const De=!ne;ne=new at(ne||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vt(ne,"https"),er(ne),De?Tw(ne.toString(),G):Dd(ne.toString(),G)}else gi(2);A.G=0,A.l&&A.l.sa(j),MP(A),PC(A)}e.fb=function(A){A?(this.j.info("Successfully pinged google.com"),gi(2)):(this.j.info("Failed to ping google.com"),gi(1))};function MP(A){if(A.G=0,A.ka=[],A.l){const j=se(A.h);(j.length!=0||A.i.length!=0)&&(g(A.ka,j),g(A.ka,A.i),A.h.i.length=0,m(A.i),A.i.length=0),A.l.ra()}}function Rw(A,j,G){var ne=G instanceof at?ut(G):new at(G);if(ne.g!="")j&&(ne.g=j+"."+ne.g),Mt(ne,ne.s);else{var De=a.location;ne=De.protocol,j=j?j+"."+De.hostname:De.hostname,De=+De.port;var ze=new at(null);ne&&vt(ze,ne),j&&(ze.g=j),De&&Mt(ze,De),G&&(ze.l=G),ne=ze}return G=A.D,j=A.ya,G&&j&&Kt(ne,G,j),Kt(ne,"VER",A.la),ab(A,ne),ne}function LP(A,j,G){if(j&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=A.Ca&&!A.pa?new ye(new Ym({eb:G})):new ye(A.pa),j.Ha(A.J),j}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function FP(){}e=FP.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Dw(){}Dw.prototype.g=function(A,j){return new Ja(A,j)};function Ja(A,j){Ee.call(this),this.g=new Xm(j),this.l=A,this.h=j&&j.messageUrlParams||null,A=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(A?A["X-WebChannel-Content-Type"]=j.messageContentType:A={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(A?A["X-WebChannel-Client-Profile"]=j.va:A={"X-WebChannel-Client-Profile":j.va}),this.g.S=A,(A=j&&j.Sb)&&!v(A)&&(this.g.m=A),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!v(j)&&(this.g.D=j,A=this.h,A!==null&&j in A&&(A=this.h,j in A&&delete A[j])),this.j=new uy(this)}p(Ja,Ee),Ja.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ja.prototype.close=function(){Qm(this.g)},Ja.prototype.o=function(A){var j=this.g;if(typeof A=="string"){var G={};G.__data__=A,A=G}else this.u&&(G={},G.__data__=Tn(A),A=G);j.i.push(new Ao(j.Ya++,A)),j.G==3&&ob(j)},Ja.prototype.N=function(){this.g.l=null,delete this.j,Qm(this.g),delete this.g,Ja.aa.N.call(this)};function lb(A){Ps.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var j=A.__sm__;if(j){e:{for(const G in j){A=G;break e}A=void 0}(this.i=A)&&(A=this.i,j=j!==null&&A in j?j[A]:void 0),this.data=j}else this.data=A}p(lb,Ps);function Jm(){Vr.call(this),this.status=1}p(Jm,Vr);function uy(A){this.g=A}p(uy,FP),uy.prototype.ua=function(){$e(this.g,"a")},uy.prototype.ta=function(A){$e(this.g,new lb(A))},uy.prototype.sa=function(A){$e(this.g,new Jm)},uy.prototype.ra=function(){$e(this.g,"b")},Dw.prototype.createWebChannel=Dw.prototype.g,Ja.prototype.send=Ja.prototype.o,Ja.prototype.open=Ja.prototype.m,Ja.prototype.close=Ja.prototype.close,fze=function(){return new Dw},cze=function(){return Qo()},lze=hs,YK={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,$6=_t,Ut.COMPLETE="complete",uze=Ut,ts.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,LI=ts,aze=Ym,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,oze=ye}).apply(typeof a4<"u"?a4:typeof self<"u"?self:typeof window<"u"?window:{});const ywe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ll.UNAUTHENTICATED=new Ll(null),Ll.GOOGLE_CREDENTIALS=new Ll("google-credentials-uid"),Ll.FIRST_PARTY=new Ll("first-party-uid"),Ll.MOCK_USER=new Ll("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IC="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new D9("@firebase/firestore");function WA(){return D_.logLevel}function Yt(e,...t){if(D_.logLevel<=Pr.DEBUG){const n=t.map(mue);D_.debug(`Firestore (${IC}): ${e}`,...n)}}function Pg(e,...t){if(D_.logLevel<=Pr.ERROR){const n=t.map(mue);D_.error(`Firestore (${IC}): ${e}`,...n)}}function ED(e,...t){if(D_.logLevel<=Pr.WARN){const n=t.map(mue);D_.warn(`Firestore (${IC}): ${e}`,...n)}}function mue(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e="Unexpected state"){const t=`FIRESTORE (${IC}) INTERNAL ASSERTION FAILED: `+e;throw Pg(t),new Error(t)}function Ji(e,t){e||Nn()}function jn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends Gm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0n{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class J0n{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ll.UNAUTHENTICATED))}shutdown(){}}class Z0n{constructor(t){this.t=t,this.currentUser=Ll.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new og;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new og,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new og)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ji(typeof r.accessToken=="string"),new Q0n(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ji(t===null||typeof t=="string"),new Ll(t)}}class egn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ll.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tgn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new egn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ll.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ngn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rgn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Yt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ji(typeof n.token=="string"),this.R=n.token,new ngn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ign(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dze{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=ign(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function di(e,t){return e<t?-1:e>t?1:0}function s2(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ho.fromMillis(Date.now())}static fromDate(t){return Ho.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ho(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?di(this.nanoseconds,t.nanoseconds):di(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bn(t)}static min(){return new Bn(new Ho(0,0))}static max(){return new Bn(new Ho(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t,n,r){n===void 0?n=0:n>t.length&&Nn(),r===void 0?r=t.length-n:r>t.length-n&&Nn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return SD.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof SD?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ls extends SD{construct(t,n,r){return new ls(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Lt(rt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ls(n)}static emptyPath(){return new ls([])}}const sgn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pa extends SD{construct(t,n,r){return new Pa(t,n,r)}static isValidIdentifier(t){return sgn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pa.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pa(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Lt(rt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Lt(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Lt(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Lt(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pa(n)}static emptyPath(){return new Pa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.path=t}static fromPath(t){return new cn(ls.fromString(t))}static fromName(t){return new cn(ls.fromString(t).popFirst(5))}static empty(){return new cn(ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ls.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ls.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new cn(new ls(t.slice()))}}function ogn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Bn.fromTimestamp(r===1e9?new Ho(n+1,0):new Ho(n,r));return new vv(i,cn.empty(),t)}function agn(e){return new vv(e.readTime,e.key,-1)}class vv{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new vv(Bn.min(),cn.empty(),-1)}static max(){return new vv(Bn.max(),cn.empty(),-1)}}function ugn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=cn.comparator(e.documentKey,t.documentKey),n!==0?n:di(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lgn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cgn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(e){if(e.code!==rt.FAILED_PRECONDITION||e.message!==lgn)throw e;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(i=>i?dt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new dt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function fgn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function SP(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gue{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}gue.oe=-1;function F9(e){return e==null}function vF(e){return e===0&&1/e==-1/0}function dgn(e){return typeof e=="number"&&Number.isInteger(e)&&!vF(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vwe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _w(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hze(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n){this.comparator=t,this.root=n||Da.EMPTY}insert(t,n){return new Ns(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Da.BLACK,null,null))}remove(t){return new Ns(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Da.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new u4(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new u4(this.root,t,this.comparator,!1)}getReverseIterator(){return new u4(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new u4(this.root,t,this.comparator,!0)}}class u4{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Da{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Da.RED,this.left=i??Da.EMPTY,this.right=s??Da.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Da(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Da.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Da.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Da.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();const t=this.left.check();if(t!==this.right.check())throw Nn();return t+(this.isRed()?0:1)}}Da.EMPTY=null,Da.RED=!0,Da.BLACK=!1;Da.EMPTY=new class{constructor(){this.size=0}get key(){throw Nn()}get value(){throw Nn()}get color(){throw Nn()}get left(){throw Nn()}get right(){throw Nn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Da(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t){this.comparator=t,this.data=new Ns(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bwe(this.data.getIterator())}getIteratorFrom(t){return new bwe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ua)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ua(this.comparator);return n.data=t,n}}class bwe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t){this.fields=t,t.sort(Pa.comparator)}static empty(){return new Xc([])}unionWith(t){let n=new Ua(Pa.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Xc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return s2(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pze extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pze("Invalid base64 string: "+s):s}}(t);return new Ou(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ou(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return di(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ou.EMPTY_BYTE_STRING=new Ou("");const hgn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bv(e){if(Ji(!!e),typeof e=="string"){let t=0;const n=hgn.exec(e);if(Ji(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xo(e.seconds),nanos:xo(e.nanos)}}function xo(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function N_(e){return typeof e=="string"?Ou.fromBase64String(e):Ou.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yue(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vue(e){const t=e.mapValue.fields.__previous_value__;return yue(t)?vue(t):t}function TD(e){const t=bv(e.mapValue.fields.__local_write_time__.timestampValue);return new Ho(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pgn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class CD{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new CD("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof CD&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function P_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yue(e)?4:mgn(e)?9007199254740991:10:Nn()}function Tm(e,t){if(e===t)return!0;const n=P_(e);if(n!==P_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return TD(e).isEqual(TD(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bv(i.timestampValue),a=bv(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return N_(i.bytesValue).isEqual(N_(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return xo(i.geoPointValue.latitude)===xo(s.geoPointValue.latitude)&&xo(i.geoPointValue.longitude)===xo(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xo(i.integerValue)===xo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=xo(i.doubleValue),a=xo(s.doubleValue);return o===a?vF(o)===vF(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return s2(e.arrayValue.values||[],t.arrayValue.values||[],Tm);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vwe(o)!==vwe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Tm(o[u],a[u])))return!1;return!0}(e,t);default:return Nn()}}function AD(e,t){return(e.values||[]).find(n=>Tm(n,t))!==void 0}function o2(e,t){if(e===t)return 0;const n=P_(e),r=P_(t);if(n!==r)return di(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return di(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=xo(s.integerValue||s.doubleValue),u=xo(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return xwe(e.timestampValue,t.timestampValue);case 4:return xwe(TD(e),TD(t));case 5:return di(e.stringValue,t.stringValue);case 6:return function(s,o){const a=N_(s),u=N_(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=di(a[l],u[l]);if(c!==0)return c}return di(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=di(xo(s.latitude),xo(o.latitude));return a!==0?a:di(xo(s.longitude),xo(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=o2(a[l],u[l]);if(c)return c}return di(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===l4.mapValue&&o===l4.mapValue)return 0;if(s===l4.mapValue)return 1;if(o===l4.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=di(u[f],c[f]);if(d!==0)return d;const h=o2(a[u[f]],l[c[f]]);if(h!==0)return h}return di(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Nn()}}function xwe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return di(e,t);const n=bv(e),r=bv(t),i=di(n.seconds,r.seconds);return i!==0?i:di(n.nanos,r.nanos)}function a2(e){return KK(e)}function KK(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=bv(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return N_(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return cn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=KK(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${KK(n.fields[o])}`;return i+"}"}(e.mapValue):Nn()}function _we(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function XK(e){return!!e&&"integerValue"in e}function bue(e){return!!e&&"arrayValue"in e}function wwe(e){return!!e&&"nullValue"in e}function Ewe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function M6(e){return!!e&&"mapValue"in e}function Lk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _w(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Lk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function mgn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t){this.value=t}static empty(){return new Yl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!M6(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Lk(n)}setAll(t){let n=Pa.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Lk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());M6(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Tm(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];M6(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){_w(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Yl(Lk(this.value))}}function mze(e){const t=[];return _w(e.fields,(n,r)=>{const i=new Pa([n]);if(M6(r)){const s=mze(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Xc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new yu(t,0,Bn.min(),Bn.min(),Bn.min(),Yl.empty(),0)}static newFoundDocument(t,n,r,i){return new yu(t,1,n,Bn.min(),r,i,0)}static newNoDocument(t,n){return new yu(t,2,n,Bn.min(),Bn.min(),Yl.empty(),0)}static newUnknownDocument(t,n){return new yu(t,3,n,Bn.min(),Bn.min(),Yl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Bn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(t,n){this.position=t,this.inclusive=n}}function Swe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=cn.comparator(cn.fromName(o.referenceValue),n.key):r=o2(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Twe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tm(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n="asc"){this.field=t,this.dir=n}}function ggn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gze{}class wo extends gze{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new vgn(t,n,r):n==="array-contains"?new _gn(t,r):n==="in"?new wgn(t,r):n==="not-in"?new Egn(t,r):n==="array-contains-any"?new Sgn(t,r):new wo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new bgn(t,r):new xgn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(o2(n,this.value)):n!==null&&P_(this.value)===P_(n)&&this.matchesComparison(o2(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zh extends gze{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new zh(t,n)}matches(t){return yze(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yze(e){return e.op==="and"}function vze(e){return ygn(e)&&yze(e)}function ygn(e){for(const t of e.filters)if(t instanceof zh)return!1;return!0}function QK(e){if(e instanceof wo)return e.field.canonicalString()+e.op.toString()+a2(e.value);if(vze(e))return e.filters.map(t=>QK(t)).join(",");{const t=e.filters.map(n=>QK(n)).join(",");return`${e.op}(${t})`}}function bze(e,t){return e instanceof wo?function(r,i){return i instanceof wo&&r.op===i.op&&r.field.isEqual(i.field)&&Tm(r.value,i.value)}(e,t):e instanceof zh?function(r,i){return i instanceof zh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bze(o,i.filters[a]),!0):!1}(e,t):void Nn()}function xze(e){return e instanceof wo?function(n){return`${n.field.canonicalString()} ${n.op} ${a2(n.value)}`}(e):e instanceof zh?function(n){return n.op.toString()+" {"+n.getFilters().map(xze).join(" ,")+"}"}(e):"Filter"}class vgn extends wo{constructor(t,n,r){super(t,n,r),this.key=cn.fromName(r.referenceValue)}matches(t){const n=cn.comparator(t.key,this.key);return this.matchesComparison(n)}}class bgn extends wo{constructor(t,n){super(t,"in",n),this.keys=_ze("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class xgn extends wo{constructor(t,n){super(t,"not-in",n),this.keys=_ze("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function _ze(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>cn.fromName(r.referenceValue))}class _gn extends wo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return bue(n)&&AD(n.arrayValue,this.value)}}class wgn extends wo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&AD(this.value.arrayValue,n)}}class Egn extends wo{constructor(t,n){super(t,"not-in",n)}matches(t){if(AD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!AD(this.value.arrayValue,n)}}class Sgn extends wo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!bue(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>AD(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tgn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Cwe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Tgn(e,t,n,r,i,s,o)}function xue(e){const t=jn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>QK(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),F9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>a2(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>a2(r)).join(",")),t.ue=n}return t.ue}function _ue(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ggn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bze(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Twe(e.startAt,t.startAt)&&Twe(e.endAt,t.endAt)}function JK(e){return cn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Cgn(e,t,n,r,i,s,o,a){return new kC(e,t,n,r,i,s,o,a)}function wue(e){return new kC(e)}function Awe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function wze(e){return e.collectionGroup!==null}function Fk(e){const t=jn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ua(Pa.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ID(s,r))}),n.has(Pa.keyField().canonicalString())||t.ce.push(new ID(Pa.keyField(),r))}return t.ce}function im(e){const t=jn(e);return t.le||(t.le=Agn(t,Fk(e))),t.le}function Agn(e,t){if(e.limitType==="F")return Cwe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ID(i.field,s)});const n=e.endAt?new bF(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new bF(e.startAt.position,e.startAt.inclusive):null;return Cwe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ZK(e,t){const n=e.filters.concat([t]);return new kC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function eX(e,t,n){return new kC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function B9(e,t){return _ue(im(e),im(t))&&e.limitType===t.limitType}function Eze(e){return`${xue(im(e))}|lt:${e.limitType}`}function DE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xze(i)).join(", ")}]`),F9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>a2(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>a2(i)).join(",")),`Target(${r})`}(im(e))}; limitType=${e.limitType})`}function j9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):cn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Fk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Swe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Fk(r),i)||r.endAt&&!function(o,a,u){const l=Swe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Fk(r),i))}(e,t)}function Ign(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Sze(e){return(t,n)=>{let r=!1;for(const i of Fk(e)){const s=kgn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function kgn(e,t,n){const r=e.field.isKeyField()?cn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?o2(u,l):Nn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){_w(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return hze(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rgn=new Ns(cn.comparator);function Og(){return Rgn}const Tze=new Ns(cn.comparator);function FI(...e){let t=Tze;for(const n of e)t=t.insert(n.key,n);return t}function Cze(e){let t=Tze;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ax(){return Bk()}function Aze(){return Bk()}function Bk(){return new RC(e=>e.toString(),(e,t)=>e.isEqual(t))}const Dgn=new Ns(cn.comparator),Ngn=new Ua(cn.comparator);function xr(...e){let t=Ngn;for(const n of e)t=t.add(n);return t}const Pgn=new Ua(di);function Ogn(){return Pgn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ize(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vF(t)?"-0":t}}function kze(e){return{integerValue:""+e}}function $gn(e,t){return dgn(t)?kze(t):Ize(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this._=void 0}}function Mgn(e,t,n){return e instanceof kD?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yue(s)&&(s=vue(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof RD?Dze(e,t):e instanceof DD?Nze(e,t):function(i,s){const o=Rze(i,s),a=Iwe(o)+Iwe(i.Pe);return XK(o)&&XK(i.Pe)?kze(a):Ize(i.serializer,a)}(e,t)}function Lgn(e,t,n){return e instanceof RD?Dze(e,t):e instanceof DD?Nze(e,t):n}function Rze(e,t){return e instanceof xF?function(r){return XK(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class kD extends U9{}class RD extends U9{constructor(t){super(),this.elements=t}}function Dze(e,t){const n=Pze(t);for(const r of e.elements)n.some(i=>Tm(i,r))||n.push(r);return{arrayValue:{values:n}}}class DD extends U9{constructor(t){super(),this.elements=t}}function Nze(e,t){let n=Pze(t);for(const r of e.elements)n=n.filter(i=>!Tm(i,r));return{arrayValue:{values:n}}}class xF extends U9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Iwe(e){return xo(e.integerValue||e.doubleValue)}function Pze(e){return bue(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fgn{constructor(t,n){this.field=t,this.transform=n}}function Bgn(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof RD&&i instanceof RD||r instanceof DD&&i instanceof DD?s2(r.elements,i.elements,Tm):r instanceof xF&&i instanceof xF?Tm(r.Pe,i.Pe):r instanceof kD&&i instanceof kD}(e.transform,t.transform)}class jgn{constructor(t,n){this.version=t,this.transformResults=n}}class rf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new rf}static exists(t){return new rf(void 0,t)}static updateTime(t){return new rf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function L6(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class z9{}function Oze(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Eue(e.key,rf.none()):new TP(e.key,e.data,rf.none());{const n=e.data,r=Yl.empty();let i=new Ua(Pa.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new tb(e.key,r,new Xc(i.toArray()),rf.none())}}function Ugn(e,t,n){e instanceof TP?function(i,s,o){const a=i.value.clone(),u=Rwe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof tb?function(i,s,o){if(!L6(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Rwe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll($ze(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function jk(e,t,n,r){return e instanceof TP?function(s,o,a,u){if(!L6(s.precondition,o))return a;const l=s.value.clone(),c=Dwe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof tb?function(s,o,a,u){if(!L6(s.precondition,o))return a;const l=Dwe(s.fieldTransforms,u,o),c=o.data;return c.setAll($ze(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return L6(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function zgn(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Rze(r.transform,i||null);s!=null&&(n===null&&(n=Yl.empty()),n.set(r.field,s))}return n||null}function kwe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&s2(r,i,(s,o)=>Bgn(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class TP extends z9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tb extends z9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $ze(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Rwe(e,t,n){const r=new Map;Ji(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Lgn(o,a,n[i]))}return r}function Dwe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Mgn(s,o,t))}return r}class Eue extends z9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vgn extends z9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hgn{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Ugn(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=jk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=jk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Aze();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Oze(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Bn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),xr())}isEqual(t){return this.batchId===t.batchId&&s2(this.mutations,t.mutations,(n,r)=>kwe(n,r))&&s2(this.baseMutations,t.baseMutations,(n,r)=>kwe(n,r))}}class Sue{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Ji(t.mutations.length===r.length);let i=function(){return Dgn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Sue(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qgn{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wgn{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vo,jr;function Ggn(e){switch(e){default:return Nn();case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0}}function Mze(e){if(e===void 0)return Pg("GRPC error has no .code"),rt.UNKNOWN;switch(e){case vo.OK:return rt.OK;case vo.CANCELLED:return rt.CANCELLED;case vo.UNKNOWN:return rt.UNKNOWN;case vo.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case vo.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case vo.INTERNAL:return rt.INTERNAL;case vo.UNAVAILABLE:return rt.UNAVAILABLE;case vo.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case vo.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case vo.NOT_FOUND:return rt.NOT_FOUND;case vo.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case vo.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case vo.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case vo.ABORTED:return rt.ABORTED;case vo.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case vo.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case vo.DATA_LOSS:return rt.DATA_LOSS;default:return Nn()}}(jr=vo||(vo={}))[jr.OK=0]="OK",jr[jr.CANCELLED=1]="CANCELLED",jr[jr.UNKNOWN=2]="UNKNOWN",jr[jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jr[jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jr[jr.NOT_FOUND=5]="NOT_FOUND",jr[jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",jr[jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",jr[jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",jr[jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jr[jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jr[jr.ABORTED=10]="ABORTED",jr[jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",jr[jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",jr[jr.INTERNAL=13]="INTERNAL",jr[jr.UNAVAILABLE=14]="UNAVAILABLE",jr[jr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ygn(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kgn=new Vx([4294967295,4294967295],0);function Nwe(e){const t=Ygn().encode(e),n=new sze;return n.update(t),new Uint8Array(n.digest())}function Pwe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Vx([n,r],0),new Vx([i,s],0)]}class Tue{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new BI(`Invalid padding: ${n}`);if(r<0)throw new BI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new BI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new BI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Vx.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Vx.fromNumber(r)));return i.compare(Kgn)===1&&(i=new Vx([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Nwe(t),[r,i]=Pwe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Tue(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Nwe(t),[r,i]=Pwe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class BI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,CP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new V9(Bn.min(),i,new Ns(di),Og(),xr())}}class CP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new CP(r,n,xr(),xr(),xr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Lze{constructor(t,n){this.targetId=t,this.me=n}}class Fze{constructor(t,n,r=Ou.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Owe{constructor(){this.fe=0,this.ge=Mwe(),this.pe=Ou.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=xr(),n=xr(),r=xr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Nn()}}),new CP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Mwe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ji(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xgn{constructor(t){this.Le=t,this.Be=new Map,this.ke=Og(),this.qe=$we(),this.Qe=new Ns(di)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Nn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(JK(s))if(r===0){const o=new cn(s.path);this.Ue(n,o,yu.newNoDocument(o,Bn.min()))}else Ji(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=N_(r).toUint8Array()}catch(u){if(u instanceof pze)return ED("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Tue(o,i,s)}catch(u){return ED(u instanceof BI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&JK(a.target)){const u=new cn(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,yu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=xr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new V9(t,n,this.Qe,this.ke,r);return this.ke=Og(),this.qe=$we(),this.Qe=new Ns(di),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Owe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ua(di),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Owe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function $we(){return new Ns(cn.comparator)}function Mwe(){return new Ns(cn.comparator)}const Qgn={asc:"ASCENDING",desc:"DESCENDING"},Jgn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zgn={and:"AND",or:"OR"};class eyn{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function tX(e,t){return e.useProto3Json||F9(t)?t:{value:t}}function _F(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Bze(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tyn(e,t){return _F(e,t.toTimestamp())}function sm(e){return Ji(!!e),Bn.fromTimestamp(function(n){const r=bv(n);return new Ho(r.seconds,r.nanos)}(e))}function Cue(e,t){return nX(e,t).canonicalString()}function nX(e,t){const n=function(i){return new ls(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function jze(e){const t=ls.fromString(e);return Ji(qze(t)),t}function rX(e,t){return Cue(e.databaseId,t.path)}function pH(e,t){const n=jze(t);if(n.get(1)!==e.databaseId.projectId)throw new Lt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cn(zze(n))}function Uze(e,t){return Cue(e.databaseId,t)}function nyn(e){const t=jze(e);return t.length===4?ls.emptyPath():zze(t)}function iX(e){return new ls(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zze(e){return Ji(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Lwe(e,t,n){return{name:rX(e,t),fields:n.value.mapValue.fields}}function ryn(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Nn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Ji(c===void 0||typeof c=="string"),Ou.fromBase64String(c||"")):(Ji(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ou.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?rt.UNKNOWN:Mze(l.code);return new Lt(c,l.message||"")}(o);n=new Fze(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=pH(e,r.document.name),s=sm(r.document.updateTime),o=r.document.createTime?sm(r.document.createTime):Bn.min(),a=new Yl({mapValue:{fields:r.document.fields}}),u=yu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new F6(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=pH(e,r.document),s=r.readTime?sm(r.readTime):Bn.min(),o=yu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new F6([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=pH(e,r.document),s=r.removedTargetIds||[];n=new F6([],s,i,null)}else{if(!("filter"in t))return Nn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Wgn(i,s),a=r.targetId;n=new Lze(a,o)}}return n}function iyn(e,t){let n;if(t instanceof TP)n={update:Lwe(e,t.key,t.value)};else if(t instanceof Eue)n={delete:rX(e,t.key)};else if(t instanceof tb)n={update:Lwe(e,t.key,t.data),updateMask:hyn(t.fieldMask)};else{if(!(t instanceof Vgn))return Nn();n={verify:rX(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof kD)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof RD)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof DD)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xF)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Nn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:tyn(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Nn()}(e,t.precondition)),n}function syn(e,t){return e&&e.length>0?(Ji(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?sm(i.updateTime):sm(s);return o.isEqual(Bn.min())&&(o=sm(s)),new jgn(o,i.transformResults||[])}(n,t))):[]}function oyn(e,t){return{documents:[Uze(e,t.path)]}}function ayn(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uze(e,i);const s=function(l){if(l.length!==0)return Hze(zh.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:NE(d.field),direction:cyn(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=tX(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function uyn(e){let t=nyn(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ji(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=Vze(f);return d instanceof zh&&vze(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new ID(PE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,F9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new bF(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new bF(h,d)}(n.endAt)),Cgn(t,i,o,s,a,"F",u,l)}function lyn(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Vze(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=PE(n.unaryFilter.field);return wo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=PE(n.unaryFilter.field);return wo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=PE(n.unaryFilter.field);return wo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=PE(n.unaryFilter.field);return wo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Nn()}}(e):e.fieldFilter!==void 0?function(n){return wo.create(PE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return zh.create(n.compositeFilter.filters.map(r=>Vze(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Nn()}}(n.compositeFilter.op))}(e):Nn()}function cyn(e){return Qgn[e]}function fyn(e){return Jgn[e]}function dyn(e){return Zgn[e]}function NE(e){return{fieldPath:e.canonicalString()}}function PE(e){return Pa.fromServerFormat(e.fieldPath)}function Hze(e){return e instanceof wo?function(n){if(n.op==="=="){if(Ewe(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NAN"}};if(wwe(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ewe(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NOT_NAN"}};if(wwe(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:NE(n.field),op:fyn(n.op),value:n.value}}}(e):e instanceof zh?function(n){const r=n.getFilters().map(i=>Hze(i));return r.length===1?r[0]:{compositeFilter:{op:dyn(n.op),filters:r}}}(e):Nn()}function hyn(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qze(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t,n,r,i,s=Bn.min(),o=Bn.min(),a=Ou.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new c1(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new c1(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new c1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new c1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pyn{constructor(t){this.ct=t}}function myn(e){const t=uyn({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?eX(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gyn{constructor(){this._n=new yyn}addToCollectionParentIndex(t,n){return this._n.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(vv.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(vv.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class yyn{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ua(ls.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ua(ls.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new u2(0)}static Ln(){return new u2(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vyn{constructor(){this.changes=new RC(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class byn{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xyn{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&jk(r.mutation,i,Xc.empty(),Ho.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,xr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=xr()){const i=Ax();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=FI();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Ax();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,xr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Og();const o=Bk(),a=function(){return Bk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof tb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),jk(c.mutation,l,c.mutation.getFieldMask(),Ho.now())):o.set(l.key,Xc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new byn(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Bk();let i=new Ns((o,a)=>o-a),s=xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Xc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||xr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Aze();c.forEach(d=>{if(!s.has(d)){const h=Oze(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return dt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return cn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):wze(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):dt.resolve(Ax());let a=-1,u=s;return o.next(l=>dt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?dt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,xr())).next(c=>({batchId:a,changes:Cze(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new cn(n)).next(r=>{let i=FI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=FI();return this.indexManager.getCollectionParents(t,s).next(a=>dt.forEach(a,u=>{const l=function(f,d){return new kC(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,yu.newInvalidDocument(c)))});let a=FI();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&jk(c.mutation,l,Xc.empty(),Ho.now()),j9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _yn{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return dt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sm(i.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:myn(i.bundledQuery),readTime:sm(i.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wyn{constructor(){this.overlays=new Ns(cn.comparator),this.hr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ax();return dt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const i=Ax(),s=n.length+1,o=new cn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return dt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ns((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Ax(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Ax(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return dt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qgn(n,r));let s=this.hr.get(n);s===void 0&&(s=xr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(){this.Pr=new Ua(ra.Ir),this.Tr=new Ua(ra.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new ra(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new ra(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new cn(new ls([])),r=new ra(n,t),i=new ra(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new cn(new ls([])),r=new ra(n,t),i=new ra(n,t+1);let s=xr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ra(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ra{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return cn.comparator(t.key,n.key)||di(t.pr,n.pr)}static Er(t,n){return di(t.pr,n.pr)||cn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eyn{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ua(ra.Ir)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Hgn(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ra(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return dt.resolve(o)}lookupMutationBatch(t,n){return dt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ra(n,0),i=new ra(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ua(di);return n.forEach(i=>{const s=new ra(i,0),o=new ra(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),dt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;cn.isDocumentKey(s)||(s=s.child(""));const o=new ra(new cn(s),0);let a=new Ua(di);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),dt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Ji(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return dt.forEach(n.mutations,i=>{const s=new ra(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new ra(n,0),i=this.wr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Syn{constructor(t){this.vr=t,this.docs=function(){return new Ns(cn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():yu.newInvalidDocument(n))}getEntries(t,n){let r=Og();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yu.newInvalidDocument(i))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Og();const o=n.path,a=new cn(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ugn(agn(c),r)<=0||(i.has(c.key)||j9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return dt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Nn()}Fr(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Tyn(this)}getSize(t){return dt.resolve(this.size)}}class Tyn extends vyn{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cyn{constructor(t){this.persistence=t,this.Mr=new RC(n=>xue(n),_ue),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Aue,this.targetCount=0,this.Lr=u2.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),dt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new u2(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.qn(n),dt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),dt.waitFor(s).next(()=>i)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),dt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ayn{constructor(t,n){this.Br={},this.overlays={},this.kr=new gue(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Cyn(this),this.indexManager=new gyn,this.remoteDocumentCache=function(i){return new Syn(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new pyn(n),this.$r=new _yn(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new wyn,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new Eyn(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Yt("MemoryPersistence","Starting transaction:",t);const i=new Iyn(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return dt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class Iyn extends cgn{constructor(t){super(),this.currentSequenceNumber=t}}class Iue{constructor(t){this.persistence=t,this.zr=new Aue,this.jr=null}static Hr(t){return new Iue(t)}get Jr(){if(this.jr)return this.jr;throw Nn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),dt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.Jr,r=>{const i=cn.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Bn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return dt.or([()=>dt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kue{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=xr(),i=xr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new kue(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kyn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ryn{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cdn()?8:fgn(Wa())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new kyn;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(WA()<=Pr.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",DE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),dt.resolve()):(WA()<=Pr.DEBUG&&Yt("QueryEngine","Query:",DE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(WA()<=Pr.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",DE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,im(n))):dt.resolve())}ji(t,n){if(Awe(n))return dt.resolve(null);let r=im(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=eX(n,null,"F"),r=im(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=xr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,eX(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Awe(n)||i.isEqual(Bn.min())?dt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?dt.resolve(null):(WA()<=Pr.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),DE(n)),this.es(t,o,n,ogn(i,-1)).next(a=>a))})}Zi(t,n){let r=new Ua(Sze(t));return n.forEach((i,s)=>{j9(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return WA()<=Pr.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",DE(n)),this.zi.getDocumentsMatchingQuery(t,n,vv.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dyn{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ns(di),this.rs=new RC(s=>xue(s),_ue),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xyn(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function Nyn(e,t,n,r){return new Dyn(e,t,n,r)}async function Wze(e,t){const n=jn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=xr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function Pyn(e,t){const n=jn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=dt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Ji(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=xr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Gze(e){const t=jn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function Oyn(e,t){const n=jn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ou.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Og(),l=xr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push($yn(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Bn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return dt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function $yn(e,t,n){let r=xr(),i=xr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Og();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Bn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Yt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function Myn(e,t){const n=jn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Lyn(e,t){const n=jn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,dt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new c1(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function sX(e,t,n){const r=jn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!SP(o))throw o;Yt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Fwe(e,t,n){const r=jn(e);let i=Bn.min(),s=xr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=jn(u),d=f.rs.get(c);return d!==void 0?dt.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,im(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Bn.min(),n?s:xr())).next(a=>(Fyn(r,Ign(t),a),{documents:a,hs:s})))}function Fyn(e,t,n){let r=e.ss.get(t)||Bn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Bwe{constructor(){this.activeTargetIds=Ogn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Byn{constructor(){this.no=new Bwe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Bwe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jyn{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jwe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c4=null;function mH(){return c4===null?c4=function(){return 268435456+Math.round(2147483648*Math.random())}():c4++,"0x"+c4.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uyn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zyn{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="WebChannelConnection";class Vyn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=mH(),u=this.vo(n,r.toUriEncodedString());Yt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Yt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw ED("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+IC}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=Uyn[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=mH();return new Promise((o,a)=>{const u=new oze;u.setWithCredentials(!0),u.listenOnce(uze.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $6.NO_ERROR:const c=u.getResponseJson();Yt(uu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case $6.TIMEOUT:Yt(uu,`RPC '${t}' ${s} timed out`),a(new Lt(rt.DEADLINE_EXCEEDED,"Request time out"));break;case $6.HTTP_ERROR:const f=u.getStatus();if(Yt(uu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(y)>=0?y:rt.UNKNOWN}(h.status);a(new Lt(p,h.message))}else a(new Lt(rt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Lt(rt.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{Yt(uu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Yt(uu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=mH(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=fze(),a=cze(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new aze({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Yt(uu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new zyn({lo:g=>{h?Yt(uu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Yt(uu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Yt(uu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,x=>{try{v(x)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,LI.EventType.OPEN,()=>{h||(Yt(uu,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,LI.EventType.CLOSE,()=>{h||(h=!0,Yt(uu,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,LI.EventType.ERROR,g=>{h||(h=!0,ED(uu,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Lt(rt.UNAVAILABLE,"The operation could not be completed")))}),m(f,LI.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Ji(!!v);const x=v,w=x.error||((y=x[0])===null||y===void 0?void 0:y.error);if(w){Yt(uu,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let T=function(N){const k=vo[N];if(k!==void 0)return Mze(k)}(E),C=w.message;T===void 0&&(T=rt.INTERNAL,C="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new Lt(T,C)),f.close()}else Yt(uu,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,lze.STAT_EVENT,g=>{g.stat===YK.PROXY?Yt(uu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===YK.NOPROXY&&Yt(uu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function gH(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(e){return new eyn(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yze{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kze{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Yze(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===rt.RESOURCE_EXHAUSTED?(Pg(n.toString()),Pg("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Lt(rt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Yt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hyn extends Kze{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=ryn(this.serializer,t),r=function(s){if(!("targetChange"in s))return Bn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Bn.min():o.readTime?sm(o.readTime):Bn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=iX(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=JK(u)?{documents:oyn(s,u)}:{query:ayn(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Bze(s,o.resumeToken);const l=tX(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Bn.min())>0){a.readTime=_F(s,o.snapshotVersion.toTimestamp());const l=tX(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=lyn(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=iX(this.serializer),n.removeTarget=t,this.i_(n)}}class qyn extends Kze{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Ji(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=syn(t.writeResults,t.commitTime),r=sm(t.commitTime);return this.listener.A_(r,n)}return Ji(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=iX(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>iyn(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wyn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Lt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,nX(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Lt(rt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,nX(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Lt(rt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Gyn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Pg(n),this.y_=!1):Yt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yyn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{ww(this)&&(Yt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=jn(u);l.M_.add(4),await IP(l),l.N_.set("Unknown"),l.M_.delete(4),await AP(l)}(this))})}),this.N_=new Gyn(r,i)}}async function AP(e){if(ww(e))for(const t of e.x_)await t(!0)}async function IP(e){for(const t of e.x_)await t(!1)}function Xze(e,t){const n=jn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Pue(n)?Nue(n):DC(n).Xo()&&Due(n,t))}function Rue(e,t){const n=jn(e),r=DC(n);n.F_.delete(t),r.Xo()&&Qze(n,t),n.F_.size===0&&(r.Xo()?r.n_():ww(n)&&n.N_.set("Unknown"))}function Due(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}DC(e).P_(t)}function Qze(e,t){e.L_.xe(t),DC(e).I_(t)}function Nue(e){e.L_=new Xgn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),DC(e).start(),e.N_.w_()}function Pue(e){return ww(e)&&!DC(e).Zo()&&e.F_.size>0}function ww(e){return jn(e).M_.size===0}function Jze(e){e.L_=void 0}async function Kyn(e){e.N_.set("Online")}async function Xyn(e){e.F_.forEach((t,n)=>{Due(e,t)})}async function Qyn(e,t){Jze(e),Pue(e)?(e.N_.D_(t),Nue(e)):e.N_.set("Unknown")}async function Jyn(e,t,n){if(e.N_.set("Online"),t instanceof Fze&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Yt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await wF(e,r)}else if(t instanceof F6?e.L_.Ke(t):t instanceof Lze?e.L_.He(t):e.L_.We(t),!n.isEqual(Bn.min()))try{const r=await Gze(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ou.EMPTY_BYTE_STRING,c.snapshotVersion)),Qze(s,u);const f=new c1(c.target,u,l,c.sequenceNumber);Due(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Yt("RemoteStore","Failed to raise snapshot:",r),await wF(e,r)}}async function wF(e,t,n){if(!SP(t))throw t;e.M_.add(1),await IP(e),e.N_.set("Offline"),n||(n=()=>Gze(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Yt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await AP(e)})}function Zze(e,t){return t().catch(n=>wF(e,n,t))}async function q9(e){const t=jn(e),n=xv(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Zyn(t);)try{const i=await Myn(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,e1n(t,i)}catch(i){await wF(t,i)}eVe(t)&&tVe(t)}function Zyn(e){return ww(e)&&e.v_.length<10}function e1n(e,t){e.v_.push(t);const n=xv(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function eVe(e){return ww(e)&&!xv(e).Zo()&&e.v_.length>0}function tVe(e){xv(e).start()}async function t1n(e){xv(e).V_()}async function n1n(e){const t=xv(e);for(const n of e.v_)t.d_(n.mutations)}async function r1n(e,t,n){const r=e.v_.shift(),i=Sue.from(r,t,n);await Zze(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await q9(e)}async function i1n(e,t){t&&xv(e).E_&&await async function(r,i){if(function(o){return Ggn(o)&&o!==rt.ABORTED}(i.code)){const s=r.v_.shift();xv(r).t_(),await Zze(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await q9(r)}}(e,t),eVe(e)&&tVe(e)}async function Uwe(e,t){const n=jn(e);n.asyncQueue.verifyOperationInProgress(),Yt("RemoteStore","RemoteStore received new credentials");const r=ww(n);n.M_.add(3),await IP(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await AP(n)}async function s1n(e,t){const n=jn(e);t?(n.M_.delete(2),await AP(n)):t||(n.M_.add(2),await IP(n),n.N_.set("Unknown"))}function DC(e){return e.B_||(e.B_=function(n,r,i){const s=jn(n);return s.f_(),new Hyn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:Kyn.bind(null,e),To:Xyn.bind(null,e),Ao:Qyn.bind(null,e),h_:Jyn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),Pue(e)?Nue(e):e.N_.set("Unknown")):(await e.B_.stop(),Jze(e))})),e.B_}function xv(e){return e.k_||(e.k_=function(n,r,i){const s=jn(n);return s.f_(),new qyn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:t1n.bind(null,e),Ao:i1n.bind(null,e),R_:n1n.bind(null,e),A_:r1n.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await q9(e)):(await e.k_.stop(),e.v_.length>0&&(Yt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oue{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new og,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Oue(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Lt(rt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $ue(e,t){if(Pg("AsyncQueue",`${t}: ${e}`),SP(e))return new Lt(rt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t){this.comparator=t?(n,r)=>t(n,r)||cn.comparator(n.key,r.key):(n,r)=>cn.comparator(n.key,r.key),this.keyedMap=FI(),this.sortedSet=new Ns(this.comparator)}static emptySet(t){return new WS(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof WS)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new WS;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zwe{constructor(){this.q_=new Ns(cn.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Nn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class l2{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new l2(t,n,WS.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&B9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1n{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class a1n{constructor(){this.queries=new RC(t=>Eze(t),B9),this.onlineState="Unknown",this.z_=new Set}}async function nVe(e,t){const n=jn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new o1n,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$ue(o,`Initialization of query '${DE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Mue(n)}async function rVe(e,t){const n=jn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u1n(e,t){const n=jn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Mue(n)}function l1n(e,t,n){const r=jn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Mue(e){e.z_.forEach(t=>{t.next()})}var oX,Vwe;(Vwe=oX||(oX={})).J_="default",Vwe.Cache="cache";class iVe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new l2(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=l2.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==oX.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sVe{constructor(t){this.key=t}}class oVe{constructor(t){this.key=t}}class c1n{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=xr(),this.mutatedKeys=xr(),this.Ia=Sze(t),this.Ta=new WS(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new zwe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=j9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new l2(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zwe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=xr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new oVe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new sVe(r))}),n}pa(t){this.la=t.hs,this.Pa=xr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return l2.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class f1n{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class d1n{constructor(t){this.key=t,this.wa=!1}}class h1n{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new RC(a=>Eze(a),B9),this.Da=new Map,this.Ca=new Set,this.va=new Ns(cn.comparator),this.Fa=new Map,this.Ma=new Aue,this.xa={},this.Oa=new Map,this.Na=u2.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function p1n(e,t,n=!0){const r=dVe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await aVe(r,t,n,!0),i}async function m1n(e,t){const n=dVe(e);await aVe(n,t,!0,!1)}async function aVe(e,t,n,r){const i=await Lyn(e.localStore,im(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await g1n(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&Xze(e.remoteStore,i),a}async function g1n(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let x=g.view.da(y);x.Xi&&(x=await Fwe(m.localStore,g.query,!1).then(({documents:C})=>g.view.da(C,x)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(x,m.isPrimaryClient,w,E);return qwe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await Fwe(e.localStore,t,!0),o=new c1n(t,s.hs),a=o.da(s.documents),u=CP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);qwe(e,n,l.fa);const c=new f1n(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function y1n(e,t,n){const r=jn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!B9(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sX(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rue(r.remoteStore,i.targetId),aX(r,i.targetId)}).catch(EP)):(aX(r,i.targetId),await sX(r.localStore,i.targetId,!0))}async function v1n(e,t){const n=jn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rue(n.remoteStore,r.targetId))}async function b1n(e,t,n){const r=C1n(e);try{const i=await function(o,a){const u=jn(o),l=Ho.now(),c=a.reduce((h,p)=>h.add(p.key),xr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Og(),m=xr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const x=zgn(v,f.get(v.key).overlayedDocument);x!=null&&y.push(new tb(v.key,x,mze(x.value.mapValue),rf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:Cze(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ns(di)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await kP(r,i.changes),await q9(r.remoteStore)}catch(i){const s=$ue(i,"Failed to persist write");n.reject(s)}}async function uVe(e,t){const n=jn(e);try{const r=await Oyn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Ji(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Ji(o.wa):i.removedDocuments.size>0&&(Ji(o.wa),o.wa=!1))}),await kP(n,r,t)}catch(r){await EP(r)}}function Hwe(e,t,n){const r=jn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=jn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Mue(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function x1n(e,t,n){const r=jn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ns(cn.comparator);o=o.insert(s,yu.newNoDocument(s,Bn.min()));const a=xr().add(s),u=new V9(Bn.min(),new Map,new Ns(di),o,a);await uVe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),Lue(r)}else await sX(r.localStore,t,!1).then(()=>aX(r,t,n)).catch(EP)}async function _1n(e,t){const n=jn(e),r=t.batch.batchId;try{const i=await Pyn(n.localStore,t);cVe(n,r,null),lVe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kP(n,i)}catch(i){await EP(i)}}async function w1n(e,t,n){const r=jn(e);try{const i=await function(o,a){const u=jn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Ji(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);cVe(r,t,n),lVe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kP(r,i)}catch(i){await EP(i)}}function lVe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function cVe(e,t,n){const r=jn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function aX(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||fVe(e,r)})}function fVe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Rue(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Lue(e))}function qwe(e,t,n){for(const r of n)r instanceof sVe?(e.Ma.addReference(r.key,t),E1n(e,r)):r instanceof oVe?(Yt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||fVe(e,r.key)):Nn()}function E1n(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Yt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Lue(e))}function Lue(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new cn(ls.fromString(t)),r=e.Na.next();e.Fa.set(r,new d1n(n)),e.va=e.va.insert(n,r),Xze(e.remoteStore,new c1(im(wue(n.path)),r,"TargetPurposeLimboResolution",gue.oe))}}async function kP(e,t,n){const r=jn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=kue.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=jn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>dt.forEach(l,d=>dt.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>dt.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!SP(f))throw f;Yt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function S1n(e,t){const n=jn(e);if(!n.currentUser.isEqual(t)){Yt("SyncEngine","User change. New user:",t.toKey());const r=await Wze(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Lt(rt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await kP(n,r.us)}}function T1n(e,t){const n=jn(e),r=n.Fa.get(t);if(r&&r.wa)return xr().add(r.key);{let i=xr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function dVe(e){const t=jn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uVe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=T1n.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=x1n.bind(null,t),t.Sa.h_=u1n.bind(null,t.eventManager),t.Sa.ka=l1n.bind(null,t.eventManager),t}function C1n(e){const t=jn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_1n.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=w1n.bind(null,t),t}class Wwe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=H9(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Nyn(this.persistence,new Ryn,t.initialUser,this.serializer)}createPersistence(t){return new Ayn(Iue.Hr,this.serializer)}createSharedClientState(t){return new Byn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class A1n{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hwe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=S1n.bind(null,this.syncEngine),await s1n(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new a1n}()}createDatastore(t){const n=H9(t.databaseInfo.databaseId),r=function(s){return new Vyn(s)}(t.databaseInfo);return function(s,o,a,u){return new Wyn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Yyn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Hwe(this.syncEngine,n,0),function(){return jwe.D()?new jwe:new jyn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new h1n(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=jn(r);Yt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await IP(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hVe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Pg("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1n{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ll.UNAUTHENTICATED,this.clientId=dze.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Yt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Yt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new og;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$ue(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function yH(e,t){e.asyncQueue.verifyOperationInProgress(),Yt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Wze(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Gwe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await pVe(e);Yt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Uwe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Uwe(t.remoteStore,i)),e._onlineComponents=t}function k1n(e){return e.name==="FirebaseError"?e.code===rt.FAILED_PRECONDITION||e.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function pVe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Yt("FirestoreClient","Using user provided OfflineComponentProvider");try{await yH(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!k1n(n))throw n;ED("Error using user provided cache. Falling back to memory cache: "+n),await yH(e,new Wwe)}}else Yt("FirestoreClient","Using default OfflineComponentProvider"),await yH(e,new Wwe);return e._offlineComponents}async function Fue(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Yt("FirestoreClient","Using user provided OnlineComponentProvider"),await Gwe(e,e._uninitializedComponentsProvider._online)):(Yt("FirestoreClient","Using default OnlineComponentProvider"),await Gwe(e,new A1n))),e._onlineComponents}function R1n(e){return pVe(e).then(t=>t.persistence)}function D1n(e){return Fue(e).then(t=>t.remoteStore)}function N1n(e){return Fue(e).then(t=>t.syncEngine)}async function mVe(e){const t=await Fue(e),n=t.eventManager;return n.onListen=p1n.bind(null,t.syncEngine),n.onUnlisten=y1n.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=m1n.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=v1n.bind(null,t.syncEngine),n}function P1n(e){return e.asyncQueue.enqueue(async()=>{const t=await R1n(e),n=await D1n(e);return t.setNetworkEnabled(!0),function(i){const s=jn(i);return s.M_.delete(0),AP(s)}(n)})}function O1n(e,t,n={}){const r=new og;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new hVe({next:d=>{o.enqueueAndForget(()=>rVe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Lt(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Lt(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new iVe(wue(a.path),c,{includeMetadataChanges:!0,ra:!0});return nVe(s,f)}(await mVe(e),e.asyncQueue,t,n,r)),r.promise}function $1n(e,t,n={}){const r=new og;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new hVe({next:d=>{o.enqueueAndForget(()=>rVe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Lt(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new iVe(a,c,{includeMetadataChanges:!0,ra:!0});return nVe(s,f)}(await mVe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gVe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ywe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yVe(e,t,n){if(!n)throw new Lt(rt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function M1n(e,t,n,r){if(t===!0&&r===!0)throw new Lt(rt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Kwe(e){if(!cn.isDocumentKey(e))throw new Lt(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Xwe(e){if(cn.isDocumentKey(e))throw new Lt(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function W9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Nn()}function Cm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lt(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=W9(e);throw new Lt(rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qwe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Lt(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Lt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M1n("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gVe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Lt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Lt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Lt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Bue{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qwe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Lt(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Lt(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qwe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J0n;switch(r.type){case"firstParty":return new tgn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Lt(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ywe.get(n);r&&(Yt("ComponentProvider","Removing Datastore"),Ywe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ew(this.firestore,t,this._query)}}class dl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new P1(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new dl(this.firestore,t,this._key)}}class P1 extends Ew{constructor(t,n,r){super(t,n,wue(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new dl(this.firestore,null,new cn(t))}withConverter(t){return new P1(this.firestore,t,this._path)}}function Pl(e,t,...n){if(e=es(e),yVe("collection","path",t),e instanceof Bue){const r=ls.fromString(t,...n);return Xwe(r),new P1(e,null,r)}{if(!(e instanceof dl||e instanceof P1))throw new Lt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ls.fromString(t,...n));return Xwe(r),new P1(e.firestore,null,r)}}function is(e,t,...n){if(e=es(e),arguments.length===1&&(t=dze.newId()),yVe("doc","path",t),e instanceof Bue){const r=ls.fromString(t,...n);return Kwe(r),new dl(e,null,new cn(r))}{if(!(e instanceof dl||e instanceof P1))throw new Lt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ls.fromString(t,...n));return Kwe(r),new dl(e.firestore,e instanceof P1?e.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1n{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Yze(this,"async_queue_retry"),this.hu=()=>{const n=gH();n&&Yt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=gH();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=gH();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new og;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!SP(t))throw t;Yt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Pg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Oue.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Nn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Sw extends Bue{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new L1n}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vVe(this),this._firestoreClient.terminate()}}function F1n(e,t,n){n||(n="(default)");const r=CC(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(xD(s,t))return i;throw new Lt(rt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Lt(rt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Lt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function RP(e){return e._firestoreClient||vVe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vVe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new pgn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gVe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new I1n(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function B1n(e){return P1n(RP(e=Cm(e,Sw)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t){this._byteString=t}static fromBase64String(t){try{return new c2(Ou.fromBase64String(t))}catch(n){throw new Lt(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new c2(Ou.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Lt(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Lt(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Lt(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return di(this._lat,t._lat)||di(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1n=/^__.*__$/;class U1n{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new tb(t,this.data,this.fieldMask,n,this.fieldTransforms):new TP(t,this.data,n,this.fieldTransforms)}}class bVe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new tb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function xVe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}class Uue{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Uue(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return EF(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(xVe(this.fu)&&j1n.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class z1n{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||H9(t)}Fu(t,n,r,i=!1){return new Uue({fu:t,methodName:n,vu:r,path:Pa.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y9(e){const t=e._freezeSettings(),n=H9(e._databaseId);return new z1n(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _Ve(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Vue("Data must be an object, but it was:",o,r);const a=SVe(r,o);let u,l;if(s.merge)u=new Xc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=uX(t,f,n);if(!o.contains(d))throw new Lt(rt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);CVe(c,d)||c.push(d)}u=new Xc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new U1n(new Yl(a),u,l)}class K9 extends G9{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof K9}}class zue extends G9{_toFieldTransform(t){return new Fgn(t.path,new kD)}isEqual(t){return t instanceof zue}}function wVe(e,t,n,r){const i=e.Fu(1,t,n);Vue("Data must be an object, but it was:",i,r);const s=[],o=Yl.empty();_w(r,(u,l)=>{const c=Hue(t,u,n);l=es(l);const f=i.Su(c);if(l instanceof K9)s.push(c);else{const d=NP(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Xc(s);return new bVe(o,a,i.fieldTransforms)}function EVe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[uX(t,r,n)],u=[i];if(s.length%2!=0)throw new Lt(rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(uX(t,s[d])),u.push(s[d+1]);const l=[],c=Yl.empty();for(let d=a.length-1;d>=0;--d)if(!CVe(l,a[d])){const h=a[d];let p=u[d];p=es(p);const m=o.Su(h);if(p instanceof K9)l.push(h);else{const g=NP(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Xc(l);return new bVe(c,f,o.fieldTransforms)}function V1n(e,t,n,r=!1){return NP(n,e.Fu(r?4:3,t))}function NP(e,t){if(TVe(e=es(e)))return Vue("Unsupported field value:",t,e),SVe(e,t);if(e instanceof G9)return function(r,i){if(!xVe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=NP(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $gn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ho.fromDate(r);return{timestampValue:_F(i.serializer,s)}}if(r instanceof Ho){const s=new Ho(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_F(i.serializer,s)}}if(r instanceof jue)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof c2)return{bytesValue:Bze(i.serializer,r._byteString)};if(r instanceof dl){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Cue(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${W9(r)}`)}(e,t)}function SVe(e,t){const n={};return hze(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_w(e,(r,i)=>{const s=NP(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TVe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ho||e instanceof jue||e instanceof c2||e instanceof dl||e instanceof G9)}function Vue(e,t,n){if(!TVe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=W9(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function uX(e,t,n){if((t=es(t))instanceof DP)return t._internalPath;if(typeof t=="string")return Hue(e,t);throw EF("Field path arguments must be of type string or ",e,!1,void 0,n)}const H1n=new RegExp("[~\\*/\\[\\]]");function Hue(e,t,n){if(t.search(H1n)>=0)throw EF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new DP(...t.split("."))._internalPath}catch{throw EF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function EF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Lt(rt.INVALID_ARGUMENT,a+e+u)}function CVe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AVe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new q1n(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(X9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q1n extends AVe{data(){return super.data()}}function X9(e,t){return typeof t=="string"?Hue(e,t):t instanceof DP?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1n(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Lt(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class que{}class IVe extends que{}function vH(e,t,...n){let r=[];t instanceof que&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Wue).length,a=s.filter(u=>u instanceof Q9).length;if(o>1||o>0&&a>0)throw new Lt(rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Q9 extends IVe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Q9(t,n,r)}_apply(t){const n=this._parse(t);return kVe(t._query,n),new Ew(t.firestore,t.converter,ZK(t._query,n))}_parse(t){const n=Y9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Lt(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){tEe(f,c);const h=[];for(const p of f)h.push(eEe(u,s,p));d={arrayValue:{values:h}}}else d=eEe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||tEe(f,c),d=V1n(a,o,f,c==="in"||c==="not-in");return wo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Jwe(e,t,n){const r=t,i=X9("where",e);return Q9._create(i,r,n)}class Wue extends que{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Wue(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zh.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)kVe(o,u),o=ZK(o,u)}(t._query,n),new Ew(t.firestore,t.converter,ZK(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gue extends IVe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Gue(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Lt(rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Lt(rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ID(s,o)}(t._query,this._field,this._direction);return new Ew(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new kC(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Zwe(e,t="asc"){const n=t,r=X9("orderBy",e);return Gue._create(r,n)}function eEe(e,t,n){if(typeof(n=es(n))=="string"){if(n==="")throw new Lt(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wze(t)&&n.indexOf("/")!==-1)throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ls.fromString(n));if(!cn.isDocumentKey(r))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _we(e,new cn(r))}if(n instanceof dl)return _we(e,n._key);throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${W9(n)}.`)}function tEe(e,t){if(!Array.isArray(e)||e.length===0)throw new Lt(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kVe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Lt(rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Lt(rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class G1n{convertValue(t,n="none"){switch(P_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(N_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Nn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return _w(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new jue(xo(t.latitude),xo(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=vue(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(TD(t));default:return null}}convertTimestamp(t){const n=bv(t);return new Ho(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ls.fromString(t);Ji(qze(r));const i=new CD(r.get(1),r.get(3)),s=new cn(r.popFirst(5));return i.isEqual(n)||Pg(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RVe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class DVe extends AVe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new B6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(X9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class B6 extends DVe{data(t={}){return super.data(t)}}class Y1n{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new jI(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new B6(this._firestore,this._userDataWriter,r.key,r,new jI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Lt(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new B6(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new B6(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:K1n(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function K1n(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(e){e=Cm(e,dl);const t=Cm(e.firestore,Sw);return O1n(RP(t),e._key).then(n=>X1n(t,e,n))}class NVe extends G1n{constructor(t){super(),this.firestore=t}convertBytes(t){return new c2(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new dl(this.firestore,null,n)}}function bE(e){e=Cm(e,Ew);const t=Cm(e.firestore,Sw),n=RP(t),r=new NVe(t);return W1n(e._query),$1n(n,e._query).then(i=>new Y1n(t,r,e,i))}function lu(e,t,n){e=Cm(e,dl);const r=Cm(e.firestore,Sw),i=RVe(e.converter,t,n);return Yue(r,[_Ve(Y9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,rf.none())])}function nEe(e,t,n,...r){e=Cm(e,dl);const i=Cm(e.firestore,Sw),s=Y9(i);let o;return o=typeof(t=es(t))=="string"||t instanceof DP?EVe(s,"updateDoc",e._key,t,n,r):wVe(s,"updateDoc",e._key,t),Yue(i,[o.toMutation(e._key,rf.exists(!0))])}function Yue(e,t){return function(r,i){const s=new og;return r.asyncQueue.enqueueAndForget(async()=>b1n(await N1n(r),i,s)),s.promise}(RP(e),t)}function X1n(e,t,n){const r=n.docs.get(t._key),i=new NVe(e);return new DVe(e,i,t._key,r,new jI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1n{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Y9(t)}set(t,n,r){this._verifyNotCommitted();const i=bH(t,this._firestore),s=RVe(i.converter,n,r),o=_Ve(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,rf.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=bH(t,this._firestore);let o;return o=typeof(n=es(n))=="string"||n instanceof DP?EVe(this._dataReader,"WriteBatch.update",s._key,n,r,i):wVe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,rf.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=bH(t,this._firestore);return this._mutations=this._mutations.concat(new Eue(n._key,rf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lt(rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bH(e,t){if((e=es(e)).firestore!==t)throw new Lt(rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function d4(){return new zue("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rEe(e){return RP(e=Cm(e,Sw)),new Q1n(e,t=>Yue(e,t))}(function(t,n=!0){(function(i){IC=i})(xw),Dg(new Em("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Sw(new Z0n(r.getProvider("auth-internal")),new rgn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Lt(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new CD(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),kh(ywe,"4.6.3",t),kh(ywe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lX=new Map,PVe={activated:!1,tokenObservers:[]},J1n={initialized:!1,enabled:!1};function qo(e){return lX.get(e)||Object.assign({},PVe)}function Z1n(e,t){return lX.set(e,t),lX.get(e)}function J9(){return J1n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OVe="https://content-firebaseappcheck.googleapis.com/v1",evn="exchangeRecaptchaV3Token",tvn="exchangeDebugToken",iEe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},nvn=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rvn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new bD,this.pending.promise.catch(n=>{}),await ivn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new bD,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function ivn(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const svn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ec=new TC("appCheck","AppCheck",svn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sEe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Kue(e){if(!qo(e).activated)throw ec.create("use-before-activation",{appName:e.name})}function $Ve(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=h4(n)+"d:"),r&&(o+=h4(r)+"h:"),o+=h4(i)+"m:"+h4(s)+"s",o}function h4(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xue({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ec.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ec.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ec.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ec.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function ovn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${OVe}/projects/${n}/apps/${r}:${evn}?key=${i}`,body:{recaptcha_v3_token:t}}}function MVe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${OVe}/projects/${n}/apps/${r}:${tvn}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const avn="firebase-app-check-database",uvn=1,ND="firebase-app-check-store",LVe="debug-token";let p4=null;function FVe(){return p4||(p4=new Promise((e,t)=>{try{const n=indexedDB.open(avn,uvn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ec.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ND,{keyPath:"compositeKey"})}}}catch(n){t(ec.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),p4)}function lvn(e){return jVe(UVe(e))}function cvn(e,t){return BVe(UVe(e),t)}function fvn(e){return BVe(LVe,e)}function dvn(){return jVe(LVe)}async function BVe(e,t){const r=(await FVe()).transaction(ND,"readwrite"),s=r.objectStore(ND).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ec.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function jVe(e){const n=(await FVe()).transaction(ND,"readonly"),i=n.objectStore(ND).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ec.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function UVe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new D9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hvn(e){if(Xae()){let t;try{t=await lvn(e)}catch(n){PD.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function xH(e,t){return Xae()?cvn(e,t).catch(n=>{PD.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function pvn(){let e;try{e=await dvn()}catch{}if(e)return e;{const t=bdn();return fvn(t).catch(n=>PD.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Que(){return J9().enabled}async function Jue(){const e=J9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function mvn(){const e=iUe(),t=J9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new bD;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(pvn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gvn={error:"UNKNOWN_ERROR"};function yvn(e){return Kae.encodeString(JSON.stringify(e),!1)}async function cX(e,t=!1){const n=e.app;Kue(n);const r=qo(n);let i=r.token,s;if(i&&!oS(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(oS(u)?i=u:await xH(n,void 0))}if(!t&&i&&oS(i))return{token:i.token};let o=!1;if(Que()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Xue(MVe(n,await Jue()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await xH(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await qo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?PD.warn(u.message):PD.error(u),s=u}let a;return i?s?oS(i)?a={token:i.token,internalError:s}:a=aEe(s):(a={token:i.token},r.token=i,await xH(n,i)):a=aEe(s),o&&HVe(n,a),a}async function vvn(e){const t=e.app;Kue(t);const{provider:n}=qo(t);if(Que()){const r=await Jue(),{token:i}=await Xue(MVe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function zVe(e,t,n,r){const{app:i}=e,s=qo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&oS(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),oEe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>oEe(e))}function VVe(e,t){const n=qo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function oEe(e){const{app:t}=e,n=qo(t);let r=n.tokenRefresher;r||(r=bvn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function bvn(e){const{app:t}=e;return new rvn(async()=>{const n=qo(t);let r;if(n.token?r=await cX(e,!0):r=await cX(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=qo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},iEe.RETRIAL_MIN_WAIT,iEe.RETRIAL_MAX_WAIT)}function HVe(e,t){const n=qo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function oS(e){return e.expireTimeMillis-Date.now()>0}function aEe(e){return{token:yvn(gvn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xvn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=qo(this.app);for(const n of t)VVe(this.app,n.next);return Promise.resolve()}}function _vn(e,t){return new xvn(e,t)}function wvn(e){return{getToken:t=>cX(e,t),getLimitedUseToken:()=>vvn(e),addTokenListener:t=>zVe(e,"INTERNAL",t),removeTokenListener:t=>VVe(e.app,t)}}const Evn="@firebase/app-check",Svn="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tvn="https://www.google.com/recaptcha/api.js";function Cvn(e,t){const n=new bD,r=qo(e);r.reCAPTCHAState={initialized:n};const i=Avn(e),s=sEe(!1);return s?uEe(e,t,s,i,n):Rvn(()=>{const o=sEe(!1);if(!o)throw new Error("no recaptcha");uEe(e,t,o,i,n)}),n.promise}function uEe(e,t,n,r,i){n.ready(()=>{kvn(e,t,n,r),i.resolve(n)})}function Avn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Ivn(e){Kue(e);const n=await qo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=qo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function kvn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{qo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{qo(e).reCAPTCHAState.succeeded=!1}}),s=qo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Rvn(e){const t=document.createElement("script");t.src=Tvn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zue{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Nvn(this._throttleData);const i=await Ivn(this._app).catch(o=>{throw ec.create("recaptcha-error")});if(!(!((t=qo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ec.create("recaptcha-error");let s;try{s=await Xue(ovn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Dvn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ec.create("throttled",{time:$Ve(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=CC(t,"heartbeat"),Cvn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Zue?this._siteKey===t._siteKey:!1}}function Dvn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+nvn,httpStatus:e};{const n=t?t.backoffCount:0,r=Sdn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Nvn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ec.create("throttled",{time:$Ve(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pvn(e=Jae(),t){e=es(e);const n=CC(e,"app-check");if(J9().initialized||mvn(),Que()&&Jue().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ec.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Ovn(e,t.provider,t.isTokenAutoRefreshEnabled),qo(e).isTokenAutoRefreshEnabled&&zVe(r,"INTERNAL",()=>{}),r}function Ovn(e,t,n){const r=Z1n(e,Object.assign({},PVe));r.activated=!0,r.provider=t,r.cachedTokenPromise=hvn(e).then(i=>(i&&oS(i)&&(r.token=i,HVe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const $vn="app-check",lEe="app-check-internal";function Mvn(){Dg(new Em($vn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return _vn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(lEe).initialize()})),Dg(new Em(lEe,e=>{const t=e.getProvider("app-check").getImmediate();return wvn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),kh(Evn,Svn)}Mvn();var qVe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof rI=="function"&&rI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof rI=="function"&&rI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var C=new this.constructor(o);if(this.state!==c){var I=this.state===l?E:T;h(C,I,this.outcome)}else this.queue.push(new d(C,E,T));return C};function d(E,T,C){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,C){s(function(){var I;try{I=T(C)}catch(N){return a.reject(E,N)}I===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,I)})}a.resolve=function(E,T){var C=g(p,T);if(C.status==="error")return a.reject(E,C.value);var I=C.value;if(I)m(E,I);else{E.state=l,E.outcome=T;for(var N=-1,k=E.queue.length;++N<k;)E.queue[N].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var C=-1,I=E.queue.length;++C<I;)E.queue[C].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var C=!1;function I(M){C||(C=!0,a.reject(E,M))}function N(M){C||(C=!0,a.resolve(E,M))}function k(){T(N,I)}var P=g(k);P.status==="error"&&I(P.value)}function g(E,T){var C={};try{C.value=E(T),C.status="success"}catch(I){C.status="error",C.value=I}return C}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var T=new this(o);return a.reject(T,E)}f.all=x;function x(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,I=!1;if(!C)return this.resolve([]);for(var N=new Array(C),k=0,P=-1,M=new this(o);++P<C;)O(E[P],P);return M;function O(B,q){T.resolve(B).then(H,function(Y){I||(I=!0,a.reject(M,Y))});function H(Y){N[q]=Y,++k===C&&!I&&(I=!0,a.resolve(M,N))}}}f.race=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,I=!1;if(!C)return this.resolve([]);for(var N=-1,k=new this(o);++N<C;)P(E[N]);return k;function P(M){T.resolve(M).then(function(O){I||(I=!0,a.resolve(k,O))},function(O){I||(I=!0,a.reject(k,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee};function o(ee,pe){if(!(ee instanceof pe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ee=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),pe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ee||pe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ee,pe){ee=ee||[],pe=pe||{};try{return new Blob(ee,pe)}catch(be){if(be.name!=="TypeError")throw be;for(var se=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,xe=new se,Ae=0;Ae<ee.length;Ae+=1)xe.append(ee[Ae]);return xe.getBlob(pe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ee,pe){pe&&ee.then(function(se){pe(null,se)},function(se){pe(se)})}function h(ee,pe,se){typeof pe=="function"&&ee.then(pe),typeof se=="function"&&ee.catch(se)}function p(ee){return typeof ee!="string"&&(console.warn(ee+" used as a key, but it is not a string."),ee=String(ee)),ee}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},x=Object.prototype.toString,w="readonly",E="readwrite";function T(ee){for(var pe=ee.length,se=new ArrayBuffer(pe),xe=new Uint8Array(se),Ae=0;Ae<pe;Ae++)xe[Ae]=ee.charCodeAt(Ae);return se}function C(ee){return new f(function(pe){var se=ee.transaction(g,E),xe=c([""]);se.objectStore(g).put(xe,"key"),se.onabort=function(Ae){Ae.preventDefault(),Ae.stopPropagation(),pe(!1)},se.oncomplete=function(){var Ae=navigator.userAgent.match(/Chrome\/(\d+)/),be=navigator.userAgent.match(/Edge\//);pe(be||!Ae||parseInt(Ae[1],10)>=43)}}).catch(function(){return!1})}function I(ee){return typeof y=="boolean"?f.resolve(y):C(ee).then(function(pe){return y=pe,y})}function N(ee){var pe=v[ee.name],se={};se.promise=new f(function(xe,Ae){se.resolve=xe,se.reject=Ae}),pe.deferredOperations.push(se),pe.dbReady?pe.dbReady=pe.dbReady.then(function(){return se.promise}):pe.dbReady=se.promise}function k(ee){var pe=v[ee.name],se=pe.deferredOperations.pop();if(se)return se.resolve(),se.promise}function P(ee,pe){var se=v[ee.name],xe=se.deferredOperations.pop();if(xe)return xe.reject(pe),xe.promise}function M(ee,pe){return new f(function(se,xe){if(v[ee.name]=v[ee.name]||W(),ee.db)if(pe)N(ee),ee.db.close();else return se(ee.db);var Ae=[ee.name];pe&&Ae.push(ee.version);var be=u.open.apply(u,Ae);pe&&(be.onupgradeneeded=function(qe){var it=be.result;try{it.createObjectStore(ee.storeName),qe.oldVersion<=1&&it.createObjectStore(g)}catch(at){if(at.name==="ConstraintError")console.warn('The database "'+ee.name+'" has been upgraded from version '+qe.oldVersion+" to version "+qe.newVersion+', but the storage "'+ee.storeName+'" already exists.');else throw at}}),be.onerror=function(qe){qe.preventDefault(),xe(be.error)},be.onsuccess=function(){var qe=be.result;qe.onversionchange=function(it){it.target.close()},se(qe),k(ee)}})}function O(ee){return M(ee,!1)}function B(ee){return M(ee,!0)}function q(ee,pe){if(!ee.db)return!0;var se=!ee.db.objectStoreNames.contains(ee.storeName),xe=ee.version<ee.db.version,Ae=ee.version>ee.db.version;if(xe&&(ee.version!==pe&&console.warn('The database "'+ee.name+`" can't be downgraded from version `+ee.db.version+" to version "+ee.version+"."),ee.version=ee.db.version),Ae||se){if(se){var be=ee.db.version+1;be>ee.version&&(ee.version=be)}return!0}return!1}function H(ee){return new f(function(pe,se){var xe=new FileReader;xe.onerror=se,xe.onloadend=function(Ae){var be=btoa(Ae.target.result||"");pe({__local_forage_encoded_blob:!0,data:be,type:ee.type})},xe.readAsBinaryString(ee)})}function Y(ee){var pe=T(atob(ee.data));return c([pe],{type:ee.type})}function K(ee){return ee&&ee.__local_forage_encoded_blob}function J(ee){var pe=this,se=pe._initReady().then(function(){var xe=v[pe._dbInfo.name];if(xe&&xe.dbReady)return xe.dbReady});return h(se,ee,ee),se}function F(ee){N(ee);for(var pe=v[ee.name],se=pe.forages,xe=0;xe<se.length;xe++){var Ae=se[xe];Ae._dbInfo.db&&(Ae._dbInfo.db.close(),Ae._dbInfo.db=null)}return ee.db=null,O(ee).then(function(be){return ee.db=be,q(ee)?B(ee):be}).then(function(be){ee.db=pe.db=be;for(var qe=0;qe<se.length;qe++)se[qe]._dbInfo.db=be}).catch(function(be){throw P(ee,be),be})}function U(ee,pe,se,xe){xe===void 0&&(xe=1);try{var Ae=ee.db.transaction(ee.storeName,pe);se(null,Ae)}catch(be){if(xe>0&&(!ee.db||be.name==="InvalidStateError"||be.name==="NotFoundError"))return f.resolve().then(function(){if(!ee.db||be.name==="NotFoundError"&&!ee.db.objectStoreNames.contains(ee.storeName)&&ee.version<=ee.db.version)return ee.db&&(ee.version=ee.db.version+1),B(ee)}).then(function(){return F(ee).then(function(){U(ee,pe,se,xe-1)})}).catch(se);se(be)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(ee){var pe=this,se={db:null};if(ee)for(var xe in ee)se[xe]=ee[xe];var Ae=v[se.name];Ae||(Ae=W(),v[se.name]=Ae),Ae.forages.push(pe),pe._initReady||(pe._initReady=pe.ready,pe.ready=J);var be=[];function qe(){return f.resolve()}for(var it=0;it<Ae.forages.length;it++){var at=Ae.forages[it];at!==pe&&be.push(at._initReady().catch(qe))}var ut=Ae.forages.slice(0);return f.all(be).then(function(){return se.db=Ae.db,O(se)}).then(function(vt){return se.db=vt,q(se,pe._defaultConfig.version)?B(se):vt}).then(function(vt){se.db=Ae.db=vt,pe._dbInfo=se;for(var Mt=0;Mt<ut.length;Mt++){var $n=ut[Mt];$n!==pe&&($n._dbInfo.db=se.db,$n._dbInfo.version=se.version)}})}function V(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ae,be){se.ready().then(function(){U(se._dbInfo,w,function(qe,it){if(qe)return be(qe);try{var at=it.objectStore(se._dbInfo.storeName),ut=at.get(ee);ut.onsuccess=function(){var vt=ut.result;vt===void 0&&(vt=null),K(vt)&&(vt=Y(vt)),Ae(vt)},ut.onerror=function(){be(ut.error)}}catch(vt){be(vt)}})}).catch(be)});return d(xe,pe),xe}function Q(ee,pe){var se=this,xe=new f(function(Ae,be){se.ready().then(function(){U(se._dbInfo,w,function(qe,it){if(qe)return be(qe);try{var at=it.objectStore(se._dbInfo.storeName),ut=at.openCursor(),vt=1;ut.onsuccess=function(){var Mt=ut.result;if(Mt){var $n=Mt.value;K($n)&&($n=Y($n));var Kt=ee($n,Mt.key,vt++);Kt!==void 0?Ae(Kt):Mt.continue()}else Ae()},ut.onerror=function(){be(ut.error)}}catch(Mt){be(Mt)}})}).catch(be)});return d(xe,pe),xe}function ue(ee,pe,se){var xe=this;ee=p(ee);var Ae=new f(function(be,qe){var it;xe.ready().then(function(){return it=xe._dbInfo,x.call(pe)==="[object Blob]"?I(it.db).then(function(at){return at?pe:H(pe)}):pe}).then(function(at){U(xe._dbInfo,E,function(ut,vt){if(ut)return qe(ut);try{var Mt=vt.objectStore(xe._dbInfo.storeName);at===null&&(at=void 0);var $n=Mt.put(at,ee);vt.oncomplete=function(){at===void 0&&(at=null),be(at)},vt.onabort=vt.onerror=function(){var Kt=$n.error?$n.error:$n.transaction.error;qe(Kt)}}catch(Kt){qe(Kt)}})}).catch(qe)});return d(Ae,se),Ae}function we(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ae,be){se.ready().then(function(){U(se._dbInfo,E,function(qe,it){if(qe)return be(qe);try{var at=it.objectStore(se._dbInfo.storeName),ut=at.delete(ee);it.oncomplete=function(){Ae()},it.onerror=function(){be(ut.error)},it.onabort=function(){var vt=ut.error?ut.error:ut.transaction.error;be(vt)}}catch(vt){be(vt)}})}).catch(be)});return d(xe,pe),xe}function ce(ee){var pe=this,se=new f(function(xe,Ae){pe.ready().then(function(){U(pe._dbInfo,E,function(be,qe){if(be)return Ae(be);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.clear();qe.oncomplete=function(){xe()},qe.onabort=qe.onerror=function(){var ut=at.error?at.error:at.transaction.error;Ae(ut)}}catch(ut){Ae(ut)}})}).catch(Ae)});return d(se,ee),se}function Se(ee){var pe=this,se=new f(function(xe,Ae){pe.ready().then(function(){U(pe._dbInfo,w,function(be,qe){if(be)return Ae(be);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.count();at.onsuccess=function(){xe(at.result)},at.onerror=function(){Ae(at.error)}}catch(ut){Ae(ut)}})}).catch(Ae)});return d(se,ee),se}function Oe(ee,pe){var se=this,xe=new f(function(Ae,be){if(ee<0){Ae(null);return}se.ready().then(function(){U(se._dbInfo,w,function(qe,it){if(qe)return be(qe);try{var at=it.objectStore(se._dbInfo.storeName),ut=!1,vt=at.openKeyCursor();vt.onsuccess=function(){var Mt=vt.result;if(!Mt){Ae(null);return}ee===0||ut?Ae(Mt.key):(ut=!0,Mt.advance(ee))},vt.onerror=function(){be(vt.error)}}catch(Mt){be(Mt)}})}).catch(be)});return d(xe,pe),xe}function et(ee){var pe=this,se=new f(function(xe,Ae){pe.ready().then(function(){U(pe._dbInfo,w,function(be,qe){if(be)return Ae(be);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.openKeyCursor(),ut=[];at.onsuccess=function(){var vt=at.result;if(!vt){xe(ut);return}ut.push(vt.key),vt.continue()},at.onerror=function(){Ae(at.error)}}catch(vt){Ae(vt)}})}).catch(Ae)});return d(se,ee),se}function Re(ee,pe){pe=m.apply(this,arguments);var se=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName);var xe=this,Ae;if(!ee.name)Ae=f.reject("Invalid arguments");else{var be=ee.name===se.name&&xe._dbInfo.db,qe=be?f.resolve(xe._dbInfo.db):O(ee).then(function(it){var at=v[ee.name],ut=at.forages;at.db=it;for(var vt=0;vt<ut.length;vt++)ut[vt]._dbInfo.db=it;return it});ee.storeName?Ae=qe.then(function(it){if(it.objectStoreNames.contains(ee.storeName)){var at=it.version+1;N(ee);var ut=v[ee.name],vt=ut.forages;it.close();for(var Mt=0;Mt<vt.length;Mt++){var $n=vt[Mt];$n._dbInfo.db=null,$n._dbInfo.version=at}var Kt=new f(function(er,Hr){var vr=u.open(ee.name,at);vr.onerror=function(Io){var Ac=vr.result;Ac.close(),Hr(Io)},vr.onupgradeneeded=function(){var Io=vr.result;Io.deleteObjectStore(ee.storeName)},vr.onsuccess=function(){var Io=vr.result;Io.close(),er(Io)}});return Kt.then(function(er){ut.db=er;for(var Hr=0;Hr<vt.length;Hr++){var vr=vt[Hr];vr._dbInfo.db=er,k(vr._dbInfo)}}).catch(function(er){throw(P(ee,er)||f.resolve()).catch(function(){}),er})}}):Ae=qe.then(function(it){N(ee);var at=v[ee.name],ut=at.forages;it.close();for(var vt=0;vt<ut.length;vt++){var Mt=ut[vt];Mt._dbInfo.db=null}var $n=new f(function(Kt,er){var Hr=u.deleteDatabase(ee.name);Hr.onerror=function(){var vr=Hr.result;vr&&vr.close(),er(Hr.error)},Hr.onblocked=function(){console.warn('dropInstance blocked for database "'+ee.name+'" until all open connections are closed')},Hr.onsuccess=function(){var vr=Hr.result;vr&&vr.close(),Kt(vr)}});return $n.then(function(Kt){at.db=Kt;for(var er=0;er<ut.length;er++){var Hr=ut[er];k(Hr._dbInfo)}}).catch(function(Kt){throw(P(ee,Kt)||f.resolve()).catch(function(){}),Kt})})}return d(Ae,pe),Ae}var St={_driver:"asyncStorage",_initStorage:L,_support:l(),iterate:Q,getItem:V,setItem:ue,removeItem:we,clear:ce,length:Se,key:Oe,keys:et,dropInstance:Re};function Ze(){return typeof openDatabase=="function"}var It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt="~~local_forage_type~",Ce=/^~~local_forage_type~([^~]+)~/,Fe="__lfsc__:",st=Fe.length,yt="arbf",Dt="blob",Je="si08",_e="ui08",kt="uic8",Rt="si16",Ee="si32",$e="ur16",ot="ui32",xt="fl32",jt="fl64",Un=st+yt.length,dr=Object.prototype.toString;function Tr(ee){var pe=ee.length*.75,se=ee.length,xe,Ae=0,be,qe,it,at;ee[ee.length-1]==="="&&(pe--,ee[ee.length-2]==="="&&pe--);var ut=new ArrayBuffer(pe),vt=new Uint8Array(ut);for(xe=0;xe<se;xe+=4)be=It.indexOf(ee[xe]),qe=It.indexOf(ee[xe+1]),it=It.indexOf(ee[xe+2]),at=It.indexOf(ee[xe+3]),vt[Ae++]=be<<2|qe>>4,vt[Ae++]=(qe&15)<<4|it>>2,vt[Ae++]=(it&3)<<6|at&63;return ut}function xi(ee){var pe=new Uint8Array(ee),se="",xe;for(xe=0;xe<pe.length;xe+=3)se+=It[pe[xe]>>2],se+=It[(pe[xe]&3)<<4|pe[xe+1]>>4],se+=It[(pe[xe+1]&15)<<2|pe[xe+2]>>6],se+=It[pe[xe+2]&63];return pe.length%3===2?se=se.substring(0,se.length-1)+"=":pe.length%3===1&&(se=se.substring(0,se.length-2)+"=="),se}function Tn(ee,pe){var se="";if(ee&&(se=dr.call(ee)),ee&&(se==="[object ArrayBuffer]"||ee.buffer&&dr.call(ee.buffer)==="[object ArrayBuffer]")){var xe,Ae=Fe;ee instanceof ArrayBuffer?(xe=ee,Ae+=yt):(xe=ee.buffer,se==="[object Int8Array]"?Ae+=Je:se==="[object Uint8Array]"?Ae+=_e:se==="[object Uint8ClampedArray]"?Ae+=kt:se==="[object Int16Array]"?Ae+=Rt:se==="[object Uint16Array]"?Ae+=$e:se==="[object Int32Array]"?Ae+=Ee:se==="[object Uint32Array]"?Ae+=ot:se==="[object Float32Array]"?Ae+=xt:se==="[object Float64Array]"?Ae+=jt:pe(new Error("Failed to get type for BinaryArray"))),pe(Ae+xi(xe))}else if(se==="[object Blob]"){var be=new FileReader;be.onload=function(){var qe=mt+ee.type+"~"+xi(this.result);pe(Fe+Dt+qe)},be.readAsArrayBuffer(ee)}else try{pe(JSON.stringify(ee))}catch(qe){console.error("Couldn't convert value into a JSON string: ",ee),pe(null,qe)}}function zn(ee){if(ee.substring(0,st)!==Fe)return JSON.parse(ee);var pe=ee.substring(Un),se=ee.substring(st,Un),xe;if(se===Dt&&Ce.test(pe)){var Ae=pe.match(Ce);xe=Ae[1],pe=pe.substring(Ae[0].length)}var be=Tr(pe);switch(se){case yt:return be;case Dt:return c([be],{type:xe});case Je:return new Int8Array(be);case _e:return new Uint8Array(be);case kt:return new Uint8ClampedArray(be);case Rt:return new Int16Array(be);case $e:return new Uint16Array(be);case Ee:return new Int32Array(be);case ot:return new Uint32Array(be);case xt:return new Float32Array(be);case jt:return new Float64Array(be);default:throw new Error("Unkown type: "+se)}}var hr={serialize:Tn,deserialize:zn,stringToBuffer:Tr,bufferToString:xi};function gr(ee,pe,se,xe){ee.executeSql("CREATE TABLE IF NOT EXISTS "+pe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],se,xe)}function Xo(ee){var pe=this,se={db:null};if(ee)for(var xe in ee)se[xe]=typeof ee[xe]!="string"?ee[xe].toString():ee[xe];var Ae=new f(function(be,qe){try{se.db=openDatabase(se.name,String(se.version),se.description,se.size)}catch(it){return qe(it)}se.db.transaction(function(it){gr(it,se,function(){pe._dbInfo=se,be()},function(at,ut){qe(ut)})},qe)});return se.serializer=hr,Ae}function ts(ee,pe,se,xe,Ae,be){ee.executeSql(se,xe,Ae,function(qe,it){it.code===it.SYNTAX_ERR?qe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[pe.storeName],function(at,ut){ut.rows.length?be(at,it):gr(at,pe,function(){at.executeSql(se,xe,Ae,be)},be)},be):be(qe,it)},be)}function ds(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ae,be){se.ready().then(function(){var qe=se._dbInfo;qe.db.transaction(function(it){ts(it,qe,"SELECT * FROM "+qe.storeName+" WHERE key = ? LIMIT 1",[ee],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).value:null;vt&&(vt=qe.serializer.deserialize(vt)),Ae(vt)},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Ps(ee,pe){var se=this,xe=new f(function(Ae,be){se.ready().then(function(){var qe=se._dbInfo;qe.db.transaction(function(it){ts(it,qe,"SELECT * FROM "+qe.storeName,[],function(at,ut){for(var vt=ut.rows,Mt=vt.length,$n=0;$n<Mt;$n++){var Kt=vt.item($n),er=Kt.value;if(er&&(er=qe.serializer.deserialize(er)),er=ee(er,Kt.key,$n+1),er!==void 0){Ae(er);return}}Ae()},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Vr(ee,pe,se,xe){var Ae=this;ee=p(ee);var be=new f(function(qe,it){Ae.ready().then(function(){pe===void 0&&(pe=null);var at=pe,ut=Ae._dbInfo;ut.serializer.serialize(pe,function(vt,Mt){Mt?it(Mt):ut.db.transaction(function($n){ts($n,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[ee,vt],function(){qe(at)},function(Kt,er){it(er)})},function($n){if($n.code===$n.QUOTA_ERR){if(xe>0){qe(Vr.apply(Ae,[ee,at,se,xe-1]));return}it($n)}})})}).catch(it)});return d(be,se),be}function hs(ee,pe,se){return Vr.apply(this,[ee,pe,se,1])}function Cc(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ae,be){se.ready().then(function(){var qe=se._dbInfo;qe.db.transaction(function(it){ts(it,qe,"DELETE FROM "+qe.storeName+" WHERE key = ?",[ee],function(){Ae()},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Qo(ee){var pe=this,se=new f(function(xe,Ae){pe.ready().then(function(){var be=pe._dbInfo;be.db.transaction(function(qe){ts(qe,be,"DELETE FROM "+be.storeName,[],function(){xe()},function(it,at){Ae(at)})})}).catch(Ae)});return d(se,ee),se}function Bu(ee){var pe=this,se=new f(function(xe,Ae){pe.ready().then(function(){var be=pe._dbInfo;be.db.transaction(function(qe){ts(qe,be,"SELECT COUNT(key) as c FROM "+be.storeName,[],function(it,at){var ut=at.rows.item(0).c;xe(ut)},function(it,at){Ae(at)})})}).catch(Ae)});return d(se,ee),se}function Br(ee,pe){var se=this,xe=new f(function(Ae,be){se.ready().then(function(){var qe=se._dbInfo;qe.db.transaction(function(it){ts(it,qe,"SELECT key FROM "+qe.storeName+" WHERE id = ? LIMIT 1",[ee+1],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).key:null;Ae(vt)},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Ri(ee){var pe=this,se=new f(function(xe,Ae){pe.ready().then(function(){var be=pe._dbInfo;be.db.transaction(function(qe){ts(qe,be,"SELECT key FROM "+be.storeName,[],function(it,at){for(var ut=[],vt=0;vt<at.rows.length;vt++)ut.push(at.rows.item(vt).key);xe(ut)},function(it,at){Ae(at)})})}).catch(Ae)});return d(se,ee),se}function gi(ee){return new f(function(pe,se){ee.transaction(function(xe){xe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ae,be){for(var qe=[],it=0;it<be.rows.length;it++)qe.push(be.rows.item(it).name);pe({db:ee,storeNames:qe})},function(Ae,be){se(be)})},function(xe){se(xe)})})}function Qs(ee,pe){pe=m.apply(this,arguments);var se=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName);var xe=this,Ae;return ee.name?Ae=new f(function(be){var qe;ee.name===se.name?qe=xe._dbInfo.db:qe=openDatabase(ee.name,"","",0),ee.storeName?be({db:qe,storeNames:[ee.storeName]}):be(gi(qe))}).then(function(be){return new f(function(qe,it){be.db.transaction(function(at){function ut(Kt){return new f(function(er,Hr){at.executeSql("DROP TABLE IF EXISTS "+Kt,[],function(){er()},function(vr,Io){Hr(Io)})})}for(var vt=[],Mt=0,$n=be.storeNames.length;Mt<$n;Mt++)vt.push(ut(be.storeNames[Mt]));f.all(vt).then(function(){qe()}).catch(function(Kt){it(Kt)})},function(at){it(at)})})}):Ae=f.reject("Invalid arguments"),d(Ae,pe),Ae}var ai={_driver:"webSQLStorage",_initStorage:Xo,_support:Ze(),iterate:Ps,getItem:ds,setItem:hs,removeItem:Cc,clear:Qo,length:Bu,key:Br,keys:Ri,dropInstance:Qs};function Di(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function me(ee,pe){var se=ee.name+"/";return ee.storeName!==pe.storeName&&(se+=ee.storeName+"/"),se}function ae(){var ee="_localforage_support_test";try{return localStorage.setItem(ee,!0),localStorage.removeItem(ee),!1}catch{return!0}}function ge(){return!ae()||localStorage.length>0}function Le(ee){var pe=this,se={};if(ee)for(var xe in ee)se[xe]=ee[xe];return se.keyPrefix=me(ee,pe._defaultConfig),ge()?(pe._dbInfo=se,se.serializer=hr,f.resolve()):f.reject()}function Me(ee){var pe=this,se=pe.ready().then(function(){for(var xe=pe._dbInfo.keyPrefix,Ae=localStorage.length-1;Ae>=0;Ae--){var be=localStorage.key(Ae);be.indexOf(xe)===0&&localStorage.removeItem(be)}});return d(se,ee),se}function _t(ee,pe){var se=this;ee=p(ee);var xe=se.ready().then(function(){var Ae=se._dbInfo,be=localStorage.getItem(Ae.keyPrefix+ee);return be&&(be=Ae.serializer.deserialize(be)),be});return d(xe,pe),xe}function Ut(ee,pe){var se=this,xe=se.ready().then(function(){for(var Ae=se._dbInfo,be=Ae.keyPrefix,qe=be.length,it=localStorage.length,at=1,ut=0;ut<it;ut++){var vt=localStorage.key(ut);if(vt.indexOf(be)===0){var Mt=localStorage.getItem(vt);if(Mt&&(Mt=Ae.serializer.deserialize(Mt)),Mt=ee(Mt,vt.substring(qe),at++),Mt!==void 0)return Mt}}});return d(xe,pe),xe}function dn(ee,pe){var se=this,xe=se.ready().then(function(){var Ae=se._dbInfo,be;try{be=localStorage.key(ee)}catch{be=null}return be&&(be=be.substring(Ae.keyPrefix.length)),be});return d(xe,pe),xe}function Zn(ee){var pe=this,se=pe.ready().then(function(){for(var xe=pe._dbInfo,Ae=localStorage.length,be=[],qe=0;qe<Ae;qe++){var it=localStorage.key(qe);it.indexOf(xe.keyPrefix)===0&&be.push(it.substring(xe.keyPrefix.length))}return be});return d(se,ee),se}function ur(ee){var pe=this,se=pe.keys().then(function(xe){return xe.length});return d(se,ee),se}function On(ee,pe){var se=this;ee=p(ee);var xe=se.ready().then(function(){var Ae=se._dbInfo;localStorage.removeItem(Ae.keyPrefix+ee)});return d(xe,pe),xe}function Cr(ee,pe,se){var xe=this;ee=p(ee);var Ae=xe.ready().then(function(){pe===void 0&&(pe=null);var be=pe;return new f(function(qe,it){var at=xe._dbInfo;at.serializer.serialize(pe,function(ut,vt){if(vt)it(vt);else try{localStorage.setItem(at.keyPrefix+ee,ut),qe(be)}catch(Mt){(Mt.name==="QuotaExceededError"||Mt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&it(Mt),it(Mt)}})})});return d(Ae,se),Ae}function ui(ee,pe){if(pe=m.apply(this,arguments),ee=typeof ee!="function"&&ee||{},!ee.name){var se=this.config();ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName}var xe=this,Ae;return ee.name?Ae=new f(function(be){ee.storeName?be(me(ee,xe._defaultConfig)):be(ee.name+"/")}).then(function(be){for(var qe=localStorage.length-1;qe>=0;qe--){var it=localStorage.key(qe);it.indexOf(be)===0&&localStorage.removeItem(it)}}):Ae=f.reject("Invalid arguments"),d(Ae,pe),Ae}var on={_driver:"localStorageWrapper",_initStorage:Le,_support:Di(),iterate:Ut,getItem:_t,setItem:Cr,removeItem:On,clear:Me,length:ur,key:dn,keys:Zn,dropInstance:ui},Ar=function(pe,se){return pe===se||typeof pe=="number"&&typeof se=="number"&&isNaN(pe)&&isNaN(se)},Qr=function(pe,se){for(var xe=pe.length,Ae=0;Ae<xe;){if(Ar(pe[Ae],se))return!0;Ae++}return!1},yr=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},Ni={},mo={},Pi={INDEXEDDB:St,WEBSQL:ai,LOCALSTORAGE:on},Co=[Pi.INDEXEDDB._driver,Pi.WEBSQL._driver,Pi.LOCALSTORAGE._driver],ns=["dropInstance"],rs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ns),Ao={description:"",driver:Co.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function _a(ee,pe){ee[pe]=function(){var se=arguments;return ee.ready().then(function(){return ee[pe].apply(ee,se)})}}function go(){for(var ee=1;ee<arguments.length;ee++){var pe=arguments[ee];if(pe)for(var se in pe)pe.hasOwnProperty(se)&&(yr(pe[se])?arguments[0][se]=pe[se].slice():arguments[0][se]=pe[se])}return arguments[0]}var Tl=function(){function ee(pe){o(this,ee);for(var se in Pi)if(Pi.hasOwnProperty(se)){var xe=Pi[se],Ae=xe._driver;this[se]=Ae,Ni[Ae]||this.defineDriver(xe)}this._defaultConfig=go({},Ao),this._config=go({},this._defaultConfig,pe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ee.prototype.config=function(se){if((typeof se>"u"?"undefined":s(se))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var xe in se){if(xe==="storeName"&&(se[xe]=se[xe].replace(/\W/g,"_")),xe==="version"&&typeof se[xe]!="number")return new Error("Database version must be a number.");this._config[xe]=se[xe]}return"driver"in se&&se.driver?this.setDriver(this._config.driver):!0}else return typeof se=="string"?this._config[se]:this._config},ee.prototype.defineDriver=function(se,xe,Ae){var be=new f(function(qe,it){try{var at=se._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!se._driver){it(ut);return}for(var vt=rs.concat("_initStorage"),Mt=0,$n=vt.length;Mt<$n;Mt++){var Kt=vt[Mt],er=!Qr(ns,Kt);if((er||se[Kt])&&typeof se[Kt]!="function"){it(ut);return}}var Hr=function(){for(var Ac=function(ju){return function(){var Xa=new Error("Method "+ju+" is not implemented by the current driver"),kd=f.reject(Xa);return d(kd,arguments[arguments.length-1]),kd}},Id=0,sy=ns.length;Id<sy;Id++){var np=ns[Id];se[np]||(se[np]=Ac(np))}};Hr();var vr=function(Ac){Ni[at]&&console.info("Redefining LocalForage driver: "+at),Ni[at]=se,mo[at]=Ac,qe()};"_support"in se?se._support&&typeof se._support=="function"?se._support().then(vr,it):vr(!!se._support):vr(!0)}catch(Io){it(Io)}});return h(be,xe,Ae),be},ee.prototype.driver=function(){return this._driver||null},ee.prototype.getDriver=function(se,xe,Ae){var be=Ni[se]?f.resolve(Ni[se]):f.reject(new Error("Driver not found."));return h(be,xe,Ae),be},ee.prototype.getSerializer=function(se){var xe=f.resolve(hr);return h(xe,se),xe},ee.prototype.ready=function(se){var xe=this,Ae=xe._driverSet.then(function(){return xe._ready===null&&(xe._ready=xe._initDriver()),xe._ready});return h(Ae,se,se),Ae},ee.prototype.setDriver=function(se,xe,Ae){var be=this;yr(se)||(se=[se]);var qe=this._getSupportedDrivers(se);function it(){be._config.driver=be.driver()}function at(Mt){return be._extend(Mt),it(),be._ready=be._initStorage(be._config),be._ready}function ut(Mt){return function(){var $n=0;function Kt(){for(;$n<Mt.length;){var er=Mt[$n];return $n++,be._dbInfo=null,be._ready=null,be.getDriver(er).then(at).catch(Kt)}it();var Hr=new Error("No available storage method found.");return be._driverSet=f.reject(Hr),be._driverSet}return Kt()}}var vt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=vt.then(function(){var Mt=qe[0];return be._dbInfo=null,be._ready=null,be.getDriver(Mt).then(function($n){be._driver=$n._driver,it(),be._wrapLibraryMethodsWithReady(),be._initDriver=ut(qe)})}).catch(function(){it();var Mt=new Error("No available storage method found.");return be._driverSet=f.reject(Mt),be._driverSet}),h(this._driverSet,xe,Ae),this._driverSet},ee.prototype.supports=function(se){return!!mo[se]},ee.prototype._extend=function(se){go(this,se)},ee.prototype._getSupportedDrivers=function(se){for(var xe=[],Ae=0,be=se.length;Ae<be;Ae++){var qe=se[Ae];this.supports(qe)&&xe.push(qe)}return xe},ee.prototype._wrapLibraryMethodsWithReady=function(){for(var se=0,xe=rs.length;se<xe;se++)_a(this,rs[se])},ee.prototype.createInstance=function(se){return new ee(se)},ee}(),Ef=new Tl;r.exports=Ef},{3:3}]},{},[4])(4)})})(qVe);var Lvn=qVe.exports;const OE=Am(Lvn);var Ta=[];for(var _H=0;_H<256;++_H)Ta.push((_H+256).toString(16).slice(1));function Fvn(e,t=0){return(Ta[e[t+0]]+Ta[e[t+1]]+Ta[e[t+2]]+Ta[e[t+3]]+"-"+Ta[e[t+4]]+Ta[e[t+5]]+"-"+Ta[e[t+6]]+Ta[e[t+7]]+"-"+Ta[e[t+8]]+Ta[e[t+9]]+"-"+Ta[e[t+10]]+Ta[e[t+11]]+Ta[e[t+12]]+Ta[e[t+13]]+Ta[e[t+14]]+Ta[e[t+15]]).toLowerCase()}var m4,Bvn=new Uint8Array(16);function jvn(){if(!m4&&(m4=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m4))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m4(Bvn)}var Uvn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const cEe={randomUUID:Uvn};function SF(e,t,n){if(cEe.randomUUID&&!e)return cEe.randomUUID();e=e||{};var r=e.random||(e.rng||jvn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Fvn(r)}class WVe{constructor(t){qu(this,"engine");qu(this,"connected",!1);qu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function TF(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function GA(e){return e.participantId!==void 0}class ih extends WVe{constructor(){super("firebase");qu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");qu(this,"firestore");qu(this,"collectionPrefix","prod-");qu(this,"studyCollection");qu(this,"storage");qu(this,"studyId","");qu(this,"localForage",OE.createInstance({name:"currentParticipantId"}));qu(this,"participantData",null);qu(this,"userManagementData",{});const n=S9.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=cUe(n);this.firestore=F1n(r,{}),this.storage=mwe();try{Pvn(r,{provider:new Zue(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await B1n(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=yF();if(!i.currentUser&&(await hpn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Pl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await TF(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(GA(a))return this.participantData=a,a;const l=await TF(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=is(this.studyCollection,"configHash"),r=await f4(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=is(this.studyCollection,"configHash");await lu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Nc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=SF(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=is(this.studyCollection,"sequenceAssignment");await lu(i,{});const s=Pl(i,"sequenceAssignment"),o=is(s,this.currentParticipantId),a=vH(s,Jwe("rejected","==",!0),Jwe("claimed","==",!1)),u=await bE(a);if(u.docs.length>0){const y=u.docs[0],v=y.data().timestamp;r.dataCollectionEnabled&&(await lu(y.ref,{claimed:!0}),await lu(o,{participantId:this.currentParticipantId,timestamp:v,rejected:!1,claimed:!1,completed:null,createdTime:d4()}))}else r.dataCollectionEnabled&&await lu(o,{participantId:this.currentParticipantId,timestamp:d4(),rejected:!1,claimed:!1,completed:null,createdTime:d4()});const l=vH(s,Zwe("timestamp","asc")),f=(await bE(l)).docs.map(y=>y.data()),d=f.filter(y=>!y.rejected).findIndex(y=>y.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const g=f.sort((y,v)=>y.createdTime-v.createdTime).findIndex(y=>y.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await qA(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");GA(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=mwe(),s=await o4(Nc(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return GA(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=SF();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=is(this.studyCollection,"sequenceAssignment"),i=Pl(r,"sequenceAssignment"),s=is(i,this.currentParticipantId);return await nEe(s,{completed:d4()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Pl(this.firestore,"user-management"),i=await bE(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await lu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await lu(is(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await lu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await lu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await lu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Nc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await qA(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");GA(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Pl(this.firestore,`${this.collectionPrefix}${n}`),o=Nc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!GA(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=is(s,"sequenceAssignment"),l=Pl(u,"sequenceAssignment"),c=is(l,r);await nEe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=is(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await lu(s,{[r]:i},{merge:!0})}async getModes(n){const r=is(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await f4(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await lu(r,s),s}async getParticipantsStatusCounts(n){const r=Pl(this.firestore,`${this.collectionPrefix}${n}`),i=is(r,"sequenceAssignment"),s=Pl(i,"sequenceAssignment"),o=vH(s,Zwe("timestamp","asc")),u=(await bE(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=is(this.firestore,"metadata","collections"),i=await f4(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=is(this.firestore,"metadata","collections");await lu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=is(this.firestore,"metadata","collections");return await lu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=is(this.firestore,"metadata","collections"),i=await f4(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await lu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Nc(this.storage,n),s=(await qA(r)).items.map(o=>pwe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Nc(this.storage,n),o=(await qA(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Nc(this.storage,n),s=Nc(this.storage,r),o=await o4(i),u=await(await fetch(o)).blob();await s4(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Pl(this.firestore,n),s=is(i,"sequenceAssignment"),o=Pl(s,"sequenceAssignment"),a=Pl(this.firestore,r),u=is(a,"sequenceAssignment");await lu(u,{});const l=Pl(u,"sequenceAssignment"),c=await bE(o),f=rEe(this.firestore);c.docs.forEach(d=>{const h=is(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Pl(this.firestore,n),i=is(r,"sequenceAssignment"),s=Pl(i,"sequenceAssignment"),o=await bE(s),a=rEe(this.firestore);o.forEach(u=>{const l=is(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Nc(this.storage,n);return(await qA(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await o4(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await o4(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await s4(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await s4(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await s4(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await pwe(i)}}const GVe=D.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),PP=()=>D.useContext(GVe);function zvn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=D.useState(t),[o,a]=D.useState(!1),{storageEngine:u}=ho(),l=async()=>{const h=yF();try{await xpn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;D.useEffect(()=>{s(t);let h;if(u instanceof ih)try{h=yF()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await f(v);v.isAdmin=!!x,s(v)}else l()},g=(async()=>{if(u instanceof ih){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=bpn(h,async x=>await p(x));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=D.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(GVe.Provider,{value:d,children:i.determiningStatus?_.jsx(uf,{visible:!0}):e})}function Vvn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsx(un.Td,{children:_.jsx(Gs,{miw:100,children:e.timedOut?_.jsx(Qe,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>_.jsxs(ke,{children:[_.jsxs(Qe,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?_.jsx(Qe,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):_.jsx(Qe,{span:!0,children:n})]},`cell-${t}`))})}):_.jsx(un.Td,{children:"N/A"})}function fEe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=O6e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsxs(un.Td,{children:[t.toFixed(1)," ","s",n&&_.jsxs(_.Fragment,{children:[_.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):_.jsx(un.Td,{children:"N/A"})}function Hvn(e){const{metaData:t}=e;return _.jsx(un.Td,{children:_.jsx(UJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Gs,{gap:"xs",children:[_.jsxs(ke,{children:["IP:"," ",t.ip]}),_.jsxs(ke,{children:["Language:"," ",t.language]}),_.jsxs(ke,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(ke,{children:["User Agent:"," ",t.userAgent]})]})})})}function qvn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=ho(),{studyId:i}=am(),{user:s}=PP(),o=async(w,E)=>{if(r&&i)if(s.isAdmin){const T=E===""?"Rejected by admin":E;await r.rejectParticipant(i,w,T),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=D.useState([]),[l,c]=D.useState(!1),[f,d]=D.useState(!1),[h,p]=D.useState(""),m=async()=>{c(!0),d(!1);const w=a.map(async E=>await o(E,h));await Promise.all(w),u([]),await n(),c(!1)};function g(w){w==="all"?a.length===e.length?u([]):u(e.map(E=>E.participantId)):a.includes(w)?u(a.filter(E=>E!==w)):u([...a,w])}const y=$ke(t.sequence),v=[_.jsx(un.Th,{children:_.jsx(qt,{justify:"center",children:_.jsx(_u,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),_.jsx(un.Th,{children:"ID"},"ID"),_.jsx(un.Th,{children:"Status"},"status"),_.jsx(un.Th,{children:"Tags"},"tags"),_.jsx(un.Th,{children:"Meta"},"meta"),...y.flatMap(w=>[_.jsx(un.Th,{children:w.componentName},`header-${w.componentName}-${w.timesSeenInBlock}`),_.jsxs(un.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:w.componentName})," ","Duration (clean)"]},`header-${w.componentName}-${w.timesSeenInBlock}-duration`)]),_.jsx(un.Th,{children:"Total Duration (clean)"},"total-duration")],x=e.map(w=>_.jsxs(un.Tr,{children:[_.jsx(un.Td,{children:_.jsx(qt,{justify:"center",children:_.jsx(_u,{mb:-4,checked:a.includes(w.participantId),onChange:()=>g(w.participantId)})})}),_.jsx(un.Td,{style:{whiteSpace:"nowrap"},children:w.participantId}),_.jsx(un.Td,{children:_.jsxs(qt,{direction:"column",miw:100,children:[_.jsxs(qt,{direction:"row",align:"center",children:[w.rejected?_.jsx(qi,{label:"Rejected",children:_.jsx(JD,{size:16,color:"red",style:{marginBottom:-3}})}):w.completed?_.jsx(qi,{label:"Completed",children:_.jsx(S5,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(qi,{label:"In Progress",children:_.jsx($Ae,{size:16,color:"orange",style:{marginBottom:-3}})}),!w.completed&&_.jsxs(Qe,{size:"sm",mb:-1,ml:4,children:[(Object.entries(w.answers).filter(([E,T])=>T.endTime!==-1&&T.endTime!==void 0).length/(Ph(w.sequence).length-1)*100).toFixed(2),"%"]})]}),w.rejected&&_.jsx(Qe,{mt:5,fz:10,children:w.rejected.reason})]})}),_.jsx(un.Td,{children:_.jsx(qt,{direction:"column",miw:100,children:(w.participantTags||[]).map(E=>_.jsxs(Qe,{fz:10,children:["-"," ",E]},`tag-${E}`))})}),w.metadata?_.jsx(Hvn,{metaData:w.metadata}):_.jsx(un.Td,{children:"N/A"}),y.map(E=>{const T=IZ(w.sequence,E.orderPath),C=T&&Object.entries(w.answers).sort((I,N)=>{const k=parseInt(I[0].slice(I[0].lastIndexOf("_")+1),10),P=parseInt(N[0].slice(N[0].lastIndexOf("_")+1),10);return k-P}).filter(([I])=>{const N=I.slice(0,I.lastIndexOf("_")),k=parseInt(I.slice(I.lastIndexOf("_")+1),10);return N===E.componentName&&k<=T[0].lastIndex&&k>=T[0].firstIndex});return C!==null&&C.length>=E.timesSeenInBlock+1&&C[E.timesSeenInBlock][1].endTime!==-1?_.jsxs(ni.Fragment,{children:[_.jsx(Vvn,{cellData:C[E.timesSeenInBlock][1]}),_.jsx(fEe,{cellData:C[E.timesSeenInBlock][1]})]},`cellgroup-${w.participantId}-${E.componentName}-${E.timesSeenInBlock}`):_.jsxs(ni.Fragment,{children:[_.jsx(un.Td,{children:"N/A"}),_.jsx(un.Td,{children:"N/A"})]},`cellgroup-${w.participantId}-${E.componentName}-${E.timesSeenInBlock}`)}),_.jsx(fEe,{cellData:{startTime:Math.min(...Object.values(w.answers).filter(E=>E.endTime!==-1&&E.endTime!==void 0).map(E=>E.startTime)),endTime:Math.max(...Object.values(w.answers).filter(E=>E.endTime!==-1&&E.endTime!==void 0).map(E=>E.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(w.answers).flatMap(E=>E.windowEvents),timedOut:!1}},`cell-${w.participantId}-total-duration`)]},w.participantId));return e.length>0?_.jsxs(_.Fragment,{children:[_.jsx(uf,{visible:l,overlayProps:{blur:2}}),_.jsxs(qt,{justify:"space-between",mb:8,p:8,children:[_.jsx(_r,{children:_.jsx(T2,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(w=>w.participantId))],searchable:!0,value:null,leftSection:_.jsx(Vct,{size:14}),onChange:w=>w&&g(w)})}),_.jsxs(_r,{children:[_.jsx(tUe,{visibleParticipants:e,studyId:i||""}),_.jsxs(ln,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),_.jsx(qt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(un,{striped:!0,withTableBorder:!0,children:[_.jsx(un.Thead,{children:_.jsx(un.Tr,{children:v})}),_.jsx(un.Tbody,{children:x})]})}),_.jsxs(Ws,{opened:f,onClose:()=>d(!1),title:_.jsxs(Qe,{children:["Reject Participants (",a.length,")"]}),children:[_.jsx(M0,{label:"Please enter the reason for rejection.",onChange:w=>p(w.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):_.jsxs(_.Fragment,{children:[_.jsx(Zc,{h:"xl"}),_.jsx(qt,{justify:"center",align:"center",children:_.jsx(Qe,{children:"No data available"})})]})}function Wvn({studyId:e,refresh:t}){const[n,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[u,l]=D.useState(!1),[c,f]=D.useState(""),[d,h]=D.useState([]),[p,m]=D.useState(""),[g,y]=D.useState(""),[v,x]=D.useState(!1),[w,E]=D.useState(!1),{storageEngine:T}=ho(),C=T,I=D.useCallback(async()=>{E(!0);const F=await C.getSnapshots(e);h(F),E(!1)},[C,e]);D.useEffect(()=>{I()},[I]);const N=async(F,...U)=>{x(!0);const W=await F(...U);W.status==="SUCCESS"?(I(),x(!1),await t(),W.notifications&&W.notifications.forEach(L=>{YR(L)})):(x(!1),YR({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await N(C.createSnapshot.bind(C),e,!1)},P=async()=>{m(""),r(!1),await N(C.createSnapshot.bind(C),e,!0)},M=async()=>{a(!1),await N(C.renameSnapshot.bind(C),c,g)},O=async F=>{await N(C.restoreSnapshot.bind(C),e,F)},B=async()=>{m(""),s(!1),await N(C.removeSnapshotOrLive.bind(C),c,!0)},q=async()=>{m(""),l(!1),await N(C.removeSnapshotOrLive.bind(C),e,!0)},H=()=>ghe({title:"Create a Snapshot",children:_.jsx(Qe,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),Y=F=>ghe({title:"Restore Snapshot",children:_.jsx(Qe,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O(F)}),K=F=>{const U=/-snapshot-(.+)$/,W=F.match(U);return W&&W[1]?W[1].replace("T"," "):null},J=async F=>{const U=F.slice(F.indexOf("-")+1);return await C.getAllParticipantsDataByStudy(U)};return _.jsxs(_.Fragment,{children:[_.jsx(uf,{visible:v}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(Vs,{order:5,children:"Create a Snapshot"}),_.jsxs(Qe,{children:["This will create a snapshot of the live"," ",_.jsx(Qe,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(Qe,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(qi,{label:"Create a snapshot",children:_.jsx(ln,{onClick:H,children:"Snapshot"})})]}),_.jsx(Zc,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(Vs,{order:5,children:"Archive Data"}),_.jsxs(Qe,{children:["This will create a snapshot of the live"," ",_.jsx(Qe,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(qi,{label:"Snapshot and Delete Data",children:_.jsx(ln,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Zc,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(Vs,{order:5,children:"Delete Data"}),_.jsxs(Qe,{children:["This will delete the live"," ",_.jsx(Qe,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(qi,{label:"Delete Data",children:_.jsx(ln,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(Zc,{h:"xl"}),_.jsxs(qt,{direction:"column",children:[_.jsx(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Vs,{order:5,children:"Snapshots"})}),_.jsxs(ke,{style:{position:"relative"},children:[_.jsx(uf,{visible:w}),d.length>0?_.jsxs(un,{children:[_.jsx(un.Thead,{children:_.jsxs(un.Tr,{children:[_.jsx(un.Th,{children:"Snapshot Name"}),_.jsx(un.Th,{children:"Date Created"}),_.jsx(un.Th,{children:"Actions"})]})}),_.jsx(un.Tbody,{children:d.map(F=>_.jsxs(un.Tr,{children:[_.jsx(un.Td,{children:F.alternateName}),_.jsx(un.Td,{children:K(F.originalName)}),_.jsx(un.Td,{children:_.jsxs(qt,{children:[_.jsx(qi,{label:"Rename",children:_.jsx(ln,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(F.originalName)},children:_.jsx(Fct,{})})}),_.jsx(qi,{label:"Restore Snapshot",children:_.jsx(ln,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{Y(F.originalName)},children:_.jsx(Uct,{})})}),_.jsx(qi,{label:"Delete Snapshot",children:_.jsx(ln,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(F.originalName)},children:_.jsx(FAe,{})})}),_.jsx(tUe,{visibleParticipants:()=>J(F.originalName),studyId:e,gap:"10px",fileName:F.alternateName})]})})]},F.originalName))})]}):_.jsx(Qe,{children:"No snapshots."})]})]}),_.jsxs(Ws,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(Qe,{children:"Archive Data"}),children:[_.jsx(Qe,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(M0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:P,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(Ws,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(Qe,{children:"Delete Snapshot"}),children:[_.jsxs(Qe,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(Qe,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(M0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(Ws,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(Qe,{children:"Rename Snapshot"}),children:[_.jsx(M0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:F=>y(F.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(ln,{color:"green",onClick:M,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(Ws,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(Qe,{children:"Delete Live Data"}),children:[_.jsxs(Qe,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(Qe,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(Qe,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(M0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:q,disabled:p!==e,children:"Delete"})]})]})]})}function Gvn({studyId:e}){const{storageEngine:t}=ho(),[n,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[u,l]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(Gs,{children:[_.jsx(Dx,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Dx,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Dx,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function Yvn({studyId:e,refresh:t}){const{storageEngine:n}=ho();return _.jsx(pg,{children:_.jsxs(Fl,{multiple:!0,variant:"contained",children:[_.jsxs(Fl.Item,{value:"ReVISit Modes",children:[_.jsx(Fl.Control,{children:_.jsx(Vs,{order:5,children:"ReVISit Modes"})}),_.jsx(Fl.Panel,{children:_.jsx(Gvn,{studyId:e})})]},"modes"),_.jsxs(Fl.Item,{value:"Data Management",children:[_.jsx(Fl.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Vs,{order:5,children:"Data Management"})}),_.jsx(Fl.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(Wvn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function Kvn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=cQ(!0),[o,a]=Jc(),u=D.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=D.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=D.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(g2,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(qt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(qt,{align:"center",children:[e.type==="metadata"&&_.jsx(Act,{size:20}),e.type==="numerical"&&_.jsx(Mct,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(Sct,{size:20}),e.type==="likert"&&_.jsx(Rct,{size:20}),e.type==="dropdown"&&_.jsx(Hct,{size:20}),e.type==="slider"&&_.jsx(vct,{size:20}),e.type==="radio"&&_.jsx(jct,{size:20}),e.type==="checkbox"&&_.jsx(qct,{size:20}),e.type==="iframe"&&_.jsx(Nct,{size:20}),_.jsx(Vs,{order:5,ml:4,children:e.id})]}),_.jsx(Cct,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(GF,{in:i,mah:400,children:[_.jsx(ke,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(V_,{})}),_.jsxs(FJ,{cols:2,h:360,children:[_.jsx(fg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(Jxe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(qt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(QI,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(Qe,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(qt,{align:"center",gap:"xs",children:_.jsx(Qe,{children:f[e.id]})},d))]})]})}),_.jsx(fg,{mih:200,children:e.type==="metadata"?_.jsx(Jxe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(Qe,{fw:700,children:"Response Specification: "}),_.jsx(QI,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(Qe,{fw:700,children:"Correct Answer: "}),_.jsx(QI,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function Xvn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&n7e(t.components[n],t),i=D.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(qt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(Kvn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(Qe,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Qvn({studyConfig:e,visibleParticipants:t}){const n=D.useMemo(()=>{let i=K0(e.sequence);return i=kZ(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=am();return _.jsx(g2,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?_.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(Qe,{children:"No data available."})}):_.jsxs(qt,{direction:"row",children:[_.jsx(ke,{w:340,children:_.jsx(nF,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(V_,{orientation:"vertical",mx:"md"}),_.jsx(Xvn,{participantData:t,studyConfig:e,trialId:r})]})})}function Jvn({xScale:e,answer:t,height:n,labelHeight:r=0}){return _.jsx("g",{children:_.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const g4=3,xE=25,y4=25,v4=20,dEe=1,wH=15;function Zvn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=D.useState(!1),[f,{width:d}]=Jc();return _.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[_.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+dEe,width:e(t.endTime)-e(t.startTime)-dEe*2,y:r-xE,height:xE}),_.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-g4,width:d+g4*2+(u?wH:0),y:r-xE-y4-o,height:v4,fill:"whitesmoke"}),_.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-g4,x2:d+e(t.startTime)+g4+(u?wH:0),y1:r-xE-y4+v4-o,y2:r-xE-y4+v4-o}),_.jsx("foreignObject",{x:e(t.startTime),width:d+(u?wH:0),y:r-xE-y4-o,height:v4,children:_.jsx(Wo,{style:{width:"fit-content"},children:_.jsxs(_r,{wrap:"nowrap",gap:2,children:[_.jsx(Qe,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?_.jsx(S5,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):_.jsx(JD,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const hEe=25,ebn=8,EH={left:20,top:0,right:20,bottom:0};function tbn({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=D.useCallback(m=>{const g=m.split("_"),y=+g[g.length-1];window.open(`${Va}${i}/${oh(y)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=D.useMemo(()=>{const m=Object.values(e.answers||{}).filter(v=>v.startTime).map(v=>[v.startTime,v.endTime]).flat(),g=bR(m);return dc([EH.left,t-EH.left-EH.right]).domain([g[0],o?g[0]+o:g[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=D.useMemo(()=>{let m=0;const g=Object.entries(e.answers||{}).filter(w=>!!w[1].startTime).sort((w,E)=>w[1].startTime-E[1].startTime);let y=0,v=0;const x=g.map((w,E)=>{const[T,C]=w,I=E>0?g[E-m-1]:null;I&&I[0].length*(ebn+1)+u(I[1].startTime)>u(C.startTime)?m+=1:m=0;const N=T.split("_"),k=N.slice(0,N.length-1).join("_"),P=s==null?void 0:s.components[k];let M=!0,O=!1;return P&&P.correctAnswer?(P.correctAnswer.forEach(B=>{const{id:q,answer:H}=B;(!P||!P.correctAnswer||C.answer[q]!==H)&&(M=!1)}),O=!0):O=!1,O&&(v+=1,M&&(y+=1)),{line:_.jsx(Jvn,{labelHeight:m*hEe,answer:C,height:n,xScale:u},T),label:_.jsx(qi,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:_.jsx(Gs,{gap:0,children:Object.entries(C.answer).map(B=>{var K,J;const[q,H]=B,Y=(J=(K=P==null?void 0:P.correctAnswer)==null?void 0:K.find(F=>F.id===q))==null?void 0:J.answer;return _.jsx(Qe,{children:`${q}: ${H} ${Y?`[${Y}]`:""}`},q)})}),children:_.jsx("g",{children:_.jsx(Zvn,{isCorrect:M,hasCorrect:O,labelHeight:m*hEe,isSelected:r===T,setSelectedTask:a,answer:C,height:n,name:T,xScale:u},T)})})}});return[y,v,x]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=D.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const m=Object.values(e.answers).filter(g=>g.startTime).sort((g,y)=>g.startTime-y.startTime);return new Date(m[m.length-1].endTime-(m[0]?m[0].startTime:0)).getTime()},[e]),h=D.useMemo(()=>Object.entries(e.answers||{}).sort((g,y)=>g[1].startTime-y[1].startTime).map(g=>{const[y,v]=g,x=[];let w=[-1,-1],E="visible";if(v.windowEvents)for(let T=0;T<v.windowEvents.length;T+=1)v.windowEvents[T][1]==="visibility"&&(v.windowEvents[T][2]==="hidden"&&E==="visible"?(w=[v.windowEvents[T][0],-1],E="hidden"):v.windowEvents[T][2]==="visible"&&E==="hidden"&&(w[1]=v.windowEvents[T][0],x.push(w),w=[-1,-1],E="visible"));return x.map((T,C)=>_.jsx(qi,{withinPortal:!0,label:"Browsed away",children:_.jsx("rect",{x:u(T[0]),width:u(T[1])-u(T[0]),y:n-5,height:10})},C))}),[u,n,e.answers]),p=D.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[m,g]=s.uiConfig.participantNameField.split("."),y=Object.keys(e.answers).find(v=>v.startsWith(m));if(y)return`${e.answers[y].answer[g]}`}return null},[e.answers,s]);return _.jsx(Wo,{children:_.jsxs(Gs,{gap:15,style:{width:"100%"},children:[_.jsx(V_,{size:"md"}),_.jsxs(_r,{justify:"space-between",children:[_.jsxs(_r,{justify:"center",children:[e.participantIndex?_.jsx(Qe,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,_.jsx(Qe,{size:"md",children:p||e.participantId}),e.completed?null:_.jsx(Qe,{size:"xl",c:"red",children:"Not completed"}),_.jsxs(_r,{gap:10,children:[_.jsx(wh,{variant:"light",size:"lg",color:"green",leftSection:_.jsx(S5,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),_.jsx(wh,{variant:"light",size:"lg",color:"red",leftSection:_.jsx(JD,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),_.jsx(wh,{variant:"light",size:"lg",color:"gray",leftSection:_.jsx(Dct,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:CK(d)})]})]}),_.jsx(ln,{rightSection:_.jsx(OAe,{size:14}),component:"a",href:`${Va}${i}/${oh(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?_.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(m=>m.line),f.map(m=>m.label),h]}):null]})})}function nbn({visibleParticipants:e,studyConfig:t}){const{studyId:n}=am(),[r,{width:i}]=Jc(),[s,o]=D.useState(!1),a=D.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return _.jsxs(Gs,{ref:r,style:{width:"100%"},children:[_.jsx(_r,{children:_.jsx(Dx,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>_.jsx(tbn,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function rbn({globalConfig:e}){const{studyId:t}=am(),[n,r]=D.useState([]),[i,s]=D.useState(void 0),[o,a]=D.useState(!1),{storageEngine:u}=ho(),l=Rm(),{tab:c}=am(),{user:f}=PP();D.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const x=async w=>{if(w.data.type==="revisitWidget/CONFIG"&&u){const E=await Gae(w.data.payload);s(E)}};return window.addEventListener("message",x),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",x)}}return Yae(t,e).then(x=>{x&&s(x)}),()=>{}},[t,e,u]);const d=D.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const x=await u.getAllParticipantsData();r(x),a(!1)}},[u,t,i]);D.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=D.useState([]),[m,g,y]=D.useMemo(()=>{const x=n.filter(T=>!T.rejected&&T.completed),w=n.filter(T=>!T.rejected&&!T.completed),E=n.filter(T=>T.rejected);return p([...x,...w,...E]),[x,w,E]},[n]),v=D.useCallback(x=>{const w=[];x.includes("completed")&&w.push(...m),x.includes("inprogress")&&w.push(...g),x.includes("rejected")&&w.push(...y),p(w)},[m,g,y]);return _.jsxs(_.Fragment,{children:[_.jsx(R6,{studyIds:e.configsList}),_.jsx($i.Main,{children:_.jsxs(pg,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(uf,{visible:o}),_.jsxs(qt,{direction:"row",align:"center",justify:"space-between",children:[_.jsx(Vs,{order:5,children:t}),_.jsxs(qt,{direction:"row",align:"center",children:[_.jsx(Qe,{mt:-2,size:"sm",children:"Participants: "}),_.jsx(_u.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:_.jsxs(_r,{children:[_.jsx(_u,{value:"completed",label:"Completed"}),_.jsx(_u,{value:"inprogress",label:"In Progress"}),_.jsx(_u,{value:"rejected",label:"Rejected"})]})})]})]}),_.jsx(Zc,{h:"xs"}),_.jsxs(Nr,{variant:"outline",value:c,onChange:x=>l(`/analysis/stats/${t}/${x}`),style:{height:"100%"},children:[_.jsxs(Nr.List,{children:[_.jsx(Nr.Tab,{value:"table",leftSection:_.jsx(Wct,{size:16}),children:"Table View"}),_.jsx(Nr.Tab,{value:"stats",leftSection:_.jsx(Tct,{size:16}),children:"Trial Stats"}),_.jsx(Nr.Tab,{value:"replay",leftSection:_.jsx(Bct,{size:16}),children:"Participant Replay"}),_.jsx(Nr.Tab,{value:"manage",leftSection:_.jsx(MAe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(Nr.Panel,{value:"table",pt:"xs",children:i&&_.jsx(qvn,{visibleParticipants:h,studyConfig:i,refresh:d})}),_.jsx(Nr.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(Qvn,{studyConfig:i,visibleParticipants:h})}),_.jsx(Nr.Panel,{value:"replay",pt:"xs",children:_.jsx(nbn,{visibleParticipants:h,studyConfig:i})}),_.jsx(Nr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(Yvn,{studyId:t,refresh:d}):_.jsx(pg,{mt:20,children:_.jsx(Y0,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(tZ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function pEe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=PP(),{storageEngine:o}=ho(),[a,u]=D.useState(!1),l=am();return D.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(uf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(ZJ,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function YVe(e,t){if(e instanceof ih){t(!0);const n=new D0,r=yF();try{await Upn(r,n,HUe)}catch(i){YR({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function ibn(){const{user:e}=PP(),[t,n]=D.useState(!1),{storageEngine:r}=ho();return D.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&YR({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(ZJ,{to:"/"}):_.jsx(pg,{children:_.jsx(_2,{padding:"lg",children:_.jsxs(qt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Rv,{maw:200,mt:50,mb:100,src:`${Va}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(Qe,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(ln,{onClick:()=>YVe(r,n),leftSection:_.jsx(Gct,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(uf,{visible:t})]})})})}function sbn(){const{user:e,triggerAuth:t}=PP(),{storageEngine:n}=ho(),[r,i]=D.useState(!1),[s,o]=D.useState([]),[a,u]=D.useState(!1),[l,c]=D.useState(!1),[f,d]=D.useState(!1),[h,p]=D.useState(!1),[m,g]=D.useState(!1),[y,v]=D.useState(""),[x,w]=D.useState(null),E=qke({initialValues:{email:""},validate:{email:tbt("Invalid email")}});D.useEffect(()=>{(async()=>{if(u(!0),n instanceof ih){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i((O==null?void 0:O.isEnabled)||!1);const B=await(n==null?void 0:n.getUserManagementData("adminUsers"));B&&B.adminUsersList&&o(B==null?void 0:B.adminUsersList.map(q=>q.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof ih){const M=await YVe(n,u);M&&M.email?(w({email:M.email,uid:M.uid}),p(!0)):g(!0)}u(!1)},C=async M=>{u(!0),n instanceof ih&&M&&(await n.changeAuth(!0),await n.addAdminUser(M),o([M.email]),i(!0),t()),p(!1),u(!1)},I=async()=>{if(u(!0),n instanceof ih){await n.addAdminUser({email:E.values.email,uid:null});const M=await n.getUserManagementData("adminUsers");o((M==null?void 0:M.adminUsersList.map(O=>O.email))||[])}u(!1),c(!1),E.setValues({email:""})},N=M=>{d(!0),v(M)},k=async()=>{if(u(!0),n instanceof ih){await n.removeAdminUser(y);const M=await n.getUserManagementData("adminUsers");o((M==null?void 0:M.adminUsersList.map(O=>O.email))||[])}d(!1),u(!1)},P=D.useMemo(()=>n instanceof ih,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(pg,{children:_.jsxs(_2,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Vs,{mb:20,order:3,children:"Authentication"}),r?_.jsx(qt,{children:_.jsx(Qe,{children:"Authentication is enabled."})}):_.jsxs(qt,{justify:"space-between",children:[_.jsx(ke,{children:_.jsx(Qe,{children:"Authentication is currently disabled."})}),_.jsx(qi,{label:"You can only enable auth when using Firebase",disabled:P,children:_.jsx(ln,{onClick:M=>P?T():M.preventDefault(),color:"green","data-disabled":P?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(qt,{mt:40,direction:"column",children:[_.jsxs(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Vs,{order:6,children:"Enabled Users"}),_.jsx(nZ,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(M=>{var O;return _.jsxs(qt,{justify:"space-between",mb:10,children:[_.jsx(Qe,{children:M}),M===((O=e.user)==null?void 0:O.email)?_.jsx(Qe,{color:"blue",size:"xs",children:"You"}):_.jsx(U_,{variant:"subtle",onClick:()=>N(M),children:_.jsx(FAe,{color:"red"})})]},M)}):null]}):null]})}),_.jsx(Ws,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(ke,{component:"form",onSubmit:E.onSubmit(()=>I()),children:[_.jsx(M0,{leftSection:_.jsx(_ct,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(qt,{mt:30,justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(ln,{type:"submit",children:"Save"})]})]})}),_.jsxs(Ws,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(Qe,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(Qe,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(ln,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(Ws,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(Qe,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(Qe,{mt:40,children:["User"," ",_.jsx("b",{children:x==null?void 0:x.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(ln,{onClick:()=>C(x),children:"Yes, I'm sure."})]})]}),_.jsxs(Ws,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(Qe,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(Qe,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(qt,{mt:40,justify:"right",children:_.jsx(ln,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(uf,{visible:a})]})}class obn extends WVe{constructor(){super("localStorage");qu(this,"studyDatabase");qu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await OE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await TF(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await TF(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await OE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=SF();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=OE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=SF();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await OE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await OE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function abn(){let e,t=!1;{const n=new ih;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new obn;await n.connect(),e=n}return e}function YA({title:e}){const t=Dv();return D.useEffect(()=>{document.title=e},[t,e]),null}async function ubn(){const t=await(await fetch(`${Va}global.json`)).text();return Wfn(t)}function lbn(){const[e,t]=D.useState(null),[n,r]=D.useState({});D.useEffect(()=>{async function a(){e&&r(await Kfn(e))}a()},[e]),D.useEffect(()=>{e||ubn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=ho();D.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await abn();s(u)}a()},[s,i]);const o=async a=>i instanceof ih?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(cct,{basename:Va,children:_.jsx(zvn,{children:_.jsx(gct,{children:_.jsxs(oct,{children:[_.jsx($b,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Home"}),_.jsxs($i,{padding:"md",header:{height:70},children:[_.jsx(R6,{studyIds:e.configsList}),_.jsx(Oyt,{globalConfig:e,studyConfigs:n})]})]})}),_.jsx($b,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Study"}),_.jsx(Xfn,{globalConfig:e})]})}),_.jsx($b,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Analysis"}),_.jsx(pEe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx($i,{padding:"md",header:{height:70},children:_.jsx(rbn,{globalConfig:e})})})]})}),_.jsx($b,{path:"/analysis/stats/:studyId",element:_.jsx(Jje,{to:"./table",replace:!0})}),_.jsx($b,{path:"/settings",element:_.jsxs(pEe,{children:[_.jsx(YA,{title:"ReVISit | Settings"}),_.jsxs($i,{padding:"md",header:{height:70},children:[_.jsx(R6,{studyIds:e.configsList}),_.jsx($i.Main,{children:_.jsx(sbn,{})})]})]})}),_.jsx($b,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Login"}),_.jsxs($i,{padding:"md",header:{height:70},children:[_.jsx(R6,{studyIds:e.configsList}),_.jsx($i.Main,{children:_.jsx(ibn,{})})]})]})})]})})})}):null}SH.createRoot(document.getElementById("root")).render(_.jsx(ni.StrictMode,{children:_.jsx(glt,{children:_.jsxs(XTe,{children:[_.jsx(zg,{}),_.jsx(lbn,{})]})})}))});export default cbn();
