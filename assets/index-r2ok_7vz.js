var iKe=Object.defineProperty;var sKe=(e,t,n)=>t in e?iKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oKe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Fu=(e,t,n)=>sKe(e,typeof t!="symbol"?t+"":t,n);var _1n=oKe((Dbn,yue)=>{function aKe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uKe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Jwe={exports:{}},p4={},Zwe={exports:{}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN=Symbol.for("react.element"),lKe=Symbol.for("react.portal"),cKe=Symbol.for("react.fragment"),fKe=Symbol.for("react.strict_mode"),dKe=Symbol.for("react.profiler"),hKe=Symbol.for("react.provider"),pKe=Symbol.for("react.context"),mKe=Symbol.for("react.forward_ref"),gKe=Symbol.for("react.suspense"),yKe=Symbol.for("react.memo"),vKe=Symbol.for("react.lazy"),bce=Symbol.iterator;function bKe(e){return e===null||typeof e!="object"?null:(e=bce&&e[bce]||e["@@iterator"],typeof e=="function"?e:null)}var exe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},txe=Object.assign,nxe={};function lC(e,t,n){this.props=e,this.context=t,this.refs=nxe,this.updater=n||exe}lC.prototype.isReactComponent={};lC.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lC.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rxe(){}rxe.prototype=lC.prototype;function MK(e,t,n){this.props=e,this.context=t,this.refs=nxe,this.updater=n||exe}var LK=MK.prototype=new rxe;LK.constructor=MK;txe(LK,lC.prototype);LK.isPureReactComponent=!0;var _ce=Array.isArray,ixe=Object.prototype.hasOwnProperty,FK={current:null},sxe={key:!0,ref:!0,__self:!0,__source:!0};function oxe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)ixe.call(t,r)&&!sxe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:RN,type:e,key:s,ref:o,props:i,_owner:FK.current}}function _Ke(e,t){return{$$typeof:RN,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jK(e){return typeof e=="object"&&e!==null&&e.$$typeof===RN}function wKe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wce=/\/+/g;function nU(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wKe(""+e.key):t.toString(36)}function a$(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case RN:case lKe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+nU(o,0):r,_ce(i)?(n="",e!=null&&(n=e.replace(wce,"$&/")+"/"),a$(i,t,n,"",function(l){return l})):i!=null&&(jK(i)&&(i=_Ke(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wce,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",_ce(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+nU(s,a);o+=a$(s,t,n,u,i)}else if(u=bKe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+nU(s,a++),o+=a$(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function gO(e,t,n){if(e==null)return e;var r=[],i=0;return a$(e,r,"","",function(s){return t.call(n,s,i++)}),r}function xKe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pl={current:null},u$={transition:null},EKe={ReactCurrentDispatcher:pl,ReactCurrentBatchConfig:u$,ReactCurrentOwner:FK};function axe(){throw Error("act(...) is not supported in production builds of React.")}gr.Children={map:gO,forEach:function(e,t,n){gO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return gO(e,function(){t++}),t},toArray:function(e){return gO(e,function(t){return t})||[]},only:function(e){if(!jK(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gr.Component=lC;gr.Fragment=cKe;gr.Profiler=dKe;gr.PureComponent=MK;gr.StrictMode=fKe;gr.Suspense=gKe;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EKe;gr.act=axe;gr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=txe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=FK.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)ixe.call(t,u)&&!sxe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:RN,type:e.type,key:i,ref:s,props:r,_owner:o}};gr.createContext=function(e){return e={$$typeof:pKe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hKe,_context:e},e.Consumer=e};gr.createElement=oxe;gr.createFactory=function(e){var t=oxe.bind(null,e);return t.type=e,t};gr.createRef=function(){return{current:null}};gr.forwardRef=function(e){return{$$typeof:mKe,render:e}};gr.isValidElement=jK;gr.lazy=function(e){return{$$typeof:vKe,_payload:{_status:-1,_result:e},_init:xKe}};gr.memo=function(e,t){return{$$typeof:yKe,type:e,compare:t===void 0?null:t}};gr.startTransition=function(e){var t=u$.transition;u$.transition={};try{e()}finally{u$.transition=t}};gr.unstable_act=axe;gr.useCallback=function(e,t){return pl.current.useCallback(e,t)};gr.useContext=function(e){return pl.current.useContext(e)};gr.useDebugValue=function(){};gr.useDeferredValue=function(e){return pl.current.useDeferredValue(e)};gr.useEffect=function(e,t){return pl.current.useEffect(e,t)};gr.useId=function(){return pl.current.useId()};gr.useImperativeHandle=function(e,t,n){return pl.current.useImperativeHandle(e,t,n)};gr.useInsertionEffect=function(e,t){return pl.current.useInsertionEffect(e,t)};gr.useLayoutEffect=function(e,t){return pl.current.useLayoutEffect(e,t)};gr.useMemo=function(e,t){return pl.current.useMemo(e,t)};gr.useReducer=function(e,t,n){return pl.current.useReducer(e,t,n)};gr.useRef=function(e){return pl.current.useRef(e)};gr.useState=function(e){return pl.current.useState(e)};gr.useSyncExternalStore=function(e,t,n){return pl.current.useSyncExternalStore(e,t,n)};gr.useTransition=function(){return pl.current.useTransition()};gr.version="18.3.1";Zwe.exports=gr;var N=Zwe.exports;const ci=cf(N),CM=aKe({__proto__:null,default:ci},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SKe=N,TKe=Symbol.for("react.element"),CKe=Symbol.for("react.fragment"),AKe=Object.prototype.hasOwnProperty,IKe=SKe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kKe={key:!0,ref:!0,__self:!0,__source:!0};function uxe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)AKe.call(t,r)&&!kKe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:TKe,type:e,key:s,ref:o,props:i,_owner:IKe.current}}p4.Fragment=CKe;p4.jsx=uxe;p4.jsxs=uxe;Jwe.exports=p4;var _=Jwe.exports,KV={},lxe={exports:{}},ff={},cxe={exports:{}},fxe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,Y){var $=q.length;q.push(Y);e:for(;0<$;){var W=$-1>>>1,X=q[W];if(0<i(X,Y))q[W]=Y,q[$]=X,$=W;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],$=q.pop();if($!==Y){q[0]=$;e:for(var W=0,X=q.length,V=X>>>1;W<V;){var K=2*(W+1)-1,J=q[K],ue=K+1,_e=q[ue];if(0>i(J,$))ue<X&&0>i(_e,J)?(q[W]=_e,q[ue]=$,W=ue):(q[W]=J,q[K]=$,W=K);else if(ue<X&&0>i(_e,$))q[W]=_e,q[ue]=$,W=ue;else break e}}return Y}function i(q,Y){var $=q.sortIndex-Y.sortIndex;return $!==0?$:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var Y=n(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=q)r(l),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(l)}}function E(q){if(m=!1,w(q),!p)if(n(u)!==null)p=!0,B(S);else{var Y=n(l);Y!==null&&H(E,Y.startTime-q)}}function S(q,Y){p=!1,m&&(m=!1,y(I),I=-1),h=!0;var $=d;try{for(w(Y),f=n(u);f!==null&&(!(f.expirationTime>Y)||q&&!D());){var W=f.callback;if(typeof W=="function"){f.callback=null,d=f.priorityLevel;var X=W(f.expirationTime<=Y);Y=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(u)&&r(u),w(Y)}else r(u);f=n(u)}if(f!==null)var V=!0;else{var K=n(l);K!==null&&H(E,K.startTime-Y),V=!1}return V}finally{f=null,d=$,h=!1}}var T=!1,C=null,I=-1,R=5,P=-1;function D(){return!(e.unstable_now()-P<R)}function L(){if(C!==null){var q=e.unstable_now();P=q;var Y=!0;try{Y=C(!0,q)}finally{Y?M():(T=!1,C=null)}}else T=!1}var M;if(typeof b=="function")M=function(){b(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,z=F.port2;F.port1.onmessage=L,M=function(){z.postMessage(null)}}else M=function(){g(L,0)};function B(q){C=q,T||(T=!0,M())}function H(q,Y){I=g(function(){q(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(S))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(q){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var $=d;d=Y;try{return q()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var $=d;d=q;try{return Y()}finally{d=$}},e.unstable_scheduleCallback=function(q,Y,$){var W=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?W+$:W):$=W,q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,q={id:c++,callback:Y,priorityLevel:q,startTime:$,expirationTime:X,sortIndex:-1},$>W?(q.sortIndex=$,t(l,q),n(u)===null&&q===n(l)&&(m?(y(I),I=-1):m=!0,H(E,$-W))):(q.sortIndex=X,t(u,q),p||h||(p=!0,B(S))),q},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(q){var Y=d;return function(){var $=d;d=Y;try{return q.apply(this,arguments)}finally{d=$}}}})(fxe);cxe.exports=fxe;var RKe=cxe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NKe=N,Yc=RKe;function vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dxe=new Set,Bk={};function Ow(e,t){zS(e,t),zS(e+"Capture",t)}function zS(e,t){for(Bk[e]=t,e=0;e<t.length;e++)dxe.add(t[e])}var n0=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),XV=Object.prototype.hasOwnProperty,PKe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xce={},Ece={};function DKe(e){return XV.call(Ece,e)?!0:XV.call(xce,e)?!1:PKe.test(e)?Ece[e]=!0:(xce[e]=!0,!1)}function OKe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $Ke(e,t,n,r){if(t===null||typeof t>"u"||OKe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ml(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ua={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ua[e]=new ml(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ua[t]=new ml(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ua[e]=new ml(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ua[e]=new ml(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ua[e]=new ml(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ua[e]=new ml(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ua[e]=new ml(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ua[e]=new ml(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ua[e]=new ml(e,5,!1,e.toLowerCase(),null,!1,!1)});var BK=/[\-:]([a-z])/g;function UK(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(BK,UK);Ua[t]=new ml(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(BK,UK);Ua[t]=new ml(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(BK,UK);Ua[t]=new ml(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ua[e]=new ml(e,1,!1,e.toLowerCase(),null,!1,!1)});Ua.xlinkHref=new ml("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ua[e]=new ml(e,1,!1,e.toLowerCase(),null,!0,!0)});function zK(e,t,n,r){var i=Ua.hasOwnProperty(t)?Ua[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($Ke(t,n,i,r)&&(n=null),r||i===null?DKe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var P0=NKe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yO=Symbol.for("react.element"),kE=Symbol.for("react.portal"),RE=Symbol.for("react.fragment"),VK=Symbol.for("react.strict_mode"),QV=Symbol.for("react.profiler"),hxe=Symbol.for("react.provider"),pxe=Symbol.for("react.context"),HK=Symbol.for("react.forward_ref"),JV=Symbol.for("react.suspense"),ZV=Symbol.for("react.suspense_list"),qK=Symbol.for("react.memo"),ky=Symbol.for("react.lazy"),mxe=Symbol.for("react.offscreen"),Sce=Symbol.iterator;function WA(e){return e===null||typeof e!="object"?null:(e=Sce&&e[Sce]||e["@@iterator"],typeof e=="function"?e:null)}var ks=Object.assign,rU;function G2(e){if(rU===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rU=t&&t[1]||""}return`
`+rU+e}var iU=!1;function sU(e,t){if(!e||iU)return"";iU=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{iU=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G2(e):""}function MKe(e){switch(e.tag){case 5:return G2(e.type);case 16:return G2("Lazy");case 13:return G2("Suspense");case 19:return G2("SuspenseList");case 0:case 2:case 15:return e=sU(e.type,!1),e;case 11:return e=sU(e.type.render,!1),e;case 1:return e=sU(e.type,!0),e;default:return""}}function eH(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case RE:return"Fragment";case kE:return"Portal";case QV:return"Profiler";case VK:return"StrictMode";case JV:return"Suspense";case ZV:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pxe:return(e.displayName||"Context")+".Consumer";case hxe:return(e._context.displayName||"Context")+".Provider";case HK:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qK:return t=e.displayName||null,t!==null?t:eH(e.type)||"Memo";case ky:t=e._payload,e=e._init;try{return eH(e(t))}catch{}}return null}function LKe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eH(t);case 8:return t===VK?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mv(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gxe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FKe(e){var t=gxe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vO(e){e._valueTracker||(e._valueTracker=FKe(e))}function yxe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=gxe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function AM(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tH(e,t){var n=t.checked;return ks({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Tce(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mv(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vxe(e,t){t=t.checked,t!=null&&zK(e,"checked",t,!1)}function nH(e,t){vxe(e,t);var n=Mv(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rH(e,t.type,n):t.hasOwnProperty("defaultValue")&&rH(e,t.type,Mv(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function rH(e,t,n){(t!=="number"||AM(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Y2=Array.isArray;function tS(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mv(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function iH(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(vt(91));return ks({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ace(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(vt(92));if(Y2(n)){if(1<n.length)throw Error(vt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mv(n)}}function bxe(e,t){var n=Mv(t.value),r=Mv(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ice(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _xe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sH(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_xe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bO,wxe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bO=bO||document.createElement("div"),bO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uk(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jKe=["Webkit","ms","Moz","O"];Object.keys(jI).forEach(function(e){jKe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jI[t]=jI[e]})});function xxe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jI.hasOwnProperty(e)&&jI[e]?(""+t).trim():t+"px"}function Exe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xxe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var BKe=ks({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oH(e,t){if(t){if(BKe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(vt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(vt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(vt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(vt(62))}}function aH(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uH=null;function WK(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lH=null,nS=null,rS=null;function kce(e){if(e=DN(e)){if(typeof lH!="function")throw Error(vt(280));var t=e.stateNode;t&&(t=b4(t),lH(e.stateNode,e.type,t))}}function Sxe(e){nS?rS?rS.push(e):rS=[e]:nS=e}function Txe(){if(nS){var e=nS,t=rS;if(rS=nS=null,kce(e),t)for(e=0;e<t.length;e++)kce(t[e])}}function Cxe(e,t){return e(t)}function Axe(){}var oU=!1;function Ixe(e,t,n){if(oU)return e(t,n);oU=!0;try{return Cxe(e,t,n)}finally{oU=!1,(nS!==null||rS!==null)&&(Axe(),Txe())}}function zk(e,t){var n=e.stateNode;if(n===null)return null;var r=b4(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(vt(231,t,typeof n));return n}var cH=!1;if(n0)try{var GA={};Object.defineProperty(GA,"passive",{get:function(){cH=!0}}),window.addEventListener("test",GA,GA),window.removeEventListener("test",GA,GA)}catch{cH=!1}function UKe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var BI=!1,IM=null,kM=!1,fH=null,zKe={onError:function(e){BI=!0,IM=e}};function VKe(e,t,n,r,i,s,o,a,u){BI=!1,IM=null,UKe.apply(zKe,arguments)}function HKe(e,t,n,r,i,s,o,a,u){if(VKe.apply(this,arguments),BI){if(BI){var l=IM;BI=!1,IM=null}else throw Error(vt(198));kM||(kM=!0,fH=l)}}function $w(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kxe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rce(e){if($w(e)!==e)throw Error(vt(188))}function qKe(e){var t=e.alternate;if(!t){if(t=$w(e),t===null)throw Error(vt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Rce(i),e;if(s===r)return Rce(i),t;s=s.sibling}throw Error(vt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(vt(189))}}if(n.alternate!==r)throw Error(vt(190))}if(n.tag!==3)throw Error(vt(188));return n.stateNode.current===n?e:t}function Rxe(e){return e=qKe(e),e!==null?Nxe(e):null}function Nxe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nxe(e);if(t!==null)return t;e=e.sibling}return null}var Pxe=Yc.unstable_scheduleCallback,Nce=Yc.unstable_cancelCallback,WKe=Yc.unstable_shouldYield,GKe=Yc.unstable_requestPaint,Zs=Yc.unstable_now,YKe=Yc.unstable_getCurrentPriorityLevel,GK=Yc.unstable_ImmediatePriority,Dxe=Yc.unstable_UserBlockingPriority,RM=Yc.unstable_NormalPriority,KKe=Yc.unstable_LowPriority,Oxe=Yc.unstable_IdlePriority,m4=null,Up=null;function XKe(e){if(Up&&typeof Up.onCommitFiberRoot=="function")try{Up.onCommitFiberRoot(m4,e,void 0,(e.current.flags&128)===128)}catch{}}var gh=Math.clz32?Math.clz32:ZKe,QKe=Math.log,JKe=Math.LN2;function ZKe(e){return e>>>=0,e===0?32:31-(QKe(e)/JKe|0)|0}var _O=64,wO=4194304;function K2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function NM(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=K2(a):(s&=o,s!==0&&(r=K2(s)))}else o=n&~i,o!==0?r=K2(o):s!==0&&(r=K2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gh(t),i=1<<n,r|=e[n],t&=~i;return r}function eXe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tXe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-gh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=eXe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function dH(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $xe(){var e=_O;return _O<<=1,!(_O&4194240)&&(_O=64),e}function aU(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function NN(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gh(t),e[t]=n}function nXe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-gh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function YK(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xi=0;function Mxe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lxe,KK,Fxe,jxe,Bxe,hH=!1,xO=[],cv=null,fv=null,dv=null,Vk=new Map,Hk=new Map,jy=[],rXe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pce(e,t){switch(e){case"focusin":case"focusout":cv=null;break;case"dragenter":case"dragleave":fv=null;break;case"mouseover":case"mouseout":dv=null;break;case"pointerover":case"pointerout":Vk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hk.delete(t.pointerId)}}function YA(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=DN(t),t!==null&&KK(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function iXe(e,t,n,r,i){switch(t){case"focusin":return cv=YA(cv,e,t,n,r,i),!0;case"dragenter":return fv=YA(fv,e,t,n,r,i),!0;case"mouseover":return dv=YA(dv,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vk.set(s,YA(Vk.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hk.set(s,YA(Hk.get(s)||null,e,t,n,r,i)),!0}return!1}function Uxe(e){var t=u_(e.target);if(t!==null){var n=$w(t);if(n!==null){if(t=n.tag,t===13){if(t=kxe(n),t!==null){e.blockedOn=t,Bxe(e.priority,function(){Fxe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function l$(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);uH=r,n.target.dispatchEvent(r),uH=null}else return t=DN(n),t!==null&&KK(t),e.blockedOn=n,!1;t.shift()}return!0}function Dce(e,t,n){l$(e)&&n.delete(t)}function sXe(){hH=!1,cv!==null&&l$(cv)&&(cv=null),fv!==null&&l$(fv)&&(fv=null),dv!==null&&l$(dv)&&(dv=null),Vk.forEach(Dce),Hk.forEach(Dce)}function KA(e,t){e.blockedOn===t&&(e.blockedOn=null,hH||(hH=!0,Yc.unstable_scheduleCallback(Yc.unstable_NormalPriority,sXe)))}function qk(e){function t(i){return KA(i,e)}if(0<xO.length){KA(xO[0],e);for(var n=1;n<xO.length;n++){var r=xO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cv!==null&&KA(cv,e),fv!==null&&KA(fv,e),dv!==null&&KA(dv,e),Vk.forEach(t),Hk.forEach(t),n=0;n<jy.length;n++)r=jy[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<jy.length&&(n=jy[0],n.blockedOn===null);)Uxe(n),n.blockedOn===null&&jy.shift()}var iS=P0.ReactCurrentBatchConfig,PM=!0;function oXe(e,t,n,r){var i=xi,s=iS.transition;iS.transition=null;try{xi=1,XK(e,t,n,r)}finally{xi=i,iS.transition=s}}function aXe(e,t,n,r){var i=xi,s=iS.transition;iS.transition=null;try{xi=4,XK(e,t,n,r)}finally{xi=i,iS.transition=s}}function XK(e,t,n,r){if(PM){var i=pH(e,t,n,r);if(i===null)yU(e,t,r,DM,n),Pce(e,r);else if(iXe(i,e,t,n,r))r.stopPropagation();else if(Pce(e,r),t&4&&-1<rXe.indexOf(e)){for(;i!==null;){var s=DN(i);if(s!==null&&Lxe(s),s=pH(e,t,n,r),s===null&&yU(e,t,r,DM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yU(e,t,r,null,n)}}var DM=null;function pH(e,t,n,r){if(DM=null,e=WK(r),e=u_(e),e!==null)if(t=$w(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kxe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return DM=e,null}function zxe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YKe()){case GK:return 1;case Dxe:return 4;case RM:case KKe:return 16;case Oxe:return 536870912;default:return 16}default:return 16}}var Ky=null,QK=null,c$=null;function Vxe(){if(c$)return c$;var e,t=QK,n=t.length,r,i="value"in Ky?Ky.value:Ky.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return c$=i.slice(e,1<r?1-r:void 0)}function f$(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function EO(){return!0}function Oce(){return!1}function df(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?EO:Oce,this.isPropagationStopped=Oce,this}return ks(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=EO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=EO)},persist:function(){},isPersistent:EO}),t}var cC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JK=df(cC),PN=ks({},cC,{view:0,detail:0}),uXe=df(PN),uU,lU,XA,g4=ks({},PN,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZK,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==XA&&(XA&&e.type==="mousemove"?(uU=e.screenX-XA.screenX,lU=e.screenY-XA.screenY):lU=uU=0,XA=e),uU)},movementY:function(e){return"movementY"in e?e.movementY:lU}}),$ce=df(g4),lXe=ks({},g4,{dataTransfer:0}),cXe=df(lXe),fXe=ks({},PN,{relatedTarget:0}),cU=df(fXe),dXe=ks({},cC,{animationName:0,elapsedTime:0,pseudoElement:0}),hXe=df(dXe),pXe=ks({},cC,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mXe=df(pXe),gXe=ks({},cC,{data:0}),Mce=df(gXe),yXe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vXe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bXe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _Xe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bXe[e])?!!t[e]:!1}function ZK(){return _Xe}var wXe=ks({},PN,{key:function(e){if(e.key){var t=yXe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=f$(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vXe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZK,charCode:function(e){return e.type==="keypress"?f$(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?f$(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xXe=df(wXe),EXe=ks({},g4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lce=df(EXe),SXe=ks({},PN,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZK}),TXe=df(SXe),CXe=ks({},cC,{propertyName:0,elapsedTime:0,pseudoElement:0}),AXe=df(CXe),IXe=ks({},g4,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kXe=df(IXe),RXe=[9,13,27,32],eX=n0&&"CompositionEvent"in window,UI=null;n0&&"documentMode"in document&&(UI=document.documentMode);var NXe=n0&&"TextEvent"in window&&!UI,Hxe=n0&&(!eX||UI&&8<UI&&11>=UI),Fce=" ",jce=!1;function qxe(e,t){switch(e){case"keyup":return RXe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wxe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var NE=!1;function PXe(e,t){switch(e){case"compositionend":return Wxe(t);case"keypress":return t.which!==32?null:(jce=!0,Fce);case"textInput":return e=t.data,e===Fce&&jce?null:e;default:return null}}function DXe(e,t){if(NE)return e==="compositionend"||!eX&&qxe(e,t)?(e=Vxe(),c$=QK=Ky=null,NE=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hxe&&t.locale!=="ko"?null:t.data;default:return null}}var OXe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bce(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OXe[e.type]:t==="textarea"}function Gxe(e,t,n,r){Sxe(r),t=OM(t,"onChange"),0<t.length&&(n=new JK("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zI=null,Wk=null;function $Xe(e){iEe(e,0)}function y4(e){var t=OE(e);if(yxe(t))return e}function MXe(e,t){if(e==="change")return t}var Yxe=!1;if(n0){var fU;if(n0){var dU="oninput"in document;if(!dU){var Uce=document.createElement("div");Uce.setAttribute("oninput","return;"),dU=typeof Uce.oninput=="function"}fU=dU}else fU=!1;Yxe=fU&&(!document.documentMode||9<document.documentMode)}function zce(){zI&&(zI.detachEvent("onpropertychange",Kxe),Wk=zI=null)}function Kxe(e){if(e.propertyName==="value"&&y4(Wk)){var t=[];Gxe(t,Wk,e,WK(e)),Ixe($Xe,t)}}function LXe(e,t,n){e==="focusin"?(zce(),zI=t,Wk=n,zI.attachEvent("onpropertychange",Kxe)):e==="focusout"&&zce()}function FXe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return y4(Wk)}function jXe(e,t){if(e==="click")return y4(t)}function BXe(e,t){if(e==="input"||e==="change")return y4(t)}function UXe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ch=typeof Object.is=="function"?Object.is:UXe;function Gk(e,t){if(Ch(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!XV.call(t,i)||!Ch(e[i],t[i]))return!1}return!0}function Vce(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hce(e,t){var n=Vce(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vce(n)}}function Xxe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xxe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qxe(){for(var e=window,t=AM();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=AM(e.document)}return t}function tX(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zXe(e){var t=Qxe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Xxe(n.ownerDocument.documentElement,n)){if(r!==null&&tX(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Hce(n,s);var o=Hce(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VXe=n0&&"documentMode"in document&&11>=document.documentMode,PE=null,mH=null,VI=null,gH=!1;function qce(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gH||PE==null||PE!==AM(r)||(r=PE,"selectionStart"in r&&tX(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),VI&&Gk(VI,r)||(VI=r,r=OM(mH,"onSelect"),0<r.length&&(t=new JK("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=PE)))}function SO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var DE={animationend:SO("Animation","AnimationEnd"),animationiteration:SO("Animation","AnimationIteration"),animationstart:SO("Animation","AnimationStart"),transitionend:SO("Transition","TransitionEnd")},hU={},Jxe={};n0&&(Jxe=document.createElement("div").style,"AnimationEvent"in window||(delete DE.animationend.animation,delete DE.animationiteration.animation,delete DE.animationstart.animation),"TransitionEvent"in window||delete DE.transitionend.transition);function v4(e){if(hU[e])return hU[e];if(!DE[e])return e;var t=DE[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Jxe)return hU[e]=t[n];return e}var Zxe=v4("animationend"),eEe=v4("animationiteration"),tEe=v4("animationstart"),nEe=v4("transitionend"),rEe=new Map,Wce="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function x1(e,t){rEe.set(e,t),Ow(t,[e])}for(var pU=0;pU<Wce.length;pU++){var mU=Wce[pU],HXe=mU.toLowerCase(),qXe=mU[0].toUpperCase()+mU.slice(1);x1(HXe,"on"+qXe)}x1(Zxe,"onAnimationEnd");x1(eEe,"onAnimationIteration");x1(tEe,"onAnimationStart");x1("dblclick","onDoubleClick");x1("focusin","onFocus");x1("focusout","onBlur");x1(nEe,"onTransitionEnd");zS("onMouseEnter",["mouseout","mouseover"]);zS("onMouseLeave",["mouseout","mouseover"]);zS("onPointerEnter",["pointerout","pointerover"]);zS("onPointerLeave",["pointerout","pointerover"]);Ow("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ow("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ow("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ow("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ow("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ow("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var X2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WXe=new Set("cancel close invalid load scroll toggle".split(" ").concat(X2));function Gce(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,HKe(r,t,void 0,e),e.currentTarget=null}function iEe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Gce(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Gce(i,a,l),s=u}}}if(kM)throw e=fH,kM=!1,fH=null,e}function Ji(e,t){var n=t[wH];n===void 0&&(n=t[wH]=new Set);var r=e+"__bubble";n.has(r)||(sEe(t,e,2,!1),n.add(r))}function gU(e,t,n){var r=0;t&&(r|=4),sEe(n,e,r,t)}var TO="_reactListening"+Math.random().toString(36).slice(2);function Yk(e){if(!e[TO]){e[TO]=!0,dxe.forEach(function(n){n!=="selectionchange"&&(WXe.has(n)||gU(n,!1,e),gU(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[TO]||(t[TO]=!0,gU("selectionchange",!1,t))}}function sEe(e,t,n,r){switch(zxe(t)){case 1:var i=oXe;break;case 4:i=aXe;break;default:i=XK}n=i.bind(null,t,n,e),i=void 0,!cH||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function yU(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=u_(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ixe(function(){var l=s,c=WK(n),f=[];e:{var d=rEe.get(e);if(d!==void 0){var h=JK,p=e;switch(e){case"keypress":if(f$(n)===0)break e;case"keydown":case"keyup":h=xXe;break;case"focusin":p="focus",h=cU;break;case"focusout":p="blur",h=cU;break;case"beforeblur":case"afterblur":h=cU;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$ce;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=cXe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=TXe;break;case Zxe:case eEe:case tEe:h=hXe;break;case nEe:h=AXe;break;case"scroll":h=uXe;break;case"wheel":h=kXe;break;case"copy":case"cut":case"paste":h=mXe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Lce}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var b=l,w;b!==null;){w=b;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=zk(b,y),E!=null&&m.push(Kk(b,E,w)))),g)break;b=b.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==uH&&(p=n.relatedTarget||n.fromElement)&&(u_(p)||p[r0]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?u_(p):null,p!==null&&(g=$w(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=$ce,E="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=Lce,E="onPointerLeave",y="onPointerEnter",b="pointer"),g=h==null?d:OE(h),w=p==null?d:OE(p),d=new m(E,b+"leave",h,n,c),d.target=g,d.relatedTarget=w,E=null,u_(c)===l&&(m=new m(y,b+"enter",p,n,c),m.target=w,m.relatedTarget=g,E=m),g=E,h&&p)t:{for(m=h,y=p,b=0,w=m;w;w=Bx(w))b++;for(w=0,E=y;E;E=Bx(E))w++;for(;0<b-w;)m=Bx(m),b--;for(;0<w-b;)y=Bx(y),w--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=Bx(m),y=Bx(y)}m=null}else m=null;h!==null&&Yce(f,d,h,m,!1),p!==null&&g!==null&&Yce(f,g,p,m,!0)}}e:{if(d=l?OE(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=MXe;else if(Bce(d))if(Yxe)S=BXe;else{S=FXe;var T=LXe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=jXe);if(S&&(S=S(e,l))){Gxe(f,S,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&rH(d,"number",d.value)}switch(T=l?OE(l):window,e){case"focusin":(Bce(T)||T.contentEditable==="true")&&(PE=T,mH=l,VI=null);break;case"focusout":VI=mH=PE=null;break;case"mousedown":gH=!0;break;case"contextmenu":case"mouseup":case"dragend":gH=!1,qce(f,n,c);break;case"selectionchange":if(VXe)break;case"keydown":case"keyup":qce(f,n,c)}var C;if(eX)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else NE?qxe(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Hxe&&n.locale!=="ko"&&(NE||I!=="onCompositionStart"?I==="onCompositionEnd"&&NE&&(C=Vxe()):(Ky=c,QK="value"in Ky?Ky.value:Ky.textContent,NE=!0)),T=OM(l,I),0<T.length&&(I=new Mce(I,e,null,n,c),f.push({event:I,listeners:T}),C?I.data=C:(C=Wxe(n),C!==null&&(I.data=C)))),(C=NXe?PXe(e,n):DXe(e,n))&&(l=OM(l,"onBeforeInput"),0<l.length&&(c=new Mce("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=C))}iEe(f,t)})}function Kk(e,t,n){return{instance:e,listener:t,currentTarget:n}}function OM(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zk(e,n),s!=null&&r.unshift(Kk(e,s,i)),s=zk(e,t),s!=null&&r.push(Kk(e,s,i))),e=e.return}return r}function Bx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yce(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=zk(n,s),u!=null&&o.unshift(Kk(n,u,a))):i||(u=zk(n,s),u!=null&&o.push(Kk(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var GXe=/\r\n?/g,YXe=/\u0000|\uFFFD/g;function Kce(e){return(typeof e=="string"?e:""+e).replace(GXe,`
`).replace(YXe,"")}function CO(e,t,n){if(t=Kce(t),Kce(e)!==t&&n)throw Error(vt(425))}function $M(){}var yH=null,vH=null;function bH(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _H=typeof setTimeout=="function"?setTimeout:void 0,KXe=typeof clearTimeout=="function"?clearTimeout:void 0,Xce=typeof Promise=="function"?Promise:void 0,XXe=typeof queueMicrotask=="function"?queueMicrotask:typeof Xce<"u"?function(e){return Xce.resolve(null).then(e).catch(QXe)}:_H;function QXe(e){setTimeout(function(){throw e})}function vU(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),qk(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qk(t)}function hv(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qce(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var fC=Math.random().toString(36).slice(2),_p="__reactFiber$"+fC,Xk="__reactProps$"+fC,r0="__reactContainer$"+fC,wH="__reactEvents$"+fC,JXe="__reactListeners$"+fC,ZXe="__reactHandles$"+fC;function u_(e){var t=e[_p];if(t)return t;for(var n=e.parentNode;n;){if(t=n[r0]||n[_p]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qce(e);e!==null;){if(n=e[_p])return n;e=Qce(e)}return t}e=n,n=e.parentNode}return null}function DN(e){return e=e[_p]||e[r0],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function OE(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(vt(33))}function b4(e){return e[Xk]||null}var xH=[],$E=-1;function E1(e){return{current:e}}function is(e){0>$E||(e.current=xH[$E],xH[$E]=null,$E--)}function Vi(e,t){$E++,xH[$E]=e.current,e.current=t}var Lv={},Eu=E1(Lv),Ql=E1(!1),V_=Lv;function VS(e,t){var n=e.type.contextTypes;if(!n)return Lv;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Jl(e){return e=e.childContextTypes,e!=null}function MM(){is(Ql),is(Eu)}function Jce(e,t,n){if(Eu.current!==Lv)throw Error(vt(168));Vi(Eu,t),Vi(Ql,n)}function oEe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(vt(108,LKe(e)||"Unknown",i));return ks({},n,r)}function LM(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lv,V_=Eu.current,Vi(Eu,e),Vi(Ql,Ql.current),!0}function Zce(e,t,n){var r=e.stateNode;if(!r)throw Error(vt(169));n?(e=oEe(e,t,V_),r.__reactInternalMemoizedMergedChildContext=e,is(Ql),is(Eu),Vi(Eu,e)):is(Ql),Vi(Ql,n)}var yg=null,_4=!1,bU=!1;function aEe(e){yg===null?yg=[e]:yg.push(e)}function eQe(e){_4=!0,aEe(e)}function S1(){if(!bU&&yg!==null){bU=!0;var e=0,t=xi;try{var n=yg;for(xi=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yg=null,_4=!1}catch(i){throw yg!==null&&(yg=yg.slice(e+1)),Pxe(GK,S1),i}finally{xi=t,bU=!1}}return null}var ME=[],LE=0,FM=null,jM=0,Mf=[],Lf=0,H_=null,kg=1,Rg="";function Db(e,t){ME[LE++]=jM,ME[LE++]=FM,FM=e,jM=t}function uEe(e,t,n){Mf[Lf++]=kg,Mf[Lf++]=Rg,Mf[Lf++]=H_,H_=e;var r=kg;e=Rg;var i=32-gh(r)-1;r&=~(1<<i),n+=1;var s=32-gh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,kg=1<<32-gh(t)+i|n<<i|r,Rg=s+e}else kg=1<<s|n<<i|r,Rg=e}function nX(e){e.return!==null&&(Db(e,1),uEe(e,1,0))}function rX(e){for(;e===FM;)FM=ME[--LE],ME[LE]=null,jM=ME[--LE],ME[LE]=null;for(;e===H_;)H_=Mf[--Lf],Mf[Lf]=null,Rg=Mf[--Lf],Mf[Lf]=null,kg=Mf[--Lf],Mf[Lf]=null}var Vc=null,Lc=null,gs=!1,Zd=null;function lEe(e,t){var n=qf(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function efe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vc=e,Lc=hv(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vc=e,Lc=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=H_!==null?{id:kg,overflow:Rg}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qf(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vc=e,Lc=null,!0):!1;default:return!1}}function EH(e){return(e.mode&1)!==0&&(e.flags&128)===0}function SH(e){if(gs){var t=Lc;if(t){var n=t;if(!efe(e,t)){if(EH(e))throw Error(vt(418));t=hv(n.nextSibling);var r=Vc;t&&efe(e,t)?lEe(r,n):(e.flags=e.flags&-4097|2,gs=!1,Vc=e)}}else{if(EH(e))throw Error(vt(418));e.flags=e.flags&-4097|2,gs=!1,Vc=e}}}function tfe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vc=e}function AO(e){if(e!==Vc)return!1;if(!gs)return tfe(e),gs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bH(e.type,e.memoizedProps)),t&&(t=Lc)){if(EH(e))throw cEe(),Error(vt(418));for(;t;)lEe(e,t),t=hv(t.nextSibling)}if(tfe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(vt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lc=hv(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lc=null}}else Lc=Vc?hv(e.stateNode.nextSibling):null;return!0}function cEe(){for(var e=Lc;e;)e=hv(e.nextSibling)}function HS(){Lc=Vc=null,gs=!1}function iX(e){Zd===null?Zd=[e]:Zd.push(e)}var tQe=P0.ReactCurrentBatchConfig;function QA(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(vt(309));var r=n.stateNode}if(!r)throw Error(vt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(vt(284));if(!n._owner)throw Error(vt(290,e))}return e}function IO(e,t){throw e=Object.prototype.toString.call(t),Error(vt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nfe(e){var t=e._init;return t(e._payload)}function fEe(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=yv(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,E){return b===null||b.tag!==6?(b=CU(w,y.mode,E),b.return=y,b):(b=i(b,w),b.return=y,b)}function u(y,b,w,E){var S=w.type;return S===RE?c(y,b,w.props.children,E,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ky&&nfe(S)===b.type)?(E=i(b,w.props),E.ref=QA(y,b,w),E.return=y,E):(E=v$(w.type,w.key,w.props,null,y.mode,E),E.ref=QA(y,b,w),E.return=y,E)}function l(y,b,w,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=AU(w,y.mode,E),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function c(y,b,w,E,S){return b===null||b.tag!==7?(b=R_(w,y.mode,E,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function f(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=CU(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yO:return w=v$(b.type,b.key,b.props,null,y.mode,w),w.ref=QA(y,null,b),w.return=y,w;case kE:return b=AU(b,y.mode,w),b.return=y,b;case ky:var E=b._init;return f(y,E(b._payload),w)}if(Y2(b)||WA(b))return b=R_(b,y.mode,w,null),b.return=y,b;IO(y,b)}return null}function d(y,b,w,E){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case yO:return w.key===S?u(y,b,w,E):null;case kE:return w.key===S?l(y,b,w,E):null;case ky:return S=w._init,d(y,b,S(w._payload),E)}if(Y2(w)||WA(w))return S!==null?null:c(y,b,w,E,null);IO(y,w)}return null}function h(y,b,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,a(b,y,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case yO:return y=y.get(E.key===null?w:E.key)||null,u(b,y,E,S);case kE:return y=y.get(E.key===null?w:E.key)||null,l(b,y,E,S);case ky:var T=E._init;return h(y,b,w,T(E._payload),S)}if(Y2(E)||WA(E))return y=y.get(w)||null,c(b,y,E,S,null);IO(b,E)}return null}function p(y,b,w,E){for(var S=null,T=null,C=b,I=b=0,R=null;C!==null&&I<w.length;I++){C.index>I?(R=C,C=null):R=C.sibling;var P=d(y,C,w[I],E);if(P===null){C===null&&(C=R);break}e&&C&&P.alternate===null&&t(y,C),b=s(P,b,I),T===null?S=P:T.sibling=P,T=P,C=R}if(I===w.length)return n(y,C),gs&&Db(y,I),S;if(C===null){for(;I<w.length;I++)C=f(y,w[I],E),C!==null&&(b=s(C,b,I),T===null?S=C:T.sibling=C,T=C);return gs&&Db(y,I),S}for(C=r(y,C);I<w.length;I++)R=h(C,y,I,w[I],E),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?I:R.key),b=s(R,b,I),T===null?S=R:T.sibling=R,T=R);return e&&C.forEach(function(D){return t(y,D)}),gs&&Db(y,I),S}function m(y,b,w,E){var S=WA(w);if(typeof S!="function")throw Error(vt(150));if(w=S.call(w),w==null)throw Error(vt(151));for(var T=S=null,C=b,I=b=0,R=null,P=w.next();C!==null&&!P.done;I++,P=w.next()){C.index>I?(R=C,C=null):R=C.sibling;var D=d(y,C,P.value,E);if(D===null){C===null&&(C=R);break}e&&C&&D.alternate===null&&t(y,C),b=s(D,b,I),T===null?S=D:T.sibling=D,T=D,C=R}if(P.done)return n(y,C),gs&&Db(y,I),S;if(C===null){for(;!P.done;I++,P=w.next())P=f(y,P.value,E),P!==null&&(b=s(P,b,I),T===null?S=P:T.sibling=P,T=P);return gs&&Db(y,I),S}for(C=r(y,C);!P.done;I++,P=w.next())P=h(C,y,I,P.value,E),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?I:P.key),b=s(P,b,I),T===null?S=P:T.sibling=P,T=P);return e&&C.forEach(function(L){return t(y,L)}),gs&&Db(y,I),S}function g(y,b,w,E){if(typeof w=="object"&&w!==null&&w.type===RE&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case yO:e:{for(var S=w.key,T=b;T!==null;){if(T.key===S){if(S=w.type,S===RE){if(T.tag===7){n(y,T.sibling),b=i(T,w.props.children),b.return=y,y=b;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ky&&nfe(S)===T.type){n(y,T.sibling),b=i(T,w.props),b.ref=QA(y,T,w),b.return=y,y=b;break e}n(y,T);break}else t(y,T);T=T.sibling}w.type===RE?(b=R_(w.props.children,y.mode,E,w.key),b.return=y,y=b):(E=v$(w.type,w.key,w.props,null,y.mode,E),E.ref=QA(y,b,w),E.return=y,y=E)}return o(y);case kE:e:{for(T=w.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=AU(w,y.mode,E),b.return=y,y=b}return o(y);case ky:return T=w._init,g(y,b,T(w._payload),E)}if(Y2(w))return p(y,b,w,E);if(WA(w))return m(y,b,w,E);IO(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,w),b.return=y,y=b):(n(y,b),b=CU(w,y.mode,E),b.return=y,y=b),o(y)):n(y,b)}return g}var qS=fEe(!0),dEe=fEe(!1),BM=E1(null),UM=null,FE=null,sX=null;function oX(){sX=FE=UM=null}function aX(e){var t=BM.current;is(BM),e._currentValue=t}function TH(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sS(e,t){UM=e,sX=FE=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Hl=!0),e.firstContext=null)}function Zf(e){var t=e._currentValue;if(sX!==e)if(e={context:e,memoizedValue:t,next:null},FE===null){if(UM===null)throw Error(vt(308));FE=e,UM.dependencies={lanes:0,firstContext:e}}else FE=FE.next=e;return t}var l_=null;function uX(e){l_===null?l_=[e]:l_.push(e)}function hEe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,uX(t)):(n.next=i.next,i.next=n),t.interleaved=n,i0(e,r)}function i0(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ry=!1;function lX(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pEe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pv(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Wr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,i0(e,n)}return i=r.interleaved,i===null?(t.next=t,uX(r)):(t.next=i.next,i.next=t),r.interleaved=t,i0(e,n)}function d$(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,YK(e,n)}}function rfe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zM(e,t,n,r){var i=e.updateQueue;Ry=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=ks({},f,d);break e;case 2:Ry=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);W_|=o,e.lanes=o,e.memoizedState=f}}function ife(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(vt(191,i));i.call(r)}}}var ON={},zp=E1(ON),Qk=E1(ON),Jk=E1(ON);function c_(e){if(e===ON)throw Error(vt(174));return e}function cX(e,t){switch(Vi(Jk,t),Vi(Qk,e),Vi(zp,ON),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sH(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sH(t,e)}is(zp),Vi(zp,t)}function WS(){is(zp),is(Qk),is(Jk)}function mEe(e){c_(Jk.current);var t=c_(zp.current),n=sH(t,e.type);t!==n&&(Vi(Qk,e),Vi(zp,n))}function fX(e){Qk.current===e&&(is(zp),is(Qk))}var Ss=E1(0);function VM(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _U=[];function dX(){for(var e=0;e<_U.length;e++)_U[e]._workInProgressVersionPrimary=null;_U.length=0}var h$=P0.ReactCurrentDispatcher,wU=P0.ReactCurrentBatchConfig,q_=0,Is=null,Po=null,na=null,HM=!1,HI=!1,Zk=0,nQe=0;function Qa(){throw Error(vt(321))}function hX(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ch(e[n],t[n]))return!1;return!0}function pX(e,t,n,r,i,s){if(q_=s,Is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,h$.current=e===null||e.memoizedState===null?oQe:aQe,e=n(r,i),HI){s=0;do{if(HI=!1,Zk=0,25<=s)throw Error(vt(301));s+=1,na=Po=null,t.updateQueue=null,h$.current=uQe,e=n(r,i)}while(HI)}if(h$.current=qM,t=Po!==null&&Po.next!==null,q_=0,na=Po=Is=null,HM=!1,t)throw Error(vt(300));return e}function mX(){var e=Zk!==0;return Zk=0,e}function cp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return na===null?Is.memoizedState=na=e:na=na.next=e,na}function ed(){if(Po===null){var e=Is.alternate;e=e!==null?e.memoizedState:null}else e=Po.next;var t=na===null?Is.memoizedState:na.next;if(t!==null)na=t,Po=e;else{if(e===null)throw Error(vt(310));Po=e,e={memoizedState:Po.memoizedState,baseState:Po.baseState,baseQueue:Po.baseQueue,queue:Po.queue,next:null},na===null?Is.memoizedState=na=e:na=na.next=e}return na}function eR(e,t){return typeof t=="function"?t(e):t}function xU(e){var t=ed(),n=t.queue;if(n===null)throw Error(vt(311));n.lastRenderedReducer=e;var r=Po,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((q_&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Is.lanes|=c,W_|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Ch(r,t.memoizedState)||(Hl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Is.lanes|=s,W_|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function EU(e){var t=ed(),n=t.queue;if(n===null)throw Error(vt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ch(s,t.memoizedState)||(Hl=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function gEe(){}function yEe(e,t){var n=Is,r=ed(),i=t(),s=!Ch(r.memoizedState,i);if(s&&(r.memoizedState=i,Hl=!0),r=r.queue,gX(_Ee.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||na!==null&&na.memoizedState.tag&1){if(n.flags|=2048,tR(9,bEe.bind(null,n,r,i,t),void 0,null),da===null)throw Error(vt(349));q_&30||vEe(n,t,i)}return i}function vEe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Is.updateQueue,t===null?(t={lastEffect:null,stores:null},Is.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bEe(e,t,n,r){t.value=n,t.getSnapshot=r,wEe(t)&&xEe(e)}function _Ee(e,t,n){return n(function(){wEe(t)&&xEe(e)})}function wEe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ch(e,n)}catch{return!0}}function xEe(e){var t=i0(e,1);t!==null&&yh(t,e,1,-1)}function sfe(e){var t=cp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eR,lastRenderedState:e},t.queue=e,e=e.dispatch=sQe.bind(null,Is,e),[t.memoizedState,e]}function tR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Is.updateQueue,t===null?(t={lastEffect:null,stores:null},Is.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function EEe(){return ed().memoizedState}function p$(e,t,n,r){var i=cp();Is.flags|=e,i.memoizedState=tR(1|t,n,void 0,r===void 0?null:r)}function w4(e,t,n,r){var i=ed();r=r===void 0?null:r;var s=void 0;if(Po!==null){var o=Po.memoizedState;if(s=o.destroy,r!==null&&hX(r,o.deps)){i.memoizedState=tR(t,n,s,r);return}}Is.flags|=e,i.memoizedState=tR(1|t,n,s,r)}function ofe(e,t){return p$(8390656,8,e,t)}function gX(e,t){return w4(2048,8,e,t)}function SEe(e,t){return w4(4,2,e,t)}function TEe(e,t){return w4(4,4,e,t)}function CEe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AEe(e,t,n){return n=n!=null?n.concat([e]):null,w4(4,4,CEe.bind(null,t,e),n)}function yX(){}function IEe(e,t){var n=ed();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hX(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function kEe(e,t){var n=ed();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hX(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function REe(e,t,n){return q_&21?(Ch(n,t)||(n=$xe(),Is.lanes|=n,W_|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Hl=!0),e.memoizedState=n)}function rQe(e,t){var n=xi;xi=n!==0&&4>n?n:4,e(!0);var r=wU.transition;wU.transition={};try{e(!1),t()}finally{xi=n,wU.transition=r}}function NEe(){return ed().memoizedState}function iQe(e,t,n){var r=gv(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PEe(e))DEe(t,n);else if(n=hEe(e,t,n,r),n!==null){var i=rl();yh(n,e,r,i),OEe(n,t,r)}}function sQe(e,t,n){var r=gv(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PEe(e))DEe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ch(a,o)){var u=t.interleaved;u===null?(i.next=i,uX(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=hEe(e,t,i,r),n!==null&&(i=rl(),yh(n,e,r,i),OEe(n,t,r))}}function PEe(e){var t=e.alternate;return e===Is||t!==null&&t===Is}function DEe(e,t){HI=HM=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OEe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,YK(e,n)}}var qM={readContext:Zf,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useInsertionEffect:Qa,useLayoutEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useMutableSource:Qa,useSyncExternalStore:Qa,useId:Qa,unstable_isNewReconciler:!1},oQe={readContext:Zf,useCallback:function(e,t){return cp().memoizedState=[e,t===void 0?null:t],e},useContext:Zf,useEffect:ofe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,p$(4194308,4,CEe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return p$(4194308,4,e,t)},useInsertionEffect:function(e,t){return p$(4,2,e,t)},useMemo:function(e,t){var n=cp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=cp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=iQe.bind(null,Is,e),[r.memoizedState,e]},useRef:function(e){var t=cp();return e={current:e},t.memoizedState=e},useState:sfe,useDebugValue:yX,useDeferredValue:function(e){return cp().memoizedState=e},useTransition:function(){var e=sfe(!1),t=e[0];return e=rQe.bind(null,e[1]),cp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Is,i=cp();if(gs){if(n===void 0)throw Error(vt(407));n=n()}else{if(n=t(),da===null)throw Error(vt(349));q_&30||vEe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ofe(_Ee.bind(null,r,s,e),[e]),r.flags|=2048,tR(9,bEe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=cp(),t=da.identifierPrefix;if(gs){var n=Rg,r=kg;n=(r&~(1<<32-gh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zk++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nQe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aQe={readContext:Zf,useCallback:IEe,useContext:Zf,useEffect:gX,useImperativeHandle:AEe,useInsertionEffect:SEe,useLayoutEffect:TEe,useMemo:kEe,useReducer:xU,useRef:EEe,useState:function(){return xU(eR)},useDebugValue:yX,useDeferredValue:function(e){var t=ed();return REe(t,Po.memoizedState,e)},useTransition:function(){var e=xU(eR)[0],t=ed().memoizedState;return[e,t]},useMutableSource:gEe,useSyncExternalStore:yEe,useId:NEe,unstable_isNewReconciler:!1},uQe={readContext:Zf,useCallback:IEe,useContext:Zf,useEffect:gX,useImperativeHandle:AEe,useInsertionEffect:SEe,useLayoutEffect:TEe,useMemo:kEe,useReducer:EU,useRef:EEe,useState:function(){return EU(eR)},useDebugValue:yX,useDeferredValue:function(e){var t=ed();return Po===null?t.memoizedState=e:REe(t,Po.memoizedState,e)},useTransition:function(){var e=EU(eR)[0],t=ed().memoizedState;return[e,t]},useMutableSource:gEe,useSyncExternalStore:yEe,useId:NEe,unstable_isNewReconciler:!1};function Gd(e,t){if(e&&e.defaultProps){t=ks({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function CH(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ks({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var x4={isMounted:function(e){return(e=e._reactInternals)?$w(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rl(),i=gv(e),s=zg(r,i);s.payload=t,n!=null&&(s.callback=n),t=pv(e,s,i),t!==null&&(yh(t,e,i,r),d$(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rl(),i=gv(e),s=zg(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=pv(e,s,i),t!==null&&(yh(t,e,i,r),d$(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rl(),r=gv(e),i=zg(n,r);i.tag=2,t!=null&&(i.callback=t),t=pv(e,i,r),t!==null&&(yh(t,e,r,n),d$(t,e,r))}};function afe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Gk(n,r)||!Gk(i,s):!0}function $Ee(e,t,n){var r=!1,i=Lv,s=t.contextType;return typeof s=="object"&&s!==null?s=Zf(s):(i=Jl(t)?V_:Eu.current,r=t.contextTypes,s=(r=r!=null)?VS(e,i):Lv),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=x4,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ufe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&x4.enqueueReplaceState(t,t.state,null)}function AH(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},lX(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Zf(s):(s=Jl(t)?V_:Eu.current,i.context=VS(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(CH(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&x4.enqueueReplaceState(i,i.state,null),zM(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function GS(e,t){try{var n="",r=t;do n+=MKe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function SU(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function IH(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lQe=typeof WeakMap=="function"?WeakMap:Map;function MEe(e,t,n){n=zg(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){GM||(GM=!0,FH=r),IH(e,t)},n}function LEe(e,t,n){n=zg(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){IH(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){IH(e,t),typeof r!="function"&&(mv===null?mv=new Set([this]):mv.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function lfe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new lQe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=EQe.bind(null,e,t,n),t.then(e,e))}function cfe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ffe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zg(-1,1),t.tag=2,pv(n,t,1))),n.lanes|=1),e)}var cQe=P0.ReactCurrentOwner,Hl=!1;function qu(e,t,n,r){t.child=e===null?dEe(t,null,n,r):qS(t,e.child,n,r)}function dfe(e,t,n,r,i){n=n.render;var s=t.ref;return sS(t,i),r=pX(e,t,n,r,s,i),n=mX(),e!==null&&!Hl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,s0(e,t,i)):(gs&&n&&nX(t),t.flags|=1,qu(e,t,r,i),t.child)}function hfe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!TX(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,FEe(e,t,s,r,i)):(e=v$(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gk,n(o,r)&&e.ref===t.ref)return s0(e,t,i)}return t.flags|=1,e=yv(s,r),e.ref=t.ref,e.return=t,t.child=e}function FEe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Gk(s,r)&&e.ref===t.ref)if(Hl=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Hl=!0);else return t.lanes=e.lanes,s0(e,t,i)}return kH(e,t,n,r,i)}function jEe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vi(BE,Rc),Rc|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vi(BE,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Vi(BE,Rc),Rc|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Vi(BE,Rc),Rc|=r;return qu(e,t,i,n),t.child}function BEe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kH(e,t,n,r,i){var s=Jl(n)?V_:Eu.current;return s=VS(t,s),sS(t,i),n=pX(e,t,n,r,s,i),r=mX(),e!==null&&!Hl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,s0(e,t,i)):(gs&&r&&nX(t),t.flags|=1,qu(e,t,n,i),t.child)}function pfe(e,t,n,r,i){if(Jl(n)){var s=!0;LM(t)}else s=!1;if(sS(t,i),t.stateNode===null)m$(e,t),$Ee(t,n,r),AH(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Zf(l):(l=Jl(n)?V_:Eu.current,l=VS(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&ufe(t,o,r,l),Ry=!1;var d=t.memoizedState;o.state=d,zM(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Ql.current||Ry?(typeof c=="function"&&(CH(t,n,c,r),u=t.memoizedState),(a=Ry||afe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,pEe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Gd(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zf(u):(u=Jl(n)?V_:Eu.current,u=VS(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&ufe(t,o,r,u),Ry=!1,d=t.memoizedState,o.state=d,zM(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Ql.current||Ry?(typeof h=="function"&&(CH(t,n,h,r),p=t.memoizedState),(l=Ry||afe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return RH(e,t,n,r,s,i)}function RH(e,t,n,r,i,s){BEe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Zce(t,n,!1),s0(e,t,s);r=t.stateNode,cQe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qS(t,e.child,null,s),t.child=qS(t,null,a,s)):qu(e,t,a,s),t.memoizedState=r.state,i&&Zce(t,n,!0),t.child}function UEe(e){var t=e.stateNode;t.pendingContext?Jce(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jce(e,t.context,!1),cX(e,t.containerInfo)}function mfe(e,t,n,r,i){return HS(),iX(i),t.flags|=256,qu(e,t,n,r),t.child}var NH={dehydrated:null,treeContext:null,retryLane:0};function PH(e){return{baseLanes:e,cachePool:null,transitions:null}}function zEe(e,t,n){var r=t.pendingProps,i=Ss.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vi(Ss,i&1),e===null)return SH(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=T4(o,r,0,null),e=R_(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=PH(n),t.memoizedState=NH,e):vX(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fQe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=yv(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yv(a,s):(s=R_(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?PH(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=NH,r}return s=e.child,e=s.sibling,r=yv(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vX(e,t){return t=T4({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kO(e,t,n,r){return r!==null&&iX(r),qS(t,e.child,null,n),e=vX(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fQe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=SU(Error(vt(422))),kO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=T4({mode:"visible",children:r.children},i,0,null),s=R_(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&qS(t,e.child,null,o),t.child.memoizedState=PH(o),t.memoizedState=NH,s);if(!(t.mode&1))return kO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(vt(419)),r=SU(s,r,void 0),kO(e,t,o,r)}if(a=(o&e.childLanes)!==0,Hl||a){if(r=da,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,i0(e,i),yh(r,e,i,-1))}return SX(),r=SU(Error(vt(421))),kO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=SQe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Lc=hv(i.nextSibling),Vc=t,gs=!0,Zd=null,e!==null&&(Mf[Lf++]=kg,Mf[Lf++]=Rg,Mf[Lf++]=H_,kg=e.id,Rg=e.overflow,H_=t),t=vX(t,r.children),t.flags|=4096,t)}function gfe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),TH(e.return,t,n)}function TU(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function VEe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(qu(e,t,r.children,n),r=Ss.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gfe(e,n,t);else if(e.tag===19)gfe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Vi(Ss,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&VM(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),TU(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&VM(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}TU(t,!0,n,null,s);break;case"together":TU(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function m$(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function s0(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),W_|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(vt(153));if(t.child!==null){for(e=t.child,n=yv(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yv(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dQe(e,t,n){switch(t.tag){case 3:UEe(t),HS();break;case 5:mEe(t);break;case 1:Jl(t.type)&&LM(t);break;case 4:cX(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Vi(BM,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Vi(Ss,Ss.current&1),t.flags|=128,null):n&t.child.childLanes?zEe(e,t,n):(Vi(Ss,Ss.current&1),e=s0(e,t,n),e!==null?e.sibling:null);Vi(Ss,Ss.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return VEe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vi(Ss,Ss.current),r)break;return null;case 22:case 23:return t.lanes=0,jEe(e,t,n)}return s0(e,t,n)}var HEe,DH,qEe,WEe;HEe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};DH=function(){};qEe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,c_(zp.current);var s=null;switch(n){case"input":i=tH(e,i),r=tH(e,r),s=[];break;case"select":i=ks({},i,{value:void 0}),r=ks({},r,{value:void 0}),s=[];break;case"textarea":i=iH(e,i),r=iH(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$M)}oH(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Bk.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Bk.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ji("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};WEe=function(e,t,n,r){n!==r&&(t.flags|=4)};function JA(e,t){if(!gs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hQe(e,t,n){var r=t.pendingProps;switch(rX(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:return Jl(t.type)&&MM(),Ja(t),null;case 3:return r=t.stateNode,WS(),is(Ql),is(Eu),dX(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(AO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zd!==null&&(UH(Zd),Zd=null))),DH(e,t),Ja(t),null;case 5:fX(t);var i=c_(Jk.current);if(n=t.type,e!==null&&t.stateNode!=null)qEe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(vt(166));return Ja(t),null}if(e=c_(zp.current),AO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_p]=t,r[Xk]=s,e=(t.mode&1)!==0,n){case"dialog":Ji("cancel",r),Ji("close",r);break;case"iframe":case"object":case"embed":Ji("load",r);break;case"video":case"audio":for(i=0;i<X2.length;i++)Ji(X2[i],r);break;case"source":Ji("error",r);break;case"img":case"image":case"link":Ji("error",r),Ji("load",r);break;case"details":Ji("toggle",r);break;case"input":Tce(r,s),Ji("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ji("invalid",r);break;case"textarea":Ace(r,s),Ji("invalid",r)}oH(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&CO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&CO(r.textContent,a,e),i=["children",""+a]):Bk.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ji("scroll",r)}switch(n){case"input":vO(r),Cce(r,s,!0);break;case"textarea":vO(r),Ice(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$M)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_xe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[_p]=t,e[Xk]=r,HEe(e,t,!1,!1),t.stateNode=e;e:{switch(o=aH(n,r),n){case"dialog":Ji("cancel",e),Ji("close",e),i=r;break;case"iframe":case"object":case"embed":Ji("load",e),i=r;break;case"video":case"audio":for(i=0;i<X2.length;i++)Ji(X2[i],e);i=r;break;case"source":Ji("error",e),i=r;break;case"img":case"image":case"link":Ji("error",e),Ji("load",e),i=r;break;case"details":Ji("toggle",e),i=r;break;case"input":Tce(e,r),i=tH(e,r),Ji("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ks({},r,{value:void 0}),Ji("invalid",e);break;case"textarea":Ace(e,r),i=iH(e,r),Ji("invalid",e);break;default:i=r}oH(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Exe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wxe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Uk(e,u):typeof u=="number"&&Uk(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bk.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ji("scroll",e):u!=null&&zK(e,s,u,o))}switch(n){case"input":vO(e),Cce(e,r,!1);break;case"textarea":vO(e),Ice(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mv(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?tS(e,!!r.multiple,s,!1):r.defaultValue!=null&&tS(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=$M)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&t.stateNode!=null)WEe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(vt(166));if(n=c_(Jk.current),c_(zp.current),AO(t)){if(r=t.stateNode,n=t.memoizedProps,r[_p]=t,(s=r.nodeValue!==n)&&(e=Vc,e!==null))switch(e.tag){case 3:CO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&CO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_p]=t,t.stateNode=r}return Ja(t),null;case 13:if(is(Ss),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gs&&Lc!==null&&t.mode&1&&!(t.flags&128))cEe(),HS(),t.flags|=98560,s=!1;else if(s=AO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(vt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(vt(317));s[_p]=t}else HS(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ja(t),s=!1}else Zd!==null&&(UH(Zd),Zd=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ss.current&1?Fo===0&&(Fo=3):SX())),t.updateQueue!==null&&(t.flags|=4),Ja(t),null);case 4:return WS(),DH(e,t),e===null&&Yk(t.stateNode.containerInfo),Ja(t),null;case 10:return aX(t.type._context),Ja(t),null;case 17:return Jl(t.type)&&MM(),Ja(t),null;case 19:if(is(Ss),s=t.memoizedState,s===null)return Ja(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)JA(s,!1);else{if(Fo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=VM(e),o!==null){for(t.flags|=128,JA(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vi(Ss,Ss.current&1|2),t.child}e=e.sibling}s.tail!==null&&Zs()>YS&&(t.flags|=128,r=!0,JA(s,!1),t.lanes=4194304)}else{if(!r)if(e=VM(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),JA(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!gs)return Ja(t),null}else 2*Zs()-s.renderingStartTime>YS&&n!==1073741824&&(t.flags|=128,r=!0,JA(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Zs(),t.sibling=null,n=Ss.current,Vi(Ss,r?n&1|2:n&1),t):(Ja(t),null);case 22:case 23:return EX(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rc&1073741824&&(Ja(t),t.subtreeFlags&6&&(t.flags|=8192)):Ja(t),null;case 24:return null;case 25:return null}throw Error(vt(156,t.tag))}function pQe(e,t){switch(rX(t),t.tag){case 1:return Jl(t.type)&&MM(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return WS(),is(Ql),is(Eu),dX(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fX(t),null;case 13:if(is(Ss),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(vt(340));HS()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return is(Ss),null;case 4:return WS(),null;case 10:return aX(t.type._context),null;case 22:case 23:return EX(),null;case 24:return null;default:return null}}var RO=!1,cu=!1,mQe=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function jE(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ls(e,t,r)}else n.current=null}function OH(e,t,n){try{n()}catch(r){Ls(e,t,r)}}var yfe=!1;function gQe(e,t){if(yH=PM,e=Qxe(),tX(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vH={focusedElem:e,selectionRange:n},PM=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Gd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(E){Ls(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return p=yfe,yfe=!1,p}function qI(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&OH(t,n,s)}i=i.next}while(i!==r)}}function E4(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $H(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function GEe(e){var t=e.alternate;t!==null&&(e.alternate=null,GEe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_p],delete t[Xk],delete t[wH],delete t[JXe],delete t[ZXe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YEe(e){return e.tag===5||e.tag===3||e.tag===4}function vfe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YEe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function MH(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$M));else if(r!==4&&(e=e.child,e!==null))for(MH(e,t,n),e=e.sibling;e!==null;)MH(e,t,n),e=e.sibling}function LH(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(LH(e,t,n),e=e.sibling;e!==null;)LH(e,t,n),e=e.sibling}var Aa=null,Kd=!1;function gy(e,t,n){for(n=n.child;n!==null;)KEe(e,t,n),n=n.sibling}function KEe(e,t,n){if(Up&&typeof Up.onCommitFiberUnmount=="function")try{Up.onCommitFiberUnmount(m4,n)}catch{}switch(n.tag){case 5:cu||jE(n,t);case 6:var r=Aa,i=Kd;Aa=null,gy(e,t,n),Aa=r,Kd=i,Aa!==null&&(Kd?(e=Aa,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Aa.removeChild(n.stateNode));break;case 18:Aa!==null&&(Kd?(e=Aa,n=n.stateNode,e.nodeType===8?vU(e.parentNode,n):e.nodeType===1&&vU(e,n),qk(e)):vU(Aa,n.stateNode));break;case 4:r=Aa,i=Kd,Aa=n.stateNode.containerInfo,Kd=!0,gy(e,t,n),Aa=r,Kd=i;break;case 0:case 11:case 14:case 15:if(!cu&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&OH(n,t,o),i=i.next}while(i!==r)}gy(e,t,n);break;case 1:if(!cu&&(jE(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ls(n,t,a)}gy(e,t,n);break;case 21:gy(e,t,n);break;case 22:n.mode&1?(cu=(r=cu)||n.memoizedState!==null,gy(e,t,n),cu=r):gy(e,t,n);break;default:gy(e,t,n)}}function bfe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mQe),t.forEach(function(r){var i=TQe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Md(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Aa=a.stateNode,Kd=!1;break e;case 3:Aa=a.stateNode.containerInfo,Kd=!0;break e;case 4:Aa=a.stateNode.containerInfo,Kd=!0;break e}a=a.return}if(Aa===null)throw Error(vt(160));KEe(s,o,i),Aa=null,Kd=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ls(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)XEe(t,e),t=t.sibling}function XEe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Md(t,e),rp(e),r&4){try{qI(3,e,e.return),E4(3,e)}catch(m){Ls(e,e.return,m)}try{qI(5,e,e.return)}catch(m){Ls(e,e.return,m)}}break;case 1:Md(t,e),rp(e),r&512&&n!==null&&jE(n,n.return);break;case 5:if(Md(t,e),rp(e),r&512&&n!==null&&jE(n,n.return),e.flags&32){var i=e.stateNode;try{Uk(i,"")}catch(m){Ls(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&vxe(i,s),aH(a,o);var l=aH(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Exe(i,f):c==="dangerouslySetInnerHTML"?wxe(i,f):c==="children"?Uk(i,f):zK(i,c,f,l)}switch(a){case"input":nH(i,s);break;case"textarea":bxe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?tS(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?tS(i,!!s.multiple,s.defaultValue,!0):tS(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xk]=s}catch(m){Ls(e,e.return,m)}}break;case 6:if(Md(t,e),rp(e),r&4){if(e.stateNode===null)throw Error(vt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ls(e,e.return,m)}}break;case 3:if(Md(t,e),rp(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qk(t.containerInfo)}catch(m){Ls(e,e.return,m)}break;case 4:Md(t,e),rp(e);break;case 13:Md(t,e),rp(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wX=Zs())),r&4&&bfe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(cu=(l=cu)||c,Md(t,e),cu=l):Md(t,e),rp(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Vt=e,c=e.child;c!==null;){for(f=Vt=c;Vt!==null;){switch(d=Vt,h=d.child,d.tag){case 0:case 11:case 14:case 15:qI(4,d,d.return);break;case 1:jE(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ls(r,n,m)}}break;case 5:jE(d,d.return);break;case 22:if(d.memoizedState!==null){wfe(f);continue}}h!==null?(h.return=d,Vt=h):wfe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=xxe("display",o))}catch(m){Ls(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ls(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Md(t,e),rp(e),r&4&&bfe(e);break;case 21:break;default:Md(t,e),rp(e)}}function rp(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(YEe(n)){var r=n;break e}n=n.return}throw Error(vt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uk(i,""),r.flags&=-33);var s=vfe(e);LH(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vfe(e);MH(e,a,o);break;default:throw Error(vt(161))}}catch(u){Ls(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yQe(e,t,n){Vt=e,QEe(e)}function QEe(e,t,n){for(var r=(e.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||RO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||cu;a=RO;var l=cu;if(RO=o,(cu=u)&&!l)for(Vt=i;Vt!==null;)o=Vt,u=o.child,o.tag===22&&o.memoizedState!==null?xfe(i):u!==null?(u.return=o,Vt=u):xfe(i);for(;s!==null;)Vt=s,QEe(s),s=s.sibling;Vt=i,RO=a,cu=l}_fe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):_fe(e)}}function _fe(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cu||E4(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!cu)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Gd(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ife(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ife(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&qk(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}cu||t.flags&512&&$H(t)}catch(d){Ls(t,t.return,d)}}if(t===e){Vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function wfe(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function xfe(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{E4(4,t)}catch(u){Ls(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ls(t,i,u)}}var s=t.return;try{$H(t)}catch(u){Ls(t,s,u)}break;case 5:var o=t.return;try{$H(t)}catch(u){Ls(t,o,u)}}}catch(u){Ls(t,t.return,u)}if(t===e){Vt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Vt=a;break}Vt=t.return}}var vQe=Math.ceil,WM=P0.ReactCurrentDispatcher,bX=P0.ReactCurrentOwner,Xf=P0.ReactCurrentBatchConfig,Wr=0,da=null,yo=null,$a=0,Rc=0,BE=E1(0),Fo=0,nR=null,W_=0,S4=0,_X=0,WI=null,Ml=null,wX=0,YS=1/0,dg=null,GM=!1,FH=null,mv=null,NO=!1,Xy=null,YM=0,GI=0,jH=null,g$=-1,y$=0;function rl(){return Wr&6?Zs():g$!==-1?g$:g$=Zs()}function gv(e){return e.mode&1?Wr&2&&$a!==0?$a&-$a:tQe.transition!==null?(y$===0&&(y$=$xe()),y$):(e=xi,e!==0||(e=window.event,e=e===void 0?16:zxe(e.type)),e):1}function yh(e,t,n,r){if(50<GI)throw GI=0,jH=null,Error(vt(185));NN(e,n,r),(!(Wr&2)||e!==da)&&(e===da&&(!(Wr&2)&&(S4|=n),Fo===4&&By(e,$a)),Zl(e,r),n===1&&Wr===0&&!(t.mode&1)&&(YS=Zs()+500,_4&&S1()))}function Zl(e,t){var n=e.callbackNode;tXe(e,t);var r=NM(e,e===da?$a:0);if(r===0)n!==null&&Nce(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nce(n),t===1)e.tag===0?eQe(Efe.bind(null,e)):aEe(Efe.bind(null,e)),XXe(function(){!(Wr&6)&&S1()}),n=null;else{switch(Mxe(r)){case 1:n=GK;break;case 4:n=Dxe;break;case 16:n=RM;break;case 536870912:n=Oxe;break;default:n=RM}n=sSe(n,JEe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function JEe(e,t){if(g$=-1,y$=0,Wr&6)throw Error(vt(327));var n=e.callbackNode;if(oS()&&e.callbackNode!==n)return null;var r=NM(e,e===da?$a:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=KM(e,r);else{t=r;var i=Wr;Wr|=2;var s=eSe();(da!==e||$a!==t)&&(dg=null,YS=Zs()+500,k_(e,t));do try{wQe();break}catch(a){ZEe(e,a)}while(!0);oX(),WM.current=s,Wr=i,yo!==null?t=0:(da=null,$a=0,t=Fo)}if(t!==0){if(t===2&&(i=dH(e),i!==0&&(r=i,t=BH(e,i))),t===1)throw n=nR,k_(e,0),By(e,r),Zl(e,Zs()),n;if(t===6)By(e,r);else{if(i=e.current.alternate,!(r&30)&&!bQe(i)&&(t=KM(e,r),t===2&&(s=dH(e),s!==0&&(r=s,t=BH(e,s))),t===1))throw n=nR,k_(e,0),By(e,r),Zl(e,Zs()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(vt(345));case 2:Ob(e,Ml,dg);break;case 3:if(By(e,r),(r&130023424)===r&&(t=wX+500-Zs(),10<t)){if(NM(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){rl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=_H(Ob.bind(null,e,Ml,dg),t);break}Ob(e,Ml,dg);break;case 4:if(By(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-gh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Zs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vQe(r/1960))-r,10<r){e.timeoutHandle=_H(Ob.bind(null,e,Ml,dg),r);break}Ob(e,Ml,dg);break;case 5:Ob(e,Ml,dg);break;default:throw Error(vt(329))}}}return Zl(e,Zs()),e.callbackNode===n?JEe.bind(null,e):null}function BH(e,t){var n=WI;return e.current.memoizedState.isDehydrated&&(k_(e,t).flags|=256),e=KM(e,t),e!==2&&(t=Ml,Ml=n,t!==null&&UH(t)),e}function UH(e){Ml===null?Ml=e:Ml.push.apply(Ml,e)}function bQe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ch(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function By(e,t){for(t&=~_X,t&=~S4,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gh(t),r=1<<n;e[n]=-1,t&=~r}}function Efe(e){if(Wr&6)throw Error(vt(327));oS();var t=NM(e,0);if(!(t&1))return Zl(e,Zs()),null;var n=KM(e,t);if(e.tag!==0&&n===2){var r=dH(e);r!==0&&(t=r,n=BH(e,r))}if(n===1)throw n=nR,k_(e,0),By(e,t),Zl(e,Zs()),n;if(n===6)throw Error(vt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ob(e,Ml,dg),Zl(e,Zs()),null}function xX(e,t){var n=Wr;Wr|=1;try{return e(t)}finally{Wr=n,Wr===0&&(YS=Zs()+500,_4&&S1())}}function G_(e){Xy!==null&&Xy.tag===0&&!(Wr&6)&&oS();var t=Wr;Wr|=1;var n=Xf.transition,r=xi;try{if(Xf.transition=null,xi=1,e)return e()}finally{xi=r,Xf.transition=n,Wr=t,!(Wr&6)&&S1()}}function EX(){Rc=BE.current,is(BE)}function k_(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KXe(n)),yo!==null)for(n=yo.return;n!==null;){var r=n;switch(rX(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&MM();break;case 3:WS(),is(Ql),is(Eu),dX();break;case 5:fX(r);break;case 4:WS();break;case 13:is(Ss);break;case 19:is(Ss);break;case 10:aX(r.type._context);break;case 22:case 23:EX()}n=n.return}if(da=e,yo=e=yv(e.current,null),$a=Rc=t,Fo=0,nR=null,_X=S4=W_=0,Ml=WI=null,l_!==null){for(t=0;t<l_.length;t++)if(n=l_[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}l_=null}return e}function ZEe(e,t){do{var n=yo;try{if(oX(),h$.current=qM,HM){for(var r=Is.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}HM=!1}if(q_=0,na=Po=Is=null,HI=!1,Zk=0,bX.current=null,n===null||n.return===null){Fo=1,nR=t,yo=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=$a,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=cfe(o);if(h!==null){h.flags&=-257,ffe(h,o,a,s,t),h.mode&1&&lfe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){lfe(s,l,t),SX();break e}u=Error(vt(426))}}else if(gs&&a.mode&1){var g=cfe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ffe(g,o,a,s,t),iX(GS(u,a));break e}}s=u=GS(u,a),Fo!==4&&(Fo=2),WI===null?WI=[s]:WI.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=MEe(s,u,t);rfe(s,y);break e;case 1:a=u;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(mv===null||!mv.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=LEe(s,a,t);rfe(s,E);break e}}s=s.return}while(s!==null)}nSe(n)}catch(S){t=S,yo===n&&n!==null&&(yo=n=n.return);continue}break}while(!0)}function eSe(){var e=WM.current;return WM.current=qM,e===null?qM:e}function SX(){(Fo===0||Fo===3||Fo===2)&&(Fo=4),da===null||!(W_&268435455)&&!(S4&268435455)||By(da,$a)}function KM(e,t){var n=Wr;Wr|=2;var r=eSe();(da!==e||$a!==t)&&(dg=null,k_(e,t));do try{_Qe();break}catch(i){ZEe(e,i)}while(!0);if(oX(),Wr=n,WM.current=r,yo!==null)throw Error(vt(261));return da=null,$a=0,Fo}function _Qe(){for(;yo!==null;)tSe(yo)}function wQe(){for(;yo!==null&&!WKe();)tSe(yo)}function tSe(e){var t=iSe(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,t===null?nSe(e):yo=t,bX.current=null}function nSe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pQe(n,t),n!==null){n.flags&=32767,yo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fo=6,yo=null;return}}else if(n=hQe(n,t,Rc),n!==null){yo=n;return}if(t=t.sibling,t!==null){yo=t;return}yo=t=e}while(t!==null);Fo===0&&(Fo=5)}function Ob(e,t,n){var r=xi,i=Xf.transition;try{Xf.transition=null,xi=1,xQe(e,t,n,r)}finally{Xf.transition=i,xi=r}return null}function xQe(e,t,n,r){do oS();while(Xy!==null);if(Wr&6)throw Error(vt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(vt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(nXe(e,s),e===da&&(yo=da=null,$a=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||NO||(NO=!0,sSe(RM,function(){return oS(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xf.transition,Xf.transition=null;var o=xi;xi=1;var a=Wr;Wr|=4,bX.current=null,gQe(e,n),XEe(n,e),zXe(vH),PM=!!yH,vH=yH=null,e.current=n,yQe(n),GKe(),Wr=a,xi=o,Xf.transition=s}else e.current=n;if(NO&&(NO=!1,Xy=e,YM=i),s=e.pendingLanes,s===0&&(mv=null),XKe(n.stateNode),Zl(e,Zs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(GM)throw GM=!1,e=FH,FH=null,e;return YM&1&&e.tag!==0&&oS(),s=e.pendingLanes,s&1?e===jH?GI++:(GI=0,jH=e):GI=0,S1(),null}function oS(){if(Xy!==null){var e=Mxe(YM),t=Xf.transition,n=xi;try{if(Xf.transition=null,xi=16>e?16:e,Xy===null)var r=!1;else{if(e=Xy,Xy=null,YM=0,Wr&6)throw Error(vt(331));var i=Wr;for(Wr|=4,Vt=e.current;Vt!==null;){var s=Vt,o=s.child;if(Vt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Vt=l;Vt!==null;){var c=Vt;switch(c.tag){case 0:case 11:case 15:qI(8,c,s)}var f=c.child;if(f!==null)f.return=c,Vt=f;else for(;Vt!==null;){c=Vt;var d=c.sibling,h=c.return;if(GEe(c),c===l){Vt=null;break}if(d!==null){d.return=h,Vt=d;break}Vt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Vt=o;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qI(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Vt=y;break e}Vt=s.return}}var b=e.current;for(Vt=b;Vt!==null;){o=Vt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Vt=w;else e:for(o=b;Vt!==null;){if(a=Vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:E4(9,a)}}catch(S){Ls(a,a.return,S)}if(a===o){Vt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Vt=E;break e}Vt=a.return}}if(Wr=i,S1(),Up&&typeof Up.onPostCommitFiberRoot=="function")try{Up.onPostCommitFiberRoot(m4,e)}catch{}r=!0}return r}finally{xi=n,Xf.transition=t}}return!1}function Sfe(e,t,n){t=GS(n,t),t=MEe(e,t,1),e=pv(e,t,1),t=rl(),e!==null&&(NN(e,1,t),Zl(e,t))}function Ls(e,t,n){if(e.tag===3)Sfe(e,e,n);else for(;t!==null;){if(t.tag===3){Sfe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mv===null||!mv.has(r))){e=GS(n,e),e=LEe(t,e,1),t=pv(t,e,1),e=rl(),t!==null&&(NN(t,1,e),Zl(t,e));break}}t=t.return}}function EQe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rl(),e.pingedLanes|=e.suspendedLanes&n,da===e&&($a&n)===n&&(Fo===4||Fo===3&&($a&130023424)===$a&&500>Zs()-wX?k_(e,0):_X|=n),Zl(e,t)}function rSe(e,t){t===0&&(e.mode&1?(t=wO,wO<<=1,!(wO&130023424)&&(wO=4194304)):t=1);var n=rl();e=i0(e,t),e!==null&&(NN(e,t,n),Zl(e,n))}function SQe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rSe(e,n)}function TQe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(vt(314))}r!==null&&r.delete(t),rSe(e,n)}var iSe;iSe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ql.current)Hl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Hl=!1,dQe(e,t,n);Hl=!!(e.flags&131072)}else Hl=!1,gs&&t.flags&1048576&&uEe(t,jM,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;m$(e,t),e=t.pendingProps;var i=VS(t,Eu.current);sS(t,n),i=pX(null,t,r,e,i,n);var s=mX();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jl(r)?(s=!0,LM(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lX(t),i.updater=x4,t.stateNode=i,i._reactInternals=t,AH(t,r,e,n),t=RH(null,t,r,!0,s,n)):(t.tag=0,gs&&s&&nX(t),qu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(m$(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=AQe(r),e=Gd(r,e),i){case 0:t=kH(null,t,r,e,n);break e;case 1:t=pfe(null,t,r,e,n);break e;case 11:t=dfe(null,t,r,e,n);break e;case 14:t=hfe(null,t,r,Gd(r.type,e),n);break e}throw Error(vt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gd(r,i),kH(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gd(r,i),pfe(e,t,r,i,n);case 3:e:{if(UEe(t),e===null)throw Error(vt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,pEe(e,t),zM(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=GS(Error(vt(423)),t),t=mfe(e,t,r,n,i);break e}else if(r!==i){i=GS(Error(vt(424)),t),t=mfe(e,t,r,n,i);break e}else for(Lc=hv(t.stateNode.containerInfo.firstChild),Vc=t,gs=!0,Zd=null,n=dEe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(HS(),r===i){t=s0(e,t,n);break e}qu(e,t,r,n)}t=t.child}return t;case 5:return mEe(t),e===null&&SH(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,bH(r,i)?o=null:s!==null&&bH(r,s)&&(t.flags|=32),BEe(e,t),qu(e,t,o,n),t.child;case 6:return e===null&&SH(t),null;case 13:return zEe(e,t,n);case 4:return cX(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qS(t,null,r,n):qu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gd(r,i),dfe(e,t,r,i,n);case 7:return qu(e,t,t.pendingProps,n),t.child;case 8:return qu(e,t,t.pendingProps.children,n),t.child;case 12:return qu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Vi(BM,r._currentValue),r._currentValue=o,s!==null)if(Ch(s.value,o)){if(s.children===i.children&&!Ql.current){t=s0(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=zg(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),TH(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(vt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),TH(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,sS(t,n),i=Zf(i),r=r(i),t.flags|=1,qu(e,t,r,n),t.child;case 14:return r=t.type,i=Gd(r,t.pendingProps),i=Gd(r.type,i),hfe(e,t,r,i,n);case 15:return FEe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gd(r,i),m$(e,t),t.tag=1,Jl(r)?(e=!0,LM(t)):e=!1,sS(t,n),$Ee(t,r,i),AH(t,r,i,n),RH(null,t,r,!0,e,n);case 19:return VEe(e,t,n);case 22:return jEe(e,t,n)}throw Error(vt(156,t.tag))};function sSe(e,t){return Pxe(e,t)}function CQe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qf(e,t,n,r){return new CQe(e,t,n,r)}function TX(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AQe(e){if(typeof e=="function")return TX(e)?1:0;if(e!=null){if(e=e.$$typeof,e===HK)return 11;if(e===qK)return 14}return 2}function yv(e,t){var n=e.alternate;return n===null?(n=qf(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function v$(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")TX(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case RE:return R_(n.children,i,s,t);case VK:o=8,i|=8;break;case QV:return e=qf(12,n,t,i|2),e.elementType=QV,e.lanes=s,e;case JV:return e=qf(13,n,t,i),e.elementType=JV,e.lanes=s,e;case ZV:return e=qf(19,n,t,i),e.elementType=ZV,e.lanes=s,e;case mxe:return T4(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hxe:o=10;break e;case pxe:o=9;break e;case HK:o=11;break e;case qK:o=14;break e;case ky:o=16,r=null;break e}throw Error(vt(130,e==null?e:typeof e,""))}return t=qf(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function R_(e,t,n,r){return e=qf(7,e,r,t),e.lanes=n,e}function T4(e,t,n,r){return e=qf(22,e,r,t),e.elementType=mxe,e.lanes=n,e.stateNode={isHidden:!1},e}function CU(e,t,n){return e=qf(6,e,null,t),e.lanes=n,e}function AU(e,t,n){return t=qf(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IQe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aU(0),this.expirationTimes=aU(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aU(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function CX(e,t,n,r,i,s,o,a,u){return e=new IQe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=qf(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lX(s),e}function kQe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kE,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function oSe(e){if(!e)return Lv;e=e._reactInternals;e:{if($w(e)!==e||e.tag!==1)throw Error(vt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(vt(171))}if(e.tag===1){var n=e.type;if(Jl(n))return oEe(e,n,t)}return t}function aSe(e,t,n,r,i,s,o,a,u){return e=CX(n,r,!0,e,i,s,o,a,u),e.context=oSe(null),n=e.current,r=rl(),i=gv(n),s=zg(r,i),s.callback=t??null,pv(n,s,i),e.current.lanes=i,NN(e,i,r),Zl(e,r),e}function C4(e,t,n,r){var i=t.current,s=rl(),o=gv(i);return n=oSe(n),t.context===null?t.context=n:t.pendingContext=n,t=zg(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pv(i,t,o),e!==null&&(yh(e,i,o,s),d$(e,i,o)),o}function XM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tfe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function AX(e,t){Tfe(e,t),(e=e.alternate)&&Tfe(e,t)}function RQe(){return null}var uSe=typeof reportError=="function"?reportError:function(e){console.error(e)};function IX(e){this._internalRoot=e}A4.prototype.render=IX.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(vt(409));C4(e,t,null,null)};A4.prototype.unmount=IX.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;G_(function(){C4(null,e,null,null)}),t[r0]=null}};function A4(e){this._internalRoot=e}A4.prototype.unstable_scheduleHydration=function(e){if(e){var t=jxe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jy.length&&t!==0&&t<jy[n].priority;n++);jy.splice(n,0,e),n===0&&Uxe(e)}};function kX(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function I4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cfe(){}function NQe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=XM(o);s.call(l)}}var o=aSe(t,r,e,0,null,!1,!1,"",Cfe);return e._reactRootContainer=o,e[r0]=o.current,Yk(e.nodeType===8?e.parentNode:e),G_(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=XM(u);a.call(l)}}var u=CX(e,0,!1,null,null,!1,!1,"",Cfe);return e._reactRootContainer=u,e[r0]=u.current,Yk(e.nodeType===8?e.parentNode:e),G_(function(){C4(t,u,n,r)}),u}function k4(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=XM(o);a.call(u)}}C4(t,o,e,i)}else o=NQe(n,t,e,i,r);return XM(o)}Lxe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=K2(t.pendingLanes);n!==0&&(YK(t,n|1),Zl(t,Zs()),!(Wr&6)&&(YS=Zs()+500,S1()))}break;case 13:G_(function(){var r=i0(e,1);if(r!==null){var i=rl();yh(r,e,1,i)}}),AX(e,1)}};KK=function(e){if(e.tag===13){var t=i0(e,134217728);if(t!==null){var n=rl();yh(t,e,134217728,n)}AX(e,134217728)}};Fxe=function(e){if(e.tag===13){var t=gv(e),n=i0(e,t);if(n!==null){var r=rl();yh(n,e,t,r)}AX(e,t)}};jxe=function(){return xi};Bxe=function(e,t){var n=xi;try{return xi=e,t()}finally{xi=n}};lH=function(e,t,n){switch(t){case"input":if(nH(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=b4(r);if(!i)throw Error(vt(90));yxe(r),nH(r,i)}}}break;case"textarea":bxe(e,n);break;case"select":t=n.value,t!=null&&tS(e,!!n.multiple,t,!1)}};Cxe=xX;Axe=G_;var PQe={usingClientEntryPoint:!1,Events:[DN,OE,b4,Sxe,Txe,xX]},ZA={findFiberByHostInstance:u_,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DQe={bundleType:ZA.bundleType,version:ZA.version,rendererPackageName:ZA.rendererPackageName,rendererConfig:ZA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P0.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rxe(e),e===null?null:e.stateNode},findFiberByHostInstance:ZA.findFiberByHostInstance||RQe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var PO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!PO.isDisabled&&PO.supportsFiber)try{m4=PO.inject(DQe),Up=PO}catch{}}ff.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PQe;ff.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kX(t))throw Error(vt(200));return kQe(e,t,null,n)};ff.createRoot=function(e,t){if(!kX(e))throw Error(vt(299));var n=!1,r="",i=uSe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=CX(e,1,!1,null,null,n,!1,r,i),e[r0]=t.current,Yk(e.nodeType===8?e.parentNode:e),new IX(t)};ff.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(vt(188)):(e=Object.keys(e).join(","),Error(vt(268,e)));return e=Rxe(t),e=e===null?null:e.stateNode,e};ff.flushSync=function(e){return G_(e)};ff.hydrate=function(e,t,n){if(!I4(t))throw Error(vt(200));return k4(null,e,t,!0,n)};ff.hydrateRoot=function(e,t,n){if(!kX(e))throw Error(vt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uSe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=aSe(t,null,e,1,n??null,i,!1,s,o),e[r0]=t.current,Yk(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new A4(t)};ff.render=function(e,t,n){if(!I4(t))throw Error(vt(200));return k4(null,e,t,!1,n)};ff.unmountComponentAtNode=function(e){if(!I4(e))throw Error(vt(40));return e._reactRootContainer?(G_(function(){k4(null,null,e,!1,function(){e._reactRootContainer=null,e[r0]=null})}),!0):!1};ff.unstable_batchedUpdates=xX;ff.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!I4(n))throw Error(vt(200));if(e==null||e._reactInternals===void 0)throw Error(vt(38));return k4(e,t,n,!1,r)};ff.version="18.3.1-next-f1338f8080-20240426";function lSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lSe)}catch(e){console.error(e)}}lSe(),lxe.exports=ff;var $N=lxe.exports;const Q2=cf($N);var Afe=$N;KV.createRoot=Afe.createRoot,KV.hydrateRoot=Afe.hydrateRoot;var wp=function(){return wp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},wp.apply(this,arguments)};function MN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function xg(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Ife(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function OQe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Dr(e){return this instanceof Dr?(this.v=e,this):new Dr(e)}function f_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Dr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function IU(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Dr(e[i](o)),done:!1}:s?s(o):o}:s}}function YI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ife=="function"?Ife(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var b$="right-scroll-bar-position",_$="width-before-scroll-bar",$Qe="with-scroll-bars-hidden",MQe="--removed-body-scroll-bar-size";function kU(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function LQe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var FQe=typeof window<"u"?N.useLayoutEffect:N.useEffect,kfe=new WeakMap;function jQe(e,t){var n=LQe(null,function(r){return e.forEach(function(i){return kU(i,r)})});return FQe(function(){var r=kfe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||kU(a,null)}),s.forEach(function(a){i.has(a)||kU(a,o)})}kfe.set(n,e)},[e]),n}function BQe(e){return e}function UQe(e,t){t===void 0&&(t=BQe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function zQe(e){e===void 0&&(e={});var t=UQe(null);return t.options=wp({async:!0,ssr:!1},e),t}var cSe=function(e){var t=e.sideCar,n=MN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,wp({},n))};cSe.isSideCarExport=!0;function VQe(e,t){return e.useMedium(t),cSe}var fSe=zQe(),RU=function(){},R4=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:RU,onWheelCapture:RU,onTouchMoveCapture:RU}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,b=e.gapMode,w=MN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,S=jQe([n,t]),T=wp(wp({},w),i);return N.createElement(N.Fragment,null,c&&N.createElement(E,{sideCar:fSe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?N.cloneElement(N.Children.only(a),wp(wp({},T),{ref:S})):N.createElement(y,wp({},T,{className:u,ref:S}),a))});R4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};R4.classNames={fullWidth:_$,zeroRight:b$};var HQe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qQe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=HQe();return t&&e.setAttribute("nonce",t),e}function WQe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function GQe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var YQe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=qQe())&&(WQe(t,n),GQe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},KQe=function(){var e=YQe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},dSe=function(){var e=KQe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},XQe={left:0,top:0,right:0,gap:0},NU=function(e){return parseInt(e||"",10)||0},QQe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[NU(n),NU(r),NU(i)]},JQe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return XQe;var t=QQe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ZQe=dSe(),aS="data-scroll-locked",eJe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat($Qe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(aS,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(b$,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_$,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(b$," .").concat(b$,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_$," .").concat(_$,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(aS,`] {
    `).concat(MQe,": ").concat(a,`px;
  }
`)},Rfe=function(){var e=parseInt(document.body.getAttribute(aS)||"0",10);return isFinite(e)?e:0},tJe=function(){N.useEffect(function(){return document.body.setAttribute(aS,(Rfe()+1).toString()),function(){var e=Rfe()-1;e<=0?document.body.removeAttribute(aS):document.body.setAttribute(aS,e.toString())}},[])},nJe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;tJe();var s=N.useMemo(function(){return JQe(i)},[i]);return N.createElement(ZQe,{styles:eJe(s,!t,i,n?"":"!important")})},zH=!1;if(typeof window<"u")try{var DO=Object.defineProperty({},"passive",{get:function(){return zH=!0,!0}});window.addEventListener("test",DO,DO),window.removeEventListener("test",DO,DO)}catch{zH=!1}var Ux=zH?{passive:!1}:!1,rJe=function(e){return e.tagName==="TEXTAREA"},hSe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!rJe(e)&&n[t]==="visible")},iJe=function(e){return hSe(e,"overflowY")},sJe=function(e){return hSe(e,"overflowX")},Nfe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=pSe(e,r);if(i){var s=mSe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oJe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},aJe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},pSe=function(e,t){return e==="v"?iJe(t):sJe(t)},mSe=function(e,t){return e==="v"?oJe(t):aJe(t)},uJe=function(e,t){return e==="h"&&t==="rtl"?-1:1},lJe=function(e,t,n,r,i){var s=uJe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=mSe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&pSe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},OO=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Pfe=function(e){return[e.deltaX,e.deltaY]},Dfe=function(e){return e&&"current"in e?e.current:e},cJe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fJe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dJe=0,zx=[];function hJe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(dJe++)[0],s=N.useState(dSe)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=OQe([e.lockRef.current],(e.shards||[]).map(Dfe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=OO(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-y[0],E="deltaY"in m?m.deltaY:b[1]-y[1],S,T=m.target,C=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in m&&C==="h"&&T.type==="range")return!1;var I=Nfe(C,T);if(!I)return!0;if(I?S=C:(S=C==="v"?"h":"v",I=Nfe(C,T)),!I)return!1;if(!r.current&&"changedTouches"in m&&(w||E)&&(r.current=S),!S)return!0;var R=r.current||S;return lJe(R,g,m,R==="h"?w:E,!0)},[]),u=N.useCallback(function(m){var g=m;if(!(!zx.length||zx[zx.length-1]!==s)){var y="deltaY"in g?Pfe(g):OO(g),b=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&cJe(S.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(Dfe).filter(Boolean).filter(function(S){return S.contains(g.target)}),E=w.length>0?a(g,w[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,b){var w={name:m,delta:g,target:y,should:b,shadowParent:pJe(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=N.useCallback(function(m){n.current=OO(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,Pfe(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,OO(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return zx.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,Ux),document.addEventListener("touchmove",u,Ux),document.addEventListener("touchstart",c,Ux),function(){zx=zx.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,Ux),document.removeEventListener("touchmove",u,Ux),document.removeEventListener("touchstart",c,Ux)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:fJe(i)}):null,h?N.createElement(nJe,{gapMode:e.gapMode}):null)}function pJe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mJe=VQe(fSe,hJe);var N4=N.forwardRef(function(e,t){return N.createElement(R4,wp({},e,{ref:t,sideCar:mJe}))});N4.classNames=R4.classNames;function Bi(e){return Object.keys(e)}function PU(e){return e&&typeof e=="object"&&!Array.isArray(e)}function RX(e,t){const n={...e},r=t;return PU(e)&&PU(t)&&Object.keys(t).forEach(i=>{PU(r[i])&&i in e?n[i]=RX(n[i],r[i]):n[i]=r[i]}),n}function gJe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function yJe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function rR(e){const t=yJe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function DU(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function gSe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?DU(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?DU(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?DU(s):s}}return r}return n}const Fe=gSe("rem",{shouldScale:!0}),QM=gSe("em");function T1(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function ySe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function C1(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function ga(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function dC(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function JM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function ZM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function vJe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function bJe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function _Je(e,t,n){return ZM(e,n)===ZM(t,n)}function NX({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=ZM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>_Je(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=bJe(l,u,r),f=vJe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const wJe={app:100,modal:200,popover:300,overlay:400,max:9999};function hf(e){return wJe[e]}const xJe=()=>{};function EJe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||xJe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Cn(e,t="size",n=!0){if(e!==void 0)return ySe(e)?n?Fe(e):e:`var(--${t}-${e})`}function to(e){return Cn(e,"mantine-spacing")}function Di(e){return e===void 0?"var(--mantine-radius-default)":Cn(e,"mantine-radius")}function ha(e){return Cn(e,"mantine-font-size")}function vSe(e){return Cn(e,"mantine-line-height",!1)}function PX(e){if(e)return Cn(e,"mantine-shadow",!1)}function Ng(e,t){return n=>{e==null||e(n),t==null||t(n)}}function DX(e,t){return e in t.breakpoints?rR(t.breakpoints[e]):rR(e)}function iR(e,t){const n=e.map(r=>({value:r,px:DX(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function uh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function SJe(e,t,n){var r;return n?Array.from(((r=ZM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function TJe(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Op(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function uS(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Yb(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function P4(e,t){const n=Yb(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Ofe=["mousedown","touchstart"];function CJe(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Ofe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Ofe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function AJe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function IJe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function kJe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:IJe(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),AJe(s.current,o=>i(o.matches))},[e]),r}const Mw=typeof document<"u"?N.useLayoutEffect:N.useEffect;function im(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function bSe({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return im(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function RJe(e,t="body > :not(script)"){const n=uS(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const NJe=/input|select|textarea|button|object/,_Se="a, input, select, textarea, button, object, [tabindex]";function PJe(e){return e.style.display==="none"}function DJe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(PJe(n))return!1;n=n.parentNode}return!0}function wSe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function VH(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(wSe(e));return(NJe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&DJe(e)}function xSe(e){const t=wSe(e);return(Number.isNaN(t)||t>=0)&&VH(e)}function OJe(e){return Array.from(e.querySelectorAll(_Se)).filter(xSe)}function $Je(e,t){const n=OJe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function MJe(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(_Se));o=a.find(xSe)||a.find(VH)||null,!o&&VH(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=RJe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&$Je(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const LJe=e=>(e+1)%1e6;function FJe(){const[,e]=N.useReducer(LJe,0);return e}const jJe=ci.useId||(()=>{});function BJe(){const e=jJe();return e?`mantine-${e.replace(/:/g,"")}`:""}function ku(e){const t=BJe(),[n,r]=N.useState(t);return Mw(()=>{r(uS())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function ESe(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function OX(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function SSe(...e){return t=>{e.forEach(n=>OX(n,t))}}function oo(...e){return N.useCallback(SSe(...e),e)}function TSe(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var b,w;const l=({x:E,y:S})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const C=Op((E-T.left)/T.width,0,1);e({x:n==="ltr"?C:1-C,y:Op((S-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),y(E)},y=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(w=r.current)==null||w.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function _o({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function D4(e,t){return kJe("(prefers-reduced-motion: reduce)",e,t)}const UJe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function vh(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(UJe),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function zJe(e){const[t,{width:n,height:r}]=vh(e);return{ref:t,width:n,height:r}}function VJe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function HJe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function qJe(e){return t=>HJe(VJe(e),t)}function WJe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{qJe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function O4(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function GJe(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function YJe(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function KJe(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function XJe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function QJe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Mw(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>XJe(`${e}:${String(r)}`,i[0])}return[t,n]}var JJe={};function CSe(){return typeof process<"u"&&JJe?"production":"development"}function ASe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ASe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Hs(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ASe(e))&&(r&&(r+=" "),r+=t);return r}const ZJe={};function eZe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Hs(t[r],i):t[r]=i})}),t}function $4({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||ZJe);return eZe(s)}function eL({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const ISe=N.createContext(null);function A1(){const e=N.useContext(ISe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function tZe(){return A1().cssVariablesResolver}function nZe(){return A1().classNamesPrefix}function $X(){return A1().getStyleNonce}function rZe(){return A1().withStaticClasses}function iZe(){return A1().headless}function sZe(){var e;return(e=A1().stylesTransform)==null?void 0:e.sx}function oZe(){var e;return(e=A1().stylesTransform)==null?void 0:e.styles}function aZe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function uZe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function lZe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function cZe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function MX(e){return aZe(e)?uZe(e):e.startsWith("rgb")?lZe(e):e.startsWith("hsl")?cZe(e):{r:0,g:0,b:0,a:1}}function $O(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=MX(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function sR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function OU(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function fZe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function dZe(e){if(e.startsWith("oklch("))return(fZe(e)||0)/100;const{r:t,g:n,b:r}=MX(e),i=t/255,s=n/255,o=r/255,a=OU(i),u=OU(s),l=OU(o);return .2126*a+.7152*u+.0722*l}function e2(e,t=.179){return e.startsWith("var(")?!1:dZe(e)>t}function Em({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:e2(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:e2(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:e2(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][sR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:e2(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:e2(e,t.luminanceThreshold),shade:s,variable:void 0}}function Ei(e,t){const n=Em({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function HH(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Ei(n.from,t),i=Ei(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function fp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=MX(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Vx=fp,hZe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Em({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Fe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Fe(1)} solid transparent`}:{background:e,hover:$O(e,.1),color:a,border:`${Fe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Fe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:fp(a,.1),hover:fp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Fe(1)} solid transparent`}}return{background:fp(e,.1),hover:fp(e,.12),color:e,border:`${Fe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Fe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:fp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Fe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:fp(e,.05),color:e,border:`${Fe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Fe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:fp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Fe(1)} solid transparent`}}return{background:"transparent",hover:fp(e,.12),color:e,border:`${Fe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Fe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Fe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Fe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:$O(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Fe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:$O(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Fe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:$O(t.white,.01),color:e,border:`${Fe(1)} solid transparent`}:n==="gradient"?{background:HH(r,t),hover:HH(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Fe(1)} solid var(--mantine-color-default-border)`}:{}},pZe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},$fe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",LX={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:pZe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:hZe,autoContrast:!1,luminanceThreshold:.3,fontFamily:$fe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:$fe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Fe(34),lineHeight:"1.3"},h2:{fontSize:Fe(26),lineHeight:"1.35"},h3:{fontSize:Fe(22),lineHeight:"1.4"},h4:{fontSize:Fe(18),lineHeight:"1.45"},h5:{fontSize:Fe(16),lineHeight:"1.5"},h6:{fontSize:Fe(14),lineHeight:"1.5"}}},fontSizes:{xs:Fe(12),sm:Fe(14),md:Fe(16),lg:Fe(18),xl:Fe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Fe(2),sm:Fe(4),md:Fe(8),lg:Fe(16),xl:Fe(32)},spacing:{xs:Fe(10),sm:Fe(12),md:Fe(16),lg:Fe(20),xl:Fe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Fe(1)} ${Fe(3)} rgba(0, 0, 0, 0.05), 0 ${Fe(1)} ${Fe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Fe(1)} ${Fe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Fe(10)} ${Fe(15)} ${Fe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Fe(7)} ${Fe(7)} ${Fe(-5)}`,md:`0 ${Fe(1)} ${Fe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Fe(20)} ${Fe(25)} ${Fe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Fe(10)} ${Fe(10)} ${Fe(-5)}`,lg:`0 ${Fe(1)} ${Fe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Fe(28)} ${Fe(23)} ${Fe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Fe(12)} ${Fe(12)} ${Fe(-7)}`,xl:`0 ${Fe(1)} ${Fe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Fe(36)} ${Fe(28)} ${Fe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Fe(17)} ${Fe(17)} ${Fe(-7)}`},other:{},components:{}};function Mfe(e){return e==="auto"||e==="dark"||e==="light"}function mZe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Mfe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Mfe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const gZe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Lfe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function $U(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Ffe(e){if(!(e.primaryColor in e.colors))throw new Error(gZe);if(typeof e.primaryShade=="object"&&(!$U(e.primaryShade.dark)||!$U(e.primaryShade.light)))throw new Error(Lfe);if(typeof e.primaryShade=="number"&&!$U(e.primaryShade))throw new Error(Lfe)}function yZe(e,t){var r;if(!t)return Ffe(e),e;const n=RX(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Ffe(n),n}const FX=N.createContext(null),vZe=()=>N.useContext(FX)||LX;function ao(){const e=N.useContext(FX);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function kSe({theme:e,children:t,inherit:n=!0}){const r=vZe(),i=N.useMemo(()=>yZe(n?r:LX,e),[e,r,n]);return _.jsx(FX.Provider,{value:i,children:t})}kSe.displayName="@mantine/core/MantineThemeProvider";function bZe(){const e=ao(),t=$X(),n=Bi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=rR(e.breakpoints[i]),a=s?`${o-.1}px`:QM(o-.1),u=s?`${o}px`:QM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function MU(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function LU(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function _Ze(e,t){const n=MU(e.variables),r=n?LU(t,n):"",i=MU(e.dark),s=i?LU(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=MU(e.light),a=o?LU(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function I1({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Em({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function jfe(e,t){return I1({color:e.colors[e.primaryColor][sR(e,t)],theme:e,autoContrast:null})}function MO({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=sR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Vx(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Vx(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Vx(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=sR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Vx(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Vx(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Vx(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function wZe(e){return Array.isArray(e)?e:Array(10).fill(e)}function xZe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Hx(e,t,n){Bi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const RSe=e=>{const t=sR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Fe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":jfe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":jfe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Hx(r.variables,e.breakpoints,"breakpoint"),Hx(r.variables,e.spacing,"spacing"),Hx(r.variables,e.fontSizes,"font-size"),Hx(r.variables,e.lineHeights,"line-height"),Hx(r.variables,e.shadows,"shadow"),Hx(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Bi(e.colors).forEach(s=>{const o=e.colors[s];if(xZe(o)){Object.assign(r.light,MO({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,MO({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,MO({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,MO({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Bi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function EZe({theme:e,generator:t}){const n=RSe(e),r=t==null?void 0:t(e);return r?RX(n,r):n}const FU=RSe(LX);function SZe(e){const t={variables:{},light:{},dark:{}};return Bi(e.variables).forEach(n=>{FU.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Bi(e.light).forEach(n=>{FU.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Bi(e.dark).forEach(n=>{FU.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function TZe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function NSe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ao(),r=$X(),i=tZe(),s=EZe({theme:n,generator:i}),o=e===":root"&&t,a=o?SZe(s):s,u=_Ze(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":TZe(e)}`}}):null}NSe.displayName="@mantine/CssVariables";function CZe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function qx(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function AZe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(qx(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),qx(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Mw(()=>{qx(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return qx(r,n),()=>{};r===void 0&&qx(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&qx(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function IZe({respectReducedMotion:e,getRootElement:t}){Mw(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}CZe();function PSe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=mZe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=AZe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return IZe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(ISe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(kSe,{theme:e,children:[o&&_.jsx(NSe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(bZe,{}),t]})})}PSe.displayName="@mantine/core/MantineProvider";function D0({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ao();return{resolvedClassNames:$4({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:eL({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const kZe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function RZe({theme:e,options:t,unstyled:n}){return Hs((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||kZe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function NZe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return $4({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Bfe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return $4({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function PZe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function DZe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function OZe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function $Ze({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=$4({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function MZe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function LZe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Hs(RZe({theme:e,options:t,unstyled:a||h}),$Ze({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),MZe({options:t,classes:o,selector:r,unstyled:a}),Bfe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Bfe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),NZe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),PZe({rootSelector:l,selector:r,className:u}),DZe({selector:r,classes:o,unstyled:a||h}),d&&!h&&OZe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function FZe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return eL({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function qH({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...qH({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function jZe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...T1(n[r])}}),t),{})}function BZe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=jZe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function UZe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&FZe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&eL({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&eL({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...BZe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?qH({style:u,theme:e}):null,...qH({style:r==null?void 0:r.style,theme:e})}}function zZe({props:e,stylesCtx:t,themeName:n}){var o;const r=ao(),i=(o=oZe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Nt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ao(),h=nZe(),p=rZe(),m=iZe(),g=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:y,getTransformedStyles:b}=zZe({props:n,stylesCtx:r,themeName:g});return(w,E)=>({className:LZe({theme:d,options:E,themeName:g,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([E==null?void 0:E.styles,l])}),style:UZe({theme:d,themeName:g,selector:w,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function hC(e,t){return typeof e=="boolean"?e:t.autoContrast}function Oe(e,t,n){var o;const r=ao(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...T1(n)}}function jU(e){return Bi(e).reduce((t,n)=>e[n]!==void 0?`${t}${gJe(n)}:${e[n]};`:t,"").trim()}function VZe({selector:e,styles:t,media:n,container:r}){const i=t?jU(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${jU(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${jU(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Lw(e){const t=$X();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:VZe(e)}})}function Fw(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:w,bg:E,c:S,opacity:T,ff:C,fz:I,fw:R,lts:P,ta:D,lh:L,fs:M,tt:F,td:z,w:B,miw:H,maw:q,h:Y,mih:$,mah:W,bgsz:X,bgp:V,bgr:K,bga:J,pos:ue,top:_e,left:be,bottom:xe,right:ke,inset:je,display:Re,flex:ft,hiddenFrom:Ze,visibleFrom:It,lightHidden:bt,darkHidden:Ae,sx:Be,...st}=e;return{styleProps:T1({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:w,bg:E,c:S,opacity:T,ff:C,fz:I,fw:R,lts:P,ta:D,lh:L,fs:M,tt:F,td:z,w:B,miw:H,maw:q,h:Y,mih:$,mah:W,bgsz:X,bgp:V,bgr:K,bga:J,pos:ue,top:_e,left:be,bottom:xe,right:ke,inset:je,display:Re,flex:ft,hiddenFrom:Ze,visibleFrom:It,lightHidden:bt,darkHidden:Ae,sx:Be}),rest:st}}const HZe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function jX(e,t){const n=Em({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function qZe(e,t){const n=Em({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:jX(e,t)}function WZe(e,t){if(typeof e=="number")return Fe(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Fe(n)}`;return r&&(s+=` ${r}`),wZe.length>0&&(s+=` ${jX(i.join(" "),t)}`),s.trim()}return e}const Ufe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function GZe(e){return typeof e=="string"&&e in Ufe?Ufe[e]:e}const YZe=["h1","h2","h3","h4","h5","h6"];function KZe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&YZe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Fe(e):e}function XZe(e){return e}const QZe=["h1","h2","h3","h4","h5","h6"];function JZe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&QZe.includes(e)?`var(--mantine-${e}-line-height)`:e}function ZZe(e){return typeof e=="number"?Fe(e):e}function eet(e,t){if(typeof e=="number")return Fe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Fe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const BU={color:jX,textColor:qZe,fontSize:KZe,spacing:eet,identity:XZe,size:ZZe,lineHeight:JZe,fontFamily:GZe,border:WZe};function zfe(e){return e.replace("(min-width: ","").replace("em)","")}function tet({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(zfe(i))-Number(zfe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function net(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function ret(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function iet(e){return typeof e=="object"&&e!==null?Bi(e).filter(t=>t!=="base"):[]}function set(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function DSe({styleProps:e,data:t,theme:n}){return tet(Bi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=ret(e[i]);if(!net(e[i]))return o.forEach(l=>{r.inlineStyles[l]=BU[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=iet(e[i]);return o.forEach(l=>{a&&(r.styles[l]=BU[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:BU[s.type](set(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function LN(){return`__m__-${N.useId().replace(/:/g,"")}`}function BX(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...BX(r,t)}),{}):typeof e=="function"?e(t):e??{}}function OSe(e){return e.startsWith("data-")?e:`data-${e}`}function oet(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[OSe(n)]=e[n]),t},{})}function $Se(e){return e?typeof e=="string"?{[OSe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...$Se(n)}),{}):oet(e):null}function WH(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...WH(r,t)}),{}):typeof e=="function"?e(t):e??{}}function aet({theme:e,style:t,vars:n,styleProps:r}){const i=WH(t,e),s=WH(n,e);return{...i,...s,...r}}const MSe=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var I;const m=ao(),g=e||"div",{styleProps:y,rest:b}=Fw(h),w=sZe(),E=(I=w==null?void 0:w())==null?void 0:I(y.sx),S=LN(),T=DSe({styleProps:y,theme:m,data:HZe}),C={ref:p,style:aet({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Hs(r,E,{[S]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":ySe(o)?void 0:o||void 0,size:d,...$Se(s),...b};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(Lw,{selector:`.${S}`,styles:T.styles,media:T.media}),typeof f=="function"?f(C):_.jsx(g,{...C})]})});MSe.displayName="@mantine/core/Box";const Ee=MSe;function LSe(e){return e}function Ye(e){const t=N.forwardRef(e);return t.extend=LSe,t}function qo(e){const t=N.forwardRef(e);return t.extend=LSe,t}const uet=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Sm(){return N.useContext(uet)}function cet(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function UU(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const t2=typeof window<"u"&&window.requestAnimationFrame;function fet({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{$N.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||cet(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}im(()=>{typeof t2=="function"&&t2(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),t2(()=>{const p=UU(i);c({...f(p),height:p})})}:()=>{const p=UU(i);c({...f(p),willChange:"height",height:p}),t2(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=UU(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:SSe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const det={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},M4=Ye((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Oe("Collapse",det,e),c=ao(),f=D4(),h=(c.respectReducedMotion?f:!1)?0:i,p=fet({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ee,{...l,children:n}):null:_.jsx(Ee,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...BX(o,c)},ref:t,...l}),children:n})});M4.displayName="@mantine/core/Collapse";const[het,hd]=ga("ScrollArea.Root component was not found in tree");function KS(e,t){const n=Yb(t);Mw(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const pet=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=hd(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return KS(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),KS(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),met=N.forwardRef((e,t)=>{const n=hd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(pet,{...e,ref:t}):null}),get={scrollHideDelay:1e3,type:"hover"},FSe=N.forwardRef((e,t)=>{const n=Oe("ScrollAreaRoot",get,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,b]=N.useState(0),[w,E]=N.useState(0),[S,T]=N.useState(!1),[C,I]=N.useState(!1),R=oo(t,P=>u(P));return _.jsx(het,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:I,onCornerWidthChange:b,onCornerHeightChange:E},children:_.jsx(Ee,{...o,ref:R,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${w}px`}})})});FSe.displayName="@mantine/core/ScrollAreaRoot";function jSe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function L4(e){const t=jSe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function BSe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function yet(e,[t,n]){return Math.min(n,Math.max(t,e))}function Vfe(e,t,n="ltr"){const r=L4(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=yet(e,u);return BSe([0,o],[0,a])(l)}function vet(e,t,n,r="ltr"){const i=L4(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return BSe([u,l],f)(e)}function USe(e,t){return e>0&&e<t}function tL(e){return e?parseInt(e,10):0}function N_(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[bet,zSe]=ga("ScrollAreaScrollbar was not found in tree"),VSe=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=hd(),[h,p]=N.useState(null),m=oo(t,I=>p(I)),g=N.useRef(null),y=N.useRef(""),{viewport:b}=d,w=n.content-n.viewport,E=Yb(l),S=Yb(a),T=P4(c,10),C=I=>{if(g.current){const R=I.clientX-g.current.left,P=I.clientY-g.current.top;u({x:R,y:P})}};return N.useEffect(()=>{const I=R=>{const P=R.target;(h==null?void 0:h.contains(P))&&E(R,w)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,h,w,E]),N.useEffect(S,[n,S]),KS(h,T),KS(d.content,T),_.jsx(bet,{value:{scrollbar:h,hasThumb:r,onThumbChange:Yb(i),onThumbPointerUp:Yb(s),onThumbPositionChange:S,onThumbPointerDown:Yb(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:N_(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",C(I))}),onPointerMove:N_(e.onPointerMove,C),onPointerUp:N_(e.onPointerUp,I=>{const R=I.target;R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),_et=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=hd(),[a,u]=N.useState(),l=N.useRef(null),c=oo(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(VSe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${L4(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),USe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:tL(a.paddingLeft),paddingEnd:tL(a.paddingRight)}})}})}),wet=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=hd(),[a,u]=N.useState(),l=N.useRef(null),c=oo(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(VSe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${L4(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),USe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:tL(a.paddingTop),paddingEnd:tL(a.paddingBottom)}})}})}),UX=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Sm(),s=hd(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=jSe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>vet(h,a.current,u,p);return n==="horizontal"?_.jsx(_et,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Vfe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(wet,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Vfe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),HSe=N.forwardRef((e,t)=>{const n=hd(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=P4(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return KS(n.viewport,u),KS(n.content,u),r||s?_.jsx(UX,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),xet=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=hd(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(HSe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Eet=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=hd(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=P4(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(UX,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:N_(e.onPointerEnter,()=>a("interacting")),onPointerLeave:N_(e.onPointerLeave,()=>a("idle"))}):null}),Hfe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=hd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(xet,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(Eet,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(HSe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(UX,{...r,ref:t}):null});function Tet(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Cet=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=hd(),s=zSe(),{onThumbPositionChange:o}=s,a=oo(t,c=>s.onThumbChange(c)),u=N.useRef(),l=P4(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Tet(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:N_(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:N_(e.onPointerUp,s.onThumbPointerUp)})}),qfe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zSe();return n||i.hasThumb?_.jsx(Cet,{ref:t,...r}):null}),qSe=N.forwardRef(({children:e,style:t,...n},r)=>{const i=hd(),s=oo(r,i.onViewportChange);return _.jsx(Ee,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});qSe.displayName="@mantine/core/ScrollAreaViewport";var zX={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const WSe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Aet=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Fe(t)}}),o0=Ye((e,t)=>{const n=Oe("ScrollArea",WSe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...b}=n,[w,E]=N.useState(!1),S=Nt({name:"ScrollArea",props:n,classes:zX,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Aet});return _.jsxs(FSe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...S("root"),...b,children:[_.jsx(qSe,{...d,...S("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var C;(C=d==null?void 0:d.onScroll)==null||C.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Hfe,{...S("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:_.jsx(qfe,{...S("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Hfe,{...S("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:_.jsx(qfe,{...S("thumb")})}),_.jsx(met,{...S("corner"),"data-hovered":w||void 0,"data-hidden":c==="never"||void 0})]})});o0.displayName="@mantine/core/ScrollArea";const VX=Ye((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...b}=Oe("ScrollAreaAutosize",WSe,e);return _.jsx(Ee,{...b,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ee,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(o0,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});o0.classes=zX;VX.displayName="@mantine/core/ScrollAreaAutosize";VX.classes=zX;o0.Autosize=VX;var GSe={root:"m_87cf2631"};const Iet={__staticSelector:"UnstyledButton"},bo=qo((e,t)=>{const n=Oe("UnstyledButton",Iet,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Nt({name:s,props:n,classes:GSe,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ee,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});bo.classes=GSe;bo.displayName="@mantine/core/UnstyledButton";var YSe={root:"m_515a97f8"};const ket={},HX=Ye((e,t)=>{const n=Oe("VisuallyHidden",ket,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Nt({name:"VisuallyHidden",classes:YSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ee,{component:"span",ref:t,...c("root"),...l})});HX.classes=YSe;HX.displayName="@mantine/core/VisuallyHidden";var KSe={root:"m_1b7284a3"};const Ret={},Net=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Di(t),"--paper-shadow":PX(n)}}),pC=qo((e,t)=>{const n=Oe("Paper",Ret,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Nt({name:"Paper",props:n,classes:KSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Net});return _.jsx(Ee,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});pC.classes=KSe;pC.displayName="@mantine/core/Paper";function mC(e){return XSe(e)?(e.nodeName||"").toLowerCase():"#document"}function ec(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function O0(e){var t;return(t=(XSe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XSe(e){return e instanceof Node||e instanceof ec(e).Node}function ys(e){return e instanceof Element||e instanceof ec(e).Element}function Kc(e){return e instanceof HTMLElement||e instanceof ec(e).HTMLElement}function GH(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ec(e).ShadowRoot}function FN(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=td(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Pet(e){return["table","td","th"].includes(mC(e))}function qX(e){const t=WX(),n=td(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Det(e){let t=a0(e);for(;Kc(t)&&!Fv(t);){if(qX(t))return t;t=a0(t)}return null}function WX(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fv(e){return["html","body","#document"].includes(mC(e))}function td(e){return ec(e).getComputedStyle(e)}function F4(e){return ys(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function a0(e){if(mC(e)==="html")return e;const t=e.assignedSlot||e.parentNode||GH(e)&&e.host||O0(e);return GH(t)?t.host:t}function QSe(e){const t=a0(e);return Fv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kc(t)&&FN(t)?t:QSe(t)}function Vg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=QSe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ec(i);return s?t.concat(o,o.visualViewport||[],FN(i)?i:[],o.frameElement&&n?Vg(o.frameElement):[]):t.concat(i,Vg(i,[],n))}function Wfe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function oR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&GH(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function JSe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function ZSe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Oet(e){return Let()?!1:!Gfe()&&e.width===0&&e.height===0||Gfe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function $et(){return/apple/i.test(navigator.vendor)}function Gfe(){const e=/android/i;return e.test(JSe())||e.test(ZSe())}function Met(){return JSe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Let(){return ZSe().includes("jsdom/")}function YH(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Fet(e){return"nativeEvent"in e}function jet(e){return e.matches("html,body")}function d_(e){return(e==null?void 0:e.ownerDocument)||document}function zU(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function mE(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Bet="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Uet(e){return Kc(e)&&e.matches(Bet)}const Fc=Math.min,fu=Math.max,nL=Math.round,LO=Math.floor,jv=e=>({x:e,y:e}),zet={left:"right",right:"left",bottom:"top",top:"bottom"},Vet={start:"end",end:"start"};function KH(e,t,n){return fu(e,Fc(t,n))}function u0(e,t){return typeof e=="function"?e(t):e}function Ah(e){return e.split("-")[0]}function gC(e){return e.split("-")[1]}function GX(e){return e==="x"?"y":"x"}function YX(e){return e==="y"?"height":"width"}function jw(e){return["top","bottom"].includes(Ah(e))?"y":"x"}function KX(e){return GX(jw(e))}function Het(e,t,n){n===void 0&&(n=!1);const r=gC(e),i=KX(e),s=YX(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=rL(o)),[o,rL(o)]}function qet(e){const t=rL(e);return[XH(e),t,XH(t)]}function XH(e){return e.replace(/start|end/g,t=>Vet[t])}function Wet(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Get(e,t,n,r){const i=gC(e);let s=Wet(Ah(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(XH)))),s}function rL(e){return e.replace(/left|right|bottom|top/g,t=>zet[t])}function Yet(e){return{top:0,right:0,bottom:0,left:0,...e}}function XX(e){return typeof e!="number"?Yet(e):{top:e,right:e,bottom:e,left:e}}function XS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Yfe(e,t,n){let{reference:r,floating:i}=e;const s=jw(t),o=KX(t),a=YX(o),u=Ah(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(gC(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Ket=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Yfe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:w,data:E,reset:S}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[g]:{...h[g],...E}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:f}=Yfe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function QX(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=u0(t,e),p=XX(h),g=a[d?f==="floating"?"reference":"floating":f],y=XS(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=XS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(y.top-S.top+p.top)/E.y,bottom:(S.bottom-y.bottom+p.bottom)/E.y,left:(y.left-S.left+p.left)/E.x,right:(S.right-y.right+p.right)/E.x}}const Xet=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=u0(e,t)||{};if(l==null)return{};const f=XX(c),d={x:n,y:r},h=KX(i),p=YX(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],S=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=T?T[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(T)))&&(C=a.floating[w]||s.floating[p]);const I=E/2-S/2,R=C/2-m[p]/2-1,P=Fc(f[y],R),D=Fc(f[b],R),L=P,M=C-m[p]-D,F=C/2-m[p]/2+I,z=KH(L,F,M),B=!u.arrow&&gC(i)!=null&&F!==z&&s.reference[p]/2-(F<L?P:D)-m[p]/2<0,H=B?F<L?F-L:F-M:0;return{[h]:d[h]+H,data:{[h]:z,centerOffset:F-z-H,...B&&{alignmentOffset:H}},reset:B}}}),Qet=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=u0(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ah(i),b=Ah(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!m?[rL(a)]:qet(a));!d&&p!=="none"&&E.push(...Get(a,m,p,w));const S=[a,...E],T=await QX(t,g),C=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&C.push(T[y]),f){const L=Het(i,o,w);C.push(T[L[0]],T[L[1]])}if(I=[...I,{placement:i,overflows:C}],!C.every(L=>L<=0)){var R,P;const L=(((R=s.flip)==null?void 0:R.index)||0)+1,M=S[L];if(M)return{data:{index:L,overflows:I},reset:{placement:M}};let F=(P=I.filter(z=>z.overflows[0]<=0).sort((z,B)=>z.overflows[1]-B.overflows[1])[0])==null?void 0:P.placement;if(!F)switch(h){case"bestFit":{var D;const z=(D=I.map(B=>[B.placement,B.overflows.filter(H=>H>0).reduce((H,q)=>H+q,0)]).sort((B,H)=>B[1]-H[1])[0])==null?void 0:D[0];z&&(F=z);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function eTe(e){const t=Fc(...e.map(s=>s.left)),n=Fc(...e.map(s=>s.top)),r=fu(...e.map(s=>s.right)),i=fu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Jet(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>XS(eTe(i)))}const Zet=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=u0(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Jet(c),d=XS(eTe(c)),h=XX(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(jw(n)==="y"){const P=f[0],D=f[f.length-1],L=Ah(n)==="top",M=P.top,F=D.bottom,z=L?P.left:D.left,B=L?P.right:D.right,H=B-z,q=F-M;return{top:M,bottom:F,left:z,right:B,width:H,height:q,x:z,y:M}}const g=Ah(n)==="left",y=fu(...f.map(P=>P.right)),b=Fc(...f.map(P=>P.left)),w=f.filter(P=>g?P.left===b:P.right===y),E=w[0].top,S=w[w.length-1].bottom,T=b,C=y,I=C-T,R=S-E;return{top:E,bottom:S,left:T,right:C,width:I,height:R,x:T,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function ett(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ah(n),a=gC(n),u=jw(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=u0(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const ttt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await ett(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},ntt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...u}=u0(e,t),l={x:n,y:r},c=await QX(t,u),f=jw(Ah(i)),d=GX(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=h+c[g],w=h-c[y];h=KH(b,h,w)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=p+c[g],w=p-c[y];p=KH(b,p,w)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},rtt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=u0(e,t),c={x:n,y:r},f=jw(i),d=GX(f);let h=c[d],p=c[f];const m=u0(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const w=d==="y"?"height":"width",E=s.reference[d]-s.floating[w]+g.mainAxis,S=s.reference[d]+s.reference[w]-g.mainAxis;h<E?h=E:h>S&&(h=S)}if(l){var y,b;const w=d==="y"?"width":"height",E=["top","left"].includes(Ah(i)),S=s.reference[f]-s.floating[w]+(E&&((y=o.offset)==null?void 0:y[f])||0)+(E?0:g.crossAxis),T=s.reference[f]+s.reference[w]+(E?0:((b=o.offset)==null?void 0:b[f])||0)-(E?g.crossAxis:0);p<S?p=S:p>T&&(p=T)}return{[d]:h,[f]:p}}}},itt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=u0(e,t),u=await QX(t,a),l=Ah(n),c=gC(n),f=jw(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,b=Fc(h-u[p],g),w=Fc(d-u[m],y),E=!t.middlewareData.shift;let S=b,T=w;if(f?T=c||E?Fc(w,y):y:S=c||E?Fc(b,g):g,E&&!c){const I=fu(u.left,0),R=fu(u.right,0),P=fu(u.top,0),D=fu(u.bottom,0);f?T=d-2*(I!==0||R!==0?I+R:fu(u.left,u.right)):S=h-2*(P!==0||D!==0?P+D:fu(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:S});const C=await i.getDimensions(s.floating);return d!==C.width||h!==C.height?{reset:{rects:!0}}:{}}}};function tTe(e){const t=td(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Kc(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=nL(n)!==s||nL(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function JX(e){return ys(e)?e:e.contextElement}function lS(e){const t=JX(e);if(!Kc(t))return jv(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=tTe(t);let o=(s?nL(n.width):n.width)/r,a=(s?nL(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const stt=jv(0);function nTe(e){const t=ec(e);return!WX()||!t.visualViewport?stt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ott(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ec(e)?!1:t}function Y_(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=JX(e);let o=jv(1);t&&(r?ys(r)&&(o=lS(r)):o=lS(e));const a=ott(s,n,r)?nTe(s):jv(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=ec(s),h=r&&ys(r)?ec(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=lS(m),y=m.getBoundingClientRect(),b=td(m),w=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,E=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=w,l+=E,p=ec(m),m=p.frameElement}}return XS({width:c,height:f,x:u,y:l})}const att=[":popover-open",":modal"];function ZX(e){return att.some(t=>{try{return e.matches(t)}catch{return!1}})}function utt(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=O0(r),a=t?ZX(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=jv(1);const c=jv(0),f=Kc(r);if((f||!f&&!s)&&((mC(r)!=="body"||FN(o))&&(u=F4(r)),Kc(r))){const d=Y_(r);l=lS(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function ltt(e){return Array.from(e.getClientRects())}function rTe(e){return Y_(O0(e)).left+F4(e).scrollLeft}function ctt(e){const t=O0(e),n=F4(e),r=e.ownerDocument.body,i=fu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=fu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+rTe(e);const a=-n.scrollTop;return td(r).direction==="rtl"&&(o+=fu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function ftt(e,t){const n=ec(e),r=O0(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=WX();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function dtt(e,t){const n=Y_(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Kc(e)?lS(e):jv(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Kfe(e,t,n){let r;if(t==="viewport")r=ftt(e,n);else if(t==="document")r=ctt(O0(e));else if(ys(t))r=dtt(t,n);else{const i=nTe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return XS(r)}function iTe(e,t){const n=a0(e);return n===t||!ys(n)||Fv(n)?!1:td(n).position==="fixed"||iTe(n,t)}function htt(e,t){const n=t.get(e);if(n)return n;let r=Vg(e,[],!1).filter(a=>ys(a)&&mC(a)!=="body"),i=null;const s=td(e).position==="fixed";let o=s?a0(e):e;for(;ys(o)&&!Fv(o);){const a=td(o),u=qX(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||FN(o)&&!u&&iTe(e,o))?r=r.filter(c=>c!==o):i=a,o=a0(o)}return t.set(e,r),r}function ptt(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?ZX(t)?[]:htt(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Kfe(t,c,i);return l.top=fu(f.top,l.top),l.right=Fc(f.right,l.right),l.bottom=Fc(f.bottom,l.bottom),l.left=fu(f.left,l.left),l},Kfe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function mtt(e){const{width:t,height:n}=tTe(e);return{width:t,height:n}}function gtt(e,t,n){const r=Kc(t),i=O0(t),s=n==="fixed",o=Y_(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=jv(0);if(r||!r&&!s)if((mC(t)!=="body"||FN(i))&&(a=F4(t)),r){const f=Y_(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=rTe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function VU(e){return td(e).position==="static"}function Xfe(e,t){return!Kc(e)||td(e).position==="fixed"?null:t?t(e):e.offsetParent}function sTe(e,t){const n=ec(e);if(ZX(e))return n;if(!Kc(e)){let i=a0(e);for(;i&&!Fv(i);){if(ys(i)&&!VU(i))return i;i=a0(i)}return n}let r=Xfe(e,t);for(;r&&Pet(r)&&VU(r);)r=Xfe(r,t);return r&&Fv(r)&&VU(r)&&!qX(r)?n:r||Det(e)||n}const ytt=async function(e){const t=this.getOffsetParent||sTe,n=this.getDimensions,r=await n(e.floating);return{reference:gtt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vtt(e){return td(e).direction==="rtl"}const btt={convertOffsetParentRelativeRectToViewportRelativeRect:utt,getDocumentElement:O0,getClippingRect:ptt,getOffsetParent:sTe,getElementRects:ytt,getClientRects:ltt,getDimensions:mtt,getScale:lS,isElement:ys,isRTL:vtt};function _tt(e,t){let n=null,r;const i=O0(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=LO(c),p=LO(i.clientWidth-(l+f)),m=LO(i.clientHeight-(c+d)),g=LO(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:fu(0,Fc(1,u))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==u){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function wtt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=JX(e),c=i||s?[...l?Vg(l):[],...Vg(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?_tt(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Y_(e):null;u&&g();function g(){const y=Y_(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const xtt=ttt,Ett=ntt,Stt=Qet,Ttt=itt,Qfe=Xet,Ctt=Zet,Att=rtt,Itt=(e,t,n)=>{const r=new Map,i={platform:btt,...n},s={...i.platform,_c:r};return Ket(e,t,{...i,platform:s})};var w$=typeof document<"u"?N.useLayoutEffect:N.useEffect;function iL(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!iL(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!iL(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function oTe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Jfe(e,t){const n=oTe(e);return Math.round(t*n)/n}function Zfe(e){const t=N.useRef(e);return w$(()=>{t.current=e}),t}function ktt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);iL(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),b=N.useCallback(H=>{H!==T.current&&(T.current=H,m(H))},[]),w=N.useCallback(H=>{H!==C.current&&(C.current=H,y(H))},[]),E=s||p,S=o||g,T=N.useRef(null),C=N.useRef(null),I=N.useRef(c),R=u!=null,P=Zfe(u),D=Zfe(i),L=N.useCallback(()=>{if(!T.current||!C.current)return;const H={placement:t,strategy:n,middleware:d};D.current&&(H.platform=D.current),Itt(T.current,C.current,H).then(q=>{const Y={...q,isPositioned:!0};M.current&&!iL(I.current,Y)&&(I.current=Y,$N.flushSync(()=>{f(Y)}))})},[d,t,n,D]);w$(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(H=>({...H,isPositioned:!1})))},[l]);const M=N.useRef(!1);w$(()=>(M.current=!0,()=>{M.current=!1}),[]),w$(()=>{if(E&&(T.current=E),S&&(C.current=S),E&&S){if(P.current)return P.current(E,S,L);L()}},[E,S,L,P,R]);const F=N.useMemo(()=>({reference:T,floating:C,setReference:b,setFloating:w}),[b,w]),z=N.useMemo(()=>({reference:E,floating:S}),[E,S]),B=N.useMemo(()=>{const H={position:n,left:0,top:0};if(!z.floating)return H;const q=Jfe(z.floating,c.x),Y=Jfe(z.floating,c.y);return a?{...H,transform:"translate("+q+"px, "+Y+"px)",...oTe(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:Y}},[n,a,z.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:L,refs:F,elements:z,floatingStyles:B}),[c,L,F,z,B])}const Rtt=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Qfe({element:r.current,padding:i}).fn(n):{}:r?Qfe({element:r,padding:i}).fn(n):{}}}},aTe=(e,t)=>({...xtt(e),options:[e,t]}),eQ=(e,t)=>({...Ett(e),options:[e,t]}),ede=(e,t)=>({...Att(e),options:[e,t]}),QH=(e,t)=>({...Stt(e),options:[e,t]}),Ntt=(e,t)=>({...Ttt(e),options:[e,t]}),JH=(e,t)=>({...Ctt(e),options:[e,t]}),uTe=(e,t)=>({...Rtt(e),options:[e,t]}),lTe={...CM},Ptt=lTe.useInsertionEffect,Dtt=Ptt||(e=>e());function Uy(e){const t=N.useRef(()=>{});return Dtt(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Vp=typeof document<"u"?N.useLayoutEffect:N.useEffect;let tde=!1,Ott=0;const nde=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ott++;function $tt(){const[e,t]=N.useState(()=>tde?nde():void 0);return Vp(()=>{e==null&&t(nde())},[]),N.useEffect(()=>{tde=!0},[]),e}const Mtt=lTe.useId,cTe=Mtt||$tt;function Ltt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Ftt=N.createContext(null),jtt=N.createContext(null),tQ=()=>{var e;return((e=N.useContext(Ftt))==null?void 0:e.id)||null},nQ=()=>N.useContext(jtt);function rQ(e){return"data-floating-ui-"+e}function rde(e){const t=N.useRef(e);return Vp(()=>{t.current=e}),t}const ide=rQ("safe-polygon");function x$(e,t,n){return n&&!YH(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Btt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=nQ(),m=tQ(),g=rde(c),y=rde(l),b=N.useRef(),w=N.useRef(-1),E=N.useRef(),S=N.useRef(-1),T=N.useRef(!0),C=N.useRef(!1),I=N.useRef(()=>{}),R=N.useCallback(()=>{var M;const F=(M=i.current.openEvent)==null?void 0:M.type;return(F==null?void 0:F.includes("mouse"))&&F!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function M(F){let{open:z}=F;z||(clearTimeout(w.current),clearTimeout(S.current),T.current=!0)}return s.on("openchange",M),()=>{s.off("openchange",M)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function M(z){R()&&r(!1,z,"hover")}const F=d_(a).documentElement;return F.addEventListener("mouseleave",M),()=>{F.removeEventListener("mouseleave",M)}},[a,n,r,u,g,R]);const P=N.useCallback(function(M,F,z){F===void 0&&(F=!0),z===void 0&&(z="hover");const B=x$(y.current,"close",b.current);B&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,M,z),B)):F&&(clearTimeout(w.current),r(!1,M,z))},[y,r]),D=Uy(()=>{I.current(),E.current=void 0}),L=Uy(()=>{if(C.current){const M=d_(a).body;M.style.pointerEvents="",M.removeAttribute(ide),C.current=!1}});return N.useEffect(()=>{if(!u)return;function M(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function F(H){if(clearTimeout(w.current),T.current=!1,f&&!YH(b.current)||d>0&&!x$(y.current,"open"))return;const q=x$(y.current,"open",b.current);q?w.current=window.setTimeout(()=>{r(!0,H,"hover")},q):r(!0,H,"hover")}function z(H){if(M())return;I.current();const q=d_(a);if(clearTimeout(S.current),g.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=g.current({...i.current.floatingContext,tree:p,x:H.clientX,y:H.clientY,onClose(){L(),D(),P(H,!0,"safe-polygon")}});const $=E.current;q.addEventListener("mousemove",$),I.current=()=>{q.removeEventListener("mousemove",$)};return}(b.current==="touch"?!oR(a,H.relatedTarget):!0)&&P(H)}function B(H){M()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:H.clientX,y:H.clientY,onClose(){L(),D(),P(H)}})(H))}if(ys(o)){const H=o;return n&&H.addEventListener("mouseleave",B),a==null||a.addEventListener("mouseleave",B),h&&H.addEventListener("mousemove",F,{once:!0}),H.addEventListener("mouseenter",F),H.addEventListener("mouseleave",z),()=>{n&&H.removeEventListener("mouseleave",B),a==null||a.removeEventListener("mouseleave",B),h&&H.removeEventListener("mousemove",F),H.removeEventListener("mouseenter",F),H.removeEventListener("mouseleave",z)}}},[o,a,u,e,f,d,h,P,D,L,r,n,p,y,g,i]),Vp(()=>{var M;if(u&&n&&(M=g.current)!=null&&M.__options.blockPointerEvents&&R()){const z=d_(a).body;if(z.setAttribute(ide,""),z.style.pointerEvents="none",C.current=!0,ys(o)&&a){var F;const B=o,H=p==null||(F=p.nodesRef.current.find(q=>q.id===m))==null||(F=F.context)==null?void 0:F.elements.floating;return H&&(H.style.pointerEvents=""),B.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{B.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,R]),Vp(()=>{n||(b.current=void 0,D(),L())},[n,D,L]),N.useEffect(()=>()=>{D(),clearTimeout(w.current),clearTimeout(S.current),L()},[u,o,D,L]),N.useMemo(()=>{if(!u)return{};function M(F){b.current=F.pointerType}return{reference:{onPointerDown:M,onPointerEnter:M,onMouseMove(F){function z(){T.current||r(!0,F.nativeEvent,"hover")}f&&!YH(b.current)||n||d===0||(clearTimeout(S.current),b.current==="touch"?z():S.current=window.setTimeout(z,d))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(F){P(F.nativeEvent,!1)}}}},[u,f,n,d,r,P])}const ZH=()=>{},fTe=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:ZH,setState:ZH,isInstantPhase:!1}),dTe=()=>N.useContext(fTe);function Utt(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Vp(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(fTe.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function ztt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=dTe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Vp(()=>{u&&(f({delay:{open:1,close:x$(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Vp(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Vp(()=>{l===ZH||!n||l(o)},[n,l,o]),a}function HU(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Vtt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Htt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},sde=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function qtt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=nQ(),b=Uy(typeof c=="function"?c:()=>!1),w=typeof c=="function"?b:c,E=N.useRef(!1),S=N.useRef(!1),{escapeKey:T,outsidePress:C}=sde(m),{escapeKey:I,outsidePress:R}=sde(g),P=Uy(F=>{var z;if(!n||!u||!l||F.key!=="Escape")return;const B=(z=a.current.floatingContext)==null?void 0:z.nodeId,H=y?HU(y.nodesRef.current,B):[];if(!T&&(F.stopPropagation(),H.length>0)){let q=!0;if(H.forEach(Y=>{var $;if(($=Y.context)!=null&&$.open&&!Y.context.dataRef.current.__escapeKeyBubbles){q=!1;return}}),!q)return}r(!1,Fet(F)?F.nativeEvent:F,"escape-key")}),D=Uy(F=>{var z;const B=()=>{var H;P(F),(H=mE(F))==null||H.removeEventListener("keydown",B)};(z=mE(F))==null||z.addEventListener("keydown",B)}),L=Uy(F=>{var z;const B=E.current;E.current=!1;const H=S.current;if(S.current=!1,f==="click"&&H||B||typeof w=="function"&&!w(F))return;const q=mE(F),Y="["+rQ("inert")+"]",$=d_(o).querySelectorAll(Y);let W=ys(q)?q:null;for(;W&&!Fv(W);){const J=a0(W);if(Fv(J)||!ys(J))break;W=J}if($.length&&ys(q)&&!jet(q)&&!oR(q,o)&&Array.from($).every(J=>!oR(W,J)))return;if(Kc(q)&&o){const J=q.clientWidth>0&&q.scrollWidth>q.clientWidth,ue=q.clientHeight>0&&q.scrollHeight>q.clientHeight;let _e=ue&&F.offsetX>q.clientWidth;if(ue&&td(q).direction==="rtl"&&(_e=F.offsetX<=q.offsetWidth-q.clientWidth),_e||J&&F.offsetY>q.clientHeight)return}const X=(z=a.current.floatingContext)==null?void 0:z.nodeId,V=y&&HU(y.nodesRef.current,X).some(J=>{var ue;return zU(F,(ue=J.context)==null?void 0:ue.elements.floating)});if(zU(F,o)||zU(F,s)||V)return;const K=y?HU(y.nodesRef.current,X):[];if(K.length>0){let J=!0;if(K.forEach(ue=>{var _e;if((_e=ue.context)!=null&&_e.open&&!ue.context.dataRef.current.__outsidePressBubbles){J=!1;return}}),!J)return}r(!1,F,"outside-press")}),M=Uy(F=>{var z;const B=()=>{var H;L(F),(H=mE(F))==null||H.removeEventListener(f,B)};(z=mE(F))==null||z.addEventListener(f,B)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=C;function F(H){r(!1,H,"ancestor-scroll")}const z=d_(o);l&&z.addEventListener("keydown",I?D:P,I),w&&z.addEventListener(f,R?M:L,R);let B=[];return p&&(ys(s)&&(B=Vg(s)),ys(o)&&(B=B.concat(Vg(o))),!ys(i)&&i&&i.contextElement&&(B=B.concat(Vg(i.contextElement)))),B=B.filter(H=>{var q;return H!==((q=z.defaultView)==null?void 0:q.visualViewport)}),B.forEach(H=>{H.addEventListener("scroll",F,{passive:!0})}),()=>{l&&z.removeEventListener("keydown",I?D:P,I),w&&z.removeEventListener(f,R?M:L,R),B.forEach(H=>{H.removeEventListener("scroll",F)})}},[a,o,s,i,l,w,f,n,r,p,u,T,C,P,I,D,L,R,M]),N.useEffect(()=>{E.current=!1},[w,f]),N.useMemo(()=>u?{reference:{onKeyDown:P,[Vtt[h]]:F=>{d&&r(!1,F.nativeEvent,"reference-press")}},floating:{onKeyDown:P,onMouseDown(){S.current=!0},onMouseUp(){S.current=!0},[Htt[f]]:()=>{E.current=!0}}}:{},[u,d,f,h,r,P])}function Wtt(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=cTe(),s=N.useRef({}),[o]=N.useState(()=>Ltt()),a=tQ()!=null,[u,l]=N.useState(r.reference),c=Uy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function iQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=Wtt({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=nQ();Vp(()=>{c&&(f.current=c)},[c]);const h=ktt({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(w=>{const E=ys(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),m=N.useCallback(w=>{(ys(w)||w===null)&&(f.current=w,o(w)),(ys(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!ys(w))&&h.refs.setReference(w)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Vp(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),N.useMemo(()=>({...h,context:b,refs:g,elements:y}),[h,g,y,b])}function Gtt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=ec(o);function h(){!n&&Kc(o)&&o===Wfe(d_(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){Oet(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=mE(d.nativeEvent);if(u&&ys(h))try{if($et()&&Met())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Uet(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=ys(h)&&h.hasAttribute(rQ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Wfe(o?o.ownerDocument:document);!h&&g===o||oR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||oR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const ode="active",ade="selected";function qU(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[ode]:o,[ade]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[ode,ade].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Ytt(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>qU(s,e,"reference"),t),r=N.useCallback(s=>qU(s,e,"floating"),t),i=N.useCallback(s=>qU(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const Ktt=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Xtt(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Ktt.get(o))!=null?n:o,u=cTe(),c=tQ()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function hTe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function ude(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function lde(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Qtt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Jtt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Fe(t),height:Fe(t),transform:"rotate(45deg)",position:"absolute",[Qtt[u]]:Fe(r)},f=Fe(-t/2);return u==="left"?{...c,...ude(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...ude(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...lde(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...lde(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const sQ=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Sm();return s?_.jsx("div",{...l,ref:c,style:{...u,...Jtt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});sQ.displayName="@mantine/core/FloatingArrow";const[Ztt,pTe]=ga("Popover component was not found in the tree");function j4({children:e,active:t=!0,refProp:n="ref"}){const r=MJe(t),i=oo(r,e==null?void 0:e.ref);return C1(e)?N.cloneElement(e,{[n]:i}):e}function mTe(e){return _.jsx(HX,{tabIndex:-1,"data-autofocus":!0,...e})}j4.displayName="@mantine/core/FocusTrap";mTe.displayName="@mantine/core/FocusTrapInitialFocus";j4.InitialFocus=mTe;function ent(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const tnt={},gTe=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Oe("Portal",tnt,e),[s,o]=N.useState(!1),a=N.useRef(null);return Mw(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:ent(i),OX(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:$N.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});gTe.displayName="@mantine/core/Portal";function yC({withinPortal:e=!0,children:t,...n}){return e?_.jsx(gTe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}yC.displayName="@mantine/core/OptionalPortal";const n2=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Fe(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),FO={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Fe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Fe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Fe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Fe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Fe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Fe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Fe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Fe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...n2("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...n2("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...n2("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...n2("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...n2("top"),common:{transformOrigin:"top right"}}},cde={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function nnt({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in FO?{transitionProperty:FO[e].transitionProperty,...i,...FO[e].common,...FO[e][cde[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[cde[t]]}}function rnt({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ao(),l=D4(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=b=>{const w=b?i:s,E=b?o:a;window.clearTimeout(m.current);const S=c?0:b?e:t;d(S),S===0?(typeof w=="function"&&w(),typeof E=="function"&&E(),p(b?"entered":"exited")):g.current=requestAnimationFrame(()=>{Q2.flushSync(()=>{p(b?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof w=="function"&&w(),p(b?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof E=="function"&&E(),p(b?"entered":"exited")},S)})})};return im(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function $0({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=rnt({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(nnt({transition:t,duration:f,state:d,timingFunction:h}))})}$0.displayName="@mantine/core/Transition";var yTe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const int={},oQ=Ye((e,t)=>{var g,y,b,w;const n=Oe("PopoverDropdown",int,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=pTe(),h=bSe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=oo(t,d.floating);return d.disabled?null:_.jsx(yC,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx($0,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:E=>_.jsx(j4,{active:d.trapFocus,children:_.jsxs(Ee,{...p,...f,variant:u,ref:m,onKeyDownCapture:EJe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Fe(d.width)},i]}),children:[o,_.jsx(sQ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});oQ.classes=yTe;oQ.displayName="@mantine/core/PopoverDropdown";const snt={refProp:"ref",popupType:"dialog"},vTe=Ye((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Oe("PopoverTarget",snt,e);if(!C1(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=pTe(),u=oo(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Hs(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});vTe.displayName="@mantine/core/PopoverTarget";function bTe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return wtt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),im(()=>{t.update()},r),im(()=>{s(o=>o+1)},[e])}function ont(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function ant(e,t){const n=ont(e.middlewares),r=[aTe(e.offset)];return n.shift&&r.push(eQ(typeof n.shift=="boolean"?{limiter:ede(),padding:5}:{limiter:ede(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?QH():QH(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?JH():JH(n.inline)),r.push(uTe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Ntt({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function unt(e){const[t,n]=_o({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=iQ({strategy:e.strategy,placement:e.position,middleware:ant(e,()=>s)});return bTe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),im(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),im(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const lnt={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:hf("popover"),__staticSelector:"Popover",width:"max-content"},cnt=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Di(t),"--popover-shadow":PX(n)}});function Ma(e){var Ae,Be,st,_t,jt,ot;const t=Oe("Popover",lnt,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:b,closeOnClickOutside:w,withinPortal:E,portalProps:S,closeOnEscape:T,clickOutsideEvents:C,trapFocus:I,onClose:R,onOpen:P,onChange:D,zIndex:L,radius:M,shadow:F,id:z,defaultOpened:B,__staticSelector:H,withRoles:q,disabled:Y,returnFocus:$,variant:W,keepMounted:X,vars:V,floatingStrategy:K,...J}=t,ue=Nt({name:H,props:t,classes:yTe,classNames:y,styles:b,unstyled:g,rootSelector:"dropdown",vars:V,varsResolver:cnt}),_e=N.useRef(null),[be,xe]=N.useState(null),[ke,je]=N.useState(null),{dir:Re}=Sm(),ft=ku(z),Ze=unt({middlewares:c,width:l,position:hTe(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:_e,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:B,onChange:D,onOpen:P,onClose:R,strategy:K});CJe(()=>w&&Ze.onClose(),C,[be,ke]);const It=N.useCallback(Se=>{xe(Se),Ze.floating.refs.setReference(Se)},[Ze.floating.refs.setReference]),bt=N.useCallback(Se=>{je(Se),Ze.floating.refs.setFloating(Se)},[Ze.floating.refs.setFloating]);return _.jsx(Ztt,{value:{returnFocus:$,disabled:Y,controlled:Ze.controlled,reference:It,floating:bt,x:Ze.floating.x,y:Ze.floating.y,arrowX:(st=(Be=(Ae=Ze.floating)==null?void 0:Ae.middlewareData)==null?void 0:Be.arrow)==null?void 0:st.x,arrowY:(ot=(jt=(_t=Ze.floating)==null?void 0:_t.middlewareData)==null?void 0:jt.arrow)==null?void 0:ot.y,opened:Ze.opened,arrowRef:_e,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ze.floating.placement,trapFocus:I,withinPortal:E,portalProps:S,zIndex:L,radius:M,shadow:F,closeOnEscape:T,onClose:Ze.onClose,onToggle:Ze.onToggle,getTargetId:()=>`${ft}-target`,getDropdownId:()=>`${ft}-dropdown`,withRoles:q,targetProps:J,__staticSelector:H,classNames:y,styles:b,unstyled:g,variant:W,keepMounted:X,getStyles:ue},children:n})}Ma.Target=vTe;Ma.Dropdown=oQ;Ma.displayName="@mantine/core/Popover";Ma.extend=e=>e;var lh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const fnt=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Hs(lh.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:lh.bar}),_.jsx("span",{className:lh.bar}),_.jsx("span",{className:lh.bar})]})),dnt=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Hs(lh.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:lh.dot}),_.jsx("span",{className:lh.dot}),_.jsx("span",{className:lh.dot})]})),hnt=N.forwardRef(({className:e,...t},n)=>_.jsx(Ee,{component:"span",className:Hs(lh.ovalLoader,e),...t,ref:n})),_Te={bars:fnt,oval:hnt,dots:dnt},pnt={loaders:_Te,type:"oval"},mnt=(e,{size:t,color:n})=>({root:{"--loader-size":Cn(t,"loader-size"),"--loader-color":n?Ei(n,e):void 0}}),pd=Ye((e,t)=>{const n=Oe("Loader",pnt,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Nt({name:"Loader",props:n,classes:lh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:mnt});return p?_.jsx(Ee,{...g("root"),ref:t,...m,children:p}):_.jsx(Ee,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});pd.defaultLoaders=_Te;pd.classes=lh;pd.displayName="@mantine/core/Loader";var B4={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const fde={orientation:"horizontal"},gnt=(e,{borderWidth:t})=>({group:{"--ai-border-width":Fe(t)}}),aQ=Ye((e,t)=>{const n=Oe("ActionIconGroup",fde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Oe("ActionIconGroup",fde,e),p=Nt({name:"ActionIconGroup",props:n,classes:B4,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:gnt,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});aQ.classes=B4;aQ.displayName="@mantine/core/ActionIconGroup";const ynt={},vnt=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Cn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Di(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Bw=qo((e,t)=>{const n=Oe("ActionIcon",ynt,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:b,"data-disabled":w,autoContrast:E,mod:S,...T}=n,C=Nt({name:["ActionIcon",p],props:n,className:r,style:u,classes:B4,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:vnt});return _.jsxs(bo,{...C("root",{active:!b&&!l&&!w}),...T,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},S],children:[_.jsx($0,{mounted:!!l,transition:"slide-down",duration:150,children:I=>_.jsx(Ee,{component:"span",...C("loader",{style:I}),"aria-hidden":!0,children:_.jsx(pd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ee,{component:"span",mod:{loading:l},...C("icon"),children:y})]})});Bw.classes=B4;Bw.displayName="@mantine/core/ActionIcon";Bw.Group=aQ;const wTe=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));wTe.displayName="@mantine/core/CloseIcon";var xTe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const bnt={variant:"subtle"},_nt=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Cn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Di(n),"--cb-icon-size":Fe(r)}}),M0=qo((e,t)=>{const n=Oe("CloseButton",bnt,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,b=Nt({name:"CloseButton",props:n,className:a,style:l,classes:xTe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:_nt});return _.jsxs(bo,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...b("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(wTe,{}),i]})});M0.classes=xTe;M0.displayName="@mantine/core/CloseButton";function wnt(e){return N.Children.toArray(e).filter(Boolean)}var ETe={root:"m_4081bf90"};const xnt={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Ent=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":to(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Pi=Ye((e,t)=>{const n=Oe("Group",xnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:b,...w}=n,E=wnt(u),S=E.length,T=to(l??"md"),I={childWidth:`calc(${100/S}% - (${T} - ${T} / ${S}))`},R=Nt({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:ETe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Ent});return _.jsx(Ee,{...R("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,...w,children:E})});Pi.classes=ETe;Pi.displayName="@mantine/core/Group";var STe={root:"m_9814e45f"};const Snt={zIndex:hf("modal")},Tnt=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&fp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Fe(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Di(s),"--overlay-z-index":o==null?void 0:o.toString()}}),aR=qo((e,t)=>{const n=Oe("Overlay",Snt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:b,...w}=n,E=Nt({name:"Overlay",props:n,classes:STe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Tnt});return _.jsx(Ee,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:f})});aR.classes=STe;aR.displayName="@mantine/core/Overlay";const[Cnt,L0]=ga("ModalBase component was not found in tree");function Ant({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=D4()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Int({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ku(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Ant({opened:n,transitionDuration:d});return ESe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),bSe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const TTe=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:b,...w},E)=>{const{_id:S,titleMounted:T,bodyMounted:C,shouldLockScroll:I,setTitleMounted:R,setBodyMounted:P}=Int({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(yC,{...c,withinPortal:l,children:_.jsx(Cnt,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${S}-title`,getBodyId:()=>`${S}-body`,titleMounted:T,bodyMounted:C,setTitleMounted:R,setBodyMounted:P,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(N4,{enabled:I&&f,...b,children:_.jsx(Ee,{ref:E,...w,__vars:{...g,"--mb-z-index":(h||hf("modal")).toString(),"--mb-shadow":PX(p),"--mb-padding":to(m)},children:d})})})})});function knt(){const e=L0();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var QS={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const uQ=N.forwardRef(({className:e,...t},n)=>{const r=knt(),i=L0();return _.jsx(Ee,{ref:n,...t,id:r,className:Hs({[QS.body]:!i.unstyled},e)})});uQ.displayName="@mantine/core/ModalBaseBody";const lQ=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=L0();return _.jsx(M0,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Hs({[QS.close]:!i.unstyled},e),unstyled:i.unstyled})});lQ.displayName="@mantine/core/ModalBaseCloseButton";const CTe=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=L0();return _.jsx($0,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Hs({[QS.inner]:!a.unstyled},n.className),children:_.jsx(j4,{active:a.opened&&a.trapFocus,children:_.jsx(pC,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Hs({[QS.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),cQ=N.forwardRef(({className:e,...t},n)=>{const r=L0();return _.jsx(Ee,{component:"header",ref:n,className:Hs({[QS.header]:!r.unstyled},e),...t})});cQ.displayName="@mantine/core/ModalBaseHeader";const Rnt={duration:200,timingFunction:"ease",transition:"fade"};function Nnt(e){const t=L0();return{...Rnt,...t.transitionProps,...e}}const fQ=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=L0(),o=Nnt(t);return _.jsx($0,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(aR,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});fQ.displayName="@mantine/core/ModalBaseOverlay";function Pnt(){const e=L0();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const dQ=N.forwardRef(({className:e,...t},n)=>{const r=Pnt(),i=L0();return _.jsx(Ee,{component:"h2",ref:n,className:Hs({[QS.title]:!i.unstyled},e),...t,id:r})});dQ.displayName="@mantine/core/ModalBaseTitle";function ATe({children:e}){return _.jsx(_.Fragment,{children:e})}const[Dnt,vC]=dC({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var md={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const dde={},Ont=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${ha(t)} - ${Fe(2)})`}}),U4=Ye((e,t)=>{const n=Oe("InputDescription",dde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Oe("InputDescription",dde,n),p=vC(),m=Nt({name:["InputWrapper",c],props:n,classes:md,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:Ont}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});U4.classes=md;U4.displayName="@mantine/core/InputDescription";const $nt={},Mnt=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${ha(t)} - ${Fe(2)})`}}),z4=Ye((e,t)=>{const n=Oe("InputError",$nt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Nt({name:["InputWrapper",c],props:n,classes:md,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Mnt}),m=vC(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});z4.classes=md;z4.displayName="@mantine/core/InputError";const hde={labelElement:"label"},Lnt=(e,{size:t})=>({label:{"--input-label-size":ha(t),"--input-asterisk-color":void 0}}),V4=Ye((e,t)=>{const n=Oe("InputLabel",hde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...b}=Oe("InputLabel",hde,n),w=Nt({name:["InputWrapper",m],props:n,classes:md,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Lnt}),E=vC(),S=(E==null?void 0:E.getStyles)||w;return _.jsxs(Ee,{...S("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...b,children:[p,f&&_.jsx("span",{...S("required"),"aria-hidden":!0,children:" *"})]})});V4.classes=md;V4.displayName="@mantine/core/InputLabel";const pde={},hQ=Ye((e,t)=>{const n=Oe("InputPlaceholder",pde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Oe("InputPlaceholder",pde,n),p=Nt({name:["InputPlaceholder",l],props:n,classes:md,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ee,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});hQ.classes=md;hQ.displayName="@mantine/core/InputPlaceholder";function Fnt(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const jnt={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Bnt=(e,{size:t})=>({label:{"--input-label-size":ha(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${ha(t)} - ${Fe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${ha(t)} - ${Fe(2)})`}}),pQ=Ye((e,t)=>{const n=Oe("InputWrapper",jnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:b,errorProps:w,labelElement:E,children:S,withAsterisk:T,id:C,required:I,__stylesApiProps:R,mod:P,...D}=n,L=Nt({name:["InputWrapper",f],props:R||n,classes:md,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bnt}),M={size:l,variant:c,__staticSelector:f},F=ku(C),z=typeof T=="boolean"?T:I,B=(w==null?void 0:w.id)||`${F}-error`,H=(b==null?void 0:b.id)||`${F}-description`,q=F,Y=!!m&&typeof m!="boolean",$=!!g,W=`${Y?B:""} ${$?H:""}`,X=W.trim().length>0?W.trim():void 0,V=(y==null?void 0:y.id)||`${F}-label`,K=p&&_.jsx(V4,{labelElement:E,id:V,htmlFor:q,required:z,...M,...y,children:p},"label"),J=$&&_.jsx(U4,{...b,...M,size:(b==null?void 0:b.size)||M.size,id:(b==null?void 0:b.id)||H,children:g},"description"),ue=_.jsx(N.Fragment,{children:d(S)},"input"),_e=Y&&N.createElement(z4,{...w,...M,size:(w==null?void 0:w.size)||M.size,key:"error",id:(w==null?void 0:w.id)||B},m),be=h.map(xe=>{switch(xe){case"label":return K;case"input":return ue;case"description":return J;case"error":return _e;default:return null}});return _.jsx(Dnt,{value:{getStyles:L,describedBy:X,inputId:q,labelId:V,...Fnt(h,{hasDescription:$,hasError:Y})},children:_.jsx(Ee,{ref:t,variant:c,size:l,mod:[{error:!!m},P],...L("root"),...D,children:be})})});pQ.classes=md;pQ.displayName="@mantine/core/InputWrapper";const Unt={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},znt=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Cn(t.size,"input-height"),"--input-fz":ha(t.size),"--input-radius":t.radius===void 0?void 0:Di(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Fe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Fe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Cn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),os=qo((e,t)=>{const n=Oe("Input",Unt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:S,leftSectionPointerEvents:T,variant:C,vars:I,pointer:R,multiline:P,radius:D,id:L,withAria:M,withErrorStyles:F,mod:z,inputSize:B,...H}=n,{styleProps:q,rest:Y}=Fw(H),$=vC(),W={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},X=Nt({name:["Input",l],props:c||n,classes:md,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:W,rootSelector:"wrapper",vars:I,varsResolver:znt}),V=M?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||L}:{};return _.jsxs(Ee,{...X("wrapper"),...q,...d,mod:[{error:!!h&&F,pointer:R,disabled:p,multiline:P,"data-with-right-section":!!b,"data-with-left-section":!!m},z],variant:C,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...X("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ee,{component:"input",...Y,...V,ref:t,required:u,mod:{disabled:p,error:!!h&&F},variant:C,__size:B,...X("input")}),b&&_.jsx("div",{...w,"data-position":"right",...X("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:b})]})});os.classes=md;os.Wrapper=pQ;os.Label=V4;os.Error=z4;os.Description=U4;os.Placeholder=hQ;os.displayName="@mantine/core/Input";function ITe(e,t,n){const r=Oe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:b,size:w,style:E,inputContainer:S,inputWrapperOrder:T,withAsterisk:C,variant:I,vars:R,mod:P,...D}=r,{styleProps:L,rest:M}=Fw(D),F={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:w,style:E,inputContainer:S,inputWrapperOrder:T,withAsterisk:C,variant:I,id:b,mod:P,...y};return{...M,classNames:u,styles:l,unstyled:f,wrapperProps:{...F,...L},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:I,id:b}}}const Vnt={__staticSelector:"InputBase",withAria:!0},gd=qo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ITe("InputBase",Vnt,e);return _.jsx(os.Wrapper,{...r,children:_.jsx(os,{...n,...i,ref:t})})});gd.classes={...os.classes,...os.Wrapper.classes};gd.displayName="@mantine/core/InputBase";const Hnt={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var kTe={root:"m_8bffd616"};const qnt={},Wt=qo((e,t)=>{const n=Oe("Flex",qnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Nt({name:"Flex",classes:kTe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=ao(),w=LN(),E=DSe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:b,data:Hnt});return _.jsxs(_.Fragment,{children:[E.hasResponsiveStyles&&_.jsx(Lw,{selector:`.${w}`,styles:E.styles,media:E.media}),_.jsx(Ee,{ref:t,...y("root",{className:w,style:T1(E.inlineStyles)}),...g})]})});Wt.classes=kTe;Wt.displayName="@mantine/core/Flex";function Wnt(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Gnt({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{Wnt(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),GJe(()=>{CSe()!=="test"&&o(!0)},20,{autoInvoke:!0}),YJe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var RTe={root:"m_96b553a6"};const Ynt={},Knt=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),mQ=Ye((e,t)=>{const n=Oe("FloatingIndicator",Ynt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Nt({name:"FloatingIndicator",classes:RTe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Knt}),g=N.useRef(null),{initialized:y,hidden:b}=Gnt({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),w=oo(t,g);return!l||!c?null:_.jsx(Ee,{ref:w,mod:[{initialized:y,hidden:b},d],...m("root"),...p})});mQ.displayName="@mantine/core/FloatingIndicator";mQ.classes=RTe;const[Xnt,gQ]=ga("Accordion component was not found in the tree");function JS({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Fe(t),height:Fe(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}JS.displayName="@mantine/core/AccordionChevron";const[Qnt,NTe]=ga("Accordion.Item component was not found in the tree");var jN={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Jnt={},yQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Oe("AccordionControl",Jnt,e),{value:m}=NTe(),g=gQ(),y=g.isItemActive(m),b=typeof g.order=="number",w=`h${g.order}`,E=_.jsxs(bo,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:S=>{l==null||l(S),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:NX({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(Ee,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(Ee,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?_.jsx(w,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});yQ.displayName="@mantine/core/AccordionControl";yQ.classes=jN;const Znt={},vQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Oe("AccordionItem",Znt,e),c=gQ();return _.jsx(Qnt,{value:{value:a},children:_.jsx(Ee,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});vQ.displayName="@mantine/core/AccordionItem";vQ.classes=jN;const ert={},bQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Oe("AccordionPanel",ert,e),{value:l}=NTe(),c=gQ();return _.jsx(M4,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});bQ.displayName="@mantine/core/AccordionPanel";bQ.classes=jN;const trt={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(JS,{})},nrt=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Fe(n),"--accordion-radius":r===void 0?void 0:Di(r)}});function Pl(e){const t=Oe("Accordion",trt,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:b,order:w,chevron:E,variant:S,radius:T,...C}=t,I=ku(h),[R,P]=_o({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),D=F=>Array.isArray(R)?R.includes(F):F===R,L=F=>{const z=Array.isArray(R)?R.includes(F)?R.filter(B=>B!==F):[...R,F]:F===R?null:F;P(z)},M=Nt({name:"Accordion",classes:jN,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:nrt});return _.jsx(Xnt,{value:{isItemActive:D,onChange:L,getControlId:JM(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:JM(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:w,chevron:E,loop:p,getStyles:M,variant:S,unstyled:o},children:_.jsx(Ee,{...M("root"),id:I,...C,variant:S,"data-accordion":!0,children:u})})}const rrt=e=>e;Pl.extend=rrt;Pl.classes=jN;Pl.displayName="@mantine/core/Accordion";Pl.Item=vQ;Pl.Panel=bQ;Pl.Control=yQ;Pl.Chevron=JS;var PTe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const irt={},srt=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Di(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Hg=Ye((e,t)=>{const n=Oe("Alert",irt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:b,autoContrast:w,...E}=n,S=Nt({name:"Alert",classes:PTe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:srt}),T=ku(h),C=f&&`${T}-title`||void 0,I=`${T}-body`;return _.jsx(Ee,{id:T,...S("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":I,"aria-labelledby":C,children:_.jsxs("div",{...S("wrapper"),children:[p&&_.jsx("div",{...S("icon"),children:p}),_.jsxs("div",{...S("body"),children:[f&&_.jsx("div",{...S("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:C,...S("label"),children:f})}),d&&_.jsx("div",{id:I,...S("message"),"data-variant":b,children:d})]}),m&&_.jsx(M0,{...S("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Hg.classes=PTe;Hg.displayName="@mantine/core/Alert";var DTe={root:"m_b6d8b162"};function ort(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const art={inherit:!1},urt=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":ha(i),"--text-lh":vSe(i),"--text-gradient":t==="gradient"?HH(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Ei(s,e):void 0}}),at=qo((e,t)=>{const n=Oe("Text",art,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:b,...w}=n,E=Nt({name:["Text",l],props:n,classes:DTe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:urt});return _.jsx(Ee,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":ort(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:b,...w})});at.classes=DTe;at.displayName="@mantine/core/Text";var OTe={root:"m_849cf0da"};const lrt={underline:"hover"},Uw=qo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Oe("Anchor",lrt,e);return _.jsx(at,{component:"a",ref:t,className:Hs({[OTe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Uw.classes=OTe;Uw.displayName="@mantine/core/Anchor";const[crt,bC]=ga("AppShell was not found in tree");var k1={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const frt={},_Q=Ye((e,t)=>{const n=Oe("AppShellAside",frt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=bC();return h.disabled?null:_.jsx(Ee,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});_Q.classes=k1;_Q.displayName="@mantine/core/AppShellAside";const drt={},wQ=Ye((e,t)=>{var p;const n=Oe("AppShellFooter",drt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=bC();return h.disabled?null:_.jsx(Ee,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Hs({[N4.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});wQ.classes=k1;wQ.displayName="@mantine/core/AppShellFooter";const hrt={},xQ=Ye((e,t)=>{var p;const n=Oe("AppShellHeader",hrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=bC();return h.disabled?null:_.jsx(Ee,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Hs({[N4.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});xQ.classes=k1;xQ.displayName="@mantine/core/AppShellHeader";const prt={},EQ=Ye((e,t)=>{const n=Oe("AppShellMain",prt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=bC();return _.jsx(Ee,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});EQ.classes=k1;EQ.displayName="@mantine/core/AppShellMain";function BN(e){return typeof e=="object"?e.base:e}function UN(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function zN(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function mrt({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),UN(s)){const f=Fe(BN(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(zN(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Fe(s.base),e["--app-shell-aside-offset"]=Fe(s.base)),Bi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Fe(s[f]),t[f]["--app-shell-aside-offset"]=Fe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=DX(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function grt({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(UN(r)){const o=Fe(BN(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}zN(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Fe(r.base),s&&(e["--app-shell-footer-offset"]=Fe(r.base))),Bi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Fe(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Fe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function yrt({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(UN(r)){const o=Fe(BN(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}zN(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Fe(r.base),s&&(e["--app-shell-header-offset"]=Fe(r.base))),Bi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Fe(r[o]),s&&(t[o]["--app-shell-header-offset"]=Fe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function vrt({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),UN(s)){const f=Fe(BN(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(zN(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Fe(s.base),e["--app-shell-navbar-offset"]=Fe(s.base)),Bi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Fe(s[f]),t[f]["--app-shell-navbar-offset"]=Fe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=DX(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function WU(e){return Number(e)===0?"0px":to(e)}function brt({padding:e,baseStyles:t,minMediaStyles:n}){UN(e)&&(t["--app-shell-padding"]=WU(BN(e))),zN(e)&&(e.base&&(t["--app-shell-padding"]=WU(e.base)),Bi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=WU(e[r]))}))}function _rt({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};vrt({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),mrt({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),yrt({baseStyles:u,minMediaStyles:o,header:t}),grt({baseStyles:u,minMediaStyles:o,footer:n}),brt({baseStyles:u,minMediaStyles:o,padding:i});const l=iR(Bi(o),s).map(d=>({query:`(min-width: ${QM(d.px)})`,styles:o[d.value]})),c=iR(Bi(a),s).map(d=>({query:`(max-width: ${QM(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function wrt({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ao(),o=A1(),{media:a,baseStyles:u}=_rt({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(Lw,{media:a,styles:u,selector:o.cssVariablesSelector})}const xrt={},SQ=Ye((e,t)=>{const n=Oe("AppShellNavbar",xrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=bC();return h.disabled?null:_.jsx(Ee,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});SQ.classes=k1;SQ.displayName="@mantine/core/AppShellNavbar";const Ert={},TQ=qo((e,t)=>{const n=Oe("AppShellSection",Ert,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=bC();return _.jsx(Ee,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});TQ.classes=k1;TQ.displayName="@mantine/core/AppShellSection";function Srt({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return ESe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Mw(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Trt={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:hf("app")},Crt=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ss=Ye((e,t)=>{const n=Oe("AppShell",Trt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:b,footer:w,offsetScrollbars:E,mod:S,...T}=n,C=Nt({name:"AppShell",classes:k1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Crt}),I=Srt({disabled:y,transitionDuration:d});return _.jsxs(crt,{value:{getStyles:C,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:E},children:[_.jsx(wrt,{navbar:l,header:p,aside:b,footer:w,padding:f}),_.jsx(Ee,{ref:t,...C("root"),mod:[{resizing:I,layout:g,disabled:y},S],...T})]})});ss.classes=k1;ss.displayName="@mantine/core/AppShell";ss.Navbar=SQ;ss.Header=xQ;ss.Main=EQ;ss.Aside=_Q;ss.Footer=wQ;ss.Section=TQ;function $Te(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>$Te(t))}:e}function MTe(e){return e?e.map(t=>$Te(t)):[]}function CQ(e){return e.reduce((t,n)=>"group"in n?{...t,...CQ(n.items)}:(t[n.value]=n,t),{})}var ac={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Art={error:null},Irt=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Cn(t,"combobox-chevron-size")}}),AQ=Ye((e,t)=>{const n=Oe("ComboboxChevron",Art,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Nt({name:"ComboboxChevron",classes:ac,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Irt,rootSelector:"chevron"});return _.jsx(Ee,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});AQ.classes=ac;AQ.displayName="@mantine/core/ComboboxChevron";const[krt,yd]=ga("Combobox component was not found in tree"),LTe=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(M0,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));LTe.displayName="@mantine/core/ComboboxClearButton";const Rrt={},IQ=Ye((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Oe("ComboboxDropdown",Rrt,e),u=yd();return _.jsx(Ma.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});IQ.classes=ac;IQ.displayName="@mantine/core/ComboboxDropdown";const Nrt={refProp:"ref"},FTe=Ye((e,t)=>{const{children:n,refProp:r}=Oe("ComboboxDropdownTarget",Nrt,e);if(yd(),!C1(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Ma.Target,{ref:t,refProp:r,children:n})});FTe.displayName="@mantine/core/ComboboxDropdownTarget";const Prt={},kQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Oe("ComboboxEmpty",Prt,e),u=yd();return _.jsx(Ee,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});kQ.classes=ac;kQ.displayName="@mantine/core/ComboboxEmpty";function RQ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=yd(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Drt={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},jTe=Ye((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Oe("ComboboxEventsTarget",Drt,e);if(!C1(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=yd(),f=RQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:oo(t,c.store.targetRef,n==null?void 0:n.ref)})});jTe.displayName="@mantine/core/ComboboxEventsTarget";const Ort={},NQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Oe("ComboboxFooter",Ort,e),u=yd();return _.jsx(Ee,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});NQ.classes=ac;NQ.displayName="@mantine/core/ComboboxFooter";const $rt={},PQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Oe("ComboboxGroup",$rt,e),c=yd();return _.jsxs(Ee,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});PQ.classes=ac;PQ.displayName="@mantine/core/ComboboxGroup";const Mrt={},DQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Oe("ComboboxHeader",Mrt,e),u=yd();return _.jsx(Ee,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});DQ.classes=ac;DQ.displayName="@mantine/core/ComboboxHeader";function BTe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}BTe.displayName="@mantine/core/ComboboxHiddenInput";const Lrt={},OQ=Ye((e,t)=>{const n=Oe("ComboboxOption",Lrt,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=yd(),b=N.useId(),w=l||b;return _.jsx(Ee,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var S;h?E.preventDefault():((S=y.onOptionSubmit)==null||S.call(y,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(E)}})});OQ.classes=ac;OQ.displayName="@mantine/core/ComboboxOption";const Frt={},$Q=Ye((e,t)=>{const n=Oe("ComboboxOptions",Frt,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=yd(),d=ku(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ee,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});$Q.classes=ac;$Q.displayName="@mantine/core/ComboboxOptions";const jrt={withAriaAttributes:!0,withKeyboardNavigation:!0},MQ=Ye((e,t)=>{const n=Oe("ComboboxSearch",jrt,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=yd(),h=d.getStyles("search"),p=RQ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(os,{ref:oo(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});MQ.classes=ac;MQ.displayName="@mantine/core/ComboboxSearch";const Brt={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},UTe=Ye((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Oe("ComboboxTarget",Brt,e);if(!C1(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=yd(),f=RQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(Ma.Target,{ref:oo(t,c.store.targetRef),children:d})});UTe.displayName="@mantine/core/ComboboxTarget";function Urt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function zrt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Vrt(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function LQ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=_o({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((B="unknown")=>{a||(u(!0),i==null||i(B))},[u,i,a]),y=N.useCallback((B="unknown")=>{a&&(u(!1),r==null||r(B))},[u,r,a]),b=N.useCallback((B="unknown")=>{a?y(B):g(B)},[y,g,a]),w=N.useCallback(()=>{const B=document.querySelector(`#${l.current} [data-combobox-selected]`);B==null||B.removeAttribute("data-combobox-selected"),B==null||B.removeAttribute("aria-selected")},[]),E=N.useCallback(B=>{const H=document.getElementById(l.current),q=H==null?void 0:H.querySelectorAll("[data-combobox-option]");if(!q)return null;const Y=B>=q.length?0:B<0?q.length-1:B;return c.current=Y,q!=null&&q[Y]&&!q[Y].hasAttribute("data-combobox-disabled")?(w(),q[Y].setAttribute("data-combobox-selected","true"),q[Y].setAttribute("aria-selected","true"),q[Y].scrollIntoView({block:"nearest",behavior:o}),q[Y].id):null},[o,w]),S=N.useCallback(()=>{const B=document.querySelector(`#${l.current} [data-combobox-active]`);if(B){const H=document.querySelectorAll(`#${l.current} [data-combobox-option]`),q=Array.from(H).findIndex(Y=>Y===B);return E(q)}return E(0)},[E]),T=N.useCallback(()=>E(zrt(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),C=N.useCallback(()=>E(Urt(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),I=N.useCallback(()=>E(Vrt(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),R=N.useCallback((B="selected",H)=>{m.current=window.setTimeout(()=>{var $;const q=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=Array.from(q).findIndex(W=>W.hasAttribute(`data-combobox-${B}`));c.current=Y,H!=null&&H.scrollIntoView&&(($=q[Y])==null||$.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),P=N.useCallback(()=>{c.current=-1,w()},[w]),D=N.useCallback(()=>{const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=B==null?void 0:B[c.current];H==null||H.click()},[]),L=N.useCallback(B=>{l.current=B},[]),M=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),F=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),z=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:z,selectOption:E,selectFirstOption:I,selectActiveOption:S,selectNextOption:T,selectPreviousOption:C,resetSelectedOption:P,updateSelectedOptionIndex:R,listId:l.current,setListId:L,clickSelectedOption:D,searchRef:f,focusSearchInput:M,targetRef:d,focusTarget:F}}const Hrt={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},qrt=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":ha(t),"--combobox-option-padding":Cn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Fe(n),"--combobox-option-fz":ha(t),"--combobox-option-padding":Cn(t,"combobox-option-padding")}});function Or(e){const t=Oe("Combobox",Hrt,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=LQ(),y=o||g,b=Nt({name:h||"Combobox",classes:ac,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:qrt}),w=()=>{l==null||l(),y.closeDropdown()};return _.jsx(krt,{value:{getStyles:b,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Ma,{opened:y.dropdownOpened,...m,onClose:w,withRoles:!1,unstyled:i,children:s})})}const Wrt=e=>e;Or.extend=Wrt;Or.classes=ac;Or.displayName="@mantine/core/Combobox";Or.Target=UTe;Or.Dropdown=IQ;Or.Options=$Q;Or.Option=OQ;Or.Search=MQ;Or.Empty=kQ;Or.Chevron=AQ;Or.Footer=NQ;Or.Header=DQ;Or.EventsTarget=jTe;Or.DropdownTarget=FTe;Or.Group=PQ;Or.ClearButton=LTe;Or.HiddenInput=BTe;var zTe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const VTe=zTe,H4=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:b,mod:w,...E},S)=>{const T=Nt({name:e,props:t,className:n,style:y,classes:zTe,classNames:r,styles:i,unstyled:s});return _.jsx(Ee,{...T("root"),ref:S,__vars:{"--label-fz":ha(d),"--label-lh":Cn(d,"label-lh")},mod:[{"label-position":h},w],variant:g,size:d,...E,children:_.jsxs(Ee,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ee,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(os.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(os.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});H4.displayName="@mantine/core/InlineInput";const HTe=N.createContext(null),Grt=HTe.Provider,qTe=()=>N.useContext(HTe),[Yrt,Krt]=dC();var WTe={card:"m_26775b0a"};const Xrt={withBorder:!0},Qrt=(e,{radius:t})=>({card:{"--card-radius":Di(t)}}),FQ=Ye((e,t)=>{const n=Oe("CheckboxCard",Xrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Nt({name:"CheckboxCard",classes:WTe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qrt,rootSelector:"card"}),g=qTe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(Yrt,{value:{checked:y},children:_.jsx(bo,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:b=>{h==null||h(b),g==null||g.onChange(d||"")}})})});FQ.displayName="@mantine/core/CheckboxCard";FQ.classes=WTe;function jQ({children:e,role:t}){const n=vC();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const Jrt={},BQ=Ye((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Oe("CheckboxGroup",Jrt,e),[c,f]=_o({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(Grt,{value:{value:c,onChange:d,size:s},children:_.jsx(os.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(jQ,{role:"group",children:a})})})});BQ.classes=os.Wrapper.classes;BQ.displayName="@mantine/core/CheckboxGroup";function GTe({size:e,style:t,...n}){const r=e!==void 0?{width:Fe(e),height:Fe(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function YTe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(GTe,{...t})}var KTe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Zrt={icon:YTe},eit=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Em({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Di(t),"--checkbox-color":s==="outline"?u:Ei(n,e),"--checkbox-icon-color":i?Ei(i,e):hC(o,e)?I1({color:n,theme:e,autoContrast:o}):void 0}}},UQ=Ye((e,t)=>{const n=Oe("CheckboxIndicator",Zrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:b,...w}=n,E=l,S=Nt({name:"CheckboxIndicator",classes:KTe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eit,rootSelector:"indicator"}),T=Krt(),C=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(Ee,{ref:t,...S("indicator",{variant:y}),variant:y,mod:[{checked:C,disabled:b},g],...w,children:_.jsx(E,{indeterminate:c,...S("icon")})})});UQ.displayName="@mantine/core/CheckboxIndicator";UQ.classes=KTe;var XTe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const tit={labelPosition:"right",icon:YTe},nit=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Em({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Di(t),"--checkbox-color":s==="outline"?u:Ei(n,e),"--checkbox-icon-color":i?Ei(i,e):hC(o,e)?I1({color:n,theme:e,autoContrast:o}):void 0}}},ql=Ye((e,t)=>{const n=Oe("Checkbox",tit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:b,error:w,disabled:E,variant:S,indeterminate:T,icon:C,rootRef:I,iconColor:R,onChange:P,autoContrast:D,mod:L,...M}=n,F=qTe(),z=d||(F==null?void 0:F.size),B=C,H=Nt({name:"Checkbox",props:n,classes:XTe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nit}),{styleProps:q,rest:Y}=Fw(M),$=ku(f),W=F?{checked:F.value.includes(Y.value),onChange:X=>{F.onChange(X),P==null||P(X)}}:{};return _.jsx(H4,{...H("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:$,size:z,labelPosition:y,label:c,description:b,error:w,disabled:E,classNames:r,styles:o,unstyled:a,"data-checked":W.checked||g||void 0,variant:S,ref:I,mod:L,...q,...p,children:_.jsxs(Ee,{...H("inner"),mod:{"data-label-position":y},children:[_.jsx(Ee,{component:"input",id:$,ref:t,checked:g,disabled:E,mod:{error:!!w,indeterminate:T},...H("input",{focusable:!0,variant:S}),onChange:P,...Y,...W,type:"checkbox"}),_.jsx(B,{indeterminate:T,...H("icon")})]})})});ql.classes={...XTe,...VTe};ql.displayName="@mantine/core/Checkbox";ql.Group=BQ;ql.Indicator=UQ;ql.Card=FQ;function ZS(e){return"group"in e}function QTe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;ZS(o)&&i.push({group:o.group,items:QTe({options:o.items,search:t,limit:n-i.length})}),ZS(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function rit(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function JTe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(ZS(n))JTe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function iit(e,t){return Array.isArray(e)?e.includes(t):e===t}function ZTe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!ZS(e)){const a=iit(n,e.value),u=t&&a&&_.jsx(GTe,{className:ac.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Or.Option,{value:e.value,disabled:e.disabled,className:Hs({[ac.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(ZTe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Or.Group,{label:e.group,children:o})}function eCe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){JTe(e);const w=typeof i=="string"?(r||QTe)({options:e,search:u?i:"",limit:s??1/0}):e,E=rit(w),S=w.map(T=>_.jsx(ZTe,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},ZS(T)?T.group:T.value));return _.jsx(Or.Dropdown,{hidden:t||n&&E,children:_.jsxs(Or.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(o0.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:S}):S,E&&d&&_.jsx(Or.Empty,{children:d})]})})}var tCe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const sit={},oit=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Cn(s,"badge-height"),"--badge-padding-x":Cn(s,"badge-padding-x"),"--badge-fz":Cn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Di(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Ei(n,e):void 0}}},vv=qo((e,t)=>{const n=Oe("Badge",sit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:b,mod:w,...E}=n,S=Nt({name:"Badge",props:n,classes:tCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oit});return _.jsxs(Ee,{variant:m,mod:[{block:g,circle:b},w],...S("root",{variant:m}),ref:t,...E,children:[d&&_.jsx("span",{...S("section"),"data-position":"left",children:d}),_.jsx("span",{...S("label"),children:p}),h&&_.jsx("span",{...S("section"),"data-position":"right",children:h})]})});vv.classes=tCe;vv.displayName="@mantine/core/Badge";var nCe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const ait={},uit=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Ei(t,e):void 0,"--burger-size":Cn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),zQ=Ye((e,t)=>{const n=Oe("Burger",ait,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=Nt({name:"Burger",classes:nCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uit});return _.jsxs(bo,{...p("root"),ref:t,...h,children:[_.jsx(Ee,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});zQ.classes=nCe;zQ.displayName="@mantine/core/Burger";var q4={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const mde={orientation:"horizontal"},lit=(e,{borderWidth:t})=>({group:{"--button-border-width":Fe(t)}}),VQ=Ye((e,t)=>{const n=Oe("ButtonGroup",mde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Oe("ButtonGroup",mde,e),p=Nt({name:"ButtonGroup",props:n,classes:q4,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:lit,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});VQ.classes=q4;VQ.displayName="@mantine/core/ButtonGroup";const cit={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Fe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},fit={},dit=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Cn(s,"button-height"),"--button-padding-x":Cn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?ha(s.replace("compact-","")):ha(s),"--button-radius":t===void 0?void 0:Di(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},wn=qo((e,t)=>{const n=Oe("Button",fit,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:b,unstyled:w,"data-disabled":E,autoContrast:S,mod:T,...C}=n,I=Nt({name:"Button",props:n,classes:q4,className:s,style:r,classNames:y,styles:b,unstyled:w,vars:i,varsResolver:dit}),R=!!l,P=!!c;return _.jsxs(bo,{ref:t,...I("root",{active:!a&&!p&&!E}),unstyled:w,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":R,"with-right-section":P},T],...C,children:[_.jsx($0,{mounted:!!p,transition:cit,duration:150,children:D=>_.jsx(Ee,{component:"span",...I("loader",{style:D}),"aria-hidden":!0,children:_.jsx(pd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...I("inner"),children:[l&&_.jsx(Ee,{component:"span",...I("section"),mod:{position:"left"},children:l}),_.jsx(Ee,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&_.jsx(Ee,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});wn.classes=q4;wn.displayName="@mantine/core/Button";wn.Group=VQ;const[hit,pit]=ga("Card component was not found in tree");var HQ={root:"m_e615b15f",section:"m_599a2148"};const mit={},W4=qo((e,t)=>{const n=Oe("CardSection",mit,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=pit();return _.jsx(Ee,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});W4.classes=HQ;W4.displayName="@mantine/core/CardSection";const git={},yit=(e,{padding:t})=>({root:{"--card-padding":to(t)}}),zw=qo((e,t)=>{const n=Oe("Card",git,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Nt({name:"Card",props:n,classes:HQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yit}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===W4?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(hit,{value:{getStyles:d},children:_.jsx(pC,{ref:t,unstyled:a,...d("root"),...f,children:p})})});zw.classes=HQ;zw.displayName="@mantine/core/Card";zw.Section=W4;var rCe={root:"m_4451eb3a"};const vit={},Xc=qo((e,t)=>{const n=Oe("Center",vit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Nt({name:"Center",props:n,classes:rCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ee,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Xc.classes=rCe;Xc.displayName="@mantine/core/Center";var iCe={root:"m_b183c0a2"};const bit={},_it=(e,{color:t})=>({root:{"--code-bg":t?Ei(t,e):void 0}}),KI=Ye((e,t)=>{const n=Oe("Code",bit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Nt({name:"Code",props:n,classes:iCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_it});return _.jsx(Ee,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});KI.classes=iCe;KI.displayName="@mantine/core/Code";var sCe={root:"m_7485cace"};const wit={},xit=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Cn(t,"container-size")}}),nd=Ye((e,t)=>{const n=Oe("Container",wit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Nt({name:"Container",classes:sCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xit});return _.jsx(Ee,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});nd.classes=sCe;nd.displayName="@mantine/core/Container";var oCe={root:"m_3eebeb36",label:"m_9e365f20"};const Eit={orientation:"horizontal"},Sit=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Ei(t,e):void 0,"--divider-border-style":n,"--divider-size":Cn(r,"divider-size")}}),eT=Ye((e,t)=>{const n=Oe("Divider",Eit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Nt({name:"Divider",classes:oCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sit});return _.jsx(Ee,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ee,{component:"span",mod:{position:d},...m("label"),children:f})})});eT.classes=oCe;eT.displayName="@mantine/core/Divider";const[Tit,_C]=ga("Drawer component was not found in tree");var F0={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const Cit={},G4=Ye((e,t)=>{const n=Oe("DrawerBody",Cit,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_C();return _.jsx(uQ,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});G4.classes=F0;G4.displayName="@mantine/core/DrawerBody";const Ait={},Y4=Ye((e,t)=>{const n=Oe("DrawerCloseButton",Ait,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_C();return _.jsx(lQ,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});Y4.classes=F0;Y4.displayName="@mantine/core/DrawerCloseButton";const Iit={},K4=Ye((e,t)=>{const n=Oe("DrawerContent",Iit,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=_C(),d=f.scrollAreaComponent||ATe;return _.jsx(CTe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});K4.classes=F0;K4.displayName="@mantine/core/DrawerContent";const kit={},X4=Ye((e,t)=>{const n=Oe("DrawerHeader",kit,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_C();return _.jsx(cQ,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});X4.classes=F0;X4.displayName="@mantine/core/DrawerHeader";const Rit={},Q4=Ye((e,t)=>{const n=Oe("DrawerOverlay",Rit,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_C();return _.jsx(fQ,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});Q4.classes=F0;Q4.displayName="@mantine/core/DrawerOverlay";function Nit(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function Pit(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const Dit={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},Oit={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},$it={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:hf("modal"),position:"left"},Mit=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Cn(n,"drawer-size"),"--drawer-flex":Pit(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":Nit(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Fe(r)}}),J4=Ye((e,t)=>{const n=Oe("DrawerRoot",$it,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Sm(),m=Nt({name:"Drawer",classes:F0,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mit}),g=(p==="rtl"?Oit:Dit)[c];return _.jsx(Tit,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(TTe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});J4.classes=F0;J4.displayName="@mantine/core/DrawerRoot";const Lit={},Z4=Ye((e,t)=>{const n=Oe("DrawerTitle",Lit,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_C();return _.jsx(dQ,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});Z4.classes=F0;Z4.displayName="@mantine/core/DrawerTitle";const Fit={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:hf("modal"),withOverlay:!0,withCloseButton:!0},Tm=Ye((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Oe("Drawer",Fit,e),l=!!n||s;return _.jsxs(J4,{ref:t,...u,children:[r&&_.jsx(Q4,{...i}),_.jsxs(K4,{children:[l&&_.jsxs(X4,{children:[n&&_.jsx(Z4,{children:n}),s&&_.jsx(Y4,{...o})]}),_.jsx(G4,{children:a})]})]})});Tm.classes=F0;Tm.displayName="@mantine/core/Drawer";Tm.Root=J4;Tm.Overlay=Q4;Tm.Content=K4;Tm.Body=G4;Tm.Header=X4;Tm.Title=Z4;Tm.CloseButton=Y4;function jit({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Bit,aCe]=ga("Grid component was not found in tree"),eq=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,gde=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":eq(e,t),yde=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},vde=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Uit({span:e,order:t,offset:n,selector:r}){var d;const i=ao(),s=aCe(),a=uh(e)===void 0?12:uh(e),u=T1({"--col-order":(d=uh(t))==null?void 0:d.toString(),"--col-flex-grow":yde(a,s.grow),"--col-flex-basis":eq(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":gde(a,s.columns,s.grow),"--col-offset":vde(uh(n),s.columns)}),l=Bi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=yde(e[p],s.grow),h[p]["--col-flex-basis"]=eq(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=gde(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=vde(n[p],s.columns)),h},{}),f=iR(Bi(l),i).filter(h=>Bi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(Lw,{styles:u,media:f,selector:r})}var qQ={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const zit={span:12},WQ=Ye((e,t)=>{const n=Oe("GridCol",zit,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=aCe(),h=LN();return _.jsxs(_.Fragment,{children:[_.jsx(Uit,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ee,{ref:t,...d.getStyles("col",{className:Hs(i,h),style:s,classNames:r,styles:o}),...f})]})});WQ.classes=qQ;WQ.displayName="@mantine/core/GridCol";function Vit({gutter:e,selector:t}){const n=ao(),r=T1({"--grid-gutter":to(uh(e))}),i=Bi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=to(e[u])),a),{}),o=iR(Bi(i),n).filter(a=>Bi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(Lw,{styles:r,media:o,selector:t})}const Hit={gutter:"md",grow:!1,columns:12},qit=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Zu=Ye((e,t)=>{const n=Oe("Grid",Hit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Nt({name:"Grid",classes:qQ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qit}),y=LN();return _.jsxs(Bit,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(Vit,{selector:`.${y}`,...n}),_.jsx(Ee,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Zu.classes=qQ;Zu.displayName="@mantine/core/Grid";Zu.Col=WQ;var uCe={root:"m_9e117634"};const Wit={},Git=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Di(t),"--image-object-fit":n}}),R1=qo((e,t)=>{const n=Oe("Image",Wit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const b=Nt({name:"Image",classes:uCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Git});return g&&h?_.jsx(Ee,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ee,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),y(!0)},mod:p,...m})});R1.classes=uCe;R1.displayName="@mantine/core/Image";function tq(){return tq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tq.apply(null,arguments)}function Yit(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Kit=N.useLayoutEffect,Xit=function(t){var n=N.useRef(t);return Kit(function(){n.current=t}),n},bde=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Qit=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&bde(r.current,null),r.current=n,n&&bde(n,i)},[n])},_de={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Jit=function(t){Object.keys(_de).forEach(function(n){t.style.setProperty(n,_de[n],"important")})},wde=Jit,ju=null,xde=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Zit(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ju||(ju=document.createElement("textarea"),ju.setAttribute("tabindex","-1"),ju.setAttribute("aria-hidden","true"),wde(ju)),ju.parentNode===null&&document.body.appendChild(ju);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;ju.style[h]=o[h]}),wde(ju),ju.value=t;var u=xde(ju,e);ju.value=t,u=xde(ju,e),ju.value="x";var l=ju.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Ede=function(){},est=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},tst=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],nst=!!document.documentElement.currentStyle,rst=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=est(tst,n),i=r.boxSizing;if(i==="")return null;nst&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},ist=rst;function lCe(e,t,n){var r=Xit(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var sst=function(t){lCe(window,"resize",t)},ost=function(t){lCe(document.fonts,"loadingdone",t)},ast=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],ust=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Ede:o,u=t.onHeightChange,l=u===void 0?Ede:u,c=Yit(t,ast),f=c.value!==void 0,d=N.useRef(null),h=Qit(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var w=d.current,E=r&&m.current?m.current:ist(w);if(E){m.current=E;var S=Zit(E,w.value||w.placeholder||"x",s,i),T=S[0],C=S[1];p.current!==T&&(p.current=T,w.style.setProperty("height",T+"px","important"),l(T,{rowHeight:C}))}},y=function(w){f||g(),a(w)};return N.useLayoutEffect(g),sst(g),ost(g),N.createElement("textarea",tq({},c,{onChange:y,ref:h}))},lst=N.forwardRef(ust);const cst={},GQ=Ye((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Oe("Textarea",cst,e),u=n&&CSe()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(gd,{component:u?lst:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});GQ.classes=gd.classes;GQ.displayName="@mantine/core/Textarea";const[fst,dst]=ga("List component was not found in tree");var YQ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const hst={},KQ=Ye((e,t)=>{const n=Oe("ListItem",hst,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=dst(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ee,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});KQ.classes=YQ;KQ.displayName="@mantine/core/ListItem";const pst={type:"unordered"},mst=(e,{size:t,spacing:n})=>({root:{"--list-fz":ha(t),"--list-lh":vSe(t),"--list-spacing":to(n)}}),bh=Ye((e,t)=>{const n=Oe("List",pst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,b=Nt({name:"List",classes:YQ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mst});return _.jsx(fst,{value:{center:p,icon:d,getStyles:b},children:_.jsx(Ee,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});bh.classes=YQ;bh.displayName="@mantine/core/List";bh.Item=KQ;var cCe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Sde={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:hf("overlay")},gst=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Qc=Ye((e,t)=>{const n=Oe("LoadingOverlay",Sde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ao(),g=Nt({name:"LoadingOverlay",classes:cCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gst}),y={...Sde.overlayProps,...f};return _.jsx($0,{transition:"fade",...l,mounted:!!d,children:b=>_.jsxs(Ee,{...g("root",{style:b}),ref:t,...p,children:[_.jsx(pd,{...g("loader"),unstyled:a,...c}),_.jsx(aR,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(aR,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Qc.classes=cCe;Qc.displayName="@mantine/core/LoadingOverlay";const[yst,VN]=ga("Menu component was not found in the tree");var wC={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const vst={},XQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Oe("MenuDivider",vst,e),u=VN();return _.jsx(Ee,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});XQ.classes=wC;XQ.displayName="@mantine/core/MenuDivider";const bst={},QQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Oe("MenuDropdown",bst,e),f=N.useRef(null),d=VN(),h=g=>{var y,b;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(b=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||b.focus())},p=Ng(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Ng(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Ma.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:oo(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});QQ.classes=wC;QQ.displayName="@mantine/core/MenuDropdown";const _st={},JQ=qo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Oe("MenuItem",_st,e),p=VN(),m=ao(),{dir:g}=Sm(),y=N.useRef(),b=p.getItemIndex(y.current),w=h,E=Ng(w.onMouseLeave,()=>p.setHovered(-1)),S=Ng(w.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=Ng(w.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),C=Ng(w.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,R=a?Em({color:a,theme:m}):null;return _.jsxs(bo,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:C,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:oo(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,onMouseEnter:S,onMouseLeave:E,onClick:T,onKeyDown:NX({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:w.onKeydown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});JQ.classes=wC;JQ.displayName="@mantine/core/MenuItem";const wst={},ZQ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Oe("MenuLabel",wst,e),u=VN();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});ZQ.classes=wC;ZQ.displayName="@mantine/core/MenuLabel";const xst={refProp:"ref"},fCe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Oe("MenuTarget",xst,e);if(!C1(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=VN(),o=Ng(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Ng(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Ng(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Ma.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});fCe.displayName="@mantine/core/MenuTarget";const Est={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ll(e){const t=Oe("Menu",Est,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:b,vars:w,menuItemTabIndex:E,keepMounted:S,...T}=t,C=Nt({name:"Menu",classes:wC,props:t,classNames:m,styles:g,unstyled:y}),[I,{setHovered:R,resetHovered:P}]=TJe(),[D,L]=_o({value:s,defaultValue:o,finalValue:!1,onChange:u}),[M,F]=N.useState(!1),z=()=>{L(!1),F(!1),D&&(i==null||i())},B=()=>{L(!0),!D&&(r==null||r())},H=()=>{D?z():B()},{openDropdown:q,closeDropdown:Y}=jit({open:B,close:z,closeDelay:p,openDelay:h}),$=V=>SJe("[data-menu-item]","[data-menu-dropdown]",V),{resolvedClassNames:W,resolvedStyles:X}=D0({classNames:m,styles:g,props:t});return im(()=>{P()},[D]),_.jsx(yst,{value:{getStyles:C,opened:D,toggleDropdown:H,getItemIndex:$,hovered:I,setHovered:R,openedViaClick:M,setOpenedViaClick:F,closeOnItemClick:l,closeDropdown:d==="click"?z:Y,openDropdown:d==="click"?B:q,closeDropdownImmediately:z,loop:c,trigger:d,unstyled:y,menuItemTabIndex:E},children:_.jsx(Ma,{...T,opened:D,onChange:H,defaultOpened:o,trapFocus:S?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:W,styles:X,unstyled:y,variant:b,keepMounted:S,children:n})})}Ll.extend=e=>e;Ll.classes=wC;Ll.displayName="@mantine/core/Menu";Ll.Item=JQ;Ll.Label=ZQ;Ll.Dropdown=QQ;Ll.Target=fCe;Ll.Divider=XQ;const[Sst,xC]=ga("Modal component was not found in tree");var j0={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Tst={},e5=Ye((e,t)=>{const n=Oe("ModalBody",Tst,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xC();return _.jsx(uQ,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});e5.classes=j0;e5.displayName="@mantine/core/ModalBody";const Cst={},t5=Ye((e,t)=>{const n=Oe("ModalCloseButton",Cst,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xC();return _.jsx(lQ,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});t5.classes=j0;t5.displayName="@mantine/core/ModalCloseButton";const Ast={},n5=Ye((e,t)=>{const n=Oe("ModalContent",Ast,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=xC(),f=c.scrollAreaComponent||ATe;return _.jsx(CTe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Fe(c.yOffset)} * 2))`},children:u})})});n5.classes=j0;n5.displayName="@mantine/core/ModalContent";const Ist={},r5=Ye((e,t)=>{const n=Oe("ModalHeader",Ist,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xC();return _.jsx(cQ,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});r5.classes=j0;r5.displayName="@mantine/core/ModalHeader";const kst={},i5=Ye((e,t)=>{const n=Oe("ModalOverlay",kst,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xC();return _.jsx(fQ,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});i5.classes=j0;i5.displayName="@mantine/core/ModalOverlay";const Rst={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:hf("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Nst=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Di(t),"--modal-size":Cn(n,"modal-size"),"--modal-y-offset":Fe(r),"--modal-x-offset":Fe(i)}}),s5=Ye((e,t)=>{const n=Oe("ModalRoot",Rst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Nt({name:m,classes:j0,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nst});return _.jsx(Sst,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(TTe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});s5.classes=j0;s5.displayName="@mantine/core/ModalRoot";const Pst={},o5=Ye((e,t)=>{const n=Oe("ModalTitle",Pst,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xC();return _.jsx(dQ,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});o5.classes=j0;o5.displayName="@mantine/core/ModalTitle";const Dst={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:hf("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Cs=Ye((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Oe("Modal",Dst,e),c=!!n||s;return _.jsxs(s5,{ref:t,radius:u,...l,children:[r&&_.jsx(i5,{...i}),_.jsxs(n5,{radius:u,children:[c&&_.jsxs(r5,{children:[n&&_.jsx(o5,{children:n}),s&&_.jsx(t5,{...o})]}),_.jsx(e5,{children:a})]})]})});Cs.classes=j0;Cs.displayName="@mantine/core/Modal";Cs.Root=s5;Cs.Overlay=i5;Cs.Content=n5;Cs.Body=e5;Cs.Header=r5;Cs.Title=o5;Cs.CloseButton=t5;const[Ost,eJ]=dC(),[$st,Mst]=dC();var a5={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Lst={},Fst=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Cn(t):Cn(n,"pg-gap")}}),tJ=Ye((e,t)=>{const n=Oe("PillGroup",Lst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=eJ(),h=(d==null?void 0:d.size)||l||void 0,p=Nt({name:"PillGroup",classes:a5,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fst,stylesCtx:{size:h},rootSelector:"group"});return _.jsx($st,{value:{size:h,disabled:c},children:_.jsx(Ee,{ref:t,size:h,...p("group"),...f})})});tJ.classes=a5;tJ.displayName="@mantine/core/PillGroup";const jst={variant:"default"},Bst=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Cn(n,"pill-fz"),"--pill-height":Cn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Di(t)}}),uR=Ye((e,t)=>{const n=Oe("Pill",jst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...b}=n,w=Mst(),E=eJ(),S=m||(w==null?void 0:w.size)||void 0,T=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",C=Nt({name:"Pill",classes:a5,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bst,stylesCtx:{size:S}});return _.jsxs(Ee,{component:"span",ref:t,variant:T,size:S,...C("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(w==null?void 0:w.disabled)},y],...b,children:[_.jsx("span",{...C("label"),children:c}),f&&_.jsx(M0,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...C("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var R;I.preventDefault(),I.stopPropagation(),(R=h==null?void 0:h.onMouseDown)==null||R.call(h,I)},onClick:I=>{var R;I.stopPropagation(),d==null||d(),(R=h==null?void 0:h.onClick)==null||R.call(h,I)}})]})});uR.classes=a5;uR.displayName="@mantine/core/Pill";uR.Group=tJ;var dCe={field:"m_45c4369d"};const Ust={type:"visible"},nJ=Ye((e,t)=>{const n=Oe("PillsInputField",Ust,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=eJ(),g=vC(),y=Nt({name:"PillsInputField",classes:dCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return _.jsx(Ee,{component:"input",ref:oo(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});nJ.classes=dCe;nJ.displayName="@mantine/core/PillsInputField";const zst={},sL=Ye((e,t)=>{const n=Oe("PillsInput",zst,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(Ost,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(gd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});sL.displayName="@mantine/core/PillsInput";sL.Field=nJ;function Vst({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(ZS(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Hst={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},rJ=Ye((e,t)=>{const n=Oe("MultiSelect",Hst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:S,comboboxProps:T,filter:C,limit:I,withScrollArea:R,maxDropdownHeight:P,searchValue:D,defaultSearchValue:L,onSearchChange:M,readOnly:F,disabled:z,onFocus:B,onBlur:H,onPaste:q,radius:Y,rightSection:$,rightSectionWidth:W,rightSectionPointerEvents:X,rightSectionProps:V,leftSection:K,leftSectionWidth:J,leftSectionPointerEvents:ue,leftSectionProps:_e,inputContainer:be,inputWrapperOrder:xe,withAsterisk:ke,labelProps:je,descriptionProps:Re,errorProps:ft,wrapperProps:Ze,description:It,label:bt,error:Ae,maxValues:Be,searchable:st,nothingFoundMessage:_t,withCheckIcon:jt,checkIconPosition:ot,hidePickedOptions:Se,withErrorStyles:kt,name:Rt,form:Te,id:$e,clearable:rt,clearButtonProps:St,hiddenInputProps:Mt,placeholder:Zn,hiddenInputValuesDivider:Br,required:er,mod:yr,renderOption:kn,onRemove:Un,onClear:pr,scrollAreaProps:Tr,...Yo}=n,us=ku($e),Vn=MTe(m),Yi=CQ(Vn),ri=LQ({opened:g,defaultOpened:y,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),ri.resetSelectedOption()}}),{styleProps:Ns,rest:{type:Sd,autoComplete:Pu,...wc}}=Fw(Yo),[Yr,Ki]=_o({value:c,defaultValue:f,finalValue:[],onChange:d}),[Ti,Ko]=_o({value:D,defaultValue:L,finalValue:"",onChange:M}),ba=Nt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Eo,resolvedStyles:pe}=D0({props:n,styles:o,classNames:r}),ae=wt=>{h==null||h(wt),wt.key===" "&&!st&&(wt.preventDefault(),ri.toggleDropdown()),wt.key==="Backspace"&&Ti.length===0&&Yr.length>0&&(Un==null||Un(Yr[Yr.length-1]),Ki(Yr.slice(0,Yr.length-1)))},me=Yr.map((wt,Ut)=>{var dn,tr;return _.jsx(uR,{withRemoveButton:!F&&!((dn=Yi[wt])!=null&&dn.disabled),onRemove:()=>{Ki(Yr.filter(cr=>wt!==cr)),Un==null||Un(wt)},unstyled:a,disabled:z,...ba("pill"),children:((tr=Yi[wt])==null?void 0:tr.label)||wt},`${wt}-${Ut}`)});N.useEffect(()=>{E&&ri.selectFirstOption()},[E,Yr]);const Le=rt&&Yr.length>0&&!z&&!F&&_.jsx(Or.ClearButton,{size:l,...St,onClear:()=>{pr==null||pr(),Ki([]),Ko("")}}),Me=Vst({data:Vn,value:Yr});return _.jsxs(_.Fragment,{children:[_.jsxs(Or,{store:ri,classNames:Eo,styles:pe,unstyled:a,size:l,readOnly:F,__staticSelector:"MultiSelect",onOptionSubmit:wt=>{S==null||S(wt),Ko(""),ri.updateSelectedOptionIndex("selected"),Yr.includes(Yi[wt].value)?(Ki(Yr.filter(Ut=>Ut!==Yi[wt].value)),Un==null||Un(Yi[wt].value)):Yr.length<Be&&Ki([...Yr,Yi[wt].value])},...T,children:[_.jsx(Or.DropdownTarget,{children:_.jsx(sL,{...Ns,__staticSelector:"MultiSelect",classNames:Eo,styles:pe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:z,radius:Y,rightSection:$||Le||_.jsx(Or.Chevron,{size:l,error:Ae,unstyled:a}),rightSectionPointerEvents:X||(Le?"all":"none"),rightSectionWidth:W,rightSectionProps:V,leftSection:K,leftSectionWidth:J,leftSectionPointerEvents:ue,leftSectionProps:_e,inputContainer:be,inputWrapperOrder:xe,withAsterisk:ke,labelProps:je,descriptionProps:Re,errorProps:ft,wrapperProps:Ze,description:It,label:bt,error:Ae,multiline:!0,withErrorStyles:kt,__stylesApiProps:{...n,rightSectionPointerEvents:X||(Le?"all":"none"),multiline:!0},pointer:!st,onClick:()=>st?ri.openDropdown():ri.toggleDropdown(),"data-expanded":ri.dropdownOpened||void 0,id:us,required:er,mod:yr,children:_.jsxs(uR.Group,{disabled:z,unstyled:a,...ba("pillsList"),children:[me,_.jsx(Or.EventsTarget,{autoComplete:Pu,children:_.jsx(sL.Field,{...wc,ref:t,id:us,placeholder:Zn,type:!st&&!Zn?"hidden":"visible",...ba("inputField"),unstyled:a,onFocus:wt=>{B==null||B(wt),st&&ri.openDropdown()},onBlur:wt=>{H==null||H(wt),ri.closeDropdown(),Ko("")},onKeyDown:ae,value:Ti,onChange:wt=>{Ko(wt.currentTarget.value),st&&ri.openDropdown(),E&&ri.selectFirstOption()},disabled:z,readOnly:F||!st,pointer:!st})})]})})}),_.jsx(eCe,{data:Se?Me:Vn,hidden:F||z,filter:C,search:Ti,limit:I,hiddenWhenEmpty:!st||!_t||Se&&Me.length===0&&Ti.trim().length===0,withScrollArea:R,maxDropdownHeight:P,filterOptions:st,value:Yr,checkIconPosition:ot,withCheckIcon:jt,nothingFoundMessage:_t,unstyled:a,labelId:bt?`${us}-label`:void 0,"aria-label":bt?void 0:Yo["aria-label"],renderOption:kn,scrollAreaProps:Tr})]}),_.jsx(Or.HiddenInput,{name:Rt,valuesDivider:Br,value:Yr,form:Te,disabled:z,...Mt})]})});rJ.classes={...gd.classes,...Or.classes};rJ.displayName="@mantine/core/MultiSelect";var hCe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const qst={},Wst=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":to(r)}}},u5=qo((e,t)=>{const n=Oe("NavLink",qst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:b,description:w,disableRightSectionRotation:E,noWrap:S,childrenOffset:T,onKeyDown:C,autoContrast:I,mod:R,...P}=n,D=Nt({name:"NavLink",props:n,classes:hCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Wst}),[L,M]=_o({value:l,defaultValue:c,finalValue:!1,onChange:f}),F=!!d,z=B=>{h==null||h(B),F&&(B.preventDefault(),M(!L))};return _.jsxs(_.Fragment,{children:[_.jsxs(bo,{...D("root"),component:"a",ref:t,onClick:z,onKeyDown:B=>{C==null||C(B),B.nativeEvent.code==="Space"&&F&&(B.preventDefault(),M(!L))},unstyled:a,mod:[{disabled:m,active:p,expanded:L},R],...P,children:[g&&_.jsx(Ee,{component:"span",...D("section"),mod:{position:"left"},children:g}),_.jsxs(Ee,{...D("body"),mod:{"no-wrap":S},children:[_.jsx(Ee,{component:"span",...D("label"),children:b}),_.jsx(Ee,{component:"span",mod:{active:p},...D("description"),children:w})]}),(F||y)&&_.jsx(Ee,{...D("section"),component:"span",mod:{rotate:L&&!E,position:"right"},children:F?y||_.jsx(JS,{...D("chevron")}):y})]}),_.jsx(M4,{in:L,...D("collapse"),children:_.jsx("div",{...D("children"),children:d})})]})});u5.classes=hCe;u5.displayName="@mantine/core/NavLink";var pCe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Gst={withCloseButton:!0},Yst=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Di(t),"--notification-color":n?Ei(n,e):void 0}}),iJ=Ye((e,t)=>{const n=Oe("Notification",Gst,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:b,vars:w,mod:E,...S}=n,T=Nt({name:"Notification",classes:pCe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:w,varsResolver:Yst});return _.jsxs(Ee,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:b,...S,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(pd,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(Ee,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(M0,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});iJ.classes=pCe;iJ.displayName="@mantine/core/Notification";function mCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var lR;(function(e){e.event="event",e.props="prop"})(lR||(lR={}));function zy(){}function Kst(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function cR(e){return!!(e||"").match(/\d/)}function cS(e){return e==null}function Xst(e){return typeof e=="number"&&isNaN(e)}function gCe(e){return cS(e)||Xst(e)||typeof e=="number"&&!isFinite(e)}function yCe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Qst(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Jst(e,t,n){var r=Qst(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Zst(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function sJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function eot(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function vCe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Tde(e,t){return Array(t+1).join(e)}function bCe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Tde("0",Math.abs(o))+i:o>=a?i=i+Tde("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Cde(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=sJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=vCe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Kb(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var _Ce=Kst(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),tot=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function not(e,t,n){return Math.min(Math.max(e,t),n)}function GU(e){return Math.max(e.selectionStart,e.selectionEnd)}function rot(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function iot(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function sot(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function oot(e,t,n,r,i,s,o){o===void 0&&(o=sot);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var b=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var w=y===-1||d[y]===-1?0:d[y]+1;return w>b?b:r-w<b-r?w:b}function Ade(e,t,n,r){var i=e.length;if(t=not(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function aot(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(cR(e[n])||cR(e[n-1]));return t}function wCe(e,t,n,r,i,s){s===void 0&&(s=zy);var o=Zst(function(p,m){var g,y;return gCe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?bCe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(cS(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;cS(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function uot(e){return e.replace(/[^0-9]/g,"")}function lot(e){return e}function cot(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=lot);var a=e.removeFormatting;a===void 0&&(a=uot);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=zy);var h=e.onKeyDown;h===void 0&&(h=zy);var p=e.onMouseUp;p===void 0&&(p=zy);var m=e.onFocus;m===void 0&&(m=zy);var g=e.onBlur;g===void 0&&(g=zy);var y=e.value,b=e.getCaretBoundary;b===void 0&&(b=aot);var w=e.isValidInputCharacter;w===void 0&&(w=cR);var E=e.isCharacterSame,S=mCe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=wCe(y,u,!!l,o,a,c),C=T[0],I=C.formattedValue,R=C.numAsString,P=T[1],D=N.useRef(),L=N.useRef({formattedValue:I,numAsString:R}),M=function(Ae,Be){L.current={formattedValue:Ae.formattedValue,numAsString:Ae.value},P(Ae,Be)},F=N.useState(!1),z=F[0],B=F[1],H=N.useRef(null),q=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return B(!0),function(){clearTimeout(q.current.setCaretTimeout),clearTimeout(q.current.focusTimeout)}},[]);var Y=o,$=function(Ae,Be){var st=parseFloat(Be);return{formattedValue:Ae,value:Be,floatValue:isNaN(st)?void 0:st}},W=function(Ae,Be,st){Ae.selectionStart===0&&Ae.selectionEnd===Ae.value.length||(Kb(Ae,Be),q.current.setCaretTimeout=setTimeout(function(){Ae.value===st&&Ae.selectionStart!==Be&&Kb(Ae,Be)},0))},X=function(Ae,Be,st){return Ade(Ae,Be,b(Ae),st)},V=function(Ae,Be,st){var _t=b(Be),jt=oot(Be,I,Ae,st,_t,w,E);return jt=Ade(Be,jt,_t),jt},K=function(Ae){var Be=Ae.formattedValue;Be===void 0&&(Be="");var st=Ae.input,_t=Ae.source,jt=Ae.event,ot=Ae.numAsString,Se;if(st){var kt=Ae.inputValue||st.value,Rt=GU(st);st.value=Be,Se=V(kt,Be,Rt),Se!==void 0&&W(st,Se,Be)}Be!==I&&M($(Be,ot),{event:jt,source:_t})};N.useEffect(function(){var Ae=L.current,Be=Ae.formattedValue,st=Ae.numAsString;(I!==Be||R!==st)&&M($(I,R),{event:void 0,source:lR.props})},[I,R]);var J=H.current?GU(H.current):void 0,ue=typeof window<"u"?N.useLayoutEffect:N.useEffect;ue(function(){var Ae=H.current;if(I!==L.current.formattedValue&&Ae){var Be=V(L.current.formattedValue,I,J);Ae.value=I,W(Ae,Be,I)}},[I]);var _e=function(Ae,Be,st){var _t=Be.target,jt=D.current?tot(D.current,_t.selectionEnd):_Ce(I,Ae),ot=Object.assign(Object.assign({},jt),{lastValue:I}),Se=a(Ae,ot),kt=Y(Se);if(Se=a(kt,void 0),f&&!f($(kt,Se))){var Rt=Be.target,Te=GU(Rt),$e=V(Ae,I,Te);return Rt.value=I,W(Rt,$e,I),!1}return K({formattedValue:kt,numAsString:Se,inputValue:Ae,event:Be,source:st,input:Be.target}),!0},be=function(Ae,Be){Be===void 0&&(Be=0);var st=Ae.selectionStart,_t=Ae.selectionEnd;D.current={selectionStart:st,selectionEnd:_t+Be}},xe=function(Ae){var Be=Ae.target,st=Be.value,_t=_e(st,Ae,lR.event);_t&&d(Ae),D.current=void 0},ke=function(Ae){var Be=Ae.target,st=Ae.key,_t=Be.selectionStart,jt=Be.selectionEnd,ot=Be.value;ot===void 0&&(ot="");var Se;st==="ArrowLeft"||st==="Backspace"?Se=Math.max(_t-1,0):st==="ArrowRight"?Se=Math.min(_t+1,ot.length):st==="Delete"&&(Se=_t);var kt=0;st==="Delete"&&_t===jt&&(kt=1);var Rt=st==="ArrowLeft"||st==="ArrowRight";if(Se===void 0||_t!==jt&&!Rt){h(Ae),be(Be,kt);return}var Te=Se;if(Rt){var $e=st==="ArrowLeft"?"left":"right";Te=X(ot,Se,$e),Te!==Se&&Ae.preventDefault()}else st==="Delete"&&!w(ot[Se])?Te=X(ot,Se,"right"):st==="Backspace"&&!w(ot[Se])&&(Te=X(ot,Se,"left"));Te!==Se&&W(Be,Te,ot),h(Ae),be(Be,kt)},je=function(Ae){var Be=Ae.target,st=function(){var _t=Be.selectionStart,jt=Be.selectionEnd,ot=Be.value;if(ot===void 0&&(ot=""),_t===jt){var Se=X(ot,_t);Se!==_t&&W(Be,Se,ot)}};st(),requestAnimationFrame(function(){st()}),p(Ae),be(Be)},Re=function(Ae){Ae.persist&&Ae.persist();var Be=Ae.target,st=Ae.currentTarget;H.current=Be,q.current.focusTimeout=setTimeout(function(){var _t=Be.selectionStart,jt=Be.selectionEnd,ot=Be.value;ot===void 0&&(ot="");var Se=X(ot,_t);Se!==_t&&!(_t===0&&jt===ot.length)&&W(Be,Se,ot),m(Object.assign(Object.assign({},Ae),{currentTarget:st}))},0)},ft=function(Ae){H.current=null,clearTimeout(q.current.focusTimeout),clearTimeout(q.current.setCaretTimeout),g(Ae)},Ze=z&&rot()?"numeric":void 0,It=Object.assign({inputMode:Ze},S,{type:t,value:I,onChange:xe,onKeyDown:ke,onMouseUp:je,onFocus:Re,onBlur:ft});if(n==="text")return i?ci.createElement(ci.Fragment,null,i(I,S)||null):ci.createElement("span",Object.assign({},S,{ref:s}),I);if(r){var bt=r;return ci.createElement(bt,Object.assign({},It,{ref:s}))}return ci.createElement("input",Object.assign({},It,{ref:s}))}function Ide(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=l5(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=sJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=vCe(p,n,!!r)),l&&(h=Jst(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function l5(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function fot(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function dot(e,t){return new RegExp("(^-)|[0-9]|"+yCe(e),"g")}function hot(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function pot(e,t,n){var r;t===void 0&&(t=iot(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=l5(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(cR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(H,q,Y){var $=!1,W=!1;s.startsWith("-")?$=!1:H.startsWith("--")?($=!1,W=!0):o.startsWith("-")&&H.length===o.length?$=!1:H[0]==="-"&&($=!0);var X=$?1:0;return W&&(X=2),X&&(H=H.substring(X),q-=X,Y-=X),{value:H,start:q,end:Y,hasNegation:$}},b=y(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=y(t.lastValue,u.start,u.end),S=E.start,T=E.end,C=E.value,I=e.substring(c,f);e.length&&C.length&&(S>C.length-o.length||T<s.length)&&!(I&&o.startsWith(I))&&(e=C);var R=0;e.startsWith(s)?R+=s.length:c<s.length&&(R=c),e=e.substring(R),f-=R;var P=e.length,D=e.length-o.length;e.endsWith(o)?P=D:(f>D||f>e.length-o.length)&&(P=f),e=e.substring(0,P),e=fot(w?"-"+e:e,i),e=(e.match(dot(p))||[]).join("");var L=e.indexOf(p);e=e.replace(new RegExp(yCe(p),"g"),function(H,q){return q===L?".":""});var M=sJ(e,i),F=M.beforeDecimal,z=M.afterDecimal,B=M.addNegation;return l.end-l.start<u.end-u.start&&F===""&&m&&!parseFloat(z)&&(e=B?"-":""),e}function mot(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function got(e){var t=l5(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function yot(e){e=got(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=zy);var s=e.onBlur;s===void 0&&(s=zy);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=mCe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=l5(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,b=function(B){return Ide(B,e)},w=function(B,H){return pot(B,H,e)},E=cS(f)?c:f,S=d??hot(E,l,t);cS(f)?cS(c)||(S=S||typeof c=="number"):S=S||typeof f=="number";var T=function(B){return gCe(B)?B:(typeof B=="number"&&(B=bCe(B)),S&&typeof a=="number"?Cde(B,a,!!u):B)},C=wCe(T(f),T(c),!!S,b,w,h),I=C[0],R=I.numAsString,P=I.formattedValue,D=C[1],L=function(B){var H=B.target,q=B.key,Y=H.selectionStart,$=H.selectionEnd,W=H.value;if(W===void 0&&(W=""),(q==="Backspace"||q==="Delete")&&$<l.length){B.preventDefault();return}if(Y!==$){i(B);return}q==="Backspace"&&W[0]==="-"&&Y===l.length+1&&n&&Kb(H,1),a&&u&&(q==="Backspace"&&W[Y-1]===g?(Kb(H,Y-1),B.preventDefault()):q==="Delete"&&W[Y]===g&&B.preventDefault()),y!=null&&y.includes(q)&&W[Y]===g&&Kb(H,Y+1);var X=o===!0?",":o;q==="Backspace"&&W[Y-1]===X&&Kb(H,Y-1),q==="Delete"&&W[Y]===X&&Kb(H,Y+1),i(B)},M=function(B){var H=R;if(H.match(/\d/g)||(H=""),r||(H=eot(H)),u&&a&&(H=Cde(H,a,u)),H!==R){var q=Ide(H,e);D({formattedValue:q,value:H,floatValue:parseFloat(H)},{event:B,source:lR.event})}s(B)},F=function(B){return B===g?!0:cR(B)},z=function(B){var H=B.currentValue,q=B.lastValue,Y=B.formattedValue,$=B.currentValueIndex,W=B.formattedValueIndex,X=H[$],V=Y[W],K=_Ce(q,H),J=K.to;return $>=J.start&&$<J.end&&y&&y.includes(X)&&V===g?!0:X===V};return Object.assign(Object.assign({},p),{value:P,valueIsNumericString:!1,isValidInputCharacter:F,isCharacterSame:z,onValueChange:D,format:b,removeFormatting:w,getCaretBoundary:function(B){return mot(B,e)},onKeyDown:L,onBlur:M})}function vot(e){var t=yot(e);return ci.createElement(cot,Object.assign({},t))}function kde({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var nq={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const bot=/^(0\.0*|-0(\.0*)?)$/,_ot=/^-?0\d+(\.\d+)?\.?$/;function wot(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Rde(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const xot={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Eot=(e,{size:t})=>({controls:{"--ni-chevron-size":Cn(t,"ni-chevron-size")}}),oJ=Ye((e,t)=>{const n=Oe("NumberInput",xot,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:S,onKeyDown:T,onKeyDownCapture:C,handlersRef:I,startValue:R,disabled:P,rightSectionPointerEvents:D,allowNegative:L,readOnly:M,size:F,rightSectionWidth:z,stepHoldInterval:B,stepHoldDelay:H,allowLeadingZeros:q,withKeyboardEvents:Y,trimLeadingZeroesOnBlur:$,...W}=n,X=Nt({name:"NumberInput",classes:nq,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:Eot}),{resolvedClassNames:V,resolvedStyles:K}=D0({classNames:i,styles:s,props:n}),[J,ue]=_o({value:c,defaultValue:f,onChange:u}),_e=H!==void 0&&B!==void 0,be=N.useRef(null),xe=N.useRef(null),ke=N.useRef(0),je=(Se,kt)=>{kt.source==="event"&&ue(wot(Se.floatValue)&&!bot.test(Se.value)&&!(q&&_ot.test(Se.value))?Se.floatValue:Se.value),l==null||l(Se,kt)},Re=Se=>{const kt=String(Se).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return kt?Math.max(0,(kt[1]?kt[1].length:0)-(kt[2]?+kt[2]:0)):0},ft=Se=>{be.current&&typeof Se<"u"&&be.current.setSelectionRange(Se,Se)},Ze=N.useRef();Ze.current=()=>{let Se;const kt=Re(J),Rt=Re(p),Te=Math.max(kt,Rt),$e=10**Te;if(typeof J!="number"||Number.isNaN(J))Se=Op(R,h,d);else if(d!==void 0){const St=(Math.round(J*$e)+Math.round(p*$e))/$e;Se=St<=d?St:d}else Se=(Math.round(J*$e)+Math.round(p*$e))/$e;const rt=Se.toFixed(Te);ue(parseFloat(rt)),l==null||l({floatValue:parseFloat(rt),formattedValue:rt,value:rt},{source:"increment"}),setTimeout(()=>{var St;return ft((St=be.current)==null?void 0:St.value.length)},0)};const It=N.useRef();It.current=()=>{let Se;const kt=h!==void 0?h:L?Number.MIN_SAFE_INTEGER:0,Rt=Re(J),Te=Re(p),$e=Math.max(Rt,Te),rt=10**$e;if(typeof J!="number"||Number.isNaN(J))Se=Op(R,kt,d);else{const Mt=(Math.round(J*rt)-Math.round(p*rt))/rt;Se=kt!==void 0&&Mt<kt?kt:Mt}const St=Se.toFixed($e);ue(parseFloat(St)),l==null||l({floatValue:parseFloat(St),formattedValue:St,value:St},{source:"decrement"}),setTimeout(()=>{var Mt;return ft((Mt=be.current)==null?void 0:Mt.value.length)},0)};const bt=Se=>{T==null||T(Se),!(M||!Y)&&(Se.key==="ArrowUp"&&(Se.preventDefault(),Ze.current()),Se.key==="ArrowDown"&&(Se.preventDefault(),It.current()))},Ae=Se=>{if(C==null||C(Se),Se.key==="Backspace"){const kt=be.current;kt.selectionStart===0&&kt.selectionStart===kt.selectionEnd&&(Se.preventDefault(),window.setTimeout(()=>ft(0),0))}};OX(I,{increment:Ze.current,decrement:It.current});const Be=Se=>{Se?Ze.current():It.current(),ke.current+=1},st=Se=>{if(Be(Se),_e){const kt=typeof B=="number"?B:B(ke.current);xe.current=window.setTimeout(()=>st(Se),kt)}},_t=(Se,kt)=>{var Rt;Se.preventDefault(),(Rt=be.current)==null||Rt.focus(),Be(kt),_e&&(xe.current=window.setTimeout(()=>st(kt),H))},jt=()=>{xe.current&&window.clearTimeout(xe.current),xe.current=null,ke.current=0},ot=_.jsxs("div",{...X("controls"),children:[_.jsx(bo,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof J=="number"&&d!==void 0&&J>=d,mod:{direction:"up"},onMouseDown:Se=>Se.preventDefault(),onPointerDown:Se=>{_t(Se,!0)},onPointerUp:jt,onPointerLeave:jt,children:_.jsx(kde,{direction:"up"})}),_.jsx(bo,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof J=="number"&&h!==void 0&&J<=h,mod:{direction:"down"},onMouseDown:Se=>Se.preventDefault(),onPointerDown:Se=>{_t(Se,!1)},onPointerUp:jt,onPointerLeave:jt,children:_.jsx(kde,{direction:"down"})})]});return _.jsx(gd,{component:vot,allowNegative:L,className:Hs(nq.root,r),size:F,...W,readOnly:M,disabled:P,value:J,getInputRef:oo(t,be),onValueChange:je,rightSection:m||M?g:g||ot,classNames:V,styles:K,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?S:0,onKeyDown:bt,onKeyDownCapture:Ae,rightSectionPointerEvents:D??(P?"none":void 0),rightSectionWidth:z??`var(--ni-right-section-width-${F||"sm"})`,allowLeadingZeros:q,onBlur:Se=>{if(w==null||w(Se),b==="blur"&&typeof J=="number"&&Op(J,h,d)!==J&&ue(Op(J,h,d)),$&&typeof J=="string"){const kt=J.replace(/^0+/,""),Rt=parseFloat(kt);ue(Number.isNaN(Rt)?kt:Rt)}},isAllowed:Se=>b==="strict"?y?y(Se)&&Rde(Se.floatValue,h,d):Rde(Se.floatValue,h,d):y?y(Se):!0})});oJ.classes={...gd.classes,...nq};oJ.displayName="@mantine/core/NumberInput";const[Sot,xCe]=ga("Progress.Root component was not found in tree");var HN={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const Tot={},aJ=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Oe("ProgressLabel",Tot,e),u=xCe();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});aJ.classes=HN;aJ.displayName="@mantine/core/ProgressLabel";const Cot={},Aot=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Cn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Di(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),c5=Ye((e,t)=>{const n=Oe("ProgressRoot",Cot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Nt({name:"Progress",classes:HN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Aot});return _.jsx(Sot,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ee,{ref:t,...d("root"),...f})})});c5.classes=HN;c5.displayName="@mantine/core/ProgressRoot";const Iot={withAria:!0},f5=Ye((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Oe("ProgressSection",Iot,e),p=xCe(),m=ao(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ee,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Ei(l,m),"--progress-label-color":hC(p.autoContrast,m)?I1({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});f5.classes=HN;f5.displayName="@mantine/core/ProgressSection";const kot={},EC=Ye((e,t)=>{const n=Oe("Progress",kot,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=D0({classNames:i,styles:s,props:n});return _.jsx(c5,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(f5,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});EC.classes=HN;EC.displayName="@mantine/core/Progress";EC.Section=f5;EC.Root=c5;EC.Label=aJ;const[Rot,ECe]=dC(),[Not,Pot]=dC();var SCe={card:"m_9dc8ae12"};const Dot={withBorder:!0},Oot=(e,{radius:t})=>({card:{"--card-radius":Di(t)}}),uJ=Ye((e,t)=>{const n=Oe("RadioCard",Dot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Nt({name:"RadioCard",classes:SCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oot,rootSelector:"card"}),{dir:b}=Sm(),w=ECe(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,S=p||(w==null?void 0:w.name),T=C=>{if(m==null||m(C),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(C.nativeEvent.code)){C.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${S||"__mantine"}"]`)),R=I.findIndex(L=>L===C.target),P=R+1>=I.length?0:R+1,D=R-1<0?I.length-1:R-1;C.nativeEvent.code==="ArrowDown"&&(I[P].focus(),I[P].click()),C.nativeEvent.code==="ArrowUp"&&(I[D].focus(),I[D].click()),C.nativeEvent.code==="ArrowLeft"&&(I[b==="ltr"?D:P].focus(),I[b==="ltr"?D:P].click()),C.nativeEvent.code==="ArrowRight"&&(I[b==="ltr"?P:D].focus(),I[b==="ltr"?P:D].click())}};return _.jsx(Not,{value:{checked:E},children:_.jsx(bo,{ref:t,mod:[{"with-border":f,checked:E},c],...y("card"),...g,role:"radio","aria-checked":E,name:S,onClick:C=>{h==null||h(C),w==null||w.onChange(d||"")},onKeyDown:T})})});uJ.displayName="@mantine/core/RadioCard";uJ.classes=SCe;const $ot={},lJ=Ye((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Oe("RadioGroup",$ot,e),f=ku(u),[d,h]=_o({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(Rot,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(os.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(jQ,{role:"radiogroup",children:a})})})});lJ.classes=os.Wrapper.classes;lJ.displayName="@mantine/core/RadioGroup";function TCe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Fe(e),height:Fe(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var CCe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const Mot={icon:TCe},Lot=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Em({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Cn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Di(t),"--radio-color":s==="outline"?u:Ei(n,e),"--radio-icon-size":Cn(r,"radio-icon-size"),"--radio-icon-color":i?Ei(i,e):hC(o,e)?I1({color:n,theme:e,autoContrast:o}):void 0}}},cJ=Ye((e,t)=>{const n=Oe("RadioIndicator",Mot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...b}=n,w=l,E=Nt({name:"RadioIndicator",classes:CCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Lot,rootSelector:"indicator"}),S=Pot(),T=typeof p=="boolean"?p:(S==null?void 0:S.checked)||!1;return _.jsx(Ee,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...b,children:_.jsx(w,{...E("icon")})})});cJ.displayName="@mantine/core/RadioIndicator";cJ.classes=CCe;var ACe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Fot={labelPosition:"right"},jot=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Em({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Cn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Di(n),"--radio-color":s==="outline"?u:Ei(r,e),"--radio-icon-color":i?Ei(i,e):hC(o,e)?I1({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Cn(t,"radio-icon-size")}}},l0=Ye((e,t)=>{const n=Oe("Radio",Fot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:b,wrapperProps:w,icon:E=TCe,rootRef:S,iconColor:T,onChange:C,mod:I,...R}=n,P=Nt({name:"Radio",classes:ACe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jot}),D=ECe(),L=(D==null?void 0:D.size)??c,M=n.size?c:L,{styleProps:F,rest:z}=Fw(R),B=ku(l),H=D?{checked:D.value===z.value,name:z.name??D.name,onChange:q=>{D.onChange(q),C==null||C(q)}}:{};return _.jsx(H4,{...P("root"),__staticSelector:"Radio",__stylesApiProps:n,id:B,size:M,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":H.checked||void 0,variant:y,ref:S,mod:I,...F,...w,children:_.jsxs(Ee,{...P("inner"),mod:{"label-position":d},children:[_.jsx(Ee,{...P("radio",{focusable:!0,variant:y}),onChange:C,...z,...H,component:"input",mod:{error:!!p},ref:t,id:B,disabled:b,type:"radio"}),_.jsx(E,{...P("icon"),"aria-hidden":!0})]})})});l0.classes=ACe;l0.displayName="@mantine/core/Radio";l0.Group=lJ;l0.Card=uJ;l0.Indicator=cJ;const Bot={duration:100,transition:"fade"};function Uot(e,t){return{...Bot,...t,...e}}function zot({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=iQ({placement:t,middleware:[eQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Vg(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var d5={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Vot={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:hf("popover")},Hot=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Di(t),"--tooltip-bg":n?Ei(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),fJ=Ye((e,t)=>{const n=Oe("TooltipFloating",Vot,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:b,variant:w,vars:E,portalProps:S,...T}=n,C=ao(),I=Nt({name:"TooltipFloating",props:n,classes:d5,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:Hot}),{handleMouseMove:R,x:P,y:D,opened:L,boundaryRef:M,floating:F,setOpened:z}=zot({offset:p,position:m});if(!C1(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=oo(M,r.ref,t),H=Y=>{var $,W;(W=($=r.props).onMouseEnter)==null||W.call($,Y),R(Y),z(!0)},q=Y=>{var $,W;(W=($=r.props).onMouseLeave)==null||W.call($,Y),z(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(yC,{...S,withinPortal:s,children:_.jsx(Ee,{...T,...I("tooltip",{style:{...BX(o,C),zIndex:y,display:!b&&L?"block":"none",top:(D&&Math.round(D))??"",left:(P&&Math.round(P))??""}}),variant:w,ref:F,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:B,onMouseEnter:H,onMouseLeave:q})]})});fJ.classes=d5;fJ.displayName="@mantine/core/TooltipFloating";const ICe=N.createContext(!1),qot=ICe.Provider,Wot=()=>N.useContext(ICe),Got={openDelay:0,closeDelay:0};function kCe(e){const{openDelay:t,closeDelay:n,children:r}=Oe("TooltipGroup",Got,e);return _.jsx(qot,{value:!0,children:_.jsx(Utt,{delay:{open:t,close:n},children:r})})}kCe.displayName="@mantine/core/TooltipGroup";function Yot(e){var T,C,I;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Wot(),o=ku(),{delay:a,currentId:u,setCurrentId:l}=dTe(),c=N.useCallback(R=>{n(R),R&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:b}={}}}=iQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[aTe(e.offset),eQ({padding:8}),QH(),uTe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[JH()]:[]]}),{getReferenceProps:w,getFloatingProps:E}=Ytt([Btt(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((C=e.events)!=null&&C.touch)}),Gtt(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),Xtt(h,{role:"tooltip"}),qtt(h,{enabled:typeof e.opened>"u"}),ztt(h,{id:o})]);bTe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),im(()=>{var R;(R=e.onPositionChange)==null||R.call(e,g)},[g]);const S=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:S,opened:i,placement:g}}const Nde={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:hf("popover"),positionDependencies:[]},Kot=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Di(t),"--tooltip-bg":n?Ei(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Zi=Ye((e,t)=>{const n=Oe("Tooltip",Nde,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:b,withArrow:w,arrowSize:E,arrowOffset:S,arrowRadius:T,arrowPosition:C,offset:I,transitionProps:R,multiline:P,events:D,zIndex:L,disabled:M,positionDependencies:F,onClick:z,onMouseEnter:B,onMouseLeave:H,inline:q,variant:Y,keepMounted:$,vars:W,portalProps:X,mod:V,floatingStrategy:K,...J}=Oe("Tooltip",Nde,n),{dir:ue}=Sm(),_e=N.useRef(null),be=Yot({position:hTe(ue,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:D,arrowRef:_e,arrowOffset:S,offset:typeof I=="number"?I+(w?E/2:0):I,positionDependencies:[...F,r],inline:q,strategy:K}),xe=Nt({name:"Tooltip",props:n,classes:d5,className:b,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:W,varsResolver:Kot});if(!C1(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ke=oo(be.reference,r.ref,t),je=Uot(R,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(yC,{...X,withinPortal:f,children:_.jsx($0,{...je,keepMounted:$,mounted:!M&&!!be.opened,duration:be.isGroupPhase?10:je.duration,children:Re=>_.jsxs(Ee,{...J,variant:Y,mod:[{multiline:P},V],...be.getFloatingProps({ref:be.floating,className:xe("tooltip").className,style:{...xe("tooltip").style,...Re,zIndex:L,top:be.y??0,left:be.x??0}}),children:[o,_.jsx(sQ,{ref:_e,arrowX:be.arrowX,arrowY:be.arrowY,visible:w,position:be.placement,arrowSize:E,arrowOffset:S,arrowRadius:T,arrowPosition:C,...xe("arrow")})]})})}),N.cloneElement(r,be.getReferenceProps({onClick:z,onMouseEnter:B,onMouseLeave:H,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ke,className:Hs(b,r.props.className),...r.props}))]})});Zi.classes=d5;Zi.displayName="@mantine/core/Tooltip";Zi.Floating=fJ;Zi.Group=kCe;var RCe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Xot={withItemsBorders:!0},Qot=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Di(t),"--sc-color":n?Ei(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Cn(i,"sc-padding"),"--sc-font-size":ha(i)}}),h5=Ye((e,t)=>{var ue,_e;const n=Oe("SegmentedControl",Xot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:b,radius:w,color:E,transitionDuration:S,transitionTimingFunction:T,variant:C,autoContrast:I,withItemsBorders:R,mod:P,...D}=n,L=Nt({name:"SegmentedControl",props:n,classes:RCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qot}),M=ao(),F=l.map(be=>typeof be=="string"?{label:be,value:be}:be),z=KJe(),[B,H]=N.useState(null),[q,Y]=N.useState({}),$=(be,xe)=>{q[xe]=be,Y(q)},[W,X]=_o({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ue=F.find(be=>!be.disabled))==null?void 0:ue.value)??((_e=l[0])==null?void 0:_e.value)??null:null,onChange:d}),V=ku(p),K=F.map(be=>N.createElement(Ee,{...L("control"),mod:{active:W===be.value,orientation:b},key:be.value},N.createElement("input",{...L("input"),disabled:m||be.disabled,type:"radio",name:V,value:be.value,id:`${V}-${be.value}`,checked:W===be.value,onChange:()=>!g&&X(be.value),"data-focus-ring":M.focusRing,key:`${be.value}-input`}),N.createElement(Ee,{component:"label",...L("label"),mod:{active:W===be.value&&!(m||be.disabled),disabled:m||be.disabled,"read-only":g},htmlFor:`${V}-${be.value}`,ref:xe=>$(xe,be.value),__vars:{"--sc-label-color":E!==void 0?I1({color:E,theme:M,autoContrast:I}):void 0},key:`${be.value}-label`},_.jsx("span",{...L("innerLabel"),children:be.label})))),J=oo(t,be=>H(be));return l.length===0?null:_.jsxs(Ee,{...L("root"),variant:C,size:h,ref:J,mod:[{"full-width":y,orientation:b,initialized:z,"with-items-borders":R},P],...D,role:"radiogroup",children:[typeof W=="string"&&_.jsx(mQ,{target:q[W],parent:B,component:"span",transitionDuration:"var(--sc-transition-duration)",...L("indicator")}),K]})});h5.classes=RCe;h5.displayName="@mantine/core/SegmentedControl";const Jot={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},qN=Ye((e,t)=>{const n=Oe("Select",Jot,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:S,disabled:T,filter:C,limit:I,withScrollArea:R,maxDropdownHeight:P,size:D,searchable:L,rightSection:M,checkIconPosition:F,withCheckIcon:z,nothingFoundMessage:B,name:H,form:q,searchValue:Y,defaultSearchValue:$,onSearchChange:W,allowDeselect:X,error:V,rightSectionPointerEvents:K,id:J,clearable:ue,clearButtonProps:_e,hiddenInputProps:be,renderOption:xe,onClear:ke,autoComplete:je,scrollAreaProps:Re,...ft}=n,Ze=N.useMemo(()=>MTe(m),[m]),It=N.useMemo(()=>CQ(Ze),[Ze]),bt=ku(J),[Ae,Be,st]=_o({value:g,defaultValue:y,finalValue:null,onChange:p}),_t=typeof Ae=="string"?It[Ae]:void 0,[jt,ot]=_o({value:Y,defaultValue:$,finalValue:_t?_t.label:"",onChange:W}),Se=LQ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Se.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Se.resetSelectedOption()}}),{resolvedClassNames:kt,resolvedStyles:Rt}=D0({props:n,styles:i,classNames:r});N.useEffect(()=>{b&&Se.selectFirstOption()},[b,Ae]),N.useEffect(()=>{g===null&&ot(""),typeof g=="string"&&_t&&ot(_t.label)},[g,_t]);const Te=ue&&!!Ae&&!T&&!S&&_.jsx(Or.ClearButton,{size:D,..._e,onClear:()=>{Be(null,null),ot(""),ke==null||ke()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Or,{store:Se,__staticSelector:"Select",classNames:kt,styles:Rt,unstyled:s,readOnly:S,onOptionSubmit:$e=>{w==null||w($e);const rt=X&&It[$e].value===Ae?null:It[$e],St=rt?rt.value:null;Be(St,rt),!st&&ot(typeof St=="string"&&(rt==null?void 0:rt.label)||""),Se.closeDropdown()},size:D,...E,children:[_.jsx(Or.Target,{targetType:L?"input":"button",autoComplete:je,children:_.jsx(gd,{id:bt,ref:t,rightSection:M||Te||_.jsx(Or.Chevron,{size:D,error:V,unstyled:s}),rightSectionPointerEvents:K||(Te?"all":"none"),...ft,size:D,__staticSelector:"Select",disabled:T,readOnly:S||!L,value:jt,onChange:$e=>{ot($e.currentTarget.value),Se.openDropdown(),b&&Se.selectFirstOption()},onFocus:$e=>{L&&Se.openDropdown(),f==null||f($e)},onBlur:$e=>{var rt;L&&Se.closeDropdown(),ot(Ae!=null&&((rt=It[Ae])==null?void 0:rt.label)||""),d==null||d($e)},onClick:$e=>{L?Se.openDropdown():Se.toggleDropdown(),h==null||h($e)},classNames:kt,styles:Rt,unstyled:s,pointer:!L,error:V})}),_.jsx(eCe,{data:Ze,hidden:S||T,filter:C,search:jt,limit:I,hiddenWhenEmpty:!L||!B,withScrollArea:R,maxDropdownHeight:P,filterOptions:L&&(_t==null?void 0:_t.label)!==jt,value:Ae,checkIconPosition:F,withCheckIcon:z,nothingFoundMessage:B,unstyled:s,labelId:ft.label?`${bt}-label`:void 0,"aria-label":ft.label?void 0:ft["aria-label"],renderOption:xe,scrollAreaProps:Re})]}),_.jsx(Or.HiddenInput,{value:Ae,name:H,form:q,disabled:T,...be})]})});qN.classes={...gd.classes,...Or.classes};qN.displayName="@mantine/core/Select";function Zot({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ao(),s=t===void 0?e:t,o=T1({"--sg-spacing-x":to(uh(e)),"--sg-spacing-y":to(uh(s)),"--sg-cols":(c=uh(n))==null?void 0:c.toString()}),a=Bi(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=to(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=to(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=iR(Bi(a),i).filter(f=>Bi(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(Lw,{styles:o,media:l,selector:r})}function YU(e){return typeof e=="object"&&e!==null?Bi(e):[]}function eat(e){return e.sort((t,n)=>rR(t)-rR(n))}function tat({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...YU(e),...YU(t),...YU(n)]));return eat(r)}function nat({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=T1({"--sg-spacing-x":to(uh(e)),"--sg-spacing-y":to(uh(i)),"--sg-cols":(l=uh(n))==null?void 0:l.toString()}),o=tat({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=to(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=to(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(Lw,{styles:s,container:u,selector:r})}var NCe={container:"m_925c2d2c",root:"m_2415a157"};const rat={cols:1,spacing:"md",type:"media"},dJ=Ye((e,t)=>{const n=Oe("SimpleGrid",rat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Nt({name:"SimpleGrid",classes:NCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=LN();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(nat,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(Ee,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Zot,{...n,selector:`.${m}`}),_.jsx(Ee,{ref:t,...p("root",{className:m}),...h})]})});dJ.classes=NCe;dJ.displayName="@mantine/core/SimpleGrid";const[PCe,p5]=ga("SliderProvider was not found in tree"),hJ=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=p5();return _.jsx(Ee,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});hJ.displayName="@mantine/core/SliderRoot";const oL=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:b}=p5(),[w,E]=N.useState(!1),S=l||s||w||h&&p;return _.jsxs(Ee,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{E(!0),typeof f=="function"&&f()},onBlur:()=>{E(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx($0,{mounted:i!=null&&!!S,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...b("label",{style:T}),children:i})})]})});oL.displayName="@mantine/core/SliderThumb";function aL({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function iat({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function DCe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=p5();if(!e)return null;const u=e.map((l,c)=>N.createElement(Ee,{...a("markWrapper"),__vars:{"--mark-offset":`${aL({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ee,{...a("mark"),mod:{filled:iat({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}DCe.displayName="@mantine/core/SliderMarks";function pJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=p5();return _.jsx(_.Fragment,{children:_.jsx(Ee,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ee,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ee,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(DCe,{...a,offset:i,disabled:r,inverted:s})]})})})}pJ.displayName="@mantine/core/SliderTrack";function rq({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Of(e,t){return parseFloat(e.toFixed(t))}function OCe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var m5={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const sat={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},oat=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Cn(t,"slider-size"),"--slider-color":n?Ei(n,e):void 0,"--slider-radius":i===void 0?void 0:Di(i),"--slider-thumb-size":r!==void 0?Fe(r):"calc(var(--slider-size) * 2)"}}),g5=Ye((e,t)=>{const n=Oe("Slider",sat,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:S,disabled:T,unstyled:C,scale:I,inverted:R,className:P,style:D,vars:L,hiddenInputProps:M,...F}=n,z=Nt({name:"Slider",props:n,classes:m5,classNames:r,className:P,styles:i,style:D,vars:L,varsResolver:oat,unstyled:C}),{dir:B}=Sm(),[H,q]=N.useState(!1),[Y,$]=_o({value:typeof s=="number"?Op(s,l,c):s,defaultValue:typeof h=="number"?Op(h,l,c):h,finalValue:Op(0,l,c),onChange:o}),W=N.useRef(Y),X=N.useRef(),V=N.useRef(),K=aL({value:Y,min:l,max:c}),J=I(Y),ue=typeof g=="function"?g(J):g,_e=d??OCe(f),be=N.useCallback(({x:Re})=>{if(!T){const ft=rq({value:Re,min:l,max:c,step:f,precision:_e});$(ft),W.current=ft}},[T,l,c,f,_e,$]),{ref:xe,active:ke}=TSe(be,{onScrubEnd:()=>a==null?void 0:a(W.current)},B),je=Re=>{var ft,Ze,It,bt,Ae,Be;if(!T)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(ft=V.current)==null||ft.focus();const st=Of(Math.min(Math.max(Y+f,l),c),_e);$(st),a==null||a(st);break}case"ArrowRight":{Re.preventDefault(),(Ze=V.current)==null||Ze.focus();const st=Of(Math.min(Math.max(B==="rtl"?Y-f:Y+f,l),c),_e);$(st),a==null||a(st);break}case"ArrowDown":{Re.preventDefault(),(It=V.current)==null||It.focus();const st=Of(Math.min(Math.max(Y-f,l),c),_e);$(st),a==null||a(st);break}case"ArrowLeft":{Re.preventDefault(),(bt=V.current)==null||bt.focus();const st=Of(Math.min(Math.max(B==="rtl"?Y+f:Y-f,l),c),_e);$(st),a==null||a(st);break}case"Home":{Re.preventDefault(),(Ae=V.current)==null||Ae.focus(),$(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Be=V.current)==null||Be.focus(),$(c),a==null||a(c);break}}};return _.jsx(PCe,{value:{getStyles:z},children:_.jsxs(hJ,{...F,ref:oo(t,X),onKeyDownCapture:je,onMouseDownCapture:()=>{var Re;return(Re=X.current)==null?void 0:Re.focus()},size:u,disabled:T,children:[_.jsx(pJ,{inverted:R,offset:0,filled:K,marks:m,min:l,max:c,value:J,disabled:T,containerProps:{ref:xe,onMouseEnter:E?()=>q(!0):void 0,onMouseLeave:E?()=>q(!1):void 0},children:_.jsx(oL,{max:c,min:l,value:J,position:K,dragging:ke,label:ue,ref:V,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:H,disabled:T,children:S})}),_.jsx("input",{type:"hidden",name:p,value:J,...M})]})})});g5.classes=m5;g5.displayName="@mantine/core/Slider";function aat(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const uat=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Cn(t,"slider-size"),"--slider-color":n?Ei(n,e):void 0,"--slider-radius":i===void 0?void 0:Di(i),"--slider-thumb-size":r!==void 0?Fe(r):"calc(var(--slider-size) * 2)"}}),lat={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},tT=Ye((e,t)=>{const n=Oe("RangeSlider",lat,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:b,labelTransitionProps:w,labelAlwaysOn:E,thumbFromLabel:S,thumbToLabel:T,showLabelOnHover:C,thumbChildren:I,disabled:R,unstyled:P,scale:D,inverted:L,className:M,style:F,vars:z,hiddenInputProps:B,...H}=n,q=Nt({name:"Slider",props:n,classes:m5,classNames:r,className:M,styles:i,style:F,vars:z,varsResolver:uat,unstyled:P}),{dir:Y}=Sm(),[$,W]=N.useState(-1),[X,V]=N.useState(!1),[K,J]=_o({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ue=N.useRef(K),_e=N.useRef([]),be=N.useRef(void 0),xe=[aL({value:K[0],min:l,max:c}),aL({value:K[1],min:l,max:c})],ke=p??OCe(h),je=ot=>{J(ot),ue.current=ot};N.useEffect(()=>{Array.isArray(s)&&(ue.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(ot,Se,kt)=>{const Rt=[...ue.current];Rt[Se]=ot,Se===0&&(ot>Rt[1]-(f-1e-9)&&(Rt[1]=Math.min(ot+f,c)),ot>(c-(f-1e-9)||l)&&(Rt[Se]=ue.current[Se]),Rt[1]-ot>d&&(Rt[1]=ot+d)),Se===1&&(ot<Rt[0]+f&&(Rt[0]=Math.max(ot-f,l)),ot<Rt[0]+f&&(Rt[Se]=ue.current[Se]),ot-Rt[0]>d&&(Rt[0]=ot-d)),Rt[0]=Of(Rt[0],ke),Rt[1]=Of(Rt[1],ke),je(Rt),kt&&(a==null||a(ue.current))},ft=ot=>{if(!R){const Se=rq({value:ot,min:l,max:c,step:h,precision:ke});Re(Se,be.current,!1)}},{ref:Ze,active:It}=TSe(({x:ot})=>ft(ot),{onScrubEnd:()=>a==null?void 0:a(ue.current)},Y);function bt(ot){be.current=ot}const Ae=ot=>{Ze.current.focus();const Se=Ze.current.getBoundingClientRect(),kt=aat(ot.nativeEvent),Rt=rq({value:kt-Se.left,max:c,min:l,step:h,containerWidth:Se.width}),Te=Math.abs(K[0]-Rt)>Math.abs(K[1]-Rt)?1:0,$e=Y==="ltr"?Te:Te===1?0:1;be.current=$e},Be=()=>$!==1&&$!==0?(W(0),0):$,st=ot=>{if(!R)switch(ot.key){case"ArrowUp":{ot.preventDefault();const Se=Be();_e.current[Se].focus(),Re(Of(Math.min(Math.max(ue.current[Se]+h,l),c),ke),Se,!0);break}case"ArrowRight":{ot.preventDefault();const Se=Be();_e.current[Se].focus(),Re(Of(Math.min(Math.max(Y==="rtl"?ue.current[Se]-h:ue.current[Se]+h,l),c),ke),Se,!0);break}case"ArrowDown":{ot.preventDefault();const Se=Be();_e.current[Se].focus(),Re(Of(Math.min(Math.max(ue.current[Se]-h,l),c),ke),Se,!0);break}case"ArrowLeft":{ot.preventDefault();const Se=Be();_e.current[Se].focus(),Re(Of(Math.min(Math.max(Y==="rtl"?ue.current[Se]+h:ue.current[Se]-h,l),c),ke),Se,!0);break}}},_t={max:c,min:l,size:u,labelTransitionProps:w,labelAlwaysOn:E,onBlur:()=>W(-1)},jt=Array.isArray(I);return _.jsx(PCe,{value:{getStyles:q},children:_.jsxs(hJ,{...H,size:u,ref:t,disabled:R,children:[_.jsxs(pJ,{offset:xe[0],marksOffset:K[0],filled:xe[1]-xe[0],marks:y,inverted:L,min:l,max:c,value:K[1],disabled:R,containerProps:{ref:Ze,onMouseEnter:C?()=>V(!0):void 0,onMouseLeave:C?()=>V(!1):void 0,onTouchStartCapture:Ae,onTouchEndCapture:()=>{be.current=-1},onMouseDownCapture:Ae,onMouseUpCapture:()=>{be.current=-1},onKeyDownCapture:st},children:[_.jsx(oL,{..._t,value:D(K[0]),position:xe[0],dragging:It,label:typeof b=="function"?b(Of(D(K[0]),ke)):b,ref:ot=>{_e.current[0]=ot},thumbLabel:S,onMouseDown:()=>bt(0),onFocus:()=>W(0),showLabelOnHover:C,isHovered:X,disabled:R,children:jt?I[0]:I}),_.jsx(oL,{..._t,thumbLabel:T,value:D(K[1]),position:xe[1],dragging:It,label:typeof b=="function"?b(Of(D(K[1]),ke)):b,ref:ot=>{_e.current[1]=ot},onMouseDown:()=>bt(1),onFocus:()=>W(1),showLabelOnHover:C,isHovered:X,disabled:R,children:jt?I[1]:I})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:K[0],...B}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:K[1],...B})]})})});tT.classes=m5;tT.displayName="@mantine/core/RangeSlider";const cat={},Hc=Ye((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Oe("Space",cat,e);return _.jsx(Ee,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Hc.displayName="@mantine/core/Space";var $Ce={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const fat={maxHeight:100,initialState:!1},dat=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),mJ=Ye((e,t)=>{const n=Oe("Spoiler",fat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,b=Nt({name:"Spoiler",classes:$Ce,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dat}),w=ku(g),E=`${w}-region`,[S,T]=N.useState(l),{ref:C,height:I}=zJe(),R=S?f:d,P=R!==null&&c<I;return _.jsxs(Ee,{...b("root"),id:w,ref:t,"data-has-spoiler":P||void 0,...y,children:[P&&_.jsx(Uw,{component:"button",type:"button",ref:p,onClick:()=>T(D=>!D),"aria-expanded":S,"aria-controls":E,...b("control"),children:R}),_.jsx("div",{...b("content",{style:{maxHeight:S?I?Fe(I):void 0:Fe(c)}}),"data-reduce-motion":!0,role:"region",id:E,children:_.jsx("div",{ref:C,children:h})})]})});mJ.classes=$Ce;mJ.displayName="@mantine/core/Spoiler";var MCe={root:"m_6d731127"};const hat={gap:"md",align:"stretch",justify:"flex-start"},pat=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":to(t),"--stack-align":n,"--stack-justify":r}}),el=Ye((e,t)=>{const n=Oe("Stack",hat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Nt({name:"Stack",props:n,classes:MCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pat});return _.jsx(Ee,{ref:t,...p("root"),variant:d,...h})});el.classes=MCe;el.displayName="@mantine/core/Stack";const LCe=N.createContext(null),mat=LCe.Provider,gat=()=>N.useContext(LCe),yat={},gJ=Ye((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Oe("SwitchGroup",yat,e),[c,f]=_o({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(mat,{value:{value:c,onChange:d,size:s},children:_.jsx(os.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(jQ,{role:"group",children:a})})})});gJ.classes=os.Wrapper.classes;gJ.displayName="@mantine/core/SwitchGroup";var FCe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const vat={labelPosition:"right"},bat=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Di(t),"--switch-height":Cn(r,"switch-height"),"--switch-width":Cn(r,"switch-width"),"--switch-thumb-size":Cn(r,"switch-thumb-size"),"--switch-label-font-size":Cn(r,"switch-label-font-size"),"--switch-track-label-padding":Cn(r,"switch-track-label-padding"),"--switch-color":n?Ei(n,e):void 0}}),fS=Ye((e,t)=>{const n=Oe("Switch",vat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:b,checked:w,defaultChecked:E,onChange:S,labelPosition:T,description:C,error:I,disabled:R,variant:P,rootRef:D,mod:L,...M}=n,F=gat(),z=p||(F==null?void 0:F.size),B=Nt({name:"Switch",props:n,classes:FCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bat}),{styleProps:H,rest:q}=Fw(M),Y=ku(h),$=F?{checked:F.value.includes(q.value),onChange:F.onChange}:{},[W,X]=_o({value:$.checked??w,defaultValue:E,finalValue:!1});return _.jsxs(H4,{...B("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Y,size:z,labelPosition:T,label:c,description:C,error:I,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":$.checked||void 0,variant:P,ref:D,mod:L,...H,...g,children:[_.jsx("input",{...q,disabled:R,checked:W,onChange:V=>{var K;F?(K=$.onChange)==null||K.call($,V):S==null||S(V),X(V.currentTarget.checked)},id:Y,ref:t,type:"checkbox",role:"switch",...B("input")}),_.jsxs(Ee,{"aria-hidden":"true",mod:{error:I,"label-position":T},...B("track"),children:[_.jsx(Ee,{component:"span",mod:"reduce-motion",...B("thumb"),children:b}),_.jsx("span",{...B("trackLabel"),children:W?d:f})]})]})});fS.classes={...FCe,...VTe};fS.displayName="@mantine/core/Switch";fS.Group=gJ;const[_at,wat]=ga("Table component was not found in the tree");var WN={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function xat(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Vw(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Ye((i,s)=>{const o=Oe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=wat();return _.jsx(Ee,{component:e,ref:s,...xat(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=WN,r}const iq=Vw("th",{columnBorder:!0}),jCe=Vw("td",{columnBorder:!0}),E$=Vw("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),BCe=Vw("thead",{stickyHeader:!0}),UCe=Vw("tbody"),zCe=Vw("tfoot"),VCe=Vw("caption",{captionSide:!0});function yJ({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(VCe,{children:e.caption}),e.head&&_.jsx(BCe,{children:_.jsx(E$,{children:e.head.map((t,n)=>_.jsx(iq,{children:t},n))})}),e.body&&_.jsx(UCe,{children:e.body.map((t,n)=>_.jsx(E$,{children:t.map((r,i)=>_.jsx(jCe,{children:r},i))},n))}),e.foot&&_.jsx(zCe,{children:_.jsx(E$,{children:e.foot.map((t,n)=>_.jsx(iq,{children:t},n))})})]})}yJ.displayName="@mantine/core/TableDataRenderer";const Eat={type:"scrollarea"},Sat=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Fe(t),"--table-overflow":n==="native"?"auto":void 0}}),vJ=Ye((e,t)=>{const n=Oe("TableScrollContainer",Eat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Nt({name:"TableScrollContainer",classes:WN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sat,rootSelector:"scrollContainer"});return _.jsx(Ee,{component:f==="scrollarea"?o0:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});vJ.classes=WN;vJ.displayName="@mantine/core/TableScrollContainer";const Tat={withRowBorders:!0,verticalSpacing:7},Cat=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":to(r),"--table-vertical-spacing":to(i),"--table-border-color":s?Ei(s,e):void 0,"--table-striped-color":u&&o?Ei(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Ei(a,e):void 0,"--table-sticky-header-offset":f?Fe(c):void 0}}),un=Ye((e,t)=>{const n=Oe("Table",Tat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:b,borderColor:w,layout:E,variant:S,data:T,children:C,stickyHeader:I,stickyHeaderOffset:R,mod:P,...D}=n,L=Nt({name:"Table",props:n,className:i,style:s,classes:WN,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:Cat});return _.jsx(_at,{value:{getStyles:L,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ee,{component:"table",variant:S,ref:t,mod:[{"data-with-table-border":b},P],...L("table"),...D,children:C||!!T&&_.jsx(yJ,{data:T})})})});un.classes=WN;un.displayName="@mantine/core/Table";un.Td=jCe;un.Th=iq;un.Tr=E$;un.Thead=BCe;un.Tbody=UCe;un.Tfoot=zCe;un.Caption=VCe;un.ScrollContainer=vJ;un.DataRenderer=yJ;const[Aat,bJ]=ga("Tabs component was not found in the tree");var GN={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Iat={},_J=Ye((e,t)=>{const n=Oe("TabsList",Iat,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=bJ();return _.jsx(Ee,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});_J.classes=GN;_J.displayName="@mantine/core/TabsList";const kat={},wJ=Ye((e,t)=>{const n=Oe("TabsPanel",kat,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=bJ(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ee,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});wJ.classes=GN;wJ.displayName="@mantine/core/TabsPanel";const Rat={},xJ=Ye((e,t)=>{const n=Oe("TabsTab",Rat,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,b=ao(),{dir:w}=Sm(),E=bJ(),S=a===E.value,T=I=>{E.onChange(E.allowTabDeactivation&&a===E.value?null:a),u==null||u(I)},C={classNames:h,styles:p,props:n};return _.jsxs(bo,{...y,...E.getStyles("tab",{className:r,style:d,variant:E.variant,...C}),disabled:c,unstyled:E.unstyled,variant:E.variant,mod:[{active:S,disabled:c,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},g],ref:t,role:"tab",id:E.getTabId(a),"aria-selected":S,tabIndex:S||E.value===null?0:-1,"aria-controls":E.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Ei(f,b):void 0},onKeyDown:NX({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:w,onKeyDown:l}),children:[o&&_.jsx("span",{...E.getStyles("tabSection",C),"data-position":"left",children:o}),i&&_.jsx("span",{...E.getStyles("tabLabel",C),children:i}),s&&_.jsx("span",{...E.getStyles("tabSection",C),"data-position":"right",children:s})]})});xJ.classes=GN;xJ.displayName="@mantine/core/TabsTab";const Pde="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Nat={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Pat=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Di(t),"--tabs-color":Ei(n,e),"--tabs-text-color":hC(r,e)?I1({color:n,theme:e,autoContrast:r}):void 0}}),Qs=Ye((e,t)=>{const n=Oe("Tabs",Nat,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:b,styles:w,unstyled:E,className:S,style:T,vars:C,autoContrast:I,mod:R,...P}=n,D=ku(l),[L,M]=_o({value:i,defaultValue:r,finalValue:null,onChange:s}),F=Nt({name:"Tabs",props:n,classes:GN,className:S,style:T,classNames:b,styles:w,unstyled:E,vars:C,varsResolver:Pat});return _.jsx(Aat,{value:{placement:g,value:L,orientation:o,id:D,loop:u,activateTabWithKeyboard:c,getTabId:JM(`${D}-tab`,Pde),getPanelId:JM(`${D}-panel`,Pde),onChange:M,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:E,getStyles:F},children:_.jsx(Ee,{ref:t,id:D,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},R],...F("root"),...P,children:a})})});Qs.classes=GN;Qs.displayName="@mantine/core/Tabs";Qs.Tab=xJ;Qs.Panel=wJ;Qs.List=_J;const Dat={},Pg=Ye((e,t)=>{const n=Oe("TextInput",Dat,e);return _.jsx(gd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Pg.classes=gd.classes;Pg.displayName="@mantine/core/TextInput";const Oat=["h1","h2","h3","h4","h5","h6"];function $at(e,t){const n=t!==void 0?t:`h${e}`;return Oat.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Fe(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var HCe={root:"m_8a5d1357"};const Mat={order:1},Lat=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=$at(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},vs=Ye((e,t)=>{const n=Oe("Title",Mat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Nt({name:"Title",props:n,classes:HCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Lat});return[1,2,3,4,5,6].includes(u)?_.jsx(Ee,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});vs.classes=HCe;vs.displayName="@mantine/core/Title";function Fat(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function jat(e){return N.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Bat(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Uat=()=>Fat({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Hw=Uat(),zat=(e=Hw)=>jat(e);function SC(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Bat(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Vat(e,t=Hw){const n=e.id||uS();return SC(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function qCe(e,t=Hw){return SC(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Hat(e,t=Hw){return SC(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function qat(e=Hw){SC(e,()=>[])}function Wat(e=Hw){SC(e,t=>t.slice(0,e.getState().limit))}const qw={show:Vat,hide:qCe,update:Hat,clean:qat,cleanQueue:Wat,updateState:SC};function sq(){return sq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sq.apply(null,arguments)}function WCe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function oq(e,t){return oq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oq(e,t)}function GCe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,oq(e,t)}var YCe={exports:{}},Gat="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yat=Gat,Kat=Yat;function KCe(){}function XCe(){}XCe.resetWarningCache=KCe;var Xat=function(){function e(r,i,s,o,a,u){if(u!==Kat){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:XCe,resetWarningCache:KCe};return n.PropTypes=n,n};YCe.exports=Xat();var Qat=YCe.exports;const Dde=cf(Qat),Ode={disabled:!1},uL=ci.createContext(null);var Jat=function(t){return t.scrollTop},J2="unmounted",$b="exited",Mb="entering",gE="entered",aq="exiting",B0=function(e){GCe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=$b,s.appearStatus=Mb):u=gE:r.unmountOnExit||r.mountOnEnter?u=J2:u=$b,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===J2?{status:$b}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Mb&&o!==gE&&(s=Mb):(o===Mb||o===gE)&&(s=aq)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Mb){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Q2.findDOMNode(this);o&&Jat(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$b&&this.setState({status:J2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[Q2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Ode.disabled){this.safeSetState({status:gE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Mb},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:gE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Q2.findDOMNode(this);if(!s||Ode.disabled){this.safeSetState({status:$b},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:aq},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:$b},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Q2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===J2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=WCe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ci.createElement(uL.Provider,{value:null},typeof o=="function"?o(i,a):ci.cloneElement(ci.Children.only(o),a))},t}(ci.Component);B0.contextType=uL;B0.propTypes={};function Wx(){}B0.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Wx,onEntering:Wx,onEntered:Wx,onExit:Wx,onExiting:Wx,onExited:Wx};B0.UNMOUNTED=J2;B0.EXITED=$b;B0.ENTERING=Mb;B0.ENTERED=gE;B0.EXITING=aq;function Zat(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EJ(e,t){var n=function(s){return t&&N.isValidElement(s)?t(s):s},r=Object.create(null);return e&&N.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function eut(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function h_(e,t,n){return n[t]!=null?n[t]:e.props[t]}function tut(e,t){return EJ(e.children,function(n){return N.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:h_(n,"appear",e),enter:h_(n,"enter",e),exit:h_(n,"exit",e)})})}function nut(e,t,n){var r=EJ(e.children),i=eut(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=N.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:h_(o,"exit",e),enter:h_(o,"enter",e)}):!u&&a&&!c?i[s]=N.cloneElement(o,{in:!1}):u&&a&&N.isValidElement(l)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:h_(o,"exit",e),enter:h_(o,"enter",e)}))}}),i}var rut=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},iut={component:"div",childFactory:function(t){return t}},Ny=function(e){GCe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Zat(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?tut(i,a):nut(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=EJ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=sq({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=WCe(i,["component","childFactory"]),u=this.state.contextValue,l=rut(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ci.createElement(uL.Provider,{value:u},l):ci.createElement(uL.Provider,{value:u},ci.createElement(s,a,l))},t}(ci.Component);Ny.propTypes={};Ny.defaultProps=iut;const QCe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function sut(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),QCe.reduce((n,r)=>(n[r]=[],n),{}))}const $de={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},out={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function aut({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:$de[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:out[o]},l={opacity:0,maxHeight:0,transform:$de[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function uut(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const JCe=N.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=uut(n,e.autoClose),l=N.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return N.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),N.useEffect(()=>(d(),c),[u]),_.jsx(iJ,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});JCe.displayName="@mantine/notifications/NotificationContainer";var ZCe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const lut=B0,cut={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:hf("overlay"),store:Hw,withinPortal:!0},fut=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Fe(n)}}),U0=Ye((e,t)=>{const n=Oe("Notifications",cut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:b,...w}=n,E=ao(),S=zat(g),T=FJe(),C=D4(),I=N.useRef({}),R=N.useRef(0),D=(E.respectReducedMotion?C:!1)?1:f,L=Nt({name:"Notifications",classes:ZCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fut});N.useEffect(()=>{g==null||g.updateState(z=>({...z,limit:p||5,defaultPosition:l}))},[p,l]),im(()=>{S.notifications.length>R.current&&setTimeout(()=>T(),0),R.current=S.notifications.length},[S.notifications]);const M=sut(S.notifications,l),F=QCe.reduce((z,B)=>(z[B]=M[B].map(({style:H,...q})=>_.jsx(lut,{timeout:D,onEnter:()=>I.current[q.id].offsetHeight,nodeRef:{current:I.current[q.id]},children:Y=>_.jsx(JCe,{ref:$=>{I.current[q.id]=$},data:q,onHide:$=>qCe($,g),autoClose:c,...L("notification",{style:{...aut({state:Y,position:B,transitionDuration:D,maxHeight:h}),...H}})})},q.id)),z),{});return _.jsxs(yC,{withinPortal:b,...y,children:[_.jsx(Ee,{...L("root"),"data-position":"top-center",ref:t,...w,children:_.jsx(Ny,{children:F["top-center"]})}),_.jsx(Ee,{...L("root"),"data-position":"top-left",...w,children:_.jsx(Ny,{children:F["top-left"]})}),_.jsx(Ee,{...L("root"),"data-position":"top-right",...w,children:_.jsx(Ny,{children:F["top-right"]})}),_.jsx(Ee,{...L("root"),"data-position":"bottom-right",...w,children:_.jsx(Ny,{children:F["bottom-right"]})}),_.jsx(Ee,{...L("root"),"data-position":"bottom-left",...w,children:_.jsx(Ny,{children:F["bottom-left"]})}),_.jsx(Ee,{...L("root"),"data-position":"bottom-center",...w,children:_.jsx(Ny,{children:F["bottom-center"]})})]})});U0.classes=ZCe;U0.displayName="@mantine/notifications/Notifications";U0.show=qw.show;U0.hide=qw.hide;U0.update=qw.update;U0.clean=qw.clean;U0.cleanQueue=qw.cleanQueue;U0.updateState=qw.updateState;const eAe=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),xo=()=>N.useContext(eAe);function dut({children:e}){const[t,n]=N.useState(void 0),r=N.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(eAe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fR(){return fR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fR.apply(this,arguments)}var Qy;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qy||(Qy={}));const Mde="popstate";function hut(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return uq("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nAe(i)}return mut(t,n,null,e)}function no(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tAe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function put(){return Math.random().toString(36).substr(2,8)}function Lde(e,t){return{usr:e.state,key:e.key,idx:t}}function uq(e,t,n,r){return n===void 0&&(n=null),fR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?TC(t):t,{state:n,key:t&&t.key||r||put()})}function nAe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function TC(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function mut(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qy.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(fR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Qy.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Qy.Push;let b=uq(m.location,g,y);l=c()+1;let w=Lde(b,l),E=m.createHref(b);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Qy.Replace;let b=uq(m.location,g,y);l=c();let w=Lde(b,l),E=m.createHref(b);o.replaceState(w,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:nAe(g);return b=b.replace(/ $/,"%20"),no(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Mde,f),u=g,()=>{i.removeEventListener(Mde,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Fde;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fde||(Fde={}));function gut(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?TC(t):t,i=sAe(r.pathname||"/",n);if(i==null)return null;let s=rAe(e);yut(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=kut(i);o=Cut(s[a],u)}return o}function rAe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(no(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=bv([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(no(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),rAe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:Sut(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of iAe(s.path))i(s,o,u)}),t}function iAe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iAe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function yut(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Tut(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vut=/^:[\w-]+$/,but=3,_ut=2,wut=1,xut=10,Eut=-2,jde=e=>e==="*";function Sut(e,t){let n=e.split("/"),r=n.length;return n.some(jde)&&(r+=Eut),t&&(r+=_ut),n.filter(i=>!jde(i)).reduce((i,s)=>i+(vut.test(s)?but:s===""?wut:xut),r)}function Tut(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Cut(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=Aut({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:bv([i,c.pathname]),pathnameBase:Dut(bv([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=bv([i,c.pathnameBase]))}return s}function Aut(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Iut(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function Iut(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),tAe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function kut(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tAe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function sAe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Rut(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?TC(e):e;return{pathname:n?n.startsWith("/")?n:Nut(n,t):t,search:Out(r),hash:$ut(i)}}function Nut(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function KU(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Put(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function SJ(e,t){let n=Put(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TJ(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=TC(e):(i=fR({},e),no(!i.pathname||!i.pathname.includes("?"),KU("?","pathname","search",i)),no(!i.pathname||!i.pathname.includes("#"),KU("#","pathname","hash",i)),no(!i.search||!i.search.includes("#"),KU("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Rut(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const bv=e=>e.join("/").replace(/\/\/+/g,"/"),Dut=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Out=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$ut=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Mut(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oAe=["post","put","patch","delete"];new Set(oAe);const Lut=["get",...oAe];new Set(Lut);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}const CJ=N.createContext(null),Fut=N.createContext(null),Ww=N.createContext(null),y5=N.createContext(null),Cm=N.createContext({outlet:null,matches:[],isDataRoute:!1}),aAe=N.createContext(null);function uAe(e,t){let{relative:n}={};CC()||no(!1);let{basename:r,navigator:i}=N.useContext(Ww),{hash:s,pathname:o,search:a}=zut(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:bv([r,o])),i.createHref({pathname:u,search:a,hash:s})}function CC(){return N.useContext(y5)!=null}function N1(){return CC()||no(!1),N.useContext(y5).location}function lAe(e){N.useContext(Ww).static||N.useLayoutEffect(e)}function Fh(){let{isDataRoute:e}=N.useContext(Cm);return e?Zut():jut()}function jut(){CC()||no(!1);let e=N.useContext(CJ),{basename:t,future:n,navigator:r}=N.useContext(Ww),{matches:i}=N.useContext(Cm),{pathname:s}=N1(),o=JSON.stringify(SJ(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return lAe(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=TJ(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:bv([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const But=N.createContext(null);function Uut(e){let t=N.useContext(Cm).outlet;return t&&N.createElement(But.Provider,{value:e},t)}function c0(){let{matches:e}=N.useContext(Cm),t=e[e.length-1];return t?t.params:{}}function zut(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(Ww),{matches:i}=N.useContext(Cm),{pathname:s}=N1(),o=JSON.stringify(SJ(i,r.v7_relativeSplatPath));return N.useMemo(()=>TJ(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function cAe(e,t){return Vut(e,t)}function Vut(e,t,n,r){CC()||no(!1);let{navigator:i}=N.useContext(Ww),{matches:s}=N.useContext(Cm),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=N1(),c;if(t){var f;let g=typeof t=="string"?TC(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||no(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=gut(e,{pathname:h}),m=Yut(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:bv([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:bv([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(y5.Provider,{value:{location:dR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qy.Pop}},m):m}function Hut(){let e=Jut(),t=Mut(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const qut=N.createElement(Hut,null);class Wut extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(Cm.Provider,{value:this.props.routeContext},N.createElement(aAe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gut(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(CJ);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Cm.Provider,{value:t},r)}function Yut(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||no(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||qut,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),b=()=>{let w;return h?w=m:p?w=g:f.route.Component?w=N.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=c,N.createElement(Gut,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(Wut,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var fAe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fAe||{}),lL=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lL||{});function Kut(e){let t=N.useContext(CJ);return t||no(!1),t}function Xut(e){let t=N.useContext(Fut);return t||no(!1),t}function Qut(e){let t=N.useContext(Cm);return t||no(!1),t}function dAe(e){let t=Qut(),n=t.matches[t.matches.length-1];return n.route.id||no(!1),n.route.id}function Jut(){var e;let t=N.useContext(aAe),n=Xut(lL.UseRouteError),r=dAe(lL.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Zut(){let{router:e}=Kut(fAe.UseNavigateStable),t=dAe(lL.UseNavigateStable),n=N.useRef(!1);return lAe(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,dR({fromRouteId:t},s)))},[e,t])}function AJ(e){let{to:t,replace:n,state:r,relative:i}=e;CC()||no(!1);let{future:s,static:o}=N.useContext(Ww),{matches:a}=N.useContext(Cm),{pathname:u}=N1(),l=Fh(),c=TJ(t,SJ(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function elt(e){return Uut(e.context)}function cg(e){no(!1)}function tlt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Qy.Pop,navigator:s,static:o=!1,future:a}=e;CC()&&no(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:dR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=TC(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=sAe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(Ww.Provider,{value:l},N.createElement(y5.Provider,{children:n,value:m}))}function nlt(e){let{children:t,location:n}=e;return cAe(lq(t),n)}new Promise(()=>{});function lq(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,lq(r.props.children,s));return}r.type!==cg&&no(!1),!r.props.index||!r.props.children||no(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lq(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cq(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function rlt(e,t){let n=cq(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const ilt="6";try{window.__reactRouterVersion=ilt}catch{}const slt="startTransition",Bde=CM[slt];function olt(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=hut({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&Bde?Bde(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(tlt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Ude;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ude||(Ude={}));var zde;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zde||(zde={}));function IJ(e){let t=N.useRef(cq(e)),n=N.useRef(!1),r=N1(),i=N.useMemo(()=>rlt(r.search,n.current?null:t.current),[r.search]),s=Fh(),o=N.useCallback((a,u)=>{const l=cq(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const kJ=N.createContext(null);kJ.displayName="@mantine/modals/ModalsContext";function alt(){const e=N.useContext(kJ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function ult({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=alt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ee,{mb:"md",children:l}),_.jsxs(Pi,{justify:"flex-end",...o,children:[_.jsx(wn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(wn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[llt,v5]=QJe("mantine-modals");v5("openModal");v5("closeModal");v5("closeAllModals");const Vde=v5("openConfirmModal");function Hde(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function clt(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Hde(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Hde(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function flt(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function dlt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(clt,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const b=g||uS();return s({type:"OPEN",modal:{id:b,type:"content",props:y}}),b},[s]),l=N.useCallback(({modalId:g,...y})=>{const b=g||uS();return s({type:"OPEN",modal:{id:b,type:"confirm",props:y}}),b},[s]),c=N.useCallback((g,{modalId:y,...b})=>{const w=y||uS();return s({type:"OPEN",modal:{id:w,type:"context",props:b,ctx:g}}),w},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);llt({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...b}=g.props,w=r[g.ctx];return{modalProps:b,content:_.jsx(w,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:b}=flt(g.props);return{modalProps:y,content:_.jsx(ult,{...b,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...b}=g.props;return{modalProps:b,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(kJ.Provider,{value:d,children:[_.jsx(Cs,{zIndex:hf("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hlt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...hlt[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var plt=Jn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mlt=Jn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cL=Jn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var glt=Jn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ylt=Jn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vlt=Jn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var blt=Jn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _lt=Jn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wlt=Jn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xlt=Jn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hAe=Jn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Elt=Jn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qde=Jn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Slt=Jn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tlt=Jn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Clt=Jn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Alt=Jn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ilt=Jn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var klt=Jn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rlt=Jn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RJ=Jn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nlt=Jn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Plt=Jn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dlt=Jn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Olt=Jn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $lt=Jn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mlt=Jn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pAe=Jn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Llt=Jn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Flt=Jn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jlt=Jn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Blt=Jn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ult=Jn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mAe=Jn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zlt=Jn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gAe=Jn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vlt=Jn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yAe=Jn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NJ=Jn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PJ=Jn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hlt=Jn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function vAe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const il="/study/";function Wde(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function bAe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const qlt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Wlt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Glt={};function Gde(e,t){return(Glt.jsx?Wlt:qlt).test(e)}const Ylt=/[ \t\n\f\r]/g;function Klt(e){return typeof e=="object"?e.type==="text"?Yde(e.value):!1:Yde(e)}function Yde(e){return e.replace(Ylt,"")===""}let YN=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};YN.prototype.property={};YN.prototype.normal={};YN.prototype.space=null;function _Ae(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new YN(n,r,t)}function hR(e){return e.toLowerCase()}let vd=class{constructor(t,n){this.property=t,this.attribute=n}};vd.prototype.space=null;vd.prototype.boolean=!1;vd.prototype.booleanish=!1;vd.prototype.overloadedBoolean=!1;vd.prototype.number=!1;vd.prototype.commaSeparated=!1;vd.prototype.spaceSeparated=!1;vd.prototype.commaOrSpaceSeparated=!1;vd.prototype.mustUseProperty=!1;vd.prototype.defined=!1;let Xlt=0;const Hn=Gw(),po=Gw(),wAe=Gw(),xt=Gw(),zi=Gw(),dS=Gw(),Ac=Gw();function Gw(){return 2**++Xlt}const fq=Object.freeze(Object.defineProperty({__proto__:null,boolean:Hn,booleanish:po,commaOrSpaceSeparated:Ac,commaSeparated:dS,number:xt,overloadedBoolean:wAe,spaceSeparated:zi},Symbol.toStringTag,{value:"Module"})),XU=Object.keys(fq);class DJ extends vd{constructor(t,n,r,i){let s=-1;if(super(t,n),Kde(this,"space",i),typeof r=="number")for(;++s<XU.length;){const o=XU[s];Kde(this,XU[s],(r&fq[o])===fq[o])}}}DJ.prototype.defined=!0;function Kde(e,t,n){n&&(e[t]=n)}const Qlt={}.hasOwnProperty;function AC(e){const t={},n={};let r;for(r in e.properties)if(Qlt.call(e.properties,r)){const i=e.properties[r],s=new DJ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[hR(r)]=r,n[hR(s.attribute)]=r}return new YN(t,n,e.space)}const xAe=AC({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),EAe=AC({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function SAe(e,t){return t in e?e[t]:t}function TAe(e,t){return SAe(e,t.toLowerCase())}const CAe=AC({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:TAe,properties:{xmlns:null,xmlnsXLink:null}}),AAe=AC({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:po,ariaAutoComplete:null,ariaBusy:po,ariaChecked:po,ariaColCount:xt,ariaColIndex:xt,ariaColSpan:xt,ariaControls:zi,ariaCurrent:null,ariaDescribedBy:zi,ariaDetails:null,ariaDisabled:po,ariaDropEffect:zi,ariaErrorMessage:null,ariaExpanded:po,ariaFlowTo:zi,ariaGrabbed:po,ariaHasPopup:null,ariaHidden:po,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:zi,ariaLevel:xt,ariaLive:null,ariaModal:po,ariaMultiLine:po,ariaMultiSelectable:po,ariaOrientation:null,ariaOwns:zi,ariaPlaceholder:null,ariaPosInSet:xt,ariaPressed:po,ariaReadOnly:po,ariaRelevant:null,ariaRequired:po,ariaRoleDescription:zi,ariaRowCount:xt,ariaRowIndex:xt,ariaRowSpan:xt,ariaSelected:po,ariaSetSize:xt,ariaSort:null,ariaValueMax:xt,ariaValueMin:xt,ariaValueNow:xt,ariaValueText:null,role:null}}),Jlt=AC({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:TAe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dS,acceptCharset:zi,accessKey:zi,action:null,allow:null,allowFullScreen:Hn,allowPaymentRequest:Hn,allowUserMedia:Hn,alt:null,as:null,async:Hn,autoCapitalize:null,autoComplete:zi,autoFocus:Hn,autoPlay:Hn,blocking:zi,capture:null,charSet:null,checked:Hn,cite:null,className:zi,cols:xt,colSpan:null,content:null,contentEditable:po,controls:Hn,controlsList:zi,coords:xt|dS,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Hn,defer:Hn,dir:null,dirName:null,disabled:Hn,download:wAe,draggable:po,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Hn,formTarget:null,headers:zi,height:xt,hidden:Hn,high:xt,href:null,hrefLang:null,htmlFor:zi,httpEquiv:zi,id:null,imageSizes:null,imageSrcSet:null,inert:Hn,inputMode:null,integrity:null,is:null,isMap:Hn,itemId:null,itemProp:zi,itemRef:zi,itemScope:Hn,itemType:zi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Hn,low:xt,manifest:null,max:null,maxLength:xt,media:null,method:null,min:null,minLength:xt,multiple:Hn,muted:Hn,name:null,nonce:null,noModule:Hn,noValidate:Hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Hn,optimum:xt,pattern:null,ping:zi,placeholder:null,playsInline:Hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Hn,referrerPolicy:null,rel:zi,required:Hn,reversed:Hn,rows:xt,rowSpan:xt,sandbox:zi,scope:null,scoped:Hn,seamless:Hn,selected:Hn,shadowRootClonable:Hn,shadowRootDelegatesFocus:Hn,shadowRootMode:null,shape:null,size:xt,sizes:null,slot:null,span:xt,spellCheck:po,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xt,step:null,style:null,tabIndex:xt,target:null,title:null,translate:null,type:null,typeMustMatch:Hn,useMap:null,value:po,width:xt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:zi,axis:null,background:null,bgColor:null,border:xt,borderColor:null,bottomMargin:xt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Hn,declare:Hn,event:null,face:null,frame:null,frameBorder:null,hSpace:xt,leftMargin:xt,link:null,longDesc:null,lowSrc:null,marginHeight:xt,marginWidth:xt,noResize:Hn,noHref:Hn,noShade:Hn,noWrap:Hn,object:null,profile:null,prompt:null,rev:null,rightMargin:xt,rules:null,scheme:null,scrolling:po,standby:null,summary:null,text:null,topMargin:xt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Hn,disableRemotePlayback:Hn,prefix:null,property:null,results:xt,security:null,unselectable:null}}),Zlt=AC({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:SAe,properties:{about:Ac,accentHeight:xt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xt,amplitude:xt,arabicForm:null,ascent:xt,attributeName:null,attributeType:null,azimuth:xt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xt,by:null,calcMode:null,capHeight:xt,className:zi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xt,diffuseConstant:xt,direction:null,display:null,dur:null,divisor:xt,dominantBaseline:null,download:Hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:xt,enableBackground:null,end:null,event:null,exponent:xt,externalResourcesRequired:null,fill:null,fillOpacity:xt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dS,g2:dS,glyphName:dS,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xt,horizOriginX:xt,horizOriginY:xt,id:null,ideographic:xt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xt,k:xt,k1:xt,k2:xt,k3:xt,k4:xt,kernelMatrix:Ac,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xt,overlineThickness:xt,paintOrder:null,panose1:null,path:null,pathLength:xt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:zi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xt,pointsAtY:xt,pointsAtZ:xt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ac,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ac,rev:Ac,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ac,requiredFeatures:Ac,requiredFonts:Ac,requiredFormats:Ac,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xt,specularExponent:xt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xt,strikethroughThickness:xt,string:null,stroke:null,strokeDashArray:Ac,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xt,strokeOpacity:xt,strokeWidth:null,style:null,surfaceScale:xt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ac,tabIndex:xt,tableValues:null,target:null,targetX:xt,targetY:xt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ac,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xt,underlineThickness:xt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xt,values:null,vAlphabetic:xt,vMathematical:xt,vectorEffect:null,vHanging:xt,vIdeographic:xt,version:null,vertAdvY:xt,vertOriginX:xt,vertOriginY:xt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),ect=/^data[-\w.:]+$/i,Xde=/-[a-z]/g,tct=/[A-Z]/g;function b5(e,t){const n=hR(t);let r=t,i=vd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ect.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Xde,rct);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Xde.test(s)){let o=s.replace(tct,nct);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=DJ}return new i(r,t)}function nct(e){return"-"+e.toLowerCase()}function rct(e){return e.charAt(1).toUpperCase()}const ict={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},KN=_Ae([EAe,xAe,CAe,AAe,Jlt],"html"),P1=_Ae([EAe,xAe,CAe,AAe,Zlt],"svg");function Qde(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function IAe(e){return e.join(" ").trim()}var kAe={},Jde=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,sct=/\n/g,oct=/^\s*/,act=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,uct=/^:\s*/,lct=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,cct=/^[;\s]*/,fct=/^\s+|\s+$/g,dct=`
`,Zde="/",ehe="*",Xb="",hct="comment",pct="declaration",mct=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(sct);m&&(n+=m.length);var g=p.lastIndexOf(dct);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(oct)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Zde!=e.charAt(0)||ehe!=e.charAt(1))){for(var m=2;Xb!=e.charAt(m)&&(ehe!=e.charAt(m)||Zde!=e.charAt(m+1));)++m;if(m+=2,Xb===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:hct,comment:g})}}function d(){var p=s(),m=u(act);if(m){if(f(),!u(uct))return a("property missing ':'");var g=u(lct),y=p({type:pct,property:the(m[0].replace(Jde,Xb)),value:g?the(g[0].replace(Jde,Xb)):Xb});return u(cct),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function the(e){return e?e.replace(fct,Xb):Xb}var gct=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kAe,"__esModule",{value:!0});var yct=gct(mct);function vct(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,yct.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var nhe=kAe.default=vct;const bct=nhe.default||nhe,_5=RAe("end"),Am=RAe("start");function RAe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function _ct(e){const t=Am(e),n=_5(e);if(t&&n)return{start:t,end:n}}function XI(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?rhe(e.position):"start"in e||"end"in e?rhe(e):"line"in e||"column"in e?dq(e):""}function dq(e){return ihe(e&&e.line)+":"+ihe(e&&e.column)}function rhe(e){return dq(e&&e.start)+"-"+dq(e&&e.end)}function ihe(e){return e&&typeof e=="number"?e:1}class Ru extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=XI(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ru.prototype.file="";Ru.prototype.name="";Ru.prototype.reason="";Ru.prototype.message="";Ru.prototype.stack="";Ru.prototype.column=void 0;Ru.prototype.line=void 0;Ru.prototype.ancestors=void 0;Ru.prototype.cause=void 0;Ru.prototype.fatal=void 0;Ru.prototype.place=void 0;Ru.prototype.ruleId=void 0;Ru.prototype.source=void 0;const OJ={}.hasOwnProperty,wct=new Map,xct=/[A-Z]/g,Ect=/-([a-z])/g,Sct=new Set(["table","tbody","thead","tfoot","tr"]),Tct=new Set(["td","th"]),NAe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Cct(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Oct(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Dct(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?P1:KN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=PAe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function PAe(e,t,n){if(t.type==="element")return Act(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Ict(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Rct(e,t,n);if(t.type==="mdxjsEsm")return kct(e,t);if(t.type==="root")return Nct(e,t,n);if(t.type==="text")return Pct(e,t)}function Act(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=P1,e.schema=i),e.ancestors.push(t);const s=OAe(e,t.tagName,!1),o=$ct(e,t);let a=MJ(e,t);return Sct.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Klt(u):!0})),DAe(e,o,s,t),$J(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Ict(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}pR(e,t.position)}function kct(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);pR(e,t.position)}function Rct(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=P1,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:OAe(e,t.name,!0),o=Mct(e,t),a=MJ(e,t);return DAe(e,o,s,t),$J(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Nct(e,t,n){const r={};return $J(r,MJ(e,t)),e.create(t,e.Fragment,r,n)}function Pct(e,t){return t.value}function DAe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function $J(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Dct(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Oct(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Am(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function $ct(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&OJ.call(t.properties,i)){const s=Lct(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Tct.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Mct(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else pR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else pR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function MJ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:wct;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=PAe(e,s,o);a!==void 0&&n.push(a)}return n}function Lct(e,t,n){const r=b5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?bAe(n):IAe(n)),r.property==="style"){let i=typeof n=="object"?n:Fct(e,String(n));return e.stylePropertyNameCase==="css"&&(i=jct(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ict[r.property]||r.property:r.attribute,n]}}function Fct(e,t){const n={};try{bct(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ru("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=NAe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Ect,Uct)),n[o]=s}}function OAe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Gde(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Gde(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return OJ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);pR(e)}function pR(e,t){const n=new Ru("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=NAe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function jct(e){const t={};let n;for(n in e)OJ.call(e,n)&&(t[Bct(n)]=e[n]);return t}function Bct(e){let t=e.replace(xct,zct);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Uct(e,t){return t.toUpperCase()}function zct(e){return"-"+e.toLowerCase()}const QU={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Vct={};function Hct(e,t){const n=Vct,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return $Ae(e,r,i)}function $Ae(e,t,n){if(qct(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return she(e.children,t,n)}return Array.isArray(e)?she(e,t,n):""}function she(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=$Ae(e[i],t,n);return r.join("")}function qct(e){return!!(e&&typeof e=="object")}const ohe=document.createElement("i");function LJ(e){const t="&"+e+";";ohe.innerHTML=t;const n=ohe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function f0(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Ff(e,t){return e.length>0?(f0(e,e.length,0,t),e):t}const ahe={}.hasOwnProperty;function Wct(e){const t={};let n=-1;for(;++n<e.length;)Gct(t,e[n]);return t}function Gct(e,t){let n;for(n in t){const i=(ahe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){ahe.call(i,o)||(i[o]=[]);const a=s[o];Yct(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Yct(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);f0(e,0,0,r)}function MAe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function hS(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xp=D1(/[A-Za-z]/),jc=D1(/[\dA-Za-z]/),Kct=D1(/[#-'*+\--9=?A-Z^-~]/);function hq(e){return e!==null&&(e<32||e===127)}const pq=D1(/\d/),Xct=D1(/[\dA-Fa-f]/),Qct=D1(/[!-/:-@[-`{-~]/);function Tn(e){return e!==null&&e<-2}function tc(e){return e!==null&&(e<0||e===32)}function li(e){return e===-2||e===-1||e===32}const Jct=D1(new RegExp("\\p{P}|\\p{S}","u")),Zct=D1(/\s/);function D1(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function IC(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&jc(e.charCodeAt(n+1))&&jc(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Hi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return li(u)?(e.enter(n),a(u)):t(u)}function a(u){return li(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const eft={tokenize:tft};function tft(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Hi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Tn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const nft={tokenize:rft},uhe={tokenize:ift};function rft(e){const t=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let S=E,T;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){T=t.events[S][1].end;break}y(r);let C=E;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},T),C++;return f0(t.events,S+1,0,t.events.slice(E)),t.events.length=C,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(uhe,c,f)(w)}function c(w){return i&&b(),y(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function d(w){return t.containerState={},e.attempt(uhe,h,p)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function p(w){if(w===null){i&&b(),y(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(w)}function m(w){if(w===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return Tn(w)?(e.consume(w),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),m)}function g(w,E){const S=t.sliceStream(w);if(E&&S.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(S),t.parser.lazy[w.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const C=t.events.length;let I=C,R,P;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(R){P=t.events[I][1].end;break}R=!0}for(y(r),T=C;T<t.events.length;)t.events[T][1].end=Object.assign({},P),T++;f0(t.events,I+1,0,t.events.slice(C)),t.events.length=T}}function y(w){let E=n.length;for(;E-- >w;){const S=n[E];t.containerState=S[1],S[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function ift(e,t,n){return Hi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function lhe(e){if(e===null||tc(e)||Zct(e))return 1;if(Jct(e))return 2}function FJ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const mq={name:"attention",tokenize:oft,resolveAll:sft};function sft(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);che(f,-u),che(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Ff(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Ff(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Ff(l,FJ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Ff(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Ff(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,f0(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function oft(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=lhe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=lhe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function che(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const aft={name:"autolink",tokenize:uft};function uft(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return xp(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||jc(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||jc(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||hq(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Kct(h)?(e.consume(h),l):n(h)}function c(h){return jc(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||jc(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const w5={tokenize:lft,partial:!0};function lft(e,t,n){return r;function r(s){return li(s)?Hi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Tn(s)?t(s):n(s)}}const LAe={name:"blockQuote",tokenize:cft,continuation:{tokenize:fft},exit:dft};function cft(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return li(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function fft(e,t,n){const r=this;return i;function i(o){return li(o)?Hi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(LAe,t,n)(o)}}function dft(e){e.exit("blockQuote")}const FAe={name:"characterEscape",tokenize:hft};function hft(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Qct(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const jAe={name:"characterReference",tokenize:pft};function pft(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=jc,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Xct,c):(e.enter("characterReferenceValue"),s=7,o=pq,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===jc&&!LJ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const fhe={tokenize:gft,partial:!0},dhe={name:"codeFenced",tokenize:mft,concrete:!0};function mft(e,t,n){const r=this,i={tokenize:S,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),li(T)?Hi(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Tn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(fhe,m,E)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Tn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):li(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Hi(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Tn(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Tn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,E,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&li(T)?Hi(e,b,"linePrefix",s+1)(T):b(T)}function b(T){return T===null||Tn(T)?e.check(fhe,m,E)(T):(e.enter("codeFlowValue"),w(T))}function w(T){return T===null||Tn(T)?(e.exit("codeFlowValue"),b(T)):(e.consume(T),w)}function E(T){return e.exit("codeFenced"),t(T)}function S(T,C,I){let R=0;return P;function P(z){return T.enter("lineEnding"),T.consume(z),T.exit("lineEnding"),D}function D(z){return T.enter("codeFencedFence"),li(z)?Hi(T,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):L(z)}function L(z){return z===a?(T.enter("codeFencedFenceSequence"),M(z)):I(z)}function M(z){return z===a?(R++,T.consume(z),M):R>=o?(T.exit("codeFencedFenceSequence"),li(z)?Hi(T,F,"whitespace")(z):F(z)):I(z)}function F(z){return z===null||Tn(z)?(T.exit("codeFencedFence"),C(z)):I(z)}}}function gft(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const JU={name:"codeIndented",tokenize:vft},yft={tokenize:bft,partial:!0};function vft(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Hi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Tn(l)?e.attempt(yft,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Tn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function bft(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Hi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Tn(o)?i(o):n(o)}}const _ft={name:"codeText",tokenize:Eft,resolve:wft,previous:xft};function wft(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function xft(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Eft(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Tn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Tn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class Sft{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&r2(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),r2(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),r2(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);r2(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);r2(this.left,n.reverse())}}}function r2(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function BAe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new Sft(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Tft(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return f0(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Tft(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),b=s.pop();u.push([b,b+y.length-1]),e.splice(b,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Cft={tokenize:kft,resolve:Ift},Aft={tokenize:Rft,partial:!0};function Ift(e){return BAe(e),e}function kft(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Tn(a)?e.check(Aft,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Rft(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Hi(e,s,"linePrefix")}function s(o){if(o===null||Tn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function UAe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||hq(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Tn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||tc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||hq(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function zAe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Tn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Tn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!li(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function VAe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Tn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Hi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Tn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function QI(e,t){let n;return r;function r(i){return Tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):li(i)?Hi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Nft={name:"definition",tokenize:Dft},Pft={tokenize:Oft,partial:!0};function Dft(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return zAe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=hS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return tc(h)?QI(e,l)(h):l(h)}function l(h){return UAe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Pft,f,f)(h)}function f(h){return li(h)?Hi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Tn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Oft(e,t,n){return r;function r(a){return tc(a)?QI(e,i)(a):n(a)}function i(a){return VAe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return li(a)?Hi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Tn(a)?t(a):n(a)}}const $ft={name:"hardBreakEscape",tokenize:Mft};function Mft(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Tn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Lft={name:"headingAtx",tokenize:jft,resolve:Fft};function Fft(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},f0(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function jft(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||tc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Tn(c)?(e.exit("atxHeading"),t(c)):li(c)?Hi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||tc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Bft=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hhe=["pre","script","style","textarea"],Uft={name:"htmlFlow",tokenize:qft,resolveTo:Hft,concrete:!0},zft={tokenize:Gft,partial:!0},Vft={tokenize:Wft,partial:!0};function Hft(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function qft(e,t,n){const r=this;let i,s,o,a,u;return l;function l(V){return c(V)}function c(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),f}function f(V){return V===33?(e.consume(V),d):V===47?(e.consume(V),s=!0,m):V===63?(e.consume(V),i=3,r.interrupt?t:$):xp(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function d(V){return V===45?(e.consume(V),i=2,h):V===91?(e.consume(V),i=5,a=0,p):xp(V)?(e.consume(V),i=4,r.interrupt?t:$):n(V)}function h(V){return V===45?(e.consume(V),r.interrupt?t:$):n(V)}function p(V){const K="CDATA[";return V===K.charCodeAt(a++)?(e.consume(V),a===K.length?r.interrupt?t:L:p):n(V)}function m(V){return xp(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function g(V){if(V===null||V===47||V===62||tc(V)){const K=V===47,J=o.toLowerCase();return!K&&!s&&hhe.includes(J)?(i=1,r.interrupt?t(V):L(V)):Bft.includes(o.toLowerCase())?(i=6,K?(e.consume(V),y):r.interrupt?t(V):L(V)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):s?b(V):w(V))}return V===45||jc(V)?(e.consume(V),o+=String.fromCharCode(V),g):n(V)}function y(V){return V===62?(e.consume(V),r.interrupt?t:L):n(V)}function b(V){return li(V)?(e.consume(V),b):P(V)}function w(V){return V===47?(e.consume(V),P):V===58||V===95||xp(V)?(e.consume(V),E):li(V)?(e.consume(V),w):P(V)}function E(V){return V===45||V===46||V===58||V===95||jc(V)?(e.consume(V),E):S(V)}function S(V){return V===61?(e.consume(V),T):li(V)?(e.consume(V),S):w(V)}function T(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),u=V,C):li(V)?(e.consume(V),T):I(V)}function C(V){return V===u?(e.consume(V),u=null,R):V===null||Tn(V)?n(V):(e.consume(V),C)}function I(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||tc(V)?S(V):(e.consume(V),I)}function R(V){return V===47||V===62||li(V)?w(V):n(V)}function P(V){return V===62?(e.consume(V),D):n(V)}function D(V){return V===null||Tn(V)?L(V):li(V)?(e.consume(V),D):n(V)}function L(V){return V===45&&i===2?(e.consume(V),B):V===60&&i===1?(e.consume(V),H):V===62&&i===4?(e.consume(V),W):V===63&&i===3?(e.consume(V),$):V===93&&i===5?(e.consume(V),Y):Tn(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(zft,X,M)(V)):V===null||Tn(V)?(e.exit("htmlFlowData"),M(V)):(e.consume(V),L)}function M(V){return e.check(Vft,F,X)(V)}function F(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),z}function z(V){return V===null||Tn(V)?M(V):(e.enter("htmlFlowData"),L(V))}function B(V){return V===45?(e.consume(V),$):L(V)}function H(V){return V===47?(e.consume(V),o="",q):L(V)}function q(V){if(V===62){const K=o.toLowerCase();return hhe.includes(K)?(e.consume(V),W):L(V)}return xp(V)&&o.length<8?(e.consume(V),o+=String.fromCharCode(V),q):L(V)}function Y(V){return V===93?(e.consume(V),$):L(V)}function $(V){return V===62?(e.consume(V),W):V===45&&i===2?(e.consume(V),$):L(V)}function W(V){return V===null||Tn(V)?(e.exit("htmlFlowData"),X(V)):(e.consume(V),W)}function X(V){return e.exit("htmlFlow"),t(V)}}function Wft(e,t,n){const r=this;return i;function i(o){return Tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Gft(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(w5,t,n)}}const Yft={name:"htmlText",tokenize:Kft};function Kft(e,t,n){const r=this;let i,s,o;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),l):$===47?(e.consume($),S):$===63?(e.consume($),w):xp($)?(e.consume($),I):n($)}function l($){return $===45?(e.consume($),c):$===91?(e.consume($),s=0,p):xp($)?(e.consume($),b):n($)}function c($){return $===45?(e.consume($),h):n($)}function f($){return $===null?n($):$===45?(e.consume($),d):Tn($)?(o=f,H($)):(e.consume($),f)}function d($){return $===45?(e.consume($),h):f($)}function h($){return $===62?B($):$===45?d($):f($)}function p($){const W="CDATA[";return $===W.charCodeAt(s++)?(e.consume($),s===W.length?m:p):n($)}function m($){return $===null?n($):$===93?(e.consume($),g):Tn($)?(o=m,H($)):(e.consume($),m)}function g($){return $===93?(e.consume($),y):m($)}function y($){return $===62?B($):$===93?(e.consume($),y):m($)}function b($){return $===null||$===62?B($):Tn($)?(o=b,H($)):(e.consume($),b)}function w($){return $===null?n($):$===63?(e.consume($),E):Tn($)?(o=w,H($)):(e.consume($),w)}function E($){return $===62?B($):w($)}function S($){return xp($)?(e.consume($),T):n($)}function T($){return $===45||jc($)?(e.consume($),T):C($)}function C($){return Tn($)?(o=C,H($)):li($)?(e.consume($),C):B($)}function I($){return $===45||jc($)?(e.consume($),I):$===47||$===62||tc($)?R($):n($)}function R($){return $===47?(e.consume($),B):$===58||$===95||xp($)?(e.consume($),P):Tn($)?(o=R,H($)):li($)?(e.consume($),R):B($)}function P($){return $===45||$===46||$===58||$===95||jc($)?(e.consume($),P):D($)}function D($){return $===61?(e.consume($),L):Tn($)?(o=D,H($)):li($)?(e.consume($),D):R($)}function L($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,M):Tn($)?(o=L,H($)):li($)?(e.consume($),L):(e.consume($),F)}function M($){return $===i?(e.consume($),i=void 0,z):$===null?n($):Tn($)?(o=M,H($)):(e.consume($),M)}function F($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||tc($)?R($):(e.consume($),F)}function z($){return $===47||$===62||tc($)?R($):n($)}function B($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function H($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),q}function q($){return li($)?Hi(e,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):Y($)}function Y($){return e.enter("htmlTextData"),o($)}}const jJ={name:"labelEnd",tokenize:tdt,resolveTo:edt,resolveAll:Zft},Xft={tokenize:ndt},Qft={tokenize:rdt},Jft={tokenize:idt};function Zft(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function edt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Ff(a,e.slice(s+1,s+r+3)),a=Ff(a,[["enter",c,t]]),a=Ff(a,FJ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Ff(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Ff(a,e.slice(o+1)),a=Ff(a,[["exit",u,t]]),f0(e,s,e.length,a),e}function tdt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(hS(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(Xft,c,o?c:f)(d):d===91?e.attempt(Qft,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(Jft,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function ndt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return tc(f)?QI(e,s)(f):s(f)}function s(f){return f===41?c(f):UAe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return tc(f)?QI(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?VAe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return tc(f)?QI(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function rdt(e,t,n){const r=this;return i;function i(a){return zAe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(hS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function idt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const sdt={name:"labelStartImage",tokenize:odt,resolveAll:jJ.resolveAll};function odt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const adt={name:"labelStartLink",tokenize:udt,resolveAll:jJ.resolveAll};function udt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const ZU={name:"lineEnding",tokenize:ldt};function ldt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Hi(e,t,"linePrefix")}}const S$={name:"thematicBreak",tokenize:cdt};function cdt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Tn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),li(l)?Hi(e,a,"whitespace")(l):a(l))}}const Il={name:"list",tokenize:hdt,continuation:{tokenize:pdt},exit:gdt},fdt={tokenize:ydt,partial:!0},ddt={tokenize:mdt,partial:!0};function hdt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:pq(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(S$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return pq(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(w5,r.interrupt?n:c,e.attempt(fdt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return li(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function pdt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(w5,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Hi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!li(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ddt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Hi(e,e.attempt(Il,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function mdt(e,t,n){const r=this;return Hi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function gdt(e){e.exit(this.containerState.type)}function ydt(e,t,n){const r=this;return Hi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!li(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const phe={name:"setextUnderline",tokenize:bdt,resolveTo:vdt};function vdt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function bdt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),li(l)?Hi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Tn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const _dt={tokenize:wdt};function wdt(e){const t=this,n=e.attempt(w5,r,e.attempt(this.parser.constructs.flowInitial,i,Hi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Cft,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const xdt={resolveAll:qAe()},Edt=HAe("string"),Sdt=HAe("text");function HAe(e){return{tokenize:t,resolveAll:qAe(e==="text"?Tdt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function qAe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Tdt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Cdt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:w,exit:E,attempt:C(S),check:C(T),interrupt:C(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(D){return o=Ff(o,D),g(),o[o.length-1]!==null?[]:(I(t,0),l.events=FJ(s,l.events,l),l.events)}function d(D,L){return Idt(h(D),L)}function h(D){return Adt(o,D)}function p(){const{line:D,column:L,offset:M,_index:F,_bufferIndex:z}=r;return{line:D,column:L,offset:M,_index:F,_bufferIndex:z}}function m(D){i[D.line]=D.column,P()}function g(){let D;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<L.length;)y(L.charCodeAt(r._bufferIndex));else y(L)}}function y(D){c=c(D)}function b(D){Tn(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,P()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=D}function w(D,L){const M=L||{};return M.type=D,M.start=p(),l.events.push(["enter",M,l]),a.push(M),M}function E(D){const L=a.pop();return L.end=p(),l.events.push(["exit",L,l]),L}function S(D,L){I(D,L.from)}function T(D,L){L.restore()}function C(D,L){return M;function M(F,z,B){let H,q,Y,$;return Array.isArray(F)?X(F):"tokenize"in F?X([F]):W(F);function W(ue){return _e;function _e(be){const xe=be!==null&&ue[be],ke=be!==null&&ue.null,je=[...Array.isArray(xe)?xe:xe?[xe]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return X(je)(be)}}function X(ue){return H=ue,q=0,ue.length===0?B:V(ue[q])}function V(ue){return _e;function _e(be){return $=R(),Y=ue,ue.partial||(l.currentConstruct=ue),ue.name&&l.parser.constructs.disable.null.includes(ue.name)?J():ue.tokenize.call(L?Object.assign(Object.create(l),L):l,u,K,J)(be)}}function K(ue){return D(Y,$),z}function J(ue){return $.restore(),++q<H.length?V(H[q]):B}}}function I(D,L){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&f0(l.events,L,l.events.length-L,D.resolve(l.events.slice(L),l)),D.resolveTo&&(l.events=D.resolveTo(l.events,l))}function R(){const D=p(),L=l.previous,M=l.currentConstruct,F=l.events.length,z=Array.from(a);return{restore:B,from:F};function B(){r=D,l.previous=L,l.currentConstruct=M,l.events.length=F,a=z,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Adt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Idt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const kdt={42:Il,43:Il,45:Il,48:Il,49:Il,50:Il,51:Il,52:Il,53:Il,54:Il,55:Il,56:Il,57:Il,62:LAe},Rdt={91:Nft},Ndt={[-2]:JU,[-1]:JU,32:JU},Pdt={35:Lft,42:S$,45:[phe,S$],60:Uft,61:phe,95:S$,96:dhe,126:dhe},Ddt={38:jAe,92:FAe},Odt={[-5]:ZU,[-4]:ZU,[-3]:ZU,33:sdt,38:jAe,42:mq,60:[aft,Yft],91:adt,92:[$ft,FAe],93:jJ,95:mq,96:_ft},$dt={null:[mq,xdt]},Mdt={null:[42,95]},Ldt={null:[]},Fdt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Mdt,contentInitial:Rdt,disable:Ldt,document:kdt,flow:Pdt,flowInitial:Ndt,insideSpan:$dt,string:Ddt,text:Odt},Symbol.toStringTag,{value:"Module"}));function jdt(e){const n=Wct([Fdt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(eft),document:i(nft),flow:i(_dt),string:i(Edt),text:i(Sdt)};return r;function i(s){return o;function o(a){return Cdt(r,s,a)}}}function Bdt(e){for(;!BAe(e););return e}const mhe=/[\0\t\n\r]/g;function Udt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(mhe.lastIndex=f,l=mhe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const zdt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Vdt(e){return e.replace(zdt,Hdt)}function Hdt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return MAe(n.slice(s?2:1),s?16:10)}return LJ(n)||e}const WAe={}.hasOwnProperty;function qdt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Wdt(n)(Bdt(jdt(n).document().write(Udt()(e,t,!0))))}function Wdt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(st),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(It),blockQuote:s(ke),characterEscape:R,characterReference:R,codeFenced:s(je),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(je,o),codeText:s(Re,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(ft),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ze),hardBreakEscape:s(bt),hardBreakTrailing:s(bt),htmlFlow:s(Ae,o),htmlFlowData:R,htmlText:s(Ae,o),htmlTextData:R,image:s(Be),label:o,link:s(st),listItem:s(jt),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(ot),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(It),strong:s(Se),thematicBreak:s(Rt)},exit:{atxHeading:u(),atxHeadingSequence:S,autolink:u(),autolinkEmail:xe,autolinkProtocol:be,blockQuote:u(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:J,characterReferenceMarkerNumeric:J,characterReferenceValue:ue,characterReference:_e,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:P,codeIndented:u(y),codeText:u(z),codeTextData:P,data:P,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(L),hardBreakTrailing:u(L),htmlFlow:u(M),htmlFlowData:P,htmlText:u(F),htmlTextData:P,image:u(H),label:Y,labelText:q,lineEnding:D,link:u(B),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:K,resourceDestinationString:$,resourceTitleString:W,resource:X,setextHeading:u(I),setextHeadingLineSequence:C,setextHeadingText:T,strong:u(),thematicBreak:u()}};GAe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Te){let $e={type:"root",children:[]};const rt={stack:[$e],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},St=[];let Mt=-1;for(;++Mt<Te.length;)if(Te[Mt][1].type==="listOrdered"||Te[Mt][1].type==="listUnordered")if(Te[Mt][0]==="enter")St.push(Mt);else{const Zn=St.pop();Mt=i(Te,Zn,Mt)}for(Mt=-1;++Mt<Te.length;){const Zn=t[Te[Mt][0]];WAe.call(Zn,Te[Mt][1].type)&&Zn[Te[Mt][1].type].call(Object.assign({sliceSerialize:Te[Mt][2].sliceSerialize},rt),Te[Mt][1])}if(rt.tokenStack.length>0){const Zn=rt.tokenStack[rt.tokenStack.length-1];(Zn[1]||ghe).call(rt,void 0,Zn[0])}for($e.position={start:yy(Te.length>0?Te[0][1].start:{line:1,column:1,offset:0}),end:yy(Te.length>0?Te[Te.length-2][1].end:{line:1,column:1,offset:0})},Mt=-1;++Mt<t.transforms.length;)$e=t.transforms[Mt]($e)||$e;return $e}function i(Te,$e,rt){let St=$e-1,Mt=-1,Zn=!1,Br,er,yr,kn;for(;++St<=rt;){const Un=Te[St];switch(Un[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Un[0]==="enter"?Mt++:Mt--,kn=void 0;break}case"lineEndingBlank":{Un[0]==="enter"&&(Br&&!kn&&!Mt&&!yr&&(yr=St),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!Mt&&Un[0]==="enter"&&Un[1].type==="listItemPrefix"||Mt===-1&&Un[0]==="exit"&&(Un[1].type==="listUnordered"||Un[1].type==="listOrdered")){if(Br){let pr=St;for(er=void 0;pr--;){const Tr=Te[pr];if(Tr[1].type==="lineEnding"||Tr[1].type==="lineEndingBlank"){if(Tr[0]==="exit")continue;er&&(Te[er][1].type="lineEndingBlank",Zn=!0),Tr[1].type="lineEnding",er=pr}else if(!(Tr[1].type==="linePrefix"||Tr[1].type==="blockQuotePrefix"||Tr[1].type==="blockQuotePrefixWhitespace"||Tr[1].type==="blockQuoteMarker"||Tr[1].type==="listItemIndent"))break}yr&&(!er||yr<er)&&(Br._spread=!0),Br.end=Object.assign({},er?Te[er][1].start:Un[1].end),Te.splice(er||St,0,["exit",Br,Un[2]]),St++,rt++}if(Un[1].type==="listItemPrefix"){const pr={type:"listItem",_spread:!1,start:Object.assign({},Un[1].start),end:void 0};Br=pr,Te.splice(St,0,["enter",pr,Un[2]]),St++,rt++,yr=void 0,kn=!0}}}return Te[$e][1]._spread=Zn,rt}function s(Te,$e){return rt;function rt(St){a.call(this,Te(St),St),$e&&$e.call(this,St)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Te,$e,rt){this.stack[this.stack.length-1].children.push(Te),this.stack.push(Te),this.tokenStack.push([$e,rt]),Te.position={start:yy($e.start),end:void 0}}function u(Te){return $e;function $e(rt){Te&&Te.call(this,rt),l.call(this,rt)}}function l(Te,$e){const rt=this.stack.pop(),St=this.tokenStack.pop();if(St)St[0].type!==Te.type&&($e?$e.call(this,Te,St[0]):(St[1]||ghe).call(this,Te,St[0]));else throw new Error("Cannot close `"+Te.type+"` ("+XI({start:Te.start,end:Te.end})+"): its not open");rt.position.end=yy(Te.end)}function c(){return Hct(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Te){if(this.data.expectingFirstListItemValue){const $e=this.stack[this.stack.length-2];$e.start=Number.parseInt(this.sliceSerialize(Te),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.lang=Te}function p(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.meta=Te}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Te.replace(/(\r?\n|\r)$/g,"")}function b(Te){const $e=this.resume(),rt=this.stack[this.stack.length-1];rt.label=$e,rt.identifier=hS(this.sliceSerialize(Te)).toLowerCase()}function w(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.title=Te}function E(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.url=Te}function S(Te){const $e=this.stack[this.stack.length-1];if(!$e.depth){const rt=this.sliceSerialize(Te).length;$e.depth=rt}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function C(Te){const $e=this.stack[this.stack.length-1];$e.depth=this.sliceSerialize(Te).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function R(Te){const rt=this.stack[this.stack.length-1].children;let St=rt[rt.length-1];(!St||St.type!=="text")&&(St=kt(),St.position={start:yy(Te.start),end:void 0},rt.push(St)),this.stack.push(St)}function P(Te){const $e=this.stack.pop();$e.value+=this.sliceSerialize(Te),$e.position.end=yy(Te.end)}function D(Te){const $e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const rt=$e.children[$e.children.length-1];rt.position.end=yy(Te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes($e.type)&&(R.call(this,Te),P.call(this,Te))}function L(){this.data.atHardBreak=!0}function M(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Te}function F(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Te}function z(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.value=Te}function B(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const $e=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=$e,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function H(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const $e=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=$e,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function q(Te){const $e=this.sliceSerialize(Te),rt=this.stack[this.stack.length-2];rt.label=Vdt($e),rt.identifier=hS($e).toLowerCase()}function Y(){const Te=this.stack[this.stack.length-1],$e=this.resume(),rt=this.stack[this.stack.length-1];if(this.data.inReference=!0,rt.type==="link"){const St=Te.children;rt.children=St}else rt.alt=$e}function $(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.url=Te}function W(){const Te=this.resume(),$e=this.stack[this.stack.length-1];$e.title=Te}function X(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function K(Te){const $e=this.resume(),rt=this.stack[this.stack.length-1];rt.label=$e,rt.identifier=hS(this.sliceSerialize(Te)).toLowerCase(),this.data.referenceType="full"}function J(Te){this.data.characterReferenceType=Te.type}function ue(Te){const $e=this.sliceSerialize(Te),rt=this.data.characterReferenceType;let St;rt?(St=MAe($e,rt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):St=LJ($e);const Mt=this.stack[this.stack.length-1];Mt.value+=St}function _e(Te){const $e=this.stack.pop();$e.position.end=yy(Te.end)}function be(Te){P.call(this,Te);const $e=this.stack[this.stack.length-1];$e.url=this.sliceSerialize(Te)}function xe(Te){P.call(this,Te);const $e=this.stack[this.stack.length-1];$e.url="mailto:"+this.sliceSerialize(Te)}function ke(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function ft(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ze(){return{type:"emphasis",children:[]}}function It(){return{type:"heading",depth:0,children:[]}}function bt(){return{type:"break"}}function Ae(){return{type:"html",value:""}}function Be(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function _t(Te){return{type:"list",ordered:Te.type==="listOrdered",start:null,spread:Te._spread,children:[]}}function jt(Te){return{type:"listItem",spread:Te._spread,checked:null,children:[]}}function ot(){return{type:"paragraph",children:[]}}function Se(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function Rt(){return{type:"thematicBreak"}}}function yy(e){return{line:e.line,column:e.column,offset:e.offset}}function GAe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?GAe(e,r):Gdt(e,r)}}function Gdt(e,t){let n;for(n in t)if(WAe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function ghe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+XI({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+XI({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+XI({start:t.start,end:t.end})+") is still open")}function Ydt(e){const t=this;t.parser=n;function n(r){return qdt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Kdt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Xdt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Qdt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Jdt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Zdt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eht(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=IC(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function tht(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nht(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function YAe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function rht(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return YAe(e,t);const i={src:IC(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function iht(e,t){const n={src:IC(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function sht(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function oht(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return YAe(e,t);const i={href:IC(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function aht(e,t){const n={href:IC(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function uht(e,t,n){const r=e.all(t),i=n?lht(n):KAe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function lht(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=KAe(n[r])}return t}function KAe(e){const t=e.spread;return t??e.children.length>1}function cht(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function fht(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dht(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function hht(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pht(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Am(t.children[1]),u=_5(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function mht(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function ght(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const yhe=9,vhe=32;function yht(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(bhe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(bhe(t.slice(i),i>0,!1)),s.join("")}function bhe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===yhe||s===vhe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===yhe||s===vhe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function vht(e,t){const n={type:"text",value:yht(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function bht(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const _ht={blockquote:Kdt,break:Xdt,code:Qdt,delete:Jdt,emphasis:Zdt,footnoteReference:eht,heading:tht,html:nht,imageReference:rht,image:iht,inlineCode:sht,linkReference:oht,link:aht,listItem:uht,list:cht,paragraph:fht,root:dht,strong:hht,table:pht,tableCell:ght,tableRow:mht,text:vht,thematicBreak:bht,toml:jO,yaml:jO,definition:jO,footnoteDefinition:jO};function jO(){}const XAe=-1,x5=0,fL=1,dL=2,BJ=3,UJ=4,zJ=5,VJ=6,QAe=7,JAe=8,_he=typeof self=="object"?self:globalThis,wht=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case x5:case XAe:return n(o,i);case fL:{const a=n([],i);for(const u of o)a.push(r(u));return a}case dL:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case BJ:return n(new Date(o),i);case UJ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case zJ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case VJ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case QAe:{const{name:a,message:u}=o;return n(new _he[a](u),i)}case JAe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new _he[s](o),i)};return r},whe=e=>wht(new Map,e)(0),Gx="",{toString:xht}={},{keys:Eht}=Object,i2=e=>{const t=typeof e;if(t!=="object"||!e)return[x5,t];const n=xht.call(e).slice(8,-1);switch(n){case"Array":return[fL,Gx];case"Object":return[dL,Gx];case"Date":return[BJ,Gx];case"RegExp":return[UJ,Gx];case"Map":return[zJ,Gx];case"Set":return[VJ,Gx]}return n.includes("Array")?[fL,n]:n.includes("Error")?[QAe,n]:[dL,n]},BO=([e,t])=>e===x5&&(t==="function"||t==="symbol"),Sht=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=i2(o);switch(a){case x5:{let c=o;switch(u){case"bigint":a=JAe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([XAe],o)}return i([a,c],o)}case fL:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case dL:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Eht(o))(e||!BO(i2(o[d])))&&c.push([s(d),s(o[d])]);return f}case BJ:return i([a,o.toISOString()],o);case UJ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case zJ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(BO(i2(d))||BO(i2(h))))&&c.push([s(d),s(h)]);return f}case VJ:{const c=[],f=i([a,c],o);for(const d of o)(e||!BO(i2(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},xhe=(e,{json:t,lossy:n}={})=>{const r=[];return Sht(!(t||n),!!t,new Map,r)(e),r},nT=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?whe(xhe(e,t)):structuredClone(e):(e,t)=>whe(xhe(e,t));function Tht(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Cht(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Aht(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Tht,r=e.options.footnoteBackLabel||Cht,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=IC(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...nT(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ZAe=function(e){if(e==null)return Nht;if(typeof e=="function")return E5(e);if(typeof e=="object")return Array.isArray(e)?Iht(e):kht(e);if(typeof e=="string")return Rht(e);throw new Error("Expected function, string, or object as test")};function Iht(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ZAe(e[n]);return E5(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function kht(e){const t=e;return E5(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Rht(e){return E5(t);function t(n){return n&&n.type===e}}function E5(e){return t;function t(n,r,i){return!!(Pht(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Nht(){return!0}function Pht(e){return e!==null&&typeof e=="object"&&"type"in e}const e2e=[],Dht=!0,Ehe=!1,Oht="skip";function $ht(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ZAe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=e2e,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Mht(n(u,c)),h[0]===Ehe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Oht)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const b=y.children[m];if(p=a(b,m,g)(),p[0]===Ehe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Mht(e){return Array.isArray(e)?e:typeof e=="number"?[Dht,e]:e==null?e2e:[e]}function HJ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),$ht(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const gq={}.hasOwnProperty,Lht={};function Fht(e,t){const n=t||Lht,r=new Map,i=new Map,s=new Map,o={..._ht,...n.handlers},a={all:l,applyData:Bht,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:jht,wrap:zht};return HJ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(gq.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=nT(g);return y.children=a.all(c),y}return nT(c)}return(a.options.unknownHandler||Uht)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=She(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=She(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function jht(e,t){e.position&&(t.position=_ct(e))}function Bht(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,nT(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Uht(e,t){const n=t.data||{},r="value"in t&&!(gq.call(n,"hProperties")||gq.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function zht(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function She(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function The(e,t){const n=Fht(e,t),r=n.one(e,void 0),i=Aht(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Vht(e,t){return e&&"run"in e?async function(n,r){const i=The(n,{file:r,...t});await e.run(i,r)}:function(n,r){return The(n,{file:r,...t||e})}}function Che(e){if(e)throw e}var T$=Object.prototype.hasOwnProperty,t2e=Object.prototype.toString,Ahe=Object.defineProperty,Ihe=Object.getOwnPropertyDescriptor,khe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):t2e.call(t)==="[object Array]"},Rhe=function(t){if(!t||t2e.call(t)!=="[object Object]")return!1;var n=T$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&T$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||T$.call(t,i)},Nhe=function(t,n){Ahe&&n.name==="__proto__"?Ahe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Phe=function(t,n){if(n==="__proto__")if(T$.call(t,n)){if(Ihe)return Ihe(t,n).value}else return;return t[n]},Hht=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Phe(a,n),i=Phe(t,n),a!==i&&(c&&i&&(Rhe(i)||(s=khe(i)))?(s?(s=!1,o=r&&khe(r)?r:[]):o=r&&Rhe(r)?r:{},Nhe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Nhe(a,{name:n,newValue:i}));return a};const e7=cf(Hht);function yq(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function qht(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Wht(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Wht(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const dp={basename:Ght,dirname:Yht,extname:Kht,join:Xht,sep:"/"};function Ght(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');XN(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Yht(e){if(XN(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Kht(e){XN(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Xht(...e){let t=-1,n;for(;++t<e.length;)XN(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Qht(n)}function Qht(e){XN(e);const t=e.codePointAt(0)===47;let n=Jht(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Jht(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function XN(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Zht={cwd:ept};function ept(){return"/"}function vq(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function tpt(e){if(typeof e=="string")e=new URL(e);else if(!vq(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return npt(e)}function npt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const t7=["history","path","basename","stem","extname","dirname"];class n2e{constructor(t){let n;t?vq(t)?n={path:t}:typeof t=="string"||rpt(t)?n={value:t}:n=t:n={},this.cwd=Zht.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<t7.length;){const s=t7[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)t7.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?dp.basename(this.path):void 0}set basename(t){r7(t,"basename"),n7(t,"basename"),this.path=dp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?dp.dirname(this.path):void 0}set dirname(t){Dhe(this.basename,"dirname"),this.path=dp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?dp.extname(this.path):void 0}set extname(t){if(n7(t,"extname"),Dhe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=dp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){vq(t)&&(t=tpt(t)),r7(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?dp.basename(this.path,this.extname):void 0}set stem(t){r7(t,"stem"),n7(t,"stem"),this.path=dp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ru(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function n7(e,t){if(e&&e.includes(dp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+dp.sep+"`")}function r7(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Dhe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function rpt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ipt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},spt={}.hasOwnProperty;class qJ extends ipt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qht()}copy(){const t=new qJ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(e7(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(o7("data",this.frozen),this.namespace[t]=n,this):spt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(o7("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=UO(t),r=this.parser||this.Parser;return i7("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),i7("process",this.parser||this.Parser),s7("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=UO(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);upt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),i7("processSync",this.parser||this.Parser),s7("processSync",this.compiler||this.Compiler),this.process(t,i),$he("processSync","process",n),r;function i(s,o){n=!0,Che(s),r=o}}run(t,n,r){Ohe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=UO(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),$he("runSync","run",r),i;function s(o,a){Che(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=UO(n),i=this.compiler||this.Compiler;return s7("stringify",i),Ohe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(o7("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=e7(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];yq(m)&&yq(h)&&(h=e7(!0,m,h)),r[d]=[l,h,...p]}}}}const opt=new qJ().freeze();function i7(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function s7(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function o7(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ohe(e){if(!yq(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function $he(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function UO(e){return apt(e)?e:new n2e(e)}function apt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function upt(e){return typeof e=="string"||lpt(e)}function lpt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const cpt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Mhe=[],Lhe={allowDangerousHtml:!0},fpt=/^(https?|ircs?|mailto|xmpp)$/i,dpt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function hpt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Mhe,u=e.remarkPlugins||Mhe,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Lhe}:Lhe,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||ppt,h=opt().use(Ydt).use(u).use(Vht,l).use(a),p=new n2e;typeof r=="string"&&(p.value=r);for(const b of dpt)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+cpt+b.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),HJ(g,y),Cct(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let S;for(S in QU)if(Object.hasOwn(QU,S)&&Object.hasOwn(b.properties,S)){const T=b.properties[S],C=QU[S];(C===null||C.includes(b.tagName))&&(b.properties[S]=d(String(T||""),S,b))}}if(b.type==="element"){let S=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!S&&n&&typeof w=="number"&&(S=!n(b,w,E)),S&&E&&typeof w=="number")return f&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function ppt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||fpt.test(e.slice(0,t))?e:""}const Fhe=/[#.]/g;function mpt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Fhe.lastIndex=i;const a=Fhe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const gpt=new Set(["button","menu","reset","submit"]),bq={}.hasOwnProperty;function r2e(e,t,n){const r=n&&_pt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=mpt(s,t),l.tagName=l.tagName.toLowerCase(),r&&bq.call(r,l.tagName)&&(l.tagName=r[l.tagName]),ypt(o,l.tagName)){let c;for(c in o)bq.call(o,c)&&vpt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)_q(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function ypt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?gpt.has(e.type.toLowerCase()):!("value"in e)}function vpt(e,t,n,r){const i=b5(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Qde(r):i.commaSeparated?o=Wde(r):i.commaOrSpaceSeparated?o=Qde(Wde(r).join(" ")):o=jhe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?bpt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=jhe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function _q(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)_q(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?_q(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function jhe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||hR(n)===hR(t)))return!0}return n}function bpt(e){const t=[];let n;for(n in e)bq.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function _pt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const wpt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],xpt=r2e(KN,"div"),Ept=r2e(P1,"g",wpt),a7=/\r?\n|\r/g;function Spt(e){const t=String(e),n=[];for(a7.lastIndex=0;a7.test(t);)n.push(a7.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const p_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i2e={}.hasOwnProperty,Tpt=Object.prototype;function Cpt(e,t){const n=t||{};return WJ({file:n.file||void 0,location:!1,schema:n.space==="svg"?P1:KN,verbose:n.verbose||!1},e)}function WJ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},C$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:s2e(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Spt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},C$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},C$(e,r,n),n}default:return n=Apt(e,t),n}}function s2e(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=WJ(e,t[n]);r.push(i)}return r}function Apt(e,t){const n=e.schema;e.schema=t.namespaceURI===p_.svg?P1:KN;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;i2e.call(Tpt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Ept:xpt)(t.tagName,i,s2e(e,t.childNodes));if(C$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&UE(u.startTag),c=u&&u.endTag&&UE(u.endTag),f=WJ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function C$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Ipt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Ipt(e,t,n){const r=UE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)i2e.call(n.attrs,o)&&(s[b5(e.schema,o).property]=UE(n.attrs[o]));n.startTag;const a=UE(n.startTag),u=n.endTag?UE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function UE(e){const t=Bhe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Bhe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Bhe(e){return e.line&&e.column?e:void 0}const Uhe={}.hasOwnProperty;function o2e(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Uhe.call(i,e)){const u=String(i[e]);o=Uhe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const kpt={},Rpt={}.hasOwnProperty,a2e=o2e("type",{handlers:{root:Ppt,element:Lpt,text:$pt,comment:Mpt,doctype:Opt}});function Npt(e,t){const r=(t||kpt).space;return a2e(e,r==="svg"?P1:KN)}function Ppt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=GJ(e.children,n,t),kC(e,n),n}function Dpt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=GJ(e.children,n,t),kC(e,n),n}function Opt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return kC(e,t),t}function $pt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return kC(e,t),t}function Mpt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return kC(e,t),t}function Lpt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=P1);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Rpt.call(e.properties,s)){const u=Fpt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:p_[o],childNodes:[],parentNode:null};return a.childNodes=GJ(e.children,a,r),kC(e,a),e.tagName==="template"&&e.content&&(a.content=Dpt(e.content,r)),a}function Fpt(e,t,n){const r=b5(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?bAe(n):IAe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=p_[r.space]}return i}function GJ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=a2e(e[r],n);s.parentNode=t,i.push(s)}return i}function kC(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const jpt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Bpt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),fs="";var ie;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ie=ie||(ie={}));const Cl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function u2e(e){return e>=55296&&e<=57343}function Upt(e){return e>=56320&&e<=57343}function zpt(e,t){return(e-55296)*1024+9216+t}function l2e(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function c2e(e){return e>=64976&&e<=65007||Bpt.has(e)}var Ve;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ve=Ve||(Ve={}));const Vpt=65536;class Hpt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Vpt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Upt(n))return this.pos++,this._addGap(),zpt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ie.EOF;return this._err(Ve.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;const r=this.html.charCodeAt(n);return r===ie.CARRIAGE_RETURN?ie.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;let t=this.html.charCodeAt(this.pos);return t===ie.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ie.LINE_FEED):t===ie.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,u2e(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ie.LINE_FEED||t===ie.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){l2e(t)?this._err(Ve.controlCharacterInInputStream):c2e(t)&&this._err(Ve.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ur;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(ur=ur||(ur={}));function f2e(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Ey=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),qpt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var u7;const Wpt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Gpt=(u7=String.fromCodePoint)!==null&&u7!==void 0?u7:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Ypt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Wpt.get(e))!==null&&t!==void 0?t:e}var sa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(sa||(sa={}));const Kpt=32;var $p;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})($p||($p={}));function wq(e){return e>=sa.ZERO&&e<=sa.NINE}function Xpt(e){return e>=sa.UPPER_A&&e<=sa.UPPER_F||e>=sa.LOWER_A&&e<=sa.LOWER_F}function Qpt(e){return e>=sa.UPPER_A&&e<=sa.UPPER_Z||e>=sa.LOWER_A&&e<=sa.LOWER_Z||wq(e)}function Jpt(e){return e===sa.EQUALS||Qpt(e)}var Jo;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Jo||(Jo={}));var Qb;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Qb||(Qb={}));class Zpt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Jo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Qb.Strict}startEntity(t){this.decodeMode=t,this.state=Jo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Jo.EntityStart:return t.charCodeAt(n)===sa.NUM?(this.state=Jo.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Jo.NamedEntity,this.stateNamedEntity(t,n));case Jo.NumericStart:return this.stateNumericStart(t,n);case Jo.NumericDecimal:return this.stateNumericDecimal(t,n);case Jo.NumericHex:return this.stateNumericHex(t,n);case Jo.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Kpt)===sa.LOWER_X?(this.state=Jo.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Jo.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(wq(i)||Xpt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(wq(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===sa.SEMI)this.consumed+=1;else if(this.decodeMode===Qb.Strict)return 0;return this.emitCodePoint(Ypt(this.result),this.consumed),this.errors&&(t!==sa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&$p.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=h2e(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Qb.Attribute&&(s===0||Jpt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&$p.VALUE_LENGTH)>>14,s!==0){if(o===sa.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Qb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&$p.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~$p.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Jo.NamedEntity:return this.result!==0&&(this.decodeMode!==Qb.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Jo.NumericDecimal:return this.emitNumericEntity(0,2);case Jo.NumericHex:return this.emitNumericEntity(0,3);case Jo.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Jo.EntityStart:return 0}}}function d2e(e){let t="";const n=new Zpt(e,r=>t+=Gpt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function h2e(e,t,n,r){const i=(t&$p.BRANCH_LENGTH)>>7,s=t&$p.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}d2e(Ey);d2e(qpt);var Qe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Qe=Qe||(Qe={}));var _v;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(_v=_v||(_v={}));var Pc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Pc=Pc||(Pc={}));var De;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(De=De||(De={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const emt=new Map([[De.A,O.A],[De.ADDRESS,O.ADDRESS],[De.ANNOTATION_XML,O.ANNOTATION_XML],[De.APPLET,O.APPLET],[De.AREA,O.AREA],[De.ARTICLE,O.ARTICLE],[De.ASIDE,O.ASIDE],[De.B,O.B],[De.BASE,O.BASE],[De.BASEFONT,O.BASEFONT],[De.BGSOUND,O.BGSOUND],[De.BIG,O.BIG],[De.BLOCKQUOTE,O.BLOCKQUOTE],[De.BODY,O.BODY],[De.BR,O.BR],[De.BUTTON,O.BUTTON],[De.CAPTION,O.CAPTION],[De.CENTER,O.CENTER],[De.CODE,O.CODE],[De.COL,O.COL],[De.COLGROUP,O.COLGROUP],[De.DD,O.DD],[De.DESC,O.DESC],[De.DETAILS,O.DETAILS],[De.DIALOG,O.DIALOG],[De.DIR,O.DIR],[De.DIV,O.DIV],[De.DL,O.DL],[De.DT,O.DT],[De.EM,O.EM],[De.EMBED,O.EMBED],[De.FIELDSET,O.FIELDSET],[De.FIGCAPTION,O.FIGCAPTION],[De.FIGURE,O.FIGURE],[De.FONT,O.FONT],[De.FOOTER,O.FOOTER],[De.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[De.FORM,O.FORM],[De.FRAME,O.FRAME],[De.FRAMESET,O.FRAMESET],[De.H1,O.H1],[De.H2,O.H2],[De.H3,O.H3],[De.H4,O.H4],[De.H5,O.H5],[De.H6,O.H6],[De.HEAD,O.HEAD],[De.HEADER,O.HEADER],[De.HGROUP,O.HGROUP],[De.HR,O.HR],[De.HTML,O.HTML],[De.I,O.I],[De.IMG,O.IMG],[De.IMAGE,O.IMAGE],[De.INPUT,O.INPUT],[De.IFRAME,O.IFRAME],[De.KEYGEN,O.KEYGEN],[De.LABEL,O.LABEL],[De.LI,O.LI],[De.LINK,O.LINK],[De.LISTING,O.LISTING],[De.MAIN,O.MAIN],[De.MALIGNMARK,O.MALIGNMARK],[De.MARQUEE,O.MARQUEE],[De.MATH,O.MATH],[De.MENU,O.MENU],[De.META,O.META],[De.MGLYPH,O.MGLYPH],[De.MI,O.MI],[De.MO,O.MO],[De.MN,O.MN],[De.MS,O.MS],[De.MTEXT,O.MTEXT],[De.NAV,O.NAV],[De.NOBR,O.NOBR],[De.NOFRAMES,O.NOFRAMES],[De.NOEMBED,O.NOEMBED],[De.NOSCRIPT,O.NOSCRIPT],[De.OBJECT,O.OBJECT],[De.OL,O.OL],[De.OPTGROUP,O.OPTGROUP],[De.OPTION,O.OPTION],[De.P,O.P],[De.PARAM,O.PARAM],[De.PLAINTEXT,O.PLAINTEXT],[De.PRE,O.PRE],[De.RB,O.RB],[De.RP,O.RP],[De.RT,O.RT],[De.RTC,O.RTC],[De.RUBY,O.RUBY],[De.S,O.S],[De.SCRIPT,O.SCRIPT],[De.SECTION,O.SECTION],[De.SELECT,O.SELECT],[De.SOURCE,O.SOURCE],[De.SMALL,O.SMALL],[De.SPAN,O.SPAN],[De.STRIKE,O.STRIKE],[De.STRONG,O.STRONG],[De.STYLE,O.STYLE],[De.SUB,O.SUB],[De.SUMMARY,O.SUMMARY],[De.SUP,O.SUP],[De.TABLE,O.TABLE],[De.TBODY,O.TBODY],[De.TEMPLATE,O.TEMPLATE],[De.TEXTAREA,O.TEXTAREA],[De.TFOOT,O.TFOOT],[De.TD,O.TD],[De.TH,O.TH],[De.THEAD,O.THEAD],[De.TITLE,O.TITLE],[De.TR,O.TR],[De.TRACK,O.TRACK],[De.TT,O.TT],[De.U,O.U],[De.UL,O.UL],[De.SVG,O.SVG],[De.VAR,O.VAR],[De.WBR,O.WBR],[De.XMP,O.XMP]]);function RC(e){var t;return(t=emt.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const pt=O,tmt={[Qe.HTML]:new Set([pt.ADDRESS,pt.APPLET,pt.AREA,pt.ARTICLE,pt.ASIDE,pt.BASE,pt.BASEFONT,pt.BGSOUND,pt.BLOCKQUOTE,pt.BODY,pt.BR,pt.BUTTON,pt.CAPTION,pt.CENTER,pt.COL,pt.COLGROUP,pt.DD,pt.DETAILS,pt.DIR,pt.DIV,pt.DL,pt.DT,pt.EMBED,pt.FIELDSET,pt.FIGCAPTION,pt.FIGURE,pt.FOOTER,pt.FORM,pt.FRAME,pt.FRAMESET,pt.H1,pt.H2,pt.H3,pt.H4,pt.H5,pt.H6,pt.HEAD,pt.HEADER,pt.HGROUP,pt.HR,pt.HTML,pt.IFRAME,pt.IMG,pt.INPUT,pt.LI,pt.LINK,pt.LISTING,pt.MAIN,pt.MARQUEE,pt.MENU,pt.META,pt.NAV,pt.NOEMBED,pt.NOFRAMES,pt.NOSCRIPT,pt.OBJECT,pt.OL,pt.P,pt.PARAM,pt.PLAINTEXT,pt.PRE,pt.SCRIPT,pt.SECTION,pt.SELECT,pt.SOURCE,pt.STYLE,pt.SUMMARY,pt.TABLE,pt.TBODY,pt.TD,pt.TEMPLATE,pt.TEXTAREA,pt.TFOOT,pt.TH,pt.THEAD,pt.TITLE,pt.TR,pt.TRACK,pt.UL,pt.WBR,pt.XMP]),[Qe.MATHML]:new Set([pt.MI,pt.MO,pt.MN,pt.MS,pt.MTEXT,pt.ANNOTATION_XML]),[Qe.SVG]:new Set([pt.TITLE,pt.FOREIGN_OBJECT,pt.DESC]),[Qe.XLINK]:new Set,[Qe.XML]:new Set,[Qe.XMLNS]:new Set};function p2e(e){return e===pt.H1||e===pt.H2||e===pt.H3||e===pt.H4||e===pt.H5||e===pt.H6}De.STYLE,De.SCRIPT,De.XMP,De.IFRAME,De.NOEMBED,De.NOFRAMES,De.PLAINTEXT;const nmt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var oe;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(oe||(oe={}));const eo={DATA:oe.DATA,RCDATA:oe.RCDATA,RAWTEXT:oe.RAWTEXT,SCRIPT_DATA:oe.SCRIPT_DATA,PLAINTEXT:oe.PLAINTEXT,CDATA_SECTION:oe.CDATA_SECTION};function JI(e){return e>=ie.DIGIT_0&&e<=ie.DIGIT_9}function Z2(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_Z}function rmt(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_Z}function Sy(e){return rmt(e)||Z2(e)}function xq(e){return Sy(e)||JI(e)}function m2e(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_F}function g2e(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_F}function imt(e){return JI(e)||m2e(e)||g2e(e)}function zO(e){return e+32}function y2e(e){return e===ie.SPACE||e===ie.LINE_FEED||e===ie.TABULATION||e===ie.FORM_FEED}function smt(e){return e===ie.EQUALS_SIGN||xq(e)}function zhe(e){return y2e(e)||e===ie.SOLIDUS||e===ie.GREATER_THAN_SIGN}class omt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=oe.DATA,this.returnState=oe.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Hpt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ur.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ur.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:ur.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:ur.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(f2e(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ve.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=RC(t.tagName),t.type===ur.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ve.endTagWithAttributes),t.selfClosing&&this._err(Ve.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case ur.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ur.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ur.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:ur.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=y2e(t)?ur.WHITESPACE_CHARACTER:t===ie.NULL?ur.NULL_CHARACTER:ur.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(ur.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Ey[0];s>=0&&(s=h2e(Ey,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Ey[s];const a=o&$p.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ie.SEMICOLON&&this._isCharacterReferenceInAttribute()&&smt(this.preprocessor.peek(1))?(n=[ie.AMPERSAND],s+=u):(n=u===0?[Ey[s]&~$p.VALUE_LENGTH]:u===1?[Ey[++s]]:[Ey[++s],Ey[++s]],r=0,i=t!==ie.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ve.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case oe.DATA:{this._stateData(t);break}case oe.RCDATA:{this._stateRcdata(t);break}case oe.RAWTEXT:{this._stateRawtext(t);break}case oe.SCRIPT_DATA:{this._stateScriptData(t);break}case oe.PLAINTEXT:{this._statePlaintext(t);break}case oe.TAG_OPEN:{this._stateTagOpen(t);break}case oe.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case oe.TAG_NAME:{this._stateTagName(t);break}case oe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case oe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case oe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case oe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case oe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case oe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case oe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case oe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case oe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case oe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case oe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case oe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case oe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case oe.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case oe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case oe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case oe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case oe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case oe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case oe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case oe.BOGUS_COMMENT:{this._stateBogusComment(t);break}case oe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case oe.COMMENT_START:{this._stateCommentStart(t);break}case oe.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case oe.COMMENT:{this._stateComment(t);break}case oe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case oe.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case oe.COMMENT_END:{this._stateCommentEnd(t);break}case oe.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case oe.DOCTYPE:{this._stateDoctype(t);break}case oe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case oe.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case oe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case oe.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case oe.CDATA_SECTION:{this._stateCdataSection(t);break}case oe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case oe.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case oe.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case oe.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case oe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case oe.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case oe.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case oe.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.TAG_OPEN;break}case ie.AMPERSAND:{this.returnState=oe.DATA,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitCodePoint(t);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ie.AMPERSAND:{this.returnState=oe.RCDATA,this.state=oe.CHARACTER_REFERENCE;break}case ie.LESS_THAN_SIGN:{this.state=oe.RCDATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(fs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.RAWTEXT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(fs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(fs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(fs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Sy(t))this._createStartTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case ie.EXCLAMATION_MARK:{this.state=oe.MARKUP_DECLARATION_OPEN;break}case ie.SOLIDUS:{this.state=oe.END_TAG_OPEN;break}case ie.QUESTION_MARK:{this._err(Ve.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t);break}case ie.EOF:{this._err(Ve.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ve.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=oe.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Sy(t))this._createEndTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case ie.GREATER_THAN_SIGN:{this._err(Ve.missingEndTagName),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ve.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.tagName+=fs;break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Z2(t)?zO(t):t)}}_stateRcdataLessThanSign(t){t===ie.SOLIDUS?this.state=oe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Sy(t)?(this.state=oe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=oe.BEFORE_ATTRIBUTE_NAME,!1;case ie.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=oe.SELF_CLOSING_START_TAG,!1;case ie.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=oe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ie.SOLIDUS?this.state=oe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Sy(t)?(this.state=oe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ie.SOLIDUS:{this.state=oe.SCRIPT_DATA_END_TAG_OPEN;break}case ie.EXCLAMATION_MARK:{this.state=oe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Sy(t)?(this.state=oe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ie.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ie.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(fs);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(fs);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(fs);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ie.SOLIDUS?this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Sy(t)?(this._emitChars("<"),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Sy(t)?(this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Cl.SCRIPT,!1)&&zhe(this.preprocessor.peek(Cl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Cl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(fs);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(fs);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(fs);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ie.SOLIDUS?(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Cl.SCRIPT,!1)&&zhe(this.preprocessor.peek(Cl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Cl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._err(Ve.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=oe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this._leaveAttrName(),this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._leaveAttrName(),this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:{this._err(Ve.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.name+=fs;break}default:this.currentAttr.name+=String.fromCodePoint(Z2(t)?zO(t):t)}}_stateAfterAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ie.EQUALS_SIGN:{this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{this.state=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this.state=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingAttributeValue),this.state=oe.DATA,this.emitCurrentTagToken();break}default:this.state=oe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.value+=fs;break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.value+=fs;break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_UNQUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.value+=fs;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:case ie.EQUALS_SIGN:case ie.GRAVE_ACCENT:{this._err(Ve.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this._leaveAttrValue(),this.state=oe.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this._err(Ve.missingWhitespaceBetweenAttributes),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ie.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this._err(Ve.unexpectedSolidusInTag),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.data+=fs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Cl.DASH_DASH,!0)?(this._createCommentToken(Cl.DASH_DASH.length+1),this.state=oe.COMMENT_START):this._consumeSequenceIfMatch(Cl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Cl.DOCTYPE.length+1),this.state=oe.DOCTYPE):this._consumeSequenceIfMatch(Cl.CDATA_START,!0)?this.inForeignNode?this.state=oe.CDATA_SECTION:(this._err(Ve.cdataInHtmlContent),this._createCommentToken(Cl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=oe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ve.incorrectlyOpenedComment),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_START_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptClosingOfEmptyComment),this.state=oe.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptClosingOfEmptyComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END_DASH;break}case ie.LESS_THAN_SIGN:{n.data+="<",this.state=oe.COMMENT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.data+=fs;break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ie.EXCLAMATION_MARK:{n.data+="!",this.state=oe.COMMENT_LESS_THAN_SIGN_BANG;break}case ie.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ie.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=oe.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ie.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=oe.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ie.GREATER_THAN_SIGN&&t!==ie.EOF&&this._err(Ve.nestedComment),this.state=oe.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EXCLAMATION_MARK:{this.state=oe.COMMENT_END_BANG;break}case ie.HYPHEN_MINUS:{n.data+="-";break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{n.data+="--!",this.state=oe.COMMENT_END_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.incorrectlyClosedComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=oe.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ie.EOF:{this._err(Ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingWhitespaceBeforeDoctypeName),this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Z2(t))this._createDoctypeToken(String.fromCharCode(zO(t))),this.state=oe.DOCTYPE_NAME;else switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._createDoctypeToken(fs),this.state=oe.DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=oe.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.AFTER_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.name+=fs;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Z2(t)?zO(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Cl.PUBLIC,!1)?this.state=oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Cl.SYSTEM,!1)?this.state=oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ve.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.publicId+=fs;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.publicId+=fs;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.QUOTATION_MARK:{this._err(Ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.systemId+=fs;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.systemId+=fs;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter);break}case ie.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ie.RIGHT_SQUARE_BRACKET:{this.state=oe.CDATA_SECTION_BRACKET;break}case ie.EOF:{this._err(Ve.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ie.RIGHT_SQUARE_BRACKET?this.state=oe.CDATA_SECTION_END:(this._emitChars("]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA;break}case ie.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ie.NUMBER_SIGN?this.state=oe.NUMERIC_CHARACTER_REFERENCE:xq(t)?(this.state=oe.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this.state=oe.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){xq(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ie.SEMICOLON&&this._err(Ve.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ie.LATIN_SMALL_X||t===ie.LATIN_CAPITAL_X?this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE_START:JI(t)?(this.state=oe.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ve.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){imt(t)?(this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ve.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){m2e(t)?this.charRefCode=this.charRefCode*16+t-55:g2e(t)?this.charRefCode=this.charRefCode*16+t-87:JI(t)?this.charRefCode=this.charRefCode*16+t-48:t===ie.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ve.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){JI(t)?this.charRefCode=this.charRefCode*10+t-48:t===ie.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ve.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ie.NULL)this._err(Ve.nullCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ve.characterReferenceOutsideUnicodeRange),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(u2e(this.charRefCode))this._err(Ve.surrogateCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(c2e(this.charRefCode))this._err(Ve.noncharacterCharacterReference);else if(l2e(this.charRefCode)||this.charRefCode===ie.CARRIAGE_RETURN){this._err(Ve.controlCharacterReference);const n=nmt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const v2e=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),Vhe=new Set([...v2e,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),VO=new Map([[O.APPLET,Qe.HTML],[O.CAPTION,Qe.HTML],[O.HTML,Qe.HTML],[O.MARQUEE,Qe.HTML],[O.OBJECT,Qe.HTML],[O.TABLE,Qe.HTML],[O.TD,Qe.HTML],[O.TEMPLATE,Qe.HTML],[O.TH,Qe.HTML],[O.ANNOTATION_XML,Qe.MATHML],[O.MI,Qe.MATHML],[O.MN,Qe.MATHML],[O.MO,Qe.MATHML],[O.MS,Qe.MATHML],[O.MTEXT,Qe.MATHML],[O.DESC,Qe.SVG],[O.FOREIGN_OBJECT,Qe.SVG],[O.TITLE,Qe.SVG]]),amt=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],umt=[O.TR,O.TEMPLATE,O.HTML],lmt=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],cmt=[O.TABLE,O.TEMPLATE,O.HTML],fmt=[O.TD,O.TH];class dmt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Qe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Qe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(amt,Qe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(fmt,Qe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(cmt,Qe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(lmt,Qe.HTML)}clearBackToTableRowContext(){this.clearBackTo(umt,Qe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Qe.HTML)return!0;if(VO.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(p2e(n)&&r===Qe.HTML)return!0;if(VO.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Qe.HTML)return!0;if((r===O.UL||r===O.OL)&&i===Qe.HTML||VO.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Qe.HTML)return!0;if(r===O.BUTTON&&i===Qe.HTML||VO.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Qe.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Qe.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Qe.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;v2e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Vhe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Vhe.has(this.currentTagId);)this.pop()}}const l7=3;var eh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(eh=eh||(eh={}));const Hhe={type:eh.Marker};class hmt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===eh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<l7)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<l7)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=l7&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Hhe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:eh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:eh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Hhe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===eh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===eh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===eh.Element&&n.element===t)}}function qhe(e){return{nodeName:"#text",value:e,parentNode:null}}const yE={createDocument(){return{nodeName:"#document",mode:Pc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};yE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(yE.isTextNode(n)){n.value+=t;return}}yE.appendChild(e,qhe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&yE.isTextNode(r)?r.value+=t:yE.insertBefore(e,qhe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},b2e="html",pmt="about:legacy-compat",mmt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",_2e=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],gmt=[..._2e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],ymt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),w2e=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],vmt=[...w2e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Whe(e,t){return t.some(n=>e.startsWith(n))}function bmt(e){return e.name===b2e&&e.publicId===null&&(e.systemId===null||e.systemId===pmt)}function _mt(e){if(e.name!==b2e)return Pc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===mmt)return Pc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),ymt.has(n))return Pc.QUIRKS;let r=t===null?gmt:_2e;if(Whe(n,r))return Pc.QUIRKS;if(r=t===null?w2e:vmt,Whe(n,r))return Pc.LIMITED_QUIRKS}return Pc.NO_QUIRKS}const Ghe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},wmt="definitionurl",xmt="definitionURL",Emt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Smt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Qe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Qe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Qe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Qe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Qe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Qe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Qe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Qe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Qe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Qe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Qe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Qe.XMLNS}]]),Tmt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Cmt=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function Amt(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===_v.COLOR||r===_v.SIZE||r===_v.FACE)||Cmt.has(t)}function x2e(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===wmt){e.attrs[t].name=xmt;break}}function E2e(e){for(let t=0;t<e.attrs.length;t++){const n=Emt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function YJ(e){for(let t=0;t<e.attrs.length;t++){const n=Smt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Imt(e){const t=Tmt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=RC(e.tagName))}function kmt(e,t){return t===Qe.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function Rmt(e,t,n){if(t===Qe.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===_v.ENCODING){const i=n[r].value.toLowerCase();return i===Ghe.TEXT_HTML||i===Ghe.APPLICATION_XML}}return t===Qe.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function Nmt(e,t,n,r){return(!r||r===Qe.HTML)&&Rmt(e,t,n)||(!r||r===Qe.MATHML)&&kmt(e,t)}const Pmt="hidden",Dmt=8,Omt=3;var de;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(de||(de={}));const $mt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},S2e=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),Yhe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:yE,onParseError:null};let Khe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=de.INITIAL,this.originalInsertionMode=de.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Yhe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new omt(this.options,this),this.activeFormattingElements=new hmt(this.treeAdapter),this.fragmentContextID=r?RC(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new dmt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Yhe,...n};t??(t=r.treeAdapter.createElement(De.TEMPLATE,Qe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Qe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(de.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:$mt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Qe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Qe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=de.TEXT}switchToPlaintextParsing(){this.insertionMode=de.TEXT,this.originalInsertionMode=de.IN_BODY,this.tokenizer.state=eo.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===De.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Qe.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=eo.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=eo.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=eo.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=eo.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Qe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Qe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(De.HTML,Qe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===ur.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===De.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Qe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Qe.HTML)}_processToken(t){switch(t.type){case ur.CHARACTER:{this.onCharacter(t);break}case ur.NULL_CHARACTER:{this.onNullCharacter(t);break}case ur.COMMENT:{this.onComment(t);break}case ur.DOCTYPE:{this.onDoctype(t);break}case ur.START_TAG:{this._processStartTag(t);break}case ur.END_TAG:{this.onEndTag(t);break}case ur.EOF:{this.onEof(t);break}case ur.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Nmt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===eh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=de.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=de.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=de.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=de.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=de.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=de.IN_TABLE;return}case O.BODY:{this.insertionMode=de.IN_BODY;return}case O.FRAMESET:{this.insertionMode=de.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?de.AFTER_HEAD:de.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=de.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=de.IN_HEAD;return}break}}this.insertionMode=de.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=de.IN_SELECT_IN_TABLE;return}}this.insertionMode=de.IN_SELECT}_isElementCausesFosterParenting(t){return S2e.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Qe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return tmt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){f0t(this,t);return}switch(this.insertionMode){case de.INITIAL:{s2(this,t);break}case de.BEFORE_HTML:{ZI(this,t);break}case de.BEFORE_HEAD:{ek(this,t);break}case de.IN_HEAD:{tk(this,t);break}case de.IN_HEAD_NO_SCRIPT:{nk(this,t);break}case de.AFTER_HEAD:{rk(this,t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:{C2e(this,t);break}case de.TEXT:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{c7(this,t);break}case de.IN_TABLE_TEXT:{P2e(this,t);break}case de.IN_COLUMN_GROUP:{hL(this,t);break}case de.AFTER_BODY:{pL(this,t);break}case de.AFTER_AFTER_BODY:{A$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){c0t(this,t);return}switch(this.insertionMode){case de.INITIAL:{s2(this,t);break}case de.BEFORE_HTML:{ZI(this,t);break}case de.BEFORE_HEAD:{ek(this,t);break}case de.IN_HEAD:{tk(this,t);break}case de.IN_HEAD_NO_SCRIPT:{nk(this,t);break}case de.AFTER_HEAD:{rk(this,t);break}case de.TEXT:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{c7(this,t);break}case de.IN_COLUMN_GROUP:{hL(this,t);break}case de.AFTER_BODY:{pL(this,t);break}case de.AFTER_AFTER_BODY:{A$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Eq(this,t);return}switch(this.insertionMode){case de.INITIAL:case de.BEFORE_HTML:case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_TEMPLATE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{Eq(this,t);break}case de.IN_TABLE_TEXT:{o2(this,t);break}case de.AFTER_BODY:{zmt(this,t);break}case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{Vmt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case de.INITIAL:{Hmt(this,t);break}case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:{this._err(t,Ve.misplacedDoctype);break}case de.IN_TABLE_TEXT:{o2(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ve.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?d0t(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{s2(this,t);break}case de.BEFORE_HTML:{qmt(this,t);break}case de.BEFORE_HEAD:{Gmt(this,t);break}case de.IN_HEAD:{jh(this,t);break}case de.IN_HEAD_NO_SCRIPT:{Xmt(this,t);break}case de.AFTER_HEAD:{Jmt(this,t);break}case de.IN_BODY:{Nu(this,t);break}case de.IN_TABLE:{rT(this,t);break}case de.IN_TABLE_TEXT:{o2(this,t);break}case de.IN_CAPTION:{Ygt(this,t);break}case de.IN_COLUMN_GROUP:{QJ(this,t);break}case de.IN_TABLE_BODY:{C5(this,t);break}case de.IN_ROW:{A5(this,t);break}case de.IN_CELL:{Qgt(this,t);break}case de.IN_SELECT:{$2e(this,t);break}case de.IN_SELECT_IN_TABLE:{Zgt(this,t);break}case de.IN_TEMPLATE:{t0t(this,t);break}case de.AFTER_BODY:{r0t(this,t);break}case de.IN_FRAMESET:{i0t(this,t);break}case de.AFTER_FRAMESET:{o0t(this,t);break}case de.AFTER_AFTER_BODY:{u0t(this,t);break}case de.AFTER_AFTER_FRAMESET:{l0t(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?h0t(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{s2(this,t);break}case de.BEFORE_HTML:{Wmt(this,t);break}case de.BEFORE_HEAD:{Ymt(this,t);break}case de.IN_HEAD:{Kmt(this,t);break}case de.IN_HEAD_NO_SCRIPT:{Qmt(this,t);break}case de.AFTER_HEAD:{Zmt(this,t);break}case de.IN_BODY:{T5(this,t);break}case de.TEXT:{Fgt(this,t);break}case de.IN_TABLE:{mR(this,t);break}case de.IN_TABLE_TEXT:{o2(this,t);break}case de.IN_CAPTION:{Kgt(this,t);break}case de.IN_COLUMN_GROUP:{Xgt(this,t);break}case de.IN_TABLE_BODY:{Sq(this,t);break}case de.IN_ROW:{O2e(this,t);break}case de.IN_CELL:{Jgt(this,t);break}case de.IN_SELECT:{M2e(this,t);break}case de.IN_SELECT_IN_TABLE:{e0t(this,t);break}case de.IN_TEMPLATE:{n0t(this,t);break}case de.AFTER_BODY:{F2e(this,t);break}case de.IN_FRAMESET:{s0t(this,t);break}case de.AFTER_FRAMESET:{a0t(this,t);break}case de.AFTER_AFTER_BODY:{A$(this,t);break}}}onEof(t){switch(this.insertionMode){case de.INITIAL:{s2(this,t);break}case de.BEFORE_HTML:{ZI(this,t);break}case de.BEFORE_HEAD:{ek(this,t);break}case de.IN_HEAD:{tk(this,t);break}case de.IN_HEAD_NO_SCRIPT:{nk(this,t);break}case de.AFTER_HEAD:{rk(this,t);break}case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{R2e(this,t);break}case de.TEXT:{jgt(this,t);break}case de.IN_TABLE_TEXT:{o2(this,t);break}case de.IN_TEMPLATE:{L2e(this,t);break}case de.AFTER_BODY:case de.IN_FRAMESET:case de.AFTER_FRAMESET:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{XJ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ie.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.TEXT:case de.IN_COLUMN_GROUP:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{this._insertCharacters(t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:case de.AFTER_BODY:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{T2e(this,t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{c7(this,t);break}case de.IN_TABLE_TEXT:{N2e(this,t);break}}}};function Mmt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):k2e(e,t),n}function Lmt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Fmt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Omt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=jmt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function jmt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Bmt(e,t,n){const r=e.treeAdapter.getTagName(t),i=RC(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===Qe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Umt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function KJ(e,t){for(let n=0;n<Dmt;n++){const r=Mmt(e,t);if(!r)break;const i=Lmt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Fmt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Bmt(e,o,s),Umt(e,i,r)}}function Eq(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function zmt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Vmt(e,t){e._appendCommentNode(t,e.document)}function XJ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Hmt(e,t){e._setDocumentType(t);const n=t.forceQuirks?Pc.QUIRKS:_mt(t);bmt(t)||e._err(t,Ve.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=de.BEFORE_HTML}function s2(e,t){e._err(t,Ve.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Pc.QUIRKS),e.insertionMode=de.BEFORE_HTML,e._processToken(t)}function qmt(e,t){t.tagID===O.HTML?(e._insertElement(t,Qe.HTML),e.insertionMode=de.BEFORE_HEAD):ZI(e,t)}function Wmt(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&ZI(e,t)}function ZI(e,t){e._insertFakeRootElement(),e.insertionMode=de.BEFORE_HEAD,e._processToken(t)}function Gmt(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.HEAD:{e._insertElement(t,Qe.HTML),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD;break}default:ek(e,t)}}function Ymt(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?ek(e,t):e._err(t,Ve.endTagWithoutMatchingOpenElement)}function ek(e,t){e._insertFakeElement(De.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD,e._processToken(t)}function jh(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,eo.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,eo.RAWTEXT):(e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,eo.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,eo.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=de.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(de.IN_TEMPLATE);break}case O.HEAD:{e._err(t,Ve.misplacedStartTagForHeadElement);break}default:tk(e,t)}}function Kmt(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=de.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{tk(e,t);break}case O.TEMPLATE:{Yw(e,t);break}default:e._err(t,Ve.endTagWithoutMatchingOpenElement)}}function Yw(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,Ve.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ve.endTagWithoutMatchingOpenElement)}function tk(e,t){e.openElements.pop(),e.insertionMode=de.AFTER_HEAD,e._processToken(t)}function Xmt(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{jh(e,t);break}case O.NOSCRIPT:{e._err(t,Ve.nestedNoscriptInHead);break}default:nk(e,t)}}function Qmt(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=de.IN_HEAD;break}case O.BR:{nk(e,t);break}default:e._err(t,Ve.endTagWithoutMatchingOpenElement)}}function nk(e,t){const n=t.type===ur.EOF?Ve.openElementsLeftAfterEof:Ve.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=de.IN_HEAD,e._processToken(t)}function Jmt(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.BODY:{e._insertElement(t,Qe.HTML),e.framesetOk=!1,e.insertionMode=de.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,Ve.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),jh(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,Ve.misplacedStartTagForHeadElement);break}default:rk(e,t)}}function Zmt(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{rk(e,t);break}case O.TEMPLATE:{Yw(e,t);break}default:e._err(t,Ve.endTagWithoutMatchingOpenElement)}}function rk(e,t){e._insertFakeElement(De.BODY,O.BODY),e.insertionMode=de.IN_BODY,S5(e,t)}function S5(e,t){switch(t.type){case ur.CHARACTER:{C2e(e,t);break}case ur.WHITESPACE_CHARACTER:{T2e(e,t);break}case ur.COMMENT:{Eq(e,t);break}case ur.START_TAG:{Nu(e,t);break}case ur.END_TAG:{T5(e,t);break}case ur.EOF:{R2e(e,t);break}}}function T2e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function C2e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function egt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function tgt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function ngt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_FRAMESET)}function rgt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Qe.HTML)}function igt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),p2e(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Qe.HTML)}function sgt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function ogt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),n||(e.formElement=e.openElements.current))}function agt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Qe.HTML)}function ugt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),e.tokenizer.state=eo.PLAINTEXT}function lgt(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.framesetOk=!1}function cgt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(De.A);n&&(KJ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function fgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function dgt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(KJ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function hgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function pgt(e,t){e.treeAdapter.getDocumentMode(e.document)!==Pc.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),e.framesetOk=!1,e.insertionMode=de.IN_TABLE}function A2e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function I2e(e){const t=f2e(e,_v.TYPE);return t!=null&&t.toLowerCase()===Pmt}function mgt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Qe.HTML),I2e(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function ggt(e,t){e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0}function ygt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,Qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function vgt(e,t){t.tagName=De.IMG,t.tagID=O.IMG,A2e(e,t)}function bgt(e,t){e._insertElement(t,Qe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=eo.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=de.TEXT}function _gt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,eo.RAWTEXT)}function wgt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,eo.RAWTEXT)}function Xhe(e,t){e._switchToTextParsing(t,eo.RAWTEXT)}function xgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===de.IN_TABLE||e.insertionMode===de.IN_CAPTION||e.insertionMode===de.IN_TABLE_BODY||e.insertionMode===de.IN_ROW||e.insertionMode===de.IN_CELL?de.IN_SELECT_IN_TABLE:de.IN_SELECT}function Egt(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML)}function Sgt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Qe.HTML)}function Tgt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,Qe.HTML)}function Cgt(e,t){e._reconstructActiveFormattingElements(),x2e(t),YJ(t),t.selfClosing?e._appendElement(t,Qe.MATHML):e._insertElement(t,Qe.MATHML),t.ackSelfClosing=!0}function Agt(e,t){e._reconstructActiveFormattingElements(),E2e(t),YJ(t),t.selfClosing?e._appendElement(t,Qe.SVG):e._insertElement(t,Qe.SVG),t.ackSelfClosing=!0}function Qhe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML)}function Nu(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{fgt(e,t);break}case O.A:{cgt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{igt(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{rgt(e,t);break}case O.LI:case O.DD:case O.DT:{agt(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{A2e(e,t);break}case O.HR:{ygt(e,t);break}case O.RB:case O.RTC:{Sgt(e,t);break}case O.RT:case O.RP:{Tgt(e,t);break}case O.PRE:case O.LISTING:{sgt(e,t);break}case O.XMP:{_gt(e,t);break}case O.SVG:{Agt(e,t);break}case O.HTML:{egt(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{jh(e,t);break}case O.BODY:{tgt(e,t);break}case O.FORM:{ogt(e,t);break}case O.NOBR:{dgt(e,t);break}case O.MATH:{Cgt(e,t);break}case O.TABLE:{pgt(e,t);break}case O.INPUT:{mgt(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{ggt(e,t);break}case O.IMAGE:{vgt(e,t);break}case O.BUTTON:{lgt(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{hgt(e,t);break}case O.IFRAME:{wgt(e,t);break}case O.SELECT:{xgt(e,t);break}case O.OPTION:case O.OPTGROUP:{Egt(e,t);break}case O.NOEMBED:{Xhe(e,t);break}case O.FRAMESET:{ngt(e,t);break}case O.TEXTAREA:{bgt(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?Xhe(e,t):Qhe(e,t);break}case O.PLAINTEXT:{ugt(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:Qhe(e,t)}}function Igt(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=de.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function kgt(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=de.AFTER_BODY,F2e(e,t))}function Rgt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Ngt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function Pgt(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(De.P,O.P),e._closePElement()}function Dgt(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function Ogt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function $gt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Mgt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Lgt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(De.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function k2e(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function T5(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{KJ(e,t);break}case O.P:{Pgt(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{Rgt(e,t);break}case O.LI:{Dgt(e);break}case O.DD:case O.DT:{Ogt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{$gt(e);break}case O.BR:{Lgt(e);break}case O.BODY:{Igt(e,t);break}case O.HTML:{kgt(e,t);break}case O.FORM:{Ngt(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{Mgt(e,t);break}case O.TEMPLATE:{Yw(e,t);break}default:k2e(e,t)}}function R2e(e,t){e.tmplInsertionModeStack.length>0?L2e(e,t):XJ(e,t)}function Fgt(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function jgt(e,t){e._err(t,Ve.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function c7(e,t){if(S2e.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=de.IN_TABLE_TEXT,t.type){case ur.CHARACTER:{P2e(e,t);break}case ur.WHITESPACE_CHARACTER:{N2e(e,t);break}}else QN(e,t)}function Bgt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_CAPTION}function Ugt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_COLUMN_GROUP}function zgt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(De.COLGROUP,O.COLGROUP),e.insertionMode=de.IN_COLUMN_GROUP,QJ(e,t)}function Vgt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_TABLE_BODY}function Hgt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(De.TBODY,O.TBODY),e.insertionMode=de.IN_TABLE_BODY,C5(e,t)}function qgt(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Wgt(e,t){I2e(t)?e._appendElement(t,Qe.HTML):QN(e,t),t.ackSelfClosing=!0}function Ggt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Qe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function rT(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{Hgt(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{jh(e,t);break}case O.COL:{zgt(e,t);break}case O.FORM:{Ggt(e,t);break}case O.TABLE:{qgt(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{Vgt(e,t);break}case O.INPUT:{Wgt(e,t);break}case O.CAPTION:{Bgt(e,t);break}case O.COLGROUP:{Ugt(e,t);break}default:QN(e,t)}}function mR(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{Yw(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:QN(e,t)}}function QN(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,S5(e,t),e.fosterParentingEnabled=n}function N2e(e,t){e.pendingCharacterTokens.push(t)}function P2e(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function o2(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)QN(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const D2e=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function Ygt(e,t){const n=t.tagID;D2e.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,rT(e,t)):Nu(e,t)}function Kgt(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,n===O.TABLE&&mR(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:T5(e,t)}}function QJ(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.COL:{e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{jh(e,t);break}default:hL(e,t)}}function Xgt(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case O.TEMPLATE:{Yw(e,t);break}case O.COL:break;default:hL(e,t)}}function hL(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE,e._processToken(t))}function C5(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(De.TR,O.TR),e.insertionMode=de.IN_ROW,A5(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,rT(e,t));break}default:rT(e,t)}}function Sq(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,mR(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:mR(e,t)}}function A5(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Qe.HTML),e.insertionMode=de.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,C5(e,t));break}default:rT(e,t)}}function O2e(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,Sq(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,Sq(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:mR(e,t)}}function Qgt(e,t){const n=t.tagID;D2e.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),A5(e,t)):Nu(e,t)}function Jgt(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),O2e(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:T5(e,t)}}function $2e(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,Qe.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Qe.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{jh(e,t);break}}}function M2e(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{Yw(e,t);break}}}function Zgt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):$2e(e,t)}function e0t(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):M2e(e,t)}function t0t(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{jh(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=de.IN_TABLE,e.insertionMode=de.IN_TABLE,rT(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=de.IN_COLUMN_GROUP,e.insertionMode=de.IN_COLUMN_GROUP,QJ(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=de.IN_TABLE_BODY,e.insertionMode=de.IN_TABLE_BODY,C5(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=de.IN_ROW,e.insertionMode=de.IN_ROW,A5(e,t);break}default:e.tmplInsertionModeStack[0]=de.IN_BODY,e.insertionMode=de.IN_BODY,Nu(e,t)}}function n0t(e,t){t.tagID===O.TEMPLATE&&Yw(e,t)}function L2e(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):XJ(e,t)}function r0t(e,t){t.tagID===O.HTML?Nu(e,t):pL(e,t)}function F2e(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=de.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else pL(e,t)}function pL(e,t){e.insertionMode=de.IN_BODY,S5(e,t)}function i0t(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.FRAMESET:{e._insertElement(t,Qe.HTML);break}case O.FRAME:{e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{jh(e,t);break}}}function s0t(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=de.AFTER_FRAMESET))}function o0t(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.NOFRAMES:{jh(e,t);break}}}function a0t(e,t){t.tagID===O.HTML&&(e.insertionMode=de.AFTER_AFTER_FRAMESET)}function u0t(e,t){t.tagID===O.HTML?Nu(e,t):A$(e,t)}function A$(e,t){e.insertionMode=de.IN_BODY,S5(e,t)}function l0t(e,t){switch(t.tagID){case O.HTML:{Nu(e,t);break}case O.NOFRAMES:{jh(e,t);break}}}function c0t(e,t){t.chars=fs,e._insertCharacters(t)}function f0t(e,t){e._insertCharacters(t),e.framesetOk=!1}function j2e(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Qe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function d0t(e,t){if(Amt(t))j2e(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Qe.MATHML?x2e(t):r===Qe.SVG&&(Imt(t),E2e(t)),YJ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function h0t(e,t){if(t.tagID===O.P||t.tagID===O.BR){j2e(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Qe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}De.AREA,De.BASE,De.BASEFONT,De.BGSOUND,De.BR,De.COL,De.EMBED,De.FRAME,De.HR,De.IMG,De.INPUT,De.KEYGEN,De.LINK,De.META,De.PARAM,De.SOURCE,De.TRACK,De.WBR;const p0t=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Jhe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function B2e(e,t){const n=S0t(e),r=o2e("type",{handlers:{root:m0t,element:g0t,text:y0t,comment:z2e,doctype:v0t,raw:_0t},unknown:w0t}),i={parser:n?new Khe(Jhe):Khe.getFragmentParser(void 0,Jhe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),NC(i,Am());const s=n?i.parser.document:i.parser.getFragment(),o=Cpt(s,{file:i.options.file});return i.stitches&&HJ(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function U2e(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function m0t(e,t){U2e(e.children,t)}function g0t(e,t){x0t(e,t),U2e(e.children,t),E0t(e,t)}function y0t(e,t){const n={type:ur.CHARACTER,chars:e.value,location:JN(e)};NC(t,Am(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function v0t(e,t){const n={type:ur.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:JN(e)};NC(t,Am(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function b0t(e,t){t.stitches=!0;const n=T0t(e);if("children"in e&&"children"in n){const r=B2e({type:"root",children:e.children},t.options);n.children=r.children}z2e({type:"comment",value:{stitch:n}},t)}function z2e(e,t){const n=e.value,r={type:ur.COMMENT,data:n,location:JN(e)};NC(t,Am(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function _0t(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,V2e(t,Am(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function w0t(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))b0t(n,t);else{let r="";throw p0t.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function NC(e,t){V2e(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=eo.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function V2e(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function x0t(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===eo.PLAINTEXT)return;NC(t,Am(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:p_.html;i===p_.html&&n==="svg"&&(i=p_.svg);const s=Npt({...e,children:[]},{space:i===p_.svg?"svg":"html"}),o={type:ur.START_TAG,tagName:n,tagID:RC(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:JN(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function E0t(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&jpt.includes(n)||t.parser.tokenizer.state===eo.PLAINTEXT)return;NC(t,_5(e));const r={type:ur.END_TAG,tagName:n,tagID:RC(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:JN(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===eo.RCDATA||t.parser.tokenizer.state===eo.RAWTEXT||t.parser.tokenizer.state===eo.SCRIPT_DATA)&&(t.parser.tokenizer.state=eo.DATA)}function S0t(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function JN(e){const t=Am(e)||{line:void 0,column:void 0,offset:void 0},n=_5(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function T0t(e){return"children"in e?nT({...e,children:[]}):nT(e)}function C0t(e){return function(t,n){return B2e(t,{...e,file:n})}}function Su({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(R1,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(at,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(vs,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(vs,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(vs,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(vs,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(vs,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(vs,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Uw,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(bh,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(bh,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(hpt,{components:n,rehypePlugins:[C0t],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function Tq({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Su,{text:n})}const A0t="https://github.com/revisit-studies/study/tree/main/public/";function I0t({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Fh();return _.jsx(ss.Main,{children:_.jsxs(nd,{size:"xs",px:"xs",children:[_.jsx(R1,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${il}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(at,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=vAe(i);return _.jsx(bo,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(zw,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(at,{fw:"bold",children:i}),_.jsxs(Wt,{align:"center",direction:"row",children:[_.jsx(cL,{color:"red"}),_.jsx(at,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(Tq,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Wt,{direction:"row",justify:"space-between",children:[_.jsx(at,{fw:"bold",children:s.studyMetadata.title}),_.jsx(Bw,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${il}${o}`,children:_.jsx(Ilt,{style:{paddingTop:4}})})]}),_.jsxs(at,{c:"dimmed",children:[_.jsx(at,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(at,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(at,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Uw,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${A0t}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Wt,{align:"center",direction:"row",children:[_.jsx(cL,{color:"orange"}),_.jsx(at,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(Tq,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var H2e={exports:{}},q2e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN=N;function k0t(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var R0t=typeof Object.is=="function"?Object.is:k0t,N0t=ZN.useSyncExternalStore,P0t=ZN.useRef,D0t=ZN.useEffect,O0t=ZN.useMemo,$0t=ZN.useDebugValue;q2e.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=P0t(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=O0t(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,R0t(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=N0t(e,s[0],s[1]);return D0t(function(){o.hasValue=!0,o.value=a},[a]),$0t(a),a};H2e.exports=q2e;var M0t=H2e.exports,Bc="default"in CM?ci:CM,Zhe=Symbol.for("react-redux-context"),epe=typeof globalThis<"u"?globalThis:{};function L0t(){if(!Bc.createContext)return{};const e=epe[Zhe]??(epe[Zhe]=new Map);let t=e.get(Bc.createContext);return t||(t=Bc.createContext(null),e.set(Bc.createContext,t)),t}var Bv=L0t(),F0t=()=>{throw new Error("uSES not initialized!")};function JJ(e=Bv){return function(){return Bc.useContext(e)}}var W2e=JJ(),G2e=F0t,j0t=e=>{G2e=e},B0t=(e,t)=>e===t;function U0t(e=Bv){const t=e===Bv?W2e:JJ(e),n=(r,i={})=>{const{equalityFn:s=B0t,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Bc.useRef(!0);const d=Bc.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=G2e(u.addNestedSub,a.getState,l||a.getState,d,s);return Bc.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var z0t=U0t();function V0t(e){e()}function H0t(){let e=null,t=null;return{clear(){e=null,t=null},notify(){V0t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var tpe={notify(){},get:()=>[]};function q0t(e,t){let n,r=tpe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=H0t())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=tpe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var W0t=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",G0t=typeof navigator<"u"&&navigator.product==="ReactNative",Y0t=W0t||G0t?Bc.useLayoutEffect:Bc.useEffect;function K0t({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Bc.useMemo(()=>{const l=q0t(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Bc.useMemo(()=>e.getState(),[e]);Y0t(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||Bv;return Bc.createElement(u.Provider,{value:o},n)}var X0t=K0t;function Y2e(e=Bv){const t=e===Bv?W2e:JJ(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Q0t=Y2e();function J0t(e=Bv){const t=e===Bv?Q0t:Y2e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var K2e=J0t();j0t(M0t.useSyncExternalStoreWithSelector);function Ca(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Z0t=typeof Symbol=="function"&&Symbol.observable||"@@observable",npe=Z0t,f7=()=>Math.random().toString(36).substring(7).split("").join("."),eyt={INIT:`@@redux/INIT${f7()}`,REPLACE:`@@redux/REPLACE${f7()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${f7()}`},mL=eyt;function ZJ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function X2e(e,t,n){if(typeof e!="function")throw new Error(Ca(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ca(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ca(1));return n(X2e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Ca(3));return i}function f(g){if(typeof g!="function")throw new Error(Ca(4));if(u)throw new Error(Ca(5));let y=!0;l();const b=a++;return o.set(b,g),function(){if(y){if(u)throw new Error(Ca(6));y=!1,l(),o.delete(b),s=null}}}function d(g){if(!ZJ(g))throw new Error(Ca(7));if(typeof g.type>"u")throw new Error(Ca(8));if(typeof g.type!="string")throw new Error(Ca(17));if(u)throw new Error(Ca(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(Ca(10));r=g,d({type:mL.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ca(11));function b(){const E=y;E.next&&E.next(c())}return b(),{unsubscribe:g(b)}},[npe](){return this}}}return d({type:mL.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[npe]:p}}function tyt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:mL.INIT})>"u")throw new Error(Ca(12));if(typeof n(void 0,{type:mL.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ca(13))})}function nyt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{tyt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Ca(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function gL(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ryt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ca(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=gL(...a)(i.dispatch),{...i,dispatch:s}}}function iyt(e){return ZJ(e)&&"type"in e&&typeof e.type=="string"}var Q2e=Symbol.for("immer-nothing"),rpe=Symbol.for("immer-draftable"),Jc=Symbol.for("immer-state");function nh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var iT=Object.getPrototypeOf;function Uv(e){return!!e&&!!e[Jc]}function d0(e){var t;return e?J2e(e)||Array.isArray(e)||!!e[rpe]||!!((t=e.constructor)!=null&&t[rpe])||k5(e)||R5(e):!1}var syt=Object.prototype.constructor.toString();function J2e(e){if(!e||typeof e!="object")return!1;const t=iT(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===syt}function yL(e,t){I5(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function I5(e){const t=e[Jc];return t?t.type_:Array.isArray(e)?1:k5(e)?2:R5(e)?3:0}function Cq(e,t){return I5(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Z2e(e,t,n){const r=I5(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function oyt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function k5(e){return e instanceof Map}function R5(e){return e instanceof Set}function Lb(e){return e.copy_||e.base_}function Aq(e,t){if(k5(e))return new Map(e);if(R5(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=J2e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Jc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(iT(e),r)}else{const r=iT(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function eZ(e,t=!1){return N5(e)||Uv(e)||!d0(e)||(I5(e)>1&&(e.set=e.add=e.clear=e.delete=ayt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>eZ(r,!0))),e}function ayt(){nh(2)}function N5(e){return Object.isFrozen(e)}var uyt={};function K_(e){const t=uyt[e];return t||nh(0,e),t}var gR;function eIe(){return gR}function lyt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ipe(e,t){t&&(K_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Iq(e){kq(e),e.drafts_.forEach(cyt),e.drafts_=null}function kq(e){e===gR&&(gR=e.parent_)}function spe(e){return gR=lyt(gR,e)}function cyt(e){const t=e[Jc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ope(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Jc].modified_&&(Iq(t),nh(4)),d0(e)&&(e=vL(t,e),t.parent_||bL(t,e)),t.patches_&&K_("Patches").generateReplacementPatches_(n[Jc].base_,e,t.patches_,t.inversePatches_)):e=vL(t,n,[]),Iq(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Q2e?e:void 0}function vL(e,t,n){if(N5(t))return t;const r=t[Jc];if(!r)return yL(t,(i,s)=>ape(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return bL(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),yL(s,(a,u)=>ape(e,r,i,a,u,n,o)),bL(e,i,!1),n&&e.patches_&&K_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ape(e,t,n,r,i,s,o){if(Uv(i)){const a=s&&t&&t.type_!==3&&!Cq(t.assigned_,r)?s.concat(r):void 0,u=vL(e,i,a);if(Z2e(n,r,u),Uv(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(d0(i)&&!N5(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;vL(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&bL(e,i)}}function bL(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&eZ(t,n)}function fyt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:eIe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=tZ;n&&(i=[r],s=yR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var tZ={get(e,t){if(t===Jc)return e;const n=Lb(e);if(!Cq(n,t))return dyt(e,n,t);const r=n[t];return e.finalized_||!d0(r)?r:r===d7(e.base_,t)?(h7(e),e.copy_[t]=Nq(r,e)):r},has(e,t){return t in Lb(e)},ownKeys(e){return Reflect.ownKeys(Lb(e))},set(e,t,n){const r=tIe(Lb(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=d7(Lb(e),t),s=i==null?void 0:i[Jc];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(oyt(n,i)&&(n!==void 0||Cq(e.base_,t)))return!0;h7(e),Rq(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return d7(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,h7(e),Rq(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Lb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){nh(11)},getPrototypeOf(e){return iT(e.base_)},setPrototypeOf(){nh(12)}},yR={};yL(tZ,(e,t)=>{yR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});yR.deleteProperty=function(e,t){return yR.set.call(this,e,t,void 0)};yR.set=function(e,t,n){return tZ.set.call(this,e[0],t,n,e[0])};function d7(e,t){const n=e[Jc];return(n?Lb(n):e)[t]}function dyt(e,t,n){var i;const r=tIe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function tIe(e,t){if(!(t in e))return;let n=iT(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=iT(n)}}function Rq(e){e.modified_||(e.modified_=!0,e.parent_&&Rq(e.parent_))}function h7(e){e.copy_||(e.copy_=Aq(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var hyt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&nh(6),r!==void 0&&typeof r!="function"&&nh(7);let i;if(d0(t)){const s=spe(this),o=Nq(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?Iq(s):kq(s)}return ipe(s,r),ope(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Q2e&&(i=void 0),this.autoFreeze_&&eZ(i,!0),r){const s=[],o=[];K_("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else nh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){d0(e)||nh(8),Uv(e)&&(e=nIe(e));const t=spe(this),n=Nq(e,void 0);return n[Jc].isManual_=!0,kq(t),n}finishDraft(e,t){const n=e&&e[Jc];(!n||!n.isManual_)&&nh(9);const{scope_:r}=n;return ipe(r,t),ope(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=K_("Patches").applyPatches_;return Uv(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Nq(e,t){const n=k5(e)?K_("MapSet").proxyMap_(e,t):R5(e)?K_("MapSet").proxySet_(e,t):fyt(e,t);return(t?t.scope_:eIe()).drafts_.push(n),n}function nIe(e){return Uv(e)||nh(10,e),rIe(e)}function rIe(e){if(!d0(e)||N5(e))return e;const t=e[Jc];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Aq(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Aq(e,!0);return yL(n,(r,i)=>{Z2e(n,r,rIe(i))}),t&&(t.finalized_=!1),n}var Zc=new hyt,iIe=Zc.produce;Zc.produceWithPatches.bind(Zc);Zc.setAutoFreeze.bind(Zc);Zc.setUseStrictShallowCopy.bind(Zc);Zc.applyPatches.bind(Zc);Zc.createDraft.bind(Zc);Zc.finishDraft.bind(Zc);function pyt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function myt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function gyt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var upe=e=>Array.isArray(e)?e:[e];function yyt(e){const t=Array.isArray(e[0])?e[0]:e;return gyt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function vyt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var byt=class{constructor(e){this.value=e}deref(){return this.value}},_yt=typeof WeakRef<"u"?WeakRef:byt,wyt=0,lpe=1;function HO(){return{s:wyt,v:void 0,o:null,p:null}}function nZ(e,t={}){let n=HO();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=HO(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=HO(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===lpe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new _yt(c):c}return l.s=lpe,l.v=c,c}return o.clearCache=()=>{n=HO(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function sIe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),pyt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=nZ,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=upe(d),y=upe(p),b=yyt(i),w=f(function(){return s++,l.apply(null,arguments)},...g),E=h(function(){o++;const T=vyt(b,arguments);return a=w.apply(null,T),a},...y);return Object.assign(E,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var oIe=sIe(nZ),xyt=Object.assign((e,t=oIe)=>{myt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>xyt});function aIe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Eyt=aIe(),Syt=aIe,Tyt=(...e)=>{const t=sIe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(Uv(o)?nIe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Tyt(nZ);var Cyt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gL:gL.apply(null,arguments)};function sT(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(nc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>iyt(r)&&r.type===e,n}var uIe=class eI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,eI.prototype)}static get[Symbol.species](){return eI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new eI(...t[0].concat(this)):new eI(...t.concat(this))}};function cpe(e){return d0(e)?iIe(e,()=>{}):e}function fpe(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(nc(10));const r=n.insert(t,e);return e.set(t,r),r}function Ayt(e){return typeof e=="boolean"}var Iyt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new uIe;return n&&(Ayt(n)?o.push(Eyt):o.push(Syt(n.extraArgument))),o},kyt="RTK_autoBatch",lIe=e=>t=>{setTimeout(t,e)},Ryt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lIe(10),Nyt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Ryt:e.type==="callback"?e.queueNotification:lIe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[kyt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Pyt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new uIe(e);return r&&i.push(Nyt(typeof r=="object"?r:void 0)),i},Dyt=!0;function Oyt(e){const t=Iyt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(ZJ(n))a=nyt(n);else throw new Error(nc(1));let u;typeof r=="function"?u=r(t):u=t();let l=gL;i&&(l=Cyt({trace:!Dyt,...typeof i=="object"&&i}));const c=ryt(...u),f=Pyt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return X2e(a,s,h)}function cIe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(nc(28));if(a in t)throw new Error(nc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function $yt(e){return typeof e=="function"}function Myt(e,t){let[n,r,i]=cIe(t),s;if($yt(e))s=()=>cpe(e());else{const a=cpe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Uv(c)){const h=f(c,u);return h===void 0?c:h}else{if(d0(c))return iIe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(nc(9))}return d}}return c},a)}return o.getInitialState=s,o}var Lyt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fyt=(e=21)=>{let t="",n=e;for(;n--;)t+=Lyt[Math.random()*64|0];return t},jyt=Symbol.for("rtk-slice-createasyncthunk");function Byt(e,t){return`${e}/${t}`}function Uyt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[jyt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(nc(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Hyt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const S=typeof w=="string"?w:w.type;if(!S)throw new Error(nc(12));if(S in l.sliceCaseReducersByType)throw new Error(nc(13));return l.sliceCaseReducersByType[S]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],S={reducerName:w,type:Byt(s,w),createNotation:typeof i.reducers=="function"};Wyt(E)?Yyt(S,E,c,t):qyt(S,E,c)});function f(){const[w={},E=[],S=void 0]=typeof i.extraReducers=="function"?cIe(i.extraReducers):[i.extraReducers],T={...w,...l.sliceCaseReducersByType};return Myt(i.initialState,C=>{for(let I in T)C.addCase(I,T[I]);for(let I of l.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of E)C.addMatcher(I.matcher,I.reducer);S&&C.addDefaultCase(S)})}const d=w=>w,h=new Map;let p;function m(w,E){return p||(p=f()),p(w,E)}function g(){return p||(p=f()),p.getInitialState()}function y(w,E=!1){function S(C){let I=C[w];return typeof I>"u"&&E&&(I=g()),I}function T(C=d){const I=fpe(h,E,{insert:()=>new WeakMap});return fpe(I,C,{insert:()=>{const R={};for(const[P,D]of Object.entries(i.selectors??{}))R[P]=zyt(D,C,g,E);return R}})}return{reducerPath:w,getSelectors:T,get selectors(){return T(S)},selectSlice:S}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(w,{reducerPath:E,...S}={}){const T=E??o;return w.inject({reducerPath:T,reducer:m},S),{...b,...y(T,!0)}}};return b}}function zyt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Vyt=Uyt();function Hyt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function qyt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Gyt(r))throw new Error(nc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?sT(e,o):sT(e))}function Wyt(e){return e._reducerDefinitionType==="asyncThunk"}function Gyt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Yyt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(nc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||qO,pending:a||qO,rejected:u||qO,settled:l||qO})}function qO(){}var Kyt=(e,t)=>{if(typeof e!="function")throw new Error(nc(32))},rZ="listenerMiddleware",Xyt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=sT(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(nc(21));return Kyt(s),{predicate:i,type:t,effect:s}},Qyt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Xyt(e);return{id:Fyt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(nc(22))}}},{withTypes:()=>Qyt}),Jyt=Object.assign(sT(`${rZ}/add`),{withTypes:()=>Jyt});sT(`${rZ}/removeAll`);var Zyt=Object.assign(sT(`${rZ}/remove`),{withTypes:()=>Zyt});function nc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function h0(e){return e.components.flatMap(t=>typeof t=="string"?t:h0(t))}function fIe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:fIe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function dIe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+h0(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+h0(e).length-1}];r+=1}else{const o=dIe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function iZ(e,t){const n=dIe(e,t,0);return typeof n=="number"?null:n}function hIe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=hIe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function evt(e,t){const n=hIe(e,t,0);return n.found?n.distance:-1}function pIe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...pIe(i,`${t}-${s}`))}),n}function sZ(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>sZ(n,`${t}-${r}`))}}async function tvt(e,t,n,r,i,s){const o=h0(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r,modes:s,matrixAnswers:{}},f=Vyt({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},setMatrixAnswersRadio:(h,p)=>{const{responseId:m,questionKey:g,val:y}=p.payload;h.matrixAnswers={...h.matrixAnswers,[m]:{...h.matrixAnswers[m],[g]:y}}},setMatrixAnswersCheckbox:(h,p)=>{var T;const{responseId:m,questionKey:g,value:y,isChecked:b,choiceOptions:w}=p.payload,E=((T=h.matrixAnswers[m])==null?void 0:T[g])??"";let S="";b?E.length>0?S=[...E.split("|"),y].sort((C,I)=>w.map(R=>R.value).indexOf(C)-w.map(R=>R.value).indexOf(I)).join("|"):S=`${y}`:S=E.split("|").filter(C=>C!==y).join("|"),h.matrixAnswers={...h.matrixAnswers,[m]:{...h.matrixAnswers[m],[g]:S}}},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:b,provenanceGraph:w,windowEvents:E,timedOut:S}=p;h.answers[m]={answer:g,startTime:y,endTime:b,provenanceGraph:w,windowEvents:E,timedOut:S}}}});return{store:Oyt({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const mIe=N.createContext(null);function rd(){return N.useContext(mIe).actions}const Bh=K2e,As=z0t;function nvt(e){return As(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const rvt=oIe(e=>e.sequence,e=>h0(e));function oZ(){return As(rvt)}function Kw(){const{studyId:e}=c0();return`${e}`}function z0(){const{index:e}=c0(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function O1(){const e=z0(),t=oZ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var _L={exports:{}};_L.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",S="[object Set]",T="[object String]",C="[object Undefined]",I="[object WeakMap]",R="[object ArrayBuffer]",P="[object DataView]",D="[object Float32Array]",L="[object Float64Array]",M="[object Int8Array]",F="[object Int16Array]",z="[object Int32Array]",B="[object Uint8Array]",H="[object Uint8ClampedArray]",q="[object Uint16Array]",Y="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,V={};V[D]=V[L]=V[M]=V[F]=V[z]=V[B]=V[H]=V[q]=V[Y]=!0,V[a]=V[u]=V[R]=V[c]=V[P]=V[f]=V[d]=V[h]=V[m]=V[g]=V[b]=V[E]=V[S]=V[T]=V[I]=!1;var K=typeof Ts=="object"&&Ts&&Ts.Object===Object&&Ts,J=typeof self=="object"&&self&&self.Object===Object&&self,ue=K||J||Function("return this")(),_e=t&&!t.nodeType&&t,be=_e&&!0&&e&&!e.nodeType&&e,xe=be&&be.exports===_e,ke=xe&&K.process,je=function(){try{var le=be&&be.require&&be.require("util").types;return le||ke&&ke.binding&&ke.binding("util")}catch{}}(),Re=je&&je.isTypedArray;function ft(le,ge,Ue){switch(Ue.length){case 0:return le.call(ge);case 1:return le.call(ge,Ue[0]);case 2:return le.call(ge,Ue[0],Ue[1]);case 3:return le.call(ge,Ue[0],Ue[1],Ue[2])}return le.apply(ge,Ue)}function Ze(le,ge){for(var Ue=-1,qt=Array(le);++Ue<le;)qt[Ue]=ge(Ue);return qt}function It(le){return function(ge){return le(ge)}}function bt(le,ge){return le==null?void 0:le[ge]}function Ae(le,ge){return function(Ue){return le(ge(Ue))}}var Be=Array.prototype,st=Function.prototype,_t=Object.prototype,jt=ue["__core-js_shared__"],ot=st.toString,Se=_t.hasOwnProperty,kt=function(){var le=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),Rt=_t.toString,Te=ot.call(Object),$e=RegExp("^"+ot.call(Se).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=xe?ue.Buffer:void 0,St=ue.Symbol,Mt=ue.Uint8Array;rt&&rt.allocUnsafe;var Zn=Ae(Object.getPrototypeOf,Object),Br=Object.create,er=_t.propertyIsEnumerable,yr=Be.splice,kn=St?St.toStringTag:void 0,Un=function(){try{var le=ut(Object,"defineProperty");return le({},"",{}),le}catch{}}(),pr=rt?rt.isBuffer:void 0,Tr=Math.max,Yo=Date.now,us=ut(ue,"Map"),Vn=ut(Object,"create"),Yi=function(){function le(){}return function(ge){if(!Id(ge))return{};if(Br)return Br(ge);le.prototype=ge;var Ue=new le;return le.prototype=void 0,Ue}}();function ri(le){var ge=-1,Ue=le==null?0:le.length;for(this.clear();++ge<Ue;){var qt=le[ge];this.set(qt[0],qt[1])}}function Ns(){this.__data__=Vn?Vn(null):{},this.size=0}function Sd(le){var ge=this.has(le)&&delete this.__data__[le];return this.size-=ge?1:0,ge}function Pu(le){var ge=this.__data__;if(Vn){var Ue=ge[le];return Ue===r?void 0:Ue}return Se.call(ge,le)?ge[le]:void 0}function wc(le){var ge=this.__data__;return Vn?ge[le]!==void 0:Se.call(ge,le)}function Yr(le,ge){var Ue=this.__data__;return this.size+=this.has(le)?0:1,Ue[le]=Vn&&ge===void 0?r:ge,this}ri.prototype.clear=Ns,ri.prototype.delete=Sd,ri.prototype.get=Pu,ri.prototype.has=wc,ri.prototype.set=Yr;function Ki(le){var ge=-1,Ue=le==null?0:le.length;for(this.clear();++ge<Ue;){var qt=le[ge];this.set(qt[0],qt[1])}}function Ti(){this.__data__=[],this.size=0}function Ko(le){var ge=this.__data__,Ue=vr(ge,le);if(Ue<0)return!1;var qt=ge.length-1;return Ue==qt?ge.pop():yr.call(ge,Ue,1),--this.size,!0}function ba(le){var ge=this.__data__,Ue=vr(ge,le);return Ue<0?void 0:ge[Ue][1]}function Eo(le){return vr(this.__data__,le)>-1}function pe(le,ge){var Ue=this.__data__,qt=vr(Ue,le);return qt<0?(++this.size,Ue.push([le,ge])):Ue[qt][1]=ge,this}Ki.prototype.clear=Ti,Ki.prototype.delete=Ko,Ki.prototype.get=ba,Ki.prototype.has=Eo,Ki.prototype.set=pe;function ae(le){var ge=-1,Ue=le==null?0:le.length;for(this.clear();++ge<Ue;){var qt=le[ge];this.set(qt[0],qt[1])}}function me(){this.size=0,this.__data__={hash:new ri,map:new(us||Ki),string:new ri}}function Le(le){var ge=it(this,le).delete(le);return this.size-=ge?1:0,ge}function Me(le){return it(this,le).get(le)}function wt(le){return it(this,le).has(le)}function Ut(le,ge){var Ue=it(this,le),qt=Ue.size;return Ue.set(le,ge),this.size+=Ue.size==qt?0:1,this}ae.prototype.clear=me,ae.prototype.delete=Le,ae.prototype.get=Me,ae.prototype.has=wt,ae.prototype.set=Ut;function dn(le){var ge=this.__data__=new Ki(le);this.size=ge.size}function tr(){this.__data__=new Ki,this.size=0}function cr(le){var ge=this.__data__,Ue=ge.delete(le);return this.size=ge.size,Ue}function On(le){return this.__data__.get(le)}function Cr(le){return this.__data__.has(le)}function ii(le,ge){var Ue=this.__data__;if(Ue instanceof Ki){var qt=Ue.__data__;if(!us||qt.length<n-1)return qt.push([le,ge]),this.size=++Ue.size,this;Ue=this.__data__=new ae(qt)}return Ue.set(le,ge),this.size=Ue.size,this}dn.prototype.clear=tr,dn.prototype.delete=cr,dn.prototype.get=On,dn.prototype.has=Cr,dn.prototype.set=ii;function on(le,ge){var Ue=Cd(le),qt=!Ue&&Wa(le),or=!Ue&&!qt&&Ad(le),Vr=!Ue&&!qt&&!or&&xx(le),gi=Ue||qt||or||Vr,an=gi?Ze(le.length,String):[],si=an.length;for(var yi in le)gi&&(yi=="length"||or&&(yi=="offset"||yi=="parent")||Vr&&(yi=="buffer"||yi=="byteLength"||yi=="byteOffset")||Lt(yi,si))||an.push(yi);return an}function Ar(le,ge,Ue){(Ue!==void 0&&!Du(le[ge],Ue)||Ue===void 0&&!(ge in le))&&Ci(le,ge,Ue)}function Kr(le,ge,Ue){var qt=le[ge];(!(Se.call(le,ge)&&Du(qt,Ue))||Ue===void 0&&!(ge in le))&&Ci(le,ge,Ue)}function vr(le,ge){for(var Ue=le.length;Ue--;)if(Du(le[Ue][0],ge))return Ue;return-1}function Ci(le,ge,Ue){ge=="__proto__"&&Un?Un(le,ge,{configurable:!0,enumerable:!0,value:Ue,writable:!0}):le[ge]=Ue}var lo=We();function Ai(le){return le==null?le===void 0?C:y:kn&&kn in Object(le)?lt(le):Co(le)}function So(le){return Xo(le)&&Ai(le)==a}function Xi(le){if(!Id(le)||nr(le))return!1;var ge=ob(le)?$e:W;return ge.test(ib(le))}function Qi(le){return Xo(le)&&wx(le.length)&&!!V[Ai(le)]}function To(le){if(!Id(le))return br(le);var ge=Ur(le),Ue=[];for(var qt in le)qt=="constructor"&&(ge||!Se.call(le,qt))||Ue.push(qt);return Ue}function _a(le,ge,Ue,qt,or){le!==ge&&lo(ge,function(Vr,gi){if(or||(or=new dn),Id(Vr))co(le,ge,gi,Ue,_a,qt,or);else{var an=qt?qt(Td(le,gi),Vr,gi+"",le,ge,or):void 0;an===void 0&&(an=Vr),Ar(le,gi,an)}},qm)}function co(le,ge,Ue,qt,or,Vr,gi){var an=Td(le,Ue),si=Td(ge,Ue),yi=gi.get(si);if(yi){Ar(le,Ue,yi);return}var Ao=Vr?Vr(an,si,Ue+"",le,ge,gi):void 0,kd=Ao===void 0;if(kd){var Ps=Cd(si),Wm=!Ps&&Ad(si),Gm=!Ps&&!Wm&&xx(si);Ao=si,Ps||Wm||Gm?Cd(an)?Ao=an:sb(an)?Ao=we(an):Wm?(kd=!1,Ao=ee(si)):Gm?(kd=!1,Ao=se(si)):Ao=[]:kA(si)||Wa(si)?(Ao=an,Wa(an)?Ao=Hm(an):(!Id(an)||ob(an))&&(Ao=yt(si))):kd=!1}kd&&(gi.set(si,Ao),or(Ao,si,qt,Vr,gi),gi.delete(si)),Ar(le,Ue,Ao)}function _l(le,ge){return sy(xc(le,ge,Ir),le+"")}var gf=Un?function(le,ge){return Un(le,"toString",{configurable:!0,enumerable:!1,value:zr(ge),writable:!0})}:Ir;function ee(le,ge){return le.slice()}function he(le){var ge=new le.constructor(le.byteLength);return new Mt(ge).set(new Mt(le)),ge}function se(le,ge){var Ue=he(le.buffer);return new le.constructor(Ue,le.byteOffset,le.length)}function we(le,ge){var Ue=-1,qt=le.length;for(ge||(ge=Array(qt));++Ue<qt;)ge[Ue]=le[Ue];return ge}function Ie(le,ge,Ue,qt){var or=!Ue;Ue||(Ue={});for(var Vr=-1,gi=ge.length;++Vr<gi;){var an=ge[Vr],si=void 0;si===void 0&&(si=le[an]),or?Ci(Ue,an,si):Kr(Ue,an,si)}return Ue}function ve(le){return _l(function(ge,Ue){var qt=-1,or=Ue.length,Vr=or>1?Ue[or-1]:void 0,gi=or>2?Ue[2]:void 0;for(Vr=le.length>3&&typeof Vr=="function"?(or--,Vr):void 0,gi&&$n(Ue[0],Ue[1],gi)&&(Vr=or<3?void 0:Vr,or=1),ge=Object(ge);++qt<or;){var an=Ue[qt];an&&le(ge,an,qt,Vr)}return ge})}function We(le){return function(ge,Ue,qt){for(var or=-1,Vr=Object(ge),gi=qt(ge),an=gi.length;an--;){var si=gi[++or];if(Ue(Vr[si],si,Vr)===!1)break}return ge}}function it(le,ge){var Ue=le.__data__;return Xt(ge)?Ue[typeof ge=="string"?"string":"hash"]:Ue.map}function ut(le,ge){var Ue=bt(le,ge);return Xi(Ue)?Ue:void 0}function lt(le){var ge=Se.call(le,kn),Ue=le[kn];try{le[kn]=void 0;var qt=!0}catch{}var or=Rt.call(le);return qt&&(ge?le[kn]=Ue:delete le[kn]),or}function yt(le){return typeof le.constructor=="function"&&!Ur(le)?Yi(Zn(le)):{}}function Lt(le,ge){var Ue=typeof le;return ge=ge??o,!!ge&&(Ue=="number"||Ue!="symbol"&&X.test(le))&&le>-1&&le%1==0&&le<ge}function $n(le,ge,Ue){if(!Id(Ue))return!1;var qt=typeof ge;return(qt=="number"?oy(Ue)&&Lt(ge,Ue.length):qt=="string"&&ge in Ue)?Du(Ue[ge],le):!1}function Xt(le){var ge=typeof le;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?le!=="__proto__":le===null}function nr(le){return!!kt&&kt in le}function Ur(le){var ge=le&&le.constructor,Ue=typeof ge=="function"&&ge.prototype||_t;return le===Ue}function br(le){var ge=[];if(le!=null)for(var Ue in Object(le))ge.push(Ue);return ge}function Co(le){return Rt.call(le)}function xc(le,ge,Ue){return ge=Tr(ge===void 0?le.length-1:ge,0),function(){for(var qt=arguments,or=-1,Vr=Tr(qt.length-ge,0),gi=Array(Vr);++or<Vr;)gi[or]=qt[ge+or];or=-1;for(var an=Array(ge+1);++or<ge;)an[or]=qt[or];return an[ge]=Ue(gi),ft(le,this,an)}}function Td(le,ge){if(!(ge==="constructor"&&typeof le[ge]=="function")&&ge!="__proto__")return le[ge]}var sy=Zh(gf);function Zh(le){var ge=0,Ue=0;return function(){var qt=Yo(),or=s-(qt-Ue);if(Ue=qt,or>0){if(++ge>=i)return arguments[0]}else ge=0;return le.apply(void 0,arguments)}}function ib(le){if(le!=null){try{return ot.call(le)}catch{}try{return le+""}catch{}}return""}function Du(le,ge){return le===ge||le!==le&&ge!==ge}var Wa=So(function(){return arguments}())?So:function(le){return Xo(le)&&Se.call(le,"callee")&&!er.call(le,"callee")},Cd=Array.isArray;function oy(le){return le!=null&&wx(le.length)&&!ob(le)}function sb(le){return Xo(le)&&oy(le)}var Ad=pr||Sx;function ob(le){if(!Id(le))return!1;var ge=Ai(le);return ge==h||ge==p||ge==l||ge==w}function wx(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=o}function Id(le){var ge=typeof le;return le!=null&&(ge=="object"||ge=="function")}function Xo(le){return le!=null&&typeof le=="object"}function kA(le){if(!Xo(le)||Ai(le)!=b)return!1;var ge=Zn(le);if(ge===null)return!0;var Ue=Se.call(ge,"constructor")&&ge.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&ot.call(Ue)==Te}var xx=Re?It(Re):Qi;function Hm(le){return Ie(le,qm(le))}function qm(le){return oy(le)?on(le):To(le)}var Ex=ve(function(le,ge,Ue){_a(le,ge,Ue)});function zr(le){return function(){return le}}function Ir(le){return le}function Sx(){return!1}e.exports=Ex})(_L,_L.exports);var ivt=_L.exports;const aZ=cf(ivt);function wv(e){return structuredClone(e)}function uZ(){const e=z0(),n=`${O1()}_${e}`;return As(i=>i.answers[n])}const gIe=N.createContext(null);function svt(){const e=N.useContext(gIe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function p0(){return As(e=>e.config)}function dpe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function yIe(){const e=z0(),t=oZ(),r=`${O1()}_${e}`,i=As(T=>T.trialValidation),s=As(T=>T.sequence),o=As(T=>T.answers),a=As(T=>T.modes),u=Bh(),{saveTrialAnswer:l,setIframeAnswers:c}=rd(),{storageEngine:f}=xo(),d=Kw(),h=N.useMemo(()=>a.dataCollectionEnabled,[a]),p=nvt(r),m=typeof e!="number"||!p,g=uZ(),y=Fh(),b=p0(),w=N.useMemo(()=>Date.now(),[]),E=svt(),S=N.useCallback((T=!0)=>{if(typeof e!="number")return;const C=wv(i[r]),I=Object.values(C).reduce((B,H)=>Object.hasOwn(H,"values")?{...B,...H.values}:B,{}),{provenanceGraph:R}=C,P=Date.now(),D=E&&"current"in E&&E.current?E.current.splice(0,E.current.length):[];if(h&&g.endTime===-1){const B={answer:T?I:{},startTime:w,endTime:P,provenanceGraph:R,windowEvents:D,timedOut:!T};u(l({identifier:r,...B})),f&&f.saveAnswers({...o,[r]:B}),u(c({}))}let L=e+1;const M=iZ(s,e),F=M!==null&&M.some(B=>Object.hasOwn(B.currentBlock,"skip")&&B.currentBlock.skip!==void 0),z={...o,[r]:{answer:I,startTime:w,endTime:P,provenanceGraph:R,windowEvents:D}};F&&[...M.flatMap(H=>H.currentBlock.skip?H.currentBlock.skip.map(q=>({...q,firstIndex:H.firstIndex,lastIndex:H.lastIndex})):[])].some(H=>{let q=!1;const Y=Object.fromEntries(Object.entries(z).filter(([W])=>{const X=parseInt(W.slice(W.lastIndexOf("_")+1),10);return X>=H.firstIndex&&X<=e})),$=H.check!=="block"?Object.entries(Y).filter(([W])=>W.slice(0,W.lastIndexOf("_"))===H.name):Object.entries(Y);if($.length===0)return!1;if($.some(([W,X])=>!X))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(H,null,2)}`);if(H.check==="response"||H.check==="responses"){const[W,X]=$[0];H.check==="response"?q=H.comparison==="equal"?H.value===X.answer[H.responseId]:H.value!==X.answer[H.responseId]:q=!dpe(X.answer,W,b.components[W.slice(0,W.lastIndexOf("_"))],b)}else if(H.check==="block"||H.check==="repeatedComponent"){if($.length<H.value)return!1;const W=$.map(([K,J])=>dpe(J.answer,K,b.components[K.slice(0,K.lastIndexOf("_"))],b)),X=W.filter(K=>K).length,V=W.length-X;q=H.condition==="numCorrect"&&X===H.value||H.condition==="numIncorrect"&&V===H.value}if(q){const W=t.indexOf(H.to),X=W===-1?evt(s,H.to):-1;return L=W===-1?X:W,!0}return!1}),y(`/${d}/${L}${window.location.search}`)},[e,i,r,E,h,g==null?void 0:g.endTime,s,o,w,y,d,u,l,f,c,b,t]);return{isNextDisabled:m,goToNextStep:S}}function ovt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=yIe(),o=p0(),a=Fh(),u=N.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=N.useState(void 0);N.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},500);return()=>{clearInterval(m)}},[]),N.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=N.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return _.jsxs(_.Fragment,{children:[_.jsx(wn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&_.jsxs(Hg,{mt:"md",title:"Please wait",color:"blue",icon:_.jsx(RJ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?_.jsxs(Hg,{mt:"md",title:"Next button disables soon",color:"yellow",icon:_.jsx(cL,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&_.jsxs(Hg,{mt:"md",title:"Next button disabled",color:"red",icon:_.jsx(cL,{}),children:["The next button has timed out and is now disabled.",_.jsx(Pi,{justify:"right",mt:"sm",children:_.jsx(wn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function avt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const uvt=typeof window<"u"?N.useLayoutEffect:N.useEffect;function xa(e,t){uvt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function lvt(e,t){e&&avt(e),xa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),xa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),xa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),xa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),xa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),xa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),xa(`mantine-form:${e}:clear-errors`,t.clearErrors),xa(`mantine-form:${e}:reset`,t.reset),xa(`mantine-form:${e}:validate`,t.validate),xa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),xa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),xa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),xa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),xa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),xa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),xa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),xa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function cvt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function Pq(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function fvt(e){const[t,n]=N.useState(Pq(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=Pq(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function vIe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function hpe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function ppe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=vIe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=hpe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=hpe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function dvt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function mpe(e,t,n){typeof n.value=="object"&&(n.value=zE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function zE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(zE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(zE(a),zE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(zE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)mpe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||mpe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function bIe(e){return typeof e!="string"?[]:e.split(".")}function Wl(e,t){const n=bIe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function P5(e,t,n){const r=bIe(e);if(r.length===0)return n;const i=zE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function hvt(e,{from:t,to:n},r){const i=Wl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),P5(e,s,r)}function pvt(e,t,n,r){const i=Wl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),P5(e,s,r)}function mvt(e,t,n){const r=Wl(e,n);return Array.isArray(r)?P5(e,r.filter((i,s)=>s!==t),n):n}function gvt({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>dvt(o,a,u)),e.setValues({values:hvt(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>ppe(o,a,u,-1)),e.setValues({values:mvt(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>ppe(o,u,l,1)),e.setValues({values:pvt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var lZ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const I$=cf(lZ);function WO(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function yvt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(S=>{const T=typeof S=="function"?S(u.current):S;u.current=T,n==="controlled"&&s(T)},[]),f=N.useCallback(S=>{const T=typeof S=="function"?S(l.current):S;l.current=T,n==="controlled"&&a(T)},[]),d=N.useCallback(()=>c({}),[]),h=S=>{const T=S?{...S,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=N.useCallback((S,T)=>{c(C=>WO(C,S)===T?C:{...C,[S]:T})},[]),m=N.useCallback((S,T)=>{f(C=>WO(C,S)===T?C:{...C,[S]:T})},[]),g=N.useCallback(S=>WO(u.current,S),[]),y=N.useCallback(S=>f(T=>{if(typeof S!="string")return T;const C=vIe(S,T);return delete C[S],I$(C,T)?T:C}),[]),b=N.useCallback(S=>{if(S){const C=Wl(S,l.current);if(typeof C=="boolean")return C;const I=Wl(S,r.refValues.current),R=Wl(S,r.valuesSnapshot.current);return!I$(I,R)}return Object.keys(l.current).length>0?WO(l.current):!I$(r.refValues.current,r.valuesSnapshot.current)},[]),w=N.useCallback(()=>l.current,[]),E=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:b,getDirty:w,getTouched:E}}function vvt({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const b=o.current,w=p instanceof Function?p(o.current):p,E=y?{...b,...w}:w;o.current=E,g&&s(E),t==null||t(E,b),m==null||m.filter(Boolean).forEach(S=>S({updatedValues:E,previousValues:b}))},[t]),l=N.useCallback(p=>{var y;const m=Wl(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const b=o.current,w=P5(p.path,g,o.current);u({values:w,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(E=>E({path:p.path,updatedValues:w,previousValues:b}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function bvt({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Wl(i,o.previousValues),value:Wl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function gpe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function ype(e){const t=Pq(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function Dq(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Wl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>Dq(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||Dq(o,t,a,i)),i},r)}function Oq(e,t){return ype(typeof e=="function"?e(t):Dq(e,t))}function GO(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Oq(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const _vt="__MANTINE_FORM_INDEX__";function vpe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${_vt}`)):!1:!1}function _Ie({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=fvt(r),p=vvt({initialValues:n,onValuesChange:l,mode:t}),m=yvt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=gvt({$values:p,$errors:h,$status:m}),y=bvt({$status:m}),[b,w]=N.useState(0),[E,S]=N.useState({}),T=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&w($=>$+1)},[]),C=N.useCallback($=>{p.initialize($,()=>t==="uncontrolled"&&w(W=>W+1))},[]),I=N.useCallback(($,W,X)=>{const V=vpe($,a);m.clearFieldDirty($),m.setFieldTouched($,!0),!V&&o&&h.clearFieldError($),p.setFieldValue({path:$,value:W,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers($),V?K=>{const J=GO($,d,K.updatedValues);J.hasError?h.setFieldError($,J.error):h.clearFieldError($)}:null,(X==null?void 0:X.forceUpdate)!==!1&&t!=="controlled"?()=>S(K=>({...K,[$]:(K[$]||0)+1})):null]})},[l,d]),R=N.useCallback($=>{const W=p.refValues.current;p.setValues({values:$,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&w(X=>X+1),Object.keys(y.subscribers.current).forEach(X=>{const V=Wl(X,p.refValues.current),K=Wl(X,W);V!==K&&y.getFieldSubscribers(X).forEach(J=>J({previousValues:W,updatedValues:p.refValues.current}))})},[l,o]),P=N.useCallback(()=>{const $=Oq(d,p.refValues.current);return h.setErrors($.errors),$},[d]),D=N.useCallback($=>{const W=GO($,d,p.refValues.current);return W.hasError?h.setFieldError($,W.error):h.clearFieldError($),W},[d]),L=($,{type:W="input",withError:X=!0,withFocus:V=!0,...K}={})=>{const ue={onChange:cvt(_e=>I($,_e,{forceUpdate:!1})),"data-path":gpe(e,$)};return X&&(ue.error=h.errorsState[$]),W==="checkbox"?ue[t==="controlled"?"checked":"defaultChecked"]=Wl($,p.refValues.current):ue[t==="controlled"?"value":"defaultValue"]=Wl($,p.refValues.current),V&&(ue.onFocus=()=>m.setFieldTouched($,!0),ue.onBlur=()=>{if(vpe($,u)){const _e=GO($,d,p.refValues.current);_e.hasError?h.setFieldError($,_e.error):h.clearFieldError($)}}),Object.assign(ue,f==null?void 0:f({inputProps:ue,field:$,options:{type:W,withError:X,withFocus:V,...K},form:Y}))},M=($,W)=>X=>{X==null||X.preventDefault();const V=P();V.hasErrors?W==null||W(V.errors,p.refValues.current,X):$==null||$(c(p.refValues.current),X)},F=$=>c($||p.refValues.current),z=N.useCallback($=>{$.preventDefault(),T()},[]),B=N.useCallback($=>$?!GO($,d,p.refValues.current).hasError:!Oq(d,p.refValues.current).hasErrors,[d]),H=$=>`${b}-${$}-${E[$]||0}`,q=N.useCallback($=>document.querySelector(`[data-path="${gpe(e,$)}"]`),[]),Y={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:C,setValues:R,setFieldValue:I,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:P,validateField:D,getInputProps:L,onSubmit:M,onReset:z,isValid:B,getTransformedValues:F,key:H,getInputNode:q};return lvt(e,Y),Y}function wvt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function xvt(e){return wvt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function wIe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Evt=new URLSearchParams(window.location.search),Svt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=Evt.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},Tvt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?wIe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Cvt(e,t,n){const[r,i]=N.useState(null),s=_Ie({initialValues:Svt(e,n),validate:Tvt(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Xw(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=wIe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Avt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(ql.Group,{label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:s,required:o})})]}),description:u,...n,error:Xw(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Pi,{mt:"xs",children:l.map(c=>_.jsx(ql,{disabled:t,value:c.value,label:c.label},c.value))})})}function Ivt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(qN,{disabled:t,label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Xw(e,n,c)})}function kvt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(os.Wrapper,{label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&_.jsx(bh,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(bh.Item,{children:a},a)):_.jsx(bh.Item,{children:t.value})})})}function xIe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return _.jsx(l0.Group,{name:`radioInput${e.id}`,label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:o,required:a})})]}),description:f,...n,error:Xw(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Pi,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?_.jsx(at,{children:l}):null,d.map(h=>_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[_.jsx(at,{children:h.label}),_.jsx(l0,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),_.jsx(at,{children:c})]})},e.id)}function Rvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(xIe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Nvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(oJ,{disabled:t,placeholder:l,label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Xw(e,n)})}function Pvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Xw(e,n);return _.jsx(os.Wrapper,{label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(g5,{disabled:t,marks:a,...n,h:40})})}function Dvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(Pg,{disabled:t,placeholder:s,label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Xw(e,n)})}function Ovt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(GQ,{disabled:t,placeholder:s,label:_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Xw(e,n)})}function $vt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return _.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>_.jsx(ql,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a)},`${a.label}-${n}`))})}function Mvt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return _.jsx(l0.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:_.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>_.jsx(l0,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Lvt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=rd(),a=Bh(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(w=>({value:w,label:w})):u.map(w=>typeof w=="string"?{value:w,label:w}:w),p=l.map(w=>typeof w=="string"?{value:w,label:w}:w),m=(w,E)=>{const S={type:"radio",questionKey:E,val:w,responseId:e.id};a(s(S))},g=(w,E,S)=>{const T=w.target.checked,C={questionKey:E,responseId:e.id,value:S.value,label:S.label,isChecked:T,choiceOptions:h};a(o(C))},y=h.length,b=p.length;return _.jsxs(_.Fragment,{children:[_.jsxs(Wt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Su,{text:c,required:f})})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[_.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((w,E)=>_.jsx(at,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:w.label},`choice-${E}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${b}, 1fr)`},children:p.map((w,E)=>_.jsx(at,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(E+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:w.label},`question-${E}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${b},1fr)`},children:p.map((w,E)=>_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(E+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?_.jsx(Mvt,{disabled:r,idx:E,question:w,answer:t,_choices:h,_n:y,onChange:m,response:e}):_.jsx($vt,{disabled:r,idx:E,question:w,answer:t,_choices:h,_n:y,onChange:g})},`question-${E}`))})]})]})}function Fvt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=IJ(),u=p0().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ee,{mb:"md",children:[e.type==="numerical"&&_.jsx(Nvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Dvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Ovt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Rvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Ivt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Pvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(xIe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Avt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(kvt,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&_.jsx(Lvt,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function wL({config:e,location:t,status:n,style:r}){var H;const{storageEngine:i}=xo(),s=Bh(),{updateResponseBlockValidation:o,toggleShowHelpText:a}=rd(),u=z0(),l=O1(),c=n==null?void 0:n.answer,f=Kw(),d=Fh(),h=e,p=N.useMemo(()=>{var q;return((q=h==null?void 0:h.response)==null?void 0:q.filter(Y=>Y.location?Y.location===t:t==="belowStimulus"))||[]},[h==null?void 0:h.response,t]),m=Cvt(p,u,c||{}),[g,y]=N.useState(void 0),b=As(q=>q.iframeAnswers),w=As(q=>q.iframeProvenance),E=As(q=>q.matrixAnswers),S=(h==null?void 0:h.provideFeedback)&&(((H=h==null?void 0:h.correctAnswer)==null?void 0:H.length)||0)>0,T=(h==null?void 0:h.allowFailedTraining)===void 0?!0:h.allowFailedTraining,[C,I]=N.useState(0),R=(h==null?void 0:h.trainingAttempts)||2,[P,D]=N.useState(!1),L=t===((h==null?void 0:h.nextButtonLocation)||"belowStimulus");N.useEffect(()=>{const q=p.find(Y=>Y.type==="iframe");if(b&&q){const Y=q.id;m.setValues({...m.values,[Y]:b[Y]})}},[b]),N.useEffect(()=>{w&&y(w)},[w]),N.useEffect(()=>{const q=p.filter(Y=>Y.type==="matrix-radio"||Y.type==="matrix-checkbox");if(E&&q.length>0){const Y={...m.values};q.forEach($=>{const{id:W}=$;Y[W]={...m.getInputProps(W).value,...E[W]}}),m.setValues(Y)}},[E]),N.useEffect(()=>{s(o({location:t,identifier:`${l}_${u}`,status:m.isValid(),values:wv(m.values),provenanceGraph:g}))},[m.values,l,u,t,s,o,g]);const[M,F]=N.useState(Object.fromEntries(p.map(q=>[q.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),z=(q,Y,$,W,X)=>{F(V=>({...V,[q]:{visible:Y,title:$,message:W,color:X}}))},B=()=>{const q=C+1;I(q);const Y=Object.fromEntries(p.map($=>{var V,K;const W=(K=(V=h.correctAnswer)==null?void 0:V.find(J=>J.id===$.id))==null?void 0:K.answer,X=m.values[$.id];return[$.id,Array.isArray(X)?typeof W=="string"?X.length===1&&W===X[0]:X.length===W.length&&X.every(J=>W.includes(J)):W===X]}));S&&(p.forEach($=>{var W;if(Y[$.id]&&!((W=M[$.id])!=null&&W.message.includes("You've failed to answer this question correctly")))z($.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let X="";q>=R?(X=`You didn't answer this question correctly after ${R} attempts. ${T?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!T&&i&&i.rejectCurrentParticipant(f,"Failed training").then(()=>{setTimeout(()=>{d("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{d("./__trainingFailed")},5e3)})):R-q===1?X="Please try again. You have 1 attempt left.":X=`Please try again. You have ${R-q} attempts left.`,z($.id,!0,"Incorrect Answer",X,"red")}}),D(T&&q>=R||Object.values(Y).every($=>$)&&q<=R))};return _.jsxs("div",{style:r,children:[p.map((q,Y)=>{var W,X;const $=(X=(W=h.correctAnswer)==null?void 0:W.find(V=>V.id===q.id))==null?void 0:X.answer;return _.jsx(ci.Fragment,{children:q.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Fvt,{storedAnswer:c?c[q.id]:void 0,answer:{...m.getInputProps(q.id,{type:q.type==="checkbox"?"checkbox":"input"})},response:q,index:Y+1}),M[q.id].visible&&_.jsxs(Hg,{mb:"md",title:M[q.id].title,color:M[q.id].color,children:[M[q.id].message," ",M[q.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:["Please"," ",_.jsx(Uw,{style:{fontSize:14},onClick:()=>s(a()),children:"click here"})," ","and read the help text carefully."]}),_.jsx("br",{}),_.jsx("br",{}),C>=R&&$&&` The correct answer was: ${$}.`]})]})},`${q.id}-${u}`)}),_.jsxs(Pi,{justify:"right",gap:"xs",children:[S&&L&&_.jsx(wn,{onClick:()=>B(),disabled:!m.isValid()||C>=R,children:"Check Answer"}),L&&_.jsx(ovt,{disabled:S&&!P||!m.isValid(),label:h.nextButtonText||"Next"})]})]})}const a2="@REVISIT_COMMS",jvt={minHeight:"500px",width:"100%",border:0};function Bvt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=rd(),r=Bh(),i=K2e(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=O1(),u=Fh(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${a2}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${a2}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${a2}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${a2}/ANSWERS`:r(t(d.message));break;case`${a2}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${il}${e.path}?trialid=${a}&id=${o}`,style:jvt})}async function cZ(e){const n=await(await fetch(`${il}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function X_({email:e,path:t}){const n=N1();return _.jsxs(nd,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(vs,{order:2,children:_.jsx(at,{span:!0,c:"orange",children:"404"})}),_.jsxs(at,{children:[_.jsx(at,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Hc,{h:"lg"}),_.jsxs(bh,{children:[_.jsx(bh.Item,{children:_.jsx(at,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(bh.Item,{children:_.jsxs(at,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Uw,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Uvt={maxWidth:"100%"};function zvt({currentConfig:e}){const t={...Uvt,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await cZ(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(R1,{mx:"auto",src:`${il}${e.path}`,style:t}):_.jsx(X_,{path:e.path})}function qg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vvt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PC(e){let t,n,r;e.length!==2?(t=qg,n=(a,u)=>qg(e(a),u),r=(a,u)=>e(a)-u):(t=e===qg||e===Vvt?e:Hvt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Hvt(){return 0}function EIe(e){return e===null?NaN:+e}function*qvt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const SIe=PC(qg),zv=SIe.right,Wvt=SIe.left;PC(EIe).center;function Gvt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Yvt(e,t){const n=Gvt(e,t);return n&&Math.sqrt(n)}function xL(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class sl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class bpe extends Map{constructor(t,n=AIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get($q(this,t))}has(t){return super.has($q(this,t))}set(t,n){return super.set(TIe(this,t),n)}delete(t){return super.delete(CIe(this,t))}}class EL extends Set{constructor(t,n=AIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has($q(this,t))}add(t){return super.add(TIe(this,t))}delete(t){return super.delete(CIe(this,t))}}function $q({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function TIe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function CIe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function AIe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Kvt(e,t){return Array.from(t,n=>e[n])}function Xvt(e=qg){if(e===qg)return IIe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function IIe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Qvt=Math.sqrt(50),Jvt=Math.sqrt(10),Zvt=Math.sqrt(2);function SL(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Qvt?10:s>=Jvt?5:s>=Zvt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?SL(e,t,n*2):[a,u,l]}function Mq(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?SL(t,e,n):SL(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function Lq(e,t,n){return t=+t,e=+e,n=+n,SL(e,t,n)[2]}function Vv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Lq(t,e,n):Lq(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Wg(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Fq(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function kIe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?IIe:Xvt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));kIe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(u2(e,n,t),i(e[r],s)>0&&u2(e,n,r);o<a;){for(u2(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?u2(e,n,a):(++a,u2(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function u2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function jq(e,t,n){if(e=Float64Array.from(qvt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Fq(e);if(t>=1)return Wg(e);var r,i=(r-1)*t,s=Math.floor(i),o=Wg(kIe(e,s).subarray(0,s+1)),a=Fq(e.subarray(s+1));return o+(a-o)*(i-s)}}function RIe(e,t,n=EIe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function e1t(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function NIe(e,t){return jq(e,.5,t)}function*t1t(e){for(const t of e)yield*t}function PIe(e){return Array.from(t1t(e))}function Gl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function DIe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function n1t(e,...t){e=new EL(e),t=t.map(r1t);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function r1t(e){return e instanceof EL?e:new EL(e)}function i1t(...e){const t=new EL;for(const n of e)for(const r of n)t.add(r);return t}var s1t={value:()=>{}};function D5(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new k$(n)}function k$(e){this._=e}function o1t(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}k$.prototype=D5.prototype={constructor:k$,on:function(e,t){var n=this._,r=o1t(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=a1t(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=_pe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=_pe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new k$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function a1t(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function _pe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=s1t,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Bq="http://www.w3.org/1999/xhtml";const wpe={svg:"http://www.w3.org/2000/svg",xhtml:Bq,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O5(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wpe.hasOwnProperty(t)?{space:wpe[t],local:e}:e}function u1t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Bq&&t.documentElement.namespaceURI===Bq?t.createElement(e):t.createElementNS(n,e)}}function l1t(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function OIe(e){var t=O5(e);return(t.local?l1t:u1t)(t)}function c1t(){}function fZ(e){return e==null?c1t:function(){return this.querySelector(e)}}function f1t(e){typeof e!="function"&&(e=fZ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new ul(r,this._parents)}function $Ie(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function d1t(){return[]}function MIe(e){return e==null?d1t:function(){return this.querySelectorAll(e)}}function h1t(e){return function(){return $Ie(e.apply(this,arguments))}}function p1t(e){typeof e=="function"?e=h1t(e):e=MIe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new ul(r,i)}function LIe(e){return function(){return this.matches(e)}}function FIe(e){return function(t){return t.matches(e)}}var m1t=Array.prototype.find;function g1t(e){return function(){return m1t.call(this.children,e)}}function y1t(){return this.firstElementChild}function v1t(e){return this.select(e==null?y1t:g1t(typeof e=="function"?e:FIe(e)))}var b1t=Array.prototype.filter;function _1t(){return Array.from(this.children)}function w1t(e){return function(){return b1t.call(this.children,e)}}function x1t(e){return this.selectAll(e==null?_1t:w1t(typeof e=="function"?e:FIe(e)))}function E1t(e){typeof e!="function"&&(e=LIe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ul(r,this._parents)}function jIe(e){return new Array(e.length)}function S1t(){return new ul(this._enter||this._groups.map(jIe),this._parents)}function TL(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}TL.prototype={constructor:TL,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function T1t(e){return function(){return e}}function C1t(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new TL(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function A1t(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new TL(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function I1t(e){return e.__data__}function k1t(e,t){if(!arguments.length)return Array.from(this,I1t);var n=t?A1t:C1t,r=this._parents,i=this._groups;typeof e!="function"&&(e=T1t(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=R1t(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var b=0,w=0,E,S;b<p;++b)if(E=m[b]){for(b>=w&&(w=b+1);!(S=g[w])&&++w<p;);E._next=S||null}}return o=new ul(o,r),o._enter=a,o._exit=u,o}function R1t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function N1t(){return new ul(this._exit||this._groups.map(jIe),this._parents)}function P1t(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function D1t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new ul(a,this._parents)}function O1t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function $1t(e){e||(e=M1t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new ul(i,this._parents).order()}function M1t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function L1t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function F1t(){return Array.from(this)}function j1t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function B1t(){let e=0;for(const t of this)++e;return e}function U1t(){return!this.node()}function z1t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function V1t(e){return function(){this.removeAttribute(e)}}function H1t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function q1t(e,t){return function(){this.setAttribute(e,t)}}function W1t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function G1t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Y1t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function K1t(e,t){var n=O5(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?H1t:V1t:typeof t=="function"?n.local?Y1t:G1t:n.local?W1t:q1t)(n,t))}function BIe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X1t(e){return function(){this.style.removeProperty(e)}}function Q1t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function J1t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Z1t(e,t,n){return arguments.length>1?this.each((t==null?X1t:typeof t=="function"?J1t:Q1t)(e,t,n??"")):oT(this.node(),e)}function oT(e,t){return e.style.getPropertyValue(t)||BIe(e).getComputedStyle(e,null).getPropertyValue(t)}function ebt(e){return function(){delete this[e]}}function tbt(e,t){return function(){this[e]=t}}function nbt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rbt(e,t){return arguments.length>1?this.each((t==null?ebt:typeof t=="function"?nbt:tbt)(e,t)):this.node()[e]}function UIe(e){return e.trim().split(/^|\s+/)}function dZ(e){return e.classList||new zIe(e)}function zIe(e){this._node=e,this._names=UIe(e.getAttribute("class")||"")}zIe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function VIe(e,t){for(var n=dZ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function HIe(e,t){for(var n=dZ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ibt(e){return function(){VIe(this,e)}}function sbt(e){return function(){HIe(this,e)}}function obt(e,t){return function(){(t.apply(this,arguments)?VIe:HIe)(this,e)}}function abt(e,t){var n=UIe(e+"");if(arguments.length<2){for(var r=dZ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?obt:t?ibt:sbt)(n,t))}function ubt(){this.textContent=""}function lbt(e){return function(){this.textContent=e}}function cbt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fbt(e){return arguments.length?this.each(e==null?ubt:(typeof e=="function"?cbt:lbt)(e)):this.node().textContent}function dbt(){this.innerHTML=""}function hbt(e){return function(){this.innerHTML=e}}function pbt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mbt(e){return arguments.length?this.each(e==null?dbt:(typeof e=="function"?pbt:hbt)(e)):this.node().innerHTML}function gbt(){this.nextSibling&&this.parentNode.appendChild(this)}function ybt(){return this.each(gbt)}function vbt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bbt(){return this.each(vbt)}function _bt(e){var t=typeof e=="function"?e:OIe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wbt(){return null}function xbt(e,t){var n=typeof e=="function"?e:OIe(e),r=t==null?wbt:typeof t=="function"?t:fZ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ebt(){var e=this.parentNode;e&&e.removeChild(this)}function Sbt(){return this.each(Ebt)}function Tbt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cbt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Abt(e){return this.select(e?Cbt:Tbt)}function Ibt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kbt(e){return function(t){e.call(this,t,this.__data__)}}function Rbt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Nbt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Pbt(e,t,n){return function(){var r=this.__on,i,s=kbt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Dbt(e,t,n){var r=Rbt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Pbt:Nbt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function qIe(e,t,n){var r=BIe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Obt(e,t){return function(){return qIe(this,e,t)}}function $bt(e,t){return function(){return qIe(this,e,t.apply(this,arguments))}}function Mbt(e,t){return this.each((typeof t=="function"?$bt:Obt)(e,t))}function*Lbt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var hZ=[null];function ul(e,t){this._groups=e,this._parents=t}function eP(){return new ul([[document.documentElement]],hZ)}function Fbt(){return this}ul.prototype=eP.prototype={constructor:ul,select:f1t,selectAll:p1t,selectChild:v1t,selectChildren:x1t,filter:E1t,data:k1t,enter:S1t,exit:N1t,join:P1t,merge:D1t,selection:Fbt,order:O1t,sort:$1t,call:L1t,nodes:F1t,node:j1t,size:B1t,empty:U1t,each:z1t,attr:K1t,style:Z1t,property:rbt,classed:abt,text:fbt,html:mbt,raise:ybt,lower:bbt,append:_bt,insert:xbt,remove:Sbt,clone:Abt,datum:Ibt,on:Dbt,dispatch:Mbt,[Symbol.iterator]:Lbt};function Xr(e){return typeof e=="string"?new ul([[document.querySelector(e)]],[document.documentElement]):new ul([[e]],hZ)}function jbt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function CL(e,t){if(e=jbt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function WIe(e){return typeof e=="string"?new ul([document.querySelectorAll(e)],[document.documentElement]):new ul([$Ie(e)],hZ)}const Uq={capture:!0,passive:!1};function zq(e){e.preventDefault(),e.stopImmediatePropagation()}function Bbt(e){var t=e.document.documentElement,n=Xr(e).on("dragstart.drag",zq,Uq);"onselectstart"in t?n.on("selectstart.drag",zq,Uq):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ubt(e,t){var n=e.document.documentElement,r=Xr(e).on("dragstart.drag",null);t&&(r.on("click.drag",zq,Uq),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function DC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $1(){}var Q_=.7,aT=1/Q_,pS="\\s*([+-]?\\d+)\\s*",vR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zbt=/^#([0-9a-f]{3,8})$/,Vbt=new RegExp(`^rgb\\(${pS},${pS},${pS}\\)$`),Hbt=new RegExp(`^rgb\\(${Hp},${Hp},${Hp}\\)$`),qbt=new RegExp(`^rgba\\(${pS},${pS},${pS},${vR}\\)$`),Wbt=new RegExp(`^rgba\\(${Hp},${Hp},${Hp},${vR}\\)$`),Gbt=new RegExp(`^hsl\\(${vR},${Hp},${Hp}\\)$`),Ybt=new RegExp(`^hsla\\(${vR},${Hp},${Hp},${vR}\\)$`),xpe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DC($1,J_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Epe,formatHex:Epe,formatHex8:Kbt,formatHsl:Xbt,formatRgb:Spe,toString:Spe});function Epe(){return this.rgb().formatHex()}function Kbt(){return this.rgb().formatHex8()}function Xbt(){return GIe(this).formatHsl()}function Spe(){return this.rgb().formatRgb()}function J_(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zbt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Tpe(t):n===3?new aa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?YO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?YO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vbt.exec(e))?new aa(t[1],t[2],t[3],1):(t=Hbt.exec(e))?new aa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qbt.exec(e))?YO(t[1],t[2],t[3],t[4]):(t=Wbt.exec(e))?YO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gbt.exec(e))?Ipe(t[1],t[2]/100,t[3]/100,1):(t=Ybt.exec(e))?Ipe(t[1],t[2]/100,t[3]/100,t[4]):xpe.hasOwnProperty(e)?Tpe(xpe[e]):e==="transparent"?new aa(NaN,NaN,NaN,0):null}function Tpe(e){return new aa(e>>16&255,e>>8&255,e&255,1)}function YO(e,t,n,r){return r<=0&&(e=t=n=NaN),new aa(e,t,n,r)}function pZ(e){return e instanceof $1||(e=J_(e)),e?(e=e.rgb(),new aa(e.r,e.g,e.b,e.opacity)):new aa}function Hv(e,t,n,r){return arguments.length===1?pZ(e):new aa(e,t,n,r??1)}function aa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}DC(aa,Hv,tP($1,{brighter(e){return e=e==null?aT:Math.pow(aT,e),new aa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Q_:Math.pow(Q_,e),new aa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new aa(P_(this.r),P_(this.g),P_(this.b),AL(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cpe,formatHex:Cpe,formatHex8:Qbt,formatRgb:Ape,toString:Ape}));function Cpe(){return`#${m_(this.r)}${m_(this.g)}${m_(this.b)}`}function Qbt(){return`#${m_(this.r)}${m_(this.g)}${m_(this.b)}${m_((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ape(){const e=AL(this.opacity);return`${e===1?"rgb(":"rgba("}${P_(this.r)}, ${P_(this.g)}, ${P_(this.b)}${e===1?")":`, ${e})`}`}function AL(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function P_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function m_(e){return e=P_(e),(e<16?"0":"")+e.toString(16)}function Ipe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rh(e,t,n,r)}function GIe(e){if(e instanceof rh)return new rh(e.h,e.s,e.l,e.opacity);if(e instanceof $1||(e=J_(e)),!e)return new rh;if(e instanceof rh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new rh(o,a,u,e.opacity)}function IL(e,t,n,r){return arguments.length===1?GIe(e):new rh(e,t,n,r??1)}function rh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}DC(rh,IL,tP($1,{brighter(e){return e=e==null?aT:Math.pow(aT,e),new rh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Q_:Math.pow(Q_,e),new rh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new aa(p7(e>=240?e-240:e+120,i,r),p7(e,i,r),p7(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new rh(kpe(this.h),KO(this.s),KO(this.l),AL(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=AL(this.opacity);return`${e===1?"hsl(":"hsla("}${kpe(this.h)}, ${KO(this.s)*100}%, ${KO(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kpe(e){return e=(e||0)%360,e<0?e+360:e}function KO(e){return Math.max(0,Math.min(1,e||0))}function p7(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const YIe=Math.PI/180,KIe=180/Math.PI,kL=18,XIe=.96422,QIe=1,JIe=.82521,ZIe=4/29,mS=6/29,eke=3*mS*mS,Jbt=mS*mS*mS;function tke(e){if(e instanceof qp)return new qp(e.l,e.a,e.b,e.opacity);if(e instanceof Dg)return nke(e);e instanceof aa||(e=pZ(e));var t=v7(e.r),n=v7(e.g),r=v7(e.b),i=m7((.2225045*t+.7168786*n+.0606169*r)/QIe),s,o;return t===n&&n===r?s=o=i:(s=m7((.4360747*t+.3850649*n+.1430804*r)/XIe),o=m7((.0139322*t+.0971045*n+.7141733*r)/JIe)),new qp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function RL(e,t,n,r){return arguments.length===1?tke(e):new qp(e,t,n,r??1)}function qp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}DC(qp,RL,tP($1,{brighter(e){return new qp(this.l+kL*(e??1),this.a,this.b,this.opacity)},darker(e){return new qp(this.l-kL*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=XIe*g7(t),e=QIe*g7(e),n=JIe*g7(n),new aa(y7(3.1338561*t-1.6168667*e-.4906146*n),y7(-.9787684*t+1.9161415*e+.033454*n),y7(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function m7(e){return e>Jbt?Math.pow(e,1/3):e/eke+ZIe}function g7(e){return e>mS?e*e*e:eke*(e-ZIe)}function y7(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function v7(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Zbt(e){if(e instanceof Dg)return new Dg(e.h,e.c,e.l,e.opacity);if(e instanceof qp||(e=tke(e)),e.a===0&&e.b===0)return new Dg(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*KIe;return new Dg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function NL(e,t,n,r){return arguments.length===1?Zbt(e):new Dg(e,t,n,r??1)}function Dg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nke(e){if(isNaN(e.h))return new qp(e.l,0,0,e.opacity);var t=e.h*YIe;return new qp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}DC(Dg,NL,tP($1,{brighter(e){return new Dg(this.h,this.c,this.l+kL*(e??1),this.opacity)},darker(e){return new Dg(this.h,this.c,this.l-kL*(e??1),this.opacity)},rgb(){return nke(this).rgb()}}));var rke=-.14861,mZ=1.78277,gZ=-.29227,$5=-.90649,bR=1.97294,Rpe=bR*$5,Npe=bR*mZ,Ppe=mZ*gZ-$5*rke;function e_t(e){if(e instanceof D_)return new D_(e.h,e.s,e.l,e.opacity);e instanceof aa||(e=pZ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Ppe*r+Rpe*t-Npe*n)/(Ppe+Rpe-Npe),s=r-i,o=(bR*(n-i)-gZ*s)/$5,a=Math.sqrt(o*o+s*s)/(bR*i*(1-i)),u=a?Math.atan2(o,s)*KIe-120:NaN;return new D_(u<0?u+360:u,a,i,e.opacity)}function Vq(e,t,n,r){return arguments.length===1?e_t(e):new D_(e,t,n,r??1)}function D_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}DC(D_,Vq,tP($1,{brighter(e){return e=e==null?aT:Math.pow(aT,e),new D_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Q_:Math.pow(Q_,e),new D_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*YIe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new aa(255*(t+n*(rke*r+mZ*i)),255*(t+n*(gZ*r+$5*i)),255*(t+n*(bR*r)),this.opacity)}}));function ike(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function ske(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return ike((n-r/t)*t,o,i,s,a)}}function oke(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return ike((n-r/t)*t,i,s,o,a)}}const M5=e=>()=>e;function ake(e,t){return function(n){return e+n*t}}function t_t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function L5(e,t){var n=t-e;return n?ake(e,n>180||n<-180?n-360*Math.round(n/360):n):M5(isNaN(e)?t:e)}function n_t(e){return(e=+e)==1?ua:function(t,n){return n-t?t_t(t,n,e):M5(isNaN(t)?n:t)}}function ua(e,t){var n=t-e;return n?ake(e,n):M5(isNaN(e)?t:e)}const _R=function e(t){var n=n_t(t);function r(i,s){var o=n((i=Hv(i)).r,(s=Hv(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ua(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function uke(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Hv(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var r_t=uke(ske),i_t=uke(oke);function yZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function lke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function s_t(e,t){return(lke(t)?yZ:cke)(e,t)}function cke(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=V0(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function fke(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function jf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function dke(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=V0(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Hq=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b7=new RegExp(Hq.source,"g");function o_t(e){return function(){return e}}function a_t(e){return function(t){return e(t)+""}}function vZ(e,t){var n=Hq.lastIndex=b7.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Hq.exec(e))&&(i=b7.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:jf(r,i)})),n=b7.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?a_t(u[0].x):o_t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function V0(e,t){var n=typeof t,r;return t==null||n==="boolean"?M5(t):(n==="number"?jf:n==="string"?(r=J_(t))?(t=r,_R):vZ:t instanceof J_?_R:t instanceof Date?fke:lke(t)?yZ:Array.isArray(t)?cke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dke:jf)(e,t)}function u_t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function l_t(e,t){var n=L5(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function nP(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Dpe=180/Math.PI,qq={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hke(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Dpe,skewX:Math.atan(u)*Dpe,scaleX:o,scaleY:a}}var XO;function c_t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qq:hke(t.a,t.b,t.c,t.d,t.e,t.f)}function f_t(e){return e==null||(XO||(XO=document.createElementNS("http://www.w3.org/2000/svg","g")),XO.setAttribute("transform",e),!(e=XO.transform.baseVal.consolidate()))?qq:(e=e.matrix,hke(e.a,e.b,e.c,e.d,e.e,e.f))}function pke(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:jf(l,f)},{i:m-2,x:jf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:jf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:jf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:jf(l,f)},{i:m-2,x:jf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var mke=pke(c_t,"px, ","px)","deg)"),gke=pke(f_t,", ",")",")"),d_t=1e-12;function Ope(e){return((e=Math.exp(e))+1/e)/2}function h_t(e){return((e=Math.exp(e))-1/e)/2}function p_t(e){return((e=Math.exp(2*e))-1)/(e+1)}const m_t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<d_t)y=Math.log(d/l)/t,g=function(C){return[a+C*h,u+C*p,l*Math.exp(t*C*y)]};else{var b=Math.sqrt(m),w=(d*d-l*l+r*m)/(2*l*n*b),E=(d*d-l*l-r*m)/(2*d*n*b),S=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(E*E+1)-E);y=(T-S)/t,g=function(C){var I=C*y,R=Ope(S),P=l/(n*b)*(R*p_t(t*I+S)-h_t(S));return[a+P*h,u+P*p,l*R/Ope(t*I+S)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function yke(e){return function(t,n){var r=e((t=IL(t)).h,(n=IL(n)).h),i=ua(t.s,n.s),s=ua(t.l,n.l),o=ua(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const g_t=yke(L5);var y_t=yke(ua);function v_t(e,t){var n=ua((e=RL(e)).l,(t=RL(t)).l),r=ua(e.a,t.a),i=ua(e.b,t.b),s=ua(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function vke(e){return function(t,n){var r=e((t=NL(t)).h,(n=NL(n)).h),i=ua(t.c,n.c),s=ua(t.l,n.l),o=ua(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const b_t=vke(L5);var __t=vke(ua);function bke(e){return function t(n){n=+n;function r(i,s){var o=e((i=Vq(i)).h,(s=Vq(s)).h),a=ua(i.s,s.s),u=ua(i.l,s.l),l=ua(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const w_t=bke(L5);var x_t=bke(ua);function bZ(e,t){t===void 0&&(t=e,e=V0);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function E_t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const S_t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:V0,interpolateArray:s_t,interpolateBasis:ske,interpolateBasisClosed:oke,interpolateCubehelix:w_t,interpolateCubehelixLong:x_t,interpolateDate:fke,interpolateDiscrete:u_t,interpolateHcl:b_t,interpolateHclLong:__t,interpolateHsl:g_t,interpolateHslLong:y_t,interpolateHue:l_t,interpolateLab:v_t,interpolateNumber:jf,interpolateNumberArray:yZ,interpolateObject:dke,interpolateRgb:_R,interpolateRgbBasis:r_t,interpolateRgbBasisClosed:i_t,interpolateRound:nP,interpolateString:vZ,interpolateTransformCss:mke,interpolateTransformSvg:gke,interpolateZoom:m_t,piecewise:bZ,quantize:E_t},Symbol.toStringTag,{value:"Module"}));var uT=0,tI=0,l2=0,_ke=1e3,PL,nI,DL=0,Z_=0,F5=0,wR=typeof performance=="object"&&performance.now?performance:Date,wke=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j5(){return Z_||(wke(T_t),Z_=wR.now()+F5)}function T_t(){Z_=0}function xR(){this._call=this._time=this._next=null}xR.prototype=_Z.prototype={constructor:xR,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?j5():+n)+(t==null?0:+t),!this._next&&nI!==this&&(nI?nI._next=this:PL=this,nI=this),this._call=e,this._time=n,Wq()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wq())}};function _Z(e,t,n){var r=new xR;return r.restart(e,t,n),r}function C_t(){j5(),++uT;for(var e=PL,t;e;)(t=Z_-e._time)>=0&&e._call.call(void 0,t),e=e._next;--uT}function $pe(){Z_=(DL=wR.now())+F5,uT=tI=0;try{C_t()}finally{uT=0,I_t(),Z_=0}}function A_t(){var e=wR.now(),t=e-DL;t>_ke&&(F5-=t,DL=e)}function I_t(){for(var e,t=PL,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:PL=n);nI=e,Wq(r)}function Wq(e){if(!uT){tI&&(tI=clearTimeout(tI));var t=e-Z_;t>24?(e<1/0&&(tI=setTimeout($pe,e-wR.now()-F5)),l2&&(l2=clearInterval(l2))):(l2||(DL=wR.now(),l2=setInterval(A_t,_ke)),uT=1,wke($pe))}}function Mpe(e,t,n){var r=new xR;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function k_t(e,t,n){var r=new xR,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?j5():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var R_t=D5("start","end","cancel","interrupt"),N_t=[],xke=0,Lpe=1,Gq=2,R$=3,Fpe=4,Yq=5,N$=6;function B5(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;P_t(e,n,{name:t,index:r,group:i,on:R_t,tween:N_t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xke})}function wZ(e,t){var n=Uh(e,t);if(n.state>xke)throw new Error("too late; already scheduled");return n}function Im(e,t){var n=Uh(e,t);if(n.state>R$)throw new Error("too late; already running");return n}function Uh(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function P_t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=_Z(s,0,n.time);function s(l){n.state=Lpe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Lpe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===R$)return Mpe(o);h.state===Fpe?(h.state=N$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=N$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Mpe(function(){n.state===R$&&(n.state=Fpe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Gq,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Gq){for(n.state=R$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Yq,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Yq&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=N$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Kq(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Gq&&r.state<Yq,r.state=N$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function D_t(e){return this.each(function(){Kq(this,e)})}function O_t(e,t){var n,r;return function(){var i=Im(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function $_t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Im(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function M_t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Uh(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?O_t:$_t)(n,e,t))}function xZ(e,t,n){var r=e._id;return e.each(function(){var i=Im(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Uh(i,r).value[t]}}function Eke(e,t){var n;return(typeof t=="number"?jf:t instanceof J_?_R:(n=J_(t))?(t=n,_R):vZ)(e,t)}function L_t(e){return function(){this.removeAttribute(e)}}function F_t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function j_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function B_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function U_t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function z_t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function V_t(e,t){var n=O5(e),r=n==="transform"?gke:Eke;return this.attrTween(e,typeof t=="function"?(n.local?z_t:U_t)(n,r,xZ(this,"attr."+e,t)):t==null?(n.local?F_t:L_t)(n):(n.local?B_t:j_t)(n,r,t))}function H_t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function q_t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function W_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&q_t(e,s)),n}return i._value=t,i}function G_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&H_t(e,s)),n}return i._value=t,i}function Y_t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=O5(e);return this.tween(n,(r.local?W_t:G_t)(r,t))}function K_t(e,t){return function(){wZ(this,e).delay=+t.apply(this,arguments)}}function X_t(e,t){return t=+t,function(){wZ(this,e).delay=t}}function Q_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?K_t:X_t)(t,e)):Uh(this.node(),t).delay}function J_t(e,t){return function(){Im(this,e).duration=+t.apply(this,arguments)}}function Z_t(e,t){return t=+t,function(){Im(this,e).duration=t}}function ewt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?J_t:Z_t)(t,e)):Uh(this.node(),t).duration}function twt(e,t){if(typeof t!="function")throw new Error;return function(){Im(this,e).ease=t}}function nwt(e){var t=this._id;return arguments.length?this.each(twt(t,e)):Uh(this.node(),t).ease}function rwt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Im(this,e).ease=n}}function iwt(e){if(typeof e!="function")throw new Error;return this.each(rwt(this._id,e))}function swt(e){typeof e!="function"&&(e=LIe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new m0(r,this._parents,this._name,this._id)}function owt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new m0(o,this._parents,this._name,this._id)}function awt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function uwt(e,t,n){var r,i,s=awt(t)?wZ:Im;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function lwt(e,t){var n=this._id;return arguments.length<2?Uh(this.node(),n).on.on(e):this.each(uwt(n,e,t))}function cwt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function fwt(){return this.on("end.remove",cwt(this._id))}function dwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fZ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,B5(l[d],t,n,d,l,Uh(c,n)));return new m0(s,this._parents,t,n)}function hwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=MIe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Uh(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&B5(h,t,n,m,d,p);s.push(d),o.push(c)}return new m0(s,o,t,n)}var pwt=eP.prototype.constructor;function mwt(){return new pwt(this._groups,this._parents)}function gwt(e,t){var n,r,i;return function(){var s=oT(this,e),o=(this.style.removeProperty(e),oT(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Ske(e){return function(){this.style.removeProperty(e)}}function ywt(e,t,n){var r,i=n+"",s;return function(){var o=oT(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function vwt(e,t,n){var r,i,s;return function(){var o=oT(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),oT(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function bwt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Im(this,e),l=u.on,c=u.value[s]==null?a||(a=Ske(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function _wt(e,t,n){var r=(e+="")=="transform"?mke:Eke;return t==null?this.styleTween(e,gwt(e,r)).on("end.style."+e,Ske(e)):typeof t=="function"?this.styleTween(e,vwt(e,r,xZ(this,"style."+e,t))).each(bwt(this._id,e)):this.styleTween(e,ywt(e,r,t),n).on("end.style."+e,null)}function wwt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xwt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&wwt(e,o,n)),r}return s._value=t,s}function Ewt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,xwt(e,t,n??""))}function Swt(e){return function(){this.textContent=e}}function Twt(e){return function(){var t=e(this);this.textContent=t??""}}function Cwt(e){return this.tween("text",typeof e=="function"?Twt(xZ(this,"text",e)):Swt(e==null?"":e+""))}function Awt(e){return function(t){this.textContent=e.call(this,t)}}function Iwt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Awt(i)),t}return r._value=e,r}function kwt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Iwt(e))}function Rwt(){for(var e=this._name,t=this._id,n=Tke(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Uh(u,t);B5(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new m0(r,this._parents,e,n)}function Nwt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Im(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Pwt=0;function m0(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Tke(){return++Pwt}var ig=eP.prototype;m0.prototype={constructor:m0,select:dwt,selectAll:hwt,selectChild:ig.selectChild,selectChildren:ig.selectChildren,filter:swt,merge:owt,selection:mwt,transition:Rwt,call:ig.call,nodes:ig.nodes,node:ig.node,size:ig.size,empty:ig.empty,each:ig.each,on:lwt,attr:V_t,attrTween:Y_t,style:_wt,styleTween:Ewt,text:Cwt,textTween:kwt,remove:fwt,tween:M_t,delay:Q_t,duration:ewt,ease:nwt,easeVarying:iwt,end:Nwt,[Symbol.iterator]:ig[Symbol.iterator]};const Dwt=e=>+e;function Owt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $wt={time:null,delay:0,duration:250,ease:Owt};function Mwt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Lwt(e){var t,n;e instanceof m0?(t=e._id,e=e._name):(t=Tke(),(n=$wt).time=j5(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&B5(u,e,t,l,o,n||Mwt(u,t));return new m0(r,this._parents,e,t)}eP.prototype.interrupt=D_t;eP.prototype.transition=Lwt;const _7=e=>()=>e;function Fwt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function jwt(e){e.stopImmediatePropagation()}function w7(e){e.preventDefault(),e.stopImmediatePropagation()}var jpe={name:"drag"},x7={name:"space"},Yx={name:"handle"},Kx={name:"center"};const{abs:Bpe,max:Za,min:eu}=Math;function Upe(e){return[+e[0],+e[1]]}function Xq(e){return[Upe(e[0]),Upe(e[1])]}var P$={name:"x",handles:["w","e"].map(ER),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},D$={name:"y",handles:["n","s"].map(ER),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Bwt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ER),input:function(e){return e==null?null:Xq(e)},output:function(e){return e}},sg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zpe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Vpe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Uwt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},zwt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ER(e){return{type:e}}function Vwt(e){return!e.ctrlKey&&!e.button}function Hwt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function qwt(){return navigator.maxTouchPoints||"ontouchstart"in this}function E7(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Wwt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Cke(){return EZ(P$)}function Ake(){return EZ(D$)}function Ike(){return EZ(Bwt)}function EZ(e){var t=Hwt,n=Vwt,r=qwt,i=!0,s=D5("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([ER("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",sg.overlay).merge(y).each(function(){var w=E7(this).extent;Xr(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),g.selectAll(".selection").data([ER("selection")]).enter().append("rect").attr("class","selection").attr("cursor",sg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(w){return w.type});b.exit().remove(),b.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return sg[w.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,b){g.tween?g.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,E=w.__brush,S=c(w,arguments),T=E.selection,C=e.input(typeof y=="function"?y.apply(this,arguments):y,E.extent),I=V0(T,C);function R(P){E.selection=P===1&&C===null?null:I(P),l.call(w),S.brush()}return T!==null&&C!==null?R:R(1)}):g.each(function(){var w=this,E=arguments,S=w.__brush,T=e.input(typeof y=="function"?y.apply(w,E):y,S.extent),C=c(w,E).beforestart();Kq(w),S.selection=T===null?null:T,l.call(w),C.start(b).brush(b).end(b)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Xr(this),y=E7(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,b){var w=g.__brush.emitter;return w&&(!b||!w.clean)?w:new f(g,y,b)}function f(g,y,b){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,b){var w=Xr(this.that).datum();s.call(g,this.that,new Fwt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),w)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,b=g.target.__data__.type,w=(i&&g.metaKey?b="overlay":b)==="selection"?jpe:i&&g.altKey?Kx:Yx,E=e===D$?null:Uwt[b],S=e===P$?null:zwt[b],T=E7(y),C=T.extent,I=T.selection,R=C[0][0],P,D,L=C[0][1],M,F,z=C[1][0],B,H,q=C[1][1],Y,$,W=0,X=0,V,K=E&&S&&i&&g.shiftKey,J,ue,_e=Array.from(g.touches||[g],Ae=>{const Be=Ae.identifier;return Ae=CL(Ae,y),Ae.point0=Ae.slice(),Ae.identifier=Be,Ae});Kq(y);var be=c(y,arguments,!0).beforestart();if(b==="overlay"){I&&(V=!0);const Ae=[_e[0],_e[1]||_e[0]];T.selection=I=[[P=e===D$?R:eu(Ae[0][0],Ae[1][0]),M=e===P$?L:eu(Ae[0][1],Ae[1][1])],[B=e===D$?z:Za(Ae[0][0],Ae[1][0]),Y=e===P$?q:Za(Ae[0][1],Ae[1][1])]],_e.length>1&&ft(g)}else P=I[0][0],M=I[0][1],B=I[1][0],Y=I[1][1];D=P,F=M,H=B,$=Y;var xe=Xr(y).attr("pointer-events","none"),ke=xe.selectAll(".overlay").attr("cursor",sg[b]);if(g.touches)be.moved=Re,be.ended=Ze;else{var je=Xr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Ze,!0);i&&je.on("keydown.brush",It,!0).on("keyup.brush",bt,!0),Bbt(g.view)}l.call(y),be.start(g,w.name);function Re(Ae){for(const Be of Ae.changedTouches||[Ae])for(const st of _e)st.identifier===Be.identifier&&(st.cur=CL(Be,y));if(K&&!J&&!ue&&_e.length===1){const Be=_e[0];Bpe(Be.cur[0]-Be[0])>Bpe(Be.cur[1]-Be[1])?ue=!0:J=!0}for(const Be of _e)Be.cur&&(Be[0]=Be.cur[0],Be[1]=Be.cur[1]);V=!0,w7(Ae),ft(Ae)}function ft(Ae){const Be=_e[0],st=Be.point0;var _t;switch(W=Be[0]-st[0],X=Be[1]-st[1],w){case x7:case jpe:{E&&(W=Za(R-P,eu(z-B,W)),D=P+W,H=B+W),S&&(X=Za(L-M,eu(q-Y,X)),F=M+X,$=Y+X);break}case Yx:{_e[1]?(E&&(D=Za(R,eu(z,_e[0][0])),H=Za(R,eu(z,_e[1][0])),E=1),S&&(F=Za(L,eu(q,_e[0][1])),$=Za(L,eu(q,_e[1][1])),S=1)):(E<0?(W=Za(R-P,eu(z-P,W)),D=P+W,H=B):E>0&&(W=Za(R-B,eu(z-B,W)),D=P,H=B+W),S<0?(X=Za(L-M,eu(q-M,X)),F=M+X,$=Y):S>0&&(X=Za(L-Y,eu(q-Y,X)),F=M,$=Y+X));break}case Kx:{E&&(D=Za(R,eu(z,P-W*E)),H=Za(R,eu(z,B+W*E))),S&&(F=Za(L,eu(q,M-X*S)),$=Za(L,eu(q,Y+X*S)));break}}H<D&&(E*=-1,_t=P,P=B,B=_t,_t=D,D=H,H=_t,b in zpe&&ke.attr("cursor",sg[b=zpe[b]])),$<F&&(S*=-1,_t=M,M=Y,Y=_t,_t=F,F=$,$=_t,b in Vpe&&ke.attr("cursor",sg[b=Vpe[b]])),T.selection&&(I=T.selection),J&&(D=I[0][0],H=I[1][0]),ue&&(F=I[0][1],$=I[1][1]),(I[0][0]!==D||I[0][1]!==F||I[1][0]!==H||I[1][1]!==$)&&(T.selection=[[D,F],[H,$]],l.call(y),be.brush(Ae,w.name))}function Ze(Ae){if(jwt(Ae),Ae.touches){if(Ae.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Ubt(Ae.view,V),je.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);xe.attr("pointer-events","all"),ke.attr("cursor",sg.overlay),T.selection&&(I=T.selection),Wwt(I)&&(T.selection=null,l.call(y)),be.end(Ae,w.name)}function It(Ae){switch(Ae.keyCode){case 16:{K=E&&S;break}case 18:{w===Yx&&(E&&(B=H-W*E,P=D+W*E),S&&(Y=$-X*S,M=F+X*S),w=Kx,ft(Ae));break}case 32:{(w===Yx||w===Kx)&&(E<0?B=H-W:E>0&&(P=D-W),S<0?Y=$-X:S>0&&(M=F-X),w=x7,ke.attr("cursor",sg.selection),ft(Ae));break}default:return}w7(Ae)}function bt(Ae){switch(Ae.keyCode){case 16:{K&&(J=ue=K=!1,ft(Ae));break}case 18:{w===Kx&&(E<0?B=H:E>0&&(P=D),S<0?Y=$:S>0&&(M=F),w=Yx,ft(Ae));break}case 32:{w===x7&&(Ae.altKey?(E&&(B=H-W*E,P=D+W*E),S&&(Y=$-X*S,M=F+X*S),w=Kx):(E<0?B=H:E>0&&(P=D),S<0?Y=$:S>0&&(M=F),w=Yx),ke.attr("cursor",sg[b]),ft(Ae));break}default:return}w7(Ae)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=Xq(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:_7(Xq(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:_7(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:_7(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const Qq=Math.PI,Jq=2*Qq,Fb=1e-6,Gwt=Jq-Fb;function kke(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ywt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return kke;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let SZ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?kke:Ywt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Fb)if(!(Math.abs(f*u-l*c)>Fb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),b=Math.sqrt(d),w=s*Math.tan((Qq-Math.acos((m+d-g)/(2*y*b)))/2),E=w/b,S=w/y;Math.abs(E-1)>Fb&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+S*u},${this._y1=n+S*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Fb||Math.abs(this._y1-c)>Fb)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Jq+Jq),d>Gwt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Fb&&this._append`A${r},${r},0,${+(d>=Qq)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function U5(){return new SZ}U5.prototype=SZ.prototype;const Gg=11102230246251565e-32,tu=134217729,Kwt=(3+8*Gg)*Gg;function S7(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Xwt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function rP(e){return new Float64Array(e)}const Qwt=(3+16*Gg)*Gg,Jwt=(2+12*Gg)*Gg,Zwt=(9+64*Gg)*Gg*Gg,Xx=rP(4),Hpe=rP(8),qpe=rP(12),Wpe=rP(16),Bu=rP(4);function ext(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,b,w,E,S,T,C,I;const R=e-i,P=n-i,D=t-s,L=r-s;E=R*L,d=tu*R,h=d-(d-R),p=R-h,d=tu*L,m=d-(d-L),g=L-m,S=p*g-(E-h*m-p*m-h*g),T=D*P,d=tu*D,h=d-(d-D),p=D-h,d=tu*P,m=d-(d-P),g=P-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,Xx[0]=S-(y+f)+(f-C),b=E+y,f=b-E,w=E-(b-f)+(y-f),y=w-T,f=w-y,Xx[1]=w-(y+f)+(f-T),I=b+y,f=I-b,Xx[2]=b-(I-f)+(y-f),Xx[3]=I;let M=Xwt(4,Xx),F=Jwt*o;if(M>=F||-M>=F||(f=e-R,a=e-(R+f)+(f-i),f=n-P,l=n-(P+f)+(f-i),f=t-D,u=t-(D+f)+(f-s),f=r-L,c=r-(L+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(F=Zwt*o+Kwt*Math.abs(M),M+=R*c+L*a-(D*l+P*u),M>=F||-M>=F))return M;E=a*L,d=tu*a,h=d-(d-a),p=a-h,d=tu*L,m=d-(d-L),g=L-m,S=p*g-(E-h*m-p*m-h*g),T=u*P,d=tu*u,h=d-(d-u),p=u-h,d=tu*P,m=d-(d-P),g=P-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,Bu[0]=S-(y+f)+(f-C),b=E+y,f=b-E,w=E-(b-f)+(y-f),y=w-T,f=w-y,Bu[1]=w-(y+f)+(f-T),I=b+y,f=I-b,Bu[2]=b-(I-f)+(y-f),Bu[3]=I;const z=S7(4,Xx,4,Bu,Hpe);E=R*c,d=tu*R,h=d-(d-R),p=R-h,d=tu*c,m=d-(d-c),g=c-m,S=p*g-(E-h*m-p*m-h*g),T=D*l,d=tu*D,h=d-(d-D),p=D-h,d=tu*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,Bu[0]=S-(y+f)+(f-C),b=E+y,f=b-E,w=E-(b-f)+(y-f),y=w-T,f=w-y,Bu[1]=w-(y+f)+(f-T),I=b+y,f=I-b,Bu[2]=b-(I-f)+(y-f),Bu[3]=I;const B=S7(z,Hpe,4,Bu,qpe);E=a*c,d=tu*a,h=d-(d-a),p=a-h,d=tu*c,m=d-(d-c),g=c-m,S=p*g-(E-h*m-p*m-h*g),T=u*l,d=tu*u,h=d-(d-u),p=u-h,d=tu*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,Bu[0]=S-(y+f)+(f-C),b=E+y,f=b-E,w=E-(b-f)+(y-f),y=w-T,f=w-y,Bu[1]=w-(y+f)+(f-T),I=b+y,f=I-b,Bu[2]=b-(I-f)+(y-f),Bu[3]=I;const H=S7(B,qpe,4,Bu,Wpe);return Wpe[H-1]}function QO(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Qwt*l?u:-ext(e,t,n,r,i,s,l)}const Gpe=Math.pow(2,-52),JO=new Uint32Array(512);class OL{static from(t,n=sxt,r=oxt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new OL(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let R=0;R<o;R++){const P=t[2*R],D=t[2*R+1];P<a&&(a=P),D<u&&(u=D),P>l&&(l=P),D>c&&(c=D),this._ids[R]=R}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let R=0,P=1/0;R<o;R++){const D=T7(f,d,t[2*R],t[2*R+1]);D<P&&(h=R,P=D)}const g=t[2*h],y=t[2*h+1];for(let R=0,P=1/0;R<o;R++){if(R===h)continue;const D=T7(g,y,t[2*R],t[2*R+1]);D<P&&D>0&&(p=R,P=D)}let b=t[2*p],w=t[2*p+1],E=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const P=rxt(g,y,b,w,t[2*R],t[2*R+1]);P<E&&(m=R,E=P)}let S=t[2*m],T=t[2*m+1];if(E===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];VE(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let P=0;for(let D=0,L=-1/0;D<o;D++){const M=this._ids[D],F=this._dists[M];F>L&&(R[P++]=M,L=F)}this.hull=R.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(QO(g,y,b,w,S,T)<0){const R=p,P=b,D=w;p=m,b=S,w=T,m=R,S=P,T=D}const C=ixt(g,y,b,w,S,T);this._cx=C.x,this._cy=C.y;for(let R=0;R<o;R++)this._dists[R]=T7(t[2*R],t[2*R+1],C.x,C.y);VE(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(S,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let R=0,P,D;R<this._ids.length;R++){const L=this._ids[R],M=t[2*L],F=t[2*L+1];if(R>0&&Math.abs(M-P)<=Gpe&&Math.abs(F-D)<=Gpe||(P=M,D=F,L===h||L===p||L===m))continue;let z=0;for(let $=0,W=this._hashKey(M,F);$<this._hashSize&&(z=s[(W+$)%this._hashSize],!(z!==-1&&z!==r[z]));$++);z=n[z];let B=z,H;for(;H=r[B],QO(M,F,t[2*B],t[2*B+1],t[2*H],t[2*H+1])>=0;)if(B=H,B===z){B=-1;break}if(B===-1)continue;let q=this._addTriangle(B,L,r[B],-1,-1,i[B]);i[L]=this._legalize(q+2),i[B]=q,I++;let Y=r[B];for(;H=r[Y],QO(M,F,t[2*Y],t[2*Y+1],t[2*H],t[2*H+1])<0;)q=this._addTriangle(Y,L,H,i[L],-1,i[Y]),i[L]=this._legalize(q+2),r[Y]=Y,I--,Y=H;if(B===z)for(;H=n[B],QO(M,F,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)q=this._addTriangle(H,L,B,-1,i[B],i[H]),this._legalize(q+2),i[H]=q,r[B]=B,I--,B=H;this._hullStart=n[L]=B,r[B]=n[Y]=L,r[L]=Y,s[this._hashKey(M,F)]=L,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(I);for(let R=0,P=this._hullStart;R<I;R++)this.hull[R]=P,P=r[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(txt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=JO[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(nxt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<JO.length&&(JO[s++]=b)}else{if(s===0)break;t=JO[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function txt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function T7(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function nxt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function rxt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function ixt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function VE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;c2(e,i,s),t[e[n]]>t[e[r]]&&c2(e,n,r),t[e[s]]>t[e[r]]&&c2(e,s,r),t[e[n]]>t[e[s]]&&c2(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;c2(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(VE(e,t,s,r),VE(e,t,n,o-1)):(VE(e,t,n,o-1),VE(e,t,s,r))}}function c2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function sxt(e){return e[0]}function oxt(e){return e[1]}const Ype=1e-6;class g_{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Ype||Math.abs(this._y1-s)>Ype)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Zq{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let axt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,b,w;m<y;m+=3,g+=2){const E=r[m]*2,S=r[m+1]*2,T=r[m+2]*2,C=t[E],I=t[E+1],R=t[S],P=t[S+1],D=t[T],L=t[T+1],M=R-C,F=P-I,z=D-C,B=L-I,H=(M*B-F*z)*2;if(Math.abs(H)<1e-9){if(s===void 0){s=o=0;for(const Y of n)s+=t[Y*2],o+=t[Y*2+1];s/=n.length,o/=n.length}const q=1e9*Math.sign((s-C)*B-(o-I)*z);b=(C+D)/2-q*B,w=(I+L)/2+q*z}else{const q=1/H,Y=M*M+F*F,$=z*z+B*B;b=C+(B*Y-F*$)*q,w=I+(M*$-z*Y)*q}a[g]=b,a[g+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new g_:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],b=o[p+1];this._renderSegment(m,g,y,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new g_:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new g_:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Zq;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,b,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,b):i=[y,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const uxt=2*Math.PI,Qx=Math.pow;function lxt(e){return e[0]}function cxt(e){return e[1]}function fxt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function dxt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class TZ{static from(t,n=lxt,r=cxt,i){return new TZ("length"in t?hxt(t,n,r,i):Float64Array.from(pxt(t,n,r,i)))}constructor(t){this._delaunator=new OL(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&fxt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=dxt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new OL(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new axt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Qx(n-l[t*2],2)+Qx(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=Qx(n-l[p*2],2)+Qx(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Qx(n-l[h*2],2)+Qx(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new g_:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new g_:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,uxt)}return r&&r.value()}renderHull(t){const n=t==null?t=new g_:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Zq;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new g_:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Zq;return this.renderTriangle(t,n),n.value()}}function hxt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*pxt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Kpe={},C7={},A7=34,f2=10,I7=13;function Rke(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function mxt(e,t){var n=Rke(e);return function(r,i){return t(n(r),i,e)}}function Xpe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function kl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function gxt(e){return e<0?"-"+kl(-e,6):e>9999?"+"+kl(e,6):kl(e,4)}function yxt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":gxt(e.getUTCFullYear())+"-"+kl(e.getUTCMonth()+1,2)+"-"+kl(e.getUTCDate(),2)+(i?"T"+kl(t,2)+":"+kl(n,2)+":"+kl(r,2)+"."+kl(i,3)+"Z":r?"T"+kl(t,2)+":"+kl(n,2)+":"+kl(r,2)+"Z":n||t?"T"+kl(t,2)+":"+kl(n,2)+"Z":"")}function Nke(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?mxt(g,d):Rke(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,b=p<=0,w=!1;f.charCodeAt(p-1)===f2&&--p,f.charCodeAt(p-1)===I7&&--p;function E(){if(b)return C7;if(w)return w=!1,Kpe;var T,C=m,I;if(f.charCodeAt(C)===A7){for(;m++<p&&f.charCodeAt(m)!==A7||f.charCodeAt(++m)===A7;);return(T=m)>=p?b=!0:(I=f.charCodeAt(m++))===f2?w=!0:I===I7&&(w=!0,f.charCodeAt(m)===f2&&++m),f.slice(C+1,T-1).replace(/""/g,'"')}for(;m<p;){if((I=f.charCodeAt(T=m++))===f2)w=!0;else if(I===I7)w=!0,f.charCodeAt(m)===f2&&++m;else if(I!==n)continue;return f.slice(C,T)}return b=!0,f.slice(C,p)}for(;(y=E())!==C7;){for(var S=[];y!==Kpe&&y!==C7;)S.push(y),y=E();d&&(S=d(S,g++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Xpe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Xpe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?yxt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var vxt=Nke(","),bxt=vxt.parse;function _xt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function wxt(e,t){return fetch(e,t).then(_xt)}function xxt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),wxt(t,n).then(function(i){return e(i,r)})}}var Pke=xxt(bxt);function Ext(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Sxt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Dke(this.cover(t,n),t,n,e)}function Dke(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[y]=o,e}function Txt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Dke(this,o[n],a[n],e[n]);return this}function Cxt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Axt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ixt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Qu(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function kxt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Qu(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Qu(h[3],g,y,u,l),new Qu(h[2],o,y,g,l),new Qu(h[1],g,a,u,y),new Qu(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var S=Math.sqrt(n=E);i=e-S,s=t-S,c=e+S,f=t+S,r=h.data}}return r}function Rxt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Nxt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Pxt(){return this._root}function Dxt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Oxt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Qu(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Qu(i,l,c,a,u)),(i=r[2])&&t.push(new Qu(i,s,c,l,u)),(i=r[1])&&t.push(new Qu(i,l,o,a,c)),(i=r[0])&&t.push(new Qu(i,s,o,l,c))}return this}function $xt(e){var t=[],n=[],r;for(this._root&&t.push(new Qu(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Qu(s,o,a,c,f)),(s=i[1])&&t.push(new Qu(s,c,a,u,f)),(s=i[2])&&t.push(new Qu(s,o,f,c,l)),(s=i[3])&&t.push(new Qu(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Mxt(e){return e[0]}function Lxt(e){return arguments.length?(this._x=e,this):this._x}function Fxt(e){return e[1]}function jxt(e){return arguments.length?(this._y=e,this):this._y}function CZ(e,t,n){var r=new AZ(t??Mxt,n??Fxt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function AZ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Qpe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var gl=CZ.prototype=AZ.prototype;gl.copy=function(){var e=new AZ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Qpe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Qpe(r));return e};gl.add=Sxt;gl.addAll=Txt;gl.cover=Cxt;gl.data=Axt;gl.extent=Ixt;gl.find=kxt;gl.remove=Rxt;gl.removeAll=Nxt;gl.root=Pxt;gl.size=Dxt;gl.visit=Oxt;gl.visitAfter=$xt;gl.x=Lxt;gl.y=jxt;function tl(e){return function(){return e}}function Jy(e){return(e()-.5)*1e-6}function Bxt(e){return e.x+e.vx}function Uxt(e){return e.y+e.vy}function zxt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=tl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=CZ(t,Bxt,Uxt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(w,E,S,T,C){var I=w.data,R=w.r,P=m+R;if(I){if(I.index>d.index){var D=h-I.x-I.vx,L=p-I.y-I.vy,M=D*D+L*L;M<P*P&&(D===0&&(D=Jy(r),M+=D*D),L===0&&(L=Jy(r),M+=L*L),M=(P-(M=Math.sqrt(M)))/M*i,d.vx+=(D*=M)*(P=(R*=R)/(g+R)),d.vy+=(L*=M)*P,I.vx-=D*(P=1-P),I.vy-=L*P)}return}return E>h+P||T<h-P||S>p+P||C<p-P}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:tl(+l),u(),o):e},o}function Vxt(e){return e.index}function Jpe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Hxt(e){var t=Vxt,n=f,r,i=tl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,b=e.length;y<c;++y)for(var w=0,E,S,T,C,I,R,P;w<b;++w)E=e[w],S=E.source,T=E.target,C=T.x+T.vx-S.x-S.vx||Jy(l),I=T.y+T.vy-S.y-S.vy||Jy(l),R=Math.sqrt(C*C+I*I),R=(R-s[w])/R*g*r[w],C*=R,I*=R,T.vx-=C*(P=u[w]),T.vy-=I*P,S.vx+=C*(P=1-P),S.vy+=I*P}function h(){if(o){var g,y=o.length,b=e.length,w=new Map(o.map((S,T)=>[t(S,T,o),S])),E;for(g=0,a=new Array(y);g<b;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=Jpe(w,E.source)),typeof E.target!="object"&&(E.target=Jpe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:tl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:tl(+g),m(),d):i},d}const qxt=1664525,Wxt=1013904223,Zpe=4294967296;function Gxt(){let e=1;return()=>(e=(qxt*e+Wxt)%Zpe)/Zpe}function Yxt(e){return e.x}function Kxt(e){return e.y}var Xxt=10,Qxt=Math.PI*(3-Math.sqrt(5));function Jxt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=_Z(f),l=D5("tick","end"),c=Gxt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,b;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<y;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=Xxt*Math.sqrt(.5+m),w=m*Qxt;y.x=b*Math.cos(w),y.y=b*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var b=0,w=e.length,E,S,T,C,I;for(y==null?y=1/0:y*=y,b=0;b<w;++b)C=e[b],E=m-C.x,S=g-C.y,T=E*E+S*S,T<y&&(I=C,y=T);return I},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Zxt(){var e,t,n,r,i=tl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=CZ(e,Yxt,Kxt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,b+=g*m.x,w+=g*m.y);h.x=b/y,h.y=w/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,w=g-p,E=y*y+b*b;if(w*w/u<E)return E<a&&(y===0&&(y=Jy(n),E+=y*y),b===0&&(b=Jy(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=y*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Jy(n),E+=y*y),b===0&&(b=Jy(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(w=s[h.data.index]*r/E,t.vx+=y*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:tl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function eEt(e){var t=tl(.1),n,r,i;typeof e!="function"&&(e=tl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:tl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:tl(+a),o(),s):e},s}function tEt(e){var t=tl(.1),n,r,i;typeof e!="function"&&(e=tl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:tl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:tl(+a),o(),s):e},s}function nEt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $L(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function lT(e){return e=$L(Math.abs(e)),e?e[1]:NaN}function rEt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function iEt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sEt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ew(e){if(!(t=sEt.exec(e)))throw new Error("invalid format: "+e);var t;return new IZ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ew.prototype=IZ.prototype;function IZ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}IZ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oEt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Oke;function aEt(e,t){var n=$L(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Oke=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+$L(e,Math.max(0,t+s-1))[0]}function eme(e,t){var n=$L(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tme={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nEt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eme(e*100,t),r:eme,s:aEt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nme(e){return e}var rme=Array.prototype.map,ime=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $ke(e){var t=e.grouping===void 0||e.thousands===void 0?nme:rEt(rme.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?nme:iEt(rme.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=ew(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,w=f.precision,E=f.trim,S=f.type;S==="n"?(b=!0,S="g"):tme[S]||(w===void 0&&(w=12),E=!0,S="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",C=m==="$"?r:/[%p]/.test(S)?o:"",I=tme[S],R=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(D){var L=T,M=C,F,z,B;if(S==="c")M=I(D)+M,D="";else{D=+D;var H=D<0||1/D<0;if(D=isNaN(D)?u:I(Math.abs(D),w),E&&(D=oEt(D)),H&&+D==0&&p!=="+"&&(H=!1),L=(H?p==="("?p:a:p==="-"||p==="("?"":p)+L,M=(S==="s"?ime[8+Oke/3]:"")+M+(H&&p==="("?")":""),R){for(F=-1,z=D.length;++F<z;)if(B=D.charCodeAt(F),48>B||B>57){M=(B===46?i+D.slice(F+1):D.slice(F))+M,D=D.slice(0,F);break}}}b&&!g&&(D=t(D,1/0));var q=L.length+D.length+M.length,Y=q<y?new Array(y-q+1).join(d):"";switch(b&&g&&(D=t(Y+D,Y.length?y-M.length:1/0),Y=""),h){case"<":D=L+D+M+Y;break;case"=":D=L+Y+D+M;break;case"^":D=Y.slice(0,q=Y.length>>1)+L+D+M+Y.slice(q);break;default:D=Y+L+D+M;break}return s(D)}return P.toString=function(){return f+""},P}function c(f,d){var h=l((f=ew(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(lT(d)/3)))*3,m=Math.pow(10,-p),g=ime[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var ZO,M1,kZ;uEt({thousands:",",grouping:[3],currency:["$",""]});function uEt(e){return ZO=$ke(e),M1=ZO.format,kZ=ZO.formatPrefix,ZO}function Mke(e){return Math.max(0,-lT(Math.abs(e)))}function Lke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lT(t)/3)))*3-lT(Math.abs(e)))}function Fke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,lT(t)-lT(e))+1}var ln=1e-6,ML=1e-12,dr=Math.PI,zs=dr/2,LL=dr/4,ll=dr*2,Js=180/dr,lr=dr/180,$r=Math.abs,OC=Math.atan,id=Math.atan2,fn=Math.cos,e3=Math.ceil,jke=Math.exp,eW=Math.hypot,FL=Math.log,k7=Math.pow,rn=Math.sin,Wf=Math.sign||function(e){return e>0?1:e<0?-1:0},cl=Math.sqrt,RZ=Math.tan;function Bke(e){return e>1?0:e<-1?dr:Math.acos(e)}function uc(e){return e>1?zs:e<-1?-zs:Math.asin(e)}function Da(){}function jL(e,t){e&&ome.hasOwnProperty(e.type)&&ome[e.type](e,t)}var sme={Feature:function(e,t){jL(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)jL(n[r].geometry,t)}},ome={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){tW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)tW(n[r],t,0)},Polygon:function(e,t){ame(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ame(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)jL(n[r],t)}};function tW(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function ame(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)tW(e[n],t,1);t.polygonEnd()}function Eg(e,t){e&&sme.hasOwnProperty(e.type)?sme[e.type](e,t):jL(e,t)}var BL=new sl,UL=new sl,Uke,zke,nW,rW,iW,sm={point:Da,lineStart:Da,lineEnd:Da,polygonStart:function(){BL=new sl,sm.lineStart=lEt,sm.lineEnd=cEt},polygonEnd:function(){var e=+BL;UL.add(e<0?ll+e:e),this.lineStart=this.lineEnd=this.point=Da},sphere:function(){UL.add(ll)}};function lEt(){sm.point=fEt}function cEt(){Vke(Uke,zke)}function fEt(e,t){sm.point=Vke,Uke=e,zke=t,e*=lr,t*=lr,nW=e,rW=fn(t=t/2+LL),iW=rn(t)}function Vke(e,t){e*=lr,t*=lr,t=t/2+LL;var n=e-nW,r=n>=0?1:-1,i=r*n,s=fn(t),o=rn(t),a=iW*o,u=rW*s+a*fn(i),l=a*r*rn(i);BL.add(id(l,u)),nW=e,rW=s,iW=o}function dEt(e){return UL=new sl,Eg(e,sm),UL*2}function zL(e){return[id(e[1],e[0]),uc(e[2])]}function tw(e){var t=e[0],n=e[1],r=fn(n);return[r*fn(t),r*rn(t),rn(n)]}function t3(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function R7(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function n3(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function VL(e){var t=cl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Es,Fl,$s,Dc,jb,Hke,qke,gS,ik,Py,g0,vg={point:sW,lineStart:ume,lineEnd:lme,polygonStart:function(){vg.point=Gke,vg.lineStart=hEt,vg.lineEnd=pEt,ik=new sl,sm.polygonStart()},polygonEnd:function(){sm.polygonEnd(),vg.point=sW,vg.lineStart=ume,vg.lineEnd=lme,BL<0?(Es=-($s=180),Fl=-(Dc=90)):ik>ln?Dc=90:ik<-ln&&(Fl=-90),g0[0]=Es,g0[1]=$s},sphere:function(){Es=-($s=180),Fl=-(Dc=90)}};function sW(e,t){Py.push(g0=[Es=e,$s=e]),t<Fl&&(Fl=t),t>Dc&&(Dc=t)}function Wke(e,t){var n=tw([e*lr,t*lr]);if(gS){var r=cT(gS,n),i=[r[1],-r[0],0],s=cT(i,r);VL(s),s=zL(s);var o=e-jb,a=o>0?1:-1,u=s[0]*Js*a,l,c=$r(o)>180;c^(a*jb<u&&u<a*e)?(l=s[1]*Js,l>Dc&&(Dc=l)):(u=(u+360)%360-180,c^(a*jb<u&&u<a*e)?(l=-s[1]*Js,l<Fl&&(Fl=l)):(t<Fl&&(Fl=t),t>Dc&&(Dc=t))),c?e<jb?Nc(Es,e)>Nc(Es,$s)&&($s=e):Nc(e,$s)>Nc(Es,$s)&&(Es=e):$s>=Es?(e<Es&&(Es=e),e>$s&&($s=e)):e>jb?Nc(Es,e)>Nc(Es,$s)&&($s=e):Nc(e,$s)>Nc(Es,$s)&&(Es=e)}else Py.push(g0=[Es=e,$s=e]);t<Fl&&(Fl=t),t>Dc&&(Dc=t),gS=n,jb=e}function ume(){vg.point=Wke}function lme(){g0[0]=Es,g0[1]=$s,vg.point=sW,gS=null}function Gke(e,t){if(gS){var n=e-jb;ik.add($r(n)>180?n+(n>0?360:-360):n)}else Hke=e,qke=t;sm.point(e,t),Wke(e,t)}function hEt(){sm.lineStart()}function pEt(){Gke(Hke,qke),sm.lineEnd(),$r(ik)>ln&&(Es=-($s=180)),g0[0]=Es,g0[1]=$s,gS=null}function Nc(e,t){return(t-=e)<0?t+360:t}function mEt(e,t){return e[0]-t[0]}function cme(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function gEt(e){var t,n,r,i,s,o,a;if(Dc=$s=-(Es=Fl=1/0),Py=[],Eg(e,vg),n=Py.length){for(Py.sort(mEt),t=1,r=Py[0],s=[r];t<n;++t)i=Py[t],cme(r,i[0])||cme(r,i[1])?(Nc(r[0],i[1])>Nc(r[0],r[1])&&(r[1]=i[1]),Nc(i[0],r[1])>Nc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Nc(r[1],i[0]))>o&&(o=a,Es=i[0],$s=r[1])}return Py=g0=null,Es===1/0||Fl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Es,Fl],[$s,Dc]]}var rI,HL,qL,WL,GL,YL,KL,XL,oW,aW,uW,Yke,Kke,Yu,Ku,Xu,ch={sphere:Da,point:NZ,lineStart:fme,lineEnd:dme,polygonStart:function(){ch.lineStart=bEt,ch.lineEnd=_Et},polygonEnd:function(){ch.lineStart=fme,ch.lineEnd=dme}};function NZ(e,t){e*=lr,t*=lr;var n=fn(t);iP(n*fn(e),n*rn(e),rn(t))}function iP(e,t,n){++rI,qL+=(e-qL)/rI,WL+=(t-WL)/rI,GL+=(n-GL)/rI}function fme(){ch.point=yEt}function yEt(e,t){e*=lr,t*=lr;var n=fn(t);Yu=n*fn(e),Ku=n*rn(e),Xu=rn(t),ch.point=vEt,iP(Yu,Ku,Xu)}function vEt(e,t){e*=lr,t*=lr;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=id(cl((o=Ku*s-Xu*i)*o+(o=Xu*r-Yu*s)*o+(o=Yu*i-Ku*r)*o),Yu*r+Ku*i+Xu*s);HL+=o,YL+=o*(Yu+(Yu=r)),KL+=o*(Ku+(Ku=i)),XL+=o*(Xu+(Xu=s)),iP(Yu,Ku,Xu)}function dme(){ch.point=NZ}function bEt(){ch.point=wEt}function _Et(){Xke(Yke,Kke),ch.point=NZ}function wEt(e,t){Yke=e,Kke=t,e*=lr,t*=lr,ch.point=Xke;var n=fn(t);Yu=n*fn(e),Ku=n*rn(e),Xu=rn(t),iP(Yu,Ku,Xu)}function Xke(e,t){e*=lr,t*=lr;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=Ku*s-Xu*i,a=Xu*r-Yu*s,u=Yu*i-Ku*r,l=eW(o,a,u),c=uc(l),f=l&&-c/l;oW.add(f*o),aW.add(f*a),uW.add(f*u),HL+=c,YL+=c*(Yu+(Yu=r)),KL+=c*(Ku+(Ku=i)),XL+=c*(Xu+(Xu=s)),iP(Yu,Ku,Xu)}function xEt(e){rI=HL=qL=WL=GL=YL=KL=XL=0,oW=new sl,aW=new sl,uW=new sl,Eg(e,ch);var t=+oW,n=+aW,r=+uW,i=eW(t,n,r);return i<ML&&(t=YL,n=KL,r=XL,HL<ln&&(t=qL,n=WL,r=GL),i=eW(t,n,r),i<ML)?[NaN,NaN]:[id(n,t)*Js,uc(r/i)*Js]}function lW(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function cW(e,t){return $r(e)>dr&&(e-=Math.round(e/ll)*ll),[e,t]}cW.invert=cW;function Qke(e,t,n){return(e%=ll)?t||n?lW(pme(e),mme(t,n)):pme(e):t||n?mme(t,n):cW}function hme(e){return function(t,n){return t+=e,$r(t)>dr&&(t-=Math.round(t/ll)*ll),[t,n]}}function pme(e){var t=hme(e);return t.invert=hme(-e),t}function mme(e,t){var n=fn(e),r=rn(e),i=fn(t),s=rn(t);function o(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*n+c*r;return[id(f*i-h*s,c*n-d*r),uc(h*i+f*s)]}return o.invert=function(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*i-f*s;return[id(f*i+d*s,c*n+h*r),uc(h*n-c*r)]},o}function EEt(e){e=Qke(e[0]*lr,e[1]*lr,e.length>2?e[2]*lr:0);function t(n){return n=e(n[0]*lr,n[1]*lr),n[0]*=Js,n[1]*=Js,n}return t.invert=function(n){return n=e.invert(n[0]*lr,n[1]*lr),n[0]*=Js,n[1]*=Js,n},t}function SEt(e,t,n,r,i,s){if(n){var o=fn(t),a=rn(t),u=r*n;i==null?(i=t+r*ll,s=t-u/2):(i=gme(o,i),s=gme(o,s),(r>0?i<s:i>s)&&(i+=r*ll));for(var l,c=i;r>0?c>s:c<s;c-=u)l=zL([o,-a*fn(c),-a*rn(c)]),e.point(l[0],l[1])}}function gme(e,t){t=tw(t),t[0]-=e,VL(t);var n=Bke(-t[1]);return((-t[2]<0?-n:n)+ll-ln)%ll}function Jke(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Da,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function O$(e,t){return $r(e[0]-t[0])<ln&&$r(e[1]-t[1])<ln}function r3(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Zke(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(O$(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*ln}s.push(b=new r3(g,p,null,!0)),o.push(b.o=new r3(g,null,b,!1)),s.push(b=new r3(y,p,null,!1)),o.push(b.o=new r3(y,null,b,!0))}}),!!s.length){for(o.sort(t),yme(s),yme(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function yme(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function N7(e){return $r(e[0])<=dr?e[0]:Wf(e[0])*(($r(e[0])+dr)%ll-dr)}function TEt(e,t){var n=N7(t),r=t[1],i=rn(r),s=[rn(n),-fn(n),0],o=0,a=0,u=new sl;i===1?r=zs+ln:i===-1&&(r=-zs-ln);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=N7(h),m=h[1]/2+LL,g=rn(m),y=fn(m),b=0;b<d;++b,p=E,g=T,y=C,h=w){var w=f[b],E=N7(w),S=w[1]/2+LL,T=rn(S),C=fn(S),I=E-p,R=I>=0?1:-1,P=R*I,D=P>dr,L=g*T;if(u.add(id(L*R*rn(P),y*C+L*fn(P))),o+=D?I+R*ll:I,D^p>=n^E>=n){var M=cT(tw(h),tw(w));VL(M);var F=cT(s,M);VL(F);var z=(D^I>=0?-1:1)*uc(F[2]);(r>z||r===z&&(M[0]||M[1]))&&(a+=D^I>=0?1:-1)}}return(o<-ln||o<ln&&u<-ML)^a&1}function eRe(e,t,n,r){return function(i){var s=t(i),o=Jke(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=PIe(c);var E=TEt(l,r);c.length?(u||(i.polygonStart(),u=!0),Zke(c,AEt,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,S){e(E,S)&&i.point(E,S)}function p(E,S){s.point(E,S)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(E,S){f.push([E,S]),a.point(E,S)}function b(){a.lineStart(),f=[]}function w(){y(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),S=o.result(),T,C=S.length,I,R,P;if(f.pop(),l.push(f),f=null,!!C){if(E&1){if(R=S[0],(I=R.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<I;++T)i.point((P=R[T])[0],P[1]);i.lineEnd()}return}C>1&&E&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(CEt))}}return d}}function CEt(e){return e.length>1}function AEt(e,t){return((e=e.x)[0]<0?e[1]-zs-ln:zs-e[1])-((t=t.x)[0]<0?t[1]-zs-ln:zs-t[1])}const vme=eRe(function(){return!0},IEt,REt,[-dr,-zs]);function IEt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?dr:-dr,u=$r(s-t);$r(u-dr)<ln?(e.point(t,n=(n+o)/2>0?zs:-zs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=dr&&($r(t-r)<ln&&(t-=r*ln),$r(s-a)<ln&&(s-=a*ln),n=kEt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function kEt(e,t,n,r){var i,s,o=rn(e-n);return $r(o)>ln?OC((rn(t)*(s=fn(r))*rn(n)-rn(r)*(i=fn(t))*rn(e))/(i*s*o)):(t+r)/2}function REt(e,t,n,r){var i;if(e==null)i=n*zs,r.point(-dr,i),r.point(0,i),r.point(dr,i),r.point(dr,0),r.point(dr,-i),r.point(0,-i),r.point(-dr,-i),r.point(-dr,0),r.point(-dr,i);else if($r(e[0]-t[0])>ln){var s=e[0]<t[0]?dr:-dr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function NEt(e){var t=fn(e),n=2*lr,r=t>0,i=$r(t)>ln;function s(c,f,d,h){SEt(h,e,n,d,c,f)}function o(c,f){return fn(c)*fn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var b=[g,y],w,E=o(g,y),S=r?E?0:l(g,y):E?l(g+(g<0?dr:-dr),y):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(w=u(f,b),(!w||O$(f,w)||O$(b,w))&&(b[2]=1)),E!==h)m=0,E?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^E){var T;!(S&d)&&(T=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}E&&(!f||!O$(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=tw(c),p=tw(f),m=[1,0,0],g=cT(h,p),y=t3(g,g),b=g[0],w=y-b*b;if(!w)return!d&&c;var E=t*y/w,S=-t*b/w,T=cT(m,g),C=n3(m,E),I=n3(g,S);R7(C,I);var R=T,P=t3(C,R),D=t3(R,R),L=P*P-D*(t3(C,C)-1);if(!(L<0)){var M=cl(L),F=n3(R,(-P-M)/D);if(R7(F,C),F=zL(F),!d)return F;var z=c[0],B=f[0],H=c[1],q=f[1],Y;B<z&&(Y=z,z=B,B=Y);var $=B-z,W=$r($-dr)<ln,X=W||$<ln;if(!W&&q<H&&(Y=H,H=q,q=Y),X?W?H+q>0^F[1]<($r(F[0]-z)<ln?H:q):H<=F[1]&&F[1]<=q:$>dr^(z<=F[0]&&F[0]<=B)){var V=n3(R,(-P+M)/D);return R7(V,C),[F,zL(V)]}}}function l(c,f){var d=r?e:dr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return eRe(o,a,s,r?[0,-e]:[-dr,e-dr])}function PEt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var iI=1e9,i3=-iI;function tRe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return $r(l[0]-e)<ln?c>0?0:3:$r(l[0]-n)<ln?c>0?2:1:$r(l[1]-t)<ln?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Jke(),d,h,p,m,g,y,b,w,E,S,T,C={point:I,lineStart:L,lineEnd:M,polygonStart:P,polygonEnd:D};function I(z,B){i(z,B)&&c.point(z,B)}function R(){for(var z=0,B=0,H=h.length;B<H;++B)for(var q=h[B],Y=1,$=q.length,W=q[0],X,V,K=W[0],J=W[1];Y<$;++Y)X=K,V=J,W=q[Y],K=W[0],J=W[1],V<=r?J>r&&(K-X)*(r-V)>(J-V)*(e-X)&&++z:J<=r&&(K-X)*(r-V)<(J-V)*(e-X)&&--z;return z}function P(){c=f,d=[],h=[],T=!0}function D(){var z=R(),B=T&&z,H=(d=PIe(d)).length;(B||H)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),H&&Zke(d,a,z,s,l),l.polygonEnd()),c=l,d=h=p=null}function L(){C.point=F,h&&h.push(p=[]),S=!0,E=!1,b=w=NaN}function M(){d&&(F(m,g),y&&E&&f.rejoin(),d.push(f.result())),C.point=I,E&&c.lineEnd()}function F(z,B){var H=i(z,B);if(h&&p.push([z,B]),S)m=z,g=B,y=H,S=!1,H&&(c.lineStart(),c.point(z,B));else if(H&&E)c.point(z,B);else{var q=[b=Math.max(i3,Math.min(iI,b)),w=Math.max(i3,Math.min(iI,w))],Y=[z=Math.max(i3,Math.min(iI,z)),B=Math.max(i3,Math.min(iI,B))];PEt(q,Y,e,t,n,r)?(E||(c.lineStart(),c.point(q[0],q[1])),c.point(Y[0],Y[1]),H||c.lineEnd(),T=!1):H&&(c.lineStart(),c.point(z,B),T=!1)}b=z,w=B,E=H}return C}}function bme(e,t,n){var r=Gl(e,t-ln,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function _me(e,t,n){var r=Gl(e,t-ln,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function DEt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Gl(e3(r/c)*c,n,c).map(p).concat(Gl(e3(a/f)*f,o,f).map(m)).concat(Gl(e3(t/u)*u,e,u).filter(function(w){return $r(w%c)>ln}).map(d)).concat(Gl(e3(s/l)*l,i,l).filter(function(w){return $r(w%f)>ln}).map(h))}return y.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(w){return arguments.length?y.extentMajor(w).extentMinor(w):y.extentMinor()},y.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),y.precision(g)):[[t,s],[e,i]]},y.step=function(w){return arguments.length?y.stepMajor(w).stepMinor(w):y.stepMinor()},y.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],y):[c,f]},y.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],y):[u,l]},y.precision=function(w){return arguments.length?(g=+w,d=bme(s,i,90),h=_me(t,e,g),p=bme(a,o,90),m=_me(r,n,g),y):g},y.extentMajor([[-180,-90+ln],[180,90-ln]]).extentMinor([[-180,-80-ln],[180,80+ln]])}const SR=e=>e;var P7=new sl,fW=new sl,nRe,rRe,dW,hW,Sg={point:Da,lineStart:Da,lineEnd:Da,polygonStart:function(){Sg.lineStart=OEt,Sg.lineEnd=MEt},polygonEnd:function(){Sg.lineStart=Sg.lineEnd=Sg.point=Da,P7.add($r(fW)),fW=new sl},result:function(){var e=P7/2;return P7=new sl,e}};function OEt(){Sg.point=$Et}function $Et(e,t){Sg.point=iRe,nRe=dW=e,rRe=hW=t}function iRe(e,t){fW.add(hW*e-dW*t),dW=e,hW=t}function MEt(){iRe(nRe,rRe)}var fT=1/0,QL=fT,TR=-fT,JL=TR,ZL={point:LEt,lineStart:Da,lineEnd:Da,polygonStart:Da,polygonEnd:Da,result:function(){var e=[[fT,QL],[TR,JL]];return TR=JL=-(QL=fT=1/0),e}};function LEt(e,t){e<fT&&(fT=e),e>TR&&(TR=e),t<QL&&(QL=t),t>JL&&(JL=t)}var pW=0,mW=0,sI=0,e6=0,t6=0,HE=0,gW=0,yW=0,oI=0,sRe,oRe,Ep,Sp,Vf={point:nw,lineStart:wme,lineEnd:xme,polygonStart:function(){Vf.lineStart=BEt,Vf.lineEnd=UEt},polygonEnd:function(){Vf.point=nw,Vf.lineStart=wme,Vf.lineEnd=xme},result:function(){var e=oI?[gW/oI,yW/oI]:HE?[e6/HE,t6/HE]:sI?[pW/sI,mW/sI]:[NaN,NaN];return pW=mW=sI=e6=t6=HE=gW=yW=oI=0,e}};function nw(e,t){pW+=e,mW+=t,++sI}function wme(){Vf.point=FEt}function FEt(e,t){Vf.point=jEt,nw(Ep=e,Sp=t)}function jEt(e,t){var n=e-Ep,r=t-Sp,i=cl(n*n+r*r);e6+=i*(Ep+e)/2,t6+=i*(Sp+t)/2,HE+=i,nw(Ep=e,Sp=t)}function xme(){Vf.point=nw}function BEt(){Vf.point=zEt}function UEt(){aRe(sRe,oRe)}function zEt(e,t){Vf.point=aRe,nw(sRe=Ep=e,oRe=Sp=t)}function aRe(e,t){var n=e-Ep,r=t-Sp,i=cl(n*n+r*r);e6+=i*(Ep+e)/2,t6+=i*(Sp+t)/2,HE+=i,i=Sp*e-Ep*t,gW+=i*(Ep+e),yW+=i*(Sp+t),oI+=i*3,nw(Ep=e,Sp=t)}function uRe(e){this._context=e}uRe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ll);break}}},result:Da};var vW=new sl,D7,lRe,cRe,aI,uI,CR={point:Da,lineStart:function(){CR.point=VEt},lineEnd:function(){D7&&fRe(lRe,cRe),CR.point=Da},polygonStart:function(){D7=!0},polygonEnd:function(){D7=null},result:function(){var e=+vW;return vW=new sl,e}};function VEt(e,t){CR.point=fRe,lRe=aI=e,cRe=uI=t}function fRe(e,t){aI-=e,uI-=t,vW.add(cl(aI*aI+uI*uI)),aI=e,uI=t}let Eme,n6,Sme,Tme;class Cme{constructor(t){this._append=t==null?dRe:HEt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Sme||this._append!==n6){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Sme=r,n6=this._append,Tme=this._,this._=i}this._+=Tme;break}}}result(){const t=this._;return this._="",t.length?t:null}}function dRe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function HEt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return dRe;if(t!==Eme){const n=10**t;Eme=t,n6=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return n6}function hRe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Eg(a,i(s))),s.result()}return o.area=function(a){return Eg(a,i(Sg)),Sg.result()},o.measure=function(a){return Eg(a,i(CR)),CR.result()},o.bounds=function(a){return Eg(a,i(ZL)),ZL.result()},o.centroid=function(a){return Eg(a,i(Vf)),Vf.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,SR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Cme(n)):new uRe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Cme(n)),o},o.projection(e).digits(n).context(t)}function z5(e){return function(t){var n=new bW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function bW(){}bW.prototype={constructor:bW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function PZ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Eg(n,e.stream(ZL)),t(ZL.result()),r!=null&&e.clipExtent(r),e}function V5(e,t,n){return PZ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function DZ(e,t,n){return V5(e,[[0,0],t],n)}function OZ(e,t,n){return PZ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function $Z(e,t,n){return PZ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Ame=16,qEt=fn(30*lr);function Ime(e,t){return+t?GEt(e,t):WEt(e)}function WEt(e){return z5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function GEt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,b=c-i,w=y*y+b*b;if(w>4*t&&m--){var E=o+d,S=a+h,T=u+p,C=cl(E*E+S*S+T*T),I=uc(T/=C),R=$r($r(T)-1)<ln||$r(s-f)<ln?(s+f)/2:id(S,E),P=e(R,I),D=P[0],L=P[1],M=D-r,F=L-i,z=b*M-y*F;(z*z/w>t||$r((y*M+b*F)/w-.5)>.3||o*d+a*h+u*p<qEt)&&(n(r,i,s,o,a,u,D,L,R,E/=C,S/=C,T,m,g),g.point(D,L),n(D,L,R,E,S,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=S},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(I,R){I=e(I,R),r.point(I[0],I[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(I,R){var P=tw([I,R]),D=e(I,R);n(f,d,c,h,p,m,f=D[0],d=D[1],c=I,h=P[0],p=P[1],m=P[2],Ame,r),r.point(f,d)}function E(){g.point=y,r.lineEnd()}function S(){b(),g.point=T,g.lineEnd=C}function T(I,R){w(i=I,R),s=f,o=d,a=h,u=p,l=m,g.point=w}function C(){n(f,d,c,h,p,m,s,o,i,a,u,l,Ame,r),g.lineEnd=E,E()}return g}}var YEt=z5({point:function(e,t){this.stream.point(e*lr,t*lr)}});function KEt(e){return z5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function XEt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function kme(e,t,n,r,i,s){if(!s)return XEt(e,t,n,r,i);var o=fn(s),a=rn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function km(e){return pRe(function(){return e})()}function pRe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=vme,g=null,y,b,w,E=SR,S=.5,T,C,I,R,P;function D(z){return I(z[0]*lr,z[1]*lr)}function L(z){return z=I.invert(z[0],z[1]),z&&[z[0]*Js,z[1]*Js]}D.stream=function(z){return R&&P===z?R:R=YEt(KEt(c)(m(T(E(P=z)))))},D.preclip=function(z){return arguments.length?(m=z,p=void 0,F()):m},D.postclip=function(z){return arguments.length?(E=z,g=y=b=w=null,F()):E},D.clipAngle=function(z){return arguments.length?(m=+z?NEt(p=z*lr):(p=null,vme),F()):p*Js},D.clipExtent=function(z){return arguments.length?(E=z==null?(g=y=b=w=null,SR):tRe(g=+z[0][0],y=+z[0][1],b=+z[1][0],w=+z[1][1]),F()):g==null?null:[[g,y],[b,w]]},D.scale=function(z){return arguments.length?(n=+z,M()):n},D.translate=function(z){return arguments.length?(r=+z[0],i=+z[1],M()):[r,i]},D.center=function(z){return arguments.length?(s=z[0]%360*lr,o=z[1]%360*lr,M()):[s*Js,o*Js]},D.rotate=function(z){return arguments.length?(a=z[0]%360*lr,u=z[1]%360*lr,l=z.length>2?z[2]%360*lr:0,M()):[a*Js,u*Js,l*Js]},D.angle=function(z){return arguments.length?(f=z%360*lr,M()):f*Js},D.reflectX=function(z){return arguments.length?(d=z?-1:1,M()):d<0},D.reflectY=function(z){return arguments.length?(h=z?-1:1,M()):h<0},D.precision=function(z){return arguments.length?(T=Ime(C,S=z*z),F()):cl(S)},D.fitExtent=function(z,B){return V5(D,z,B)},D.fitSize=function(z,B){return DZ(D,z,B)},D.fitWidth=function(z,B){return OZ(D,z,B)},D.fitHeight=function(z,B){return $Z(D,z,B)};function M(){var z=kme(n,0,0,d,h,f).apply(null,t(s,o)),B=kme(n,r-z[0],i-z[1],d,h,f);return c=Qke(a,u,l),C=lW(t,B),I=lW(c,C),T=Ime(C,S),F()}function F(){return R=P=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&L,M()}}function MZ(e){var t=0,n=dr/3,r=pRe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*lr,n=s[1]*lr):[t*Js,n*Js]},i}function QEt(e){var t=fn(e);function n(r,i){return[r*t,rn(i)/t]}return n.invert=function(r,i){return[r/t,uc(i*t)]},n}function JEt(e,t){var n=rn(e),r=(n+rn(t))/2;if($r(r)<ln)return QEt(e);var i=1+n*(2*r-n),s=cl(i)/r;function o(a,u){var l=cl(i-2*r*rn(u))/r;return[l*rn(a*=r),s-l*fn(a)]}return o.invert=function(a,u){var l=s-u,c=id(a,$r(l))*Wf(l);return l*r<0&&(c-=dr*Wf(a)*Wf(l)),[c/r,uc((i-(a*a+l*l)*r*r)/(2*r))]},o}function r6(){return MZ(JEt).scale(155.424).center([0,33.6442])}function mRe(){return r6().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ZEt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function eSt(){var e,t,n=mRe(),r,i=r6().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=r6().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=ZEt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+ln,m+.12*h+ln],[p-.214*h-ln,m+.234*h-ln]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+ln,m+.166*h+ln],[p-.115*h-ln,m+.234*h-ln]]).stream(l),f()},c.fitExtent=function(d,h){return V5(c,d,h)},c.fitSize=function(d,h){return DZ(c,d,h)},c.fitWidth=function(d,h){return OZ(c,d,h)},c.fitHeight=function(d,h){return $Z(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function gRe(e){return function(t,n){var r=fn(t),i=fn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*rn(t),s*rn(n)]}}function sP(e){return function(t,n){var r=cl(t*t+n*n),i=e(r),s=rn(i),o=fn(i);return[id(t*s,r*o),uc(r&&n*s/r)]}}var yRe=gRe(function(e){return cl(2/(1+e))});yRe.invert=sP(function(e){return 2*uc(e/2)});function tSt(){return km(yRe).scale(124.75).clipAngle(180-.001)}var vRe=gRe(function(e){return(e=Bke(e))&&e/rn(e)});vRe.invert=sP(function(e){return e});function nSt(){return km(vRe).scale(79.4188).clipAngle(180-.001)}function H5(e,t){return[e,FL(RZ((zs+t)/2))]}H5.invert=function(e,t){return[e,2*OC(jke(t))-zs]};function rSt(){return bRe(H5).scale(961/ll)}function bRe(e){var t=km(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=dr*r(),d=t(EEt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===H5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function s3(e){return RZ((zs+e)/2)}function iSt(e,t){var n=fn(e),r=e===t?rn(e):FL(n/fn(t))/FL(s3(t)/s3(e)),i=n*k7(s3(e),r)/r;if(!r)return H5;function s(o,a){i>0?a<-zs+ln&&(a=-zs+ln):a>zs-ln&&(a=zs-ln);var u=i/k7(s3(a),r);return[u*rn(r*o),i-u*fn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Wf(r)*cl(o*o+u*u),c=id(o,$r(u))*Wf(u);return u*r<0&&(c-=dr*Wf(o)*Wf(u)),[c/r,2*OC(k7(i/l,1/r))-zs]},s}function sSt(){return MZ(iSt).scale(109.5).parallels([30,30])}function i6(e,t){return[e,t]}i6.invert=i6;function oSt(){return km(i6).scale(152.63)}function aSt(e,t){var n=fn(e),r=e===t?rn(e):(n-fn(t))/(t-e),i=n/r+e;if($r(r)<ln)return i6;function s(o,a){var u=i-a,l=r*o;return[u*rn(l),i-u*fn(l)]}return s.invert=function(o,a){var u=i-a,l=id(o,$r(u))*Wf(u);return u*r<0&&(l-=dr*Wf(o)*Wf(u)),[l/r,i-Wf(r)*cl(o*o+u*u)]},s}function uSt(){return MZ(aSt).scale(131.154).center([0,13.9389])}var sk=1.340264,ok=-.081106,ak=893e-6,uk=.003796,s6=cl(3)/2,lSt=12;function _Re(e,t){var n=uc(s6*rn(t)),r=n*n,i=r*r*r;return[e*fn(n)/(s6*(sk+3*ok*r+i*(7*ak+9*uk*r))),n*(sk+ok*r+i*(ak+uk*r))]}_Re.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<lSt&&(a=n*(sk+ok*r+i*(ak+uk*r))-t,u=sk+3*ok*r+i*(7*ak+9*uk*r),n-=o=a/u,r=n*n,i=r*r*r,!($r(o)<ML));++s);return[s6*e*(sk+3*ok*r+i*(7*ak+9*uk*r))/fn(n),uc(rn(n)/s6)]};function cSt(){return km(_Re).scale(177.158)}function wRe(e,t){var n=fn(t),r=fn(e)*n;return[n*rn(e)/r,rn(t)/r]}wRe.invert=sP(OC);function fSt(){return km(wRe).scale(144.049).clipAngle(60)}function dSt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=z5({point:function(E,S){var T=w([E,S]);this.stream.point(T[0],T[1])}}),m=SR,g,y;function b(){return d=e*r,h=e*i,g=y=null,w}function w(E){var S=E[0]*d,T=E[1]*h;if(s){var C=T*o-S*a;S=S*o+T*a,T=C}return[S+t,T+n]}return w.invert=function(E){var S=E[0]-t,T=E[1]-n;if(s){var C=T*o+S*a;S=S*o-T*a,T=C}return[S/d,T/h]},w.stream=function(E){return g&&y===E?g:g=p(m(y=E))},w.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,b()):m},w.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,SR):tRe(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(s=E%360*lr,a=rn(s),o=fn(s),b()):s*Js},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,S){return V5(w,E,S)},w.fitSize=function(E,S){return DZ(w,E,S)},w.fitWidth=function(E,S){return OZ(w,E,S)},w.fitHeight=function(E,S){return $Z(w,E,S)},w}function xRe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}xRe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while($r(i)>ln&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function hSt(){return km(xRe).scale(175.295)}function ERe(e,t){return[fn(t)*rn(e),rn(t)]}ERe.invert=sP(uc);function pSt(){return km(ERe).scale(249.5).clipAngle(90+ln)}function SRe(e,t){var n=fn(t),r=1+fn(e)*n;return[n*rn(e)/r,rn(t)/r]}SRe.invert=sP(function(e){return 2*OC(e)});function mSt(){return km(SRe).scale(250).clipAngle(142)}function TRe(e,t){return[FL(RZ((zs+t)/2)),-e]}TRe.invert=function(e,t){return[-t,2*OC(jke(e))-zs]};function gSt(){var e=bRe(TRe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function ySt(e,t){return e.parent===t.parent?1:2}function vSt(e){return e.reduce(bSt,0)/e.length}function bSt(e,t){return e+t.x}function _St(e){return 1+e.reduce(wSt,0)}function wSt(e,t){return Math.max(e,t.y)}function xSt(e){for(var t;t=e.children;)e=t[0];return e}function ESt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function SSt(){var e=ySt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=vSt(h),d.y=_St(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=xSt(s),l=ESt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function TSt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function CSt(){return this.eachAfter(TSt)}function ASt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function ISt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function kSt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function RSt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function NSt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function PSt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function DSt(e){for(var t=this,n=OSt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function OSt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function $St(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function MSt(){return Array.from(this)}function LSt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function FSt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*jSt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function q5(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zSt)):t===void 0&&(t=USt);for(var n=new dT(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new dT(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(CRe)}function BSt(){return q5(this).eachBefore(VSt)}function USt(e){return e.children}function zSt(e){return Array.isArray(e)?e[1]:null}function VSt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function CRe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function dT(e){this.data=e,this.depth=this.height=0,this.parent=null}dT.prototype=q5.prototype={constructor:dT,count:CSt,each:ASt,eachAfter:kSt,eachBefore:ISt,find:RSt,sum:NSt,sort:PSt,path:DSt,ancestors:$St,descendants:MSt,leaves:LSt,links:FSt,copy:BSt,[Symbol.iterator]:jSt};function $$(e){return e==null?null:ARe(e)}function ARe(e){if(typeof e!="function")throw new Error;return e}function Jb(){return 0}function vE(e){return function(){return e}}const HSt=1664525,qSt=1013904223,Rme=4294967296;function WSt(){let e=1;return()=>(e=(HSt*e+qSt)%Rme)/Rme}function GSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YSt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function KSt(e,t){for(var n=0,r=(e=YSt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&IRe(o,s)?++n:(o=QSt(i=XSt(i,s)),n=0);return o}function XSt(e,t){var n,r;if(O7(t,e))return[t];for(n=0;n<e.length;++n)if(o3(t,e[n])&&O7(lI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(o3(lI(e[n],e[r]),t)&&o3(lI(e[n],t),e[r])&&o3(lI(e[r],t),e[n])&&O7(kRe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function o3(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function IRe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function O7(e,t){for(var n=0;n<t.length;++n)if(!IRe(e,t[n]))return!1;return!0}function QSt(e){switch(e.length){case 1:return JSt(e[0]);case 2:return lI(e[0],e[1]);case 3:return kRe(e[0],e[1],e[2])}}function JSt(e){return{x:e.x,y:e.y,r:e.r}}function lI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function kRe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,b=r*r+i*i-s*s,w=b-o*o-a*a+u*u,E=b-l*l-c*c+f*f,S=h*p-d*m,T=(p*E-m*w)/(S*2)-r,C=(m*g-p*y)/S,I=(h*w-d*E)/(S*2)-i,R=(d*y-h*g)/S,P=C*C+R*R-1,D=2*(s+T*C+I*R),L=T*T+I*I-s*s,M=-(Math.abs(P)>1e-6?(D+Math.sqrt(D*D-4*P*L))/(2*P):L/D);return{x:r+T+C*M,y:i+I+R*M,r:M}}function Nme(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Pme(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Dme(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function a3(e){this._=e,this.next=null,this.previous=null}function ZSt(e,t){if(!(s=(e=GSt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Nme(r,n,i=e[2]),n=new a3(n),r=new a3(r),i=new a3(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Nme(n._,r._,i=e[u]),i=new a3(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Pme(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Pme(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Dme(n);(i=i.next)!==r;)(a=Dme(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=KSt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function eTt(e){return Math.sqrt(e.value)}function RRe(){var e=null,t=1,n=1,r=Jb;function i(s){const o=WSt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Ome(e)).eachAfter($7(r,.5,o)).eachBefore($me(1)):s.eachBefore(Ome(eTt)).eachAfter($7(Jb,1,o)).eachAfter($7(r,s.r/Math.min(t,n),o)).eachBefore($me(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=$$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:vE(+s),i):r},i}function Ome(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function $7(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=ZSt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function $me(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function NRe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function oP(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function tTt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(NRe),o}function s(o,a){return function(u){u.children&&oP(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var nTt={depth:-1},Mme={},M7={};function rTt(e){return e.id}function iTt(e){return e.parentId}function Lme(){var e=rTt,t=iTt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((E,S)=>sTt(n(E,S,i))),b=y.map(Fme),w=new Set(y).add("");for(const E of b)w.has(E)||(w.add(E),y.push(E),b.push(Fme(E)),s.push(M7));o=(E,S)=>y[S],a=(E,S)=>b[S]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new dT(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Mme:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Mme)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===M7&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===M7);--y)h.data=null}if(f.parent=nTt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(CRe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=$$(i),r):e},r.parentId=function(i){return arguments.length?(t=$$(i),r):t},r.path=function(i){return arguments.length?(n=$$(i),r):n},r}function sTt(e){e=`${e}`;let t=e.length;return _W(e,t-1)&&!_W(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Fme(e){let t=e.length;if(t<2)return"";for(;--t>1&&!_W(e,t););return e.slice(0,t)}function _W(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function oTt(e,t){return e.parent===t.parent?1:2}function L7(e){var t=e.children;return t?t[0]:e.t}function F7(e){var t=e.children;return t?t[t.length-1]:e.t}function aTt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function uTt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function lTt(e,t,n){return e.a.parent===t.parent?e.a:n}function M$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}M$.prototype=Object.create(dT.prototype);function cTt(e){for(var t=new M$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new M$(s[o],o)),i.parent=n;return(t.parent=new M$(null,0)).children=[t],t}function fTt(){var e=oTt,t=1,n=1,r=null;function i(l){var c=cTt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){uTt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,b=p.m,w=m.m,E;p=F7(p),d=L7(d),p&&d;)m=L7(m),h=F7(h),h.a=l,E=p.z+b-d.z-g+e(p._,d._),E>0&&(aTt(lTt(p,l,f),l,E),g+=E,y+=E),b+=p.m,g+=d.m,w+=m.m,y+=h.m;p&&!F7(h)&&(h.t=p,h.m+=b-y),d&&!L7(m)&&(m.t=d,m.m+=g-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function W5(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var PRe=(1+Math.sqrt(5))/2;function DRe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,b,w,E,S,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=b=g,S=Math.max(p/h,h/p)/(m*e),T=g*g*S,E=Math.max(b/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),T=g*g*S,w=Math.max(b/T,T/y),w>E){g-=l;break}E=w}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?oP(u,n,r,i,m?r+=p*g/m:s):W5(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const ORe=function e(t){function n(r,i,s,o,a){DRe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PRe);function dTt(){var e=ORe,t=!1,n=1,r=1,i=[0],s=Jb,o=Jb,a=Jb,u=Jb,l=Jb;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(NRe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=ARe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:vE(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:vE(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:vE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:vE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:vE(+d),c):l},c}function hTt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=g,b.y1=y;return}for(var w=l[f],E=h/2+w,S=f+1,T=d-1;S<T;){var C=S+T>>>1;l[C]<E?S=C+1:T=C}E-l[S-1]<l[S]-E&&f+1<S&&--S;var I=l[S]-w,R=h-I;if(g-p>y-m){var P=h?(p*R+g*I)/h:g;c(f,S,I,p,m,P,y),c(S,d,R,P,m,g,y)}else{var D=h?(m*R+y*I)/h:y;c(f,S,I,p,m,g,D),c(S,d,R,p,D,g,y)}}}function pTt(e,t,n,r,i){(e.depth&1?W5:oP)(e,t,n,r,i)}const mTt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?oP(l,i,s,o,m?s+=(a-s)*l.value/m:a):W5(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=DRe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PRe);function zh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function L1(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const wW=Symbol("implicit");function F1(){var e=new bpe,t=[],n=[],r=wW;function i(s){let o=e.get(s);if(o===void 0){if(r!==wW)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new bpe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return F1(t,n).unknown(r)},zh.apply(i,arguments),i}function $C(){var e=F1().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Gl(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return $C(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},zh.apply(f(),arguments)}function gTt(e){return function(){return e}}function xW(e){return+e}var jme=[0,1];function Yl(e){return e}function EW(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:gTt(isNaN(t)?NaN:.5)}function yTt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function vTt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=EW(i,r),s=n(o,s)):(r=EW(r,i),s=n(s,o)),function(a){return s(r(a))}}function bTt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=EW(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=zv(e,a,1,r)-1;return s[u](i[u](a))}}function aP(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function G5(){var e=jme,t=jme,n=V0,r,i,s,o=Yl,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Yl&&(o=yTt(e[0],e[d-1])),a=d>2?bTt:vTt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),jf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,xW),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=nP,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Yl,c()):o!==Yl},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function $Re(){return G5()(Yl,Yl)}function MRe(e,t,n,r){var i=Vv(e,t,n),s;switch(r=ew(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Lke(i,o))&&(r.precision=s),kZ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Fke(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Mke(i))&&(r.precision=s-(r.type==="%")*2);break}}return M1(r)}function Qw(e){var t=e.domain;return e.ticks=function(n){var r=t();return Mq(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return MRe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=Lq(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function sd(){var e=$Re();return e.copy=function(){return aP(e,sd())},zh.apply(e,arguments),Qw(e)}function LRe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,xW),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return LRe(e).unknown(t)},e=arguments.length?Array.from(e,xW):[0,1],Qw(n)}function FRe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Bme(e){return Math.log(e)}function Ume(e){return Math.exp(e)}function _Tt(e){return-Math.log(-e)}function wTt(e){return-Math.exp(-e)}function xTt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ETt(e){return e===10?xTt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function STt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function zme(e){return(t,n)=>-e(-t,n)}function LZ(e){const t=e(Bme,Ume),n=t.domain;let r=10,i,s;function o(){return i=STt(r),s=ETt(r),n()[0]<0?(i=zme(i),s=zme(s),e(_Tt,wTt)):e(Bme,Ume),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=Mq(l,c,g))}else y=Mq(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ew(u)).precision==null&&(u.trim=!0),u=M1(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(FRe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function jRe(){const e=LZ(G5()).domain([1,10]);return e.copy=()=>aP(e,jRe()).base(e.base()),zh.apply(e,arguments),e}function Vme(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Hme(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FZ(e){var t=1,n=e(Vme(t),Hme(t));return n.constant=function(r){return arguments.length?e(Vme(t=+r),Hme(t)):t},Qw(n)}function BRe(){var e=FZ(G5());return e.copy=function(){return aP(e,BRe()).constant(e.constant())},zh.apply(e,arguments)}function qme(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function TTt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function CTt(e){return e<0?-e*e:e*e}function jZ(e){var t=e(Yl,Yl),n=1;function r(){return n===1?e(Yl,Yl):n===.5?e(TTt,CTt):e(qme(n),qme(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Qw(t)}function BZ(){var e=jZ(G5());return e.copy=function(){return aP(e,BZ()).exponent(e.exponent())},zh.apply(e,arguments),e}function ATt(){return BZ.apply(null,arguments).exponent(.5)}function URe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=RIe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[zv(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(qg),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return URe().domain(e).range(t).unknown(r)},zh.apply(s,arguments)}function zRe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[zv(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return zRe().domain([e,t]).range(i).unknown(s)},zh.apply(Qw(o),arguments)}function VRe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[zv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return VRe().domain(e).range(t).unknown(n)},zh.apply(i,arguments)}const j7=new Date,B7=new Date;function Wo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Wo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(j7.setTime(+s),B7.setTime(+o),e(j7),e(B7),Math.floor(n(j7,B7))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const hT=Wo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hT.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):hT);hT.range;const Og=1e3,Gf=Og*60,$g=Gf*60,y0=$g*24,UZ=y0*7,Wme=y0*30,U7=y0*365,Mg=Wo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Og)},(e,t)=>(t-e)/Og,e=>e.getUTCSeconds());Mg.range;const Y5=Wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Og)},(e,t)=>{e.setTime(+e+t*Gf)},(e,t)=>(t-e)/Gf,e=>e.getMinutes());Y5.range;const K5=Wo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gf)},(e,t)=>(t-e)/Gf,e=>e.getUTCMinutes());K5.range;const X5=Wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Og-e.getMinutes()*Gf)},(e,t)=>{e.setTime(+e+t*$g)},(e,t)=>(t-e)/$g,e=>e.getHours());X5.range;const Q5=Wo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$g)},(e,t)=>(t-e)/$g,e=>e.getUTCHours());Q5.range;const Yg=Wo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gf)/y0,e=>e.getDate()-1);Yg.range;const xv=Wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/y0,e=>e.getUTCDate()-1);xv.range;const HRe=Wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/y0,e=>Math.floor(e/y0));HRe.range;function Jw(e){return Wo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gf)/UZ)}const MC=Jw(0),o6=Jw(1),ITt=Jw(2),kTt=Jw(3),pT=Jw(4),RTt=Jw(5),NTt=Jw(6);MC.range;o6.range;ITt.range;kTt.range;pT.range;RTt.range;NTt.range;function Zw(e){return Wo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/UZ)}const LC=Zw(0),a6=Zw(1),PTt=Zw(2),DTt=Zw(3),mT=Zw(4),OTt=Zw(5),$Tt=Zw(6);LC.range;a6.range;PTt.range;DTt.range;mT.range;OTt.range;$Tt.range;const AR=Wo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AR.range;const IR=Wo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());IR.range;const om=Wo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());om.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});om.range;const am=Wo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());am.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});am.range;function qRe(e,t,n,r,i,s){const o=[[Mg,1,Og],[Mg,5,5*Og],[Mg,15,15*Og],[Mg,30,30*Og],[s,1,Gf],[s,5,5*Gf],[s,15,15*Gf],[s,30,30*Gf],[i,1,$g],[i,3,3*$g],[i,6,6*$g],[i,12,12*$g],[r,1,y0],[r,2,2*y0],[n,1,UZ],[t,1,Wme],[t,3,3*Wme],[e,1,U7]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=PC(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Vv(l/U7,c/U7,f));if(h===0)return hT.every(Math.max(Vv(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[MTt,LTt]=qRe(am,IR,LC,HRe,Q5,K5),[FTt,jTt]=qRe(om,AR,MC,Yg,X5,Y5);function z7(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function V7(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function d2(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function WRe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=h2(i),c=p2(i),f=h2(s),d=p2(s),h=h2(o),p=p2(o),m=h2(a),g=p2(a),y=h2(u),b=p2(u),w={a:H,A:q,b:Y,B:$,c:null,d:Jme,e:Jme,f:uCt,g:vCt,G:_Ct,H:sCt,I:oCt,j:aCt,L:GRe,m:lCt,M:cCt,p:W,q:X,Q:tge,s:nge,S:fCt,u:dCt,U:hCt,V:pCt,w:mCt,W:gCt,x:null,X:null,y:yCt,Y:bCt,Z:wCt,"%":ege},E={a:V,A:K,b:J,B:ue,c:null,d:Zme,e:Zme,f:TCt,g:$Ct,G:LCt,H:xCt,I:ECt,j:SCt,L:KRe,m:CCt,M:ACt,p:_e,q:be,Q:tge,s:nge,S:ICt,u:kCt,U:RCt,V:NCt,w:PCt,W:DCt,x:null,X:null,y:OCt,Y:MCt,Z:FCt,"%":ege},S={a:P,A:D,b:L,B:M,c:F,d:Xme,e:Xme,f:tCt,g:Kme,G:Yme,H:Qme,I:Qme,j:QTt,L:eCt,m:XTt,M:JTt,p:R,q:KTt,Q:rCt,s:iCt,S:ZTt,u:HTt,U:qTt,V:WTt,w:VTt,W:GTt,x:z,X:B,y:Kme,Y:Yme,Z:YTt,"%":nCt};w.x=T(n,w),w.X=T(r,w),w.c=T(t,w),E.x=T(n,E),E.X=T(r,E),E.c=T(t,E);function T(xe,ke){return function(je){var Re=[],ft=-1,Ze=0,It=xe.length,bt,Ae,Be;for(je instanceof Date||(je=new Date(+je));++ft<It;)xe.charCodeAt(ft)===37&&(Re.push(xe.slice(Ze,ft)),(Ae=Gme[bt=xe.charAt(++ft)])!=null?bt=xe.charAt(++ft):Ae=bt==="e"?" ":"0",(Be=ke[bt])&&(bt=Be(je,Ae)),Re.push(bt),Ze=ft+1);return Re.push(xe.slice(Ze,ft)),Re.join("")}}function C(xe,ke){return function(je){var Re=d2(1900,void 0,1),ft=I(Re,xe,je+="",0),Ze,It;if(ft!=je.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(ke&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Ze=V7(d2(Re.y,0,1)),It=Ze.getUTCDay(),Ze=It>4||It===0?a6.ceil(Ze):a6(Ze),Ze=xv.offset(Ze,(Re.V-1)*7),Re.y=Ze.getUTCFullYear(),Re.m=Ze.getUTCMonth(),Re.d=Ze.getUTCDate()+(Re.w+6)%7):(Ze=z7(d2(Re.y,0,1)),It=Ze.getDay(),Ze=It>4||It===0?o6.ceil(Ze):o6(Ze),Ze=Yg.offset(Ze,(Re.V-1)*7),Re.y=Ze.getFullYear(),Re.m=Ze.getMonth(),Re.d=Ze.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),It="Z"in Re?V7(d2(Re.y,0,1)).getUTCDay():z7(d2(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(It+5)%7:Re.w+Re.U*7-(It+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,V7(Re)):z7(Re)}}function I(xe,ke,je,Re){for(var ft=0,Ze=ke.length,It=je.length,bt,Ae;ft<Ze;){if(Re>=It)return-1;if(bt=ke.charCodeAt(ft++),bt===37){if(bt=ke.charAt(ft++),Ae=S[bt in Gme?ke.charAt(ft++):bt],!Ae||(Re=Ae(xe,je,Re))<0)return-1}else if(bt!=je.charCodeAt(Re++))return-1}return Re}function R(xe,ke,je){var Re=l.exec(ke.slice(je));return Re?(xe.p=c.get(Re[0].toLowerCase()),je+Re[0].length):-1}function P(xe,ke,je){var Re=h.exec(ke.slice(je));return Re?(xe.w=p.get(Re[0].toLowerCase()),je+Re[0].length):-1}function D(xe,ke,je){var Re=f.exec(ke.slice(je));return Re?(xe.w=d.get(Re[0].toLowerCase()),je+Re[0].length):-1}function L(xe,ke,je){var Re=y.exec(ke.slice(je));return Re?(xe.m=b.get(Re[0].toLowerCase()),je+Re[0].length):-1}function M(xe,ke,je){var Re=m.exec(ke.slice(je));return Re?(xe.m=g.get(Re[0].toLowerCase()),je+Re[0].length):-1}function F(xe,ke,je){return I(xe,t,ke,je)}function z(xe,ke,je){return I(xe,n,ke,je)}function B(xe,ke,je){return I(xe,r,ke,je)}function H(xe){return o[xe.getDay()]}function q(xe){return s[xe.getDay()]}function Y(xe){return u[xe.getMonth()]}function $(xe){return a[xe.getMonth()]}function W(xe){return i[+(xe.getHours()>=12)]}function X(xe){return 1+~~(xe.getMonth()/3)}function V(xe){return o[xe.getUTCDay()]}function K(xe){return s[xe.getUTCDay()]}function J(xe){return u[xe.getUTCMonth()]}function ue(xe){return a[xe.getUTCMonth()]}function _e(xe){return i[+(xe.getUTCHours()>=12)]}function be(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var ke=T(xe+="",w);return ke.toString=function(){return xe},ke},parse:function(xe){var ke=C(xe+="",!1);return ke.toString=function(){return xe},ke},utcFormat:function(xe){var ke=T(xe+="",E);return ke.toString=function(){return xe},ke},utcParse:function(xe){var ke=C(xe+="",!0);return ke.toString=function(){return xe},ke}}}var Gme={"-":"",_:" ",0:"0"},ya=/^\s*\d+/,BTt=/^%/,UTt=/[\\^$*+?|[\]().{}]/g;function ei(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function zTt(e){return e.replace(UTt,"\\$&")}function h2(e){return new RegExp("^(?:"+e.map(zTt).join("|")+")","i")}function p2(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function VTt(e,t,n){var r=ya.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function HTt(e,t,n){var r=ya.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qTt(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function WTt(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function GTt(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Yme(e,t,n){var r=ya.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Kme(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function YTt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function KTt(e,t,n){var r=ya.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function XTt(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Xme(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function QTt(e,t,n){var r=ya.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Qme(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function JTt(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ZTt(e,t,n){var r=ya.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function eCt(e,t,n){var r=ya.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tCt(e,t,n){var r=ya.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function nCt(e,t,n){var r=BTt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function rCt(e,t,n){var r=ya.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function iCt(e,t,n){var r=ya.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Jme(e,t){return ei(e.getDate(),t,2)}function sCt(e,t){return ei(e.getHours(),t,2)}function oCt(e,t){return ei(e.getHours()%12||12,t,2)}function aCt(e,t){return ei(1+Yg.count(om(e),e),t,3)}function GRe(e,t){return ei(e.getMilliseconds(),t,3)}function uCt(e,t){return GRe(e,t)+"000"}function lCt(e,t){return ei(e.getMonth()+1,t,2)}function cCt(e,t){return ei(e.getMinutes(),t,2)}function fCt(e,t){return ei(e.getSeconds(),t,2)}function dCt(e){var t=e.getDay();return t===0?7:t}function hCt(e,t){return ei(MC.count(om(e)-1,e),t,2)}function YRe(e){var t=e.getDay();return t>=4||t===0?pT(e):pT.ceil(e)}function pCt(e,t){return e=YRe(e),ei(pT.count(om(e),e)+(om(e).getDay()===4),t,2)}function mCt(e){return e.getDay()}function gCt(e,t){return ei(o6.count(om(e)-1,e),t,2)}function yCt(e,t){return ei(e.getFullYear()%100,t,2)}function vCt(e,t){return e=YRe(e),ei(e.getFullYear()%100,t,2)}function bCt(e,t){return ei(e.getFullYear()%1e4,t,4)}function _Ct(e,t){var n=e.getDay();return e=n>=4||n===0?pT(e):pT.ceil(e),ei(e.getFullYear()%1e4,t,4)}function wCt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ei(t/60|0,"0",2)+ei(t%60,"0",2)}function Zme(e,t){return ei(e.getUTCDate(),t,2)}function xCt(e,t){return ei(e.getUTCHours(),t,2)}function ECt(e,t){return ei(e.getUTCHours()%12||12,t,2)}function SCt(e,t){return ei(1+xv.count(am(e),e),t,3)}function KRe(e,t){return ei(e.getUTCMilliseconds(),t,3)}function TCt(e,t){return KRe(e,t)+"000"}function CCt(e,t){return ei(e.getUTCMonth()+1,t,2)}function ACt(e,t){return ei(e.getUTCMinutes(),t,2)}function ICt(e,t){return ei(e.getUTCSeconds(),t,2)}function kCt(e){var t=e.getUTCDay();return t===0?7:t}function RCt(e,t){return ei(LC.count(am(e)-1,e),t,2)}function XRe(e){var t=e.getUTCDay();return t>=4||t===0?mT(e):mT.ceil(e)}function NCt(e,t){return e=XRe(e),ei(mT.count(am(e),e)+(am(e).getUTCDay()===4),t,2)}function PCt(e){return e.getUTCDay()}function DCt(e,t){return ei(a6.count(am(e)-1,e),t,2)}function OCt(e,t){return ei(e.getUTCFullYear()%100,t,2)}function $Ct(e,t){return e=XRe(e),ei(e.getUTCFullYear()%100,t,2)}function MCt(e,t){return ei(e.getUTCFullYear()%1e4,t,4)}function LCt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?mT(e):mT.ceil(e),ei(e.getUTCFullYear()%1e4,t,4)}function FCt(){return"+0000"}function ege(){return"%"}function tge(e){return+e}function nge(e){return Math.floor(+e/1e3)}var Jx,zZ,QRe,uP,JRe;jCt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jCt(e){return Jx=WRe(e),zZ=Jx.format,QRe=Jx.parse,uP=Jx.utcFormat,JRe=Jx.utcParse,Jx}function BCt(e){return new Date(e)}function UCt(e){return e instanceof Date?+e:+new Date(+e)}function VZ(e,t,n,r,i,s,o,a,u,l){var c=$Re(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function S(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:b:n(T)<T?w:E)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,UCt)):d().map(BCt)},c.ticks=function(T){var C=d();return e(C[0],C[C.length-1],T??10)},c.tickFormat=function(T,C){return C==null?S:l(C)},c.nice=function(T){var C=d();return(!T||typeof T.range!="function")&&(T=t(C[0],C[C.length-1],T??10)),T?d(FRe(C,T)):c},c.copy=function(){return aP(c,VZ(e,t,n,r,i,s,o,a,u,l))},c}function HZ(){return zh.apply(VZ(FTt,jTt,om,AR,MC,Yg,X5,Y5,Mg,zZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zCt(){return zh.apply(VZ(MTt,LTt,am,IR,LC,xv,Q5,K5,Mg,uP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J5(){var e=0,t=1,n,r,i,s,o=Yl,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(V0),l.rangeRound=c(nP),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function j1(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qZ(){var e=Qw(J5()(Yl));return e.copy=function(){return j1(e,qZ())},L1.apply(e,arguments)}function ZRe(){var e=LZ(J5()).domain([1,10]);return e.copy=function(){return j1(e,ZRe()).base(e.base())},L1.apply(e,arguments)}function eNe(){var e=FZ(J5());return e.copy=function(){return j1(e,eNe()).constant(e.constant())},L1.apply(e,arguments)}function WZ(){var e=jZ(J5());return e.copy=function(){return j1(e,WZ()).exponent(e.exponent())},L1.apply(e,arguments)}function VCt(){return WZ.apply(null,arguments).exponent(.5)}function Z5(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Yl,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,b,w;return arguments.length?([y,b,w]=g,l=bZ(m,[y,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=p(V0),h.rangeRound=p(nP),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function tNe(){var e=Qw(Z5()(Yl));return e.copy=function(){return j1(e,tNe())},L1.apply(e,arguments)}function nNe(){var e=LZ(Z5()).domain([.1,1,10]);return e.copy=function(){return j1(e,nNe()).base(e.base())},L1.apply(e,arguments)}function rNe(){var e=FZ(Z5());return e.copy=function(){return j1(e,rNe()).constant(e.constant())},L1.apply(e,arguments)}function GZ(){var e=jZ(Z5());return e.copy=function(){return j1(e,GZ()).exponent(e.exponent())},L1.apply(e,arguments)}function HCt(){return GZ.apply(null,arguments).exponent(.5)}function Vh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const qCt=Vh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),WCt=Vh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),GCt=Vh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),YCt=Vh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),KCt=Vh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),XCt=Vh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),QCt=Vh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),JCt=Vh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ZCt=Vh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),eAt=Vh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ej=Vh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Xn(e){return function(){return e}}const rge=Math.abs,nu=Math.atan2,wb=Math.cos,tAt=Math.max,H7=Math.min,ip=Math.sin,y_=Math.sqrt,su=1e-12,gT=Math.PI,u6=gT/2,lk=2*gT;function nAt(e){return e>1?0:e<-1?gT:Math.acos(e)}function ige(e){return e>=1?u6:e<=-1?-u6:Math.asin(e)}function tj(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new SZ(t)}function rAt(e){return e.innerRadius}function iAt(e){return e.outerRadius}function sAt(e){return e.startAngle}function oAt(e){return e.endAngle}function aAt(e){return e&&e.padAngle}function uAt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<su))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function u3(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/y_(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,b=p-d,w=m-h,E=b*b+w*w,S=i-s,T=d*m-p*h,C=(w<0?-1:1)*y_(tAt(0,S*S*E-T*T)),I=(T*w-b*C)/E,R=(-T*b-w*C)/E,P=(T*w+b*C)/E,D=(-T*b+w*C)/E,L=I-g,M=R-y,F=P-g,z=D-y;return L*L+M*M>F*F+z*z&&(I=P,R=D),{cx:I,cy:R,x01:-c,y01:-f,x11:I*(i/S-1),y11:R*(i/S-1)}}function SW(){var e=rAt,t=iAt,n=Xn(0),r=null,i=sAt,s=oAt,o=aAt,a=null,u=tj(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-u6,m=s.apply(this,arguments)-u6,g=rge(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>su))a.moveTo(0,0);else if(g>lk-su)a.moveTo(h*wb(p),h*ip(p)),a.arc(0,0,h,p,m,!y),d>su&&(a.moveTo(d*wb(m),d*ip(m)),a.arc(0,0,d,m,p,y));else{var b=p,w=m,E=p,S=m,T=g,C=g,I=o.apply(this,arguments)/2,R=I>su&&(r?+r.apply(this,arguments):y_(d*d+h*h)),P=H7(rge(h-d)/2,+n.apply(this,arguments)),D=P,L=P,M,F;if(R>su){var z=ige(R/d*ip(I)),B=ige(R/h*ip(I));(T-=z*2)>su?(z*=y?1:-1,E+=z,S-=z):(T=0,E=S=(p+m)/2),(C-=B*2)>su?(B*=y?1:-1,b+=B,w-=B):(C=0,b=w=(p+m)/2)}var H=h*wb(b),q=h*ip(b),Y=d*wb(S),$=d*ip(S);if(P>su){var W=h*wb(w),X=h*ip(w),V=d*wb(E),K=d*ip(E),J;if(g<gT)if(J=uAt(H,q,V,K,W,X,Y,$)){var ue=H-J[0],_e=q-J[1],be=W-J[0],xe=X-J[1],ke=1/ip(nAt((ue*be+_e*xe)/(y_(ue*ue+_e*_e)*y_(be*be+xe*xe)))/2),je=y_(J[0]*J[0]+J[1]*J[1]);D=H7(P,(d-je)/(ke-1)),L=H7(P,(h-je)/(ke+1))}else D=L=0}C>su?L>su?(M=u3(V,K,H,q,h,L,y),F=u3(W,X,Y,$,h,L,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),L<P?a.arc(M.cx,M.cy,L,nu(M.y01,M.x01),nu(F.y01,F.x01),!y):(a.arc(M.cx,M.cy,L,nu(M.y01,M.x01),nu(M.y11,M.x11),!y),a.arc(0,0,h,nu(M.cy+M.y11,M.cx+M.x11),nu(F.cy+F.y11,F.cx+F.x11),!y),a.arc(F.cx,F.cy,L,nu(F.y11,F.x11),nu(F.y01,F.x01),!y))):(a.moveTo(H,q),a.arc(0,0,h,b,w,!y)):a.moveTo(H,q),!(d>su)||!(T>su)?a.lineTo(Y,$):D>su?(M=u3(Y,$,W,X,d,-D,y),F=u3(H,q,V,K,d,-D,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),D<P?a.arc(M.cx,M.cy,D,nu(M.y01,M.x01),nu(F.y01,F.x01),!y):(a.arc(M.cx,M.cy,D,nu(M.y01,M.x01),nu(M.y11,M.x11),!y),a.arc(0,0,d,nu(M.cy+M.y11,M.cx+M.x11),nu(F.cy+F.y11,F.cx+F.x11),y),a.arc(F.cx,F.cy,D,nu(F.y11,F.x11),nu(F.y01,F.x01),!y))):a.arc(0,0,d,S,E,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-gT/2;return[wb(f)*c,ip(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Xn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Xn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Xn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function nj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function iNe(e){this._context=e}iNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function YZ(e){return new iNe(e)}function sNe(e){return e[0]}function oNe(e){return e[1]}function aNe(e,t){var n=Xn(!0),r=null,i=YZ,s=null,o=tj(a);e=typeof e=="function"?e:e===void 0?sNe:Xn(e),t=typeof t=="function"?t:t===void 0?oNe:Xn(t);function a(u){var l,c=(u=nj(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Xn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Xn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Xn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function uNe(e,t,n){var r=null,i=Xn(!0),s=null,o=YZ,a=null,u=tj(l);e=typeof e=="function"?e:e===void 0?sNe:Xn(+e),t=typeof t=="function"?t:Xn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?oNe:Xn(+n);function l(f){var d,h,p,m=(f=nj(f)).length,g,y=!1,b,w=new Array(m),E=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(w[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):w[d],n?+n(g,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return aNe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Xn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function lAt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function cAt(e){return e}function fAt(){var e=cAt,t=lAt,n=null,r=Xn(0),i=Xn(lk),s=Xn(0);function o(a){var u,l=(a=nj(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(lk,Math.max(-lk,i.apply(this,arguments)-m)),y,b=Math.min(Math.abs(g)/l,s.apply(this,arguments)),w=b*(g<0?-1:1),E;for(u=0;u<l;++u)(E=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=E);for(t!=null?h.sort(function(S,T){return t(p[S],p[T])}):n!=null&&h.sort(function(S,T){return n(a[S],a[T])}),u=0,f=d?(g-l*w)/d:0;u<l;++u,m=y)c=h[u],E=p[c],y=m+(E>0?E*f:0)+w,p[c]={data:a[c],index:u,value:E,startAngle:m,endAngle:y,padAngle:b};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Xn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Xn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Xn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Xn(+a),o):s},o}const dAt={draw(e,t){const n=y_(t/gT);e.moveTo(n,0),e.arc(0,0,n,0,lk)}};function hAt(e,t){let n=null,r=tj(i);e=typeof e=="function"?e:Xn(e||dAt),t=typeof t=="function"?t:Xn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Xn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Xn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function qv(){}function l6(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function rj(e){this._context=e}rj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:l6(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:l6(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pAt(e){return new rj(e)}function lNe(e){this._context=e}lNe.prototype={areaStart:qv,areaEnd:qv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:l6(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mAt(e){return new lNe(e)}function cNe(e){this._context=e}cNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:l6(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gAt(e){return new cNe(e)}function fNe(e,t){this._basis=new rj(e),this._beta=t}fNe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const yAt=function e(t){function n(r){return t===1?new rj(r):new fNe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function c6(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function KZ(e,t){this._context=e,this._k=(1-t)/6}KZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:c6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vAt=function e(t){function n(r){return new KZ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function XZ(e,t){this._context=e,this._k=(1-t)/6}XZ.prototype={areaStart:qv,areaEnd:qv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:c6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bAt=function e(t){function n(r){return new XZ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function QZ(e,t){this._context=e,this._k=(1-t)/6}QZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _At=function e(t){function n(r){return new QZ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function JZ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>su){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>su){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function dNe(e,t){this._context=e,this._alpha=t}dNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:JZ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wAt=function e(t){function n(r){return t?new dNe(r,t):new KZ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function hNe(e,t){this._context=e,this._alpha=t}hNe.prototype={areaStart:qv,areaEnd:qv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:JZ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xAt=function e(t){function n(r){return t?new hNe(r,t):new XZ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function pNe(e,t){this._context=e,this._alpha=t}pNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:JZ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EAt=function e(t){function n(r){return t?new pNe(r,t):new QZ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mNe(e){this._context=e}mNe.prototype={areaStart:qv,areaEnd:qv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SAt(e){return new mNe(e)}function sge(e){return e<0?-1:1}function oge(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(sge(s)+sge(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function age(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function q7(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function f6(e){this._context=e}f6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q7(this,this._t0,age(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,q7(this,age(this,n=oge(this,e,t)),n);break;default:q7(this,this._t0,n=oge(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function gNe(e){this._context=new yNe(e)}(gNe.prototype=Object.create(f6.prototype)).point=function(e,t){f6.prototype.point.call(this,t,e)};function yNe(e){this._context=e}yNe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function TAt(e){return new f6(e)}function CAt(e){return new gNe(e)}function vNe(e){this._context=e}vNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=uge(e),i=uge(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uge(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function AAt(e){return new vNe(e)}function ij(e,t){this._context=e,this._t=t}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function IAt(e){return new ij(e,.5)}function kAt(e){return new ij(e,0)}function RAt(e){return new ij(e,1)}function lge(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function cge(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function NAt(e,t){return e[t]}function PAt(e){const t=[];return t.key=e,t}function DAt(){var e=Xn([]),t=cge,n=lge,r=NAt;function i(s){var o=Array.from(e.apply(this,arguments),PAt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=nj(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Xn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Xn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?cge:typeof s=="function"?s:Xn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??lge,i):n},i}function cI(e,t,n){this.k=e,this.x=t,this.y=n}cI.prototype={constructor:cI,scale:function(e){return e===1?this:new cI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new cI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cI.prototype;function ZZ({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?uP("%B"):M1(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Xc,{children:_.jsx(Pi,{gap:3,children:_.jsx(at,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Xc,{children:_.jsx(Zi,{withinPortal:!0,label:c,children:_.jsx(at,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const OAt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:ZZ},Symbol.toStringTag,{value:"Module"}));function bNe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Xc,{children:_.jsx(Pi,{gap:3,children:_.jsx(at,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Pi,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(at,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const $At=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:bNe},Symbol.toStringTag,{value:"Module"})),Tf={top:15,left:100,right:50,bottom:50};function TW({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=vh(),o=N.useMemo(()=>s-Tf.left-Tf.right,[s]),a=N.useMemo(()=>i-Tf.top-Tf.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return F1(ej).domain(d)},[n,t.category]),l=N.useMemo(()=>e?sd([Tf.left,o+Tf.left]).domain([0,Wg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?$C([Tf.top,a+Tf.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Tf.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Tf.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(ZZ,{xScale:l,yRange:c.range(),vertPosition:a+Tf.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(bNe,{yScale:c,horizontalPosition:Tf.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(pd,{})}const MAt=Object.freeze(Object.defineProperty({__proto__:null,Bar:TW,default:TW},Symbol.toStringTag,{value:"Module"})),Qr=Array.isArray;function lc(e){return e!=null?Qr(e)?e:[e]:[]}function LAt(e=0,t=1/0){return`${fge(e)} < row_number() && row_number() <= ${fge(t)}`}function fge(e){return e<0?`count() + ${e}`:e}class _Ne{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(LAt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,lc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Qn(e){throw Error(e)}function fl(e){return typeof e=="number"}function as(e){return typeof e=="function"}function sj(e,t){const n=Array(e);if(as(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let FAt=class extends _Ne{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Qn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Qn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Qn("Not implemented")}getter(t){Qn("Not implemented")}objects(t){Qn("Not implemented")}object(t){Qn("Not implemented")}[Symbol.iterator](){Qn("Not implemented")}print(t={}){fl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=sj(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},jAt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},BAt=function(e){return e&&as(e.get)?e:new jAt(e)};function v0(e){return e instanceof Date}function Tu(e){return e===Object(e)}function d6(e){return e instanceof RegExp}function Ha(e){return typeof e=="string"}function UAt(e,t){const n=r=>Qn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?dge(e.entries(),t):v0(e)?n("Date"):d6(e)?n("RegExp"):Ha(e)?n():Qr(e)?zAt(e,t):as(e[Symbol.iterator])?VAt(e,t):Tu(e)?dge(Object.entries(e),t):n()}function dge(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function zAt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function VAt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:HAt}=Object.prototype;function Ih(e,t){return HAt.call(e,t)}function pf(e){return e?new hge({...e.data()},e.columnNames()):new hge}class hge{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Ih(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const qr=void 0,qAt=Object.getPrototypeOf(Int8Array);function lP(e){return e instanceof qAt}function v_(e){return Qr(e)||lP(e)}function fh(e){return e!=null&&e===e}const m2=e=>v_(e)||Ha(e),WAt={compact:e=>v_(e)?e.filter(t=>fh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>m2(e)?e.includes(t,n):!1,indexof:(e,t)=>m2(e)?e.indexOf(t):-1,join:(e,t)=>v_(e)?e.join(t):qr,lastindexof:(e,t)=>m2(e)?e.lastIndexOf(t):-1,length:e=>m2(e)?e.length:0,pluck:(e,t)=>v_(e)?e.map(n=>fh(n)?n[t]:qr):qr,reverse:e=>v_(e)?e.slice().reverse():Ha(e)?e.split("").reverse().join(""):qr,slice:(e,t,n)=>m2(e)?e.slice(t,n):qr};function GAt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function L$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const sp=e=>(e<10?"0":"")+e,YAt=e=>e<0?"-"+L$(-e,6):e>9999?"+"+L$(e,6):L$(e,4);function wNe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return YAt(e)+"-"+sp(t+1)+"-"+sp(n)+(!u||o?"T"+sp(r)+":"+sp(i)+":"+sp(s)+"."+L$(o,3)+l:s?"T"+sp(r)+":"+sp(i)+":"+sp(s)+l:i||r||!a?"T"+sp(r)+":"+sp(i)+l:"")}function xNe(e,t){return isNaN(e)?"Invalid Date":wNe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function oj(e,t){return isNaN(e)?"Invalid Date":wNe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const KAt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function XAt(e){return e.match(KAt)&&!isNaN(Date.parse(e))}function QAt(e,t=Date.parse){return XAt(e)?t(e):e}const ENe=6e4,SNe=864e5,TNe=6048e5,Fs=new Date,js=new Date,Ks=e=>(Fs.setTime(typeof e=="string"?QAt(e):e),Fs);function JAt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function ZAt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function e2t(e){js.setTime(+e),js.setHours(0,0,0,0),Fs.setTime(+js),Fs.setMonth(0),Fs.setDate(1);const t=(js.getTimezoneOffset()-Fs.getTimezoneOffset())*ENe;return Math.floor(1+(js-Fs-t)/SNe)}function t2t(e){js.setTime(+e),js.setUTCHours(0,0,0,0);const t=Date.UTC(js.getUTCFullYear(),0,1);return Math.floor(1+(js-t)/SNe)}function n2t(e,t){const n=t||0;js.setTime(+e),js.setDate(js.getDate()-(js.getDay()+7-n)%7),js.setHours(0,0,0,0),Fs.setTime(+e),Fs.setMonth(0),Fs.setDate(1),Fs.setDate(1-(Fs.getDay()+7-n)%7),Fs.setHours(0,0,0,0);const r=(js.getTimezoneOffset()-Fs.getTimezoneOffset())*ENe;return Math.floor((1+(js-Fs)-r)/TNe)}function r2t(e,t){const n=t||0;return js.setTime(+e),js.setUTCDate(js.getUTCDate()-(js.getUTCDay()+7-n)%7),js.setUTCHours(0,0,0,0),Fs.setTime(+e),Fs.setUTCMonth(0),Fs.setUTCDate(1),Fs.setUTCDate(1-(Fs.getUTCDay()+7-n)%7),Fs.setUTCHours(0,0,0,0),Math.floor((1+(js-Fs))/TNe)}const i2t={format_date:(e,t)=>xNe(Ks(e),!t),format_utcdate:(e,t)=>oj(Ks(e),!t),timestamp:e=>+Ks(e),year:e=>Ks(e).getFullYear(),quarter:e=>Math.floor(Ks(e).getMonth()/3),month:e=>Ks(e).getMonth(),date:e=>Ks(e).getDate(),dayofweek:e=>Ks(e).getDay(),hours:e=>Ks(e).getHours(),minutes:e=>Ks(e).getMinutes(),seconds:e=>Ks(e).getSeconds(),milliseconds:e=>Ks(e).getMilliseconds(),utcyear:e=>Ks(e).getUTCFullYear(),utcquarter:e=>Math.floor(Ks(e).getUTCMonth()/3),utcmonth:e=>Ks(e).getUTCMonth(),utcdate:e=>Ks(e).getUTCDate(),utcdayofweek:e=>Ks(e).getUTCDay(),utchours:e=>Ks(e).getUTCHours(),utcminutes:e=>Ks(e).getUTCMinutes(),utcseconds:e=>Ks(e).getUTCSeconds(),utcmilliseconds:e=>Ks(e).getUTCMilliseconds(),datetime:JAt,dayofyear:e2t,week:n2t,utcdatetime:ZAt,utcdayofyear:t2t,utcweek:r2t,now:Date.now};function eee(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:v0(e)||v0(t)?+e==+t:d6(e)&&d6(t)?e+""==t+"":Tu(e)&&Tu(t)?s2t(e,t):!1}function s2t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return pge(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!pge(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!eee(e[o],t[o]))return!1}return!0}function pge(e,t,n=eee){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const o2t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let a2t=Math.random;function FC(){return a2t()}const u2t={random:FC,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function tee(e){return e instanceof Map}function l2t(e){return e instanceof Set}function F$(e){return tee(e)||l2t(e)}function W7(e){return Array.from(e)}const c2t={has:(e,t)=>F$(e)?e.has(t):e!=null?Ih(e,t):!1,keys:e=>tee(e)?W7(e.keys()):e!=null?Object.keys(e):[],values:e=>F$(e)?W7(e.values()):e!=null?Object.values(e):[],entries:e=>F$(e)?W7(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):qr};function f2t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Ih(t,e))return t[e];return n!==void 0?n:e}function d2t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const h2t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},qE={bin:GAt,equal:eee,recode:f2t,sequence:d2t,...WAt,...i2t,...o2t,...u2t,...c2t,...h2t};function kR(e){return typeof e=="bigint"}function um(e){return e===void 0?e+"":kR(e)?e+"n":JSON.stringify(e)}function qn(e,t=[],n=[]){return new p2t(e,lc(t),lc(n))}let p2t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${um(n)}]`),...this.params.map(um)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const CNe=e=>qn("any",e),ANe=()=>qn("count"),INe=e=>qn("array_agg",e),kNe=e=>qn("array_agg_distinct",e),RNe=(e,t)=>qn("map_agg",[e,t]),NNe=(e,t)=>qn("object_agg",[e,t]),PNe=(e,t)=>qn("entries_agg",[e,t]);({...qE});function m2t(e,t){e=F$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function g2t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function y2t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function v2t(e,t,n,r){const i=r==="map"||r===!0?RNe:r==="entries"?PNe:r==="object"?NNe:Qn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=m2t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:INe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const b2t="ArrayPattern",_2t="ArrowFunctionExpression",w2t="FunctionExpression",Ev="Identifier",jC="Literal",DNe="MemberExpression",x2t="ObjectExpression",ONe="ObjectPattern",$Ne="Property",cP="Column",E2t="Constant",S2t="Dictionary",T2t="Function",C2t="Parameter",MNe="Op",Ui=(e,t)=>{const n=A2t[e.type];return n?n(e,t):Qn(`Unsupported expression construct: ${e.type}`)},G7=(e,t)=>"("+Ui(e.left,t)+" "+e.operator+" "+Ui(e.right,t)+")",Y7=(e,t)=>"("+hp(e.params,t)+")=>"+Ui(e.body,t),mge=(e,t)=>Ui(e.callee,t)+"("+hp(e.arguments,t)+")",hp=(e,t,n=",")=>e.map(r=>Ui(r,t)).join(n),LNe=e=>e.computed?`[${um(e.name)}]`:`.${e.name}`,gge=(e,t,n)=>{const r=e.table||"";return`data${r}${LNe(e)}.${n}(${t.index}${r})`},A2t={Constant:e=>e.raw,Column:(e,t)=>gge(e,t,"get"),Dictionary:(e,t)=>gge(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${LNe(e)}`,Op:(e,t)=>`op(${um(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Ui(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Ui(e.object,t),i=Ui(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:mge,NewExpression:(e,t)=>"new "+mge(e,t),ArrayExpression:(e,t)=>"["+hp(e.elements,t)+"]",AssignmentExpression:G7,BinaryExpression:G7,LogicalExpression:G7,UnaryExpression:(e,t)=>"("+e.operator+Ui(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Ui(e.test,t)+"?"+Ui(e.consequent,t)+":"+Ui(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+hp(e.properties,t)+"})",Property:(e,t)=>{const n=Ui(e.key,t);return(e.computed?`[${n}]`:n)+":"+Ui(e.value,t)},ArrowFunctionExpression:Y7,FunctionExpression:Y7,FunctionDeclaration:Y7,ArrayPattern:(e,t)=>"["+hp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+hp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+hp(e.declarations,t,","),VariableDeclarator:(e,t)=>Ui(e.id,t)+"="+Ui(e.init,t),SpreadElement:(e,t)=>"..."+Ui(e.argument,t),BlockStatement:(e,t)=>"{"+hp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Ui(e.expression,t),IfStatement:(e,t)=>"if ("+Ui(e.test,t)+")"+Ui(e.consequent,t)+(e.alternate?" else "+Ui(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Ui(e.discriminant,t)+") {"+hp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Ui(e.test,t):"default")+": "+hp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Ui(e.argument,t),Program:(e,t)=>Ui(e.body[0],t)};function h6(e,t={index:"row"}){return Ui(e,t)}function I2t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function yT(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:v0(e)?+e:Qr(e)||lP(e)?`[${e.map(yT)}]`:d6(e)?e+"":k2t(e)}function k2t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${yT(e[r])}`;return t+="}",t}function p6(e,t){const n=e.length;return n===1?(r,i)=>yT(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=yT(a)}return s}}function R2t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=yT(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=yT(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function bg(){}function N2t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function No(e){return e.init=e.init||bg,e.add=e.add||bg,e.rem=e.rem||bg,e}function yge(e,t){return e.product_v=!1,e.product=t}const FNe={count:{create:()=>No({value:e=>e.count}),param:[]},array_agg:{create:()=>No({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>No({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>No({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>No({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>No({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:qr}),param:[1]},valid:{create:()=>No({value:e=>e.valid}),param:[1]},invalid:{create:()=>No({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=R2t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>No({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>No({value:e=>{let t=qr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:qr,add:(e,t)=>kR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>yge(e,1),value:e=>e.valid?e.product_v?yge(e,N2t(e.list.values())):e.product:void 0,add:(e,t)=>kR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:qr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>No({value:e=>e.valid?e.mean:qr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):qr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>No({value:e=>e.valid>1?e.dev/e.valid:qr}),param:[1],req:["variance"]},stdev:{create:()=>No({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):qr}),param:[1],req:["variance"]},stdevp:{create:()=>No({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):qr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=qr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===qr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=qr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===qr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>No({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>No({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):qr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>No({value:e=>e.valid>1?e.cov/e.valid:qr}),param:[2],req:["covariance"]},corr:{create:()=>No({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):qr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>No({value:i=>I2t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},vge={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},bge={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},jNe={row_number:{create(){return{init:bg,value:e=>e.index+1}},param:[]},rank:vge,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=vge.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:bge,ntile:{create(e){e=+e,e>0||Qn("ntile num must be greater than zero.");const{init:t,value:n}=bge.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=qr){return e=+e||1,{init:bg,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=qr){return e=+e||1,{init:bg,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:bg,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:bg,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Qn("nth_value nth must be greater than zero."),{init:bg,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):qr}}},param:[1,1]},fill_down:{create(e=qr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return fh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=qr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=P2t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function P2t(e,t,n){for(const r=e.size;n<r;++n)if(fh(e.value(n,t)))return n;return-1}function nee(e){return Ih(FNe,e)}function ree(e){return Ih(jNe,e)}function BNe(e){return Ih(qE,e)||e==="row_object"}function UNe(e){return nee(e)&&FNe[e]}function zNe(e){return ree(e)&&jNe[e]}function g2(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const iee={escape:(e,t,n)=>g2(e,t,n),expr:(e,t)=>g2(`(row,data,op)=>${e}`,qE,t),expr2:(e,t)=>g2(`(row0,data0,row,data)=>${e}`,qE,t),join:(e,t)=>g2(`(row1,data1,row2,data2)=>${e}`,qE,t),param:(e,t)=>g2(e,qE,t)},D2t={"==":1,"!=":1,"===":1,"!==":1};function VNe(e,t,n=0,r,i){if(e.type=cP,e.name=t,e.table=n,i&&r&&as(r.keyFor)){const s=D2t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===jC&&O2t(i,e,s,r.keyFor(s.value))}return e}function O2t(e,t,n,r){return r<0?(e.type=jC,e.value=!1,e.raw="false"):(t.type=S2t,n.value=r,n.raw=r+""),!0}function aj(e){return Qr(e)?e:tee(e)?e.entries():e?Object.entries(e):[]}const HNe="row_object";function qNe(e,t){e.type=x2t;const n=e.properties=[];for(const r of aj(t)){const[i,s]=Qr(r)?r:[r,r];n.push({type:$Ne,key:{type:jC,raw:um(s)},value:VNe({computed:!0},i)})}return e}function WNe(e){return h6(qNe({},e))}function GNe(e){return iee.expr(WNe(e))}const $2t=new TextDecoder("utf-8"),CW=e=>$2t.decode(e),M2t=new TextEncoder,see=e=>M2t.encode(e),L2t=e=>typeof e=="boolean",Dl=e=>typeof e=="function",B1=e=>e!=null&&Object(e)===e,uj=e=>B1(e)&&Dl(e.then),oee=e=>B1(e)&&Dl(e[Symbol.iterator]),lj=e=>B1(e)&&Dl(e[Symbol.asyncIterator]),F2t=e=>B1(e)&&"done"in e&&"value"in e,YNe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,j2t=e=>B1(e)&&Dl(e.abort)&&Dl(e.getWriter)&&!YNe(e),B2t=e=>B1(e)&&Dl(e.end)&&Dl(e.write)&&L2t(e.writable)&&!YNe(e),U2t=e=>B1(e)&&Dl(e.clear)&&Dl(e.bytes)&&Dl(e.position)&&Dl(e.setPosition)&&Dl(e.capacity)&&Dl(e.getBufferIdentifier)&&Dl(e.createLong),aee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function z2t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function m6(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function lm(e,t){const n=z2t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?m6(o,s,a):o=s;break}m6(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function ea(e,t){let n=F2t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=see(n)),n instanceof ArrayBuffer?new e(n):n instanceof aee?new e(n):U2t(n)?ea(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const y2=e=>ea(Int32Array,e),_i=e=>ea(Uint8Array,e),AW=e=>(e.next(),e);function*V2t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof aee?n(t):oee(t)?t:n(t);return yield*AW(function*(i){let s=null;do s=i.next(yield ea(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const H2t=e=>V2t(Uint8Array,e);function KNe(e,t){return f_(this,arguments,function*(){if(uj(t))return yield Dr(yield Dr(yield*IU(YI(KNe(e,yield Dr(t))))));const r=function(o){return f_(this,arguments,function*(){yield yield Dr(yield Dr(o))})},i=function(o){return f_(this,arguments,function*(){yield Dr(yield*IU(YI(AW(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof aee?r(t):oee(t)?i(t):lj(t)?t:r(t);return yield Dr(yield*IU(YI(AW(function(o){return f_(this,arguments,function*(){let a=null;do a=yield Dr(o.next(yield yield Dr(ea(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Dr(new e)})}const q2t=e=>KNe(Uint8Array,e);function XNe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function W2t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const _ge={fromIterable(e){return l3(G2t(e))},fromAsyncIterable(e){return l3(Y2t(e))},fromDOMStream(e){return l3(K2t(e))},fromNodeStream(e){return l3(Q2t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},l3=e=>(e.next(),e);function*G2t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?lm(r,o)[0]:([i,r,a]=lm(r,o),i)}({cmd:s,size:o}=yield null);const l=H2t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Y2t(e){return f_(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?lm(i,a)[0]:([s,i,u]=lm(i,a),s)}({cmd:o,size:a}=yield yield Dr(null));const c=q2t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Dr(c.next()):yield Dr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Dr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Dr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Dr(c.return(new Uint8Array(0))))}return yield Dr(null)})}function K2t(e){return f_(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?lm(i,a)[0]:([s,i,u]=lm(i,a),s)}({cmd:o,size:a}=yield yield Dr(null));const c=new X2t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Dr(c.read()):yield Dr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(_i(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Dr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Dr(c.cancel(f)))}finally{r===!1?yield Dr(c.cancel()):e.locked&&c.releaseLock()}return yield Dr(null)})}class X2t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return xg(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return xg(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=_i(n)),n})}}const K7=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Q2t(e){return f_(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?lm(l,a)[0]:([c,l,u]=lm(l,a),c)}if({cmd:o,size:a}=yield yield Dr(null),e.isTTY)return yield yield Dr(new Uint8Array(0)),yield Dr(null);try{n[0]=K7(e,"end"),n[1]=K7(e,"error");do{if(n[2]=K7(e,"readable"),[r,s]=yield Dr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=_i(e.read(a-u)),c.byteLength<a-u&&(c=_i(e.read()))):c=_i(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Dr(f()));while(a<u)}while(!i)}finally{yield Dr(d(n,r==="error"?s:null))}return yield Dr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,b]of h)e.off(y,b);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ju;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ju||(Ju={}));var cc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(cc||(cc={}));var La;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(La||(La={}));var cm;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(cm||(cm={}));var gn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(gn||(gn={}));var fm;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(fm||(fm={}));var ra;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ra||(ra={}));var fe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(fe||(fe={}));var hg;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(hg||(hg={}));const J2t=void 0;function rw(e){if(e===null)return"null";if(e===J2t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>rw(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Z2t=Symbol.for("isArrowBigNum");function Hh(e,...t){return t.length===0?Object.setPrototypeOf(ea(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Hh.prototype[Z2t]=!0;Hh.prototype.toJSON=function(){return`"${NR(this)}"`};Hh.prototype.valueOf=function(){return QNe(this)};Hh.prototype.toString=function(){return NR(this)};Hh.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return QNe(this);case"string":return NR(this);case"default":return eIt(this)}return NR(this)};function yS(...e){return Hh.apply(this,e)}function vS(...e){return Hh.apply(this,e)}function RR(...e){return Hh.apply(this,e)}Object.setPrototypeOf(yS.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(vS.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(RR.prototype,Object.create(Uint32Array.prototype));Object.assign(yS.prototype,Hh.prototype,{constructor:yS,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(vS.prototype,Hh.prototype,{constructor:vS,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(RR.prototype,Hh.prototype,{constructor:RR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function QNe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const NR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return X7(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return X7(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${X7(t)}`},eIt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:NR(e);function X7(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class uee{static new(t,n){switch(n){case!0:return new yS(t);case!1:return new vS(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new yS(t)}return t.byteLength===16?new RR(t):new vS(t)}static signed(t){return new yS(t)}static unsigned(t){return new vS(t)}static decimal(t){return new RR(t)}constructor(t,n){return uee.new(t,n)}}function kh(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var JNe,ZNe,ePe,tPe,nPe,rPe,iPe,sPe,oPe,aPe,uPe,lPe,cPe,fPe,dPe,hPe,pPe,mPe,gPe,yPe;let ir=class IW{static isNull(t){return(t==null?void 0:t.typeId)===fe.Null}static isInt(t){return(t==null?void 0:t.typeId)===fe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===fe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===fe.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===fe.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===fe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===fe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===fe.Date}static isTime(t){return(t==null?void 0:t.typeId)===fe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===fe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===fe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===fe.Duration}static isList(t){return(t==null?void 0:t.typeId)===fe.List}static isStruct(t){return(t==null?void 0:t.typeId)===fe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===fe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===fe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===fe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===fe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===fe.Dictionary}static isDenseUnion(t){return IW.isUnion(t)&&t.mode===cc.Dense}static isSparseUnion(t){return IW.isUnion(t)&&t.mode===cc.Sparse}get typeId(){return fe.NONE}};JNe=Symbol.toStringTag;ir[JNe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(ir.prototype);let b0=class extends ir{toString(){return"Null"}get typeId(){return fe.Null}};ZNe=Symbol.toStringTag;b0[ZNe]=(e=>e[Symbol.toStringTag]="Null")(b0.prototype);class dl extends ir{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return fe.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ePe=Symbol.toStringTag;dl[ePe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(dl.prototype);class lee extends dl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class cee extends dl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Wv extends dl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class fee extends dl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class dee extends dl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class hee extends dl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class pee extends dl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class mee extends dl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(lee.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(cee.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Wv.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(fee.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(dee.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(hee.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(pee.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(mee.prototype,"ArrayType",{value:BigUint64Array});class Gv extends ir{constructor(t){super(),this.precision=t}get typeId(){return fe.Float}get ArrayType(){switch(this.precision){case La.HALF:return Uint16Array;case La.SINGLE:return Float32Array;case La.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}tPe=Symbol.toStringTag;Gv[tPe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Gv.prototype);class vPe extends Gv{constructor(){super(La.HALF)}}class gee extends Gv{constructor(){super(La.SINGLE)}}class yee extends Gv{constructor(){super(La.DOUBLE)}}Object.defineProperty(vPe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(gee.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(yee.prototype,"ArrayType",{value:Float64Array});let PR=class extends ir{constructor(){super()}get typeId(){return fe.Binary}toString(){return"Binary"}};nPe=Symbol.toStringTag;PR[nPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(PR.prototype);let vT=class extends ir{constructor(){super()}get typeId(){return fe.Utf8}toString(){return"Utf8"}};rPe=Symbol.toStringTag;vT[rPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(vT.prototype);let DR=class extends ir{constructor(){super()}get typeId(){return fe.Bool}toString(){return"Bool"}};iPe=Symbol.toStringTag;DR[iPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(DR.prototype);let g6=class extends ir{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return fe.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};sPe=Symbol.toStringTag;g6[sPe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(g6.prototype);class bT extends ir{constructor(t){super(),this.unit=t}get typeId(){return fe.Date}toString(){return`Date${(this.unit+1)*32}<${cm[this.unit]}>`}}oPe=Symbol.toStringTag;bT[oPe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(bT.prototype);class tIt extends bT{constructor(){super(cm.DAY)}}class nIt extends bT{constructor(){super(cm.MILLISECOND)}}class _0 extends ir{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return fe.Time}toString(){return`Time${this.bitWidth}<${gn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}aPe=Symbol.toStringTag;_0[aPe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(_0.prototype);class rIt extends _0{constructor(){super(gn.SECOND,32)}}class iIt extends _0{constructor(){super(gn.MILLISECOND,32)}}class sIt extends _0{constructor(){super(gn.MICROSECOND,64)}}class oIt extends _0{constructor(){super(gn.NANOSECOND,64)}}class y6 extends ir{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return fe.Timestamp}toString(){return`Timestamp<${gn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}uPe=Symbol.toStringTag;y6[uPe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(y6.prototype);class _T extends ir{constructor(t){super(),this.unit=t}get typeId(){return fe.Interval}toString(){return`Interval<${fm[this.unit]}>`}}lPe=Symbol.toStringTag;_T[lPe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(_T.prototype);class aIt extends _T{constructor(){super(fm.DAY_TIME)}}class uIt extends _T{constructor(){super(fm.YEAR_MONTH)}}let v6=class extends ir{constructor(t){super(),this.unit=t}get typeId(){return fe.Duration}toString(){return`Duration<${gn[this.unit]}>`}};cPe=Symbol.toStringTag;v6[cPe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(v6.prototype);let wT=class extends ir{constructor(t){super(),this.children=[t]}get typeId(){return fe.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};fPe=Symbol.toStringTag;wT[fPe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(wT.prototype);class hu extends ir{constructor(t){super(),this.children=t}get typeId(){return fe.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}dPe=Symbol.toStringTag;hu[dPe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(hu.prototype);class OR extends ir{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return fe.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}hPe=Symbol.toStringTag;OR[hPe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(OR.prototype);let b6=class extends ir{constructor(t){super(),this.byteWidth=t}get typeId(){return fe.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};pPe=Symbol.toStringTag;b6[pPe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(b6.prototype);let xT=class extends ir{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return fe.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};mPe=Symbol.toStringTag;xT[mPe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(xT.prototype);class $R extends ir{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return fe.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}gPe=Symbol.toStringTag;$R[gPe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))($R.prototype);const lIt=(e=>()=>++e)(-1);class Yv extends ir{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?lIt():kh(r)}get typeId(){return fe.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}yPe=Symbol.toStringTag;Yv[yPe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Yv.prototype);function gp(e){const t=e;switch(e.typeId){case fe.Decimal:return e.bitWidth/32;case fe.Timestamp:return 2;case fe.Date:return 1+t.unit;case fe.Interval:return 1+t.unit;case fe.FixedSizeList:return t.listSize;case fe.FixedSizeBinary:return t.byteWidth;default:return 1}}class sr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return cIt(this,t,n)}getVisitFnByTypeId(t,n=!0){return bE(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function cIt(e,t,n=!0){return typeof t=="number"?bE(e,t,n):typeof t=="string"&&t in fe?bE(e,fe[t],n):t&&t instanceof ir?bE(e,wge(t),n):t!=null&&t.type&&t.type instanceof ir?bE(e,wge(t.type),n):bE(e,fe.NONE,n)}function bE(e,t,n=!0){let r=null;switch(t){case fe.Null:r=e.visitNull;break;case fe.Bool:r=e.visitBool;break;case fe.Int:r=e.visitInt;break;case fe.Int8:r=e.visitInt8||e.visitInt;break;case fe.Int16:r=e.visitInt16||e.visitInt;break;case fe.Int32:r=e.visitInt32||e.visitInt;break;case fe.Int64:r=e.visitInt64||e.visitInt;break;case fe.Uint8:r=e.visitUint8||e.visitInt;break;case fe.Uint16:r=e.visitUint16||e.visitInt;break;case fe.Uint32:r=e.visitUint32||e.visitInt;break;case fe.Uint64:r=e.visitUint64||e.visitInt;break;case fe.Float:r=e.visitFloat;break;case fe.Float16:r=e.visitFloat16||e.visitFloat;break;case fe.Float32:r=e.visitFloat32||e.visitFloat;break;case fe.Float64:r=e.visitFloat64||e.visitFloat;break;case fe.Utf8:r=e.visitUtf8;break;case fe.Binary:r=e.visitBinary;break;case fe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case fe.Date:r=e.visitDate;break;case fe.DateDay:r=e.visitDateDay||e.visitDate;break;case fe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case fe.Timestamp:r=e.visitTimestamp;break;case fe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case fe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case fe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case fe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case fe.Time:r=e.visitTime;break;case fe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case fe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case fe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case fe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case fe.Decimal:r=e.visitDecimal;break;case fe.List:r=e.visitList;break;case fe.Struct:r=e.visitStruct;break;case fe.Union:r=e.visitUnion;break;case fe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case fe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case fe.Dictionary:r=e.visitDictionary;break;case fe.Interval:r=e.visitInterval;break;case fe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case fe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case fe.Duration:r=e.visitDuration;break;case fe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case fe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case fe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case fe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case fe.FixedSizeList:r=e.visitFixedSizeList;break;case fe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${fe[t]}'`)}function wge(e){switch(e.typeId){case fe.Null:return fe.Null;case fe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?fe.Int8:fe.Uint8;case 16:return n?fe.Int16:fe.Uint16;case 32:return n?fe.Int32:fe.Uint32;case 64:return n?fe.Int64:fe.Uint64}return fe.Int}case fe.Float:switch(e.precision){case La.HALF:return fe.Float16;case La.SINGLE:return fe.Float32;case La.DOUBLE:return fe.Float64}return fe.Float;case fe.Binary:return fe.Binary;case fe.Utf8:return fe.Utf8;case fe.Bool:return fe.Bool;case fe.Decimal:return fe.Decimal;case fe.Time:switch(e.unit){case gn.SECOND:return fe.TimeSecond;case gn.MILLISECOND:return fe.TimeMillisecond;case gn.MICROSECOND:return fe.TimeMicrosecond;case gn.NANOSECOND:return fe.TimeNanosecond}return fe.Time;case fe.Timestamp:switch(e.unit){case gn.SECOND:return fe.TimestampSecond;case gn.MILLISECOND:return fe.TimestampMillisecond;case gn.MICROSECOND:return fe.TimestampMicrosecond;case gn.NANOSECOND:return fe.TimestampNanosecond}return fe.Timestamp;case fe.Date:switch(e.unit){case cm.DAY:return fe.DateDay;case cm.MILLISECOND:return fe.DateMillisecond}return fe.Date;case fe.Interval:switch(e.unit){case fm.DAY_TIME:return fe.IntervalDayTime;case fm.YEAR_MONTH:return fe.IntervalYearMonth}return fe.Interval;case fe.Duration:switch(e.unit){case gn.SECOND:return fe.DurationSecond;case gn.MILLISECOND:return fe.DurationMillisecond;case gn.MICROSECOND:return fe.DurationMicrosecond;case gn.NANOSECOND:return fe.DurationNanosecond}return fe.Duration;case fe.Map:return fe.Map;case fe.List:return fe.List;case fe.Struct:return fe.Struct;case fe.Union:switch(e.mode){case cc.Dense:return fe.DenseUnion;case cc.Sparse:return fe.SparseUnion}return fe.Union;case fe.FixedSizeBinary:return fe.FixedSizeBinary;case fe.FixedSizeList:return fe.FixedSizeList;case fe.Dictionary:return fe.Dictionary}throw new Error(`Unrecognized type '${fe[e.typeId]}'`)}sr.prototype.visitInt8=null;sr.prototype.visitInt16=null;sr.prototype.visitInt32=null;sr.prototype.visitInt64=null;sr.prototype.visitUint8=null;sr.prototype.visitUint16=null;sr.prototype.visitUint32=null;sr.prototype.visitUint64=null;sr.prototype.visitFloat16=null;sr.prototype.visitFloat32=null;sr.prototype.visitFloat64=null;sr.prototype.visitDateDay=null;sr.prototype.visitDateMillisecond=null;sr.prototype.visitTimestampSecond=null;sr.prototype.visitTimestampMillisecond=null;sr.prototype.visitTimestampMicrosecond=null;sr.prototype.visitTimestampNanosecond=null;sr.prototype.visitTimeSecond=null;sr.prototype.visitTimeMillisecond=null;sr.prototype.visitTimeMicrosecond=null;sr.prototype.visitTimeNanosecond=null;sr.prototype.visitDenseUnion=null;sr.prototype.visitSparseUnion=null;sr.prototype.visitIntervalDayTime=null;sr.prototype.visitIntervalYearMonth=null;sr.prototype.visitDuration=null;sr.prototype.visitDurationSecond=null;sr.prototype.visitDurationMillisecond=null;sr.prototype.visitDurationMicrosecond=null;sr.prototype.visitDurationNanosecond=null;const bPe=new Float64Array(1),Zx=new Uint32Array(bPe.buffer);function _Pe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function wPe(e){if(e!==e)return 32256;bPe[0]=e;const t=(Zx[1]&2147483648)>>16&65535;let n=Zx[1]&2146435072,r=0;return n>=1089470464?Zx[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Zx[1]&1048575)>>10):n<=1056964608?(r=1048576+(Zx[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Zx[1]&1048575)+512>>10),t|n|r&65535}class xn extends sr{}function In(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const fIt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},vee=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},dIt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},hIt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},xPe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},pIt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},H0=({values:e},t,n)=>{e[t]=n},bee=({values:e},t,n)=>{e[t]=n},EPe=({values:e},t,n)=>{e[t]=wPe(n)},mIt=(e,t,n)=>{switch(e.type.precision){case La.HALF:return EPe(e,t,n);case La.SINGLE:case La.DOUBLE:return bee(e,t,n)}},_ee=({values:e},t,n)=>{fIt(e,t,n.valueOf())},wee=({values:e},t,n)=>{vee(e,t*2,n.valueOf())},SPe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},gIt=({values:e,valueOffsets:t},n,r)=>xPe(e,t,n,r),yIt=({values:e,valueOffsets:t},n,r)=>{xPe(e,t,n,see(r))},TPe=(e,t,n)=>{e.type.unit===cm.DAY?_ee(e,t,n):wee(e,t,n)},xee=({values:e},t,n)=>vee(e,t*2,n/1e3),Eee=({values:e},t,n)=>vee(e,t*2,n),See=({values:e},t,n)=>dIt(e,t*2,n),Tee=({values:e},t,n)=>hIt(e,t*2,n),CPe=(e,t,n)=>{switch(e.type.unit){case gn.SECOND:return xee(e,t,n);case gn.MILLISECOND:return Eee(e,t,n);case gn.MICROSECOND:return See(e,t,n);case gn.NANOSECOND:return Tee(e,t,n)}},Cee=({values:e},t,n)=>{e[t]=n},Aee=({values:e},t,n)=>{e[t]=n},Iee=({values:e},t,n)=>{e[t]=n},kee=({values:e},t,n)=>{e[t]=n},APe=(e,t,n)=>{switch(e.type.unit){case gn.SECOND:return Cee(e,t,n);case gn.MILLISECOND:return Aee(e,t,n);case gn.MICROSECOND:return Iee(e,t,n);case gn.NANOSECOND:return kee(e,t,n)}},IPe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},vIt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=od.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},bIt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=od.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},_It=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),wIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),xIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),EIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),SIt=(e,t,n)=>{const r=e.type.children.map(s=>od.getVisitFn(s.type)),i=n instanceof Map?xIt(t,n):n instanceof Jr?wIt(t,n):Array.isArray(n)?_It(t,n):EIt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},TIt=(e,t,n)=>{e.type.mode===cc.Dense?kPe(e,t,n):RPe(e,t,n)},kPe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];od.visit(i,e.valueOffsets[t],n)},RPe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];od.visit(i,t,n)},CIt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},NPe=(e,t,n)=>{e.type.unit===fm.DAY_TIME?Ree(e,t,n):Nee(e,t,n)},Ree=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},Nee=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Pee=({values:e},t,n)=>{e[t]=n},Dee=({values:e},t,n)=>{e[t]=n},Oee=({values:e},t,n)=>{e[t]=n},$ee=({values:e},t,n)=>{e[t]=n},PPe=(e,t,n)=>{switch(e.type.unit){case gn.SECOND:return Pee(e,t,n);case gn.MILLISECOND:return Dee(e,t,n);case gn.MICROSECOND:return Oee(e,t,n);case gn.NANOSECOND:return $ee(e,t,n)}},AIt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=od.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};xn.prototype.visitBool=In(pIt);xn.prototype.visitInt=In(H0);xn.prototype.visitInt8=In(H0);xn.prototype.visitInt16=In(H0);xn.prototype.visitInt32=In(H0);xn.prototype.visitInt64=In(H0);xn.prototype.visitUint8=In(H0);xn.prototype.visitUint16=In(H0);xn.prototype.visitUint32=In(H0);xn.prototype.visitUint64=In(H0);xn.prototype.visitFloat=In(mIt);xn.prototype.visitFloat16=In(EPe);xn.prototype.visitFloat32=In(bee);xn.prototype.visitFloat64=In(bee);xn.prototype.visitUtf8=In(yIt);xn.prototype.visitBinary=In(gIt);xn.prototype.visitFixedSizeBinary=In(SPe);xn.prototype.visitDate=In(TPe);xn.prototype.visitDateDay=In(_ee);xn.prototype.visitDateMillisecond=In(wee);xn.prototype.visitTimestamp=In(CPe);xn.prototype.visitTimestampSecond=In(xee);xn.prototype.visitTimestampMillisecond=In(Eee);xn.prototype.visitTimestampMicrosecond=In(See);xn.prototype.visitTimestampNanosecond=In(Tee);xn.prototype.visitTime=In(APe);xn.prototype.visitTimeSecond=In(Cee);xn.prototype.visitTimeMillisecond=In(Aee);xn.prototype.visitTimeMicrosecond=In(Iee);xn.prototype.visitTimeNanosecond=In(kee);xn.prototype.visitDecimal=In(IPe);xn.prototype.visitList=In(vIt);xn.prototype.visitStruct=In(SIt);xn.prototype.visitUnion=In(TIt);xn.prototype.visitDenseUnion=In(kPe);xn.prototype.visitSparseUnion=In(RPe);xn.prototype.visitDictionary=In(CIt);xn.prototype.visitInterval=In(NPe);xn.prototype.visitIntervalDayTime=In(Ree);xn.prototype.visitIntervalYearMonth=In(Nee);xn.prototype.visitDuration=In(PPe);xn.prototype.visitDurationSecond=In(Pee);xn.prototype.visitDurationMillisecond=In(Dee);xn.prototype.visitDurationMicrosecond=In(Oee);xn.prototype.visitDurationNanosecond=In($ee);xn.prototype.visitFixedSizeList=In(AIt);xn.prototype.visitMap=In(bIt);const od=new xn,Xd=Symbol.for("parent"),bS=Symbol.for("rowIndex");class Mee{constructor(t,n){return this[Xd]=t,this[bS]=n,new Proxy(this,new kIt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[bS],n=this[Xd],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=fc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${rw(t)}: ${rw(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new IIt(this[Xd],this[bS])}}class IIt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,fc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Mee.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Xd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[bS]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class kIt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Xd].type.children.map(n=>n.name)}has(t,n){return t[Xd].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Xd].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Xd].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=fc.visit(t[Xd].children[r],t[bS]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Xd].type.children.findIndex(s=>s.name===n);return i!==-1?(od.visit(t[Xd].children[i],t[bS],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class yn extends sr{}function En(e){return(t,n)=>t.getValid(n)?e(t,n):null}const RIt=(e,t)=>864e5*e[t],Lee=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),NIt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,PIt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,DPe=e=>new Date(e),DIt=(e,t)=>DPe(RIt(e,t)),OIt=(e,t)=>DPe(Lee(e,t)),$It=(e,t)=>null,OPe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},MIt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},$Pe=({values:e},t)=>DIt(e,t),MPe=({values:e},t)=>OIt(e,t*2),U1=({stride:e,values:t},n)=>t[e*n],LIt=({stride:e,values:t},n)=>_Pe(t[e*n]),LPe=({values:e},t)=>e[t],FIt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),jIt=({values:e,valueOffsets:t},n)=>OPe(e,t,n),BIt=({values:e,valueOffsets:t},n)=>{const r=OPe(e,t,n);return r!==null?CW(r):null},UIt=({values:e},t)=>e[t],zIt=({type:e,values:t},n)=>e.precision!==La.HALF?t[n]:_Pe(t[n]),VIt=(e,t)=>e.type.unit===cm.DAY?$Pe(e,t):MPe(e,t),FPe=({values:e},t)=>1e3*Lee(e,t*2),jPe=({values:e},t)=>Lee(e,t*2),BPe=({values:e},t)=>NIt(e,t*2),UPe=({values:e},t)=>PIt(e,t*2),HIt=(e,t)=>{switch(e.type.unit){case gn.SECOND:return FPe(e,t);case gn.MILLISECOND:return jPe(e,t);case gn.MICROSECOND:return BPe(e,t);case gn.NANOSECOND:return UPe(e,t)}},zPe=({values:e},t)=>e[t],VPe=({values:e},t)=>e[t],HPe=({values:e},t)=>e[t],qPe=({values:e},t)=>e[t],qIt=(e,t)=>{switch(e.type.unit){case gn.SECOND:return zPe(e,t);case gn.MILLISECOND:return VPe(e,t);case gn.MICROSECOND:return HPe(e,t);case gn.NANOSECOND:return qPe(e,t)}},WIt=({values:e,stride:t},n)=>uee.decimal(e.subarray(t*n,t*(n+1))),GIt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new Jr([u])},YIt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new cj(o.slice(i,s-i))},KIt=(e,t)=>new Mee(e,t),XIt=(e,t)=>e.type.mode===cc.Dense?WPe(e,t):GPe(e,t),WPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return fc.visit(r,e.valueOffsets[t])},GPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return fc.visit(r,t)},QIt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},JIt=(e,t)=>e.type.unit===fm.DAY_TIME?YPe(e,t):KPe(e,t),YPe=({values:e},t)=>e.subarray(2*t,2*(t+1)),KPe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},XPe=({values:e},t)=>e[t],QPe=({values:e},t)=>e[t],JPe=({values:e},t)=>e[t],ZPe=({values:e},t)=>e[t],ZIt=(e,t)=>{switch(e.type.unit){case gn.SECOND:return XPe(e,t);case gn.MILLISECOND:return QPe(e,t);case gn.MICROSECOND:return JPe(e,t);case gn.NANOSECOND:return ZPe(e,t)}},ekt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Jr([s])};yn.prototype.visitNull=En($It);yn.prototype.visitBool=En(MIt);yn.prototype.visitInt=En(UIt);yn.prototype.visitInt8=En(U1);yn.prototype.visitInt16=En(U1);yn.prototype.visitInt32=En(U1);yn.prototype.visitInt64=En(LPe);yn.prototype.visitUint8=En(U1);yn.prototype.visitUint16=En(U1);yn.prototype.visitUint32=En(U1);yn.prototype.visitUint64=En(LPe);yn.prototype.visitFloat=En(zIt);yn.prototype.visitFloat16=En(LIt);yn.prototype.visitFloat32=En(U1);yn.prototype.visitFloat64=En(U1);yn.prototype.visitUtf8=En(BIt);yn.prototype.visitBinary=En(jIt);yn.prototype.visitFixedSizeBinary=En(FIt);yn.prototype.visitDate=En(VIt);yn.prototype.visitDateDay=En($Pe);yn.prototype.visitDateMillisecond=En(MPe);yn.prototype.visitTimestamp=En(HIt);yn.prototype.visitTimestampSecond=En(FPe);yn.prototype.visitTimestampMillisecond=En(jPe);yn.prototype.visitTimestampMicrosecond=En(BPe);yn.prototype.visitTimestampNanosecond=En(UPe);yn.prototype.visitTime=En(qIt);yn.prototype.visitTimeSecond=En(zPe);yn.prototype.visitTimeMillisecond=En(VPe);yn.prototype.visitTimeMicrosecond=En(HPe);yn.prototype.visitTimeNanosecond=En(qPe);yn.prototype.visitDecimal=En(WIt);yn.prototype.visitList=En(GIt);yn.prototype.visitStruct=En(KIt);yn.prototype.visitUnion=En(XIt);yn.prototype.visitDenseUnion=En(WPe);yn.prototype.visitSparseUnion=En(GPe);yn.prototype.visitDictionary=En(QIt);yn.prototype.visitInterval=En(JIt);yn.prototype.visitIntervalDayTime=En(YPe);yn.prototype.visitIntervalYearMonth=En(KPe);yn.prototype.visitDuration=En(ZIt);yn.prototype.visitDurationSecond=En(XPe);yn.prototype.visitDurationMillisecond=En(QPe);yn.prototype.visitDurationMicrosecond=En(JPe);yn.prototype.visitDurationNanosecond=En(ZPe);yn.prototype.visitFixedSizeList=En(ekt);yn.prototype.visitMap=En(YIt);const fc=new yn,ih=Symbol.for("keys"),_S=Symbol.for("vals");class cj{constructor(t){return this[ih]=new Jr([t.children[0]]).memoize(),this[_S]=t.children[1],new Proxy(this,new nkt)}[Symbol.iterator](){return new tkt(this[ih],this[_S])}get size(){return this[ih].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ih],n=this[_S],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=fc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${rw(t)}: ${rw(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class tkt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),fc.visit(this.vals,t)]})}}class nkt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ih].toArray().map(String)}has(t,n){return t[ih].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ih].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ih].indexOf(n);if(r!==-1){const i=fc.visit(Reflect.get(t,_S),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ih].indexOf(n);return i!==-1?(od.visit(Reflect.get(t,_S),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(cj.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ih]:{writable:!0,enumerable:!1,configurable:!1,value:null},[_S]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let xge;function eDe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(xge=s,s=o,o=xge),o>i&&(o=i),r?r(e,s,o):[s,o]}const Ege=e=>e!==e;function BC(e){if(typeof e!=="object"||e===null)return Ege(e)?Ege:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?W2t(e,n):!1:e instanceof Map?ikt(e):Array.isArray(e)?rkt(e):e instanceof Jr?skt(e):okt(e,!0)}function rkt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=BC(e[n]);return fj(t)}function ikt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=BC(r);return fj(n)}function skt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=BC(e.get(n));return fj(t)}function okt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=BC(e[n[i]]);return fj(r,n)}function fj(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return akt(e,n);case Map:return Sge(e,n,n.keys());case cj:case Mee:case Object:case void 0:return Sge(e,n,t||Object.keys(n))}return n instanceof Jr?ukt(e,n):!1}}function akt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function ukt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Sge(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function tDe(e,t,n,r){return(n&1<<r)!==0}function lkt(e,t,n,r){return(n&1<<r)>>r}function _6(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):nDe(new Fee(n,e,t,null,tDe)).subarray(0,r)),i}return n}function nDe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Fee{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function kW(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new Fee(e,t,n-t,e,lkt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return kW(e,t,i)+kW(e,r,n)+ckt(e,i>>3,r-i>>3)}function ckt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Q7(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Q7(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Q7(s.getUint8(i)),i+=1;return r}function Q7(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const fkt=-1;class bi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return ir.isSparseUnion(t)?this.children.some(n=>n.nullable):ir.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(ir.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=fkt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-kW(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof bi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=gp(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(ir.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===cc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(ir.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===cc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(_6(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new bi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===fe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(_6(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[hg.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[hg.TYPE])&&(o[hg.TYPE]=s.subarray(t,t+n)),(s=o[hg.OFFSET])&&(o[hg.OFFSET]=s.subarray(t,t+n+1))||(s=o[hg.DATA])&&(o[hg.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}bi.prototype.children=Object.freeze([]);class ck extends sr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new bi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.data),s=_i(t.nullBitmap),o=y2(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new bi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.data),s=_i(t.nullBitmap),o=y2(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new bi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=_i(t.nullBitmap),o=y2(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new bi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=_i(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ea(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(ir.isSparseUnion(n))return new bi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=y2(t.valueOffsets);return new bi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.indices.ArrayType,t.data),{["dictionary"]:o=new Jr([new ck().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new bi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=_i(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new ck().visit({type:n.valueType})}=t,s=_i(t.nullBitmap),{["length"]:o=i.length/gp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new bi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new ck().visit({type:n.childType})}=t,s=_i(t.nullBitmap),o=y2(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new bi(n,r,a,u,[o,void 0,s],[i])}}const dkt=new ck;function lu(e){return dkt.visit(e)}class Tge{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function rDe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function iDe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function sDe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function jee(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function Bee(e,t){return e.getValid(t)}function wS(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return jee(r,this._offsets,n,t)}}function oDe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=jee(s,this._offsets,r,n);return t=void 0,o}}function aDe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):jee(s,this._offsets,i,n);return t=void 0,o}}class vn extends sr{}function hkt(e,t){return t===null&&e.length>0?0:-1}function pkt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new Fee(n,e.offset+(t||0),e.length,n,tDe)){if(!i)return r;++r}return-1}function Ln(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case fe.Union:break;case fe.Dictionary:break;default:return pkt(e,n)}const r=fc.getVisitFn(e),i=BC(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function uDe(e,t,n){const r=fc.getVisitFn(e),i=BC(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}vn.prototype.visitNull=hkt;vn.prototype.visitBool=Ln;vn.prototype.visitInt=Ln;vn.prototype.visitInt8=Ln;vn.prototype.visitInt16=Ln;vn.prototype.visitInt32=Ln;vn.prototype.visitInt64=Ln;vn.prototype.visitUint8=Ln;vn.prototype.visitUint16=Ln;vn.prototype.visitUint32=Ln;vn.prototype.visitUint64=Ln;vn.prototype.visitFloat=Ln;vn.prototype.visitFloat16=Ln;vn.prototype.visitFloat32=Ln;vn.prototype.visitFloat64=Ln;vn.prototype.visitUtf8=Ln;vn.prototype.visitBinary=Ln;vn.prototype.visitFixedSizeBinary=Ln;vn.prototype.visitDate=Ln;vn.prototype.visitDateDay=Ln;vn.prototype.visitDateMillisecond=Ln;vn.prototype.visitTimestamp=Ln;vn.prototype.visitTimestampSecond=Ln;vn.prototype.visitTimestampMillisecond=Ln;vn.prototype.visitTimestampMicrosecond=Ln;vn.prototype.visitTimestampNanosecond=Ln;vn.prototype.visitTime=Ln;vn.prototype.visitTimeSecond=Ln;vn.prototype.visitTimeMillisecond=Ln;vn.prototype.visitTimeMicrosecond=Ln;vn.prototype.visitTimeNanosecond=Ln;vn.prototype.visitDecimal=Ln;vn.prototype.visitList=Ln;vn.prototype.visitStruct=Ln;vn.prototype.visitUnion=Ln;vn.prototype.visitDenseUnion=uDe;vn.prototype.visitSparseUnion=uDe;vn.prototype.visitDictionary=Ln;vn.prototype.visitInterval=Ln;vn.prototype.visitIntervalDayTime=Ln;vn.prototype.visitIntervalYearMonth=Ln;vn.prototype.visitDuration=Ln;vn.prototype.visitDurationSecond=Ln;vn.prototype.visitDurationMillisecond=Ln;vn.prototype.visitDurationMicrosecond=Ln;vn.prototype.visitDurationNanosecond=Ln;vn.prototype.visitFixedSizeList=Ln;vn.prototype.visitMap=Ln;const w6=new vn;class bn extends sr{}function Sn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===fe.Timestamp||t instanceof dl&&t.bitWidth!==64||t instanceof _0&&t.bitWidth!==64||t instanceof Gv&&t.precision!==La.HALF))return new Tge(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Tge(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new mkt(o)})}class mkt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}bn.prototype.visitNull=Sn;bn.prototype.visitBool=Sn;bn.prototype.visitInt=Sn;bn.prototype.visitInt8=Sn;bn.prototype.visitInt16=Sn;bn.prototype.visitInt32=Sn;bn.prototype.visitInt64=Sn;bn.prototype.visitUint8=Sn;bn.prototype.visitUint16=Sn;bn.prototype.visitUint32=Sn;bn.prototype.visitUint64=Sn;bn.prototype.visitFloat=Sn;bn.prototype.visitFloat16=Sn;bn.prototype.visitFloat32=Sn;bn.prototype.visitFloat64=Sn;bn.prototype.visitUtf8=Sn;bn.prototype.visitBinary=Sn;bn.prototype.visitFixedSizeBinary=Sn;bn.prototype.visitDate=Sn;bn.prototype.visitDateDay=Sn;bn.prototype.visitDateMillisecond=Sn;bn.prototype.visitTimestamp=Sn;bn.prototype.visitTimestampSecond=Sn;bn.prototype.visitTimestampMillisecond=Sn;bn.prototype.visitTimestampMicrosecond=Sn;bn.prototype.visitTimestampNanosecond=Sn;bn.prototype.visitTime=Sn;bn.prototype.visitTimeSecond=Sn;bn.prototype.visitTimeMillisecond=Sn;bn.prototype.visitTimeMicrosecond=Sn;bn.prototype.visitTimeNanosecond=Sn;bn.prototype.visitDecimal=Sn;bn.prototype.visitList=Sn;bn.prototype.visitStruct=Sn;bn.prototype.visitUnion=Sn;bn.prototype.visitDenseUnion=Sn;bn.prototype.visitSparseUnion=Sn;bn.prototype.visitDictionary=Sn;bn.prototype.visitInterval=Sn;bn.prototype.visitIntervalDayTime=Sn;bn.prototype.visitIntervalYearMonth=Sn;bn.prototype.visitDuration=Sn;bn.prototype.visitDurationSecond=Sn;bn.prototype.visitDurationMillisecond=Sn;bn.prototype.visitDurationMicrosecond=Sn;bn.prototype.visitDurationNanosecond=Sn;bn.prototype.visitFixedSizeList=Sn;bn.prototype.visitMap=Sn;const Uee=new bn,gkt=(e,t)=>e+t;class z1 extends sr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===gn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+dm.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+dm.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const ykt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),vkt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),bkt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=dm.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},_kt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=dm.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},wkt=(e,t)=>e.type.mode===cc.Dense?lDe(e,t):cDe(e,t),lDe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+dm.visit(t[s],r[i])},cDe=({children:e},t)=>4+dm.visitMany(e,e.map(()=>t)).reduce(gkt,0);z1.prototype.visitUtf8=ykt;z1.prototype.visitBinary=vkt;z1.prototype.visitList=bkt;z1.prototype.visitFixedSizeList=_kt;z1.prototype.visitUnion=wkt;z1.prototype.visitDenseUnion=lDe;z1.prototype.visitSparseUnion=cDe;const dm=new z1;var fDe;const dDe={},hDe={};class Jr{constructor(t){var n,r,i;const s=t[0]instanceof Jr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof bi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=dDe[o.typeId],f=s[0];this.isValid=d=>Bee(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,hDe[o.typeId]),this._offsets=iDe(s);break}this.data=s,this.type=o,this.stride=gp(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return rDe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${fe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Uee.visit(this)}concat(...t){return new Jr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Jr(eDe(this,t,n,({data:r,_offsets:i},s,o)=>sDe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case fe.Int:case fe.Float:case fe.Decimal:case fe.Time:case fe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Jr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return ir.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ir.isDictionary(this.type)){const t=new x6(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Jr(n)}return new x6(this)}unmemoize(){if(ir.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Jr(n)}return this}}fDe=Symbol.toStringTag;Jr[fDe]=(e=>{e.type=ir.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(fe).map(n=>fe[n]).filter(n=>typeof n=="number"&&n!==fe.NONE);for(const n of t){const r=fc.getVisitFnByTypeId(n),i=od.getVisitFnByTypeId(n),s=w6.getVisitFnByTypeId(n),o=dm.getVisitFnByTypeId(n);dDe[n]={get:r,set:i,indexOf:s,byteLength:o},hDe[n]=Object.create(e,{isValid:{value:wS(Bee)},get:{value:wS(fc.getVisitFnByTypeId(n))},set:{value:oDe(od.getVisitFnByTypeId(n))},indexOf:{value:aDe(w6.getVisitFnByTypeId(n))},getByteLength:{value:wS(dm.getVisitFnByTypeId(n))}})}return"Vector"})(Jr.prototype);class x6 extends Jr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new x6(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Jr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function xkt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Ekt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Ekt(e){return typeof e!="bigint"?rw(e):`${rw(e)}n`}const J7=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,Skt=(e,t=0)=>e.length>=t?e.subarray(0,t):m6(new e.constructor(t),e,0);class dj{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?J7(r*1,this.BYTES_PER_ELEMENT):J7(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=J7(t*this.stride,this.BYTES_PER_ELEMENT);const n=Skt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=m6(new this.ArrayType(t),this.buffer)}}dj.prototype.offset=0;class fP extends dj{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class pDe extends fP{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class mDe extends fP{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let vc=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=gp(t),this._nulls=new pDe,n&&n.length>0&&(this._isValid=xkt(n))}toVector(){return new Jr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),lu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};vc.prototype.length=1;vc.prototype.stride=1;vc.prototype.children=null;vc.prototype.finished=!1;vc.prototype.nullValues=null;vc.prototype._isValid=()=>!0;class q0 extends vc{constructor(t){super(t),this._values=new fP(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class hj extends vc{constructor(t){super(t),this._pendingLength=0,this._offsets=new mDe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof cj?n[ih].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class RW{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const Z7=2,Tp=4,Tg=4,Oi=4,Dy=new Int32Array(2),Cge=new Float32Array(Dy.buffer),Age=new Float64Array(Dy.buffer),c3=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var NW;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(NW||(NW={}));let E6=class gDe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new gDe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Dy[0]=this.readInt32(t),Cge[0]}readFloat64(t){return Dy[c3?0:1]=this.readInt32(t),Dy[c3?1:0]=this.readInt32(t+4),Age[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Cge[0]=n,this.writeInt32(t,Dy[0])}writeFloat64(t,n){Age[0]=n,this.writeInt32(t,Dy[c3?0:1]),this.writeInt32(t+4,Dy[c3?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Tp+Tg)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Tg;n++)t+=String.fromCharCode(this.readInt8(this.position_+Tp+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Tp;const i=this.bytes_.subarray(t,t+r);return n===NW.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Tp}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Tg)throw new Error("FlatBuffers: file identifier must be length "+Tg);for(let n=0;n<Tg;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Tp+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},yDe=class vDe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=E6.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=vDe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=E6.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Tp,0),this.writeInt32(this.offset()-t+Tp)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Z7;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=Z7;l<s;l+=Z7)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Oi:0;if(n){const s=n;if(this.prep(this.minalign,Tp+Tg+i),s.length!=Tg)throw new TypeError("FlatBuffers: file identifier must be length "+Tg);for(let o=Tg-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Tp+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Tp,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Oo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Oo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Oi),(n||new Oo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Oo.startKeyValue(t),Oo.addKey(t,n),Oo.addValue(t,r),Oo.endKeyValue(t)}}var ET;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ET||(ET={}));var ST;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(ST||(ST={}));var S6;(function(e){e[e.DenseArray=0]="DenseArray"})(S6||(S6={}));class Oc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Oc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Oi),(n||new Oc).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Oc.startInt(t),Oc.addBitWidth(t,n),Oc.addIsSigned(t,r),Oc.endInt(t)}}class Cg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Oi),(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Oc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):S6.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,S6.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class b_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new b_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Oi),(n||new b_).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return b_.startBinary(t),b_.endBinary(t)}}class __{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new __).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Oi),(n||new __).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return __.startBool(t),__.endBool(t)}}var T6;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(T6||(T6={}));let j$=class _E{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new _E).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Oi),(n||new _E).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):T6.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,T6.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return _E.startDate(t),_E.addUnit(t,n),_E.endDate(t)}};class Ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ol).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Oi),(n||new Ol).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ol.startDecimal(t),Ol.addPrecision(t,n),Ol.addScale(t,r),Ol.addBitWidth(t,i),Ol.endDecimal(t)}}var Kv;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Kv||(Kv={}));class Cp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Cp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Oi),(n||new Cp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kv.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Kv.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Cp.startDuration(t),Cp.addUnit(t,n),Cp.endDuration(t)}}class Ap{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Oi),(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ap.startFixedSizeBinary(t),Ap.addByteWidth(t,n),Ap.endFixedSizeBinary(t)}}class Ip{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Ip).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Oi),(n||new Ip).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Ip.startFixedSizeList(t),Ip.addListSize(t,n),Ip.endFixedSizeList(t)}}var C6;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(C6||(C6={}));class kp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Oi),(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):C6.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,C6.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return kp.startFloatingPoint(t),kp.addPrecision(t,n),kp.endFloatingPoint(t)}}var A6;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(A6||(A6={}));class Rp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Oi),(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):A6.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,A6.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Rp.startInterval(t),Rp.addUnit(t,n),Rp.endInterval(t)}}class w_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new w_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Oi),(n||new w_).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return w_.startList(t),w_.endList(t)}}let B$=class wE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new wE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Oi),(n||new wE).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return wE.startMap(t),wE.addKeysSorted(t,n),wE.endMap(t)}};class x_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new x_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Oi),(n||new x_).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return x_.startNull(t),x_.endNull(t)}}class E_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new E_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Oi),(n||new E_).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return E_.startStruct_(t),E_.endStruct_(t)}}let fI=class Bb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Bb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Oi),(n||new Bb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kv.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Kv.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Bb.startTime(t),Bb.addUnit(t,n),Bb.addBitWidth(t,r),Bb.endTime(t)}},dI=class Ub{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Ub).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Oi),(n||new Ub).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kv.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Kv.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Ub.startTimestamp(t),Ub.addUnit(t,n),Ub.addTimezone(t,r),Ub.endTimestamp(t)}};var I6;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(I6||(I6={}));let zb=class Vb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Vb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Oi),(n||new Vb).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):I6.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,I6.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Vb.startUnion(t),Vb.addMode(t,n),Vb.addTypeIds(t,r),Vb.endUnion(t)}};class S_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new S_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Oi),(n||new S_).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return S_.startUtf8(t),S_.endUtf8(t)}}var ds;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(ds||(ds={}));let Pf=class U${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new U$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Oi),(n||new U$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ds.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Cg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new U$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ds.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},pp=class fg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new fg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Oi),(n||new fg).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ST.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Pf).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,ST.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return fg.startSchema(t),fg.addEndianness(t,n),fg.addFields(t,r),fg.addCustomMetadata(t,i),fg.addFeatures(t,s),fg.endSchema(t)}};class kc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new kc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Oi),(n||new kc).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ET.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new pp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new RW).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new RW).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ET.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class mi{constructor(t=[],n,r,i=Ju.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=DW(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new mi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new mi(n,this.metadata)}assign(...t){const n=t[0]instanceof mi?t[0]:Array.isArray(t[0])?new mi(t[0]):new mi(t),r=[...this.fields],i=f3(f3(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:f3(f3(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=DW(s,new Map);return new mi([...r,...s],i,new Map([...this.dictionaries,...o]))}}mi.prototype.fields=null;mi.prototype.metadata=null;mi.prototype.dictionaries=null;let ki=class PW{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new PW(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],PW.new(n,r,i,s)}};ki.prototype.type=null;ki.prototype.name=null;ki.prototype.nullable=null;ki.prototype.metadata=null;function f3(e,t){return new Map([...e||new Map,...t||new Map])}function DW(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(ir.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&DW(s.children,t)}return t}var Tkt=yDe,Ckt=E6;class OW{static decode(t){t=new Ckt(_i(t));const n=kc.getRootAsFooter(t),r=mi.decode(n.schema(),new Map,n.version());return new Akt(r,n)}static encode(t){const n=new Tkt,r=mi.encode(n,t.schema);kc.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Xv.encode(n,o);const i=n.endVector();kc.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Xv.encode(n,o);const s=n.endVector();return kc.startFooter(n),kc.addSchema(n,r),kc.addVersion(n,Ju.V5),kc.addRecordBatches(n,i),kc.addDictionaries(n,s),kc.finishFooterBuffer(n,kc.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ju.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Akt extends OW{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Xv.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Xv.decode(n)}return null}}class Xv{static decode(t){return new Xv(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return RW.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=kh(r),this.bodyLength=kh(n)}}const d3=Object.freeze({done:!0,value:void 0});class bDe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Ikt extends bDe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return xg(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(d3);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return _ge.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return _ge.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return xg(this,void 0,void 0,function*(){return yield this.abort(t),d3})}return(t){return xg(this,void 0,void 0,function*(){return yield this.close(),d3})}read(t){return xg(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return xg(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(d3)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ez extends Ikt{write(t){if((t=_i(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?CW(this.toUint8Array(!0)):this.toUint8Array(!1).then(CW)}toUint8Array(t=!1){return t?lm(this._values)[0]:xg(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=YI(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return lm(o,a)[0]})}}class _De extends hj{constructor(t){super(t),this._values=new dj(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,_i(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class kkt extends vc{constructor(t){super(t),this._values=new pDe}setValue(t,n){this._values.set(t,+n)}}class pj extends q0{}pj.prototype._setValue=TPe;class wDe extends pj{}wDe.prototype._setValue=_ee;class xDe extends pj{}xDe.prototype._setValue=wee;class EDe extends q0{}EDe.prototype._setValue=IPe;class Rkt extends vc{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Yv(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=k6({type:this.type.indices,nullValues:n}),this.dictionary=k6({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class SDe extends q0{}SDe.prototype._setValue=SPe;class Nkt extends vc{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new xT(this.type.listSize,new ki(n,t.type,!0)),r}}class mj extends q0{setValue(t,n){this._values.set(t,n)}}class Pkt extends mj{setValue(t,n){super.setValue(t,wPe(n))}}class Dkt extends mj{}class Okt extends mj{}class gj extends q0{}gj.prototype._setValue=NPe;class TDe extends gj{}TDe.prototype._setValue=Ree;class CDe extends gj{}CDe.prototype._setValue=Nee;class UC extends q0{}UC.prototype._setValue=PPe;class ADe extends UC{}ADe.prototype._setValue=Pee;class IDe extends UC{}IDe.prototype._setValue=Dee;class kDe extends UC{}kDe.prototype._setValue=Oee;class RDe extends UC{}RDe.prototype._setValue=$ee;class W0 extends q0{setValue(t,n){this._values.set(t,n)}}class $kt extends W0{}class Mkt extends W0{}class Lkt extends W0{}class Fkt extends W0{}class jkt extends W0{}class Bkt extends W0{}class Ukt extends W0{}class zkt extends W0{}class Vkt extends hj{constructor(t){super(t),this._offsets=new mDe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new wT(new ki(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Hkt extends hj{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new $R(new ki(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class qkt extends vc{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Wkt extends vc{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new hu([...this.type.children,new ki(n,t.type,!0)]),r}}class zC extends q0{}zC.prototype._setValue=CPe;class NDe extends zC{}NDe.prototype._setValue=xee;class PDe extends zC{}PDe.prototype._setValue=Eee;class DDe extends zC{}DDe.prototype._setValue=See;class ODe extends zC{}ODe.prototype._setValue=Tee;class VC extends q0{}VC.prototype._setValue=APe;class $De extends VC{}$De.prototype._setValue=Cee;class MDe extends VC{}MDe.prototype._setValue=Aee;class LDe extends VC{}LDe.prototype._setValue=Iee;class FDe extends VC{}FDe.prototype._setValue=kee;class zee extends vc{constructor(t){super(t),this._typeIds=new fP(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new ki(n,t.type)];return this.type=new OR(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Gkt extends zee{}class Ykt extends zee{constructor(t){super(t),this._offsets=new fP(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class jDe extends hj{constructor(t){super(t),this._values=new dj(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,see(n))}_flushPending(t,n){}}jDe.prototype._flushPending=_De.prototype._flushPending;class Kkt extends sr{visitNull(){return qkt}visitBool(){return kkt}visitInt(){return W0}visitInt8(){return $kt}visitInt16(){return Mkt}visitInt32(){return Lkt}visitInt64(){return Fkt}visitUint8(){return jkt}visitUint16(){return Bkt}visitUint32(){return Ukt}visitUint64(){return zkt}visitFloat(){return mj}visitFloat16(){return Pkt}visitFloat32(){return Dkt}visitFloat64(){return Okt}visitUtf8(){return jDe}visitBinary(){return _De}visitFixedSizeBinary(){return SDe}visitDate(){return pj}visitDateDay(){return wDe}visitDateMillisecond(){return xDe}visitTimestamp(){return zC}visitTimestampSecond(){return NDe}visitTimestampMillisecond(){return PDe}visitTimestampMicrosecond(){return DDe}visitTimestampNanosecond(){return ODe}visitTime(){return VC}visitTimeSecond(){return $De}visitTimeMillisecond(){return MDe}visitTimeMicrosecond(){return LDe}visitTimeNanosecond(){return FDe}visitDecimal(){return EDe}visitList(){return Vkt}visitStruct(){return Wkt}visitUnion(){return zee}visitDenseUnion(){return Ykt}visitSparseUnion(){return Gkt}visitDictionary(){return Rkt}visitInterval(){return gj}visitIntervalDayTime(){return TDe}visitIntervalYearMonth(){return CDe}visitDuration(){return UC}visitDurationSecond(){return ADe}visitDurationMillisecond(){return IDe}visitDurationMicrosecond(){return kDe}visistDurationNanosecond(){return RDe}visitFixedSizeList(){return Nkt}visitMap(){return Hkt}}const Xkt=new Kkt;class _n extends sr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function yl(e,t){return t instanceof e.constructor}function dP(e,t){return e===t||yl(e,t)}function G0(e,t){return e===t||yl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function yj(e,t){return e===t||yl(e,t)&&e.precision===t.precision}function Qkt(e,t){return e===t||yl(e,t)&&e.byteWidth===t.byteWidth}function Vee(e,t){return e===t||yl(e,t)&&e.unit===t.unit}function hP(e,t){return e===t||yl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function pP(e,t){return e===t||yl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Jkt(e,t){return e===t||yl(e,t)&&e.children.length===t.children.length&&Qv.compareManyFields(e.children,t.children)}function Zkt(e,t){return e===t||yl(e,t)&&e.children.length===t.children.length&&Qv.compareManyFields(e.children,t.children)}function Hee(e,t){return e===t||yl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Qv.compareManyFields(e.children,t.children)}function eRt(e,t){return e===t||yl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Qv.visit(e.indices,t.indices)&&Qv.visit(e.dictionary,t.dictionary)}function qee(e,t){return e===t||yl(e,t)&&e.unit===t.unit}function mP(e,t){return e===t||yl(e,t)&&e.unit===t.unit}function tRt(e,t){return e===t||yl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Qv.compareManyFields(e.children,t.children)}function nRt(e,t){return e===t||yl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Qv.compareManyFields(e.children,t.children)}_n.prototype.visitNull=dP;_n.prototype.visitBool=dP;_n.prototype.visitInt=G0;_n.prototype.visitInt8=G0;_n.prototype.visitInt16=G0;_n.prototype.visitInt32=G0;_n.prototype.visitInt64=G0;_n.prototype.visitUint8=G0;_n.prototype.visitUint16=G0;_n.prototype.visitUint32=G0;_n.prototype.visitUint64=G0;_n.prototype.visitFloat=yj;_n.prototype.visitFloat16=yj;_n.prototype.visitFloat32=yj;_n.prototype.visitFloat64=yj;_n.prototype.visitUtf8=dP;_n.prototype.visitBinary=dP;_n.prototype.visitFixedSizeBinary=Qkt;_n.prototype.visitDate=Vee;_n.prototype.visitDateDay=Vee;_n.prototype.visitDateMillisecond=Vee;_n.prototype.visitTimestamp=hP;_n.prototype.visitTimestampSecond=hP;_n.prototype.visitTimestampMillisecond=hP;_n.prototype.visitTimestampMicrosecond=hP;_n.prototype.visitTimestampNanosecond=hP;_n.prototype.visitTime=pP;_n.prototype.visitTimeSecond=pP;_n.prototype.visitTimeMillisecond=pP;_n.prototype.visitTimeMicrosecond=pP;_n.prototype.visitTimeNanosecond=pP;_n.prototype.visitDecimal=dP;_n.prototype.visitList=Jkt;_n.prototype.visitStruct=Zkt;_n.prototype.visitUnion=Hee;_n.prototype.visitDenseUnion=Hee;_n.prototype.visitSparseUnion=Hee;_n.prototype.visitDictionary=eRt;_n.prototype.visitInterval=qee;_n.prototype.visitIntervalDayTime=qee;_n.prototype.visitIntervalYearMonth=qee;_n.prototype.visitDuration=mP;_n.prototype.visitDurationSecond=mP;_n.prototype.visitDurationMillisecond=mP;_n.prototype.visitDurationMicrosecond=mP;_n.prototype.visitDurationNanosecond=mP;_n.prototype.visitFixedSizeList=tRt;_n.prototype.visitMap=nRt;const Qv=new _n;function $W(e,t){return Qv.compareSchemas(e,t)}function k6(e){const t=e.type,n=new(Xkt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(k6(Object.assign(Object.assign({},l),{type:u})))}}return n}function tz(e,t){return rRt(e,t.map(n=>n.data.concat()))}function rRt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=iRt(n,o,c,t,i),o>0&&(r[s++]=lu({type:new hu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new $c(e,f))]}function iRt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:lu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var BDe;class jl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new mi([]),this._offsets=[0],this;let i,s;t[0]instanceof mi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof $c)return[u];if(u instanceof jl)return u.batches;if(u instanceof bi){if(u.type instanceof hu)return[new $c(new mi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new Jr([u[h]])),f=new mi(l.map((h,p)=>new ki(String(h),c[p].type))),[,d]=tz(f,c);return d.length===0?[new $c(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new mi([]),!(i instanceof mi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof $c))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!$W(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??iDe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=rDe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Uee.visit(new Jr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new jl(n,r.map(i=>new $c(n,i)))}slice(t,n){const r=this.schema;[t,n]=eDe({length:this.numRows},t,n);const i=sDe(this.data,this._offsets,t,n);return new jl(r,i.map(s=>new $c(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=lu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Jr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Jr([lu({type:new b0,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=tz(r,a)}return new jl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new jl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new jl(...tz(s,o))}}BDe=Symbol.toStringTag;jl[BDe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=wS(Bee),e.get=wS(fc.getVisitFn(fe.Struct)),e.set=oDe(od.getVisitFn(fe.Struct)),e.indexOf=aDe(w6.getVisitFn(fe.Struct)),e.getByteLength=wS(dm.getVisitFn(fe.Struct)),"Table"))(jl.prototype);var UDe;let $c=class hI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=lu({nullCount:0,type:new hu(this.schema.fields),children:this.schema.fields.map(n=>lu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof bi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Ige(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=ki.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new mi(r),a=lu({type:new hu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Ige(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=zDe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return fc.visit(this.data,t)}set(t,n){return od.visit(this.data,t,n)}indexOf(t,n){return w6.visit(this.data,t,n)}getByteLength(t){return dm.visit(this.data,t)}[Symbol.iterator](){return Uee.visit(new Jr([this.data]))}toArray(){return[...this]}concat(...t){return new jl(this.schema,[this,...t])}slice(t,n){const[r]=new Jr([this.data]).slice(t,n).data;return new hI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Jr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Jr([lu({type:new b0,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new mi(s,new Map(this.schema.metadata)),i=lu({type:new hu(s),children:o})}return new hI(r,i)}select(t){const n=this.schema.select(t),r=new hu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new hI(n,lu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=lu({type:new hu(n.fields),length:this.numRows,children:r});return new hI(n,i)}};UDe=Symbol.toStringTag;$c[UDe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))($c.prototype);function Ige(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:lu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),lu({type:new hu(i),length:n,children:s})]}function zDe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])zDe(a.children,l==null?void 0:l.children,n);if(ir.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class sRt extends $c{constructor(t){const n=t.fields.map(i=>lu({type:i.type})),r=lu({type:new hu(t.fields),nullCount:0,children:n});super(t,r)}}var R6;(function(e){e[e.BUFFER=0]="BUFFER"})(R6||(R6={}));var N6;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(N6||(N6={}));class Oy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Oi),(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):N6.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):R6.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,N6.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,R6.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Oy.startBodyCompression(t),Oy.addCodec(t,n),Oy.addMethod(t,r),Oy.endBodyCompression(t)}}let VDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},HDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},pg=class MW{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new MW).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Oi),(n||new MW).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new HDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new VDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Oy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},xE=class LW{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new LW).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Oi),(n||new LW).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new pg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var P6;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(P6||(P6={}));let vy=class ap{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new ap).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Oi),(n||new ap).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ET.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):P6.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ET.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,P6.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return ap.startMessage(t),ap.addVersion(t,n),ap.addHeaderType(t,r),ap.addHeader(t,i),ap.addBodyLength(t,s),ap.addCustomMetadata(t,o),ap.endMessage(t)}};class oRt extends sr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return x_.startNull(n),x_.endNull(n)}visitInt(t,n){return Oc.startInt(n),Oc.addBitWidth(n,t.bitWidth),Oc.addIsSigned(n,t.isSigned),Oc.endInt(n)}visitFloat(t,n){return kp.startFloatingPoint(n),kp.addPrecision(n,t.precision),kp.endFloatingPoint(n)}visitBinary(t,n){return b_.startBinary(n),b_.endBinary(n)}visitBool(t,n){return __.startBool(n),__.endBool(n)}visitUtf8(t,n){return S_.startUtf8(n),S_.endUtf8(n)}visitDecimal(t,n){return Ol.startDecimal(n),Ol.addScale(n,t.scale),Ol.addPrecision(n,t.precision),Ol.addBitWidth(n,t.bitWidth),Ol.endDecimal(n)}visitDate(t,n){return j$.startDate(n),j$.addUnit(n,t.unit),j$.endDate(n)}visitTime(t,n){return fI.startTime(n),fI.addUnit(n,t.unit),fI.addBitWidth(n,t.bitWidth),fI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return dI.startTimestamp(n),dI.addUnit(n,t.unit),r!==void 0&&dI.addTimezone(n,r),dI.endTimestamp(n)}visitInterval(t,n){return Rp.startInterval(n),Rp.addUnit(n,t.unit),Rp.endInterval(n)}visitDuration(t,n){return Cp.startDuration(n),Cp.addUnit(n,t.unit),Cp.endDuration(n)}visitList(t,n){return w_.startList(n),w_.endList(n)}visitStruct(t,n){return E_.startStruct_(n),E_.endStruct_(n)}visitUnion(t,n){zb.startTypeIdsVector(n,t.typeIds.length);const r=zb.createTypeIdsVector(n,t.typeIds);return zb.startUnion(n),zb.addMode(n,t.mode),zb.addTypeIds(n,r),zb.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Cg.startDictionaryEncoding(n),Cg.addId(n,BigInt(t.id)),Cg.addIsOrdered(n,t.isOrdered),r!==void 0&&Cg.addIndexType(n,r),Cg.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ap.startFixedSizeBinary(n),Ap.addByteWidth(n,t.byteWidth),Ap.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Ip.startFixedSizeList(n),Ip.addListSize(n,t.listSize),Ip.endFixedSizeList(n)}visitMap(t,n){return B$.startMap(n),B$.addKeysSorted(n,t.keysSorted),B$.endMap(n)}}const nz=new oRt;function aRt(e,t=new Map){return new mi(lRt(e,t),z$(e.metadata),t)}function qDe(e){return new ef(e.count,WDe(e.columns),GDe(e.columns))}function uRt(e){return new hm(qDe(e.data),e.id,e.isDelta)}function lRt(e,t){return(e.fields||[]).filter(Boolean).map(n=>ki.fromJSON(n,t))}function kge(e,t){return(e.children||[]).filter(Boolean).map(n=>ki.fromJSON(n,t))}function WDe(e){return(e||[]).reduce((t,n)=>[...t,new Jv(n.count,cRt(n.VALIDITY)),...WDe(n.children)],[])}function GDe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Mp(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Mp(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Mp(t.length,i.OFFSET.length)),i.DATA&&t.push(new Mp(t.length,i.DATA.length)),t=GDe(i.children,t)}return t}function cRt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function fRt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Nge(e,kge(e,t)),i=new ki(e.name,o,e.nullable,z$(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Rge(r):new Wv,a=new Yv(t.get(n),r,n,s.isOrdered),i=new ki(e.name,a,e.nullable,z$(e.metadata))):(r=(r=s.indexType)?Rge(r):new Wv,t.set(n,o=Nge(e,kge(e,t))),a=new Yv(o,r,n,s.isOrdered),i=new ki(e.name,a,e.nullable,z$(e.metadata))),i||null}function z$(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Rge(e){return new dl(e.isSigned,e.bitWidth)}function Nge(e,t){const n=e.type.name;switch(n){case"NONE":return new b0;case"null":return new b0;case"binary":return new PR;case"utf8":return new vT;case"bool":return new DR;case"list":return new wT((t||[])[0]);case"struct":return new hu(t||[]);case"struct_":return new hu(t||[])}switch(n){case"int":{const r=e.type;return new dl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Gv(La[r.precision])}case"decimal":{const r=e.type;return new g6(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new bT(cm[r.unit])}case"time":{const r=e.type;return new _0(gn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new y6(gn[r.unit],r.timezone)}case"interval":{const r=e.type;return new _T(fm[r.unit])}case"duration":{const r=e.type;return new v6(gn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new OR(cc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new b6(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new xT(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new $R((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var dRt=yDe,hRt=E6;class Np{static fromJSON(t,n){const r=new Np(0,Ju.V5,n);return r._createHeader=pRt(t,n),r}static decode(t){t=new hRt(_i(t));const n=vy.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Np(r,i,s);return o._createHeader=mRt(n,s),o}static encode(t){const n=new dRt;let r=-1;return t.isSchema()?r=mi.encode(n,t.header()):t.isRecordBatch()?r=ef.encode(n,t.header()):t.isDictionaryBatch()&&(r=hm.encode(n,t.header())),vy.startMessage(n),vy.addVersion(n,Ju.V5),vy.addHeader(n,r),vy.addHeaderType(n,t.headerType),vy.addBodyLength(n,BigInt(t.bodyLength)),vy.finishMessageBuffer(n,vy.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof mi)return new Np(0,Ju.V5,ra.Schema,t);if(t instanceof ef)return new Np(n,Ju.V5,ra.RecordBatch,t);if(t instanceof hm)return new Np(n,Ju.V5,ra.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ra.Schema}isRecordBatch(){return this.headerType===ra.RecordBatch}isDictionaryBatch(){return this.headerType===ra.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=kh(t)}}class ef{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=kh(t)}}class hm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=kh(n)}}class Mp{constructor(t,n){this.offset=kh(t),this.length=kh(n)}}class Jv{constructor(t,n){this.length=kh(t),this.nullCount=kh(n)}}function pRt(e,t){return()=>{switch(t){case ra.Schema:return mi.fromJSON(e);case ra.RecordBatch:return ef.fromJSON(e);case ra.DictionaryBatch:return hm.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ra[t]}, type: ${t} }`)}}function mRt(e,t){return()=>{switch(t){case ra.Schema:return mi.decode(e.header(new pp),new Map,e.version());case ra.RecordBatch:return ef.decode(e.header(new pg),e.version());case ra.DictionaryBatch:return hm.decode(e.header(new xE),e.version())}throw new Error(`Unrecognized Message type: { name: ${ra[t]}, type: ${t} }`)}}ki.encode=CRt;ki.decode=SRt;ki.fromJSON=fRt;mi.encode=TRt;mi.decode=gRt;mi.fromJSON=aRt;ef.encode=ARt;ef.decode=yRt;ef.fromJSON=qDe;hm.encode=IRt;hm.decode=vRt;hm.fromJSON=uRt;Jv.encode=kRt;Jv.decode=_Rt;Mp.encode=RRt;Mp.decode=bRt;function gRt(e,t=new Map,n=Ju.V5){const r=ERt(e,t);return new mi(r,V$(e),t,n)}function yRt(e,t=Ju.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ef(e.length(),wRt(e),xRt(e,t))}function vRt(e,t=Ju.V5){return new hm(ef.decode(e.data(),t),e.id(),e.isDelta())}function bRt(e){return new Mp(e.offset(),e.length())}function _Rt(e){return new Jv(e.length(),e.nullCount())}function wRt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Jv.decode(n));return t}function xRt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ju.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Mp.decode(r));return n}function ERt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=ki.decode(r,t));return n}function Pge(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=ki.decode(r,t));return n}function SRt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Oge(e,Pge(e,t)),r=new ki(e.name(),i,e.nullable(),V$(e))):t.has(n=kh(a.id()))?(s=(s=a.indexType())?Dge(s):new Wv,o=new Yv(t.get(n),s,n,a.isOrdered()),r=new ki(e.name(),o,e.nullable(),V$(e))):(s=(s=a.indexType())?Dge(s):new Wv,t.set(n,i=Oge(e,Pge(e,t))),o=new Yv(i,s,n,a.isOrdered()),r=new ki(e.name(),o,e.nullable(),V$(e))),r||null}function V$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Dge(e){return new dl(e.isSigned(),e.bitWidth())}function Oge(e,t){const n=e.typeType();switch(n){case ds.NONE:return new b0;case ds.Null:return new b0;case ds.Binary:return new PR;case ds.Utf8:return new vT;case ds.Bool:return new DR;case ds.List:return new wT((t||[])[0]);case ds.Struct_:return new hu(t||[])}switch(n){case ds.Int:{const r=e.type(new Oc);return new dl(r.isSigned(),r.bitWidth())}case ds.FloatingPoint:{const r=e.type(new kp);return new Gv(r.precision())}case ds.Decimal:{const r=e.type(new Ol);return new g6(r.scale(),r.precision(),r.bitWidth())}case ds.Date:{const r=e.type(new j$);return new bT(r.unit())}case ds.Time:{const r=e.type(new fI);return new _0(r.unit(),r.bitWidth())}case ds.Timestamp:{const r=e.type(new dI);return new y6(r.unit(),r.timezone())}case ds.Interval:{const r=e.type(new Rp);return new _T(r.unit())}case ds.Duration:{const r=e.type(new Cp);return new v6(r.unit())}case ds.Union:{const r=e.type(new zb);return new OR(r.mode(),r.typeIdsArray()||[],t||[])}case ds.FixedSizeBinary:{const r=e.type(new Ap);return new b6(r.byteWidth())}case ds.FixedSizeList:{const r=e.type(new Ip);return new xT(r.listSize(),(t||[])[0])}case ds.Map:{const r=e.type(new B$);return new $R((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ds[n]}" (${n})`)}function TRt(e,t){const n=t.fields.map(s=>ki.encode(e,s));pp.startFieldsVector(e,n.length);const r=pp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?pp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Oo.startKeyValue(e),Oo.addKey(e,a),Oo.addValue(e,u),Oo.endKeyValue(e)})):-1;return pp.startSchema(e),pp.addFields(e,r),pp.addEndianness(e,NRt?ST.Little:ST.Big),i!==-1&&pp.addCustomMetadata(e,i),pp.endSchema(e)}function CRt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;ir.isDictionary(s)?(o=s.dictionary.typeId,i=nz.visit(s,e),r=nz.visit(s.dictionary,e)):r=nz.visit(s,e);const a=(s.children||[]).map(c=>ki.encode(e,c)),u=Pf.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Pf.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Oo.startKeyValue(e),Oo.addKey(e,d),Oo.addValue(e,h),Oo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Pf.startField(e),Pf.addType(e,r),Pf.addTypeType(e,o),Pf.addChildren(e,u),Pf.addNullable(e,!!t.nullable),n!==-1&&Pf.addName(e,n),i!==-1&&Pf.addDictionary(e,i),l!==-1&&Pf.addCustomMetadata(e,l),Pf.endField(e)}function ARt(e,t){const n=t.nodes||[],r=t.buffers||[];pg.startNodesVector(e,n.length);for(const o of n.slice().reverse())Jv.encode(e,o);const i=e.endVector();pg.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Mp.encode(e,o);const s=e.endVector();return pg.startRecordBatch(e),pg.addLength(e,BigInt(t.length)),pg.addNodes(e,i),pg.addBuffers(e,s),pg.endRecordBatch(e)}function IRt(e,t){const n=ef.encode(e,t.data);return xE.startDictionaryBatch(e),xE.addId(e,BigInt(t.id)),xE.addIsDelta(e,t.isDelta),xE.addData(e,n),xE.endDictionaryBatch(e)}function kRt(e,t){return HDe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function RRt(e,t){return VDe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const NRt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),FW="ARROW1",Wee=new Uint8Array(FW.length);for(let e=0;e<FW.length;e+=1)Wee[e]=FW.codePointAt(e);Wee.length;class ro extends sr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof $c?s.data.children:s.data),r=new ro;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Jr)return this.visitMany(t.data),this;const{type:n}=t;if(!ir.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ir.isUnion(n))this.nodes.push(new Jv(r,0));else{const{nullCount:i}=t;ir.isNull(n)||_h.call(this,i<=0?new Uint8Array(0):_6(t.offset,r,t.nullBitmap)),this.nodes.push(new Jv(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function _h(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Mp(this._byteLength,t)),this._byteLength+=t,this}function PRt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(_h.call(this,i),n.mode===cc.Sparse)return jW.call(this,e);if(n.mode===cc.Dense){if(e.offset<=0)return _h.call(this,s),jW.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);_h.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function DRt(e){let t;return e.nullCount>=e.length?_h.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?_h.call(this,_6(e.offset,e.length,t)):_h.call(this,nDe(e.values))}function Y0(e){return _h.call(this,e.values.subarray(0,e.length*e.stride))}function YDe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return _h.call(this,XNe(-i,t+1,r)),_h.call(this,n.subarray(i,i+o)),this}function Gee(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return _h.call(this,XNe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function jW(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ro.prototype.visitBool=DRt;ro.prototype.visitInt=Y0;ro.prototype.visitFloat=Y0;ro.prototype.visitUtf8=YDe;ro.prototype.visitBinary=YDe;ro.prototype.visitFixedSizeBinary=Y0;ro.prototype.visitDate=Y0;ro.prototype.visitTimestamp=Y0;ro.prototype.visitTime=Y0;ro.prototype.visitDecimal=Y0;ro.prototype.visitList=Gee;ro.prototype.visitStruct=jW;ro.prototype.visitUnion=PRt;ro.prototype.visitInterval=Y0;ro.prototype.visitDuration=Y0;ro.prototype.visitFixedSizeList=Gee;ro.prototype.visitMap=Gee;class KDe extends bDe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new ez,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,B1(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return uj(t)?t.then(n=>this.writeAll(n)):lj(t)?Qee(this,t):Xee(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof ez?this._sink=t:(this._sink=new ez,t&&j2t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&B2t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!$W(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof jl&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof $c&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!$W(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof $c?t instanceof sRt||this._writeRecordBatch(t):t instanceof jl?this.writeAll(t.batches):oee(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Np.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===ra.RecordBatch?this._recordBatchBlocks.push(new Xv(a,t.bodyLength,this._position)):t.headerType===ra.DictionaryBatch&&this._dictionaryBlocks.push(new Xv(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=_i(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Np.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Wee)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ro.assemble(t),o=new ef(t.numRows,r,i),a=Np.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ro.assemble(new Jr([t])),u=new ef(t.length,s,o),l=new hm(u,n,r),c=Np.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Yee extends KDe{static writeAll(t,n){const r=new Yee(n);return uj(t)?t.then(i=>r.writeAll(i)):lj(t)?Qee(r,t):Xee(r,t)}}class Kee extends KDe{static writeAll(t){const n=new Kee;return uj(t)?t.then(r=>n.writeAll(r)):lj(t)?Qee(n,t):Xee(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=OW.encode(new OW(t,Ju.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Xee(e,t){let n=t;t instanceof jl&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Qee(e,t){var n,r,i,s,o,a,u;return xg(this,void 0,void 0,function*(){try{for(n=!0,r=YI(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function ORt(e,t="stream"){return(t==="stream"?Yee:Kee).writeAll(e).toUint8Array(!0)}function Jee(e,t=1){return(e*t+63&-64||64)/t}function Zv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Jee(t,n))}function Zee(e){return e instanceof bi?e:new bi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function $Rt(e){return new Jr([Zee(e)])}const ete=new TextEncoder;function MRt(e,t,n){const r=ete.encode(n);return e.set(r,t),r.length}function LRt(e,t,n){return ete.encodeInto(n,e.subarray(t)).written}const FRt=ete.encodeInto?LRt:MRt;function $ge(e,t){const n=Zv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function jRt(e,t){const n=Zv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function BRt(e,t){const n=Zv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function URt(e,t){const n=Zv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function zRt(e){const t=k6({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function VRt(e,t,n){const r=Zv(Int32Array,t+1),i=Zv(Uint8Array,3*n);let s=0;return{set(o,a){s+=FRt(i,s,o),r[a+1]=s},data:()=>{const o=Jee(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function HRt(e,t){const n=[],r=Zv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:qRt(e.dictionary,n,o)})}}function qRt(e,t,n){const r=VRt(e,t.length,n);return t.forEach(r.set),$Rt(r.data())}function WRt(e,t){const n=Zv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function GRt(e,t,n=!0){let r;switch(e.typeId){case fe.Int:r=e.bitWidth<64?$ge:null;break;case fe.Float:r=e.precision>0?$ge:null;break;case fe.Dictionary:r=e.dictionary.typeId===fe.Utf8&&e.indices.typeId===fe.Int&&e.indices.bitWidth<64?HRt:null;break;case fe.Bool:r=jRt;break;case fe.Date:r=e.unit?URt:BRt;break}return r==null?zRt(e):n?WRt(r(e,t),t):r(e,t)}function YRt(e,t){const n=e.length,r=Jee(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Zee({type:t,length:n,buffers:[null,i]})}function XDe(e,t,n,r,i=!0){const s=GRt(r,e,i);return t(n,s.set),Zee(s.data())}function tte(e){if(e instanceof ir||e==null)return e;switch(e){case fe.Binary:return new PR;case fe.Bool:return new DR;case fe.DateDay:return new tIt;case fe.DateMillisecond:case fe.Date:return new nIt;case fe.Dictionary:return new Yv(new vT,new Wv);case fe.Float16:return new vPe;case fe.Float32:return new gee;case fe.Float64:case fe.Float:return new yee;case fe.Int8:return new lee;case fe.Int16:return new cee;case fe.Int32:case fe.Int:return new Wv;case fe.Int64:return new fee;case fe.IntervalDayTime:return new aIt;case fe.Interval:case fe.IntervalYearMonth:return new uIt;case fe.Null:return new b0;case fe.TimeMicrosecond:return new sIt;case fe.TimeMillisecond:case fe.Time:return new iIt;case fe.TimeNanosecond:return new oIt;case fe.TimeSecond:return new rIt;case fe.Uint8:return new dee;case fe.Uint16:return new hee;case fe.Uint32:return new pee;case fe.Uint64:return new mee;case fe.Utf8:return new vT;default:Qn(`Unsupported type code: ${um(e)}. Use a data type constructor instead?`)}}function KRt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function QDe(e,t){const n=BW();return e(t,n.add),n}function BW(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(v0(t))++e.dates,KRt(t)&&++e.utcdays;else if(v_(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=BW());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=BW())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return tte(XRt(e))}};return e}function XRt(e){const t=e.count-e.nulls;if(t===0)return fe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?fe.Float64:n<128?fe.Int8:n<32768?fe.Int16:fe.Int32:n>=2**32?fe.Float64:n<256?fe.Uint8:n<65536?fe.Uint16:fe.Uint32}else{if(e.nums===t)return fe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?fe.Int64:Qn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?fe.Uint64:Qn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return fe.Bool;if(e.utcdays===t)return fe.DateDay;if(e.dates===t)return fe.DateMillisecond;if(e.arrays===t){const n=ki.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new xT(e.minlen,n):new wT(n)}else if(e.structs===t){const n=e.struct_prof;return new hu(Object.keys(n).map(r=>ki.new(r,n[r].type(),!0)))}else{if(e.strings>0)return fe.Dictionary;Qn("Type inference failure")}}}}function QRt(e,t,n,r,i,s=!0){if(i=tte(i),!i){const o=QDe(r,t);s=o.nulls>0,i=o.type()}return XDe(n,r,t,i,s)}function JRt(e,t,n,r,i,s=!0){i=tte(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=ZRt(o);if(u&&a&&Mge(u.type,i))return u;const l=o.data;if(lP(l)){const c=eNt(l);if(a&&c&&Mge(c,i))return YRt(l,c);i=i||c,s=!1}if(!i){const c=QDe(r,o);s=c.nulls>0,i=c.type()}return XDe(n,r,o,i,s)}function ZRt(e){return e instanceof Jr?e:e.vector instanceof Jr?e.vector:null}function eNt(e){const n={Float32Array:gee,Float64Array:yee,Int8Array:lee,Int16Array:cee,Int32Array:Wv,Uint8Array:dee,Uint16Array:hee,Uint32Array:pee,BigInt64Array:fee,BigUint64Array:mee}[e.constructor.name];return n?new n:null}function Mge(e,t){return!e||!t?!0:e.compareTo(t)}function tNt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function nNt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&v_(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const rNt=()=>Qn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function iNt(){try{return jl}catch{rNt()}}function JDe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=sNt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Qn("Column length mismatch"),a[l]=c});const u=iNt();return new u(a)}function sNt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=as(n)?n(e):Qr(n)?n:null;if(Qr(e))return{dataFrom:QRt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:tNt(e,r,i)};if(oNt(e))return{dataFrom:JRt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:nNt(e,r,i)};Qn("Unsupported input data type")}function oNt(e){return e&&as(e.reify)}function aNt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return ORt(JDe(e,r),n)}function uNt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function lNt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&v0(u))++i,uNt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function vj(e,t){return as(t)?t(e):t||e.columnNames()}function ZDe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=lNt(cNt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function cNt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function nte(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function fNt(e,t={}){const n=vj(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":v0(l)?oj(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return nte(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function eOe(e,t={}){if(as(t))return t(e)+"";const n=typeof e;if(n==="object"){if(v0(e))return t.utc?oj(e):xNe(e);{const r=JSON.stringify(e,(s,o)=>lP(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function bj(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function dNt(e,t={}){const n=vj(e,t.columns),{align:r,format:i}=ZDe(e,n,t),s=hNt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(eOe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const b=y?a(r[g]):"",w=s[m]&&s[m](g,d,f)||"",E=(b?`text-align: ${b};`+(w?" ":""):"")+w;return`<${m}${E?` style="${E}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return nte(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function hNt(e){return bj(e.style,t=>as(t)?t:()=>t)}function pNt(e,t=!0,n=!1){return e===void 0||e?t:n}const mNt=e=>v0(e)?oj(e,!0):e;function gNt(e,t={}){const n=pNt(t.schema),r=t.format||{},i=vj(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||mNt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function yNt(e,t={}){const n=vj(e,t.columns),{align:r,format:i}=ZDe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return nte(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(eOe(u,i[l]))+"|"}}),a+`
`}function tOe(e,t){for(const[n,r]of aj(t))e.set(n,r);return e}function vNt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function w0(e,t,n=new Map){return t=fl(t)?e.columnName(t):t,Ha(t)?n.set(t,t):Qr(t)?t.forEach(r=>w0(e,r,n)):as(t)?w0(e,t(e),n):Tu(t)?tOe(n,t):Qn(`Invalid column selection: ${um(t)}`),n}function _j(e,t){return e.toObject=t,e}function nOe(e){return Qr(e)?e.map(nOe):e&&e.toObject?e.toObject():e}function TT(){return _j(e=>e.columnNames(),()=>({all:[]}))}function rOe(...e){return e=e.flat(),_j(t=>{const n=w0(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:nOe(e)}))}function bNt(e,t){return _j(n=>{let r=fl(e)?e:n.columnIndex(e),i=fl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function _Nt(e){return Ha(e)&&(e=RegExp(vNt(e))),_j(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function wNt(e){return lP(e.data)?e.data.constructor:Array}class Ag extends FAt{static from(t,n){return new Ag(UAt(t,n),n)}static new(t,n){if(t instanceof Ag)return t;const r={},i=[];for(const[s,o]of aj(t))r[s]=o,i.push(s);return new Ag(r,n||i)}constructor(t,n,r,i,s,o){bj(t,BAt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Ag(t||this._data,n||(t?null:this._names),o,i!==void 0?i:g2t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=pf(r).groupby(r.groups());return t.forEach(s=>{s=Ag.new(s),s.numRows()!==n&&Qn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Qn(`Unrecognized column: ${t}`)}object(t=0){return Lge(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=w0(this,t.columns||TT()),o=GNe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),v2t(this,u,a,n)}return a}*[Symbol.iterator](){const t=Lge(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(wNt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=y2t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return JDe(this,t)}toArrowBuffer(t){return aNt(this,t)}toCSV(t){return fNt(this,t)}toHTML(t){return dNt(this,t)}toJSON(t){return gNt(this,t)}toMarkdown(t){return yNt(this,t)}}function Lge(e){let t=e._builder;if(!t){const n=GNe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class xNt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Fr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=ENt[e.type];s&&s(e,t,n)}const h3=(e,t,n)=>{Fr(e.argument,t,n,e)},rz=(e,t,n)=>{Fr(e.left,t,n,e),Fr(e.right,t,n,e)},Fge=(e,t,n)=>{Fr(e.test,t,n,e),Fr(e.consequent,t,n,e),e.alternate&&Fr(e.alternate,t,n,e)},iz=(e,t,n)=>{mp(e.params,t,n,e),Fr(e.body,t,n,e)},jge=(e,t,n)=>{Fr(e.callee,t,n,e),mp(e.arguments,t,n,e)},mp=(e,t,n,r)=>{e.forEach(i=>Fr(i,t,n,r))},ENt={TemplateLiteral:(e,t,n)=>{mp(e.expressions,t,n,e),mp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Fr(e.object,t,n,e),Fr(e.property,t,n,e)},CallExpression:jge,NewExpression:jge,ArrayExpression:(e,t,n)=>{mp(e.elements,t,n,e)},AssignmentExpression:rz,AwaitExpression:h3,BinaryExpression:rz,LogicalExpression:rz,UnaryExpression:h3,UpdateExpression:h3,ConditionalExpression:Fge,ObjectExpression:(e,t,n)=>{mp(e.properties,t,n,e)},Property:(e,t,n)=>{Fr(e.key,t,n,e),Fr(e.value,t,n,e)},ArrowFunctionExpression:iz,FunctionExpression:iz,FunctionDeclaration:iz,VariableDeclaration:(e,t,n)=>{mp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Fr(e.id,t,n,e),Fr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Fr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{mp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Fr(e.expression,t,n,e)},IfStatement:Fge,ForStatement:(e,t,n)=>{Fr(e.init,t,n,e),Fr(e.test,t,n,e),Fr(e.update,t,n,e),Fr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Fr(e.test,t,n,e),Fr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Fr(e.body,t,n,e),Fr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Fr(e.discriminant,t,n,e),mp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Fr(e.test,t,n,e),mp(e.consequent,t,n,e)},ReturnStatement:h3,Program:(e,t,n)=>{Fr(e.body[0],t,n,e)}};function iOe(e){delete e.start,delete e.end,delete e.optional}function Bge(e){iOe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function SNt(e){return Fr(e,null,{Column:Bge,Constant:Bge,Default:iOe}),e}function Mo(e,t){return t&&t.type===e}function TNt(e){return Mo(w2t,e)||Mo(_2t,e)}function CNt(e){return as(e)?e:()=>e}const ANt="Escaped functions are not valid as rollup or pivot values.";function INt(e,t,n){e.aggronly&&Qn(ANt);const r="(row,data)=>fn("+WNe(e.table.columnNames())+",$)";return{escape:iee.escape(r,CNt(t.expr),n)}}var kNt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],sOe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],RNt="-----------------------------------------------------------------------------------------------------------------------------------------------------",oOe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",sz={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},oz="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",NNt={5:oz,"5module":oz+" export import",6:oz+" const class extends export import super"},PNt=/^in(stanceof)?$/,DNt=new RegExp("["+oOe+"]"),ONt=new RegExp("["+oOe+RNt+"]");function UW(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function x0(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&DNt.test(String.fromCharCode(e)):t===!1?!1:UW(e,sOe)}function CT(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&ONt.test(String.fromCharCode(e)):t===!1?!1:UW(e,sOe)||UW(e,kNt)}var Hr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Cf(e,t){return new Hr(e,{beforeExpr:!0,binop:t})}var Af={beforeExpr:!0},Al={startsExpr:!0},rte={};function Nr(e,t){return t===void 0&&(t={}),t.keyword=e,rte[e]=new Hr(e,t)}var te={num:new Hr("num",Al),regexp:new Hr("regexp",Al),string:new Hr("string",Al),name:new Hr("name",Al),privateId:new Hr("privateId",Al),eof:new Hr("eof"),bracketL:new Hr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Hr("]"),braceL:new Hr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Hr("}"),parenL:new Hr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Hr(")"),comma:new Hr(",",Af),semi:new Hr(";",Af),colon:new Hr(":",Af),dot:new Hr("."),question:new Hr("?",Af),questionDot:new Hr("?."),arrow:new Hr("=>",Af),template:new Hr("template"),invalidTemplate:new Hr("invalidTemplate"),ellipsis:new Hr("...",Af),backQuote:new Hr("`",Al),dollarBraceL:new Hr("${",{beforeExpr:!0,startsExpr:!0}),eq:new Hr("=",{beforeExpr:!0,isAssign:!0}),assign:new Hr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Hr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Hr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Cf("||",1),logicalAND:Cf("&&",2),bitwiseOR:Cf("|",3),bitwiseXOR:Cf("^",4),bitwiseAND:Cf("&",5),equality:Cf("==/!=/===/!==",6),relational:Cf("</>/<=/>=",7),bitShift:Cf("<</>>/>>>",8),plusMin:new Hr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Cf("%",10),star:Cf("*",10),slash:Cf("/",10),starstar:new Hr("**",{beforeExpr:!0}),coalesce:Cf("??",1),_break:Nr("break"),_case:Nr("case",Af),_catch:Nr("catch"),_continue:Nr("continue"),_debugger:Nr("debugger"),_default:Nr("default",Af),_do:Nr("do",{isLoop:!0,beforeExpr:!0}),_else:Nr("else",Af),_finally:Nr("finally"),_for:Nr("for",{isLoop:!0}),_function:Nr("function",Al),_if:Nr("if"),_return:Nr("return",Af),_switch:Nr("switch"),_throw:Nr("throw",Af),_try:Nr("try"),_var:Nr("var"),_const:Nr("const"),_while:Nr("while",{isLoop:!0}),_with:Nr("with"),_new:Nr("new",{beforeExpr:!0,startsExpr:!0}),_this:Nr("this",Al),_super:Nr("super",Al),_class:Nr("class",Al),_extends:Nr("extends",Af),_export:Nr("export"),_import:Nr("import",Al),_null:Nr("null",Al),_true:Nr("true",Al),_false:Nr("false",Al),_in:Nr("in",{beforeExpr:!0,binop:7}),_instanceof:Nr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Nr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Nr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Nr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},bd=/\r\n?|\n|\u2028|\u2029/,$Nt=new RegExp(bd.source,"g");function HC(e){return e===10||e===13||e===8232||e===8233}function aOe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(HC(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var uOe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Bf=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,lOe=Object.prototype,MNt=lOe.hasOwnProperty,LNt=lOe.toString,gP=Object.hasOwn||function(e,t){return MNt.call(e,t)},Uge=Array.isArray||function(e){return LNt.call(e)==="[object Array]"},zge=Object.create(null);function Zy(e){return zge[e]||(zge[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function e1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var FNt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,MR=function(t,n){this.line=t,this.column=n};MR.prototype.offset=function(t){return new MR(this.line,this.column+t)};var wj=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function cOe(e,t){for(var n=1,r=0;;){var i=aOe(e,r,t);if(i<0)return new MR(n,t-r);++n,r=i}}var zW={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Vge=!1;function jNt(e){var t={};for(var n in zW)t[n]=e&&gP(e,n)?e[n]:zW[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Vge&&typeof console=="object"&&console.warn&&(Vge=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Uge(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Uge(t.onComment)&&(t.onComment=BNt(t,t.onComment)),t}function BNt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new wj(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var LR=1,qC=2,ite=4,fOe=8,dOe=16,hOe=32,ste=64,pOe=128,yP=256,ote=LR|qC|yP;function ate(e,t){return qC|(e?ite:0)|(t?fOe:0)}var D6=0,ute=1,K0=2,mOe=3,gOe=4,yOe=5,Ho=function(t,n,r){this.options=t=jNt(t),this.sourceFile=t.sourceFile,this.keywords=Zy(NNt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=sz[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Zy(i);var s=(i?i+" ":"")+sz.strict;this.reservedWordsStrict=Zy(s),this.reservedWordsStrictBind=Zy(s+" "+sz.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(bd).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(LR),this.regexpState=null,this.privateNameStack=[]},Rm={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ho.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Rm.inFunction.get=function(){return(this.currentVarScope().flags&qC)>0};Rm.inGenerator.get=function(){return(this.currentVarScope().flags&fOe)>0&&!this.currentVarScope().inClassFieldInit};Rm.inAsync.get=function(){return(this.currentVarScope().flags&ite)>0&&!this.currentVarScope().inClassFieldInit};Rm.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&yP)return!1;if(t.flags&qC)return(t.flags&ite)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Rm.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&ste)>0||n||this.options.allowSuperOutsideMethod};Rm.allowDirectSuper.get=function(){return(this.currentThisScope().flags&pOe)>0};Rm.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Rm.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(qC|yP))>0||n};Rm.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&yP)>0};Ho.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ho.parse=function(t,n){return new this(n,t).parse()};Ho.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ho.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ho.prototype,Rm);var vl=Ho.prototype,UNt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;vl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Bf.lastIndex=e,e+=Bf.exec(this.input)[0].length;var t=UNt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Bf.lastIndex=e+t[0].length;var n=Bf.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||bd.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Bf.lastIndex=e,e+=Bf.exec(this.input)[0].length,this.input[e]===";"&&e++}};vl.eat=function(e){return this.type===e?(this.next(),!0):!1};vl.isContextual=function(e){return this.type===te.name&&this.value===e&&!this.containsEsc};vl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};vl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};vl.canInsertSemicolon=function(){return this.type===te.eof||this.type===te.braceR||bd.test(this.input.slice(this.lastTokEnd,this.start))};vl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};vl.semicolon=function(){!this.eat(te.semi)&&!this.insertSemicolon()&&this.unexpected()};vl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};vl.expect=function(e){this.eat(e)||this.unexpected()};vl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var xj=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};vl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};vl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};vl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};vl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var en=Ho.prototype;en.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==te.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var lte={kind:"loop"},zNt={kind:"switch"};en.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Bf.lastIndex=this.pos;var t=Bf.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(x0(r,!0)){for(var i=n+1;CT(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!PNt.test(s))return!0}return!1};en.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Bf.lastIndex=this.pos;var e=Bf.exec(this.input),t=this.pos+e[0].length,n;return!bd.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(CT(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};en.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=te._var,s="let"),r){case te._break:case te._continue:return this.parseBreakContinueStatement(i,r.keyword);case te._debugger:return this.parseDebuggerStatement(i);case te._do:return this.parseDoStatement(i);case te._for:return this.parseForStatement(i);case te._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case te._class:return e&&this.unexpected(),this.parseClass(i,!0);case te._if:return this.parseIfStatement(i);case te._return:return this.parseReturnStatement(i);case te._switch:return this.parseSwitchStatement(i);case te._throw:return this.parseThrowStatement(i);case te._try:return this.parseTryStatement(i);case te._const:case te._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case te._while:return this.parseWhileStatement(i);case te._with:return this.parseWithStatement(i);case te.braceL:return this.parseBlock(!0,i);case te.semi:return this.parseEmptyStatement(i);case te._export:case te._import:if(this.options.ecmaVersion>10&&r===te._import){Bf.lastIndex=this.pos;var o=Bf.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===te._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===te.name&&c.type==="Identifier"&&this.eat(te.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};en.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(te.semi)||this.insertSemicolon()?e.label=null:this.type!==te.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};en.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};en.parseDoStatement=function(e){return this.next(),this.labels.push(lte),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(te._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(te.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};en.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(lte),this.enterScope(0),this.expect(te.parenL),this.type===te.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===te._var||this.type===te._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new xj,u=this.parseExpression(t>-1?"await":!0,a);return this.type===te._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};en.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,fk|(n?0:VW),!1,t)};en.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(te._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};en.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(te.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};en.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(te.braceL),this.labels.push(zNt),this.enterScope(0);for(var t,n=!1;this.type!==te.braceR;)if(this.type===te._case||this.type===te._default){var r=this.type===te._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(te.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};en.parseThrowStatement=function(e){return this.next(),bd.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var VNt=[];en.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?hOe:0),this.checkLValPattern(e,t?gOe:K0),this.expect(te.parenR),e};en.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===te._catch){var t=this.startNode();this.next(),this.eat(te.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(te._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};en.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};en.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(lte),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};en.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};en.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};en.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===te._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};en.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};en.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(te.braceL),e&&this.enterScope(0);this.type!==te.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};en.parseFor=function(e,t){return e.init=t,this.expect(te.semi),e.test=this.type===te.semi?null:this.parseExpression(),this.expect(te.semi),e.update=this.type===te.parenR?null:this.parseExpression(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};en.parseForIn=function(e,t){var n=this.type===te._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};en.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(te.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(te.comma))break}return e};en.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?ute:K0,!1)};var fk=1,VW=2,vOe=4;en.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===te.star&&t&VW&&this.unexpected(),e.generator=this.eat(te.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&fk&&(e.id=t&vOe&&this.type!==te.name?null:this.parseIdent(),e.id&&!(t&VW)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?ute:K0:mOe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ate(e.async,e.generator)),t&fk||(e.id=this.type===te.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&fk?"FunctionDeclaration":"FunctionExpression")};en.parseFunctionParams=function(e){this.expect(te.parenL),e.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};en.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(te.braceL);this.type!==te.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&HNt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};en.parseClassElement=function(e){if(this.eat(te.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(te.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===te.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===te.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(te.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===te.parenL||o!=="method"||i||s){var l=!n.static&&O6(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};en.isClassElementNameStart=function(){return this.type===te.name||this.type===te.privateId||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword};en.parseClassElementName=function(e){this.type===te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};en.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&O6(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};en.parseClassField=function(e){if(O6(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&O6(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(te.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};en.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(yP|ste);this.type!==te.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};en.parseClassId=function(e,t){this.type===te.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,K0,!1)):(t===!0&&this.unexpected(),e.id=null)};en.parseClassSuper=function(e){e.superClass=this.eat(te._extends)?this.parseExprSubscripts(null,!1):null};en.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};en.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];gP(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function HNt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function O6(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}en.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};en.parseExport=function(e,t){if(this.next(),this.eat(te.star))return this.parseExportAllDeclaration(e,t);if(this.eat(te._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};en.parseExportDeclaration=function(e){return this.parseStatement(null)};en.parseExportDefaultDeclaration=function(){var e;if(this.type===te._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,fk|vOe,!1,e)}else if(this.type===te._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};en.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),gP(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};en.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};en.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};en.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};en.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};en.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(te.braceL);!this.eat(te.braceR);){if(n)n=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;t.push(this.parseExportSpecifier(e))}return t};en.parseImport=function(e){return this.next(),this.type===te.string?(e.specifiers=VNt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};en.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,K0),this.finishNode(e,"ImportSpecifier")};en.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,K0),this.finishNode(e,"ImportDefaultSpecifier")};en.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,K0),this.finishNode(e,"ImportNamespaceSpecifier")};en.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===te.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(te.comma)))return e;if(this.type===te.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(te.braceL);!this.eat(te.braceR);){if(t)t=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;e.push(this.parseImportSpecifier())}return e};en.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===te.string){var e=this.parseLiteral(this.value);return FNt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};en.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};en.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var _d=Ho.prototype;_d.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};_d.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};_d.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};_d.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==te.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};_d.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case te.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(te.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case te.braceL:return this.parseObj(!0)}return this.parseIdent()};_d.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(te.comma),t&&this.type===te.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===te.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};_d.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};_d.parseBindingListItem=function(e){return e};_d.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(te.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};_d.checkLValSimple=function(e,t,n){t===void 0&&(t=D6);var r=t!==D6;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===K0&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(gP(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==yOe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};_d.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=D6),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};_d.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=D6),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Bd=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},bs={b_stat:new Bd("{",!1),b_expr:new Bd("{",!0),b_tmpl:new Bd("${",!1),p_stat:new Bd("(",!1),p_expr:new Bd("(",!0),q_tmpl:new Bd("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Bd("function",!1),f_expr:new Bd("function",!0),f_expr_gen:new Bd("function",!0,!1,null,!0),f_gen:new Bd("function",!1,!1,null,!0)},WC=Ho.prototype;WC.initialContext=function(){return[bs.b_stat]};WC.curContext=function(){return this.context[this.context.length-1]};WC.braceIsBlock=function(e){var t=this.curContext();return t===bs.f_expr||t===bs.f_stat?!0:e===te.colon&&(t===bs.b_stat||t===bs.b_expr)?!t.isExpr:e===te._return||e===te.name&&this.exprAllowed?bd.test(this.input.slice(this.lastTokEnd,this.start)):e===te._else||e===te.semi||e===te.eof||e===te.parenR||e===te.arrow?!0:e===te.braceL?t===bs.b_stat:e===te._var||e===te._const||e===te.name?!1:!this.exprAllowed};WC.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};WC.updateContext=function(e){var t,n=this.type;n.keyword&&e===te.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};WC.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};te.parenR.updateContext=te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===bs.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};te.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?bs.b_stat:bs.b_expr),this.exprAllowed=!0};te.dollarBraceL.updateContext=function(){this.context.push(bs.b_tmpl),this.exprAllowed=!0};te.parenL.updateContext=function(e){var t=e===te._if||e===te._for||e===te._with||e===te._while;this.context.push(t?bs.p_stat:bs.p_expr),this.exprAllowed=!0};te.incDec.updateContext=function(){};te._function.updateContext=te._class.updateContext=function(e){e.beforeExpr&&e!==te._else&&!(e===te.semi&&this.curContext()!==bs.p_stat)&&!(e===te._return&&bd.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===te.colon||e===te.braceL)&&this.curContext()===bs.b_stat)?this.context.push(bs.f_expr):this.context.push(bs.f_stat),this.exprAllowed=!1};te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};te.backQuote.updateContext=function(){this.curContext()===bs.q_tmpl?this.context.pop():this.context.push(bs.q_tmpl),this.exprAllowed=!1};te.star.updateContext=function(e){if(e===te._function){var t=this.context.length-1;this.context[t]===bs.f_expr?this.context[t]=bs.f_expr_gen:this.context[t]=bs.f_gen}this.exprAllowed=!0};te.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Dn=Ho.prototype;Dn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Dn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===te.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(te.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Dn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new xj,r=!0);var a=this.start,u=this.startLoc;(this.type===te.parenL||this.type===te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===te.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===te.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Dn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(te.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(te.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Dn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Dn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==te._in)&&s>r){var o=this.type===te.logicalOR||this.type===te.logicalAND,a=this.type===te.coalesce;a&&(s=te.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===te.coalesce||a&&(this.type===te.logicalOR||this.type===te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Dn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Dn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===te.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&bOe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===te.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==te._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(te.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function bOe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&bOe(e.expression)}Dn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Dn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Dn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(te.arrow)};Dn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Dn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(te.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(te.bracketL);if(l||u&&this.type!==te.parenL&&this.type!==te.backQuote||this.eat(te.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(te.bracketR)):this.type===te.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(te.parenL)){var f=new xj,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===te.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Dn.parseExprAtom=function(e,t,n){this.type===te.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===te.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==te.dot&&this.type!==te.bracketL&&this.type!==te.parenL&&this.unexpected(),this.finishNode(r,"Super");case te._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case te.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(te._function))return this.overrideContext(bs.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(te.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===te.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case te.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case te.num:case te.string:return this.parseLiteral(this.value);case te._null:case te._true:case te._false:return r=this.startNode(),r.value=this.type===te._null?null:this.type===te._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case te.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case te.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(te.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case te.braceL:return this.overrideContext(bs.b_expr),this.parseObj(!1,e);case te._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case te._class:return this.parseClass(this.startNode(),!1);case te._new:return this.parseNew();case te.backQuote:return this.parseTemplate();case te._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Dn.parseExprAtomDefault=function(){this.unexpected()};Dn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===te.parenL&&!e)return this.parseDynamicImport(t);if(this.type===te.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Dn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(te.parenR)){var t=this.start;this.eat(te.comma)&&this.eat(te.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Dn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Dn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Dn.parseParenExpression=function(){this.expect(te.parenL);var e=this.parseExpression();return this.expect(te.parenR),e};Dn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Dn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new xj,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==te.parenR;)if(l?l=!1:this.expect(te.comma),s&&this.afterTrailingComma(te.parenR,!0)){c=!0;break}else if(this.type===te.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(te.parenR),e&&this.shouldParseArrow(u)&&this.eat(te.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Dn.parseParenItem=function(e){return e};Dn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var qNt=[];Dn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===te.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(te.parenL)?e.arguments=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1):e.arguments=qNt,this.finishNode(e,"NewExpression")};Dn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===te.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===te.backQuote,this.finishNode(n,"TemplateElement")};Dn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(te.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(te.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Dn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===te.name||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===te.star)&&!bd.test(this.input.slice(this.lastTokEnd,this.start))};Dn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(te.braceR);){if(r)r=!1;else if(this.expect(te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(te.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Dn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(te.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===te.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(te.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(te.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Dn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Dn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===te.colon&&this.unexpected(),this.eat(te.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===te.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==te.comma&&this.type!==te.braceR&&this.type!==te.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===te.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Dn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(te.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(te.bracketR),e.key;e.computed=!1}return e.key=this.type===te.num||this.type===te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Dn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Dn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ate(t,r.generator)|ste|(n?pOe:0)),this.expect(te.parenL),r.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Dn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(ate(n,!1)|dOe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Dn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==te.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,yOe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Dn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Dn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,ute,t?null:n)}};Dn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(te.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===te.comma?o=null:this.type===te.ellipsis?(o=this.parseSpread(r),r&&this.type===te.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Dn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Dn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Dn.parseIdentNode=function(){var e=this.startNode();return this.type===te.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=te.name):this.unexpected(),e};Dn.parsePrivateIdent=function(){var e=this.startNode();return this.type===te.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Dn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===te.semi||this.canInsertSemicolon()||this.type!==te.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(te.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Dn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var $6=Ho.prototype;$6.raise=function(e,t){var n=cOe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};$6.raiseRecoverable=$6.raise;$6.curPosition=function(){if(this.options.locations)return new MR(this.curLine,this.pos-this.lineStart)};var V1=Ho.prototype,WNt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};V1.enterScope=function(e){this.scopeStack.push(new WNt(e))};V1.exitScope=function(){this.scopeStack.pop()};V1.treatFunctionsAsVarInScope=function(e){return e.flags&qC||!this.inModule&&e.flags&LR};V1.declareName=function(e,t,n){var r=!1;if(t===K0){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&LR&&delete this.undefinedExports[e]}else if(t===gOe){var s=this.currentScope();s.lexical.push(e)}else if(t===mOe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&hOe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&LR&&delete this.undefinedExports[e],u.flags&ote)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};V1.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};V1.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};V1.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&ote)return t}};V1.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&ote&&!(t.flags&dOe))return t}};var Ej=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new wj(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},vP=Ho.prototype;vP.startNode=function(){return new Ej(this,this.start,this.startLoc)};vP.startNodeAt=function(e,t){return new Ej(this,e,t)};function _Oe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}vP.finishNode=function(e,t){return _Oe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};vP.finishNodeAt=function(e,t,n,r){return _Oe.call(this,e,t,n,r)};vP.copyNode=function(e){var t=new Ej(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var wOe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",xOe=wOe+" Extended_Pictographic",EOe=xOe,SOe=EOe+" EBase EComp EMod EPres ExtPict",TOe=SOe,GNt=TOe,YNt={9:wOe,10:xOe,11:EOe,12:SOe,13:TOe,14:GNt},KNt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",XNt={9:"",10:"",11:"",12:"",13:"",14:KNt},Hge="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",COe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",AOe=COe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",IOe=AOe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",kOe=IOe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ROe=kOe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",QNt=ROe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",JNt={9:COe,10:AOe,11:IOe,12:kOe,13:ROe,14:QNt},NOe={};function ZNt(e){var t=NOe[e]={binary:Zy(YNt[e]+" "+Hge),binaryOfStrings:Zy(XNt[e]),nonBinary:{General_Category:Zy(Hge),Script:Zy(JNt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var az=0,qge=[9,10,11,12,13,14];az<qge.length;az+=1){var ePt=qge[az];ZNt(ePt)}var Gt=Ho.prototype,Nm=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=NOe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Nm.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Nm.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Nm.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Nm.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Nm.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Nm.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Nm.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Nm.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Nm.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Gt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Gt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Gt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Gt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Gt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Gt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Gt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Gt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Gt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Gt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Gt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Gt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Gt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Gt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Gt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Gt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Gt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return POe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function POe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Gt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!POe(n);)e.advance();return e.pos!==t};Gt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Gt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Gt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Gt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=e1(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=e1(e.lastIntValue);return!0}return!1};Gt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),tPt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function tPt(e){return x0(e,!0)||e===36||e===95}Gt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),nPt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function nPt(e){return CT(e,!0)||e===36||e===95||e===8204||e===8205}Gt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Gt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Gt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Gt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Gt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Gt.regexp_eatZero=function(e){return e.current()===48&&!Sj(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Gt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Gt.regexp_eatControlLetter=function(e){var t=e.current();return DOe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function DOe(e){return e>=65&&e<=90||e>=97&&e<=122}Gt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&rPt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function rPt(e){return e>=0&&e<=1114111}Gt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Gt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var OOe=0,E0=1,Hf=2;Gt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(iPt(t))return e.lastIntValue=-1,e.advance(),E0;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Hf&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return OOe};function iPt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Gt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),E0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return OOe};Gt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){gP(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Gt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return E0;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Hf;e.raise("Invalid property name")};Gt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";$Oe(t=e.current());)e.lastStringValue+=e1(t),e.advance();return e.lastStringValue!==""};function $Oe(e){return DOe(e)||e===95}Gt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";sPt(t=e.current());)e.lastStringValue+=e1(t),e.advance();return e.lastStringValue!==""};function sPt(e){return $Oe(e)||Sj(e)}Gt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Gt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Hf&&e.raise("Negated character class may contain strings"),!0}return!1};Gt.regexp_classContents=function(e){return e.current()===93?E0:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),E0)};Gt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Gt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||FOe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Gt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Gt.regexp_classSetExpression=function(e){var t=E0,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Hf&&(t=Hf);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Hf&&(t=E0);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Hf&&(t=Hf)}};Gt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Gt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?E0:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Gt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Hf&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Gt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Gt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Hf&&(t=Hf);return t};Gt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?E0:Hf};Gt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&oPt(n)||aPt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function oPt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function aPt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Gt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return uPt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function uPt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Gt.regexp_eatClassControlLetter=function(e){var t=e.current();return Sj(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Gt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Gt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Sj(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Sj(e){return e>=48&&e<=57}Gt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;MOe(n=e.current());)e.lastIntValue=16*e.lastIntValue+LOe(n),e.advance();return e.pos!==t};function MOe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function LOe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Gt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Gt.regexp_eatOctalDigit=function(e){var t=e.current();return FOe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function FOe(e){return e>=48&&e<=55}Gt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!MOe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+LOe(i),e.advance()}return!0};var cte=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new wj(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Sr=Ho.prototype;Sr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new cte(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Sr.getToken=function(){return this.next(),new cte(this)};typeof Symbol<"u"&&(Sr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===te.eof,value:t}}}});Sr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(te.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Sr.readToken=function(e){return x0(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Sr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Sr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=aOe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Sr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!HC(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Sr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&uOe.test(String.fromCharCode(e)))++this.pos;else break e}}};Sr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Sr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(te.ellipsis)):(++this.pos,this.finishToken(te.dot))};Sr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(te.assign,2):this.finishOp(te.slash,1)};Sr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?te.star:te.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=te.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(te.assign,n+1):this.finishOp(r,n)};Sr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(te.assign,3)}return this.finishOp(e===124?te.logicalOR:te.logicalAND,2)}return t===61?this.finishOp(te.assign,2):this.finishOp(e===124?te.bitwiseOR:te.bitwiseAND,1)};Sr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(te.assign,2):this.finishOp(te.bitwiseXOR,1)};Sr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||bd.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(te.incDec,2):t===61?this.finishOp(te.assign,2):this.finishOp(te.plusMin,1)};Sr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(te.assign,n+1):this.finishOp(te.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(te.relational,n))};Sr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(te.arrow)):this.finishOp(e===61?te.eq:te.prefix,1)};Sr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(te.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(te.assign,3)}return this.finishOp(te.coalesce,2)}}return this.finishOp(te.question,1)};Sr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),x0(t,!0)||t===92))return this.finishToken(te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+e1(t)+"'")};Sr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(te.parenL);case 41:return++this.pos,this.finishToken(te.parenR);case 59:return++this.pos,this.finishToken(te.semi);case 44:return++this.pos,this.finishToken(te.comma);case 91:return++this.pos,this.finishToken(te.bracketL);case 93:return++this.pos,this.finishToken(te.bracketR);case 123:return++this.pos,this.finishToken(te.braceL);case 125:return++this.pos,this.finishToken(te.braceR);case 58:return++this.pos,this.finishToken(te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(te.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+e1(e)+"'")};Sr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Sr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(bd.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Nm(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(te.regexp,{pattern:i,flags:o,value:u})};Sr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function lPt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function jOe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Sr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=jOe(this.input.slice(t,this.pos)),++this.pos):x0(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,n)};Sr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=jOe(this.input.slice(t,this.pos));return++this.pos,x0(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),x0(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=lPt(this.input.slice(t,this.pos),n);return this.finishToken(te.num,s)};Sr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Sr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(HC(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(te.string,t)};var BOe={};Sr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===BOe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Sr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw BOe;this.raise(e,t)};Sr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===te.template||this.type===te.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(te.dollarBraceL)):(++this.pos,this.finishToken(te.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(te.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(HC(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Sr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Sr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return e1(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return HC(t)?"":String.fromCharCode(t)}};Sr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Sr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(CT(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?x0:CT)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=e1(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Sr.readWord=function(){var e=this.readWord1(),t=te.name;return this.keywords.test(e)&&(t=rte[e]),this.finishToken(t,e)};var cPt="8.11.3";Ho.acorn={Parser:Ho,version:cPt,defaultOptions:zW,Position:MR,SourceLocation:wj,getLineInfo:cOe,Node:Ej,TokenType:Hr,tokTypes:te,keywordTypes:rte,TokContext:Bd,tokContexts:bs,isIdentifierChar:CT,isIdentifierStart:x0,Token:cte,isNewLine:HC,lineBreak:bd,lineBreakG:$Nt,nonASCIIwhitespace:uOe};function fPt(e,t){return Ho.parse(e,t)}const fte={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},dPt={ecmaVersion:11},Wge="$",hPt="d",pPt="d1",mPt="d2",Ia=e=>(t,n)=>n.error(t,e+" not allowed"),gPt=Ia("Aggregate function"),yPt=Ia("Window function"),vPt="Invalid argument",dte="Invalid column reference",bPt=dte+" (must be input to an aggregate function)",UOe="Invalid function call",_Pt="Invalid member expression",wPt="Invalid operator parameter",xPt="Invalid param reference",EPt="Invalid variable reference",SPt="Variable not accessible in operator call",TPt="Unsupported variable declaration",CPt="Unsupported destructuring pattern",zOe="Table expressions do not support closures",VOe="Use aq.escape(fn) to use a function as-is (including closures)",APt="use table.params({ name: value }) to define dynamic parameters",IPt="use aq.addFunction(name, fn) to add new op functions",kPt=`
Note: ${zOe}. ${VOe}, or ${APt}.`,HOe=`
Note: ${zOe}. ${VOe}, or ${IPt}.`,RPt=`The ${HNe} method is not valid in multi-table expressions.`;function NPt(e,t){const n=PPt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,TNt(r)?(OPt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=pPt),e.scope.add(e.tuple2=mPt),e.scope.add(e.$param=Wge)):(e.scope.add(e.tuple=hPt),e.scope.add(e.$param=Wge)),Fr(r,e,hte),e.root}function PPt(e){try{const t=e.field?DPt(e):Qr(e)?um(e):e;return fPt(`expr=(${t})`,dPt).body[0].expression.right}catch{Qn(`Expression parse error: ${e+""}`)}}function DPt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const hte={FunctionDeclaration:Ia("Function definitions"),ForStatement:Ia("For loops"),ForOfStatement:Ia("For-of loops"),ForInStatement:Ia("For-in loops"),WhileStatement:Ia("While loops"),DoWhileStatement:Ia("Do-while loops"),AwaitExpression:Ia("Await expressions"),ArrowFunctionExpression:Ia("Function definitions"),AssignmentExpression:Ia("Assignments"),FunctionExpression:Ia("Function definitions"),NewExpression:Ia('Use of "new"'),UpdateExpression:Ia("Update expressions"),VariableDeclarator(e,t){WW(e.id,t)},Identifier(e,t,n){GOe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,EPt,kPt)},CallExpression(e,t){const n=qOe(e.callee),r=UNe(n)||zNe(n);if(r){if((t.join||t.aggregate===!1)&&nee(n)&&gPt(e,t),(t.join||t.window===!1)&&ree(n)&&yPt(e,t),t.$op=1,t.ast)qW(e,n,t),e.arguments.forEach(i=>Fr(i,t,HW));else{const i=t.op($Pt(t,r,n,e.arguments));Object.assign(e,{type:MNe,name:i.id})}return t.$op=0,!1}else BNe(n)?qW(e,n,t):t.error(e,UOe,HOe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Mo(Ev,r))return;const{name:s}=r;if(WOe(e)&&Mo(Ev,i)&&Ih(fte,i.name)){XOe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Gge(e,o,t,YOe,n);if(s===t.$param)return Gge(e,o,t,LPt);t.paramsRef.has(s)?FR(e,t.paramsRef.get(s)):t.columnRef.has(s)?KOe(r,s,t,e):Ih(t.params,s)&&FR(r,s)}};function Gge(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Mo(jC,s))a=s.value;else try{Fr(s,n,hte,e),a=n.param(s)}catch{n.error(e,_Pt)}return r(e,a,t,n,i),!1}const HW={...hte,VariableDeclarator:Ia("Variable declaration in operator call"),Identifier(e,t,n){GOe(e,t,n)&&t.error(e,SPt)},CallExpression(e,t){const n=qOe(e.callee);BNe(n)?qW(e,n,t):t.error(e,UOe,HOe)}};function OPt(e,t){e.generator&&Ia("Generator functions")(e,t),e.async&&Ia("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(v2(t,n[0],"tuple1",i(1)),r>1&&v2(t,n[1],"tuple2",i(2)),r>2&&v2(t,n[2],"$param",s)):(v2(t,n[0],"tuple",i(0)),r>1&&v2(t,n[1],"$param",s))),t.root=e.body}function v2(e,t,n,r){Mo(Ev,t)?(e.scope.add(t.name),e[n]=t.name):Mo(ONe,t)&&t.properties.forEach(i=>{const s=Mo(Ev,i.key)?i.key.name:Mo(jC,i.key)?i.key.value:e.error(i,vPt);Mo(Ev,i.value)||e.error(i.value,CPt),r(i.value.name,s)})}function $Pt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Fr(u,e,HW),i.push(e.field(u))):l<a?(Fr(u,e,HW),s.push(e.param(u))):e.error(u,wPt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function qOe(e){return Mo(Ev,e)?e.name:Mo(DNe,e)?WOe(e)?MPt(e.property.name):e.property.name:null}function WOe(e){return Mo(Ev,e.object)&&e.object.name==="Math"}function MPt(e){return e==="max"?"greatest":e==="min"?"least":e}function GOe(e,t,n){const{name:r}=e;if(!(Mo(DNe,n)&&n.property===e)){if(!(Mo($Ne,n)&&n.key===e))if(t.paramsRef.has(r))FR(e,t.paramsRef.get(r));else if(t.columnRef.has(r))KOe(e,r,t,n);else if(Ih(t.params,r))FR(e,r);else if(Ih(fte,r))XOe(e,r);else return!0}}function YOe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,dte),r.aggronly&&!r.$op&&r.error(e,bPt),VNe(e,t,n,o,i)}function KOe(e,t,n,r){const[i,s]=n.columnRef.get(t);YOe(e,i,s,n,r)}function LPt(e,t,n,r){r.params&&!Ih(r.params,t)&&r.error(e,xPt),FR(e,t)}function FR(e,t){e.type=C2t,e.name=t}function XOe(e,t){e.type=E2t,e.name=t,e.raw=fte[t]}function qW(e,t,n){if(t===HNe){const r=n.table;r||n.error(e,RPt),qNe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=fl(s)?r.columnName(s):s;return r.column(o)||n.error(i,dte),o}):r.columnNames())}else e.callee={type:T2t,name:t}}function WW(e,t){Mo(Ev,e)?t.scope.add(e.name):Mo(b2t,e)?e.elements.forEach(n=>WW(n,t)):Mo(ONe,e)?e.properties.forEach(n=>WW(n.value,t)):t.error(e.id,TPt)}const FPt={[cP]:1,[MNe]:1};function dc(e,t={}){const n=t.generate||h6,r=t.compiler||iee,i=BPt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=jPt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Mo(jC,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?SNt(g):f(n(g),i));u.push(y),FPt[g.type]&&y!==g&&Tu(y)&&(y.field=g.name)},error(m,g,y=""){const b=m.start-6,w=m.end-6,E=String(d.spec).slice(b,w);Qn(`${g}: "${E}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of aj(e))d.value(m+"",g.escape?INt(d,g,i):NPt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function jPt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function BPt(e){return(e.table?uz(e.table):e.join?{...uz(e.join[1]),...uz(e.join[0])}:{})||{}}function uz(e){return e&&as(e.params)?e.params():{}}const QOe="Expr",Ud="ExprList",JOe="ExprNumber",pI="ExprObject",WE="JoinKeys",M6="JoinValues",Df="Options",pte="OrderKeys",Ty="SelectionList",Zb="TableRef",GE="TableRefList",UPt="Descending",zPt="Query",VPt="Selection",HPt="Verb",qPt="Window";function Tj(e,t){return e&&e.expr?new Yge({...e,...t}):new Yge(t,e)}class Yge{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...as(this.expr)?{func:!0}:{}}}}function WPt(e){return Tj(e,{desc:!0})}function iw(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return Tj(e,t?{expr:t,...r}:r)}function GPt(e,t,n){return Tj(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function YPt(e){const t=n=>n;return t.toString=()=>e,t}function Kge(e,t){return t=t&&as(t.query)?t.query():t,t&&as(t.evaluate)?t.evaluate(null,e):e(t)}function ZOe(e){return Tu(e)&&(Qr(e.all)||Qr(e.matches)||Qr(e.not)||Qr(e.range))}function jR(e){return e&&as(e.toObject)?e.toObject():as(e)?{expr:String(e),func:!0}:Qr(e)?e.map(jR):Tu(e)?bj(e,t=>jR(t)):e}function mte(e){return Qr(e)?e.map(mte):Tu(e)?Qr(e.verbs)?yte.from(e):Qr(e.all)?TT():Qr(e.range)?bNt(...e.range):Qr(e.match)?_Nt(RegExp(...e.match)):Qr(e.not)?rOe(e.not.map(jR)):KPt(e):e}function KPt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=iw(n):e.func===!0&&(t=n=YPt(n)),Tu(e.window)){const{frame:r,peers:i}=e.window;t=n=GPt(n,r,i)}e.desc===!0&&(t=WPt(n))}return e===t?bj(e,r=>mte(r)):t}function XPt(e){return Qr(e)?e.map(QPt):e}function QPt(e){const t=[];return lc(e).forEach(n=>{fl(n)?t.push(n):Ha(n)?t.push(iw(n,null)):Tu(n)&&n.expr||as(n)?t.push(n):Qn(`Invalid key value: ${n+""}`)}),t}function JPt(e){return Qr(e)?e.map(ZPt):e}function ZPt(e,t){return t<2?lc(e):e}function eDt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Tu(r)&&!as(r))for(const i in r)t.push(r[i]);else n=fl(r)?r:Ha(r)?iw(n):as(r)?n:Qn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const tDt={[QOe]:r3e,[Ud]:AT,[JOe]:aDt,[pI]:t1,[WE]:uDt,[M6]:lDt,[pte]:AT,[Ty]:sDt};function nDt(e,t,n){return t===Zb?Xge(e):t===GE?e.map(Xge):e3e(jR(e),t,n)}function e3e(e,t,n){return t===Df?e&&rDt(e,n):tDt[t](e)}function rDt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?e3e(i,t[r]):i}return n}function iDt(e,t){return dc({expr:e},{...t,ast:!0}).exprs[0]}function gte(e){return{type:cP,name:e}}function t3e(e){return{type:cP,index:e}}function t1(e,t){if(Ha(e))return iDt(e,t);if(e.expr){let n;if(e.field===!0?n=gte(e.expr):e.func===!0&&(n=t1(e.expr,t)),n)return e.desc&&(n={type:UPt,expr:n}),e.window&&(n={type:qPt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...t1(e[n],t),as:n}))}function n3e(e){const t=VPt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:AT(e.not)}:e.range?{type:t,operator:"range",arguments:AT(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Qn("Invalid input")}function sDt(e){return lc(e).map(oDt).flat()}function oDt(e){return ZOe(e)?n3e(e):fl(e)?t3e(e):Ha(e)?gte(e):Tu(e)?Object.keys(e).map(t=>({type:cP,name:t,as:e[t]})):Qn("Invalid input")}function r3e(e){return ZOe(e)?n3e(e):fl(e)?t3e(e):Ha(e)?gte(e):Tu(e)?t1(e):Qn("Invalid input")}function AT(e){return lc(e).map(r3e).flat()}function aDt(e){return fl(e)?e:t1(e)}function uDt(e){return Qr(e)?e.map(AT):t1(e,{join:!0})}function lDt(e){return Qr(e)?e.map((t,n)=>n<2?AT(t):t1(t,{join:!0})):t1(e,{join:!0})}function Xge(e){return e&&as(e.toAST)?e.toAST():e}class i3e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===WE?XPt(a):o===M6?JPt(a):o===pte?eDt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=GW[t.verb],r=(n.schema||[]).map(({name:i})=>mte(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Zb?Kge(n,o):s===GE?o.map(a=>Kge(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=jR(this[n])}),t}toAST(){const t={type:HPt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=nDt(this[n],r,i)}),t}}function Ii(e,t){return Object.assign((...n)=>new i3e(e,t,n),{schema:t})}const GW={count:Ii("count",[{name:"options",type:Df}]),derive:Ii("derive",[{name:"values",type:pI},{name:"options",type:Df,props:{before:Ty,after:Ty}}]),filter:Ii("filter",[{name:"criteria",type:pI}]),groupby:Ii("groupby",[{name:"keys",type:Ud}]),orderby:Ii("orderby",[{name:"keys",type:pte}]),relocate:Ii("relocate",[{name:"columns",type:Ty},{name:"options",type:Df,props:{before:Ty,after:Ty}}]),rename:Ii("rename",[{name:"columns",type:Ty}]),rollup:Ii("rollup",[{name:"values",type:pI}]),sample:Ii("sample",[{name:"size",type:JOe},{name:"options",type:Df,props:{weight:QOe}}]),select:Ii("select",[{name:"columns",type:Ty}]),ungroup:Ii("ungroup"),unorder:Ii("unorder"),reify:Ii("reify"),dedupe:Ii("dedupe",[{name:"keys",type:Ud,default:[]}]),impute:Ii("impute",[{name:"values",type:pI},{name:"options",type:Df,props:{expand:Ud}}]),fold:Ii("fold",[{name:"values",type:Ud},{name:"options",type:Df}]),pivot:Ii("pivot",[{name:"keys",type:Ud},{name:"values",type:Ud},{name:"options",type:Df}]),spread:Ii("spread",[{name:"values",type:Ud},{name:"options",type:Df}]),unroll:Ii("unroll",[{name:"values",type:Ud},{name:"options",type:Df,props:{drop:Ud}}]),lookup:Ii("lookup",[{name:"table",type:Zb},{name:"on",type:WE},{name:"values",type:Ud}]),join:Ii("join",[{name:"table",type:Zb},{name:"on",type:WE},{name:"values",type:M6},{name:"options",type:Df}]),cross:Ii("cross",[{name:"table",type:Zb},{name:"values",type:M6},{name:"options",type:Df}]),semijoin:Ii("semijoin",[{name:"table",type:Zb},{name:"on",type:WE}]),antijoin:Ii("antijoin",[{name:"table",type:Zb},{name:"on",type:WE}]),concat:Ii("concat",[{name:"tables",type:GE}]),union:Ii("union",[{name:"tables",type:GE}]),intersect:Ii("intersect",[{name:"tables",type:GE}]),except:Ii("except",[{name:"tables",type:GE}])};let yte=class s3e extends _Ne{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new s3e(t.map(i3e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Qge(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Qge(this,"toAST",{type:zPt})}};function Qge(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function cDt(e,t){return new yte(e._verbs.concat(t),e._params,e._table)}for(const e in GW){const t=GW[e];yte.prototype["__"+e]=function(n,...r){return cDt(n,t(...r))}}function GC(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function fDt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function vte(e,t){const n=pf();return t.forEach((r,i)=>{const s=Ha(r)?r:i;if(s){const o=e.column(i)||Qn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function o3e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Qn("relocate requires a before or after option."),i&&s&&Qn("relocate accepts only one of the before or after options."),t=w0(e,t);const o=[...w0(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),vte(e,u)}function bP(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function bte(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dDt(e,t=0,n=e.length){let r=n?e[t++]:qr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function hDt(e,t=0,n=e.length){let r=n?e[t++]:qr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function p3(e){return kR(e)?e:+e}function pDt(e,t){const n=e.length;if(!n)return qr;if((t=+t)<=0||n<2)return p3(e[0]);if(t>=1)return p3(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=p3(e[i]);return kR(s)?s:s+(p3(e[i+1])-s)*(r-i)}class mDt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:dDt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:hDt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(bte)),pDt(this._sorted,t)}}const L6=(e,t,n)=>GC(t,"{"+bP(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function gDt(e,t){const{ops:n,output:r}=yDt(e,t),i=e[0].fields,s=i.length,o=s===0?_te:s===1?vDt:s===2?bDt:Qn("Unsupported field count: "+s);return new o(i,n,r,t)}function yDt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=UNe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class _te extends xNt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new mDt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class vDt extends _te{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=L6(n,s,"add"),this._rem=L6(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,fh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,fh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class bDt extends _te{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=L6(n,s,"add"),this._rem=L6(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,fh(i)&&fh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,fh(i)&&fh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function ex(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=YC(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function YC(e,t,n){if(!t.length)return n;const r=a3e(t),i=e.groups(),s=i?i.size:1;return n=n||sj(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=l3e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=u3e(e,o);o.write(a,n,0)}),n}function a3e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(gDt(r[i],t));return n}function u3e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function l3e(e,t,n){const{keys:r,size:i}=n,s=sj(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function c3e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function f3e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Jge=f3e(bte);function _Dt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?GC(["w","r","k"],"{"+bP(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,b){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=b,a=i?i.map(w=>w.init()):null;for(let w=0;w<f;++w)r[w].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,b=p.size,w=p.i0,E=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(b,m+Math.abs(y)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Jge.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=Jge.right(o,o[p.i1-1])));for(let S=0;S<d;++S){const T=i[S],C=a[S];for(let I=w;I<p.i0;++I)T.rem(C,s[I],e);for(let I=E;I<p.i1;++I)T.add(C,s[I],e);T.write(C,u,l)}return h(p,u,l),u}};return p}const wDt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),xDt=e=>!!e.peers;function EDt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=zNe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function SDt(e,t,n,r={},i){const s=e.data(),o=TDt(i,s),a=o.length,u=GC(["r","d","op"],"{"+bP(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=CDt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function TDt(e,t){const n={};return e.forEach(r=>{const i=wDt(r),s=xDt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});nee(r.name)?a.push(r):u.push(EDt(r))}),Object.values(n).map(r=>_Dt(t,r.frame,r.peers,r.winOps,a3e(r.aggOps,r.frame[0]!=null?-1:1)))}function CDt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function ADt(e){return ree(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function wte(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=pf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=IDt(r),c=e.isGrouped()?e.groups().size:1,f=YC(e,u,sj(r.length,()=>Array(c)));return l.length?SDt(e,a,n,f,l):kDt(e,a,n,f),e.create(o)}function IDt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(ADt(s)?n:t).push(s)}return[t,n]}function kDt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function RDt(e,t,n={}){const r=wte(e,dc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:o3e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function NDt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const m3=2147483648,PDt=4294967295;class d3e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&m3>>>t}set(t){this._bits[t>>5]|=m3>>>t}clear(t){this._bits[t>>5]&=~(m3>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&PDt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=m3>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function DDt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new d3e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function ODt(e,t){const n=dc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=wte(e,n,{drop:!0}).column("p");r=s=>i[s]}return DDt(e,r)}function h3e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=ex(e,r,n),l=pf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(E=>{if(!a.has(E)){const S=l.add(E,[]);c.has(E)||(f.push(e.column(E)),d.push(S))}}),t.forEach(E=>{a.has(E)||(l.has(E)||l.add(E,[]),h.push(l.data[E]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,b=(E,S)=>{for(let T=0;T<g;++T)d[T].length=m+S,d[T].fill(f[T].get(E),m,m+S)},w=p?(E,S)=>{for(let T=0;T<S;++T)p[E+T]=T}:()=>{};if(y===1){const E=u[0],S=h[0];e.scan((T,C)=>{const I=lc(E(T,C)),R=Math.min(I.length,s);b(T,R);for(let P=0;P<R;++P)S[m+P]=I[P];w(m,R),m+=R})}else e.scan((E,S)=>{let T=0;const C=u.map(I=>{const R=lc(I(E,S));return T=Math.min(Math.max(T,R.length),s),R});b(E,T);for(let I=0;I<y;++I){const R=h[I],P=C[I];for(let D=0;D<T;++D)R[m+D]=P[D]}w(m,T),m+=T});return e.create(l.new())}function $Dt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=ex(e,r,n);return h3e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Rh(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=fl(o)?t.columnName(o):o,Ha(o)?i.set(o,iw(o)):as(o)?w0(t,o).forEach(s):Tu(o)?tOe(i,o):Qn(`Invalid ${e} value: ${o+""}`)};return lc(n).forEach(s),r.preparse&&r.preparse(i),dc(i,{table:t,...r})}function MDt(e,t,n){return $Dt(e,Rh("fold",e,t),n)}function Zge(e,t,n,r){const i=n&&n.length;return LDt(i?FDt(e,n,r):e,t,i)}function LDt(e,{names:t,exprs:n,ops:r},i){const s=ex(e,r,n),o=i?null:pf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=fh(p)?p:d(h)})}),i?e:e.create(o)}function FDt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=p6(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=pf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(b=>y.push(g.get(b)))});const d=p6(o.map((p,m)=>g=>g[m])),h=GC("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,b)=>y*b.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),e0e(r,n,(y,b)=>{a.has(d(y))||(h(y),g[p++]=b[0])}),c.groupby({...r,keys:g})}else e0e(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function e0e(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function xte(e,{names:t,exprs:n,ops:r}){const i=pf(),s=e.groups();return s&&c3e(i,s),jDt(t,n,s,YC(e,r),i),e.create(i.new())}function jDt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function BDt(e,t,n={}){if(t=dc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Qn(`Invalid impute column ${um(r)}`)),n.expand){const r={preparse:UDt,aggronly:!0},i=Rh("impute",e,n.expand,r),s=xte(e.ungroup(),i);return Zge(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Zge(e,t)}function UDt(e){e.forEach((t,n)=>t.field?e.set(n,kNe(t+"")):0)}function zDt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function p3e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function VDt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function HDt(e,t){const n=["i","a","j","b"];return GC(n,"{"+bP(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function qDt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=pf(),g=Array(p),y=Array(p);for(let E=0;E<r.length;++E)g[E]=m.add(r[E],[]),y[E]=i[E];const b=HDt(g,y);if((Qr(n)?GDt:WDt)(b,n,o,c,a,f,l,h,u,d),s.left)for(let E=0;E<u;++E)l[E]||b(a[E],o,-1,c);if(s.right)for(let E=0;E<d;++E)h[E]||b(-1,o,f[E],c);return e.create(m.new())}function WDt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function GDt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,b,w=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,b=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,b=s,w=(T,C,I,R)=>e(I,R,T,C));const E=VDt(b,m,g),S=p.length;for(let T=0;T<S;++T){const C=p[T],I=E.get(d(C,f));if(I){const R=I.length;for(let P=0;P<R;++P){const D=I[P];w(C,f,b[D],m),y[D]=1}h[T]=1}}}function F6(e,t,n){const r=new Map;lc(n).forEach((s,o)=>{s=fl(s)?t.columnName(s):s,Ha(s)?r.set(o,iw(s)):as(s)||Tu(s)&&s.expr?r.set(o,s):Qn(`Invalid ${e} key value: ${s+""}`)});const i=dc(r,{table:t,aggregate:!1,window:!1});return p6(i.exprs,!0)}function YDt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function Ete(e,t,n){if(n)Ha(n)?n=[n,n]:Qr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=YDt(e.columnNames(),t.columnNames());r.length||Qn("Natural join requires shared column names."),n=[r,r]}return n}function m3e(e,t,n,r){return n.length!==r.length&&Qn("Mismatched number of join keys"),[F6("join",e,n),F6("join",t,r)]}const KDt={aggregate:!1,window:!1},XDt={...KDt,index:1};function t0e(e,t,n,r,i={}){n=Ete(e,t,n);const s={join:[e,t]};let o;if(Qr(n)){const[a,u]=n.map(lc);o=m3e(e,t,a,u),r||(r=QDt(e,a,u,i))}else o=dc({on:n},s).exprs[0],r||(r=[TT(),TT()]);return qDt(e,t,o,JDt(e,t,r,s,i&&i.suffix),i)}function QDt(e,t,n,r){const i=[];t.forEach((o,a)=>Ha(o)&&o===n[a]?i.push(o):0);const s=rOe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${um(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,TT()]:[TT(),s]}function JDt(e,t,n,r,i=[]){if(Qr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Rh("join",e,n[0],r)),u--&&(o=Rh("join",t,n[1],XDt)),u--&&(a=dc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&n0e(s.names,l,i[0]||"_1"),i[1]!==""&&n0e(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return dc(n,r)}function n0e(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function ZDt(e,t,n,r={}){const i=new d3e(e.totalRows());return(Qr(n)?eOt:tOt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function eOt(e,t,n,[r,i]){const s=p3e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function tOt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function r0e(e,t,n,r){n=Ete(e,t,n);const i=Qr(n)?m3e(e,t,...n.map(lc)):dc({on:n},{join:[e,t]}).exprs[0];return ZDt(e,t,i,r)}function nOt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=pf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(qr)));const l=p3e(t,r),c=GC(["lr","rr","data"],"{"+bP(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),ex(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function rOt(e,t,n,r){return n=Ete(e,t,n),nOt(e,t,[F6("lookup",e,n[0]),F6("lookup",t,n[1])],Rh("lookup",t,r))}const YW=(e,t)=>e??t;function iOt(e,t,n,r={}){const{keys:i,keyColumn:s}=sOt(e,t,r),o=YW(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>YC(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(oOt(n,a,e.groups(),u))}function sOt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=YW(n.sort,!0),s=YW(n.keySeparator,"_"),o=ex(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=YC(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function oOt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=pf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&c3e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function aOt(e,t,n,r){return iOt(e,Rh("fold",e,t),Rh("fold",e,n,{preparse:uOt,aggronly:!0}),r)}function uOt(e){e.forEach((t,n)=>t.field?e.set(n,CNe(t+"")):0)}function lOt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),vte(e,w0(e,t,n))}function i0e(e,t){return xte(e,dc(t,{table:e,aggronly:!0,window:!1}))}function cOt(e,t,n,r){return(t?r?dOt:fOt:r?pOt:hOt)(e.length,e,n,r)}function fOt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*FC()|0];return t}function dOt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=f3e(bte).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*FC())];return t}function hOt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*FC();s<e&&(t[s|0]=n[i])}return t}function pOt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(FC())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function mOt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=FC()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function gOt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):cOt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&mOt(u),e.reify(u)}function yOt(e,t,n={}){return gOt(e,vOt(e,t),bOt(e,n.weight),n)}const g3e=e=>t=>e.get(t)||0;function vOt(e,t){return fl(t)?()=>t:g3e(xte(e,dc({size:t},{table:e,window:!1})).column("size"))}function bOt(e,t){return t==null?null:(t=fl(t)?e.columnName(t):t,g3e(Ha(t)?e.column(t):wte(e,dc({w:t},{table:e}),{drop:!0}).column("w")))}function _Ot(e,t){return vte(e,w0(e,t))}function wOt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=ex(e,r,n),l=pf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=xOt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function xOt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=lc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(qr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function EOt(e,t,n){return wOt(e,Rh("spread",e,t),n)}function SOt(e,t){return e.concat(t).dedupe()}function TOt(e,t,n){return h3e(e,Rh("unroll",e,t),n&&n.drop?{...n,drop:Rh("unroll",e,n.drop).names}:n)}function COt(e,t){return e.create({groups:AOt(e,t)})}function AOt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=ex(e,r,n);const o=p6(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function IOt(e,t){return COt(e,Rh("groupby",e,t))}function kOt(e,t){return e.create({order:t})}const ROt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function NOt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=dc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([h6(p,{index:"a",op:o}),h6(p,{index:"b",op:a})])},window:!1}),l=YC(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=ROt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function POt(e,t){return kOt(e,DOt(e,t))}function DOt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Tu(o)&&!as(o))for(const a in o)i(o[a]);else i(fl(o)?iw(s,e.columnName(o)):Ha(o)?iw(s):as(o)?s:Qn(`Invalid orderby field: ${s+""}`))}),NOt(e,r)}function OOt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=pf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>qr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function $Ot(e,t){const n=pf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?l3e(e,t,r):[u3e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,b=0;y<a;++y)m.fill(g(o[y],d),b,b+=u[y+1])})}return e.create(n.new())}function MOt(e){return e.isGrouped()?e.create({groups:null}):e}function LOt(e){return e.isOrdered()?e.create({order:null}):e}const FOt={__antijoin:(e,t,n)=>r0e(e,t,n,{anti:!0}),__count:(e,t={})=>i0e(e,{[t.as||"count"]:ANe()}),__cross:(e,t,n,r)=>t0e(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:OOt,__dedupe:fDt,__derive:RDt,__except:NDt,__filter:ODt,__fold:MDt,__impute:BDt,__intersect:zDt,__join:t0e,__lookup:rOt,__pivot:aOt,__relocate:o3e,__rename:lOt,__rollup:i0e,__sample:yOt,__select:_Ot,__semijoin:r0e,__spread:EOt,__union:SOt,__unroll:TOt,__groupby:IOt,__orderby:POt,__ungroup:MOt,__unorder:LOt,__reduce:$Ot};Object.assign(Ag.prototype,FOt);function y3e(e,t){return Ag.from(e,t)}function xS(e){return Tj(e,{escape:!0,toString(){Qn("Escaped values can not be serialized.")}})}Ag.prototype;function sh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n1(e){return!!e&&!!e[ps]}function S0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===GOt}(e)||Array.isArray(e)||!!e[f0e]||!!(!((t=e.constructor)===null||t===void 0)&&t[f0e])||Ste(e)||Tte(e))}function sw(e,t,n){n===void 0&&(n=!1),KC(e)===0?(n?Object.keys:SS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function KC(e){var t=e[ps];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ste(e)?2:Tte(e)?3:0}function ES(e,t){return KC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function jOt(e,t){return KC(e)===2?e.get(t):e[t]}function v3e(e,t,n){var r=KC(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function b3e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ste(e){return qOt&&e instanceof Map}function Tte(e){return WOt&&e instanceof Set}function Hb(e){return e.o||e.t}function Cte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=w3e(e);delete t[ps];for(var n=SS(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ate(e,t){return t===void 0&&(t=!1),Ite(e)||n1(e)||!S0(e)||(KC(e)>1&&(e.set=e.add=e.clear=e.delete=BOt),Object.freeze(e),t&&sw(e,function(n,r){return Ate(r,!0)},!0)),e}function BOt(){sh(2)}function Ite(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Wp(e){var t=JW[e];return t||sh(18,e),t}function UOt(e,t){JW[e]||(JW[e]=t)}function KW(){return BR}function lz(e,t){t&&(Wp("Patches"),e.u=[],e.s=[],e.v=t)}function j6(e){XW(e),e.p.forEach(zOt),e.p=null}function XW(e){e===BR&&(BR=e.l)}function s0e(e){return BR={p:[],l:BR,h:e,m:!0,_:0}}function zOt(e){var t=e[ps];t.i===0||t.i===1?t.j():t.g=!0}function cz(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Wp("ES5").S(t,e,r),r?(n[ps].P&&(j6(t),sh(4)),S0(e)&&(e=B6(t,e),t.l||U6(t,e)),t.u&&Wp("Patches").M(n[ps].t,e,t.u,t.s)):e=B6(t,n,[]),j6(t),t.u&&t.v(t.u,t.s),e!==_3e?e:void 0}function B6(e,t,n){if(Ite(t))return t;var r=t[ps];if(!r)return sw(t,function(a,u){return o0e(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return U6(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Cte(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),sw(s,function(a,u){return o0e(e,r,i,a,u,n,o)}),U6(e,i,!1),n&&e.u&&Wp("Patches").N(r,n,e.u,e.s)}return r.o}function o0e(e,t,n,r,i,s,o){if(n1(i)){var a=B6(e,i,s&&t&&t.i!==3&&!ES(t.R,r)?s.concat(r):void 0);if(v3e(n,r,a),!n1(a))return;e.m=!1}else o&&n.add(i);if(S0(i)&&!Ite(i)){if(!e.h.D&&e._<1)return;B6(e,i),t&&t.A.l||U6(e,i)}}function U6(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Ate(t,n)}function fz(e,t){var n=e[ps];return(n?Hb(n):e)[t]}function a0e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Vy(e){e.P||(e.P=!0,e.l&&Vy(e.l))}function dz(e){e.o||(e.o=Cte(e.t))}function QW(e,t,n){var r=Ste(t)?Wp("MapSet").F(t,n):Tte(t)?Wp("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:KW(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=UR;o&&(u=[a],l=mI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Wp("ES5").J(t,n);return(n?n.A:KW()).p.push(r),r}function VOt(e){return n1(e)||sh(22,e),function t(n){if(!S0(n))return n;var r,i=n[ps],s=KC(n);if(i){if(!i.P&&(i.i<4||!Wp("ES5").K(i)))return i.t;i.I=!0,r=u0e(n,s),i.I=!1}else r=u0e(n,s);return sw(r,function(o,a){i&&jOt(i.t,o)===a||v3e(r,o,t(a))}),s===3?new Set(r):r}(e)}function u0e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Cte(e)}function HOt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[ps];return UR.get(u,s)},set:function(u){var l=this[ps];UR.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ps];if(!a.P)switch(a.i){case 5:r(a)&&Vy(a);break;case 4:n(a)&&Vy(a)}}}function n(s){for(var o=s.t,a=s.k,u=SS(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==ps){var f=o[c];if(f===void 0&&!ES(o,c))return!0;var d=a[c],h=d&&d[ps];if(h?h.t!==f:!b3e(d,f))return!0}}var p=!!o[ps];return u.length!==SS(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};UOt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=w3e(f);delete p[ps];for(var m=SS(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:KW(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,ps,{value:l,writable:!0}),u},S:function(s,o,a){a?n1(o)&&o[ps].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[ps];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)sw(d,function(w){w!==ps&&(f[w]!==void 0||ES(f,w)?h[w]||u(d[w]):(h[w]=!0,Vy(c)))}),sw(f,function(w){d[w]!==void 0||ES(d,w)||(h[w]=!1,Vy(c))});else if(p===5){if(r(c)&&(Vy(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),b=0;b<y;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var l0e,BR,kte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",qOt=typeof Map<"u",WOt=typeof Set<"u",c0e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",_3e=kte?Symbol.for("immer-nothing"):((l0e={})["immer-nothing"]=!0,l0e),f0e=kte?Symbol.for("immer-draftable"):"__$immer_draftable",ps=kte?Symbol.for("immer-state"):"__$immer_state",GOt=""+Object.prototype.constructor,SS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,w3e=Object.getOwnPropertyDescriptors||function(e){var t={};return SS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},JW={},UR={get:function(e,t){if(t===ps)return e;var n=Hb(e);if(!ES(n,t))return function(i,s,o){var a,u=a0e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!S0(r)?r:r===fz(e.t,t)?(dz(e),e.o[t]=QW(e.A.h,r,e)):r},has:function(e,t){return t in Hb(e)},ownKeys:function(e){return Reflect.ownKeys(Hb(e))},set:function(e,t,n){var r=a0e(Hb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=fz(Hb(e),t),s=i==null?void 0:i[ps];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(b3e(n,i)&&(n!==void 0||ES(e.t,t)))return!0;dz(e),Vy(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return fz(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,dz(e),Vy(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Hb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){sh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){sh(12)}},mI={};sw(UR,function(e,t){mI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),mI.deleteProperty=function(e,t){return mI.set.call(this,e,t,void 0)},mI.set=function(e,t,n){return UR.set.call(this,e[0],t,n,e[0])};var YOt=function(){function e(n){var r=this;this.O=c0e,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var S;return(S=s).call.apply(S,[g,E].concat(b))})}}var l;if(typeof s!="function"&&sh(6),o!==void 0&&typeof o!="function"&&sh(7),S0(i)){var c=s0e(r),f=QW(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?j6(c):XW(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return lz(c,o),cz(m,c)},function(m){throw j6(c),m}):(lz(c,o),cz(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===_3e&&(l=void 0),r.D&&Ate(l,!0),o){var h=[],p=[];Wp("Patches").M(i,l,h,p),o(h,p)}return l}sh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){S0(n)||sh(8),n1(n)&&(n=VOt(n));var r=s0e(this),i=QW(this,n,void 0);return i[ps].C=!0,XW(r),i},t.finishDraft=function(n,r){var i=n&&n[ps],s=i.A;return lz(s,r),cz(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!c0e&&sh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Wp("Patches").$;return n1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),tf=new YOt,x3e=tf.produce;tf.produceWithPatches.bind(tf);tf.setAutoFreeze.bind(tf);tf.setUseProxies.bind(tf);tf.applyPatches.bind(tf);tf.createDraft.bind(tf);tf.finishDraft.bind(tf);function zR(e){"@babel/helpers - typeof";return zR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zR(e)}function KOt(e,t){if(zR(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XOt(e){var t=KOt(e,"string");return zR(t)=="symbol"?t:t+""}function QOt(e,t,n){return(t=XOt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d0e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function h0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d0e(Object(n),!0).forEach(function(r){QOt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d0e(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function au(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var p0e=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),hz=function(){return Math.random().toString(36).substring(7).split("").join(".")},z6={INIT:"@@redux/INIT"+hz(),REPLACE:"@@redux/REPLACE"+hz(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+hz()}};function JOt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function E3e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(au(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(au(1));return n(E3e)(e,t)}if(typeof e!="function")throw new Error(au(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(au(3));return s}function f(m){if(typeof m!="function")throw new Error(au(4));if(u)throw new Error(au(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(au(6));g=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function d(m){if(!JOt(m))throw new Error(au(7));if(typeof m.type>"u")throw new Error(au(8));if(u)throw new Error(au(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var b=g[y];b()}return m}function h(m){if(typeof m!="function")throw new Error(au(10));i=m,d({type:z6.REPLACE})}function p(){var m,g=f;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(au(11));function w(){b.next&&b.next(c())}w();var E=g(w);return{unsubscribe:E}}},m[p0e]=function(){return this},m}return d({type:z6.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[p0e]=p,r}function ZOt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:z6.INIT});if(typeof r>"u")throw new Error(au(12));if(typeof n(void 0,{type:z6.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(au(13))})}function e3t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{ZOt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(au(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function V6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function t3t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(au(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=V6.apply(void 0,a)(i.dispatch),h0e(h0e({},i),{},{dispatch:s})}}}function S3e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var ZW=S3e();ZW.withExtraArgument=S3e;var T3e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_P=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ow=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},n3t=Object.defineProperty,r3t=Object.defineProperties,i3t=Object.getOwnPropertyDescriptors,m0e=Object.getOwnPropertySymbols,s3t=Object.prototype.hasOwnProperty,o3t=Object.prototype.propertyIsEnumerable,g0e=function(e,t,n){return t in e?n3t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Sv=function(e,t){for(var n in t||(t={}))s3t.call(t,n)&&g0e(e,n,t[n]);if(m0e)for(var r=0,i=m0e(t);r<i.length;r++){var n=i[r];o3t.call(t,n)&&g0e(e,n,t[n])}return e},pz=function(e,t){return r3t(e,i3t(t))},wP=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},a3t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?V6:V6.apply(null,arguments)};function C3e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var u3t=function(e){return e&&typeof e.match=="function"};function Gp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Sv(Sv({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function l3t(e){return C3e(e)&&"type"in e}var c3t=function(e){T3e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,ow([void 0],n[0].concat(this)))):new(t.bind.apply(t,ow([void 0],n.concat(this))))},t}(Array),f3t=function(e){T3e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,ow([void 0],n[0].concat(this)))):new(t.bind.apply(t,ow([void 0],n.concat(this))))},t}(Array);function eG(e){return S0(e)?x3e(e,function(){}):e}function d3t(e){return typeof e=="boolean"}function h3t(){return function(t){return p3t(t)}}function p3t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new c3t;return n&&(d3t(n)?r.push(ZW):r.push(ZW.withExtraArgument(n.extraArgument))),r}var m3t=!0;function g3t(e){var t=h3t(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(C3e(i))h=e3t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=t3t.apply(void 0,p),g=V6;u&&(g=a3t(Sv({trace:!m3t},typeof u=="object"&&u)));var y=new f3t(m),b=y;Array.isArray(d)?b=ow([m],d):typeof d=="function"&&(b=d(y));var w=g.apply(void 0,b);return E3e(h,c,w)}function A3e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function y3t(e){return typeof e=="function"}function v3t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?A3e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(y3t(e))u=function(){return eG(e())};else{var l=eG(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=ow([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(n1(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(S0(p))return x3e(p,function(b){return m(b,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function b3t(e,t){return e+"/"+t}function _3t(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:eG(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=b3t(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Gp(d,p):Gp(d)});function u(){var c=typeof e.extraReducers=="function"?A3e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Sv(Sv({},d),o);return v3t(n,function(b){for(var w in y)b.addCase(w,y[w]);for(var E=0,S=p;E<S.length;E++){var T=S[E];b.addMatcher(T.matcher,T.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var w3t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",I3e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=w3t[Math.random()*64|0];return t},x3t=["name","message","stack","code"],mz=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),y0e=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),E3t=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=x3t;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Gp(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:pz(Sv({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Gp(t+"/pending",function(l,c,f){return{payload:void 0,meta:pz(Sv({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Gp(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||E3t)(l||"Rejected"),meta:pz(Sv({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):I3e(),p=new a,m;function g(b){m=b,p.abort()}var y=function(){return wP(this,null,function(){var b,w,E,S,T,C,I;return _P(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),S=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),T3t(S)?[4,S]:[3,2];case 1:S=R.sent(),R.label=2;case 2:if(S===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(P,D){return p.signal.addEventListener("abort",function(){return D({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(P,D){return new mz(P,D)},fulfillWithValue:function(P,D){return new y0e(P,D)}})).then(function(P){if(P instanceof mz)throw P;return P instanceof y0e?i(P.payload,h,l,P.meta):i(P,h,l)})])];case 3:return E=R.sent(),[3,5];case 4:return C=R.sent(),E=C instanceof mz?o(null,h,l,C.payload,C.meta):o(C,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,I||c(E),[2,E]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(S3t)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function S3t(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function T3t(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var C3t=function(e,t){return u3t(e)?e.match(t):e(t)};function v0e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return C3t(r,n)})}}var Rte=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},tG=function(){},k3e=function(e,t){return t===void 0&&(t=tG),e.catch(t),e},R3e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},TS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},A3t="task",N3e="listener",P3e="completed",Nte="cancelled",I3t="task-"+Nte,k3t="task-"+P3e,D3e=N3e+"-"+Nte,R3t=N3e+"-"+P3e,Cj=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=A3t+" "+Nte+" (reason: "+t+")"}return e}(),CS=function(e){if(e.aborted)throw new Cj(e.reason)};function O3e(e,t){var n=tG;return new Promise(function(r,i){var s=function(){return i(new Cj(e.reason))};if(e.aborted){s();return}n=R3e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=tG})}var N3t=function(e,t){return wP(void 0,null,function(){var n,r;return _P(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof Cj?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},H6=function(e){return function(t){return k3e(O3e(e,t).then(function(n){return CS(e),n}))}},$3e=function(e){var t=H6(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},P3t=Object.assign,b0e={},xP="listenerMiddleware",D3t=function(e,t){var n=function(r){return R3e(e,function(){return TS(r,e.reason)})};return function(r,i){Rte(r,"taskExecutor");var s=new AbortController;n(s);var o=N3t(function(){return wP(void 0,null,function(){var a;return _P(this,function(u){switch(u.label){case 0:return CS(e),CS(s.signal),[4,r({pause:H6(s.signal),delay:$3e(s.signal),signal:s.signal})];case 1:return a=u.sent(),CS(s.signal),[2,a]}})})},function(){return TS(s,k3t)});return i!=null&&i.autoJoin&&t.push(o),{result:H6(e)(o),cancel:function(){TS(s,I3t)}}}},O3t=function(e,t){var n=function(r,i){return wP(void 0,null,function(){var s,o,a,u;return _P(this,function(l){switch(l.label){case 0:CS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,O3e(t,Promise.race(a))];case 2:return u=l.sent(),CS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return k3e(n(r,i))}},M3e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Gp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Rte(s,"options.listener"),{predicate:i,type:t,effect:s}},$3t=function(e){var t=M3e(e),n=t.type,r=t.predicate,i=t.effect,s=I3e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},nG=function(e){e.pending.forEach(function(t){TS(t,D3e)})},M3t=function(e){return function(){e.forEach(nG),e.clear()}},_0e=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},L3t=Gp(xP+"/add"),F3t=Gp(xP+"/removeAll"),j3t=Gp(xP+"/remove"),B3t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,ow([xP+"/error"],e))};function U3t(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?B3t:i;Rte(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&nG(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=$3t(h)),o(p)},l=function(h){var p=M3e(h),m=p.type,g=p.effect,y=p.predicate,b=a(function(w){var E=typeof m=="string"?w.type===m:w.predicate===y;return E&&w.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&nG(b)),!!b},c=function(h,p,m,g){return wP(t,null,function(){var y,b,w,E;return _P(this,function(S){switch(S.label){case 0:y=new AbortController,b=O3t(u,y.signal),w=[],S.label=1;case 1:return S.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,P3t({},m,{getOriginalState:g,condition:function(T,C){return b(T,C).then(Boolean)},take:b,delay:$3e(y.signal),pause:H6(y.signal),extra:r,signal:y.signal,fork:D3t(y.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,C,I){T!==y&&(TS(T,D3e),I.delete(T))})}})))];case 2:return S.sent(),[3,6];case 3:return E=S.sent(),E instanceof Cj||_0e(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return S.sent(),TS(y,R3t),h.pending.delete(y),[7];case 6:return[2]}})})},f=M3t(n),d=function(h){return function(p){return function(m){if(!l3t(m))return p(m);if(L3t.match(m))return u(m.payload);if(F3t.match(m)){f();return}if(j3t.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===b0e)throw new Error(xP+": getOriginalState can only be called synchronously");return g},b;try{if(b=p(m),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),S=0,T=E;S<T.length;S++){var C=T[S],I=!1;try{I=C.predicate(m,w,g)}catch(R){I=!1,_0e(s,R,{raisedBy:"predicate"})}I&&c(C,m,h,y)}}finally{g=b0e}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var w0e;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);HOt();function z3t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let g3;const V3t=new Uint8Array(16);function H3t(){if(!g3&&(g3=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g3))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g3(V3t)}const Ea=[];for(let e=0;e<256;++e)Ea.push((e+256).toString(16).slice(1));function q3t(e,t=0){return(Ea[e[t+0]]+Ea[e[t+1]]+Ea[e[t+2]]+Ea[e[t+3]]+"-"+Ea[e[t+4]]+Ea[e[t+5]]+"-"+Ea[e[t+6]]+Ea[e[t+7]]+"-"+Ea[e[t+8]]+Ea[e[t+9]]+"-"+Ea[e[t+10]]+Ea[e[t+11]]+Ea[e[t+12]]+Ea[e[t+13]]+Ea[e[t+14]]+Ea[e[t+15]]).toLowerCase()}const W3t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x0e={randomUUID:W3t};function E0e(e,t,n){if(x0e.randomUUID&&!t&&!e)return x0e.randomUUID();e=e||{};const r=e.random||(e.rng||H3t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,q3t(r)}class Yp{static get(){let t=E0e();for(;this.ids.has(t);)t=E0e();return this.ids.set(t,!0),t}}Yp.ids=new Map;function Kp(e){return"parent"in e}function G3t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Yp.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Yp.get(),createdOn:Date.now(),val:r}]:[];return{id:Yp.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Y3t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Yp.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Yp.get(),createdOn:Date.now(),val:s}]:[];return{id:Yp.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Bs(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=r$t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function aw(e){return!!e&&!!e[nf]}function r1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===i$t}(e)||Array.isArray(e)||!!e[dk]||!!(!((t=e.constructor)===null||t===void 0)&&t[dk])||Aj(e)||Ij(e))}function IT(e,t,n){n===void 0&&(n=!1),i1(e)===0?(n?Object.keys:Lte)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function i1(e){var t=e[nf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Aj(e)?2:Ij(e)?3:0}function VR(e,t){return i1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function H$(e,t){return i1(e)===2?e.get(t):e[t]}function L3e(e,t,n){var r=i1(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function K3t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Aj(e){return t$t&&e instanceof Map}function Ij(e){return n$t&&e instanceof Set}function qb(e){return e.o||e.t}function Pte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=s$t(e);delete t[nf];for(var n=Lte(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Dte(e,t){return t===void 0&&(t=!1),Ote(e)||aw(e)||!r1(e)||(i1(e)>1&&(e.set=e.add=e.clear=e.delete=X3t),Object.freeze(e),t&&IT(e,function(n,r){return Dte(r,!0)},!0)),e}function X3t(){Bs(2)}function Ote(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Xp(e){var t=oG[e];return t||Bs(18,e),t}function Q3t(e,t){oG[e]||(oG[e]=t)}function S0e(){return{}.NODE_ENV==="production"||kT||Bs(0),kT}function gz(e,t){t&&(Xp("Patches"),e.u=[],e.s=[],e.v=t)}function q6(e){rG(e),e.p.forEach(J3t),e.p=null}function rG(e){e===kT&&(kT=e.l)}function T0e(e){return kT={p:[],l:kT,h:e,m:!0,_:0}}function J3t(e){var t=e[nf];t.i===0||t.i===1?t.j():t.O=!0}function yz(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Xp("ES5").S(t,e,r),r?(n[nf].P&&(q6(t),Bs(4)),r1(e)&&(e=W6(t,e),t.l||G6(t,e)),t.u&&Xp("Patches").M(n[nf].t,e,t.u,t.s)):e=W6(t,n,[]),q6(t),t.u&&t.v(t.u,t.s),e!==Mte?e:void 0}function W6(e,t,n){if(Ote(t))return t;var r=t[nf];if(!r)return IT(t,function(s,o){return C0e(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return G6(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Pte(r.k):r.o;IT(r.i===3?new Set(i):i,function(s,o){return C0e(e,r,i,s,o,n)}),G6(e,i,!1),n&&e.u&&Xp("Patches").R(r,n,e.u,e.s)}return r.o}function C0e(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Bs(5),aw(i)){var o=W6(e,i,s&&t&&t.i!==3&&!VR(t.D,r)?s.concat(r):void 0);if(L3e(n,r,o),!aw(o))return;e.m=!1}if(r1(i)&&!Ote(i)){if(!e.h.F&&e._<1)return;W6(e,i),t&&t.A.l||G6(e,i)}}function G6(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Dte(t,n)}function vz(e,t){var n=e[nf];return(n?qb(n):e)[t]}function A0e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function iG(e){e.P||(e.P=!0,e.l&&iG(e.l))}function bz(e){e.o||(e.o=Pte(e.t))}function sG(e,t,n){var r=Aj(t)?Xp("MapSet").N(t,n):Ij(t)?Xp("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:S0e(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=aG;o&&(u=[a],l=gI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Xp("ES5").J(t,n);return(n?n.A:S0e()).p.push(r),r}function Z3t(e){return aw(e)||Bs(22,e),function t(n){if(!r1(n))return n;var r,i=n[nf],s=i1(n);if(i){if(!i.P&&(i.i<4||!Xp("ES5").K(i)))return i.t;i.I=!0,r=I0e(n,s),i.I=!1}else r=I0e(n,s);return IT(r,function(o,a){i&&H$(i.t,o)===a||L3e(r,o,t(a))}),s===3?new Set(r):r}(e)}function I0e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Pte(e)}function e$t(){function e(r){if(!r1(r))return r;if(Array.isArray(r))return r.map(e);if(Aj(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(Ij(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return VR(r,dk)&&(i[dk]=r[dk]),i}function t(r){return aw(r)?e(r):r}var n="add";Q3t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=i1(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Bs(24),typeof u=="function"&&f==="prototype"&&Bs(24),typeof(u=H$(u,f))!="object"&&Bs(15,o.join("/"))}var d=i1(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Bs(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Bs(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;IT(a.D,function(h,p){var m=H$(f,h),g=H$(d,h),y=p?VR(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var b=u.concat(h);l.push(y==="remove"?{op:y,path:b}:{op:y,path:b,value:g}),c.push(y===n?{op:"remove",path:b}:y==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Mte?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var k0e,kT,$te=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",t$t=typeof Map<"u",n$t=typeof Set<"u",R0e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Mte=$te?Symbol.for("immer-nothing"):((k0e={})["immer-nothing"]=!0,k0e),dk=$te?Symbol.for("immer-draftable"):"__$immer_draftable",nf=$te?Symbol.for("immer-state"):"__$immer_state",r$t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},i$t=""+Object.prototype.constructor,Lte=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,s$t=Object.getOwnPropertyDescriptors||function(e){var t={};return Lte(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},oG={},aG={get:function(e,t){if(t===nf)return e;var n=qb(e);if(!VR(n,t))return function(i,s,o){var a,u=A0e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!r1(r)?r:r===vz(e.t,t)?(bz(e),e.o[t]=sG(e.A.h,r,e)):r},has:function(e,t){return t in qb(e)},ownKeys:function(e){return Reflect.ownKeys(qb(e))},set:function(e,t,n){var r=A0e(qb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=vz(qb(e),t),s=i==null?void 0:i[nf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(K3t(n,i)&&(n!==void 0||VR(e.t,t)))return!0;bz(e),iG(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return vz(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,bz(e),iG(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=qb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Bs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Bs(12)}},gI={};IT(aG,function(e,t){gI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),gI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Bs(13),gI.set.call(this,e,t,void 0)},gI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Bs(14),aG.set.call(this,e[0],t,n,e[0])};var o$t=function(){function e(n){var r=this;this.g=R0e,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var S;return(S=s).call.apply(S,[g,E].concat(b))})}}var l;if(typeof s!="function"&&Bs(6),o!==void 0&&typeof o!="function"&&Bs(7),r1(i)){var c=T0e(r),f=sG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?q6(c):rG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return gz(c,o),yz(m,c)},function(m){throw q6(c),m}):(gz(c,o),yz(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Mte&&(l=void 0),r.F&&Dte(l,!0),o){var h=[],p=[];Xp("Patches").M(i,l,h,p),o(h,p)}return l}Bs(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){r1(n)||Bs(8),aw(n)&&(n=Z3t(n));var r=T0e(this),i=sG(this,n,void 0);return i[nf].C=!0,rG(r),i},t.finishDraft=function(n,r){var i=n&&n[nf];({}).NODE_ENV!=="production"&&(i&&i.C||Bs(9),i.I&&Bs(10));var s=i.A;return gz(s,r),yz(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!R0e&&Bs(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Xp("Patches").$;return aw(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),rf=new o$t,a$t=rf.produce;rf.produceWithPatches.bind(rf);rf.setAutoFreeze.bind(rf);rf.setUseProxies.bind(rf);rf.applyPatches.bind(rf);rf.createDraft.bind(rf);rf.finishDraft.bind(rf);function u$t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=G3t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return _3t({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Yp.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Yp.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function l$t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=u$t(e),s=U3t();s.startListening({matcher:v0e(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=v0e(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=g3t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Yp.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var c$t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),f$t=Object.prototype.hasOwnProperty;function uG(e,t){return f$t.call(e,t)}function lG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)uG(e,i)&&r.push(i);return r}function Kl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function cG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Wb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function F3e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function fG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(fG(e[t]))return!0}else if(typeof e=="object"){for(var r=lG(e),i=r.length,s=0;s<i;s++)if(fG(e[r[s]]))return!0}}return!1}function N0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var j3e=function(e){c$t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,N0e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=N0e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ms=j3e,d$t=Kl,YE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Y6(n,this.path);r&&(r=Kl(r));var i=O_(n,{op:"remove",path:this.from}).removed;return O_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Y6(n,this.from);return O_(n,{op:"add",path:this.path,value:Kl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:HR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},h$t={add:function(e,t,n){return cG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:YE.move,copy:YE.copy,test:YE.test,_get:YE._get};function Y6(e,t){if(t=="")return e;var n={op:"_get",path:t};return O_(e,n),n.value}function O_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):K6(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Y6(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=HR(e,t.value),o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Kl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=K6;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=F3e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!cG(h))throw new Ms("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);cG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ms("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=h$t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=YE[t.op].call(t,l,h,e);if(o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ms("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function kj(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Kl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=O_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function p$t(e,t,n){var r=O_(e,t);if(r.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function K6(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ms("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(YE[e.op]){if(typeof e.path!="string")throw new Ms("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ms('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ms("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&fG(e.value))throw new Ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ms("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ms("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=B3e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ms("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function B3e(e,t,n){try{if(!Array.isArray(e))throw new Ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)kj(Kl(t),Kl(e),n||!0);else{n=n||K6;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ms)return i;throw i}}function HR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!HR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!HR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const m$t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ms,_areEquals:HR,applyOperation:O_,applyPatch:kj,applyReducer:p$t,deepClone:d$t,getValueByPointer:Y6,validate:B3e,validator:K6},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Fte=new WeakMap,g$t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),y$t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function v$t(e){return Fte.get(e)}function b$t(e,t){return e.observers.get(t)}function _$t(e,t){e.observers.delete(t.callback)}function w$t(e,t){t.unobserve()}function x$t(e,t){var n=[],r,i=v$t(e);if(!i)i=new g$t(e),Fte.set(e,i);else{var s=b$t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Kl(e),t){r.callback=t,r.next=null;var o=function(){dG(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){dG(r),clearTimeout(r.next),_$t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new y$t(t,r)),r}function dG(e,t){t===void 0&&(t=!1);var n=Fte.get(e.object);jte(n.value,e.object,e.patches,"",t),e.patches.length&&kj(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function jte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=lG(t),o=lG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(uG(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?jte(c,f,n,r+"/"+Wb(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Wb(l),value:Kl(c)}),n.push({op:"replace",path:r+"/"+Wb(l),value:Kl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Wb(l),value:Kl(c)}),n.push({op:"remove",path:r+"/"+Wb(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!uG(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Wb(l),value:Kl(t[l])})}}}function U3e(e,t,n){n===void 0&&(n=!1);var r=[];return jte(e,t,r,"",n),r}const E$t=Object.freeze(Object.defineProperty({__proto__:null,compare:U3e,generate:dG,observe:x$t,unobserve:w$t},Symbol.toStringTag,{value:"Module"}));Object.assign({},m$t,E$t,{JsonPatchError:j3e,deepClone:Kl,escapePathComponent:Wb,unescapePathComponent:F3e});var yI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(yI||{});function q$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=z3e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=q$(i,t);return kj(a,Kl(o),!0,!1).newDocument}function S$t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function Bte({registry:e,initialState:t}){let n=!1;const r=z3t(),i=l$t(t);function s(c){return i.backend.nodes[c]}r.listen(yI.TRAVERSAL_START,()=>{n=!0}),r.listen(yI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return q$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=q$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const b=U3e(y,f);if(S$t(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:w}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Y3t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=q$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(yI.TRAVERSAL_START);const f=z3e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);C$t(p,m)?Kp(p)&&d.push(...p.sideEffects.undo):Kp(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(yI.TRAVERSAL_END)},undo(){const{current:c}=i;return Kp(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return V3e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function T$t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Kp(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Kp(r)&&(r=n[r.parent]),Kp(i)&&(i=n[i.parent]);return r.id}function z3e(e,t,n){const r=T$t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Kp(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Kp(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function C$t(e,t){if(Kp(e)&&e.parent===t.id)return!0;if(Kp(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function V3e(e,t){return{...e,children:e.children.map(n=>V3e(t[n],t)),name:`${e.label}`}}e$t();function A$t(e){return e.length===2?a$t(e):e}class EP{static create(){return new EP}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:A$t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Gp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var I$t="Expected a function",P0e=NaN,k$t="[object Symbol]",R$t=/^\s+|\s+$/g,N$t=/^[-+]0x[0-9a-f]+$/i,P$t=/^0b[01]+$/i,D$t=/^0o[0-7]+$/i,O$t=parseInt,$$t=typeof Ts=="object"&&Ts&&Ts.Object===Object&&Ts,M$t=typeof self=="object"&&self&&self.Object===Object&&self,L$t=$$t||M$t||Function("return this")(),F$t=Object.prototype,j$t=F$t.toString,B$t=Math.max,U$t=Math.min,_z=function(){return L$t.Date.now()};function z$t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(I$t);t=D0e(t)||0,hG(n)&&(c=!!n.leading,f="maxWait"in n,s=f?B$t(D0e(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var C=r,I=i;return r=i=void 0,l=T,o=e.apply(I,C),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var C=T-u,I=T-l,R=t-C;return f?U$t(R,s-I):R}function g(T){var C=T-u,I=T-l;return u===void 0||C>=t||C<0||f&&I>=s}function y(){var T=_z();if(g(T))return b(T);a=setTimeout(y,m(T))}function b(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function E(){return a===void 0?o:b(_z())}function S(){var T=_z(),C=g(T);if(r=arguments,i=this,u=T,C){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return S.cancel=w,S.flush=E,S}function hG(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function V$t(e){return!!e&&typeof e=="object"}function H$t(e){return typeof e=="symbol"||V$t(e)&&j$t.call(e)==k$t}function D0e(e){if(typeof e=="number")return e;if(H$t(e))return P0e;if(hG(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hG(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(R$t,"");var n=P$t.test(e);return n||D$t.test(e)?O$t(e.slice(2),n?2:8):N$t.test(e)?P0e:+e}var q$t=z$t;const qd=cf(q$t);function H3e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>M1(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Xc,{children:_.jsx(Pi,{gap:3,children:_.jsx(at,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const W$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:H3e},Symbol.toStringTag,{value:"Module"})),wz=15;function q3e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=Xr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<wz&&Math.abs(t(g[r.y])-p[1])<wz);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:wz,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const G$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:q3e},Symbol.toStringTag,{value:"Module"})),ls={top:15,left:100,right:15,bottom:70};function pG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=vh(),[c]=vh(),[f]=vh(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-ls.left-ls.right,[l]),m=N.useMemo(()=>u-ls.top-ls.bottom,[u]),g=N.useMemo(()=>{const P=Array.from(new Set(s.map(D=>D[i.category])));return F1(ej).domain(P)},[s,i.category]),{xMin:y,yMin:b,xMax:w,yMax:E}=N.useMemo(()=>{const P=s.map(B=>+B[i.x]).filter(B=>B!==null),[D,L]=xL(P),M=s.map(B=>+B[i.y]).filter(B=>B!==null),[F,z]=xL(M);return{xMin:D,xMax:L,yMin:F,yMax:z}},[s,i.x,i.y]),S=N.useMemo(()=>{const P=w-y;return p<=0?null:i.dataType==="date"?HZ([ls.left,p+ls.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):sd([ls.left,p+ls.left]).domain([y-P/10,w+P/10]).nice()},[i.dataType,p,w,y]),T=N.useMemo(()=>{const P=E-b;return m<=0?null:sd([m+ls.top,ls.top]).domain([b-P/10,E+P/10]).nice()},[m,E,b]),C=N.useMemo(()=>{if(!S||!T)return()=>null;if(r==="Axis Selection"){const P=Cke().extent([[ls.left,ls.top+m-5],[ls.left+p,ls.top+m+5]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[L.selection[0],null],[L.selection[1],null]],S,T,L.mode)}),D=Ake().extent([[ls.left-5,ls.top],[ls.left+5,ls.top+m]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[null,L.selection[0]],[null,L.selection[1]]],S,T,L.mode)});return c.current&&f.current&&(Xr(f.current).call(D),Xr(c.current).call(P),t.hasBrush||(Xr(f.current).call(D.move,[T(E),T(b)]),Xr(c.current).call(P.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(E)],[S(new Date("2015-12-31")),T(b)]],S,T,"drag"))),()=>{Xr(f.current).call(D.move,[T(E),T(b)]),Xr(c.current).call(P.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(E)],[S(new Date("2015-12-31")),T(b)]],S,T,"clear")}}if(r==="Rectangular Selection"){const P=Ike().extent([[ls.left,ls.top],[ls.left+p,ls.top+m]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],S,T,D.mode)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(Xr(a.current).call(P.move,null),e(null))});return Xr(a.current).call(P),()=>{Xr(a.current).call(P.move,null),n([[null,null],[null,null]],S,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[S(y),T(E)],[S(w),T(b)]],S,T,null),()=>n([[S(y),T(E)],[S(w),T(b)]],S,T,"clear")):r==="Paintbrush Selection"?()=>n([[S(y),T(E)],[S(w),T(b)]],S,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,y,S,E,b,T]),I=N.useMemo(()=>o.length===0?null:new Set(o),[o]),R=N.useMemo(()=>!S||!T?null:s.map((P,D)=>{if(P[i.x]===null||P[i.y]===null)return null;const L=i.dataType==="date"?S(new Date(P[i.x])):S(P[i.x]);return _.jsx("circle",{opacity:I&&!I.has(P[i.ids])?.3:1,r:3,fill:I&&!I.has(P[i.ids])?"lightgray":g(P[i.category]),cx:L,cy:T(P[i.y])},D)}),[I,g,s,i.category,i.dataType,i.ids,i.x,i.y,S,T]);return N.useEffect(()=>{r==="Axis Selection"&&WIe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(el,{children:[_.jsxs(Pi,{children:[_.jsx(wn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(h5,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:P=>h(P==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Pi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S&&T?_.jsxs("g",{children:[_.jsx(H3e,{yScale:T,label:i.y,horizontalPosition:ls.left,xRange:S.range()}),_.jsx(ZZ,{xScale:S,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+ls.top,label:i.x,ticks:S.ticks(i.brushType==="Axis Selection"?12:5).map(P=>({value:P.toString(),offset:S(P)}))})]}):null,R,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),S&&T&&r==="Paintbrush Selection"?_.jsx(q3e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:S,yScale:T}):null]}),r==="Slider Selection"&&S&&T?_.jsxs(el,{style:{flexGrow:1},gap:50,children:[_.jsxs(el,{gap:0,children:[_.jsx(at,{children:i.x}),_.jsx(tT,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],labelAlwaysOn:!1,onChange:P=>{n([[S(P[0]),t.y1],[S(P[1]),t.y2]],S,T,"drag")},style:{width:"300px"},marks:S.ticks(5).map(P=>({value:P,label:P})),value:[S.invert(t.x1),S.invert(t.x2)]})]}),_.jsxs(el,{gap:0,children:[_.jsx(at,{children:i.y}),_.jsx(tT,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:P=>{n([[t.x1,T(P[1])],[t.x2,T(P[0])]],S,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(P=>({value:P,label:P})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const Y$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:pG,default:pG},Symbol.toStringTag,{value:"Module"}));function O0e({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{Pke(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?y3e(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=EP.create(),y=g.register("brush",(T,C)=>(T.all={brush:C},T)),b=g.register("brushMove",(T,C)=>(T.all={brush:C},T)),w=g.register("brushResize",(T,C)=>(T.all={brush:C},T)),E=g.register("brushClear",(T,C)=>(T.all={brush:C},T)),S=Bte({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:b,brushResize:w,clearBrush:E},trrack:S}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>qd(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,b,w,E)=>{if(!y||!b)return;const S=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),C=b.invert(g[1][1]||i.y2),I=b.invert(g[0][1]||i.y1);let R=null;if(w==="clear")R=u;else if(E){const D=new Set(E);R=u.filter(xS(L=>D.has(L[e.ids])))}else e.brushType==="Axis Selection"?R=u.filter(xS(D=>new Date(D[e.x])>=new Date(S)&&new Date(D[e.x])<=new Date(T)&&D[e.y]>=C&&D[e.y]<=I)):R=u.filter(xS(D=>D[e.x]>=S&&D[e.x]<=T&&D[e.y]>=C&&D[e.y]<=I));const P={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?R==null?void 0:R.array("id"):[]};s(P),w==="drag"||w==="handle"?d(w,P):w==="clear"&&c.apply("Clear Brush",l.clearBrush(P)),r(R),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs(el,{gap:"xs",children:[_.jsx(pG,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(TW,{data:o,parameters:e,barsTable:p})]}):_.jsx(pd,{})}const K$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:O0e,default:O0e},Symbol.toStringTag,{value:"Module"})),X$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),$0e=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},XC=e=>{const t=N.useRef(null),n=$0e(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=$0e({...n,width:n.width||r,height:n.height||s});return[t,a]},Q$t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:XC},Symbol.toStringTag,{value:"Module"}));function W3e({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const J$t=Object.freeze(Object.defineProperty({__proto__:null,Bars:W3e},Symbol.toStringTag,{value:"Module"}));function Ute({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=sd().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const Z$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:Ute},Symbol.toStringTag,{value:"Module"}));function G3e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=$C().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const eMt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:G3e},Symbol.toStringTag,{value:"Module"})),tMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function nMt({parameters:e}){const[n,r]=XC(tMt),i=$C().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=sd().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(G3e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(Ute,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(W3e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const rMt=Object.freeze(Object.defineProperty({__proto__:null,default:nMt},Symbol.toStringTag,{value:"Module"}));function Y3e({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const iMt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:Y3e},Symbol.toStringTag,{value:"Module"}));function zte({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const sMt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:zte},Symbol.toStringTag,{value:"Module"})),oMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},aMt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=RRe().size([t-10,n-10]).padding(1.5),o=q5(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},uMt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function lMt({parameters:e}){const[t,n]=XC(oMt),r=aMt(e,n.width,n.height),i=uMt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(Y3e,{data:r}),_.jsx(zte,{positions:i})]})})})}const cMt=Object.freeze(Object.defineProperty({__proto__:null,default:lMt},Symbol.toStringTag,{value:"Module"}));function K3e({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const fMt=Object.freeze(Object.defineProperty({__proto__:null,Slices:K3e},Symbol.toStringTag,{value:"Module"}));function X3e({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const dMt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:X3e},Symbol.toStringTag,{value:"Module"})),hMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},pMt=fAt().value(e=>e.value),b2=150;function mMt({parameters:e}){const[t,n]=XC(hMt),r=pMt(e.data),i=r.map(o=>SW().innerRadius(0).outerRadius(b2).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>SW().outerRadius(b2+10).innerRadius(b2+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+b2,n.marginTop+b2].join(",")})`,children:[_.jsx(K3e,{arcs:i}),_.jsx(X3e,{positions:s})]})})})}const gMt=Object.freeze(Object.defineProperty({__proto__:null,default:mMt},Symbol.toStringTag,{value:"Module"}));function Q3e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=sd().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const yMt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:Q3e},Symbol.toStringTag,{value:"Module"}));function J3e({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const vMt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:J3e},Symbol.toStringTag,{value:"Module"})),bMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function _Mt({parameters:e}){const[n,r]=XC(bMt),i=$C().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=sd().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(w=>+w.value),g=p.reduce((w,E)=>Number(w)+Number(E))/100,y={};p.forEach((w,E)=>{y[String.fromCharCode(E+65)]=w/g});const b=[y];return DAt().keys(e.data.map(w=>w.name))(b)},l=(h,p,m)=>h.filter((y,b)=>p.includes(b)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(Q3e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(Ute,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(J3e,{data:c,barWidth:f,yScale:s}),_.jsx(zte,{positions:d})]})]})})})}const wMt=Object.freeze(Object.defineProperty({__proto__:null,default:_Mt},Symbol.toStringTag,{value:"Module"})),xMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function EMt({parameters:e,setAnswer:t}){const[n,r]=XC(xMt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=EP.create(),m=p.register("click",(y,b)=>(y.clickX=b.clickX,y.clickY=b.clickY,y.distance=b.distance,y)),g=Bte({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=Xr("#movingCircle"),g=Xr("#clickAccuracySvg"),y=CL(p,g.node()),b=[+m.attr("cx"),+m.attr("cy")],w=`${Math.round(Math.sqrt((y[0]-b[0])**2+(y[1]-b[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+w,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:w}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Xr(n.current).select("circle").transition().duration(y).ease(Dwt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(Ee,{children:["Adjust speed (px/s):",_.jsx(g5,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const SMt=Object.freeze(Object.defineProperty({__proto__:null,default:EMt},Symbol.toStringTag,{value:"Module"}));function M0e({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function TMt({parameters:e,setAnswer:t}){const n=O1(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=yIe(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=WJe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Zu,{children:[_.jsxs(Zu.Col,{span:2,children:[_.jsx(M0e,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(wn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(qde,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Zu.Col,{span:2,children:[_.jsx(M0e,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(wn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(qde,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const CMt=Object.freeze(Object.defineProperty({__proto__:null,default:TMt},Symbol.toStringTag,{value:"Module"}));function AMt(){return _.jsx("div",{children:"test react file"})}const IMt=Object.freeze(Object.defineProperty({__proto__:null,default:AMt},Symbol.toStringTag,{value:"Module"}));function kMt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=N.useRef(null),o=N.useCallback(a=>{const u=Xr("#Circle"),l=Xr("#click_svg"),c=CL(a,l.node()),f=[+u.attr("cx"),+u.attr("cy")],d=`${Math.round(Math.sqrt((c[0]-f[0])**2+(c[1]-f[1])**2))}px`;t({status:!0,answers:{[n]:d}})},[t,n]);return _.jsx("div",{className:"Chart__wrapper",ref:s,onClick:o,style:{height:"650px"},children:_.jsx("svg",{id:"click_svg",width:400,height:400,children:_.jsx("circle",{id:"Circle",cx:r,cy:i,r:"10",stroke:"black",strokeWidth:"2",fill:"white"})})})}const RMt=Object.freeze(Object.defineProperty({__proto__:null,default:kMt},Symbol.toStringTag,{value:"Module"}));function Vte({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?uP("%B"):M1(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Xc,{children:_.jsx(Pi,{gap:3,children:_.jsx(at,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Xc,{children:_.jsx(Zi,{withinPortal:!0,label:c,children:_.jsx(at,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const NMt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Vte},Symbol.toStringTag,{value:"Module"}));function Z3e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Xc,{children:_.jsx(Pi,{gap:3,children:_.jsx(at,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Pi,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(at,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const PMt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:Z3e},Symbol.toStringTag,{value:"Module"})),If={top:15,left:100,right:50,bottom:50};function mG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=vh(),o=N.useMemo(()=>s-If.left-If.right,[s]),a=N.useMemo(()=>i-If.top-If.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return F1(ej).domain(d)},[n,t.category]),l=N.useMemo(()=>e?sd([If.left,o+If.left]).domain([0,Wg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?$C([If.top,a+If.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:If.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-If.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(Vte,{xScale:l,yRange:c.range(),vertPosition:a+If.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(Z3e,{yScale:c,horizontalPosition:If.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(pd,{})}const DMt=Object.freeze(Object.defineProperty({__proto__:null,Bar:mG,default:mG},Symbol.toStringTag,{value:"Module"}));function e$e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>M1(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Xc,{children:_.jsx(Pi,{gap:3,children:_.jsx(at,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const OMt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:e$e},Symbol.toStringTag,{value:"Module"})),xz=15;function t$e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=Xr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<xz&&Math.abs(t(g[r.y])-p[1])<xz);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:xz,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const $Mt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:t$e},Symbol.toStringTag,{value:"Module"})),cs={top:15,left:100,right:15,bottom:70};function gG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=vh(),[c]=vh(),[f]=vh(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-cs.left-cs.right,[l]),m=N.useMemo(()=>u-cs.top-cs.bottom,[u]),g=N.useMemo(()=>{const P=Array.from(new Set(s.map(D=>D[i.category])));return F1(ej).domain(P)},[s,i.category]),{xMin:y,yMin:b,xMax:w,yMax:E}=N.useMemo(()=>{const P=s.map(B=>+B[i.x]).filter(B=>B!==null),[D,L]=xL(P),M=s.map(B=>+B[i.y]).filter(B=>B!==null),[F,z]=xL(M);return{xMin:D,xMax:L,yMin:F,yMax:z}},[s,i.x,i.y]),S=N.useMemo(()=>{const P=w-y;return p<=0?null:i.dataType==="date"?HZ([cs.left,p+cs.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):sd([cs.left,p+cs.left]).domain([y-P/10,w+P/10]).nice()},[i.dataType,p,w,y]),T=N.useMemo(()=>{const P=E-b;return m<=0?null:sd([m+cs.top,cs.top]).domain([b-P/10,E+P/10]).nice()},[m,E,b]),C=N.useMemo(()=>{if(!S||!T)return()=>null;if(r==="Axis Selection"){const P=Cke().extent([[cs.left,cs.top+m-5],[cs.left+p,cs.top+m+5]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[L.selection[0],null],[L.selection[1],null]],S,T,L.mode)}),D=Ake().extent([[cs.left-5,cs.top],[cs.left+5,cs.top+m]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[null,L.selection[0]],[null,L.selection[1]]],S,T,L.mode)});return c.current&&f.current&&(Xr(f.current).call(D),Xr(c.current).call(P),t.hasBrush||(Xr(f.current).call(D.move,[T(E),T(b)]),Xr(c.current).call(P.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(E)],[S(new Date("2015-12-31")),T(b)]],S,T,"drag"))),()=>{Xr(f.current).call(D.move,[T(E),T(b)]),Xr(c.current).call(P.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(E)],[S(new Date("2015-12-31")),T(b)]],S,T,"clear")}}if(r==="Rectangular Selection"){const P=Ike().extent([[cs.left,cs.top],[cs.left+p,cs.top+m]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],S,T,D.mode)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(Xr(a.current).call(P.move,null),e(null))});return Xr(a.current).call(P),()=>{Xr(a.current).call(P.move,null),n([[null,null],[null,null]],S,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[S(y),T(E)],[S(w),T(b)]],S,T,null),()=>n([[S(y),T(E)],[S(w),T(b)]],S,T,"clear")):r==="Paintbrush Selection"?()=>n([[S(y),T(E)],[S(w),T(b)]],S,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,y,S,E,b,T]),I=N.useMemo(()=>o.length===0?null:new Set(o),[o]),R=N.useMemo(()=>!S||!T?null:s.map((P,D)=>{if(P[i.x]===null||P[i.y]===null)return null;const L=i.dataType==="date"?S(new Date(P[i.x])):S(P[i.x]);return _.jsx("circle",{opacity:I&&!I.has(P[i.ids])?.3:1,r:3,fill:I&&!I.has(P[i.ids])?"lightgray":g(P[i.category]),cx:L,cy:T(P[i.y])},D)}),[I,g,s,i.category,i.dataType,i.ids,i.x,i.y,S,T]);return N.useEffect(()=>{r==="Axis Selection"&&WIe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(el,{children:[_.jsxs(Pi,{children:[_.jsx(wn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(h5,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:P=>h(P==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Pi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S&&T?_.jsxs("g",{children:[_.jsx(e$e,{yScale:T,label:i.y,horizontalPosition:cs.left,xRange:S.range()}),_.jsx(Vte,{xScale:S,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+cs.top,label:i.x,ticks:S.ticks(i.brushType==="Axis Selection"?12:5).map(P=>({value:P.toString(),offset:S(P)}))})]}):null,R,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),S&&T&&r==="Paintbrush Selection"?_.jsx(t$e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:S,yScale:T}):null]}),r==="Slider Selection"&&S&&T?_.jsxs(el,{style:{flexGrow:1},gap:50,children:[_.jsxs(el,{gap:0,children:[_.jsx(at,{children:i.x}),_.jsx(tT,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],labelAlwaysOn:!1,onChange:P=>{n([[S(P[0]),t.y1],[S(P[1]),t.y2]],S,T,"drag")},style:{width:"300px"},marks:S.ticks(5).map(P=>({value:P,label:P})),value:[S.invert(t.x1),S.invert(t.x2)]})]}),_.jsxs(el,{gap:0,children:[_.jsx(at,{children:i.y}),_.jsx(tT,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:P=>{n([[t.x1,T(P[1])],[t.x2,T(P[0])]],S,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(P=>({value:P,label:P})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const MMt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:gG,default:gG},Symbol.toStringTag,{value:"Module"}));function L0e({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{Pke(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?y3e(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=EP.create(),y=g.register("brush",(T,C)=>(T.all={brush:C},T)),b=g.register("brushMove",(T,C)=>(T.all={brush:C},T)),w=g.register("brushResize",(T,C)=>(T.all={brush:C},T)),E=g.register("brushClear",(T,C)=>(T.all={brush:C},T)),S=Bte({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:b,brushResize:w,clearBrush:E},trrack:S}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>qd(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,b,w,E)=>{if(!y||!b)return;const S=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),C=b.invert(g[1][1]||i.y2),I=b.invert(g[0][1]||i.y1);let R=null;if(w==="clear")R=u;else if(E){const D=new Set(E);R=u.filter(xS(L=>D.has(L[e.ids])))}else e.brushType==="Axis Selection"?R=u.filter(xS(D=>new Date(D[e.x])>=new Date(S)&&new Date(D[e.x])<=new Date(T)&&D[e.y]>=C&&D[e.y]<=I)):R=u.filter(xS(D=>D[e.x]>=S&&D[e.x]<=T&&D[e.y]>=C&&D[e.y]<=I));const P={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?R==null?void 0:R.array("id"):[]};s(P),w==="drag"||w==="handle"?d(w,P):w==="clear"&&c.apply("Clear Brush",l.clearBrush(P)),r(R),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs(el,{gap:"xs",children:[_.jsx(gG,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(mG,{data:o,parameters:e,barsTable:p})]}):_.jsx(pd,{})}const LMt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:L0e,default:L0e},Symbol.toStringTag,{value:"Module"})),FMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),jMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),F0e=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":MAt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":K$t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":G$t,"../public/demo-brush-interactions/assets/Scatter.tsx":Y$t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":OAt,"../public/demo-brush-interactions/assets/YAxis.tsx":W$t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":$At,"../public/demo-brush-interactions/assets/types.ts":X$t,"../public/demo-cleveland/assets/BarChart.tsx":rMt,"../public/demo-cleveland/assets/BubbleChart.tsx":cMt,"../public/demo-cleveland/assets/PieChart.tsx":gMt,"../public/demo-cleveland/assets/StackedBarChart.tsx":wMt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":J$t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":iMt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":sMt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":yMt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":Z$t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":eMt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":fMt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":dMt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":vMt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":Q$t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":SMt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":CMt,"../public/libraries/test/assets/test.tsx":IMt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":RMt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":DMt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":LMt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":$Mt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":MMt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":NMt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":OMt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":PMt,"../public/tutorial/react-and-randomization/assets/some.tsx":FMt,"../public/tutorial/react-and-randomization/assets/types.ts":jMt});function BMt({currentConfig:e}){const t=z0(),n=O1(),r=`../public/${e.path}`,i=r in F0e?F0e[r].default:null,s=Bh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=rd();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(X_,{path:e.path})})}function UMt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await cZ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Su,{text:t}):_.jsx(X_,{path:e.path})}function QC(e){return e.baseComponent!==void 0}function n$e(){const e=z0(),{setAlertModal:t}=rd(),n=Bh();N.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var j0e=Object.prototype.hasOwnProperty;function B0e(e,t,n){for(n of e.keys())if(hk(n,t))return n}function hk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&hk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=B0e(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=B0e(t,i),!i)||!hk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(j0e.call(e,n)&&++r&&!j0e.call(t,n)||!(n in t)||!hk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function zMt(e){var t=N.useRef(e),n=N.useRef(0);return hk(e,t.current)||(t.current=e,n.current+=1),N.useMemo(function(){return t.current},[n.current])}function VMt(e,t){return N.useEffect(e,zMt(t))}const HMt=(e,t=null)=>{const[n,r]=N.useState("idle"),[i,s]=N.useState(null),[o,a]=N.useState(null),u=N.useRef(),l=N.useRef(!1);N.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=N.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return VMt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function r$e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const U0e=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],i$e=["participantId","trialId","trialOrder","responseId"];function Hte(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function qMt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(h0(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=QC(u)&&u.baseComponent&&n.baseComponents?aZ({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=r$e(s);return Object.entries(s.answer).map(([h,p])=>{var y,b;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(w=>w.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const w=(b=(y=l.correctAnswer)==null?void 0:y.find(E=>E.id===h))==null?void 0:b.answer;m.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function WMt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...i$e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await qMt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function GMt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=N.useState([...U0e].filter(h=>h!=="meta")),a=xo(),{value:u,status:l,error:c}=HMt(WMt,[s,r,a.storageEngine,i]),f=N.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);Hte(h,n)},[n,u]),d=N.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Cs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(rJ,{searchable:!0,nothingFoundMessage:"Property not found",data:[...U0e],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(Nlt,{}),variant:"filled"}),_.jsx(Hc,{h:"md"}),_.jsxs(Ee,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(un,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(un.Thead,{children:_.jsx(un.Tr,{children:u.header.map(h=>_.jsx(un.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Wt,{direction:"row",justify:"space-between",align:"center",children:[h,!i$e.includes(h)&&_.jsx(Bw,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(PJ,{size:16})})]})},h))})}),_.jsx(un.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(un.Tr,{children:u.header.map(m=>_.jsx(un.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(Hg,{variant:"light",children:c.message}):null,_.jsx(Qc,{visible:l==="pending"||l==="idle"})]}),_.jsx(Hc,{h:"sm"}),_.jsx(Wt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(at,{children:d})}),_.jsx(Hc,{h:"md"}),_.jsxs(Pi,{justify:"right",children:[_.jsx(wn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(wn,{leftSection:_.jsx(gAe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function YMt(){const e=p0(),{storageEngine:t}=xo(),n=As(b=>b.answers),[r,i]=N.useState(!1);N.useEffect(()=>{const b=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(b))},1e3)},[]),n$e();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function b(){if(t){const w=await t.getCurrentParticipantId(),E=await t.getParticipantData();u(w),o(E)}}b()},[t]);const c=N.useCallback(async()=>{Hte(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));N.useEffect(()=>{if(r){const b=setInterval(()=>{p(w=>w-1)},1e3);return h<=0?(f&&c(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[f,r,h,c]);const m=Kw(),[g,y]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(m);y(w.dataCollectionEnabled)}})()},[t,m]),_.jsx(Xc,{style:{height:"100%"},children:_.jsx(Wt,{direction:"column",children:r||!g?_.jsx(at,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Su,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(at,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Hc,{h:"lg"}),_.jsx(Xc,{children:_.jsx(pd,{color:"blue"})})]})})})}function KMt(){return _.jsx(at,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function XMt(){return _.jsx(at,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}function QMt(){const e=p0(),t=z0(),n=O1()||"Notfound",r=e.components[n],{storageEngine:i}=xo(),s=N.useRef(null),[o,a]=N.useState(null),{setIsRecording:u}=rd(),l=uZ(),c=As(E=>E.sequence);n$e();const f=Bh(),{setAlertModal:d}=rd();N.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&f(d({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[d,i,f]),N.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(E=>{var S;E.stop(),(S=s.current)==null||S.stream.removeTrack(E)}),s.current.stream.getAudioTracks().forEach(E=>{var S;E.stop(),(S=s.current)==null||S.stream.removeTrack(E)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),f(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(E=>{const S=new MediaRecorder(E);s.current=S,s.current.start(),f(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[h,p]=N.useState([]),m=N.useRef([]);N.useEffect(()=>{async function E(){var C;const T=((C=iZ(c,t))==null?void 0:C.map(I=>I.currentBlock.id).filter(I=>I!==void 0))||[];p(T)}async function S(){const T=m.current;JSON.stringify(T)!==JSON.stringify(h)&&h.length>0&&i&&await i.addParticipantTags(h),m.current=h}E().then(S)},[t,i,c]);const g=N.useMemo(()=>{var E;return n!=="end"&&QC(r)&&e.baseComponents?aZ({},(E=e.baseComponents)==null?void 0:E[r.baseComponent],r):r},[r,e]);if(n==="end")return _.jsx(YMt,{});if(n==="__trainingFailed")return _.jsx(KMt,{});if(n==="__timedOut")return _.jsx(XMt,{});if(n==="Notfound")return _.jsx(X_,{email:e.uiConfig.contactEmail});const y=g.instruction||"",{instructionLocation:b}=g,w=e.uiConfig.sidebar&&(b==="sidebar"||b===void 0);return _.jsxs(_.Fragment,{children:[b==="aboveStimulus"&&_.jsx(Su,{text:y}),_.jsx(wL,{status:l,config:g,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[g.type==="markdown"&&_.jsx(UMt,{currentConfig:g}),g.type==="website"&&_.jsx(Bvt,{currentConfig:g}),g.type==="image"&&_.jsx(zvt,{currentConfig:g}),g.type==="react-component"&&_.jsx(BMt,{currentConfig:g})]},`${t}-stimulus`),(b==="belowStimulus"||b===void 0&&!w)&&_.jsx(Su,{text:y}),_.jsx(wL,{status:l,config:g,location:"belowStimulus"},`${t}-below-response-block`)]})}function yG(e){const[t]=IJ();return _.jsx(AJ,{...e,to:{pathname:e.to,search:t.toString()}})}function s$e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=s$e(o,t,n,r),r.includes(o.orderPath))break}return i}function o$e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=o$e(s,r)}}),n}function JMt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function ZMt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Kw(),c=Fh(),f=z0(),[d,{close:h,open:p}]=O4(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?s$e(n,e,r,a.orderPath):-1,{trialId:y}=c0(),b=y===e,w=s?f===g:f===`reviewer-${e}`,E=u?b:w,S=N.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),C=u?S:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`),I=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,R=e.includes("$")&&I&&e.includes(I)?e.split(I).at(-1):e;return _.jsxs(Ma,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(Ma.Target,{children:_.jsx(Ee,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(u5,{active:E,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(Ee,{children:[i&&_.jsx(vlt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==R&&_.jsx(Olt,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),_.jsx(at,{size:"sm",span:E,fw:E?"700":void 0,display:"inline",children:R})]}),onClick:C,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(Ma.Dropdown,{onMouseLeave:h,children:_.jsxs(Ee,{children:[m.description&&_.jsxs(Ee,{children:[_.jsx(at,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(at,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(Ee,{children:[_.jsx(at,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(at,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function X6({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=wv(e.components);return n&&r&&(o=JMt(wv(e.components),wv(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(ZMt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?h0(c).length-o$e(u,c):0,d=h0(u);return _.jsx(u5,{label:_.jsxs(Ee,{style:{opacity:f>0?1:.5},children:[_.jsx(at,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(glt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(vv,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(vv,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(Ee,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(X6,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function a$e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function z0e({text:e}){return _.jsx(Zi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(RJ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function eLt(){const e=As(f=>f.sequence),t=As(f=>f.metadata),{toggleStudyBrowser:n}=rd(),r=p0(),i=Bh(),s=Kw(),o=uAe(`/${s}`),{storageEngine:a}=xo(),u=N.useMemo(()=>{let f=wv(r.sequence);return f=sZ(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=N.useState("participant");return _.jsxs(ss.Aside,{p:"0",children:[_.jsx(ss.Section,{children:_.jsxs(Wt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(at,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(wn,{variant:"light",leftSection:_.jsx(NJ,{size:14}),onClick:()=>a$e(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(M0,{onClick:()=>i(n()),mt:1})]})}),_.jsx(ss.Section,{grow:!0,component:o0,p:"xs",pt:0,children:_.jsxs(Qs,{value:l,onChange:c,children:[_.jsx(Ee,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(Qs.List,{grow:!0,children:[_.jsxs(Qs.Tab,{value:"participant",children:["Participant View",_.jsx(z0e,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(Qs.Tab,{value:"allTrials",children:["All Trials View",_.jsx(z0e,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(Qs.Panel,{value:"participant",children:_.jsx(X6,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(Qs.Panel,{value:"allTrials",children:_.jsx(X6,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const tLt=N.createContext(null);function pu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let SP=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const V0e={decode:function(e,t){return pu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function u$e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(u$e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function H0e(e,t,n){const r=u$e(e,t||{});return n==null||n.appendChild(r),r}var nLt=Object.freeze({__proto__:null,createElement:H0e,default:H0e});const rLt={fetchBlob:function(e,t,n){return pu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){pu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>pu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>pu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class iLt extends SP{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return pu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let vG=class bG extends SP{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),u&&Date.now()-m<a)return;const T=S.clientX,C=S.clientY,I=T-d,R=C-h;if(p||Math.abs(I)>s||Math.abs(R)>s){const P=t.getBoundingClientRect(),{left:D,top:L}=P;p||(r==null||r(d-D,h-L),p=!0),n(I,R,T-D,C-L),d=T,h=C}},y=S=>{if(p){const T=S.clientX,C=S.clientY,I=t.getBoundingClientRect(),{left:R,top:P}=I;i==null||i(T-R,C-P)}l()},b=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||y(S)},w=S=>{p&&(S.stopPropagation(),S.preventDefault())},E=S=>{p&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,b=0,w=0;for(let E=0;E<=a;E++){const S=Math.round(E*m);if(S>y){const I=Math.round(b*c*i),R=I+Math.round(w*c*i)||1;let P=c-I;n.barAlign==="top"?P=0:n.barAlign==="bottom"&&(P=l-R),r[g](y*(d+h),P,d,R,p),y=S,b=0,w=0}const T=Math.abs(s[E]||0),C=Math.abs(o[E]||0);T>b&&(b=T),C>w&&(w=C)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(bG.MAX_CANVAS_WIDTH,u,l),f={};if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,b=Math.min(l-y,c);if(b<=0)return;const w=t.map(E=>{const S=Math.floor(y/l*E.length),T=Math.floor((y+b)/l*E.length);return E.slice(S,T)});this.renderSingleCanvas(w,n,b,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);d(m-1),d(m),d(m+1),h>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:g}=this.scrollContainer,y=Math.floor(g/l*h);Object.keys(f).length>bG.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(y-1),d(y),d(y+1)}))}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return pu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-r;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return pu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};vG.MAX_CANVAS_WIDTH=8e3,vG.MAX_NODES=10;class sLt extends SP{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class q0e extends SP{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return pu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return pu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return pu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const oLt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class qR extends iLt{static create(t){return new qR(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new q0e:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},oLt,t),this.timer=new sLt;const r=n?void 0:this.getMediaElement();this.renderer=new vG(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return pu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield rLt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof q0e&&(a.duration=o)}if(r)this.decodedData=V0e.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield V0e.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return pu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return pu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return pu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return pu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}qR.BasePlugin=class extends SP{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},qR.dom=nLt;function aLt(e){return qR.create(e)}function uLt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const W0e=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),lLt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:W0e(i),enabled:W0e(s)}};function G0e(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=uLt(i)}return n}function cLt({container:e,plugins:t=[],onMount:n,...r}){const i=N.useRef(!1),[s,o]=N.useState({}),a=N.useRef([]),[u,l]=N.useState(null);return N.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=G0e(s,t);a.current=Object.keys(f);const d=aLt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),N.useEffect(()=>{if(u){const c=G0e(s,t),{disabled:f,enabled:d}=lLt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function fLt({children:e,plugins:t=[],onMount:n,...r}){const i=cLt({plugins:t,onMount:n,...r});return ci.createElement(tLt.Provider,{value:i},e)}const dLt=({id:e="waveform",children:t})=>ci.createElement("div",{id:e},t);function Ez(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let l$e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},hLt=class extends l$e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class pLt extends l$e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const mLt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class qte extends hLt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new pLt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new qte(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return Ez(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Ez(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||mLt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Ez(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function gLt({width:e=70,height:t=36}){const n=N.useRef(null),r=N.useRef(null),[i,s]=N.useState(!1);N.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(qte.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=N.useCallback(a=>{n.current=a,s(!0)},[]);return _.jsx(Ee,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:_.jsx(fLt,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:_.jsx(dLt,{id:"waveform",height:t})})})}function yLt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=As(T=>T.config),r=As(T=>T.metadata),i=oZ(),s=Bh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=rd(),{storageEngine:u}=xo(),l=z0(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=N.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Kw(),y=uAe(`/${g}`),b=N.useRef(null),[w,E]=N.useState(!1),S=As(T=>T.isRecording);return N.useEffect(()=>{const T=b.current;T&&E(T.scrollWidth>T.offsetWidth)},[n]),_.jsx(ss.Header,{p:"md",children:_.jsxs(Zu,{mt:-7,align:"center",children:[_.jsx(Zu.Col,{span:4,children:_.jsxs(Wt,{align:"center",children:[_.jsx(R1,{w:40,src:`${il}${p}`,alt:"Study Logo"}),_.jsx(Hc,{w:"md"}),_.jsx(vs,{ref:b,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:w?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(Zu.Col,{span:4,children:m&&_.jsx(EC,{radius:"md",size:"lg",value:f})}),_.jsx(Zu.Col,{span:4,children:_.jsxs(Pi,{wrap:"nowrap",justify:"right",children:[S?_.jsxs(Pi,{ml:"xl",gap:20,wrap:"nowrap",children:[_.jsx(at,{color:"red",children:"Recording audio"}),_.jsx(gLt,{})]}):null,!t&&_.jsx(Zi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(vv,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(wn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Ll,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Ll.Target,{children:_.jsx(Bw,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(Clt,{})})}),_.jsxs(Ll.Dropdown,{children:[e&&_.jsx(Ll.Item,{leftSection:_.jsx(jlt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Ll.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(Plt,{size:14}),children:"Contact"}),e&&_.jsx(Ll.Item,{leftSection:_.jsx(NJ,{size:14}),onClick:()=>a$e(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function c$e(e,t){var n;return QC(e)&&t.baseComponents?aZ({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function vLt(){var u;const e=(u=p0())==null?void 0:u.uiConfig.sidebar,t=p0(),n=O1(),r=t.components[n],i=N.useMemo(()=>r?c$e(r,t):null,[r,t]),s=uZ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(ss.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(ss.Section,{bg:"gray.3",p:"md",children:_.jsxs(at,{c:"gray.9",children:[_.jsx(at,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Su,{text:o})]})}),_.jsx(ss.Section,{p:"md",children:_.jsx(wL,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(ss.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(wL,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function bLt(){const e=As(u=>u.showHelpText),t=As(u=>u.config),n=Bh(),{toggleShowHelpText:r}=rd(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await cZ(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Cs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Su,{text:i}):_.jsx(X_,{path:t.uiConfig.helpTextPath})})}function _Lt(){const e=As(o=>o.alertModal),{setAlertModal:t}=rd(),n=Bh(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(Cs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(Hg,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(mlt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(at,{my:"md",children:e.message}),_.jsx(Pi,{w:"100%",justify:"end",children:_.jsx(wn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function wLt(){const e=N.useRef([]),t=p0(),n=t.uiConfig.windowEventDebounceTime??100,r=As(l=>l.showStudyBrowser),i=As(l=>l.modes);N.useEffect(()=>{const l=qd(b=>{e.current.push([Date.now(),"focus",b.target instanceof HTMLElement?b.target.tagName:""])},n,{maxWait:n}),c=qd(b=>{e.current.push([Date.now(),"input",b.data??""])},n,{maxWait:n}),f=qd(b=>{e.current.push([Date.now(),"keypress",b.key])},n,{maxWait:n}),d=qd(b=>{e.current.push([Date.now(),"mousedown",[b.clientX,b.clientY]])},n,{maxWait:n}),h=qd(b=>{e.current.push([Date.now(),"mouseup",[b.clientX,b.clientY]])},n,{maxWait:n}),p=qd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),m=qd(b=>{e.current.push([Date.now(),"mousemove",[b.clientX,b.clientY]])},n,{maxWait:n}),g=qd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),y=qd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",l,!0),window.addEventListener("input",c),window.addEventListener("keypress",f),window.addEventListener("mousedown",d),window.addEventListener("mouseup",h),window.addEventListener("resize",p),window.addEventListener("mousemove",m),window.addEventListener("scroll",g),document.addEventListener("visibilitychange",y),()=>{window.removeEventListener("focus",l,!0),window.removeEventListener("input",c),window.removeEventListener("keypress",f),window.addEventListener("mousedown",d),window.addEventListener("mouseup",h),window.removeEventListener("resize",p),window.removeEventListener("mousemove",m),window.removeEventListener("scroll",g),document.removeEventListener("visibilitychange",y)}},[]);const s=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:o,dataCollectionEnabled:a}=N.useMemo(()=>i,[i]),u=N.useMemo(()=>o&&r,[o,r]);return _.jsx(gIe.Provider,{value:e,children:_.jsxs(ss,{padding:"md",header:{height:70},navbar:{width:s,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!u,mobile:!u}},children:[_.jsx(vLt,{}),_.jsx(eLt,{}),_.jsx(yLt,{studyNavigatorEnabled:o,dataCollectionEnabled:a}),_.jsx(bLt,{}),_.jsx(_Lt,{}),_.jsx(ss.Main,{children:_.jsx(elt,{})})]})})}function xLt(e,t=!1){return typeof e=="number"?Y0e(e,t):Y0e(e.length,t).map(r=>r.map(i=>e[i]))}function Y0e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function f$e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=f$e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function ELt(e,t){const n=wv(e);return f$e(n,t,"root")}function d$e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&d$e(s,t,i,o)})}function SLt(e){const t=[];return d$e(e,t,"",0),t}function K0e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return xLt(i.sort(()=>.5-Math.random()),!0)}function TLt(e){const n=SLt(e.sequence).map(s=>({[s]:K0e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=ELt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=K0e(e,o))})}),i}const CLt={},ALt=Object.freeze(Object.defineProperty({__proto__:null,default:CLt},Symbol.toStringTag,{value:"Module"})),ILt=uKe(ALt);var kLt=ILt;function RLt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function NLt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function PLt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function DLt(e){return e.__COMMENTS__}function OLt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var Rj={EOL:kLt.EOL||`
`,tryParseNumber:RLt,createComment:NLt,removeComment:PLt,getComment:DLt,forceComment:OLt},$Lt="3.2.1";function MLt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return X0e}else if(e.length===0)return X0e;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return FLt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),LLt.bind(null,n)}function LLt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function X0e(){}function FLt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function h$e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}h$e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function p$e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}p$e.description="parse hexadecimal numbers prefixed with 0x";function m$e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}m$e.description="support ISO dates";var Wte={loadDsf:MLt,std:{math:h$e,hex:p$e,date:m$e}},jLt=function(e,t){var n=Rj,r=Wte,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(F){return F==="{"||F==="}"||F==="["||F==="]"||F===","||F===":"}function d(F){var z,B=0,H=1;for(z=s-1;z>0&&i[z]!==`
`;z--,B++);for(;z>0;z--)i[z]===`
`&&H++;throw new Error(F+" at line "+H+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(F){return i.charAt(s+F)}function m(F){for(var z="",B=o;h();){if(o===B)return h(),F&&B==="'"&&o==="'"&&z.length===0?(h(),g()):z;if(o==="\\")if(h(),o==="u"){for(var H=0,q=0;q<4;q++){h();var Y=o.charCodeAt(0),$;o>="0"&&o<="9"?$=Y-48:o>="a"&&o<="f"?$=Y-97+10:o>="A"&&o<="F"?$=Y-65+10:d("Bad \\u char "+o),H=H*16+$}z+=String.fromCharCode(H)}else if(typeof a[o]=="string")z+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):z+=o}d("Bad string")}function g(){for(var F="",z=0,B=0;;){var H=p(-B-5);if(!H||H===`
`)break;B++}function q(){for(var Y=B;o&&o<=" "&&o!==`
`&&Y-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),q());;){if(!o)d("Bad multiline string");else if(o==="'"){if(z++,h(),z===3)return F.slice(-1)===`
`&&(F=F.slice(0,-1)),F;continue}else for(;z>0;)F+="'",z--;o===`
`?(F+=`
`,h(),q()):(o!=="\r"&&(F+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var F="",z=s,B=-1;;){if(o===":")return F?B>=0&&B!==F.length&&(s=z+B,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),F;o<=" "?o?B<0&&(B=F.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):F+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function w(){var F=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var z=o==="\r"||o===`
`||o==="";if(z||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=F[0];switch(B){case"f":if(F.trim()==="false")return!1;break;case"n":if(F.trim()==="null")return null;break;case"t":if(F.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var H=n.tryParseNumber(F);if(H!==void 0)return H}}if(z){F=F.trim();var q=l(F);return q!==void 0?q:F}}F+=o}}function E(F,z){var B;for(F--,B=s-2;B>F&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var H=i.substr(F,B-F+1);for(B=0;B<H.length;B++)if(H[B]>" "){var q=H.indexOf(`
`);if(q>=0){var Y=[H.substr(0,q),H.substr(q+1)];return z&&Y[0].trim().length===0&&Y.shift(),Y}else return[H]}return[]}function S(F){function z(H,q){var Y,$,W,X;switch(typeof H){case"string":H.indexOf(q)>=0&&(X=H);break;case"object":if(Object.prototype.toString.apply(H)==="[object Array]")for(Y=0,W=H.length;Y<W;Y++)X=z(H[Y],q)||X;else for($ in H)Object.prototype.hasOwnProperty.call(H,$)&&(X=z(H[$],q)||X)}return X}function B(H){var q=z(F,H);return q?"found '"+H+`' in a string value, your mistake could be with:
  > `+q+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function T(){var F=[],z,B,H;try{if(u&&(z=n.createComment(F,{a:[]})),h(),B=s,b(),z&&(H=E(B,!0).join(`
`)),o==="]")return h(),z&&(z.e=[H]),F;for(;o;){if(F.push(I()),B=s,b(),o===","&&(h(),B=s,b()),z){var q=E(B);z.a.push([H||"",q[0]||""]),H=q[1]}if(o==="]")return h(),z&&(z.a[z.a.length-1][1]+=H||""),F;b()}d("End of input while parsing an array (missing ']')")}catch(Y){throw Y.hint=Y.hint||S(F),Y}}function C(F){var z="",B={},H,q,Y;try{if(u&&(H=n.createComment(B,{c:{},o:[]})),F?q=1:(h(),q=s),b(),H&&(Y=E(q,!0).join(`
`)),o==="}"&&!F)return H&&(H.e=[Y]),h(),B;for(;o;){if(z=y(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),B[z]=I(),q=s,b(),o===","&&(h(),q=s,b()),H){var $=E(q);H.c[z]=[Y||"",$[0]||""],Y=$[1],H.o.push(z)}if(o==="}"&&!F)return h(),H&&(H.c[z][1]+=Y||""),B;b()}if(F)return B;d("End of input while parsing an object (missing '}')")}catch(W){throw W.hint=W.hint||S(B),W}}function I(){switch(b(),o){case"{":return C();case"[":return T();case"'":case'"':return m(!0);default:return w()}}function R(F,z){var B=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var H=z.join(`
`),q=E(B).join(`
`);if(q||H){var Y=n.createComment(F,n.getComment(F));Y.r=[H,q]}}return F}function P(){b();var F=u?E(1):null;switch(o){case"{":return R(C(),F);case"[":return R(T(),F);default:return R(I(),F)}}function D(){b();var F=u?E(1):null;switch(o){case"{":return R(C(),F);case"[":return R(T(),F)}try{return R(C(!0),F)}catch(z){c();try{return R(I(),F)}catch{throw z}}}if(typeof e!="string")throw new Error("source is not a string");var L=null,M=!0;return t&&typeof t=="object"&&(u=t.keepWsc,L=t.dsf,M=t.legacyRoot!==!1),l=r.loadDsf(L,"parse"),i=e,c(),M?D():P()},BLt=function(e,t){var n=Rj,r=Wte,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,b=Object.keys(i);for(y=b.length-1;y>=0;y--){var w=b[y];g[w].push(i[w][0].length,i[w][1].length)}}var E,S="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+S+"]","g"),C=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+S+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+S+"]","g"),R=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),P={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},D=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,L="",M=0;function F(X,V){return M+=X[0].length+X[1].length-X[2]-X[3],X[0]+V+X[1]}function z(X){return X.replace(T,function(V){var K=P[V];return typeof K=="string"?F(g.esc,K):F(g.uni,("0000"+V.charCodeAt(0).toString(16)).slice(-4))})}function B(X,V,K,J){return X?(C.lastIndex=0,R.lastIndex=0,c||K||C.test(X)||n.tryParseNumber(X,!0)!==void 0||R.test(X)?(T.lastIndex=0,I.lastIndex=0,T.test(X)?!I.test(X)&&!J&&d?H(X,V):F(g.qstr,z(X)):F(g.qstr,X)):F(g.str,X)):F(g.qstr,"")}function H(X,V){var K,J=X.replace(/\r/g,"").split(`
`);if(V+=o,J.length===1)return F(g.mstr,J[0]);var ue=s+V+g.mstr[0];for(K=0;K<J.length;K++)ue+=s,J[K]&&(ue+=V+J[K]);return ue+s+V+g.mstr[1]}function q(X){return X?l||D.test(X)?(T.lastIndex=0,F(g.qkey,T.test(X)?z(X):X)):F(g.key,X):'""'}function Y(X,V,K,J){function ue(kn){return kn&&kn[kn[0]==="\r"?1:0]===`
`}function _e(kn){return kn&&!ue(kn)}function be(kn,Un,pr){if(!kn)return"";kn=n.forceComment(kn);var Tr,Yo=kn.length;for(Tr=0;Tr<Yo&&kn[Tr]<=" ";Tr++);return pr&&Tr>0&&(kn=kn.substr(Tr)),Tr<Yo?Un+F(g.rem,kn):kn}var xe=E(X);if(xe!==void 0)return F(g.dsf,xe);switch(typeof X){case"string":return B(X,L,V,J);case"number":return isFinite(X)?F(g.num,String(X)):F(g.lit,"null");case"boolean":return F(g.lit,String(X));case"object":if(!X)return F(g.lit,"null");var ke;a&&(ke=n.getComment(X));var je=Object.prototype.toString.apply(X)==="[object Array]",Re=L;L+=o;var ft=s+Re,Ze=s+L,It=K||u?"":ft,bt=[],Ae,Be=f?[]:null,st=c,_t=d,jt=h?"":g.com[0],ot=0,Se,kt,Rt,Te,$e,rt,St,Mt,Zn;if(je){for(Se=0,kt=X.length;Se<kt;Se++){if(Ae=Se<kt-1,ke?(rt=ke.a[Se]||[],St=_e(rt[1]),bt.push(be(rt[0],`
`)+Ze),Be&&(rt[0]||rt[1]||St)&&(Be=null)):bt.push(Ze),M=0,Te=X[Se],bt.push(Y(Te,ke?St:!1,!0)+(Ae?h:"")),Be){switch(typeof Te){case"string":M=0,c=!0,d=0,Be.push(Y(Te,!1,!0)+(Ae?g.com[0]:"")),c=st,d=_t;break;case"object":if(Te){Be=null;break}default:Be.push(bt[bt.length-1]+(Ae?jt:""));break}Ae&&(M+=g.com[0].length-g.com[2]),ot+=M}ke&&rt[1]&&bt.push(be(rt[1],St?" ":`
`,St))}kt===0?ke&&ke.e&&bt.push(be(ke.e[0],`
`)+ft):bt.push(ft),bt.length===0?Mt=F(g.arr,""):(Mt=It+F(g.arr,bt.join("")),Be&&(Zn=Be.join(" "),Zn.length-ot<=f&&(Mt=F(g.arr,Zn))))}else{var Br=ke?ke.o.slice():[],er=[];for(Rt in X)Object.prototype.hasOwnProperty.call(X,Rt)&&Br.indexOf(Rt)<0&&er.push(Rt);m&&er.sort();var yr=Br.concat(er);for(Se=0,kt=yr.length;Se<kt;Se++)if(Ae=Se<kt-1,Rt=yr[Se],ke?(rt=ke.c[Rt]||[],St=_e(rt[1]),bt.push(be(rt[0],`
`)+Ze),Be&&(rt[0]||rt[1]||St)&&(Be=null)):bt.push(Ze),M=0,Te=X[Rt],$e=Y(Te,ke&&St),bt.push(q(Rt)+g.col[0]+(ue($e)?"":" ")+$e+(Ae?h:"")),ke&&rt[1]&&bt.push(be(rt[1],St?" ":`
`,St)),Be){switch(typeof Te){case"string":M=0,c=!0,d=0,$e=Y(Te,!1),c=st,d=_t,Be.push(q(Rt)+g.col[0]+" "+$e+(Ae?g.com[0]:""));break;case"object":if(Te){Be=null;break}default:Be.push(bt[bt.length-1]+(Ae?jt:""));break}M+=g.col[0].length-g.col[2],Ae&&(M+=g.com[0].length-g.com[2]),ot+=M}kt===0?ke&&ke.e&&bt.push(be(ke.e[0],`
`)+ft):bt.push(ft),bt.length===0?Mt=F(g.obj,""):(Mt=It+F(g.obj,bt.join("")),Be&&(Zn=Be.join(" "),Zn.length-ot<=f&&(Mt=F(g.obj,Zn))))}return L=Re,Mt}}E=r.loadDsf(p,"stringify");var $="",W=a?W=(n.getComment(e)||{}).r:null;return W&&W[0]&&($=W[0]+`
`),$+=Y(e,null,!0,!0),W&&($+=W[1]||""),$},AS=Rj;function pk(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function _G(e,t){if(!(e===null||typeof e!="object")){var n=AS.getComment(e);n&&AS.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Q0e(o.a,r,n.a[r],_G(e[r]))&&(s=!0);!s&&n.e&&(o.e=pk(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Q0e(o.s,l,n.c[l],_G(e[l]))&&(s=!0)}!s&&n.e&&(o.e=pk(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=pk(n.r[0],n.r[1])),s?o:void 0}}function ULt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function zLt(e,t){var n=[];if(wG(e,t,n,[]),n.length>0){var r=Q6(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+ULt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),Q6(t,r,1)}}function Q0e(e,t,n,r){var i=pk(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function mk(e,t){var n=pk(t.b,t.a);return n.path=e,n}function gk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(mk(s,o)),gk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(mk(u,l)),gk(l.x,t,u))});e.e&&t.push(mk(n,e.e))}}function wG(e,t,n,r){if(e){if(t===null||typeof t!="object"){gk(e,n,r);return}var i,s=AS.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],wG(u.x,t[i],n,l)):(n.push(mk(l,u)),gk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],wG(d.x,t[c],n,f))):d&&(n.push(mk(f,d)),gk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function Q6(e,t,n){var r=AS.createComment(e,AS.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=AS.forceComment(t)),r.r[n]||""}var VLt={extract:function(e){return _G(e,!0)},merge:zLt,header:function(e,t){return Q6(e,t,0)},footer:function(e,t){return Q6(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var J0e=Rj,HLt=$Lt,Z0e=jLt,eye=BLt,qLt=VLt,WLt=Wte,Nj={parse:Z0e,stringify:eye,endOfLine:function(){return J0e.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(J0e.EOL=e)},version:HLt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Z0e(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,eye(e,t)}},comments:qLt,dsf:WLt.std},xG={exports:{}},g$e={},wh={},RT={},TP={},hr={},WR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(y,...b){const w=[y[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(y[++E]);return new r(w)}e._=i;const s=new r("+");function o(y,...b){const w=[h(y[0])];let E=0;for(;E<b.length;)w.push(s),a(w,b[E]),w.push(s,h(y[++E]));return u(w),new r(w)}e.str=o;function a(y,b){b instanceof r?y.push(...b._items):b instanceof n?y.push(b):y.push(f(b))}e.addCodeArg=a;function u(y){let b=1;for(;b<y.length-1;){if(y[b]===s){const w=l(y[b-1],y[b+1]);if(w!==void 0){y.splice(b-1,3,w);continue}y[b++]="+"}b++}}function l(y,b){if(b==='""')return y;if(y==='""')return b;if(typeof y=="string")return b instanceof n||y[y.length-1]!=='"'?void 0:typeof b!="string"?`${y.slice(0,-1)}${b}"`:b[0]==='"'?y.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(y instanceof n))return`"${y}${b.slice(1)}`}function c(y,b){return b.emptyStr()?y:y.emptyStr()?b:o`${y}${b}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(WR);var EG={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=WR;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let b=c(y);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${y} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(y))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(EG);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=WR,n=EG;var r=WR;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=EG;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(K,J){return this}}class o extends s{constructor(K,J,ue){super(),this.varKind=K,this.name=J,this.rhs=ue}render({es5:K,_n:J}){const ue=K?n.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ue} ${this.name}${_e};`+J}optimizeNames(K,J){if(K[this.name.str])return this.rhs&&(this.rhs=F(this.rhs,K,J)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(K,J,ue){super(),this.lhs=K,this.rhs=J,this.sideEffects=ue}render({_n:K}){return`${this.lhs} = ${this.rhs};`+K}optimizeNames(K,J){if(!(this.lhs instanceof t.Name&&!K[this.lhs.str]&&!this.sideEffects))return this.rhs=F(this.rhs,K,J),this}get names(){const K=this.lhs instanceof t.Name?{}:{...this.lhs.names};return M(K,this.rhs)}}class u extends a{constructor(K,J,ue,_e){super(K,ue,_e),this.op=J}render({_n:K}){return`${this.lhs} ${this.op}= ${this.rhs};`+K}}class l extends s{constructor(K){super(),this.label=K,this.names={}}render({_n:K}){return`${this.label}:`+K}}class c extends s{constructor(K){super(),this.label=K,this.names={}}render({_n:K}){return`break${this.label?` ${this.label}`:""};`+K}}class f extends s{constructor(K){super(),this.error=K}render({_n:K}){return`throw ${this.error};`+K}get names(){return this.error.names}}class d extends s{constructor(K){super(),this.code=K}render({_n:K}){return`${this.code};`+K}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(K,J){return this.code=F(this.code,K,J),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(K=[]){super(),this.nodes=K}render(K){return this.nodes.reduce((J,ue)=>J+ue.render(K),"")}optimizeNodes(){const{nodes:K}=this;let J=K.length;for(;J--;){const ue=K[J].optimizeNodes();Array.isArray(ue)?K.splice(J,1,...ue):ue?K[J]=ue:K.splice(J,1)}return K.length>0?this:void 0}optimizeNames(K,J){const{nodes:ue}=this;let _e=ue.length;for(;_e--;){const be=ue[_e];be.optimizeNames(K,J)||(z(K,be.names),ue.splice(_e,1))}return ue.length>0?this:void 0}get names(){return this.nodes.reduce((K,J)=>L(K,J.names),{})}}class p extends h{render(K){return"{"+K._n+super.render(K)+"}"+K._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(K,J){super(J),this.condition=K}render(K){let J=`if(${this.condition})`+super.render(K);return this.else&&(J+="else "+this.else.render(K)),J}optimizeNodes(){super.optimizeNodes();const K=this.condition;if(K===!0)return this.nodes;let J=this.else;if(J){const ue=J.optimizeNodes();J=this.else=Array.isArray(ue)?new g(ue):ue}if(J)return K===!1?J instanceof y?J:J.nodes:this.nodes.length?this:new y(B(K),J instanceof y?[J]:J.nodes);if(!(K===!1||!this.nodes.length))return this}optimizeNames(K,J){var ue;if(this.else=(ue=this.else)===null||ue===void 0?void 0:ue.optimizeNames(K,J),!!(super.optimizeNames(K,J)||this.else))return this.condition=F(this.condition,K,J),this}get names(){const K=super.names;return M(K,this.condition),this.else&&L(K,this.else.names),K}}y.kind="if";class b extends p{}b.kind="for";class w extends b{constructor(K){super(),this.iteration=K}render(K){return`for(${this.iteration})`+super.render(K)}optimizeNames(K,J){if(super.optimizeNames(K,J))return this.iteration=F(this.iteration,K,J),this}get names(){return L(super.names,this.iteration.names)}}class E extends b{constructor(K,J,ue,_e){super(),this.varKind=K,this.name=J,this.from=ue,this.to=_e}render(K){const J=K.es5?n.varKinds.var:this.varKind,{name:ue,from:_e,to:be}=this;return`for(${J} ${ue}=${_e}; ${ue}<${be}; ${ue}++)`+super.render(K)}get names(){const K=M(super.names,this.from);return M(K,this.to)}}class S extends b{constructor(K,J,ue,_e){super(),this.loop=K,this.varKind=J,this.name=ue,this.iterable=_e}render(K){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(K)}optimizeNames(K,J){if(super.optimizeNames(K,J))return this.iterable=F(this.iterable,K,J),this}get names(){return L(super.names,this.iterable.names)}}class T extends p{constructor(K,J,ue){super(),this.name=K,this.args=J,this.async=ue}render(K){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(K)}}T.kind="func";class C extends h{render(K){return"return "+super.render(K)}}C.kind="return";class I extends p{render(K){let J="try"+super.render(K);return this.catch&&(J+=this.catch.render(K)),this.finally&&(J+=this.finally.render(K)),J}optimizeNodes(){var K,J;return super.optimizeNodes(),(K=this.catch)===null||K===void 0||K.optimizeNodes(),(J=this.finally)===null||J===void 0||J.optimizeNodes(),this}optimizeNames(K,J){var ue,_e;return super.optimizeNames(K,J),(ue=this.catch)===null||ue===void 0||ue.optimizeNames(K,J),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(K,J),this}get names(){const K=super.names;return this.catch&&L(K,this.catch.names),this.finally&&L(K,this.finally.names),K}}class R extends p{constructor(K){super(),this.error=K}render(K){return`catch(${this.error})`+super.render(K)}}R.kind="catch";class P extends p{render(K){return"finally"+super.render(K)}}P.kind="finally";class D{constructor(K,J={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...J,_n:J.lines?`
`:""},this._extScope=K,this._scope=new n.Scope({parent:K}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(K){return this._scope.name(K)}scopeName(K){return this._extScope.name(K)}scopeValue(K,J){const ue=this._extScope.value(K,J);return(this._values[ue.prefix]||(this._values[ue.prefix]=new Set)).add(ue),ue}getScopeValue(K,J){return this._extScope.getValue(K,J)}scopeRefs(K){return this._extScope.scopeRefs(K,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(K,J,ue,_e){const be=this._scope.toName(J);return ue!==void 0&&_e&&(this._constants[be.str]=ue),this._leafNode(new o(K,be,ue)),be}const(K,J,ue){return this._def(n.varKinds.const,K,J,ue)}let(K,J,ue){return this._def(n.varKinds.let,K,J,ue)}var(K,J,ue){return this._def(n.varKinds.var,K,J,ue)}assign(K,J,ue){return this._leafNode(new a(K,J,ue))}add(K,J){return this._leafNode(new u(K,e.operators.ADD,J))}code(K){return typeof K=="function"?K():K!==t.nil&&this._leafNode(new d(K)),this}object(...K){const J=["{"];for(const[ue,_e]of K)J.length>1&&J.push(","),J.push(ue),(ue!==_e||this.opts.es5)&&(J.push(":"),(0,t.addCodeArg)(J,_e));return J.push("}"),new t._Code(J)}if(K,J,ue){if(this._blockNode(new y(K)),J&&ue)this.code(J).else().code(ue).endIf();else if(J)this.code(J).endIf();else if(ue)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(K){return this._elseNode(new y(K))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(K,J){return this._blockNode(K),J&&this.code(J).endFor(),this}for(K,J){return this._for(new w(K),J)}forRange(K,J,ue,_e,be=this.opts.es5?n.varKinds.var:n.varKinds.let){const xe=this._scope.toName(K);return this._for(new E(be,xe,J,ue),()=>_e(xe))}forOf(K,J,ue,_e=n.varKinds.const){const be=this._scope.toName(K);if(this.opts.es5){const xe=J instanceof t.Name?J:this.var("_arr",J);return this.forRange("_i",0,(0,t._)`${xe}.length`,ke=>{this.var(be,(0,t._)`${xe}[${ke}]`),ue(be)})}return this._for(new S("of",_e,be,J),()=>ue(be))}forIn(K,J,ue,_e=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(K,(0,t._)`Object.keys(${J})`,ue);const be=this._scope.toName(K);return this._for(new S("in",_e,be,J),()=>ue(be))}endFor(){return this._endBlockNode(b)}label(K){return this._leafNode(new l(K))}break(K){return this._leafNode(new c(K))}return(K){const J=new C;if(this._blockNode(J),this.code(K),J.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(K,J,ue){if(!J&&!ue)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new I;if(this._blockNode(_e),this.code(K),J){const be=this.name("e");this._currNode=_e.catch=new R(be),J(be)}return ue&&(this._currNode=_e.finally=new P,this.code(ue)),this._endBlockNode(R,P)}throw(K){return this._leafNode(new f(K))}block(K,J){return this._blockStarts.push(this._nodes.length),K&&this.code(K).endBlock(J),this}endBlock(K){const J=this._blockStarts.pop();if(J===void 0)throw new Error("CodeGen: not in self-balancing block");const ue=this._nodes.length-J;if(ue<0||K!==void 0&&ue!==K)throw new Error(`CodeGen: wrong number of nodes: ${ue} vs ${K} expected`);return this._nodes.length=J,this}func(K,J=t.nil,ue,_e){return this._blockNode(new T(K,J,ue)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(K=1){for(;K-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(K){return this._currNode.nodes.push(K),this}_blockNode(K){this._currNode.nodes.push(K),this._nodes.push(K)}_endBlockNode(K,J){const ue=this._currNode;if(ue instanceof K||J&&ue instanceof J)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${J?`${K.kind}/${J.kind}`:K.kind}"`)}_elseNode(K){const J=this._currNode;if(!(J instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=J.else=K,this}get _root(){return this._nodes[0]}get _currNode(){const K=this._nodes;return K[K.length-1]}set _currNode(K){const J=this._nodes;J[J.length-1]=K}}e.CodeGen=D;function L(V,K){for(const J in K)V[J]=(V[J]||0)+(K[J]||0);return V}function M(V,K){return K instanceof t._CodeOrName?L(V,K.names):V}function F(V,K,J){if(V instanceof t.Name)return ue(V);if(!_e(V))return V;return new t._Code(V._items.reduce((be,xe)=>(xe instanceof t.Name&&(xe=ue(xe)),xe instanceof t._Code?be.push(...xe._items):be.push(xe),be),[]));function ue(be){const xe=J[be.str];return xe===void 0||K[be.str]!==1?be:(delete K[be.str],xe)}function _e(be){return be instanceof t._Code&&be._items.some(xe=>xe instanceof t.Name&&K[xe.str]===1&&J[xe.str]!==void 0)}}function z(V,K){for(const J in K)V[J]=(V[J]||0)-(K[J]||0)}function B(V){return typeof V=="boolean"||typeof V=="number"||V===null?!V:(0,t._)`!${X(V)}`}e.not=B;const H=W(e.operators.AND);function q(...V){return V.reduce(H)}e.and=q;const Y=W(e.operators.OR);function $(...V){return V.reduce(Y)}e.or=$;function W(V){return(K,J)=>K===t.nil?J:J===t.nil?K:(0,t._)`${X(K)} ${V} ${X(J)}`}function X(V){return V instanceof t.Name?V:(0,t._)`(${V})`}})(hr);var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.checkStrictMode=Bt.getErrorPath=Bt.Type=Bt.useFunc=Bt.setEvaluated=Bt.evaluatedPropsToName=Bt.mergeEvaluated=Bt.eachItem=Bt.unescapeJsonPointer=Bt.escapeJsonPointer=Bt.escapeFragment=Bt.unescapeFragment=Bt.schemaRefOrVal=Bt.schemaHasRulesButRef=Bt.schemaHasRules=Bt.checkUnknownRules=Bt.alwaysValidSchema=Bt.toHash=void 0;const Fi=hr,GLt=WR;function YLt(e){const t={};for(const n of e)t[n]=!0;return t}Bt.toHash=YLt;function KLt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(y$e(e,t),!v$e(t,e.self.RULES.all))}Bt.alwaysValidSchema=KLt;function y$e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||w$e(e,`unknown keyword: "${s}"`)}Bt.checkUnknownRules=y$e;function v$e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Bt.schemaHasRules=v$e;function XLt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Bt.schemaHasRulesButRef=XLt;function QLt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Fi._)`${n}`}return(0,Fi._)`${e}${t}${(0,Fi.getProperty)(r)}`}Bt.schemaRefOrVal=QLt;function JLt(e){return b$e(decodeURIComponent(e))}Bt.unescapeFragment=JLt;function ZLt(e){return encodeURIComponent(Gte(e))}Bt.escapeFragment=ZLt;function Gte(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Bt.escapeJsonPointer=Gte;function b$e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Bt.unescapeJsonPointer=b$e;function e6t(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Bt.eachItem=e6t;function tye({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Fi.Name?(s instanceof Fi.Name?e(i,s,o):t(i,s,o),o):s instanceof Fi.Name?(t(i,o,s),s):n(s,o);return a===Fi.Name&&!(u instanceof Fi.Name)?r(i,u):u}}Bt.mergeEvaluated={props:tye({mergeNames:(e,t,n)=>e.if((0,Fi._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Fi._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Fi._)`${n} || {}`).code((0,Fi._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Fi._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Fi._)`${n} || {}`),Yte(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:_$e}),items:tye({mergeNames:(e,t,n)=>e.if((0,Fi._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Fi._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Fi._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Fi._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function _$e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Fi._)`{}`);return t!==void 0&&Yte(e,n,t),n}Bt.evaluatedPropsToName=_$e;function Yte(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Fi._)`${t}${(0,Fi.getProperty)(r)}`,!0))}Bt.setEvaluated=Yte;const nye={};function t6t(e,t){return e.scopeValue("func",{ref:t,code:nye[t.code]||(nye[t.code]=new GLt._Code(t.code))})}Bt.useFunc=t6t;var SG;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(SG||(Bt.Type=SG={}));function n6t(e,t,n){if(e instanceof Fi.Name){const r=t===SG.Num;return n?r?(0,Fi._)`"[" + ${e} + "]"`:(0,Fi._)`"['" + ${e} + "']"`:r?(0,Fi._)`"/" + ${e}`:(0,Fi._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Fi.getProperty)(e).toString():"/"+Gte(e)}Bt.getErrorPath=n6t;function w$e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Bt.checkStrictMode=w$e;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});const ru=hr,r6t={data:new ru.Name("data"),valCxt:new ru.Name("valCxt"),instancePath:new ru.Name("instancePath"),parentData:new ru.Name("parentData"),parentDataProperty:new ru.Name("parentDataProperty"),rootData:new ru.Name("rootData"),dynamicAnchors:new ru.Name("dynamicAnchors"),vErrors:new ru.Name("vErrors"),errors:new ru.Name("errors"),this:new ru.Name("this"),self:new ru.Name("self"),scope:new ru.Name("scope"),json:new ru.Name("json"),jsonPos:new ru.Name("jsonPos"),jsonLen:new ru.Name("jsonLen"),jsonPart:new ru.Name("jsonPart")};Pm.default=r6t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=hr,n=Bt,r=Pm;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,b,w){const{it:E}=g,{gen:S,compositeRule:T,allErrors:C}=E,I=f(g,y,b);w??(T||C)?u(S,I):l(E,(0,t._)`[${I}]`)}e.reportError=i;function s(g,y=e.keywordError,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,C=f(g,y,b);u(E,C),S||T||l(w,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:b,data:w,errsCount:E,it:S}){if(E===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",E,r.default.errors,C=>{g.const(T,(0,t._)`${r.default.vErrors}[${C}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,S.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${S.errSchemaPath}/${y}`),S.opts.verbose&&(g.assign((0,t._)`${T}.schema`,b),g.assign((0,t._)`${T}.data`,w))})}e.extendErrors=a;function u(g,y){const b=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:b,validateName:w,schemaEnv:E}=g;E.$async?b.throw((0,t._)`new ${g.ValidationError}(${y})`):(b.assign((0,t._)`${w}.errors`,y),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,b){const{createErrors:w}=g.it;return w===!1?(0,t._)`{}`:d(g,y,b)}function d(g,y,b={}){const{gen:w,it:E}=g,S=[h(E,b),p(g,b)];return m(g,y,S),w.object(...S)}function h({errorPath:g},{instancePath:y}){const b=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:b,parentSchema:w}){let E=w?y:(0,t.str)`${y}/${g}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:y,message:b},w){const{keyword:E,data:S,schemaValue:T,it:C}=g,{opts:I,propertyName:R,topSchemaRef:P,schemaPath:D}=C;w.push([c.keyword,E],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),I.messages&&w.push([c.message,typeof b=="function"?b(g):b]),I.verbose&&w.push([c.schema,T],[c.parentSchema,(0,t._)`${P}${D}`],[r.default.data,S]),R&&w.push([c.propertyName,R])}})(TP);Object.defineProperty(RT,"__esModule",{value:!0});RT.boolOrEmptySchema=RT.topBoolOrEmptySchema=void 0;const i6t=TP,s6t=hr,o6t=Pm,a6t={message:"boolean schema is false"};function u6t(e){const{gen:t,schema:n,validateName:r}=e;n===!1?x$e(e,!1):typeof n=="object"&&n.$async===!0?t.return(o6t.default.data):(t.assign((0,s6t._)`${r}.errors`,null),t.return(!0))}RT.topBoolOrEmptySchema=u6t;function l6t(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),x$e(e)):n.var(t,!0)}RT.boolOrEmptySchema=l6t;function x$e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,i6t.reportError)(i,a6t,void 0,t)}var Do={},uw={};Object.defineProperty(uw,"__esModule",{value:!0});uw.getRules=uw.isJSONType=void 0;const c6t=["string","number","integer","boolean","null","object","array"],f6t=new Set(c6t);function d6t(e){return typeof e=="string"&&f6t.has(e)}uw.isJSONType=d6t;function h6t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}uw.getRules=h6t;var Kg={};Object.defineProperty(Kg,"__esModule",{value:!0});Kg.shouldUseRule=Kg.shouldUseGroup=Kg.schemaHasRulesForType=void 0;function p6t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&E$e(e,r)}Kg.schemaHasRulesForType=p6t;function E$e(e,t){return t.rules.some(n=>S$e(e,n))}Kg.shouldUseGroup=E$e;function S$e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Kg.shouldUseRule=S$e;Object.defineProperty(Do,"__esModule",{value:!0});Do.reportTypeError=Do.checkDataTypes=Do.checkDataType=Do.coerceAndCheckDataType=Do.getJSONTypes=Do.getSchemaTypes=Do.DataType=void 0;const m6t=uw,g6t=Kg,y6t=TP,Kn=hr,T$e=Bt;var IS;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(IS||(Do.DataType=IS={}));function v6t(e){const t=C$e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Do.getSchemaTypes=v6t;function C$e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(m6t.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Do.getJSONTypes=C$e;function b6t(e,t){const{gen:n,data:r,opts:i}=e,s=_6t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,g6t.schemaHasRulesForType)(e,t[0]));if(o){const a=Kte(t,r,i.strictNumbers,IS.Wrong);n.if(a,()=>{s.length?w6t(e,t,s):Xte(e)})}return o}Do.coerceAndCheckDataType=b6t;const A$e=new Set(["string","number","integer","boolean","null"]);function _6t(e,t){return t?e.filter(n=>A$e.has(n)||t==="array"&&n==="array"):[]}function w6t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Kn._)`typeof ${i}`),a=r.let("coerced",(0,Kn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Kn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Kn._)`${i}[0]`).assign(o,(0,Kn._)`typeof ${i}`).if(Kte(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Kn._)`${a} !== undefined`);for(const l of n)(A$e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),Xte(e),r.endIf(),r.if((0,Kn._)`${a} !== undefined`,()=>{r.assign(i,a),x6t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Kn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Kn._)`"" + ${i}`).elseIf((0,Kn._)`${i} === null`).assign(a,(0,Kn._)`""`);return;case"number":r.elseIf((0,Kn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Kn._)`+${i}`);return;case"integer":r.elseIf((0,Kn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Kn._)`+${i}`);return;case"boolean":r.elseIf((0,Kn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Kn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Kn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Kn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Kn._)`[${i}]`)}}}function x6t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Kn._)`${t} !== undefined`,()=>e.assign((0,Kn._)`${t}[${n}]`,r))}function TG(e,t,n,r=IS.Correct){const i=r===IS.Correct?Kn.operators.EQ:Kn.operators.NEQ;let s;switch(e){case"null":return(0,Kn._)`${t} ${i} null`;case"array":s=(0,Kn._)`Array.isArray(${t})`;break;case"object":s=(0,Kn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Kn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Kn._)`typeof ${t} ${i} ${e}`}return r===IS.Correct?s:(0,Kn.not)(s);function o(a=Kn.nil){return(0,Kn.and)((0,Kn._)`typeof ${t} == "number"`,a,n?(0,Kn._)`isFinite(${t})`:Kn.nil)}}Do.checkDataType=TG;function Kte(e,t,n,r){if(e.length===1)return TG(e[0],t,n,r);let i;const s=(0,T$e.toHash)(e);if(s.array&&s.object){const o=(0,Kn._)`typeof ${t} != "object"`;i=s.null?o:(0,Kn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Kn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Kn.and)(i,TG(o,t,n,r));return i}Do.checkDataTypes=Kte;const E6t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Kn._)`{type: ${e}}`:(0,Kn._)`{type: ${t}}`};function Xte(e){const t=S6t(e);(0,y6t.reportError)(t,E6t)}Do.reportTypeError=Xte;function S6t(e){const{gen:t,data:n,schema:r}=e,i=(0,T$e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var Pj={};Object.defineProperty(Pj,"__esModule",{value:!0});Pj.assignDefaults=void 0;const eE=hr,T6t=Bt;function C6t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)rye(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>rye(e,s,i.default))}Pj.assignDefaults=C6t;function rye(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,eE._)`${s}${(0,eE.getProperty)(t)}`;if(i){(0,T6t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,eE._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,eE._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,eE._)`${a} = ${(0,eE.stringify)(n)}`)}var Lp={},fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.validateUnion=fr.validateArray=fr.usePattern=fr.callValidateCode=fr.schemaProperties=fr.allSchemaProperties=fr.noPropertyInData=fr.propertyInData=fr.isOwnProperty=fr.hasPropFunc=fr.reportMissingProp=fr.checkMissingProp=fr.checkReportMissingProp=void 0;const es=hr,Qte=Bt,by=Pm,A6t=Bt;function I6t(e,t){const{gen:n,data:r,it:i}=e;n.if(Zte(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,es._)`${t}`},!0),e.error()})}fr.checkReportMissingProp=I6t;function k6t({gen:e,data:t,it:{opts:n}},r,i){return(0,es.or)(...r.map(s=>(0,es.and)(Zte(e,t,s,n.ownProperties),(0,es._)`${i} = ${s}`)))}fr.checkMissingProp=k6t;function R6t(e,t){e.setParams({missingProperty:t},!0),e.error()}fr.reportMissingProp=R6t;function I$e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,es._)`Object.prototype.hasOwnProperty`})}fr.hasPropFunc=I$e;function Jte(e,t,n){return(0,es._)`${I$e(e)}.call(${t}, ${n})`}fr.isOwnProperty=Jte;function N6t(e,t,n,r){const i=(0,es._)`${t}${(0,es.getProperty)(n)} !== undefined`;return r?(0,es._)`${i} && ${Jte(e,t,n)}`:i}fr.propertyInData=N6t;function Zte(e,t,n,r){const i=(0,es._)`${t}${(0,es.getProperty)(n)} === undefined`;return r?(0,es.or)(i,(0,es.not)(Jte(e,t,n))):i}fr.noPropertyInData=Zte;function k$e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}fr.allSchemaProperties=k$e;function P6t(e,t){return k$e(t).filter(n=>!(0,Qte.alwaysValidSchema)(e,t[n]))}fr.schemaProperties=P6t;function D6t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,es._)`${e}, ${t}, ${r}${i}`:t,f=[[by.default.instancePath,(0,es.strConcat)(by.default.instancePath,s)],[by.default.parentData,o.parentData],[by.default.parentDataProperty,o.parentDataProperty],[by.default.rootData,by.default.rootData]];o.opts.dynamicRef&&f.push([by.default.dynamicAnchors,by.default.dynamicAnchors]);const d=(0,es._)`${c}, ${n.object(...f)}`;return u!==es.nil?(0,es._)`${a}.call(${u}, ${d})`:(0,es._)`${a}(${d})`}fr.callValidateCode=D6t;const O6t=(0,es._)`new RegExp`;function $6t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,es._)`${i.code==="new RegExp"?O6t:(0,A6t.useFunc)(e,i)}(${n}, ${r})`})}fr.usePattern=$6t;function M6t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,es._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:Qte.Type.Num},s),t.if((0,es.not)(s),a)})}}fr.validateArray=M6t;function L6t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,Qte.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,es._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,es.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}fr.validateUnion=L6t;Object.defineProperty(Lp,"__esModule",{value:!0});Lp.validateKeywordUsage=Lp.validSchemaType=Lp.funcKeywordCode=Lp.macroKeywordCode=void 0;const Wu=hr,e_=Pm,F6t=fr,j6t=TP;function B6t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=R$e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Wu.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Lp.macroKeywordCode=B6t;function U6t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;V6t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=R$e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&iye(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&iye(e),g(()=>z6t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Wu._)`await `),b=>r.assign(f,!1).if((0,Wu._)`${b} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Wu._)`${b}.errors`),()=>r.throw(b))),y}function p(){const y=(0,Wu._)`${c}.errors`;return r.assign(y,null),m(Wu.nil),y}function m(y=t.async?(0,Wu._)`await `:Wu.nil){const b=u.opts.passContext?e_.default.this:e_.default.self,w=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Wu._)`${y}${(0,F6t.callValidateCode)(e,c,b,w)}`,t.modifying)}function g(y){var b;r.if((0,Wu.not)((b=t.valid)!==null&&b!==void 0?b:f),y)}}Lp.funcKeywordCode=U6t;function iye(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Wu._)`${r.parentData}[${r.parentDataProperty}]`))}function z6t(e,t){const{gen:n}=e;n.if((0,Wu._)`Array.isArray(${t})`,()=>{n.assign(e_.default.vErrors,(0,Wu._)`${e_.default.vErrors} === null ? ${t} : ${e_.default.vErrors}.concat(${t})`).assign(e_.default.errors,(0,Wu._)`${e_.default.vErrors}.length`),(0,j6t.extendErrors)(e)},()=>e.error())}function V6t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function R$e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Wu.stringify)(n)})}function H6t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Lp.validSchemaType=H6t;function q6t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Lp.validateKeywordUsage=q6t;var Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.extendSubschemaMode=Tv.extendSubschemaData=Tv.getSubschema=void 0;const Pp=hr,N$e=Bt;function W6t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Pp._)`${e.schemaPath}${(0,Pp.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Pp._)`${e.schemaPath}${(0,Pp.getProperty)(t)}${(0,Pp.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,N$e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Tv.getSubschema=W6t;function G6t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Pp._)`${t.data}${(0,Pp.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Pp.str)`${l}${(0,N$e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Pp._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Pp.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Tv.extendSubschemaData=G6t;function Y6t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Tv.extendSubschemaMode=Y6t;var Na={},P$e={exports:{}},ev=P$e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};W$(t,r,i,e,"",e)};ev.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ev.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ev.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ev.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function W$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in ev.arrayKeywords)for(var d=0;d<f.length;d++)W$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in ev.propsKeywords){if(f&&typeof f=="object")for(var h in f)W$(e,t,n,f[h],i+"/"+c+"/"+K6t(h),s,i,c,r,h)}else(c in ev.keywords||e.allKeys&&!(c in ev.skipKeywords))&&W$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function K6t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var X6t=P$e.exports;Object.defineProperty(Na,"__esModule",{value:!0});Na.getSchemaRefs=Na.resolveUrl=Na.normalizeId=Na._getFullPath=Na.getFullPath=Na.inlineRef=void 0;const Q6t=Bt,J6t=lZ,Z6t=X6t,eFt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function tFt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!CG(e):t?D$e(e)<=t:!1}Na.inlineRef=tFt;const nFt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function CG(e){for(const t in e){if(nFt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(CG)||typeof n=="object"&&CG(n))return!0}return!1}function D$e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!eFt.has(n)&&(typeof e[n]=="object"&&(0,Q6t.eachItem)(e[n],r=>t+=D$e(r)),t===1/0))return 1/0}return t}function O$e(e,t="",n){n!==!1&&(t=kS(t));const r=e.parse(t);return $$e(e,r)}Na.getFullPath=O$e;function $$e(e,t){return e.serialize(t).split("#")[0]+"#"}Na._getFullPath=$$e;const rFt=/#\/?$/;function kS(e){return e?e.replace(rFt,""):""}Na.normalizeId=kS;function iFt(e,t,n){return n=kS(n),e.resolve(t,n)}Na.resolveUrl=iFt;const sFt=/^[a-z_][-a-z0-9._]*$/i;function oFt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=kS(e[n]||t),s={"":i},o=O$e(r,i,!1),a={},u=new Set;return Z6t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),b.call(this,f.$anchor),b.call(this,f.$dynamicAnchor),s[d]=g;function y(w){const E=this.opts.uriResolver.resolve;if(w=kS(g?E(g,w):w),u.has(w))throw c(w);u.add(w);let S=this.refs[w];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(f,S.schema,w):w!==kS(m)&&(w[0]==="#"?(l(f,a[w],w),a[w]=f):this.refs[w]=m),w}function b(w){if(typeof w=="string"){if(!sFt.test(w))throw new Error(`invalid anchor "${w}"`);y.call(this,`#${w}`)}}}),a;function l(f,d,h){if(d!==void 0&&!J6t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Na.getSchemaRefs=oFt;Object.defineProperty(wh,"__esModule",{value:!0});wh.getData=wh.KeywordCxt=wh.validateFunctionCode=void 0;const M$e=RT,sye=Do,ene=Kg,J6=Do,aFt=Pj,yk=Lp,Sz=Tv,Zt=hr,Rn=Pm,uFt=Na,Xg=Bt,_2=TP;function lFt(e){if(j$e(e)&&(B$e(e),F$e(e))){dFt(e);return}L$e(e,()=>(0,M$e.topBoolOrEmptySchema)(e))}wh.validateFunctionCode=lFt;function L$e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Zt._)`${Rn.default.data}, ${Rn.default.valCxt}`,r.$async,()=>{e.code((0,Zt._)`"use strict"; ${oye(n,i)}`),fFt(e,i),e.code(s)}):e.func(t,(0,Zt._)`${Rn.default.data}, ${cFt(i)}`,r.$async,()=>e.code(oye(n,i)).code(s))}function cFt(e){return(0,Zt._)`{${Rn.default.instancePath}="", ${Rn.default.parentData}, ${Rn.default.parentDataProperty}, ${Rn.default.rootData}=${Rn.default.data}${e.dynamicRef?(0,Zt._)`, ${Rn.default.dynamicAnchors}={}`:Zt.nil}}={}`}function fFt(e,t){e.if(Rn.default.valCxt,()=>{e.var(Rn.default.instancePath,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.instancePath}`),e.var(Rn.default.parentData,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.parentData}`),e.var(Rn.default.parentDataProperty,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.parentDataProperty}`),e.var(Rn.default.rootData,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.rootData}`),t.dynamicRef&&e.var(Rn.default.dynamicAnchors,(0,Zt._)`${Rn.default.valCxt}.${Rn.default.dynamicAnchors}`)},()=>{e.var(Rn.default.instancePath,(0,Zt._)`""`),e.var(Rn.default.parentData,(0,Zt._)`undefined`),e.var(Rn.default.parentDataProperty,(0,Zt._)`undefined`),e.var(Rn.default.rootData,Rn.default.data),t.dynamicRef&&e.var(Rn.default.dynamicAnchors,(0,Zt._)`{}`)})}function dFt(e){const{schema:t,opts:n,gen:r}=e;L$e(e,()=>{n.$comment&&t.$comment&&z$e(e),yFt(e),r.let(Rn.default.vErrors,null),r.let(Rn.default.errors,0),n.unevaluated&&hFt(e),U$e(e),_Ft(e)})}function hFt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Zt._)`${n}.evaluated`),t.if((0,Zt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Zt._)`${e.evaluated}.props`,(0,Zt._)`undefined`)),t.if((0,Zt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Zt._)`${e.evaluated}.items`,(0,Zt._)`undefined`))}function oye(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Zt._)`/*# sourceURL=${n} */`:Zt.nil}function pFt(e,t){if(j$e(e)&&(B$e(e),F$e(e))){mFt(e,t);return}(0,M$e.boolOrEmptySchema)(e,t)}function F$e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function j$e(e){return typeof e.schema!="boolean"}function mFt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&z$e(e),vFt(e),bFt(e);const s=r.const("_errs",Rn.default.errors);U$e(e,s),r.var(t,(0,Zt._)`${s} === ${Rn.default.errors}`)}function B$e(e){(0,Xg.checkUnknownRules)(e),gFt(e)}function U$e(e,t){if(e.opts.jtd)return aye(e,[],!1,t);const n=(0,sye.getSchemaTypes)(e.schema),r=(0,sye.coerceAndCheckDataType)(e,n);aye(e,n,!r,t)}function gFt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Xg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function yFt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Xg.checkStrictMode)(e,"default is ignored in the schema root")}function vFt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,uFt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function bFt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function z$e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Zt._)`${Rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Zt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Zt._)`${Rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function _Ft(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Zt._)`${Rn.default.errors} === 0`,()=>t.return(Rn.default.data),()=>t.throw((0,Zt._)`new ${i}(${Rn.default.vErrors})`)):(t.assign((0,Zt._)`${r}.errors`,Rn.default.vErrors),s.unevaluated&&wFt(e),t.return((0,Zt._)`${Rn.default.errors} === 0`))}function wFt({gen:e,evaluated:t,props:n,items:r}){n instanceof Zt.Name&&e.assign((0,Zt._)`${t}.props`,n),r instanceof Zt.Name&&e.assign((0,Zt._)`${t}.items`,r)}function aye(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Xg.schemaHasRulesButRef)(s,c))){i.block(()=>q$e(e,"$ref",c.all.$ref.definition));return}u.jtd||xFt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,ene.shouldUseGroup)(s,d)&&(d.type?(i.if((0,J6.checkDataType)(d.type,o,u.strictNumbers)),uye(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,J6.reportTypeError)(e)),i.endIf()):uye(e,d),a||i.if((0,Zt._)`${Rn.default.errors} === ${r||0}`))}}function uye(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,aFt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,ene.shouldUseRule)(r,s)&&q$e(e,s.keyword,s.definition,t.type)})}function xFt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(EFt(e,t),e.opts.allowUnionTypes||SFt(e,t),TFt(e,e.dataTypes))}function EFt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{V$e(e.dataTypes,n)||tne(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),AFt(e,t)}}function SFt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&tne(e,"use allowUnionTypes to allow union type keyword")}function TFt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,ene.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>CFt(t,o))&&tne(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function CFt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function V$e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function AFt(e,t){const n=[];for(const r of e.dataTypes)V$e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function tne(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Xg.checkStrictMode)(e,t,e.opts.strictTypes)}class H$e{constructor(t,n,r){if((0,yk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Xg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",W$e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,yk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Rn.default.errors))}result(t,n,r){this.failResult((0,Zt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Zt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Zt._)`${n} !== undefined && (${(0,Zt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?_2.reportExtraError:_2.reportError)(this,this.def.error,n)}$dataError(){(0,_2.reportError)(this,this.def.$dataError||_2.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,_2.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Zt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Zt.nil,n=Zt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Zt.or)((0,Zt._)`${i} === undefined`,n)),t!==Zt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Zt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Zt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Zt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Zt._)`${(0,J6.checkDataTypes)(u,n,s.opts.strictNumbers,J6.DataType.Wrong)}`}return Zt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Zt._)`!${u}(${n})`}return Zt.nil}}subschema(t,n){const r=(0,Sz.getSubschema)(this.it,t);(0,Sz.extendSubschemaData)(r,this.it,t),(0,Sz.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return pFt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Xg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Xg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Zt.Name)),!0}}wh.KeywordCxt=H$e;function q$e(e,t,n,r){const i=new H$e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,yk.funcKeywordCode)(i,n):"macro"in n?(0,yk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,yk.funcKeywordCode)(i,n)}const IFt=/^\/(?:[^~]|~0|~1)*$/,kFt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W$e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Rn.default.rootData;if(e[0]==="/"){if(!IFt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Rn.default.rootData}else{const l=kFt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Zt._)`${s}${(0,Zt.getProperty)((0,Xg.unescapeJsonPointer)(l))}`,o=(0,Zt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}wh.getData=W$e;var CP={};Object.defineProperty(CP,"__esModule",{value:!0});class RFt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}CP.default=RFt;var JC={};Object.defineProperty(JC,"__esModule",{value:!0});const Tz=Na;class NFt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Tz.resolveUrl)(t,n,r),this.missingSchema=(0,Tz.normalizeId)((0,Tz.getFullPath)(t,this.missingRef))}}JC.default=NFt;var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.resolveSchema=Ul.getCompilingSchema=Ul.resolveRef=Ul.compileSchema=Ul.SchemaEnv=void 0;const Ld=hr,PFt=CP,xb=Pm,oh=Na,lye=Bt,DFt=wh;class Dj{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,oh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Ul.SchemaEnv=Dj;function nne(e){const t=G$e.call(this,e);if(t)return t;const n=(0,oh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Ld.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:PFt.default,code:(0,Ld._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:xb.default.data,parentData:xb.default.parentData,parentDataProperty:xb.default.parentDataProperty,dataNames:[xb.default.data],dataPathArr:[Ld.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ld.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Ld.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ld._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,DFt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(xb.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${xb.default.self}`,`${xb.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Ld.Name?void 0:p,items:m instanceof Ld.Name?void 0:m,dynamicProps:p instanceof Ld.Name,dynamicItems:m instanceof Ld.Name},h.source&&(h.source.evaluated=(0,Ld.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Ul.compileSchema=nne;function OFt(e,t,n){var r;n=(0,oh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=LFt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new Dj({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=$Ft.call(this,s)}Ul.resolveRef=OFt;function $Ft(e){return(0,oh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:nne.call(this,e)}function G$e(e){for(const t of this._compilations)if(MFt(t,e))return t}Ul.getCompilingSchema=G$e;function MFt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function LFt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Oj.call(this,e,t)}function Oj(e,t){const n=this.opts.uriResolver.parse(t),r=(0,oh._getFullPath)(this.opts.uriResolver,n);let i=(0,oh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Cz.call(this,n,e);const s=(0,oh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=Oj.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Cz.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||nne.call(this,o),s===(0,oh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,oh.resolveUrl)(this.opts.uriResolver,i,l)),new Dj({schema:a,schemaId:u,root:e,baseId:i})}return Cz.call(this,n,o)}}Ul.resolveSchema=Oj;const FFt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Cz(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,lye.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!FFt.has(a)&&l&&(t=(0,oh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,lye.schemaHasRulesButRef)(n,this.RULES)){const a=(0,oh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=Oj.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new Dj({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const jFt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",BFt="Meta-schema for $data reference (JSON AnySchema extension proposal)",UFt="object",zFt=["$data"],VFt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},HFt=!1,qFt={$id:jFt,description:BFt,type:UFt,required:zFt,properties:VFt,additionalProperties:HFt};var rne={},AG={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ts,function(n){function r(){for(var pe=arguments.length,ae=Array(pe),me=0;me<pe;me++)ae[me]=arguments[me];if(ae.length>1){ae[0]=ae[0].slice(0,-1);for(var Le=ae.length-1,Me=1;Me<Le;++Me)ae[Me]=ae[Me].slice(1,-1);return ae[Le]=ae[Le].slice(1),ae.join("")}else return ae[0]}function i(pe){return"(?:"+pe+")"}function s(pe){return pe===void 0?"undefined":pe===null?"null":Object.prototype.toString.call(pe).split(" ").pop().split("]").shift().toLowerCase()}function o(pe){return pe.toUpperCase()}function a(pe){return pe!=null?pe instanceof Array?pe:typeof pe.length!="number"||pe.split||pe.setInterval||pe.call?[pe]:Array.prototype.slice.call(pe):[]}function u(pe,ae){var me=pe;if(ae)for(var Le in ae)me[Le]=ae[Le];return me}function l(pe){var ae="[A-Za-z]",me="[0-9]",Le=r(me,"[A-Fa-f]"),Me=i(i("%[EFef]"+Le+"%"+Le+Le+"%"+Le+Le)+"|"+i("%[89A-Fa-f]"+Le+"%"+Le+Le)+"|"+i("%"+Le+Le)),wt="[\\:\\/\\?\\#\\[\\]\\@]",Ut="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",dn=r(wt,Ut),tr=pe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",cr=pe?"[\\uE000-\\uF8FF]":"[]",On=r(ae,me,"[\\-\\.\\_\\~]",tr);i(ae+r(ae,me,"[\\+\\-\\.]")+"*"),i(i(Me+"|"+r(On,Ut,"[\\:]"))+"*");var Cr=i(i("25[0-5]")+"|"+i("2[0-4]"+me)+"|"+i("1"+me+me)+"|"+i("0?[1-9]"+me)+"|0?0?"+me),ii=i(Cr+"\\."+Cr+"\\."+Cr+"\\."+Cr),on=i(Le+"{1,4}"),Ar=i(i(on+"\\:"+on)+"|"+ii),Kr=i(i(on+"\\:")+"{6}"+Ar),vr=i("\\:\\:"+i(on+"\\:")+"{5}"+Ar),Ci=i(i(on)+"?\\:\\:"+i(on+"\\:")+"{4}"+Ar),lo=i(i(i(on+"\\:")+"{0,1}"+on)+"?\\:\\:"+i(on+"\\:")+"{3}"+Ar),Ai=i(i(i(on+"\\:")+"{0,2}"+on)+"?\\:\\:"+i(on+"\\:")+"{2}"+Ar),So=i(i(i(on+"\\:")+"{0,3}"+on)+"?\\:\\:"+on+"\\:"+Ar),Xi=i(i(i(on+"\\:")+"{0,4}"+on)+"?\\:\\:"+Ar),Qi=i(i(i(on+"\\:")+"{0,5}"+on)+"?\\:\\:"+on),To=i(i(i(on+"\\:")+"{0,6}"+on)+"?\\:\\:"),_a=i([Kr,vr,Ci,lo,Ai,So,Xi,Qi,To].join("|")),co=i(i(On+"|"+Me)+"+");i("[vV]"+Le+"+\\."+r(On,Ut,"[\\:]")+"+"),i(i(Me+"|"+r(On,Ut))+"*");var _l=i(Me+"|"+r(On,Ut,"[\\:\\@]"));return i(i(Me+"|"+r(On,Ut,"[\\@]"))+"+"),i(i(_l+"|"+r("[\\/\\?]",cr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ae,me,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",On,Ut),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",On,Ut),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",On,Ut),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",On,Ut),"g"),NOT_QUERY:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]",cr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",On,Ut),"g"),UNRESERVED:new RegExp(On,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",On,dn),"g"),PCT_ENCODED:new RegExp(Me,"g"),IPV4ADDRESS:new RegExp("^("+ii+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_a+")"+i(i("\\%25|\\%(?!"+Le+"{2})")+"("+co+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function pe(ae,me){var Le=[],Me=!0,wt=!1,Ut=void 0;try{for(var dn=ae[Symbol.iterator](),tr;!(Me=(tr=dn.next()).done)&&(Le.push(tr.value),!(me&&Le.length===me));Me=!0);}catch(cr){wt=!0,Ut=cr}finally{try{!Me&&dn.return&&dn.return()}finally{if(wt)throw Ut}}return Le}return function(ae,me){if(Array.isArray(ae))return ae;if(Symbol.iterator in Object(ae))return pe(ae,me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(pe){if(Array.isArray(pe)){for(var ae=0,me=Array(pe.length);ae<pe.length;ae++)me[ae]=pe[ae];return me}else return Array.from(pe)},p=2147483647,m=36,g=1,y=26,b=38,w=700,E=72,S=128,T="-",C=/^xn--/,I=/[^\0-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=m-g,L=Math.floor,M=String.fromCharCode;function F(pe){throw new RangeError(P[pe])}function z(pe,ae){for(var me=[],Le=pe.length;Le--;)me[Le]=ae(pe[Le]);return me}function B(pe,ae){var me=pe.split("@"),Le="";me.length>1&&(Le=me[0]+"@",pe=me[1]),pe=pe.replace(R,".");var Me=pe.split("."),wt=z(Me,ae).join(".");return Le+wt}function H(pe){for(var ae=[],me=0,Le=pe.length;me<Le;){var Me=pe.charCodeAt(me++);if(Me>=55296&&Me<=56319&&me<Le){var wt=pe.charCodeAt(me++);(wt&64512)==56320?ae.push(((Me&1023)<<10)+(wt&1023)+65536):(ae.push(Me),me--)}else ae.push(Me)}return ae}var q=function(ae){return String.fromCodePoint.apply(String,h(ae))},Y=function(ae){return ae-48<10?ae-22:ae-65<26?ae-65:ae-97<26?ae-97:m},$=function(ae,me){return ae+22+75*(ae<26)-((me!=0)<<5)},W=function(ae,me,Le){var Me=0;for(ae=Le?L(ae/w):ae>>1,ae+=L(ae/me);ae>D*y>>1;Me+=m)ae=L(ae/D);return L(Me+(D+1)*ae/(ae+b))},X=function(ae){var me=[],Le=ae.length,Me=0,wt=S,Ut=E,dn=ae.lastIndexOf(T);dn<0&&(dn=0);for(var tr=0;tr<dn;++tr)ae.charCodeAt(tr)>=128&&F("not-basic"),me.push(ae.charCodeAt(tr));for(var cr=dn>0?dn+1:0;cr<Le;){for(var On=Me,Cr=1,ii=m;;ii+=m){cr>=Le&&F("invalid-input");var on=Y(ae.charCodeAt(cr++));(on>=m||on>L((p-Me)/Cr))&&F("overflow"),Me+=on*Cr;var Ar=ii<=Ut?g:ii>=Ut+y?y:ii-Ut;if(on<Ar)break;var Kr=m-Ar;Cr>L(p/Kr)&&F("overflow"),Cr*=Kr}var vr=me.length+1;Ut=W(Me-On,vr,On==0),L(Me/vr)>p-wt&&F("overflow"),wt+=L(Me/vr),Me%=vr,me.splice(Me++,0,wt)}return String.fromCodePoint.apply(String,me)},V=function(ae){var me=[];ae=H(ae);var Le=ae.length,Me=S,wt=0,Ut=E,dn=!0,tr=!1,cr=void 0;try{for(var On=ae[Symbol.iterator](),Cr;!(dn=(Cr=On.next()).done);dn=!0){var ii=Cr.value;ii<128&&me.push(M(ii))}}catch(We){tr=!0,cr=We}finally{try{!dn&&On.return&&On.return()}finally{if(tr)throw cr}}var on=me.length,Ar=on;for(on&&me.push(T);Ar<Le;){var Kr=p,vr=!0,Ci=!1,lo=void 0;try{for(var Ai=ae[Symbol.iterator](),So;!(vr=(So=Ai.next()).done);vr=!0){var Xi=So.value;Xi>=Me&&Xi<Kr&&(Kr=Xi)}}catch(We){Ci=!0,lo=We}finally{try{!vr&&Ai.return&&Ai.return()}finally{if(Ci)throw lo}}var Qi=Ar+1;Kr-Me>L((p-wt)/Qi)&&F("overflow"),wt+=(Kr-Me)*Qi,Me=Kr;var To=!0,_a=!1,co=void 0;try{for(var _l=ae[Symbol.iterator](),gf;!(To=(gf=_l.next()).done);To=!0){var ee=gf.value;if(ee<Me&&++wt>p&&F("overflow"),ee==Me){for(var he=wt,se=m;;se+=m){var we=se<=Ut?g:se>=Ut+y?y:se-Ut;if(he<we)break;var Ie=he-we,ve=m-we;me.push(M($(we+Ie%ve,0))),he=L(Ie/ve)}me.push(M($(he,0))),Ut=W(wt,Qi,Ar==on),wt=0,++Ar}}}catch(We){_a=!0,co=We}finally{try{!To&&_l.return&&_l.return()}finally{if(_a)throw co}}++wt,++Me}return me.join("")},K=function(ae){return B(ae,function(me){return C.test(me)?X(me.slice(4).toLowerCase()):me})},J=function(ae){return B(ae,function(me){return I.test(me)?"xn--"+V(me):me})},ue={version:"2.1.0",ucs2:{decode:H,encode:q},decode:X,encode:V,toASCII:J,toUnicode:K},_e={};function be(pe){var ae=pe.charCodeAt(0),me=void 0;return ae<16?me="%0"+ae.toString(16).toUpperCase():ae<128?me="%"+ae.toString(16).toUpperCase():ae<2048?me="%"+(ae>>6|192).toString(16).toUpperCase()+"%"+(ae&63|128).toString(16).toUpperCase():me="%"+(ae>>12|224).toString(16).toUpperCase()+"%"+(ae>>6&63|128).toString(16).toUpperCase()+"%"+(ae&63|128).toString(16).toUpperCase(),me}function xe(pe){for(var ae="",me=0,Le=pe.length;me<Le;){var Me=parseInt(pe.substr(me+1,2),16);if(Me<128)ae+=String.fromCharCode(Me),me+=3;else if(Me>=194&&Me<224){if(Le-me>=6){var wt=parseInt(pe.substr(me+4,2),16);ae+=String.fromCharCode((Me&31)<<6|wt&63)}else ae+=pe.substr(me,6);me+=6}else if(Me>=224){if(Le-me>=9){var Ut=parseInt(pe.substr(me+4,2),16),dn=parseInt(pe.substr(me+7,2),16);ae+=String.fromCharCode((Me&15)<<12|(Ut&63)<<6|dn&63)}else ae+=pe.substr(me,9);me+=9}else ae+=pe.substr(me,3),me+=3}return ae}function ke(pe,ae){function me(Le){var Me=xe(Le);return Me.match(ae.UNRESERVED)?Me:Le}return pe.scheme&&(pe.scheme=String(pe.scheme).replace(ae.PCT_ENCODED,me).toLowerCase().replace(ae.NOT_SCHEME,"")),pe.userinfo!==void 0&&(pe.userinfo=String(pe.userinfo).replace(ae.PCT_ENCODED,me).replace(ae.NOT_USERINFO,be).replace(ae.PCT_ENCODED,o)),pe.host!==void 0&&(pe.host=String(pe.host).replace(ae.PCT_ENCODED,me).toLowerCase().replace(ae.NOT_HOST,be).replace(ae.PCT_ENCODED,o)),pe.path!==void 0&&(pe.path=String(pe.path).replace(ae.PCT_ENCODED,me).replace(pe.scheme?ae.NOT_PATH:ae.NOT_PATH_NOSCHEME,be).replace(ae.PCT_ENCODED,o)),pe.query!==void 0&&(pe.query=String(pe.query).replace(ae.PCT_ENCODED,me).replace(ae.NOT_QUERY,be).replace(ae.PCT_ENCODED,o)),pe.fragment!==void 0&&(pe.fragment=String(pe.fragment).replace(ae.PCT_ENCODED,me).replace(ae.NOT_FRAGMENT,be).replace(ae.PCT_ENCODED,o)),pe}function je(pe){return pe.replace(/^0*(.*)/,"$1")||"0"}function Re(pe,ae){var me=pe.match(ae.IPV4ADDRESS)||[],Le=d(me,2),Me=Le[1];return Me?Me.split(".").map(je).join("."):pe}function ft(pe,ae){var me=pe.match(ae.IPV6ADDRESS)||[],Le=d(me,3),Me=Le[1],wt=Le[2];if(Me){for(var Ut=Me.toLowerCase().split("::").reverse(),dn=d(Ut,2),tr=dn[0],cr=dn[1],On=cr?cr.split(":").map(je):[],Cr=tr.split(":").map(je),ii=ae.IPV4ADDRESS.test(Cr[Cr.length-1]),on=ii?7:8,Ar=Cr.length-on,Kr=Array(on),vr=0;vr<on;++vr)Kr[vr]=On[vr]||Cr[Ar+vr]||"";ii&&(Kr[on-1]=Re(Kr[on-1],ae));var Ci=Kr.reduce(function(Qi,To,_a){if(!To||To==="0"){var co=Qi[Qi.length-1];co&&co.index+co.length===_a?co.length++:Qi.push({index:_a,length:1})}return Qi},[]),lo=Ci.sort(function(Qi,To){return To.length-Qi.length})[0],Ai=void 0;if(lo&&lo.length>1){var So=Kr.slice(0,lo.index),Xi=Kr.slice(lo.index+lo.length);Ai=So.join(":")+"::"+Xi.join(":")}else Ai=Kr.join(":");return wt&&(Ai+="%"+wt),Ai}else return pe}var Ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,It="".match(/(){0}/)[1]===void 0;function bt(pe){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me={},Le=ae.iri!==!1?f:c;ae.reference==="suffix"&&(pe=(ae.scheme?ae.scheme+":":"")+"//"+pe);var Me=pe.match(Ze);if(Me){It?(me.scheme=Me[1],me.userinfo=Me[3],me.host=Me[4],me.port=parseInt(Me[5],10),me.path=Me[6]||"",me.query=Me[7],me.fragment=Me[8],isNaN(me.port)&&(me.port=Me[5])):(me.scheme=Me[1]||void 0,me.userinfo=pe.indexOf("@")!==-1?Me[3]:void 0,me.host=pe.indexOf("//")!==-1?Me[4]:void 0,me.port=parseInt(Me[5],10),me.path=Me[6]||"",me.query=pe.indexOf("?")!==-1?Me[7]:void 0,me.fragment=pe.indexOf("#")!==-1?Me[8]:void 0,isNaN(me.port)&&(me.port=pe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Me[4]:void 0)),me.host&&(me.host=ft(Re(me.host,Le),Le)),me.scheme===void 0&&me.userinfo===void 0&&me.host===void 0&&me.port===void 0&&!me.path&&me.query===void 0?me.reference="same-document":me.scheme===void 0?me.reference="relative":me.fragment===void 0?me.reference="absolute":me.reference="uri",ae.reference&&ae.reference!=="suffix"&&ae.reference!==me.reference&&(me.error=me.error||"URI is not a "+ae.reference+" reference.");var wt=_e[(ae.scheme||me.scheme||"").toLowerCase()];if(!ae.unicodeSupport&&(!wt||!wt.unicodeSupport)){if(me.host&&(ae.domainHost||wt&&wt.domainHost))try{me.host=ue.toASCII(me.host.replace(Le.PCT_ENCODED,xe).toLowerCase())}catch(Ut){me.error=me.error||"Host's domain name can not be converted to ASCII via punycode: "+Ut}ke(me,c)}else ke(me,Le);wt&&wt.parse&&wt.parse(me,ae)}else me.error=me.error||"URI can not be parsed.";return me}function Ae(pe,ae){var me=ae.iri!==!1?f:c,Le=[];return pe.userinfo!==void 0&&(Le.push(pe.userinfo),Le.push("@")),pe.host!==void 0&&Le.push(ft(Re(String(pe.host),me),me).replace(me.IPV6ADDRESS,function(Me,wt,Ut){return"["+wt+(Ut?"%25"+Ut:"")+"]"})),(typeof pe.port=="number"||typeof pe.port=="string")&&(Le.push(":"),Le.push(String(pe.port))),Le.length?Le.join(""):void 0}var Be=/^\.\.?\//,st=/^\/\.(\/|$)/,_t=/^\/\.\.(\/|$)/,jt=/^\/?(?:.|\n)*?(?=\/|$)/;function ot(pe){for(var ae=[];pe.length;)if(pe.match(Be))pe=pe.replace(Be,"");else if(pe.match(st))pe=pe.replace(st,"/");else if(pe.match(_t))pe=pe.replace(_t,"/"),ae.pop();else if(pe==="."||pe==="..")pe="";else{var me=pe.match(jt);if(me){var Le=me[0];pe=pe.slice(Le.length),ae.push(Le)}else throw new Error("Unexpected dot segment condition")}return ae.join("")}function Se(pe){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=ae.iri?f:c,Le=[],Me=_e[(ae.scheme||pe.scheme||"").toLowerCase()];if(Me&&Me.serialize&&Me.serialize(pe,ae),pe.host&&!me.IPV6ADDRESS.test(pe.host)){if(ae.domainHost||Me&&Me.domainHost)try{pe.host=ae.iri?ue.toUnicode(pe.host):ue.toASCII(pe.host.replace(me.PCT_ENCODED,xe).toLowerCase())}catch(dn){pe.error=pe.error||"Host's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+dn}}ke(pe,me),ae.reference!=="suffix"&&pe.scheme&&(Le.push(pe.scheme),Le.push(":"));var wt=Ae(pe,ae);if(wt!==void 0&&(ae.reference!=="suffix"&&Le.push("//"),Le.push(wt),pe.path&&pe.path.charAt(0)!=="/"&&Le.push("/")),pe.path!==void 0){var Ut=pe.path;!ae.absolutePath&&(!Me||!Me.absolutePath)&&(Ut=ot(Ut)),wt===void 0&&(Ut=Ut.replace(/^\/\//,"/%2F")),Le.push(Ut)}return pe.query!==void 0&&(Le.push("?"),Le.push(pe.query)),pe.fragment!==void 0&&(Le.push("#"),Le.push(pe.fragment)),Le.join("")}function kt(pe,ae){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Le=arguments[3],Me={};return Le||(pe=bt(Se(pe,me),me),ae=bt(Se(ae,me),me)),me=me||{},!me.tolerant&&ae.scheme?(Me.scheme=ae.scheme,Me.userinfo=ae.userinfo,Me.host=ae.host,Me.port=ae.port,Me.path=ot(ae.path||""),Me.query=ae.query):(ae.userinfo!==void 0||ae.host!==void 0||ae.port!==void 0?(Me.userinfo=ae.userinfo,Me.host=ae.host,Me.port=ae.port,Me.path=ot(ae.path||""),Me.query=ae.query):(ae.path?(ae.path.charAt(0)==="/"?Me.path=ot(ae.path):((pe.userinfo!==void 0||pe.host!==void 0||pe.port!==void 0)&&!pe.path?Me.path="/"+ae.path:pe.path?Me.path=pe.path.slice(0,pe.path.lastIndexOf("/")+1)+ae.path:Me.path=ae.path,Me.path=ot(Me.path)),Me.query=ae.query):(Me.path=pe.path,ae.query!==void 0?Me.query=ae.query:Me.query=pe.query),Me.userinfo=pe.userinfo,Me.host=pe.host,Me.port=pe.port),Me.scheme=pe.scheme),Me.fragment=ae.fragment,Me}function Rt(pe,ae,me){var Le=u({scheme:"null"},me);return Se(kt(bt(pe,Le),bt(ae,Le),Le,!0),Le)}function Te(pe,ae){return typeof pe=="string"?pe=Se(bt(pe,ae),ae):s(pe)==="object"&&(pe=bt(Se(pe,ae),ae)),pe}function $e(pe,ae,me){return typeof pe=="string"?pe=Se(bt(pe,me),me):s(pe)==="object"&&(pe=Se(pe,me)),typeof ae=="string"?ae=Se(bt(ae,me),me):s(ae)==="object"&&(ae=Se(ae,me)),pe===ae}function rt(pe,ae){return pe&&pe.toString().replace(!ae||!ae.iri?c.ESCAPE:f.ESCAPE,be)}function St(pe,ae){return pe&&pe.toString().replace(!ae||!ae.iri?c.PCT_ENCODED:f.PCT_ENCODED,xe)}var Mt={scheme:"http",domainHost:!0,parse:function(ae,me){return ae.host||(ae.error=ae.error||"HTTP URIs must have a host."),ae},serialize:function(ae,me){var Le=String(ae.scheme).toLowerCase()==="https";return(ae.port===(Le?443:80)||ae.port==="")&&(ae.port=void 0),ae.path||(ae.path="/"),ae}},Zn={scheme:"https",domainHost:Mt.domainHost,parse:Mt.parse,serialize:Mt.serialize};function Br(pe){return typeof pe.secure=="boolean"?pe.secure:String(pe.scheme).toLowerCase()==="wss"}var er={scheme:"ws",domainHost:!0,parse:function(ae,me){var Le=ae;return Le.secure=Br(Le),Le.resourceName=(Le.path||"/")+(Le.query?"?"+Le.query:""),Le.path=void 0,Le.query=void 0,Le},serialize:function(ae,me){if((ae.port===(Br(ae)?443:80)||ae.port==="")&&(ae.port=void 0),typeof ae.secure=="boolean"&&(ae.scheme=ae.secure?"wss":"ws",ae.secure=void 0),ae.resourceName){var Le=ae.resourceName.split("?"),Me=d(Le,2),wt=Me[0],Ut=Me[1];ae.path=wt&&wt!=="/"?wt:void 0,ae.query=Ut,ae.resourceName=void 0}return ae.fragment=void 0,ae}},yr={scheme:"wss",domainHost:er.domainHost,parse:er.parse,serialize:er.serialize},kn={},Un="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",pr="[0-9A-Fa-f]",Tr=i(i("%[EFef]"+pr+"%"+pr+pr+"%"+pr+pr)+"|"+i("%[89A-Fa-f]"+pr+"%"+pr+pr)+"|"+i("%"+pr+pr)),Yo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",us="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Vn=r(us,'[\\"\\\\]'),Yi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ri=new RegExp(Un,"g"),Ns=new RegExp(Tr,"g"),Sd=new RegExp(r("[^]",Yo,"[\\.]",'[\\"]',Vn),"g"),Pu=new RegExp(r("[^]",Un,Yi),"g"),wc=Pu;function Yr(pe){var ae=xe(pe);return ae.match(ri)?ae:pe}var Ki={scheme:"mailto",parse:function(ae,me){var Le=ae,Me=Le.to=Le.path?Le.path.split(","):[];if(Le.path=void 0,Le.query){for(var wt=!1,Ut={},dn=Le.query.split("&"),tr=0,cr=dn.length;tr<cr;++tr){var On=dn[tr].split("=");switch(On[0]){case"to":for(var Cr=On[1].split(","),ii=0,on=Cr.length;ii<on;++ii)Me.push(Cr[ii]);break;case"subject":Le.subject=St(On[1],me);break;case"body":Le.body=St(On[1],me);break;default:wt=!0,Ut[St(On[0],me)]=St(On[1],me);break}}wt&&(Le.headers=Ut)}Le.query=void 0;for(var Ar=0,Kr=Me.length;Ar<Kr;++Ar){var vr=Me[Ar].split("@");if(vr[0]=St(vr[0]),me.unicodeSupport)vr[1]=St(vr[1],me).toLowerCase();else try{vr[1]=ue.toASCII(St(vr[1],me).toLowerCase())}catch(Ci){Le.error=Le.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ci}Me[Ar]=vr.join("@")}return Le},serialize:function(ae,me){var Le=ae,Me=a(ae.to);if(Me){for(var wt=0,Ut=Me.length;wt<Ut;++wt){var dn=String(Me[wt]),tr=dn.lastIndexOf("@"),cr=dn.slice(0,tr).replace(Ns,Yr).replace(Ns,o).replace(Sd,be),On=dn.slice(tr+1);try{On=me.iri?ue.toUnicode(On):ue.toASCII(St(On,me).toLowerCase())}catch(Ar){Le.error=Le.error||"Email address's domain name can not be converted to "+(me.iri?"Unicode":"ASCII")+" via punycode: "+Ar}Me[wt]=cr+"@"+On}Le.path=Me.join(",")}var Cr=ae.headers=ae.headers||{};ae.subject&&(Cr.subject=ae.subject),ae.body&&(Cr.body=ae.body);var ii=[];for(var on in Cr)Cr[on]!==kn[on]&&ii.push(on.replace(Ns,Yr).replace(Ns,o).replace(Pu,be)+"="+Cr[on].replace(Ns,Yr).replace(Ns,o).replace(wc,be));return ii.length&&(Le.query=ii.join("&")),Le}},Ti=/^([^\:]+)\:(.*)/,Ko={scheme:"urn",parse:function(ae,me){var Le=ae.path&&ae.path.match(Ti),Me=ae;if(Le){var wt=me.scheme||Me.scheme||"urn",Ut=Le[1].toLowerCase(),dn=Le[2],tr=wt+":"+(me.nid||Ut),cr=_e[tr];Me.nid=Ut,Me.nss=dn,Me.path=void 0,cr&&(Me=cr.parse(Me,me))}else Me.error=Me.error||"URN can not be parsed.";return Me},serialize:function(ae,me){var Le=me.scheme||ae.scheme||"urn",Me=ae.nid,wt=Le+":"+(me.nid||Me),Ut=_e[wt];Ut&&(ae=Ut.serialize(ae,me));var dn=ae,tr=ae.nss;return dn.path=(Me||me.nid)+":"+tr,dn}},ba=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Eo={scheme:"urn:uuid",parse:function(ae,me){var Le=ae;return Le.uuid=Le.nss,Le.nss=void 0,!me.tolerant&&(!Le.uuid||!Le.uuid.match(ba))&&(Le.error=Le.error||"UUID is not valid."),Le},serialize:function(ae,me){var Le=ae;return Le.nss=(ae.uuid||"").toLowerCase(),Le}};_e[Mt.scheme]=Mt,_e[Zn.scheme]=Zn,_e[er.scheme]=er,_e[yr.scheme]=yr,_e[Ki.scheme]=Ki,_e[Ko.scheme]=Ko,_e[Eo.scheme]=Eo,n.SCHEMES=_e,n.pctEncChar=be,n.pctDecChars=xe,n.parse=bt,n.removeDotSegments=ot,n.serialize=Se,n.resolveComponents=kt,n.resolve=Rt,n.normalize=Te,n.equal=$e,n.escapeComponent=rt,n.unescapeComponent=St,Object.defineProperty(n,"__esModule",{value:!0})})})(AG,AG.exports);var WFt=AG.exports;Object.defineProperty(rne,"__esModule",{value:!0});const Y$e=WFt;Y$e.code='require("ajv/dist/runtime/uri").default';rne.default=Y$e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=wh;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=hr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=CP,i=JC,s=uw,o=Ul,a=hr,u=Na,l=Do,c=Bt,f=qFt,d=rne,h=($,W)=>new RegExp($,W);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w($){var W,X,V,K,J,ue,_e,be,xe,ke,je,Re,ft,Ze,It,bt,Ae,Be,st,_t,jt,ot,Se,kt,Rt;const Te=$.strict,$e=(W=$.code)===null||W===void 0?void 0:W.optimize,rt=$e===!0||$e===void 0?1:$e||0,St=(V=(X=$.code)===null||X===void 0?void 0:X.regExp)!==null&&V!==void 0?V:h,Mt=(K=$.uriResolver)!==null&&K!==void 0?K:d.default;return{strictSchema:(ue=(J=$.strictSchema)!==null&&J!==void 0?J:Te)!==null&&ue!==void 0?ue:!0,strictNumbers:(be=(_e=$.strictNumbers)!==null&&_e!==void 0?_e:Te)!==null&&be!==void 0?be:!0,strictTypes:(ke=(xe=$.strictTypes)!==null&&xe!==void 0?xe:Te)!==null&&ke!==void 0?ke:"log",strictTuples:(Re=(je=$.strictTuples)!==null&&je!==void 0?je:Te)!==null&&Re!==void 0?Re:"log",strictRequired:(Ze=(ft=$.strictRequired)!==null&&ft!==void 0?ft:Te)!==null&&Ze!==void 0?Ze:!1,code:$.code?{...$.code,optimize:rt,regExp:St}:{optimize:rt,regExp:St},loopRequired:(It=$.loopRequired)!==null&&It!==void 0?It:b,loopEnum:(bt=$.loopEnum)!==null&&bt!==void 0?bt:b,meta:(Ae=$.meta)!==null&&Ae!==void 0?Ae:!0,messages:(Be=$.messages)!==null&&Be!==void 0?Be:!0,inlineRefs:(st=$.inlineRefs)!==null&&st!==void 0?st:!0,schemaId:(_t=$.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(jt=$.addUsedSchema)!==null&&jt!==void 0?jt:!0,validateSchema:(ot=$.validateSchema)!==null&&ot!==void 0?ot:!0,validateFormats:(Se=$.validateFormats)!==null&&Se!==void 0?Se:!0,unicodeRegExp:(kt=$.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(Rt=$.int32range)!==null&&Rt!==void 0?Rt:!0,uriResolver:Mt}}class E{constructor(W={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,W=this.opts={...W,...w(W)};const{es5:X,lines:V}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:X,lines:V}),this.logger=L(W.logger);const K=W.validateFormats;W.validateFormats=!1,this.RULES=(0,s.getRules)(),S.call(this,g,W,"NOT SUPPORTED"),S.call(this,y,W,"DEPRECATED","warn"),this._metaOpts=P.call(this),W.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),W.keywords&&R.call(this,W.keywords),typeof W.meta=="object"&&this.addMetaSchema(W.meta),C.call(this),W.validateFormats=K}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:W,meta:X,schemaId:V}=this.opts;let K=f;V==="id"&&(K={...f},K.id=K.$id,delete K.$id),X&&W&&this.addMetaSchema(K,K[V],!1)}defaultMeta(){const{meta:W,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof W=="object"?W[X]||W:void 0}validate(W,X){let V;if(typeof W=="string"){if(V=this.getSchema(W),!V)throw new Error(`no schema with key or ref "${W}"`)}else V=this.compile(W);const K=V(X);return"$async"in V||(this.errors=V.errors),K}compile(W,X){const V=this._addSchema(W,X);return V.validate||this._compileSchemaEnv(V)}compileAsync(W,X){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:V}=this.opts;return K.call(this,W,X);async function K(ke,je){await J.call(this,ke.$schema);const Re=this._addSchema(ke,je);return Re.validate||ue.call(this,Re)}async function J(ke){ke&&!this.getSchema(ke)&&await K.call(this,{$ref:ke},!0)}async function ue(ke){try{return this._compileSchemaEnv(ke)}catch(je){if(!(je instanceof i.default))throw je;return _e.call(this,je),await be.call(this,je.missingSchema),ue.call(this,ke)}}function _e({missingSchema:ke,missingRef:je}){if(this.refs[ke])throw new Error(`AnySchema ${ke} is loaded but ${je} cannot be resolved`)}async function be(ke){const je=await xe.call(this,ke);this.refs[ke]||await J.call(this,je.$schema),this.refs[ke]||this.addSchema(je,ke,X)}async function xe(ke){const je=this._loading[ke];if(je)return je;try{return await(this._loading[ke]=V(ke))}finally{delete this._loading[ke]}}}addSchema(W,X,V,K=this.opts.validateSchema){if(Array.isArray(W)){for(const ue of W)this.addSchema(ue,void 0,V,K);return this}let J;if(typeof W=="object"){const{schemaId:ue}=this.opts;if(J=W[ue],J!==void 0&&typeof J!="string")throw new Error(`schema ${ue} must be string`)}return X=(0,u.normalizeId)(X||J),this._checkUnique(X),this.schemas[X]=this._addSchema(W,V,X,K,!0),this}addMetaSchema(W,X,V=this.opts.validateSchema){return this.addSchema(W,X,!0,V),this}validateSchema(W,X){if(typeof W=="boolean")return!0;let V;if(V=W.$schema,V!==void 0&&typeof V!="string")throw new Error("$schema must be a string");if(V=V||this.opts.defaultMeta||this.defaultMeta(),!V)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const K=this.validate(V,W);if(!K&&X){const J="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(J);else throw new Error(J)}return K}getSchema(W){let X;for(;typeof(X=T.call(this,W))=="string";)W=X;if(X===void 0){const{schemaId:V}=this.opts,K=new o.SchemaEnv({schema:{},schemaId:V});if(X=o.resolveSchema.call(this,K,W),!X)return;this.refs[W]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(W){if(W instanceof RegExp)return this._removeAllSchemas(this.schemas,W),this._removeAllSchemas(this.refs,W),this;switch(typeof W){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const X=T.call(this,W);return typeof X=="object"&&this._cache.delete(X.schema),delete this.schemas[W],delete this.refs[W],this}case"object":{const X=W;this._cache.delete(X);let V=W[this.opts.schemaId];return V&&(V=(0,u.normalizeId)(V),delete this.schemas[V],delete this.refs[V]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(W){for(const X of W)this.addKeyword(X);return this}addKeyword(W,X){let V;if(typeof W=="string")V=W,typeof X=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=V);else if(typeof W=="object"&&X===void 0){if(X=W,V=X.keyword,Array.isArray(V)&&!V.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(F.call(this,V,X),!X)return(0,c.eachItem)(V,J=>z.call(this,J)),this;H.call(this,X);const K={...X,type:(0,l.getJSONTypes)(X.type),schemaType:(0,l.getJSONTypes)(X.schemaType)};return(0,c.eachItem)(V,K.type.length===0?J=>z.call(this,J,K):J=>K.type.forEach(ue=>z.call(this,J,K,ue))),this}getKeyword(W){const X=this.RULES.all[W];return typeof X=="object"?X.definition:!!X}removeKeyword(W){const{RULES:X}=this;delete X.keywords[W],delete X.all[W];for(const V of X.rules){const K=V.rules.findIndex(J=>J.keyword===W);K>=0&&V.rules.splice(K,1)}return this}addFormat(W,X){return typeof X=="string"&&(X=new RegExp(X)),this.formats[W]=X,this}errorsText(W=this.errors,{separator:X=", ",dataVar:V="data"}={}){return!W||W.length===0?"No errors":W.map(K=>`${V}${K.instancePath} ${K.message}`).reduce((K,J)=>K+X+J)}$dataMetaSchema(W,X){const V=this.RULES.all;W=JSON.parse(JSON.stringify(W));for(const K of X){const J=K.split("/").slice(1);let ue=W;for(const _e of J)ue=ue[_e];for(const _e in V){const be=V[_e];if(typeof be!="object")continue;const{$data:xe}=be.definition,ke=ue[_e];xe&&ke&&(ue[_e]=Y(ke))}}return W}_removeAllSchemas(W,X){for(const V in W){const K=W[V];(!X||X.test(V))&&(typeof K=="string"?delete W[V]:K&&!K.meta&&(this._cache.delete(K.schema),delete W[V]))}}_addSchema(W,X,V,K=this.opts.validateSchema,J=this.opts.addUsedSchema){let ue;const{schemaId:_e}=this.opts;if(typeof W=="object")ue=W[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof W!="boolean")throw new Error("schema must be object or boolean")}let be=this._cache.get(W);if(be!==void 0)return be;V=(0,u.normalizeId)(ue||V);const xe=u.getSchemaRefs.call(this,W,V);return be=new o.SchemaEnv({schema:W,schemaId:_e,meta:X,baseId:V,localRefs:xe}),this._cache.set(be.schema,be),J&&!V.startsWith("#")&&(V&&this._checkUnique(V),this.refs[V]=be),K&&this.validateSchema(W,!0),be}_checkUnique(W){if(this.schemas[W]||this.refs[W])throw new Error(`schema with key or id "${W}" already exists`)}_compileSchemaEnv(W){if(W.meta?this._compileMetaSchema(W):o.compileSchema.call(this,W),!W.validate)throw new Error("ajv implementation error");return W.validate}_compileMetaSchema(W){const X=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,W)}finally{this.opts=X}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function S($,W,X,V="error"){for(const K in $){const J=K;J in W&&this.logger[V](`${X}: option ${K}. ${$[J]}`)}}function T($){return $=(0,u.normalizeId)($),this.schemas[$]||this.refs[$]}function C(){const $=this.opts.schemas;if($)if(Array.isArray($))this.addSchema($);else for(const W in $)this.addSchema($[W],W)}function I(){for(const $ in this.opts.formats){const W=this.opts.formats[$];W&&this.addFormat($,W)}}function R($){if(Array.isArray($)){this.addVocabulary($);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const W in $){const X=$[W];X.keyword||(X.keyword=W),this.addKeyword(X)}}function P(){const $={...this.opts};for(const W of p)delete $[W];return $}const D={log(){},warn(){},error(){}};function L($){if($===!1)return D;if($===void 0)return console;if($.log&&$.warn&&$.error)return $;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function F($,W){const{RULES:X}=this;if((0,c.eachItem)($,V=>{if(X.keywords[V])throw new Error(`Keyword ${V} is already defined`);if(!M.test(V))throw new Error(`Keyword ${V} has invalid name`)}),!!W&&W.$data&&!("code"in W||"validate"in W))throw new Error('$data keyword must have "code" or "validate" function')}function z($,W,X){var V;const K=W==null?void 0:W.post;if(X&&K)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:J}=this;let ue=K?J.post:J.rules.find(({type:be})=>be===X);if(ue||(ue={type:X,rules:[]},J.rules.push(ue)),J.keywords[$]=!0,!W)return;const _e={keyword:$,definition:{...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)}};W.before?B.call(this,ue,_e,W.before):ue.rules.push(_e),J.all[$]=_e,(V=W.implements)===null||V===void 0||V.forEach(be=>this.addKeyword(be))}function B($,W,X){const V=$.rules.findIndex(K=>K.keyword===X);V>=0?$.rules.splice(V,0,W):($.rules.push(W),this.logger.warn(`rule ${X} is not defined`))}function H($){let{metaSchema:W}=$;W!==void 0&&($.$data&&this.opts.$data&&(W=Y(W)),$.validateSchema=this.compile(W,!0))}const q={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Y($){return{anyOf:[$,q]}}})(g$e);var ine={},sne={},one={};Object.defineProperty(one,"__esModule",{value:!0});const GFt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};one.default=GFt;var lw={};Object.defineProperty(lw,"__esModule",{value:!0});lw.callRef=lw.getValidate=void 0;const YFt=JC,cye=fr,Rl=hr,tE=Pm,fye=Ul,y3=Bt,KFt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=fye.resolveRef.call(u,l,i,n);if(c===void 0)throw new YFt.default(r.opts.uriResolver,i,n);if(c instanceof fye.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return G$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return G$(e,(0,Rl._)`${p}.validate`,l,l.$async)}function d(p){const m=K$e(e,p);G$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Rl.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Rl.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function K$e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Rl._)`${n.scopeValue("wrapper",{ref:t})}.validate`}lw.getValidate=K$e;function G$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?tE.default.this:Rl.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Rl._)`await ${(0,cye.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Rl._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,cye.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Rl._)`${p}.errors`;i.assign(tE.default.vErrors,(0,Rl._)`${tE.default.vErrors} === null ? ${m} : ${tE.default.vErrors}.concat(${m})`),i.assign(tE.default.errors,(0,Rl._)`${tE.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=y3.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Rl._)`${p}.evaluated.props`);s.props=y3.mergeEvaluated.props(i,y,s.props,Rl.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=y3.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Rl._)`${p}.evaluated.items`);s.items=y3.mergeEvaluated.items(i,y,s.items,Rl.Name)}}}lw.callRef=G$;lw.default=KFt;Object.defineProperty(sne,"__esModule",{value:!0});const XFt=one,QFt=lw,JFt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",XFt.default,QFt.default];sne.default=JFt;var ane={},une={};Object.defineProperty(une,"__esModule",{value:!0});const Z6=hr,_y=Z6.operators,eF={maximum:{okStr:"<=",ok:_y.LTE,fail:_y.GT},minimum:{okStr:">=",ok:_y.GTE,fail:_y.LT},exclusiveMaximum:{okStr:"<",ok:_y.LT,fail:_y.GTE},exclusiveMinimum:{okStr:">",ok:_y.GT,fail:_y.LTE}},ZFt={message:({keyword:e,schemaCode:t})=>(0,Z6.str)`must be ${eF[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Z6._)`{comparison: ${eF[e].okStr}, limit: ${t}}`},e4t={keyword:Object.keys(eF),type:"number",schemaType:"number",$data:!0,error:ZFt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,Z6._)`${n} ${eF[t].fail} ${r} || isNaN(${n})`)}};une.default=e4t;var lne={};Object.defineProperty(lne,"__esModule",{value:!0});const vk=hr,t4t={message:({schemaCode:e})=>(0,vk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,vk._)`{multipleOf: ${e}}`},n4t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:t4t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,vk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,vk._)`${o} !== parseInt(${o})`;e.fail$data((0,vk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};lne.default=n4t;var cne={},fne={};Object.defineProperty(fne,"__esModule",{value:!0});function X$e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}fne.default=X$e;X$e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(cne,"__esModule",{value:!0});const t_=hr,r4t=Bt,i4t=fne,s4t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,t_.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,t_._)`{limit: ${e}}`},o4t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:s4t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?t_.operators.GT:t_.operators.LT,o=i.opts.unicode===!1?(0,t_._)`${n}.length`:(0,t_._)`${(0,r4t.useFunc)(e.gen,i4t.default)}(${n})`;e.fail$data((0,t_._)`${o} ${s} ${r}`)}};cne.default=o4t;var dne={};Object.defineProperty(dne,"__esModule",{value:!0});const a4t=fr,tF=hr,u4t={message:({schemaCode:e})=>(0,tF.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,tF._)`{pattern: ${e}}`},l4t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:u4t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,tF._)`(new RegExp(${i}, ${o}))`:(0,a4t.usePattern)(e,r);e.fail$data((0,tF._)`!${a}.test(${t})`)}};dne.default=l4t;var hne={};Object.defineProperty(hne,"__esModule",{value:!0});const bk=hr,c4t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,bk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,bk._)`{limit: ${e}}`},f4t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:c4t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?bk.operators.GT:bk.operators.LT;e.fail$data((0,bk._)`Object.keys(${n}).length ${i} ${r}`)}};hne.default=f4t;var pne={};Object.defineProperty(pne,"__esModule",{value:!0});const w2=fr,_k=hr,d4t=Bt,h4t={message:({params:{missingProperty:e}})=>(0,_k.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,_k._)`{missingProperty: ${e}}`},p4t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:h4t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,d4t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(_k.nil,f);else for(const h of n)(0,w2.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,w2.checkMissingProp)(e,n,h)),(0,w2.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,w2.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,w2.propertyInData)(t,i,h,a.ownProperties)),t.if((0,_k.not)(p),()=>{e.error(),t.break()})},_k.nil)}}};pne.default=p4t;var mne={};Object.defineProperty(mne,"__esModule",{value:!0});const wk=hr,m4t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,wk.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,wk._)`{limit: ${e}}`},g4t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:m4t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?wk.operators.GT:wk.operators.LT;e.fail$data((0,wk._)`${n}.length ${i} ${r}`)}};mne.default=g4t;var gne={},AP={};Object.defineProperty(AP,"__esModule",{value:!0});const Q$e=lZ;Q$e.code='require("ajv/dist/runtime/equal").default';AP.default=Q$e;Object.defineProperty(gne,"__esModule",{value:!0});const Az=Do,Ta=hr,y4t=Bt,v4t=AP,b4t={message:({params:{i:e,j:t}})=>(0,Ta.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ta._)`{i: ${e}, j: ${t}}`},_4t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:b4t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Az.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Ta._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Ta._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Ta._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Az.checkDataTypes)(l,g,a.opts.strictNumbers,Az.DataType.Wrong),b=t.const("indices",(0,Ta._)`{}`);t.for((0,Ta._)`;${p}--;`,()=>{t.let(g,(0,Ta._)`${n}[${p}]`),t.if(y,(0,Ta._)`continue`),l.length>1&&t.if((0,Ta._)`typeof ${g} == "string"`,(0,Ta._)`${g} += "_"`),t.if((0,Ta._)`typeof ${b}[${g}] == "number"`,()=>{t.assign(m,(0,Ta._)`${b}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Ta._)`${b}[${g}] = ${p}`)})}function h(p,m){const g=(0,y4t.useFunc)(t,v4t.default),y=t.name("outer");t.label(y).for((0,Ta._)`;${p}--;`,()=>t.for((0,Ta._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Ta._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};gne.default=_4t;var yne={};Object.defineProperty(yne,"__esModule",{value:!0});const IG=hr,w4t=Bt,x4t=AP,E4t={message:"must be equal to constant",params:({schemaCode:e})=>(0,IG._)`{allowedValue: ${e}}`},S4t={keyword:"const",$data:!0,error:E4t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,IG._)`!${(0,w4t.useFunc)(t,x4t.default)}(${n}, ${i})`):e.fail((0,IG._)`${s} !== ${n}`)}};yne.default=S4t;var vne={};Object.defineProperty(vne,"__esModule",{value:!0});const vI=hr,T4t=Bt,C4t=AP,A4t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,vI._)`{allowedValues: ${e}}`},I4t={keyword:"enum",schemaType:"array",$data:!0,error:A4t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,T4t.useFunc)(t,C4t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,vI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,vI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,vI._)`${l()}(${n}, ${h}[${p}])`:(0,vI._)`${n} === ${m}`}}};vne.default=I4t;Object.defineProperty(ane,"__esModule",{value:!0});const k4t=une,R4t=lne,N4t=cne,P4t=dne,D4t=hne,O4t=pne,$4t=mne,M4t=gne,L4t=yne,F4t=vne,j4t=[k4t.default,R4t.default,N4t.default,P4t.default,D4t.default,O4t.default,$4t.default,M4t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},L4t.default,F4t.default];ane.default=j4t;var bne={},ZC={};Object.defineProperty(ZC,"__esModule",{value:!0});ZC.validateAdditionalItems=void 0;const n_=hr,kG=Bt,B4t={message:({params:{len:e}})=>(0,n_.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,n_._)`{limit: ${e}}`},U4t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:B4t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,kG.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}J$e(e,r)}};function J$e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,n_._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,n_._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,kG.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,n_._)`${a} <= ${t.length}`);n.if((0,n_.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:kG.Type.Num},l),o.allErrors||n.if((0,n_.not)(l),()=>n.break())})}}ZC.validateAdditionalItems=J$e;ZC.default=U4t;var _ne={},eA={};Object.defineProperty(eA,"__esModule",{value:!0});eA.validateTuple=void 0;const dye=hr,Y$=Bt,z4t=fr,V4t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Z$e(e,"additionalItems",t);n.items=!0,!(0,Y$.alwaysValidSchema)(n,t)&&e.ok((0,z4t.validateArray)(e))}};function Z$e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=Y$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,dye._)`${s}.length`);n.forEach((f,d)=>{(0,Y$.alwaysValidSchema)(a,f)||(r.if((0,dye._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,Y$.checkStrictMode)(a,g,d.strictTuples)}}}eA.validateTuple=Z$e;eA.default=V4t;Object.defineProperty(_ne,"__esModule",{value:!0});const H4t=eA,q4t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,H4t.validateTuple)(e,"items")};_ne.default=q4t;var wne={};Object.defineProperty(wne,"__esModule",{value:!0});const hye=hr,W4t=Bt,G4t=fr,Y4t=ZC,K4t={message:({params:{len:e}})=>(0,hye.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,hye._)`{limit: ${e}}`},X4t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:K4t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,W4t.alwaysValidSchema)(r,t)&&(i?(0,Y4t.validateAdditionalItems)(e,i):e.ok((0,G4t.validateArray)(e)))}};wne.default=X4t;var xne={};Object.defineProperty(xne,"__esModule",{value:!0});const $f=hr,v3=Bt,Q4t={message:({params:{min:e,max:t}})=>t===void 0?(0,$f.str)`must contain at least ${e} valid item(s)`:(0,$f.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,$f._)`{minContains: ${e}}`:(0,$f._)`{minContains: ${e}, maxContains: ${t}}`},J4t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Q4t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,$f._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,v3.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,v3.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,v3.alwaysValidSchema)(s,n)){let m=(0,$f._)`${c} >= ${o}`;a!==void 0&&(m=(0,$f._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,$f._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:v3.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,$f._)`${m}++`),a===void 0?t.if((0,$f._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,$f._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,$f._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};xne.default=J4t;var eMe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=hr,n=Bt,r=fr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(eMe);var Ene={};Object.defineProperty(Ene,"__esModule",{value:!0});const tMe=hr,Z4t=Bt,e5t={message:"property name must be valid",params:({params:e})=>(0,tMe._)`{propertyName: ${e.propertyName}}`},t5t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:e5t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Z4t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,tMe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Ene.default=t5t;var $j={};Object.defineProperty($j,"__esModule",{value:!0});const b3=fr,zd=hr,n5t=Pm,_3=Bt,r5t={message:"must NOT have additional properties",params:({params:e})=>(0,zd._)`{additionalProperty: ${e.additionalProperty}}`},i5t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:r5t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,_3.alwaysValidSchema)(o,n))return;const l=(0,b3.allSchemaProperties)(r.properties),c=(0,b3.allSchemaProperties)(r.patternProperties);f(),e.ok((0,zd._)`${s} === ${n5t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const b=(0,_3.schemaRefOrVal)(o,r.properties,"properties");y=(0,b3.isOwnProperty)(t,b,g)}else l.length?y=(0,zd.or)(...l.map(b=>(0,zd._)`${g} === ${b}`)):y=zd.nil;return c.length&&(y=(0,zd.or)(y,...c.map(b=>(0,zd._)`${(0,b3.usePattern)(e,b)}.test(${g})`))),(0,zd.not)(y)}function h(g){t.code((0,zd._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,_3.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,zd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,zd.not)(y),()=>t.break()))}}function m(g,y,b){const w={keyword:"additionalProperties",dataProp:g,dataPropType:_3.Type.Str};b===!1&&Object.assign(w,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(w,y)}}};$j.default=i5t;var Sne={};Object.defineProperty(Sne,"__esModule",{value:!0});const s5t=wh,pye=fr,Iz=Bt,mye=$j,o5t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&mye.default.code(new s5t.KeywordCxt(s,mye.default,"additionalProperties"));const o=(0,pye.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Iz.mergeEvaluated.props(t,(0,Iz.toHash)(o),s.props));const a=o.filter(f=>!(0,Iz.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,pye.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Sne.default=o5t;var Tne={};Object.defineProperty(Tne,"__esModule",{value:!0});const gye=fr,w3=hr,yye=Bt,vye=Bt,a5t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,gye.allSchemaProperties)(n),u=a.filter(m=>(0,yye.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof w3.Name)&&(s.props=(0,vye.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,yye.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,w3._)`${(0,gye.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:vye.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,w3._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,w3.not)(c),()=>t.break())})})}}};Tne.default=a5t;var Cne={};Object.defineProperty(Cne,"__esModule",{value:!0});const u5t=Bt,l5t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,u5t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Cne.default=l5t;var Ane={};Object.defineProperty(Ane,"__esModule",{value:!0});const c5t=fr,f5t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:c5t.validateUnion,error:{message:"must match a schema in anyOf"}};Ane.default=f5t;var Ine={};Object.defineProperty(Ine,"__esModule",{value:!0});const K$=hr,d5t=Bt,h5t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,K$._)`{passingSchemas: ${e.passing}}`},p5t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:h5t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,d5t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,K$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,K$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,K$.Name)})})}}};Ine.default=p5t;var kne={};Object.defineProperty(kne,"__esModule",{value:!0});const m5t=Bt,g5t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,m5t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};kne.default=g5t;var Rne={};Object.defineProperty(Rne,"__esModule",{value:!0});const nF=hr,nMe=Bt,y5t={message:({params:e})=>(0,nF.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,nF._)`{failingKeyword: ${e.ifClause}}`},v5t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:y5t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,nMe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=bye(r,"then"),s=bye(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,nF.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,nF._)`${c}`):e.setParams({ifClause:c})}}}};function bye(e,t){const n=e.schema[t];return n!==void 0&&!(0,nMe.alwaysValidSchema)(e,n)}Rne.default=v5t;var Nne={};Object.defineProperty(Nne,"__esModule",{value:!0});const b5t=Bt,_5t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,b5t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Nne.default=_5t;Object.defineProperty(bne,"__esModule",{value:!0});const w5t=ZC,x5t=_ne,E5t=eA,S5t=wne,T5t=xne,C5t=eMe,A5t=Ene,I5t=$j,k5t=Sne,R5t=Tne,N5t=Cne,P5t=Ane,D5t=Ine,O5t=kne,$5t=Rne,M5t=Nne;function L5t(e=!1){const t=[N5t.default,P5t.default,D5t.default,O5t.default,$5t.default,M5t.default,A5t.default,I5t.default,C5t.default,k5t.default,R5t.default];return e?t.push(x5t.default,S5t.default):t.push(w5t.default,E5t.default),t.push(T5t.default),t}bne.default=L5t;var Pne={},Dne={};Object.defineProperty(Dne,"__esModule",{value:!0});const Xs=hr,F5t={message:({schemaCode:e})=>(0,Xs.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Xs._)`{format: ${e}}`},j5t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:F5t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,Xs._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,Xs._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,Xs._)`${m}.type || "string"`).assign(y,(0,Xs._)`${m}.validate`),()=>n.assign(g,(0,Xs._)`"string"`).assign(y,m)),e.fail$data((0,Xs.or)(b(),w()));function b(){return u.strictSchema===!1?Xs.nil:(0,Xs._)`${o} && !${y}`}function w(){const E=c.$async?(0,Xs._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,Xs._)`${y}(${r})`,S=(0,Xs._)`(typeof ${y} == "function" ? ${E} : ${y}.test(${r}))`;return(0,Xs._)`${y} && ${y} !== true && ${g} === ${t} && !${S}`}}function h(){const p=f.formats[s];if(!p){b();return}if(p===!0)return;const[m,g,y]=w(p);m===t&&e.pass(E());function b(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function w(S){const T=S instanceof RegExp?(0,Xs.regexpCode)(S):u.code.formats?(0,Xs._)`${u.code.formats}${(0,Xs.getProperty)(s)}`:void 0,C=n.scopeValue("formats",{key:s,ref:S,code:T});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Xs._)`${C}.validate`]:["string",S,C]}function E(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Xs._)`await ${y}(${r})`}return typeof g=="function"?(0,Xs._)`${y}(${r})`:(0,Xs._)`${y}.test(${r})`}}}};Dne.default=j5t;Object.defineProperty(Pne,"__esModule",{value:!0});const B5t=Dne,U5t=[B5t.default];Pne.default=U5t;var NT={};Object.defineProperty(NT,"__esModule",{value:!0});NT.contentVocabulary=NT.metadataVocabulary=void 0;NT.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];NT.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(ine,"__esModule",{value:!0});const z5t=sne,V5t=ane,H5t=bne,q5t=Pne,_ye=NT,W5t=[z5t.default,V5t.default,(0,H5t.default)(),q5t.default,_ye.metadataVocabulary,_ye.contentVocabulary];ine.default=W5t;var One={},Mj={};Object.defineProperty(Mj,"__esModule",{value:!0});Mj.DiscrError=void 0;var wye;(function(e){e.Tag="tag",e.Mapping="mapping"})(wye||(Mj.DiscrError=wye={}));Object.defineProperty(One,"__esModule",{value:!0});const EE=hr,RG=Mj,xye=Ul,G5t=JC,Y5t=Bt,K5t={message:({params:{discrError:e,tagName:t}})=>e===RG.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,EE._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},X5t={keyword:"discriminator",type:"object",schemaType:"object",error:K5t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,EE._)`${n}${(0,EE.getProperty)(a)}`);t.if((0,EE._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:RG.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,EE._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:RG.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,EE.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let E=0;E<o.length;E++){let S=o[E];if(S!=null&&S.$ref&&!(0,Y5t.schemaHasRulesButRef)(S,s.self.RULES)){const C=S.$ref;if(S=xye.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,C),S instanceof xye.SchemaEnv&&(S=S.schema),S===void 0)throw new G5t.default(s.opts.uriResolver,s.baseId,C)}const T=(h=S==null?void 0:S.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(S)),b(T,E)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:E}){return Array.isArray(E)&&E.includes(a)}function b(E,S){if(E.const)w(E.const,S);else if(E.enum)for(const T of E.enum)w(T,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function w(E,S){if(typeof E!="string"||E in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[E]=S}}}};One.default=X5t;const Q5t="http://json-schema.org/draft-07/schema#",J5t="http://json-schema.org/draft-07/schema#",Z5t="Core schema meta-schema",ejt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},tjt=["object","boolean"],njt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},rjt={$schema:Q5t,$id:J5t,title:Z5t,definitions:ejt,type:tjt,properties:njt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=g$e,r=ine,i=One,s=rjt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=wh;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=hr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=CP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=JC;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(xG,xG.exports);var ijt=xG.exports;const $ne=cf(ijt),sjt="#/definitions/StudyConfig",ojt="http://json-schema.org/draft-07/schema#",ajt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "required": true, "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "required": true, "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","required","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/v1.0.6/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.6/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},ujt={$ref:sjt,$schema:ojt,definitions:ajt},ljt="#/definitions/GlobalConfig",cjt="http://json-schema.org/draft-07/schema#",fjt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},djt={$ref:ljt,$schema:cjt,definitions:fjt};var rF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */rF.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,b=4,w=8,E=16,S=32,T=64,C=128,I=256,R=512,P=30,D="...",L=800,M=16,F=1,z=2,B=3,H=1/0,q=9007199254740991,Y=17976931348623157e292,$=NaN,W=4294967295,X=W-1,V=W>>>1,K=[["ary",C],["bind",g],["bindKey",y],["curry",w],["curryRight",E],["flip",R],["partial",S],["partialRight",T],["rearg",I]],J="[object Arguments]",ue="[object Array]",_e="[object AsyncFunction]",be="[object Boolean]",xe="[object Date]",ke="[object DOMException]",je="[object Error]",Re="[object Function]",ft="[object GeneratorFunction]",Ze="[object Map]",It="[object Number]",bt="[object Null]",Ae="[object Object]",Be="[object Promise]",st="[object Proxy]",_t="[object RegExp]",jt="[object Set]",ot="[object String]",Se="[object Symbol]",kt="[object Undefined]",Rt="[object WeakMap]",Te="[object WeakSet]",$e="[object ArrayBuffer]",rt="[object DataView]",St="[object Float32Array]",Mt="[object Float64Array]",Zn="[object Int8Array]",Br="[object Int16Array]",er="[object Int32Array]",yr="[object Uint8Array]",kn="[object Uint8ClampedArray]",Un="[object Uint16Array]",pr="[object Uint32Array]",Tr=/\b__p \+= '';/g,Yo=/\b(__p \+=) '' \+/g,us=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vn=/&(?:amp|lt|gt|quot|#39);/g,Yi=/[&<>"']/g,ri=RegExp(Vn.source),Ns=RegExp(Yi.source),Sd=/<%-([\s\S]+?)%>/g,Pu=/<%([\s\S]+?)%>/g,wc=/<%=([\s\S]+?)%>/g,Yr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ki=/^\w*$/,Ti=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ko=/[\\^$.*+?()[\]{}|]/g,ba=RegExp(Ko.source),Eo=/^\s+/,pe=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,me=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wt=/[()=,{}\[\]\/\s]/,Ut=/\\(\\)?/g,dn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tr=/\w*$/,cr=/^[-+]0x[0-9a-f]+$/i,On=/^0b[01]+$/i,Cr=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,on=/^(?:0|[1-9]\d*)$/,Ar=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kr=/($^)/,vr=/['\n\r\u2028\u2029\\]/g,Ci="\\ud800-\\udfff",lo="\\u0300-\\u036f",Ai="\\ufe20-\\ufe2f",So="\\u20d0-\\u20ff",Xi=lo+Ai+So,Qi="\\u2700-\\u27bf",To="a-z\\xdf-\\xf6\\xf8-\\xff",_a="\\xac\\xb1\\xd7\\xf7",co="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_l="\\u2000-\\u206f",gf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",he="\\ufe0e\\ufe0f",se=_a+co+_l+gf,we="[']",Ie="["+Ci+"]",ve="["+se+"]",We="["+Xi+"]",it="\\d+",ut="["+Qi+"]",lt="["+To+"]",yt="[^"+Ci+se+it+Qi+To+ee+"]",Lt="\\ud83c[\\udffb-\\udfff]",$n="(?:"+We+"|"+Lt+")",Xt="[^"+Ci+"]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ur="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ee+"]",Co="\\u200d",xc="(?:"+lt+"|"+yt+")",Td="(?:"+br+"|"+yt+")",sy="(?:"+we+"(?:d|ll|m|re|s|t|ve))?",Zh="(?:"+we+"(?:D|LL|M|RE|S|T|VE))?",ib=$n+"?",Du="["+he+"]?",Wa="(?:"+Co+"(?:"+[Xt,nr,Ur].join("|")+")"+Du+ib+")*",Cd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sb=Du+ib+Wa,Ad="(?:"+[ut,nr,Ur].join("|")+")"+sb,ob="(?:"+[Xt+We+"?",We,nr,Ur,Ie].join("|")+")",wx=RegExp(we,"g"),Id=RegExp(We,"g"),Xo=RegExp(Lt+"(?="+Lt+")|"+ob+sb,"g"),kA=RegExp([br+"?"+lt+"+"+sy+"(?="+[ve,br,"$"].join("|")+")",Td+"+"+Zh+"(?="+[ve,br+xc,"$"].join("|")+")",br+"?"+xc+"+"+sy,br+"+"+Zh,oy,Cd,it,Ad].join("|"),"g"),xx=RegExp("["+Co+Ci+Xi+he+"]"),Hm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ex=-1,zr={};zr[St]=zr[Mt]=zr[Zn]=zr[Br]=zr[er]=zr[yr]=zr[kn]=zr[Un]=zr[pr]=!0,zr[J]=zr[ue]=zr[$e]=zr[be]=zr[rt]=zr[xe]=zr[je]=zr[Re]=zr[Ze]=zr[It]=zr[Ae]=zr[_t]=zr[jt]=zr[ot]=zr[Rt]=!1;var Ir={};Ir[J]=Ir[ue]=Ir[$e]=Ir[rt]=Ir[be]=Ir[xe]=Ir[St]=Ir[Mt]=Ir[Zn]=Ir[Br]=Ir[er]=Ir[Ze]=Ir[It]=Ir[Ae]=Ir[_t]=Ir[jt]=Ir[ot]=Ir[Se]=Ir[yr]=Ir[kn]=Ir[Un]=Ir[pr]=!0,Ir[je]=Ir[Re]=Ir[Rt]=!1;var Sx={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ge={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qt=parseFloat,or=parseInt,Vr=typeof Ts=="object"&&Ts&&Ts.Object===Object&&Ts,gi=typeof self=="object"&&self&&self.Object===Object&&self,an=Vr||gi||Function("return this")(),si=t&&!t.nodeType&&t,yi=si&&!0&&e&&!e.nodeType&&e,Ao=yi&&yi.exports===si,kd=Ao&&Vr.process,Ps=function(){try{var Ce=yi&&yi.require&&yi.require("util").types;return Ce||kd&&kd.binding&&kd.binding("util")}catch{}}(),Wm=Ps&&Ps.isArrayBuffer,Gm=Ps&&Ps.isDate,ab=Ps&&Ps.isMap,RA=Ps&&Ps.isRegExp,ub=Ps&&Ps.isSet,ID=Ps&&Ps.isTypedArray;function Ga(Ce,Ke,ze){switch(ze.length){case 0:return Ce.call(Ke);case 1:return Ce.call(Ke,ze[0]);case 2:return Ce.call(Ke,ze[0],ze[1]);case 3:return Ce.call(Ke,ze[0],ze[1],ze[2])}return Ce.apply(Ke,ze)}function lb(Ce,Ke,ze,zt){for(var Fn=-1,ai=Ce==null?0:Ce.length;++Fn<ai;){var ko=Ce[Fn];Ke(zt,ko,ze(ko),Ce)}return zt}function Ou(Ce,Ke){for(var ze=-1,zt=Ce==null?0:Ce.length;++ze<zt&&Ke(Ce[ze],ze,Ce)!==!1;);return Ce}function kD(Ce,Ke){for(var ze=Ce==null?0:Ce.length;ze--&&Ke(Ce[ze],ze,Ce)!==!1;);return Ce}function Tx(Ce,Ke){for(var ze=-1,zt=Ce==null?0:Ce.length;++ze<zt;)if(!Ke(Ce[ze],ze,Ce))return!1;return!0}function yf(Ce,Ke){for(var ze=-1,zt=Ce==null?0:Ce.length,Fn=0,ai=[];++ze<zt;){var ko=Ce[ze];Ke(ko,ze,Ce)&&(ai[Fn++]=ko)}return ai}function cb(Ce,Ke){var ze=Ce==null?0:Ce.length;return!!ze&&Ym(Ce,Ke,0)>-1}function ay(Ce,Ke,ze){for(var zt=-1,Fn=Ce==null?0:Ce.length;++zt<Fn;)if(ze(Ke,Ce[zt]))return!0;return!1}function Mi(Ce,Ke){for(var ze=-1,zt=Ce==null?0:Ce.length,Fn=Array(zt);++ze<zt;)Fn[ze]=Ke(Ce[ze],ze,Ce);return Fn}function Rd(Ce,Ke){for(var ze=-1,zt=Ke.length,Fn=Ce.length;++ze<zt;)Ce[Fn+ze]=Ke[ze];return Ce}function Nd(Ce,Ke,ze,zt){var Fn=-1,ai=Ce==null?0:Ce.length;for(zt&&ai&&(ze=Ce[++Fn]);++Fn<ai;)ze=Ke(ze,Ce[Fn],Fn,Ce);return ze}function RD(Ce,Ke,ze,zt){var Fn=Ce==null?0:Ce.length;for(zt&&Fn&&(ze=Ce[--Fn]);Fn--;)ze=Ke(ze,Ce[Fn],Fn,Ce);return ze}function Cx(Ce,Ke){for(var ze=-1,zt=Ce==null?0:Ce.length;++ze<zt;)if(Ke(Ce[ze],ze,Ce))return!0;return!1}var ND=G("length");function PD(Ce){return Ce.split("")}function Ax(Ce){return Ce.match(Me)||[]}function Ya(Ce,Ke,ze){var zt;return ze(Ce,function(Fn,ai,ko){if(Ke(Fn,ai,ko))return zt=ai,!1}),zt}function fb(Ce,Ke,ze,zt){for(var Fn=Ce.length,ai=ze+(zt?1:-1);zt?ai--:++ai<Fn;)if(Ke(Ce[ai],ai,Ce))return ai;return-1}function Ym(Ce,Ke,ze){return Ke===Ke?Hze(Ce,Ke,ze):fb(Ce,A,ze)}function uy(Ce,Ke,ze,zt){for(var Fn=ze-1,ai=Ce.length;++Fn<ai;)if(zt(Ce[Fn],Ke))return Fn;return-1}function A(Ce){return Ce!==Ce}function j(Ce,Ke){var ze=Ce==null?0:Ce.length;return ze?At(Ce,Ke)/ze:$}function G(Ce){return function(Ke){return Ke==null?n:Ke[Ce]}}function ne(Ce){return function(Ke){return Ce==null?n:Ce[Ke]}}function Pe(Ce,Ke,ze,zt,Fn){return Fn(Ce,function(ai,ko,Li){ze=zt?(zt=!1,ai):Ke(ze,ai,ko,Li)}),ze}function He(Ce,Ke){var ze=Ce.length;for(Ce.sort(Ke);ze--;)Ce[ze]=Ce[ze].value;return Ce}function At(Ce,Ke){for(var ze,zt=-1,Fn=Ce.length;++zt<Fn;){var ai=Ke(Ce[zt]);ai!==n&&(ze=ze===n?ai:ze+ai)}return ze}function oi(Ce,Ke){for(var ze=-1,zt=Array(Ce);++ze<Ce;)zt[ze]=Ke(ze);return zt}function Io(Ce,Ke){return Mi(Ke,function(ze){return[ze,Ce[ze]]})}function kr(Ce){return Ce&&Ce.slice(0,kue(Ce)+1).replace(Eo,"")}function hi(Ce){return function(Ke){return Ce(Ke)}}function fo(Ce,Ke){return Mi(Ke,function(ze){return Ce[ze]})}function vf(Ce,Ke){return Ce.has(Ke)}function wl(Ce,Ke){for(var ze=-1,zt=Ce.length;++ze<zt&&Ym(Ke,Ce[ze],0)>-1;);return ze}function db(Ce,Ke){for(var ze=Ce.length;ze--&&Ym(Ke,Ce[ze],0)>-1;);return ze}function NA(Ce,Ke){for(var ze=Ce.length,zt=0;ze--;)Ce[ze]===Ke&&++zt;return zt}var Lze=ne(Sx),Fze=ne(le);function jze(Ce){return"\\"+Ue[Ce]}function Bze(Ce,Ke){return Ce==null?n:Ce[Ke]}function Ix(Ce){return xx.test(Ce)}function Uze(Ce){return Hm.test(Ce)}function zze(Ce){for(var Ke,ze=[];!(Ke=Ce.next()).done;)ze.push(Ke.value);return ze}function a9(Ce){var Ke=-1,ze=Array(Ce.size);return Ce.forEach(function(zt,Fn){ze[++Ke]=[Fn,zt]}),ze}function Iue(Ce,Ke){return function(ze){return Ce(Ke(ze))}}function ly(Ce,Ke){for(var ze=-1,zt=Ce.length,Fn=0,ai=[];++ze<zt;){var ko=Ce[ze];(ko===Ke||ko===c)&&(Ce[ze]=c,ai[Fn++]=ze)}return ai}function DD(Ce){var Ke=-1,ze=Array(Ce.size);return Ce.forEach(function(zt){ze[++Ke]=zt}),ze}function Vze(Ce){var Ke=-1,ze=Array(Ce.size);return Ce.forEach(function(zt){ze[++Ke]=[zt,zt]}),ze}function Hze(Ce,Ke,ze){for(var zt=ze-1,Fn=Ce.length;++zt<Fn;)if(Ce[zt]===Ke)return zt;return-1}function qze(Ce,Ke,ze){for(var zt=ze+1;zt--;)if(Ce[zt]===Ke)return zt;return zt}function kx(Ce){return Ix(Ce)?Gze(Ce):ND(Ce)}function Pd(Ce){return Ix(Ce)?Yze(Ce):PD(Ce)}function kue(Ce){for(var Ke=Ce.length;Ke--&&pe.test(Ce.charAt(Ke)););return Ke}var Wze=ne(ge);function Gze(Ce){for(var Ke=Xo.lastIndex=0;Xo.test(Ce);)++Ke;return Ke}function Yze(Ce){return Ce.match(Xo)||[]}function Kze(Ce){return Ce.match(kA)||[]}var Xze=function Ce(Ke){Ke=Ke==null?an:Rx.defaults(an.Object(),Ke,Rx.pick(an,qm));var ze=Ke.Array,zt=Ke.Date,Fn=Ke.Error,ai=Ke.Function,ko=Ke.Math,Li=Ke.Object,u9=Ke.RegExp,Qze=Ke.String,bf=Ke.TypeError,OD=ze.prototype,Jze=ai.prototype,Nx=Li.prototype,$D=Ke["__core-js_shared__"],MD=Jze.toString,vi=Nx.hasOwnProperty,Zze=0,Rue=function(){var v=/[^.]+$/.exec($D&&$D.keys&&$D.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),LD=Nx.toString,eVe=MD.call(Li),tVe=an._,nVe=u9("^"+MD.call(vi).replace(Ko,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),FD=Ao?Ke.Buffer:n,cy=Ke.Symbol,jD=Ke.Uint8Array,Nue=FD?FD.allocUnsafe:n,BD=Iue(Li.getPrototypeOf,Li),Pue=Li.create,Due=Nx.propertyIsEnumerable,UD=OD.splice,Oue=cy?cy.isConcatSpreadable:n,PA=cy?cy.iterator:n,hb=cy?cy.toStringTag:n,zD=function(){try{var v=vb(Li,"defineProperty");return v({},"",{}),v}catch{}}(),rVe=Ke.clearTimeout!==an.clearTimeout&&Ke.clearTimeout,iVe=zt&&zt.now!==an.Date.now&&zt.now,sVe=Ke.setTimeout!==an.setTimeout&&Ke.setTimeout,VD=ko.ceil,HD=ko.floor,l9=Li.getOwnPropertySymbols,oVe=FD?FD.isBuffer:n,$ue=Ke.isFinite,aVe=OD.join,uVe=Iue(Li.keys,Li),Ro=ko.max,Ka=ko.min,lVe=zt.now,cVe=Ke.parseInt,Mue=ko.random,fVe=OD.reverse,c9=vb(Ke,"DataView"),DA=vb(Ke,"Map"),f9=vb(Ke,"Promise"),Px=vb(Ke,"Set"),OA=vb(Ke,"WeakMap"),$A=vb(Li,"create"),qD=OA&&new OA,Dx={},dVe=bb(c9),hVe=bb(DA),pVe=bb(f9),mVe=bb(Px),gVe=bb(OA),WD=cy?cy.prototype:n,MA=WD?WD.valueOf:n,Lue=WD?WD.toString:n;function Z(v){if(Ds(v)&&!zn(v)&&!(v instanceof _r)){if(v instanceof _f)return v;if(vi.call(v,"__wrapped__"))return Fle(v)}return new _f(v)}var Ox=function(){function v(){}return function(x){if(!xs(x))return{};if(Pue)return Pue(x);v.prototype=x;var k=new v;return v.prototype=n,k}}();function GD(){}function _f(v,x){this.__wrapped__=v,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=n}Z.templateSettings={escape:Sd,evaluate:Pu,interpolate:wc,variable:"",imports:{_:Z}},Z.prototype=GD.prototype,Z.prototype.constructor=Z,_f.prototype=Ox(GD.prototype),_f.prototype.constructor=_f;function _r(v){this.__wrapped__=v,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function yVe(){var v=new _r(this.__wrapped__);return v.__actions__=xl(this.__actions__),v.__dir__=this.__dir__,v.__filtered__=this.__filtered__,v.__iteratees__=xl(this.__iteratees__),v.__takeCount__=this.__takeCount__,v.__views__=xl(this.__views__),v}function vVe(){if(this.__filtered__){var v=new _r(this);v.__dir__=-1,v.__filtered__=!0}else v=this.clone(),v.__dir__*=-1;return v}function bVe(){var v=this.__wrapped__.value(),x=this.__dir__,k=zn(v),U=x<0,Q=k?v.length:0,re=NHe(0,Q,this.__views__),ce=re.start,ye=re.end,Ne=ye-ce,et=U?ye:ce-1,tt=this.__iteratees__,ct=tt.length,$t=0,Jt=Ka(Ne,this.__takeCount__);if(!k||!U&&Q==Ne&&Jt==Ne)return ale(v,this.__actions__);var pn=[];e:for(;Ne--&&$t<Jt;){et+=x;for(var rr=-1,mn=v[et];++rr<ct;){var mr=tt[rr],Rr=mr.iteratee,Tc=mr.type,Lu=Rr(mn);if(Tc==z)mn=Lu;else if(!Lu){if(Tc==F)continue e;break e}}pn[$t++]=mn}return pn}_r.prototype=Ox(GD.prototype),_r.prototype.constructor=_r;function pb(v){var x=-1,k=v==null?0:v.length;for(this.clear();++x<k;){var U=v[x];this.set(U[0],U[1])}}function _Ve(){this.__data__=$A?$A(null):{},this.size=0}function wVe(v){var x=this.has(v)&&delete this.__data__[v];return this.size-=x?1:0,x}function xVe(v){var x=this.__data__;if($A){var k=x[v];return k===u?n:k}return vi.call(x,v)?x[v]:n}function EVe(v){var x=this.__data__;return $A?x[v]!==n:vi.call(x,v)}function SVe(v,x){var k=this.__data__;return this.size+=this.has(v)?0:1,k[v]=$A&&x===n?u:x,this}pb.prototype.clear=_Ve,pb.prototype.delete=wVe,pb.prototype.get=xVe,pb.prototype.has=EVe,pb.prototype.set=SVe;function Km(v){var x=-1,k=v==null?0:v.length;for(this.clear();++x<k;){var U=v[x];this.set(U[0],U[1])}}function TVe(){this.__data__=[],this.size=0}function CVe(v){var x=this.__data__,k=YD(x,v);if(k<0)return!1;var U=x.length-1;return k==U?x.pop():UD.call(x,k,1),--this.size,!0}function AVe(v){var x=this.__data__,k=YD(x,v);return k<0?n:x[k][1]}function IVe(v){return YD(this.__data__,v)>-1}function kVe(v,x){var k=this.__data__,U=YD(k,v);return U<0?(++this.size,k.push([v,x])):k[U][1]=x,this}Km.prototype.clear=TVe,Km.prototype.delete=CVe,Km.prototype.get=AVe,Km.prototype.has=IVe,Km.prototype.set=kVe;function Xm(v){var x=-1,k=v==null?0:v.length;for(this.clear();++x<k;){var U=v[x];this.set(U[0],U[1])}}function RVe(){this.size=0,this.__data__={hash:new pb,map:new(DA||Km),string:new pb}}function NVe(v){var x=oO(this,v).delete(v);return this.size-=x?1:0,x}function PVe(v){return oO(this,v).get(v)}function DVe(v){return oO(this,v).has(v)}function OVe(v,x){var k=oO(this,v),U=k.size;return k.set(v,x),this.size+=k.size==U?0:1,this}Xm.prototype.clear=RVe,Xm.prototype.delete=NVe,Xm.prototype.get=PVe,Xm.prototype.has=DVe,Xm.prototype.set=OVe;function mb(v){var x=-1,k=v==null?0:v.length;for(this.__data__=new Xm;++x<k;)this.add(v[x])}function $Ve(v){return this.__data__.set(v,u),this}function MVe(v){return this.__data__.has(v)}mb.prototype.add=mb.prototype.push=$Ve,mb.prototype.has=MVe;function Dd(v){var x=this.__data__=new Km(v);this.size=x.size}function LVe(){this.__data__=new Km,this.size=0}function FVe(v){var x=this.__data__,k=x.delete(v);return this.size=x.size,k}function jVe(v){return this.__data__.get(v)}function BVe(v){return this.__data__.has(v)}function UVe(v,x){var k=this.__data__;if(k instanceof Km){var U=k.__data__;if(!DA||U.length<i-1)return U.push([v,x]),this.size=++k.size,this;k=this.__data__=new Xm(U)}return k.set(v,x),this.size=k.size,this}Dd.prototype.clear=LVe,Dd.prototype.delete=FVe,Dd.prototype.get=jVe,Dd.prototype.has=BVe,Dd.prototype.set=UVe;function Fue(v,x){var k=zn(v),U=!k&&_b(v),Q=!k&&!U&&my(v),re=!k&&!U&&!Q&&Fx(v),ce=k||U||Q||re,ye=ce?oi(v.length,Qze):[],Ne=ye.length;for(var et in v)(x||vi.call(v,et))&&!(ce&&(et=="length"||Q&&(et=="offset"||et=="parent")||re&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||eg(et,Ne)))&&ye.push(et);return ye}function jue(v){var x=v.length;return x?v[x9(0,x-1)]:n}function zVe(v,x){return aO(xl(v),gb(x,0,v.length))}function VVe(v){return aO(xl(v))}function d9(v,x,k){(k!==n&&!Od(v[x],k)||k===n&&!(x in v))&&Qm(v,x,k)}function LA(v,x,k){var U=v[x];(!(vi.call(v,x)&&Od(U,k))||k===n&&!(x in v))&&Qm(v,x,k)}function YD(v,x){for(var k=v.length;k--;)if(Od(v[k][0],x))return k;return-1}function HVe(v,x,k,U){return fy(v,function(Q,re,ce){x(U,Q,k(Q),ce)}),U}function Bue(v,x){return v&&tp(x,Qo(x),v)}function qVe(v,x){return v&&tp(x,Sl(x),v)}function Qm(v,x,k){x=="__proto__"&&zD?zD(v,x,{configurable:!0,enumerable:!0,value:k,writable:!0}):v[x]=k}function h9(v,x){for(var k=-1,U=x.length,Q=ze(U),re=v==null;++k<U;)Q[k]=re?n:G9(v,x[k]);return Q}function gb(v,x,k){return v===v&&(k!==n&&(v=v<=k?v:k),x!==n&&(v=v>=x?v:x)),v}function wf(v,x,k,U,Q,re){var ce,ye=x&f,Ne=x&d,et=x&h;if(k&&(ce=Q?k(v,U,Q,re):k(v)),ce!==n)return ce;if(!xs(v))return v;var tt=zn(v);if(tt){if(ce=DHe(v),!ye)return xl(v,ce)}else{var ct=Xa(v),$t=ct==Re||ct==ft;if(my(v))return cle(v,ye);if(ct==Ae||ct==J||$t&&!Q){if(ce=Ne||$t?{}:kle(v),!ye)return Ne?xHe(v,qVe(ce,v)):wHe(v,Bue(ce,v))}else{if(!Ir[ct])return Q?v:{};ce=OHe(v,ct,ye)}}re||(re=new Dd);var Jt=re.get(v);if(Jt)return Jt;re.set(v,ce),ice(v)?v.forEach(function(mn){ce.add(wf(mn,x,k,mn,v,re))}):nce(v)&&v.forEach(function(mn,mr){ce.set(mr,wf(mn,x,k,mr,v,re))});var pn=et?Ne?D9:P9:Ne?Sl:Qo,rr=tt?n:pn(v);return Ou(rr||v,function(mn,mr){rr&&(mr=mn,mn=v[mr]),LA(ce,mr,wf(mn,x,k,mr,v,re))}),ce}function WVe(v){var x=Qo(v);return function(k){return Uue(k,v,x)}}function Uue(v,x,k){var U=k.length;if(v==null)return!U;for(v=Li(v);U--;){var Q=k[U],re=x[Q],ce=v[Q];if(ce===n&&!(Q in v)||!re(ce))return!1}return!0}function zue(v,x,k){if(typeof v!="function")throw new bf(o);return HA(function(){v.apply(n,k)},x)}function FA(v,x,k,U){var Q=-1,re=cb,ce=!0,ye=v.length,Ne=[],et=x.length;if(!ye)return Ne;k&&(x=Mi(x,hi(k))),U?(re=ay,ce=!1):x.length>=i&&(re=vf,ce=!1,x=new mb(x));e:for(;++Q<ye;){var tt=v[Q],ct=k==null?tt:k(tt);if(tt=U||tt!==0?tt:0,ce&&ct===ct){for(var $t=et;$t--;)if(x[$t]===ct)continue e;Ne.push(tt)}else re(x,ct,U)||Ne.push(tt)}return Ne}var fy=mle(ep),Vue=mle(m9,!0);function GVe(v,x){var k=!0;return fy(v,function(U,Q,re){return k=!!x(U,Q,re),k}),k}function KD(v,x,k){for(var U=-1,Q=v.length;++U<Q;){var re=v[U],ce=x(re);if(ce!=null&&(ye===n?ce===ce&&!Sc(ce):k(ce,ye)))var ye=ce,Ne=re}return Ne}function YVe(v,x,k,U){var Q=v.length;for(k=Yn(k),k<0&&(k=-k>Q?0:Q+k),U=U===n||U>Q?Q:Yn(U),U<0&&(U+=Q),U=k>U?0:oce(U);k<U;)v[k++]=x;return v}function Hue(v,x){var k=[];return fy(v,function(U,Q,re){x(U,Q,re)&&k.push(U)}),k}function wa(v,x,k,U,Q){var re=-1,ce=v.length;for(k||(k=MHe),Q||(Q=[]);++re<ce;){var ye=v[re];x>0&&k(ye)?x>1?wa(ye,x-1,k,U,Q):Rd(Q,ye):U||(Q[Q.length]=ye)}return Q}var p9=gle(),que=gle(!0);function ep(v,x){return v&&p9(v,x,Qo)}function m9(v,x){return v&&que(v,x,Qo)}function XD(v,x){return yf(x,function(k){return tg(v[k])})}function yb(v,x){x=hy(x,v);for(var k=0,U=x.length;v!=null&&k<U;)v=v[np(x[k++])];return k&&k==U?v:n}function Wue(v,x,k){var U=x(v);return zn(v)?U:Rd(U,k(v))}function $u(v){return v==null?v===n?kt:bt:hb&&hb in Li(v)?RHe(v):VHe(v)}function g9(v,x){return v>x}function KVe(v,x){return v!=null&&vi.call(v,x)}function XVe(v,x){return v!=null&&x in Li(v)}function QVe(v,x,k){return v>=Ka(x,k)&&v<Ro(x,k)}function y9(v,x,k){for(var U=k?ay:cb,Q=v[0].length,re=v.length,ce=re,ye=ze(re),Ne=1/0,et=[];ce--;){var tt=v[ce];ce&&x&&(tt=Mi(tt,hi(x))),Ne=Ka(tt.length,Ne),ye[ce]=!k&&(x||Q>=120&&tt.length>=120)?new mb(ce&&tt):n}tt=v[0];var ct=-1,$t=ye[0];e:for(;++ct<Q&&et.length<Ne;){var Jt=tt[ct],pn=x?x(Jt):Jt;if(Jt=k||Jt!==0?Jt:0,!($t?vf($t,pn):U(et,pn,k))){for(ce=re;--ce;){var rr=ye[ce];if(!(rr?vf(rr,pn):U(v[ce],pn,k)))continue e}$t&&$t.push(pn),et.push(Jt)}}return et}function JVe(v,x,k,U){return ep(v,function(Q,re,ce){x(U,k(Q),re,ce)}),U}function jA(v,x,k){x=hy(x,v),v=Dle(v,x);var U=v==null?v:v[np(Ef(x))];return U==null?n:Ga(U,v,k)}function Gue(v){return Ds(v)&&$u(v)==J}function ZVe(v){return Ds(v)&&$u(v)==$e}function eHe(v){return Ds(v)&&$u(v)==xe}function BA(v,x,k,U,Q){return v===x?!0:v==null||x==null||!Ds(v)&&!Ds(x)?v!==v&&x!==x:tHe(v,x,k,U,BA,Q)}function tHe(v,x,k,U,Q,re){var ce=zn(v),ye=zn(x),Ne=ce?ue:Xa(v),et=ye?ue:Xa(x);Ne=Ne==J?Ae:Ne,et=et==J?Ae:et;var tt=Ne==Ae,ct=et==Ae,$t=Ne==et;if($t&&my(v)){if(!my(x))return!1;ce=!0,tt=!1}if($t&&!tt)return re||(re=new Dd),ce||Fx(v)?Cle(v,x,k,U,Q,re):IHe(v,x,Ne,k,U,Q,re);if(!(k&p)){var Jt=tt&&vi.call(v,"__wrapped__"),pn=ct&&vi.call(x,"__wrapped__");if(Jt||pn){var rr=Jt?v.value():v,mn=pn?x.value():x;return re||(re=new Dd),Q(rr,mn,k,U,re)}}return $t?(re||(re=new Dd),kHe(v,x,k,U,Q,re)):!1}function nHe(v){return Ds(v)&&Xa(v)==Ze}function v9(v,x,k,U){var Q=k.length,re=Q,ce=!U;if(v==null)return!re;for(v=Li(v);Q--;){var ye=k[Q];if(ce&&ye[2]?ye[1]!==v[ye[0]]:!(ye[0]in v))return!1}for(;++Q<re;){ye=k[Q];var Ne=ye[0],et=v[Ne],tt=ye[1];if(ce&&ye[2]){if(et===n&&!(Ne in v))return!1}else{var ct=new Dd;if(U)var $t=U(et,tt,Ne,v,x,ct);if(!($t===n?BA(tt,et,p|m,U,ct):$t))return!1}}return!0}function Yue(v){if(!xs(v)||FHe(v))return!1;var x=tg(v)?nVe:Cr;return x.test(bb(v))}function rHe(v){return Ds(v)&&$u(v)==_t}function iHe(v){return Ds(v)&&Xa(v)==jt}function sHe(v){return Ds(v)&&hO(v.length)&&!!zr[$u(v)]}function Kue(v){return typeof v=="function"?v:v==null?Tl:typeof v=="object"?zn(v)?Jue(v[0],v[1]):Que(v):yce(v)}function b9(v){if(!VA(v))return uVe(v);var x=[];for(var k in Li(v))vi.call(v,k)&&k!="constructor"&&x.push(k);return x}function oHe(v){if(!xs(v))return zHe(v);var x=VA(v),k=[];for(var U in v)U=="constructor"&&(x||!vi.call(v,U))||k.push(U);return k}function _9(v,x){return v<x}function Xue(v,x){var k=-1,U=El(v)?ze(v.length):[];return fy(v,function(Q,re,ce){U[++k]=x(Q,re,ce)}),U}function Que(v){var x=$9(v);return x.length==1&&x[0][2]?Nle(x[0][0],x[0][1]):function(k){return k===v||v9(k,v,x)}}function Jue(v,x){return L9(v)&&Rle(x)?Nle(np(v),x):function(k){var U=G9(k,v);return U===n&&U===x?Y9(k,v):BA(x,U,p|m)}}function QD(v,x,k,U,Q){v!==x&&p9(x,function(re,ce){if(Q||(Q=new Dd),xs(re))aHe(v,x,ce,k,QD,U,Q);else{var ye=U?U(j9(v,ce),re,ce+"",v,x,Q):n;ye===n&&(ye=re),d9(v,ce,ye)}},Sl)}function aHe(v,x,k,U,Q,re,ce){var ye=j9(v,k),Ne=j9(x,k),et=ce.get(Ne);if(et){d9(v,k,et);return}var tt=re?re(ye,Ne,k+"",v,x,ce):n,ct=tt===n;if(ct){var $t=zn(Ne),Jt=!$t&&my(Ne),pn=!$t&&!Jt&&Fx(Ne);tt=Ne,$t||Jt||pn?zn(ye)?tt=ye:Gs(ye)?tt=xl(ye):Jt?(ct=!1,tt=cle(Ne,!0)):pn?(ct=!1,tt=fle(Ne,!0)):tt=[]:qA(Ne)||_b(Ne)?(tt=ye,_b(ye)?tt=ace(ye):(!xs(ye)||tg(ye))&&(tt=kle(Ne))):ct=!1}ct&&(ce.set(Ne,tt),Q(tt,Ne,U,re,ce),ce.delete(Ne)),d9(v,k,tt)}function Zue(v,x){var k=v.length;if(k)return x+=x<0?k:0,eg(x,k)?v[x]:n}function ele(v,x,k){x.length?x=Mi(x,function(re){return zn(re)?function(ce){return yb(ce,re.length===1?re[0]:re)}:re}):x=[Tl];var U=-1;x=Mi(x,hi(hn()));var Q=Xue(v,function(re,ce,ye){var Ne=Mi(x,function(et){return et(re)});return{criteria:Ne,index:++U,value:re}});return He(Q,function(re,ce){return _He(re,ce,k)})}function uHe(v,x){return tle(v,x,function(k,U){return Y9(v,U)})}function tle(v,x,k){for(var U=-1,Q=x.length,re={};++U<Q;){var ce=x[U],ye=yb(v,ce);k(ye,ce)&&UA(re,hy(ce,v),ye)}return re}function lHe(v){return function(x){return yb(x,v)}}function w9(v,x,k,U){var Q=U?uy:Ym,re=-1,ce=x.length,ye=v;for(v===x&&(x=xl(x)),k&&(ye=Mi(v,hi(k)));++re<ce;)for(var Ne=0,et=x[re],tt=k?k(et):et;(Ne=Q(ye,tt,Ne,U))>-1;)ye!==v&&UD.call(ye,Ne,1),UD.call(v,Ne,1);return v}function nle(v,x){for(var k=v?x.length:0,U=k-1;k--;){var Q=x[k];if(k==U||Q!==re){var re=Q;eg(Q)?UD.call(v,Q,1):T9(v,Q)}}return v}function x9(v,x){return v+HD(Mue()*(x-v+1))}function cHe(v,x,k,U){for(var Q=-1,re=Ro(VD((x-v)/(k||1)),0),ce=ze(re);re--;)ce[U?re:++Q]=v,v+=k;return ce}function E9(v,x){var k="";if(!v||x<1||x>q)return k;do x%2&&(k+=v),x=HD(x/2),x&&(v+=v);while(x);return k}function ar(v,x){return B9(Ple(v,x,Tl),v+"")}function fHe(v){return jue(jx(v))}function dHe(v,x){var k=jx(v);return aO(k,gb(x,0,k.length))}function UA(v,x,k,U){if(!xs(v))return v;x=hy(x,v);for(var Q=-1,re=x.length,ce=re-1,ye=v;ye!=null&&++Q<re;){var Ne=np(x[Q]),et=k;if(Ne==="__proto__"||Ne==="constructor"||Ne==="prototype")return v;if(Q!=ce){var tt=ye[Ne];et=U?U(tt,Ne,ye):n,et===n&&(et=xs(tt)?tt:eg(x[Q+1])?[]:{})}LA(ye,Ne,et),ye=ye[Ne]}return v}var rle=qD?function(v,x){return qD.set(v,x),v}:Tl,hHe=zD?function(v,x){return zD(v,"toString",{configurable:!0,enumerable:!1,value:X9(x),writable:!0})}:Tl;function pHe(v){return aO(jx(v))}function xf(v,x,k){var U=-1,Q=v.length;x<0&&(x=-x>Q?0:Q+x),k=k>Q?Q:k,k<0&&(k+=Q),Q=x>k?0:k-x>>>0,x>>>=0;for(var re=ze(Q);++U<Q;)re[U]=v[U+x];return re}function mHe(v,x){var k;return fy(v,function(U,Q,re){return k=x(U,Q,re),!k}),!!k}function JD(v,x,k){var U=0,Q=v==null?U:v.length;if(typeof x=="number"&&x===x&&Q<=V){for(;U<Q;){var re=U+Q>>>1,ce=v[re];ce!==null&&!Sc(ce)&&(k?ce<=x:ce<x)?U=re+1:Q=re}return Q}return S9(v,x,Tl,k)}function S9(v,x,k,U){var Q=0,re=v==null?0:v.length;if(re===0)return 0;x=k(x);for(var ce=x!==x,ye=x===null,Ne=Sc(x),et=x===n;Q<re;){var tt=HD((Q+re)/2),ct=k(v[tt]),$t=ct!==n,Jt=ct===null,pn=ct===ct,rr=Sc(ct);if(ce)var mn=U||pn;else et?mn=pn&&(U||$t):ye?mn=pn&&$t&&(U||!Jt):Ne?mn=pn&&$t&&!Jt&&(U||!rr):Jt||rr?mn=!1:mn=U?ct<=x:ct<x;mn?Q=tt+1:re=tt}return Ka(re,X)}function ile(v,x){for(var k=-1,U=v.length,Q=0,re=[];++k<U;){var ce=v[k],ye=x?x(ce):ce;if(!k||!Od(ye,Ne)){var Ne=ye;re[Q++]=ce===0?0:ce}}return re}function sle(v){return typeof v=="number"?v:Sc(v)?$:+v}function Ec(v){if(typeof v=="string")return v;if(zn(v))return Mi(v,Ec)+"";if(Sc(v))return Lue?Lue.call(v):"";var x=v+"";return x=="0"&&1/v==-H?"-0":x}function dy(v,x,k){var U=-1,Q=cb,re=v.length,ce=!0,ye=[],Ne=ye;if(k)ce=!1,Q=ay;else if(re>=i){var et=x?null:CHe(v);if(et)return DD(et);ce=!1,Q=vf,Ne=new mb}else Ne=x?[]:ye;e:for(;++U<re;){var tt=v[U],ct=x?x(tt):tt;if(tt=k||tt!==0?tt:0,ce&&ct===ct){for(var $t=Ne.length;$t--;)if(Ne[$t]===ct)continue e;x&&Ne.push(ct),ye.push(tt)}else Q(Ne,ct,k)||(Ne!==ye&&Ne.push(ct),ye.push(tt))}return ye}function T9(v,x){return x=hy(x,v),v=Dle(v,x),v==null||delete v[np(Ef(x))]}function ole(v,x,k,U){return UA(v,x,k(yb(v,x)),U)}function ZD(v,x,k,U){for(var Q=v.length,re=U?Q:-1;(U?re--:++re<Q)&&x(v[re],re,v););return k?xf(v,U?0:re,U?re+1:Q):xf(v,U?re+1:0,U?Q:re)}function ale(v,x){var k=v;return k instanceof _r&&(k=k.value()),Nd(x,function(U,Q){return Q.func.apply(Q.thisArg,Rd([U],Q.args))},k)}function C9(v,x,k){var U=v.length;if(U<2)return U?dy(v[0]):[];for(var Q=-1,re=ze(U);++Q<U;)for(var ce=v[Q],ye=-1;++ye<U;)ye!=Q&&(re[Q]=FA(re[Q]||ce,v[ye],x,k));return dy(wa(re,1),x,k)}function ule(v,x,k){for(var U=-1,Q=v.length,re=x.length,ce={};++U<Q;){var ye=U<re?x[U]:n;k(ce,v[U],ye)}return ce}function A9(v){return Gs(v)?v:[]}function I9(v){return typeof v=="function"?v:Tl}function hy(v,x){return zn(v)?v:L9(v,x)?[v]:Lle(pi(v))}var gHe=ar;function py(v,x,k){var U=v.length;return k=k===n?U:k,!x&&k>=U?v:xf(v,x,k)}var lle=rVe||function(v){return an.clearTimeout(v)};function cle(v,x){if(x)return v.slice();var k=v.length,U=Nue?Nue(k):new v.constructor(k);return v.copy(U),U}function k9(v){var x=new v.constructor(v.byteLength);return new jD(x).set(new jD(v)),x}function yHe(v,x){var k=x?k9(v.buffer):v.buffer;return new v.constructor(k,v.byteOffset,v.byteLength)}function vHe(v){var x=new v.constructor(v.source,tr.exec(v));return x.lastIndex=v.lastIndex,x}function bHe(v){return MA?Li(MA.call(v)):{}}function fle(v,x){var k=x?k9(v.buffer):v.buffer;return new v.constructor(k,v.byteOffset,v.length)}function dle(v,x){if(v!==x){var k=v!==n,U=v===null,Q=v===v,re=Sc(v),ce=x!==n,ye=x===null,Ne=x===x,et=Sc(x);if(!ye&&!et&&!re&&v>x||re&&ce&&Ne&&!ye&&!et||U&&ce&&Ne||!k&&Ne||!Q)return 1;if(!U&&!re&&!et&&v<x||et&&k&&Q&&!U&&!re||ye&&k&&Q||!ce&&Q||!Ne)return-1}return 0}function _He(v,x,k){for(var U=-1,Q=v.criteria,re=x.criteria,ce=Q.length,ye=k.length;++U<ce;){var Ne=dle(Q[U],re[U]);if(Ne){if(U>=ye)return Ne;var et=k[U];return Ne*(et=="desc"?-1:1)}}return v.index-x.index}function hle(v,x,k,U){for(var Q=-1,re=v.length,ce=k.length,ye=-1,Ne=x.length,et=Ro(re-ce,0),tt=ze(Ne+et),ct=!U;++ye<Ne;)tt[ye]=x[ye];for(;++Q<ce;)(ct||Q<re)&&(tt[k[Q]]=v[Q]);for(;et--;)tt[ye++]=v[Q++];return tt}function ple(v,x,k,U){for(var Q=-1,re=v.length,ce=-1,ye=k.length,Ne=-1,et=x.length,tt=Ro(re-ye,0),ct=ze(tt+et),$t=!U;++Q<tt;)ct[Q]=v[Q];for(var Jt=Q;++Ne<et;)ct[Jt+Ne]=x[Ne];for(;++ce<ye;)($t||Q<re)&&(ct[Jt+k[ce]]=v[Q++]);return ct}function xl(v,x){var k=-1,U=v.length;for(x||(x=ze(U));++k<U;)x[k]=v[k];return x}function tp(v,x,k,U){var Q=!k;k||(k={});for(var re=-1,ce=x.length;++re<ce;){var ye=x[re],Ne=U?U(k[ye],v[ye],ye,k,v):n;Ne===n&&(Ne=v[ye]),Q?Qm(k,ye,Ne):LA(k,ye,Ne)}return k}function wHe(v,x){return tp(v,M9(v),x)}function xHe(v,x){return tp(v,Ale(v),x)}function eO(v,x){return function(k,U){var Q=zn(k)?lb:HVe,re=x?x():{};return Q(k,v,hn(U,2),re)}}function $x(v){return ar(function(x,k){var U=-1,Q=k.length,re=Q>1?k[Q-1]:n,ce=Q>2?k[2]:n;for(re=v.length>3&&typeof re=="function"?(Q--,re):n,ce&&Mu(k[0],k[1],ce)&&(re=Q<3?n:re,Q=1),x=Li(x);++U<Q;){var ye=k[U];ye&&v(x,ye,U,re)}return x})}function mle(v,x){return function(k,U){if(k==null)return k;if(!El(k))return v(k,U);for(var Q=k.length,re=x?Q:-1,ce=Li(k);(x?re--:++re<Q)&&U(ce[re],re,ce)!==!1;);return k}}function gle(v){return function(x,k,U){for(var Q=-1,re=Li(x),ce=U(x),ye=ce.length;ye--;){var Ne=ce[v?ye:++Q];if(k(re[Ne],Ne,re)===!1)break}return x}}function EHe(v,x,k){var U=x&g,Q=zA(v);function re(){var ce=this&&this!==an&&this instanceof re?Q:v;return ce.apply(U?k:this,arguments)}return re}function yle(v){return function(x){x=pi(x);var k=Ix(x)?Pd(x):n,U=k?k[0]:x.charAt(0),Q=k?py(k,1).join(""):x.slice(1);return U[v]()+Q}}function Mx(v){return function(x){return Nd(mce(pce(x).replace(wx,"")),v,"")}}function zA(v){return function(){var x=arguments;switch(x.length){case 0:return new v;case 1:return new v(x[0]);case 2:return new v(x[0],x[1]);case 3:return new v(x[0],x[1],x[2]);case 4:return new v(x[0],x[1],x[2],x[3]);case 5:return new v(x[0],x[1],x[2],x[3],x[4]);case 6:return new v(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new v(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var k=Ox(v.prototype),U=v.apply(k,x);return xs(U)?U:k}}function SHe(v,x,k){var U=zA(v);function Q(){for(var re=arguments.length,ce=ze(re),ye=re,Ne=Lx(Q);ye--;)ce[ye]=arguments[ye];var et=re<3&&ce[0]!==Ne&&ce[re-1]!==Ne?[]:ly(ce,Ne);if(re-=et.length,re<k)return xle(v,x,tO,Q.placeholder,n,ce,et,n,n,k-re);var tt=this&&this!==an&&this instanceof Q?U:v;return Ga(tt,this,ce)}return Q}function vle(v){return function(x,k,U){var Q=Li(x);if(!El(x)){var re=hn(k,3);x=Qo(x),k=function(ye){return re(Q[ye],ye,Q)}}var ce=v(x,k,U);return ce>-1?Q[re?x[ce]:ce]:n}}function ble(v){return Zm(function(x){var k=x.length,U=k,Q=_f.prototype.thru;for(v&&x.reverse();U--;){var re=x[U];if(typeof re!="function")throw new bf(o);if(Q&&!ce&&sO(re)=="wrapper")var ce=new _f([],!0)}for(U=ce?U:k;++U<k;){re=x[U];var ye=sO(re),Ne=ye=="wrapper"?O9(re):n;Ne&&F9(Ne[0])&&Ne[1]==(C|w|S|I)&&!Ne[4].length&&Ne[9]==1?ce=ce[sO(Ne[0])].apply(ce,Ne[3]):ce=re.length==1&&F9(re)?ce[ye]():ce.thru(re)}return function(){var et=arguments,tt=et[0];if(ce&&et.length==1&&zn(tt))return ce.plant(tt).value();for(var ct=0,$t=k?x[ct].apply(this,et):tt;++ct<k;)$t=x[ct].call(this,$t);return $t}})}function tO(v,x,k,U,Q,re,ce,ye,Ne,et){var tt=x&C,ct=x&g,$t=x&y,Jt=x&(w|E),pn=x&R,rr=$t?n:zA(v);function mn(){for(var mr=arguments.length,Rr=ze(mr),Tc=mr;Tc--;)Rr[Tc]=arguments[Tc];if(Jt)var Lu=Lx(mn),Cc=NA(Rr,Lu);if(U&&(Rr=hle(Rr,U,Q,Jt)),re&&(Rr=ple(Rr,re,ce,Jt)),mr-=Cc,Jt&&mr<et){var Ys=ly(Rr,Lu);return xle(v,x,tO,mn.placeholder,k,Rr,Ys,ye,Ne,et-mr)}var $d=ct?k:this,rg=$t?$d[v]:v;return mr=Rr.length,ye?Rr=HHe(Rr,ye):pn&&mr>1&&Rr.reverse(),tt&&Ne<mr&&(Rr.length=Ne),this&&this!==an&&this instanceof mn&&(rg=rr||zA(rg)),rg.apply($d,Rr)}return mn}function _le(v,x){return function(k,U){return JVe(k,v,x(U),{})}}function nO(v,x){return function(k,U){var Q;if(k===n&&U===n)return x;if(k!==n&&(Q=k),U!==n){if(Q===n)return U;typeof k=="string"||typeof U=="string"?(k=Ec(k),U=Ec(U)):(k=sle(k),U=sle(U)),Q=v(k,U)}return Q}}function R9(v){return Zm(function(x){return x=Mi(x,hi(hn())),ar(function(k){var U=this;return v(x,function(Q){return Ga(Q,U,k)})})})}function rO(v,x){x=x===n?" ":Ec(x);var k=x.length;if(k<2)return k?E9(x,v):x;var U=E9(x,VD(v/kx(x)));return Ix(x)?py(Pd(U),0,v).join(""):U.slice(0,v)}function THe(v,x,k,U){var Q=x&g,re=zA(v);function ce(){for(var ye=-1,Ne=arguments.length,et=-1,tt=U.length,ct=ze(tt+Ne),$t=this&&this!==an&&this instanceof ce?re:v;++et<tt;)ct[et]=U[et];for(;Ne--;)ct[et++]=arguments[++ye];return Ga($t,Q?k:this,ct)}return ce}function wle(v){return function(x,k,U){return U&&typeof U!="number"&&Mu(x,k,U)&&(k=U=n),x=ng(x),k===n?(k=x,x=0):k=ng(k),U=U===n?x<k?1:-1:ng(U),cHe(x,k,U,v)}}function iO(v){return function(x,k){return typeof x=="string"&&typeof k=="string"||(x=Sf(x),k=Sf(k)),v(x,k)}}function xle(v,x,k,U,Q,re,ce,ye,Ne,et){var tt=x&w,ct=tt?ce:n,$t=tt?n:ce,Jt=tt?re:n,pn=tt?n:re;x|=tt?S:T,x&=~(tt?T:S),x&b||(x&=~(g|y));var rr=[v,x,Q,Jt,ct,pn,$t,ye,Ne,et],mn=k.apply(n,rr);return F9(v)&&Ole(mn,rr),mn.placeholder=U,$le(mn,v,x)}function N9(v){var x=ko[v];return function(k,U){if(k=Sf(k),U=U==null?0:Ka(Yn(U),292),U&&$ue(k)){var Q=(pi(k)+"e").split("e"),re=x(Q[0]+"e"+(+Q[1]+U));return Q=(pi(re)+"e").split("e"),+(Q[0]+"e"+(+Q[1]-U))}return x(k)}}var CHe=Px&&1/DD(new Px([,-0]))[1]==H?function(v){return new Px(v)}:Z9;function Ele(v){return function(x){var k=Xa(x);return k==Ze?a9(x):k==jt?Vze(x):Io(x,v(x))}}function Jm(v,x,k,U,Q,re,ce,ye){var Ne=x&y;if(!Ne&&typeof v!="function")throw new bf(o);var et=U?U.length:0;if(et||(x&=~(S|T),U=Q=n),ce=ce===n?ce:Ro(Yn(ce),0),ye=ye===n?ye:Yn(ye),et-=Q?Q.length:0,x&T){var tt=U,ct=Q;U=Q=n}var $t=Ne?n:O9(v),Jt=[v,x,k,U,Q,tt,ct,re,ce,ye];if($t&&UHe(Jt,$t),v=Jt[0],x=Jt[1],k=Jt[2],U=Jt[3],Q=Jt[4],ye=Jt[9]=Jt[9]===n?Ne?0:v.length:Ro(Jt[9]-et,0),!ye&&x&(w|E)&&(x&=~(w|E)),!x||x==g)var pn=EHe(v,x,k);else x==w||x==E?pn=SHe(v,x,ye):(x==S||x==(g|S))&&!Q.length?pn=THe(v,x,k,U):pn=tO.apply(n,Jt);var rr=$t?rle:Ole;return $le(rr(pn,Jt),v,x)}function Sle(v,x,k,U){return v===n||Od(v,Nx[k])&&!vi.call(U,k)?x:v}function Tle(v,x,k,U,Q,re){return xs(v)&&xs(x)&&(re.set(x,v),QD(v,x,n,Tle,re),re.delete(x)),v}function AHe(v){return qA(v)?n:v}function Cle(v,x,k,U,Q,re){var ce=k&p,ye=v.length,Ne=x.length;if(ye!=Ne&&!(ce&&Ne>ye))return!1;var et=re.get(v),tt=re.get(x);if(et&&tt)return et==x&&tt==v;var ct=-1,$t=!0,Jt=k&m?new mb:n;for(re.set(v,x),re.set(x,v);++ct<ye;){var pn=v[ct],rr=x[ct];if(U)var mn=ce?U(rr,pn,ct,x,v,re):U(pn,rr,ct,v,x,re);if(mn!==n){if(mn)continue;$t=!1;break}if(Jt){if(!Cx(x,function(mr,Rr){if(!vf(Jt,Rr)&&(pn===mr||Q(pn,mr,k,U,re)))return Jt.push(Rr)})){$t=!1;break}}else if(!(pn===rr||Q(pn,rr,k,U,re))){$t=!1;break}}return re.delete(v),re.delete(x),$t}function IHe(v,x,k,U,Q,re,ce){switch(k){case rt:if(v.byteLength!=x.byteLength||v.byteOffset!=x.byteOffset)return!1;v=v.buffer,x=x.buffer;case $e:return!(v.byteLength!=x.byteLength||!re(new jD(v),new jD(x)));case be:case xe:case It:return Od(+v,+x);case je:return v.name==x.name&&v.message==x.message;case _t:case ot:return v==x+"";case Ze:var ye=a9;case jt:var Ne=U&p;if(ye||(ye=DD),v.size!=x.size&&!Ne)return!1;var et=ce.get(v);if(et)return et==x;U|=m,ce.set(v,x);var tt=Cle(ye(v),ye(x),U,Q,re,ce);return ce.delete(v),tt;case Se:if(MA)return MA.call(v)==MA.call(x)}return!1}function kHe(v,x,k,U,Q,re){var ce=k&p,ye=P9(v),Ne=ye.length,et=P9(x),tt=et.length;if(Ne!=tt&&!ce)return!1;for(var ct=Ne;ct--;){var $t=ye[ct];if(!(ce?$t in x:vi.call(x,$t)))return!1}var Jt=re.get(v),pn=re.get(x);if(Jt&&pn)return Jt==x&&pn==v;var rr=!0;re.set(v,x),re.set(x,v);for(var mn=ce;++ct<Ne;){$t=ye[ct];var mr=v[$t],Rr=x[$t];if(U)var Tc=ce?U(Rr,mr,$t,x,v,re):U(mr,Rr,$t,v,x,re);if(!(Tc===n?mr===Rr||Q(mr,Rr,k,U,re):Tc)){rr=!1;break}mn||(mn=$t=="constructor")}if(rr&&!mn){var Lu=v.constructor,Cc=x.constructor;Lu!=Cc&&"constructor"in v&&"constructor"in x&&!(typeof Lu=="function"&&Lu instanceof Lu&&typeof Cc=="function"&&Cc instanceof Cc)&&(rr=!1)}return re.delete(v),re.delete(x),rr}function Zm(v){return B9(Ple(v,n,Ule),v+"")}function P9(v){return Wue(v,Qo,M9)}function D9(v){return Wue(v,Sl,Ale)}var O9=qD?function(v){return qD.get(v)}:Z9;function sO(v){for(var x=v.name+"",k=Dx[x],U=vi.call(Dx,x)?k.length:0;U--;){var Q=k[U],re=Q.func;if(re==null||re==v)return Q.name}return x}function Lx(v){var x=vi.call(Z,"placeholder")?Z:v;return x.placeholder}function hn(){var v=Z.iteratee||Q9;return v=v===Q9?Kue:v,arguments.length?v(arguments[0],arguments[1]):v}function oO(v,x){var k=v.__data__;return LHe(x)?k[typeof x=="string"?"string":"hash"]:k.map}function $9(v){for(var x=Qo(v),k=x.length;k--;){var U=x[k],Q=v[U];x[k]=[U,Q,Rle(Q)]}return x}function vb(v,x){var k=Bze(v,x);return Yue(k)?k:n}function RHe(v){var x=vi.call(v,hb),k=v[hb];try{v[hb]=n;var U=!0}catch{}var Q=LD.call(v);return U&&(x?v[hb]=k:delete v[hb]),Q}var M9=l9?function(v){return v==null?[]:(v=Li(v),yf(l9(v),function(x){return Due.call(v,x)}))}:eU,Ale=l9?function(v){for(var x=[];v;)Rd(x,M9(v)),v=BD(v);return x}:eU,Xa=$u;(c9&&Xa(new c9(new ArrayBuffer(1)))!=rt||DA&&Xa(new DA)!=Ze||f9&&Xa(f9.resolve())!=Be||Px&&Xa(new Px)!=jt||OA&&Xa(new OA)!=Rt)&&(Xa=function(v){var x=$u(v),k=x==Ae?v.constructor:n,U=k?bb(k):"";if(U)switch(U){case dVe:return rt;case hVe:return Ze;case pVe:return Be;case mVe:return jt;case gVe:return Rt}return x});function NHe(v,x,k){for(var U=-1,Q=k.length;++U<Q;){var re=k[U],ce=re.size;switch(re.type){case"drop":v+=ce;break;case"dropRight":x-=ce;break;case"take":x=Ka(x,v+ce);break;case"takeRight":v=Ro(v,x-ce);break}}return{start:v,end:x}}function PHe(v){var x=v.match(me);return x?x[1].split(Le):[]}function Ile(v,x,k){x=hy(x,v);for(var U=-1,Q=x.length,re=!1;++U<Q;){var ce=np(x[U]);if(!(re=v!=null&&k(v,ce)))break;v=v[ce]}return re||++U!=Q?re:(Q=v==null?0:v.length,!!Q&&hO(Q)&&eg(ce,Q)&&(zn(v)||_b(v)))}function DHe(v){var x=v.length,k=new v.constructor(x);return x&&typeof v[0]=="string"&&vi.call(v,"index")&&(k.index=v.index,k.input=v.input),k}function kle(v){return typeof v.constructor=="function"&&!VA(v)?Ox(BD(v)):{}}function OHe(v,x,k){var U=v.constructor;switch(x){case $e:return k9(v);case be:case xe:return new U(+v);case rt:return yHe(v,k);case St:case Mt:case Zn:case Br:case er:case yr:case kn:case Un:case pr:return fle(v,k);case Ze:return new U;case It:case ot:return new U(v);case _t:return vHe(v);case jt:return new U;case Se:return bHe(v)}}function $He(v,x){var k=x.length;if(!k)return v;var U=k-1;return x[U]=(k>1?"& ":"")+x[U],x=x.join(k>2?", ":" "),v.replace(ae,`{
/* [wrapped with `+x+`] */
`)}function MHe(v){return zn(v)||_b(v)||!!(Oue&&v&&v[Oue])}function eg(v,x){var k=typeof v;return x=x??q,!!x&&(k=="number"||k!="symbol"&&on.test(v))&&v>-1&&v%1==0&&v<x}function Mu(v,x,k){if(!xs(k))return!1;var U=typeof x;return(U=="number"?El(k)&&eg(x,k.length):U=="string"&&x in k)?Od(k[x],v):!1}function L9(v,x){if(zn(v))return!1;var k=typeof v;return k=="number"||k=="symbol"||k=="boolean"||v==null||Sc(v)?!0:Ki.test(v)||!Yr.test(v)||x!=null&&v in Li(x)}function LHe(v){var x=typeof v;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?v!=="__proto__":v===null}function F9(v){var x=sO(v),k=Z[x];if(typeof k!="function"||!(x in _r.prototype))return!1;if(v===k)return!0;var U=O9(k);return!!U&&v===U[0]}function FHe(v){return!!Rue&&Rue in v}var jHe=$D?tg:tU;function VA(v){var x=v&&v.constructor,k=typeof x=="function"&&x.prototype||Nx;return v===k}function Rle(v){return v===v&&!xs(v)}function Nle(v,x){return function(k){return k==null?!1:k[v]===x&&(x!==n||v in Li(k))}}function BHe(v){var x=fO(v,function(U){return k.size===l&&k.clear(),U}),k=x.cache;return x}function UHe(v,x){var k=v[1],U=x[1],Q=k|U,re=Q<(g|y|C),ce=U==C&&k==w||U==C&&k==I&&v[7].length<=x[8]||U==(C|I)&&x[7].length<=x[8]&&k==w;if(!(re||ce))return v;U&g&&(v[2]=x[2],Q|=k&g?0:b);var ye=x[3];if(ye){var Ne=v[3];v[3]=Ne?hle(Ne,ye,x[4]):ye,v[4]=Ne?ly(v[3],c):x[4]}return ye=x[5],ye&&(Ne=v[5],v[5]=Ne?ple(Ne,ye,x[6]):ye,v[6]=Ne?ly(v[5],c):x[6]),ye=x[7],ye&&(v[7]=ye),U&C&&(v[8]=v[8]==null?x[8]:Ka(v[8],x[8])),v[9]==null&&(v[9]=x[9]),v[0]=x[0],v[1]=Q,v}function zHe(v){var x=[];if(v!=null)for(var k in Li(v))x.push(k);return x}function VHe(v){return LD.call(v)}function Ple(v,x,k){return x=Ro(x===n?v.length-1:x,0),function(){for(var U=arguments,Q=-1,re=Ro(U.length-x,0),ce=ze(re);++Q<re;)ce[Q]=U[x+Q];Q=-1;for(var ye=ze(x+1);++Q<x;)ye[Q]=U[Q];return ye[x]=k(ce),Ga(v,this,ye)}}function Dle(v,x){return x.length<2?v:yb(v,xf(x,0,-1))}function HHe(v,x){for(var k=v.length,U=Ka(x.length,k),Q=xl(v);U--;){var re=x[U];v[U]=eg(re,k)?Q[re]:n}return v}function j9(v,x){if(!(x==="constructor"&&typeof v[x]=="function")&&x!="__proto__")return v[x]}var Ole=Mle(rle),HA=sVe||function(v,x){return an.setTimeout(v,x)},B9=Mle(hHe);function $le(v,x,k){var U=x+"";return B9(v,$He(U,qHe(PHe(U),k)))}function Mle(v){var x=0,k=0;return function(){var U=lVe(),Q=M-(U-k);if(k=U,Q>0){if(++x>=L)return arguments[0]}else x=0;return v.apply(n,arguments)}}function aO(v,x){var k=-1,U=v.length,Q=U-1;for(x=x===n?U:x;++k<x;){var re=x9(k,Q),ce=v[re];v[re]=v[k],v[k]=ce}return v.length=x,v}var Lle=BHe(function(v){var x=[];return v.charCodeAt(0)===46&&x.push(""),v.replace(Ti,function(k,U,Q,re){x.push(Q?re.replace(Ut,"$1"):U||k)}),x});function np(v){if(typeof v=="string"||Sc(v))return v;var x=v+"";return x=="0"&&1/v==-H?"-0":x}function bb(v){if(v!=null){try{return MD.call(v)}catch{}try{return v+""}catch{}}return""}function qHe(v,x){return Ou(K,function(k){var U="_."+k[0];x&k[1]&&!cb(v,U)&&v.push(U)}),v.sort()}function Fle(v){if(v instanceof _r)return v.clone();var x=new _f(v.__wrapped__,v.__chain__);return x.__actions__=xl(v.__actions__),x.__index__=v.__index__,x.__values__=v.__values__,x}function WHe(v,x,k){(k?Mu(v,x,k):x===n)?x=1:x=Ro(Yn(x),0);var U=v==null?0:v.length;if(!U||x<1)return[];for(var Q=0,re=0,ce=ze(VD(U/x));Q<U;)ce[re++]=xf(v,Q,Q+=x);return ce}function GHe(v){for(var x=-1,k=v==null?0:v.length,U=0,Q=[];++x<k;){var re=v[x];re&&(Q[U++]=re)}return Q}function YHe(){var v=arguments.length;if(!v)return[];for(var x=ze(v-1),k=arguments[0],U=v;U--;)x[U-1]=arguments[U];return Rd(zn(k)?xl(k):[k],wa(x,1))}var KHe=ar(function(v,x){return Gs(v)?FA(v,wa(x,1,Gs,!0)):[]}),XHe=ar(function(v,x){var k=Ef(x);return Gs(k)&&(k=n),Gs(v)?FA(v,wa(x,1,Gs,!0),hn(k,2)):[]}),QHe=ar(function(v,x){var k=Ef(x);return Gs(k)&&(k=n),Gs(v)?FA(v,wa(x,1,Gs,!0),n,k):[]});function JHe(v,x,k){var U=v==null?0:v.length;return U?(x=k||x===n?1:Yn(x),xf(v,x<0?0:x,U)):[]}function ZHe(v,x,k){var U=v==null?0:v.length;return U?(x=k||x===n?1:Yn(x),x=U-x,xf(v,0,x<0?0:x)):[]}function eqe(v,x){return v&&v.length?ZD(v,hn(x,3),!0,!0):[]}function tqe(v,x){return v&&v.length?ZD(v,hn(x,3),!0):[]}function nqe(v,x,k,U){var Q=v==null?0:v.length;return Q?(k&&typeof k!="number"&&Mu(v,x,k)&&(k=0,U=Q),YVe(v,x,k,U)):[]}function jle(v,x,k){var U=v==null?0:v.length;if(!U)return-1;var Q=k==null?0:Yn(k);return Q<0&&(Q=Ro(U+Q,0)),fb(v,hn(x,3),Q)}function Ble(v,x,k){var U=v==null?0:v.length;if(!U)return-1;var Q=U-1;return k!==n&&(Q=Yn(k),Q=k<0?Ro(U+Q,0):Ka(Q,U-1)),fb(v,hn(x,3),Q,!0)}function Ule(v){var x=v==null?0:v.length;return x?wa(v,1):[]}function rqe(v){var x=v==null?0:v.length;return x?wa(v,H):[]}function iqe(v,x){var k=v==null?0:v.length;return k?(x=x===n?1:Yn(x),wa(v,x)):[]}function sqe(v){for(var x=-1,k=v==null?0:v.length,U={};++x<k;){var Q=v[x];U[Q[0]]=Q[1]}return U}function zle(v){return v&&v.length?v[0]:n}function oqe(v,x,k){var U=v==null?0:v.length;if(!U)return-1;var Q=k==null?0:Yn(k);return Q<0&&(Q=Ro(U+Q,0)),Ym(v,x,Q)}function aqe(v){var x=v==null?0:v.length;return x?xf(v,0,-1):[]}var uqe=ar(function(v){var x=Mi(v,A9);return x.length&&x[0]===v[0]?y9(x):[]}),lqe=ar(function(v){var x=Ef(v),k=Mi(v,A9);return x===Ef(k)?x=n:k.pop(),k.length&&k[0]===v[0]?y9(k,hn(x,2)):[]}),cqe=ar(function(v){var x=Ef(v),k=Mi(v,A9);return x=typeof x=="function"?x:n,x&&k.pop(),k.length&&k[0]===v[0]?y9(k,n,x):[]});function fqe(v,x){return v==null?"":aVe.call(v,x)}function Ef(v){var x=v==null?0:v.length;return x?v[x-1]:n}function dqe(v,x,k){var U=v==null?0:v.length;if(!U)return-1;var Q=U;return k!==n&&(Q=Yn(k),Q=Q<0?Ro(U+Q,0):Ka(Q,U-1)),x===x?qze(v,x,Q):fb(v,A,Q,!0)}function hqe(v,x){return v&&v.length?Zue(v,Yn(x)):n}var pqe=ar(Vle);function Vle(v,x){return v&&v.length&&x&&x.length?w9(v,x):v}function mqe(v,x,k){return v&&v.length&&x&&x.length?w9(v,x,hn(k,2)):v}function gqe(v,x,k){return v&&v.length&&x&&x.length?w9(v,x,n,k):v}var yqe=Zm(function(v,x){var k=v==null?0:v.length,U=h9(v,x);return nle(v,Mi(x,function(Q){return eg(Q,k)?+Q:Q}).sort(dle)),U});function vqe(v,x){var k=[];if(!(v&&v.length))return k;var U=-1,Q=[],re=v.length;for(x=hn(x,3);++U<re;){var ce=v[U];x(ce,U,v)&&(k.push(ce),Q.push(U))}return nle(v,Q),k}function U9(v){return v==null?v:fVe.call(v)}function bqe(v,x,k){var U=v==null?0:v.length;return U?(k&&typeof k!="number"&&Mu(v,x,k)?(x=0,k=U):(x=x==null?0:Yn(x),k=k===n?U:Yn(k)),xf(v,x,k)):[]}function _qe(v,x){return JD(v,x)}function wqe(v,x,k){return S9(v,x,hn(k,2))}function xqe(v,x){var k=v==null?0:v.length;if(k){var U=JD(v,x);if(U<k&&Od(v[U],x))return U}return-1}function Eqe(v,x){return JD(v,x,!0)}function Sqe(v,x,k){return S9(v,x,hn(k,2),!0)}function Tqe(v,x){var k=v==null?0:v.length;if(k){var U=JD(v,x,!0)-1;if(Od(v[U],x))return U}return-1}function Cqe(v){return v&&v.length?ile(v):[]}function Aqe(v,x){return v&&v.length?ile(v,hn(x,2)):[]}function Iqe(v){var x=v==null?0:v.length;return x?xf(v,1,x):[]}function kqe(v,x,k){return v&&v.length?(x=k||x===n?1:Yn(x),xf(v,0,x<0?0:x)):[]}function Rqe(v,x,k){var U=v==null?0:v.length;return U?(x=k||x===n?1:Yn(x),x=U-x,xf(v,x<0?0:x,U)):[]}function Nqe(v,x){return v&&v.length?ZD(v,hn(x,3),!1,!0):[]}function Pqe(v,x){return v&&v.length?ZD(v,hn(x,3)):[]}var Dqe=ar(function(v){return dy(wa(v,1,Gs,!0))}),Oqe=ar(function(v){var x=Ef(v);return Gs(x)&&(x=n),dy(wa(v,1,Gs,!0),hn(x,2))}),$qe=ar(function(v){var x=Ef(v);return x=typeof x=="function"?x:n,dy(wa(v,1,Gs,!0),n,x)});function Mqe(v){return v&&v.length?dy(v):[]}function Lqe(v,x){return v&&v.length?dy(v,hn(x,2)):[]}function Fqe(v,x){return x=typeof x=="function"?x:n,v&&v.length?dy(v,n,x):[]}function z9(v){if(!(v&&v.length))return[];var x=0;return v=yf(v,function(k){if(Gs(k))return x=Ro(k.length,x),!0}),oi(x,function(k){return Mi(v,G(k))})}function Hle(v,x){if(!(v&&v.length))return[];var k=z9(v);return x==null?k:Mi(k,function(U){return Ga(x,n,U)})}var jqe=ar(function(v,x){return Gs(v)?FA(v,x):[]}),Bqe=ar(function(v){return C9(yf(v,Gs))}),Uqe=ar(function(v){var x=Ef(v);return Gs(x)&&(x=n),C9(yf(v,Gs),hn(x,2))}),zqe=ar(function(v){var x=Ef(v);return x=typeof x=="function"?x:n,C9(yf(v,Gs),n,x)}),Vqe=ar(z9);function Hqe(v,x){return ule(v||[],x||[],LA)}function qqe(v,x){return ule(v||[],x||[],UA)}var Wqe=ar(function(v){var x=v.length,k=x>1?v[x-1]:n;return k=typeof k=="function"?(v.pop(),k):n,Hle(v,k)});function qle(v){var x=Z(v);return x.__chain__=!0,x}function Gqe(v,x){return x(v),v}function uO(v,x){return x(v)}var Yqe=Zm(function(v){var x=v.length,k=x?v[0]:0,U=this.__wrapped__,Q=function(re){return h9(re,v)};return x>1||this.__actions__.length||!(U instanceof _r)||!eg(k)?this.thru(Q):(U=U.slice(k,+k+(x?1:0)),U.__actions__.push({func:uO,args:[Q],thisArg:n}),new _f(U,this.__chain__).thru(function(re){return x&&!re.length&&re.push(n),re}))});function Kqe(){return qle(this)}function Xqe(){return new _f(this.value(),this.__chain__)}function Qqe(){this.__values__===n&&(this.__values__=sce(this.value()));var v=this.__index__>=this.__values__.length,x=v?n:this.__values__[this.__index__++];return{done:v,value:x}}function Jqe(){return this}function Zqe(v){for(var x,k=this;k instanceof GD;){var U=Fle(k);U.__index__=0,U.__values__=n,x?Q.__wrapped__=U:x=U;var Q=U;k=k.__wrapped__}return Q.__wrapped__=v,x}function eWe(){var v=this.__wrapped__;if(v instanceof _r){var x=v;return this.__actions__.length&&(x=new _r(this)),x=x.reverse(),x.__actions__.push({func:uO,args:[U9],thisArg:n}),new _f(x,this.__chain__)}return this.thru(U9)}function tWe(){return ale(this.__wrapped__,this.__actions__)}var nWe=eO(function(v,x,k){vi.call(v,k)?++v[k]:Qm(v,k,1)});function rWe(v,x,k){var U=zn(v)?Tx:GVe;return k&&Mu(v,x,k)&&(x=n),U(v,hn(x,3))}function iWe(v,x){var k=zn(v)?yf:Hue;return k(v,hn(x,3))}var sWe=vle(jle),oWe=vle(Ble);function aWe(v,x){return wa(lO(v,x),1)}function uWe(v,x){return wa(lO(v,x),H)}function lWe(v,x,k){return k=k===n?1:Yn(k),wa(lO(v,x),k)}function Wle(v,x){var k=zn(v)?Ou:fy;return k(v,hn(x,3))}function Gle(v,x){var k=zn(v)?kD:Vue;return k(v,hn(x,3))}var cWe=eO(function(v,x,k){vi.call(v,k)?v[k].push(x):Qm(v,k,[x])});function fWe(v,x,k,U){v=El(v)?v:jx(v),k=k&&!U?Yn(k):0;var Q=v.length;return k<0&&(k=Ro(Q+k,0)),pO(v)?k<=Q&&v.indexOf(x,k)>-1:!!Q&&Ym(v,x,k)>-1}var dWe=ar(function(v,x,k){var U=-1,Q=typeof x=="function",re=El(v)?ze(v.length):[];return fy(v,function(ce){re[++U]=Q?Ga(x,ce,k):jA(ce,x,k)}),re}),hWe=eO(function(v,x,k){Qm(v,k,x)});function lO(v,x){var k=zn(v)?Mi:Xue;return k(v,hn(x,3))}function pWe(v,x,k,U){return v==null?[]:(zn(x)||(x=x==null?[]:[x]),k=U?n:k,zn(k)||(k=k==null?[]:[k]),ele(v,x,k))}var mWe=eO(function(v,x,k){v[k?0:1].push(x)},function(){return[[],[]]});function gWe(v,x,k){var U=zn(v)?Nd:Pe,Q=arguments.length<3;return U(v,hn(x,4),k,Q,fy)}function yWe(v,x,k){var U=zn(v)?RD:Pe,Q=arguments.length<3;return U(v,hn(x,4),k,Q,Vue)}function vWe(v,x){var k=zn(v)?yf:Hue;return k(v,dO(hn(x,3)))}function bWe(v){var x=zn(v)?jue:fHe;return x(v)}function _We(v,x,k){(k?Mu(v,x,k):x===n)?x=1:x=Yn(x);var U=zn(v)?zVe:dHe;return U(v,x)}function wWe(v){var x=zn(v)?VVe:pHe;return x(v)}function xWe(v){if(v==null)return 0;if(El(v))return pO(v)?kx(v):v.length;var x=Xa(v);return x==Ze||x==jt?v.size:b9(v).length}function EWe(v,x,k){var U=zn(v)?Cx:mHe;return k&&Mu(v,x,k)&&(x=n),U(v,hn(x,3))}var SWe=ar(function(v,x){if(v==null)return[];var k=x.length;return k>1&&Mu(v,x[0],x[1])?x=[]:k>2&&Mu(x[0],x[1],x[2])&&(x=[x[0]]),ele(v,wa(x,1),[])}),cO=iVe||function(){return an.Date.now()};function TWe(v,x){if(typeof x!="function")throw new bf(o);return v=Yn(v),function(){if(--v<1)return x.apply(this,arguments)}}function Yle(v,x,k){return x=k?n:x,x=v&&x==null?v.length:x,Jm(v,C,n,n,n,n,x)}function Kle(v,x){var k;if(typeof x!="function")throw new bf(o);return v=Yn(v),function(){return--v>0&&(k=x.apply(this,arguments)),v<=1&&(x=n),k}}var V9=ar(function(v,x,k){var U=g;if(k.length){var Q=ly(k,Lx(V9));U|=S}return Jm(v,U,x,k,Q)}),Xle=ar(function(v,x,k){var U=g|y;if(k.length){var Q=ly(k,Lx(Xle));U|=S}return Jm(x,U,v,k,Q)});function Qle(v,x,k){x=k?n:x;var U=Jm(v,w,n,n,n,n,n,x);return U.placeholder=Qle.placeholder,U}function Jle(v,x,k){x=k?n:x;var U=Jm(v,E,n,n,n,n,n,x);return U.placeholder=Jle.placeholder,U}function Zle(v,x,k){var U,Q,re,ce,ye,Ne,et=0,tt=!1,ct=!1,$t=!0;if(typeof v!="function")throw new bf(o);x=Sf(x)||0,xs(k)&&(tt=!!k.leading,ct="maxWait"in k,re=ct?Ro(Sf(k.maxWait)||0,x):re,$t="trailing"in k?!!k.trailing:$t);function Jt(Ys){var $d=U,rg=Q;return U=Q=n,et=Ys,ce=v.apply(rg,$d),ce}function pn(Ys){return et=Ys,ye=HA(mr,x),tt?Jt(Ys):ce}function rr(Ys){var $d=Ys-Ne,rg=Ys-et,vce=x-$d;return ct?Ka(vce,re-rg):vce}function mn(Ys){var $d=Ys-Ne,rg=Ys-et;return Ne===n||$d>=x||$d<0||ct&&rg>=re}function mr(){var Ys=cO();if(mn(Ys))return Rr(Ys);ye=HA(mr,rr(Ys))}function Rr(Ys){return ye=n,$t&&U?Jt(Ys):(U=Q=n,ce)}function Tc(){ye!==n&&lle(ye),et=0,U=Ne=Q=ye=n}function Lu(){return ye===n?ce:Rr(cO())}function Cc(){var Ys=cO(),$d=mn(Ys);if(U=arguments,Q=this,Ne=Ys,$d){if(ye===n)return pn(Ne);if(ct)return lle(ye),ye=HA(mr,x),Jt(Ne)}return ye===n&&(ye=HA(mr,x)),ce}return Cc.cancel=Tc,Cc.flush=Lu,Cc}var CWe=ar(function(v,x){return zue(v,1,x)}),AWe=ar(function(v,x,k){return zue(v,Sf(x)||0,k)});function IWe(v){return Jm(v,R)}function fO(v,x){if(typeof v!="function"||x!=null&&typeof x!="function")throw new bf(o);var k=function(){var U=arguments,Q=x?x.apply(this,U):U[0],re=k.cache;if(re.has(Q))return re.get(Q);var ce=v.apply(this,U);return k.cache=re.set(Q,ce)||re,ce};return k.cache=new(fO.Cache||Xm),k}fO.Cache=Xm;function dO(v){if(typeof v!="function")throw new bf(o);return function(){var x=arguments;switch(x.length){case 0:return!v.call(this);case 1:return!v.call(this,x[0]);case 2:return!v.call(this,x[0],x[1]);case 3:return!v.call(this,x[0],x[1],x[2])}return!v.apply(this,x)}}function kWe(v){return Kle(2,v)}var RWe=gHe(function(v,x){x=x.length==1&&zn(x[0])?Mi(x[0],hi(hn())):Mi(wa(x,1),hi(hn()));var k=x.length;return ar(function(U){for(var Q=-1,re=Ka(U.length,k);++Q<re;)U[Q]=x[Q].call(this,U[Q]);return Ga(v,this,U)})}),H9=ar(function(v,x){var k=ly(x,Lx(H9));return Jm(v,S,n,x,k)}),ece=ar(function(v,x){var k=ly(x,Lx(ece));return Jm(v,T,n,x,k)}),NWe=Zm(function(v,x){return Jm(v,I,n,n,n,x)});function PWe(v,x){if(typeof v!="function")throw new bf(o);return x=x===n?x:Yn(x),ar(v,x)}function DWe(v,x){if(typeof v!="function")throw new bf(o);return x=x==null?0:Ro(Yn(x),0),ar(function(k){var U=k[x],Q=py(k,0,x);return U&&Rd(Q,U),Ga(v,this,Q)})}function OWe(v,x,k){var U=!0,Q=!0;if(typeof v!="function")throw new bf(o);return xs(k)&&(U="leading"in k?!!k.leading:U,Q="trailing"in k?!!k.trailing:Q),Zle(v,x,{leading:U,maxWait:x,trailing:Q})}function $We(v){return Yle(v,1)}function MWe(v,x){return H9(I9(x),v)}function LWe(){if(!arguments.length)return[];var v=arguments[0];return zn(v)?v:[v]}function FWe(v){return wf(v,h)}function jWe(v,x){return x=typeof x=="function"?x:n,wf(v,h,x)}function BWe(v){return wf(v,f|h)}function UWe(v,x){return x=typeof x=="function"?x:n,wf(v,f|h,x)}function zWe(v,x){return x==null||Uue(v,x,Qo(x))}function Od(v,x){return v===x||v!==v&&x!==x}var VWe=iO(g9),HWe=iO(function(v,x){return v>=x}),_b=Gue(function(){return arguments}())?Gue:function(v){return Ds(v)&&vi.call(v,"callee")&&!Due.call(v,"callee")},zn=ze.isArray,qWe=Wm?hi(Wm):ZVe;function El(v){return v!=null&&hO(v.length)&&!tg(v)}function Gs(v){return Ds(v)&&El(v)}function WWe(v){return v===!0||v===!1||Ds(v)&&$u(v)==be}var my=oVe||tU,GWe=Gm?hi(Gm):eHe;function YWe(v){return Ds(v)&&v.nodeType===1&&!qA(v)}function KWe(v){if(v==null)return!0;if(El(v)&&(zn(v)||typeof v=="string"||typeof v.splice=="function"||my(v)||Fx(v)||_b(v)))return!v.length;var x=Xa(v);if(x==Ze||x==jt)return!v.size;if(VA(v))return!b9(v).length;for(var k in v)if(vi.call(v,k))return!1;return!0}function XWe(v,x){return BA(v,x)}function QWe(v,x,k){k=typeof k=="function"?k:n;var U=k?k(v,x):n;return U===n?BA(v,x,n,k):!!U}function q9(v){if(!Ds(v))return!1;var x=$u(v);return x==je||x==ke||typeof v.message=="string"&&typeof v.name=="string"&&!qA(v)}function JWe(v){return typeof v=="number"&&$ue(v)}function tg(v){if(!xs(v))return!1;var x=$u(v);return x==Re||x==ft||x==_e||x==st}function tce(v){return typeof v=="number"&&v==Yn(v)}function hO(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=q}function xs(v){var x=typeof v;return v!=null&&(x=="object"||x=="function")}function Ds(v){return v!=null&&typeof v=="object"}var nce=ab?hi(ab):nHe;function ZWe(v,x){return v===x||v9(v,x,$9(x))}function eGe(v,x,k){return k=typeof k=="function"?k:n,v9(v,x,$9(x),k)}function tGe(v){return rce(v)&&v!=+v}function nGe(v){if(jHe(v))throw new Fn(s);return Yue(v)}function rGe(v){return v===null}function iGe(v){return v==null}function rce(v){return typeof v=="number"||Ds(v)&&$u(v)==It}function qA(v){if(!Ds(v)||$u(v)!=Ae)return!1;var x=BD(v);if(x===null)return!0;var k=vi.call(x,"constructor")&&x.constructor;return typeof k=="function"&&k instanceof k&&MD.call(k)==eVe}var W9=RA?hi(RA):rHe;function sGe(v){return tce(v)&&v>=-q&&v<=q}var ice=ub?hi(ub):iHe;function pO(v){return typeof v=="string"||!zn(v)&&Ds(v)&&$u(v)==ot}function Sc(v){return typeof v=="symbol"||Ds(v)&&$u(v)==Se}var Fx=ID?hi(ID):sHe;function oGe(v){return v===n}function aGe(v){return Ds(v)&&Xa(v)==Rt}function uGe(v){return Ds(v)&&$u(v)==Te}var lGe=iO(_9),cGe=iO(function(v,x){return v<=x});function sce(v){if(!v)return[];if(El(v))return pO(v)?Pd(v):xl(v);if(PA&&v[PA])return zze(v[PA]());var x=Xa(v),k=x==Ze?a9:x==jt?DD:jx;return k(v)}function ng(v){if(!v)return v===0?v:0;if(v=Sf(v),v===H||v===-H){var x=v<0?-1:1;return x*Y}return v===v?v:0}function Yn(v){var x=ng(v),k=x%1;return x===x?k?x-k:x:0}function oce(v){return v?gb(Yn(v),0,W):0}function Sf(v){if(typeof v=="number")return v;if(Sc(v))return $;if(xs(v)){var x=typeof v.valueOf=="function"?v.valueOf():v;v=xs(x)?x+"":x}if(typeof v!="string")return v===0?v:+v;v=kr(v);var k=On.test(v);return k||ii.test(v)?or(v.slice(2),k?2:8):cr.test(v)?$:+v}function ace(v){return tp(v,Sl(v))}function fGe(v){return v?gb(Yn(v),-q,q):v===0?v:0}function pi(v){return v==null?"":Ec(v)}var dGe=$x(function(v,x){if(VA(x)||El(x)){tp(x,Qo(x),v);return}for(var k in x)vi.call(x,k)&&LA(v,k,x[k])}),uce=$x(function(v,x){tp(x,Sl(x),v)}),mO=$x(function(v,x,k,U){tp(x,Sl(x),v,U)}),hGe=$x(function(v,x,k,U){tp(x,Qo(x),v,U)}),pGe=Zm(h9);function mGe(v,x){var k=Ox(v);return x==null?k:Bue(k,x)}var gGe=ar(function(v,x){v=Li(v);var k=-1,U=x.length,Q=U>2?x[2]:n;for(Q&&Mu(x[0],x[1],Q)&&(U=1);++k<U;)for(var re=x[k],ce=Sl(re),ye=-1,Ne=ce.length;++ye<Ne;){var et=ce[ye],tt=v[et];(tt===n||Od(tt,Nx[et])&&!vi.call(v,et))&&(v[et]=re[et])}return v}),yGe=ar(function(v){return v.push(n,Tle),Ga(lce,n,v)});function vGe(v,x){return Ya(v,hn(x,3),ep)}function bGe(v,x){return Ya(v,hn(x,3),m9)}function _Ge(v,x){return v==null?v:p9(v,hn(x,3),Sl)}function wGe(v,x){return v==null?v:que(v,hn(x,3),Sl)}function xGe(v,x){return v&&ep(v,hn(x,3))}function EGe(v,x){return v&&m9(v,hn(x,3))}function SGe(v){return v==null?[]:XD(v,Qo(v))}function TGe(v){return v==null?[]:XD(v,Sl(v))}function G9(v,x,k){var U=v==null?n:yb(v,x);return U===n?k:U}function CGe(v,x){return v!=null&&Ile(v,x,KVe)}function Y9(v,x){return v!=null&&Ile(v,x,XVe)}var AGe=_le(function(v,x,k){x!=null&&typeof x.toString!="function"&&(x=LD.call(x)),v[x]=k},X9(Tl)),IGe=_le(function(v,x,k){x!=null&&typeof x.toString!="function"&&(x=LD.call(x)),vi.call(v,x)?v[x].push(k):v[x]=[k]},hn),kGe=ar(jA);function Qo(v){return El(v)?Fue(v):b9(v)}function Sl(v){return El(v)?Fue(v,!0):oHe(v)}function RGe(v,x){var k={};return x=hn(x,3),ep(v,function(U,Q,re){Qm(k,x(U,Q,re),U)}),k}function NGe(v,x){var k={};return x=hn(x,3),ep(v,function(U,Q,re){Qm(k,Q,x(U,Q,re))}),k}var PGe=$x(function(v,x,k){QD(v,x,k)}),lce=$x(function(v,x,k,U){QD(v,x,k,U)}),DGe=Zm(function(v,x){var k={};if(v==null)return k;var U=!1;x=Mi(x,function(re){return re=hy(re,v),U||(U=re.length>1),re}),tp(v,D9(v),k),U&&(k=wf(k,f|d|h,AHe));for(var Q=x.length;Q--;)T9(k,x[Q]);return k});function OGe(v,x){return cce(v,dO(hn(x)))}var $Ge=Zm(function(v,x){return v==null?{}:uHe(v,x)});function cce(v,x){if(v==null)return{};var k=Mi(D9(v),function(U){return[U]});return x=hn(x),tle(v,k,function(U,Q){return x(U,Q[0])})}function MGe(v,x,k){x=hy(x,v);var U=-1,Q=x.length;for(Q||(Q=1,v=n);++U<Q;){var re=v==null?n:v[np(x[U])];re===n&&(U=Q,re=k),v=tg(re)?re.call(v):re}return v}function LGe(v,x,k){return v==null?v:UA(v,x,k)}function FGe(v,x,k,U){return U=typeof U=="function"?U:n,v==null?v:UA(v,x,k,U)}var fce=Ele(Qo),dce=Ele(Sl);function jGe(v,x,k){var U=zn(v),Q=U||my(v)||Fx(v);if(x=hn(x,4),k==null){var re=v&&v.constructor;Q?k=U?new re:[]:xs(v)?k=tg(re)?Ox(BD(v)):{}:k={}}return(Q?Ou:ep)(v,function(ce,ye,Ne){return x(k,ce,ye,Ne)}),k}function BGe(v,x){return v==null?!0:T9(v,x)}function UGe(v,x,k){return v==null?v:ole(v,x,I9(k))}function zGe(v,x,k,U){return U=typeof U=="function"?U:n,v==null?v:ole(v,x,I9(k),U)}function jx(v){return v==null?[]:fo(v,Qo(v))}function VGe(v){return v==null?[]:fo(v,Sl(v))}function HGe(v,x,k){return k===n&&(k=x,x=n),k!==n&&(k=Sf(k),k=k===k?k:0),x!==n&&(x=Sf(x),x=x===x?x:0),gb(Sf(v),x,k)}function qGe(v,x,k){return x=ng(x),k===n?(k=x,x=0):k=ng(k),v=Sf(v),QVe(v,x,k)}function WGe(v,x,k){if(k&&typeof k!="boolean"&&Mu(v,x,k)&&(x=k=n),k===n&&(typeof x=="boolean"?(k=x,x=n):typeof v=="boolean"&&(k=v,v=n)),v===n&&x===n?(v=0,x=1):(v=ng(v),x===n?(x=v,v=0):x=ng(x)),v>x){var U=v;v=x,x=U}if(k||v%1||x%1){var Q=Mue();return Ka(v+Q*(x-v+qt("1e-"+((Q+"").length-1))),x)}return x9(v,x)}var GGe=Mx(function(v,x,k){return x=x.toLowerCase(),v+(k?hce(x):x)});function hce(v){return K9(pi(v).toLowerCase())}function pce(v){return v=pi(v),v&&v.replace(Ar,Lze).replace(Id,"")}function YGe(v,x,k){v=pi(v),x=Ec(x);var U=v.length;k=k===n?U:gb(Yn(k),0,U);var Q=k;return k-=x.length,k>=0&&v.slice(k,Q)==x}function KGe(v){return v=pi(v),v&&Ns.test(v)?v.replace(Yi,Fze):v}function XGe(v){return v=pi(v),v&&ba.test(v)?v.replace(Ko,"\\$&"):v}var QGe=Mx(function(v,x,k){return v+(k?"-":"")+x.toLowerCase()}),JGe=Mx(function(v,x,k){return v+(k?" ":"")+x.toLowerCase()}),ZGe=yle("toLowerCase");function eYe(v,x,k){v=pi(v),x=Yn(x);var U=x?kx(v):0;if(!x||U>=x)return v;var Q=(x-U)/2;return rO(HD(Q),k)+v+rO(VD(Q),k)}function tYe(v,x,k){v=pi(v),x=Yn(x);var U=x?kx(v):0;return x&&U<x?v+rO(x-U,k):v}function nYe(v,x,k){v=pi(v),x=Yn(x);var U=x?kx(v):0;return x&&U<x?rO(x-U,k)+v:v}function rYe(v,x,k){return k||x==null?x=0:x&&(x=+x),cVe(pi(v).replace(Eo,""),x||0)}function iYe(v,x,k){return(k?Mu(v,x,k):x===n)?x=1:x=Yn(x),E9(pi(v),x)}function sYe(){var v=arguments,x=pi(v[0]);return v.length<3?x:x.replace(v[1],v[2])}var oYe=Mx(function(v,x,k){return v+(k?"_":"")+x.toLowerCase()});function aYe(v,x,k){return k&&typeof k!="number"&&Mu(v,x,k)&&(x=k=n),k=k===n?W:k>>>0,k?(v=pi(v),v&&(typeof x=="string"||x!=null&&!W9(x))&&(x=Ec(x),!x&&Ix(v))?py(Pd(v),0,k):v.split(x,k)):[]}var uYe=Mx(function(v,x,k){return v+(k?" ":"")+K9(x)});function lYe(v,x,k){return v=pi(v),k=k==null?0:gb(Yn(k),0,v.length),x=Ec(x),v.slice(k,k+x.length)==x}function cYe(v,x,k){var U=Z.templateSettings;k&&Mu(v,x,k)&&(x=n),v=pi(v),x=mO({},x,U,Sle);var Q=mO({},x.imports,U.imports,Sle),re=Qo(Q),ce=fo(Q,re),ye,Ne,et=0,tt=x.interpolate||Kr,ct="__p += '",$t=u9((x.escape||Kr).source+"|"+tt.source+"|"+(tt===wc?dn:Kr).source+"|"+(x.evaluate||Kr).source+"|$","g"),Jt="//# sourceURL="+(vi.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ex+"]")+`
`;v.replace($t,function(mn,mr,Rr,Tc,Lu,Cc){return Rr||(Rr=Tc),ct+=v.slice(et,Cc).replace(vr,jze),mr&&(ye=!0,ct+=`' +
__e(`+mr+`) +
'`),Lu&&(Ne=!0,ct+=`';
`+Lu+`;
__p += '`),Rr&&(ct+=`' +
((__t = (`+Rr+`)) == null ? '' : __t) +
'`),et=Cc+mn.length,mn}),ct+=`';
`;var pn=vi.call(x,"variable")&&x.variable;if(!pn)ct=`with (obj) {
`+ct+`
}
`;else if(wt.test(pn))throw new Fn(a);ct=(Ne?ct.replace(Tr,""):ct).replace(Yo,"$1").replace(us,"$1;"),ct="function("+(pn||"obj")+`) {
`+(pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ct+`return __p
}`;var rr=gce(function(){return ai(re,Jt+"return "+ct).apply(n,ce)});if(rr.source=ct,q9(rr))throw rr;return rr}function fYe(v){return pi(v).toLowerCase()}function dYe(v){return pi(v).toUpperCase()}function hYe(v,x,k){if(v=pi(v),v&&(k||x===n))return kr(v);if(!v||!(x=Ec(x)))return v;var U=Pd(v),Q=Pd(x),re=wl(U,Q),ce=db(U,Q)+1;return py(U,re,ce).join("")}function pYe(v,x,k){if(v=pi(v),v&&(k||x===n))return v.slice(0,kue(v)+1);if(!v||!(x=Ec(x)))return v;var U=Pd(v),Q=db(U,Pd(x))+1;return py(U,0,Q).join("")}function mYe(v,x,k){if(v=pi(v),v&&(k||x===n))return v.replace(Eo,"");if(!v||!(x=Ec(x)))return v;var U=Pd(v),Q=wl(U,Pd(x));return py(U,Q).join("")}function gYe(v,x){var k=P,U=D;if(xs(x)){var Q="separator"in x?x.separator:Q;k="length"in x?Yn(x.length):k,U="omission"in x?Ec(x.omission):U}v=pi(v);var re=v.length;if(Ix(v)){var ce=Pd(v);re=ce.length}if(k>=re)return v;var ye=k-kx(U);if(ye<1)return U;var Ne=ce?py(ce,0,ye).join(""):v.slice(0,ye);if(Q===n)return Ne+U;if(ce&&(ye+=Ne.length-ye),W9(Q)){if(v.slice(ye).search(Q)){var et,tt=Ne;for(Q.global||(Q=u9(Q.source,pi(tr.exec(Q))+"g")),Q.lastIndex=0;et=Q.exec(tt);)var ct=et.index;Ne=Ne.slice(0,ct===n?ye:ct)}}else if(v.indexOf(Ec(Q),ye)!=ye){var $t=Ne.lastIndexOf(Q);$t>-1&&(Ne=Ne.slice(0,$t))}return Ne+U}function yYe(v){return v=pi(v),v&&ri.test(v)?v.replace(Vn,Wze):v}var vYe=Mx(function(v,x,k){return v+(k?" ":"")+x.toUpperCase()}),K9=yle("toUpperCase");function mce(v,x,k){return v=pi(v),x=k?n:x,x===n?Uze(v)?Kze(v):Ax(v):v.match(x)||[]}var gce=ar(function(v,x){try{return Ga(v,n,x)}catch(k){return q9(k)?k:new Fn(k)}}),bYe=Zm(function(v,x){return Ou(x,function(k){k=np(k),Qm(v,k,V9(v[k],v))}),v});function _Ye(v){var x=v==null?0:v.length,k=hn();return v=x?Mi(v,function(U){if(typeof U[1]!="function")throw new bf(o);return[k(U[0]),U[1]]}):[],ar(function(U){for(var Q=-1;++Q<x;){var re=v[Q];if(Ga(re[0],this,U))return Ga(re[1],this,U)}})}function wYe(v){return WVe(wf(v,f))}function X9(v){return function(){return v}}function xYe(v,x){return v==null||v!==v?x:v}var EYe=ble(),SYe=ble(!0);function Tl(v){return v}function Q9(v){return Kue(typeof v=="function"?v:wf(v,f))}function TYe(v){return Que(wf(v,f))}function CYe(v,x){return Jue(v,wf(x,f))}var AYe=ar(function(v,x){return function(k){return jA(k,v,x)}}),IYe=ar(function(v,x){return function(k){return jA(v,k,x)}});function J9(v,x,k){var U=Qo(x),Q=XD(x,U);k==null&&!(xs(x)&&(Q.length||!U.length))&&(k=x,x=v,v=this,Q=XD(x,Qo(x)));var re=!(xs(k)&&"chain"in k)||!!k.chain,ce=tg(v);return Ou(Q,function(ye){var Ne=x[ye];v[ye]=Ne,ce&&(v.prototype[ye]=function(){var et=this.__chain__;if(re||et){var tt=v(this.__wrapped__),ct=tt.__actions__=xl(this.__actions__);return ct.push({func:Ne,args:arguments,thisArg:v}),tt.__chain__=et,tt}return Ne.apply(v,Rd([this.value()],arguments))})}),v}function kYe(){return an._===this&&(an._=tVe),this}function Z9(){}function RYe(v){return v=Yn(v),ar(function(x){return Zue(x,v)})}var NYe=R9(Mi),PYe=R9(Tx),DYe=R9(Cx);function yce(v){return L9(v)?G(np(v)):lHe(v)}function OYe(v){return function(x){return v==null?n:yb(v,x)}}var $Ye=wle(),MYe=wle(!0);function eU(){return[]}function tU(){return!1}function LYe(){return{}}function FYe(){return""}function jYe(){return!0}function BYe(v,x){if(v=Yn(v),v<1||v>q)return[];var k=W,U=Ka(v,W);x=hn(x),v-=W;for(var Q=oi(U,x);++k<v;)x(k);return Q}function UYe(v){return zn(v)?Mi(v,np):Sc(v)?[v]:xl(Lle(pi(v)))}function zYe(v){var x=++Zze;return pi(v)+x}var VYe=nO(function(v,x){return v+x},0),HYe=N9("ceil"),qYe=nO(function(v,x){return v/x},1),WYe=N9("floor");function GYe(v){return v&&v.length?KD(v,Tl,g9):n}function YYe(v,x){return v&&v.length?KD(v,hn(x,2),g9):n}function KYe(v){return j(v,Tl)}function XYe(v,x){return j(v,hn(x,2))}function QYe(v){return v&&v.length?KD(v,Tl,_9):n}function JYe(v,x){return v&&v.length?KD(v,hn(x,2),_9):n}var ZYe=nO(function(v,x){return v*x},1),eKe=N9("round"),tKe=nO(function(v,x){return v-x},0);function nKe(v){return v&&v.length?At(v,Tl):0}function rKe(v,x){return v&&v.length?At(v,hn(x,2)):0}return Z.after=TWe,Z.ary=Yle,Z.assign=dGe,Z.assignIn=uce,Z.assignInWith=mO,Z.assignWith=hGe,Z.at=pGe,Z.before=Kle,Z.bind=V9,Z.bindAll=bYe,Z.bindKey=Xle,Z.castArray=LWe,Z.chain=qle,Z.chunk=WHe,Z.compact=GHe,Z.concat=YHe,Z.cond=_Ye,Z.conforms=wYe,Z.constant=X9,Z.countBy=nWe,Z.create=mGe,Z.curry=Qle,Z.curryRight=Jle,Z.debounce=Zle,Z.defaults=gGe,Z.defaultsDeep=yGe,Z.defer=CWe,Z.delay=AWe,Z.difference=KHe,Z.differenceBy=XHe,Z.differenceWith=QHe,Z.drop=JHe,Z.dropRight=ZHe,Z.dropRightWhile=eqe,Z.dropWhile=tqe,Z.fill=nqe,Z.filter=iWe,Z.flatMap=aWe,Z.flatMapDeep=uWe,Z.flatMapDepth=lWe,Z.flatten=Ule,Z.flattenDeep=rqe,Z.flattenDepth=iqe,Z.flip=IWe,Z.flow=EYe,Z.flowRight=SYe,Z.fromPairs=sqe,Z.functions=SGe,Z.functionsIn=TGe,Z.groupBy=cWe,Z.initial=aqe,Z.intersection=uqe,Z.intersectionBy=lqe,Z.intersectionWith=cqe,Z.invert=AGe,Z.invertBy=IGe,Z.invokeMap=dWe,Z.iteratee=Q9,Z.keyBy=hWe,Z.keys=Qo,Z.keysIn=Sl,Z.map=lO,Z.mapKeys=RGe,Z.mapValues=NGe,Z.matches=TYe,Z.matchesProperty=CYe,Z.memoize=fO,Z.merge=PGe,Z.mergeWith=lce,Z.method=AYe,Z.methodOf=IYe,Z.mixin=J9,Z.negate=dO,Z.nthArg=RYe,Z.omit=DGe,Z.omitBy=OGe,Z.once=kWe,Z.orderBy=pWe,Z.over=NYe,Z.overArgs=RWe,Z.overEvery=PYe,Z.overSome=DYe,Z.partial=H9,Z.partialRight=ece,Z.partition=mWe,Z.pick=$Ge,Z.pickBy=cce,Z.property=yce,Z.propertyOf=OYe,Z.pull=pqe,Z.pullAll=Vle,Z.pullAllBy=mqe,Z.pullAllWith=gqe,Z.pullAt=yqe,Z.range=$Ye,Z.rangeRight=MYe,Z.rearg=NWe,Z.reject=vWe,Z.remove=vqe,Z.rest=PWe,Z.reverse=U9,Z.sampleSize=_We,Z.set=LGe,Z.setWith=FGe,Z.shuffle=wWe,Z.slice=bqe,Z.sortBy=SWe,Z.sortedUniq=Cqe,Z.sortedUniqBy=Aqe,Z.split=aYe,Z.spread=DWe,Z.tail=Iqe,Z.take=kqe,Z.takeRight=Rqe,Z.takeRightWhile=Nqe,Z.takeWhile=Pqe,Z.tap=Gqe,Z.throttle=OWe,Z.thru=uO,Z.toArray=sce,Z.toPairs=fce,Z.toPairsIn=dce,Z.toPath=UYe,Z.toPlainObject=ace,Z.transform=jGe,Z.unary=$We,Z.union=Dqe,Z.unionBy=Oqe,Z.unionWith=$qe,Z.uniq=Mqe,Z.uniqBy=Lqe,Z.uniqWith=Fqe,Z.unset=BGe,Z.unzip=z9,Z.unzipWith=Hle,Z.update=UGe,Z.updateWith=zGe,Z.values=jx,Z.valuesIn=VGe,Z.without=jqe,Z.words=mce,Z.wrap=MWe,Z.xor=Bqe,Z.xorBy=Uqe,Z.xorWith=zqe,Z.zip=Vqe,Z.zipObject=Hqe,Z.zipObjectDeep=qqe,Z.zipWith=Wqe,Z.entries=fce,Z.entriesIn=dce,Z.extend=uce,Z.extendWith=mO,J9(Z,Z),Z.add=VYe,Z.attempt=gce,Z.camelCase=GGe,Z.capitalize=hce,Z.ceil=HYe,Z.clamp=HGe,Z.clone=FWe,Z.cloneDeep=BWe,Z.cloneDeepWith=UWe,Z.cloneWith=jWe,Z.conformsTo=zWe,Z.deburr=pce,Z.defaultTo=xYe,Z.divide=qYe,Z.endsWith=YGe,Z.eq=Od,Z.escape=KGe,Z.escapeRegExp=XGe,Z.every=rWe,Z.find=sWe,Z.findIndex=jle,Z.findKey=vGe,Z.findLast=oWe,Z.findLastIndex=Ble,Z.findLastKey=bGe,Z.floor=WYe,Z.forEach=Wle,Z.forEachRight=Gle,Z.forIn=_Ge,Z.forInRight=wGe,Z.forOwn=xGe,Z.forOwnRight=EGe,Z.get=G9,Z.gt=VWe,Z.gte=HWe,Z.has=CGe,Z.hasIn=Y9,Z.head=zle,Z.identity=Tl,Z.includes=fWe,Z.indexOf=oqe,Z.inRange=qGe,Z.invoke=kGe,Z.isArguments=_b,Z.isArray=zn,Z.isArrayBuffer=qWe,Z.isArrayLike=El,Z.isArrayLikeObject=Gs,Z.isBoolean=WWe,Z.isBuffer=my,Z.isDate=GWe,Z.isElement=YWe,Z.isEmpty=KWe,Z.isEqual=XWe,Z.isEqualWith=QWe,Z.isError=q9,Z.isFinite=JWe,Z.isFunction=tg,Z.isInteger=tce,Z.isLength=hO,Z.isMap=nce,Z.isMatch=ZWe,Z.isMatchWith=eGe,Z.isNaN=tGe,Z.isNative=nGe,Z.isNil=iGe,Z.isNull=rGe,Z.isNumber=rce,Z.isObject=xs,Z.isObjectLike=Ds,Z.isPlainObject=qA,Z.isRegExp=W9,Z.isSafeInteger=sGe,Z.isSet=ice,Z.isString=pO,Z.isSymbol=Sc,Z.isTypedArray=Fx,Z.isUndefined=oGe,Z.isWeakMap=aGe,Z.isWeakSet=uGe,Z.join=fqe,Z.kebabCase=QGe,Z.last=Ef,Z.lastIndexOf=dqe,Z.lowerCase=JGe,Z.lowerFirst=ZGe,Z.lt=lGe,Z.lte=cGe,Z.max=GYe,Z.maxBy=YYe,Z.mean=KYe,Z.meanBy=XYe,Z.min=QYe,Z.minBy=JYe,Z.stubArray=eU,Z.stubFalse=tU,Z.stubObject=LYe,Z.stubString=FYe,Z.stubTrue=jYe,Z.multiply=ZYe,Z.nth=hqe,Z.noConflict=kYe,Z.noop=Z9,Z.now=cO,Z.pad=eYe,Z.padEnd=tYe,Z.padStart=nYe,Z.parseInt=rYe,Z.random=WGe,Z.reduce=gWe,Z.reduceRight=yWe,Z.repeat=iYe,Z.replace=sYe,Z.result=MGe,Z.round=eKe,Z.runInContext=Ce,Z.sample=bWe,Z.size=xWe,Z.snakeCase=oYe,Z.some=EWe,Z.sortedIndex=_qe,Z.sortedIndexBy=wqe,Z.sortedIndexOf=xqe,Z.sortedLastIndex=Eqe,Z.sortedLastIndexBy=Sqe,Z.sortedLastIndexOf=Tqe,Z.startCase=uYe,Z.startsWith=lYe,Z.subtract=tKe,Z.sum=nKe,Z.sumBy=rKe,Z.template=cYe,Z.times=BYe,Z.toFinite=ng,Z.toInteger=Yn,Z.toLength=oce,Z.toLower=fYe,Z.toNumber=Sf,Z.toSafeInteger=fGe,Z.toString=pi,Z.toUpper=dYe,Z.trim=hYe,Z.trimEnd=pYe,Z.trimStart=mYe,Z.truncate=gYe,Z.unescape=yYe,Z.uniqueId=zYe,Z.upperCase=vYe,Z.upperFirst=K9,Z.each=Wle,Z.eachRight=Gle,Z.first=zle,J9(Z,function(){var v={};return ep(Z,function(x,k){vi.call(Z.prototype,k)||(v[k]=x)}),v}(),{chain:!1}),Z.VERSION=r,Ou(["bind","bindKey","curry","curryRight","partial","partialRight"],function(v){Z[v].placeholder=Z}),Ou(["drop","take"],function(v,x){_r.prototype[v]=function(k){k=k===n?1:Ro(Yn(k),0);var U=this.__filtered__&&!x?new _r(this):this.clone();return U.__filtered__?U.__takeCount__=Ka(k,U.__takeCount__):U.__views__.push({size:Ka(k,W),type:v+(U.__dir__<0?"Right":"")}),U},_r.prototype[v+"Right"]=function(k){return this.reverse()[v](k).reverse()}}),Ou(["filter","map","takeWhile"],function(v,x){var k=x+1,U=k==F||k==B;_r.prototype[v]=function(Q){var re=this.clone();return re.__iteratees__.push({iteratee:hn(Q,3),type:k}),re.__filtered__=re.__filtered__||U,re}}),Ou(["head","last"],function(v,x){var k="take"+(x?"Right":"");_r.prototype[v]=function(){return this[k](1).value()[0]}}),Ou(["initial","tail"],function(v,x){var k="drop"+(x?"":"Right");_r.prototype[v]=function(){return this.__filtered__?new _r(this):this[k](1)}}),_r.prototype.compact=function(){return this.filter(Tl)},_r.prototype.find=function(v){return this.filter(v).head()},_r.prototype.findLast=function(v){return this.reverse().find(v)},_r.prototype.invokeMap=ar(function(v,x){return typeof v=="function"?new _r(this):this.map(function(k){return jA(k,v,x)})}),_r.prototype.reject=function(v){return this.filter(dO(hn(v)))},_r.prototype.slice=function(v,x){v=Yn(v);var k=this;return k.__filtered__&&(v>0||x<0)?new _r(k):(v<0?k=k.takeRight(-v):v&&(k=k.drop(v)),x!==n&&(x=Yn(x),k=x<0?k.dropRight(-x):k.take(x-v)),k)},_r.prototype.takeRightWhile=function(v){return this.reverse().takeWhile(v).reverse()},_r.prototype.toArray=function(){return this.take(W)},ep(_r.prototype,function(v,x){var k=/^(?:filter|find|map|reject)|While$/.test(x),U=/^(?:head|last)$/.test(x),Q=Z[U?"take"+(x=="last"?"Right":""):x],re=U||/^find/.test(x);Q&&(Z.prototype[x]=function(){var ce=this.__wrapped__,ye=U?[1]:arguments,Ne=ce instanceof _r,et=ye[0],tt=Ne||zn(ce),ct=function(mr){var Rr=Q.apply(Z,Rd([mr],ye));return U&&$t?Rr[0]:Rr};tt&&k&&typeof et=="function"&&et.length!=1&&(Ne=tt=!1);var $t=this.__chain__,Jt=!!this.__actions__.length,pn=re&&!$t,rr=Ne&&!Jt;if(!re&&tt){ce=rr?ce:new _r(this);var mn=v.apply(ce,ye);return mn.__actions__.push({func:uO,args:[ct],thisArg:n}),new _f(mn,$t)}return pn&&rr?v.apply(this,ye):(mn=this.thru(ct),pn?U?mn.value()[0]:mn.value():mn)})}),Ou(["pop","push","shift","sort","splice","unshift"],function(v){var x=OD[v],k=/^(?:push|sort|unshift)$/.test(v)?"tap":"thru",U=/^(?:pop|shift)$/.test(v);Z.prototype[v]=function(){var Q=arguments;if(U&&!this.__chain__){var re=this.value();return x.apply(zn(re)?re:[],Q)}return this[k](function(ce){return x.apply(zn(ce)?ce:[],Q)})}}),ep(_r.prototype,function(v,x){var k=Z[x];if(k){var U=k.name+"";vi.call(Dx,U)||(Dx[U]=[]),Dx[U].push({name:x,func:k})}}),Dx[tO(n,y).name]=[{name:"wrapper",func:n}],_r.prototype.clone=yVe,_r.prototype.reverse=vVe,_r.prototype.value=bVe,Z.prototype.at=Yqe,Z.prototype.chain=Kqe,Z.prototype.commit=Xqe,Z.prototype.next=Qqe,Z.prototype.plant=Zqe,Z.prototype.reverse=eWe,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=tWe,Z.prototype.first=Z.prototype.head,PA&&(Z.prototype[PA]=Jqe),Z},Rx=Xze();yi?((yi.exports=Rx)._=Rx,si._=Rx):an._=Rx}).call(Ts)})(rF,rF.exports);var hjt=rF.exports;const pjt="#/definitions/LibraryConfig",mjt="http://json-schema.org/draft-07/schema#",gjt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.6/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "required": true, "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "required": true, "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","required","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/v1.0.6/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},yjt={$ref:pjt,$schema:mjt,definitions:gjt},rMe=new $ne;rMe.addSchema(yjt);const vjt=rMe.getSchema("#/definitions/LibraryConfig");function iMe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?iMe(n,t):`$${t}.components.${n}`)}}function sMe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return sMe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=iMe(l,a),l}return r})}}function bjt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;QC(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function _jt(e,t){let n=!1,r;try{r=Nj.parse(e),n=vjt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function wjt(e){const t=await(await fetch(`${il}libraries/${e}/config.json`)).text();return _jt(t,e)}async function xjt(e,t,n){const r=e.map(async s=>{const o=await wjt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(QC(a)){const u=hjt.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const oMe=new $ne;oMe.addSchema(djt);const Eye=oMe.getSchema("#/definitions/GlobalConfig"),aMe=new $ne;aMe.addSchema(ujt);const Sye=aMe.getSchema("#/definitions/StudyConfig");function Ejt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Sjt(e){const t=Nj.parse(e),n=Eye(t),r=Ejt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Eye.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function uMe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):uMe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Tjt(e,t){const n=[],r=[];bjt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;QC(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=fIe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return uMe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Cjt(e){let t=!1,n;try{n=Nj.parse(e),t=Sye(n)}catch{t=!1}let r=Sye.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await xjt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=sMe(n.sequence,o,r);const{errors:a,warnings:u}=Tjt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function Ajt(e){const t=await(await fetch(`${il}${e}`)).text();return await Cjt(t)}async function Lj(e,t){const n=t.configsList.find(r=>vAe(r)===e);if(n){const r=t.configs[n];return await Ajt(`${r.path}`)}return null}async function Ijt(e){const t={},n=e.configsList.filter(i=>!e.configs[i].test).map(async i=>Lj(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function kjt({globalConfig:e}){const t=Kw(),[n,r]=N.useState(null),i=e.configsList.includes(t);N.useEffect(()=>{Lj(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=N.useState([]),[a,u]=N.useState(null),{storageEngine:l}=xo(),[c]=IJ();N.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await TLt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(C=>""),b=y instanceof Response?await y.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},E=await l.initializeParticipantSession(t,g,n,w,m),S=await l.getModes(t),T=await tvt(t,n,E.sequence,w,E.answers,S);u(T),o([{element:_.jsx(wLt,{}),children:[{path:"/",element:_.jsx(yG,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(vs,{order:2,mb:8,children:"Error loading config"}),_.jsx(Tq,{issues:n.errors,type:"error"})]}):_.jsx(QMt,{})}]}])}h()},[l,n,t,c]);const f=cAe(s);let d=null;return i?s.length===0?d=_.jsx(Qc,{visible:!0}):d=f&&a?_.jsx(mIe.Provider,{value:a,children:_.jsx(X0t,{store:a.store,children:f})}):_.jsx(X_,{}):d=_.jsx(X_,{}),d}var Tye={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lMe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Rjt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Mne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lMe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Rjt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Njt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Njt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pjt=function(e){const t=lMe(e);return Mne.encodeByteArray(t,!0)},iF=function(e){return Pjt(e).replace(/\./g,"")},cMe=function(e){try{return Mne.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fMe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Djt=()=>fMe().__FIREBASE_DEFAULTS__,Ojt=()=>{if(typeof process>"u"||typeof Tye>"u")return;const e=Tye.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},$jt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&cMe(e[1]);return t&&JSON.parse(t)},Fj=()=>{try{return Djt()||Ojt()||$jt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},dMe=e=>{var t,n;return(n=(t=Fj())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Mjt=e=>{const t=dMe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},hMe=()=>{var e;return(e=Fj())===null||e===void 0?void 0:e.config},pMe=e=>{var t;return(t=Fj())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ljt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[iF(JSON.stringify(n)),iF(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fjt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(za())}function jjt(){var e;const t=(e=Fj())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bjt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ujt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zjt(){const e=za();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Vjt(){return!jjt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lne(){try{return typeof indexedDB=="object"}catch{return!1}}function Hjt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qjt="FirebaseError";class Dm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=qjt,Object.setPrototypeOf(this,Dm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tA.prototype.create)}}class tA{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Wjt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Dm(i,a,r)}}function Wjt(e,t){return e.replace(Gjt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Gjt=/\{\$([^}]+)}/g;function Yjt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function YR(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Cye(s)&&Cye(o)){if(!YR(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cye(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Kjt(e,t){const n=new Xjt(e,t);return n.subscribe.bind(n)}class Xjt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Qjt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=kz),i.error===void 0&&(i.error=kz),i.complete===void 0&&(i.complete=kz);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qjt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function kz(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jjt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zjt=1e3,e8t=2,t8t=4*60*60*1e3,n8t=.5;function r8t(e,t=Zjt,n=e8t){const r=t*Math.pow(n,e),i=Math.round(n8t*r*(Math.random()-.5)*2);return Math.min(t8t,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(e){return e&&e._delegate?e._delegate:e}class pm{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8t{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new GR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(o8t(t))try{this.getOrInitializeService({instanceIdentifier:Gb})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Gb){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gb){return this.instances.has(t)}getOptions(t=Gb){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:s8t(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Gb){return this.component?this.component.multipleInstances?t:Gb:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s8t(e){return e===Gb?void 0:e}function o8t(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8t{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new i8t(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Pr||(Pr={}));const u8t={debug:Pr.DEBUG,verbose:Pr.VERBOSE,info:Pr.INFO,warn:Pr.WARN,error:Pr.ERROR,silent:Pr.SILENT},l8t=Pr.INFO,c8t={[Pr.DEBUG]:"log",[Pr.VERBOSE]:"log",[Pr.INFO]:"info",[Pr.WARN]:"warn",[Pr.ERROR]:"error"},f8t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=c8t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jj{constructor(t){this.name=t,this._logLevel=l8t,this._logHandler=f8t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?u8t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pr.DEBUG,...t),this._logHandler(this,Pr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pr.VERBOSE,...t),this._logHandler(this,Pr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pr.INFO,...t),this._logHandler(this,Pr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pr.WARN,...t),this._logHandler(this,Pr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pr.ERROR,...t),this._logHandler(this,Pr.ERROR,...t)}}const d8t=(e,t)=>t.some(n=>e instanceof n);let Aye,Iye;function h8t(){return Aye||(Aye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p8t(){return Iye||(Iye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mMe=new WeakMap,NG=new WeakMap,gMe=new WeakMap,Rz=new WeakMap,Fne=new WeakMap;function m8t(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Cv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&mMe.set(n,e)}).catch(()=>{}),Fne.set(t,e),t}function g8t(e){if(NG.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});NG.set(e,t)}let PG={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return NG.get(e);if(t==="objectStoreNames")return e.objectStoreNames||gMe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function y8t(e){PG=e(PG)}function v8t(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Nz(this),t,...n);return gMe.set(r,t.sort?t.sort():[t]),Cv(r)}:p8t().includes(e)?function(...t){return e.apply(Nz(this),t),Cv(mMe.get(this))}:function(...t){return Cv(e.apply(Nz(this),t))}}function b8t(e){return typeof e=="function"?v8t(e):(e instanceof IDBTransaction&&g8t(e),d8t(e,h8t())?new Proxy(e,PG):e)}function Cv(e){if(e instanceof IDBRequest)return m8t(e);if(Rz.has(e))return Rz.get(e);const t=b8t(e);return t!==e&&(Rz.set(e,t),Fne.set(t,e)),t}const Nz=e=>Fne.get(e);function _8t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Cv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Cv(o.result),u.oldVersion,u.newVersion,Cv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const w8t=["get","getKey","getAll","getAllKeys","count"],x8t=["put","add","delete","clear"],Pz=new Map;function kye(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Pz.get(t))return Pz.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=x8t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||w8t.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Pz.set(t,s),s}y8t(e=>({...e,get:(t,n,r)=>kye(t,n)||e.get(t,n,r),has:(t,n)=>!!kye(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8t{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S8t(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function S8t(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const DG="@firebase/app",Rye="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new jj("@firebase/app"),T8t="@firebase/app-compat",C8t="@firebase/analytics-compat",A8t="@firebase/analytics",I8t="@firebase/app-check-compat",k8t="@firebase/app-check",R8t="@firebase/auth",N8t="@firebase/auth-compat",P8t="@firebase/database",D8t="@firebase/database-compat",O8t="@firebase/functions",$8t="@firebase/functions-compat",M8t="@firebase/installations",L8t="@firebase/installations-compat",F8t="@firebase/messaging",j8t="@firebase/messaging-compat",B8t="@firebase/performance",U8t="@firebase/performance-compat",z8t="@firebase/remote-config",V8t="@firebase/remote-config-compat",H8t="@firebase/storage",q8t="@firebase/storage-compat",W8t="@firebase/firestore",G8t="@firebase/vertexai-preview",Y8t="@firebase/firestore-compat",K8t="firebase",X8t="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG="[DEFAULT]",Q8t={[DG]:"fire-core",[T8t]:"fire-core-compat",[A8t]:"fire-analytics",[C8t]:"fire-analytics-compat",[k8t]:"fire-app-check",[I8t]:"fire-app-check-compat",[R8t]:"fire-auth",[N8t]:"fire-auth-compat",[P8t]:"fire-rtdb",[D8t]:"fire-rtdb-compat",[O8t]:"fire-fn",[$8t]:"fire-fn-compat",[M8t]:"fire-iid",[L8t]:"fire-iid-compat",[F8t]:"fire-fcm",[j8t]:"fire-fcm-compat",[B8t]:"fire-perf",[U8t]:"fire-perf-compat",[z8t]:"fire-rc",[V8t]:"fire-rc-compat",[H8t]:"fire-gcs",[q8t]:"fire-gcs-compat",[W8t]:"fire-fst",[Y8t]:"fire-fst-compat",[G8t]:"fire-vertex","fire-js":"fire-js",[K8t]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=new Map,J8t=new Map,$G=new Map;function Nye(e,t){try{e.container.addComponent(t)}catch(n){cw.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function T0(e){const t=e.name;if($G.has(t))return cw.debug(`There were multiple attempts to register component ${t}.`),!1;$G.set(t,e);for(const n of sF.values())Nye(n,e);for(const n of J8t.values())Nye(n,e);return!0}function nA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fp(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Av=new tA("app","Firebase",Z8t);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eBt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Av.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=X8t;function yMe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:OG,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Av.create("bad-app-name",{appName:String(i)});if(n||(n=hMe()),!n)throw Av.create("no-options");const s=sF.get(i);if(s){if(YR(n,s.options)&&YR(r,s.config))return s;throw Av.create("duplicate-app",{appName:i})}const o=new a8t(i);for(const u of $G.values())o.addComponent(u);const a=new eBt(n,r,o);return sF.set(i,a),a}function jne(e=OG){const t=sF.get(e);if(!t&&e===OG&&hMe())return yMe();if(!t)throw Av.create("no-app",{appName:e});return t}function xh(e,t,n){var r;let i=(r=Q8t[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cw.warn(a.join(" "));return}T0(new pm(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tBt="firebase-heartbeat-database",nBt=1,KR="firebase-heartbeat-store";let Dz=null;function vMe(){return Dz||(Dz=_8t(tBt,nBt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(KR)}catch(n){console.warn(n)}}}}).catch(e=>{throw Av.create("idb-open",{originalErrorMessage:e.message})})),Dz}async function rBt(e){try{const n=(await vMe()).transaction(KR),r=await n.objectStore(KR).get(bMe(e));return await n.done,r}catch(t){if(t instanceof Dm)cw.warn(t.message);else{const n=Av.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});cw.warn(n.message)}}}async function Pye(e,t){try{const r=(await vMe()).transaction(KR,"readwrite");await r.objectStore(KR).put(t,bMe(e)),await r.done}catch(n){if(n instanceof Dm)cw.warn(n.message);else{const r=Av.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cw.warn(r.message)}}}function bMe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iBt=1024,sBt=30*24*60*60*1e3;class oBt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uBt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Dye();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=sBt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dye(),{heartbeatsToSend:r,unsentEntries:i}=aBt(this._heartbeatsCache.heartbeats),s=iF(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Dye(){return new Date().toISOString().substring(0,10)}function aBt(e,t=iBt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Oye(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Oye(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uBt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lne()?Hjt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rBt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Pye(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Pye(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Oye(e){return iF(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lBt(e){T0(new pm("platform-logger",t=>new E8t(t),"PRIVATE")),T0(new pm("heartbeat",t=>new oBt(t),"PRIVATE")),xh(DG,Rye,e),xh(DG,Rye,"esm2017"),xh("fire-js","")}lBt("");function _Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cBt=_Me,wMe=new tA("auth","Firebase",_Me());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=new jj("@firebase/auth");function fBt(e,...t){oF.logLevel<=Pr.WARN&&oF.warn(`Auth (${tx}): ${e}`,...t)}function X$(e,...t){oF.logLevel<=Pr.ERROR&&oF.error(`Auth (${tx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(e,...t){throw Une(e,...t)}function Eh(e,...t){return Une(e,...t)}function Bne(e,t,n){const r=Object.assign(Object.assign({},cBt()),{[t]:n});return new tA("auth","Firebase",r).create(t,{appName:e.name})}function Iv(e){return Bne(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dBt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&mm(e,"argument-error"),Bne(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Une(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return wMe.create(e,...t)}function Nn(e,t,...n){if(!e)throw Une(t,...n)}function Lg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw X$(t),new Error(t)}function C0(e,t){e||Lg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function hBt(){return $ye()==="http:"||$ye()==="https:"}function $ye(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pBt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hBt()||Bjt()||"connection"in navigator)?navigator.onLine:!0}function mBt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(t,n){this.shortDelay=t,this.longDelay=n,C0(n>t,"Short delay should be less than long delay!"),this.isMobile=Fjt()||Ujt()}get(){return pBt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zne(e,t){C0(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xMe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gBt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yBt=new kP(3e4,6e4);function Bj(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rA(e,t,n,r,i={}){return EMe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=IP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),xMe.fetch()(TMe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function EMe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},gBt),t);try{const i=new vBt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw x3(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw x3(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw x3(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw x3(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Bne(e,c,l);mm(e,c)}}catch(i){if(i instanceof Dm)throw i;mm(e,"network-request-failed",{message:String(i)})}}async function SMe(e,t,n,r,i={}){const s=await rA(e,t,n,r,i);return"mfaPendingCredential"in s&&mm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function TMe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?zne(e.config,i):`${e.config.apiScheme}://${i}`}class vBt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Eh(this.auth,"network-request-failed")),yBt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function x3(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Eh(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bBt(e,t){return rA(e,"POST","/v1/accounts:delete",t)}async function CMe(e,t){return rA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function _Bt(e,t=!1){const n=Wi(e),r=await n.getIdToken(t),i=Vne(r);Nn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xk(Oz(i.auth_time)),issuedAtTime:xk(Oz(i.iat)),expirationTime:xk(Oz(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Oz(e){return Number(e)*1e3}function Vne(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return X$("JWT malformed, contained fewer than 3 sections"),null;try{const i=cMe(n);return i?JSON.parse(i):(X$("Failed to decode base64 JWT payload"),null)}catch(i){return X$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Mye(e){const t=Vne(e);return Nn(t,"internal-error"),Nn(typeof t.exp<"u","internal-error"),Nn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Dm&&wBt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function wBt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xBt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xk(this.lastLoginAt),this.creationTime=xk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(e){var t;const n=e.auth,r=await e.getIdToken(),i=await XR(e,CMe(n,{idToken:r}));Nn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?AMe(s.providerUserInfo):[],a=SBt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new LG(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function EBt(e){const t=Wi(e);await aF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function SBt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function AMe(e){return e.map(t=>{var{providerId:n}=t,r=MN(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TBt(e,t){const n=await EMe(e,{},async()=>{const r=IP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=TMe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xMe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CBt(e,t){return rA(e,"POST","/v2/accounts:revokeToken",Bj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nn(t.idToken,"internal-error"),Nn(typeof t.idToken<"u","internal-error"),Nn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Mye(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nn(t.length!==0,"internal-error");const n=Mye(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await TBt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new RS;return r&&(Nn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Nn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Nn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new RS,this.toJSON())}_performRefresh(){return Lg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(e,t){Nn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Fg{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=MN(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xBt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new LG(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await XR(this,this.stsTokenManager.getToken(this.auth,t));return Nn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return _Bt(this,t)}reload(){return EBt(this)}_assign(t){this!==t&&(Nn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Fg(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await aF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fp(this.auth.app))return Promise.reject(Iv(this.auth));const t=await this.getIdToken();return await XR(this,bBt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:C}=n;Nn(w&&C,t,"internal-error");const I=RS.fromJSON(this.name,C);Nn(typeof w=="string",t,"internal-error"),wy(f,t.name),wy(d,t.name),Nn(typeof E=="boolean",t,"internal-error"),Nn(typeof S=="boolean",t,"internal-error"),wy(h,t.name),wy(p,t.name),wy(m,t.name),wy(g,t.name),wy(y,t.name),wy(b,t.name);const R=new Fg({uid:w,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:S,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:b});return T&&Array.isArray(T)&&(R.providerData=T.map(P=>Object.assign({},P))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(t,n,r=!1){const i=new RS;i.updateFromServerResponse(n);const s=new Fg({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await aF(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Nn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?AMe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new RS;a.updateFromIdToken(r);const u=new Fg({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new LG(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lye=new Map;function jg(e){C0(e instanceof Function,"Expected a class definition");let t=Lye.get(e);return t?(C0(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lye.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IMe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}IMe.type="NONE";const Fye=IMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(e,t,n){return`firebase:${e}:${t}:${n}`}class NS{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Q$(this.userKey,i.apiKey,s),this.fullPersistenceKey=Q$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Fg._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new NS(jg(Fye),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||jg(Fye);const o=Q$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Fg._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new NS(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new NS(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jye(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NMe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kMe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(DMe(t))return"Blackberry";if(OMe(t))return"Webos";if(Hne(t))return"Safari";if((t.includes("chrome/")||RMe(t))&&!t.includes("edge/"))return"Chrome";if(PMe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kMe(e=za()){return/firefox\//i.test(e)}function Hne(e=za()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function RMe(e=za()){return/crios\//i.test(e)}function NMe(e=za()){return/iemobile/i.test(e)}function PMe(e=za()){return/android/i.test(e)}function DMe(e=za()){return/blackberry/i.test(e)}function OMe(e=za()){return/webos/i.test(e)}function Uj(e=za()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ABt(e=za()){var t;return Uj(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function IBt(){return zjt()&&document.documentMode===10}function $Me(e=za()){return Uj(e)||PMe(e)||OMe(e)||DMe(e)||/windows phone/i.test(e)||NMe(e)}function kBt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MMe(e,t=[]){let n;switch(e){case"Browser":n=jye(za());break;case"Worker":n=`${jye(za())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tx}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RBt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NBt(e,t={}){return rA(e,"GET","/v2/passwordPolicy",Bj(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PBt=6;class DBt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PBt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OBt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bye(this),this.idTokenSubscription=new Bye(this),this.beforeStateQueue=new RBt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wMe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=jg(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await NS.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await CMe(this,{idToken:t}),r=await Fg._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Fp(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await aF(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=mBt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fp(this.app))return Promise.reject(Iv(this));const n=t?Wi(t):null;return n&&Nn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fp(this.app)?Promise.reject(Iv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fp(this.app)?Promise.reject(Iv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jg(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await NBt(this),n=new DBt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new tA("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CBt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&jg(t)||this._popupRedirectResolver;Nn(n,this,"argument-error"),this.redirectPersistenceManager=await NS.create(this,[jg(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=MMe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&fBt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function RP(e){return Wi(e)}class Bye{constructor(t){this.auth=t,this.observer=null,this.addObserver=Kjt(n=>this.observer=n)}get next(){return Nn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qne={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $Bt(e){qne=e}function MBt(e){return qne.loadJS(e)}function LBt(){return qne.gapiScript}function FBt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jBt(e,t){const n=nA(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(YR(s,t??{}))return i;mm(i,"already-initialized")}return n.initialize({options:t})}function BBt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jg);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function UBt(e,t,n){const r=RP(e);Nn(r._canInitEmulator,r,"emulator-config-failed"),Nn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=LMe(t),{host:o,port:a}=zBt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),VBt()}function LMe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function zBt(e){const t=LMe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Uye(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Uye(o)}}}function Uye(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function VBt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FMe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Lg("not implemented")}_getIdTokenResponse(t){return Lg("not implemented")}_linkToIdToken(t,n){return Lg("not implemented")}_getReauthenticationResolver(t){return Lg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(e,t){return SMe(e,"POST","/v1/accounts:signInWithIdp",Bj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HBt="http://localhost";class fw extends FMe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new fw(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):mm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=MN(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fw(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return PS(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,PS(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,PS(t,n)}buildRequest(){const t={requestUri:HBt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=IP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP extends Wne{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends NP{constructor(){super("facebook.com")}static credential(t){return fw._fromParams({providerId:Hy.PROVIDER_ID,signInMethod:Hy.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hy.credentialFromTaggedObject(t)}static credentialFromError(t){return Hy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hy.credential(t.oauthAccessToken)}catch{return null}}}Hy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends NP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return fw._fromParams({providerId:Ig.PROVIDER_ID,signInMethod:Ig.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ig.credentialFromTaggedObject(t)}static credentialFromError(t){return Ig.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ig.credential(n,r)}catch{return null}}}Ig.GOOGLE_SIGN_IN_METHOD="google.com";Ig.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends NP{constructor(){super("github.com")}static credential(t){return fw._fromParams({providerId:qy.PROVIDER_ID,signInMethod:qy.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qy.credentialFromTaggedObject(t)}static credentialFromError(t){return qy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qy.credential(t.oauthAccessToken)}catch{return null}}}qy.GITHUB_SIGN_IN_METHOD="github.com";qy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends NP{constructor(){super("twitter.com")}static credential(t,n){return fw._fromParams({providerId:Wy.PROVIDER_ID,signInMethod:Wy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Wy.credentialFromTaggedObject(t)}static credentialFromError(t){return Wy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Wy.credential(n,r)}catch{return null}}}Wy.TWITTER_SIGN_IN_METHOD="twitter.com";Wy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qBt(e,t){return SMe(e,"POST","/v1/accounts:signUp",Bj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Fg._fromIdTokenResponse(t,r,i),o=zye(r);return new s1({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=zye(r);return new s1({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function zye(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WBt(e){var t;if(Fp(e.app))return Promise.reject(Iv(e));const n=RP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new s1({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await qBt(n,{returnSecureToken:!0}),i=await s1._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF extends Dm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uF.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new uF(t,n,r,i)}}function jMe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uF._fromErrorAndOperation(e,s,t,r):s})}async function GBt(e,t,n=!1){const r=await XR(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return s1._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YBt(e,t,n=!1){const{auth:r}=e;if(Fp(r.app))return Promise.reject(Iv(r));const i="reauthenticate";try{const s=await XR(e,jMe(r,i,t,e),n);Nn(s.idToken,r,"internal-error");const o=Vne(s.idToken);Nn(o,r,"internal-error");const{sub:a}=o;return Nn(e.uid===a,r,"user-mismatch"),s1._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KBt(e,t,n=!1){if(Fp(e.app))return Promise.reject(Iv(e));const r="signIn",i=await jMe(e,r,t),s=await s1._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function XBt(e,t,n,r){return Wi(e).onIdTokenChanged(t,n,r)}function QBt(e,t,n){return Wi(e).beforeAuthStateChanged(t,n)}function JBt(e,t,n,r){return Wi(e).onAuthStateChanged(t,n,r)}function ZBt(e){return Wi(e).signOut()}const lF="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BMe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lF,"1"),this.storage.removeItem(lF),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9t(){const e=za();return Hne(e)||Uj(e)}const t9t=1e3,n9t=10;class UMe extends BMe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=e9t()&&kBt(),this.fallbackToPolling=$Me(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);IBt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,n9t):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},t9t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}UMe.type="LOCAL";const r9t=UMe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zMe extends BMe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}zMe.type="SESSION";const VMe=zMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9t(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new zj(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await i9t(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gne(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9t{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Gne("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(){return window}function o9t(e){Qp().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HMe(){return typeof Qp().WorkerGlobalScope<"u"&&typeof Qp().importScripts=="function"}async function a9t(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u9t(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function l9t(){return HMe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qMe="firebaseLocalStorageDb",c9t=1,cF="firebaseLocalStorage",WMe="fbase_key";class PP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vj(e,t){return e.transaction([cF],t?"readwrite":"readonly").objectStore(cF)}function f9t(){const e=indexedDB.deleteDatabase(qMe);return new PP(e).toPromise()}function FG(){const e=indexedDB.open(qMe,c9t);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(cF,{keyPath:WMe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(cF)?t(r):(r.close(),await f9t(),t(await FG()))})})}async function Vye(e,t,n){const r=Vj(e,!0).put({[WMe]:t,value:n});return new PP(r).toPromise()}async function d9t(e,t){const n=Vj(e,!1).get(t),r=await new PP(n).toPromise();return r===void 0?null:r.value}function Hye(e,t){const n=Vj(e,!0).delete(t);return new PP(n).toPromise()}const h9t=800,p9t=3;class GMe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await FG(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>p9t)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HMe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zj._getInstance(l9t()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await a9t(),!this.activeServiceWorker)return;this.sender=new s9t(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||u9t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await FG();return await Vye(t,lF,"1"),await Hye(t,lF),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vye(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>d9t(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hye(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=Vj(i,!1).getAll();return new PP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h9t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GMe.type="LOCAL";const m9t=GMe;new kP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YMe(e,t){return t?jg(t):(Nn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne extends FMe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return PS(t,this._buildIdpRequest())}_linkToIdToken(t,n){return PS(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return PS(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function g9t(e){return KBt(e.auth,new Yne(e),e.bypassAuthState)}function y9t(e){const{auth:t,user:n}=e;return Nn(n,t,"internal-error"),YBt(n,new Yne(e),e.bypassAuthState)}async function v9t(e){const{auth:t,user:n}=e;return Nn(n,t,"internal-error"),GBt(n,new Yne(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KMe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return g9t;case"linkViaPopup":case"linkViaRedirect":return v9t;case"reauthViaPopup":case"reauthViaRedirect":return y9t;default:mm(this.auth,"internal-error")}}resolve(t){C0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){C0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9t=new kP(2e3,1e4);async function _9t(e,t,n){if(Fp(e.app))return Promise.reject(Eh(e,"operation-not-supported-in-this-environment"));const r=RP(e);dBt(e,t,Wne);const i=YMe(r,n);return new T_(r,"signInViaPopup",t,i).executeNotNull()}class T_ extends KMe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,T_.currentPopupAction&&T_.currentPopupAction.cancel(),T_.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nn(t,this.auth,"internal-error"),t}async onExecution(){C0(this.filter.length===1,"Popup operations only handle one event");const t=Gne();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Eh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Eh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T_.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Eh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,b9t.get())};t()}}T_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9t="pendingRedirect",J$=new Map;class x9t extends KMe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=J$.get(this.auth._key());if(!t){try{const r=await E9t(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}J$.set(this.auth._key(),t)}return this.bypassAuthState||J$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E9t(e,t){const n=C9t(t),r=T9t(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function S9t(e,t){J$.set(e._key(),t)}function T9t(e){return jg(e._redirectPersistence)}function C9t(e){return Q$(w9t,e.config.apiKey,e.name)}async function A9t(e,t,n=!1){if(Fp(e.app))return Promise.reject(Iv(e));const r=RP(e),i=YMe(r,t),o=await new x9t(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9t=10*60*1e3;class k9t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!R9t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!XMe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Eh(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=I9t&&this.cachedEventUids.clear(),this.cachedEventUids.has(qye(t))}saveEventToCache(t){this.cachedEventUids.add(qye(t)),this.lastProcessedEventTime=Date.now()}}function qye(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XMe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function R9t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XMe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9t(e,t={}){return rA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D9t=/^https?/;async function O9t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await N9t(e);for(const n of t)try{if($9t(n))return}catch{}mm(e,"unauthorized-domain")}function $9t(e){const t=MG(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!D9t.test(n))return!1;if(P9t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9t=new kP(3e4,6e4);function Wye(){const e=Qp().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function L9t(e){return new Promise((t,n)=>{var r,i,s;function o(){Wye(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wye(),n(Eh(e,"network-request-failed"))},timeout:M9t.get()})}if(!((i=(r=Qp().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Qp().gapi)===null||s===void 0)&&s.load)o();else{const a=FBt("iframefcb");return Qp()[a]=()=>{gapi.load?o():n(Eh(e,"network-request-failed"))},MBt(`${LBt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw Z$=null,t})}let Z$=null;function F9t(e){return Z$=Z$||L9t(e),Z$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9t=new kP(5e3,15e3),B9t="__/auth/iframe",U9t="emulator/auth/iframe",z9t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V9t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H9t(e){const t=e.config;Nn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zne(t,U9t):`https://${e.config.authDomain}/${B9t}`,r={apiKey:t.apiKey,appName:e.name,v:tx},i=V9t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${IP(r).slice(1)}`}async function q9t(e){const t=await F9t(e),n=Qp().gapi;return Nn(n,e,"internal-error"),t.open({where:document.body,url:H9t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z9t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Eh(e,"network-request-failed"),a=Qp().setTimeout(()=>{s(o)},j9t.get());function u(){Qp().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G9t=500,Y9t=600,K9t="_blank",X9t="http://localhost";class Gye{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q9t(e,t,n,r=G9t,i=Y9t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},W9t),{width:r.toString(),height:i.toString(),top:s,left:o}),l=za().toLowerCase();n&&(a=RMe(l)?K9t:n),kMe(l)&&(t=t||X9t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(ABt(l)&&a!=="_self")return J9t(t||"",a),new Gye(null);const f=window.open(t||"",a,c);Nn(f,e,"popup-blocked");try{f.focus()}catch{}return new Gye(f)}function J9t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9t="__/auth/handler",eUt="emulator/auth/handler",tUt=encodeURIComponent("fac");async function Yye(e,t,n,r,i,s){Nn(e.config.authDomain,e,"auth-domain-config-required"),Nn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tx,eventId:i};if(t instanceof Wne){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Yjt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof NP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${tUt}=${encodeURIComponent(u)}`:"";return`${nUt(e)}?${IP(a).slice(1)}${l}`}function nUt({config:e}){return e.emulator?zne(e,eUt):`https://${e.authDomain}/${Z9t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z="webStorageSupport";class rUt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VMe,this._completeRedirectFn=A9t,this._overrideRedirectResult=S9t}async _openPopup(t,n,r,i){var s;C0((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Yye(t,n,r,MG(),i);return Q9t(t,o,Gne())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Yye(t,n,r,MG(),i);return o9t(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(C0(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await q9t(t),r=new k9t(t);return n.register("authEvent",i=>(Nn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send($z,{type:$z},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$z];o!==void 0&&n(!!o),mm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O9t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return $Me()||Hne()||Uj()}}const QMe=rUt;var Kye="@firebase/auth",Xye="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iUt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sUt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oUt(e){T0(new pm("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Nn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MMe(e)},l=new OBt(r,i,s,u);return BBt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),T0(new pm("auth-internal",t=>{const n=RP(t.getProvider("auth").getImmediate());return(r=>new iUt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xh(Kye,Xye,sUt(e)),xh(Kye,Xye,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aUt=5*60,uUt=pMe("authIdTokenMaxAge")||aUt;let Qye=null;const lUt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uUt)return;const i=n==null?void 0:n.token;Qye!==i&&(Qye=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fF(e=jne()){const t=nA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=jBt(e,{popupRedirectResolver:QMe,persistence:[m9t,r9t,VMe]}),r=pMe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=lUt(s.toString());QBt(n,o,()=>o(n.currentUser)),XBt(n,a=>o(a))}}const i=dMe("auth");return i&&UBt(n,`http://${i}`),n}function cUt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}$Bt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Eh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",cUt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oUt("Browser");var fUt="firebase",dUt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xh(fUt,dUt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JMe="firebasestorage.googleapis.com",ZMe="storageBucket",hUt=2*60*1e3,pUt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Dm{constructor(t,n,r=0){super(Mz(t),`Firebase Storage: ${n} (${Mz(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ws.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Mz(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qs;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qs||(qs={}));function Mz(e){return"storage/"+e}function Kne(){const e="An unknown error occurred, please check the error payload for server response.";return new Ws(qs.UNKNOWN,e)}function mUt(e){return new Ws(qs.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function gUt(e){return new Ws(qs.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yUt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ws(qs.UNAUTHENTICATED,e)}function vUt(){return new Ws(qs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bUt(e){return new Ws(qs.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function _Ut(){return new Ws(qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wUt(){return new Ws(qs.CANCELED,"User canceled the upload/download.")}function xUt(e){return new Ws(qs.INVALID_URL,"Invalid URL '"+e+"'.")}function EUt(e){return new Ws(qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function SUt(){return new Ws(qs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZMe+"' property when initializing the app?")}function TUt(){return new Ws(qs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CUt(){return new Ws(qs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AUt(e){return new Ws(qs.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jG(e){return new Ws(qs.INVALID_ARGUMENT,e)}function eLe(){return new Ws(qs.APP_DELETED,"The Firebase app was deleted.")}function IUt(e){return new Ws(qs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ek(e,t){return new Ws(qs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function x2(e){throw new Ws(qs.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=nl.makeFromUrl(t,n)}catch{return new nl(t,"")}if(r.path==="")return r;throw EUt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===JMe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),w=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(t);if(T){const C=T[S.indices.bucket];let I=T[S.indices.path];I||(I=""),r=new nl(C,I),S.postModify(r);break}}if(r==null)throw xUt(t);return r}}class kUt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RUt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function NUt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PUt(e){return e!==void 0}function DUt(e){return typeof e=="object"&&!Array.isArray(e)}function Xne(e){return typeof e=="string"||e instanceof String}function Jye(e){return Qne()&&e instanceof Blob}function Qne(){return typeof Blob<"u"}function BG(e,t,n,r){if(r<t)throw jG(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw jG(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function tLe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $_;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})($_||($_={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OUt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ut{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new E3(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$_.NO_ERROR,u=s.getStatus();if(!a||OUt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===$_.ABORT;r(!1,new E3(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new E3(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());PUt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Kne();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?eLe():wUt();o(u)}else{const u=_Ut();o(u)}};this.canceled_?n(!1,new E3(!1,null,!0)):this.backoffId_=RUt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&NUt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class E3{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function MUt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function LUt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function FUt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function jUt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function BUt(e,t,n,r,i,s,o=!0){const a=tLe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return FUt(l,t),MUt(l,n),LUt(l,s),jUt(l,r),new $Ut(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UUt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zUt(...e){const t=UUt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(Qne())return new Blob(e);throw new Ws(qs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VUt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HUt(e){if(typeof atob>"u")throw AUt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lz{constructor(t,n){this.data=t,this.contentType=n||null}}function qUt(e,t){switch(e){case jp.RAW:return new Lz(nLe(t));case jp.BASE64:case jp.BASE64URL:return new Lz(rLe(e,t));case jp.DATA_URL:return new Lz(GUt(t),YUt(t))}throw Kne()}function nLe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function WUt(e){let t;try{t=decodeURIComponent(e)}catch{throw Ek(jp.DATA_URL,"Malformed data URL.")}return nLe(t)}function rLe(e,t){switch(e){case jp.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Ek(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jp.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Ek(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HUt(t)}catch(i){throw i.message.includes("polyfill")?i:Ek(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class iLe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Ek(jp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=KUt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function GUt(e){const t=new iLe(e);return t.base64?rLe(jp.BASE64,t.rest):WUt(t.rest)}function YUt(e){return new iLe(e).contentType}function KUt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,n){let r=0,i="";Jye(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Jye(this.data_)){const r=this.data_,i=VUt(r,t,n);return i===null?null:new Gy(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Gy(r,!0)}}static getBlob(...t){if(Qne()){const n=t.map(r=>r instanceof Gy?r.data_:r);return new Gy(zUt.apply(null,n))}else{const n=t.map(o=>Xne(o)?qUt(jp.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Gy(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jne(e){let t;try{t=JSON.parse(e)}catch{return null}return DUt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XUt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function QUt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function sLe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JUt(e,t){return t}class Uu{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||JUt}}let S3=null;function ZUt(e){return!Xne(e)||e.length<2?e:sLe(e)}function oLe(){if(S3)return S3;const e=[];e.push(new Uu("bucket")),e.push(new Uu("generation")),e.push(new Uu("metageneration")),e.push(new Uu("name","fullPath",!0));function t(s,o){return ZUt(o)}const n=new Uu("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Uu("size");return i.xform=r,e.push(i),e.push(new Uu("timeCreated")),e.push(new Uu("updated")),e.push(new Uu("md5Hash",null,!0)),e.push(new Uu("cacheControl",null,!0)),e.push(new Uu("contentDisposition",null,!0)),e.push(new Uu("contentEncoding",null,!0)),e.push(new Uu("contentLanguage",null,!0)),e.push(new Uu("contentType",null,!0)),e.push(new Uu("metadata","customMetadata",!0)),S3=e,S3}function e7t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new nl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function t7t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return e7t(r,e),r}function aLe(e,t,n){const r=Jne(t);return r===null?null:t7t(e,r,n)}function n7t(e,t,n,r){const i=Jne(t);if(i===null||!Xne(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=DP(d,n,r),p=tLe({alt:"media",token:l});return h+p})[0]}function r7t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zye="prefixes",eve="items";function i7t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Zye])for(const i of n[Zye]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new nl(t,s));r.prefixes.push(o)}if(n[eve])for(const i of n[eve]){const s=e._makeStorageReference(new nl(t,i.name));r.items.push(s)}return r}function s7t(e,t,n){const r=Jne(n);return r===null?null:i7t(e,t,r)}class Hj{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zne(e){if(!e)throw Kne()}function o7t(e,t){function n(r,i){const s=aLe(e,i,t);return Zne(s!==null),s}return n}function a7t(e,t){function n(r,i){const s=s7t(e,t,i);return Zne(s!==null),s}return n}function u7t(e,t){function n(r,i){const s=aLe(e,i,t);return Zne(s!==null),n7t(s,i,e.host,e._protocol)}return n}function ere(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=vUt():i=yUt():n.getStatus()===402?i=gUt(e.bucket):n.getStatus()===403?i=bUt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function uLe(e){const t=ere(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=mUt(e.path)),s.serverResponse=i.serverResponse,s}return n}function l7t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=DP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new Hj(a,u,a7t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=ere(t),c}function c7t(e,t,n){const r=t.fullServerUrl(),i=DP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new Hj(i,s,u7t(e,n),o);return a.errorHandler=uLe(t),a}function f7t(e,t){const n=t.fullServerUrl(),r=DP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new Hj(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=uLe(t),a}function d7t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function h7t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=d7t(null,t)),r}function p7t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=h7t(t,r,i),c=r7t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Gy.getBlob(f,r,d);if(h===null)throw TUt();const p={name:l.fullPath},m=DP(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,b=new Hj(m,g,o7t(e,n),y);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=ere(t),b}class m7t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$_.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$_.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$_.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw x2("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x2("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x2("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw x2("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x2("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class g7t extends m7t{initXhr(){this.xhr_.responseType="text"}}function qj(){return new g7t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t,n){this._service=t,n instanceof nl?this._location=n:this._location=nl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new dw(t,n)}get root(){const t=new nl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sLe(this._location.path)}get storage(){return this._service}get parent(){const t=XUt(this._location.path);if(t===null)return null;const n=new nl(this._location.bucket,t);return new dw(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw IUt(t)}}function y7t(e,t,n){e._throwIfRoot("uploadBytes");const r=p7t(e.storage,e._location,oLe(),new Gy(t,!0),n);return e.storage.makeRequestWithTokens(r,qj).then(i=>({metadata:i,ref:e}))}function v7t(e){const t={prefixes:[],items:[]};return lLe(e,t).then(()=>t)}async function lLe(e,t,n){const i=await b7t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await lLe(e,t,i.nextPageToken)}function b7t(e,t){t!=null&&typeof t.maxResults=="number"&&BG("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=l7t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,qj)}function _7t(e){e._throwIfRoot("getDownloadURL");const t=c7t(e.storage,e._location,oLe());return e.storage.makeRequestWithTokens(t,qj).then(n=>{if(n===null)throw CUt();return n})}function w7t(e){e._throwIfRoot("deleteObject");const t=f7t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,qj)}function x7t(e,t){const n=QUt(e._location.path,t),r=new nl(e._location.bucket,n);return new dw(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7t(e){return/^[A-Za-z]+:\/\//.test(e)}function S7t(e,t){return new dw(e,t)}function cLe(e,t){if(e instanceof tre){const n=e;if(n._bucket==null)throw SUt();const r=new dw(n,n._bucket);return t!=null?cLe(r,t):r}else return t!==void 0?x7t(e,t):e}function T7t(e,t){if(t&&E7t(t)){if(e instanceof tre)return S7t(e,t);throw jG("To use ref(service, url), the first argument must be a Storage instance.")}else return cLe(e,t)}function tve(e,t){const n=t==null?void 0:t[ZMe];return n==null?null:nl.makeFromBucketSpec(n,e)}function C7t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Ljt(i,e.app.options.projectId))}class tre{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=JMe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hUt,this._maxUploadRetryTime=pUt,this._requests=new Set,i!=null?this._bucket=nl.makeFromBucketSpec(i,this._host):this._bucket=tve(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=nl.makeFromBucketSpec(this._url,t):this._bucket=tve(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){BG("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){BG("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new dw(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new kUt(eLe());{const o=BUt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const nve="@firebase/storage",rve="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fLe="storage";function T3(e,t,n){return e=Wi(e),y7t(e,t,n)}function E2(e){return e=Wi(e),v7t(e)}function Fz(e){return e=Wi(e),_7t(e)}function ive(e){return e=Wi(e),w7t(e)}function kf(e,t){return e=Wi(e),T7t(e,t)}function A7t(e=jne(),t){e=Wi(e);const r=nA(e,fLe).getImmediate({identifier:t}),i=Mjt("storage");return i&&I7t(r,...i),r}function I7t(e,t,n,r={}){C7t(e,t,n,r)}function k7t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new tre(n,r,i,t,tx)}function R7t(){T0(new pm(fLe,k7t,"PUBLIC").setMultipleInstances(!0)),xh(nve,rve,""),xh(nve,rve,"esm2017")}R7t();var sve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M_,dLe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,I){function R(){}R.prototype=I.prototype,C.D=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(P,D,L){for(var M=Array(arguments.length-2),F=2;F<arguments.length;F++)M[F-2]=arguments[F];return I.prototype[D].apply(P,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,R){R||(R=0);var P=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)P[D]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(D=0;16>D;++D)P[D]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],D=C.g[2];var L=C.g[3],M=I+(L^R&(D^L))+P[0]+3614090360&4294967295;I=R+(M<<7&4294967295|M>>>25),M=L+(D^I&(R^D))+P[1]+3905402710&4294967295,L=I+(M<<12&4294967295|M>>>20),M=D+(R^L&(I^R))+P[2]+606105819&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(I^D&(L^I))+P[3]+3250441966&4294967295,R=D+(M<<22&4294967295|M>>>10),M=I+(L^R&(D^L))+P[4]+4118548399&4294967295,I=R+(M<<7&4294967295|M>>>25),M=L+(D^I&(R^D))+P[5]+1200080426&4294967295,L=I+(M<<12&4294967295|M>>>20),M=D+(R^L&(I^R))+P[6]+2821735955&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(I^D&(L^I))+P[7]+4249261313&4294967295,R=D+(M<<22&4294967295|M>>>10),M=I+(L^R&(D^L))+P[8]+1770035416&4294967295,I=R+(M<<7&4294967295|M>>>25),M=L+(D^I&(R^D))+P[9]+2336552879&4294967295,L=I+(M<<12&4294967295|M>>>20),M=D+(R^L&(I^R))+P[10]+4294925233&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(I^D&(L^I))+P[11]+2304563134&4294967295,R=D+(M<<22&4294967295|M>>>10),M=I+(L^R&(D^L))+P[12]+1804603682&4294967295,I=R+(M<<7&4294967295|M>>>25),M=L+(D^I&(R^D))+P[13]+4254626195&4294967295,L=I+(M<<12&4294967295|M>>>20),M=D+(R^L&(I^R))+P[14]+2792965006&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(I^D&(L^I))+P[15]+1236535329&4294967295,R=D+(M<<22&4294967295|M>>>10),M=I+(D^L&(R^D))+P[1]+4129170786&4294967295,I=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(I^R))+P[6]+3225465664&4294967295,L=I+(M<<9&4294967295|M>>>23),M=D+(I^R&(L^I))+P[11]+643717713&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^I&(D^L))+P[0]+3921069994&4294967295,R=D+(M<<20&4294967295|M>>>12),M=I+(D^L&(R^D))+P[5]+3593408605&4294967295,I=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(I^R))+P[10]+38016083&4294967295,L=I+(M<<9&4294967295|M>>>23),M=D+(I^R&(L^I))+P[15]+3634488961&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^I&(D^L))+P[4]+3889429448&4294967295,R=D+(M<<20&4294967295|M>>>12),M=I+(D^L&(R^D))+P[9]+568446438&4294967295,I=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(I^R))+P[14]+3275163606&4294967295,L=I+(M<<9&4294967295|M>>>23),M=D+(I^R&(L^I))+P[3]+4107603335&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^I&(D^L))+P[8]+1163531501&4294967295,R=D+(M<<20&4294967295|M>>>12),M=I+(D^L&(R^D))+P[13]+2850285829&4294967295,I=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(I^R))+P[2]+4243563512&4294967295,L=I+(M<<9&4294967295|M>>>23),M=D+(I^R&(L^I))+P[7]+1735328473&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^I&(D^L))+P[12]+2368359562&4294967295,R=D+(M<<20&4294967295|M>>>12),M=I+(R^D^L)+P[5]+4294588738&4294967295,I=R+(M<<4&4294967295|M>>>28),M=L+(I^R^D)+P[8]+2272392833&4294967295,L=I+(M<<11&4294967295|M>>>21),M=D+(L^I^R)+P[11]+1839030562&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^I)+P[14]+4259657740&4294967295,R=D+(M<<23&4294967295|M>>>9),M=I+(R^D^L)+P[1]+2763975236&4294967295,I=R+(M<<4&4294967295|M>>>28),M=L+(I^R^D)+P[4]+1272893353&4294967295,L=I+(M<<11&4294967295|M>>>21),M=D+(L^I^R)+P[7]+4139469664&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^I)+P[10]+3200236656&4294967295,R=D+(M<<23&4294967295|M>>>9),M=I+(R^D^L)+P[13]+681279174&4294967295,I=R+(M<<4&4294967295|M>>>28),M=L+(I^R^D)+P[0]+3936430074&4294967295,L=I+(M<<11&4294967295|M>>>21),M=D+(L^I^R)+P[3]+3572445317&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^I)+P[6]+76029189&4294967295,R=D+(M<<23&4294967295|M>>>9),M=I+(R^D^L)+P[9]+3654602809&4294967295,I=R+(M<<4&4294967295|M>>>28),M=L+(I^R^D)+P[12]+3873151461&4294967295,L=I+(M<<11&4294967295|M>>>21),M=D+(L^I^R)+P[15]+530742520&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^I)+P[2]+3299628645&4294967295,R=D+(M<<23&4294967295|M>>>9),M=I+(D^(R|~L))+P[0]+4096336452&4294967295,I=R+(M<<6&4294967295|M>>>26),M=L+(R^(I|~D))+P[7]+1126891415&4294967295,L=I+(M<<10&4294967295|M>>>22),M=D+(I^(L|~R))+P[14]+2878612391&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~I))+P[5]+4237533241&4294967295,R=D+(M<<21&4294967295|M>>>11),M=I+(D^(R|~L))+P[12]+1700485571&4294967295,I=R+(M<<6&4294967295|M>>>26),M=L+(R^(I|~D))+P[3]+2399980690&4294967295,L=I+(M<<10&4294967295|M>>>22),M=D+(I^(L|~R))+P[10]+4293915773&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~I))+P[1]+2240044497&4294967295,R=D+(M<<21&4294967295|M>>>11),M=I+(D^(R|~L))+P[8]+1873313359&4294967295,I=R+(M<<6&4294967295|M>>>26),M=L+(R^(I|~D))+P[15]+4264355552&4294967295,L=I+(M<<10&4294967295|M>>>22),M=D+(I^(L|~R))+P[6]+2734768916&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~I))+P[13]+1309151649&4294967295,R=D+(M<<21&4294967295|M>>>11),M=I+(D^(R|~L))+P[4]+4149444226&4294967295,I=R+(M<<6&4294967295|M>>>26),M=L+(R^(I|~D))+P[11]+3174756917&4294967295,L=I+(M<<10&4294967295|M>>>22),M=D+(I^(L|~R))+P[2]+718787259&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~I))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var R=I-this.blockSize,P=this.B,D=this.h,L=0;L<I;){if(D==0)for(;L<=R;)i(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<I;)if(P[D++]=C.charCodeAt(L++),D==this.blockSize){i(this,P),D=0;break}}else for(;L<I;)if(P[D++]=C[L++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var R=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.u(C),C=Array(16),I=R=0;4>I;++I)for(var P=0;32>P;P+=8)C[R++]=this.g[I]>>>P&255;return C};function s(C,I){var R=a;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function o(C,I){this.h=I;for(var R=[],P=!0,D=C.length-1;0<=D;D--){var L=C[D]|0;P&&L==I||(R[D]=L,P=!1)}this.g=R}var a={};function u(C){return-128<=C&&128>C?s(C,function(I){return new o([I|0],0>I?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return g(l(-C));for(var I=[],R=1,P=0;C>=R;P++)I[P]=C/R|0,R*=4294967296;return new o(I,0)}function c(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return g(c(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=l(Math.pow(I,8)),P=f,D=0;D<C.length;D+=8){var L=Math.min(8,C.length-D),M=parseInt(C.substring(D,D+L),I);8>L?(L=l(Math.pow(I,L)),P=P.j(L).add(l(M))):(P=P.j(R),P=P.add(l(M)))}return P}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var C=0,I=1,R=0;R<this.g.length;R++){var P=this.i(R);C+=(0<=P?P:4294967296+P)*I,I*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(p(this))return"0";if(m(this))return"-"+g(this).toString(C);for(var I=l(Math.pow(C,6)),R=this,P="";;){var D=E(R,I).g;R=y(R,D.j(I));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=D,p(R))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function p(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function m(C){return C.h==-1}e.l=function(C){return C=y(this,C),m(C)?-1:p(C)?0:1};function g(C){for(var I=C.g.length,R=[],P=0;P<I;P++)R[P]=~C.g[P];return new o(R,~C.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],P=0,D=0;D<=I;D++){var L=P+(this.i(D)&65535)+(C.i(D)&65535),M=(L>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);P=M>>>16,L&=65535,M&=65535,R[D]=M<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function y(C,I){return C.add(g(I))}e.j=function(C){if(p(this)||p(C))return f;if(m(this))return m(C)?g(this).j(g(C)):g(g(this).j(C));if(m(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return l(this.m()*C.m());for(var I=this.g.length+C.g.length,R=[],P=0;P<2*I;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<C.g.length;D++){var L=this.i(P)>>>16,M=this.i(P)&65535,F=C.i(D)>>>16,z=C.i(D)&65535;R[2*P+2*D]+=M*z,b(R,2*P+2*D),R[2*P+2*D+1]+=L*z,b(R,2*P+2*D+1),R[2*P+2*D+1]+=M*F,b(R,2*P+2*D+1),R[2*P+2*D+2]+=L*F,b(R,2*P+2*D+2)}for(P=0;P<I;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=I;P<2*I;P++)R[P]=0;return new o(R,0)};function b(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function w(C,I){this.g=C,this.h=I}function E(C,I){if(p(I))throw Error("division by zero");if(p(C))return new w(f,f);if(m(C))return I=E(g(C),I),new w(g(I.g),g(I.h));if(m(I))return I=E(C,g(I)),new w(g(I.g),I.h);if(30<C.g.length){if(m(C)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var R=d,P=I;0>=P.l(C);)R=S(R),P=S(P);var D=T(R,1),L=T(P,1);for(P=T(P,2),R=T(R,2);!p(P);){var M=L.add(P);0>=M.l(C)&&(D=D.add(R),L=M),P=T(P,1),R=T(R,1)}return I=y(C,D.j(I)),new w(D,I)}for(D=f;0<=C.l(I);){for(R=Math.max(1,Math.floor(C.m()/I.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=l(R),M=L.j(I);m(M)||0<M.l(C);)R-=P,L=l(R),M=L.j(I);p(L)&&(L=d),D=D.add(L),C=y(C,M)}return new w(D,C)}e.A=function(C){return E(this,C).h},e.and=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)&C.i(P);return new o(R,this.h&C.h)},e.or=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)|C.i(P);return new o(R,this.h|C.h)},e.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)^C.i(P);return new o(R,this.h^C.h)};function S(C){for(var I=C.g.length+1,R=[],P=0;P<I;P++)R[P]=C.i(P)<<1|C.i(P-1)>>>31;return new o(R,C.h)}function T(C,I){var R=I>>5;I%=32;for(var P=C.g.length-R,D=[],L=0;L<P;L++)D[L]=0<I?C.i(L+R)>>>I|C.i(L+R+1)<<32-I:C.i(L+R);return new o(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dLe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,M_=o}).apply(typeof sve<"u"?sve:typeof self<"u"?self:typeof window<"u"?window:{});var C3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hLe,pLe,bI,mLe,eM,UG,gLe,yLe,vLe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,j,G){return A==Array.prototype||A==Object.prototype||(A[j]=G.value),A};function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof C3=="object"&&C3];for(var j=0;j<A.length;++j){var G=A[j];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=n(this);function i(A,j){if(j)e:{var G=r;A=A.split(".");for(var ne=0;ne<A.length-1;ne++){var Pe=A[ne];if(!(Pe in G))break e;G=G[Pe]}A=A[A.length-1],ne=G[A],j=j(ne),j!=ne&&j!=null&&t(G,A,{configurable:!0,writable:!0,value:j})}}function s(A,j){A instanceof String&&(A+="");var G=0,ne=!1,Pe={next:function(){if(!ne&&G<A.length){var He=G++;return{value:j(He,A[He]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}i("Array.prototype.values",function(A){return A||function(){return s(this,function(j,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(A){var j=typeof A;return j=j!="object"?j:A?Array.isArray(A)?"array":j:"null",j=="array"||j=="object"&&typeof A.length=="number"}function l(A){var j=typeof A;return j=="object"&&A!=null||j=="function"}function c(A,j,G){return A.call.apply(A.bind,arguments)}function f(A,j,G){if(!A)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,ne),A.apply(j,Pe)}}return function(){return A.apply(j,arguments)}}function d(A,j,G){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(A,j){var G=Array.prototype.slice.call(arguments,1);return function(){var ne=G.slice();return ne.push.apply(ne,arguments),A.apply(this,ne)}}function p(A,j){function G(){}G.prototype=j.prototype,A.aa=j.prototype,A.prototype=new G,A.prototype.constructor=A,A.Qb=function(ne,Pe,He){for(var At=Array(arguments.length-2),oi=2;oi<arguments.length;oi++)At[oi-2]=arguments[oi];return j.prototype[Pe].apply(ne,At)}}function m(A){const j=A.length;if(0<j){const G=Array(j);for(let ne=0;ne<j;ne++)G[ne]=A[ne];return G}return[]}function g(A,j){for(let G=1;G<arguments.length;G++){const ne=arguments[G];if(u(ne)){const Pe=A.length||0,He=ne.length||0;A.length=Pe+He;for(let At=0;At<He;At++)A[Pe+At]=ne[At]}else A.push(ne)}}class y{constructor(j,G){this.i=j,this.j=G,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function b(A){return/^[\s\xa0]*$/.test(A)}function w(){var A=a.navigator;return A&&(A=A.userAgent)?A:""}function E(A){return E[" "](A),A}E[" "]=function(){};var S=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function T(A,j,G){for(const ne in A)j.call(G,A[ne],ne,A)}function C(A,j){for(const G in A)j.call(void 0,A[G],G,A)}function I(A){const j={};for(const G in A)j[G]=A[G];return j}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(A,j){let G,ne;for(let Pe=1;Pe<arguments.length;Pe++){ne=arguments[Pe];for(G in ne)A[G]=ne[G];for(let He=0;He<R.length;He++)G=R[He],Object.prototype.hasOwnProperty.call(ne,G)&&(A[G]=ne[G])}}function D(A){var j=1;A=A.split(":");const G=[];for(;0<j&&A.length;)G.push(A.shift()),j--;return A.length&&G.push(A.join(":")),G}function L(A){a.setTimeout(()=>{throw A},0)}function M(){var A=Y;let j=null;return A.g&&(j=A.g,A.g=A.g.next,A.g||(A.h=null),j.next=null),j}class F{constructor(){this.h=this.g=null}add(j,G){const ne=z.get();ne.set(j,G),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var z=new y(()=>new B,A=>A.reset());class B{constructor(){this.next=this.g=this.h=null}set(j,G){this.h=j,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let H,q=!1,Y=new F,$=()=>{const A=a.Promise.resolve(void 0);H=()=>{A.then(W)}};var W=()=>{for(var A;A=M();){try{A.h.call(A.g)}catch(G){L(G)}var j=z;j.j(A),100>j.h&&(j.h++,A.next=j.g,j.g=A)}q=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(A,j){this.type=A,this.g=this.target=j,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var A=!1,j=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const G=()=>{};a.addEventListener("test",G,j),a.removeEventListener("test",G,j)}catch{}return A}();function J(A,j){if(V.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var G=this.type=A.type,ne=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=j,j=A.relatedTarget){if(S){e:{try{E(j.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(j=null)}}else G=="mouseover"?j=A.fromElement:G=="mouseout"&&(j=A.toElement);this.relatedTarget=j,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:ue[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&J.aa.h.call(this)}}p(J,V);var ue={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),be=0;function xe(A,j,G,ne,Pe){this.listener=A,this.proxy=null,this.src=j,this.type=G,this.capture=!!ne,this.ha=Pe,this.key=++be,this.da=this.fa=!1}function ke(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function je(A){this.src=A,this.g={},this.h=0}je.prototype.add=function(A,j,G,ne,Pe){var He=A.toString();A=this.g[He],A||(A=this.g[He]=[],this.h++);var At=ft(A,j,ne,Pe);return-1<At?(j=A[At],G||(j.fa=!1)):(j=new xe(j,this.src,He,!!ne,Pe),j.fa=G,A.push(j)),j};function Re(A,j){var G=j.type;if(G in A.g){var ne=A.g[G],Pe=Array.prototype.indexOf.call(ne,j,void 0),He;(He=0<=Pe)&&Array.prototype.splice.call(ne,Pe,1),He&&(ke(j),A.g[G].length==0&&(delete A.g[G],A.h--))}}function ft(A,j,G,ne){for(var Pe=0;Pe<A.length;++Pe){var He=A[Pe];if(!He.da&&He.listener==j&&He.capture==!!G&&He.ha==ne)return Pe}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),It={};function bt(A,j,G,ne,Pe){if(Array.isArray(j)){for(var He=0;He<j.length;He++)bt(A,j[He],G,ne,Pe);return null}return G=Rt(G),A&&A[_e]?A.K(j,G,l(ne)?!!ne.capture:!!ne,Pe):Ae(A,j,G,!1,ne,Pe)}function Ae(A,j,G,ne,Pe,He){if(!j)throw Error("Invalid event type");var At=l(Pe)?!!Pe.capture:!!Pe,oi=Se(A);if(oi||(A[Ze]=oi=new je(A)),G=oi.add(j,G,ne,At,He),G.proxy)return G;if(ne=Be(),G.proxy=ne,ne.src=A,ne.listener=G,A.addEventListener)K||(Pe=At),Pe===void 0&&(Pe=!1),A.addEventListener(j.toString(),ne,Pe);else if(A.attachEvent)A.attachEvent(jt(j.toString()),ne);else if(A.addListener&&A.removeListener)A.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return G}function Be(){function A(G){return j.call(A.src,A.listener,G)}const j=ot;return A}function st(A,j,G,ne,Pe){if(Array.isArray(j))for(var He=0;He<j.length;He++)st(A,j[He],G,ne,Pe);else ne=l(ne)?!!ne.capture:!!ne,G=Rt(G),A&&A[_e]?(A=A.i,j=String(j).toString(),j in A.g&&(He=A.g[j],G=ft(He,G,ne,Pe),-1<G&&(ke(He[G]),Array.prototype.splice.call(He,G,1),He.length==0&&(delete A.g[j],A.h--)))):A&&(A=Se(A))&&(j=A.g[j.toString()],A=-1,j&&(A=ft(j,G,ne,Pe)),(G=-1<A?j[A]:null)&&_t(G))}function _t(A){if(typeof A!="number"&&A&&!A.da){var j=A.src;if(j&&j[_e])Re(j.i,A);else{var G=A.type,ne=A.proxy;j.removeEventListener?j.removeEventListener(G,ne,A.capture):j.detachEvent?j.detachEvent(jt(G),ne):j.addListener&&j.removeListener&&j.removeListener(ne),(G=Se(j))?(Re(G,A),G.h==0&&(G.src=null,j[Ze]=null)):ke(A)}}}function jt(A){return A in It?It[A]:It[A]="on"+A}function ot(A,j){if(A.da)A=!0;else{j=new J(j,this);var G=A.listener,ne=A.ha||A.src;A.fa&&_t(A),A=G.call(ne,j)}return A}function Se(A){return A=A[Ze],A instanceof je?A:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(A){return typeof A=="function"?A:(A[kt]||(A[kt]=function(j){return A.handleEvent(j)}),A[kt])}function Te(){X.call(this),this.i=new je(this),this.M=this,this.F=null}p(Te,X),Te.prototype[_e]=!0,Te.prototype.removeEventListener=function(A,j,G,ne){st(this,A,j,G,ne)};function $e(A,j){var G,ne=A.F;if(ne)for(G=[];ne;ne=ne.F)G.push(ne);if(A=A.M,ne=j.type||j,typeof j=="string")j=new V(j,A);else if(j instanceof V)j.target=j.target||A;else{var Pe=j;j=new V(ne,A),P(j,Pe)}if(Pe=!0,G)for(var He=G.length-1;0<=He;He--){var At=j.g=G[He];Pe=rt(At,ne,!0,j)&&Pe}if(At=j.g=A,Pe=rt(At,ne,!0,j)&&Pe,Pe=rt(At,ne,!1,j)&&Pe,G)for(He=0;He<G.length;He++)At=j.g=G[He],Pe=rt(At,ne,!1,j)&&Pe}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var A=this.i,j;for(j in A.g){for(var G=A.g[j],ne=0;ne<G.length;ne++)ke(G[ne]);delete A.g[j],A.h--}}this.F=null},Te.prototype.K=function(A,j,G,ne){return this.i.add(String(A),j,!1,G,ne)},Te.prototype.L=function(A,j,G,ne){return this.i.add(String(A),j,!0,G,ne)};function rt(A,j,G,ne){if(j=A.i.g[String(j)],!j)return!0;j=j.concat();for(var Pe=!0,He=0;He<j.length;++He){var At=j[He];if(At&&!At.da&&At.capture==G){var oi=At.listener,Io=At.ha||At.src;At.fa&&Re(A.i,At),Pe=oi.call(Io,ne)!==!1&&Pe}}return Pe&&!ne.defaultPrevented}function St(A,j,G){if(typeof A=="function")G&&(A=d(A,G));else if(A&&typeof A.handleEvent=="function")A=d(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:a.setTimeout(A,j||0)}function Mt(A){A.g=St(()=>{A.g=null,A.i&&(A.i=!1,Mt(A))},A.l);const j=A.h;A.h=null,A.m.apply(null,j)}class Zn extends X{constructor(j,G){super(),this.m=j,this.l=G,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Mt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(A){X.call(this),this.h=A,this.g={}}p(Br,X);var er=[];function yr(A){T(A.g,function(j,G){this.g.hasOwnProperty(G)&&_t(j)},A),A.g={}}Br.prototype.N=function(){Br.aa.N.call(this),yr(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=a.JSON.stringify,Un=a.JSON.parse,pr=class{stringify(A){return a.JSON.stringify(A,void 0)}parse(A){return a.JSON.parse(A,void 0)}};function Tr(){}Tr.prototype.h=null;function Yo(A){return A.h||(A.h=A.i())}function us(){}var Vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yi(){V.call(this,"d")}p(Yi,V);function ri(){V.call(this,"c")}p(ri,V);var Ns={},Sd=null;function Pu(){return Sd=Sd||new Te}Ns.La="serverreachability";function wc(A){V.call(this,Ns.La,A)}p(wc,V);function Yr(A){const j=Pu();$e(j,new wc(j))}Ns.STAT_EVENT="statevent";function Ki(A,j){V.call(this,Ns.STAT_EVENT,A),this.stat=j}p(Ki,V);function Ti(A){const j=Pu();$e(j,new Ki(j,A))}Ns.Ma="timingevent";function Ko(A,j){V.call(this,Ns.Ma,A),this.size=j}p(Ko,V);function ba(A,j){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){A()},j)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function pe(A,j,G,ne,Pe,He){A.info(function(){if(A.g)if(He)for(var At="",oi=He.split("&"),Io=0;Io<oi.length;Io++){var kr=oi[Io].split("=");if(1<kr.length){var hi=kr[0];kr=kr[1];var fo=hi.split("_");At=2<=fo.length&&fo[1]=="type"?At+(hi+"="+kr+"&"):At+(hi+"=redacted&")}}else At=null;else At=He;return"XMLHTTP REQ ("+ne+") [attempt "+Pe+"]: "+j+`
`+G+`
`+At})}function ae(A,j,G,ne,Pe,He,At){A.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+Pe+"]: "+j+`
`+G+`
`+He+" "+At})}function me(A,j,G,ne){A.info(function(){return"XMLHTTP TEXT ("+j+"): "+Me(A,G)+(ne?" "+ne:"")})}function Le(A,j){A.info(function(){return"TIMEOUT: "+j})}Eo.prototype.info=function(){};function Me(A,j){if(!A.g)return j;if(!j)return null;try{var G=JSON.parse(j);if(G){for(A=0;A<G.length;A++)if(Array.isArray(G[A])){var ne=G[A];if(!(2>ne.length)){var Pe=ne[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var He=Pe[0];if(He!="noop"&&He!="stop"&&He!="close")for(var At=1;At<Pe.length;At++)Pe[At]=""}}}}return kn(G)}catch{return j}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function tr(){}p(tr,Tr),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},dn=new tr;function cr(A,j,G,ne){this.j=A,this.i=j,this.l=G,this.R=ne||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}var Cr={},ii={};function on(A,j,G){A.L=1,A.v=nr(lt(j)),A.m=G,A.P=!0,Ar(A,null)}function Ar(A,j){A.F=Date.now(),Ci(A),A.A=lt(A.v);var G=A.A,ne=A.R;Array.isArray(ne)||(ne=[String(ne)]),sb(G.i,"t",ne),A.C=0,G=A.j.J,A.h=new On,A.g=ND(A.j,G?j:null,!A.m),0<A.O&&(A.M=new Zn(d(A.Y,A,A.g),A.O)),j=A.U,G=A.g,ne=A.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(er[0]=Pe.toString()),Pe=er);for(var He=0;He<Pe.length;He++){var At=bt(G,Pe[He],ne||j.handleEvent,!1,j.h||j);if(!At)break;j.g[At.key]=At}j=A.H?I(A.H):{},A.m?(A.u||(A.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,j)):(A.u="GET",A.g.ea(A.A,A.u,null,j)),Yr(),pe(A.i,A.u,A.A,A.l,A.R,A.m)}cr.prototype.ca=function(A){A=A.target;const j=this.M;j&&yi(A)==3?j.j():this.Y(A)},cr.prototype.Y=function(A){try{if(A==this.g)e:{const fo=yi(this.g);var j=this.g.Ba();const vf=this.g.Z();if(!(3>fo)&&(fo!=3||this.g&&(this.h.h||this.g.oa()||Ao(this.g)))){this.J||fo!=4||j==7||(j==8||0>=vf?Yr(3):Yr(2)),Ai(this);var G=this.g.Z();this.X=G;t:if(Kr(this)){var ne=Ao(this.g);A="";var Pe=ne.length,He=yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),So(this);var At="";break t}this.h.i=new a.TextDecoder}for(j=0;j<Pe;j++)this.h.h=!0,A+=this.h.i.decode(ne[j],{stream:!(He&&j==Pe-1)});ne.length=0,this.h.g+=A,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=G==200,ae(this.i,this.u,this.A,this.l,this.R,fo,G),this.o){if(this.T&&!this.K){t:{if(this.g){var oi,Io=this.g;if((oi=Io.g?Io.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(oi)){var kr=oi;break t}}kr=null}if(G=kr)me(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,G);else{this.o=!1,this.s=3,Ti(12),Xi(this),So(this);break e}}if(this.P){G=!0;let wl;for(;!this.J&&this.C<At.length;)if(wl=vr(this,At),wl==ii){fo==4&&(this.s=4,Ti(14),G=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(wl==Cr){this.s=4,Ti(15),me(this.i,this.l,At,"[Invalid Chunk]"),G=!1;break}else me(this.i,this.l,wl,null),Qi(this,wl);if(Kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fo!=4||At.length!=0||this.h.h||(this.s=1,Ti(16),G=!1),this.o=this.o&&G,!G)me(this.i,this.l,At,"[Invalid Chunked Response]"),Xi(this),So(this);else if(0<At.length&&!this.W){this.W=!0;var hi=this.j;hi.g==this&&hi.ba&&!hi.M&&(hi.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),yf(hi),hi.M=!0,Ti(11))}}else me(this.i,this.l,At,null),Qi(this,At);fo==4&&Xi(this),this.o&&!this.J&&(fo==4?Mi(this.j,this):(this.o=!1,Ci(this)))}else kd(this.g),G==400&&0<At.indexOf("Unknown SID")?(this.s=3,Ti(12)):(this.s=0,Ti(13)),Xi(this),So(this)}}}catch{}finally{}};function Kr(A){return A.g?A.u=="GET"&&A.L!=2&&A.j.Ca:!1}function vr(A,j){var G=A.C,ne=j.indexOf(`
`,G);return ne==-1?ii:(G=Number(j.substring(G,ne)),isNaN(G)?Cr:(ne+=1,ne+G>j.length?ii:(j=j.slice(ne,ne+G),A.C=ne+G,j)))}cr.prototype.cancel=function(){this.J=!0,Xi(this)};function Ci(A){A.S=Date.now()+A.I,lo(A,A.I)}function lo(A,j){if(A.B!=null)throw Error("WatchDog timer not null");A.B=ba(d(A.ba,A),j)}function Ai(A){A.B&&(a.clearTimeout(A.B),A.B=null)}cr.prototype.ba=function(){this.B=null;const A=Date.now();0<=A-this.S?(Le(this.i,this.A),this.L!=2&&(Yr(),Ti(17)),Xi(this),this.s=2,So(this)):lo(this,this.S-A)};function So(A){A.j.G==0||A.J||Mi(A.j,A)}function Xi(A){Ai(A);var j=A.M;j&&typeof j.ma=="function"&&j.ma(),A.M=null,yr(A.U),A.g&&(j=A.g,A.g=null,j.abort(),j.ma())}function Qi(A,j){try{var G=A.j;if(G.G!=0&&(G.g==A||gf(G.h,A))){if(!A.K&&gf(G.h,A)&&G.G==3){try{var ne=G.Da.g.parse(j)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var Pe=ne;if(Pe[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<A.F)ay(G),ab(G);else break e;Tx(G),Ti(18)}}else G.za=Pe[1],0<G.za-G.T&&37500>Pe[2]&&G.F&&G.v==0&&!G.C&&(G.C=ba(d(G.Za,G),6e3));if(1>=_l(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else Nd(G,11)}else if((A.K||G.g==A)&&ay(G),!b(j))for(Pe=G.Da.g.parse(j),j=0;j<Pe.length;j++){let kr=Pe[j];if(G.T=kr[0],kr=kr[1],G.G==2)if(kr[0]=="c"){G.K=kr[1],G.ia=kr[2];const hi=kr[3];hi!=null&&(G.la=hi,G.j.info("VER="+G.la));const fo=kr[4];fo!=null&&(G.Aa=fo,G.j.info("SVER="+G.Aa));const vf=kr[5];vf!=null&&typeof vf=="number"&&0<vf&&(ne=1.5*vf,G.L=ne,G.j.info("backChannelRequestTimeoutMs_="+ne)),ne=G;const wl=A.g;if(wl){const db=wl.g?wl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(db){var He=ne.h;He.g||db.indexOf("spdy")==-1&&db.indexOf("quic")==-1&&db.indexOf("h2")==-1||(He.j=He.l,He.g=new Set,He.h&&(ee(He,He.h),He.h=null))}if(ne.D){const NA=wl.g?wl.g.getResponseHeader("X-HTTP-Session-Id"):null;NA&&(ne.ya=NA,Xt(ne.I,ne.D,NA))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-A.F,G.j.info("Handshake RTT: "+G.R+"ms")),ne=G;var At=A;if(ne.qa=Cx(ne,ne.J?ne.ia:null,ne.W),At.K){he(ne.h,At);var oi=At,Io=ne.L;Io&&(oi.I=Io),oi.B&&(Ai(oi),Ci(oi)),ne.g=At}else kD(ne);0<G.i.length&&ub(G)}else kr[0]!="stop"&&kr[0]!="close"||Nd(G,7);else G.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?Nd(G,7):Gm(G):kr[0]!="noop"&&G.l&&G.l.ta(kr),G.v=0)}}Yr(4)}catch{}}var To=class{constructor(A,j){this.g=A,this.map=j}};function _a(A){this.l=A||10,a.PerformanceNavigationTiming?(A=a.performance.getEntriesByType("navigation"),A=0<A.length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function co(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function _l(A){return A.h?1:A.g?A.g.size:0}function gf(A,j){return A.h?A.h==j:A.g?A.g.has(j):!1}function ee(A,j){A.g?A.g.add(j):A.h=j}function he(A,j){A.h&&A.h==j?A.h=null:A.g&&A.g.has(j)&&A.g.delete(j)}_a.prototype.cancel=function(){if(this.i=se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function se(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let j=A.i;for(const G of A.g.values())j=j.concat(G.D);return j}return m(A.i)}function we(A){if(A.V&&typeof A.V=="function")return A.V();if(typeof Map<"u"&&A instanceof Map||typeof Set<"u"&&A instanceof Set)return Array.from(A.values());if(typeof A=="string")return A.split("");if(u(A)){for(var j=[],G=A.length,ne=0;ne<G;ne++)j.push(A[ne]);return j}j=[],G=0;for(ne in A)j[G++]=A[ne];return j}function Ie(A){if(A.na&&typeof A.na=="function")return A.na();if(!A.V||typeof A.V!="function"){if(typeof Map<"u"&&A instanceof Map)return Array.from(A.keys());if(!(typeof Set<"u"&&A instanceof Set)){if(u(A)||typeof A=="string"){var j=[];A=A.length;for(var G=0;G<A;G++)j.push(G);return j}j=[],G=0;for(const ne in A)j[G++]=ne;return j}}}function ve(A,j){if(A.forEach&&typeof A.forEach=="function")A.forEach(j,void 0);else if(u(A)||typeof A=="string")Array.prototype.forEach.call(A,j,void 0);else for(var G=Ie(A),ne=we(A),Pe=ne.length,He=0;He<Pe;He++)j.call(void 0,ne[He],G&&G[He],A)}var We=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(A,j){if(A){A=A.split("&");for(var G=0;G<A.length;G++){var ne=A[G].indexOf("="),Pe=null;if(0<=ne){var He=A[G].substring(0,ne);Pe=A[G].substring(ne+1)}else He=A[G];j(He,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function ut(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof ut){this.h=A.h,yt(this,A.j),this.o=A.o,this.g=A.g,Lt(this,A.s),this.l=A.l;var j=A.i,G=new Du;G.i=j.i,j.g&&(G.g=new Map(j.g),G.h=j.h),$n(this,G),this.m=A.m}else A&&(j=String(A).match(We))?(this.h=!1,yt(this,j[1]||"",!0),this.o=Ur(j[2]||""),this.g=Ur(j[3]||"",!0),Lt(this,j[4]),this.l=Ur(j[5]||"",!0),$n(this,j[6]||"",!0),this.m=Ur(j[7]||"")):(this.h=!1,this.i=new Du(null,this.h))}ut.prototype.toString=function(){var A=[],j=this.j;j&&A.push(br(j,xc,!0),":");var G=this.g;return(G||j=="file")&&(A.push("//"),(j=this.o)&&A.push(br(j,xc,!0),"@"),A.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&A.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&A.push("/"),A.push(br(G,G.charAt(0)=="/"?sy:Td,!0))),(G=this.i.toString())&&A.push("?",G),(G=this.m)&&A.push("#",br(G,ib)),A.join("")};function lt(A){return new ut(A)}function yt(A,j,G){A.j=G?Ur(j,!0):j,A.j&&(A.j=A.j.replace(/:$/,""))}function Lt(A,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);A.s=j}else A.s=null}function $n(A,j,G){j instanceof Du?(A.i=j,ob(A.i,A.h)):(G||(j=br(j,Zh)),A.i=new Du(j,A.h))}function Xt(A,j,G){A.i.set(j,G)}function nr(A){return Xt(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function Ur(A,j){return A?j?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function br(A,j,G){return typeof A=="string"?(A=encodeURI(A).replace(j,Co),G&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Co(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var xc=/[#\/\?@]/g,Td=/[#\?:]/g,sy=/[#\?]/g,Zh=/[#\?@]/g,ib=/#/g;function Du(A,j){this.h=this.g=null,this.i=A||null,this.j=!!j}function Wa(A){A.g||(A.g=new Map,A.h=0,A.i&&it(A.i,function(j,G){A.add(decodeURIComponent(j.replace(/\+/g," ")),G)}))}e=Du.prototype,e.add=function(A,j){Wa(this),this.i=null,A=Ad(this,A);var G=this.g.get(A);return G||this.g.set(A,G=[]),G.push(j),this.h+=1,this};function Cd(A,j){Wa(A),j=Ad(A,j),A.g.has(j)&&(A.i=null,A.h-=A.g.get(j).length,A.g.delete(j))}function oy(A,j){return Wa(A),j=Ad(A,j),A.g.has(j)}e.forEach=function(A,j){Wa(this),this.g.forEach(function(G,ne){G.forEach(function(Pe){A.call(j,Pe,ne,this)},this)},this)},e.na=function(){Wa(this);const A=Array.from(this.g.values()),j=Array.from(this.g.keys()),G=[];for(let ne=0;ne<j.length;ne++){const Pe=A[ne];for(let He=0;He<Pe.length;He++)G.push(j[ne])}return G},e.V=function(A){Wa(this);let j=[];if(typeof A=="string")oy(this,A)&&(j=j.concat(this.g.get(Ad(this,A))));else{A=Array.from(this.g.values());for(let G=0;G<A.length;G++)j=j.concat(A[G])}return j},e.set=function(A,j){return Wa(this),this.i=null,A=Ad(this,A),oy(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[j]),this.h+=1,this},e.get=function(A,j){return A?(A=this.V(A),0<A.length?String(A[0]):j):j};function sb(A,j,G){Cd(A,j),0<G.length&&(A.i=null,A.g.set(Ad(A,j),m(G)),A.h+=G.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],j=Array.from(this.g.keys());for(var G=0;G<j.length;G++){var ne=j[G];const He=encodeURIComponent(String(ne)),At=this.V(ne);for(ne=0;ne<At.length;ne++){var Pe=He;At[ne]!==""&&(Pe+="="+encodeURIComponent(String(At[ne]))),A.push(Pe)}}return this.i=A.join("&")};function Ad(A,j){return j=String(j),A.j&&(j=j.toLowerCase()),j}function ob(A,j){j&&!A.j&&(Wa(A),A.i=null,A.g.forEach(function(G,ne){var Pe=ne.toLowerCase();ne!=Pe&&(Cd(this,ne),sb(this,Pe,G))},A)),A.j=j}function wx(A,j){const G=new Eo;if(a.Image){const ne=new Image;ne.onload=h(Xo,G,"TestLoadImage: loaded",!0,j,ne),ne.onerror=h(Xo,G,"TestLoadImage: error",!1,j,ne),ne.onabort=h(Xo,G,"TestLoadImage: abort",!1,j,ne),ne.ontimeout=h(Xo,G,"TestLoadImage: timeout",!1,j,ne),a.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=A}else j(!1)}function Id(A,j){const G=new Eo,ne=new AbortController,Pe=setTimeout(()=>{ne.abort(),Xo(G,"TestPingServer: timeout",!1,j)},1e4);fetch(A,{signal:ne.signal}).then(He=>{clearTimeout(Pe),He.ok?Xo(G,"TestPingServer: ok",!0,j):Xo(G,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Pe),Xo(G,"TestPingServer: error",!1,j)})}function Xo(A,j,G,ne,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),ne(G)}catch{}}function kA(){this.g=new pr}function xx(A,j,G){const ne=G||"";try{ve(A,function(Pe,He){let At=Pe;l(Pe)&&(At=kn(Pe)),j.push(ne+He+"="+encodeURIComponent(At))})}catch(Pe){throw j.push(ne+"type="+encodeURIComponent("_badmap")),Pe}}function Hm(A){this.l=A.Ub||null,this.j=A.eb||!1}p(Hm,Tr),Hm.prototype.g=function(){return new qm(this.l,this.j)},Hm.prototype.i=function(A){return function(){return A}}({});function qm(A,j){Te.call(this),this.D=A,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(qm,Te),e=qm.prototype,e.open=function(A,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=j,this.readyState=1,Ir(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(j.body=A),(this.D||a).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},e.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ex(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ex(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}e.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var j=A.value?A.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!A.done}))&&(this.response=this.responseText+=j)}A.done?zr(this):Ir(this),this.readyState==3&&Ex(this)}},e.Ra=function(A){this.g&&(this.response=this.responseText=A,zr(this))},e.Qa=function(A){this.g&&(this.response=A,zr(this))},e.ga=function(){this.g&&zr(this)};function zr(A){A.readyState=4,A.l=null,A.j=null,A.v=null,Ir(A)}e.setRequestHeader=function(A,j){this.u.append(A,j)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],j=this.h.entries();for(var G=j.next();!G.done;)G=G.value,A.push(G[0]+": "+G[1]),G=j.next();return A.join(`\r
`)};function Ir(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function Sx(A){let j="";return T(A,function(G,ne){j+=ne,j+=":",j+=G,j+=`\r
`}),j}function le(A,j,G){e:{for(ne in G){var ne=!1;break e}ne=!0}ne||(G=Sx(G),typeof A=="string"?G!=null&&encodeURIComponent(String(G)):Xt(A,j,G))}function ge(A){Te.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ge,Te);var Ue=/^https?$/i,qt=["POST","PUT"];e=ge.prototype,e.Ha=function(A){this.J=A},e.ea=function(A,j,G,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);j=j?j.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?Yo(this.o):Yo(dn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(j,String(A),!0),this.B=!1}catch(He){or(this,He);return}if(A=G||"",G=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var Pe in ne)G.set(Pe,ne[Pe]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const He of ne.keys())G.set(He,ne.get(He));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(G.keys()).find(He=>He.toLowerCase()=="content-type"),Pe=a.FormData&&A instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qt,j,void 0))||ne||Pe||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,At]of G)this.g.setRequestHeader(He,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{si(this),this.u=!0,this.g.send(A),this.u=!1}catch(He){or(this,He)}};function or(A,j){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=j,A.m=5,Vr(A),an(A)}function Vr(A){A.A||(A.A=!0,$e(A,"complete"),$e(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,$e(this,"complete"),$e(this,"abort"),an(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),an(this,!0)),ge.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gi(this):this.bb())},e.bb=function(){gi(this)};function gi(A){if(A.h&&typeof o<"u"&&(!A.v[1]||yi(A)!=4||A.Z()!=2)){if(A.u&&yi(A)==4)St(A.Ea,0,A);else if($e(A,"readystatechange"),yi(A)==4){A.h=!1;try{const At=A.Z();e:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var G;if(!(G=j)){var ne;if(ne=At===0){var Pe=String(A.D).match(We)[1]||null;!Pe&&a.self&&a.self.location&&(Pe=a.self.location.protocol.slice(0,-1)),ne=!Ue.test(Pe?Pe.toLowerCase():"")}G=ne}if(G)$e(A,"complete"),$e(A,"success");else{A.m=6;try{var He=2<yi(A)?A.g.statusText:""}catch{He=""}A.l=He+" ["+A.Z()+"]",Vr(A)}}finally{an(A)}}}}function an(A,j){if(A.g){si(A);const G=A.g,ne=A.v[0]?()=>{}:null;A.g=null,A.v=null,j||$e(A,"ready");try{G.onreadystatechange=ne}catch{}}}function si(A){A.I&&(a.clearTimeout(A.I),A.I=null)}e.isActive=function(){return!!this.g};function yi(A){return A.g?A.g.readyState:0}e.Z=function(){try{return 2<yi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(A){if(this.g){var j=this.g.responseText;return A&&j.indexOf(A)==0&&(j=j.substring(A.length)),Un(j)}};function Ao(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function kd(A){const j={};A=(A.g&&2<=yi(A)&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<A.length;ne++){if(b(A[ne]))continue;var G=D(A[ne]);const Pe=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const He=j[Pe]||[];j[Pe]=He,He.push(G)}C(j,function(ne){return ne.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(A,j,G){return G&&G.internalChannelParams&&G.internalChannelParams[A]||j}function Wm(A){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,A),this.cb=Ps("retryDelaySeedMs",1e4,A),this.Wa=Ps("forwardChannelMaxRetries",2,A),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new _a(A&&A.concurrentRequestLimit),this.Da=new kA,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Wm.prototype,e.la=8,e.G=1,e.connect=function(A,j,G,ne){Ti(0),this.W=A,this.H=j||{},G&&ne!==void 0&&(this.H.OSID=G,this.H.OAID=ne),this.F=this.X,this.I=Cx(this,null,this.W),ub(this)};function Gm(A){if(RA(A),A.G==3){var j=A.U++,G=lt(A.I);if(Xt(G,"SID",A.K),Xt(G,"RID",j),Xt(G,"TYPE","terminate"),lb(A,G),j=new cr(A,A.j,j),j.L=2,j.v=nr(lt(G)),G=!1,a.navigator&&a.navigator.sendBeacon)try{G=a.navigator.sendBeacon(j.v.toString(),"")}catch{}!G&&a.Image&&(new Image().src=j.v,G=!0),G||(j.g=ND(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Ci(j)}RD(A)}function ab(A){A.g&&(yf(A),A.g.cancel(),A.g=null)}function RA(A){ab(A),A.u&&(a.clearTimeout(A.u),A.u=null),ay(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&a.clearTimeout(A.s),A.s=null)}function ub(A){if(!co(A.h)&&!A.s){A.s=!0;var j=A.Ga;H||$(),q||(H(),q=!0),Y.add(j,A),A.B=0}}function ID(A,j){return _l(A.h)>=A.h.j-(A.s?1:0)?!1:A.s?(A.i=j.D.concat(A.i),!0):A.G==1||A.G==2||A.B>=(A.Va?0:A.Wa)?!1:(A.s=ba(d(A.Ga,A,j),Rd(A,A.B)),A.B++,!0)}e.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;const Pe=new cr(this,this.j,A);let He=this.o;if(this.S&&(He?(He=I(He),P(He,this.S)):He=this.S),this.m!==null||this.O||(Pe.H=He,He=null),this.P)e:{for(var j=0,G=0;G<this.i.length;G++){t:{var ne=this.i[G];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(j+=ne,4096<j){j=G;break e}if(j===4096||G===this.i.length-1){j=G+1;break e}}j=1e3}else j=1e3;j=Ou(this,Pe,j),G=lt(this.I),Xt(G,"RID",A),Xt(G,"CVER",22),this.D&&Xt(G,"X-HTTP-Session-Id",this.D),lb(this,G),He&&(this.O?j="headers="+encodeURIComponent(String(Sx(He)))+"&"+j:this.m&&le(G,this.m,He)),ee(this.h,Pe),this.Ua&&Xt(G,"TYPE","init"),this.P?(Xt(G,"$req",j),Xt(G,"SID","null"),Pe.T=!0,on(Pe,G,null)):on(Pe,G,j),this.G=2}}else this.G==3&&(A?Ga(this,A):this.i.length==0||co(this.h)||Ga(this))};function Ga(A,j){var G;j?G=j.l:G=A.U++;const ne=lt(A.I);Xt(ne,"SID",A.K),Xt(ne,"RID",G),Xt(ne,"AID",A.T),lb(A,ne),A.m&&A.o&&le(ne,A.m,A.o),G=new cr(A,A.j,G,A.B+1),A.m===null&&(G.H=A.o),j&&(A.i=j.D.concat(A.i)),j=Ou(A,G,1e3),G.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),ee(A.h,G),on(G,ne,j)}function lb(A,j){A.H&&T(A.H,function(G,ne){Xt(j,ne,G)}),A.l&&ve({},function(G,ne){Xt(j,ne,G)})}function Ou(A,j,G){G=Math.min(A.i.length,G);var ne=A.l?d(A.l.Na,A.l,A):null;e:{var Pe=A.i;let He=-1;for(;;){const At=["count="+G];He==-1?0<G?(He=Pe[0].g,At.push("ofs="+He)):He=0:At.push("ofs="+He);let oi=!0;for(let Io=0;Io<G;Io++){let kr=Pe[Io].g;const hi=Pe[Io].map;if(kr-=He,0>kr)He=Math.max(0,Pe[Io].g-100),oi=!1;else try{xx(hi,At,"req"+kr+"_")}catch{ne&&ne(hi)}}if(oi){ne=At.join("&");break e}}}return A=A.i.splice(0,G),j.D=A,ne}function kD(A){if(!A.g&&!A.u){A.Y=1;var j=A.Fa;H||$(),q||(H(),q=!0),Y.add(j,A),A.v=0}}function Tx(A){return A.g||A.u||3<=A.v?!1:(A.Y++,A.u=ba(d(A.Fa,A),Rd(A,A.v)),A.v++,!0)}e.Fa=function(){if(this.u=null,cb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=ba(d(this.ab,this),A)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ti(10),ab(this),cb(this))};function yf(A){A.A!=null&&(a.clearTimeout(A.A),A.A=null)}function cb(A){A.g=new cr(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var j=lt(A.qa);Xt(j,"RID","rpc"),Xt(j,"SID",A.K),Xt(j,"AID",A.T),Xt(j,"CI",A.F?"0":"1"),!A.F&&A.ja&&Xt(j,"TO",A.ja),Xt(j,"TYPE","xmlhttp"),lb(A,j),A.m&&A.o&&le(j,A.m,A.o),A.L&&(A.g.I=A.L);var G=A.g;A=A.ia,G.L=1,G.v=nr(lt(j)),G.m=null,G.P=!0,Ar(G,A)}e.Za=function(){this.C!=null&&(this.C=null,ab(this),Tx(this),Ti(19))};function ay(A){A.C!=null&&(a.clearTimeout(A.C),A.C=null)}function Mi(A,j){var G=null;if(A.g==j){ay(A),yf(A),A.g=null;var ne=2}else if(gf(A.h,j))G=j.D,he(A.h,j),ne=1;else return;if(A.G!=0){if(j.o)if(ne==1){G=j.m?j.m.length:0,j=Date.now()-j.F;var Pe=A.B;ne=Pu(),$e(ne,new Ko(ne,G)),ub(A)}else kD(A);else if(Pe=j.s,Pe==3||Pe==0&&0<j.X||!(ne==1&&ID(A,j)||ne==2&&Tx(A)))switch(G&&0<G.length&&(j=A.h,j.i=j.i.concat(G)),Pe){case 1:Nd(A,5);break;case 4:Nd(A,10);break;case 3:Nd(A,6);break;default:Nd(A,2)}}}function Rd(A,j){let G=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||(G*=2),G*j}function Nd(A,j){if(A.j.info("Error code "+j),j==2){var G=d(A.fb,A),ne=A.Xa;const Pe=!ne;ne=new ut(ne||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yt(ne,"https"),nr(ne),Pe?wx(ne.toString(),G):Id(ne.toString(),G)}else Ti(2);A.G=0,A.l&&A.l.sa(j),RD(A),RA(A)}e.fb=function(A){A?(this.j.info("Successfully pinged google.com"),Ti(2)):(this.j.info("Failed to ping google.com"),Ti(1))};function RD(A){if(A.G=0,A.ka=[],A.l){const j=se(A.h);(j.length!=0||A.i.length!=0)&&(g(A.ka,j),g(A.ka,A.i),A.h.i.length=0,m(A.i),A.i.length=0),A.l.ra()}}function Cx(A,j,G){var ne=G instanceof ut?lt(G):new ut(G);if(ne.g!="")j&&(ne.g=j+"."+ne.g),Lt(ne,ne.s);else{var Pe=a.location;ne=Pe.protocol,j=j?j+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var He=new ut(null);ne&&yt(He,ne),j&&(He.g=j),Pe&&Lt(He,Pe),G&&(He.l=G),ne=He}return G=A.D,j=A.ya,G&&j&&Xt(ne,G,j),Xt(ne,"VER",A.la),lb(A,ne),ne}function ND(A,j,G){if(j&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=A.Ca&&!A.pa?new ge(new Hm({eb:G})):new ge(A.pa),j.Ha(A.J),j}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function PD(){}e=PD.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ax(){}Ax.prototype.g=function(A,j){return new Ya(A,j)};function Ya(A,j){Te.call(this),this.g=new Wm(j),this.l=A,this.h=j&&j.messageUrlParams||null,A=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(A?A["X-WebChannel-Content-Type"]=j.messageContentType:A={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(A?A["X-WebChannel-Client-Profile"]=j.va:A={"X-WebChannel-Client-Profile":j.va}),this.g.S=A,(A=j&&j.Sb)&&!b(A)&&(this.g.m=A),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!b(j)&&(this.g.D=j,A=this.h,A!==null&&j in A&&(A=this.h,j in A&&delete A[j])),this.j=new uy(this)}p(Ya,Te),Ya.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ya.prototype.close=function(){Gm(this.g)},Ya.prototype.o=function(A){var j=this.g;if(typeof A=="string"){var G={};G.__data__=A,A=G}else this.u&&(G={},G.__data__=kn(A),A=G);j.i.push(new To(j.Ya++,A)),j.G==3&&ub(j)},Ya.prototype.N=function(){this.g.l=null,delete this.j,Gm(this.g),delete this.g,Ya.aa.N.call(this)};function fb(A){Yi.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var j=A.__sm__;if(j){e:{for(const G in j){A=G;break e}A=void 0}(this.i=A)&&(A=this.i,j=j!==null&&A in j?j[A]:void 0),this.data=j}else this.data=A}p(fb,Yi);function Ym(){ri.call(this),this.status=1}p(Ym,ri);function uy(A){this.g=A}p(uy,PD),uy.prototype.ua=function(){$e(this.g,"a")},uy.prototype.ta=function(A){$e(this.g,new fb(A))},uy.prototype.sa=function(A){$e(this.g,new Ym)},uy.prototype.ra=function(){$e(this.g,"b")},Ax.prototype.createWebChannel=Ax.prototype.g,Ya.prototype.send=Ya.prototype.o,Ya.prototype.open=Ya.prototype.m,Ya.prototype.close=Ya.prototype.close,vLe=function(){return new Ax},yLe=function(){return Pu()},gLe=Ns,UG={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,eM=wt,Ut.COMPLETE="complete",mLe=Ut,us.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",Te.prototype.listen=Te.prototype.K,bI=us,pLe=Hm,ge.prototype.listenOnce=ge.prototype.L,ge.prototype.getLastError=ge.prototype.Ka,ge.prototype.getLastErrorCode=ge.prototype.Ba,ge.prototype.getStatus=ge.prototype.Z,ge.prototype.getResponseJson=ge.prototype.Oa,ge.prototype.getResponseText=ge.prototype.oa,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Ha,hLe=ge}).apply(typeof C3<"u"?C3:typeof self<"u"?self:typeof window<"u"?window:{});const ove="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Nl.UNAUTHENTICATED=new Nl(null),Nl.GOOGLE_CREDENTIALS=new Nl("google-credentials-uid"),Nl.FIRST_PARTY=new Nl("first-party-uid"),Nl.MOCK_USER=new Nl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iA="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new jj("@firebase/firestore");function S2(){return hw.logLevel}function Yt(e,...t){if(hw.logLevel<=Pr.DEBUG){const n=t.map(nre);hw.debug(`Firestore (${iA}): ${e}`,...n)}}function A0(e,...t){if(hw.logLevel<=Pr.ERROR){const n=t.map(nre);hw.error(`Firestore (${iA}): ${e}`,...n)}}function QR(e,...t){if(hw.logLevel<=Pr.WARN){const n=t.map(nre);hw.warn(`Firestore (${iA}): ${e}`,...n)}}function nre(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(e="Unexpected state"){const t=`FIRESTORE (${iA}) INTERNAL ASSERTION FAILED: `+e;throw A0(t),new Error(t)}function qi(e,t){e||Pn()}function Bn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ft extends Dm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class P7t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Nl.UNAUTHENTICATED))}shutdown(){}}class D7t{constructor(t){this.t=t,this.currentUser=Nl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Qg;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qg,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qg)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qi(typeof r.accessToken=="string"),new N7t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return qi(t===null||typeof t=="string"),new Nl(t)}}class O7t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Nl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $7t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new O7t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Nl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M7t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L7t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Yt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(qi(typeof n.token=="string"),this.R=n.token,new M7t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bLe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=F7t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function ui(e,t){return e<t?-1:e>t?1:0}function PT(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ft(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ft(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ft(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ft(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Uo.fromMillis(Date.now())}static fromDate(t){return Uo.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Uo(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ui(this.nanoseconds,t.nanoseconds):ui(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new jn(t)}static min(){return new jn(new Uo(0,0))}static max(){return new jn(new Uo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t,n,r){n===void 0?n=0:n>t.length&&Pn(),r===void 0?r=t.length-n:r>t.length-n&&Pn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return JR.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof JR?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ts extends JR{construct(t,n,r){return new ts(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ft(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ts(n)}static emptyPath(){return new ts([])}}const j7t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pa extends JR{construct(t,n,r){return new Pa(t,n,r)}static isValidIdentifier(t){return j7t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pa.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pa(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ft(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ft(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ft(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ft(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pa(n)}static emptyPath(){return new Pa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.path=t}static fromPath(t){return new cn(ts.fromString(t))}static fromName(t){return new cn(ts.fromString(t).popFirst(5))}static empty(){return new cn(ts.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ts.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ts.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new cn(new ts(t.slice()))}}function B7t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=jn.fromTimestamp(r===1e9?new Uo(n+1,0):new Uo(n,r));return new o1(i,cn.empty(),t)}function U7t(e){return new o1(e.readTime,e.key,-1)}class o1{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new o1(jn.min(),cn.empty(),-1)}static max(){return new o1(jn.max(),cn.empty(),-1)}}function z7t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=cn.comparator(e.documentKey,t.documentKey),n!==0?n:ui(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H7t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(e){if(e.code!==nt.FAILED_PRECONDITION||e.message!==V7t)throw e;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ht((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ht?n:ht.resolve(n)}catch(n){return ht.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ht.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ht.reject(n)}static resolve(t){return new ht((n,r)=>{n(t)})}static reject(t){return new ht((n,r)=>{r(t)})}static waitFor(t){return new ht((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=ht.resolve(!1);for(const r of t)n=n.next(i=>i?ht.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new ht((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new ht((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function q7t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $P(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}rre.oe=-1;function Wj(e){return e==null}function dF(e){return e===0&&1/e==-1/0}function W7t(e){return typeof e=="number"&&Number.isInteger(e)&&!dF(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ave(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nx(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _Le(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(t,n){this.comparator=t,this.root=n||ka.EMPTY}insert(t,n){return new Rs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ka.BLACK,null,null))}remove(t){return new Rs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ka.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new A3(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new A3(this.root,t,this.comparator,!1)}getReverseIterator(){return new A3(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new A3(this.root,t,this.comparator,!0)}}class A3{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ka{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??ka.RED,this.left=i??ka.EMPTY,this.right=s??ka.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new ka(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ka.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ka.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ka.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ka.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pn();const t=this.left.check();if(t!==this.right.check())throw Pn();return t+(this.isRed()?0:1)}}ka.EMPTY=null,ka.RED=!0,ka.BLACK=!1;ka.EMPTY=new class{constructor(){this.size=0}get key(){throw Pn()}get value(){throw Pn()}get color(){throw Pn()}get left(){throw Pn()}get right(){throw Pn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new ka(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.comparator=t,this.data=new Rs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new uve(this.data.getIterator())}getIteratorFrom(t){return new uve(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Fa)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Fa(this.comparator);return n.data=t,n}}class uve{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t){this.fields=t,t.sort(Pa.comparator)}static empty(){return new Uc([])}unionWith(t){let n=new Fa(Pa.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Uc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return PT(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wLe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wLe("Invalid base64 string: "+s):s}}(t);return new Cu(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Cu(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ui(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cu.EMPTY_BYTE_STRING=new Cu("");const G7t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function a1(e){if(qi(!!e),typeof e=="string"){let t=0;const n=G7t.exec(e);if(qi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:go(e.seconds),nanos:go(e.nanos)}}function go(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function pw(e){return typeof e=="string"?Cu.fromBase64String(e):Cu.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ire(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sre(e){const t=e.mapValue.fields.__previous_value__;return ire(t)?sre(t):t}function ZR(e){const t=a1(e.mapValue.fields.__local_write_time__.timestampValue);return new Uo(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class eN{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new eN("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof eN&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ire(e)?4:K7t(e)?9007199254740991:10:Pn()}function gm(e,t){if(e===t)return!0;const n=mw(e);if(n!==mw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ZR(e).isEqual(ZR(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=a1(i.timestampValue),a=a1(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return pw(i.bytesValue).isEqual(pw(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return go(i.geoPointValue.latitude)===go(s.geoPointValue.latitude)&&go(i.geoPointValue.longitude)===go(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return go(i.integerValue)===go(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=go(i.doubleValue),a=go(s.doubleValue);return o===a?dF(o)===dF(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return PT(e.arrayValue.values||[],t.arrayValue.values||[],gm);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ave(o)!==ave(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!gm(o[u],a[u])))return!1;return!0}(e,t);default:return Pn()}}function tN(e,t){return(e.values||[]).find(n=>gm(n,t))!==void 0}function DT(e,t){if(e===t)return 0;const n=mw(e),r=mw(t);if(n!==r)return ui(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ui(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=go(s.integerValue||s.doubleValue),u=go(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return lve(e.timestampValue,t.timestampValue);case 4:return lve(ZR(e),ZR(t));case 5:return ui(e.stringValue,t.stringValue);case 6:return function(s,o){const a=pw(s),u=pw(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=ui(a[l],u[l]);if(c!==0)return c}return ui(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=ui(go(s.latitude),go(o.latitude));return a!==0?a:ui(go(s.longitude),go(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=DT(a[l],u[l]);if(c)return c}return ui(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===I3.mapValue&&o===I3.mapValue)return 0;if(s===I3.mapValue)return 1;if(o===I3.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=ui(u[f],c[f]);if(d!==0)return d;const h=DT(a[u[f]],l[c[f]]);if(h!==0)return h}return ui(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Pn()}}function lve(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ui(e,t);const n=a1(e),r=a1(t),i=ui(n.seconds,r.seconds);return i!==0?i:ui(n.nanos,r.nanos)}function OT(e){return zG(e)}function zG(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=a1(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return pw(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return cn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=zG(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${zG(n.fields[o])}`;return i+"}"}(e.mapValue):Pn()}function cve(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function VG(e){return!!e&&"integerValue"in e}function ore(e){return!!e&&"arrayValue"in e}function fve(e){return!!e&&"nullValue"in e}function dve(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tM(e){return!!e&&"mapValue"in e}function Sk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nx(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Sk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Sk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function K7t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t){this.value=t}static empty(){return new zl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!tM(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Sk(n)}setAll(t){let n=Pa.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Sk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());tM(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gm(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];tM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){nx(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new zl(Sk(this.value))}}function xLe(e){const t=[];return nx(e.fields,(n,r)=>{const i=new Pa([n]);if(tM(r)){const s=xLe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Uc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new du(t,0,jn.min(),jn.min(),jn.min(),zl.empty(),0)}static newFoundDocument(t,n,r,i){return new du(t,1,n,jn.min(),r,i,0)}static newNoDocument(t,n){return new du(t,2,n,jn.min(),jn.min(),zl.empty(),0)}static newUnknownDocument(t,n){return new du(t,3,n,jn.min(),jn.min(),zl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(jn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof du&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new du(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hF=class{constructor(t,n){this.position=t,this.inclusive=n}};function hve(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=cn.comparator(cn.fromName(o.referenceValue),n.key):r=DT(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pve(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gm(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t,n="asc"){this.field=t,this.dir=n}}function X7t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ELe=class{};class vo extends ELe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new J7t(t,n,r):n==="array-contains"?new tzt(t,r):n==="in"?new nzt(t,r):n==="not-in"?new rzt(t,r):n==="array-contains-any"?new izt(t,r):new vo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Z7t(t,r):new ezt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(DT(n,this.value)):n!==null&&mw(this.value)===mw(n)&&this.matchesComparison(DT(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nh extends ELe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Nh(t,n)}matches(t){return SLe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function SLe(e){return e.op==="and"}function TLe(e){return Q7t(e)&&SLe(e)}function Q7t(e){for(const t of e.filters)if(t instanceof Nh)return!1;return!0}function HG(e){if(e instanceof vo)return e.field.canonicalString()+e.op.toString()+OT(e.value);if(TLe(e))return e.filters.map(t=>HG(t)).join(",");{const t=e.filters.map(n=>HG(n)).join(",");return`${e.op}(${t})`}}function CLe(e,t){return e instanceof vo?function(r,i){return i instanceof vo&&r.op===i.op&&r.field.isEqual(i.field)&&gm(r.value,i.value)}(e,t):e instanceof Nh?function(r,i){return i instanceof Nh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CLe(o,i.filters[a]),!0):!1}(e,t):void Pn()}function ALe(e){return e instanceof vo?function(n){return`${n.field.canonicalString()} ${n.op} ${OT(n.value)}`}(e):e instanceof Nh?function(n){return n.op.toString()+" {"+n.getFilters().map(ALe).join(" ,")+"}"}(e):"Filter"}class J7t extends vo{constructor(t,n,r){super(t,n,r),this.key=cn.fromName(r.referenceValue)}matches(t){const n=cn.comparator(t.key,this.key);return this.matchesComparison(n)}}class Z7t extends vo{constructor(t,n){super(t,"in",n),this.keys=ILe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class ezt extends vo{constructor(t,n){super(t,"not-in",n),this.keys=ILe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ILe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>cn.fromName(r.referenceValue))}class tzt extends vo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ore(n)&&tN(n.arrayValue,this.value)}}class nzt extends vo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&tN(this.value.arrayValue,n)}}class rzt extends vo{constructor(t,n){super(t,"not-in",n)}matches(t){if(tN(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!tN(this.value.arrayValue,n)}}class izt extends vo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ore(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tN(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class szt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function mve(e,t=null,n=[],r=[],i=null,s=null,o=null){return new szt(e,t,n,r,i,s,o)}function are(e){const t=Bn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>HG(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wj(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>OT(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>OT(r)).join(",")),t.ue=n}return t.ue}function ure(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!X7t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!CLe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pve(e.startAt,t.startAt)&&pve(e.endAt,t.endAt)}function qG(e){return cn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ozt(e,t,n,r,i,s,o,a){return new sA(e,t,n,r,i,s,o,a)}function lre(e){return new sA(e)}function gve(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function kLe(e){return e.collectionGroup!==null}function Tk(e){const t=Bn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fa(Pa.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new nN(s,r))}),n.has(Pa.keyField().canonicalString())||t.ce.push(new nN(Pa.keyField(),r))}return t.ce}function Jp(e){const t=Bn(e);return t.le||(t.le=azt(t,Tk(e))),t.le}function azt(e,t){if(e.limitType==="F")return mve(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new nN(i.field,s)});const n=e.endAt?new hF(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new hF(e.startAt.position,e.startAt.inclusive):null;return mve(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function WG(e,t){const n=e.filters.concat([t]);return new sA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function GG(e,t,n){return new sA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gj(e,t){return ure(Jp(e),Jp(t))&&e.limitType===t.limitType}function RLe(e){return`${are(Jp(e))}|lt:${e.limitType}`}function SE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ALe(i)).join(", ")}]`),Wj(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>OT(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>OT(i)).join(",")),`Target(${r})`}(Jp(e))}; limitType=${e.limitType})`}function Yj(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):cn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Tk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=hve(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Tk(r),i)||r.endAt&&!function(o,a,u){const l=hve(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Tk(r),i))}(e,t)}function uzt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function NLe(e){return(t,n)=>{let r=!1;for(const i of Tk(e)){const s=lzt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lzt(e,t,n){const r=e.field.isKeyField()?cn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?DT(u,l):Pn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){nx(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return _Le(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const czt=new Rs(cn.comparator);function I0(){return czt}const PLe=new Rs(cn.comparator);function _I(...e){let t=PLe;for(const n of e)t=t.insert(n.key,n);return t}function DLe(e){let t=PLe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function C_(){return Ck()}function OLe(){return Ck()}function Ck(){return new oA(e=>e.toString(),(e,t)=>e.isEqual(t))}const fzt=new Rs(cn.comparator),dzt=new Fa(cn.comparator);function wr(...e){let t=dzt;for(const n of e)t=t.add(n);return t}const hzt=new Fa(ui);function pzt(){return hzt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Le(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dF(t)?"-0":t}}function MLe(e){return{integerValue:""+e}}function mzt(e,t){return W7t(t)?MLe(t):$Le(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this._=void 0}}function gzt(e,t,n){return e instanceof rN?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ire(s)&&(s=sre(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof iN?FLe(e,t):e instanceof sN?jLe(e,t):function(i,s){const o=LLe(i,s),a=yve(o)+yve(i.Pe);return VG(o)&&VG(i.Pe)?MLe(a):$Le(i.serializer,a)}(e,t)}function yzt(e,t,n){return e instanceof iN?FLe(e,t):e instanceof sN?jLe(e,t):n}function LLe(e,t){return e instanceof pF?function(r){return VG(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class rN extends Kj{}class iN extends Kj{constructor(t){super(),this.elements=t}}function FLe(e,t){const n=BLe(t);for(const r of e.elements)n.some(i=>gm(i,r))||n.push(r);return{arrayValue:{values:n}}}class sN extends Kj{constructor(t){super(),this.elements=t}}function jLe(e,t){let n=BLe(t);for(const r of e.elements)n=n.filter(i=>!gm(i,r));return{arrayValue:{values:n}}}class pF extends Kj{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function yve(e){return go(e.integerValue||e.doubleValue)}function BLe(e){return ore(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vzt{constructor(t,n){this.field=t,this.transform=n}}function bzt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof iN&&i instanceof iN||r instanceof sN&&i instanceof sN?PT(r.elements,i.elements,gm):r instanceof pF&&i instanceof pF?gm(r.Pe,i.Pe):r instanceof rN&&i instanceof rN}(e.transform,t.transform)}class _zt{constructor(t,n){this.version=t,this.transformResults=n}}class rc{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new rc}static exists(t){return new rc(void 0,t)}static updateTime(t){return new rc(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function nM(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xj{}function ULe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Qj(e.key,rc.none()):new MP(e.key,e.data,rc.none());{const n=e.data,r=zl.empty();let i=new Fa(Pa.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new H1(e.key,r,new Uc(i.toArray()),rc.none())}}function wzt(e,t,n){e instanceof MP?function(i,s,o){const a=i.value.clone(),u=bve(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof H1?function(i,s,o){if(!nM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=bve(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(zLe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ak(e,t,n,r){return e instanceof MP?function(s,o,a,u){if(!nM(s.precondition,o))return a;const l=s.value.clone(),c=_ve(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof H1?function(s,o,a,u){if(!nM(s.precondition,o))return a;const l=_ve(s.fieldTransforms,u,o),c=o.data;return c.setAll(zLe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return nM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function xzt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=LLe(r.transform,i||null);s!=null&&(n===null&&(n=zl.empty()),n.set(r.field,s))}return n||null}function vve(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&PT(r,i,(s,o)=>bzt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class MP extends Xj{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class H1 extends Xj{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zLe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function bve(e,t,n){const r=new Map;qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,yzt(o,a,n[i]))}return r}function _ve(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,gzt(s,o,t))}return r}class Qj extends Xj{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ezt extends Xj{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Szt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&wzt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ak(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ak(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=OLe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ULe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(jn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),wr())}isEqual(t){return this.batchId===t.batchId&&PT(this.mutations,t.mutations,(n,r)=>vve(n,r))&&PT(this.baseMutations,t.baseMutations,(n,r)=>vve(n,r))}}class cre{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){qi(t.mutations.length===r.length);let i=function(){return fzt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cre(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tzt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Czt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ho,Lr;function Azt(e){switch(e){default:return Pn();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function VLe(e){if(e===void 0)return A0("GRPC error has no .code"),nt.UNKNOWN;switch(e){case ho.OK:return nt.OK;case ho.CANCELLED:return nt.CANCELLED;case ho.UNKNOWN:return nt.UNKNOWN;case ho.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case ho.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case ho.INTERNAL:return nt.INTERNAL;case ho.UNAVAILABLE:return nt.UNAVAILABLE;case ho.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case ho.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case ho.NOT_FOUND:return nt.NOT_FOUND;case ho.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case ho.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case ho.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case ho.ABORTED:return nt.ABORTED;case ho.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case ho.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case ho.DATA_LOSS:return nt.DATA_LOSS;default:return Pn()}}(Lr=ho||(ho={}))[Lr.OK=0]="OK",Lr[Lr.CANCELLED=1]="CANCELLED",Lr[Lr.UNKNOWN=2]="UNKNOWN",Lr[Lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lr[Lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lr[Lr.NOT_FOUND=5]="NOT_FOUND",Lr[Lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lr[Lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lr[Lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lr[Lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lr[Lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lr[Lr.ABORTED=10]="ABORTED",Lr[Lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lr[Lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lr[Lr.INTERNAL=13]="INTERNAL",Lr[Lr.UNAVAILABLE=14]="UNAVAILABLE",Lr[Lr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Izt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kzt=new M_([4294967295,4294967295],0);function wve(e){const t=Izt().encode(e),n=new dLe;return n.update(t),new Uint8Array(n.digest())}function xve(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new M_([n,r],0),new M_([i,s],0)]}class fre{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wI(`Invalid padding: ${n}`);if(r<0)throw new wI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new wI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=M_.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(M_.fromNumber(r)));return i.compare(kzt)===1&&(i=new M_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=wve(t),[r,i]=xve(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new fre(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=wve(t),[r,i]=xve(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class wI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,LP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Jj(jn.min(),i,new Rs(ui),I0(),wr())}}class LP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new LP(r,n,wr(),wr(),wr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class HLe{constructor(t,n){this.targetId=t,this.me=n}}class qLe{constructor(t,n,r=Cu.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Eve{constructor(){this.fe=0,this.ge=Tve(),this.pe=Cu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=wr(),n=wr(),r=wr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pn()}}),new LP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Tve()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Rzt{constructor(t){this.Le=t,this.Be=new Map,this.ke=I0(),this.qe=Sve(),this.Qe=new Rs(ui)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Pn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(qG(s))if(r===0){const o=new cn(s.path);this.Ue(n,o,du.newNoDocument(o,jn.min()))}else qi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=pw(r).toUint8Array()}catch(u){if(u instanceof wLe)return QR("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new fre(o,i,s)}catch(u){return QR(u instanceof wI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qG(a.target)){const u=new cn(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,du.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=wr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Jj(t,n,this.Qe,this.ke,r);return this.ke=I0(),this.qe=Sve(),this.Qe=new Rs(ui),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Eve,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Fa(ui),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Eve),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Sve(){return new Rs(cn.comparator)}function Tve(){return new Rs(cn.comparator)}const Nzt={asc:"ASCENDING",desc:"DESCENDING"},Pzt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dzt={and:"AND",or:"OR"};class Ozt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function YG(e,t){return e.useProto3Json||Wj(t)?t:{value:t}}function mF(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WLe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $zt(e,t){return mF(e,t.toTimestamp())}function Zp(e){return qi(!!e),jn.fromTimestamp(function(n){const r=a1(n);return new Uo(r.seconds,r.nanos)}(e))}function dre(e,t){return KG(e,t).canonicalString()}function KG(e,t){const n=function(i){return new ts(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function GLe(e){const t=ts.fromString(e);return qi(JLe(t)),t}function XG(e,t){return dre(e.databaseId,t.path)}function jz(e,t){const n=GLe(t);if(n.get(1)!==e.databaseId.projectId)throw new Ft(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ft(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cn(KLe(n))}function YLe(e,t){return dre(e.databaseId,t)}function Mzt(e){const t=GLe(e);return t.length===4?ts.emptyPath():KLe(t)}function QG(e){return new ts(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function KLe(e){return qi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Cve(e,t,n){return{name:XG(e,t),fields:n.value.mapValue.fields}}function Lzt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Pn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(qi(c===void 0||typeof c=="string"),Cu.fromBase64String(c||"")):(qi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Cu.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?nt.UNKNOWN:VLe(l.code);return new Ft(c,l.message||"")}(o);n=new qLe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=jz(e,r.document.name),s=Zp(r.document.updateTime),o=r.document.createTime?Zp(r.document.createTime):jn.min(),a=new zl({mapValue:{fields:r.document.fields}}),u=du.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new rM(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=jz(e,r.document),s=r.readTime?Zp(r.readTime):jn.min(),o=du.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rM([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=jz(e,r.document),s=r.removedTargetIds||[];n=new rM([],s,i,null)}else{if(!("filter"in t))return Pn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Czt(i,s),a=r.targetId;n=new HLe(a,o)}}return n}function Fzt(e,t){let n;if(t instanceof MP)n={update:Cve(e,t.key,t.value)};else if(t instanceof Qj)n={delete:XG(e,t.key)};else if(t instanceof H1)n={update:Cve(e,t.key,t.data),updateMask:Gzt(t.fieldMask)};else{if(!(t instanceof Ezt))return Pn();n={verify:XG(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rN)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof iN)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sN)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pF)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Pn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$zt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pn()}(e,t.precondition)),n}function jzt(e,t){return e&&e.length>0?(qi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Zp(i.updateTime):Zp(s);return o.isEqual(jn.min())&&(o=Zp(s)),new _zt(o,i.transformResults||[])}(n,t))):[]}function Bzt(e,t){return{documents:[YLe(e,t.path)]}}function Uzt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YLe(e,i);const s=function(l){if(l.length!==0)return QLe(Nh.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:TE(d.field),direction:Hzt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=YG(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function zzt(e){let t=Mzt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=XLe(f);return d instanceof Nh&&TLe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new nN(CE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,Wj(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new hF(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new hF(h,d)}(n.endAt)),ozt(t,i,o,s,a,"F",u,l)}function Vzt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function XLe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=CE(n.unaryFilter.field);return vo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=CE(n.unaryFilter.field);return vo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=CE(n.unaryFilter.field);return vo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=CE(n.unaryFilter.field);return vo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pn()}}(e):e.fieldFilter!==void 0?function(n){return vo.create(CE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Nh.create(n.compositeFilter.filters.map(r=>XLe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pn()}}(n.compositeFilter.op))}(e):Pn()}function Hzt(e){return Nzt[e]}function qzt(e){return Pzt[e]}function Wzt(e){return Dzt[e]}function TE(e){return{fieldPath:e.canonicalString()}}function CE(e){return Pa.fromServerFormat(e.fieldPath)}function QLe(e){return e instanceof vo?function(n){if(n.op==="=="){if(dve(n.value))return{unaryFilter:{field:TE(n.field),op:"IS_NAN"}};if(fve(n.value))return{unaryFilter:{field:TE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dve(n.value))return{unaryFilter:{field:TE(n.field),op:"IS_NOT_NAN"}};if(fve(n.value))return{unaryFilter:{field:TE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:TE(n.field),op:qzt(n.op),value:n.value}}}(e):e instanceof Nh?function(n){const r=n.getFilters().map(i=>QLe(i));return r.length===1?r[0]:{compositeFilter:{op:Wzt(n.op),filters:r}}}(e):Pn()}function Gzt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function JLe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t,n,r,i,s=jn.min(),o=jn.min(),a=Cu.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new tv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new tv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new tv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new tv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yzt{constructor(t){this.ct=t}}function Kzt(e){const t=zzt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?GG(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xzt{constructor(){this._n=new Qzt}addToCollectionParentIndex(t,n){return this._n.add(n),ht.resolve()}getCollectionParents(t,n){return ht.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return ht.resolve()}deleteFieldIndex(t,n){return ht.resolve()}deleteAllFieldIndexes(t){return ht.resolve()}createTargetIndexes(t,n){return ht.resolve()}getDocumentsMatchingTarget(t,n){return ht.resolve(null)}getIndexType(t,n){return ht.resolve(0)}getFieldIndexes(t,n){return ht.resolve([])}getNextCollectionGroupToUpdate(t){return ht.resolve(null)}getMinOffset(t,n){return ht.resolve(o1.min())}getMinOffsetFromCollectionGroup(t,n){return ht.resolve(o1.min())}updateCollectionGroup(t,n,r){return ht.resolve()}updateIndexEntries(t,n){return ht.resolve()}}class Qzt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Fa(ts.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Fa(ts.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new $T(0)}static Ln(){return new $T(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jzt{constructor(){this.changes=new oA(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,du.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ht.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zzt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eVt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Ak(r.mutation,i,Uc.empty(),Uo.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,wr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=wr()){const i=C_();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=_I();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=C_();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,wr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=I0();const o=Ck(),a=function(){return Ck()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof H1)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Ak(c.mutation,l,c.mutation.getFieldMask(),Uo.now())):o.set(l.key,Uc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Zzt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Ck();let i=new Rs((o,a)=>o-a),s=wr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Uc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||wr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=OLe();c.forEach(d=>{if(!s.has(d)){const h=ULe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return ht.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return cn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):kLe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):ht.resolve(C_());let a=-1,u=s;return o.next(l=>ht.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?ht.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,wr())).next(c=>({batchId:a,changes:DLe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new cn(n)).next(r=>{let i=_I();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=_I();return this.indexManager.getCollectionParents(t,s).next(a=>ht.forEach(a,u=>{const l=function(f,d){return new sA(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,du.newInvalidDocument(c)))});let a=_I();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&Ak(c.mutation,l,Uc.empty(),Uo.now()),Yj(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tVt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return ht.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zp(i.createTime)}}(n)),ht.resolve()}getNamedQuery(t,n){return ht.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Kzt(i.bundledQuery),readTime:Zp(i.readTime)}}(n)),ht.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nVt{constructor(){this.overlays=new Rs(cn.comparator),this.hr=new Map}getOverlay(t,n){return ht.resolve(this.overlays.get(n))}getOverlays(t,n){const r=C_();return ht.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),ht.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),ht.resolve()}getOverlaysForCollection(t,n,r){const i=C_(),s=n.length+1,o=new cn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ht.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Rs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=C_(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=C_(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return ht.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tzt(n,r));let s=this.hr.get(n);s===void 0&&(s=wr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hre{constructor(){this.Pr=new Fa(ta.Ir),this.Tr=new Fa(ta.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new ta(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new ta(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new cn(new ts([])),r=new ta(n,t),i=new ta(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new cn(new ts([])),r=new ta(n,t),i=new ta(n,t+1);let s=wr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ta(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ta{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return cn.comparator(t.key,n.key)||ui(t.pr,n.pr)}static Er(t,n){return ui(t.pr,n.pr)||cn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rVt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Fa(ta.Ir)}checkEmpty(t){return ht.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Szt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ta(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ht.resolve(o)}lookupMutationBatch(t,n){return ht.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return ht.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ht.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return ht.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ta(n,0),i=new ta(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),ht.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Fa(ui);return n.forEach(i=>{const s=new ta(i,0),o=new ta(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),ht.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;cn.isDocumentKey(s)||(s=s.child(""));const o=new ta(new cn(s),0);let a=new Fa(ui);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),ht.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){qi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return ht.forEach(n.mutations,i=>{const s=new ta(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new ta(n,0),i=this.wr.firstAfterOrEqual(r);return ht.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ht.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iVt{constructor(t){this.vr=t,this.docs=function(){return new Rs(cn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return ht.resolve(r?r.document.mutableCopy():du.newInvalidDocument(n))}getEntries(t,n){let r=I0();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():du.newInvalidDocument(i))}),ht.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=I0();const o=n.path,a=new cn(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||z7t(U7t(c),r)<=0||(i.has(c.key)||Yj(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ht.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Pn()}Fr(t,n){return ht.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new sVt(this)}getSize(t){return ht.resolve(this.size)}}class sVt extends Jzt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),ht.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oVt{constructor(t){this.persistence=t,this.Mr=new oA(n=>are(n),ure),this.lastRemoteSnapshotVersion=jn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hre,this.targetCount=0,this.Lr=$T.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),ht.resolve()}getLastRemoteSnapshotVersion(t){return ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ht.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),ht.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),ht.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new $T(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,ht.resolve()}updateTargetData(t,n){return this.qn(n),ht.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,ht.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),ht.waitFor(s).next(()=>i)}getTargetCount(t){return ht.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return ht.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),ht.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),ht.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),ht.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return ht.resolve(r)}containsKey(t,n){return ht.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aVt{constructor(t,n){this.Br={},this.overlays={},this.kr=new rre(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new oVt(this),this.indexManager=new Xzt,this.remoteDocumentCache=function(i){return new iVt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Yzt(n),this.$r=new tVt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new nVt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new rVt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Yt("MemoryPersistence","Starting transaction:",t);const i=new uVt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return ht.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class uVt extends H7t{constructor(t){super(),this.currentSequenceNumber=t}}class pre{constructor(t){this.persistence=t,this.zr=new hre,this.jr=null}static Hr(t){return new pre(t)}get Jr(){if(this.jr)return this.jr;throw Pn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),ht.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),ht.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),ht.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ht.forEach(this.Jr,r=>{const i=cn.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,jn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return ht.or([()=>ht.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mre{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=wr(),i=wr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mre(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lVt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cVt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Vjt()?8:q7t(za())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lVt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(S2()<=Pr.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",SE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ht.resolve()):(S2()<=Pr.DEBUG&&Yt("QueryEngine","Query:",SE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(S2()<=Pr.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",SE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Jp(n))):ht.resolve())}ji(t,n){if(gve(n))return ht.resolve(null);let r=Jp(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=GG(n,null,"F"),r=Jp(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=wr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,GG(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return gve(n)||i.isEqual(jn.min())?ht.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?ht.resolve(null):(S2()<=Pr.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),SE(n)),this.es(t,o,n,B7t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Fa(NLe(t));return n.forEach((i,s)=>{Yj(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return S2()<=Pr.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",SE(n)),this.zi.getDocumentsMatchingQuery(t,n,o1.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fVt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Rs(ui),this.rs=new oA(s=>are(s),ure),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eVt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function dVt(e,t,n,r){return new fVt(e,t,n,r)}async function ZLe(e,t){const n=Bn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=wr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function hVt(e,t){const n=Bn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=ht.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);qi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=wr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function e6e(e){const t=Bn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function pVt(e,t){const n=Bn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Cu.EMPTY_BYTE_STRING,jn.min()).withLastLimboFreeSnapshotVersion(jn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=I0(),l=wr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(mVt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(jn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return ht.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function mVt(e,t,n){let r=wr(),i=wr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=I0();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(jn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Yt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function gVt(e,t){const n=Bn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function yVt(e,t){const n=Bn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,ht.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new tv(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function JG(e,t,n){const r=Bn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$P(o))throw o;Yt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Ave(e,t,n){const r=Bn(e);let i=jn.min(),s=wr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Bn(u),d=f.rs.get(c);return d!==void 0?ht.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Jp(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:jn.min(),n?s:wr())).next(a=>(vVt(r,uzt(t),a),{documents:a,hs:s})))}function vVt(e,t,n){let r=e.ss.get(t)||jn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Ive{constructor(){this.activeTargetIds=pzt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class bVt{constructor(){this.no=new Ive,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ive,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Vt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k3=null;function Bz(){return k3===null?k3=function(){return 268435456+Math.round(2147483648*Math.random())}():k3++,"0x"+k3.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wVt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xVt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="WebChannelConnection";class EVt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Bz(),u=this.vo(n,r.toUriEncodedString());Yt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Yt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw QR("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+iA}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=wVt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Bz();return new Promise((o,a)=>{const u=new hLe;u.setWithCredentials(!0),u.listenOnce(mLe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eM.NO_ERROR:const c=u.getResponseJson();Yt(iu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case eM.TIMEOUT:Yt(iu,`RPC '${t}' ${s} timed out`),a(new Ft(nt.DEADLINE_EXCEEDED,"Request time out"));break;case eM.HTTP_ERROR:const f=u.getStatus();if(Yt(iu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(y)>=0?y:nt.UNKNOWN}(h.status);a(new Ft(p,h.message))}else a(new Ft(nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Ft(nt.UNAVAILABLE,"Connection failed."));break;default:Pn()}}finally{Yt(iu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Yt(iu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Bz(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=vLe(),a=yLe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new pLe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Yt(iu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new xVt({lo:g=>{h?Yt(iu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Yt(iu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Yt(iu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,b)=>{g.listen(y,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,bI.EventType.OPEN,()=>{h||(Yt(iu,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,bI.EventType.CLOSE,()=>{h||(h=!0,Yt(iu,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,bI.EventType.ERROR,g=>{h||(h=!0,QR(iu,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Ft(nt.UNAVAILABLE,"The operation could not be completed")))}),m(f,bI.EventType.MESSAGE,g=>{var y;if(!h){const b=g.data[0];qi(!!b);const w=b,E=w.error||((y=w[0])===null||y===void 0?void 0:y.error);if(E){Yt(iu,`RPC '${t}' stream ${i} received error:`,E);const S=E.status;let T=function(R){const P=ho[R];if(P!==void 0)return VLe(P)}(S),C=E.message;T===void 0&&(T=nt.INTERNAL,C="Unknown error status: "+S+" with message "+E.message),h=!0,p.po(new Ft(T,C)),f.close()}else Yt(iu,`RPC '${t}' stream ${i} received:`,b),p.yo(b)}}),m(a,gLe.STAT_EVENT,g=>{g.stat===UG.PROXY?Yt(iu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===UG.NOPROXY&&Yt(iu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Uz(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(e){return new Ozt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new t6e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(A0(n.toString()),A0("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Ft(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Yt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SVt extends n6e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=Lzt(this.serializer,t),r=function(s){if(!("targetChange"in s))return jn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?jn.min():o.readTime?Zp(o.readTime):jn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=QG(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=qG(u)?{documents:Bzt(s,u)}:{query:Uzt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WLe(s,o.resumeToken);const l=YG(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(jn.min())>0){a.readTime=mF(s,o.snapshotVersion.toTimestamp());const l=YG(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Vzt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=QG(this.serializer),n.removeTarget=t,this.i_(n)}}class TVt extends n6e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(qi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=jzt(t.writeResults,t.commitTime),r=Zp(t.commitTime);return this.listener.A_(r,n)}return qi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=QG(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Fzt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CVt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ft(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,KG(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ft(nt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,KG(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ft(nt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class AVt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(A0(n),this.y_=!1):Yt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IVt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{rx(this)&&(Yt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Bn(u);l.M_.add(4),await jP(l),l.N_.set("Unknown"),l.M_.delete(4),await FP(l)}(this))})}),this.N_=new AVt(r,i)}}async function FP(e){if(rx(e))for(const t of e.x_)await t(!0)}async function jP(e){for(const t of e.x_)await t(!1)}function r6e(e,t){const n=Bn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),bre(n)?vre(n):aA(n).Xo()&&yre(n,t))}function gre(e,t){const n=Bn(e),r=aA(n);n.F_.delete(t),r.Xo()&&i6e(n,t),n.F_.size===0&&(r.Xo()?r.n_():rx(n)&&n.N_.set("Unknown"))}function yre(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}aA(e).P_(t)}function i6e(e,t){e.L_.xe(t),aA(e).I_(t)}function vre(e){e.L_=new Rzt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),aA(e).start(),e.N_.w_()}function bre(e){return rx(e)&&!aA(e).Zo()&&e.F_.size>0}function rx(e){return Bn(e).M_.size===0}function s6e(e){e.L_=void 0}async function kVt(e){e.N_.set("Online")}async function RVt(e){e.F_.forEach((t,n)=>{yre(e,t)})}async function NVt(e,t){s6e(e),bre(e)?(e.N_.D_(t),vre(e)):e.N_.set("Unknown")}async function PVt(e,t,n){if(e.N_.set("Online"),t instanceof qLe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Yt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await gF(e,r)}else if(t instanceof rM?e.L_.Ke(t):t instanceof HLe?e.L_.He(t):e.L_.We(t),!n.isEqual(jn.min()))try{const r=await e6e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Cu.EMPTY_BYTE_STRING,c.snapshotVersion)),i6e(s,u);const f=new tv(c.target,u,l,c.sequenceNumber);yre(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Yt("RemoteStore","Failed to raise snapshot:",r),await gF(e,r)}}async function gF(e,t,n){if(!$P(t))throw t;e.M_.add(1),await jP(e),e.N_.set("Offline"),n||(n=()=>e6e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Yt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await FP(e)})}function o6e(e,t){return t().catch(n=>gF(e,n,t))}async function e8(e){const t=Bn(e),n=u1(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;DVt(t);)try{const i=await gVt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,OVt(t,i)}catch(i){await gF(t,i)}a6e(t)&&u6e(t)}function DVt(e){return rx(e)&&e.v_.length<10}function OVt(e,t){e.v_.push(t);const n=u1(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function a6e(e){return rx(e)&&!u1(e).Zo()&&e.v_.length>0}function u6e(e){u1(e).start()}async function $Vt(e){u1(e).V_()}async function MVt(e){const t=u1(e);for(const n of e.v_)t.d_(n.mutations)}async function LVt(e,t,n){const r=e.v_.shift(),i=cre.from(r,t,n);await o6e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await e8(e)}async function FVt(e,t){t&&u1(e).E_&&await async function(r,i){if(function(o){return Azt(o)&&o!==nt.ABORTED}(i.code)){const s=r.v_.shift();u1(r).t_(),await o6e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await e8(r)}}(e,t),a6e(e)&&u6e(e)}async function Rve(e,t){const n=Bn(e);n.asyncQueue.verifyOperationInProgress(),Yt("RemoteStore","RemoteStore received new credentials");const r=rx(n);n.M_.add(3),await jP(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await FP(n)}async function jVt(e,t){const n=Bn(e);t?(n.M_.delete(2),await FP(n)):t||(n.M_.add(2),await jP(n),n.N_.set("Unknown"))}function aA(e){return e.B_||(e.B_=function(n,r,i){const s=Bn(n);return s.f_(),new SVt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:kVt.bind(null,e),To:RVt.bind(null,e),Ao:NVt.bind(null,e),h_:PVt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),bre(e)?vre(e):e.N_.set("Unknown")):(await e.B_.stop(),s6e(e))})),e.B_}function u1(e){return e.k_||(e.k_=function(n,r,i){const s=Bn(n);return s.f_(),new TVt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:$Vt.bind(null,e),Ao:FVt.bind(null,e),R_:MVt.bind(null,e),A_:LVt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await e8(e)):(await e.k_.stop(),e.v_.length>0&&(Yt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _re{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new _re(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ft(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wre(e,t){if(A0("AsyncQueue",`${t}: ${e}`),$P(e))return new Ft(nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t){this.comparator=t?(n,r)=>t(n,r)||cn.comparator(n.key,r.key):(n,r)=>cn.comparator(n.key,r.key),this.keyedMap=_I(),this.sortedSet=new Rs(this.comparator)}static emptySet(t){return new DS(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof DS)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new DS;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nve{constructor(){this.q_=new Rs(cn.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Pn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class MT{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new MT(t,n,DS.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gj(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BVt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class UVt{constructor(){this.queries=new oA(t=>RLe(t),Gj),this.onlineState="Unknown",this.z_=new Set}}async function l6e(e,t){const n=Bn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new BVt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wre(o,`Initialization of query '${SE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&xre(n)}async function c6e(e,t){const n=Bn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zVt(e,t){const n=Bn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&xre(n)}function VVt(e,t,n){const r=Bn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function xre(e){e.z_.forEach(t=>{t.next()})}var ZG,Pve;(Pve=ZG||(ZG={})).J_="default",Pve.Cache="cache";class f6e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new MT(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=MT.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==ZG.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6e{constructor(t){this.key=t}}class h6e{constructor(t){this.key=t}}class HVt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=wr(),this.mutatedKeys=wr(),this.Ia=NLe(t),this.Ta=new DS(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Nve,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=Yj(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new MT(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nve,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=wr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new h6e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new d6e(r))}),n}pa(t){this.la=t.hs,this.Pa=wr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return MT.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class qVt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class WVt{constructor(t){this.key=t,this.wa=!1}}class GVt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new oA(a=>RLe(a),Gj),this.Da=new Map,this.Ca=new Set,this.va=new Rs(cn.comparator),this.Fa=new Map,this.Ma=new hre,this.xa={},this.Oa=new Map,this.Na=$T.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function YVt(e,t,n=!0){const r=b6e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await p6e(r,t,n,!0),i}async function KVt(e,t){const n=b6e(e);await p6e(n,t,!0,!1)}async function p6e(e,t,n,r){const i=await yVt(e.localStore,Jp(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await XVt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&r6e(e.remoteStore,i),a}async function XVt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,b){let w=g.view.da(y);w.Xi&&(w=await Ave(m.localStore,g.query,!1).then(({documents:C})=>g.view.da(C,w)));const E=b&&b.targetChanges.get(g.targetId),S=b&&b.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(w,m.isPrimaryClient,E,S);return Ove(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await Ave(e.localStore,t,!0),o=new HVt(t,s.hs),a=o.da(s.documents),u=LP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Ove(e,n,l.fa);const c=new qVt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function QVt(e,t,n){const r=Bn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Gj(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await JG(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gre(r.remoteStore,i.targetId),eY(r,i.targetId)}).catch(OP)):(eY(r,i.targetId),await JG(r.localStore,i.targetId,!0))}async function JVt(e,t){const n=Bn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gre(n.remoteStore,r.targetId))}async function ZVt(e,t,n){const r=oHt(e);try{const i=await function(o,a){const u=Bn(o),l=Uo.now(),c=a.reduce((h,p)=>h.add(p.key),wr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=I0(),m=wr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,b)=>{b.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const b of a){const w=xzt(b,f.get(b.key).overlayedDocument);w!=null&&y.push(new H1(b.key,w,xLe(w.value.mapValue),rc.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:DLe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Rs(ui)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await BP(r,i.changes),await e8(r.remoteStore)}catch(i){const s=wre(i,"Failed to persist write");n.reject(s)}}async function m6e(e,t){const n=Bn(e);try{const r=await pVt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(qi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?qi(o.wa):i.removedDocuments.size>0&&(qi(o.wa),o.wa=!1))}),await BP(n,r,t)}catch(r){await OP(r)}}function Dve(e,t,n){const r=Bn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Bn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&xre(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function eHt(e,t,n){const r=Bn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Rs(cn.comparator);o=o.insert(s,du.newNoDocument(s,jn.min()));const a=wr().add(s),u=new Jj(jn.min(),new Map,new Rs(ui),o,a);await m6e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),Ere(r)}else await JG(r.localStore,t,!1).then(()=>eY(r,t,n)).catch(OP)}async function tHt(e,t){const n=Bn(e),r=t.batch.batchId;try{const i=await hVt(n.localStore,t);y6e(n,r,null),g6e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await BP(n,i)}catch(i){await OP(i)}}async function nHt(e,t,n){const r=Bn(e);try{const i=await function(o,a){const u=Bn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(qi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);y6e(r,t,n),g6e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await BP(r,i)}catch(i){await OP(i)}}function g6e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function y6e(e,t,n){const r=Bn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function eY(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||v6e(e,r)})}function v6e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(gre(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Ere(e))}function Ove(e,t,n){for(const r of n)r instanceof d6e?(e.Ma.addReference(r.key,t),rHt(e,r)):r instanceof h6e?(Yt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||v6e(e,r.key)):Pn()}function rHt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Yt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Ere(e))}function Ere(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new cn(ts.fromString(t)),r=e.Na.next();e.Fa.set(r,new WVt(n)),e.va=e.va.insert(n,r),r6e(e.remoteStore,new tv(Jp(lre(n.path)),r,"TargetPurposeLimboResolution",rre.oe))}}async function BP(e,t,n){const r=Bn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=mre.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=Bn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ht.forEach(l,d=>ht.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>ht.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!$P(f))throw f;Yt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function iHt(e,t){const n=Bn(e);if(!n.currentUser.isEqual(t)){Yt("SyncEngine","User change. New user:",t.toKey());const r=await ZLe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Ft(nt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await BP(n,r.us)}}function sHt(e,t){const n=Bn(e),r=n.Fa.get(t);if(r&&r.wa)return wr().add(r.key);{let i=wr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function b6e(e){const t=Bn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=m6e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sHt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eHt.bind(null,t),t.Sa.h_=zVt.bind(null,t.eventManager),t.Sa.ka=VVt.bind(null,t.eventManager),t}function oHt(e){const t=Bn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tHt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nHt.bind(null,t),t}class $ve{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Zj(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return dVt(this.persistence,new cVt,t.initialUser,this.serializer)}createPersistence(t){return new aVt(pre.Hr,this.serializer)}createSharedClientState(t){return new bVt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class aHt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dve(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iHt.bind(null,this.syncEngine),await jVt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new UVt}()}createDatastore(t){const n=Zj(t.databaseInfo.databaseId),r=function(s){return new EVt(s)}(t.databaseInfo);return function(s,o,a,u){return new CVt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new IVt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Dve(this.syncEngine,n,0),function(){return kve.D()?new kve:new _Vt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new GVt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=Bn(r);Yt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await jP(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):A0("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uHt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nl.UNAUTHENTICATED,this.clientId=bLe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Yt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Yt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ft(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wre(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function zz(e,t){e.asyncQueue.verifyOperationInProgress(),Yt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ZLe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Mve(e,t){e.asyncQueue.verifyOperationInProgress();const n=await w6e(e);Yt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Rve(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Rve(t.remoteStore,i)),e._onlineComponents=t}function lHt(e){return e.name==="FirebaseError"?e.code===nt.FAILED_PRECONDITION||e.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function w6e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Yt("FirestoreClient","Using user provided OfflineComponentProvider");try{await zz(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!lHt(n))throw n;QR("Error using user provided cache. Falling back to memory cache: "+n),await zz(e,new $ve)}}else Yt("FirestoreClient","Using default OfflineComponentProvider"),await zz(e,new $ve);return e._offlineComponents}async function Sre(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Yt("FirestoreClient","Using user provided OnlineComponentProvider"),await Mve(e,e._uninitializedComponentsProvider._online)):(Yt("FirestoreClient","Using default OnlineComponentProvider"),await Mve(e,new aHt))),e._onlineComponents}function cHt(e){return w6e(e).then(t=>t.persistence)}function fHt(e){return Sre(e).then(t=>t.remoteStore)}function dHt(e){return Sre(e).then(t=>t.syncEngine)}async function x6e(e){const t=await Sre(e),n=t.eventManager;return n.onListen=YVt.bind(null,t.syncEngine),n.onUnlisten=QVt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=KVt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=JVt.bind(null,t.syncEngine),n}function hHt(e){return e.asyncQueue.enqueue(async()=>{const t=await cHt(e),n=await fHt(e);return t.setNetworkEnabled(!0),function(i){const s=Bn(i);return s.M_.delete(0),FP(s)}(n)})}function pHt(e,t,n={}){const r=new Qg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new _6e({next:d=>{o.enqueueAndForget(()=>c6e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Ft(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Ft(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new f6e(lre(a.path),c,{includeMetadataChanges:!0,ra:!0});return l6e(s,f)}(await x6e(e),e.asyncQueue,t,n,r)),r.promise}function mHt(e,t,n={}){const r=new Qg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new _6e({next:d=>{o.enqueueAndForget(()=>c6e(s,f)),d.fromCache&&u.source==="server"?l.reject(new Ft(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new f6e(a,c,{includeMetadataChanges:!0,ra:!0});return l6e(s,f)}(await x6e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lve=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6e(e,t,n){if(!n)throw new Ft(nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gHt(e,t,n,r){if(t===!0&&r===!0)throw new Ft(nt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Fve(e){if(!cn.isDocumentKey(e))throw new Ft(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jve(e){if(cn.isDocumentKey(e))throw new Ft(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function t8(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Pn()}function Ph(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ft(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=t8(e);throw new Ft(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ft(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ft(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gHt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E6e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ft(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ft(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ft(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tre{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bve({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ft(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Ft(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bve(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new P7t;switch(r.type){case"firstParty":return new $7t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ft(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lve.get(n);r&&(Yt("ComponentProvider","Removing Datastore"),Lve.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ix(this.firestore,t,this._query)}}class ol{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ol(this.firestore,t,this._key)}}class kv extends ix{constructor(t,n,r){super(t,n,lre(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ol(this.firestore,null,new cn(t))}withConverter(t){return new kv(this.firestore,t,this._path)}}function Fd(e,t,...n){if(e=Wi(e),S6e("collection","path",t),e instanceof Tre){const r=ts.fromString(t,...n);return jve(r),new kv(e,null,r)}{if(!(e instanceof ol||e instanceof kv))throw new Ft(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ts.fromString(t,...n));return jve(r),new kv(e.firestore,null,r)}}function Os(e,t,...n){if(e=Wi(e),arguments.length===1&&(t=bLe.newId()),S6e("doc","path",t),e instanceof Tre){const r=ts.fromString(t,...n);return Fve(r),new ol(e,null,new cn(r))}{if(!(e instanceof ol||e instanceof kv))throw new Ft(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ts.fromString(t,...n));return Fve(r),new ol(e.firestore,e instanceof kv?e.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yHt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new t6e(this,"async_queue_retry"),this.hu=()=>{const n=Uz();n&&Yt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Uz();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Uz();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Qg;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!$P(t))throw t;Yt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw A0("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=_re.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Pn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class q1 extends Tre{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new yHt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||T6e(this),this._firestoreClient.terminate()}}function vHt(e,t,n){n||(n="(default)");const r=nA(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(YR(s,t))return i;throw new Ft(nt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ft(nt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ft(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function UP(e){return e._firestoreClient||T6e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function T6e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Y7t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,E6e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new uHt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function bHt(e){return hHt(UP(e=Ph(e,q1)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t){this._byteString=t}static fromBase64String(t){try{return new LT(Cu.fromBase64String(t))}catch(n){throw new Ft(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new LT(Cu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ft(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cre=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ft(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ft(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ui(this._lat,t._lat)||ui(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ht=/^__.*__$/;class wHt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new H1(t,this.data,this.fieldMask,n,this.fieldTransforms):new MP(t,this.data,n,this.fieldTransforms)}}class C6e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new H1(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function A6e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pn()}}class Are{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Are(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return yF(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(A6e(this.fu)&&_Ht.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class xHt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Zj(t)}Fu(t,n,r,i=!1){return new Are({fu:t,methodName:n,vu:r,path:Pa.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r8(e){const t=e._freezeSettings(),n=Zj(e._databaseId);return new xHt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function I6e(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);kre("Data must be an object, but it was:",o,r);const a=N6e(r,o);let u,l;if(s.merge)u=new Uc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=tY(t,f,n);if(!o.contains(d))throw new Ft(nt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);D6e(c,d)||c.push(d)}u=new Uc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new wHt(new zl(a),u,l)}class i8 extends n8{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof i8}}class Ire extends n8{_toFieldTransform(t){return new vzt(t.path,new rN)}isEqual(t){return t instanceof Ire}}function k6e(e,t,n,r){const i=e.Fu(1,t,n);kre("Data must be an object, but it was:",i,r);const s=[],o=zl.empty();nx(r,(u,l)=>{const c=Rre(t,u,n);l=Wi(l);const f=i.Su(c);if(l instanceof i8)s.push(c);else{const d=VP(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Uc(s);return new C6e(o,a,i.fieldTransforms)}function R6e(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[tY(t,r,n)],u=[i];if(s.length%2!=0)throw new Ft(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(tY(t,s[d])),u.push(s[d+1]);const l=[],c=zl.empty();for(let d=a.length-1;d>=0;--d)if(!D6e(l,a[d])){const h=a[d];let p=u[d];p=Wi(p);const m=o.Su(h);if(p instanceof i8)l.push(h);else{const g=VP(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Uc(l);return new C6e(c,f,o.fieldTransforms)}function EHt(e,t,n,r=!1){return VP(n,e.Fu(r?4:3,t))}function VP(e,t){if(P6e(e=Wi(e)))return kre("Unsupported field value:",t,e),N6e(e,t);if(e instanceof n8)return function(r,i){if(!A6e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=VP(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Wi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mzt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Uo.fromDate(r);return{timestampValue:mF(i.serializer,s)}}if(r instanceof Uo){const s=new Uo(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mF(i.serializer,s)}}if(r instanceof Cre)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof LT)return{bytesValue:WLe(i.serializer,r._byteString)};if(r instanceof ol){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dre(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${t8(r)}`)}(e,t)}function N6e(e,t){const n={};return _Le(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nx(e,(r,i)=>{const s=VP(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function P6e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Uo||e instanceof Cre||e instanceof LT||e instanceof ol||e instanceof n8)}function kre(e,t,n){if(!P6e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=t8(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function tY(e,t,n){if((t=Wi(t))instanceof zP)return t._internalPath;if(typeof t=="string")return Rre(e,t);throw yF("Field path arguments must be of type string or ",e,!1,void 0,n)}const SHt=new RegExp("[~\\*/\\[\\]]");function Rre(e,t,n){if(t.search(SHt)>=0)throw yF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zP(...t.split("."))._internalPath}catch{throw yF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function yF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ft(nt.INVALID_ARGUMENT,a+e+u)}function D6e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ol(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new THt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(s8("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class THt extends O6e{data(){return super.data()}}function s8(e,t){return typeof t=="string"?Rre(e,t):t instanceof zP?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CHt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ft(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nre{}class $6e extends Nre{}function Uve(e,t,...n){let r=[];t instanceof Nre&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Pre).length,a=s.filter(u=>u instanceof o8).length;if(o>1||o>0&&a>0)throw new Ft(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class o8 extends $6e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new o8(t,n,r)}_apply(t){const n=this._parse(t);return M6e(t._query,n),new ix(t.firestore,t.converter,WG(t._query,n))}_parse(t){const n=r8(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ft(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Vve(f,c);const h=[];for(const p of f)h.push(zve(u,s,p));d={arrayValue:{values:h}}}else d=zve(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Vve(f,c),d=EHt(a,o,f,c==="in"||c==="not-in");return vo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function AHt(e,t,n){const r=t,i=s8("where",e);return o8._create(i,r,n)}class Pre extends Nre{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Pre(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nh.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)M6e(o,u),o=WG(o,u)}(t._query,n),new ix(t.firestore,t.converter,WG(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dre extends $6e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Dre(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Ft(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ft(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nN(s,o)}(t._query,this._field,this._direction);return new ix(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new sA(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function IHt(e,t="asc"){const n=t,r=s8("orderBy",e);return Dre._create(r,n)}function zve(e,t,n){if(typeof(n=Wi(n))=="string"){if(n==="")throw new Ft(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kLe(t)&&n.indexOf("/")!==-1)throw new Ft(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ts.fromString(n));if(!cn.isDocumentKey(r))throw new Ft(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cve(e,new cn(r))}if(n instanceof ol)return cve(e,n._key);throw new Ft(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${t8(n)}.`)}function Vve(e,t){if(!Array.isArray(e)||e.length===0)throw new Ft(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function M6e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ft(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ft(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class kHt{convertValue(t,n="none"){switch(mw(t)){case 0:return null;case 1:return t.booleanValue;case 2:return go(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(pw(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Pn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return nx(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Cre(go(t.latitude),go(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=sre(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ZR(t));default:return null}}convertTimestamp(t){const n=a1(t);return new Uo(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ts.fromString(t);qi(JLe(r));const i=new eN(r.get(1),r.get(3)),s=new cn(r.popFirst(5));return i.isEqual(n)||A0(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class F6e extends O6e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new iM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(s8("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iM extends F6e{data(t={}){return super.data(t)}}class RHt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new xI(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new iM(this._firestore,this._userDataWriter,r.key,r,new xI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ft(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new iM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new iM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:NHt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function NHt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(e){e=Ph(e,ol);const t=Ph(e.firestore,q1);return pHt(UP(t),e._key).then(n=>OHt(t,e,n))}class j6e extends kHt{constructor(t){super(),this.firestore=t}convertBytes(t){return new LT(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ol(this.firestore,null,n)}}function T2(e){e=Ph(e,ix);const t=Ph(e.firestore,q1),n=UP(t),r=new j6e(t);return CHt(e._query),mHt(n,e._query).then(i=>new RHt(t,r,e,i))}function zu(e,t,n){e=Ph(e,ol);const r=Ph(e.firestore,q1),i=L6e(e.converter,t,n);return a8(r,[I6e(r8(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,rc.none())])}function PHt(e,t,n,...r){e=Ph(e,ol);const i=Ph(e.firestore,q1),s=r8(i);let o;return o=typeof(t=Wi(t))=="string"||t instanceof zP?R6e(s,"updateDoc",e._key,t,n,r):k6e(s,"updateDoc",e._key,t),a8(i,[o.toMutation(e._key,rc.exists(!0))])}function DHt(e){return a8(Ph(e.firestore,q1),[new Qj(e._key,rc.none())])}function a8(e,t){return function(r,i){const s=new Qg;return r.asyncQueue.enqueueAndForget(async()=>ZVt(await dHt(r),i,s)),s.promise}(UP(e),t)}function OHt(e,t,n){const r=n.docs.get(t._key),i=new j6e(e);return new F6e(e,i,t._key,r,new xI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ht{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=r8(t)}set(t,n,r){this._verifyNotCommitted();const i=Vz(t,this._firestore),s=L6e(i.converter,n,r),o=I6e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,rc.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=Vz(t,this._firestore);let o;return o=typeof(n=Wi(n))=="string"||n instanceof zP?R6e(this._dataReader,"WriteBatch.update",s._key,n,r,i):k6e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,rc.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Vz(t,this._firestore);return this._mutations=this._mutations.concat(new Qj(n._key,rc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ft(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vz(e,t){if((e=Wi(e)).firestore!==t)throw new Ft(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function MHt(){return new Ire("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hve(e){return UP(e=Ph(e,q1)),new $Ht(e,t=>a8(e,t))}(function(t,n=!0){(function(i){iA=i})(tx),T0(new pm("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new q1(new D7t(r.getProvider("auth-internal")),new L7t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ft(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eN(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xh(ove,"4.6.3",t),xh(ove,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY=new Map,B6e={activated:!1,tokenObservers:[]},LHt={initialized:!1,enabled:!1};function zo(e){return nY.get(e)||Object.assign({},B6e)}function FHt(e,t){return nY.set(e,t),nY.get(e)}function u8(){return LHt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6e="https://content-firebaseappcheck.googleapis.com/v1",jHt="exchangeRecaptchaV3Token",BHt="exchangeDebugToken",qve={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},UHt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zHt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new GR,this.pending.promise.catch(n=>{}),await VHt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new GR,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function VHt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HHt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Xl=new tA("appCheck","AppCheck",HHt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wve(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Ore(e){if(!zo(e).activated)throw Xl.create("use-before-activation",{appName:e.name})}function z6e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=N3(n)+"d:"),r&&(o+=N3(r)+"h:"),o+=N3(i)+"m:"+N3(s)+"s",o}function N3(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $re({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Xl.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Xl.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Xl.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Xl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function qHt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${U6e}/projects/${n}/apps/${r}:${jHt}?key=${i}`,body:{recaptcha_v3_token:t}}}function V6e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${U6e}/projects/${n}/apps/${r}:${BHt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WHt="firebase-app-check-database",GHt=1,oN="firebase-app-check-store",H6e="debug-token";let P3=null;function q6e(){return P3||(P3=new Promise((e,t)=>{try{const n=indexedDB.open(WHt,GHt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Xl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(oN,{keyPath:"compositeKey"})}}}catch(n){t(Xl.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),P3)}function YHt(e){return G6e(Y6e(e))}function KHt(e,t){return W6e(Y6e(e),t)}function XHt(e){return W6e(H6e,e)}function QHt(){return G6e(H6e)}async function W6e(e,t){const r=(await q6e()).transaction(oN,"readwrite"),s=r.objectStore(oN).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Xl.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function G6e(e){const n=(await q6e()).transaction(oN,"readonly"),i=n.objectStore(oN).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Xl.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function Y6e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new jj("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JHt(e){if(Lne()){let t;try{t=await YHt(e)}catch(n){aN.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Hz(e,t){return Lne()?KHt(e,t).catch(n=>{aN.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function ZHt(){let e;try{e=await QHt()}catch{}if(e)return e;{const t=Jjt();return XHt(t).catch(n=>aN.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mre(){return u8().enabled}async function Lre(){const e=u8();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function eqt(){const e=fMe(),t=u8();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new GR;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ZHt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tqt={error:"UNKNOWN_ERROR"};function nqt(e){return Mne.encodeString(JSON.stringify(e),!1)}async function rY(e,t=!1){const n=e.app;Ore(n);const r=zo(n);let i=r.token,s;if(i&&!KE(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(KE(u)?i=u:await Hz(n,void 0))}if(!t&&i&&KE(i))return{token:i.token};let o=!1;if(Mre()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$re(V6e(n,await Lre()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Hz(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await zo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?aN.warn(u.message):aN.error(u),s=u}let a;return i?s?KE(i)?a={token:i.token,internalError:s}:a=Yve(s):(a={token:i.token},r.token=i,await Hz(n,i)):a=Yve(s),o&&Q6e(n,a),a}async function rqt(e){const t=e.app;Ore(t);const{provider:n}=zo(t);if(Mre()){const r=await Lre(),{token:i}=await $re(V6e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function K6e(e,t,n,r){const{app:i}=e,s=zo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&KE(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Gve(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Gve(e))}function X6e(e,t){const n=zo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Gve(e){const{app:t}=e,n=zo(t);let r=n.tokenRefresher;r||(r=iqt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function iqt(e){const{app:t}=e;return new zHt(async()=>{const n=zo(t);let r;if(n.token?r=await rY(e,!0):r=await rY(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=zo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},qve.RETRIAL_MIN_WAIT,qve.RETRIAL_MAX_WAIT)}function Q6e(e,t){const n=zo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function KE(e){return e.expireTimeMillis-Date.now()>0}function Yve(e){return{token:nqt(tqt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sqt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=zo(this.app);for(const n of t)X6e(this.app,n.next);return Promise.resolve()}}function oqt(e,t){return new sqt(e,t)}function aqt(e){return{getToken:t=>rY(e,t),getLimitedUseToken:()=>rqt(e),addTokenListener:t=>K6e(e,"INTERNAL",t),removeTokenListener:t=>X6e(e.app,t)}}const uqt="@firebase/app-check",lqt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cqt="https://www.google.com/recaptcha/api.js";function fqt(e,t){const n=new GR,r=zo(e);r.reCAPTCHAState={initialized:n};const i=dqt(e),s=Wve(!1);return s?Kve(e,t,s,i,n):mqt(()=>{const o=Wve(!1);if(!o)throw new Error("no recaptcha");Kve(e,t,o,i,n)}),n.promise}function Kve(e,t,n,r,i){n.ready(()=>{pqt(e,t,n,r),i.resolve(n)})}function dqt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function hqt(e){Ore(e);const n=await zo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=zo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function pqt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{zo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{zo(e).reCAPTCHAState.succeeded=!1}}),s=zo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function mqt(e){const t=document.createElement("script");t.src=cqt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fre{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;yqt(this._throttleData);const i=await hqt(this._app).catch(o=>{throw Xl.create("recaptcha-error")});if(!(!((t=zo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Xl.create("recaptcha-error");let s;try{s=await $re(qHt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=gqt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Xl.create("throttled",{time:z6e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=nA(t,"heartbeat"),fqt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Fre?this._siteKey===t._siteKey:!1}}function gqt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+UHt,httpStatus:e};{const n=t?t.backoffCount:0,r=r8t(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function yqt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Xl.create("throttled",{time:z6e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vqt(e=jne(),t){e=Wi(e);const n=nA(e,"app-check");if(u8().initialized||eqt(),Mre()&&Lre().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Xl.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return bqt(e,t.provider,t.isTokenAutoRefreshEnabled),zo(e).isTokenAutoRefreshEnabled&&K6e(r,"INTERNAL",()=>{}),r}function bqt(e,t,n){const r=FHt(e,Object.assign({},B6e));r.activated=!0,r.provider=t,r.cachedTokenPromise=JHt(e).then(i=>(i&&KE(i)&&(r.token=i,Q6e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const _qt="app-check",Xve="app-check-internal";function wqt(){T0(new pm(_qt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return oqt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Xve).initialize()})),T0(new pm(Xve,e=>{const t=e.getProvider("app-check").getImmediate();return aqt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),xh(uqt,lqt)}wqt();function D3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J6e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof D3=="function"&&D3;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof D3=="function"&&D3,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,b=h.length;b;){for(y=h,h=[],g=-1;++g<b;)y[g]();b=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ts<"u"?Ts:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==o&&m(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,T){if(typeof S!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var C=new this.constructor(o);if(this.state!==c){var I=this.state===l?S:T;h(C,I,this.outcome)}else this.queue.push(new d(C,S,T));return C};function d(S,T,C){this.promise=S,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){h(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){h(this.promise,this.onRejected,S)};function h(S,T,C){s(function(){var I;try{I=T(C)}catch(R){return a.reject(S,R)}I===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,I)})}a.resolve=function(S,T){var C=g(p,T);if(C.status==="error")return a.reject(S,C.value);var I=C.value;if(I)m(S,I);else{S.state=l,S.outcome=T;for(var R=-1,P=S.queue.length;++R<P;)S.queue[R].callFulfilled(T)}return S},a.reject=function(S,T){S.state=u,S.outcome=T;for(var C=-1,I=S.queue.length;++C<I;)S.queue[C].callRejected(T);return S};function p(S){var T=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof T=="function")return function(){T.apply(S,arguments)}}function m(S,T){var C=!1;function I(L){C||(C=!0,a.reject(S,L))}function R(L){C||(C=!0,a.resolve(S,L))}function P(){T(R,I)}var D=g(P);D.status==="error"&&I(D.value)}function g(S,T){var C={};try{C.value=S(T),C.status="success"}catch(I){C.status="error",C.value=I}return C}f.resolve=y;function y(S){return S instanceof this?S:a.resolve(new this(o),S)}f.reject=b;function b(S){var T=new this(o);return a.reject(T,S)}f.all=w;function w(S){var T=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=S.length,I=!1;if(!C)return this.resolve([]);for(var R=new Array(C),P=0,D=-1,L=new this(o);++D<C;)M(S[D],D);return L;function M(F,z){T.resolve(F).then(B,function(H){I||(I=!0,a.reject(L,H))});function B(H){R[z]=H,++P===C&&!I&&(I=!0,a.resolve(L,R))}}}f.race=E;function E(S){var T=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=S.length,I=!1;if(!C)return this.resolve([]);for(var R=-1,P=new this(o);++R<C;)D(S[R]);return P;function D(L){T.resolve(L).then(function(M){I||(I=!0,a.resolve(P,M))},function(M){I||(I=!0,a.reject(P,M))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ts<"u"?Ts:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee};function o(ee,he){if(!(ee instanceof he))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ee=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),he=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ee||he)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ee,he){ee=ee||[],he=he||{};try{return new Blob(ee,he)}catch(ve){if(ve.name!=="TypeError")throw ve;for(var se=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,we=new se,Ie=0;Ie<ee.length;Ie+=1)we.append(ee[Ie]);return we.getBlob(he.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ee,he){he&&ee.then(function(se){he(null,se)},function(se){he(se)})}function h(ee,he,se){typeof he=="function"&&ee.then(he),typeof se=="function"&&ee.catch(se)}function p(ee){return typeof ee!="string"&&(console.warn(ee+" used as a key, but it is not a string."),ee=String(ee)),ee}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,b={},w=Object.prototype.toString,E="readonly",S="readwrite";function T(ee){for(var he=ee.length,se=new ArrayBuffer(he),we=new Uint8Array(se),Ie=0;Ie<he;Ie++)we[Ie]=ee.charCodeAt(Ie);return se}function C(ee){return new f(function(he){var se=ee.transaction(g,S),we=c([""]);se.objectStore(g).put(we,"key"),se.onabort=function(Ie){Ie.preventDefault(),Ie.stopPropagation(),he(!1)},se.oncomplete=function(){var Ie=navigator.userAgent.match(/Chrome\/(\d+)/),ve=navigator.userAgent.match(/Edge\//);he(ve||!Ie||parseInt(Ie[1],10)>=43)}}).catch(function(){return!1})}function I(ee){return typeof y=="boolean"?f.resolve(y):C(ee).then(function(he){return y=he,y})}function R(ee){var he=b[ee.name],se={};se.promise=new f(function(we,Ie){se.resolve=we,se.reject=Ie}),he.deferredOperations.push(se),he.dbReady?he.dbReady=he.dbReady.then(function(){return se.promise}):he.dbReady=se.promise}function P(ee){var he=b[ee.name],se=he.deferredOperations.pop();if(se)return se.resolve(),se.promise}function D(ee,he){var se=b[ee.name],we=se.deferredOperations.pop();if(we)return we.reject(he),we.promise}function L(ee,he){return new f(function(se,we){if(b[ee.name]=b[ee.name]||X(),ee.db)if(he)R(ee),ee.db.close();else return se(ee.db);var Ie=[ee.name];he&&Ie.push(ee.version);var ve=u.open.apply(u,Ie);he&&(ve.onupgradeneeded=function(We){var it=ve.result;try{it.createObjectStore(ee.storeName),We.oldVersion<=1&&it.createObjectStore(g)}catch(ut){if(ut.name==="ConstraintError")console.warn('The database "'+ee.name+'" has been upgraded from version '+We.oldVersion+" to version "+We.newVersion+', but the storage "'+ee.storeName+'" already exists.');else throw ut}}),ve.onerror=function(We){We.preventDefault(),we(ve.error)},ve.onsuccess=function(){var We=ve.result;We.onversionchange=function(it){it.target.close()},se(We),P(ee)}})}function M(ee){return L(ee,!1)}function F(ee){return L(ee,!0)}function z(ee,he){if(!ee.db)return!0;var se=!ee.db.objectStoreNames.contains(ee.storeName),we=ee.version<ee.db.version,Ie=ee.version>ee.db.version;if(we&&(ee.version!==he&&console.warn('The database "'+ee.name+`" can't be downgraded from version `+ee.db.version+" to version "+ee.version+"."),ee.version=ee.db.version),Ie||se){if(se){var ve=ee.db.version+1;ve>ee.version&&(ee.version=ve)}return!0}return!1}function B(ee){return new f(function(he,se){var we=new FileReader;we.onerror=se,we.onloadend=function(Ie){var ve=btoa(Ie.target.result||"");he({__local_forage_encoded_blob:!0,data:ve,type:ee.type})},we.readAsBinaryString(ee)})}function H(ee){var he=T(atob(ee.data));return c([he],{type:ee.type})}function q(ee){return ee&&ee.__local_forage_encoded_blob}function Y(ee){var he=this,se=he._initReady().then(function(){var we=b[he._dbInfo.name];if(we&&we.dbReady)return we.dbReady});return h(se,ee,ee),se}function $(ee){R(ee);for(var he=b[ee.name],se=he.forages,we=0;we<se.length;we++){var Ie=se[we];Ie._dbInfo.db&&(Ie._dbInfo.db.close(),Ie._dbInfo.db=null)}return ee.db=null,M(ee).then(function(ve){return ee.db=ve,z(ee)?F(ee):ve}).then(function(ve){ee.db=he.db=ve;for(var We=0;We<se.length;We++)se[We]._dbInfo.db=ve}).catch(function(ve){throw D(ee,ve),ve})}function W(ee,he,se,we){we===void 0&&(we=1);try{var Ie=ee.db.transaction(ee.storeName,he);se(null,Ie)}catch(ve){if(we>0&&(!ee.db||ve.name==="InvalidStateError"||ve.name==="NotFoundError"))return f.resolve().then(function(){if(!ee.db||ve.name==="NotFoundError"&&!ee.db.objectStoreNames.contains(ee.storeName)&&ee.version<=ee.db.version)return ee.db&&(ee.version=ee.db.version+1),F(ee)}).then(function(){return $(ee).then(function(){W(ee,he,se,we-1)})}).catch(se);se(ve)}}function X(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(ee){var he=this,se={db:null};if(ee)for(var we in ee)se[we]=ee[we];var Ie=b[se.name];Ie||(Ie=X(),b[se.name]=Ie),Ie.forages.push(he),he._initReady||(he._initReady=he.ready,he.ready=Y);var ve=[];function We(){return f.resolve()}for(var it=0;it<Ie.forages.length;it++){var ut=Ie.forages[it];ut!==he&&ve.push(ut._initReady().catch(We))}var lt=Ie.forages.slice(0);return f.all(ve).then(function(){return se.db=Ie.db,M(se)}).then(function(yt){return se.db=yt,z(se,he._defaultConfig.version)?F(se):yt}).then(function(yt){se.db=Ie.db=yt,he._dbInfo=se;for(var Lt=0;Lt<lt.length;Lt++){var $n=lt[Lt];$n!==he&&($n._dbInfo.db=se.db,$n._dbInfo.version=se.version)}})}function K(ee,he){var se=this;ee=p(ee);var we=new f(function(Ie,ve){se.ready().then(function(){W(se._dbInfo,E,function(We,it){if(We)return ve(We);try{var ut=it.objectStore(se._dbInfo.storeName),lt=ut.get(ee);lt.onsuccess=function(){var yt=lt.result;yt===void 0&&(yt=null),q(yt)&&(yt=H(yt)),Ie(yt)},lt.onerror=function(){ve(lt.error)}}catch(yt){ve(yt)}})}).catch(ve)});return d(we,he),we}function J(ee,he){var se=this,we=new f(function(Ie,ve){se.ready().then(function(){W(se._dbInfo,E,function(We,it){if(We)return ve(We);try{var ut=it.objectStore(se._dbInfo.storeName),lt=ut.openCursor(),yt=1;lt.onsuccess=function(){var Lt=lt.result;if(Lt){var $n=Lt.value;q($n)&&($n=H($n));var Xt=ee($n,Lt.key,yt++);Xt!==void 0?Ie(Xt):Lt.continue()}else Ie()},lt.onerror=function(){ve(lt.error)}}catch(Lt){ve(Lt)}})}).catch(ve)});return d(we,he),we}function ue(ee,he,se){var we=this;ee=p(ee);var Ie=new f(function(ve,We){var it;we.ready().then(function(){return it=we._dbInfo,w.call(he)==="[object Blob]"?I(it.db).then(function(ut){return ut?he:B(he)}):he}).then(function(ut){W(we._dbInfo,S,function(lt,yt){if(lt)return We(lt);try{var Lt=yt.objectStore(we._dbInfo.storeName);ut===null&&(ut=void 0);var $n=Lt.put(ut,ee);yt.oncomplete=function(){ut===void 0&&(ut=null),ve(ut)},yt.onabort=yt.onerror=function(){var Xt=$n.error?$n.error:$n.transaction.error;We(Xt)}}catch(Xt){We(Xt)}})}).catch(We)});return d(Ie,se),Ie}function _e(ee,he){var se=this;ee=p(ee);var we=new f(function(Ie,ve){se.ready().then(function(){W(se._dbInfo,S,function(We,it){if(We)return ve(We);try{var ut=it.objectStore(se._dbInfo.storeName),lt=ut.delete(ee);it.oncomplete=function(){Ie()},it.onerror=function(){ve(lt.error)},it.onabort=function(){var yt=lt.error?lt.error:lt.transaction.error;ve(yt)}}catch(yt){ve(yt)}})}).catch(ve)});return d(we,he),we}function be(ee){var he=this,se=new f(function(we,Ie){he.ready().then(function(){W(he._dbInfo,S,function(ve,We){if(ve)return Ie(ve);try{var it=We.objectStore(he._dbInfo.storeName),ut=it.clear();We.oncomplete=function(){we()},We.onabort=We.onerror=function(){var lt=ut.error?ut.error:ut.transaction.error;Ie(lt)}}catch(lt){Ie(lt)}})}).catch(Ie)});return d(se,ee),se}function xe(ee){var he=this,se=new f(function(we,Ie){he.ready().then(function(){W(he._dbInfo,E,function(ve,We){if(ve)return Ie(ve);try{var it=We.objectStore(he._dbInfo.storeName),ut=it.count();ut.onsuccess=function(){we(ut.result)},ut.onerror=function(){Ie(ut.error)}}catch(lt){Ie(lt)}})}).catch(Ie)});return d(se,ee),se}function ke(ee,he){var se=this,we=new f(function(Ie,ve){if(ee<0){Ie(null);return}se.ready().then(function(){W(se._dbInfo,E,function(We,it){if(We)return ve(We);try{var ut=it.objectStore(se._dbInfo.storeName),lt=!1,yt=ut.openKeyCursor();yt.onsuccess=function(){var Lt=yt.result;if(!Lt){Ie(null);return}ee===0||lt?Ie(Lt.key):(lt=!0,Lt.advance(ee))},yt.onerror=function(){ve(yt.error)}}catch(Lt){ve(Lt)}})}).catch(ve)});return d(we,he),we}function je(ee){var he=this,se=new f(function(we,Ie){he.ready().then(function(){W(he._dbInfo,E,function(ve,We){if(ve)return Ie(ve);try{var it=We.objectStore(he._dbInfo.storeName),ut=it.openKeyCursor(),lt=[];ut.onsuccess=function(){var yt=ut.result;if(!yt){we(lt);return}lt.push(yt.key),yt.continue()},ut.onerror=function(){Ie(ut.error)}}catch(yt){Ie(yt)}})}).catch(Ie)});return d(se,ee),se}function Re(ee,he){he=m.apply(this,arguments);var se=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName);var we=this,Ie;if(!ee.name)Ie=f.reject("Invalid arguments");else{var ve=ee.name===se.name&&we._dbInfo.db,We=ve?f.resolve(we._dbInfo.db):M(ee).then(function(it){var ut=b[ee.name],lt=ut.forages;ut.db=it;for(var yt=0;yt<lt.length;yt++)lt[yt]._dbInfo.db=it;return it});ee.storeName?Ie=We.then(function(it){if(it.objectStoreNames.contains(ee.storeName)){var ut=it.version+1;R(ee);var lt=b[ee.name],yt=lt.forages;it.close();for(var Lt=0;Lt<yt.length;Lt++){var $n=yt[Lt];$n._dbInfo.db=null,$n._dbInfo.version=ut}var Xt=new f(function(nr,Ur){var br=u.open(ee.name,ut);br.onerror=function(Co){var xc=br.result;xc.close(),Ur(Co)},br.onupgradeneeded=function(){var Co=br.result;Co.deleteObjectStore(ee.storeName)},br.onsuccess=function(){var Co=br.result;Co.close(),nr(Co)}});return Xt.then(function(nr){lt.db=nr;for(var Ur=0;Ur<yt.length;Ur++){var br=yt[Ur];br._dbInfo.db=nr,P(br._dbInfo)}}).catch(function(nr){throw(D(ee,nr)||f.resolve()).catch(function(){}),nr})}}):Ie=We.then(function(it){R(ee);var ut=b[ee.name],lt=ut.forages;it.close();for(var yt=0;yt<lt.length;yt++){var Lt=lt[yt];Lt._dbInfo.db=null}var $n=new f(function(Xt,nr){var Ur=u.deleteDatabase(ee.name);Ur.onerror=function(){var br=Ur.result;br&&br.close(),nr(Ur.error)},Ur.onblocked=function(){console.warn('dropInstance blocked for database "'+ee.name+'" until all open connections are closed')},Ur.onsuccess=function(){var br=Ur.result;br&&br.close(),Xt(br)}});return $n.then(function(Xt){ut.db=Xt;for(var nr=0;nr<lt.length;nr++){var Ur=lt[nr];P(Ur._dbInfo)}}).catch(function(Xt){throw(D(ee,Xt)||f.resolve()).catch(function(){}),Xt})})}return d(Ie,he),Ie}var ft={_driver:"asyncStorage",_initStorage:V,_support:l(),iterate:J,getItem:K,setItem:ue,removeItem:_e,clear:be,length:xe,key:ke,keys:je,dropInstance:Re};function Ze(){return typeof openDatabase=="function"}var It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bt="~~local_forage_type~",Ae=/^~~local_forage_type~([^~]+)~/,Be="__lfsc__:",st=Be.length,_t="arbf",jt="blob",ot="si08",Se="ui08",kt="uic8",Rt="si16",Te="si32",$e="ur16",rt="ui32",St="fl32",Mt="fl64",Zn=st+_t.length,Br=Object.prototype.toString;function er(ee){var he=ee.length*.75,se=ee.length,we,Ie=0,ve,We,it,ut;ee[ee.length-1]==="="&&(he--,ee[ee.length-2]==="="&&he--);var lt=new ArrayBuffer(he),yt=new Uint8Array(lt);for(we=0;we<se;we+=4)ve=It.indexOf(ee[we]),We=It.indexOf(ee[we+1]),it=It.indexOf(ee[we+2]),ut=It.indexOf(ee[we+3]),yt[Ie++]=ve<<2|We>>4,yt[Ie++]=(We&15)<<4|it>>2,yt[Ie++]=(it&3)<<6|ut&63;return lt}function yr(ee){var he=new Uint8Array(ee),se="",we;for(we=0;we<he.length;we+=3)se+=It[he[we]>>2],se+=It[(he[we]&3)<<4|he[we+1]>>4],se+=It[(he[we+1]&15)<<2|he[we+2]>>6],se+=It[he[we+2]&63];return he.length%3===2?se=se.substring(0,se.length-1)+"=":he.length%3===1&&(se=se.substring(0,se.length-2)+"=="),se}function kn(ee,he){var se="";if(ee&&(se=Br.call(ee)),ee&&(se==="[object ArrayBuffer]"||ee.buffer&&Br.call(ee.buffer)==="[object ArrayBuffer]")){var we,Ie=Be;ee instanceof ArrayBuffer?(we=ee,Ie+=_t):(we=ee.buffer,se==="[object Int8Array]"?Ie+=ot:se==="[object Uint8Array]"?Ie+=Se:se==="[object Uint8ClampedArray]"?Ie+=kt:se==="[object Int16Array]"?Ie+=Rt:se==="[object Uint16Array]"?Ie+=$e:se==="[object Int32Array]"?Ie+=Te:se==="[object Uint32Array]"?Ie+=rt:se==="[object Float32Array]"?Ie+=St:se==="[object Float64Array]"?Ie+=Mt:he(new Error("Failed to get type for BinaryArray"))),he(Ie+yr(we))}else if(se==="[object Blob]"){var ve=new FileReader;ve.onload=function(){var We=bt+ee.type+"~"+yr(this.result);he(Be+jt+We)},ve.readAsArrayBuffer(ee)}else try{he(JSON.stringify(ee))}catch(We){console.error("Couldn't convert value into a JSON string: ",ee),he(null,We)}}function Un(ee){if(ee.substring(0,st)!==Be)return JSON.parse(ee);var he=ee.substring(Zn),se=ee.substring(st,Zn),we;if(se===jt&&Ae.test(he)){var Ie=he.match(Ae);we=Ie[1],he=he.substring(Ie[0].length)}var ve=er(he);switch(se){case _t:return ve;case jt:return c([ve],{type:we});case ot:return new Int8Array(ve);case Se:return new Uint8Array(ve);case kt:return new Uint8ClampedArray(ve);case Rt:return new Int16Array(ve);case $e:return new Uint16Array(ve);case Te:return new Int32Array(ve);case rt:return new Uint32Array(ve);case St:return new Float32Array(ve);case Mt:return new Float64Array(ve);default:throw new Error("Unkown type: "+se)}}var pr={serialize:kn,deserialize:Un,stringToBuffer:er,bufferToString:yr};function Tr(ee,he,se,we){ee.executeSql("CREATE TABLE IF NOT EXISTS "+he.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],se,we)}function Yo(ee){var he=this,se={db:null};if(ee)for(var we in ee)se[we]=typeof ee[we]!="string"?ee[we].toString():ee[we];var Ie=new f(function(ve,We){try{se.db=openDatabase(se.name,String(se.version),se.description,se.size)}catch(it){return We(it)}se.db.transaction(function(it){Tr(it,se,function(){he._dbInfo=se,ve()},function(ut,lt){We(lt)})},We)});return se.serializer=pr,Ie}function us(ee,he,se,we,Ie,ve){ee.executeSql(se,we,Ie,function(We,it){it.code===it.SYNTAX_ERR?We.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[he.storeName],function(ut,lt){lt.rows.length?ve(ut,it):Tr(ut,he,function(){ut.executeSql(se,we,Ie,ve)},ve)},ve):ve(We,it)},ve)}function Vn(ee,he){var se=this;ee=p(ee);var we=new f(function(Ie,ve){se.ready().then(function(){var We=se._dbInfo;We.db.transaction(function(it){us(it,We,"SELECT * FROM "+We.storeName+" WHERE key = ? LIMIT 1",[ee],function(ut,lt){var yt=lt.rows.length?lt.rows.item(0).value:null;yt&&(yt=We.serializer.deserialize(yt)),Ie(yt)},function(ut,lt){ve(lt)})})}).catch(ve)});return d(we,he),we}function Yi(ee,he){var se=this,we=new f(function(Ie,ve){se.ready().then(function(){var We=se._dbInfo;We.db.transaction(function(it){us(it,We,"SELECT * FROM "+We.storeName,[],function(ut,lt){for(var yt=lt.rows,Lt=yt.length,$n=0;$n<Lt;$n++){var Xt=yt.item($n),nr=Xt.value;if(nr&&(nr=We.serializer.deserialize(nr)),nr=ee(nr,Xt.key,$n+1),nr!==void 0){Ie(nr);return}}Ie()},function(ut,lt){ve(lt)})})}).catch(ve)});return d(we,he),we}function ri(ee,he,se,we){var Ie=this;ee=p(ee);var ve=new f(function(We,it){Ie.ready().then(function(){he===void 0&&(he=null);var ut=he,lt=Ie._dbInfo;lt.serializer.serialize(he,function(yt,Lt){Lt?it(Lt):lt.db.transaction(function($n){us($n,lt,"INSERT OR REPLACE INTO "+lt.storeName+" (key, value) VALUES (?, ?)",[ee,yt],function(){We(ut)},function(Xt,nr){it(nr)})},function($n){if($n.code===$n.QUOTA_ERR){if(we>0){We(ri.apply(Ie,[ee,ut,se,we-1]));return}it($n)}})})}).catch(it)});return d(ve,se),ve}function Ns(ee,he,se){return ri.apply(this,[ee,he,se,1])}function Sd(ee,he){var se=this;ee=p(ee);var we=new f(function(Ie,ve){se.ready().then(function(){var We=se._dbInfo;We.db.transaction(function(it){us(it,We,"DELETE FROM "+We.storeName+" WHERE key = ?",[ee],function(){Ie()},function(ut,lt){ve(lt)})})}).catch(ve)});return d(we,he),we}function Pu(ee){var he=this,se=new f(function(we,Ie){he.ready().then(function(){var ve=he._dbInfo;ve.db.transaction(function(We){us(We,ve,"DELETE FROM "+ve.storeName,[],function(){we()},function(it,ut){Ie(ut)})})}).catch(Ie)});return d(se,ee),se}function wc(ee){var he=this,se=new f(function(we,Ie){he.ready().then(function(){var ve=he._dbInfo;ve.db.transaction(function(We){us(We,ve,"SELECT COUNT(key) as c FROM "+ve.storeName,[],function(it,ut){var lt=ut.rows.item(0).c;we(lt)},function(it,ut){Ie(ut)})})}).catch(Ie)});return d(se,ee),se}function Yr(ee,he){var se=this,we=new f(function(Ie,ve){se.ready().then(function(){var We=se._dbInfo;We.db.transaction(function(it){us(it,We,"SELECT key FROM "+We.storeName+" WHERE id = ? LIMIT 1",[ee+1],function(ut,lt){var yt=lt.rows.length?lt.rows.item(0).key:null;Ie(yt)},function(ut,lt){ve(lt)})})}).catch(ve)});return d(we,he),we}function Ki(ee){var he=this,se=new f(function(we,Ie){he.ready().then(function(){var ve=he._dbInfo;ve.db.transaction(function(We){us(We,ve,"SELECT key FROM "+ve.storeName,[],function(it,ut){for(var lt=[],yt=0;yt<ut.rows.length;yt++)lt.push(ut.rows.item(yt).key);we(lt)},function(it,ut){Ie(ut)})})}).catch(Ie)});return d(se,ee),se}function Ti(ee){return new f(function(he,se){ee.transaction(function(we){we.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ie,ve){for(var We=[],it=0;it<ve.rows.length;it++)We.push(ve.rows.item(it).name);he({db:ee,storeNames:We})},function(Ie,ve){se(ve)})},function(we){se(we)})})}function Ko(ee,he){he=m.apply(this,arguments);var se=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName);var we=this,Ie;return ee.name?Ie=new f(function(ve){var We;ee.name===se.name?We=we._dbInfo.db:We=openDatabase(ee.name,"","",0),ee.storeName?ve({db:We,storeNames:[ee.storeName]}):ve(Ti(We))}).then(function(ve){return new f(function(We,it){ve.db.transaction(function(ut){function lt(Xt){return new f(function(nr,Ur){ut.executeSql("DROP TABLE IF EXISTS "+Xt,[],function(){nr()},function(br,Co){Ur(Co)})})}for(var yt=[],Lt=0,$n=ve.storeNames.length;Lt<$n;Lt++)yt.push(lt(ve.storeNames[Lt]));f.all(yt).then(function(){We()}).catch(function(Xt){it(Xt)})},function(ut){it(ut)})})}):Ie=f.reject("Invalid arguments"),d(Ie,he),Ie}var ba={_driver:"webSQLStorage",_initStorage:Yo,_support:Ze(),iterate:Yi,getItem:Vn,setItem:Ns,removeItem:Sd,clear:Pu,length:wc,key:Yr,keys:Ki,dropInstance:Ko};function Eo(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function pe(ee,he){var se=ee.name+"/";return ee.storeName!==he.storeName&&(se+=ee.storeName+"/"),se}function ae(){var ee="_localforage_support_test";try{return localStorage.setItem(ee,!0),localStorage.removeItem(ee),!1}catch{return!0}}function me(){return!ae()||localStorage.length>0}function Le(ee){var he=this,se={};if(ee)for(var we in ee)se[we]=ee[we];return se.keyPrefix=pe(ee,he._defaultConfig),me()?(he._dbInfo=se,se.serializer=pr,f.resolve()):f.reject()}function Me(ee){var he=this,se=he.ready().then(function(){for(var we=he._dbInfo.keyPrefix,Ie=localStorage.length-1;Ie>=0;Ie--){var ve=localStorage.key(Ie);ve.indexOf(we)===0&&localStorage.removeItem(ve)}});return d(se,ee),se}function wt(ee,he){var se=this;ee=p(ee);var we=se.ready().then(function(){var Ie=se._dbInfo,ve=localStorage.getItem(Ie.keyPrefix+ee);return ve&&(ve=Ie.serializer.deserialize(ve)),ve});return d(we,he),we}function Ut(ee,he){var se=this,we=se.ready().then(function(){for(var Ie=se._dbInfo,ve=Ie.keyPrefix,We=ve.length,it=localStorage.length,ut=1,lt=0;lt<it;lt++){var yt=localStorage.key(lt);if(yt.indexOf(ve)===0){var Lt=localStorage.getItem(yt);if(Lt&&(Lt=Ie.serializer.deserialize(Lt)),Lt=ee(Lt,yt.substring(We),ut++),Lt!==void 0)return Lt}}});return d(we,he),we}function dn(ee,he){var se=this,we=se.ready().then(function(){var Ie=se._dbInfo,ve;try{ve=localStorage.key(ee)}catch{ve=null}return ve&&(ve=ve.substring(Ie.keyPrefix.length)),ve});return d(we,he),we}function tr(ee){var he=this,se=he.ready().then(function(){for(var we=he._dbInfo,Ie=localStorage.length,ve=[],We=0;We<Ie;We++){var it=localStorage.key(We);it.indexOf(we.keyPrefix)===0&&ve.push(it.substring(we.keyPrefix.length))}return ve});return d(se,ee),se}function cr(ee){var he=this,se=he.keys().then(function(we){return we.length});return d(se,ee),se}function On(ee,he){var se=this;ee=p(ee);var we=se.ready().then(function(){var Ie=se._dbInfo;localStorage.removeItem(Ie.keyPrefix+ee)});return d(we,he),we}function Cr(ee,he,se){var we=this;ee=p(ee);var Ie=we.ready().then(function(){he===void 0&&(he=null);var ve=he;return new f(function(We,it){var ut=we._dbInfo;ut.serializer.serialize(he,function(lt,yt){if(yt)it(yt);else try{localStorage.setItem(ut.keyPrefix+ee,lt),We(ve)}catch(Lt){(Lt.name==="QuotaExceededError"||Lt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&it(Lt),it(Lt)}})})});return d(Ie,se),Ie}function ii(ee,he){if(he=m.apply(this,arguments),ee=typeof ee!="function"&&ee||{},!ee.name){var se=this.config();ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName}var we=this,Ie;return ee.name?Ie=new f(function(ve){ee.storeName?ve(pe(ee,we._defaultConfig)):ve(ee.name+"/")}).then(function(ve){for(var We=localStorage.length-1;We>=0;We--){var it=localStorage.key(We);it.indexOf(ve)===0&&localStorage.removeItem(it)}}):Ie=f.reject("Invalid arguments"),d(Ie,he),Ie}var on={_driver:"localStorageWrapper",_initStorage:Le,_support:Eo(),iterate:Ut,getItem:wt,setItem:Cr,removeItem:On,clear:Me,length:cr,key:dn,keys:tr,dropInstance:ii},Ar=function(he,se){return he===se||typeof he=="number"&&typeof se=="number"&&isNaN(he)&&isNaN(se)},Kr=function(he,se){for(var we=he.length,Ie=0;Ie<we;){if(Ar(he[Ie],se))return!0;Ie++}return!1},vr=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},Ci={},lo={},Ai={INDEXEDDB:ft,WEBSQL:ba,LOCALSTORAGE:on},So=[Ai.INDEXEDDB._driver,Ai.WEBSQL._driver,Ai.LOCALSTORAGE._driver],Xi=["dropInstance"],Qi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Xi),To={description:"",driver:So.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function _a(ee,he){ee[he]=function(){var se=arguments;return ee.ready().then(function(){return ee[he].apply(ee,se)})}}function co(){for(var ee=1;ee<arguments.length;ee++){var he=arguments[ee];if(he)for(var se in he)he.hasOwnProperty(se)&&(vr(he[se])?arguments[0][se]=he[se].slice():arguments[0][se]=he[se])}return arguments[0]}var _l=function(){function ee(he){o(this,ee);for(var se in Ai)if(Ai.hasOwnProperty(se)){var we=Ai[se],Ie=we._driver;this[se]=Ie,Ci[Ie]||this.defineDriver(we)}this._defaultConfig=co({},To),this._config=co({},this._defaultConfig,he),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ee.prototype.config=function(se){if((typeof se>"u"?"undefined":s(se))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var we in se){if(we==="storeName"&&(se[we]=se[we].replace(/\W/g,"_")),we==="version"&&typeof se[we]!="number")return new Error("Database version must be a number.");this._config[we]=se[we]}return"driver"in se&&se.driver?this.setDriver(this._config.driver):!0}else return typeof se=="string"?this._config[se]:this._config},ee.prototype.defineDriver=function(se,we,Ie){var ve=new f(function(We,it){try{var ut=se._driver,lt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!se._driver){it(lt);return}for(var yt=Qi.concat("_initStorage"),Lt=0,$n=yt.length;Lt<$n;Lt++){var Xt=yt[Lt],nr=!Kr(Xi,Xt);if((nr||se[Xt])&&typeof se[Xt]!="function"){it(lt);return}}var Ur=function(){for(var xc=function(Du){return function(){var Wa=new Error("Method "+Du+" is not implemented by the current driver"),Cd=f.reject(Wa);return d(Cd,arguments[arguments.length-1]),Cd}},Td=0,sy=Xi.length;Td<sy;Td++){var Zh=Xi[Td];se[Zh]||(se[Zh]=xc(Zh))}};Ur();var br=function(xc){Ci[ut]&&console.info("Redefining LocalForage driver: "+ut),Ci[ut]=se,lo[ut]=xc,We()};"_support"in se?se._support&&typeof se._support=="function"?se._support().then(br,it):br(!!se._support):br(!0)}catch(Co){it(Co)}});return h(ve,we,Ie),ve},ee.prototype.driver=function(){return this._driver||null},ee.prototype.getDriver=function(se,we,Ie){var ve=Ci[se]?f.resolve(Ci[se]):f.reject(new Error("Driver not found."));return h(ve,we,Ie),ve},ee.prototype.getSerializer=function(se){var we=f.resolve(pr);return h(we,se),we},ee.prototype.ready=function(se){var we=this,Ie=we._driverSet.then(function(){return we._ready===null&&(we._ready=we._initDriver()),we._ready});return h(Ie,se,se),Ie},ee.prototype.setDriver=function(se,we,Ie){var ve=this;vr(se)||(se=[se]);var We=this._getSupportedDrivers(se);function it(){ve._config.driver=ve.driver()}function ut(Lt){return ve._extend(Lt),it(),ve._ready=ve._initStorage(ve._config),ve._ready}function lt(Lt){return function(){var $n=0;function Xt(){for(;$n<Lt.length;){var nr=Lt[$n];return $n++,ve._dbInfo=null,ve._ready=null,ve.getDriver(nr).then(ut).catch(Xt)}it();var Ur=new Error("No available storage method found.");return ve._driverSet=f.reject(Ur),ve._driverSet}return Xt()}}var yt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=yt.then(function(){var Lt=We[0];return ve._dbInfo=null,ve._ready=null,ve.getDriver(Lt).then(function($n){ve._driver=$n._driver,it(),ve._wrapLibraryMethodsWithReady(),ve._initDriver=lt(We)})}).catch(function(){it();var Lt=new Error("No available storage method found.");return ve._driverSet=f.reject(Lt),ve._driverSet}),h(this._driverSet,we,Ie),this._driverSet},ee.prototype.supports=function(se){return!!lo[se]},ee.prototype._extend=function(se){co(this,se)},ee.prototype._getSupportedDrivers=function(se){for(var we=[],Ie=0,ve=se.length;Ie<ve;Ie++){var We=se[Ie];this.supports(We)&&we.push(We)}return we},ee.prototype._wrapLibraryMethodsWithReady=function(){for(var se=0,we=Qi.length;se<we;se++)_a(this,Qi[se])},ee.prototype.createInstance=function(se){return new ee(se)},ee}(),gf=new _l;r.exports=gf},{3:3}]},{},[4])(4)})})(J6e);var xqt=J6e.exports;const AE=cf(xqt);var Sa=[];for(var qz=0;qz<256;++qz)Sa.push((qz+256).toString(16).slice(1));function Eqt(e,t=0){return(Sa[e[t+0]]+Sa[e[t+1]]+Sa[e[t+2]]+Sa[e[t+3]]+"-"+Sa[e[t+4]]+Sa[e[t+5]]+"-"+Sa[e[t+6]]+Sa[e[t+7]]+"-"+Sa[e[t+8]]+Sa[e[t+9]]+"-"+Sa[e[t+10]]+Sa[e[t+11]]+Sa[e[t+12]]+Sa[e[t+13]]+Sa[e[t+14]]+Sa[e[t+15]]).toLowerCase()}var O3,Sqt=new Uint8Array(16);function Tqt(){if(!O3&&(O3=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O3))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O3(Sqt)}var Cqt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Qve={randomUUID:Cqt};function vF(e,t,n){if(Qve.randomUUID&&!t&&!e)return Qve.randomUUID();e=e||{};var r=e.random||(e.rng||Tqt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Eqt(r)}class Z6e{constructor(t){Fu(this,"engine");Fu(this,"connected",!1);Fu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function bF(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function C2(e){return e.participantId!==void 0}class Uf extends Z6e{constructor(){super("firebase");Fu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");Fu(this,"firestore");Fu(this,"collectionPrefix","prod-");Fu(this,"studyCollection");Fu(this,"storage");Fu(this,"studyId","");Fu(this,"localForage",AE.createInstance({name:"currentParticipantId"}));Fu(this,"participantData",null);Fu(this,"userManagementData",{});const n=Nj.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=yMe(n);this.firestore=vHt(r,{}),this.storage=A7t();try{vqt(r,{provider:new Fre(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await bHt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=fF();if(!i.currentUser&&(await WBt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Fd(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await bF(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.setcurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(C2(a))return this.participantData=a,a;const l=await bF(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Os(this.studyCollection,"configHash"),r=await R3(n);return r.exists()?r.data().configHash:null}async setcurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Os(this.studyCollection,"configHash");await zu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=kf(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=vF(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Os(this.studyCollection,"sequenceAssignment");await zu(i,{});const s=Fd(i,"sequenceAssignment"),o=Os(s,this.currentParticipantId),a=Uve(s,AHt("participantId","==","")),u=await T2(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await DHt(m.ref),await zu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await zu(o,{participantId:this.currentParticipantId,timestamp:MHt()});const l=Uve(s,IHt("timestamp","asc")),d=(await T2(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=kf(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await E2(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");C2(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return C2(n)?n:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=vF();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Fd(this.firestore,"user-management"),i=await T2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await zu(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await zu(Os(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await zu(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await zu(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await zu(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=kf(this.storage,`${this.collectionPrefix}${n}/participants`),i=await E2(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");C2(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Fd(this.firestore,`${this.collectionPrefix}${n}`),o=kf(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!C2(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Os(s,"sequenceAssignment"),l=Fd(u,"sequenceAssignment"),c=Os(l,r);await PHt(c,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Os(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await zu(s,{[r]:i},{merge:!0})}async getModes(n){const r=Os(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await R3(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await zu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Os(this.firestore,"metadata","collections"),i=await R3(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Os(this.firestore,"metadata","collections");await zu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Os(this.firestore,"metadata","collections");return await zu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Os(this.firestore,"metadata","collections"),i=await R3(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await zu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=kf(this.storage,n),s=(await E2(r)).items.map(o=>ive(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=kf(this.storage,n),o=(await E2(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=kf(this.storage,n),s=kf(this.storage,r),o=await Fz(i),u=await(await fetch(o)).blob();await T3(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Fd(this.firestore,n),s=Os(i,"sequenceAssignment"),o=Fd(s,"sequenceAssignment"),a=Fd(this.firestore,r),u=Os(a,"sequenceAssignment");await zu(u,{});const l=Fd(u,"sequenceAssignment"),c=await T2(o),f=Hve(this.firestore);c.docs.forEach(d=>{const h=Os(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Fd(this.firestore,n),i=Os(r,"sequenceAssignment"),s=Fd(i,"sequenceAssignment"),o=await T2(s),a=Hve(this.firestore);o.forEach(u=>{const l=Os(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=kf(this.storage,n);return(await E2(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=kf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Fz(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Fz(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=kf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await T3(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await T3(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await T3(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=kf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await ive(i)}}const eFe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),sx=()=>N.useContext(eFe);function Aqt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=xo(),l=async()=>{const h=fF();try{await ZBt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;N.useEffect(()=>{s(t);let h;if(u instanceof Uf)try{h=fF()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const b={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,s(b)}else l()},g=(async()=>{if(u instanceof Uf){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const b=JBt(h,async w=>await p(w));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(eFe.Provider,{value:d,children:i.determiningStatus?_.jsx(Qc,{visible:!0}):e})}function Ik({studyIds:e}){const t=Fh(),{studyId:n}=c0(),r=N1(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=xo(),{user:o,logout:a}=sx(),[u,l]=N.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(klt,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(_lt,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(mAe,{}),href:"settings",needAdmin:!0}];return _.jsx(ss.Header,{p:"md",children:_.jsxs(Zu,{mt:-7,align:"center",children:[_.jsx(Zu.Col,{span:6,children:_.jsxs(Wt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(R1,{w:40,src:`${il}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Hc,{w:"md"}),_.jsx(vs,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Zu.Col,{span:6,children:_.jsxs(Wt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(qN,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(zQ,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Tm,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Wt,{direction:"column",mt:20,children:[_.jsx(at,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(wn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${il}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(wn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${il}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(Ee,{ml:10,children:[_.jsx(eT,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(at,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(at,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function jre({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=O4(!1),[a,u]=N.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;Hte(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(Pi,{style:{gap:n},children:[_.jsx(Zi,{label:"Download all participants data as JSON",children:_.jsx(wn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(Tlt,{})})}),_.jsx(Zi,{label:"Download all participants data as a tidy CSV",children:_.jsx(wn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(gAe,{})})})]}),i&&a.length>0&&_.jsx(GMt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function Iqt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsx(un.Td,{children:_.jsx(el,{miw:100,children:e.timedOut?_.jsx(at,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>_.jsxs(Ee,{children:[_.jsxs(at,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?_.jsx(at,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):_.jsx(at,{span:!0,children:n})]},`cell-${t}`))})}):_.jsx(un.Td,{children:"N/A"})}function Jve({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=r$e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsxs(un.Td,{children:[t.toFixed(1)," ","s",n&&_.jsxs(_.Fragment,{children:[_.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):_.jsx(un.Td,{children:"N/A"})}function kqt(e){const{metaData:t}=e;return _.jsx(un.Td,{children:_.jsx(mJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(el,{gap:"xs",children:[_.jsxs(Ee,{children:["IP:"," ",t.ip]}),_.jsxs(Ee,{children:["Language:"," ",t.language]}),_.jsxs(Ee,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ee,{children:["User Agent:"," ",t.userAgent]})]})})})}function Rqt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=xo(),{studyId:o}=c0(),{user:a}=sx(),u=async(C,I)=>{if(s&&o)if(a.isAdmin){const R=I===""?"Rejected by admin":I;await s.rejectParticipant(o,C,R),await i()}else console.warn("You are not authorized to perform this action.")},[l,c]=N.useState([]),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(""),y=async()=>{d(!0),p(!1);const C=l.map(async I=>await u(I,m));await Promise.all(C),c([]),await i(),d(!1)},b=N.useMemo(()=>[...e,...t,...n],[e,t,n]);function w(C){C==="all"?l.length===b.length?c([]):c(b.map(I=>I.participantId)):l.includes(C)?c(l.filter(I=>I!==C)):c([...l,C])}const E=pIe(r.sequence),S=[_.jsx(un.Th,{children:_.jsx(Wt,{justify:"center",children:_.jsx(ql,{mb:-4,checked:l.length===b.length,onChange:()=>w("all")})})},"action"),_.jsx(un.Th,{children:"ID"},"ID"),_.jsx(un.Th,{children:"Status"},"status"),_.jsx(un.Th,{children:"Tags"},"tags"),_.jsx(un.Th,{children:"Meta"},"meta"),...E.flatMap(C=>[_.jsx(un.Th,{children:C.componentName},`header-${C.componentName}-${C.timesSeenInBlock}`),_.jsxs(un.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:C.componentName})," ","Duration (clean)"]},`header-${C.componentName}-${C.timesSeenInBlock}-duration`)]),_.jsx(un.Th,{children:"Total Duration (clean)"},"total-duration")],T=b.map(C=>_.jsxs(un.Tr,{children:[_.jsx(un.Td,{children:_.jsx(Wt,{justify:"center",children:_.jsx(ql,{mb:-4,checked:l.includes(C.participantId),onChange:()=>w(C.participantId)})})}),_.jsx(un.Td,{style:{whiteSpace:"nowrap"},children:C.participantId}),_.jsx(un.Td,{children:_.jsxs(Wt,{direction:"column",miw:100,children:[_.jsxs(Wt,{direction:"row",align:"center",children:[C.rejected?_.jsx(Zi,{label:"Rejected",children:_.jsx(PJ,{size:16,color:"red",style:{marginBottom:-3}})}):C.completed?_.jsx(Zi,{label:"Completed",children:_.jsx(hAe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(Zi,{label:"In Progress",children:_.jsx(pAe,{size:16,color:"orange",style:{marginBottom:-3}})}),!C.completed&&_.jsxs(at,{size:"sm",mb:-1,ml:4,children:[(Object.entries(C.answers).filter(([I,R])=>R.endTime!==-1&&R.endTime!==void 0).length/(h0(C.sequence).length-1)*100).toFixed(2),"%"]})]}),C.rejected&&_.jsx(at,{mt:5,fz:10,children:C.rejected.reason})]})}),_.jsx(un.Td,{children:_.jsx(Wt,{direction:"column",miw:100,children:(C.participantTags||[]).map(I=>_.jsxs(at,{fz:10,children:["-"," ",I]},`tag-${I}`))})}),C.metadata?_.jsx(kqt,{metaData:C.metadata}):_.jsx(un.Td,{children:"N/A"}),E.map(I=>{const R=iZ(C.sequence,I.orderPath),P=R&&Object.entries(C.answers).sort((D,L)=>{const M=parseInt(D[0].slice(D[0].lastIndexOf("_")+1),10),F=parseInt(L[0].slice(L[0].lastIndexOf("_")+1),10);return M-F}).filter(([D])=>{const L=D.slice(0,D.lastIndexOf("_")),M=parseInt(D.slice(D.lastIndexOf("_")+1),10);return L===I.componentName&&M<=R[0].lastIndex&&M>=R[0].firstIndex});return P!==null&&P.length>=I.timesSeenInBlock+1&&P[I.timesSeenInBlock][1].endTime!==-1?_.jsxs(ci.Fragment,{children:[_.jsx(Iqt,{cellData:P[I.timesSeenInBlock][1]}),_.jsx(Jve,{cellData:P[I.timesSeenInBlock][1]})]},`cellgroup-${C.participantId}-${I.componentName}-${I.timesSeenInBlock}`):_.jsxs(ci.Fragment,{children:[_.jsx(un.Td,{children:"N/A"}),_.jsx(un.Td,{children:"N/A"})]},`cellgroup-${C.participantId}-${I.componentName}-${I.timesSeenInBlock}`)}),_.jsx(Jve,{cellData:{startTime:Math.min(...Object.values(C.answers).filter(I=>I.endTime!==-1&&I.endTime!==void 0).map(I=>I.startTime)),endTime:Math.max(...Object.values(C.answers).filter(I=>I.endTime!==-1&&I.endTime!==void 0).map(I=>I.endTime)),answer:{},windowEvents:Object.values(C.answers).flatMap(I=>I.windowEvents),timedOut:!1}},`cell-${C.participantId}-total-duration`)]},C.participantId));return b.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Qc,{visible:f,overlayProps:{blur:2}}),_.jsxs(Wt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Pi,{children:_.jsx(qN,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:b.map(C=>({value:C.participantId,label:C.participantId})),searchable:!0,value:null,leftSection:_.jsx(Blt,{size:14}),onChange:C=>C&&w(C)})}),_.jsxs(Pi,{children:[_.jsx(jre,{allParticipants:b,studyId:o||""}),_.jsxs(wn,{disabled:l.length===0||!a.isAdmin,onClick:()=>p(!0),color:"red",children:["Reject Participants (",l.length,")"]})]})]}),_.jsx(Wt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(un,{striped:!0,withTableBorder:!0,children:[_.jsx(un.Thead,{children:_.jsx(un.Tr,{children:S})}),_.jsx(un.Tbody,{children:T})]})}),_.jsxs(Cs,{opened:h,onClose:()=>p(!1),title:_.jsxs(at,{children:["Reject Participants (",l.length,")"]}),children:[_.jsx(Pg,{label:"Please enter the reason for rejection.",onChange:C=>g(C.target.value)}),_.jsxs(Wt,{mt:"sm",justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{p(!1),g("")},children:"Cancel"}),_.jsx(wn,{color:"red",onClick:()=>y(),children:"Reject Participants"})]})]})]}):_.jsxs(_.Fragment,{children:[_.jsx(Hc,{h:"xl"}),_.jsx(Wt,{justify:"center",align:"center",children:_.jsx(at,{children:"No data available"})})]})}const Nqt="_root_1spq0_1",Pqt="_description_1spq0_9",Dqt="_title_1spq0_10",Oqt="_closeButton_1spq0_14",$qt={root:Nqt,description:Pqt,title:Dqt,closeButton:Oqt},_F=e=>{const{title:t,message:n,color:r}=e;qw.show({title:t,message:n,position:"top-center",classNames:$qt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function Mqt({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1),[c,f]=N.useState(""),[d,h]=N.useState([]),[p,m]=N.useState(""),[g,y]=N.useState(""),[b,w]=N.useState(!1),[E,S]=N.useState(!1),{storageEngine:T}=xo(),C=T,I=N.useCallback(async()=>{S(!0);const $=await C.getSnapshots(e);h($),S(!1)},[C,e]);N.useEffect(()=>{I()},[I]);const R=async($,...W)=>{w(!0);const X=await $(...W);X.status==="SUCCESS"?(I(),w(!1),await t(),X.notifications&&X.notifications.forEach(V=>{_F(V)})):(w(!1),_F({title:X.error.title,message:X.error.message,color:"red"}))},P=async()=>{await R(C.createSnapshot.bind(C),e,!1)},D=async()=>{m(""),r(!1),await R(C.createSnapshot.bind(C),e,!0)},L=async()=>{a(!1),await R(C.renameSnapshot.bind(C),c,g)},M=async $=>{await R(C.restoreSnapshot.bind(C),e,$)},F=async()=>{m(""),s(!1),await R(C.removeSnapshotOrLive.bind(C),c,!0)},z=async()=>{m(""),l(!1),await R(C.removeSnapshotOrLive.bind(C),e,!0)},B=()=>Vde({title:"Create a Snapshot",children:_.jsx(at,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>P()}),H=$=>Vde({title:"Restore Snapshot",children:_.jsx(at,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M($)}),q=$=>{const W=/-snapshot-(.+)$/,X=$.match(W);return X&&X[1]?X[1].replace("T"," "):null},Y=async $=>{const W=$.slice($.indexOf("-")+1);return await C.getAllParticipantsDataByStudy(W)};return _.jsxs(_.Fragment,{children:[_.jsx(Qc,{visible:b}),_.jsxs(Wt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(vs,{order:5,children:"Create a Snapshot"}),_.jsxs(at,{children:["This will create a snapshot of the live"," ",_.jsx(at,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(at,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Zi,{label:"Create a snapshot",children:_.jsx(wn,{onClick:B,children:"Snapshot"})})]}),_.jsx(Hc,{h:"lg"}),_.jsxs(Wt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(vs,{order:5,children:"Archive Data"}),_.jsxs(at,{children:["This will create a snapshot of the live"," ",_.jsx(at,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Zi,{label:"Snapshot and Delete Data",children:_.jsx(wn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Hc,{h:"lg"}),_.jsxs(Wt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(vs,{order:5,children:"Delete Data"}),_.jsxs(at,{children:["This will delete the live"," ",_.jsx(at,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(Zi,{label:"Delete Data",children:_.jsx(wn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(Hc,{h:"xl"}),_.jsxs(Wt,{direction:"column",children:[_.jsx(Wt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(vs,{order:5,children:"Snapshots"})}),_.jsxs(Ee,{style:{position:"relative"},children:[_.jsx(Qc,{visible:E}),d.length>0?_.jsxs(un,{children:[_.jsx(un.Thead,{children:_.jsxs(un.Tr,{children:[_.jsx(un.Th,{children:"Snapshot Name"}),_.jsx(un.Th,{children:"Date Created"}),_.jsx(un.Th,{children:"Actions"})]})}),_.jsx(un.Tbody,{children:d.map($=>_.jsxs(un.Tr,{children:[_.jsx(un.Td,{children:$.alternateName}),_.jsx(un.Td,{children:q($.originalName)}),_.jsx(un.Td,{children:_.jsxs(Wt,{children:[_.jsx(Zi,{label:"Rename",children:_.jsx(wn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f($.originalName)},children:_.jsx($lt,{})})}),_.jsx(Zi,{label:"Restore Snapshot",children:_.jsx(wn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{H($.originalName)},children:_.jsx(Flt,{})})}),_.jsx(Zi,{label:"Delete Snapshot",children:_.jsx(wn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f($.originalName)},children:_.jsx(yAe,{})})}),_.jsx(jre,{allParticipants:()=>Y($.originalName),studyId:e,gap:"10px",fileName:$.alternateName})]})})]},$.originalName))})]}):_.jsx(at,{children:"No snapshots."})]})]}),_.jsxs(Cs,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(at,{children:"Archive Data"}),children:[_.jsx(at,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(Pg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),_.jsxs(Wt,{mt:"sm",justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(wn,{color:"red",onClick:D,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(Cs,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(at,{children:"Delete Snapshot"}),children:[_.jsxs(at,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(at,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(Pg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),_.jsxs(Wt,{mt:"sm",justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(wn,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(Cs,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(at,{children:"Rename Snapshot"}),children:[_.jsx(Pg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:$=>y($.target.value)}),_.jsxs(Wt,{mt:"sm",justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(wn,{color:"green",onClick:L,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(Cs,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(at,{children:"Delete Live Data"}),children:[_.jsxs(at,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(at,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(at,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(Pg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),_.jsxs(Wt,{mt:"sm",justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(wn,{color:"red",onClick:z,disabled:p!==e,children:"Delete"})]})]})]})}function Lqt({studyId:e}){const{storageEngine:t}=xo(),[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(el,{children:[_.jsx(fS,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(fS,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(fS,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function Fqt({studyId:e,refresh:t}){const{storageEngine:n}=xo();return _.jsx(nd,{children:_.jsxs(Pl,{multiple:!0,variant:"contained",children:[_.jsxs(Pl.Item,{value:"ReVISit Modes",children:[_.jsx(Pl.Control,{children:_.jsx(vs,{order:5,children:"ReVISit Modes"})}),_.jsx(Pl.Panel,{children:_.jsx(Lqt,{studyId:e})})]},"modes"),_.jsxs(Pl.Item,{value:"Data Management",children:[_.jsx(Pl.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(vs,{order:5,children:"Data Management"})}),_.jsx(Pl.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(Mqt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const nE=14;function tFe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Wt,{ml:4,gap:4,children:[_.jsx(Zi,{label:"Completed",children:_.jsx(vv,{variant:"light",color:"green",leftSection:_.jsx(hAe,{width:nE,height:nE,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(Zi,{label:"In Progress",children:_.jsx(vv,{variant:"light",color:"orange",leftSection:_.jsx(pAe,{width:nE,height:nE,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(Zi,{label:"Rejected",children:_.jsx(vv,{variant:"light",color:"red",leftSection:_.jsx(PJ,{width:nE,height:nE,style:{paddingTop:1}}),pb:1,children:n})})]})}const Zve={};function iY(e,t){e===void 0&&(e=Zve),t===void 0&&(t=Zve);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var jqt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bqt=Object.prototype.hasOwnProperty;function Uqt(e,t){return Bqt.call(e,t)}function zqt(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Uqt(e,i)&&r.push(i);return r}function FT(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Vqt(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oY(e[t]))return!0}else if(typeof e=="object"){for(var r=zqt(e),i=r.length,s=0;s<i;s++)if(oY(e[r[s]]))return!0}}return!1}function e1e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Hqt=function(e){jqt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,e1e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=e1e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),mo=Hqt,XE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=aY(n,this.path);r&&(r=FT(r));var i=kk(n,{op:"remove",path:this.from}).removed;return kk(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=aY(n,this.from);return kk(n,{op:"add",path:this.path,value:FT(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:wF(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},qqt={add:function(e,t,n){return sY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:XE.move,copy:XE.copy,test:XE.test,_get:XE._get};function aY(e,t){if(t=="")return e;var n={op:"_get",path:t};return kk(e,n),n.value}function kk(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):uY(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=aY(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=wF(e,t.value),o.test===!1)throw new mo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new mo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=FT(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=uY;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=Vqt(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!sY(h))throw new mo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);sY(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new mo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=qqt[t.op].call(t,l,h,e);if(o.test===!1)throw new mo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=XE[t.op].call(t,l,h,e);if(o.test===!1)throw new mo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new mo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function nFe(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new mo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=FT(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=kk(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function uY(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new mo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(XE[e.op]){if(typeof e.path!="string")throw new mo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new mo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new mo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new mo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oY(e.value))throw new mo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new mo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new mo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=Wqt([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new mo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new mo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Wqt(e,t,n){try{if(!Array.isArray(e))throw new mo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)nFe(FT(t),FT(e),n||!0);else{n=n||uY;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof mo)return i;throw i}}function wF(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!wF(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!wF(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var Gqt=/("(?:[^\\"]|\\.)*")|[:,]/g,Yqt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,b,w,E,S;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),E=JSON.stringify(a,s),E===void 0)return E;if(g=i-u.length-l,E.length<=g&&(b=E.replace(Gqt,function(T,C){return C||T+" "}),b.length<=g))return b;if(s!=null&&(a=JSON.parse(E),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(w="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(w="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",S=o(a[h],y,p.length+(f===g-1?0:1)),S!==void 0&&d.push(p+S);if(d.length>0)return[w,r+d.join(`,
`+y),c].join(`
`+u)}return E}(t,"",0)};const Wz=cf(Yqt);function bc(e,t,n){return e.fields=t||[],e.fname=n,e}function Vs(e){return e==null?null:e.fname}function bu(e){return e==null?null:e.fields}function rFe(e){return e.length===1?Kqt(e[0]):Xqt(e)}const Kqt=e=>function(t){return t[e]},Xqt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Xe(e){throw Error(e)}function Om(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Xe("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Xe("Access path missing closing bracket: "+e),r&&Xe("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function ad(e,t,n){const r=Om(e);return e=r.length===1?r[0]:e,bc((n&&n.get||rFe)(r),[e],t||e)}const HP=ad("id"),Au=bc(e=>e,[],"identity"),Yy=bc(()=>0,[],"zero"),uA=bc(()=>1,[],"one"),ud=bc(()=>!0,[],"true"),Cy=bc(()=>!1,[],"false");function Qqt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const iFe=0,Bre=1,Ure=2,sFe=3,oFe=4;function zre(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qqt,r=e||iFe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Bre&&n(t||"error","ERROR",arguments),this},warn(){return r>=Ure&&n(t||"warn","WARN",arguments),this},info(){return r>=sFe&&n(t||"log","INFO",arguments),this},debug(){return r>=oFe&&n(t||"log","DEBUG",arguments),this}}}var Je=Array.isArray;function Ot(e){return e===Object(e)}const t1e=e=>e!=="__proto__";function lA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Jqt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;cA(r,s,i[s],o)}return r},{})}function cA(e,t,n,r){if(!t1e(t))return;let i,s;if(Ot(n)&&!Je(n)){s=Ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?cA(s,i,n[i]):t1e(i)&&(s[i]=n[i])}else e[t]=n}function Jqt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Mr(e){return e[e.length-1]}function gu(e){return e==null||e===""?null:+e}const aFe=e=>t=>e*Math.exp(t),uFe=e=>t=>Math.log(e*t),lFe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),cFe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,xF=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function l8(e,t,n,r){const i=n(e[0]),s=n(Mr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function fFe(e,t){return l8(e,t,gu,Au)}function dFe(e,t){var n=Math.sign(e[0]);return l8(e,t,uFe(n),aFe(n))}function hFe(e,t,n){return l8(e,t,xF(n),xF(1/n))}function pFe(e,t,n){return l8(e,t,lFe(n),cFe(n))}function c8(e,t,n,r,i){const s=r(e[0]),o=r(Mr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Vre(e,t,n){return c8(e,t,n,gu,Au)}function Hre(e,t,n){const r=Math.sign(e[0]);return c8(e,t,n,uFe(r),aFe(r))}function EF(e,t,n,r){return c8(e,t,n,xF(r),xF(1/r))}function qre(e,t,n,r){return c8(e,t,n,lFe(r),cFe(r))}function mFe(e){return 1+~~(new Date(e).getMonth()/3)}function gFe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Pt(e){return e!=null?Je(e)?e:[e]:[]}function yFe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Gn(e){return typeof e=="function"}const Zqt="descending";function Wre(e,t,n){n=n||{},t=Pt(t)||[];const r=[],i=[],s={},o=n.comparator||eWt;return Pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Zqt?-1:1),i.push(a=Gn(a)?a:ad(a,null,n)),(bu(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:bc(o(i,r),Object.keys(s))}const f8=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),eWt=(e,t)=>e.length===1?tWt(e[0],t[0]):nWt(e,t,e.length),tWt=(e,t)=>function(n,r){return f8(e(n),e(r))*t},nWt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=f8(s(r),s(i));return o*t[a]});function Iu(e){return Gn(e)?e:()=>e}function Gre(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Wn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function ym(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function vFe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const rWt=Object.prototype.hasOwnProperty;function sn(e,t){return rWt.call(e,t)}const $3={};function fA(e){let t={},n;function r(s){return sn(t,s)&&t[s]!==$3}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===$3&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=$3),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==$3&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function bFe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Mr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ct(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Wn(r,n)}function QE(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function W1(e){return typeof e=="boolean"}function Rv(e){return Object.prototype.toString.call(e)==="[object Date]"}function _Fe(e){return e&&Gn(e[Symbol.iterator])}function Gr(e){return typeof e=="number"}function wFe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Dt(e){return typeof e=="string"}function Yre(e,t,n){e&&(e=t?Pt(e).map(a=>a.replace(/\\(.)/g,"$1")):Pt(e));const r=e&&e.length,i=n&&n.get||rFe,s=a=>i(t?[a]:Om(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return bc(o,e,"key")}function xFe(e,t){const n=e[0],r=Mr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const iWt=1e4;function EFe(e){e=+e||iWt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>sn(t,o)||sn(n,o),get:o=>sn(t,o)?t[o]:sn(n,o)?s(o,n[o]):void 0,set:(o,a)=>sn(t,o)?t[o]=a:s(o,a)}}function SFe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function EI(e,t){let n="";for(;--t>=0;)n+=e;return n}function TFe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?EI(i,o)+s:r==="center"?EI(i,~~(o/2))+s+EI(i,Math.ceil(o/2)):s+EI(i,o)}function qP(e){return e&&Mr(e)-e[0]||0}function Et(e){return Je(e)?"["+e.map(Et)+"]":Ot(e)||Dt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Kre(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const sWt=e=>Gr(e)||Rv(e)?e:Date.parse(e);function Xre(e,t){return t=t||sWt,e==null||e===""?null:t(e)}function Qre(e){return e==null||e===""?null:e+""}function Dh(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function CFe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function $y(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function oWt(e){return e}function aWt(e){if(e==null)return oWt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function uWt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function lWt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return n1e(e,n)})}:n1e(e,t)}function n1e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=AFe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function AFe(e,t){var n=aWt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&uWt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function cWt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function fWt(e){return AFe(e,dWt.apply(this,arguments))}function dWt(e,t,n){var r,i,s;if(arguments.length>1)r=hWt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:cWt(e,r)}}function hWt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const ja="year",hc="quarter",_u="month",jo="week",pc="date",mu="day",vm="dayofyear",sf="hours",of="minutes",ld="seconds",Oh="milliseconds",Jre=[ja,hc,_u,jo,pc,mu,vm,sf,of,ld,Oh],Gz=Jre.reduce((e,t,n)=>(e[t]=1+n,e),{});function Zre(e){const t=Pt(e).slice(),n={};return t.length||Xe("Missing time unit."),t.forEach(i=>{sn(Gz,i)?n[i]=1:Xe(`Invalid time unit: ${i}.`)}),(n[jo]||n[mu]?1:0)+(n[hc]||n[_u]||n[pc]?1:0)+(n[vm]?1:0)>1&&Xe(`Incompatible time units: ${e}`),t.sort((i,s)=>Gz[i]-Gz[s]),t}const pWt={[ja]:"%Y ",[hc]:"Q%q ",[_u]:"%b ",[pc]:"%d ",[jo]:"W%U ",[mu]:"%a ",[vm]:"%j ",[sf]:"%H:00",[of]:"00:%M",[ld]:":%S",[Oh]:".%L",[`${ja}-${_u}`]:"%Y-%m ",[`${ja}-${_u}-${pc}`]:"%Y-%m-%d ",[`${sf}-${of}`]:"%H:%M"};function IFe(e,t){const n=Wn({},pWt,t),r=Zre(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const r_=new Date;function eie(e){return r_.setFullYear(e),r_.setMonth(0),r_.setDate(1),r_.setHours(0,0,0,0),r_}function kFe(e){return NFe(new Date(e))}function RFe(e){return lY(new Date(e))}function NFe(e){return Yg.count(eie(e.getFullYear())-1,e)}function lY(e){return MC.count(eie(e.getFullYear())-1,e)}function cY(e){return eie(e).getDay()}function mWt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function PFe(e){return OFe(new Date(e))}function DFe(e){return fY(new Date(e))}function OFe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return xv.count(t-1,e)}function fY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return LC.count(t-1,e)}function dY(e){return r_.setTime(Date.UTC(e,0,1)),r_.getUTCDay()}function gWt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function $Fe(e,t,n,r,i){const s=t||1,o=Mr(e),a=(y,b,w)=>(w=w||y,yWt(n[w],r[w],y===o&&s,b)),u=new Date,l=Dh(e),c=l[ja]?a(ja):Iu(2012),f=l[_u]?a(_u):l[hc]?a(hc):Yy,d=l[jo]&&l[mu]?a(mu,1,jo+mu):l[jo]?a(jo,1):l[mu]?a(mu,1):l[pc]?a(pc,1):l[vm]?a(vm,1):uA,h=l[sf]?a(sf):Yy,p=l[of]?a(of):Yy,m=l[ld]?a(ld):Yy,g=l[Oh]?a(Oh):Yy;return function(y){u.setTime(+y);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),g(u))}}function yWt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function jT(e,t,n){return t+e*7-(n+6)%7}const vWt={[ja]:e=>e.getFullYear(),[hc]:e=>Math.floor(e.getMonth()/3),[_u]:e=>e.getMonth(),[pc]:e=>e.getDate(),[sf]:e=>e.getHours(),[of]:e=>e.getMinutes(),[ld]:e=>e.getSeconds(),[Oh]:e=>e.getMilliseconds(),[vm]:e=>NFe(e),[jo]:e=>lY(e),[jo+mu]:(e,t)=>jT(lY(e),e.getDay(),cY(t)),[mu]:(e,t)=>jT(1,e.getDay(),cY(t))},bWt={[hc]:e=>3*e,[jo]:(e,t)=>jT(e,0,cY(t))};function MFe(e,t){return $Fe(e,t||1,vWt,bWt,mWt)}const _Wt={[ja]:e=>e.getUTCFullYear(),[hc]:e=>Math.floor(e.getUTCMonth()/3),[_u]:e=>e.getUTCMonth(),[pc]:e=>e.getUTCDate(),[sf]:e=>e.getUTCHours(),[of]:e=>e.getUTCMinutes(),[ld]:e=>e.getUTCSeconds(),[Oh]:e=>e.getUTCMilliseconds(),[vm]:e=>OFe(e),[jo]:e=>fY(e),[mu]:(e,t)=>jT(1,e.getUTCDay(),dY(t)),[jo+mu]:(e,t)=>jT(fY(e),e.getUTCDay(),dY(t))},wWt={[hc]:e=>3*e,[jo]:(e,t)=>jT(e,0,dY(t))};function LFe(e,t){return $Fe(e,t||1,_Wt,wWt,gWt)}const xWt={[ja]:om,[hc]:AR.every(3),[_u]:AR,[jo]:MC,[pc]:Yg,[mu]:Yg,[vm]:Yg,[sf]:X5,[of]:Y5,[ld]:Mg,[Oh]:hT},EWt={[ja]:am,[hc]:IR.every(3),[_u]:IR,[jo]:LC,[pc]:xv,[mu]:xv,[vm]:xv,[sf]:Q5,[of]:K5,[ld]:Mg,[Oh]:hT};function dA(e){return xWt[e]}function hA(e){return EWt[e]}function FFe(e,t,n){return e?e.offset(t,n):void 0}function jFe(e,t,n){return FFe(dA(e),t,n)}function BFe(e,t,n){return FFe(hA(e),t,n)}function UFe(e,t,n,r){return e?e.range(t,n,r):void 0}function zFe(e,t,n,r){return UFe(dA(e),t,n,r)}function VFe(e,t,n,r){return UFe(hA(e),t,n,r)}const SI=1e3,TI=SI*60,CI=TI*60,d8=CI*24,SWt=d8*7,r1e=d8*30,hY=d8*365,HFe=[ja,_u,pc,sf,of,ld,Oh],AI=HFe.slice(0,-1),II=AI.slice(0,-1),kI=II.slice(0,-1),TWt=kI.slice(0,-1),CWt=[ja,jo],i1e=[ja,_u],qFe=[ja],A2=[[AI,1,SI],[AI,5,5*SI],[AI,15,15*SI],[AI,30,30*SI],[II,1,TI],[II,5,5*TI],[II,15,15*TI],[II,30,30*TI],[kI,1,CI],[kI,3,3*CI],[kI,6,6*CI],[kI,12,12*CI],[TWt,1,d8],[CWt,1,SWt],[i1e,1,r1e],[i1e,3,3*r1e],[qFe,1,hY]];function WFe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(qP(t))/n;let i=PC(a=>a[2]).right(A2,r),s,o;return i===A2.length?(s=qFe,o=Vv(t[0]/hY,t[1]/hY,n)):i?(i=A2[r/A2[i-1][2]<A2[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=HFe,o=Math.max(Vv(t[0],t[1],n),1)),{units:s,step:o}}function RI(e){const t={};return n=>t[n]||(t[n]=e(n))}function AWt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=IWt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function IWt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function GFe(e){const t=RI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=ew(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return AWt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=ew(o??",f");const a=Vv(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Lke(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Fke(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Mke(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let pY;YFe();function YFe(){return pY=GFe({format:M1,formatPrefix:kZ})}function KFe(e){return GFe($ke(e))}function SF(e){return arguments.length?pY=KFe(e):pY}function s1e(e,t,n){n=n||{},Ot(n)||Xe(`Invalid time multi-format specifier: ${n}`);const r=t(ld),i=t(of),s=t(sf),o=t(pc),a=t(jo),u=t(_u),l=t(hc),c=t(ja),f=e(n[Oh]||".%L"),d=e(n[ld]||":%S"),h=e(n[of]||"%I:%M"),p=e(n[sf]||"%I %p"),m=e(n[pc]||n[mu]||"%a %d"),g=e(n[jo]||"%b %d"),y=e(n[_u]||"%B"),b=e(n[hc]||"%B"),w=e(n[ja]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:g:c(E)<E?l(E)<E?y:b:w)(E)}function XFe(e){const t=RI(e.format),n=RI(e.utcFormat);return{timeFormat:r=>Dt(r)?t(r):s1e(t,dA,r),utcFormat:r=>Dt(r)?n(r):s1e(n,hA,r),timeParse:RI(e.parse),utcParse:RI(e.utcParse)}}let mY;QFe();function QFe(){return mY=XFe({format:zZ,parse:QRe,utcFormat:uP,utcParse:JRe})}function JFe(e){return XFe(WRe(e))}function uN(e){return arguments.length?mY=JFe(e):mY}const gY=(e,t)=>Wn({},e,t);function ZFe(e,t){const n=e?KFe(e):SF(),r=t?JFe(t):uN();return gY(n,r)}function tie(e,t){const n=arguments.length;return n&&n!==2&&Xe("defaultLocale expects either zero or two arguments."),n?gY(SF(e),uN(t)):gY(SF(),uN())}function kWt(){return YFe(),QFe(),tie()}const RWt=/^(data:|([A-Za-z]+:)?\/\/)/,NWt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,PWt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,o1e="file://";function DWt(e,t){return n=>({options:n||{},sanitize:$Wt,load:OWt,fileAccess:!!t,file:MWt(t),http:FWt(e)})}async function OWt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function $Wt(e,t){t=Wn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=NWt.test(e.replace(PWt,""));(e==null||typeof e!="string"||!a)&&Xe("Sanitize failure, invalid URI: "+Et(e));const u=RWt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(o1e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(o1e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function MWt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):LWt}async function LWt(){Xe("No file system access.")}function FWt(e){return e?async function(t,n){const r=Wn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Gn(s[i])?s[i]():s.text():Xe(s.status+""+s.statusText)}:jWt}async function jWt(){Xe("No HTTP fetch method available.")}const BWt=e=>e!=null&&e===e,UWt=e=>e==="true"||e==="false"||e===!0||e===!1,zWt=e=>!Number.isNaN(Date.parse(e)),e4e=e=>!Number.isNaN(+e)&&!(e instanceof Date),VWt=e=>e4e(e)&&Number.isInteger(+e),yY={boolean:Kre,integer:gu,number:gu,date:Xre,string:Qre,unknown:Au},M3=[UWt,VWt,e4e,zWt],HWt=["boolean","integer","number","date"];function t4e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=M3.length,i=M3.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&BWt(u)&&!M3[a](u)&&(i[a]=0,++o,o===M3.length))return"string";return HWt[i.reduce((s,o)=>s===0?o:s,0)-1]}function n4e(e,t){return t.reduce((n,r)=>(n[r]=t4e(e,r),n),{})}function a1e(e){const t=function(n,r){const i={delimiter:e};return nie(n,r?Wn(r,i):i)};return t.responseType="text",t}function nie(e,t){return t.header&&(e=t.header.map(Et).join(t.delimiter)+`
`+e),Nke(t.delimiter).parse(e+"")}nie.responseType="text";function qWt(e){return typeof Buffer=="function"&&Gn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function rie(e,t){const n=t&&t.property?ad(t.property):Au;return Ot(e)&&!qWt(e)?WWt(n(e),t):n(JSON.parse(e))}rie.responseType="json";function WWt(e,t){return!Je(e)&&_Fe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const GWt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function r4e(e,t){let n,r,i,s;return e=rie(e,t),t&&t.feature?(n=lWt,i=t.feature):t&&t.mesh?(n=fWt,i=t.mesh,s=GWt[t.filter]):Xe("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Xe("Invalid TopoJSON object: "+i),r&&r.features||[r]}r4e.responseType="json";const sM={dsv:nie,csv:a1e(","),tsv:a1e("	"),json:rie,topojson:r4e};function iie(e,t){return arguments.length>1?(sM[e]=t,this):sn(sM,e)?sM[e]:null}function i4e(e){const t=iie(e);return t&&t.responseType||"text"}function s4e(e,t,n,r){t=t||{};const i=iie(t.type||"json");return i||Xe("Unknown data format type: "+t.type),e=i(e,t),t.parse&&YWt(e,t.parse,n,r),sn(e,"columns")&&delete e.columns,e}function YWt(e,t,n,r){if(!e.length)return;const i=uN();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=n4e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!yY[p])throw Error("Illegal format pattern: "+h+":"+p);return yY[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const h8=DWt(typeof fetch<"u"&&fetch,null);function p8(e){const t=e||Au,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function oM(e,t){try{await t(e)}catch(n){e.error(n)}}const o4e=Symbol("vega_id");let KWt=1;function m8(e){return!!(e&&nn(e))}function nn(e){return e[o4e]}function a4e(e,t){return e[o4e]=t,e}function di(e){const t=e===Object(e)?e:{data:e};return nn(t)?t:a4e(t,KWt++)}function sie(e){return g8(e,di({}))}function g8(e,t){for(const n in e)t[n]=e[n];return t}function u4e(e,t){return a4e(t,nn(e))}function ox(e,t){return e?t?(n,r)=>e(n,r)||nn(t(n))-nn(t(r)):(n,r)=>e(n,r)||nn(n)-nn(r):null}function l4e(e){return e&&e.constructor===ax}function ax(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:ax,insert(a){const u=Pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Gn(a)?r:t,l=Pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Iu(l)};return Gn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Gn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[nn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[nn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[nn(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=nn(m),l[g]?l[g]=1:a.add.push(di(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[nn(m)]<0&&a.rem.push(m);function y(b,w,E){E?b[w]=E(b):a.encode=w,o||(c[nn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[nn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[nn(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[nn(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const aM="_:mod:_";function y8(){Object.defineProperty(this,aM,{writable:!0,value:{}})}y8.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[aM];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Je(n)?1+n.length:-1),i},modified(e,t){const n=this[aM];if(arguments.length){if(Je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[aM]={},this}};let XWt=0;const QWt="pulse",JWt=new y8,ZWt=1,eGt=2;function ji(e,t,n,r){this.id=++XWt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function u1e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ji.prototype={targets(){return this._targets||(this._targets=p8(HP))},set(e){return this.value!==e?(this.value=e,1):0},skip:u1e(ZWt),modified:u1e(eGt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new y8,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof ji?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===QWt)Pt(a).forEach(f=>{f instanceof ji?f!==this&&(f.targets().add(this),s.push(f)):Xe("Pulse parameters must be operator instances.")}),this.source=a;else if(Je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||JWt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function tGt(e,t,n,r){let i=1,s;return e instanceof ji?s=e:e&&e.prototype instanceof ji?s=new e:Gn(e)?s=new ji(null,e):(i=0,s=new ji(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function nGt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let rGt=0;function v8(e,t,n){this.id=++rGt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ay(e,t,n){return new v8(e,t,n)}v8.prototype={_filter:ud,_apply:Au,targets(){return this._targets||(this._targets=p8(HP))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ay(e);return this.targets().add(t),t},apply(e){const t=Ay(null,e);return this.targets().add(t),t},merge(){const e=Ay();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ay();return this.targets().add(Ay(null,null,Gre(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ay(null,null,()=>n=!0)),t.targets().add(Ay(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ud,this._targets=null}};function iGt(e,t,n,r){const i=this,s=Ay(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function sGt(e,t){const n=this.locale();return s4e(e,t,n.timeParse,n.utcParse)}function oGt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function aGt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:i4e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function uGt(e,t,n){const r=this,i=r._pending||lGt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(ud).insert(s.data||[])),i.done(),s}function lGt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const cGt={skip:!0};function fGt(e,t,n,r,i){return(e instanceof ji?hGt:dGt)(this,e,t,n,r,i),this}function dGt(e,t,n,r,i,s){const o=Wn({},s,cGt);let a,u;Gn(n)||(n=Iu(n)),r===void 0?a=l=>e.touch(n(l)):Gn(r)?(u=new ji(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;l4e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function hGt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new ji(null,pGt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function pGt(e,t){return t=Gn(t)?t:Iu(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function mGt(e){e.rank=++this._rank}function gGt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Xe("Cycle detected in dataflow graph.")}const TF={},yp=1,My=2,mg=4,yGt=yp|My,l1e=yp|mg,rE=yp|My|mg,c1e=8,I2=16,f1e=32,d1e=64;function Nv(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Yz(e,t){const n=[];return $y(e,t,r=>n.push(r)),n}function h1e(e,t){const n={};return e.visit(t,r=>{n[nn(r)]=1}),r=>n[nn(r)]?null:r}function L3(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Nv.prototype={StopPropagation:TF,ADD:yp,REM:My,MOD:mg,ADD_REM:yGt,ADD_MOD:l1e,ALL:rE,REFLOW:c1e,SOURCE:I2,NO_SOURCE:f1e,NO_FIELDS:d1e,fork(e){return new Nv(this.dataflow).init(this,e)},clone(){const e=this.fork(rE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(rE|I2)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Nv(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&d1e)&&(n.fields=e.fields),t&yp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&My?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&mg?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&f1e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||rE;return t&yp&&this.add.length||t&My&&this.rem.length||t&mg&&this.mod.length},reflow(e){if(e)return this.fork(rE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(mg,h1e(this,yp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&yp&&(n.addF=L3(n.addF,t)),e&My&&(n.remF=L3(n.remF,t)),e&mg&&(n.modF=L3(n.modF,t)),e&I2&&(n.srcF=L3(n.srcF,t)),n},materialize(e){e=e||rE;const t=this;return e&yp&&t.addF&&(t.add=Yz(t.add,t.addF),t.addF=null),e&My&&t.remF&&(t.rem=Yz(t.rem,t.remF),t.remF=null),e&mg&&t.modF&&(t.mod=Yz(t.mod,t.modF),t.modF=null),e&I2&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&I2)return $y(n.source,n.srcF,r),n;e&yp&&$y(n.add,n.addF,r),e&My&&$y(n.rem,n.remF,r),e&mg&&$y(n.mod,n.modF,r);const i=n.source;if(e&c1e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$y(i,h1e(n,l1e),r):$y(i,n.srcF,r))}return n}};function oie(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ct(oie,Nv,{fork(e){const t=new Nv(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Je(e)?e.some(r=>n[r]):n[e]:0},filter(){Xe("MultiPulse does not support filtering.")},materialize(){Xe("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function vGt(e,t,n){const r=this,i=[];if(r._pulse)return c4e(r);if(r._pending&&await r._pending,t&&await oM(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Nv(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=p8(HP);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=TF),u!==TF&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await oM(r,c[f].callback)}return n&&await oM(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function bGt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function _Gt(e,t,n){return this._pulse?c4e(this):(this.evaluate(e,t,n),this)}function wGt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function c4e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function xGt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function EGt(e,t){const n=e.source,r=this._clock;return n&&Je(n)?new oie(this,r,n.map(i=>i.pulse),t):this._input[e.id]||SGt(this._pulse,n&&n.pulse)}function SGt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==TF&&(e.source=t.source),e)}const aie={skip:!1,force:!1};function TGt(e,t){const n=t||aie;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function CGt(e,t,n){const r=n||aie;return(e.set(t)||r.force)&&this.touch(e,r),this}function AGt(e,t,n){this.touch(e,n||aie);const r=new Nv(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function IGt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),f4e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,kGt(t,0,e)):r=n,r}}}function f4e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function kGt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,f4e(e,r,t,n)}function OS(){this.logger(zre()),this.logLevel(Bre),this._clock=0,this._rank=0,this._locale=tie();try{this._loader=h8()}catch{}this._touched=p8(HP),this._input={},this._pulse=null,this._heap=IGt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function k2(e){return function(){return this._log[e].apply(this,arguments)}}OS.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:k2("error"),warn:k2("warn"),info:k2("info"),debug:k2("debug"),logLevel:k2("level"),cleanThreshold:1e4,add:tGt,connect:nGt,rank:mGt,rerank:gGt,pulse:AGt,touch:TGt,update:CGt,changeset:ax,ingest:oGt,parse:sGt,preload:uGt,request:aGt,events:iGt,on:fGt,evaluate:vGt,run:_Gt,runAsync:bGt,runAfter:wGt,_enqueue:xGt,_getPulse:EGt};function qe(e,t){ji.call(this,e,null,t)}Ct(qe,ji,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const BT={};function d4e(e){const t=h4e(e);return t&&t.Definition||null}function h4e(e){return e=e&&e.toLowerCase(),sn(BT,e)?BT[e]:null}function*p4e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function uie(e,t,n){const r=Float64Array.from(p4e(e,n));return r.sort(qg),t.map(i=>RIe(r,i))}function lie(e,t){return uie(e,[.25,.5,.75],t)}function cie(e,t){const n=e.length,r=Yvt(e,t),i=lie(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function m4e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var cd=Math.random;function RGt(e){cd=e}function g4e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(p4e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(cd()*s)];c[l]=a/s}return c.sort(qg),[jq(c,n/2),jq(c,1-n/2)]}function y4e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?NGt(s,t+t/4):s}function NGt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function PGt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function DGt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*cd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const v4e=Math.sqrt(2*Math.PI),OGt=Math.SQRT2;let R2=NaN;function b8(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(R2===R2)n=R2,R2=NaN;else{do n=cd()*2-1,r=cd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,R2=r*s}return e+n*t}function fie(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*v4e)}function _8(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function w8(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*OGt*$Gt(2*e-1)}function $Gt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function die(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>b8(n,r),pdf:s=>fie(s,n,r),cdf:s=>_8(s,n,r),icdf:s=>w8(s,n,r)};return i.mean(e).stdev(t)}function hie(e,t){const n=die();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=cie(e)),i):t},sample(){return e[~~(cd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function pie(e,t){return e=e||0,t=t??1,Math.exp(e+b8()*t)}function mie(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*v4e*e)}function gie(e,t,n){return _8(Math.log(e),t,n)}function yie(e,t,n){return Math.exp(w8(e,t,n))}function b4e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>pie(n,r),pdf:s=>mie(s,n,r),cdf:s=>gie(s,n,r),icdf:s=>yie(s,n,r)};return i.mean(e).stdev(t)}function _4e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=cd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function vie(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*cd()}function bie(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function _ie(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function wie(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function w4e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>vie(n,r),pdf:s=>bie(s,n,r),cdf:s=>_ie(s,n,r),icdf:s=>wie(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function xie(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function WP(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function x8(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function GP(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function pA(e,t,n,r,i){let s=0,o=0;return GP(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Eie(e,t,n){let r=0,i=0,s=0,o=0,a=0;GP(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=WP(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:pA(e,t,n,i,l)}}function x4e(e,t,n){let r=0,i=0,s=0,o=0,a=0;GP(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=WP(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:pA(e,t,n,i,l)}}function E4e(e,t,n){const[r,i,s,o]=x8(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;GP(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),p=d*w,a+=(w*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=WP(u/o,a/o,l/o,c/o),y=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:pA(e,t,n,o,y)}}function S4e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;GP(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=WP(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:pA(e,t,n,a,c)}}function Sie(e,t,n){const[r,i,s,o]=x8(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,b=u*y-l*l,w=(d*u-f*l)/b,E=(f*y-d*l)/b,S=-w*u,T=C=>(C=C-s,w*C*C+E*C+S+o);return{coef:[S-E*s+w*s*s+o,E-2*w*s,w],predict:T,rSquared:pA(e,t,n,o,T)}}function T4e(e,t,n,r){if(r===0)return xie(e,t,n);if(r===1)return Eie(e,t,n);if(r===2)return Sie(e,t,n);const[i,s,o,a]=x8(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=LGt(c),b=w=>{w-=o;let E=a+y[0]+y[1]*w+y[2]*w*w;for(d=3;d<f;++d)E+=y[d]*Math.pow(w,d);return E};return{coef:MGt(f,y,-o,a),predict:b,rSquared:pA(e,t,n,a,b)}}function MGt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function LGt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const p1e=2,m1e=1e-12;function C4e(e,t,n,r){const[i,s,o,a]=x8(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=p1e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],b=p[0],w=p[1],E=y-i[b]>i[w]-y?b:w;let S=0,T=0,C=0,I=0,R=0;const P=1/Math.abs(i[E]-y||1);for(let M=b;M<=w;++M){const F=i[M],z=s[M],B=FGt(Math.abs(y-F)*P)*d[M],H=F*B;S+=B,T+=H,C+=z*B,I+=z*H,R+=F*H}const[D,L]=WP(T/S,C/S,I/S,R/S);c[g]=D+L*y,f[g]=Math.abs(s[g]-c[g]),jGt(i,g+1,p)}if(h===p1e)break;const m=NIe(f);if(Math.abs(m)<m1e)break;for(let g=0,y,b;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?m1e:(b=1-y*y)*b}return BGt(i,c,o,a)}function FGt(e){return(e=1-e*e*e)*e*e}function jGt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function BGt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const UGt=.5*Math.PI/180;function E8(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=zGt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&VGt(f,m,d,h,p)>UGt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function zGt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function VGt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function HGt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function vY(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:HGt(e)}function A4e(e,t,n){return n||e+(t?"_"+t:"")}const Kz=()=>{},qGt={init:Kz,add:Kz,rem:Kz,idx:0},lN={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},YP=Object.keys(lN).filter(e=>e!=="__count__");function WGt(e,t){return(n,r)=>Wn({name:e,aggregate_param:r,out:n||e},qGt,t)}[...YP,"__count__"].forEach(e=>{lN[e]=WGt(e,lN[e])});function I4e(e,t,n){return lN[e](n,t)}function k4e(e,t){return e.idx-t.idx}function GGt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=lN[i]())})};return e.forEach(n),Object.values(t).sort(k4e)}function YGt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function KGt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function XGt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function QGt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function R4e(e,t){const n=t||Au,r=GGt(e),i=e.slice().sort(k4e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=YGt,s.prototype.add=KGt,s.prototype.rem=XGt,s.prototype.set=QGt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Tie(e){this._key=e?ad(e):nn,this.reset()}const qa=Tie.prototype;qa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};qa.add=function(e){this._add.push(e)};qa.rem=function(e){this._rem.push(e)};qa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};qa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",sn(n,s)||(n[s]=1,++i);return i};qa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=vFe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};qa.argmin=function(e){return this.extent(e)[0]||{}};qa.argmax=function(e){return this.extent(e)[1]||{}};qa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};qa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};qa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=lie(this.values(),e),this._get=e),this._q};qa.q1=function(e){return this.quartile(e)[0]};qa.q2=function(e){return this.quartile(e)[1]};qa.q3=function(e){return this.quartile(e)[2]};qa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=g4e(this.values(),1e3,.05,e),this._get=e),this._ci};qa.ci0=function(e){return this.ci(e)[0]};qa.ci1=function(e){return this.ci(e)[1]};function l1(e){qe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}l1.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:YP},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ct(l1,qe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Pt(bu(b)),E=w.length;let S=0,T;for(;S<E;++S)r[T=w[S]]||(r[T]=1,t.push(T))}this._dims=Pt(e.groupby),this._dnames=this._dims.map(b=>{const w=Vs(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:vY(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Xe("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Xe("Null aggregate field specified."),m=Vs(f),g=A4e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(I4e(d,h,g))}return this._measures=this._measures.map(b=>R4e(b,b.field)),Object.create(null)},cellkey:vY(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Tie),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?u4e(t.tuple,s):di(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const JGt=1e-14;function Cie(e){qe.call(this,null,e)}Cie.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ct(Cie,qe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(bu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=m4e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=gu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(JGt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=bc(u,bu(t),e.name||"bin_"+Vs(t))}});function N4e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?SFe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Aie(e){qe.call(this,[],e)}Aie.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ct(Aie,qe,{transform(e,t){const n=t.fork(t.ALL),r=N4e(nn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(ox(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function P4e(e){ji.call(this,null,ZGt,e)}Ct(P4e,ji);function ZGt(e){return this.value&&!e.modified()?this.value:Wre(e.fields,e.orders)}function Iie(e){qe.call(this,null,e)}Iie.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function eYt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ct(Iie,qe,{transform(e,t){const n=f=>d=>{for(var h=eYt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=di({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function kie(e){qe.call(this,null,e)}kie.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ct(kie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=tYt(a,i,s,e.filter||ud)):n.mod=a,n.source=this.value,n.modifies(r)}});function tYt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(di(s)),s={},s[t]=l);return i}const g1e={kde:hie,mixture:_4e,normal:die,lognormal:b4e,uniform:w4e},nYt="distributions",y1e="function",rYt="field";function D4e(e,t){const n=e[y1e];sn(g1e,n)||Xe("Unknown distribution function: "+n);const r=g1e[n]();for(const i in e)i===rYt?r.data((e.from||t()).map(e[i])):i===nYt?r[i](e[i].map(s=>D4e(s,t))):typeof r[i]===y1e&&r[i](e[i]);return r}function Rie(e){qe.call(this,null,e)}const O4e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],iYt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:O4e},{name:"weights",type:"number",array:!0}]};Rie.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:O4e.concat(iYt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(Rie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=D4e(e.distribution,sYt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Xe("Invalid density method: "+o),!e.extent&&!r.data&&Xe("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||ym(r.data()),l=E8(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],di(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function sYt(e){return()=>e.materialize(e.SOURCE).source}function $4e(e,t){return e?e.map((n,r)=>t[r]||Vs(n)):null}function Nie(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const M4e="bin";function Pie(e){qe.call(this,null,e)}Pie.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:M4e}]};const oYt=(e,t)=>qP(ym(e,t))/30;Ct(Pie,qe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Nie(t.source,e.groupby,Au),i=e.smooth||!1,s=e.field,o=e.step||oYt(n,s),a=ox((p,m)=>s(p)-s(m)),u=e.as||M4e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of y4e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function L4e(e){ji.call(this,null,aYt,e),this.modified(!0)}Ct(L4e,ji);function aYt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:bc(n=>t(n,e),bu(t),Vs(t))}function Die(e){qe.call(this,[void 0,void 0],e)}Die.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ct(Die,qe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=gu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Vs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Oie(e,t){ji.call(this,e),this.parent=t,this.count=0}Ct(Oie,ji,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function S8(e){qe.call(this,{},e),this._keys=fA();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ct(S8,qe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=sn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Oie(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=nn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(nn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=nn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(nn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=nn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function F4e(e){ji.call(this,null,uYt,e)}Ct(F4e,ji);function uYt(e){return this.value&&!e.modified()?this.value:Je(e.name)?Pt(e.name).map(t=>ad(t)):ad(e.name,e.as)}function $ie(e){qe.call(this,fA(),e)}$ie.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ct($ie,qe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=nn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(nn(f),1)});function c(f){const d=nn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Mie(e){qe.call(this,[],e)}Mie.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ct(Mie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=$4e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=sie(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Lie(e){qe.call(this,[],e)}Lie.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ct(Lie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Vs),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=sie(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Fie(e){qe.call(this,null,e)}Fie.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ct(Fie,qe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function j4e(e){qe.call(this,[],e)}Ct(j4e,qe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=di(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const F3={value:"value",median:NIe,mean:e1t,min:Fq,max:Wg},lYt=[];function jie(e){qe.call(this,[],e)}jie.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function cYt(e){var t=e.method||F3.value,n;if(F3[t]==null)Xe("Unrecognized imputation method: "+t);else return t===F3.value?(n=e.value!==void 0?e.value:0,()=>n):F3[t]}function fYt(e){const t=e.field;return n=>n?t(n):NaN}Ct(jie,qe,{transform(e,t){var n=t.fork(t.ALL),r=cYt(e),i=fYt(e),s=Vs(e.field),o=Vs(e.key),a=(e.groupby||[]).map(Vs),u=dYt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,b,w,E,S;for(g=0,w=u.length;g<w;++g)for(d=u[g],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],S={_impute:!0},y=0,E=p.length;y<E;++y)S[a[y]]=p[y];S[o]=m,S[s]=Number.isNaN(h)?h=r(d,i):h,l.push(di(S))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function dYt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,b)=>a[y]=b+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):lYt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Bie(e){l1.call(this,e)}Bie.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:YP},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ct(Bie,l1,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Wn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Uie(e){qe.call(this,null,e)}Uie.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(Uie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Nie(r,e.groupby,e.field),s=(e.groupby||[]).map(Vs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Xe("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=ym(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=hie(h,o)[a],m=e.counts?h.length:1,g=c||ym(h);E8(p,g,f,d).forEach(y=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[u[0]]=y[0],b[u[1]]=y[1]*m,l.push(di(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function B4e(e){ji.call(this,null,hYt,e)}Ct(B4e,ji);function hYt(e){return this.value&&!e.modified()?this.value:Yre(e.fields,e.flat)}function U4e(e){qe.call(this,[],e),this._pending=null}Ct(U4e,qe,{transform(e,t){const n=t.dataflow;return this._pending?Xz(this,t,this._pending):pYt(e)?t.StopPropagation:e.values?Xz(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Xz(this,t,Pt(r.data)))}});function pYt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Xz(e,t,n){n.forEach(di);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function zie(e){qe.call(this,{},e)}zie.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ct(zie,qe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Xe('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Xe('The "as" parameter has too few output field names.'),c=c||i.map(Vs),f=function(p){for(var m=0,g=0,y,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](b)}):(c||Xe("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function z4e(e){ji.call(this,null,mYt,e)}Ct(z4e,ji);function mYt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function V4e(e){ji.call(this,null,gYt,e)}Ct(V4e,ji);function gYt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function H4e(e){qe.call(this,null,e)}Ct(H4e,qe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Vie(e){l1.call(this,e)}Vie.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:YP,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ct(Vie,l1,{_transform:l1.prototype.transform,transform(e,t){return this._transform(yYt(e,t),t)}});function yYt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=bu(n).concat(bu(r)),o=bYt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>vYt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function vYt(e,t,n,r){return bc(i=>t(i)===e?n(i):NaN,r,e+"")}function bYt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(f8),t?i.slice(0,t):i}function q4e(e){S8.call(this,e)}Ct(q4e,S8,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(nn(s),n,t,s);return(e.modified("field")||r&&t.modified(bu(r)))&&Xe("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(di(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Hie(e){qe.call(this,null,e)}Hie.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ct(Hie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=$4e(e.fields,e.as||[]),s=r?(a,u)=>_Yt(a,u,r,i):g8;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=nn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,di({}));o[nn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[nn(a)]))}),n}});function _Yt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function W4e(e){qe.call(this,null,e)}Ct(W4e,qe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function qie(e){qe.call(this,null,e)}qie.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const wYt=1e-14;Ct(qie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Nie(i,e.groupby,e.field),o=(e.groupby||[]).map(Vs),a=[],u=e.step||.01,l=e.probs||Gl(u/2,1-wYt,u),c=l.length;return s.forEach(f=>{const d=uie(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(di(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function G4e(e){qe.call(this,null,e)}Ct(G4e,qe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=nn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=sie(i);r[nn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[nn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Wie(e){qe.call(this,[],e),this.count=0}Wie.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ct(Wie,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[nn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*cd()),d<o.length&&d>=u&&(f=o[d],s[nn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=nn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[nn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[nn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[nn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[nn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[nn(c)])),this.count=a,this.value=n.source=o,n}});function Gie(e){qe.call(this,null,e)}Gie.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ct(Gie,qe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Gl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,di(s)}),n.add=t.add.concat(this.value),n}});function Y4e(e){qe.call(this,null,e),this.modified(!0)}Ct(Y4e,qe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Yie(e){qe.call(this,null,e)}const K4e=["unit0","unit1"];Yie.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Jre,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:K4e}]};Ct(Yie,qe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?hA:dA)(s.unit).offset,a=e.as||K4e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(bu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:WFe({extent:e.extent||ym(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Zre(r),o=this.value||{},a=(n?LFe:MFe)(s,i);return a.unit=Mr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function X4e(e){qe.call(this,fA(),e)}Ct(X4e,qe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Q4e(e){qe.call(this,null,e)}Ct(Q4e,qe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ox(e.sort)):t.source).map(e.field))}});function xYt(e,t,n,r){const i=cN[e](t,n);return{init:i.init||Yy,update:function(s,o){o[r]=i.next(s)}}}const cN={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=cN.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Xe("ntile num must be greater than zero.");const n=cN.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Xe("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=EYt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function EYt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const SYt=Object.keys(cN);function J4e(e){const t=Pt(e.ops),n=Pt(e.fields),r=Pt(e.params),i=Pt(e.aggregate_params),s=Pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Pt(bu(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],b=i[m]||null,w=Vs(g),E=A4e(p,w,s[m]);if(h(g),o.push(E),sn(cN,p))a.push(xYt(p,g,y,E));else{if(g==null&&p!=="count"&&Xe("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let S=l[w];S||(S=l[w]=[],S.field=g,f.push(S)),S.push(I4e(p,b,E))}}),(c.length||f.length)&&(this.cell=TYt(f,c,d)),this.inputs=Object.keys(u)}const Z4e=J4e.prototype;Z4e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Z4e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function TYt(e,t,n){e=e.map(u=>R4e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Tie;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Kie(e){qe.call(this,{},e),this._mlen=0,this._mods=[]}Kie.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:SYt.concat(YP)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ct(Kie,qe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=ox(e.sort),i=vY(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new J4e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)CYt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=N4e(nn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function CYt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?PC(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Iu(-1)};t.init();for(let f=0;f<u;++f)AYt(c,o,f,u),s&&IYt(c,l),t.update(c,a[f])}function AYt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function IYt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const kYt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:l1,bin:Cie,collect:Aie,compare:P4e,countpattern:Iie,cross:kie,density:Rie,dotbin:Pie,expression:L4e,extent:Die,facet:S8,field:F4e,filter:$ie,flatten:Mie,fold:Lie,formula:Fie,generate:j4e,impute:jie,joinaggregate:Bie,kde:Uie,key:B4e,load:U4e,lookup:zie,multiextent:z4e,multivalues:V4e,params:H4e,pivot:Vie,prefacet:q4e,project:Hie,proxy:W4e,quantile:qie,relay:G4e,sample:Wie,sequence:Gie,sieve:Y4e,subflow:Oie,timeunit:Yie,tupleindex:X4e,values:Q4e,window:Kie},Symbol.toStringTag,{value:"Module"}));function Pv(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const RYt=()=>typeof Image<"u"?Image:null;function Xie(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const NYt="identity",UT="linear",k0="log",KP="pow",XP="sqrt",T8="symlog",gw="time",yw="utc",em="sequential",mA="diverging",zT="quantile",C8="quantize",A8="threshold",Qie="ordinal",bY="point",e5e="band",Jie="bin-ordinal",Go="continuous",QP="discrete",JP="discretizing",wd="interpolating",Zie="temporal";function PYt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function DYt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function ese(){const e=F1().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Xie(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Gl(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,b,w;if(!(m!==m||g!==g)&&(g<m&&(w=m,m=g,g=w),!(g<h[0]||m>r[1-d])))return y=Math.max(0,zv(h,m)-1),b=m===g?y:zv(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(w=y,y=p-b,b=p-w),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return ese().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function t5e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t5e(t())},e}function OYt(){return t5e(ese().paddingInner(1))}var $Yt=Array.prototype.map;function MYt(e){return $Yt.call(e,gu)}const LYt=Array.prototype.slice;function n5e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(zv(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=MYt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=LYt.call(r),n):t.slice()},n.tickFormat=function(r,i){return MRe(e[0],Mr(e),r??10,i)},n.copy=function(){return n5e().domain(n.domain()).range(n.range())},n}const CF=new Map,r5e=Symbol("vega_scale");function i5e(e){return e[r5e]=!0,e}function FYt(e){return e&&e[r5e]===!0}function jYt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?PYt(s):s.invertExtent?DYt(s):void 0),s.type=e,i5e(s)};return r.metadata=Dh(Pt(n)),r}function ti(e,t,n){return arguments.length>1?(CF.set(e,jYt(e,t,n)),this):s5e(e)?CF.get(e):void 0}ti(NYt,LRe);ti(UT,sd,Go);ti(k0,jRe,[Go,k0]);ti(KP,BZ,Go);ti(XP,ATt,Go);ti(T8,BRe,Go);ti(gw,HZ,[Go,Zie]);ti(yw,zCt,[Go,Zie]);ti(em,qZ,[Go,wd]);ti(`${em}-${UT}`,qZ,[Go,wd]);ti(`${em}-${k0}`,ZRe,[Go,wd,k0]);ti(`${em}-${KP}`,WZ,[Go,wd]);ti(`${em}-${XP}`,VCt,[Go,wd]);ti(`${em}-${T8}`,eNe,[Go,wd]);ti(`${mA}-${UT}`,tNe,[Go,wd]);ti(`${mA}-${k0}`,nNe,[Go,wd,k0]);ti(`${mA}-${KP}`,GZ,[Go,wd]);ti(`${mA}-${XP}`,HCt,[Go,wd]);ti(`${mA}-${T8}`,rNe,[Go,wd]);ti(zT,URe,[JP,zT]);ti(C8,zRe,JP);ti(A8,VRe,JP);ti(Jie,n5e,[QP,JP]);ti(Qie,F1,QP);ti(e5e,ese,QP);ti(bY,OYt,QP);function s5e(e){return CF.has(e)}function ux(e,t){const n=CF.get(e);return n&&n.metadata[t]}function tse(e){return ux(e,Go)}function VT(e){return ux(e,QP)}function _Y(e){return ux(e,JP)}function o5e(e){return ux(e,k0)}function BYt(e){return ux(e,Zie)}function a5e(e){return ux(e,wd)}function u5e(e){return ux(e,zT)}const UYt=["clamp","base","constant","exponent"];function l5e(e,t){const n=t[0],r=Mr(t)-n;return function(i){return e(n+i*r)}}function I8(e,t,n){return bZ(nse(t||"rgb",n),e)}function c5e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function f5e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Iu(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ti(s)().domain([t,n]).range([0,1]),UYt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function nse(e,t){const n=S_t[zYt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function zYt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const VYt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},HYt={accent:WCt,category10:qCt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:GCt,observable10:YCt,paired:KCt,pastel1:XCt,pastel2:QCt,set1:JCt,set2:ZCt,set3:eAt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function d5e(e){if(Je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function h5e(e,t){for(const n in e)rse(n,t(e[n]))}const v1e={};h5e(HYt,d5e);h5e(VYt,e=>I8(d5e(e)));function rse(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(v1e[e]=t,this):v1e[e]}const uM="symbol",qYt="discrete",WYt="gradient",GYt=e=>Je(e)?e.map(t=>String(t)):String(e),YYt=(e,t)=>e[1]-t[1],KYt=(e,t)=>t[1]-e[1];function ise(e,t,n){let r;return Gr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(qP(e.domain())/n||1)+1))),Ot(t)&&(r=t.step,t=t.interval),Dt(t)&&(t=e.type===gw?dA(t):e.type==yw?hA(t):Xe("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function p5e(e,t,n){let r=e.range(),i=r[0],s=Mr(r),o=YYt;if(i>s&&(r=s,s=i,i=r,o=KYt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Mr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function sse(e,t){return e.bins?p5e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function m5e(e,t,n,r,i,s){const o=t.type;let a=GYt;if(o===gw||i===gw)a=e.timeFormat(r);else if(o===yw||i===yw)a=e.utcFormat(r);else if(o5e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=g5e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function g5e(e,t,n){const r=sse(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const wY={[zT]:"quantiles",[C8]:"thresholds",[A8]:"domain"},y5e={[zT]:"quantiles",[C8]:"domain"};function v5e(e,t){return e.bins?JYt(e.bins):e.type===k0?g5e(e,t,!0):wY[e.type]?QYt(e[wY[e.type]]()):sse(e,t)}function XYt(e,t,n){const r=t[y5e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function QYt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function JYt(e){const t=e.slice(0,-1);return t.max=Mr(e),t}const ZYt=e=>wY[e.type]||e.bins;function b5e(e,t,n,r,i,s,o){const a=y5e[t.type]&&s!==gw&&s!==yw?XYt(e,t,i):m5e(e,t,n,i,s,o);return r===uM&&ZYt(t)?eKt(a):r===qYt?tKt(a):nKt(a)}const eKt=e=>(t,n,r)=>{const i=b1e(r[n+1],b1e(r.max,1/0)),s=_1e(t,e),o=_1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},b1e=(e,t)=>e??t,tKt=e=>(t,n)=>n?e(t):null,nKt=e=>t=>e(t),_1e=(e,t)=>Number.isFinite(e)?t(e):null;function rKt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Mr(t),s=i-r;if(e.type===A8){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function iKt(e,t,n,r){const i=r||t.type;return Dt(n)&&BYt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===gw?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===yw?e.utcFormat("%A, %d %B %Y, %X UTC"):b5e(e,t,5,null,n,r,!0)}function _5e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=iKt(e,t,n.format,n.formatType);if(_Y(t.type)){const s=v5e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(VT(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Mr(s))}`}}let w5e=0;function sKt(){w5e=0}const AF="p_";function ose(e){return e&&e.gradient}function x5e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?AF:"";return i||(i=e.id="gradient_"+w5e++,r==="radial"?(e.x1=op(e.x1,.5),e.y1=op(e.y1,.5),e.r1=op(e.r1,0),e.x2=op(e.x2,.5),e.y2=op(e.y2,.5),e.r2=op(e.r2,.5),s=AF):(e.x1=op(e.x1,0),e.y1=op(e.y1,0),e.x2=op(e.x2,1),e.y2=op(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function op(e,t){return e??t}function E5e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const w1e={basis:{curve:pAt},"basis-closed":{curve:mAt},"basis-open":{curve:gAt},bundle:{curve:yAt,tension:"beta",value:.85},cardinal:{curve:vAt,tension:"tension",value:0},"cardinal-open":{curve:_At,tension:"tension",value:0},"cardinal-closed":{curve:bAt,tension:"tension",value:0},"catmull-rom":{curve:wAt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:xAt,tension:"alpha",value:.5},"catmull-rom-open":{curve:EAt,tension:"alpha",value:.5},linear:{curve:YZ},"linear-closed":{curve:SAt},monotone:{horizontal:CAt,vertical:TAt},natural:{curve:AAt},step:{curve:IAt},"step-after":{curve:RAt},"step-before":{curve:kAt}};function ase(e,t,n){var r=sn(w1e,e)&&w1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const oKt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},aKt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,uKt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,lKt=/^((\s+,?\s*)|(,\s*))/,cKt=/^[01]/;function HT(e){const t=[];return(e.match(aKt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=oKt[s],a=fKt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function fKt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?cKt:uKt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(lKt);u!==null&&(i+=u[0].length)}return r}const c1=Math.PI/180,dKt=1e-14,i_=Math.PI/2,Dp=Math.PI*2,iE=Math.sqrt(3)/2;var Qz={},Jz={},S5e=[].join;function hKt(e,t,n,r,i,s,o,a,u){const l=S5e.call(arguments);if(Qz[l])return Qz[l];const c=o*c1,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,b=-f/r,w=d/r,E=g*a+y*u,S=b*a+w*u,T=g*e+y*t,C=b*e+w*t;let R=1/((T-E)*(T-E)+(C-S)*(C-S))-.25;R<0&&(R=0);let P=Math.sqrt(R);s==i&&(P=-P);const D=.5*(E+T)-P*(C-S),L=.5*(S+C)+P*(T-E),M=Math.atan2(S-L,E-D);let z=Math.atan2(C-L,T-D)-M;z<0&&s===1?z+=Dp:z>0&&s===0&&(z-=Dp);const B=Math.ceil(Math.abs(z/(i_+.001))),H=[];for(let q=0;q<B;++q){const Y=M+q*z/B,$=M+(q+1)*z/B;H[q]=[D,L,Y,$,n,r,f,d]}return Qz[l]=H}function pKt(e){const t=S5e.call(e);if(Jz[t])return Jz[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),S=n+p-E*m,T=r+m+E*p,C=n+g,I=r+y,R=C+E*y,P=I-E*g;return Jz[t]=[c*S+f*T,d*S+h*T,c*R+f*P,d*R+h*P,c*C+f*I,d*C+h*I]}const Rf=["l",0,0,0,0,0,0,0];function mKt(e,t,n){const r=Rf[0]=e[0];if(r==="a"||r==="A")Rf[1]=t*e[1],Rf[2]=n*e[2],Rf[3]=e[3],Rf[4]=e[4],Rf[5]=e[5],Rf[6]=t*e[6],Rf[7]=n*e[7];else if(r==="h"||r==="H")Rf[1]=t*e[1];else if(r==="v"||r==="V")Rf[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Rf[i]=(i%2==1?t:n)*e[i];return Rf}function fN(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=mKt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":x1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":x1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function x1e(e,t,n,r){const i=hKt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=pKt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const E1e=.5773502691896257,S1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Dp)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=iE*n,i=r-n*E1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=iE*n,i=r-n*E1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=iE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=iE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=iE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=iE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function T5e(e){return sn(S1e,e)?S1e[e]:gKt(e)}var Zz={};function gKt(e){if(!sn(Zz,e)){const t=HT(e);Zz[e]={draw:function(n,r){fN(n,t,0,0,Math.sqrt(r)/2)}}}return Zz[e]}const xy=.448084975506;function yKt(e){return e.x}function vKt(e){return e.y}function bKt(e){return e.width}function _Kt(e){return e.height}function og(e){return typeof e=="function"?e:()=>+e}function j3(e,t,n){return Math.max(t,Math.min(e,n))}function C5e(){var e=yKt,t=vKt,n=bKt,r=_Kt,i=og(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),b=Math.min(g,y)/2,w=j3(+i.call(this,c),0,b),E=j3(+s.call(this,c),0,b),S=j3(+o.call(this,c),0,b),T=j3(+a.call(this,c),0,b);if(u||(u=h=U5()),w<=0&&E<=0&&S<=0&&T<=0)u.rect(p,m,g,y);else{var C=p+g,I=m+y;u.moveTo(p+w,m),u.lineTo(C-E,m),u.bezierCurveTo(C-xy*E,m,C,m+xy*E,C,m+E),u.lineTo(C,I-T),u.bezierCurveTo(C,I-xy*T,C-xy*T,I,C-T,I),u.lineTo(p+S,I),u.bezierCurveTo(p+xy*S,I,p,I-xy*S,p,I-S),u.lineTo(p,m+w),u.bezierCurveTo(p,m+xy*w,p+xy*w,m,p+w,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=og(c),l):e},l.y=function(c){return arguments.length?(t=og(c),l):t},l.width=function(c){return arguments.length?(n=og(c),l):n},l.height=function(c){return arguments.length?(r=og(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=og(c),s=f!=null?og(f):i,a=d!=null?og(d):i,o=h!=null?og(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function A5e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),b=(m/=y)*u,w=(g/=y)*u,E=Math.atan2(g,m);i.moveTo(o-b,a-w),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+b,a+w),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,Dp);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=U5()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function ZP(e,t){return e??t}const eD=e=>e.x||0,tD=e=>e.y||0,wKt=e=>e.width||0,xKt=e=>e.height||0,EKt=e=>(e.x||0)+(e.width||0),SKt=e=>(e.y||0)+(e.height||0),TKt=e=>e.startAngle||0,CKt=e=>e.endAngle||0,AKt=e=>e.padAngle||0,IKt=e=>e.innerRadius||0,kKt=e=>e.outerRadius||0,RKt=e=>e.cornerRadius||0,NKt=e=>ZP(e.cornerRadiusTopLeft,e.cornerRadius)||0,PKt=e=>ZP(e.cornerRadiusTopRight,e.cornerRadius)||0,DKt=e=>ZP(e.cornerRadiusBottomRight,e.cornerRadius)||0,OKt=e=>ZP(e.cornerRadiusBottomLeft,e.cornerRadius)||0,$Kt=e=>ZP(e.size,64),MKt=e=>e.size||1,k8=e=>e.defined!==!1,LKt=e=>T5e(e.shape||"circle"),FKt=SW().startAngle(TKt).endAngle(CKt).padAngle(AKt).innerRadius(IKt).outerRadius(kKt).cornerRadius(RKt),jKt=uNe().x(eD).y1(tD).y0(SKt).defined(k8),BKt=uNe().y(tD).x1(eD).x0(EKt).defined(k8),UKt=aNe().x(eD).y(tD).defined(k8),zKt=C5e().x(eD).y(tD).width(wKt).height(xKt).cornerRadius(NKt,PKt,DKt,OKt),VKt=hAt().type(LKt).size($Kt),HKt=A5e().x(eD).y(tD).defined(k8).size(MKt);function use(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function qKt(e,t){return FKt.context(e)(t)}function WKt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?BKt:jKt).curve(ase(r,n.orient,n.tension)).context(e)(t)}function GKt(e,t){const n=t[0],r=n.interpolate||"linear";return UKt.curve(ase(r,n.orient,n.tension)).context(e)(t)}function gA(e,t,n,r){return zKt.context(e)(t,n,r)}function YKt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function KKt(e,t){return VKt.context(e)(t)}function XKt(e,t){return HKt.context(e)(t)}var I5e=1;function k5e(){I5e=1}function lse(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+I5e++),o=i.clipping[s]||(i.clipping[s]={id:s});return Gn(r)?o.path=r(null):use(n)?o.path=gA(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function wo(e){this.clear(),e&&this.union(e)}wo.prototype={clone(){return new wo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function R8(e){this.mark=e,this.bounds=this.bounds||new wo}function N8(e){R8.call(this,e),this.items=this.items||[]}Ct(N8,R8);class R5e{constructor(t){this._pending=0,this._loader=t||h8()}pending(){return this._pending}sanitizeURL(t){const n=this;return T1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(N2(n),r)).catch(()=>(N2(n),null))}loadImage(t){const n=this,r=RYt();return T1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=sn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>N2(n),o.onerror=()=>N2(n),o.src=s,o}).catch(i=>(N2(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function T1e(e){e._pending+=1}function N2(e){e._pending-=1}function X0(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?QKt(t,r):0))}return e}function QKt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const JKt=Dp-1e-8;let P8,lM,cM,A_,xY,fM,EY,SY;const nv=(e,t)=>P8.add(e,t),dM=(e,t)=>nv(lM=e,cM=t),C1e=e=>nv(e,P8.y1),A1e=e=>nv(P8.x1,e),s_=(e,t)=>xY*e+EY*t,o_=(e,t)=>fM*e+SY*t,eV=(e,t)=>nv(s_(e,t),o_(e,t)),tV=(e,t)=>dM(s_(e,t),o_(e,t));function nD(e,t){return P8=e,t?(A_=t*c1,xY=SY=Math.cos(A_),fM=Math.sin(A_),EY=-fM):(xY=SY=1,A_=fM=EY=0),ZKt}const ZKt={beginPath(){},closePath(){},moveTo:tV,lineTo:tV,rect(e,t,n,r){A_?(eV(e+n,t),eV(e+n,t+r),eV(e,t+r),tV(e,t)):(nv(e+n,t+r),dM(e,t))},quadraticCurveTo(e,t,n,r){const i=s_(e,t),s=o_(e,t),o=s_(n,r),a=o_(n,r);I1e(lM,i,o,C1e),I1e(cM,s,a,A1e),dM(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=s_(e,t),a=o_(e,t),u=s_(n,r),l=o_(n,r),c=s_(i,s),f=o_(i,s);k1e(lM,o,u,c,C1e),k1e(cM,a,l,f,A1e),dM(c,f)},arc(e,t,n,r,i,s){if(r+=A_,i+=A_,lM=n*Math.cos(i)+e,cM=n*Math.sin(i)+t,Math.abs(i-r)>JKt)nv(e-n,t-n),nv(e+n,t+n);else{const o=l=>nv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Dp,r<0&&(r+=Dp),i=i%Dp,i<0&&(i+=Dp),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Dp,a=r-r%i_,u=0;u<4&&a>i;++u,a-=i_)o(a);else for(a=r-r%i_+i_,u=0;u<4&&a<i;++u,a=a+i_)o(a)}}};function I1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function k1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>dKt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(R1e(u,e,t,n,r)),0<l&&l<1&&i(R1e(l,e,t,n,r))}function R1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Dv=(Dv=Pv(1,1))?Dv.getContext("2d"):null;const TY=new wo;function cse(e){return function(t,n){if(!Dv)return!0;e(Dv,t),TY.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=TY;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Dv.isPointInPath(u,a))return!0;return!1}}function fse(e,t){return t.contains(e.x||0,e.y||0)}function N5e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(TY.set(n,r,n+i,r+s))}function P5e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return JE(t,n,r,i,s)}function JE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function qT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vd(e,t){return e??t}function N1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function eXt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Vd(t.x1,.5)*r,n.y1+Vd(t.y1,.5)*i,Math.max(r,i)*Vd(t.r1,0),n.x1+Vd(t.x2,.5)*r,n.y1+Vd(t.y2,.5)*i,Math.max(r,i)*Vd(t.r2,.5));else{const o=Vd(t.x1,0),a=Vd(t.y1,0),u=Vd(t.x2,1),l=Vd(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Pv(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=N1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return N1e(s,t.stops)}function D5e(e,t,n){return ose(n)?eXt(e,n,t.bounds):n}function IF(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=D5e(e,t,t.fill),!0):!1}var tXt=[];function WT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=D5e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||tXt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function nXt(e,t){return e.zindex-t.zindex||e.index-t.index}function dse(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(nXt)}function $h(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=dse(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function kF(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=dse(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function hse(e){return function(t,n,r){$h(n,i=>{(!r||r.intersects(i.bounds))&&O5e(e,t,i,i)})}}function rXt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&O5e(e,t,n.items[0],n.items)}}function O5e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(qT(t,n),n.fill&&IF(t,n,i)&&t.fill(),n.stroke&&WT(t,n,i)&&t.stroke()))}function D8(e){return e=e||ud,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,kF(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function rD(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function pse(e){return D8(rD(e))}function L_(e,t){return"translate("+e+","+t+")"}function mse(e){return"rotate("+e+")"}function iXt(e,t){return"scale("+e+","+t+")"}function $5e(e){return L_(e.x||0,e.y||0)}function sXt(e){return L_(e.x||0,e.y||0)+(e.angle?" "+mse(e.angle):"")}function oXt(e){return L_(e.x||0,e.y||0)+(e.angle?" "+mse(e.angle):"")+(e.scaleX||e.scaleY?" "+iXt(e.scaleX||1,e.scaleY||1):"")}function gse(e,t,n){function r(o,a){o("transform",sXt(a)),o("d",t(null,a))}function i(o,a){return t(nD(o,a.angle),a),X0(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=c1),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:hse(s),pick:pse(s),isect:n||cse(s)}}var aXt=gse("arc",qKt);function uXt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function lXt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function cXt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function yse(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(nD(u),c),X0(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=rD(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:rXt(s),pick:a,isect:fse,tip:n}}var fXt=yse("area",WKt,uXt);function dXt(e,t){var n=t.clip;e.save(),Gn(n)?(e.beginPath(),n(e),e.clip()):M5e(e,t.group)}function M5e(e,t){e.beginPath(),use(t)?gA(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function L5e(e){const t=Vd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function hXt(e,t){e("transform",$5e(t))}function F5e(e,t){const n=L5e(t);e("d",gA(null,t,n,n))}function pXt(e,t){e("class","background"),e("aria-hidden",!0),F5e(e,t)}function mXt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?F5e(e,t):e("d","")}function gXt(e,t,n){const r=t.clip?lse(n,t,t):null;e("clip-path",r)}function yXt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),X0(e,t),e.translate(t.x||0,t.y||0)}function dN(e,t,n,r){const i=L5e(t);e.beginPath(),gA(e,t,(n||0)+i,(r||0)+i)}const vXt=rD(dN),bXt=rD(dN,!1),_Xt=rD(dN,!0);function wXt(e,t,n,r){$h(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(dN(e,i,s,o),qT(e,i),i.fill&&IF(e,i,u)&&e.fill(),i.stroke&&!a&&WT(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&M5e(e,i),n&&n.translate(-s,-o),$h(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(dN(e,i,s,o),qT(e,i),WT(e,i,u)&&e.stroke())})}function xXt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return kF(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&use(u)&&!_Xt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&bXt(e,u,o,a)?(e.restore(),u):(l=kF(u,b=>EXt(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&vXt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function EXt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var SXt={type:"group",tag:"g",nested:!1,attr:hXt,bound:yXt,draw:wXt,pick:xXt,isect:N5e,content:gXt,background:pXt,foreground:mXt},hN={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function vse(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function bse(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function _se(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function O8(e,t){return e==="center"?t/2:e==="right"?t:0}function $8(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function TXt(e,t,n){const r=vse(t,n),i=bse(t,r),s=_se(t,r),o=(t.x||0)-O8(t.align,i),a=(t.y||0)-$8(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,hN["xmlns:xlink"],"xlink:href"),e("transform",L_(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function CXt(e,t){const n=t.image,r=bse(t,n),i=_se(t,n),s=(t.x||0)-O8(t.align,r),o=(t.y||0)-$8(t.baseline,i);return e.set(s,o,s+r,o+i)}function AXt(e,t,n){$h(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=vse(r,this);let s=bse(r,i),o=_se(r,i);if(s===0||o===0)return;let a=(r.x||0)-O8(r.align,s),u=(r.y||0)-$8(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(qT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var IXt={type:"image",tag:"image",nested:!1,attr:TXt,bound:CXt,draw:AXt,pick:D8(),isect:ud,get:vse,xOffset:O8,yOffset:$8},kXt=yse("line",GKt,lXt);function RXt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",oXt(t)),e("d",t.path)}function hM(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*c1,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=HT(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),fN(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):fN(e,u,r,i,s,o)}function NXt(e,t){return hM(nD(e,t.angle),t)?e.set(0,0,0,0):X0(e,t,!0)}var PXt={type:"path",tag:"path",nested:!1,attr:RXt,bound:NXt,draw:hse(hM),pick:pse(hM),isect:cse(hM)};function DXt(e,t){e("d",gA(null,t))}function OXt(e,t){var n,r;return X0(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function P1e(e,t){e.beginPath(),gA(e,t)}var $Xt={type:"rect",tag:"path",nested:!1,attr:DXt,bound:OXt,draw:hse(P1e),pick:pse(P1e),isect:N5e};function MXt(e,t){e("transform",$5e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function LXt(e,t){var n,r;return X0(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function j5e(e,t,n){var r,i,s,o;return t.stroke&&WT(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function FXt(e,t,n){$h(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&j5e(e,r,i)&&(qT(e,r),e.stroke())}})}function jXt(e,t,n,r){return e.isPointInStroke?j5e(e,t,1)&&e.isPointInStroke(n,r):!1}var BXt={type:"rule",tag:"line",nested:!1,attr:MXt,bound:LXt,draw:FXt,pick:D8(jXt),isect:P5e},UXt=gse("shape",YKt),zXt=gse("symbol",KKt,fse);const D1e=EFe();var qc={height:$m,measureWidth:wse,estimateWidth:RF,width:RF,canvas:B5e};B5e(!0);function B5e(e){qc.width=e&&Dv?wse:RF}function RF(e,t){return U5e(d1(e,t),$m(e))}function U5e(e,t){return~~(.8*e.length*t)}function wse(e,t){return $m(e)<=0||!(t=d1(e,t))?0:z5e(t,M8(e))}function z5e(e,t){const n=`(${t}) ${e}`;let r=D1e.get(n);return r===void 0&&(Dv.font=t,r=Dv.measureText(e).width,D1e.set(n,r)),r}function $m(e){return e.fontSize!=null?+e.fontSize||0:11}function f1(e){return e.lineHeight!=null?e.lineHeight:$m(e)+2}function VXt(e){return Je(e)?e.length>1?e:e[0]:e}function iD(e){return VXt(e.lineBreak&&e.text&&!Je(e.text)?e.text.split(e.lineBreak):e.text)}function xse(e){const t=iD(e);return(Je(t)?t.length-1:0)*f1(e)}function d1(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?qXt(e,n):n}function HXt(e){if(qc.width===wse){const t=M8(e);return n=>z5e(n,t)}else if(qc.width===RF){const t=$m(e);return n=>U5e(n,t)}else return t=>qc.width(e,t)}function qXt(e,t){var n=+e.limit,r=HXt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function sD(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function M8(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+$m(e)+"px "+sD(e,t)}function Ese(e){var t=e.baseline,n=$m(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*f1(e):t==="line-bottom"?.29*n-.5*f1(e):0)}const WXt={left:"start",center:"middle",right:"end"},Rk=new wo;function L8(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-i_,t+=r*Math.cos(i),n+=r*Math.sin(i)),Rk.x1=t,Rk.y1=n,Rk}function GXt(e,t){var n=t.dx||0,r=(t.dy||0)+Ese(t),i=L8(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",WXt[t.align]||"start"),a?(u=L_(s,o)+" "+mse(a),(n||r)&&(u+=" "+L_(n,r))):u=L_(s+n,o+r),e("transform",u)}function Sse(e,t,n){var r=qc.height(t),i=t.align,s=L8(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Ese(t)-Math.round(.8*r),c=iD(t),f;if(Je(c)?(r+=f1(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,qc.width(t,h)),0)):f=qc.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*c1,o,a);else if(n===2)return e.rotatedPoints(t.angle*c1,o,a);return e}function YXt(e,t,n){$h(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=M8(r),e.textAlign=r.align||"left",s=L8(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*c1),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Ese(r),c=iD(r),qT(e,r),Je(c))for(l=f1(r),u=0;u<c.length;++u)f=d1(r,c[u]),r.fill&&IF(e,r,i)&&e.fillText(f,o,a),r.stroke&&WT(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=d1(r,c),r.fill&&IF(e,r,i)&&e.fillText(f,o,a),r.stroke&&WT(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function KXt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=L8(t),a=o.x1,u=o.y1,l=Sse(Rk,t,1),c=-t.angle*c1,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function XXt(e,t){const n=Sse(Rk,e,2);return JE(t,n[0],n[1],n[2],n[3])||JE(t,n[0],n[1],n[4],n[5])||JE(t,n[4],n[5],n[6],n[7])||JE(t,n[2],n[3],n[6],n[7])}var QXt={type:"text",tag:"text",nested:!1,attr:GXt,bound:Sse,draw:YXt,pick:D8(KXt),isect:XXt},JXt=yse("trail",XKt,cXt),af={arc:aXt,area:fXt,group:SXt,image:IXt,line:kXt,path:PXt,rect:$Xt,rule:BXt,shape:UXt,symbol:zXt,text:QXt,trail:JXt};function CY(e,t,n){var r=af[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new wo),e,n)}var O1e={mark:null};function V5e(e,t,n){var r=af[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(O1e.mark=e,l=O1e),c=CY(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new wo,o)for(a=0,u=s.length;a<u;++a)t.union(CY(s[a],i,n));return e.bounds=t}const ZXt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function H5e(e,t){return JSON.stringify(e,ZXt,t)}function q5e(e){const t=typeof e=="string"?JSON.parse(e):e;return W5e(t)}function W5e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&W5e(n[i]);return t&&V5e(e),e}class G5e{constructor(t){arguments.length?this.root=q5e(t):(this.root=$1e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new N8(this.root)])}toJSON(t){return H5e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=$1e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function $1e(e,t){const n={bounds:new wo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function rv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Tse(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Lo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=rv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function zf(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Y5e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function F8(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function eQt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=af[i.marktype]).tip){for(o=F8(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Cse=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||h8(),this._tooltip=n||tQt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=rv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=eQt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function tQt(e,t,n,r){e.element().setAttribute("title",r||"")}class oD{constructor(t){this._el=null,this._bgcolor=null,this._loader=new R5e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const nQt="keydown",rQt="keypress",iQt="keyup",K5e="dragenter",pM="dragleave",X5e="dragover",AY="pointerdown",sQt="pointerup",NF="pointermove",mM="pointerout",Q5e="pointerover",IY="mousedown",oQt="mouseup",J5e="mousemove",PF="mouseout",Z5e="mouseover",DF="click",aQt="dblclick",uQt="wheel",eje="mousewheel",OF="touchstart",$F="touchmove",MF="touchend",lQt=[nQt,rQt,iQt,K5e,pM,X5e,AY,sQt,NF,mM,Q5e,IY,oQt,J5e,PF,Z5e,DF,aQt,uQt,eje,OF,$F,MF],kY=NF,Nk=PF,RY=DF;class aD extends Cse{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=lQt,this.pointermove=L1e([NF,J5e],[Q5e,Z5e],[mM,PF]),this.dragover=L1e([X5e],[K5e],[pM]),this.pointerout=F1e([mM,PF]),this.dragleave=F1e([pM])}initialize(t,n,r){return this._canvas=t&&Tse(t,"canvas"),[DF,IY,AY,NF,mM,pM].forEach(i=>M1e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(eje,t)}pointerdown(t){this._down=this._active,this.fire(AY,t)}mousedown(t){this._down=this._active,this.fire(IY,t)}click(t){this._down===this._active&&(this.fire(DF,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(OF,t,!0)}touchmove(t){this.fire($F,t,!0)}touchend(t){this.fire(MF,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===RY&&i&&i.href?this.handleHref(n,i,i.href):(t===kY||t===Nk)&&this.handleTooltip(n,i,t!==Nk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(M1e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=F8(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return af[t.marktype].pick.call(this,o,t,n,r,i,s)}}const cQt=e=>e===OF||e===$F||e===MF?[OF,$F,MF]:[e];function M1e(e,t){cQt(t).forEach(n=>fQt(e,n))}function fQt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function NI(e,t,n){t.forEach(r=>e.fire(r,n))}function L1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?NI(this,e,r):((!i||!i.exit)&&NI(this,n,r),this._active=s,NI(this,t,r),NI(this,e,r))}}function F1e(e){return function(t){NI(this,e,t),this._active=null}}function dQt(){return typeof window<"u"&&window.devicePixelRatio||1}function hQt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?dQt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class LF extends oD{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new wo,this._tempb=new wo}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Pv(1,1,this._options.type),t&&this._canvas&&(zf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)hQt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Xe("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=pQt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):mQt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=af[n.marktype];n.clip&&dXt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const pQt=(e,t,n)=>new wo().set(0,0,t,n).translate(-e[0],-e[1]);function mQt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class tje extends Cse{constructor(t,n){super(t,n);const r=this;r._hrefHandler=nV(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=nV(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Nk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(RY,this._hrefHandler),i.removeEventListener(kY,this._tooltipHandler),i.removeEventListener(Nk,this._tooltipHandler)),this._svg=i=t&&Tse(t,"svg"),i&&(i.addEventListener(RY,this._hrefHandler),i.addEventListener(kY,this._tooltipHandler),i.addEventListener(Nk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:nV(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const nV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},nje="aria-hidden",Ase="aria-label",Ise="role",kse="aria-roledescription",rje="graphics-object",Rse="graphics-symbol",ije=(e,t,n)=>({[Ise]:e,[kse]:t,[Ase]:n||void 0}),gQt=Dh(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),j1e={axis:{desc:"axis",caption:bQt},legend:{desc:"legend",caption:_Qt},"title-text":{desc:"title",caption:e=>`Title text '${U1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${U1e(e)}'`}},B1e={ariaRole:Ise,ariaRoleDescription:kse,description:Ase};function sje(e,t){const n=t.aria===!1;if(e(nje,n||void 0),n||t.description==null)for(const r in B1e)e(B1e[r],void 0);else{const r=t.mark.marktype;e(Ase,t.description),e(Ise,t.ariaRole||(r==="group"?rje:Rse)),e(kse,t.ariaRoleDescription||`${r} mark`)}}function oje(e){return e.aria===!1?{[nje]:!0}:gQt[e.role]?null:j1e[e.role]?vQt(e,j1e[e.role]):yQt(e)}function yQt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return ije(n?rje:Rse,`${t} mark container`,e.description)}function vQt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return ije(t.role||Rse,t.desc,n.description||r(n))}catch{return null}}function U1e(e){return Pt(e.text).join(" ")}function bQt(e){const t=e.datum,n=e.orient,r=t.title?aje(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${VT(a)?"discrete":a} scale with ${_5e(o,s,e)}`}function _Qt(e){const t=e.datum,n=t.title?aje(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return xQt(r)+(n?` titled '${n}'`:"")+` for ${wQt(s)} with ${_5e(u,a,e)}`}function aje(e){try{return Pt(Mr(e.items).items[0].text).join(" ")}catch{return null}}function wQt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Mr(e)}function xQt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const uje=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),EQt=e=>uje(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Nse(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${EQt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=uje(u),a),toString:()=>e};return a}const lje=e=>cje(Nse(),e)+"";function cje(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):cje(e,r)}return e.close()}const FF={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},jF={blend:"mix-blend-mode"},fje={fill:"none","stroke-miterlimit":10},P2=0,z1e="http://www.w3.org/2000/xmlns/",$o=hN.xmlns;class Pse extends oD{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Lo(t,0,"svg",$o),this._svg.setAttributeNS(z1e,"xmlns",$o),this._svg.setAttributeNS(z1e,"xmlns:xlink",hN["xmlns:xlink"]),this._svg.setAttribute("version",hN.version),this._svg.setAttribute("class","marks"),zf(t,1),this._root=Lo(this._svg,P2,"g",$o),iv(this._root,fje),zf(this._svg,P2+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(iv(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Lo(t,P2,"rect",$o),iv(r,{width:this._width,height:this._height,fill:n}));const i=lje(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),zf(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=af[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,V1e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,V1e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=af[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=H1e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return zf(c,0),n._svg;c.setAttribute("class",Y5e(n));const f=oje(n);for(const m in f)Hu(c,m,f[m]);l||Hu(c,"pointer-events",u),Hu(c,"clip-path",n.clip?lse(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=H1e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&CQt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):$h(n,p),zf(c,h),c}_update(t,n,r){Bg=n,uu=n.__values__,sje(Pk,r),t.attr(Pk,r,this);const i=IQt[t.type];i&&i.call(this,t,n,r),Bg&&this.style(Bg,r)}style(t,n){if(n!=null){for(const r in FF){let i=r==="font"?sD(n):n[r];if(i===uu[r])continue;const s=FF[r];i==null?t.removeAttribute(s):(ose(i)&&(i=x5e(i,this._defs.gradient,dje())),t.setAttribute(s,i+"")),uu[r]=i}for(const r in jF)gM(t,jF[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Lo(t,P2+1,"defs",$o)),i=SQt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Lo(t,P2+1,"defs",$o)),i=TQt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):zf(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function V1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function SQt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Lo(e,n++,"pattern",$o);iv(o,{id:AF+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Lo(o,0,"rect",$o),iv(o,{width:1,height:1,fill:`url(${dje()}#${t.id})`}),e=Lo(e,n++,"radialGradient",$o),iv(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Lo(e,n++,"linearGradient",$o),iv(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Lo(e,r,"stop",$o),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return zf(e,r),n}function TQt(e,t,n){let r;return e=Lo(e,n,"clipPath",$o),e.setAttribute("id",t.id),t.path?(r=Lo(e,0,"path",$o),r.setAttribute("d",t.path)):(r=Lo(e,0,"rect",$o),iv(r,{x:0,y:0,width:t.width,height:t.height})),zf(e,1),n+1}function CQt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;$h(n,o=>{i=e.mark(t,o,i,r),++s}),zf(t,1+s)}function H1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=rv(o,r,$o),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=rv(o,"path",$o);s.appendChild(a),a.__data__=e;const u=rv(o,"g",$o);s.appendChild(u),u.__data__=e;const l=rv(o,"path",$o);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||AQt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function AQt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bg=null,uu=null;const IQt={group(e,t,n){const r=Bg=t.childNodes[2];uu=r.__values__,e.foreground(Pk,n,this),uu=t.__values__,Bg=t.childNodes[1],e.content(Pk,n,this);const i=Bg=t.childNodes[0];e.background(Pk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==uu.events&&(Hu(r,"pointer-events",s),Hu(i,"pointer-events",s),uu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Hu(r,"display",null),this.style(i,n),Hu(i,"stroke",null),o&&(n.fill=null),uu=r.__values__,this.style(r,n),o&&(n.fill=o),Bg=null}else Hu(r,"display","none")},image(e,t,n){n.smooth===!1?(gM(t,"image-rendering","optimizeSpeed"),gM(t,"image-rendering","pixelated")):gM(t,"image-rendering",null)},text(e,t,n){const r=iD(n);let i,s,o,a;Je(r)?(s=r.map(u=>d1(n,u)),i=s.join(`
`),i!==uu.text&&(zf(t,0),o=t.ownerDocument,a=f1(n),s.forEach((u,l)=>{const c=rv(o,"tspan",$o);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),uu.text=i)):(s=d1(n,r),s!==uu.text&&(t.textContent=s,uu.text=s)),Hu(t,"font-family",sD(n)),Hu(t,"font-size",$m(n)+"px"),Hu(t,"font-style",n.fontStyle),Hu(t,"font-variant",n.fontVariant),Hu(t,"font-weight",n.fontWeight)}};function Pk(e,t,n){t!==uu[e]&&(n?kQt(Bg,e,t,n):Hu(Bg,e,t),uu[e]=t)}function gM(e,t,n){n!==uu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),uu[t]=n)}function iv(e,t){for(const n in t)Hu(e,n,t[n])}function Hu(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function kQt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function dje(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class hje extends oD{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Nse();n.open("svg",Wn({},hN,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",fje,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=af[n.marktype],i=r.tag,s=[sje,r.attr];t.open("g",{class:Y5e(n),"clip-path":n.clip?lse(this,n,n.group):null},oje(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=iD(a);if(Je(l)){const c={x:0,dy:f1(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(d1(a,l[f])).close()}else t.text(d1(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),$h(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):$h(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&RQt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:AF+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function RQt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=sD(t),e["font-size"]=$m(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in FF){let a=t[o];const u=FF[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(ose(a)&&(a=x5e(a,i.gradient,"")),e[u]=a)}for(const o in jF){const a=t[o];a!=null&&(s=s||[],s.push(`${jF[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Qd={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function NQt(e){Qd.svgMarkTypes=e.svgMarkTypes??["text"],Qd.svgOnTop=e.svgOnTop??!0,Qd.debug=e.debug??!1}class NY extends oD{constructor(t){super(t),this._svgRenderer=new Pse(t),this._canvasRenderer=new LF(t)}initialize(t,n,r,i,s){this._root_el=Lo(t,0,"div");const o=Lo(this._root_el,0,"div"),a=Lo(this._root_el,1,"div");return this._root_el.style.position="relative",Qd.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Qd.svgOnTop?a:o,this._canvasEl=Qd.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Qd.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Qd.svgMarkTypes.includes(s));this._svgRenderer.render(t,Qd.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Qd.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class pje extends aD{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Lo(Lo(t,0,"div"),Qd.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const mje="canvas",gje="hybrid",yje="png",vje="svg",bje="none",sv={Canvas:mje,PNG:yje,SVG:vje,Hybrid:gje,None:bje},vw={};vw[mje]=vw[yje]={renderer:LF,headless:LF,handler:aD};vw[vje]={renderer:Pse,headless:hje,handler:tje};vw[gje]={renderer:NY,headless:NY,handler:pje};vw[bje]={};function j8(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(vw[e]=t,this):vw[e]}function _je(e,t,n){const r=[],i=new wo().union(t),s=e.marktype;return s?wje(e,i,n,r):s==="group"?xje(e,i,n,r):Xe("Intersect scene must be mark node or group item.")}function wje(e,t,n,r){if(PQt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)xje(i[a],t,n,r);else for(const u=af[s].isect;a<o;++a){const l=i[a];Eje(l,t,u)&&r.push(l)}}return r}function PQt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function xje(e,t,n,r){n&&n(e.mark)&&Eje(e,t,af.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)wje(i[u],t,n,r);t.translate(o,a)}return r}function Eje(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const rV=new wo;function Sje(e){const t=e.clip;if(Gn(t))t(nD(rV.clear()));else if(t)rV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(rV)}const DQt=1e-9;function Dse(e,t,n){return e===t?!0:n==="path"?Tje(e,t):e instanceof Date&&t instanceof Date?+e==+t:Gr(e)&&Gr(t)?Math.abs(e-t)<=DQt:!e||!t||!Ot(e)&&!Ot(t)?e==t:OQt(e,t)}function Tje(e,t){return Dse(HT(e),HT(t))}function OQt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Dse(e[i],t[i],i))return!1;return typeof e==typeof t}function $Qt(){k5e(),sKt()}const GT="top",ah="left",dh="right",h1="bottom",MQt="top-left",LQt="top-right",FQt="bottom-left",jQt="bottom-right",Ose="start",PY="middle",Gu="end",BQt="x",UQt="y",B8="group",$se="axis",Mse="title",zQt="frame",VQt="scope",Lse="legend",Cje="row-header",Aje="row-footer",Ije="row-title",kje="column-header",Rje="column-footer",Nje="column-title",HQt="padding",qQt="symbol",Pje="fit",Dje="fit-x",Oje="fit-y",WQt="pad",Fse="none",B3="all",DY="each",jse="flush",ov="column",av="row";function $je(e){qe.call(this,null,e)}Ct($je,qe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=af[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=U3(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===B8||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(U3(l,o))),r.role){case $se:case Lse:case Mse:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(U3(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(U3(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return Sje(r),t.modifies("bounds")}});function U3(e,t,n){return t(e.bounds.clear(),e,n)}const q1e=":vega_identifier:";function Bse(e){qe.call(this,0,e)}Bse.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ct(Bse,qe,{transform(e,t){const n=GQt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function GQt(e){return e._signals[q1e]||(e._signals[q1e]=e.add(0))}function Mje(e){qe.call(this,null,e)}Ct(Mje,qe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,YQt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===B8?N8:R8;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function YQt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Lje(e){qe.call(this,null,e)}const W1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Fje(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Fje=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),G1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(Fje(i,s=e[n].bounds,t))return!0},KQt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},XQt=(e,t,n)=>{var r=e.range(),i=new wo;return t===GT||t===h1?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Y1e=e=>(e.forEach(t=>t.opacity=1),e),K1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ct(Lje,qe,{transform(e,t){const n=W1e[e.method]||W1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Y1e(i),t=K1e(t,e)),t;if(i=i.filter(KQt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Y1e(i),t=K1e(t,e),s.length>=3&&G1e(s,r)){do s=n(s,r);while(s.length>=3&&G1e(s,r));s.length<3&&!Mr(i).opacity&&(s.length>1&&(Mr(s).opacity=0),Mr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=XQt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function jje(e){qe.call(this,null,e)}Ct(jje,qe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ou=new wo;function ZE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function QQt(e){var t=e.items[0].orient;return t===ah||t===dh}function JQt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ZQt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=JQt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&xse(p),b=0,w=0,E,S;switch(ou.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case GT:b=f||0,w=-c,S=Math.max(d,Math.min(h,-g.y1)),g.add(0,-S).add(l,0),p&&z3(e,p,S,m,y,0,-1,g);break;case ah:b=-c,w=f||0,S=Math.max(d,Math.min(h,-g.x1)),g.add(-S,0).add(0,l),p&&z3(e,p,S,m,y,1,-1,g);break;case dh:b=n+c,w=f||0,S=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(S,l),p&&z3(e,p,S,m,y,1,1,g);break;case h1:b=f||0,w=r+c,S=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,S),p&&z3(e,p,S,m,0,0,1,g);break;default:b=i.x,w=i.y}return X0(g.translate(b,w),i),ZE(i,"x",b+o)|ZE(i,"y",w+o)&&(i.bounds=ou,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function z3(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const X1e=(e,t)=>Math.floor(Math.min(e,t)),Q1e=(e,t)=>Math.ceil(Math.max(e,t));function eJt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===B8)switch(i.role){case $se:case Lse:case Mse:break;case Cje:o.rowheaders.push(...s);break;case Aje:o.rowfooters.push(...s);break;case kje:o.colheaders.push(...s);break;case Rje:o.colfooters.push(...s);break;case Ije:o.rowtitle=s[0];break;case Nje:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function tJt(e){return new wo().set(0,0,e.width||0,e.height||0)}function nJt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function hs(e,t,n){const r=Ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function J1e(e){return e<0?Math.ceil(-e):0}function Bje(e,t,n){var r=!n.nodirty,i=n.bounds===jse?tJt:nJt,s=ou.set(0,0,0,0),o=hs(n.align,ov),a=hs(n.align,av),u=hs(n.padding,ov),l=hs(n.padding,av),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),b=0,w=Array(d),E=Array(d),S=Array(d),T,C,I,R,P,D,L,M,F,z,B;for(C=0;C<c;++C)p[C]=0;for(C=0;C<f;++C)y[C]=0;for(C=0;C<d;++C)D=t[C],P=S[C]=i(D),D.x=D.x||0,w[C]=0,D.y=D.y||0,E[C]=0,I=C%c,R=~~(C/c),m=Math.max(m,L=Math.ceil(P.x2)),b=Math.max(b,M=Math.ceil(P.y2)),p[I]=Math.max(p[I],L),y[R]=Math.max(y[R],M),h[C]=u+J1e(P.x1),g[C]=l+J1e(P.y1),r&&e.dirty(t[C]);for(C=0;C<d;++C)C%c===0&&(h[C]=0),C<c&&(g[C]=0);if(o===DY)for(I=1;I<c;++I){for(B=0,C=I;C<d;C+=c)B<h[C]&&(B=h[C]);for(C=I;C<d;C+=c)h[C]=B+p[I-1]}else if(o===B3){for(B=0,C=0;C<d;++C)C%c&&B<h[C]&&(B=h[C]);for(C=0;C<d;++C)C%c&&(h[C]=B+m)}else for(o=!1,I=1;I<c;++I)for(C=I;C<d;C+=c)h[C]+=p[I-1];if(a===DY)for(R=1;R<f;++R){for(B=0,C=R*c,T=C+c;C<T;++C)B<g[C]&&(B=g[C]);for(C=R*c;C<T;++C)g[C]=B+y[R-1]}else if(a===B3){for(B=0,C=c;C<d;++C)B<g[C]&&(B=g[C]);for(C=c;C<d;++C)g[C]=B+b}else for(a=!1,R=1;R<f;++R)for(C=R*c,T=C+c;C<T;++C)g[C]+=y[R-1];for(F=0,C=0;C<d;++C)F=h[C]+(C%c?F:0),w[C]+=F-t[C].x;for(I=0;I<c;++I)for(z=0,C=I;C<d;C+=c)z+=g[C],E[C]+=z-t[C].y;if(o&&hs(n.center,ov)&&f>1)for(C=0;C<d;++C)P=o===B3?m:p[C%c],F=P-S[C].x2-t[C].x-w[C],F>0&&(w[C]+=F/2);if(a&&hs(n.center,av)&&c!==1)for(C=0;C<d;++C)P=a===B3?b:y[~~(C/c)],z=P-S[C].y2-t[C].y-E[C],z>0&&(E[C]+=z/2);for(C=0;C<d;++C)s.union(S[C].translate(w[C],E[C]));switch(F=hs(n.anchor,BQt),z=hs(n.anchor,UQt),hs(n.anchor,ov)){case Gu:F-=s.width();break;case PY:F-=s.width()/2}switch(hs(n.anchor,av)){case Gu:z-=s.height();break;case PY:z-=s.height()/2}for(F=Math.round(F),z=Math.round(z),s.clear(),C=0;C<d;++C)t[C].mark.bounds.clear();for(C=0;C<d;++C)D=t[C],D.x+=w[C]+=F,D.y+=E[C]+=z,s.union(D.mark.bounds.union(D.bounds.translate(w[C],E[C]))),r&&e.dirty(D);return s}function rJt(e,t,n){var r=eJt(t),i=r.marks,s=n.bounds===jse?iJt:sJt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=Bje(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=hs(n.headerBand,av,null),c=V3(e,r.rowheaders,i,a,u,-hs(o,"rowHeader"),X1e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=hs(n.headerBand,ov,null),f=V3(e,r.colheaders,i,a,a,-hs(o,"columnHeader"),X1e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=hs(n.footerBand,av,null),d=V3(e,r.rowfooters,i,a,u,hs(o,"rowFooter"),Q1e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=hs(n.footerBand,ov,null),h=V3(e,r.colfooters,i,a,a,hs(o,"columnFooter"),Q1e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=hs(n.titleAnchor,av),g=hs(o,"rowTitle"),g=p===Gu?d+g:c-g,m=hs(n.titleBand,av,.5),Z1e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=hs(n.titleAnchor,ov),g=hs(o,"columnTitle"),g=p===Gu?h+g:f-g,m=hs(n.titleBand,ov,.5),Z1e(e,r.coltitle,g,1,y,m))}function iJt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function sJt(e,t){return e.bounds[t]}function V3(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,b,w,E,S,T,C,I,R;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,E=t.length;b<E;++b,y+=f){for(T=t[b],S=T.mark.bounds,w=y;w>=0&&(C=n[w])==null;w-=d);a?(I=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),R=m):(I=m,R=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),S.union(T.bounds.translate(I-(T.x||0),R-(T.y||0))),T.x=I,T.y=R,e.dirty(T),g=o(g,S[l])}return g}function Z1e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function oJt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function aJt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function uJt(e,t,n,r,i,s,o){const a=oJt(n,t),u=aJt(e,a("offset",0)),l=a("anchor",Ose),c=l===Gu?1:l===PY?.5:0,f={align:DY,bounds:a("bounds",jse),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ah:f.anchor={x:Math.floor(r.x1)-u,column:Gu,y:c*(o||r.height()+2*r.y1),row:l};break;case dh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case GT:f.anchor={y:Math.floor(i.y1)-u,row:Gu,x:c*(s||i.width()+2*i.x1),column:l};break;case h1:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case MQt:f.anchor={x:u,y:u};break;case LQt:f.anchor={x:s-u,y:u,column:Gu};break;case FQt:f.anchor={x:u,y:o-u,row:Gu};break;case jQt:f.anchor={x:s-u,y:o-u,column:Gu,row:Gu};break}return f}function lJt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),fJt(e,n,n.items[0].items[0]),s=cJt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===qQt&&dJt(n.items[0].items[0].items[0].items),i!==Fse&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,X0(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function cJt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function fJt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&D2(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case ah:i+=Math.ceil(o.bounds.width())+u;break;case dh:case h1:break;default:s+=o.bounds.height()+u}switch((i||s)&&D2(e,n,i,s),o.orient){case ah:c+=sE(t,n,o,a,1,1);break;case dh:l+=sE(t,n,o,Gu,0,0)+u,c+=sE(t,n,o,a,1,1);break;case h1:l+=sE(t,n,o,a,0,0),c+=sE(t,n,o,Gu,-1,0,1)+u;break;default:l+=sE(t,n,o,a,0,0)}(l||c)&&D2(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(D2(e,n,-l,0),D2(e,o,-l,0))}}function sE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:xse(n);return Math.round(r===Ose?f:r===Gu?d-h:.5*(c-h))}function D2(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function dJt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function hJt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===ah||a===dh?r:n,p=0,m=0,g=0,y=0,b=0,w;if(o!==B8?a===ah?(p=i.y2,h=i.y1):a===dh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===ah&&(p=r,h=0),w=u===Ose?p:u===Gu?h:(p+h)/2,d&&d.text){switch(a){case GT:case h1:b=f.bounds.height()+c;break;case ah:y=f.bounds.width()+c;break;case dh:y=-f.bounds.width()-c;break}ou.clear().union(d.bounds),ou.translate(y-(d.x||0),b-(d.y||0)),ZE(d,"x",y)|ZE(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(ou),d.mark.bounds.clear().union(ou),e.dirty(d)),ou.clear().union(d.bounds)}else ou.clear();switch(ou.union(f.bounds),a){case GT:m=w,g=i.y1-ou.height()-l;break;case ah:m=i.x1-ou.width()-l,g=w;break;case dh:m=i.x2+ou.width()+l,g=w;break;case h1:m=w,g=i.y2+l;break;default:m=s.x,g=s.y}return ZE(s,"x",m)|ZE(s,"y",g)&&(ou.translate(m,g),e.dirty(s),s.bounds.clear().union(ou),t.bounds.clear().union(ou),e.dirty(s)),s.bounds}function Uje(e){qe.call(this,null,e)}Ct(Uje,qe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&rJt(n,r,e.layout),mJt(n,r,e)}),pJt(e.mark.group)?t.reflow():t}});function pJt(e){return e&&e.mark.role!=="legend-entry"}function mJt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new wo().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case $se:h=QQt(f)?a:u,h.union(ZQt(e,f,i,s));break;case Mse:c=f;break;case Lse:l.push(lJt(e,f));break;case zQt:case VQt:case Cje:case Aje:case Ije:case kje:case Rje:case Nje:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||dh,d!==Fse&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const b=g[y];Bje(e,b,uJt(b,y,n.legends,a,u,i,s))}l.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===Pje||n.autosize.type===Dje||n.autosize.type===Oje))switch(y.orient){case ah:case dh:o.add(b.x1,0).add(b.x2,0);break;case GT:case h1:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(hJt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),gJt(e,t,o,n)}function gJt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===HQt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Fse?(l=0,f=0,u=o,c=a):s===Pje?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Dje?(u=Math.max(0,o-l-d),a=c+f+h):s===Oje?(o=u+l+d,c=Math.max(0,a-f-h)):s===WQt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const yJt=Object.freeze(Object.defineProperty({__proto__:null,bound:$je,identifier:Bse,mark:Mje,overlap:Lje,render:jje,viewlayout:Uje},Symbol.toStringTag,{value:"Module"}));function zje(e){qe.call(this,null,e)}Ct(zje,qe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=ise(s,o,e.minstep),u=e.format||m5e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?p5e(s,e.values,a):sse(s,a);return i&&(r.rem=i),i=l.map((c,f)=>di({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(di({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Vje(e){qe.call(this,null,e)}function vJt(){return di({})}function bJt(e){const t=fA().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ct(Vje,qe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||vJt,s=e.key||nn,o=this.value;return Je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Xe("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=bJt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function Hje(e){qe.call(this,null,e)}Ct(Hje,qe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Cy,u=i.enter||Cy,l=i.exit||Cy,c=(s&&!o?i[s]:a)||Cy;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Cy&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Cy&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Cy){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function qje(e){qe.call(this,[],e)}Ct(qje,qe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||uM,o=e.scale,a=+e.limit,u=ise(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===uM,c=e.format||b5e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||v5e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===uM?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Gn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=Iu(m=p||8),i=i.map((y,b)=>di({index:b,label:c(y,b,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(di({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===WYt?(d=o.domain(),h=f5e(o,d[0],Mr(d)),f.length<3&&!e.values&&d[0]!==Mr(d)&&(f=[d[0],Mr(d)]),i=f.map((y,b)=>di({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(p=f.length-1,h=rKt(o),i=f.map((y,b)=>di({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const _Jt=e=>e.source.x,wJt=e=>e.source.y,xJt=e=>e.target.x,EJt=e=>e.target.y;function Use(e){qe.call(this,{},e)}Use.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ct(Use,qe,{transform(e,t){var n=e.sourceX||_Jt,r=e.sourceY||wJt,i=e.targetX||xJt,s=e.targetY||EJt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=ebe.get(u+"-"+a)||ebe.get(u);return l||Xe("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const Wje=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,SJt=(e,t,n,r)=>Wje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Gje=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},TJt=(e,t,n,r)=>Gje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Yje=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},CJt=(e,t,n,r)=>Yje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),AJt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,IJt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,kJt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},RJt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},NJt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},PJt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},ebe=fA({line:Wje,"line-radial":SJt,arc:Gje,"arc-radial":TJt,curve:Yje,"curve-radial":CJt,"orthogonal-horizontal":AJt,"orthogonal-vertical":IJt,"orthogonal-radial":kJt,"diagonal-horizontal":RJt,"diagonal-vertical":NJt,"diagonal-radial":PJt});function zse(e){qe.call(this,null,e)}zse.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ct(zse,qe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||uA,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/DIe(l),h=Gl(c),p,m,g;for(e.sort&&h.sort((y,b)=>l[y]-l[b]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const DJt=5;function OJt(e){const t=e.type;return!e.bins&&(t===UT||t===KP||t===XP)}function Kje(e){return tse(e)&&e!==em}const $Jt=Dh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Xje(e){qe.call(this,null,e),this.modified(!0)}Ct(Xje,qe,{transform(e,t){var n=t.dataflow,r=this.value,i=MJt(e);(!r||i!==r.type)&&(this.value=r=ti(i)());for(i in e)if(!$Jt[i]){if(i==="padding"&&Kje(r.type))continue;Gn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return zJt(r,e,UJt(r,e,FJt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function MJt(e){var t=e.type,n="",r;return t===em?em+"-"+UT:(LJt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?em+"-":r===3?mA+"-":""),(n+t||UT).toLowerCase())}function LJt(e){const t=e.type;return tse(t)&&t!==gw&&t!==yw&&(e.scheme||e.range&&e.range.length&&e.range.every(Dt))}function FJt(e,t,n){const r=jJt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&OJt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return Kje(s)&&t.padding&&i[0]!==Mr(i)&&(i=BJt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Qje(s,i,n)),s===Qie&&e.unknown(t.domainImplicit?wW:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&ise(e,t.nice)||null),i.length}function jJt(e,t,n){return t?(e.domain(Qje(e.type,t,n)),t.length):-1}function BJt(e,t,n,r,i,s){var o=Math.abs(Mr(n)-n[0]),a=o/(o-2*r),u=e===k0?Hre(t,null,a):e===XP?EF(t,null,a,.5):e===KP?EF(t,null,a,i||1):e===T8?qre(t,null,a,s||1):Vre(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Qje(e,t,n){if(o5e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Et(t))}return t}function UJt(e,t,n){let r=t.bins;if(r&&!Je(r)){const i=e.domain(),s=i[0],o=Mr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Xe("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Gl(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Jie&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function zJt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=VJt(r,t,n);else if(t.scheme&&(s=HJt(r,t,n),Gn(s))){if(e.interpolator)return e.interpolator(s);Xe(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&a5e(r))return e.interpolator(I8(OY(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(nse(t.interpolate,t.interpolateGamma)):Gn(e.round)?e.round(i):Gn(e.rangeRound)&&e.interpolate(i?nP:V0),s&&e.range(OY(s,t.reverse))}function VJt(e,t,n){e!==e5e&&e!==bY&&Xe("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===bY?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Xie(n,i,r)]}function HJt(e,t,n){var r=t.schemeExtent,i,s;return Je(t.scheme)?s=I8(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=rse(i),s||Xe(`Unrecognized scheme name: ${t.scheme}`)),n=e===A8?n+1:e===Jie?n-1:e===zT||e===C8?+t.schemeCount||DJt:n,a5e(e)?tbe(s,r,t.reverse):Gn(s)?c5e(tbe(s,r),n):e===Qie?s:s.slice(0,n)}function tbe(e,t,n){return Gn(e)&&(t||n)?l5e(e,OY(t||[0,1],n)):e}function OY(e,t){return t?e.slice().reverse():e}function Jje(e){qe.call(this,null,e)}Ct(Jje,qe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ox(e.sort)),this.modified(n),t}});const nbe="zero",Zje="center",e8e="normalize",t8e=["y0","y1"];function Vse(e){qe.call(this,null,e)}Vse.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:nbe,values:[nbe,Zje,e8e]},{name:"as",type:"string",array:!0,length:2,default:t8e}]};Ct(Vse,qe,{transform(e,t){var n=e.as||t8e,r=n[0],i=n[1],s=ox(e.sort),o=e.field||uA,a=e.offset===Zje?qJt:e.offset===e8e?WJt:GJt,u,l,c,f;for(u=YJt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function qJt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function WJt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function GJt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function YJt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const KJt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:zje,datajoin:Vje,encode:Hje,legendentries:qje,linkpath:Use,pie:zse,scale:Xje,sortitems:Jje,stack:Vse},Symbol.toStringTag,{value:"Module"}));var XJt=Math.abs,$Y=Math.cos,BF=Math.sin,QJt=1e-6,n8e=Math.PI,MY=n8e/2,rbe=JJt(2);function ibe(e){return e>1?MY:e<-1?-MY:Math.asin(e)}function JJt(e){return e>0?Math.sqrt(e):0}function ZJt(e,t){var n=e*BF(t),r=30,i;do t-=i=(t+BF(t)-n)/(1+$Y(t));while(XJt(i)>QJt&&--r>0);return t/2}function eZt(e,t,n){function r(i,s){return[e*i*$Y(s=ZJt(n,s)),t*BF(s)]}return r.invert=function(i,s){return s=ibe(s/t),[i/(e*$Y(s)),ibe((2*s+BF(2*s))/n)]},r}var tZt=eZt(rbe/MY,rbe,n8e);function nZt(){return km(tZt).scale(169.529)}const rZt=hRe(),LY=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function iZt(e,t){return function n(){const r=t();return r.type=e,r.path=hRe().projection(r),r.copy=r.copy||function(){const i=n();return LY.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},i5e(r)}}function Hse(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(UF[e]=iZt(e,t),this):UF[e]||null}function r8e(e){return e&&e.path||rZt}const UF={albers:mRe,albersusa:eSt,azimuthalequalarea:tSt,azimuthalequidistant:nSt,conicconformal:sSt,conicequalarea:r6,conicequidistant:uSt,equalEarth:cSt,equirectangular:oSt,gnomonic:fSt,identity:dSt,mercator:rSt,mollweide:nZt,naturalEarth1:hSt,orthographic:pSt,stereographic:mSt,transversemercator:gSt};for(const e in UF)Hse(e,UF[e]);function sZt(){}const ag=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function i8e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),oZt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(aZt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,b;for(h=p=-1,g=u[0]>=l,ag[g<<1].forEach(w);++h<e-1;)m=g,g=u[h+1]>=l,ag[m|g<<1].forEach(w);for(ag[g<<0].forEach(w);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,ag[g<<1|y<<2].forEach(w);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,b=y,y=u[p*e+h+1]>=l,ag[m|g<<1|y<<2|b<<3].forEach(w);ag[g|y<<3].forEach(w)}for(h=-1,y=u[p*e]>=l,ag[y<<2].forEach(w);++h<e-1;)b=y,y=u[p*e+h+1]>=l,ag[y<<2|b<<3].forEach(w);ag[y<<3].forEach(w);function w(E){var S=[E[0][0]+h,E[0][1]+p],T=[E[1][0]+h,E[1][1]+p],C=o(S),I=o(T),R,P;(R=d[C])?(P=f[I])?(delete d[R.end],delete f[P.start],R===P?(R.ring.push(T),c(R.ring)):f[R.start]=d[P.end]={start:R.start,end:P.end,ring:R.ring.concat(P.ring)}):(delete d[R.end],R.ring.push(T),d[R.end=I]=R):(R=f[I])?(P=d[C])?(delete f[R.start],delete d[P.end],R===P?(R.ring.push(T),c(R.ring)):f[P.start]=d[R.end]={start:P.start,end:R.end,ring:P.ring.concat(R.ring)}):(delete f[R.start],R.ring.unshift(S),f[R.start=C]=R):f[C]=d[I]={start:C,end:I,ring:[S,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Xe("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:sZt,r):n===a},r}function oZt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function aZt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=uZt(e,t[n]))return i;return 0}function uZt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(lZt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function lZt(e,t,n){var r;return cZt(e,t,n)&&fZt(e[r=+(e[0]===t[0])],n[r],t[r])}function cZt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function fZt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function s8e(e,t,n){return function(r){var i=ym(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Vv(s,o,e):a/(e+1);return Gl(s+u,o,u)}}function qse(e){qe.call(this,null,e)}qse.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ct(qse,qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Au,s=i8e().smooth(e.smooth!==!1),o=e.thresholds||dZt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Je(o)?o:o(c.values));hZt(f,c,l,e),f.forEach(d=>{u.push(g8(l,di(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function dZt(e,t,n){const r=s8e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Wg(t(i).values)))}function hZt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Gn(i)&&(i=i(n,r)),Gn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Gr(i)?i:i[0])||1,a=(Gr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(o8e(t,o,a,u,l))}function o8e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function sbe(e,t,n){const r=e>=0?e:cie(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function iV(e){return Gn(e)?e:Iu(+e)}function a8e(){var e=u=>u[0],t=u=>u[1],n=uA,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=sbe(r[0],u,e)>>o,f=sbe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let b=g;u.forEach(E=>{const S=d+(+e(E)>>o),T=h+(+t(E)>>o);S>=0&&S<p&&T>=0&&T<m&&(g[S+T*p]+=+n(E))}),c>0&&f>0?(oE(p,m,g,y,c),aE(p,m,y,g,f),oE(p,m,g,y,c),aE(p,m,y,g,f),oE(p,m,g,y,c),aE(p,m,y,g,f)):c>0?(oE(p,m,g,y,c),oE(p,m,y,g,c),oE(p,m,g,y,c),b=y):f>0&&(aE(p,m,g,y,f),aE(p,m,y,g,f),aE(p,m,g,y,f),b=y);const w=l?Math.pow(2,-2*o):1/DIe(b);for(let E=0,S=p*m;E<S;++E)b[E]*=w;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=iV(u),a):e},a.y=function(u){return arguments.length?(t=iV(u),a):t},a.weight=function(u){return arguments.length?(n=iV(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Xe("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Xe("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Xe("invalid bandwidth"),r=u,a):r},a}function oE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function aE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Wse(e){qe.call(this,null,e)}Wse.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const pZt=["x","y","weight","size","cellSize","bandwidth"];function u8e(e,t){return pZt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ct(Wse,qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=mZt(r,e.groupby),s=(e.groupby||[]).map(Vs),o=u8e(a8e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>di(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mZt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Gse(e){qe.call(this,null,e)}Gse.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ct(Gse,qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=i8e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||s8e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=u8e(a8e(),e)(i,!0),u=o8e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(di),n}});const FY="Feature",Yse="FeatureCollection",gZt="MultiPoint";function Kse(e){qe.call(this,null,e)}Kse.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ct(Kse,qe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Au,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(bu(a))||s&&t.modified(bu(s))||o&&t.modified(bu(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:FY,geometry:{type:gZt,coordinates:r}})),this.value={type:Yse,features:n}}});function Xse(e){qe.call(this,null,e)}Xse.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ct(Xse,qe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Au,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=r8e(e.projection),n.materialize().reflow()):o=i===Au||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=yZt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function yZt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Qse(e){qe.call(this,null,e)}Qse.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ct(Qse,qe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Jse(e){qe.call(this,null,e)}Jse.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ct(Jse,qe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=vZt(r8e(e.projection),e.field||ad("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function vZt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Zse(e){qe.call(this,[],e),this.generator=DEt()}Zse.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ct(Zse,qe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Gn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(u4e(n[0],i)):t.add.push(di(i)),n[0]=i,t}});function eoe(e){qe.call(this,null,e)}eoe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ct(eoe,qe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Au,s=_Zt(e.opacity,e),o=bZt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Wg(n.map(l=>Wg(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Wn({},l,u);r||(f.$max=Wg(c.values||[])),l[a]=wZt(c,f,o.dep?o:Iu(o(f)),s.dep?s:Iu(s(f)))}),t.reflow(!0).modifies(a)}});function bZt(e,t){let n;return Gn(e)?(n=r=>Hv(e(r,t)),n.dep=l8e(e)):n=Iu(Hv(e||"#888")),n}function _Zt(e,t){let n;return Gn(e)?(n=r=>e(r,t),n.dep=l8e(e)):e?n=Iu(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function l8e(e){if(!Gn(e))return!1;const t=Dh(bu(e));return t.$x||t.$y||t.$value||t.$max}function wZt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Yy,d=Pv(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let b=o,w=g*i;b<u;++b,y+=4){t.$x=b-o,t.$value=f(b+w);const E=n(t);m[y+0]=E.r,m[y+1]=E.g,m[y+2]=E.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function c8e(e){qe.call(this,null,e),this.modified(!0)}Ct(c8e,qe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=EZt(e.type),LY.forEach(r=>{e[r]!=null&&obe(n,r,e[r])})):LY.forEach(r=>{e.modified(r)&&obe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&xZt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function xZt(e,t){const n=SZt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function EZt(e){const t=Hse((e||"mercator").toLowerCase());return t||Xe("Unrecognized projection type: "+e),t()}function obe(e,t,n){Gn(e[t])&&e[t](n)}function SZt(e){return e=Pt(e),e.length===1?e[0]:{type:Yse,features:e.reduce((t,n)=>t.concat(TZt(n)),[])}}function TZt(e){return e.type===Yse?e.features:Pt(e).filter(t=>t!=null).map(t=>t.type===FY?t:{type:FY,geometry:t})}const CZt=Object.freeze(Object.defineProperty({__proto__:null,contour:Gse,geojson:Kse,geopath:Xse,geopoint:Qse,geoshape:Jse,graticule:Zse,heatmap:eoe,isocontour:qse,kde2d:Wse,projection:c8e},Symbol.toStringTag,{value:"Module"})),abe={center:Ext,collide:zxt,nbody:Zxt,link:Hxt,x:eEt,y:tEt},PI="forces",jY=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],AZt=["static","iterations"],f8e=["x","y","vx","vy"];function toe(e){qe.call(this,null,e)}toe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:f8e}]};Ct(toe,qe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(jY),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&d8e(n,e,0,t)):(this.value=n=kZt(t.source,e),n.on("tick",IZt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(AZt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==PI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(f8e)}});function IZt(e,t){return()=>e.touch(t).run()}function kZt(e,t){const n=Jxt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),d8e(n,t,!0).on("end",()=>s=!0)}function d8e(e,t,n,r){var i=Pt(t.forces),s,o,a,u;for(s=0,o=jY.length;s<o;++s)a=jY[s],a!==PI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=PI+s,a=n||t.modified(PI,s)?NZt(i[s]):r&&RZt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(PI+s,null);return e.numForces=i.length,e}function RZt(e,t){var n,r;for(n in e)if(Gn(r=e[n])&&t.modified(bu(r)))return 1;return 0}function NZt(e){var t,n;sn(abe,e.force)||Xe("Unrecognized force: "+e.force),t=abe[e.force]();for(n in e)Gn(t[n])&&PZt(t[n],e[n],e);return t}function PZt(e,t,n){e(Gn(t)?r=>t(r,n):t)}const DZt=Object.freeze(Object.defineProperty({__proto__:null,force:toe},Symbol.toStringTag,{value:"Module"}));function BY(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function noe(e){qe.call(this,null,e)}noe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const OZt=e=>e.values;Ct(noe,qe,{transform(e,t){t.source||Xe("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&m8(o.data)&&i.rem.push(o.data)}),this.value=s=q5({values:Pt(e.keys).reduce((o,a)=>(o.key(a),o),$Zt()).entries(i.source)},OZt),n&&s.each(o=>{o.children&&(o=di(o.data),i.add.push(o),i.source.push(o))}),BY(s,nn,nn)),i.source.root=s,i}});function $Zt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Q0(e){qe.call(this,null,e)}const MZt=(e,t)=>e.parent===t.parent?1:2;Ct(Q0,qe,{transform(e,t){(!t.source||!t.source.root)&&Xe(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(ox(e.sort,o=>o.data)),LZt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?MZt:uA);try{this.value=n(i)}catch(o){Xe(o)}return i.each(o=>FZt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function LZt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function FZt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const UY=["x","y","r","depth","children"];function roe(e){Q0.call(this,e)}roe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UY.length,default:UY}]};Ct(roe,Q0,{layout:RRe,params:["radius","size","padding"],fields:UY});const zY=["x0","y0","x1","y1","depth","children"];function ioe(e){Q0.call(this,e)}ioe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zY.length,default:zY}]};Ct(ioe,Q0,{layout:tTt,params:["size","round","padding"],fields:zY});function soe(e){qe.call(this,null,e)}soe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ct(soe,qe,{transform(e,t){t.source||Xe("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?BY(Lme().id(e.key).parentId(e.parentKey)(i.source),e.key,ud):BY(Lme()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const ube={tidy:fTt,cluster:SSt},VY=["x","y","depth","children"];function ooe(e){Q0.call(this,e)}ooe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:VY.length,default:VY}]};Ct(ooe,Q0,{layout(e){const t=e||"tidy";if(sn(ube,t))return ube[t]();Xe("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:VY});function aoe(e){qe.call(this,[],e)}aoe.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ct(aoe,qe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Xe("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[nn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[nn(a)]&&s[nn(u)]&&i.add.push(di({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[nn(o)]=1),n.forEach(o=>{(s[nn(o.source)]||s[nn(o.target)])&&i.mod.push(o)})),i}});const lbe={binary:hTt,dice:oP,slice:W5,slicedice:pTt,squarify:ORe,resquarify:mTt},HY=["x0","y0","x1","y1","depth","children"];function uoe(e){Q0.call(this,e)}uoe.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HY.length,default:HY}]};Ct(uoe,Q0,{layout(){const e=dTt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{sn(lbe,t)?e.tile(lbe[t]):Xe("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:HY});const jZt=Object.freeze(Object.defineProperty({__proto__:null,nest:noe,pack:roe,partition:ioe,stratify:soe,tree:ooe,treelinks:aoe,treemap:uoe},Symbol.toStringTag,{value:"Module"})),sV=4278190080;function BZt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function UZt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Pv(s,o).getContext("2d"),l=Pv(s,o).getContext("2d"),c=a&&Pv(s,o).getContext("2d");n.forEach(I=>yM(u,I,!1)),yM(l,t,!1),a&&yM(c,t,!0);const f=oV(u,s,o),d=oV(l,s,o),h=a&&oV(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,b,w,E,S,T,C;for(y=0;y<o;++y)for(g=0;g<s;++g)E=y*s+g,S=f[E]&sV,C=d[E]&sV,T=a&&h[E]&sV,(S||T||C)&&(b=e(g),w=e(y),!i&&(S||C)&&p.set(b,w),a&&(S||T)&&m.set(b,w));return[p,m]}function oV(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function yM(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>yM(e,s.items,n))}):af[r].draw(e,{items:n?t.map(zZt):t})}function zZt(e){const t=g8(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const ug=5,Vu=31,pN=32,Ly=new Uint32Array(pN+1),th=new Uint32Array(pN+1);th[0]=0;Ly[0]=~th[0];for(let e=1;e<=pN;++e)th[e]=th[e-1]<<1|1,Ly[e]=~th[e];function VZt(e,t){const n=new Uint32Array(~~((e*t+pN)/pN));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>ug]&1<<(a&Vu)},set:(s,o)=>{const a=o*e+s;r(a>>>ug,1<<(a&Vu))},clear:(s,o)=>{const a=o*e+s;i(a>>>ug,~(1<<(a&Vu)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>ug,h=f>>>ug,d===h){if(n[d]&Ly[c&Vu]&th[(f&Vu)+1])return!0}else{if(n[d]&Ly[c&Vu]||n[h]&th[(f&Vu)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>ug,d=c>>>ug,f===d)r(f,Ly[l&Vu]&th[(c&Vu)+1]);else for(r(f,Ly[l&Vu]),r(d,th[(c&Vu)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>ug,d=c>>>ug,f===d)i(f,th[l&Vu]|Ly[(c&Vu)+1]);else for(i(f,th[l&Vu]),i(d,Ly[(c&Vu)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function HZt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>VZt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function qZt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=qc.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,b;for(let w=0;w<u;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,g=(d+h)/2,y=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function zF(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function uv(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function WZt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,b;if(!zF(p,m,d,h,i,s)&&!uv(e,p,m,h,d,g,o,a)&&!uv(e,p,m,h,d,h,o,null)){for(;y-g>=1;)b=(g+y)/2,uv(e,p,m,h,d,b,o,a)?y=b:g=b;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=qc.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,b,w,E,S,T,C,I,R,P,D,L,M,F,z,B,H,q;for(let Y=0;Y<f;++Y){for(b=c[Y].x,E=c[Y].y,w=c[Y].x2===void 0?b:c[Y].x2,S=c[Y].y2===void 0?E:c[Y].y2,b>w&&(q=b,b=w,w=q),E>S&&(q=E,E=S,S=q),P=e(b),L=e(w),D=~~((P+L)/2),M=e(E),z=e(S),F=~~((M+z)/2),I=D;I>=P;--I)for(R=F;R>=M;--R)H=u(I,R,p,h,d),H&&([l.x,l.y,p,m]=H);for(I=D;I<=L;++I)for(R=F;R<=z;++R)H=u(I,R,p,h,d),H&&([l.x,l.y,p,m]=H);!m&&!n&&(B=Math.abs(w-b+S-E),T=(b+w)/2,C=(E+S)/2,B>=y&&!zF(T,C,h,d,i,s)&&!uv(e,T,C,d,h,d,o,null)&&(y=B,l.x=T,l.y=C,g=!0))}return m||g?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const GZt=[-1,-1,1,1],YZt=[-1,1,-1,1];function KZt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=qc.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,b=0,w,E,S,T,C,I,R,P,D,L,M,F;for(let z=0;z<f;++z){for(w=c[z].x,S=c[z].y,E=c[z].x2===void 0?w:c[z].x2,T=c[z].y2===void 0?S:c[z].y2,p.push([e((w+E)/2),e((S+T)/2)]);p.length;)if([R,P]=p.pop(),!(o.get(R,P)||a.get(R,P)||u.get(R,P))){u.set(R,P);for(let B=0;B<4;++B)C=R+GZt[B],I=P+YZt[B],u.outOfBounds(C,I,C,I)||p.push([C,I]);if(C=e.invert(R),I=e.invert(P),D=m,L=s,!zF(C,I,h,d,i,s)&&!uv(e,C,I,d,h,D,o,a)&&!uv(e,C,I,d,h,d,o,null)){for(;L-D>=1;)M=(D+L)/2,uv(e,C,I,d,h,M,o,a)?L=M:D=M;D>m&&(l.x=C,l.y=I,m=D,g=!0)}}!g&&!n&&(F=Math.abs(E-w+T-S),C=(w+E)/2,I=(S+T)/2,F>=b&&!zF(C,I,h,d,i,s)&&!uv(e,C,I,d,h,d,o,null)&&(b=F,l.x=C,l.y=I,y=!0))}return g||y?(C=h/2,I=d/2,o.setRange(e(l.x-C),e(l.y-I),e(l.x+C),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const XZt=["right","center","left"],QZt=["bottom","middle","top"];function JZt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,b,w,E,S,T,C,I,R,P,D;for(let L=0;L<u;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,m=h===0&&p===0||r[L]<0,g=h&&p?Math.SQRT1_2:1,y=r[L]<0?-1:1,b=c[1+h]+r[L]*h*g,C=c[4+p]+y*f*p/2+r[L]*p*g,E=C-f/2,S=C+f/2,I=e(b),P=e(E),D=e(S),!d)if(cbe(I,I,P,D,o,a,b,b,E,S,c,m))d=qc.width(l.datum,l.datum.text);else continue;if(T=b+y*d*h/2,b=T-d/2,w=T+d/2,I=e(b),R=e(w),cbe(I,R,P,D,o,a,b,w,E,S,c,m))return l.x=h?h*y<0?w:b:T,l.y=p?p*y<0?S:E:C,l.align=XZt[h*y+1],l.baseline=QZt[p*y+1],o.setRange(I,P,R,D),!0}return!1}}function cbe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const aV=0,uV=4,lV=8,cV=0,fV=1,dV=2,ZZt={"top-left":aV+cV,top:aV+fV,"top-right":aV+dV,left:uV+cV,middle:uV+fV,right:uV+dV,"bottom-left":lV+cV,bottom:lV+fV,"bottom-right":lV+dV},een={naive:qZt,"reduced-search":WZt,floodfill:KZt};function ten(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=nen(r,f),h=ren(i,f),p=ien(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=sen(p,m,a,u),b=l===null||l===1/0,w=g&&c==="naive";let E=-1,S=-1;const T=e.map(P=>{const D=b?qc.width(P,P.text):void 0;return E=Math.max(E,D),S=Math.max(S,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(P),textWidth:D}});l=l===null||l===1/0?Math.max(E,S)+Math.max(...r):l;const C=HZt(t[0],t[1],l);let I;if(!w){n&&T.sort((L,M)=>n(L.datum,M.datum));let P=!1;for(let L=0;L<h.length&&!P;++L)P=h[L]===5||d[L]<0;const D=(p&&o||g)&&e.map(L=>L.datum);I=s.length||D?UZt(C,D||[],s,P,g):BZt(C,o&&T)}const R=g?een[c](C,I,o,u):JZt(C,I,h,d);return T.forEach(P=>P.opacity=+R(P)),T}function nen(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function ren(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ZZt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function ien(e){return e&&e.mark&&e.mark.marktype}function sen(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const qY=["x","y","opacity","align","baseline"],h8e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function loe(e){qe.call(this,null,e)}loe.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:h8e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:qY.length,default:qY}]};Ct(loe,qe,{transform(e,t){function n(s){const o=e[s];return Gn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Xe("Size parameter should be specified as a [width, height] array.");const i=e.as||qY;return ten(t.materialize(t.SOURCE).source||[],e.size,e.sort,Pt(e.offset==null?1:e.offset),Pt(e.anchor||h8e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const oen=Object.freeze(Object.defineProperty({__proto__:null,label:loe},Symbol.toStringTag,{value:"Module"}));function p8e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function coe(e){qe.call(this,null,e)}coe.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ct(coe,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=p8e(r,e.groupby),s=(e.groupby||[]).map(Vs),o=s.length,a=e.as||[Vs(e.x),Vs(e.y)],u=[];i.forEach(l=>{C4e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(di(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const WY={constant:xie,linear:Eie,log:x4e,exp:E4e,pow:S4e,quad:Sie,poly:T4e},aen=(e,t)=>e==="poly"?t:e==="quad"?2:1;function foe(e){qe.call(this,null,e)}foe.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(WY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ct(foe,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=p8e(r,e.groupby),s=(e.groupby||[]).map(Vs),o=e.method||"linear",a=e.order==null?3:e.order,u=aen(o,a),l=e.as||[Vs(e.x),Vs(e.y)],c=WY[o],f=[];let d=e.extent;sn(WY,o)||Xe("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(di({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||ym(h,e.x),y=b=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],f.push(di(w))};o==="linear"||o==="constant"?g.forEach(b=>y([b,m.predict(b)])):E8(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const uen=Object.freeze(Object.defineProperty({__proto__:null,loess:coe,regression:foe},Symbol.toStringTag,{value:"Module"}));function doe(e){qe.call(this,null,e)}doe.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const len=[-1e5,-1e5,1e5,1e5];Ct(doe,qe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:len;const s=this.value=TZ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!fen(u)?cen(u):null}return t.reflow(e.modified()).modifies(n)}});function cen(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function fen(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const den=Object.freeze(Object.defineProperty({__proto__:null,voronoi:doe},Symbol.toStringTag,{value:"Module"}));var hV=Math.PI/180,DI=64,vM=2048;function hen(){var e=[256,256],t,n,r,i,s,o,a,u=m8e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Pv()),m=ben((e[0]>>5)*e[1]),g=null,y=l.length,b=-1,w=[],E=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,C)=>C.size-T.size);++b<y;){var S=E[b];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,pen(p,S,E,b),S.hasText&&h(m,S,g)&&(w.push(S),g?gen(g,S):g=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(DI<<5)/m,p.height=vM/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,b=m.y,w=Math.sqrt(e[0]*e[0]+e[1]*e[1]),E=u(e),S=c()<.5?1:-1,T=-S,C,I,R;(C=E(T+=S))&&(I=~~C[0],R=~~C[1],!(Math.min(Math.abs(I),Math.abs(R))>=w));)if(m.x=y+I,m.y=b+R,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!men(m,p,e[0]))&&(!g||yen(m,g))){for(var P=m.sprite,D=m.width>>5,L=e[0]>>5,M=m.x-(D<<4),F=M&127,z=32-F,B=m.y1-m.y0,H=(m.y+m.y0)*L+(M>>5),q,Y=0;Y<B;Y++){q=0;for(var $=0;$<=D;$++)p[H+$]|=q<<z|($<D?(q=P[Y*D+$])>>>F:0);H+=L}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Eb(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Eb(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Eb(p),f):s},f.rotate=function(p){return arguments.length?(o=Eb(p),f):o},f.text=function(p){return arguments.length?(t=Eb(p),f):t},f.spiral=function(p){return arguments.length?(u=_en[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Eb(p),f):r},f.padding=function(p){return arguments.length?(a=Eb(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function pen(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(DI<<5)/s,vM/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*hV),g=Math.cos(t.rotate*hV),y=c*g,b=c*m,w=d*g,E=d*m;c=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=DI<<5&&(o=0,a+=u,u=0),a+d>=vM)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*hV),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var S=i.getImageData(0,0,(DI<<5)/s,vM/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var C=0,I=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var R=f*p+(h>>5),P=S[(a+p)*(DI<<5)+(o+h)<<2]?1<<31-h%32:0;T[R]|=P,C|=P}C?I=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+I,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function men(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function gen(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function yen(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function m8e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function ven(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function ben(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Eb(e){return typeof e=="function"?e:function(){return e}}var _en={archimedean:m8e,rectangular:ven};const g8e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],wen=["text","font","rotate","fontSize","fontStyle","fontWeight"];function hoe(e){qe.call(this,hen(),e)}hoe.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:g8e}]};Ct(hoe,qe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Xe("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Gn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||wen.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||g8e;let a=e.fontSize||14,u;if(Gn(a)?u=e.fontSizeRange:a=Iu(a),u){const p=a,m=ti("sqrt")().domain(ym(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(cd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const xen=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:hoe},Symbol.toStringTag,{value:"Module"})),Een=e=>new Uint8Array(e),Sen=e=>new Uint16Array(e),Dk=e=>new Uint32Array(e);function Ten(){let e=8,t=[],n=Dk(0),r=H3(0,e),i=H3(0,e);return{data:()=>t,seen:()=>n=Cen(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=H3(s,e,r),i=H3(s,e))}}}function Cen(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function H3(e,t,n){const r=(t<257?Een:t<65537?Sen:Dk)(e);return n&&r.set(n),r}function fbe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function dbe(){let e=Dk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Dk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Aen(h,d),c)p=t,m=e,t=Array(c+f),e=Dk(c+f),Ien(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Wvt(u,a[0],0,l),zv(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Aen(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Kvt(e,t)}function Ien(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function poe(e){qe.call(this,Ten(),e),this._indices=null,this._dims=null}poe.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ct(poe,qe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=dbe()),s.push(fbe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,b,w,E,S,T,C;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,S=0,T=b.length;S<T;++S)E[b[S]._index]=1;for(S=0;S<h;++S)C=r[S],(!o[S]||e.modified("fields",S)||t.modified(C.fields))&&(y=C.fname,(m=p[y])||(s[y]=g=dbe(),p[y]=m=g.insert(C,t.source,0)),o[S]=fbe(g,S,i[S]).onAdd(m,u));for(S=0,T=a.data().length;S<T;++S)w[S]||(l[S]!==u[S]?f.push(S):E[S]&&u[S]!==c&&d.push(S));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,b;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function moe(e){qe.call(this,null,e)}moe.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ct(moe,qe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const ken=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:poe,resolvefilter:moe},Symbol.toStringTag,{value:"Module"})),Ren="RawCode",bw="Literal",Nen="Property",Pen="Identifier",Den="ArrayExpression",Oen="BinaryExpression",y8e="CallExpression",$en="ConditionalExpression",Men="LogicalExpression",Len="MemberExpression",Fen="ObjectExpression",jen="UnaryExpression";function qh(e){this.type=e}qh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Ben(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Ben(e){switch(e.type){case Den:return e.elements;case Oen:case Men:return[e.left,e.right];case y8e:return[e.callee].concat(e.arguments);case $en:return[e.test,e.consequent,e.alternate];case Len:return[e.object,e.property];case Fen:return e.properties;case Nen:return[e.key,e.value];case jen:return[e.argument];case Pen:case bw:case Ren:default:return[]}}var Mm,Kt,Ge,wu,wi,U8=1,uD=2,_w=3,G1=4,z8=5,lx=6,$l=7,lD=8,Uen=9;Mm={};Mm[U8]="Boolean";Mm[uD]="<end>";Mm[_w]="Identifier";Mm[G1]="Keyword";Mm[z8]="Null";Mm[lx]="Numeric";Mm[$l]="Punctuator";Mm[lD]="String";Mm[Uen]="RegularExpression";var zen="ArrayExpression",Ven="BinaryExpression",Hen="CallExpression",qen="ConditionalExpression",v8e="Identifier",Wen="Literal",Gen="LogicalExpression",Yen="MemberExpression",Ken="ObjectExpression",Xen="Property",Qen="UnaryExpression",la="Unexpected token %0",Jen="Unexpected number",Zen="Unexpected string",etn="Unexpected identifier",ttn="Unexpected reserved word",ntn="Unexpected end of input",GY="Invalid regular expression",pV="Invalid regular expression: missing /",b8e="Octal literals are not allowed in strict mode.",rtn="Duplicate data property in object literal not allowed in strict mode",Oa="ILLEGAL",mN="Disabled.",itn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),stn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function V8(e,t){if(!e)throw new Error("ASSERT: "+t)}function _g(e){return e>=48&&e<=57}function goe(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Ok(e){return"01234567".indexOf(e)>=0}function otn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function gN(e){return e===10||e===13||e===8232||e===8233}function cD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&itn.test(String.fromCharCode(e))}function VF(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&stn.test(String.fromCharCode(e))}const atn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function _8e(){for(;Ge<wu;){const e=Kt.charCodeAt(Ge);if(otn(e)||gN(e))++Ge;else break}}function YY(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ge<wu&&goe(Kt[Ge])?(r=Kt[Ge++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Zr({},la,Oa);return String.fromCharCode(i)}function utn(){var e,t,n,r;for(e=Kt[Ge],t=0,e==="}"&&Zr({},la,Oa);Ge<wu&&(e=Kt[Ge++],!!goe(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Zr({},la,Oa),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function w8e(){var e,t;for(e=Kt.charCodeAt(Ge++),t=String.fromCharCode(e),e===92&&(Kt.charCodeAt(Ge)!==117&&Zr({},la,Oa),++Ge,e=YY("u"),(!e||e==="\\"||!cD(e.charCodeAt(0)))&&Zr({},la,Oa),t=e);Ge<wu&&(e=Kt.charCodeAt(Ge),!!VF(e));)++Ge,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Kt.charCodeAt(Ge)!==117&&Zr({},la,Oa),++Ge,e=YY("u"),(!e||e==="\\"||!VF(e.charCodeAt(0)))&&Zr({},la,Oa),t+=e);return t}function ltn(){var e,t;for(e=Ge++;Ge<wu;){if(t=Kt.charCodeAt(Ge),t===92)return Ge=e,w8e();if(VF(t))++Ge;else break}return Kt.slice(e,Ge)}function ctn(){var e,t,n;return e=Ge,t=Kt.charCodeAt(Ge)===92?w8e():ltn(),t.length===1?n=_w:atn.hasOwnProperty(t)?n=G1:t==="null"?n=z8:t==="true"||t==="false"?n=U8:n=_w,{type:n,value:t,start:e,end:Ge}}function mV(){var e=Ge,t=Kt.charCodeAt(Ge),n,r=Kt[Ge],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ge,{type:$l,value:String.fromCharCode(t),start:e,end:Ge};default:if(n=Kt.charCodeAt(Ge+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ge+=2,{type:$l,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ge};case 33:case 61:return Ge+=2,Kt.charCodeAt(Ge)===61&&++Ge,{type:$l,value:Kt.slice(e,Ge),start:e,end:Ge}}}if(o=Kt.substr(Ge,4),o===">>>=")return Ge+=4,{type:$l,value:o,start:e,end:Ge};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ge+=3,{type:$l,value:s,start:e,end:Ge};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Ge+=2,{type:$l,value:i,start:e,end:Ge};if(i==="//"&&Zr({},la,Oa),"<>=!+-*%&|^/".indexOf(r)>=0)return++Ge,{type:$l,value:r,start:e,end:Ge};Zr({},la,Oa)}function ftn(e){let t="";for(;Ge<wu&&goe(Kt[Ge]);)t+=Kt[Ge++];return t.length===0&&Zr({},la,Oa),cD(Kt.charCodeAt(Ge))&&Zr({},la,Oa),{type:lx,value:parseInt("0x"+t,16),start:e,end:Ge}}function dtn(e){let t="0"+Kt[Ge++];for(;Ge<wu&&Ok(Kt[Ge]);)t+=Kt[Ge++];return(cD(Kt.charCodeAt(Ge))||_g(Kt.charCodeAt(Ge)))&&Zr({},la,Oa),{type:lx,value:parseInt(t,8),octal:!0,start:e,end:Ge}}function hbe(){var e,t,n;if(n=Kt[Ge],V8(_g(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ge,e="",n!=="."){if(e=Kt[Ge++],n=Kt[Ge],e==="0"){if(n==="x"||n==="X")return++Ge,ftn(t);if(Ok(n))return dtn(t);n&&_g(n.charCodeAt(0))&&Zr({},la,Oa)}for(;_g(Kt.charCodeAt(Ge));)e+=Kt[Ge++];n=Kt[Ge]}if(n==="."){for(e+=Kt[Ge++];_g(Kt.charCodeAt(Ge));)e+=Kt[Ge++];n=Kt[Ge]}if(n==="e"||n==="E")if(e+=Kt[Ge++],n=Kt[Ge],(n==="+"||n==="-")&&(e+=Kt[Ge++]),_g(Kt.charCodeAt(Ge)))for(;_g(Kt.charCodeAt(Ge));)e+=Kt[Ge++];else Zr({},la,Oa);return cD(Kt.charCodeAt(Ge))&&Zr({},la,Oa),{type:lx,value:parseFloat(e),start:t,end:Ge}}function htn(){var e="",t,n,r,i,s=!1;for(t=Kt[Ge],V8(t==="'"||t==='"',"String literal must starts with a quote"),n=Ge,++Ge;Ge<wu;)if(r=Kt[Ge++],r===t){t="";break}else if(r==="\\")if(r=Kt[Ge++],!r||!gN(r.charCodeAt(0)))switch(r){case"u":case"x":Kt[Ge]==="{"?(++Ge,e+=utn()):e+=YY(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ok(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ge<wu&&Ok(Kt[Ge])&&(s=!0,i=i*8+"01234567".indexOf(Kt[Ge++]),"0123".indexOf(r)>=0&&Ge<wu&&Ok(Kt[Ge])&&(i=i*8+"01234567".indexOf(Kt[Ge++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Kt[Ge]===`
`&&++Ge;else{if(gN(r.charCodeAt(0)))break;e+=r}return t!==""&&Zr({},la,Oa),{type:lD,value:e,octal:s,start:n,end:Ge}}function ptn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Zr({},GY)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Zr({},GY)}try{return new RegExp(e,t)}catch{return null}}function mtn(){var e,t,n,r,i;for(e=Kt[Ge],V8(e==="/","Regular expression literal must start with a slash"),t=Kt[Ge++],n=!1,r=!1;Ge<wu;)if(e=Kt[Ge++],t+=e,e==="\\")e=Kt[Ge++],gN(e.charCodeAt(0))&&Zr({},pV),t+=e;else if(gN(e.charCodeAt(0)))Zr({},pV);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Zr({},pV),i=t.substr(1,t.length-2),{value:i,literal:t}}function gtn(){var e,t,n;for(t="",n="";Ge<wu&&(e=Kt[Ge],!!VF(e.charCodeAt(0)));)++Ge,e==="\\"&&Ge<wu?Zr({},la,Oa):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Zr({},GY,n),{value:n,literal:t}}function ytn(){var e,t,n,r;return wi=null,_8e(),e=Ge,t=mtn(),n=gtn(),r=ptn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ge}}function vtn(e){return e.type===_w||e.type===G1||e.type===U8||e.type===z8}function x8e(){if(_8e(),Ge>=wu)return{type:uD,start:Ge,end:Ge};const e=Kt.charCodeAt(Ge);return cD(e)?ctn():e===40||e===41||e===59?mV():e===39||e===34?htn():e===46?_g(Kt.charCodeAt(Ge+1))?hbe():mV():_g(e)?hbe():mV()}function Vl(){const e=wi;return Ge=e.end,wi=x8e(),Ge=e.end,e}function E8e(){const e=Ge;wi=x8e(),Ge=e}function btn(e){const t=new qh(zen);return t.elements=e,t}function pbe(e,t,n){const r=new qh(e==="||"||e==="&&"?Gen:Ven);return r.operator=e,r.left=t,r.right=n,r}function _tn(e,t){const n=new qh(Hen);return n.callee=e,n.arguments=t,n}function wtn(e,t,n){const r=new qh(qen);return r.test=e,r.consequent=t,r.alternate=n,r}function yoe(e){const t=new qh(v8e);return t.name=e,t}function OI(e){const t=new qh(Wen);return t.value=e.value,t.raw=Kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function mbe(e,t,n){const r=new qh(Yen);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function xtn(e){const t=new qh(Ken);return t.properties=e,t}function gbe(e,t,n){const r=new qh(Xen);return r.key=t,r.value=n,r.kind=e,r}function Etn(e,t){const n=new qh(Qen);return n.operator=e,n.argument=t,n.prefix=!0,n}function Zr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(V8(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Ge,n.description=i,n}function H8(e){e.type===uD&&Zr(e,ntn),e.type===lx&&Zr(e,Jen),e.type===lD&&Zr(e,Zen),e.type===_w&&Zr(e,etn),e.type===G1&&Zr(e,ttn),Zr(e,la,e.value)}function xu(e){const t=Vl();(t.type!==$l||t.value!==e)&&H8(t)}function ns(e){return wi.type===$l&&wi.value===e}function gV(e){return wi.type===G1&&wi.value===e}function Stn(){const e=[];for(Ge=wi.start,xu("[");!ns("]");)ns(",")?(Vl(),e.push(null)):(e.push(ww()),ns("]")||xu(","));return Vl(),btn(e)}function ybe(){Ge=wi.start;const e=Vl();return e.type===lD||e.type===lx?(e.octal&&Zr(e,b8e),OI(e)):yoe(e.value)}function Ttn(){var e,t,n,r;if(Ge=wi.start,e=wi,e.type===_w)return n=ybe(),xu(":"),r=ww(),gbe("init",n,r);if(e.type===uD||e.type===$l)H8(e);else return t=ybe(),xu(":"),r=ww(),gbe("init",t,r)}function Ctn(){var e=[],t,n,r,i={},s=String;for(Ge=wi.start,xu("{");!ns("}");)t=Ttn(),t.key.type===v8e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Zr({},rtn):i[r]=!0,e.push(t),ns("}")||xu(",");return xu("}"),xtn(e)}function Atn(){xu("(");const e=voe();return xu(")"),e}const Itn={if:1};function ktn(){var e,t,n;if(ns("("))return Atn();if(ns("["))return Stn();if(ns("{"))return Ctn();if(e=wi.type,Ge=wi.start,e===_w||Itn[wi.value])n=yoe(Vl().value);else if(e===lD||e===lx)wi.octal&&Zr(wi,b8e),n=OI(Vl());else{if(e===G1)throw new Error(mN);e===U8?(t=Vl(),t.value=t.value==="true",n=OI(t)):e===z8?(t=Vl(),t.value=null,n=OI(t)):ns("/")||ns("/=")?(n=OI(ytn()),E8e()):H8(Vl())}return n}function Rtn(){const e=[];if(xu("("),!ns(")"))for(;Ge<wu&&(e.push(ww()),!ns(")"));)xu(",");return xu(")"),e}function Ntn(){Ge=wi.start;const e=Vl();return vtn(e)||H8(e),yoe(e.value)}function Ptn(){return xu("."),Ntn()}function Dtn(){xu("[");const e=voe();return xu("]"),e}function Otn(){var e,t,n;for(e=ktn();;)if(ns("."))n=Ptn(),e=mbe(".",e,n);else if(ns("("))t=Rtn(),e=_tn(e,t);else if(ns("["))n=Dtn(),e=mbe("[",e,n);else break;return e}function vbe(){const e=Otn();if(wi.type===$l&&(ns("++")||ns("--")))throw new Error(mN);return e}function bM(){var e,t;if(wi.type!==$l&&wi.type!==G1)t=vbe();else{if(ns("++")||ns("--"))throw new Error(mN);if(ns("+")||ns("-")||ns("~")||ns("!"))e=Vl(),t=bM(),t=Etn(e.value,t);else{if(gV("delete")||gV("void")||gV("typeof"))throw new Error(mN);t=vbe()}}return t}function bbe(e){let t=0;if(e.type!==$l&&e.type!==G1)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function $tn(){var e,t,n,r,i,s,o,a,u,l;if(e=wi,u=bM(),r=wi,i=bbe(r),i===0)return u;for(r.prec=i,Vl(),t=[e,wi],o=bM(),s=[u,r,o];(i=bbe(wi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=pbe(a,u,o),s.push(n);r=Vl(),r.prec=i,s.push(r),t.push(wi),n=bM(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=pbe(s[l-1].value,s[l-2],n),l-=2;return n}function ww(){var e,t,n;return e=$tn(),ns("?")&&(Vl(),t=ww(),xu(":"),n=ww(),e=wtn(e,t,n)),e}function voe(){const e=ww();if(ns(","))throw new Error(mN);return e}function boe(e){Kt=e,Ge=0,wu=Kt.length,wi=null,E8e();const t=voe();if(wi.type!==uD)throw new Error("Unexpect token after expression.");return t}var S8e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function T8e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Xe("Missing arguments to clamp function."),o.length>3&&Xe("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Xe("Missing arguments to if function."),o.length>3&&Xe("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Mtn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function C8e(e){e=e||{};const t=e.allowed?Dh(e.allowed):{},n=e.forbidden?Dh(e.forbidden):{},r=e.constants||S8e,i=(e.functions||T8e)(f),s=e.globalvar,o=e.fieldvar,a=Gn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Dt(p))return p;const m=d[p.type];return m==null&&Xe("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:sn(n,m)?Xe("Illegal identifier: "+m):sn(r,m)?r[m]:sn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[Mtn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Xe("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=sn(i,m)&&i[m];return y||Xe("Unrecognized function: "+m),Gn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const _be=Symbol("vega_selection_getter");function A8e(e){return(!e.getter||!e.getter[_be])&&(e.getter=ad(e.field),e.getter[_be]=!0),e.getter}const _oe="intersect",wbe="union",Ltn="vlMulti",Ftn="vlPoint",xbe="or",jtn="and",bp="_vgsid_",yN=ad(bp),Btn="E",Utn="R",ztn="R-E",Vtn="R-LE",Htn="R-RE",HF="index:unit";function Ebe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=A8e(a)(e),Rv(o)&&(o=gu(o)),Rv(r[s])&&(r[s]=gu(r[s])),Je(r[s])&&Rv(r[s][0])&&(r[s]=r[s].map(gu)),a.type===Btn){if(Je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===Utn){if(!QE(o,r[s]))return!1}else if(a.type===Htn){if(!QE(o,r[s],!0,!1))return!1}else if(a.type===ztn){if(!QE(o,r[s],!1,!1))return!1}else if(a.type===Vtn&&!QE(o,r[s],!1,!0))return!1;return!0}function qtn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[HF]&&r[HF].value:void 0,o=n===_oe,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Ebe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Ebe(t,l),o^h)return h;return a&&o}const I8e=PC(yN),Wtn=I8e.left,Gtn=I8e.right;function Ytn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[HF]&&r[HF].value:void 0,o=n===_oe,a=yN(t),u=Wtn(i,a);if(u===i.length||yN(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Gtn(i,a)-u<s.size)return!1}return!0}function Ktn(e,t){return e.map(n=>Wn(t.fields?{values:t.fields.map(r=>A8e(r)(n.datum))}:{[bp]:yN(n.datum)},t))}function Xtn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,b,w=s.length,E=0,S,T;E<w;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(S=0,T=c.length;S<T;++S)h=c[S],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),b=yV[`${y}_union`],m[d]=b(g,Pt(f[S]));n&&(g=a[d]||(a[d]=[]),g.push(Pt(f).reduce((C,I,R)=>(C[c[R].field]=I,C),{})))}else h=bp,p=yN(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[bp]:p}));if(t=t||wbe,o[bp]?o[bp]=yV[`${bp}_${t}`](...Object.values(o[bp])):Object.keys(o).forEach(C=>{o[C]=Object.keys(o[C]).map(I=>o[C][I]).reduce((I,R)=>I===void 0?R:yV[`${u[C]}_${t}`](I,R))}),s=Object.keys(a),n&&s.length){const C=r?Ftn:Ltn;o[C]=t===wbe?{[xbe]:s.reduce((I,R)=>(I.push(...a[R]),I),[])}:{[jtn]:s.map(I=>({[xbe]:a[I]}))}}return o}var yV={[`${bp}_union`]:i1t,[`${bp}_intersect`]:n1t,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=gu(t[0]),r=gu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=gu(t[0]),r=gu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Qtn=":",Jtn="@";function woe(e,t,n,r){t[0].type!==bw&&Xe("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Mr(t).value,o="unit",a=Jtn+o,u=Qtn+i;s===_oe&&!sn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),sn(r,u)||(r[u]=n.getData(i).tuplesRef())}function k8e(e){const t=this.context.data[e];return t?t.values.value:[]}function Ztn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function enn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ud).insert(t)),1}function tnn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const fD=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},nnn=fD("format"),R8e=fD("timeFormat"),rnn=fD("utcFormat"),inn=fD("timeParse"),snn=fD("utcParse"),q3=new Date(2e3,0,1);function q8(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(q3.setYear(2e3),q3.setMonth(e),q3.setDate(t),R8e.call(this,q3,n))}function onn(e){return q8.call(this,e,1,"%B")}function ann(e){return q8.call(this,e,1,"%b")}function unn(e){return q8.call(this,0,2+e,"%A")}function lnn(e){return q8.call(this,0,2+e,"%a")}const cnn=":",fnn="@",KY="%",N8e="$";function xoe(e,t,n,r){t[0].type!==bw&&Xe("First argument to data functions must be a string literal.");const i=t[0].value,s=cnn+i;if(!sn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function dnn(e,t,n,r){t[0].type!==bw&&Xe("First argument to indata must be a string literal."),t[1].type!==bw&&Xe("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=fnn+s;sn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function al(e,t,n,r){if(t[0].type===bw)Sbe(n,r,t[0].value);else for(e in n.scales)Sbe(n,r,e)}function Sbe(e,t,n){const r=KY+n;if(!sn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Lm(e,t){if(Gn(e))return e;if(Dt(e)){const n=t.scales[e];return n&&FYt(n.value)?n.value:void 0}}function hnn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=al,n._range=al,n._scale=al;const r=i=>"_["+(i.type===bw?Et(KY+i.value):Et(KY)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Eoe(e,t){return function(n,r,i){if(n){const s=Lm(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const pnn=Eoe("area",dEt),mnn=Eoe("bounds",gEt),gnn=Eoe("centroid",xEt);function ynn(e,t){const n=Lm(e,(t||this).context);return n&&n.scale()}function vnn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Soe(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function bnn(){return Soe(this.context.dataflow,"warn",arguments)}function _nn(){return Soe(this.context.dataflow,"info",arguments)}function wnn(){return Soe(this.context.dataflow,"debug",arguments)}function vV(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function XY(e){const t=Hv(e),n=vV(t.r),r=vV(t.g),i=vV(t.b);return .2126*n+.7152*r+.0722*i}function xnn(e,t){const n=XY(e),r=XY(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Enn(){const e=[].slice.call(arguments);return e.unshift({}),Wn(...e)}function P8e(e,t){return e===t||e!==e&&t!==t?!0:Je(e)?Je(t)&&e.length===t.length?Snn(e,t):!1:Ot(e)&&Ot(t)?D8e(e,t):!1}function Snn(e,t){for(let n=0,r=e.length;n<r;++n)if(!P8e(e[n],t[n]))return!1;return!0}function D8e(e,t){for(const n in e)if(!P8e(e[n],t[n]))return!1;return!0}function Tbe(e){return t=>D8e(e,t)}function Tnn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?ud:Je(n)||m8(n)?n:Tbe(n),c.remove(f)),t&&c.insert(t),r&&(f=Tbe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Cnn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Ann(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Cbe={};function Inn(e,t){const n=Cbe[t]||(Cbe[t]=ad(t));return Je(e)?e.map(n):n(e)}function Toe(e){return Je(e)||ArrayBuffer.isView(e)?e:null}function Coe(e){return Toe(e)||(Dt(e)?e:null)}function knn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Toe(e).join(...n)}function Rnn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Coe(e).indexOf(...n)}function Nnn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Coe(e).lastIndexOf(...n)}function Pnn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Coe(e).slice(...n)}function Dnn(e,t,n){return Gn(n)&&Xe("Function argument passed to replace."),String(e).replace(t,n)}function Onn(e){return Toe(e).slice().reverse()}function $nn(e,t,n){return Xie(e||0,t||0,n||0)}function Mnn(e,t){const n=Lm(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Lnn(e,t){const n=Lm(e,(t||this).context);return n?n.copy():void 0}function Fnn(e,t){const n=Lm(e,(t||this).context);return n?n.domain():[]}function jnn(e,t,n){const r=Lm(e,(n||this).context);return r?Je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Bnn(e,t){const n=Lm(e,(t||this).context);return n&&n.range?n.range():[]}function Unn(e,t,n){const r=Lm(e,(n||this).context);return r?r(t):void 0}function znn(e,t,n,r,i){e=Lm(e,(i||this).context);const s=E5e(t,n);let o=e.domain(),a=o[0],u=Mr(o),l=Au;return u-a?l=f5e(e,a,u):e=(e.interpolator?ti("sequential")().interpolator(e.interpolator()):ti("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Mr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Vnn(e,t,n){const r=Lm(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Hnn(e){let t=null;return function(n){return n?fN(n,t=t||HT(e)):e}}const O8e=e=>e.data;function $8e(e,t){const n=k8e.call(t,e);return n.root&&n.root.lookup||{}}function qnn(e,t,n){const r=$8e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(O8e):void 0}function Wnn(e,t){const n=$8e(e,this)[t];return n?n.ancestors().map(O8e):void 0}const M8e=()=>typeof window<"u"&&window||null;function Gnn(){const e=M8e();return e?e.screen:{}}function Ynn(){const e=M8e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Knn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function L8e(e,t,n){if(!e)return[];const[r,i]=e,s=new wo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return _je(o,s,Xnn(t))}function Xnn(e){let t=null;if(e){const n=Pt(e.marktype),r=Pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Qnn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Jnn(e){return Pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Znn(e,t,n){const{x:r,y:i,mark:s}=n,o=new wo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),L8e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>ern(u.x,u.y,t))}function ern(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const vN={random(){return cd()},cumulativeNormal:_8,cumulativeLogNormal:gie,cumulativeUniform:_ie,densityNormal:fie,densityLogNormal:mie,densityUniform:bie,quantileNormal:w8,quantileLogNormal:yie,quantileUniform:wie,sampleNormal:b8,sampleLogNormal:pie,sampleUniform:vie,isArray:Je,isBoolean:W1,isDate:Rv,isDefined(e){return e!==void 0},isNumber:Gr,isObject:Ot,isRegExp:wFe,isString:Dt,isTuple:m8,isValid(e){return e!=null&&e===e},toBoolean:Kre,toDate(e){return Xre(e)},toNumber:gu,toString:Qre,indexof:Rnn,join:knn,lastindexof:Nnn,replace:Dnn,reverse:Onn,slice:Pnn,flush:bFe,lerp:xFe,merge:Enn,pad:TFe,peek:Mr,pluck:Inn,span:qP,inrange:QE,truncate:CFe,rgb:Hv,lab:RL,hcl:NL,hsl:IL,luminance:XY,contrast:xnn,sequence:Gl,format:nnn,utcFormat:rnn,utcParse:snn,utcOffset:BFe,utcSequence:VFe,timeFormat:R8e,timeParse:inn,timeOffset:jFe,timeSequence:zFe,timeUnitSpecifier:IFe,monthFormat:onn,monthAbbrevFormat:ann,dayFormat:unn,dayAbbrevFormat:lnn,quarter:mFe,utcquarter:gFe,week:RFe,utcweek:DFe,dayofyear:kFe,utcdayofyear:PFe,warn:bnn,info:_nn,debug:wnn,extent(e){return ym(e)},inScope:vnn,intersect:L8e,clampRange:yFe,pinchDistance:Cnn,pinchAngle:Ann,screen:Gnn,containerSize:Knn,windowSize:Ynn,bandspace:$nn,setdata:enn,pathShape:Hnn,panLinear:fFe,panLog:dFe,panPow:hFe,panSymlog:pFe,zoomLinear:Vre,zoomLog:Hre,zoomPow:EF,zoomSymlog:qre,encode:tnn,modify:Tnn,lassoAppend:Qnn,lassoPath:Jnn,intersectLasso:Znn},trn=["view","item","group","xy","x","y"],nrn="event.vega.",F8e="this.",Aoe={},j8e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Et(N8e+e)}]`,functions:rrn,constants:S8e,visitors:Aoe},QY=C8e(j8e);function rrn(e){const t=T8e(e);trn.forEach(n=>t[n]=nrn+n);for(const n in vN)t[n]=F8e+n;return Wn(t,hnn(e,vN,Aoe)),t}function uo(e,t,n){return arguments.length===1?vN[e]:(vN[e]=t,n&&(Aoe[e]=n),QY&&(QY.functions[e]=F8e+e),this)}uo("bandwidth",Mnn,al);uo("copy",Lnn,al);uo("domain",Fnn,al);uo("range",Bnn,al);uo("invert",jnn,al);uo("scale",Unn,al);uo("gradient",znn,al);uo("geoArea",pnn,al);uo("geoBounds",mnn,al);uo("geoCentroid",gnn,al);uo("geoShape",Vnn,al);uo("geoScale",ynn,al);uo("indata",Ztn,dnn);uo("data",k8e,xoe);uo("treePath",qnn,xoe);uo("treeAncestors",Wnn,xoe);uo("vlSelectionTest",qtn,woe);uo("vlSelectionIdTest",Ytn,woe);uo("vlSelectionResolve",Xtn,woe);uo("vlSelectionTuples",Ktn);function bm(e,t){const n={};let r;try{e=Dt(e)?e:Et(e)+"",r=boe(e)}catch{Xe("Expression parse error: "+e)}r.visit(s=>{if(s.type!==y8e)return;const o=s.callee.name,a=j8e.visitors[o];a&&a(o,s.arguments,t,n)});const i=QY(r);return i.globals.forEach(s=>{const o=N8e+s;!sn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Wn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function irn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const srn=Dh(["rule"]),Abe=Dh(["group","image","rect"]);function orn(e,t){let n="";return srn[t]||(e.x2&&(e.x?(Abe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Abe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Ioe(e){return(e+"").toLowerCase()}function arn(e){return Ioe(e)==="operator"}function urn(e){return Ioe(e)==="collect"}function O2(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function lrn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var crn={operator:(e,t)=>O2(e,["_"],t.code),parameter:(e,t)=>O2(e,["datum","_"],t.code),event:(e,t)=>O2(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return O2(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Et(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=orn(r,n),i+="return m;",O2(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Et).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),lrn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function frn(e){const t=this;arn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function drn(e){const t=this;if(e.params){const n=t.get(e.id);n||Xe("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function hrn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Je(i)?i.map(s=>Ibe(s,n,t)):Ibe(i,n,t)}return t}function Ibe(e,t,n){if(!e||!Ot(e))return e;for(let r=0,i=kbe.length,s;r<i;++r)if(s=kbe[r],sn(e,s.key))return s.parse(e,t,n);return e}var kbe=[{key:"$ref",parse:prn},{key:"$key",parse:grn},{key:"$expr",parse:mrn},{key:"$field",parse:yrn},{key:"$encode",parse:brn},{key:"$compare",parse:vrn},{key:"$context",parse:_rn},{key:"$subflow",parse:wrn},{key:"$tupleid",parse:xrn}];function prn(e,t){return t.get(e.$ref)||Xe("Operator not defined: "+e.$ref)}function mrn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=bc(t.parameterExpression(e.$expr),e.$fields))}function grn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Yre(e.$key,e.$flat,t.expr.codegen))}function yrn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ad(e.$field,e.$name,t.expr.codegen))}function vrn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Pt(e.$compare).map(i=>i&&i.$tupleid?nn:i);return t.fn[n]||(t.fn[n]=Wre(r,e.$order,t.expr.codegen))}function brn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=bc(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function _rn(e,t){return t}function wrn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function xrn(){return nn}function Ern(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Xe("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Srn(e){var t=this,n=Ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Xe("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Trn={skip:!0};function Crn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Arn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Trn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(ud).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function B8e(e,t,n,r){return new U8e(e,t,n,r)}function U8e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||crn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Rbe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}U8e.prototype=Rbe.prototype={fork(){const e=new Rbe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),urn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Ioe(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:irn,parseOperator:frn,parseOperatorParameters:drn,parseParameters:hrn,parseStream:Ern,parseUpdate:Srn,getState:Crn,setState:Arn};function Irn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),z8e(t,e.description()))}function z8e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function krn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const bV="default";function Rrn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:bV,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Dt(i)?i:i.user:bV,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Dt(r)||(i=r.item,r=r.user),JY(e,r&&r!==bV?r:i||r),i},{cursor:t})}function JY(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function qF(e,t){var n=e._runtime.data;return sn(n,t)||Xe("Unrecognized data set: "+t),n[t]}function Nrn(e,t){return arguments.length<2?qF(this,e).values.value:W8.call(this,e,ax().remove(ud).insert(t))}function W8(e,t){l4e(t)||Xe("Second argument to changes must be a changeset.");const n=qF(this,e);return n.modified=!0,this.pulse(n.input,t)}function Prn(e,t){return W8.call(this,e,ax().insert(t))}function Drn(e,t){return W8.call(this,e,ax().remove(t))}function V8e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function H8e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function G8(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Orn(e){var t=G8(e),n=V8e(e),r=H8e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function $rn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=G8(e),o=t.changedTouches?t.changedTouches[0]:t,s=F8(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Mrn(e,n,s),t}function Mrn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Dt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Iu(e),item:Iu(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Nbe="view",Lrn="timer",Frn="window",jrn={trap:!1};function Brn(e){const t=Wn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Je(r[s])&&(r[s]=Dh(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function q8e(e,t,n,r){e._eventListeners.push({type:n,sources:Pt(t),handler:r})}function Urn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function W3(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function zrn(e,t,n){var r=this,i=new v8(n),s=function(l,c){r.runAsync(null,()=>{e===Nbe&&Urn(r,t)&&l.preventDefault(),i.receive($rn(r,l,c))})},o;if(e===Lrn)W3(r,"timer",t)&&r.timer(s,t);else if(e===Nbe)W3(r,"view",t)&&r.addEventListener(t,s,jrn);else if(e===Frn?W3(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&W3(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);q8e(r,o,t,s)}return i}function Pbe(e){return e.item}function Dbe(e){return e.item.mark.source}function Obe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Vrn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Pbe),Dbe,Obe(e)),this.on(this.events("view","pointerout",Pbe),Dbe,Obe(t)),this}function Hrn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Wc(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const qrn="vega-bind",Wrn="vega-bind-name",Grn="vega-bind-radio";function Yrn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Gre(r.debounce,i.update))),(r.input==null&&r.element?Krn:Qrn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Krn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),q8e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Xrn(i))}}function Xrn(e){return typeof Event<"u"?new Event(e):{type:e}}function Qrn(e,t,n,r){const i=r.signal(n.signal),s=Wc("div",{class:qrn}),o=n.input==="radio"?s:s.appendChild(Wc("label"));o.appendChild(Wc("span",{class:Wrn},n.name||n.signal)),t.appendChild(s);let a=Jrn;switch(n.input){case"checkbox":a=Zrn;break;case"select":a=ein;break;case"radio":a=tin;break;case"range":a=nin;break}a(e,o,n,i)}function Jrn(e,t,n,r){const i=Wc("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Zrn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Wc("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function ein(e,t,n,r){const i=Wc("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};WF(o,r)&&(u.selected=!0),i.appendChild(Wc("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(WF(n.options[a],o)){i.selectedIndex=a;return}}}function tin(e,t,n,r){const i=Wc("span",{class:Grn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};WF(o,r)&&(u.checked=!0);const l=Wc("input",u);l.addEventListener("change",()=>e.update(o));const c=Wc("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)WF(a[l].value,o)&&(a[l].checked=!0)}}function nin(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Vv(s,i,100),a=Wc("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Wc("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function WF(e,t){return e===t||e+""==t+""}function W8e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,V8e(e),H8e(e),G8(e),i,s).background(e.background())}function koe(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function rin(e,t,n,r){const i=new r(e.loader(),koe(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,G8(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function iin(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=j8(r);e=n._el=e?_V(n,e,!0):null,Irn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||aD,a=e?s.renderer:s.headless;return n._renderer=a?W8e(n,n._renderer,e,a):null,n._handler=rin(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=_V(n,t,!0):e.appendChild(Wc("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=_V(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Yrn(n,u.element||t,u)})),n}function _V(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const $2=e=>+e||0,sin=e=>({top:e,bottom:e,left:e,right:e});function $be(e){return Ot(e)?{top:$2(e.top),bottom:$2(e.bottom),left:$2(e.left),right:$2(e.right)}:sin($2(e))}async function Roe(e,t,n,r){const i=j8(t),s=i&&i.headless;return s||Xe("Unrecognized renderer type: "+t),await e.runAsync(),W8e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function oin(e,t){e!==sv.Canvas&&e!==sv.SVG&&e!==sv.PNG&&Xe("Unrecognized image type: "+e);const n=await Roe(this,e,t);return e===sv.SVG?ain(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function ain(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function uin(e,t){return(await Roe(this,sv.Canvas,e,t)).canvas()}async function lin(e){return(await Roe(this,sv.SVG,e)).svg()}function cin(e,t,n){return B8e(e,BT,vN,n).parse(t)}function fin(e){var t=this._runtime.scales;return sn(t,e)||Xe("Unrecognized scale or projection: "+e),t[e].value}var G8e="width",Y8e="height",Noe="padding",Mbe={skip:!0};function K8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Noe?r.left+r.right:0)}function X8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Noe?r.top+r.bottom:0)}function din(e){var t=e._signals,n=t[G8e],r=t[Y8e],i=t[Noe];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=K8e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=X8e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function hin(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(G8e,n,Mbe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(Y8e,r,Mbe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function pin(e){return this._runtime.getState(e||{data:min,signals:gin,recurse:!0})}function min(e,t){return t.modified&&Je(t.input.value)&&!e.startsWith("_:vega:_")}function gin(e,t){return!(e==="parent"||t instanceof BT.proxy)}function yin(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function vin(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(k_t(n,t))}function bin(e,t,n,r){const i=e.element();i&&i.setAttribute("title",_in(r))}function _in(e){return e==null?"":Je(e)?Q8e(e):Ot(e)&&!Rv(e)?win(e):e+""}function win(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Je(n)?Q8e(n):J8e(n))}).join(`
`)}function Q8e(e){return"["+e.map(J8e).join(", ")+"]"}function J8e(e){return Je(e)?"[]":Ot(e)&&!Rv(e)?"{}":e}function xin(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Z8e(e,t){const n=this;if(t=t||{},OS.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Wn({},e.locale,t.locale);n.locale(ZFe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||sv.Canvas,n._scenegraph=new G5e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||bin,n._redraw=!0,n._handler=new aD().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Brn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=cin(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Wn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=K8e(n,n._width),n._viewHeight=X8e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,din(n),krn(n),Rrn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function G3(e,t){return sn(e._signals,t)?e._signals[t]:Xe("Unrecognized signal name: "+Et(t))}function eBe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Lbe(e,t,n,r){let i=eBe(n,r);return i||(i=koe(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Fbe(e,t,n){const r=eBe(t,n);return r&&t._targets.remove(r),e}Ct(Z8e,OS,{async evaluate(e,t,n){if(await OS.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Orn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&oM(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&z8e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=G3(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",$be(e)):$be(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(j8(e)||Xe("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(OS.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(G3(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:hin,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=koe(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Lbe(this,e,G3(this,e),t)},removeSignalListener(e,t){return Fbe(this,G3(this,e),t)},addDataListener(e,t){return Lbe(this,e,qF(this,e).values,t)},removeDataListener(e,t){return Fbe(this,qF(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=JY(this,null);this._globalCursor=!!e,t&&JY(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:vin,events:zrn,finalize:Hrn,hover:Vrn,data:Nrn,change:W8,insert:Prn,remove:Drn,scale:fin,initialize:iin,toImageURL:oin,toCanvas:uin,toSVG:lin,getState:pin,setState:yin,_watchPixelRatio:xin});const Ein="view",GF="[",YF="]",tBe="{",nBe="}",Sin=":",rBe=",",Tin="@",Cin=">",Ain=/[[\]{}]/,Iin={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let iBe,sBe;function Y1(e,t,n){return iBe=t||Ein,sBe=n||Iin,oBe(e.trim()).map(ZY)}function kin(e){return sBe[e]}function $k(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function oBe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=$k(e,i,rBe,GF+tBe,YF+nBe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function ZY(e){return e[0]==="["?Rin(e):Nin(e)}function Rin(e){const t=e.length;let n=1,r;if(n=$k(e,n,YF,GF,YF),n===t)throw"Empty between selector: "+e;if(r=oBe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Cin)throw"Expected '>' after between selector: "+e;r=r.map(ZY);const i=ZY(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Nin(e){const t={source:iBe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===nBe){if(a=e.lastIndexOf(tBe),a>=0){try{r=Pin(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Tin&&(i=++a),u=$k(e,a,Sin),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=$k(e,a,GF),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=$k(e,a,YF),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==GF)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Ain.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):kin(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Pin(e){const t=e.split(rBe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Din(e){return Ot(e)?e:{type:e||"pad"}}const M2=e=>+e||0,Oin=e=>({top:e,bottom:e,left:e,right:e});function $in(e){return Ot(e)?e.signal?e:{top:M2(e.top),bottom:M2(e.bottom),left:M2(e.left),right:M2(e.right)}:Oin(M2(e))}const ca=e=>Ot(e)&&!Je(e)?Wn({},e):{value:e};function jbe(e,t,n,r){return n!=null?(Ot(n)&&!Je(n)||Je(n)&&n.length&&Ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Va(e,t,n){for(const r in t)jbe(e,r,t[r]);for(const r in n)jbe(e,r,n[r],"update")}function yA(e,t,n){for(const r in t)n&&sn(n,r)||(e[r]=Wn(e[r]||{},t[r]));return e}function IE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Poe="mark",Doe="frame",Ooe="scope",Min="axis",Lin="axis-domain",Fin="axis-grid",jin="axis-label",Bin="axis-tick",Uin="axis-title",zin="legend",Vin="legend-band",Hin="legend-entry",qin="legend-gradient",aBe="legend-label",Win="legend-symbol",Gin="legend-title",Yin="title",Kin="title-text",Xin="title-subtitle";function Qin(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!IE(u,e)&&wV(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Doe?i.group:n===Poe?Wn({},i.mark,i[t]):null;for(u in c)l=IE(u,e)||(u==="fill"||u==="stroke")&&(IE("fill",e)||IE("stroke",e)),l||wV(s,u,c[u]);Pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)IE(h,e)||wV(s,h,d[h])}),e=Wn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Wn(o,e.enter),a&&(e.update=Wn(a,e.update)),e}function wV(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const uBe=e=>Dt(e)?Et(e):e.signal?`(${e.signal})`:lBe(e);function Y8(e){if(e.gradient!=null)return Zin(e);let t=e.signal?`(${e.signal})`:e.color?Jin(e.color):e.field!=null?lBe(e.field):e.value!==void 0?Et(e.value):void 0;return e.scale!=null&&(t=esn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${_M(e.exponent)})`),e.mult!=null&&(t+=`*${_M(e.mult)}`),e.offset!=null&&(t+=`+${_M(e.offset)}`),e.round&&(t=`round(${t})`),t}const Y3=(e,t,n,r)=>`(${e}(${[t,n,r].map(Y8).join(",")})+'')`;function Jin(e){return e.c?Y3("hcl",e.h,e.c,e.l):e.h||e.s?Y3("hsl",e.h,e.s,e.l):e.l||e.a?Y3("lab",e.l,e.a,e.b):e.r||e.g||e.b?Y3("rgb",e.r,e.g,e.b):null}function Zin(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Et(n));for(;t.length&&Mr(t)==null;)t.pop();return t.unshift(uBe(e.gradient)),`gradient(${t.join(",")})`}function _M(e){return Ot(e)?"("+Y8(e)+")":e}function lBe(e){return cBe(Ot(e)?e:{datum:e})}function cBe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Xe("Invalid field reference: "+Et(e));return e.signal||(r=Dt(r)?Om(r).map(Et).join("]["):cBe(r)),t+"["+r+"]"}function esn(e,t){const n=uBe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+_M(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function tsn(e){let t="";return e.forEach(n=>{const r=Y8(n);t+=n.test?`(${n.test})?${r}:`:r}),Mr(t)===":"&&(t+="null"),t}function fBe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Qin(e,t,n,r,i.config);for(const a in e)o[a]=nsn(e[a],t,s,i);return s}function nsn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=isn(rsn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function rsn(e){return Je(e)?tsn(e):Y8(e)}function isn(e,t,n,r){const i=bm(e,t);return i.$fields.forEach(s=>r[s]=1),Wn(n,i.$params),i.$expr}const ssn="outer",osn=["value","update","init","react","bind"];function Bbe(e,t){Xe(e+' for "outer" push: '+Et(t))}function dBe(e,t){const n=e.name;if(e.push===ssn)t.signals[n]||Bbe("No prior signal definition",n),osn.forEach(r=>{e[r]!==void 0&&Bbe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function eK(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function K8(e,t,n,r){return new eK(e,t,n,r)}function KF(e,t){return K8("operator",e,t)}function tn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function bN(e,t){return t?{$field:e,$name:t}:{$field:e}}const tK=bN("key");function Ube(e,t){return{$compare:e,$order:t}}function asn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const usn="ascending",lsn="descending";function csn(e){return Ot(e)?(e.order===lsn?"-":"+")+X8(e.op,e.field):""}function X8(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const $oe="scope",nK="view";function Vo(e){return e&&e.signal}function fsn(e){return e&&e.expr}function wM(e){if(Vo(e))return!0;if(Ot(e)){for(const t in e)if(wM(e[t]))return!0}return!1}function Jd(e,t){return e??t}function F_(e){return e&&e.signal||e}const zbe="timer";function _N(e,t){return(e.merge?hsn:e.stream?psn:e.type?msn:Xe("Invalid stream specification: "+Et(e)))(e,t)}function dsn(e){return e===$oe?nK:e||nK}function hsn(e,t){const n=e.merge.map(i=>_N(i,t)),r=Moe({merge:n},e,t);return t.addStream(r).id}function psn(e,t){const n=_N(e.stream,t),r=Moe({stream:n},e,t);return t.addStream(r).id}function msn(e,t){let n;e.type===zbe?(n=t.event(zbe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(dsn(e.source),e.type);const r=Moe({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Moe(e,t,n){let r=t.between;return r&&(r.length!==2&&Xe('Stream "between" parameter must have 2 entries: '+Et(t)),e.between=[_N(r[0],n),_N(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(gsn(t.marktype,t.markname,t.markrole)),t.source===$oe&&r.push("inScope(event.item)"),r.length&&(e.filter=bm("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function gsn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const ysn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function vsn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Xe("Signal update missing events specification."),Dt(s)&&(s=Y1(s,t.isSubscope()?$oe:nK)),s=Pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[_sn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Xe("Signal encode and update are mutually exclusive."),o="encode(item(),"+Et(r)+")"),i.update=Dt(o)?bm(o,t):o.expr!=null?bm(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:ysn,$params:{$value:t.signalRef(o.signal)}}:Xe("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Wn(bsn(u,t),i)))}function bsn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):_N(e,t)}}function _sn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function wsn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Xe("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=bm(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>vsn(i,t,n.id))}const $i=e=>(t,n,r)=>K8(e,n,t||void 0,r),hBe=$i("aggregate"),xsn=$i("axisticks"),pBe=$i("bound"),Wh=$i("collect"),Vbe=$i("compare"),Esn=$i("datajoin"),mBe=$i("encode"),Ssn=$i("expression"),Tsn=$i("facet"),Csn=$i("field"),Asn=$i("key"),Isn=$i("legendentries"),ksn=$i("load"),Rsn=$i("mark"),Nsn=$i("multiextent"),Psn=$i("multivalues"),Dsn=$i("overlap"),Osn=$i("params"),gBe=$i("prefacet"),$sn=$i("projection"),Msn=$i("proxy"),Lsn=$i("relay"),yBe=$i("render"),Fsn=$i("scale"),cx=$i("sieve"),jsn=$i("sortitems"),vBe=$i("viewlayout"),Bsn=$i("values");let Usn=0;const bBe={min:"min",max:"max",count:"sum"};function zsn(e,t){const n=e.type||"linear";s5e(n)||Xe("Unrecognized scale type: "+Et(n)),t.addScale(e.name,{type:n,domain:void 0})}function Vsn(e,t){const n=t.getScale(e.name).params;let r;n.domain=_Be(e.domain,e,t),e.range!=null&&(n.range=xBe(e,t,n)),e.interpolate!=null&&Zsn(e.interpolate,n),e.nice!=null&&(n.nice=Jsn(e.nice,t)),e.bins!=null&&(n.bins=Qsn(e.bins,t));for(r in e)sn(n,r)||r==="name"||(n[r]=Yf(e[r],t))}function Yf(e,t){return Ot(e)?e.signal?t.signalRef(e.signal):Xe("Unsupported object: "+Et(e)):e}function xM(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Yf(n,t))}function Q8(e){Xe("Can not find data set: "+Et(e))}function _Be(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Xe("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Je(e)?Hsn:e.fields?Wsn:qsn)(e,t,n)}function Hsn(e,t,n){return e.map(r=>Yf(r,n))}function qsn(e,t,n){const r=n.getData(e.data);return r||Q8(e.data),VT(t.type)?r.valuesRef(n,e.field,wBe(e.sort,!1)):u5e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Wsn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Dt(o)?{data:r,field:o}:Je(o)||o.signal?Gsn(o,n):o,s.push(o),s),[]);return(VT(t.type)?Ysn:u5e(t.type)?Ksn:Xsn)(e,n,i)}function Gsn(e,t){const n="_:vega:_"+Usn++,r=Wh({});if(Je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Et(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,cx({})]),{data:n,field:"data"}}function Ysn(e,t,n){const r=wBe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||Q8(l.data),c.countsRef(t,l.field,r)}),a={groupby:tK,pulse:o};r&&(i=r.op||"count",s=r.field?X8(i,r.field):"count",a.ops=[bBe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(hBe(a));const u=t.add(Wh({pulse:tn(i)}));return s=t.add(Bsn({field:tK,sort:t.sortRef(r),pulse:tn(u)})),tn(s)}function wBe(e,t){return e&&(!e.field&&!e.op?Ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Xe("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!bBe[e.op]&&Xe("Multiple domain scales can not be sorted using "+e.op)),e}function Ksn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Q8(i.data),s.domainRef(t,i.field)});return tn(t.add(Psn({values:r})))}function Xsn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Q8(i.data),s.extentRef(t,i.field)});return tn(t.add(Nsn({extents:r})))}function Qsn(e,t){return e.signal||Je(e)?xM(e,t):t.objectProperty(e)}function Jsn(e,t){return e.signal?t.signalRef(e.signal):Ot(e)?{interval:Yf(e.interval),step:Yf(e.step)}:Yf(e)}function Zsn(e,t){t.interpolate=Yf(e.type||e),e.gamma!=null&&(t.interpolateGamma=Yf(e.gamma))}function xBe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Dt(i)){if(r&&sn(r,i))return e=Wn({},e,{range:r[i]}),xBe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=VT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Xe("Unrecognized scale range value: "+Et(i))}else if(i.scheme){n.scheme=Je(i.scheme)?xM(i.scheme,t):Yf(i.scheme,t),i.extent&&(n.schemeExtent=xM(i.extent,t)),i.count&&(n.schemeCount=Yf(i.count,t));return}else if(i.step){n.rangeStep=Yf(i.step,t);return}else{if(VT(e.type)&&!Je(i))return _Be(i,e,t);Je(i)||Xe("Unsupported range type: "+Et(i))}return i.map(s=>(Je(s)?xM:Yf)(s,t))}function eon(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=rK(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=rK(n[i],i,t));t.addProjection(e.name,r)}function rK(e,t,n){return Je(e)?e.map(r=>rK(r,t,n)):Ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Xe("Unsupported parameter object: "+Et(e)):e}const Gh="top",vA="left",bA="right",p1="bottom",EBe="center",ton="vertical",non="start",ron="middle",ion="end",iK="index",Loe="label",son="offset",YT="perc",oon="perc2",Qf="value",dD="guide-label",Foe="guide-title",aon="group-title",uon="group-subtitle",Hbe="symbol",EM="gradient",sK="discrete",oK="size",lon="shape",con="fill",fon="stroke",don="strokeWidth",hon="strokeDash",pon="opacity",joe=[oK,lon,con,fon,don,hon,pon],hD={name:1,style:1,interactive:1},jr={value:0},Jf={value:1},J8="group",SBe="rect",Boe="rule",mon="symbol",fx="text";function wN(e){return e.type=J8,e.interactive=e.interactive||!1,e}function _c(e,t){const n=(r,i)=>Jd(e[r],Jd(t[r],i));return n.isVertical=r=>ton===Jd(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Jd(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Jd(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Jd(e.columns,Jd(t.columns,+n.isVertical(!0))),n}function TBe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function gon(e,t,n){const r=t.config.style[n];return r&&r[e]}function Z8(e,t,n){return`item.anchor === '${non}' ? ${e} : item.anchor === '${ion}' ? ${t} : ${n}`}const Uoe=Z8(Et(vA),Et(bA),Et(EBe));function yon(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function CBe(e,t){return t?e?Ot(e)?Object.assign({},e,{offset:CBe(e.offset,t)}):{value:e,offset:t}:t:e}function uf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=yA(e.encode,t,hD)):e.interactive=!1,e}function von(e,t,n,r){const i=_c(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:jr,x:jr,y:jr,width:ca(f),height:ca(d)},update:Wn({},u,{opacity:Jf,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:jr}};return Va(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),uf({type:SBe,role:qin,encode:h},r)}function bon(e,t,n,r,i){const s=_c(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:jr,fill:{scale:t,field:Qf}};p[l]={signal:h+"datum."+YT,mult:u},p[c]=jr,p[f]={signal:h+"datum."+oon,mult:u},p[d]=ca(a);const m={enter:p,update:Wn({},p,{opacity:Jf}),exit:{opacity:jr}};return Va(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),uf({type:SBe,role:Vin,key:Qf,from:i,encode:m},r)}const _on=`datum.${YT}<=0?"${vA}":datum.${YT}>=1?"${bA}":"${EBe}"`,won=`datum.${YT}<=0?"${p1}":datum.${YT}>=1?"${Gh}":"${ron}"`;function qbe(e,t,n,r){const i=_c(e,t),s=i.isVertical(),o=ca(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:jr},update:c={opacity:Jf,text:{field:Loe}},exit:{opacity:jr}};return Va(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Jd(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:won},f="y",d="x",h="1-"):(l.align=c.align={signal:_on},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+YT,mult:a},l[d]=c[d]=o,o.offset=Jd(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+iK}:void 0,uf({type:fx,role:aBe,style:dD,key:Qf,from:r,encode:p,overlap:u},n)}function xon(e,t,n,r,i){const s=_c(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${son} : datum.${oK}`,h=l?ca(l):{field:oK},p=`datum.${iK}`,m=`max(1, ${i})`;let g,y,b,w,E;h.mult=.5,g={enter:y={opacity:jr,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:Jf,x:y.x,y:y.y},exit:{opacity:jr}};let S=null,T=null;e.fill||(S=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),Va(g,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),joe.forEach(P=>{e[P]&&(b[P]=y[P]={scale:e[P],field:Qf})});const C=uf({type:mon,role:Win,key:Qf,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=ca(c);I.offset=s("labelOffset"),g={enter:y={opacity:jr,x:{signal:d,offset:I},y:h},update:b={opacity:Jf,text:{field:Loe},x:y.x,y:y.y},exit:{opacity:jr}},Va(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=uf({type:fx,role:aBe,style:dD,key:Qf,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:jr,height:l?ca(l):jr,opacity:jr},exit:{opacity:jr},update:b={opacity:Jf,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:iK}},wN({role:Ooe,from:r,encode:yA(g,o,hD),marks:[C,R],name:u,interactive:a,sort:E})}function Eon(e,t){const n=_c(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const zoe='item.orient === "left"',Voe='item.orient === "right"',eB=`(${zoe} || ${Voe})`,Son=`datum.vgrad && ${eB}`,Ton=Z8('"top"','"bottom"','"middle"'),Con=Z8('"right"','"left"','"center"'),Aon=`datum.vgrad && ${Voe} ? (${Con}) : (${eB} && !(datum.vgrad && ${zoe})) ? "left" : ${Uoe}`,Ion=`item._anchor || (${eB} ? "middle" : "start")`,kon=`${Son} ? (${zoe} ? -90 : 90) : 0`,Ron=`${eB} ? (datum.vgrad ? (${Voe} ? "bottom" : "top") : ${Ton}) : "top"`;function Non(e,t,n,r){const i=_c(e,t),s={enter:{opacity:jr},update:{opacity:Jf,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:jr}};return Va(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Ion},angle:{signal:kon},align:{signal:Aon},baseline:{signal:Ron},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),uf({type:fx,role:Gin,style:Foe,from:r,encode:s},n)}function Pon(e,t){let n;return Ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Wbe(e.path)+")":e.sphere&&(n="geoShape("+Wbe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Wbe(e){return Ot(e)&&e.signal?e.signal:Et(e)}function ABe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===J8?Ooe:t||Poe}function Don(e){return{marktype:e.type,name:e.name||void 0,role:e.role||ABe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Oon(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Hoe(e,t){const n=d4e(e.type);n||Xe("Unrecognized transform type: "+Et(e.type));const r=K8(n.type.toLowerCase(),null,IBe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function IBe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=$on(o,t,n)}return r}function $on(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Mon(e,t,n);if(i===void 0){e.required&&Xe("Missing required "+Et(t.type)+" parameter: "+Et(e.name));return}else{if(r==="param")return Lon(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vo(i)?i.map(s=>Gbe(e,s,n)):Gbe(e,i,n)}function Gbe(e,t,n){const r=e.type;if(Vo(t))return Kbe(r)?Xe("Expression references can not be signals."):xV(r)?n.fieldRef(t):Xbe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||xV(r);return i&&Fon(t)?n.exprRef(t.expr,t.as):i&&jon(t)?bN(t.field,t.as):Kbe(r)?bm(t,n):Bon(r)?tn(n.getData(t).values):xV(r)?bN(t):Xbe(r)?n.compareRef(t):t}}function Mon(e,t,n){return Dt(t.from)||Xe('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Lon(e,t,n){const r=t[e.name];return e.array?(Je(r)||Xe("Expected an array of sub-parameters. Instead: "+Et(r)),r.map(i=>Ybe(e,i,n))):Ybe(e,r,n)}function Ybe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Xe("Unsupported parameter: "+Et(t));const s=Wn(IBe(i,t,n),i.key);return tn(n.add(Osn(s)))}const Fon=e=>e&&e.expr,jon=e=>e&&e.field,Bon=e=>e==="data",Kbe=e=>e==="expr",xV=e=>e==="field",Xbe=e=>e==="compare";function Uon(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Xe("Only group marks can be faceted."),r.field!=null?o=a=SM(r,n):(e.data?a=tn(n.getData(e.data).aggregate):(s=Hoe(Wn({type:"aggregate",groupby:Pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=SM(r,n),o=a=tn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=tn(n.add(Wh(null,[{}]))),o||(o=SM(e,n)),{key:i,pulse:o,parent:a}}function SM(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:tn(t.getData(e.data).output)}function xw(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}xw.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=tn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new xw(e,s,i,r,o)};function kBe(e){return Dt(e)?e:null}function Qbe(e,t,n){const r=X8(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function L2(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=csn(s);let l=kBe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:tK,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:tn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(K8(r,void 0,d)),o&&(t.index[i]=f),c=tn(f),l!=null&&(a[l]=c)}return c}xw.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=kBe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Qbe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:tn(r.output)},n&&n.field&&Qbe(e,u,n),a=e.add(hBe(u)),o=e.add(Wh({pulse:tn(a)})),o={agg:a,ref:tn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return tn(this.values)},extentRef(e,t){return L2(e,this,"extent","extent",t,!1)},domainRef(e,t){return L2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return L2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return L2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return L2(e,this,"indata","tupleindex",t,!0,!0)}};function zon(e,t,n){const r=e.from.facet,i=r.name,s=SM(r,t);let o;r.name||Xe("Facet must have a name: "+Et(r)),r.data||Xe("Facet must reference a data set: "+Et(r)),r.field?o=t.add(gBe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Tsn({key:t.keyRef(r.groupby),group:tn(t.proxy(n.parent)),pulse:s})):Xe("Facet must specify groupby or field: "+Et(r));const a=t.fork(),u=a.add(Wh()),l=a.add(cx({pulse:tn(u)}));a.addData(i,new xw(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Von(e,t,n){const r=t.add(gBe({pulse:n.pulse})),i=t.fork();i.add(cx()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function RBe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(KF()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=bm(l,t);u.update=c.$expr,u.params=c.$params}function tB(e,t){const n=ABe(e),r=e.type===J8,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Ooe||n===Doe,a,u,l,c,f,d,h;const p=n===Poe||o||i,m=Uon(e.from,r,t);u=t.add(Esn({key:m.key||(e.key?bN(e.key):void 0),pulse:m.pulse,clean:!r}));const g=tn(u);u=l=t.add(Wh({pulse:g})),u=t.add(Rsn({markdef:Don(e),interactive:Oon(e.interactive,t),clip:Pon(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:tn(u)}));const y=tn(u);u=c=t.add(mBe(fBe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const C=Hoe(T,t),I=C.metadata;(I.generates||I.changes)&&Xe("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),C.params.pulse=tn(u),t.add(u=C)}),e.sort&&(u=t.add(jsn({sort:t.compareRef(e.sort),pulse:tn(u)})));const b=tn(u);(i||o)&&(o=t.add(vBe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=tn(o));const w=t.add(pBe({mark:y,pulse:d||b}));h=tn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,g),i?zon(e,t,m):p?Von(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=Hon(s,h,t));const E=t.add(yBe({pulse:h})),S=t.add(cx({pulse:tn(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new xw(t,l,E,S)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Xe("Marks only support modify triggers."),RBe(T,t,f)}))}function Hon(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vo(s)?n.signalRef(s.signal):s,method:Vo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return tn(n.add(Dsn(o)))}function qon(e,t){const n=t.config.legend,r=e.encode||{},i=_c(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;joe.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||Xe("Missing valid scale for legend.");const p=Won(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=tn(t.add(Wh(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},b=tn(t.add(Isn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===EM?(h=[von(e,c,n,r.gradient),qbe(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${F_(i.gradientLength())})/100))`)):p===sK?h=[bon(e,c,n,r.gradient,b),qbe(e,n,r.labels,b)]:(f=Eon(e,n),h=[xon(e,n,r,b,F_(f.columns))],d.size=Kon(e,t,h[0].marks)),h=[wN({role:Hin,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(Non(e,n,r.title,g)),tB(wN({role:zin,from:g,encode:yA(Yon(i,e,n),s,hD),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function Won(e,t){let n=e.type||Hbe;return!e.type&&Gon(e)===1&&(e.fill||e.stroke)&&(n=tse(t)?EM:_Y(t)?sK:Hbe),n!==EM?n:_Y(t)?sK:EM}function Gon(e){return joe.reduce((t,n)=>t+(e[n]?1:0),0)}function Yon(e,t,n){const r={enter:{},update:{}};return Va(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Kon(e,t,n){const r=F_(Jbe("size",e,n)),i=F_(Jbe("strokeWidth",e,n)),s=F_(Xon(n[1].encode,t,dD));return bm(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Jbe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:TBe(e,n[0].encode)}function Xon(e,t,n){return TBe("fontSize",e)||gon("fontSize",t,n)}const Qon=`item.orient==="${vA}"?-90:item.orient==="${bA}"?90:0`;function Jon(e,t){e=Dt(e)?{text:e}:e;const n=_c(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=tn(t.add(Wh(null,[l])));return u.push(tan(e,n,Zon(e),c)),e.subtitle&&u.push(nan(e,n,r.subtitle,c)),tB(wN({role:Yin,from:c,encode:ean(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Zon(e){const t=e.encode;return t&&t.title||Wn({name:e.name,interactive:e.interactive,style:e.style},t)}function ean(e,t){const n={enter:{},update:{}};return Va(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Uoe},angle:{signal:Qon},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),yA(n,t,hD)}function tan(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Va(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),uf({type:fx,role:Kin,style:aon,from:r,encode:o},n)}function nan(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Va(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),uf({type:fx,role:Xin,style:uon,from:r,encode:o},n)}function ran(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Hoe(r,t))}),e.on&&e.on.forEach(r=>{RBe(r,t,e.name)}),t.addDataPipeline(e.name,ian(e,t,n))}function ian(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vo(e.values)||wM(e.format)?(r.push(Zbe(t,e)),r.push(i=Sb())):r.push(i=Sb({$ingest:e.values,$format:e.format})):e.url?wM(e.url)||wM(e.format)?(r.push(Zbe(t,e)),r.push(i=Sb())):r.push(i=Sb({$request:e.url,$format:e.format})):e.source&&(i=a=Pt(e.source).map(d=>tn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Sb()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Lsn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Sb())),i||r.push(Sb()),r.push(cx({})),r}function Sb(e){const t=Wh({},e);return t.metadata={source:!0},t}function Zbe(e,t){return ksn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const NBe=e=>e===p1||e===Gh,nB=(e,t,n)=>Vo(e)?uan(e.signal,t,n):e===vA||e===Gh?t:n,fa=(e,t,n)=>Vo(e)?oan(e.signal,t,n):NBe(e)?t:n,Sh=(e,t,n)=>Vo(e)?aan(e.signal,t,n):NBe(e)?n:t,PBe=(e,t,n)=>Vo(e)?lan(e.signal,t,n):e===Gh?{value:t}:{value:n},san=(e,t,n)=>Vo(e)?can(e.signal,t,n):e===bA?{value:t}:{value:n},oan=(e,t,n)=>DBe(`${e} === '${Gh}' || ${e} === '${p1}'`,t,n),aan=(e,t,n)=>DBe(`${e} !== '${Gh}' && ${e} !== '${p1}'`,t,n),uan=(e,t,n)=>qoe(`${e} === '${vA}' || ${e} === '${Gh}'`,t,n),lan=(e,t,n)=>qoe(`${e} === '${Gh}'`,t,n),can=(e,t,n)=>qoe(`${e} === '${bA}'`,t,n),DBe=(e,t,n)=>(t=t!=null?ca(t):t,n=n!=null?ca(n):n,e_e(t)&&e_e(n)?(t=t?t.signal||Et(t.value):null,n=n?n.signal||Et(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Wn({test:e},t)].concat(n||[])),e_e=e=>e==null||Object.keys(e).length===1,qoe=(e,t,n)=>({signal:`${e} ? (${eS(t)}) : (${eS(n)})`}),fan=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${vA}' ? (${eS(r)}) : `:"")+(n!=null?`${e} === '${p1}' ? (${eS(n)}) : `:"")+(i!=null?`${e} === '${bA}' ? (${eS(i)}) : `:"")+(t!=null?`${e} === '${Gh}' ? (${eS(t)}) : `:"")+"(null)"}),eS=e=>Vo(e)?e.signal:e==null?null:Et(e),dan=(e,t)=>t===0?0:Vo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},$S=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function uE(e,t,n,r){let i;if(t&&sn(t,e))return t[e];if(sn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Foe][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[dD][i]}return null}function t_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function han(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vo(o)){const f=t_e([n.axisX,n.axisY]),d=t_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=fa(o,uE(l,n.axisX,i,r),uE(l,n.axisY,i,r));u={};for(l of d)u[l]=fan(o.signal,uE(l,n.axisTop,i,r),uE(l,n.axisBottom,i,r),uE(l,n.axisLeft,i,r),uE(l,n.axisRight,i,r))}else a=o===Gh||o===p1?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Wn({},i,a,u,s):i}function pan(e,t,n,r){const i=_c(e,t),s=e.orient;let o,a;const u={enter:o={opacity:jr},update:a={opacity:Jf},exit:{opacity:jr}};Va(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=n_e(e,0),c=n_e(e,1);return o.x=a.x=fa(s,l,jr),o.x2=a.x2=fa(s,c),o.y=a.y=Sh(s,l,jr),o.y2=a.y2=Sh(s,c),uf({type:Boe,role:Lin,from:r,encode:u},n)}function n_e(e,t){return{scale:e.scale,range:t}}function man(e,t,n,r,i){const s=_c(e,t),o=e.orient,a=e.gridScale,u=nB(o,1,-1),l=gan(e.offset,u);let c,f,d;const h={enter:c={opacity:jr},update:d={opacity:Jf},exit:f={opacity:jr}};Va(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Qf,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=fa(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Wn(m,{mult:u,offset:l});return c.x=d.x=fa(o,p,g),c.y=d.y=Sh(o,p,g),c.x2=d.x2=Sh(o,y),c.y2=d.y2=fa(o,y),f.x=fa(o,p),f.y=Sh(o,p),uf({type:Boe,role:Fin,key:Qf,from:r,encode:h},n)}function gan(e,t){if(t!==1)if(!Ot(e))e=Vo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Wn({},e);for(;n.mult!=null;)if(Ot(n.mult))n=n.mult=Wn({},n.mult);else return n.mult=Vo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function yan(e,t,n,r,i,s){const o=_c(e,t),a=e.orient,u=nB(a,-1,1);let l,c,f;const d={enter:l={opacity:jr},update:f={opacity:Jf},exit:c={opacity:jr}};Va(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ca(i);h.mult=u;const p={scale:e.scale,field:Qf,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=fa(a,jr,p),f.y2=l.y2=fa(a,h),c.x=fa(a,p),f.x=l.x=Sh(a,jr,p),f.x2=l.x2=Sh(a,h),c.y=Sh(a,p),uf({type:Boe,role:Bin,key:Qf,from:r,encode:d},n)}function EV(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function van(e,t,n,r,i,s){const o=_c(e,t),a=e.orient,u=e.scale,l=nB(a,-1,1),c=F_(o("labelFlush")),f=F_(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ca(i);g.mult=l,g.offset=ca(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Qf,band:.5,offset:CBe(s.offset,o("labelOffset"))},b=fa(a,p?EV(u,c,'"left"','"right"','"center"'):{value:"center"},san(a,"left","right")),w=fa(a,PBe(a,"bottom","top"),p?EV(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=EV(u,c,`-(${f})`,f,0);p=p&&f;const S={opacity:jr,x:fa(a,y,g),y:Sh(a,y,g)},T={enter:S,update:m={opacity:Jf,text:{field:Loe},x:S.x,y:S.y,align:b,baseline:w},exit:{opacity:jr,x:S.x,y:S.y}};Va(T,{dx:!d&&p?fa(a,E):null,dy:!h&&p?Sh(a,E):null}),Va(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const C=o("labelBound");let I=o("labelOverlap");return I=I||C?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:C?{scale:u,orient:a,tolerance:C}:null}:void 0,m.align!==b&&(m.align=$S(m.align,b)),m.baseline!==w&&(m.baseline=$S(m.baseline,w)),uf({type:fx,role:jin,style:dD,key:Qf,from:r,encode:T,overlap:I},n)}function ban(e,t,n,r){const i=_c(e,t),s=e.orient,o=nB(s,-1,1);let a,u;const l={enter:a={opacity:jr,anchor:ca(i("titleAnchor",null)),align:{signal:Uoe}},update:u=Wn({},a,{opacity:Jf,text:ca(e.title)}),exit:{opacity:jr}},c={signal:`lerp(range("${e.scale}"), ${Z8(0,1,.5)})`};return u.x=fa(s,c),u.y=Sh(s,c),a.angle=fa(s,jr,dan(o,90)),a.baseline=fa(s,PBe(s,p1,Gh),{value:p1}),u.angle=a.angle,u.baseline=a.baseline,Va(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),_an(i,s,l,n),l.update.align=$S(l.update.align,a.align),l.update.angle=$S(l.update.angle,a.angle),l.update.baseline=$S(l.update.baseline,a.baseline),uf({type:fx,role:Uin,style:Foe,from:r,encode:l},n)}function _an(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=$S(ca(a),n.update[u]),!1):!IE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ca(o):fa(t,ca(o),ca(s))}function wan(e,t){const n=han(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=_c(e,n),l=yon(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=tn(t.add(Wh({},[c]))),d=tn(t.add(xsn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(man(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(yan(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(van(e,n,r.labels,d,p,l))),c.domain&&h.push(pan(e,n,r.domain,f)),c.title&&h.push(ban(e,n,r.title,f)),tB(wN({role:Min,from:f,encode:yA(xan(u,e),i,hD),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function xan(e,t){const n={enter:{},update:{}};return Va(n,{orient:e("orient"),offset:e("offset")||0,position:Jd(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function OBe(e,t,n){const r=Pt(e.signals),i=Pt(e.scales);return n||r.forEach(s=>dBe(s,t)),Pt(e.projections).forEach(s=>eon(s,t)),i.forEach(s=>zsn(s,t)),Pt(e.data).forEach(s=>ran(s,t)),i.forEach(s=>Vsn(s,t)),(n||r).forEach(s=>wsn(s,t)),Pt(e.axes).forEach(s=>wan(s,t)),Pt(e.marks).forEach(s=>tB(s,t)),Pt(e.legends).forEach(s=>qon(s,t)),e.title&&Jon(e.title,t),t.parseLambdas(),t}const Ean=e=>yA({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function San(e,t){const n=t.config,r=tn(t.root=t.add(KF())),i=Tan(e,n);i.forEach(l=>dBe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Wh()),o=t.add(mBe(fBe(Ean(e.encode),J8,Doe,e.style,t,{pulse:tn(s)}))),a=t.add(vBe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:tn(o)}));t.operators.pop(),t.pushState(tn(o),tn(a),null),OBe(e,t,i),t.operators.push(a);let u=t.add(pBe({mark:r,pulse:tn(a)}));return u=t.add(yBe({pulse:tn(u)})),u=t.add(cx({pulse:tn(u)})),t.addData("root",new xw(t,s,s,u)),t}function F2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Tan(e,t){const n=o=>Jd(e[o],t[o]),r=[F2("background",n("background")),F2("autosize",Din(n("autosize"))),F2("padding",$in(n("padding"))),F2("width",n("width")||0),F2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Pt(e.signals).forEach(o=>{sn(i,o.name)?o=Wn(i[o.name],o):r.push(o),s[o.name]=o}),Pt(t.signals).forEach(o=>{!sn(s,o.name)&&!sn(i,o.name)&&r.push(o)}),r}function $Be(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function r_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}$Be.prototype=r_e.prototype={parse(e){return OBe(e,this)},fork(){return new r_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof eK?tn(e):e;return this.add(Msn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(tn(this.add(cx({pulse:e})))),this._parent.push(t),this._lookup.push(n?tn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Mr(this._parent)},encode(){return Mr(this._encode)},lookup(){return Mr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Dt(e))return bN(e,t);e.signal||Xe("Unsupported field reference: "+Et(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=tn(this.add(Csn(i)))}return r},compareRef(e){let t=!1;const n=s=>Vo(s)?(t=!0,this.signalRef(s.signal)):fsn(s)?(t=!0,this.exprRef(s.expr)):s,r=Pt(e.field).map(n),i=Pt(e.order).map(n);return t?tn(this.add(Vbe({fields:r,orders:i}))):Ube(r,i)},keyRef(e,t){let n=!1;const r=s=>Vo(s)?(n=!0,tn(i[s.signal])):s,i=this.signals;return e=Pt(e).map(r),n?tn(this.add(Asn({fields:e,flat:t}))):asn(e,t)},sortRef(e){if(!e)return e;const t=X8(e.op,e.field),n=e.order||usn;return n.signal?tn(this.add(Vbe({fields:t,orders:this.signalRef(n.signal)}))):Ube(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return sn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Xe("Duplicate signal name: "+Et(e));const n=t instanceof eK?t:this.add(KF(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Xe("Unrecognized signal name: "+Et(e)),this.signals[e]},signalRef(e){return this.signals[e]?tn(this.signals[e]):(sn(this.lambdas,e)||(this.lambdas[e]=this.add(KF(null))),tn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=bm(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ot(e)?e:this.signalRef(e.signal||Woe(e))},exprRef(e,t){const n={expr:bm(e,this)};return t&&(n.expr.$name=t),tn(this.add(Ssn(n)))},addBinding(e,t){this.bindings||Xe("Nested signals do not support binding: "+Et(e)),this.bindings.push(Wn({signal:e},t))},addScaleProj(e,t){sn(this.scales,e)&&Xe("Duplicate scale or projection name: "+Et(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Fsn(t))},addProjection(e,t){this.addScaleProj(e,$sn(t))},getScale(e){return this.scales[e]||Xe("Unrecognized scale name: "+Et(e)),this.scales[e]},scaleRef(e){return tn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return sn(this.data,e)&&Xe("Duplicate data set name: "+Et(e)),this.data[e]=t},getData(e){return this.data[e]||Xe("Undefined data set name: "+Et(e)),this.data[e]},addDataPipeline(e,t){return sn(this.data,e)&&Xe("Duplicate data set name: "+Et(e)),this.addData(e,xw.fromEntries(this,t))}};function Woe(e){return(Je(e)?Can:Aan)(e)}function Can(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ot(i)?i.signal||Woe(i):Et(i))}return n+"]"}function Aan(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Et(r)+":"+(Ot(i)?i.signal||Woe(i):Et(i));return t+"}"}function Ian(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function kan(e,t,n){return Ot(e)||Xe("Input Vega specification must be an object."),t=lA(Ian(),t,e.config),San(e,new $Be(t,n)).toRuntime()}var Ran="5.29.0";Wn(BT,kYt,yJt,KJt,CZt,DZt,oen,jZt,uen,den,xen,ken);const Nan=Object.freeze(Object.defineProperty({__proto__:null,Bounds:wo,CanvasHandler:aD,CanvasRenderer:LF,DATE:pc,DAY:mu,DAYOFYEAR:vm,Dataflow:OS,Debug:oFe,Error:Bre,EventStream:v8,Gradient:E5e,GroupItem:N8,HOURS:sf,Handler:Cse,HybridHandler:pje,HybridRenderer:NY,Info:sFe,Item:R8,MILLISECONDS:Oh,MINUTES:of,MONTH:_u,Marks:af,MultiPulse:oie,None:iFe,Operator:ji,Parameters:y8,Pulse:Nv,QUARTER:hc,RenderType:sv,Renderer:oD,ResourceLoader:R5e,SECONDS:ld,SVGHandler:tje,SVGRenderer:Pse,SVGStringRenderer:hje,Scenegraph:G5e,TIME_UNITS:Jre,Transform:qe,View:Z8e,WEEK:jo,Warn:Ure,YEAR:ja,accessor:bc,accessorFields:bu,accessorName:Vs,array:Pt,ascending:f8,bandwidthNRD:cie,bin:m4e,bootstrapCI:g4e,boundClip:Sje,boundContext:nD,boundItem:CY,boundMark:V5e,boundStroke:X0,changeset:ax,clampRange:yFe,codegenExpression:C8e,compare:Wre,constant:Iu,cumulativeLogNormal:gie,cumulativeNormal:_8,cumulativeUniform:_ie,dayofyear:kFe,debounce:Gre,defaultLocale:tie,definition:d4e,densityLogNormal:mie,densityNormal:fie,densityUniform:bie,domChild:Lo,domClear:zf,domCreate:rv,domFind:Tse,dotbin:y4e,error:Xe,expressionFunction:uo,extend:Wn,extent:ym,extentIndex:vFe,falsy:Cy,fastmap:fA,field:ad,flush:bFe,font:M8,fontFamily:sD,fontSize:$m,format:sM,formatLocale:SF,formats:iie,hasOwnProperty:sn,id:HP,identity:Au,inferType:t4e,inferTypes:n4e,ingest:di,inherits:Ct,inrange:QE,interpolate:nse,interpolateColors:I8,interpolateRange:l5e,intersect:_je,intersectBoxLine:JE,intersectPath:cse,intersectPoint:fse,intersectRule:P5e,isArray:Je,isBoolean:W1,isDate:Rv,isFunction:Gn,isIterable:_Fe,isNumber:Gr,isObject:Ot,isRegExp:wFe,isString:Dt,isTuple:m8,key:Yre,lerp:xFe,lineHeight:f1,loader:h8,locale:ZFe,logger:zre,lruCache:EFe,markup:Nse,merge:SFe,mergeConfig:lA,multiLineOffset:xse,one:uA,pad:TFe,panLinear:fFe,panLog:dFe,panPow:hFe,panSymlog:pFe,parse:kan,parseExpression:boe,parseSelector:Y1,path:U5,pathCurves:ase,pathEqual:Tje,pathParse:HT,pathRectangle:C5e,pathRender:fN,pathSymbols:T5e,pathTrail:A5e,peek:Mr,point:F8,projection:Hse,quantileLogNormal:yie,quantileNormal:w8,quantileUniform:wie,quantiles:uie,quantizeInterpolator:c5e,quarter:mFe,quartiles:lie,get random(){return cd},randomInteger:DGt,randomKDE:hie,randomLCG:PGt,randomLogNormal:b4e,randomMixture:_4e,randomNormal:die,randomUniform:w4e,read:s4e,regressionConstant:xie,regressionExp:E4e,regressionLinear:Eie,regressionLoess:C4e,regressionLog:x4e,regressionPoly:T4e,regressionPow:S4e,regressionQuad:Sie,renderModule:j8,repeat:EI,resetDefaultLocale:kWt,resetSVGClipId:k5e,resetSVGDefIds:$Qt,responseType:i4e,runtimeContext:B8e,sampleCurve:E8,sampleLogNormal:pie,sampleNormal:b8,sampleUniform:vie,scale:ti,sceneEqual:Dse,sceneFromJSON:q5e,scenePickVisit:kF,sceneToJSON:H5e,sceneVisit:$h,sceneZOrder:dse,scheme:rse,serializeXML:lje,setHybridRendererOptions:NQt,setRandom:RGt,span:qP,splitAccessPath:Om,stringValue:Et,textMetrics:qc,timeBin:WFe,timeFloor:MFe,timeFormatLocale:uN,timeInterval:dA,timeOffset:jFe,timeSequence:zFe,timeUnitSpecifier:IFe,timeUnits:Zre,toBoolean:Kre,toDate:Xre,toNumber:gu,toSet:Dh,toString:Qre,transform:h4e,transforms:BT,truncate:CFe,truthy:ud,tupleid:nn,typeParsers:yY,utcFloor:LFe,utcInterval:hA,utcOffset:BFe,utcSequence:VFe,utcdayofyear:PFe,utcquarter:gFe,utcweek:DFe,version:Ran,visitArray:$y,week:RFe,writeConfig:cA,zero:Yy,zoomLinear:Vre,zoomLog:Hre,zoomPow:EF,zoomSymlog:qre},Symbol.toStringTag,{value:"Module"}));function Pan(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Dan={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Oan={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},$an={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Man=Array.prototype.slice,Tb=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Man.call(t,1))},Lan=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Fan={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Lan,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Tb("join",arguments)},indexof:function(){return Tb("indexOf",arguments)},lastindexof:function(){return Tb("lastIndexOf",arguments)},slice:function(){return Tb("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Tb("substring",arguments,String)},split:function(){return Tb("split",arguments,String)},replace:function(){return Tb("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const jan=["view","item","group","xy","x","y"],aK=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&aK.add(setImmediate);const Ban={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Dan[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),aK.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Fan[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Oan[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>$an[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,aK.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function j2(e,t,n,r,i,s){const o=a=>Ban[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,jan.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var Uan={operator(e,t){const n=t.ast,r=e.functions;return i=>j2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>j2(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>j2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return j2(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=j2(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&Pan(o,r,s),l}}};const zan="vega-lite",Van='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Han="5.18.1",qan=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Wan="https://vega.github.io/vega-lite/",Gan="Vega-Lite is a concise high-level language for interactive visualization.",Yan=["vega","chart","visualization"],Kan="build/vega-lite.js",Xan="build/vega-lite.min.js",Qan="build/vega-lite.min.js",Jan="build/src/index",Zan="build/src/index.d.ts",eun={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},tun=["bin","build","src","vega-lite*","tsconfig.json"],nun={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},run={type:"git",url:"https://github.com/vega/vega-lite.git"},iun="BSD-3-Clause",sun={url:"https://github.com/vega/vega-lite/issues"},oun={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},aun={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},uun={vega:"^5.24.0"},lun={node:">=18"},cun="yarn@1.22.19",fun={name:zan,author:Van,version:Han,collaborators:qan,homepage:Wan,description:Gan,keywords:Yan,main:Kan,unpkg:Xan,jsdelivr:Qan,module:Jan,types:Zan,bin:eun,files:tun,scripts:nun,repository:run,license:iun,bugs:sun,devDependencies:oun,dependencies:aun,peerDependencies:uun,engines:lun,packageManager:cun};function Goe(e){return!!e.or}function Yoe(e){return!!e.and}function Koe(e){return!!e.not}function TM(e,t){if(Koe(e))TM(e.not,t);else if(Yoe(e))for(const n of e.and)TM(n,t);else if(Goe(e))for(const n of e.or)TM(n,t);else t(e)}function MS(e,t){return Koe(e)?{not:MS(e.not,t)}:Yoe(e)?{and:e.and.map(n=>MS(n,t))}:Goe(e)?{or:e.or.map(n=>MS(n,t))}:t(e)}const An=structuredClone;function MBe(e){throw new Error(e)}function KT(e,t){const n={};for(const r of t)sn(e,r)&&(n[r]=e[r]);return n}function ic(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ni(e)).join(",")})`};function xr(e){if(Gr(e))return e;const t=Dt(e)?e:Ni(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function uK(e){return e===!1||e===null}function Er(e,t){return e.includes(t)}function Ew(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Xoe(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function LBe(e,...t){for(const n of t)dun(e,n??{});return e}function dun(e,t){for(const n of dt(t))cA(e,n,t[n],!0)}function Bp(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function hun(e,t){const n=dt(e),r=dt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function FBe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Qoe(e,t){for(const n of e)if(t.has(n))return!0;return!1}function lK(e){const t=new Set;for(const n of e){const i=Om(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Joe(e,t){return e===void 0||t===void 0?!0:Qoe(lK(e),lK(t))}function Ri(e){return dt(e).length===0}const dt=Object.keys,Ba=Object.values,m1=Object.entries;function xN(e){return e===!0||e===!1}function _s(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Mk(e,t){return Koe(e)?`!(${Mk(e.not,t)})`:Yoe(e)?`(${e.and.map(n=>Mk(n,t)).join(") && (")})`:Goe(e)?`(${e.or.map(n=>Mk(n,t)).join(") || (")})`:t(e)}function XF(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&XF(e[n],t)&&delete e[n],Ri(e)}function pD(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Zoe(e,t="datum"){const n=Om(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Et).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function jBe(e,t="datum"){return`${t}[${Et(Om(e).join("."))}]`}function pun(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function fd(e){return`${Om(e).map(pun).join("\\.")}`}function Sw(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function _A(e){return`${Om(e).join(".")}`}function XT(e){return e?Om(e).length:0}function io(...e){for(const t of e)if(t!==void 0)return t}let BBe=42;function UBe(e){const t=++BBe;return e?String(e)+t:t}function mun(){BBe=42}function zBe(e){return VBe(e)?e:`__${e}`}function VBe(e){return e.startsWith("__")}function EN(e){if(e!==void 0)return(e%360+360)%360}function rB(e){return Gr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const i_e=Object.getPrototypeOf(structuredClone({}));function zc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!zc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!zc(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==i_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==i_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!zc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ni(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Jg="row",Zg="column",iB="facet",ws="x",va="y",Yh="x2",Fm="y2",K1="xOffset",wA="yOffset",Kh="radius",J0="radius2",xd="theta",Z0="theta2",Xh="latitude",Qh="longitude",Jh="latitude2",dd="longitude2",mc="color",jm="fill",Bm="stroke",gc="shape",ey="size",dx="angle",ty="opacity",X1="fillOpacity",Q1="strokeOpacity",J1="strokeWidth",Z1="strokeDash",mD="text",QT="order",gD="detail",sB="key",Tw="tooltip",oB="href",aB="url",uB="description",gun={x:1,y:1,x2:1,y2:1},HBe={theta:1,theta2:1,radius:1,radius2:1};function qBe(e){return e in HBe}const eae={longitude:1,longitude2:1,latitude:1,latitude2:1};function WBe(e){switch(e){case Xh:return"y";case Jh:return"y2";case Qh:return"x";case dd:return"x2"}}function GBe(e){return e in eae}const yun=dt(eae),tae={...gun,...HBe,...eae,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function LS(e){return e===mc||e===jm||e===Bm}const YBe={row:1,column:1,facet:1},Kf=dt(YBe),nae={...tae,...YBe},vun=dt(nae),{order:J1n,detail:Z1n,tooltip:ebn,...bun}=nae,{row:tbn,column:nbn,facet:rbn,..._un}=bun;function wun(e){return!!_un[e]}function KBe(e){return!!nae[e]}const xun=[Yh,Fm,Jh,dd,Z0,J0];function XBe(e){return hx(e)!==e}function hx(e){switch(e){case Yh:return ws;case Fm:return va;case Jh:return Xh;case dd:return Qh;case Z0:return xd;case J0:return Kh}return e}function g1(e){if(qBe(e))switch(e){case xd:return"startAngle";case Z0:return"endAngle";case Kh:return"outerRadius";case J0:return"innerRadius"}return e}function Um(e){switch(e){case ws:return Yh;case va:return Fm;case Xh:return Jh;case Qh:return dd;case xd:return Z0;case Kh:return J0}}function yc(e){switch(e){case ws:case Yh:return"width";case va:case Fm:return"height"}}function QBe(e){switch(e){case ws:return"xOffset";case va:return"yOffset";case Yh:return"x2Offset";case Fm:return"y2Offset";case xd:return"thetaOffset";case Kh:return"radiusOffset";case Z0:return"theta2Offset";case J0:return"radius2Offset"}}function rae(e){switch(e){case ws:return"xOffset";case va:return"yOffset"}}function Eun(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Sun=dt(tae),{x:ibn,y:sbn,x2:obn,y2:abn,xOffset:ubn,yOffset:lbn,latitude:cbn,longitude:fbn,latitude2:dbn,longitude2:hbn,theta:pbn,theta2:mbn,radius:gbn,radius2:ybn,...iae}=tae,Tun=dt(iae),sae={x:1,y:1},zm=dt(sae);function so(e){return e in sae}const oae={theta:1,radius:1},Cun=dt(oae);function lB(e){return e==="width"?ws:va}const JBe={xOffset:1,yOffset:1};function yD(e){return e in JBe}const{text:vbn,tooltip:bbn,href:_bn,url:wbn,description:xbn,detail:Ebn,key:Sbn,order:Tbn,...ZBe}=iae,Aun=dt(ZBe);function Iun(e){return!!iae[e]}function kun(e){switch(e){case mc:case jm:case Bm:case ey:case gc:case ty:case J1:case Z1:return!0;case X1:case Q1:case dx:return!1}}const e9e={...sae,...oae,...JBe,...ZBe},cB=dt(e9e);function ny(e){return!!e9e[e]}function Run(e,t){return Pun(e)[t]}const t9e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Cbn,...Nun}=t9e;function Pun(e){switch(e){case mc:case jm:case Bm:case uB:case gD:case sB:case Tw:case oB:case QT:case ty:case X1:case Q1:case J1:case iB:case Jg:case Zg:return t9e;case ws:case va:case K1:case wA:case Xh:case Qh:return Nun;case Yh:case Fm:case Jh:case dd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ey:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Z1:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case gc:return{point:"always",geoshape:"always"};case mD:return{text:"always"};case dx:return{point:"always",square:"always",text:"always"};case aB:return{image:"always"};case xd:return{text:"always",arc:"always"};case Kh:return{text:"always",arc:"always"};case Z0:case J0:return{arc:"always"}}}function SV(e){switch(e){case ws:case va:case xd:case Kh:case K1:case wA:case ey:case dx:case J1:case ty:case X1:case Q1:case Yh:case Fm:case Z0:case J0:return;case iB:case Jg:case Zg:case gc:case Z1:case mD:case Tw:case oB:case aB:case uB:return"discrete";case mc:case jm:case Bm:return"flexible";case Xh:case Qh:case Jh:case dd:case gD:case sB:case QT:return}}const Dun={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Oun={count:1,min:1,max:1};function R0(e){return!!e&&!!e.argmin}function eb(e){return!!e&&!!e.argmax}function aae(e){return Dt(e)&&!!Dun[e]}const $un=new Set(["count","valid","missing","distinct"]);function n9e(e){return Dt(e)&&$un.has(e)}function Mun(e){return Dt(e)&&Er(["min","max"],e)}const Lun=new Set(["count","sum","distinct","valid","missing"]),Fun=new Set(["mean","average","median","q1","q3","min","max"]);function r9e(e){return W1(e)&&(e=xB(e,void 0)),"bin"+dt(e).map(t=>fB(e[t])?_s(`_${t}_${m1(e[t])}`):_s(`_${t}_${e[t]}`)).join("")}function Gi(e){return e===!0||px(e)&&!e.binned}function Ra(e){return e==="binned"||px(e)&&e.binned===!0}function px(e){return Ot(e)}function fB(e){return e==null?void 0:e.param}function s_e(e){switch(e){case Jg:case Zg:case ey:case mc:case jm:case Bm:case J1:case ty:case X1:case Q1:case gc:return 6;case Z1:return 4;default:return 10}}function vD(e){return!!(e!=null&&e.expr)}function Bl(e){const t=dt(e||{}),n={};for(const r of t)n[r]=Mc(e[r]);return n}function i9e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=KT(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:w,nonMarkTitleProperties:y,subtitle:b}}function Fy(e){return Dt(e)||Je(e)&&Dt(e[0])}function Qt(e){return!!(e!=null&&e.signal)}function tb(e){return!!e.step}function jun(e){return Je(e)?!1:"fields"in e&&!("data"in e)}function Bun(e){return Je(e)?!1:"fields"in e&&"data"in e}function Ug(e){return Je(e)?!1:"field"in e&&"data"in e}const Uun={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},zun=dt(Uun),Vun={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},cK=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function s9e(e){const t=Je(e.condition)?e.condition.map(o_e):o_e(e.condition);return{...Mc(e),condition:t}}function Mc(e){if(vD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function o_e(e){if(vD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function rs(e){if(vD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Qt(e)?e:e!==void 0?{value:e}:void 0}function Hun(e){return Qt(e)?e.signal:Et(e)}function a_e(e){return Qt(e)?e.signal:Et(e.value)}function hh(e){return Qt(e)?e.signal:e==null?null:Et(e)}function qun(e,t,n){for(const r of n){const i=N0(r,t.markDef,t.config);i!==void 0&&(e[r]=rs(i))}return e}function o9e(e){return[].concat(e.type,e.style??[])}function fi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:N0(e,t,n,r)}function N0(e,t,n,{vgChannel:r}={}){return io(r?QF(e,t,n.style):void 0,QF(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function QF(e,t,n){return a9e(e,o9e(t),n)}function a9e(e,t,n){t=Pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function u9e(e,t){return Pt(e).reduce((n,r)=>(n.field.push(Tt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function l9e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(zc(i,r))return;n.push(r)}),n}function c9e(e,t){return zc(e,t)||!t?e:e?[...Pt(e),...Pt(t)].join(", "):t}function f9e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Fy(n)||Qt(n))&&(Fy(r)||Qt(r)))return{explicit:e.explicit,value:c9e(n,r)};if(Fy(n)||Qt(n))return{explicit:e.explicit,value:n};if(Fy(r)||Qt(r))return{explicit:e.explicit,value:r};if(!Fy(n)&&!Qt(n)&&!Fy(r)&&!Qt(r))return{explicit:e.explicit,value:l9e(n,r)};throw new Error("It should never reach here")}function uae(e){return`Invalid specification ${Ni(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Wun='Autosize "fit" only works for single views and layered views.';function u_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function l_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function c_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${yc(e)}.`:'Dropping "fit" because spec has discrete size.'}function lae(e){return`Unknown field for ${e}. Cannot calculate view size.`}function f_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Gun(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Yun(e){return`The "nearest" transform is not supported for ${e} marks.`}function d9e(e){return`Selection not supported for ${e} yet.`}function Kun(e){return`Cannot find a selection named "${e}".`}const Xun="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Qun="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Jun="Legend bindings are only supported for selections over an individual field or encoding channel.";function Zun(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function eln(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const tln="The same selection must be used to override scale domains in a layered view.",nln='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function rln(e){return`Unknown repeated value "${e}".`}function d_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const iln="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function sln(e){return`Unrecognized parse "${e}".`}function h_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const oln="Attempt to add the same child twice.";function aln(e){return`Ignoring an invalid transform: ${Ni(e)}.`}const uln='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function p_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function lln(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ni(t)} is overridden by a child projection ${Ni(n)}.`}const cln="Arc marks uses theta channel rather than angle, replacing angle with theta.";function fln(e){return`${e}Offset dropped because ${e} is continuous`}function dln(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ni(n)}}.`}function h9e(e){return`Invalid field type "${e}".`}function hln(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function pln(e){return`Invalid aggregation operator "${e}".`}function p9e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function mln(e){return`Position range does not support relative band size for ${e}.`}function fK(e,t){return`Dropping ${Ni(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const gln="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function dB(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function yln(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function vln(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function bln(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function _ln(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function TV(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function wln(e){return`The ${e} for range marks cannot be an expression`}function xln(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Eln(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Sln(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Tln(e){return`Cannot use the relative band size with ${e} scale.`}function Cln(e){return`Using unaggregated domain with raw field has no effect (${Ni(e)}).`}function Aln(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Iln(e){return`Unaggregated domain is currently unsupported for log scale (${Ni(e)}).`}function kln(e){return`Cannot apply size to non-oriented mark "${e}".`}function Rln(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Nln(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function m9e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function g9e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Pln(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ni(n)} and ${Ni(r)}). Using ${Ni(n)}.`}function Dln(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ni(n)} and ${Ni(r)}). Using the union of the two domains.`}function Oln(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function $ln(e){return`Dropping sort property ${Ni(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const m_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Mln="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Lln="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Fln="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function jln(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Bln(e){return`Stack is applied to a non-linear scale (${e}).`}function Uln(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function JF(e,t){return`Invalid ${e}: ${Ni(t)}.`}function zln(e){return`Dropping day from datetime ${Ni(e)} as day cannot be combined with other units.`}function Vln(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Hln(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function qln(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function g_e(e){return`1D error band does not support ${e}.`}function y9e(e){return`Channel ${e} is required for "binned" bin.`}function Wln(e){return`Channel ${e} should not be used with "binned" bin.`}function Gln(e){return`Domain for ${e} is required for threshold scale.`}const v9e=zre(Ure);let JT=v9e;function Yln(e){return JT=e,JT}function Kln(){return JT=v9e,JT}function mt(...e){JT.warn(...e)}function Xln(...e){JT.debug(...e)}function mx(e){if(e&&Ot(e)){for(const t of fae)if(t in e)return!0}return!1}const b9e=["january","february","march","april","may","june","july","august","september","october","november","december"],Qln=b9e.map(e=>e.substr(0,3)),_9e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Jln=_9e.map(e=>e.substr(0,3));function Zln(e){if(rB(e)&&(e=+e),Gr(e))return e>4&&mt(JF("quarter",e)),e-1;throw new Error(JF("quarter",e))}function ecn(e){if(rB(e)&&(e=+e),Gr(e))return e-1;{const t=e.toLowerCase(),n=b9e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Qln.indexOf(r);if(i!==-1)return i;throw new Error(JF("month",e))}}function tcn(e){if(rB(e)&&(e=+e),Gr(e))return e%7;{const t=e.toLowerCase(),n=_9e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Jln.indexOf(r);if(i!==-1)return i;throw new Error(JF("day",e))}}function cae(e,t){const n=[];if(t&&e.day!==void 0&&dt(e).length>1&&(mt(zln(e)),e=An(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?ecn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Zln(e.quarter):e.quarter;n.push(Gr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?tcn(e.day):e.day;n.push(Gr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Cw(e){const n=cae(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ncn(e){const n=cae(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function rcn(e){const t=cae(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const w9e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},fae=dt(w9e);function icn(e){return!!w9e[e]}function gx(e){return Ot(e)?e.binned:x9e(e)}function x9e(e){return e&&e.startsWith("binned")}function dae(e){return e.startsWith("utc")}function scn(e){return e.substring(3)}const ocn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function hB(e){return fae.filter(t=>S9e(e,t))}function E9e(e){const t=hB(e);return t[t.length-1]}function S9e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function acn(e,t,{end:n}={end:!1}){const r=Zoe(t),i=dae(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of fae)S9e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),ncn(a)}function T9e(e){if(!e)return;const t=hB(e);return`timeUnitSpecifier(${Ni(t)}, ${Ni(ocn)})`}function ucn(e,t,n){if(!e)return;const r=T9e(e);return`${n||dae(e)?"utc":"time"}Format(${t}, ${r})`}function pa(e){if(!e)return;let t;return Dt(e)?x9e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),dae(t.unit)&&(t.utc=!0,t.unit=scn(t.unit)),t}function lcn(e){const{utc:t,...n}=pa(e);return n.unit?(t?"utc":"")+dt(n).map(r=>_s(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+dt(n).map(r=>_s(`_${r}_${n[r]}`)).join("")}function C9e(e,t=n=>n){const n=pa(e),r=E9e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=A9e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Cw(a))} - ${t(Cw(i))}`}}const ccn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function fcn(e){return!!ccn[e]}function A9e(e,t=1){if(fcn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function dcn(e){return e==null?void 0:e.param}function hae(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function pae(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function mae(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function gae(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function yae(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function vae(e){if(e!=null&&e.field){if(Je(e.range)&&e.range.length===2)return!0;if(Qt(e.range))return!0}return!1}function bae(e){return!!(e!=null&&e.field)&&(Je(e.oneOf)||Je(e.in))}function hcn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function I9e(e){return bae(e)||hae(e)||vae(e)||pae(e)||gae(e)||mae(e)||yae(e)}function up(e,t){return EB(e,{timeUnit:t,wrapTime:!0})}function pcn(e,t){return e.map(n=>up(n,t))}function k9e(e,t=!0){const{field:n}=e,r=pa(e.timeUnit),{unit:i,binned:s}=r||{},o=Tt(e,{expr:"datum"}),a=i?`time(${s?o:acn(i,n)})`:o;if(hae(e))return`${a}===${up(e.equal,i)}`;if(pae(e)){const u=e.lt;return`${a}<${up(u,i)}`}else if(gae(e)){const u=e.gt;return`${a}>${up(u,i)}`}else if(mae(e)){const u=e.lte;return`${a}<=${up(u,i)}`}else if(yae(e)){const u=e.gte;return`${a}>=${up(u,i)}`}else{if(bae(e))return`indexof([${pcn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(hcn(e))return _ae(a,e.valid);if(vae(e)){const{range:u}=e,l=Qt(u)?{signal:`${u.signal}[0]`}:u[0],c=Qt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+up(l,i)+", "+up(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${up(l,i)}`),c!==null&&f.push(`${a} <= ${up(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ni(e)}`)}function _ae(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function mcn(e){return I9e(e)&&e.timeUnit?{...e,timeUnit:pa(e.timeUnit)}:e}const bD={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function gcn(e){return e==="quantitative"||e==="temporal"}function R9e(e){return e==="ordinal"||e==="nominal"}const Aw=bD.quantitative,wae=bD.ordinal,ZT=bD.temporal,xae=bD.nominal,xA=bD.geojson;function ycn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Aw:return"quantitative";case"t":case ZT:return"temporal";case"o":case wae:return"ordinal";case"n":case xae:return"nominal";case xA:return"geojson"}}const sc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},dK={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function vcn(e,t){const n=dK[e],r=dK[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const bcn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function y_e(e){return bcn[e]}const N9e=new Set(["linear","log","pow","sqrt","symlog"]),P9e=new Set([...N9e,"time","utc"]);function D9e(e){return N9e.has(e)}const O9e=new Set(["quantile","quantize","threshold"]),_cn=new Set([...P9e,...O9e,"sequential","identity"]),wcn=new Set(["ordinal","bin-ordinal","point","band"]);function ma(e){return wcn.has(e)}function lf(e){return _cn.has(e)}function ph(e){return P9e.has(e)}function eC(e){return O9e.has(e)}const xcn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Ecn(e){return!Dt(e)&&!!e.name}function $9e(e){return e==null?void 0:e.param}function Scn(e){return e==null?void 0:e.unionWith}function Tcn(e){return Ot(e)&&"field"in e}const Ccn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Abn,domain:Ibn,range:kbn,rangeMax:Rbn,rangeMin:Nbn,scheme:Pbn,...Acn}=Ccn,Icn=dt(Acn);function hK(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ph(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ph(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ph(e);case"nice":return ph(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return lf(e)&&!Er(["log","time","utc","threshold","quantile"],e)}}function M9e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return LS(e)?void 0:Sln(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function kcn(e,t){return Er([wae,xae],t)?e===void 0||ma(e):t===ZT?Er([sc.TIME,sc.UTC,void 0],e):t===Aw?D9e(e)||eC(e)||e===void 0:!0}function Rcn(e,t,n=!1){if(!ny(e))return!1;switch(e){case ws:case va:case K1:case wA:case xd:case Kh:return ph(t)||t==="band"?!0:t==="point"?!n:!1;case ey:case J1:case ty:case X1:case Q1:case dx:return ph(t)||eC(t)||Er(["band","point","ordinal"],t);case mc:case jm:case Bm:return t!=="band";case Z1:case gc:return t==="ordinal"||eC(t)}}function Eae(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Tae(e);return gt(n)&&!n9e(n.aggregate)&&i&&ph(i.get("type"))?Ncn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Ncn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return fi("invalid",n,i)===null?[Pcn(e,t),r]:r}function Pcn(e,t){const n=Sae(e,!0),i=hx(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Sae(e,t=!0){return _ae(Dt(e)?e:Tt(e,{expr:"datum"}),!t)}function Dcn(e){const{datum:t}=e;return mx(t)?Cw(t):`${Ni(t)}`}function j_(e,t,n,r){const i={};if(t&&(i.scale=t),Vm(e)){const{datum:s}=e;mx(s)?i.signal=Cw(s):Qt(s)?i.signal=s.signal:vD(s)?i.signal=s.expr:i.value=s}else i.field=Tt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function ZF({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Qt(o)&&0<o&&o<1?"datum":void 0,u=Tt(t,{expr:a,suffix:i}),l=n!==void 0?Tt(n,{expr:a}):Tt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Qt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Ocn({scaleName:e,fieldDef:t}){const n=Tt(t,{expr:"datum"}),r=Tt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Tae({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Mn(t)){const f=o==null?void 0:o.get("type");if(hl(t)){c??(c=y1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Gi(d)||c&&h&&p===ZT)return a!=null&&a.impute?j_(t,s,{binSuffix:"mid"},{offset:u}):c&&!ma(f)?ZF({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):j_(t,s,ED(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ra(d)){if(gt(n))return ZF({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});mt(y9e(e===ws?Yh:Fm))}}return j_(t,s,ma(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Mh(t)){const f=t.value,d=u?{offset:u}:{};return{...Lk(e,f),...d}}}return Gn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Lk(e,t){return Er(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Er(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:rs(t)}function Iw(e){return e&&e!=="number"&&e!=="time"}function L9e(e,t,n){return`${e}(${t}${n?`, ${Ni(n)}`:""})`}const $cn="  ";function Cae({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Iw(n))return mh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=F9e(e,r,i),a=tC(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return mh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return mh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&gt(e)&&e.timeUnit===void 0)return mh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(rC(e)){const c=Lcn({field:o,timeUnit:gt(e)?(u=pa(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:vx(e)&&((l=e.scale)==null?void 0:l.type)===sc.UTC});return c?{signal:c}:void 0}if(t=pK({type:a,specifiedFormat:t,config:s,normalizeStack:i}),gt(e)&&Gi(e.bin)){const c=Tt(e,{expr:r,binSuffix:"end"});return{signal:_D(o,c,t,n,s)}}else return t||tC(e)==="quantitative"?{signal:`${U9e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function F9e(e,t,n){return gt(e)?n?`${Tt(e,{expr:t,suffix:"end"})}-${Tt(e,{expr:t,suffix:"start"})}`:Tt(e,{expr:t}):Dcn(e)}function mh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=F9e(e,r,i)),o!=="datum.value"&&gt(e)&&Gi(e.bin)){const a=Tt(e,{expr:r,binSuffix:"end"});return{signal:_D(o,a,t,n,s)}}return{signal:L9e(n,o,t)}}function j9e(e,t,n,r,i,s){var o;if(!(Dt(r)&&Iw(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&tC(e)==="quantitative"&&(i.normalizedNumberFormatType&&nC(e)&&e.stack==="normalize"||i.numberFormatType))){if(nC(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return pK({type:"quantitative",config:i,normalizeStack:!0});if(rC(e)){const a=gt(e)?(o=pa(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Mcn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return pK({type:t,specifiedFormat:n,config:i})}}function B9e(e,t,n){var r;if(e&&(Qt(e)||e==="number"||e==="time"))return e;if(rC(t)&&n!=="time"&&n!=="utc")return gt(t)&&((r=pa(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function pK({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Dt(t))return t;if(e===Aw)return r?n.normalizedNumberFormat:n.numberFormat}function Mcn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:T9e(t)}:r?void 0:n.timeFormat)}function U9e(e,t){return`format(${e}, "${t||""}")`}function v_e(e,t,n,r){return Iw(n)?L9e(n,e,t):U9e(e,(Dt(t)?t:void 0)??r.numberFormat)}function _D(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return _D(e,t,i.numberFormat,i.numberFormatType,i);const s=v_e(e,n,r,i),o=v_e(t,n,r,i);return`${_ae(e,!1)} ? "null" : ${s} + "${$cn}" + ${o}`}function Lcn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Dt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):ucn(t,e,s)}const bl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},z9e=bl.arc,pB=bl.area,mB=bl.bar,Fcn=bl.image,gB=bl.line,yB=bl.point,jcn=bl.rect,e4=bl.rule,V9e=bl.text,Aae=bl.tick,Bcn=bl.trail,Iae=bl.circle,kae=bl.square,H9e=bl.geoshape;function yx(e){return["line","area","trail"].includes(e)}function SN(e){return["rect","bar","image","arc"].includes(e)}const Ucn=new Set(dt(bl));function _m(e){return e.type}const zcn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Vcn=["fill","fillOpacity"],Hcn=[...zcn,...Vcn],qcn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},b_e=dt(qcn),Wcn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Gcn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Ycn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},q9e=dt(Ycn);function kw(e){return e&&e.band!=null}const Kcn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},W9e=5,Xcn={binSpacing:1,continuousBandSize:W9e,minBandSize:.25,timeUnitBandPosition:.5},Qcn={binSpacing:0,continuousBandSize:W9e,minBandSize:.25,timeUnitBandPosition:.5},Jcn={thickness:1};function Zcn(e){return _m(e)?e.type:e}const vB="min",efn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function __e(e){return e in efn}function G9e(e){return!!(e!=null&&e.encoding)}function tm(e){return e&&(e.op==="count"||!!e.field)}function Y9e(e){return e&&Je(e)}function wD(e){return"row"in e||"column"in e}function Rae(e){return!!e&&"header"in e}function bB(e){return"facet"in e}function tfn(e){return e.param}function nfn(e){return e&&!Dt(e)&&"repeat"in e}function w_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Nae(e){return"sort"in e}function y1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Mn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(gt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return N0("timeUnitBandPosition",n,r);if(Gi(s))return .5}}function K9e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=yc(e),u=fi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(gt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:N0("timeUnitBandSize",r,i)};if(Gi(h)&&!ma(s))return{band:1}}if(SN(r.type))return s?ma(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function X9e(e,t,n,r){return Gi(e.bin)||e.timeUnit&&hl(e)&&e.type==="temporal"?y1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Q9e(e){return e&&!!e.sort&&!e.field}function _B(e){return e&&"condition"in e}function wB(e){const t=e==null?void 0:e.condition;return!!t&&!Je(t)&&gt(t)}function xD(e){const t=e==null?void 0:e.condition;return!!t&&!Je(t)&&Mn(t)}function rfn(e){const t=e==null?void 0:e.condition;return!!t&&(Je(t)||Mh(t))}function gt(e){return e&&(!!e.field||e.aggregate==="count")}function tC(e){return e==null?void 0:e.type}function Vm(e){return e&&"datum"in e}function lv(e){return hl(e)&&!n4(e)||t4(e)}function x_e(e){return hl(e)&&e.type==="quantitative"&&!e.bin||t4(e)}function t4(e){return Vm(e)&&Gr(e.datum)}function Mn(e){return gt(e)||Vm(e)}function hl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Mh(e){return e&&"value"in e&&"value"in e}function vx(e){return e&&("scale"in e||"sort"in e)}function nC(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function J9e(e){return e&&"legend"in e}function Z9e(e){return e&&("format"in e||"formatType"in e)}function ifn(e){return ic(e,["legend","axis","header","scale"])}function sfn(e){return"op"in e}function Tt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(afn(e))n=zBe("count");else{let o;if(!t.nofn)if(sfn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Gi(a)?(o=r9e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?eb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):R0(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!gx(l)&&(o=lcn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?_A(n):t.expr?jBe(n,t.expr)+s:fd(n)+s}function n4(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gt(e)&&!!e.bin;case"temporal":return!1}throw new Error(h9e(e.type))}function ofn(e){var t;return vx(e)&&eC((t=e.scale)==null?void 0:t.type)}function afn(e){return e.aggregate==="count"}function ufn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Gi(r))return`${n} (binned)`;if(i&&!gx(i)){const a=(o=pa(i))==null?void 0:o.unit;if(a)return`${n} (${hB(a).join("-")})`}else if(s)return eb(s)?`${n} for max ${s.argmax}`:R0(s)?`${n} for min ${s.argmin}`:`${pD(s)} of ${n}`;return n}function lfn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(eb(t))return`${i} for argmax(${t.argmax})`;if(R0(t))return`${i} for argmin(${t.argmin})`;const s=r&&!gx(r)?pa(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Gi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const eUe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return lfn(e);default:return ufn(e,t)}};let tUe=eUe;function nUe(e){tUe=e}function cfn(){nUe(eUe)}function FS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Pae(e))==null?void 0:a.title;if(!gt(e))return i??e.title;const s=e,o=r?Dae(s,t):void 0;return n?io(i,s.title,o):i??s.title??o}function Pae(e){if(nC(e)&&e.axis)return e.axis;if(J9e(e)&&e.legend)return e.legend;if(Rae(e)&&e.header)return e.header}function Dae(e,t){return tUe(e,t)}function r4(e){if(Z9e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Pae(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function ffn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Nae(e)&&Je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!eb(n)&&!R0(n))return"quantitative";if(vx(e)&&((s=e.scale)!=null&&s.type))switch(dK[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function wm(e){if(gt(e))return e;if(wB(e))return e.condition}function Bo(e){if(Mn(e))return e;if(xD(e))return e.condition}function rUe(e,t,n,r={}){if(Dt(e)||Gr(e)||W1(e)){const i=Dt(e)?"string":Gr(e)?"number":"boolean";return mt(dln(t,i,e)),{value:e}}return Mn(e)?i4(e,t,n,r):xD(e)?{...e,condition:i4(e.condition,t,n,r)}:e}function i4(e,t,n,r){if(Z9e(e)){const{format:i,formatType:s,...o}=e;if(Iw(s)&&!n.customFormatTypes)return mt(p_e(t)),i4(o,t,n,r)}else{const i=nC(e)?"axis":J9e(e)?"legend":Rae(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Iw(o)&&!n.customFormatTypes)return mt(p_e(t)),i4({...e,[i]:a},t,n,r)}}return gt(e)?Oae(e,t,r):dfn(e)}function dfn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Gr(n)?"quantitative":Dt(n)?"nominal":mx(n)?"temporal":void 0,{...e,type:t}}function Oae(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!aae(r)&&!eb(r)&&!R0(r)&&(mt(pln(r)),delete a.aggregate),i&&(a.timeUnit=pa(i)),o&&(a.field=`${o}`),Gi(s)&&(a.bin=xB(s,t)),Ra(s)&&!so(t)&&mt(Wln(t)),hl(a)){const{type:u}=a,l=ycn(u);u!==l&&(a.type=l),u!=="quantitative"&&n9e(r)&&(mt(hln(u,r)),a.type="quantitative")}else if(!XBe(t)){const u=ffn(a,t);a.type=u}if(hl(a)){const{compatible:u,warning:l}=hfn(a,t)||{};u===!1&&mt(l)}if(Nae(a)&&Dt(a.sort)){const{sort:u}=a;if(__e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&__e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Rae(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function xB(e,t){return W1(e)?{maxbins:s_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:s_e(t)}:e}const lE={compatible:!0};function hfn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Jg:case Zg:case iB:return n4(e)?lE:{compatible:!1,warning:vln(t)};case ws:case va:case K1:case wA:case mc:case jm:case Bm:case mD:case gD:case sB:case Tw:case oB:case aB:case dx:case xd:case Kh:case uB:return lE;case Qh:case dd:case Xh:case Jh:return n!==Aw?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:lE;case ty:case X1:case Q1:case J1:case ey:case Z0:case J0:case Yh:case Fm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:lE;case gc:case Z1:return!n4(e)&&!ofn(e)?{compatible:!1,warning:bln(t)}:lE;case QT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:lE}}function rC(e){const{formatType:t}=r4(e);return t==="time"||!t&&pfn(e)}function pfn(e){return e&&(e.type==="temporal"||gt(e)&&!!e.timeUnit)}function EB(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=pa(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return vD(e)?a=e.expr:Qt(e)?a=e.signal:mx(e)?(o=!0,a=Cw(e)):(Dt(e)||Gr(e))&&o&&(a=`datetime(${Ni(e)})`,icn(s)&&(Gr(e)&&e<1e4||Dt(e)&&isNaN(Date.parse(e)))&&(a=Cw({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ni(e)}function iUe(e,t){const{type:n}=e;return t.map(r=>{const i=gt(e)&&!gx(e.timeUnit)?e.timeUnit:void 0,s=EB(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function ED(e,t){return Gi(e.bin)?ny(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const E_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function SD(e){return e==null?void 0:e.condition}const sUe=["domain","grid","labels","ticks","title"],mfn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},oUe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},gfn={...oUe,style:1,labelExpr:1,encoding:1};function S_e(e){return!!gfn[e]}const yfn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},aUe=dt(yfn);function ry(e){return"mark"in e}class SB{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ry(t)?Zcn(t.mark)===this.name:!1}}function B_(e,t){const n=e&&e[t];return n?Je(n)?Ew(n,r=>!!r.field):gt(n)||wB(n):!1}function uUe(e,t){const n=e&&e[t];return n?Je(n)?Ew(n,r=>!!r.field):gt(n)||Vm(n)||xD(n):!1}function lUe(e,t){if(so(t)){const n=e[t];if((gt(n)||Vm(n))&&(R9e(n.type)||gt(n)&&n.timeUnit)){const r=rae(t);return uUe(e,r)}}return!1}function $ae(e){return Ew(vun,t=>{if(B_(e,t)){const n=e[t];if(Je(n))return Ew(n,r=>!!r.aggregate);{const r=wm(n);return r&&!!r.aggregate}}return!1})}function cUe(e,t){const n=[],r=[],i=[],s=[],o={};return Mae(e,(a,u)=>{if(gt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Pae(a),m=p==null?void 0:p.title;let g=Tt(a,{forAs:!0});const y={...m?[]:{title:FS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(eb(c)?(b="argmax",g=Tt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):R0(c)?(b="argmin",g=Tt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:g};l&&(w.field=l),s.push(w)}}else if(n.push(g),hl(a)&&Gi(f)){if(r.push({bin:f,field:l,as:g}),n.push(Tt(a,{binSuffix:"end"})),ED(a,u)&&n.push(Tt(a,{binSuffix:"range"})),so(u)){const b={field:`${g}_end`};o[`${u}2`]=b}y.bin="binned",XBe(u)||(y.type=Aw)}else if(d&&!gx(d)){i.push({timeUnit:d,field:l,as:g});const b=hl(a)&&a.type!==ZT&&"time";b&&(u===mD||u===Tw?y.formatType=b:Iun(u)?y.legend={formatType:b,...y.legend}:so(u)&&(y.axis={formatType:b,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function vfn(e,t,n){const r=Run(t,n);if(r){if(r==="binned"){const i=e[t===Yh?ws:va];return!!(gt(i)&&gt(e[t])&&Ra(i.bin))}}else return!1;return!0}function bfn(e,t,n,r){const i={};for(const s of dt(e))KBe(s)||mt(yln(s));for(let s of Sun){if(!e[s])continue;const o=e[s];if(yD(s)){const a=Eun(s),u=i[a];if(gt(u)&&gcn(u.type)&&gt(o)&&!u.timeUnit){mt(fln(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(mt(cln),s=xd),!vfn(e,s,t)){mt(dB(s,t));continue}if(s===ey&&t==="line"){const a=wm(e[s]);if(a!=null&&a.aggregate){mt(gln);continue}}if(s===mc&&(n?"fill"in e:"stroke"in e)){mt(p9e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===gD||s===QT&&!Je(o)&&!Mh(o)||s===Tw&&Je(o)){if(o){if(s===QT){const a=e[s];if(Q9e(a)){i[s]=a;continue}}i[s]=Pt(o).reduce((a,u)=>(gt(u)?a.push(Oae(u,s)):mt(fK(u,s)),a),[])}}else{if(s===Tw&&o===null)i[s]=null;else if(!gt(o)&&!Vm(o)&&!Mh(o)&&!_B(o)&&!Qt(o)){mt(fK(o,s));continue}i[s]=rUe(o,s,r)}}return i}function TB(e,t){const n={};for(const r of dt(e)){const i=rUe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function _fn(e){const t=[];for(const n of dt(e))if(B_(e,n)){const r=e[n],i=Pt(r);for(const s of i)gt(s)?t.push(s):wB(s)&&t.push(s.condition)}return t}function Mae(e,t,n){if(e)for(const r of dt(e)){const i=e[r];if(Je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function wfn(e,t,n,r){return e?dt(e).reduce((i,s)=>{const o=e[s];return Je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function fUe(e,t){return dt(t).reduce((n,r)=>{switch(r){case ws:case va:case oB:case uB:case aB:case Yh:case Fm:case K1:case wA:case xd:case Z0:case Kh:case J0:case Xh:case Qh:case Jh:case dd:case mD:case gc:case dx:case Tw:return n;case QT:if(e==="line"||e==="trail")return n;case gD:case sB:{const i=t[r];if(Je(i)||gt(i))for(const s of Pt(i))s.aggregate||n.push(Tt(s,{}));return n}case ey:if(e==="trail")return n;case mc:case jm:case Bm:case ty:case X1:case Q1:case Z1:case J1:{const i=wm(t[r]);return i&&!i.aggregate&&n.push(Tt(i,{})),n}}},[])}function xfn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function mK(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Lae(t)}`:"";return{field:o+t.field,type:t.type,title:Qt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=_fn(n).map(ifn);return{tooltip:[...i,...Bp(s,xr)]}}function Lae(e){const{title:t,field:n}=e;return io(t,n)}function Fae(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Lae(n);return dUe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Dt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function dUe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},..._m(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...W1(e[t])?{}:e[t]}}]:[]}function hUe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:K3(s,n),continuousAxisChannelDef2:K3(o,n),continuousAxisChannelDefError:K3(a,n),continuousAxisChannelDefError2:K3(u,n),continuousAxis:i}}function K3(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&mt(qln(n,t)),r}else return e}function pUe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(_m(n)&&n.orient)return n.orient;if(lv(i)){if(lv(s)){const o=gt(i)&&i.aggregate,a=gt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return rC(s)&&!rC(i)?"horizontal":"vertical"}return"horizontal"}else{if(lv(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const s4="boxplot",Efn=["box","median","outliers","rule","ticks"],Sfn=new SB(s4,gUe);function mUe(e){return Gr(e)?"tukey":e}function gUe(e,{config:t}){e={...e,encoding:TB(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=_m(n)?n:{type:n};i&&mt(d9e("boxplot"));const u=a.extent??t.boxplot.extent,l=fi("size",a,t),c=a.invalid,f=mUe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:S,customTooltipWithoutAggregatedField:T}=Tfn(e,u,t),C=_A(m.field),{color:I,size:R,...P}=w,D=Be=>Fae(a,g,m,Be,t.boxplot),L=D(P),M=D(w),F=(Ot(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=D({...P,...R?{size:R}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...I||{value:F}}}}),B=mK([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),H={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},q=f==="min-max"?B:mK([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),Y=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...L({partName:"ticks",mark:H,positionPrefix:"lower_whisker",extraEncoding:q}),...L({partName:"ticks",mark:H,positionPrefix:"upper_whisker",extraEncoding:q})],$=[...f!=="tukey"?Y:[],...M({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:B}),...z({partName:"median",mark:{type:"tick",invalid:c,...Ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:B})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:$};const W=`datum["lower_box_${m.field}"]`,X=`datum["upper_box_${m.field}"]`,V=`(${X} - ${W})`,K=`${W} - ${u} * ${V}`,J=`${X} + ${u} * ${V}`,ue=`datum["${m.field}"]`,_e={joinaggregate:yUe(m.field),groupby:y},be={transform:[{filter:`(${K} <= ${ue}) && (${ue} <= ${J})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${C}`},{op:"max",field:m.field,as:`upper_whisker_${C}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${C}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${C}`},...b],groupby:y}],layer:Y},{tooltip:xe,...ke}=P,{scale:je,axis:Re}=m,ft=Lae(m),Ze=ic(Re,["title"]),It=dUe(a,"outliers",t.boxplot,{transform:[{filter:`(${ue} < ${K}) || (${ue} > ${J})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ft!==void 0?{title:ft}:{},...je!==void 0?{scale:je}:{},...Ri(Ze)?{}:{axis:Ze}},...ke,...I?{color:I}:{},...T?{tooltip:T}:{}}})[0];let bt;const Ae=[...d,...h,_e];return It?bt={transform:Ae,layer:[It,be]}:(bt=be,bt.transform.unshift(...Ae)),{...o,layer:[bt,{transform:p,layer:$}]}}function yUe(e){const t=_A(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Tfn(e,t,n){const r=pUe(e,s4),{continuousAxisChannelDef:i,continuousAxis:s}=hUe(e,r,s4),o=i.field,a=_A(o),u=mUe(t),l=[...yUe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=xfn(d),{bins:m,timeUnits:g,aggregate:y,groupby:b,encoding:w}=cUe(p,n),E=r==="vertical"?"horizontal":"vertical",S=r,T=[...m,...g,{aggregate:[...y,...l],groupby:b},...c];return{bins:m,timeUnits:g,transform:T,groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:S,customTooltipWithoutAggregatedField:h}}const jae="errorbar",Cfn=["ticks","rule"],Afn=new SB(jae,vUe);function vUe(e,{config:t}){e={...e,encoding:TB(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=bUe(e,jae,t);delete s.size;const c=Fae(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Ifn(e,t){const{encoding:n}=e;if(kfn(n))return{orient:pUe(e,t),inputType:"raw"};const r=Rfn(n),i=Nfn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Mn(a)&&Mn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Mn(a)){if(lv(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Mn(u)){if(lv(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Mn(u)&&!Mn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Mn(c)&&!Mn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Mn(a)&&Mn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Mn(a)){if(lv(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Mn(l)){if(lv(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function kfn(e){return(Mn(e.x)||Mn(e.y))&&!Mn(e.x2)&&!Mn(e.y2)&&!Mn(e.xError)&&!Mn(e.xError2)&&!Mn(e.yError)&&!Mn(e.yError2)}function Rfn(e){return Mn(e.x2)||Mn(e.y2)}function Nfn(e){return Mn(e.xError)||Mn(e.xError2)||Mn(e.yError)||Mn(e.yError2)}function bUe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=_m(r)?r:{type:r};s&&mt(d9e(t));const{orient:l,inputType:c}=Ifn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=hUe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:w}=Pfn(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:S,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:C,...I}=i,{bins:R,timeUnits:P,aggregate:D,groupby:L,encoding:M}=cUe(I,n),F=[...D,...g],z=c!=="raw"?[]:L,B=mK(b,f,M,w);return{transform:[...a.transform??[],...R,...P,...F.length===0?[]:[{aggregate:F,groupby:z}],...y],groupby:z,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function Pfn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&mt(Hln(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:pD(h)},{fieldPrefix:"upper_",titlePrefix:T_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:T_e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:FS({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:FS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:FS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&mt(Vln(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Sw(Sw(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function T_e(e,t,n){return`${pD(e)} ${n} ${t}`}const Bae="errorband",Dfn=["band","borders"],Ofn=new SB(Bae,_Ue);function _Ue(e,{config:t}){e={...e,encoding:TB(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=bUe(e,Bae,t),l=o,c=Fae(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?mt(g_e("interpolate")):l.tension&&mt(g_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const wUe={};function Uae(e,t,n){const r=new SB(e,t);wUe[e]={normalizer:r,parts:n}}function $fn(){return dt(wUe)}Uae(s4,gUe,Efn);Uae(jae,vUe,Cfn);Uae(Bae,_Ue,Dfn);const Mfn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],xUe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},EUe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Lfn=dt(xUe),Ffn=dt(EUe),jfn={header:1,headerRow:1,headerColumn:1,headerFacet:1},SUe=dt(jfn),TUe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Bfn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Ufn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Lh="_vgsid_",zfn={point:{on:"click",fields:[Lh],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function zae(e){return e==="legend"||!!(e!=null&&e.legend)}function CV(e){return zae(e)&&Ot(e)}function Vae(e){return!!(e!=null&&e.select)}function CUe(e){const t=[];for(const n of e||[]){if(Vae(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function Vfn(e){return CB(e)||qae(e)||Hae(e)}function Hae(e){return"concat"in e}function CB(e){return"vconcat"in e}function qae(e){return"hconcat"in e}function AUe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function xm(e){return Ot(e)&&e.step!==void 0}function C_e(e){return e.view||e.width||e.height}const A_e=20,Hfn={align:1,bounds:1,center:1,columns:1,spacing:1},qfn=dt(Hfn);function Wfn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(bB(e)&&!wD(e.facet)||Hae(e))&&(i.columns=o),CB(e)&&(i.columns=1);for(const a of qfn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Gr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function gK(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function o4(e,t){const n=a4(e,t);return xm(n)?n.step:IUe}function a4(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return io(n,{step:e.step})}const IUe=20,Gfn={continuousWidth:200,continuousHeight:200,step:IUe},Yfn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Gfn,mark:Gcn,arc:{},area:{},bar:Xcn,circle:{},geoshape:{},image:{},line:{},point:{},rect:Qcn,rule:{color:"black"},square:{},text:{color:"black"},tick:Jcn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:xcn,projection:{},legend:Bfn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:zfn,style:{},title:{},facet:{spacing:A_e},concat:{spacing:A_e},normalizedNumberFormat:".0%"},lg=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],I_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},k_e={blue:lg[0],orange:lg[1],red:lg[2],teal:lg[3],green:lg[4],yellow:lg[5],purple:lg[6],pink:lg[7],brown:lg[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Kfn(e={}){return{signals:[{name:"color",value:Ot(e)?{...k_e,...e}:k_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Xfn(e){return{signals:[{name:"fontSize",value:Ot(e)?{...I_e,...e}:I_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Qfn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function kUe(e){const t=dt(e||{}),n={};for(const r of t){const i=e[r];n[r]=SD(i)?s9e(i):Mc(i)}return n}function Jfn(e){const t=dt(e),n={};for(const r of t)n[r]=kUe(e[r]);return n}const Zfn=[...q9e,...aUe,...SUe,"background","padding","legend","lineBreak","scale","style","title","view"];function RUe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=lA({},An(Yfn),n?Qfn(n):{},t?Kfn(t):{},r?Xfn(r):{},s||{});i&&cA(o,"selection",i,!0);const a=ic(o,Zfn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Mc(o[u]));for(const u of q9e)o[u]&&(a[u]=Bl(o[u]));for(const u of aUe)o[u]&&(a[u]=kUe(o[u]));for(const u of SUe)o[u]&&(a[u]=Bl(o[u]));return o.legend&&(a.legend=Bl(o.legend)),o.scale&&(a.scale=Bl(o.scale)),o.style&&(a.style=Jfn(o.style)),o.title&&(a.title=Bl(o.title)),o.view&&(a.view=Bl(o.view)),a}const edn=new Set(["view",...Ucn]),tdn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ndn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Wcn};function rdn(e){e=An(e);for(const t of tdn)delete e[t];if(e.axis)for(const t in e.axis)SD(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Mfn)delete e.legend[t];if(e.mark){for(const t of b_e)delete e.mark[t];e.mark.tooltip&&Ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(CUe(e.params)),delete e.params);for(const t of edn){for(const r of b_e)delete e[t][r];const n=ndn[t];if(n)for(const r of n)delete e[t][r];sdn(e,t)}for(const t of $fn())delete e[t];idn(e);for(const t in e)Ot(e[t])&&Ri(e[t])&&delete e[t];return Ri(e)?void 0:e}function idn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=i9e(e.title);Ri(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ri(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ri(r)?delete e.title:e.title=r}function sdn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Ri(s)||(e.style[n??t]=s),delete e[t]}function AB(e){return"layer"in e}function odn(e){return"repeat"in e}function adn(e){return!Je(e.repeat)&&e.repeat.layer}class Wae{map(t,n){return bB(t)?this.mapFacet(t,n):odn(t)?this.mapRepeat(t,n):qae(t)?this.mapHConcat(t,n):CB(t)?this.mapVConcat(t,n):Hae(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(AB(t))return this.mapLayer(t,n);if(ry(t))return this.mapUnit(t,n);throw new Error(uae(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const udn={zero:1,center:1,normalize:1};function ldn(e){return e in udn}const cdn=new Set([z9e,mB,pB,e4,yB,Iae,kae,gB,V9e,Aae]),fdn=new Set([mB,pB,z9e]);function cE(e){return gt(e)&&tC(e)==="quantitative"&&!e.bin}function R_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(gt(o)&&gt(a))if(cE(o)&&cE(a)){if(o.stack)return t;if(a.stack)return i;const u=gt(o)&&!!o.aggregate,l=gt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(cE(o))return t;if(cE(a))return i}else{if(cE(o))return s&&n==="vertical"?void 0:t;if(cE(a))return s&&n==="horizontal"?void 0:i}}function ddn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function NUe(e,t){var m,g;const n=_m(e)?e:{type:e},r=n.type;if(!cdn.has(r))return null;const i=R_e(t,"x",n)||R_e(t,"theta",n);if(!i)return null;const s=t[i],o=gt(s)?Tt(s,{}):void 0,a=ddn(i),u=[],l=new Set;if(t[a]){const y=t[a],b=gt(y)?Tt(y,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=gt(f)?Tt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Tun.reduce((y,b)=>{if(b!=="tooltip"&&B_(t,b)){const w=t[b];for(const E of Pt(w)){const S=wm(E);if(S.aggregate)continue;const T=Tt(S,{});(!T||!l.has(T))&&y.push({channel:b,fieldDef:S})}}return y},[]);let p;return s.stack!==void 0?W1(s.stack)?p=s.stack?"zero":null:p=s.stack:fdn.has(r)&&(p="zero"),!p||!ldn(p)||$ae(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==sc.LINEAR&&s!=null&&s.stack&&mt(Bln(s.scale.type)),Mn(t[Um(i)])?(s.stack!==void 0&&mt(jln(i)),null):(gt(s)&&s.aggregate&&!Lun.has(s.aggregate)&&mt(Uln(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:yx(r),stackBy:h,offset:p}))}function PUe(e,t,n){const r=Bl(e),i=fi("orient",r,n);if(r.orient=gdn(r.type,t,i),i!==void 0&&i!==r.orient&&mt(Eln(r.orient,i)),r.type==="bar"&&r.orient){const u=fi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Kcn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fi("opacity",r,n),o=fi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=pdn(r.type,t)),fi("cursor",r,n)===void 0&&(r.cursor=hdn(r,t,n)),r}function hdn(e,t,n){return t.href||e.href||fi("href",e,n)?"pointer":e.cursor}function pdn(e,t){if(Er([yB,Aae,Iae,kae],e)&&!$ae(t))return .7}function mdn(e,t,{graticule:n}){if(n)return!1;const r=N0("filled",e,t),i=e.type;return io(r,i!==yB&&i!==gB&&i!==e4)}function gdn(e,t,n){switch(e){case yB:case Iae:case kae:case V9e:case jcn:case Fcn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case mB:if(gt(r)&&(Ra(r.bin)||gt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gt(i)&&(Ra(i.bin)||gt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(gt(r)&&r.type===Aw&&!Gi(r.bin)||t4(r))&&gt(i)&&Ra(i.bin)?"horizontal":"vertical";if(!o)return(gt(i)&&i.type===Aw&&!Gi(i.bin)||t4(i))&&gt(r)&&Ra(r.bin)?"vertical":"horizontal"}case e4:if(s&&!(gt(r)&&Ra(r.bin))&&o&&!(gt(i)&&Ra(i.bin)))return;case pB:if(o)return gt(i)&&Ra(i.bin)?"horizontal":"vertical";if(s)return gt(r)&&Ra(r.bin)?"vertical":"horizontal";if(e===e4){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case gB:case Aae:{const a=x_e(r),u=x_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=hl(r)&&r.type===ZT,c=hl(i)&&i.type===ZT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function ydn(e){const{point:t,line:n,...r}=e;return dt(r).length>1?r:r.type}function vdn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ic(e[t],["point","line"])});return e}function AV(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ot(t.point)?t.point:{}:void 0}function N_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class bdn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ry(t)){const{mark:r,encoding:i}=t,s=_m(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!AV(s,n[s.type],i);case"area":return!!AV(s,n[s.type],i)||!!N_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=TB(l,i),d=_m(a)?a:{type:a},h=AV(d,i[d.type],f),p=d.type==="area"&&N_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:ydn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ic(f,["shape"])}],g=NUe(PUe(d,f,i),f);let y=f;if(g){const{fieldChannel:b,offset:w}=g;y={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return y=ic(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...KT(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...KT(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:vdn(i)})}}function _dn(e,t){return t?wD(e)?OUe(e,t):DUe(e,t):e}function IV(e,t){return t?OUe(e,t):e}function yK(e,t,n){const r=t[e];if(nfn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};mt(rln(r.repeat));return}return t}function DUe(e,t){if(e=yK("field",e,t),e!==void 0){if(e===null)return null;if(Nae(e)&&tm(e.sort)){const n=yK("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function P_e(e,t){if(gt(e))return DUe(e,t);{const n=yK("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function D_e(e,t){if(Mn(e)){const n=P_e(e,t);if(n)return n;if(_B(e))return{condition:e.condition}}else{if(xD(e)){const n=P_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function OUe(e,t){const n={};for(const r in e)if(sn(e,r)){const i=e[r];if(Je(i))n[r]=i.map(s=>D_e(s,t)).filter(s=>s);else{const s=D_e(i,t);s!==void 0&&(n[r]=s)}}return n}class wdn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ry(t)){const{encoding:n,mark:r}=t;if(r==="line"||_m(r)&&r.type==="line")for(const i of xun){const s=hx(i),o=n[s];if(n[i]&&(gt(o)&&!Ra(o.bin)||Vm(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return mt(xln(!!i.x2,!!i.y2)),r({...t,mark:Ot(s)?{...s,type:"rule"}:"rule"},n)}}class xdn extends Wae{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Sfn,Afn,Ofn,new bdn,new wdn]}map(t,n){if(ry(t)){const r=B_(t.encoding,Jg),i=B_(t.encoding,Zg),s=B_(t.encoding,iB);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=IV(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return adn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${_s(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Je(r)&&t.columns&&(t=ic(t,["columns"]),mt(d_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Je(r)&&r.row||[u?u.row:null],f=!Je(r)&&r.column||[u?u.column:null],d=Je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(Je(r)?`${_s(p)}`:(r.row?`row_${_s(m)}`:"")+(r.column?`column_${_s(g)}`:"")),w=this.map(i,{...n,repeater:y,repeaterPrefix:b});w.name=b,a.push(ic(w,["data"]))}const h=Je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return wD(r)&&t.columns&&(t=ic(t,["columns"]),mt(d_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=$_e({parentProjection:o,projection:i}),l=O_e({parentEncoding:s,encoding:IV(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=IV(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&mt(_ln([...r?[Jg]:[],...i?[Zg]:[]]));const o={},a={};for(const u of[Jg,Zg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:_dn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:O_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:$_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function O_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...dt(e),...dt(t)]);for(const s of i){const o=t[s],a=e[s];if(Mn(o)){const u={...a,...o};r[s]=u}else xD(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Mh(a)||Qt(a)||Mn(a)||Je(a))&&(r[s]=a)}}else r=t;return!r||Ri(r)?void 0:r}function $_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&mt(lln({parentProjection:t,projection:n})),n??t}function Gae(e){return"filter"in e}function Edn(e){return(e==null?void 0:e.stop)!==void 0}function $Ue(e){return"lookup"in e}function Sdn(e){return"data"in e}function Tdn(e){return"param"in e}function Cdn(e){return"pivot"in e}function Adn(e){return"density"in e}function Idn(e){return"quantile"in e}function kdn(e){return"regression"in e}function Rdn(e){return"loess"in e}function Ndn(e){return"sample"in e}function Pdn(e){return"window"in e}function Ddn(e){return"joinaggregate"in e}function Odn(e){return"flatten"in e}function $dn(e){return"calculate"in e}function MUe(e){return"bin"in e}function Mdn(e){return"impute"in e}function Ldn(e){return"timeUnit"in e}function Fdn(e){return"aggregate"in e}function jdn(e){return"stack"in e}function Bdn(e){return"fold"in e}function Udn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function zdn(e){return e.map(t=>Gae(t)?{filter:MS(t.filter,mcn)}:t)}class Vdn extends Wae{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=M_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=M_e(t,n),t.encoding){const r={};for(const[i,s]of m1(t.encoding))r[i]=LUe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:m1(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Ba(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function M_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Gae(s))return{filter:vK(s,t)};if(MUe(s)&&px(s.bin))return{...s,bin:FUe(s.bin)};if($Ue(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function LUe(e,t){var r,i;const n=An(e);if(gt(n)&&px(n.bin)&&(n.bin=FUe(n.bin)),vx(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(_B(n))if(Je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:vK(s,t)}});else{const{selection:s,param:o,test:a,...u}=LUe(n.condition,t);n.condition=o?n.condition:{...u,test:vK(n.condition,t)}}return n}function FUe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function vK(e,t){const n=r=>MS(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):MS(e.test||e.filter,r=>r.selection?n(r.selection):r)}class bK extends Wae{map(t,n){const r=n.selections??[];if(t.params&&!ry(t)){const i=[];for(const s of t.params)Vae(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Dt(a)&&(a===t.name||i.includes(a))||Je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=bK.prototype[e];bK.prototype[e]=function(n,r){return t.call(this,n,Hdn(n,r))}}function Hdn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function jUe(e,t){t===void 0&&(t=RUe(e.config));const n=Ydn(e,t),{width:r,height:i}=e,s=Kdn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const qdn=new xdn,Wdn=new Vdn,Gdn=new bK;function Ydn(e,t={}){const n={config:t};return Gdn.map(qdn.map(Wdn.map(e,n),n),n)}function L_e(e){return Dt(e)?{type:e}:e??{}}function Kdn(e,t,n){let{width:r,height:i}=t;const s=ry(e)||AB(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(mt(u_e("width")),r=void 0),i=="container"&&(mt(u_e("height")),i=void 0));const a={type:"pad",...o,...n?L_e(n.autosize):{},...L_e(e.autosize)};if(a.type==="fit"&&!s&&(mt(Wun),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&mt(l_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&mt(l_e("height")),!zc(a,{type:"pad"}))return a}function Xdn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Qdn(e){return e?`fit-${lB(e)}`:"fit"}const Jdn=["background","padding"];function F_e(e,t){const n={};for(const r of Jdn)e&&e[r]!==void 0&&(n[r]=Mc(e[r]));return t&&(n.params=e.params),n}class iy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new iy(An(this.explicit),An(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return io(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of dt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function vp(e){return{explicit:!0,value:e}}function Ic(e){return{explicit:!1,value:e}}function BUe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:IB(t,n,r,i)}}function IB(e,t,n,r){return e.explicit&&t.explicit&&mt(Pln(n,r,e.value,t.value)),e}function v1(e,t,n,r,i=IB){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:zc(e.value,t.value)?e:i(e,t,n,r)}class Zdn extends iy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function iC(e){return"url"in e}function TN(e){return"values"in e}function UUe(e){return"name"in e&&!iC(e)&&!TN(e)&&!Ov(e)}function Ov(e){return e&&(zUe(e)||VUe(e)||Yae(e))}function zUe(e){return"sequence"in e}function VUe(e){return"sphere"in e}function Yae(e){return"graticule"in e}var ms;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ms||(ms={}));function HUe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=fd(i.field),i}function Rw(e,t=!0,n=Au){if(Je(e)){const r=e.map(i=>Rw(i,t,n));return t?`[${r.join(", ")}]`:r}else if(mx(e))return n(t?Cw(e):rcn(e));return t?n(Ni(e)):e}function ehn(e,t){for(const n of Ba(e.component.selection??{})){const r=n.name;let i=`${r}${_1}, ${n.resolve==="global"?"true":`{unit: ${U_(e)}}`}`;for(const s of PB)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Phn,on:[{events:{signal:n.name+_1},update:`modify(${Et(n.name+Nw)}, ${i})`}]})}return Kae(t)}function thn(e,t){if(e.component.selection&&dt(e.component.selection).length){const n=Et(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Y1("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Kae(t)}function nhn(e,t){let n=!1;for(const r of Ba(e.component.selection??{})){const i=r.name,s=Et(i+Nw);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${u7e}(${s}, ${Et(a)}${u}`})}n=!0;for(const a of PB)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Kae(t)}function rhn(e,t){const n=[...t],r=U_(e,{escape:!1});for(const i of Ba(e.component.selection??{})){const s={name:i.name+Nw};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Lh}}]),i.init){const a=i.project.items.map(HUe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Lh]:Rw(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Rw(u,!1)}))}n.filter(a=>a.name===i.name+Nw).length||n.push(s)}return n}function qUe(e,t){for(const n of Ba(e.component.selection??{}))for(const r of PB)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ihn(e,t){for(const n of e.children)Us(n)&&(t=qUe(n,t));return t}function shn(e,t,n,r){const i=h7e(e,t.param,t);return{signal:lf(n.get("type"))&&Je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Kae(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Si{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){mt(oln);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class oc extends Si{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${UBe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function kV(e){return e.as!==void 0}function j_e(e){return`${e}_end`}class nm extends Si{clone(){return new nm(null,An(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(gx(u)){if(Us(n)){const{mark:c,markDef:f,config:d}=n,h=y1({fieldDef:s,markDef:f,config:d});(SN(c)||h)&&(l={timeUnit:pa(u),field:a})}}else l={as:Tt(s,{forAs:!0}),field:a,timeUnit:u};if(Us(n)){const{mark:c,markDef:f,config:d}=n,h=y1({fieldDef:s,markDef:f,config:d});SN(c)&&so(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[xr(l)]=l)}return i},{});return Ri(r)?null:new nm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=pa(r),o={...i,timeUnit:s};return new nm(t,{[xr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of m1(this.timeUnits)){const s=kV(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ba(this.timeUnits).map(t=>kV(t)?t.as:j_e(t.field)))}dependentFields(){return new Set(Ba(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${xr(this.timeUnits)}`}assemble(){const t=[];for(const n of Ba(this.timeUnits)){const{rectBandPosition:r}=n,i=pa(n.timeUnit);if(kV(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:fd(s),type:"timeunit",...a?{units:hB(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...B_e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=WUe({timeUnit:i,field:o}),u=j_e(o);t.push({type:"formula",expr:a,as:u}),t.push(...B_e([o,u],r,i))}}return t}}const kB="offsetted_rect_start",RB="offsetted_rect_end";function WUe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=E9e(r),{part:o,step:a}=A9e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function B_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:U_e([WUe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${kB}`},{type:"formula",expr:U_e([i,s],n+.5),as:`${e}_${RB}`}]}return[]}function U_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const TD="_tuple_fields";class ohn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const ahn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new ohn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=_s(`${r}_${g}`);for(let b=1;a.has(y);b++)y=_s(`${r}_${g}_${b}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Pt(n.value):null;let{fields:d,encodings:h}=Ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ot(p))for(const m of dt(p))wun(m)?(h||(h=[])).push(m):l==="interval"?(mt(nln),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){mt(Gun(p,m.aggregate));continue}else if(!g){mt(f_e(p));continue}if(m.timeUnit&&!gx(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[xr(y)]=y}if(!s[g]){const y=l==="interval"&&ny(p)&&lf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:p,type:y,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[g]=b),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Lh,GBe(p)?(b.geoChannel=p,b.channel=WBe(p),i.hasChannel[b.channel]=s[g]):i.hasChannel[p]=s[g]}}else mt(f_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Lh}f&&(t.init=f.map(p=>i.items.map(m=>Ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Ri(o)||(i.timeUnit=new nm(null,o))},signals:(e,t,n)=>{const r=t.name+TD;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(HUe)})}},e0={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ny(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&mt(Qun),!s||!lf(o)){mt(Xun);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||z_e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(u7e)>=0)i.update=`{${r.map(o=>`${Et(fd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Et(fd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!z_e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function _K(e,t){return`domain(${Et(e.scaleName(t))})`}function z_e(e){return e.parent&&AA(e.parent)&&!e.parent.parent}const jS="_brush",GUe="_scale_trigger",B2="geo_interval_init_tick",YUe="_init",uhn="_center",lhn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ot(n.select)?n.select:{}};i.fields=[Lh],i.encodings||(i.encodings=n.value?dt(n.value):[Qh,Xh]),n.select={type:"interval",...i}}if(t.translate&&!e0.defined(t)){const i=`!event.item || event.item.mark.name !== ${Et(t.name+jS)}`;for(const s of t.events){if(!s.between){mt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+_1,s=Ba(t.project.hasChannel).filter(a=>a.channel===ws||a.channel===va),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(chn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Et(e.projectionName()),u=e.projectionName()+uhn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=S=>e.getSizeSignalRef(S).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+YUe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Et(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${U_(e)}}`,w=`vlSelectionTuples(${y}, ${b})`,E=s.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:B2}]:[]],update:w}]})}else{if(!e0.defined(t)){const l=r+GUe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Et(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=lf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${U_(e)}, fields: ${r+TD}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Rw(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Us(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===B2).length||n.unshift({name:B2,value:null,on:[{events:"timer{1}",update:`${B2} === null ? {} : ${B2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Et(t.name+Nw)})`;if(e0.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of dt(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${U_(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=dt(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+jS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+jS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function chn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Et(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===ws?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=e0.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Rw(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+GUe},update:lf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Rw(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===ws?0:1,h=t.name+YUe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const fhn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+TD,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ba(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+jS):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${U_(e)}, `;if(t.project.hasSelectionId)l+=`${Lh}: ${o}[${Et(Lh)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Et(e.vgField(d.channel,{}))}], ${o}[${Et(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Et(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+_1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function EA(e,t,n,r){const i=_B(t)&&t.condition,s=r(t);if(i){const a=Pt(i).map(u=>{const l=r(u);if(tfn(u)){const{param:c,empty:f}=u;return{test:d7e(e,{param:c,empty:f}),...l}}else return{test:c4(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Xae(e,t="text"){const n=e.encoding[t];return EA(e,n,t,r=>NB(r,e.config))}function NB(e,t,n="datum"){if(e){if(Mh(e))return rs(e.value);if(Mn(e)){const{format:r,formatType:i}=r4(e);return Cae({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function KUe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Je(o))return{tooltip:V_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return EA(e,o,"tooltip",u=>{const l=NB(u,i,a);if(l)return l;if(u===null)return;let c=fi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Dt(c))return{value:c};if(Ot(c))return Qt(c)?c:c.content==="encoding"?V_e(n,s,i,t):{signal:a}})}}function XUe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=hx(f),h=hl(c)?c:{...c,type:e[d].type},p=h.title||Dae(h,i),m=Pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(so(f)){const y=f==="x"?"x2":"y2",b=wm(e[y]);if(Ra(h.bin)&&b){const w=Tt(h,{expr:o}),E=Tt(b,{expr:o}),{format:S,formatType:T}=r4(h);g=_D(w,E,S,T,i),s[y]=!0}}if((so(f)||f===xd||f===Kh)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:b}=r4(h);g=Cae({fieldOrDatumDef:h,format:y,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}g??(g=NB(h,i,o).signal),a.push({channel:f,key:m,value:g})}Mae(e,(c,f)=>{gt(c)?u(c,f):wB(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function V_e(e,t,n,{reactiveGeom:r}={}){const i=XUe(e,t,n,{reactiveGeom:r}),s=m1(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function dhn(e){const{markDef:t,config:n}=e,r=fi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...hhn(e),...phn(e)}}function hhn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Vun?{}:{ariaRoleDescription:{value:t}}}function phn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return EA(e,s,"description",u=>NB(u,e.config));const o=fi("description",n,r);if(o!=null)return{description:rs(o)};if(r.aria===!1)return{};const a=XUe(t,i,r);if(!Ri(a))return{description:{signal:m1(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function oa(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=fi(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=rs(u)));const l=i[e];return EA(t,l,o??e,c=>Tae({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function QUe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fi("filled",n,i),a=Er(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:rs(u)}:{},...l?{stroke:rs(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&mt(p9e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...oa("color",e,{vgChannel:c,defaultValue:o?u:l}),...oa("fill",e,{defaultValue:r.fill?u:void 0}),...oa("stroke",e,{defaultValue:r.stroke?l:void 0})}}function mhn(e){const{encoding:t,mark:n}=e,r=t.order;return!yx(n)&&Mh(r)?EA(e,r,"zindex",i=>rs(i.value)):{}}function sC({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Tae({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:rs(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function yu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Um(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=sC({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Qae({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&so(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:ghn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function ghn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Mn(n)&&i&&t===i.fieldChannel){if(gt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return ZF({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return j_(n,r,{suffix:"end"},{offset:s})}return Eae(e)}function Qae({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=hx(n),u=g1(n),l=fi(n,s,o,{vgChannel:u});if(l!==void 0)return Lk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Er([sc.LOG,sc.TIME,sc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[yc(n)],mult:.5}}}}const yhn={left:"x",center:"xc",right:"x2"},vhn={top:"y",middle:"yc",bottom:"y2"};function JUe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return g1(e);const i=e==="x"?"align":"baseline",s=fi(i,t,n);let o;return Qt(s)?(mt(wln(i)),o=void 0):o=s,e==="x"?yhn[o||(r==="top"?"left":"center")]:vhn[o||r]}function u4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?ZUe(e,t,{defaultPos:n,defaultPos2:r}):yu(e,t,{defaultPos:n})}function ZUe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Um(e),a=yc(e),u=bhn(t,r,o),l=u[a]?JUe(e,i,s):g1(e);return{...yu(e,t,{defaultPos:n,vgChannel:l}),...u}}function bhn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=hx(n),l=yc(n),c=g1(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?sC({channel:n,markDef:s,encoding:r,model:e}):sC({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=yc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=_hn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:X3(n,s)||X3(n,{[n]:QF(n,s,a.style),[l]:QF(l,s,a.style)})||X3(n,a[i])||X3(n,a.mark)||{[c]:Qae({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function _hn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Mn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?j_(t,s,{suffix:"start"},{offset:u}):Eae({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function X3(e,t){const n=yc(e),r=g1(e);if(t[r]!==void 0)return{[r]:Lk(e,t[r])};if(t[e]!==void 0)return{[r]:Lk(e,t[e])};if(t[n]){const i=t[n];if(kw(i))mt(mln(n));else return{[n]:Lk(e,i)}}}function b1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Um(t),a=yc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fi("size",i,n,{vgChannel:a}),p=QBe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return gt(u)&&(Gi(u.bin)||Ra(u.bin)||u.timeUnit&&!l)&&!(h&&!kw(h))&&!r[p]&&!ma(f)?Ehn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Mn(u)&&ma(f)||m)&&!l?xhn(u,t,e):ZUe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function whn(e,t,n,r,i,s,o){if(kw(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=N0("minBandSize",{type:o},r);return{signal:c?`max(${hh(c)}, ${l})`:l}}else i.band!==1&&(mt(Tln(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Qt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(tb(u)&&Gr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=io(u,o==="bar"?l:c);if(Qt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Gr(f))return{signal:`${1-f} * ${e}`}}return{value:o4(r.view,e)-2}}function xhn(e,t,n){var R,P;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=yc(t),f=Um(t),d=QBe(t),h=n.scaleName(d),p=n.getScaleComponent(rae(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=oa("size",n,{vgChannel:c,defaultRef:rs(r.size)}):mt(kln(r.type)));const y=!!g,b=K9e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(R=l||p)==null?void 0:R.get("type"),useVlSizeChannel:m});g=g||{[c]:whn(c,h||u,p||l,s,b,!!e,r.type)};const w=((P=l||p)==null?void 0:P.get("type"))==="band"&&kw(b)&&!y?"top":"middle",E=JUe(t,r,s,w),S=E==="xc"||E==="yc",{offset:T,offsetType:C}=sC({channel:t,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),I=Eae({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:Qae({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:S?C==="encoding"?0:.5:Qt(b)?{signal:`(1-${b})/2`}:kw(b)?(1-b.band)/2:0});if(c)return{[E]:I,...g};{const D=g1(f),L=g[c],M=T?{...L,offset:T}:L;return{[E]:I,[D]:Je(I)?[I[0],{...I[1],offset:M}]:{...I,offset:M}}}}function H_e(e,t,n,r,i,s,o){if(qBe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Qt(n)||Qt(i)||Qt(r)||s){const l=hh(n),c=hh(i),f=hh(r),d=hh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Ehn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var P;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=K9e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(P=r.component.axes[n])==null?void 0:P[0],h=(d==null?void 0:d.get("translate"))??.5,p=so(n)?fi("binSpacing",s,i)??0:0,m=Um(n),g=g1(n),y=g1(m),b=N0("minBandSize",s,i),{offset:w}=sC({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=sC({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),S=Ocn({fieldDef:e,scaleName:u}),T=H_e(n,p,c,h,w,b,S),C=H_e(m,p,c,h,E??w,b,S),I=Qt(f)?{signal:`(1-${f.signal})/2`}:kw(f)?(1-f.band)/2:.5,R=y1({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Gi(e.bin)||e.timeUnit){const D=e.timeUnit&&R!==.5;return{[y]:q_e({fieldDef:e,scaleName:u,bandPosition:I,offset:C,useRectOffsetField:D}),[g]:q_e({fieldDef:e,scaleName:u,bandPosition:Qt(I)?{signal:`1-${I.signal}`}:1-I,offset:T,useRectOffsetField:D})}}else if(Ra(e.bin)){const D=j_(e,u,{},{offset:C});if(gt(t))return{[y]:D,[g]:j_(t,u,{},{offset:T})};if(px(e.bin)&&e.bin.step)return{[y]:D,[g]:{signal:`scale("${u}", ${Tt(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}mt(y9e(m))}function q_e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return ZF({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:kB,endSuffix:RB}:{}})}const Shn=new Set(["aria","width","height"]);function Ed(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?QUe(e):{};return{...Thn(e.markDef,t),...W_e(e,"fill",n),...W_e(e,"stroke",r),...oa("opacity",e),...oa("fillOpacity",e),...oa("strokeOpacity",e),...oa("strokeWidth",e),...oa("strokeDash",e),...mhn(e),...KUe(e),...Xae(e,"href"),...dhn(e)}}function W_e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(fi("invalid",s,r)==="hide"&&n&&!yx(i)){const a=Chn(e,{invalid:!0,channels:cB});if(a)return{[t]:[{test:a,value:null},...Pt(n)]}}return n?{[t]:n}:{}}function Thn(e,t){return zun.reduce((n,r)=>(!Shn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=rs(e[r])),n),{})}function Chn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&lf(u)&&(s[l]=!0)}return s},{}),i=dt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Sae(o,t)).join(` ${s} `)}}function Jae(e){const{config:t,markDef:n}=e;if(fi("invalid",n,t)){const i=Ahn(e,{channels:zm});if(i)return{defined:{signal:i}}}return{}}function Ahn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&lf(l)&&(s[c]=!0)}return s},{}),i=dt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Sae(o,t)).join(` ${s} `)}}function G_e(e,t){if(t!==void 0)return{[e]:rs(t)}}const RV="voronoi",e7e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(RV)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(yx(s))return mt(Yun(s)),n;const o={name:e.getName(RV),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...KUe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(RV)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},t7e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!zae(e.bind),parse:(e,t,n)=>l7e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=e7e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=_s(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Rw(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Et(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+_1)[0],o=r+TD,a=i.items.map(l=>_s(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},l4="_toggle",n7e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+l4,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+_1,r=t.name+l4;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${U_(e)}}, `)+`${r} ? ${n} : null`}},Ihn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Dt(t.clear)?Y1(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(t7e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===_s(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+_1);r(i,"null"),n7e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+l4),r(i,"false"))}return n}},r7e={defined:e=>{const t=e.resolve==="global"&&e.bind&&zae(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Lh;return t&&!n&&mt(Jun),t&&n},parse:(e,t,n)=>{const r=An(n);if(r.select=Dt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},l7e(t,r),Ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=CV(t.bind)?t.bind.legend:"click",s=Dt(i)?Y1(i,"view"):Pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=CV(t.bind)&&t.bind.legend,s=o=>a=>{const u=An(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${_s(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+_1),o=r+TD,a=i.items.filter(d=>d.hasLegend).map(d=>_s(`${r}_${_s(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+l4),f=CV(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function khn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ba(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&r7e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const i7e="_translate_anchor",s7e="_translate_delta",Rhn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=e0.defined(t),s=r+i7e,{x:o,y:a}=t.project.hasChannel;let u=Y1(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+jS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?_K(e,ws):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?_K(e,va):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+s7e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Y_e(e,t,o,"width",n),a!==void 0&&Y_e(e,t,a,"height",n),n}};function Y_e(e,t,n,r,i){const s=t.name,o=s+i7e,a=s+s7e,u=n.channel,l=e0.defined(t),c=i.filter(S=>S.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===ws?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${g}, ${y}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const o7e="_zoom_anchor",a7e="_zoom_delta",Nhn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=e0.defined(t),s=r+a7e,{x:o,y:a}=t.project.hasChannel,u=Et(e.scaleName(ws)),l=Et(e.scaleName(va));let c=Y1(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+jS,f))),n.push({name:r+o7e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&K_e(e,t,o,"width",n),a!==void 0&&K_e(e,t,a,"height",n),n}};function K_e(e,t,n,r,i){const s=t.name,o=n.channel,a=e0.defined(t),u=i.filter(b=>b.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?_K(e,o):u.name,h=s+a7e,p=`${s}${o7e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Nw="_store",_1="_tuple",Phn="_modify",u7e="vlSelectionResolve",PB=[fhn,lhn,ahn,n7e,t7e,e0,r7e,Ihn,Rhn,Nhn,e7e];function Dhn(e){let t=e.parent;for(;t&&!Gc(t);)t=t.parent;return t}function U_(e,{escape:t}={escape:!0}){let n=t?Et(e.name):e.name;const r=Dhn(e);if(r){const{facet:i}=r;for(const s of Kf)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Et(r.vgField(s))}])`)}return n}function Zae(e){return Ba(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function l7e(e,t){(Dt(t.select)||!t.select.on)&&delete e.events,(Dt(t.select)||!t.select.clear)&&delete e.clear,(Dt(t.select)||!t.select.toggle)&&delete e.toggle}function wK(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...wK(e.object)),t.push(...wK(e.property))),t)}function c7e(e){return e.object.type==="MemberExpression"?c7e(e.object):e.object.name==="datum"}function f7e(e){const t=boe(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&c7e(r)&&n.add(wK(r).slice(1).join("."))}),n}class SA extends Si{clone(){return new SA(null,this.model,An(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=c4(this.model,this.filter,this),this._dependentFields=f7e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Ohn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=_s(i.name),o=i.select,a=Dt(o)?o:o.type,u=Ot(o)?An(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=An(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Dt(u.on)?Y1(u.on,"scope"):Pt(An(u.on))},f=An(i);for(const d of PB)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function d7e(e,t,n,r="datum"){const i=Dt(t)?t:t.param,s=_s(i),o=Et(s+Nw);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Et(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function h7e(e,t,n){const r=_s(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&mt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Et(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,mt((a.length?"Multiple ":"No ")+`matching ${Et(i)} encoding found for selection ${Et(n.param)}. Using "field": ${Et(s)}.`)):s=a[0].field}return`${o.name}[${Et(fd(s))}]`}function $hn(e,t){for(const[n,r]of m1(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new oc(new SA(t,e,{param:n}),i,ms.Lookup,e.component.data.outputNodeRefCounts)}}function c4(e,t,n){return Mk(t,r=>Dt(r)?r:dcn(r)?d7e(e,r,n):k9e(r))}function Mhn(e,t){if(e)return Je(e)&&!Fy(e)?e.map(n=>Dae(n,t)).join(", "):e}function NV(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function $I(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=mfn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(SD(m)){const{condition:g,...y}=m,b=Pt(g),w=E_e[h];if(w){const{vgProp:E,part:S}=w,T=[...b.map(C=>{const{test:I,...R}=C;return{test:c4(null,I),...R}}),y];NV(c,S,E,T),delete c[h]}else if(w===null){const E={signal:b.map(S=>{const{test:T,...C}=S;return`${c4(null,T)} ? ${a_e(C)} : `}).join("")+a_e(y)};c[h]=E}}else if(Qt(m)){const g=E_e[h];if(g){const{vgProp:y,part:b}=g;NV(c,b,y,m),delete c[h]}}Er(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Ri(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:io(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Qt(c.encode.labels.update.text)&&(p=Sw(a,"datum.label",c.encode.labels.update.text.signal)),NV(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of sUe)e.hasAxisPart(p)||delete c.encode[p];Ri(c.encode)&&delete c.encode}const h=Mhn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:io(l,0)}}}}function p7e(e){const{axes:t}=e.component,n=[];for(const r of zm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Lhn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>$I(i,"grid",t)),...r.map(i=>$I(i,"grid",t)),...n.map(i=>$I(i,"main",t)),...r.map(i=>$I(i,"main",t))].filter(i=>i)}function X_e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...dt(o),...dt(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${hh(o[c])} : ${hh(a[c])}`};return l}return t[i]})])}function Fhn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:D9e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Qt(n)?"axisOrient":`axis${pD(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:X_e(a,r,e,n),vgAxisConfig:X_e(u,r,e,n),axisConfigStyle:jhn([...u,...a],r)}}function jhn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function xK(e,t,n,r={}){var s;const i=a9e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Q_e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Bhn(n,e),gridScale:({model:e,channel:t})=>Uhn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||g7e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||m7e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Vhn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Hhn(t.type,n,gt(t)&&!!t.timeUnit,gt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Whn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Ghn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=y7e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return l9e(i?[w_e(i)]:[],gt(o)?[w_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Yhn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Khn(n,t)};function Bhn(e,t){return!ma(e)&&gt(t)&&!Gi(t==null?void 0:t.bin)&&!Ra(t==null?void 0:t.bin)}function Uhn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function zhn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Qt(s)?s:EN(s);{const{configValue:o}=xK("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?EN(o):n===ws&&Er([xae,wae],e.type)&&!(gt(e)&&e.timeUnit)?270:void 0}}function EK(e){return`(((${e.signal} % 360) + 360) % 360)`}function m7e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Qt(e)){const i=EK(e),s=Qt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Qt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Qt(e)){const i=EK(e),s=Qt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Qt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function g7e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Qt(e)){const o=EK(e),a=Qt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Qt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Vhn(e,t){if(t==="x"&&Er(["quantitative","temporal"],e))return!0}function Hhn(e,t,n,r){if(n&&!Ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function qhn(e){return e==="x"?"bottom":"left"}function Whn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ma(t)&&t!=="log"){if(gt(e)){if(Gi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Er(["month","hours","day","quarter"],(i=pa(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Ghn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(gt(t)){const{timeUnit:n}=t;if(n){const r=C9e(n);if(r)return{signal:r}}}}function y7e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return c9e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Yhn(e,t){const n=e.values;if(Je(n))return iUe(t,n);if(Qt(n))return n}function Khn(e,t){return e==="rect"&&n4(t)?1:0}class oC extends Si{clone(){return new oC(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=f7e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(vx(r)&&Y9e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${k9e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new oC(t,{calculate:u,as:aC(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${xr(this.transform)}`}}function aC(e,t,n){return Tt(e,{prefix:t,suffix:"sort_index",...n})}function DB(e,t){return Er(["top","bottom"],t)?"column":Er(["left","right"],t)||e==="row"?"row":"column"}function uC(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return io((t||{})[e],i[e],n.header[e])}function OB(e,t,n,r){const i={};for(const s of e){const o=uC(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const eue=["row","column"],tue=["header","footer"];function Xhn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=OB(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=DB(t,a),l=EN(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...b7e(l,u),...v7e(u,l,s),..._7e(r,i,t,Lfn,xUe)}}}function v7e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=g7e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function b7e(e,t){const n=m7e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Qhn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of tue)if(n[i])for(const s of n[i]){const o=Zhn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Jhn(e,t){const{sort:n}=e;return tm(n)?{field:Tt(n,{expr:"datum"}),order:n.order??"ascending"}:Je(n)?{field:aC(e,t,{expr:"datum"}),order:"ascending"}:{field:Tt(e,{expr:"datum"}),order:n??"ascending"}}function SK(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=OB(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Cae({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=DB(t,a);return{text:{signal:u?Sw(Sw(u,"datum.label",l),"datum.value",Tt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...b7e(s,c),...v7e(c,s,o),..._7e(n,e,t,Ffn,EUe)}}function Zhn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=OB(["labelOrient"],o.header,a,t);(t==="row"&&!Er(["top","bottom"],f)||t==="column"&&!Er(["left","right"],f))&&(s=SK(o,t,a))}const u=Gc(e)&&!wD(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Jhn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const epn={column:{start:0,end:1},row:{start:1,end:0}};function tpn(e,t){return epn[t][e]}function npn(e,t){const n={};for(const r of Kf){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=OB(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=DB(r,o),u=tpn(s,a);u!==void 0&&(n[a]=u)}}return Ri(n)?void 0:n}function _7e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=uC(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function nue(e){return[...Q3(e,"width"),...Q3(e,"height"),...Q3(e,"childWidth"),...Q3(e,"childHeight")]}function Q3(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ma(o)&&tb(a)){const u=e.scaleName(n);return Gc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[J_e(u,a)]:[J_e(u,a),{name:i,update:w7e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=gK(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function J_e(e,t){const n=`${e}_step`;return Qt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function w7e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=io(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${hh(o)}, ${hh(s)}) * ${e}_step`}function x7e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function E7e(e,t){return dt(e).reduce((n,r)=>{const i=e[r];return{...n,...EA(t,i,r,s=>rs(s.value))}},{})}function S7e(e,t){if(Gc(t))return e==="theta"?"independent":"shared";if(AA(t))return"shared";if(lue(t))return so(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function rue(e,t){const n=e.scale[t],r=so(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&mt(Oln(t)),"independent"):e[r][t]||"shared"}const rpn={...Ufn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},T7e=dt(rpn);class ipn extends iy{}const Z_e={symbols:spn,gradient:opn,labels:apn,entries:upn};function spn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...qun({},n,Hcn),...QUe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?C7e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===mc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=rs(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=rs(m??1));else if(Je(f.fill)){const g=TK(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=rs(g))}}if(f.stroke){if(r==="stroke"||!c&&r===mc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Je(f.stroke)){const g=io(TK(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ty){const g=gt(t)&&I7e(n,i,t);g?f.opacity=[{test:g,...rs(m??1)},rs(u.legend.unselectedOpacity)]:m&&(f.opacity=rs(m))}return f={...f,...e},Ri(f)?void 0:f}function opn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?C7e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=rs(l)),a={...a,...e},Ri(a)?void 0:a}function apn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=gt(t)?I7e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Iw(c)?f=mh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=mh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&gt(t)&&t.timeUnit===void 0&&(f=mh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Ri(d)?void 0:d}function upn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function C7e(e){return A7e(e,(t,n)=>Math.max(t,n.value))}function TK(e){return A7e(e,(t,n)=>io(t,n.value))}function A7e(e,t){if(rfn(e))return Pt(e.condition).reduce(t,e.value);if(Mh(e))return e.value}function I7e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Et(n.field);return r.map(s=>`(!length(data(${Et(_s(s)+Nw)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const ewe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return j9e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return B9e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??mpn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??gpn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??cpn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>FS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(LS(n)&&ph(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>lpn(t,e)};function lpn(e,t){const n=e.values;if(Je(n))return iUe(t,n);if(Qt(n))return n}function cpn(e,t,n,r){if(t!=="shape"){const i=TK(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function fpn(e){const{legend:t}=e;return io(t.type,dpn(e))}function dpn({channel:e,timeUnit:t,scaleType:n}){if(LS(e)){if(Er(["quarter","month","day"],t))return"symbol";if(ph(n))return"gradient"}return"symbol"}function hpn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ppn(n,t)}function ppn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function mpn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(ph(i))return n==="horizontal"?r==="top"||r==="bottom"?twe(t,"width",o,s):o:twe(t,"height",u,a)}function twe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function gpn(e){if(Er(["quantile","threshold","log","symlog"],e))return"greedy"}function k7e(e){const t=Us(e)?ypn(e):wpn(e);return e.component.legends=t,t}function ypn(e){const{encoding:t}=e,n={};for(const r of[mc,...TUe]){const i=Bo(t[r]);!i||!e.getScaleComponent(r)||r===gc&&gt(i)&&i.type===xA||(n[r]=_pn(e,r))}return n}function vpn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function bpn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function _pn(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new ipn({},vpn(e,t));khn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Bo(i[t]),f=gt(c)?(E=pa(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=fpn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=hpn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const S of T7e){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const T=S in ewe?ewe[S](m):n[S];if(T!==void 0){const C=bpn(T,S,n,e.fieldDef(t));(C||s.legend[S]===void 0)&&a.set(S,T,C)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const T=E7e(g[S]??{},e),C=S in Z_e?Z_e[S](T,w):T;C!==void 0&&!Ri(C)&&(b[S]={...y!=null&&y.length&&gt(c)?{name:`${_s(c.field)}_legend_${S}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:C})}return Ri(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function wpn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){k7e(r);for(const i of dt(r.component.legends))n.legend[i]=rue(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=R7e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of dt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function R7e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of T7e){const c=v1(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return xpn(f,d);case"title":return f9e(f,d);case"type":return i=!0,Ic("symbol")}return IB(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&XF(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&XF(e.explicit,["encode","gradient"])),e}function xpn(e,t){return t.value==="circle"?t:e}function Epn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function N7e(e){const t=e.component.legends,n={};for(const i of dt(t)){const s=e.getScaleComponent(i),o=Ni(s.get("domains"));if(n[o])for(const a of n[o])R7e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ba(n).flat().map(i=>Spn(i,e.config)).filter(i=>i!==void 0)}function Spn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of TUe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Qt(s.encode.labels.update.text)&&(l=Sw(r,"datum.label",s.encode.labels.update.text.signal)),Epn(s,"labels","text",{signal:l})}return s}}function Tpn(e){return AA(e)||lue(e)?Cpn(e):P7e(e)}function Cpn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),P7e(e))}function P7e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Qt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Er(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Apn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class D7e extends iy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function O7e(e){e.component.projection=Us(e)?Ipn(e):Npn(e)}function Ipn(e){if(e.hasProjection){const t=Bl(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?kpn(e):void 0,s=new D7e(e.projectionName(!0),{...Bl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function kpn(e){const t=[],{encoding:n}=e;for(const r of[[Qh,Xh],[dd,Jh]])(Bo(n[r[0]])||Bo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(gc)&&e.typedFieldDef(gc).type===xA&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ms.Main)),t}function Rpn(e,t){const n=Xoe(Apn,i=>!!(!sn(e.explicit,i)&&!sn(t.explicit,i)||sn(e.explicit,i)&&sn(t.explicit,i)&&zc(e.get(i),t.get(i))));if(zc(e.size,t.size)){if(n)return e;if(zc(e.explicit,{}))return t;if(zc(t.explicit,{}))return e}return null}function Npn(e){if(e.children.length===0)return;let t;for(const r of e.children)O7e(r);const n=Xoe(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Rpn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new D7e(r,t.specifiedProjection,t.size,An(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Ppn(e,t,n,r){if(ED(t,n)){const i=Us(e)?e.axis(n)??e.legend(n)??{}:{},s=Tt(t,{expr:"datum"}),o=Tt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Tt(t,{binSuffix:"range",forAs:!0}),formula:_D(s,o,i.format,i.formatType,r)}}return{}}function $7e(e,t){return`${r9e(e)}_${t}`}function Dpn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function iue(e,t,n){const r=xB(n,void 0)??{},i=$7e(r,t);return e.getName(`${i}_bins`)}function Opn(e){return"as"in e}function nwe(e,t,n){let r,i;Opn(e)?r=Dt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Tt(e,{forAs:!0}),Tt(e,{binSuffix:"end",forAs:!0})];const s={...xB(t,void 0)},o=$7e(s,e.field),{signal:a,extentSignal:u}=Dpn(n,o);if(fB(s.extent)){const c=s.extent;i=h7e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class rm extends Si{clone(){return new rm(null,An(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(hl(s)&&Gi(s.bin)){const{key:a,binComponent:u}=nwe(s,s.bin,n);i[a]={...u,...i[a],...Ppn(n,s,o,n.config)}}return i},{});return Ri(r)?null:new rm(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=nwe(n,n.bin,r);return new rm(t,{[i]:s})}merge(t,n){for(const r of dt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Bp([...this.bins[r].as,...t.bins[r].as],xr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ba(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ba(this.bins).map(t=>t.field))}hash(){return`Bin ${xr(this.bins)}`}assemble(){return Ba(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:fd(t.field),as:r,signal:t.signal,...fB(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:fd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Tt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function $pn(e,t,n,r){var s;const i=Us(r)?r.encoding[Um(t)]:void 0;if(hl(n)&&Us(r)&&X9e(n,i,r.markDef,r.config)){e.add(Tt(n,{})),e.add(Tt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=y1({fieldDef:n,markDef:a,config:u});SN(o)&&l!==.5&&so(t)&&(e.add(Tt(n,{suffix:kB})),e.add(Tt(n,{suffix:RB}))),n.bin&&ED(n,t)&&e.add(Tt(n,{binSuffix:"range"}))}else if(GBe(t)){const o=WBe(t);e.add(r.getName(o))}else e.add(Tt(n));return vx(n)&&Tcn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Mpn(e,t){for(const n of dt(t)){const r=t[n];for(const i of dt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Th extends Si{clone(){return new Th(null,new Set(this.dimensions),An(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Tt(o,{forAs:!0})]);else{if(R0(u)||eb(u)){const c=R0(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Tt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Tt(o,{forAs:!0})]);ny(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Tt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Tt({field:l,aggregate:"max"},{forAs:!0})]))}else $pn(s,a,o,n)}),s.size+dt(i).length===0)?null:new Th(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Tt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Tt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+dt(i).length===0?null:new Th(t,r,i)}merge(t){return FBe(this.dimensions,t.dimensions)?(Mpn(this.measures,t.measures),!0):(Xln("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...dt(this.measures)])}producedFields(){const t=new Set;for(const n of dt(this.measures))for(const r of dt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${xr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of dt(this.measures))for(const o of dt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:fd(s));return{type:"aggregate",groupby:[...this.dimensions].map(fd),ops:t,fields:n,as:r}}}class TA extends Si{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Kf){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Tt(o),...Gi(a)?[Tt(o,{binSuffix:"end"})]:[]],...tm(u)?{sortField:u}:Je(u)?{sortIndexField:aC(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Kf)this[n]&&(t+=` ${n.charAt(0)}:${xr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Kf)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Kf)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of zm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ma(i)&&tb(s)){const o=$B(this.childModel,n),a=uue(o);a?t[n]=a:mt(lae(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=vB,field:f}=u;s.push(f),o.push(c),a.push(Tt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of eue){for(const c of tue){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Zg,Jg])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function rwe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Lpn(e,t){const n=Zoe(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=rwe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=rwe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return mt(sln(t)),null}function Fpn(e){const t={};return TM(e.filter,n=>{if(I9e(n)){let r=null;hae(n)?r=Mc(n.equal):mae(n)?r=Mc(n.lte):pae(n)?r=Mc(n.lt):gae(n)?r=Mc(n.gt):yae(n)?r=Mc(n.gte):vae(n)?r=n.range[0]:bae(n)&&(r=(n.oneOf??n.in)[0]),r&&(mx(r)?t[n.field]="date":Gr(r)?t[n.field]="number":Dt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function jpn(e){const t={};function n(r){rC(r)?t[r.field]="date":r.type==="quantitative"&&Mun(r.aggregate)?t[r.field]="number":XT(r.field)>1?r.field in t||(t[r.field]="flatten"):vx(r)&&tm(r.sort)&&XT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Us(e)||Gc(e))&&e.forEachFieldDef((r,i)=>{if(hl(r))n(r);else{const s=hx(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Us(e)){const{mark:r,markDef:i,encoding:s}=e;if(yx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];gt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Bpn(e){const t={};if(Us(e)&&e.component.selection)for(const n of dt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&XT(i.field)>1&&(t[i.field]="flatten")}return t}class vu extends Si{clone(){return new vu(null,An(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${xr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Ov(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of dt(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:mt(h_e(a,r[a],u.value)))}for(const a of dt(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:mt(h_e(a,n[a],u)))}const s=new iy(n,r);i.copyAll(s);const o={};for(const a of dt(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return dt(o).length===0||i.parseNothing?null:new vu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of dt(this._parse)){const r=this._parse[n];XT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(dt(this._parse))}dependentFields(){return new Set(dt(this._parse))}assembleTransforms(t=!1){return dt(this._parse).filter(n=>t?XT(n)>1:!0).map(n=>{const r=Lpn(n,this._parse[n]);return r?{type:"formula",expr:r,as:_A(n)}:null}).filter(n=>n!==null)}}class w1 extends Si{clone(){return new w1(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Lh])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Lh}}}class CD extends Si{clone(){return new CD(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${xr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class AD extends Si{clone(){return new AD(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${xr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Pw extends Si{constructor(t){super(null),t??(t={name:"source"});let n;if(Ov(t)||(n=t.format?{...ic(t.format,["parse"])}:{}),TN(t))this._data={values:t.values};else if(iC(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Er(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else VUe(t)?this._data={values:[{type:"Sphere"}]}:(UUe(t)||Ov(t))&&(this._data={});this._generator=Ov(t),t.name&&(this._name=t.name),n&&!Ri(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var iwe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Upn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},MI;function sue(e){return e instanceof Pw||e instanceof CD||e instanceof AD}class oue{constructor(){MI.set(this,void 0),iwe(this,MI,!1,"f")}setModified(){iwe(this,MI,!0,"f")}get modifiedFlag(){return Upn(this,MI,"f")}}MI=new WeakMap;class bx extends oue{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class aue extends oue{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class zpn extends aue{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of dt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Vpn extends aue{constructor(t){super(),this.requiresSelectionId=t&&Zae(t)}run(t){t instanceof w1&&(this.requiresSelectionId&&(sue(t.parent)||t.parent instanceof Th||t.parent instanceof vu)||(this.setModified(),t.remove()))}}class Hpn extends oue{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof nm&&(r=t.producedFields(),Qoe(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class qpn extends aue{constructor(){super()}run(t){t instanceof oc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Wpn extends bx{run(t){if(!sue(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof vu)if(t instanceof vu)this.setModified(),t.merge(n);else{if(Joe(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Gpn extends bx{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof vu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of dt(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Ri(i)){this.setModified();const o=new vu(t,i);for(const a of n){if(a instanceof vu)for(const u of dt(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof vu&&dt(a.parse).length===0&&a.remove()}}}}}class Ypn extends bx{run(t){t instanceof oc||t.numChildren()>0||t instanceof TA||t instanceof Pw||(this.setModified(),t.remove())}}class Kpn extends bx{run(t){const n=t.children.filter(i=>i instanceof nm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Xpn extends bx{run(t){const n=t.children.filter(i=>i instanceof Th),r={};for(const i of n){const s=xr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of dt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Qpn extends bx{constructor(t){super(),this.model=t}run(t){const n=!(sue(t)||t instanceof SA||t instanceof vu||t instanceof w1),r=[],i=[];for(const s of t.children)s instanceof rm&&(n&&!Joe(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof rm?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Jpn extends bx{run(t){const n=[...t.children];if(!Ew(n,o=>o instanceof oc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof oc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof oc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class _x extends Si{clone(){return new _x(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Tt(t)}hash(){return`JoinAggregateTransform ${xr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Zpn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Tt(r);return i&&t.push(i),t},[])}function emn(e){return Je(e)&&e.every(t=>Dt(t))&&e.length>1}class t0 extends Si{clone(){return new t0(null,An(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(io(f.order,"ascending"));const l={field:a,order:u};let c;return emn(s)?c=s:Dt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new t0(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return wm(p)}).filter(h=>!!h),c=Zpn(n),f=n.encoding.order;let d;if(Je(f)||gt(f))d=u9e(f);else{const h=Q9e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new t0(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${xr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Tt(i,{binSuffix:"mid"})]:[Tt(i,{}),Tt(i,{binSuffix:"end"})]:[Tt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Tt(c,{expr:"datum"}),p=Tt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Tt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Tt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class CA extends Si{clone(){return new CA(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Tt(t)}hash(){return`WindowTransform ${xr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>aae(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function tmn(e){function t(n){if(!(n instanceof TA)){const r=n.clone();if(r instanceof oc){const i=AK+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Th||r instanceof t0||r instanceof CA||r instanceof _x)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function CK(e){if(e instanceof TA)if(e.numChildren()===1&&!(e.children[0]instanceof oc)){const t=e.children[0];(t instanceof Th||t instanceof t0||t instanceof CA||t instanceof _x)&&t.addDimensions(e.fields),t.swapWithParent(),CK(e)}else{const t=e.model.component.data.main;M7e(t);const n=tmn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(CK)}function M7e(e){if(e instanceof oc&&e.type===ms.Main&&e.numChildren()===1){const t=e.children[0];t instanceof TA||(t.swapWithParent(),M7e(e))}}const AK="scale_",J3=5;function IK(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!IK(t.children))return!1}return!0}function jd(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function swe(e,t,n){let r=e.sources,i=!1;return i=jd(new qpn,r)||i,i=jd(new Vpn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=jd(new Ypn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=jd(new Wpn,r)||i,i=jd(new Qpn(t),r)||i,i=jd(new Hpn,r)||i,i=jd(new Gpn,r)||i,i=jd(new Xpn,r)||i,i=jd(new Kpn,r)||i,i=jd(new zpn,r)||i,i=jd(new Jpn,r)||i),e.sources=r,i}function nmn(e,t){IK(e.sources);let n=0,r=0;for(let i=0;i<J3&&swe(e,t,!0);i++)n++;e.sources.map(CK);for(let i=0;i<J3&&swe(e,t,!1);i++)r++;IK(e.sources),Math.max(n,r)===J3&&mt(`Maximum optimization runs(${J3}) reached.`)}class ia{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ia(()=>t(n))}}function L7e(e){Us(e)?rmn(e):imn(e)}function rmn(e){const t=e.component.scales;for(const n of dt(t)){const r=omn(e,n);if(t[n].setWithExplicit("domains",r),umn(e,n),e.component.data.isFaceted){let s=e;for(;!Gc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Ug(a)&&(a.data=AK+a.data.replace(AK,""))}}}function imn(e){for(const n of e.children)L7e(n);const t=e.component.scales;for(const n of dt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=v1(r,o.getWithExplicit("domains"),"domains","scale",kK);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&mt(tln),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function smn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=owe(t,n);if(!i){mt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=owe(t,n);if(i)return"unaggregated"}return e}function omn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=smn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Bo(r.x2)?Bo(r.x)?v1(Iy(n,i,e,"x"),Iy(n,i,e,"x2"),"domain","scale",kK):Iy(n,i,e,"x2"):t==="y"&&Bo(r.y2)?Bo(r.y)?v1(Iy(n,i,e,"y"),Iy(n,i,e,"y2"),"domain","scale",kK):Iy(n,i,e,"y2"):Iy(n,i,e,t)}function amn(e,t,n){return e.map(r=>({signal:`{data: ${EB(r,{timeUnit:n,type:t})}}`}))}function PV(e,t,n){var i;const r=(i=pa(n))==null?void 0:i.unit;return t==="temporal"||r?amn(e,t,r):[e]}function Iy(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Bo(i[r]),{type:c}=l,f=l.timeUnit;if(Scn(t)){const p=Iy(e,void 0,n,r),m=PV(t.unionWith,c,f);return vp([...m,...p.value])}else{if(Qt(t))return vp([t]);if(t&&t!=="unaggregated"&&!$9e(t))return vp(PV(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ic([[0,1]]);const p=n.requestDataName(ms.Main);return Ic([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=ny(r)&&gt(l)?lmn(n,r,e):void 0;if(Vm(l)){const p=PV([l.datum],c,f);return Ic(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ms.Main),{field:m}=l;return Ic([{data:p,field:Tt({field:m,aggregate:"min"})},{data:p,field:Tt({field:m,aggregate:"max"})}])}else if(Gi(h.bin)){if(ma(e))return Ic(e==="bin-ordinal"?[]:[{data:xN(d)?n.requestDataName(ms.Main):n.requestDataName(ms.Raw),field:n.vgField(r,ED(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!Ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Gi(p)){const m=iue(n,h.field,p);return Ic([new ia(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ic([{data:n.requestDataName(ms.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Er(["time","utc"],e)){const p=i[Um(r)];if(X9e(h,p,s,a)){const m=n.requestDataName(ms.Main),g=y1({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=SN(o)&&g!==.5&&so(r);return Ic([{data:m,field:n.vgField(r,y?{suffix:kB}:{})},{data:m,field:n.vgField(r,{suffix:y?RB:"end"})}])}}return Ic(d?[{data:xN(d)?n.requestDataName(ms.Main):n.requestDataName(ms.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ms.Main),field:n.vgField(r)}])}function DV(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":vB),...r?{field:fd(r)}:{},...i?{order:i}:{}}}function umn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=$9e(r)&&r,o=px(i)&&fB(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function lmn(e,t,n){if(!ma(n))return;const r=e.fieldDef(t),i=r.sort;if(Y9e(i))return{op:"min",field:aC(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(tm(i)){const a=s&&!o.has(i.field);return DV(i,a)}else if(G9e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(R0(c)||eb(c))return DV({field:Tt(l),order:u},d);if(aae(c)||!c)return DV({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Er(["ascending",void 0],i))return!0}}function owe(e,t){const{aggregate:n,type:r}=e;return n?Dt(n)&&!Fun.has(n)?{valid:!1,reason:Aln(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Iln(e)}:{valid:!0}:{valid:!1,reason:Cln(e)}}function kK(e,t,n,r){return e.explicit&&t.explicit&&mt(Dln(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function cmn(e){const t=Bp(e.map(o=>{if(Ug(o)){const{sort:a,...u}=o;return u}return o}),xr),n=Bp(e.map(o=>{if(Ug(o)){const a=o.sort;return a!==void 0&&!xN(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),xr);if(t.length===0)return;if(t.length===1){const o=e[0];if(Ug(o)&&n.length>0){let a=n[0];if(n.length>1){mt(m_e);const u=n.filter(l=>Ot(l)&&"op"in l&&l.op!=="min");n.every(l=>Ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Bp(n.map(o=>xN(o)||!("op"in o)||Dt(o.op)&&o.op in Oun?o:(mt($ln(o)),!0)),xr);let i;r.length===1?i=r[0]:r.length>1&&(mt(m_e),i=!0);const s=Bp(e.map(o=>Ug(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function uue(e){if(Ug(e)&&Dt(e.field))return e.field;if(jun(e)){let t;for(const n of e.fields)if(Ug(n)&&Dt(n.field)){if(!t)t=n.field;else if(t!==n.field)return mt(Mln),t}return mt(Lln),t}else if(Bun(e)){mt(Fln);const t=e.fields[0];return Dt(t)?t:void 0}}function $B(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ug(i)&&(i.data=e.lookupDataSource(i.data)),i));return cmn(r)}function F7e(e){return AA(e)||lue(e)?e.children.reduce((t,n)=>t.concat(F7e(n)),awe(e)):awe(e)}function awe(e){return dt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=fmn(i.range,s,n,e),h=$B(e,n),p=a?shn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function fmn(e,t,n,r){if(so(n)){if(tb(e))return{step:{signal:`${t}_step`}}}else if(Ot(e)&&Ug(e))return{...e,data:r.lookupDataSource(e.data)};return e}class j7e extends iy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Ew(this.get("domains"),t=>Je(t)&&t.length===2&&Gr(t[0])&&t[0]<=0&&Gr(t[1])&&t[1]>=0)}}const dmn=["range","scheme"];function hmn(e){const t=e.component.scales;for(const n of cB){const r=t[n];if(!r)continue;const i=pmn(n,e);r.setWithExplicit("range",i)}}function uwe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=yc(t),o=e.getName(s);if(Ot(r)&&r.binned&&r.step!==void 0)return new ia(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Gi(r)){const a=iue(e,i,r);return new ia(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function pmn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of dmn)if(n[f]!==void 0){const d=hK(s,f),h=M9e(e,f);if(!d)mt(m9e(s,f,e));else if(h)mt(h);else switch(f){case"range":{const p=n.range;if(Je(p)){if(so(e))return vp(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return ia.fromName(y,g)}return m}))}else if(Ot(p))return vp({data:t.requestDataName(ms.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return vp(p)}case"scheme":return vp(mmn(n[f]))}}const o=e===ws||e==="xOffset"?"width":"height",a=r[o];if(xm(a)){if(so(e))if(ma(s)){const f=U7e(a,t,e);if(f)return vp({step:f})}else mt(g9e(o));else if(yD(e)){const f=e===K1?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=z7e(a,s);if(p)return vp(p)}}}const{rangeMin:u,rangeMax:l}=n,c=gmn(e,t);return(u!==void 0||l!==void 0)&&hK(s,"rangeMin")&&Je(c)&&c.length===2?vp([u??c[0],l??c[1]]):Ic(c)}function mmn(e){return Ecn(e)?{scheme:e.name,...ic(e,["name"])}:{scheme:e}}function B7e(e,t,n,{center:r}={}){const i=yc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===va&&lf(n)?r?[ia.fromName(a=>`${o(a)}/2`,s),ia.fromName(a=>`-${o(a)}/2`,s)]:[ia.fromName(o,s),0]:r?[ia.fromName(a=>`-${o(a)}/2`,s),ia.fromName(a=>`${o(a)}/2`,s)]:[0,ia.fromName(o,s)]}function gmn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Bo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ws:case va:{if(Er(["point","band"],u)){const f=V7e(e,n,r.view);if(xm(f))return{step:U7e(f,t,e)}}return B7e(e,t,u)}case K1:case wA:return ymn(e,t,u);case ey:{const f=t.component.scales[e].get("zero"),d=H7e(i,f,r),h=_mn(i,n,t,r);return eC(u)?bmn(d,h,vmn(u,r,l,e)):[d,h]}case xd:return[0,Math.PI*2];case dx:return[0,360];case Kh:return[0,new ia(()=>{const f=t.getSignalName(Gc(t.parent)?"child_width":"width"),d=t.getSignalName(Gc(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case J1:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Z1:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case gc:return"symbol";case mc:case jm:case Bm:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ty:case X1:case Q1:return[r.scale.minOpacity,r.scale.maxOpacity]}}function U7e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=rae(n),o=r[s];if(AUe({step:e,offsetIsDiscrete:Mn(o)&&R9e(o.type)})==="offset"&&uUe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Hun(f)})`}}else return e.step}function z7e(e,t){if(AUe({step:e,offsetIsDiscrete:ma(t)})==="offset")return{step:e.step}}function ymn(e,t,n){const r=e===K1?"x":"y",i=t.getScaleComponent(r);if(!i)return B7e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=V7e(r,t.size,t.config.view);if(xm(l)){const c=z7e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(gt(l)&&l.timeUnit){const c=C9e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=y1({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Qt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Qt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return MBe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function V7e(e,t,n){const r=e===ws?"width":"height",i=t[r];return i||a4(n,r)}function vmn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Je(n)?n.length+1:(mt(Gln(r)),3)}}function bmn(e,t,n){const r=()=>{const i=hh(t),s=hh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Qt(t)?new ia(r):{signal:r()}}function H7e(e,t,n){if(t)return Qt(t)?{signal:`${t.signal} ? 0 : ${H7e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(dB("size",e))}const lwe=.95;function _mn(e,t,n,r){const i={x:uwe(n,"x"),y:uwe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=cwe(t,i,r.view);return Gr(s)?s-1:new ia(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=cwe(t,i,r.view);return Gr(s)?Math.pow(lwe*s,2):new ia(()=>`pow(${lwe} * ${s.signal}, 2)`)}}throw new Error(dB("size",e))}function cwe(e,t,n){const r=xm(e.width)?e.width.step:o4(n,"width"),i=xm(e.height)?e.height.step:o4(n,"height");return t.x||t.y?new ia(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function q7e(e,t){Us(e)?wmn(e,t):G7e(e,t)}function wmn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of dt(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Bo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=hK(h,t),y=M9e(a,t);if(d!==void 0&&(g?y&&mt(y):mt(m9e(h,t,a))),g&&y===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":mx(u[t])||w==="temporal"||b?l.set(t,{signal:EB(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=t in fwe?fwe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:lUe(i,a),hasSecondaryRangeChannel:!!i[Um(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const fwe={bins:({model:e,fieldOrDatumDef:t})=>gt(t)?xmn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Emn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Smn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Tmn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Cmn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Amn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=gt(e)?e.sort:void 0;return Imn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>kmn(e,t,n,r,i,s.scale,o)};function W7e(e){Us(e)?hmn(e):G7e(e,"range")}function G7e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?W7e(r):q7e(r,t);for(const r of dt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=v1(i,a,t,"scale",BUe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function xmn(e,t){const n=t.bin;if(Gi(n)){const r=iue(e,t.field,n);return new ia(()=>e.getSignalName(r))}else if(Ra(n)&&px(n)&&n.step!==void 0)return{step:n.step}}function Emn(e,t){if(Er([mc,jm,Bm],e)&&t!=="nominal")return"hcl"}function Smn(e,t,n,r,i,s){var o;if(!((o=wm(s))!=null&&o.bin||Je(n)||i!=null||r!=null||Er([sc.TIME,sc.UTC],e)))return so(t)?!0:void 0}function Tmn(e,t,n,r,i,s){if(so(e)){if(ph(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(gt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===sc.POINT)return n.pointPadding}}function Cmn(e,t,n,r,i,s=!1){if(e===void 0){if(so(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:io(o,n==="bar"?a:u)}else if(yD(t)&&r===sc.BAND)return i.offsetBandPaddingInner}}function Amn(e,t,n,r,i,s=!1){if(e===void 0){if(so(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===sc.BAND)return io(o,Qt(r)?{signal:`${r.signal}/2`}:r/2)}else if(yD(t)){if(n===sc.POINT)return .5;if(n===sc.BAND)return i.offsetBandPaddingOuter}}}function Imn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return lf(e)&&t==="descending"?Qt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(lf(e)&&t==="descending")return!0}function kmn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&lf(i)){if(Je(n)){const u=n[0],l=n[n.length-1];if(Gr(u)&&u<=0&&Gr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!eC(i))return!0;if(!(gt(t)&&t.bin)&&Er([...zm,...Cun],e)){const{orient:u,type:l}=r;return Er(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Er(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Rmn(e,t,n,r,i=!1){const s=Nmn(t,n,r,i),{type:o}=e;return ny(t)?o!==void 0?Rcn(t,o)?gt(n)&&!kcn(o,n.type)?(mt(Nln(o,s)),s):o:(mt(Rln(t,o,s)),s):s:null}function Nmn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(LS(e)||SV(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&mt(TV(e,"ordinal")),"ordinal";if(so(e)||yD(e)){if(Er(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in oae)return"band";const s=n[yc(e)];return kw(s)||nC(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return LS(e)?"time":SV(e)==="discrete"?(mt(TV(e,"temporal")),"ordinal"):gt(t)&&t.timeUnit&&pa(t.timeUnit).utc?"utc":"time";case"quantitative":return LS(e)?gt(t)&&Gi(t.bin)?"bin-ordinal":"linear":SV(e)==="discrete"?(mt(TV(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(h9e(t.type))}function Pmn(e,{ignoreRange:t}={}){Y7e(e),L7e(e);for(const n of Icn)q7e(e,n);t||W7e(e)}function Y7e(e){Us(e)?e.component.scales=Dmn(e):e.component.scales=$mn(e)}function Dmn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of cB){const o=Bo(t[s]);if(o&&n===H9e&&s===gc&&o.type===xA)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=lUe(t,s),l=Rmn(a,s,o,r,u);i[s]=new j7e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Omn=BUe((e,t)=>y_e(e)-y_e(t));function $mn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Y7e(s);for(const o of dt(s.component.scales))if((t=i.scale)[o]??(t[o]=S7e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?vcn(a.value,u.value)?r[o]=v1(a,u,"type","scale",Omn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of dt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new j7e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class OV{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Us(e){return(e==null?void 0:e.type)==="unit"}function Gc(e){return(e==null?void 0:e.type)==="facet"}function lue(e){return(e==null?void 0:e.type)==="concat"}function AA(e){return(e==null?void 0:e.type)==="layer"}class cue{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Bl(a),this.name=t.name??i,this.title=Fy(t.title)?{text:t.title}:t.title?Bl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new OV,this.projectionNameMap=r?r.projectionNameMap:new OV,this.signalNameMap=r?r.signalNameMap:new OV,this.data=t.data,this.description=t.description,this.transforms=zdn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Wfn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:bB(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new iy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?An(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Pmn(this)}parseProjection(){O7e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){k7e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of dt(r)){const o=r[s];o!==void 0&&(i[s]=rs(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=rs(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ri(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=npn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Kf)t[r].title&&n.push(Xhn(this,r));for(const r of eue)n=n.concat(Qhn(this,r));return n}assembleAxes(){return Lhn(this.component.axes,this.config)}assembleLegends(){return N7e(this)}assembleProjections(){return Tpn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...i9e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Er(["unit","layer"],this.type)?Er(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ri(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Gc(this.parent)?F7e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return _s((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ms[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Gc(this.parent)){const n=x7e(t),r=lB(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ma(s)&&tb(o)){const a=i.get("name"),u=$B(this,r),l=uue(u);if(l){const c=Tt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:w7e(a,i,c)}}else return mt(lae(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(KBe(t)&&ny(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Kun(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class K7e extends cue{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Tt(r,n)}reduceFieldDef(t,n){return wfn(this.getMapping(),(r,i,s)=>{const o=wm(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Mae(this.getMapping(),(r,i)=>{const s=wm(r);s&&t(s,i)},n)}}class MB extends Si{clone(){return new MB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${xr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class LB extends Si{clone(){return new LB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${xr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class CN extends Si{clone(){return new CN(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(fi("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=ny(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");lf(d)&&l.aggregate!=="count"&&!yx(i)&&(u[l.field]=l)}return u},{});return dt(a).length?new CN(t,a):null}dependentFields(){return new Set(dt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${xr(this.filter)}`}assemble(){const t=dt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Tt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class FB extends Si{clone(){return new FB(this.parent,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${xr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class jB extends Si{clone(){return new jB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${xr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class BS extends Si{clone(){return new BS(null,An(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Qh,Xh],[dd,Jh]]){const s=i.map(o=>{const a=Bo(n.encoding[o]);return gt(a)?a.field:Vm(a)?{expr:`${a.datum}`}:Mh(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new BS(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(gc)){const i=n.typedFieldDef(gc);i.type===xA&&(t=new BS(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Dt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${xr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class AN extends Si{clone(){return new AN(null,this.projection,An(this.fields),An(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Qh,Xh],[dd,Jh]]){const i=r.map(o=>{const a=Bo(n.encoding[o]);return gt(a)?a.field:Vm(a)?{expr:`${a.datum}`}:Mh(a)?{expr:`${a.value}`}:void 0}),s=r[0]===dd?"2":"";(i[0]||i[1])&&(t=new AN(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Dt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${xr(this.fields)} ${xr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class z_ extends Si{clone(){return new z_(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new z_(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(gt(i)&&gt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=fUe(n.mark,r);return new z_(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${xr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Edn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class BB extends Si{clone(){return new BB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${xr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class IN extends Si{clone(){return new IN(null,An(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Sdn(o)){let u=J7e(o.data,s);u||(u=new Pw(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new oc(u,l,ms.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Tdn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(_s(u),u)}catch{throw new Error(Zun(u))}if(a=l.materialized,!a)throw new Error(eln(u))}return new IN(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${xr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Pt(this.transform.as)}:{}};else{let n=this.transform.as;Dt(n)||(mt(uln),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class UB extends Si{clone(){return new UB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${xr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class zB extends Si{clone(){return new zB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${xr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class VB extends Si{clone(){return new VB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${xr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class HB extends Si{clone(){return new HB(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${xr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function X7e(e){let t=0;function n(r,i){if(r instanceof Pw&&!r.isGenerator&&!iC(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof vu&&(r.parent instanceof Pw&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof TA){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof CD||r instanceof AD||r instanceof CN||r instanceof SA||r instanceof oC||r instanceof AN||r instanceof Th||r instanceof IN||r instanceof CA||r instanceof _x||r instanceof jB||r instanceof FB||r instanceof MB||r instanceof BB||r instanceof UB||r instanceof zB||r instanceof w1||r instanceof HB||r instanceof VB||r instanceof LB)&&i.transform.push(r.assemble()),(r instanceof rm||r instanceof nm||r instanceof z_||r instanceof t0||r instanceof BS)&&i.transform.push(...r.assemble()),r instanceof oc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof oc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof oc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Mmn(e){const t=[],n=X7e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Lmn(e,t){const n=[],r=X7e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Fmn(e){return e==="top"||e==="left"||Qt(e)?"header":"footer"}function jmn(e){for(const t of Kf)Bmn(e,t);dwe(e,"x"),dwe(e,"y")}function Bmn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=uC("title",null,r,t);let l=FS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=uC("labelOrient",a.header,r,t),f=a.header!==null?io((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Er(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Q7e(e,t,f)]}}}function Q7e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function dwe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=rue(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Fmn(a.get("orient"));o[u]??(o[u]=[Q7e(e,s,!1)]);const l=$I(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Umn(e){fue(e),f4(e,"width"),f4(e,"height")}function zmn(e){fue(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";f4(e,t),f4(e,n)}function fue(e){for(const t of e.children)t.parseLayoutSize()}function f4(e,t){const n=x7e(t),r=lB(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??S7e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=v1(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Vmn(e){const{size:t,component:n}=e;for(const r of zm){const i=yc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,xm(s)?"step":s,!0)}else{const s=Hmn(e,i);n.layoutSize.set(i,s,!1)}}}function Hmn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ma(s)){const a=a4(r.view,t);return tb(o)||xm(a)?"step":a}else return gK(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return gK(r.view,t);{const s=a4(r.view,t);return xm(s)?s.step:s}}}function RK(e,t,n){return Tt(t,{suffix:`by_${Tt(e)}`,...n})}class Fk extends K7e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=gue(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!wD(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=dt(t),r={};for(const i of n){if(![Jg,Zg].includes(i)){mt(dB(i,"facet"));break}const s=t[i];if(s.field===void 0){mt(fK(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Oae(t,n);return r.header?r.header=Bl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=qB(this),this.child.parseData()}parseLayoutSize(){fue(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),jmn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Kf)for(const r of tue){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=uC("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=DB(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Fk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Fk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Tt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Fk){if(this.child.channelHasField("column")){const i=Tt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of zm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ma(o)&&tb(a)){const u=$B(this.child,i),l=uue(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):mt(lae(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Kf){const f=this.facet[c];if(f){u.push(Tt(f));const{bin:d,sort:h}=f;if(Gi(d)&&u.push(Tt(f,{binSuffix:"end"})),tm(h)){const{field:p,op:m=vB}=h,g=RK(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Je(h)){const p=aC(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?tm(r.sort)?[RK(r,r.sort,{expr:"datum"})]:Je(r.sort)?[aC(r,t,{expr:"datum"})]:[Tt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(tm(i)?i.order:!Je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return SK(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of eue)if(t[s]){const o=uC("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return SK(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Mmn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Kf.map(u=>this.facetSortFields(u)).flat(),order:Kf.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(thn(this,[]))}]}getMapping(){return this.facet}}function qmn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(tm(s.sort)){const{field:o,op:a=vB}=s.sort;e=i=new _x(e,{joinaggregate:[{op:a,field:o,as:RK(s,s.sort,{forAs:!0})}],groupby:[Tt(s)]})}return i}return null}function J7e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(TN(e)&&TN(a)){if(zc(e.values,a.values))return o}else if(iC(e)&&iC(a)){if(e.url===a.url)return o}else if(UUe(e)&&e.name===o.dataName)return o}}return null}function Wmn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Pw({values:[]});return t.push(r),r}const n=J7e(e.data,t);if(n)return Ov(e.data)||(n.data.format=LBe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Pw(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Gmn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if($dn(i))o=e=new oC(e,i),s="derived";else if(Gae(i)){const a=Fpn(i);o=e=vu.makeWithAncestors(e,{},a,n)??e,e=new SA(e,t,i.filter)}else if(MUe(i))o=e=rm.makeFromTransform(e,i,t),s="number";else if(Ldn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new vu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=nm.makeFromTransform(e,i);else if(Fdn(i))o=e=Th.makeFromTransform(e,i),s="number",Zae(t)&&(e=new w1(e));else if($Ue(i))o=e=IN.make(e,t,i,r++),s="derived";else if(Pdn(i))o=e=new CA(e,i),s="number";else if(Ddn(i))o=e=new _x(e,i),s="number";else if(jdn(i))o=e=t0.makeFromTransform(e,i),s="derived";else if(Bdn(i))o=e=new jB(e,i),s="derived";else if(Udn(i))o=e=new LB(e,i),s="derived";else if(Odn(i))o=e=new FB(e,i),s="derived";else if(Cdn(i))o=e=new VB(e,i),s="derived";else if(Ndn(i))e=new HB(e,i);else if(Mdn(i))o=e=z_.makeFromTransform(e,i),s="derived";else if(Adn(i))o=e=new MB(e,i),s="derived";else if(Idn(i))o=e=new UB(e,i),s="derived";else if(kdn(i))o=e=new zB(e,i),s="derived";else if(Rdn(i))o=e=new BB(e,i),s="derived";else{mt(aln(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function qB(e){var h;let t=Wmn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Ov(i)||iC(i)||TN(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Zdn;Ov(i)?(zUe(i)?t=new AD(t,i.sequence):Yae(i)&&(t=new CD(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=vu.makeExplicit(t,e,o)??t,t=new w1(t);const a=e.parent&&AA(e.parent);(Us(e)||Gc(e))&&a&&(t=rm.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Gmn(t,e,o));const u=Bpn(e),l=jpn(e);t=vu.makeWithAncestors(t,{},{...u,...l},o)??t,Us(e)&&(t=BS.parseAll(t,e),t=AN.parseAll(t,e)),(Us(e)||Gc(e))&&(a||(t=rm.makeFromEncoding(t,e)??t),t=nm.makeFromEncoding(t,e)??t,t=oC.parseAllForSortIndex(t,e));const c=t=hwe(ms.Raw,e,t);if(Us(e)){const p=Th.makeFromEncoding(t,e);p&&(t=p,Zae(e)&&(t=new w1(t))),t=z_.makeFromEncoding(t,e)??t,t=t0.makeFromEncoding(t,e)??t}Us(e)&&(t=CN.make(t,e)??t);const f=t=hwe(ms.Main,e,t);Us(e)&&$hn(e,f);let d=null;if(Gc(e)){const p=e.getName("facet");t=qmn(t,e.facet)??t,d=new TA(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function hwe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new oc(n,s,e,i);return r[s]=o,o}class Ymn extends cue{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&mt(iln),this.children=this.getChildren(t).map((l,c)=>gue(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=qB(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of dt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return CB(t)?t.vconcat:qae(t)?t.hconcat:t.concat}parseLayoutSize(){zmn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=nue(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Kmn(e){return e===!1||e===null}const Xmn={disable:1,gridScale:1,scale:1,...oUe,labelExpr:1,encode:1},Z7e=dt(Xmn);class due extends iy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new due(An(this.explicit),An(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Kmn(this.get(t))}hasOrientSignalRef(){return Qt(this.explicit.orient)}}function Qmn(e,t,n){const{encoding:r,config:i}=e,s=Bo(r[t])??Bo(r[Um(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Iw(u))return{text:mh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(tC(s)==="quantitative"){if(nC(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:mh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:mh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(tC(s)==="temporal"&&i.timeFormatType&&gt(s)&&!s.timeUnit)return{text:mh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Jmn(e){return zm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[sgn(n,e)]),t),{})}const Zmn={bottom:"top",top:"bottom",left:"right",right:"left"};function egn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of dt(i.component.axes))n.axis[s]=rue(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=tgn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of zm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Qt(a)){if(r[a]>0&&!u){const l=Zmn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function tgn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=ngn(i,s)}}}else return t.map(n=>n.clone());return e}function ngn(e,t){for(const n of Z7e){const r=v1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return f9e(i,s);case"gridScale":return{explicit:i.explicit,value:io(i.value,s.value)}}return IB(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function rgn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Qt(n.labelAngle)?n.labelAngle:EN(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===y7e(r,i))return!0}return e===n[t]}const ign=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function sgn(e,t){var y,b;let n=t.axis(e);const r=new due,i=Bo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((b=o.axis)==null?void 0:b.orient)||qhn(e),u=t.getScaleComponent(e).get("type"),l=Fhn(e,u,a,t.config),c=n!==void 0?!n:xK("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=zhn(i,n,e,o.style,l),d=B9e(n.formatType,i,u),h=j9e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const w of Z7e){const E=w in Q_e?Q_e[w](p):S_e(w)?n[w]:void 0,S=E!==void 0,T=rgn(E,w,n,t,e);if(S&&T)r.set(w,E,T);else{const{configValue:C=void 0,configFrom:I=void 0}=S_e(w)&&w!=="values"?xK(w,o.style,n.style,l):{},R=C!==void 0;S&&!R?r.set(w,E,T):(I!=="vgAxisConfig"||ign.has(w)&&R||SD(C)||Qt(C))&&r.set(w,C,!1)}}const m=n.encoding??{},g=sUe.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const S=E7e(m[E]??{},t),T=E==="labels"?Qmn(t,e,S):S;return T!==void 0&&!Ri(T)&&(w[E]={update:T}),w},{});return Ri(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function ogn({encoding:e,size:t}){for(const n of zm){const r=yc(n);xm(t[r])&&lv(e[n])&&(delete t[r],mt(g9e(r)))}return t}const agn={vgMark:"arc",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...yu("x",e,{defaultPos:"mid"}),...yu("y",e,{defaultPos:"mid"}),...b1(e,"radius"),...b1(e,"theta")})},ugn={vgMark:"area",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...u4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...u4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Jae(e)})},lgn={vgMark:"rect",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...b1(e,"x"),...b1(e,"y")})},cgn={vgMark:"shape",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gt(n)&&n.type===xA?{field:Tt(n,{expr:"datum"})}:{}}]}},fgn={vgMark:"image",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...b1(e,"x"),...b1(e,"y"),...Xae(e,"url")})},dgn={vgMark:"line",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...yu("x",e,{defaultPos:"mid"}),...yu("y",e,{defaultPos:"mid"}),...oa("size",e,{vgChannel:"strokeWidth"}),...Jae(e)})},hgn={vgMark:"trail",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...yu("x",e,{defaultPos:"mid"}),...yu("y",e,{defaultPos:"mid"}),...oa("size",e),...Jae(e)})};function hue(e,t){const{config:n}=e;return{...Ed(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...yu("x",e,{defaultPos:"mid"}),...yu("y",e,{defaultPos:"mid"}),...oa("size",e),...oa("angle",e),...pgn(e,n,t)}}function pgn(e,t,n){return n?{shape:{value:n}}:oa("shape",e)}const mgn={vgMark:"symbol",encodeEntry:e=>hue(e)},ggn={vgMark:"symbol",encodeEntry:e=>hue(e,"circle")},ygn={vgMark:"symbol",encodeEntry:e=>hue(e,"square")},vgn={vgMark:"rect",encodeEntry:e=>({...Ed(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...b1(e,"x"),...b1(e,"y")})},bgn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ed(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...u4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...u4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...oa("size",e,{vgChannel:"strokeWidth"})}}},_gn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ed(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...yu("x",e,{defaultPos:"mid"}),...yu("y",e,{defaultPos:"mid"}),...Xae(e),...oa("size",e,{vgChannel:"fontSize"}),...oa("angle",e),...G_e("align",wgn(e.markDef,n,t)),...G_e("baseline",xgn(e.markDef,n,t)),...yu("radius",e,{defaultPos:null}),...yu("theta",e,{defaultPos:null})}}};function wgn(e,t,n){if(fi("align",e,n)===void 0)return"center"}function xgn(e,t,n){if(fi("baseline",e,n)===void 0)return"middle"}const Egn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Ed(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...yu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...oa("size",e,{defaultValue:Sgn(e),vgChannel:i}),[s]:rs(fi("thickness",n,t))}}};function Sgn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=fi("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&tb(a)&&Gr(a.step)?a.step*3/4:o4(t.view,i)*3/4}}const Z3={arc:agn,area:ugn,bar:lgn,circle:ggn,geoshape:cgn,image:fgn,line:dgn,point:mgn,rect:vgn,rule:bgn,square:ygn,text:_gn,tick:Egn,trail:hgn};function Tgn(e){if(Er([gB,pB,Bcn],e.mark)){const t=fUe(e.mark,e.encoding);if(t.length>0)return Cgn(e,t)}else if(e.mark===mB){const t=cK.some(n=>fi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Agn(e)}return pue(e)}const pwe="faceted_path_";function Cgn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:pwe+e.requestDataName(ms.Main),data:e.requestDataName(ms.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:pue(e,{fromPrefix:pwe})}]}const mwe="stack_group_";function Agn(e){var l;const[t]=pue(e,{fromPrefix:mwe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...KT(t.encode.update,["y","yc","y2","height",...cK]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ic(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...KT(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ic(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of cK){const f=N0(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=rs(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Tt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Tt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=N0(f,e.markDef,e.config);return d!==void 0?{...c,[f]:rs(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ms.Main),name:mwe+e.requestDataName(ms.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Ign(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Je(o)&&Mh(o)&&uK(o.value)||!o&&uK(fi("order",i,s)))){if((Je(o)||gt(o))&&!n)return u9e(o,{expr:"datum"});if(yx(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(gt(l)){const c=l.sort;if(Je(c))return{field:Tt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(tm(c))return{field:Tt({aggregate:$ae(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(G9e(c)){const f=e.fieldDef(c.encoding);return{field:Tt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Tt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function pue(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=io(r.clip,kgn(e),Rgn(e)),a=o9e(r),u=i.key,l=Ign(e),c=Ngn(e),f=fi("aria",r,s),d=Z3[n].postEncodingTransform?Z3[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Z3[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ms.Main)},encode:{update:Z3[n].encodeEntry(e)},...d?{transform:d}:{}}]}function kgn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Rgn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Ngn(e){if(!e.component.selection)return null;const t=dt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=dt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class eze extends K7e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,C_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=_m(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=mdn(o,s,{graticule:t.data&&Yae(t.data)}));const u=this.encoding=bfn(t.encoding||{},a,o.filled,s);this.markDef=PUe(o,u,s),this.size=ogn({encoding:u,size:C_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=NUe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Vae(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===H9e,r=t&&yun.some(i=>Mn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return cB.reduce((r,i)=>{const s=Bo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Bl(t);return Je(n)&&(i.domain=n.map(Mc)),Je(r)&&(i.range=r.map(Mc)),i}initAxes(t){return zm.reduce((n,r)=>{const i=t[r];if(Mn(i)||r===ws&&Mn(t.x2)||r===va&&Mn(t.y2)){const s=Mn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=dt(t),r={};for(const i of n){const s=t[i];r[i]=SD(s)?s9e(s):Mc(s)}return r}initLegends(t){return Aun.reduce((n,r)=>{const i=Bo(t[r]);if(i&&kun(r)){const s=i.legend;n[r]=s&&Bl(s)}return n},{})}parseData(){this.component.data=qB(this)}parseLayoutSize(){Vmn(this)}parseSelections(){this.component.selection=Ohn(this,this.selection)}parseMarkGroup(){this.component.mark=Tgn(this)}parseAxesAndHeaders(){this.component.axes=Jmn(this)}assembleSelectionTopLevelSignals(t){return nhn(this,t)}assembleSignals(){return[...p7e(this),...ehn(this,[])]}assembleSelectionData(t){return rhn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return nue(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!AA(this.parent))&&(t=qUe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return B_(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return wm(n)}typedFieldDef(t){const n=this.fieldDef(t);return hl(n)?n:null}}class mue extends cue{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(AB(a))return new mue(a,this,this.getName(`layer_${u}`),o,s);if(ry(a))return new eze(a,this,this.getName(`layer_${u}`),o,s);throw new Error(uae(a))})}parseData(){this.component.data=qB(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Umn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of dt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){egn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),p7e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),nue(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ihn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),N7e(this))}}function gue(e,t,n,r,i){if(bB(e))return new Fk(e,t,n,i);if(AB(e))return new mue(e,t,n,r,i);if(ry(e))return new eze(e,t,n,r,i);if(Vfn(e))return new Ymn(e,t,n,i);throw new Error(uae(e))}function Pgn(e,t={}){t.logger&&Yln(t.logger),t.fieldTitle&&nUe(t.fieldTitle);try{const n=RUe(lA(t.config,e.config)),r=jUe(e,n),i=gue(r,null,"",void 0,n);return i.parse(),nmn(i.component.data,i),{spec:Ogn(i,Dgn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Kln(),t.fieldTitle&&cfn()}}function Dgn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Dt(t)&&(t={type:t}),i&&s&&Xdn(t.type)){if(i==="step"&&s==="step")mt(c_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";mt(c_e(lB(o)));const a=o==="width"?"height":"width";t.type=Qdn(a)}}return{...dt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...F_e(n,!1),...F_e(e,!0)}}function Ogn(e,t,n={},r){const i=e.config?rdn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Lmn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...CUe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const $gn=fun.version,Mgn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:XT,accessPathWithDatum:Zoe,compile:Pgn,contains:Er,deepEqual:zc,deleteNestedProperty:XF,duplicate:An,entries:m1,every:Xoe,fieldIntersection:Joe,flatAccessWithDatum:jBe,getFirstDefined:io,hasIntersection:Qoe,hash:xr,internalField:zBe,isBoolean:xN,isEmpty:Ri,isEqual:hun,isInternalField:VBe,isNullOrFalse:uK,isNumeric:rB,keys:dt,logicalExpr:Mk,mergeDeep:LBe,never:MBe,normalize:jUe,normalizeAngle:EN,omit:ic,pick:KT,prefixGenerator:lK,removePathFromField:_A,replaceAll:Sw,replacePathInField:fd,resetIdCounter:mun,setEqual:FBe,some:Ew,stringify:Ni,titleCase:pD,unique:Bp,uniqueId:UBe,vals:Ba,varName:_s,version:$gn},Symbol.toStringTag,{value:"Module"}));function tze(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Lgn="vega-themes",Fgn="2.15.0",jgn="Themes for stylized Vega and Vega-Lite visualizations.",Bgn=["vega","vega-lite","themes","style"],Ugn="BSD-3-Clause",zgn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Vgn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Hgn="build/vega-themes.js",yue="build/vega-themes.module.js",qgn="build/vega-themes.min.js",Wgn="build/vega-themes.min.js",Ggn="build/vega-themes.module.d.ts",Ygn={type:"git",url:"https://github.com/vega/vega-themes.git"},Kgn=["src","build"],Xgn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Qgn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Jgn={vega:"*","vega-lite":"*"},Zgn={},e0n={name:Lgn,version:Fgn,description:jgn,keywords:Bgn,license:Ugn,author:zgn,contributors:Vgn,main:Hgn,module:yue,unpkg:qgn,jsdelivr:Wgn,types:Ggn,repository:Ygn,files:Kgn,scripts:Xgn,devDependencies:Qgn,peerDependencies:Jgn,dependencies:Zgn};const fE="#fff",gwe="#888",t0n={background:"#333",view:{stroke:gwe},title:{color:fE,subtitleColor:fE},style:{"guide-label":{fill:fE},"guide-title":{fill:fE}},axis:{domainColor:fE,gridColor:gwe,tickColor:fE}},Cb="#4572a7",n0n={background:"#fff",arc:{fill:Cb},area:{fill:Cb},line:{stroke:Cb,strokeWidth:2},path:{stroke:Cb},rect:{fill:Cb},shape:{stroke:Cb},symbol:{fill:Cb,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Ab="#30a2da",$V="#cbcbcb",r0n="#999",i0n="#333",ywe="#f0f0f0",vwe="#333",s0n={arc:{fill:Ab},area:{fill:Ab},axis:{domainColor:$V,grid:!0,gridColor:$V,gridWidth:1,labelColor:r0n,labelFontSize:10,titleColor:i0n,tickColor:$V,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:ywe,group:{fill:ywe},legend:{labelColor:vwe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:vwe,titleFontSize:14,titlePadding:10},line:{stroke:Ab,strokeWidth:2},path:{stroke:Ab,strokeWidth:.5},rect:{fill:Ab},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Ab},bar:{binSpacing:2,fill:Ab,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ib="#000",o0n={group:{fill:"#e5e5e5"},arc:{fill:Ib},area:{fill:Ib},line:{stroke:Ib},path:{stroke:Ib},rect:{fill:Ib},shape:{stroke:Ib},symbol:{fill:Ib,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},a0n=22,u0n="normal",bwe="Benton Gothic, sans-serif",_we=11.5,l0n="normal",kb="#82c6df",MV="Benton Gothic Bold, sans-serif",wwe="normal",xwe=13,U2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},c0n={background:"#ffffff",title:{anchor:"start",color:"#000000",font:MV,fontSize:a0n,fontWeight:u0n},arc:{fill:kb},area:{fill:kb},line:{stroke:kb,strokeWidth:2},path:{stroke:kb},rect:{fill:kb},shape:{stroke:kb},symbol:{fill:kb,size:30},axis:{labelFont:bwe,labelFontSize:_we,labelFontWeight:l0n,titleFont:MV,titleFontSize:xwe,titleFontWeight:wwe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:bwe,labelFontSize:_we,symbolType:"square",titleFont:MV,titleFontSize:xwe,titleFontWeight:wwe},range:{category:U2["category-6"],diverging:U2["fireandice-6"],heatmap:U2["fire-7"],ordinal:U2["fire-7"],ramp:U2["fire-7"]}},Rb="#ab5787",e$="#979797",f0n={background:"#f9f9f9",arc:{fill:Rb},area:{fill:Rb},line:{stroke:Rb},path:{stroke:Rb},rect:{fill:Rb},shape:{stroke:Rb},symbol:{fill:Rb,size:30},axis:{domainColor:e$,domainWidth:.5,gridWidth:.2,labelColor:e$,tickColor:e$,tickWidth:.2,titleColor:e$},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Nb="#3e5c69",d0n={background:"#fff",arc:{fill:Nb},area:{fill:Nb},line:{stroke:Nb},path:{stroke:Nb},rect:{fill:Nb},shape:{stroke:Nb},symbol:{fill:Nb},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Nf="#1696d2",Ewe="#000000",h0n="#FFFFFF",t$="Lato",LV="Lato",p0n="Lato",m0n="#DEDDDD",g0n=18,z2={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},y0n={background:h0n,title:{anchor:"start",fontSize:g0n,font:t$},axisX:{domain:!0,domainColor:Ewe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:LV,labelAngle:0,tickColor:Ewe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:t$},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:m0n,gridWidth:1,labelFontSize:12,labelFont:LV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:t$,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:LV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:t$,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:z2["six-groups-cat-1"],diverging:z2["diverging-colors"],heatmap:z2["diverging-colors"],ordinal:z2["six-groups-seq"],ramp:z2["shades-blue"]},area:{fill:Nf},rect:{fill:Nf},line:{color:Nf,stroke:Nf,strokeWidth:5},trail:{color:Nf,stroke:Nf,strokeWidth:0,size:1},path:{stroke:Nf,strokeWidth:.5},point:{filled:!0},text:{font:p0n,color:Nf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Nf,stroke:null}},arc:{fill:Nf},shape:{stroke:Nf},symbol:{fill:Nf,size:30}},Pb="#3366CC",Swe="#ccc",n$="Arial, sans-serif",v0n={arc:{fill:Pb},area:{fill:Pb},path:{stroke:Pb},rect:{fill:Pb},shape:{stroke:Pb},symbol:{stroke:Pb},circle:{fill:Pb},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:n$,fontSize:12},"guide-title":{font:n$,fontSize:12},"group-title":{font:n$,fontSize:12}},title:{font:n$,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Swe,tickColor:Swe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},vue=e=>e*(1/3+1),Twe=vue(9),Cwe=vue(10),Awe=vue(12),V2="Segoe UI",Iwe="wf_standard-font, helvetica, arial, sans-serif",kwe="#252423",H2="#605E5C",Rwe="transparent",b0n="#C8C6C4",Hd="#118DFF",_0n="#12239E",w0n="#E66C37",x0n="#6B007B",E0n="#E044A7",S0n="#744EC2",T0n="#D9B300",C0n="#D64550",nze=Hd,rze="#DEEFFF",Nwe=[rze,nze],A0n=[rze,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",nze],I0n={view:{stroke:Rwe},background:Rwe,font:V2,header:{titleFont:Iwe,titleFontSize:Awe,titleColor:kwe,labelFont:V2,labelFontSize:Cwe,labelColor:H2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:H2,labelFontSize:Twe,titleFont:Iwe,titleColor:kwe,titleFontSize:Awe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:b0n,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hd},line:{stroke:Hd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:V2,fontSize:Twe,fill:H2},arc:{fill:Hd},area:{fill:Hd,line:!0,opacity:.6},path:{stroke:Hd},rect:{fill:Hd},point:{fill:Hd,filled:!0,size:75},shape:{stroke:Hd},symbol:{fill:Hd,strokeWidth:1.5,size:50},legend:{titleFont:V2,titleFontWeight:"bold",titleColor:H2,labelFont:V2,labelFontSize:Cwe,labelColor:H2,symbolType:"circle",symbolSize:75},range:{category:[Hd,_0n,w0n,x0n,E0n,S0n,T0n,C0n],diverging:Nwe,heatmap:Nwe,ordinal:A0n}},FV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',k0n='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',jV=400,r$={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},R0n=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],N0n=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function WB({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=r$.gridBg[e],i=r$.textPrimary[e],s=r$.textSecondary[e],o=n==="dark"?R0n:N0n,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:FV,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:k0n,labelFontWeight:jV,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:r$.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:FV,fill:s,fontWeight:jV},"guide-title":{font:FV,fill:s,fontWeight:jV}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const P0n=WB({theme:"white",background:"#ffffff"}),D0n=WB({theme:"g10",background:"#f4f4f4"}),O0n=WB({theme:"g90",background:"#262626"}),$0n=WB({theme:"g100",background:"#161616"}),M0n=e0n.version,L0n=Object.freeze(Object.defineProperty({__proto__:null,carbong10:D0n,carbong100:$0n,carbong90:O0n,carbonwhite:P0n,dark:t0n,excel:n0n,fivethirtyeight:s0n,ggplot2:o0n,googlecharts:v0n,latimes:c0n,powerbi:I0n,quartz:f0n,urbaninstitute:y0n,version:M0n,vox:d0n},Symbol.toStringTag,{value:"Module"}));function F0n(e,t,n,r){if(Je(e))return`[${e.map(i=>t(Dt(i)?i:Pwe(i,n))).join(", ")}]`;if(Ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ot(c)&&(c=Pwe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function j0n(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Pwe(e,t){return JSON.stringify(e,j0n(t))}var B0n=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const ize="vg-tooltip-element",U0n={offsetX:10,offsetY:10,id:ize,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:z0n,maxDepth:2,formatTooltip:F0n,baseURL:""};function z0n(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function V0n(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return B0n.toString().replace(ize,e)}function H0n(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class q0n{constructor(t){this.options={...U0n,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=V0n(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=H0n(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var BV={};function W0n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UV,Dwe;function G0n(){return Dwe||(Dwe=1,UV=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),UV}var Y0n=ni;ni.Node=Dw;ni.create=ni;function ni(e){var t=this;if(t instanceof ni||(t=new ni),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ni.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ni.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ni.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ni.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)X0n(this,arguments[e]);return this.length};ni.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Q0n(this,arguments[e]);return this.length};ni.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ni.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ni.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ni.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ni.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ni.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ni.prototype.map=function(e,t){t=t||this;for(var n=new ni,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ni.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ni,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ni.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ni.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ni.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ni.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ni.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ni;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ni.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ni;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ni.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=K0n(this,i,n[r]);return s};ni.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function K0n(e,t,n){var r=t===e.head?new Dw(n,null,t,e):new Dw(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function X0n(e,t){e.tail=new Dw(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Q0n(e,t){e.head=new Dw(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Dw(e,t,n,r){if(!(this instanceof Dw))return new Dw(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{G0n()(ni)}catch{}const J0n=Y0n,a_=Symbol("max"),wg=Symbol("length"),dE=Symbol("lengthCalculator"),jk=Symbol("allowStale"),I_=Symbol("maxAge"),gg=Symbol("dispose"),Owe=Symbol("noDisposeOnSet"),Zo=Symbol("lruList"),Wd=Symbol("cache"),sze=Symbol("updateAgeOnGet"),zV=()=>1;class Z0n{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[a_]=t.max||1/0;const n=t.length||zV;if(this[dE]=typeof n!="function"?zV:n,this[jk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[I_]=t.maxAge||0,this[gg]=t.dispose,this[Owe]=t.noDisposeOnSet||!1,this[sze]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[a_]=t||1/0,q2(this)}get max(){return this[a_]}set allowStale(t){this[jk]=!!t}get allowStale(){return this[jk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[I_]=t,q2(this)}get maxAge(){return this[I_]}set lengthCalculator(t){typeof t!="function"&&(t=zV),t!==this[dE]&&(this[dE]=t,this[wg]=0,this[Zo].forEach(n=>{n.length=this[dE](n.value,n.key),this[wg]+=n.length})),q2(this)}get lengthCalculator(){return this[dE]}get length(){return this[wg]}get itemCount(){return this[Zo].length}rforEach(t,n){n=n||this;for(let r=this[Zo].tail;r!==null;){const i=r.prev;$we(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Zo].head;r!==null;){const i=r.next;$we(this,t,r,n),r=i}}keys(){return this[Zo].toArray().map(t=>t.key)}values(){return this[Zo].toArray().map(t=>t.value)}reset(){this[gg]&&this[Zo]&&this[Zo].length&&this[Zo].forEach(t=>this[gg](t.key,t.value)),this[Wd]=new Map,this[Zo]=new J0n,this[wg]=0}dump(){return this[Zo].map(t=>d4(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Zo]}set(t,n,r){if(r=r||this[I_],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[dE](n,t);if(this[Wd].has(t)){if(s>this[a_])return US(this,this[Wd].get(t)),!1;const u=this[Wd].get(t).value;return this[gg]&&(this[Owe]||this[gg](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[wg]+=s-u.length,u.length=s,this.get(t),q2(this),!0}const o=new eyn(t,n,s,i,r);return o.length>this[a_]?(this[gg]&&this[gg](t,n),!1):(this[wg]+=o.length,this[Zo].unshift(o),this[Wd].set(t,this[Zo].head),q2(this),!0)}has(t){if(!this[Wd].has(t))return!1;const n=this[Wd].get(t).value;return!d4(this,n)}get(t){return VV(this,t,!0)}peek(t){return VV(this,t,!1)}pop(){const t=this[Zo].tail;return t?(US(this,t),t.value):null}del(t){US(this,this[Wd].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Wd].forEach((t,n)=>VV(this,n,!1))}}const VV=(e,t,n)=>{const r=e[Wd].get(t);if(r){const i=r.value;if(d4(e,i)){if(US(e,r),!e[jk])return}else n&&(e[sze]&&(r.value.now=Date.now()),e[Zo].unshiftNode(r));return i.value}},d4=(e,t)=>{if(!t||!t.maxAge&&!e[I_])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[I_]&&n>e[I_]},q2=e=>{if(e[wg]>e[a_])for(let t=e[Zo].tail;e[wg]>e[a_]&&t!==null;){const n=t.prev;US(e,t),t=n}},US=(e,t)=>{if(t){const n=t.value;e[gg]&&e[gg](n.key,n.value),e[wg]-=n.length,e[Wd].delete(n.key),e[Zo].removeNode(t)}};class eyn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const $we=(e,t,n,r)=>{let i=n.value;d4(e,i)&&(US(e,n),e[jk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var tyn=Z0n;const nyn=Object.freeze({loose:!0}),ryn=Object.freeze({}),iyn=e=>e?typeof e!="object"?nyn:e:ryn;var bue=iyn,NK={exports:{}};const syn="2.0.0",oze=256,oyn=Number.MAX_SAFE_INTEGER||9007199254740991,ayn=16,uyn=oze-6,lyn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var _ue={MAX_LENGTH:oze,MAX_SAFE_COMPONENT_LENGTH:ayn,MAX_SAFE_BUILD_LENGTH:uyn,MAX_SAFE_INTEGER:oyn,RELEASE_TYPES:lyn,SEMVER_SPEC_VERSION:syn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const cyn=typeof process=="object"&&BV&&BV.NODE_DEBUG&&/\bsemver\b/i.test(BV.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var GB=cyn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=_ue,s=GB;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const b=h(g),w=c++;s(m,w,g),l[m]=w,u[w]=g,o[w]=new RegExp(g,y?"g":void 0),a[w]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(NK,NK.exports);var wue=NK.exports;const Mwe=/^[0-9]+$/,aze=(e,t)=>{const n=Mwe.test(e),r=Mwe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},fyn=(e,t)=>aze(t,e);var dyn={compareIdentifiers:aze,rcompareIdentifiers:fyn};const i$=GB,{MAX_LENGTH:Lwe,MAX_SAFE_INTEGER:s$}=_ue,{safeRe:Fwe,t:jwe}=wue,hyn=bue,{compareIdentifiers:hE}=dyn;let pyn=class lp{constructor(t,n){if(n=hyn(n),t instanceof lp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Lwe)throw new TypeError(`version is longer than ${Lwe} characters`);i$("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Fwe[jwe.LOOSE]:Fwe[jwe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s$||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s$||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s$||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<s$)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(i$("SemVer.compare",this.version,this.options,t),!(t instanceof lp)){if(typeof t=="string"&&t===this.version)return 0;t=new lp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof lp||(t=new lp(t,this.options)),hE(this.major,t.major)||hE(this.minor,t.minor)||hE(this.patch,t.patch)}comparePre(t){if(t instanceof lp||(t=new lp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(i$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return hE(r,i)}while(++n)}compareBuild(t){t instanceof lp||(t=new lp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(i$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return hE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),hE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var xue=pyn;const Bwe=xue,myn=(e,t,n)=>new Bwe(e,n).compare(new Bwe(t,n));var IA=myn;const gyn=IA,yyn=(e,t,n)=>gyn(e,t,n)===0;var vyn=yyn;const byn=IA,_yn=(e,t,n)=>byn(e,t,n)!==0;var wyn=_yn;const xyn=IA,Eyn=(e,t,n)=>xyn(e,t,n)>0;var Syn=Eyn;const Tyn=IA,Cyn=(e,t,n)=>Tyn(e,t,n)>=0;var Ayn=Cyn;const Iyn=IA,kyn=(e,t,n)=>Iyn(e,t,n)<0;var Ryn=kyn;const Nyn=IA,Pyn=(e,t,n)=>Nyn(e,t,n)<=0;var Dyn=Pyn;const Oyn=vyn,$yn=wyn,Myn=Syn,Lyn=Ayn,Fyn=Ryn,jyn=Dyn,Byn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Oyn(e,n,r);case"!=":return $yn(e,n,r);case">":return Myn(e,n,r);case">=":return Lyn(e,n,r);case"<":return Fyn(e,n,r);case"<=":return jyn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Uyn=Byn,HV,Uwe;function zyn(){if(Uwe)return HV;Uwe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}HV=t;const n=bue,{safeRe:r,t:i}=wue,s=Uyn,o=GB,a=xue,u=uze();return HV}var qV,zwe;function uze(){if(zwe)return qV;zwe=1;class e{constructor(F,z){if(z=r(z),F instanceof e)return F.loose===!!z.loose&&F.includePrerelease===!!z.includePrerelease?F:new e(F.raw,z);if(F instanceof i)return this.raw=F.value,this.set=[[F]],this.format(),this;if(this.options=z,this.loose=!!z.loose,this.includePrerelease=!!z.includePrerelease,this.raw=F.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(H=>!p(H[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&m(H[0])){this.set=[H];break}}}this.format()}format(){return this.range=this.set.map(F=>F.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(F){const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+F,H=n.get(B);if(H)return H;const q=this.options.loose,Y=q?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];F=F.replace(Y,D(this.options.includePrerelease)),s("hyphen replace",F),F=F.replace(a[u.COMPARATORTRIM],l),s("comparator trim",F),F=F.replace(a[u.TILDETRIM],c),s("tilde trim",F),F=F.replace(a[u.CARETTRIM],f),s("caret trim",F);let $=F.split(" ").map(K=>y(K,this.options)).join(" ").split(/\s+/).map(K=>P(K,this.options));q&&($=$.filter(K=>(s("loose invalid filter",K,this.options),!!K.match(a[u.COMPARATORLOOSE])))),s("range list",$);const W=new Map,X=$.map(K=>new i(K,this.options));for(const K of X){if(p(K))return[K];W.set(K.value,K)}W.size>1&&W.has("")&&W.delete("");const V=[...W.values()];return n.set(B,V),V}intersects(F,z){if(!(F instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>g(B,z)&&F.set.some(H=>g(H,z)&&B.every(q=>H.every(Y=>q.intersects(Y,z)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new o(F,this.options)}catch{return!1}for(let z=0;z<this.set.length;z++)if(L(this.set[z],F,this.options))return!0;return!1}}qV=e;const t=tyn,n=new t({max:1e3}),r=bue,i=zyn(),s=GB,o=xue,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=wue,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=_ue,p=M=>M.value==="<0.0.0-0",m=M=>M.value==="",g=(M,F)=>{let z=!0;const B=M.slice();let H=B.pop();for(;z&&B.length;)z=B.every(q=>H.intersects(q,F)),H=B.pop();return z},y=(M,F)=>(s("comp",M,F),M=S(M,F),s("caret",M),M=w(M,F),s("tildes",M),M=C(M,F),s("xrange",M),M=R(M,F),s("stars",M),M),b=M=>!M||M.toLowerCase()==="x"||M==="*",w=(M,F)=>M.trim().split(/\s+/).map(z=>E(z,F)).join(" "),E=(M,F)=>{const z=F.loose?a[u.TILDELOOSE]:a[u.TILDE];return M.replace(z,(B,H,q,Y,$)=>{s("tilde",M,B,H,q,Y,$);let W;return b(H)?W="":b(q)?W=`>=${H}.0.0 <${+H+1}.0.0-0`:b(Y)?W=`>=${H}.${q}.0 <${H}.${+q+1}.0-0`:$?(s("replaceTilde pr",$),W=`>=${H}.${q}.${Y}-${$} <${H}.${+q+1}.0-0`):W=`>=${H}.${q}.${Y} <${H}.${+q+1}.0-0`,s("tilde return",W),W})},S=(M,F)=>M.trim().split(/\s+/).map(z=>T(z,F)).join(" "),T=(M,F)=>{s("caret",M,F);const z=F.loose?a[u.CARETLOOSE]:a[u.CARET],B=F.includePrerelease?"-0":"";return M.replace(z,(H,q,Y,$,W)=>{s("caret",M,H,q,Y,$,W);let X;return b(q)?X="":b(Y)?X=`>=${q}.0.0${B} <${+q+1}.0.0-0`:b($)?q==="0"?X=`>=${q}.${Y}.0${B} <${q}.${+Y+1}.0-0`:X=`>=${q}.${Y}.0${B} <${+q+1}.0.0-0`:W?(s("replaceCaret pr",W),q==="0"?Y==="0"?X=`>=${q}.${Y}.${$}-${W} <${q}.${Y}.${+$+1}-0`:X=`>=${q}.${Y}.${$}-${W} <${q}.${+Y+1}.0-0`:X=`>=${q}.${Y}.${$}-${W} <${+q+1}.0.0-0`):(s("no pr"),q==="0"?Y==="0"?X=`>=${q}.${Y}.${$}${B} <${q}.${Y}.${+$+1}-0`:X=`>=${q}.${Y}.${$}${B} <${q}.${+Y+1}.0-0`:X=`>=${q}.${Y}.${$} <${+q+1}.0.0-0`),s("caret return",X),X})},C=(M,F)=>(s("replaceXRanges",M,F),M.split(/\s+/).map(z=>I(z,F)).join(" ")),I=(M,F)=>{M=M.trim();const z=F.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return M.replace(z,(B,H,q,Y,$,W)=>{s("xRange",M,B,H,q,Y,$,W);const X=b(q),V=X||b(Y),K=V||b($),J=K;return H==="="&&J&&(H=""),W=F.includePrerelease?"-0":"",X?H===">"||H==="<"?B="<0.0.0-0":B="*":H&&J?(V&&(Y=0),$=0,H===">"?(H=">=",V?(q=+q+1,Y=0,$=0):(Y=+Y+1,$=0)):H==="<="&&(H="<",V?q=+q+1:Y=+Y+1),H==="<"&&(W="-0"),B=`${H+q}.${Y}.${$}${W}`):V?B=`>=${q}.0.0${W} <${+q+1}.0.0-0`:K&&(B=`>=${q}.${Y}.0${W} <${q}.${+Y+1}.0-0`),s("xRange return",B),B})},R=(M,F)=>(s("replaceStars",M,F),M.trim().replace(a[u.STAR],"")),P=(M,F)=>(s("replaceGTE0",M,F),M.trim().replace(a[F.includePrerelease?u.GTE0PRE:u.GTE0],"")),D=M=>(F,z,B,H,q,Y,$,W,X,V,K,J,ue)=>(b(B)?z="":b(H)?z=`>=${B}.0.0${M?"-0":""}`:b(q)?z=`>=${B}.${H}.0${M?"-0":""}`:Y?z=`>=${z}`:z=`>=${z}${M?"-0":""}`,b(X)?W="":b(V)?W=`<${+X+1}.0.0-0`:b(K)?W=`<${X}.${+V+1}.0-0`:J?W=`<=${X}.${V}.${K}-${J}`:M?W=`<${X}.${V}.${+K+1}-0`:W=`<=${W}`,`${z} ${W}`.trim()),L=(M,F,z)=>{for(let B=0;B<M.length;B++)if(!M[B].test(F))return!1;if(F.prerelease.length&&!z.includePrerelease){for(let B=0;B<M.length;B++)if(s(M[B].semver),M[B].semver!==i.ANY&&M[B].semver.prerelease.length>0){const H=M[B].semver;if(H.major===F.major&&H.minor===F.minor&&H.patch===F.patch)return!0}return!1}return!0};return qV}const Vyn=uze(),Hyn=(e,t,n)=>{try{t=new Vyn(t,n)}catch{return!1}return t.test(e)};var qyn=Hyn,lze=W0n(qyn);function Wyn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Gyn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function cze(e,...t){for(const n of t)Yyn(e,n);return e}function Yyn(e,t){for(const n of Object.keys(t))cA(e,n,t[n],!0)}const Yd=Nan;let kN=Mgn;const o$=typeof window<"u"?window:void 0;var Qwe;kN===void 0&&((Qwe=o$==null?void 0:o$.vl)!=null&&Qwe.compile)&&(kN=o$.vl);const Kyn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Xyn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},LI={vega:"Vega","vega-lite":"Vega-Lite"},h4={vega:Yd.version,"vega-lite":kN?kN.version:"not available"},Qyn={vega:e=>e,"vega-lite":(e,t)=>kN.compile(e,{config:t}).spec},Jyn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Zyn="chart-wrapper";function evn(e){return typeof e=="function"}function Vwe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${LI[r]} JSON Source`}function tvn(e,t){if(e.$schema){const n=tze(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${LI[n.library]}, but mode argument sets ${LI[t]??t}.`);const r=n.library;return lze(h4[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${LI[r]} ${n.version}, but the current version of ${LI[r]} is v${h4[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function fze(e){return!!(e&&"load"in e)}function Hwe(e){return fze(e)?e:Yd.loader(e)}function nvn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Dt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function rvn(e,t,n={}){let r,i;Dt(t)?(i=Hwe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=nvn(r),o=s.loader;(!i||o)&&(i=Hwe(n.loader??o));const a=await qwe(s,i),u=await qwe(n,i),l={...cze(u,a),config:lA(u.config??{},a.config??{})};return await svn(e,r,l,i)}async function qwe(e,t){const n=Dt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Dt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function ivn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function svn(e,t,n={},r){const i=n.theme?lA(L0n[n.theme],n.config??{}):n.config,s=W1(n.actions)?n.actions:cze({},Kyn,n.actions??{}),o={...Xyn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Yd.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:T,rootContainer:C}=ivn(c);if(!T.getElementById(S)){const I=document.createElement("style");I.id=S,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Gyn.toString():n.defaultStyle,C.appendChild(I)}}const f=tvn(t,n.mode);let d=Qyn[f](t,i);if(f==="vega-lite"&&d.$schema){const S=tze(d.$schema);lze(h4.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${h4.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const S=document.createElement("div");S.classList.add(Zyn),c.appendChild(S),h=S}const p=n.patch;if(p&&(d=p instanceof Function?p(d):nFe(d,p,!0,!1).newDocument),n.formatLocale&&Yd.formatLocale(n.formatLocale),n.timeFormatLocale&&Yd.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const T=n.expressionFunctions[S];"fn"in T?Yd.expressionFunction(S,T.fn,T.visitor):T instanceof Function&&Yd.expressionFunction(S,T)}const{ast:m}=n,g=Yd.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Yd.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Yd.expressionInterpreter??n.expr??Uan}:{}});if(y.addSignalListener("autosize",(S,T)=>{const{type:C}=T;C=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):C=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):C=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:T}=n,C=S&&!fze(S)?S==null?void 0:S.baseURL:void 0,I=evn(T)?T:new q0n({baseURL:C,...T===!0?{}:T}).call;y.tooltip(I)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:S,updateSet:T}=typeof b=="boolean"?{}:b;y.hover(S,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let w;if(s!==!1){let S=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const C=document.createElement("details");C.title=o.CLICK_TO_VIEW_ACTIONS,c.append(C),S=C;const I=document.createElement("summary");I.innerHTML=Jyn,C.append(I),w=R=>{C.contains(R.target)||C.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(S.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const C of["svg","png"])if(s===!0||s.export===!0||s.export[C]){const I=o[`${C.toUpperCase()}_ACTION`],R=document.createElement("a"),P=Ot(n.scaleFactor)?n.scaleFactor[C]:n.scaleFactor;R.text=I,R.href="#",R.target="_blank",R.download=`${l}.${C}`,R.addEventListener("mousedown",async function(D){D.preventDefault();const L=await y.toImageURL(C,P);this.href=L}),T.append(R)}}if(s===!0||s.source!==!1){const C=document.createElement("a");C.text=o.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(I){Vwe(Wz(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),T.append(C)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const C=document.createElement("a");C.text=o.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(I){Vwe(Wz(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),T.append(C)}if(s===!0||s.editor!==!1){const C=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(R){Wyn(window,C,{config:i,mode:f,renderer:a,spec:Wz(t)}),R.preventDefault()}),T.append(I)}}function E(){w&&document.removeEventListener("click",w),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function ovn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function avn(e,t,n){n&&(ovn(n)?n(e.data(t)):e.change(t,Yd.changeset().remove(()=>!0).insert(n)))}function uvn(e,t){Object.keys(t).forEach(n=>{avn(e,n,t[n])})}function dze(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const hze=()=>{};function WV(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function lvn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=dze([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!I$(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Wwe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function GV(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function FI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pze extends ci.PureComponent{constructor(){super(...arguments),FI(this,"containerRef",ci.createRef()),FI(this,"resultPromise",void 0),FI(this,"handleError",t=>{const{onError:n=hze}=this.props;n(t,this.containerRef.current),console.warn(t)}),FI(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=dze([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=lvn(GV(this.props),GV(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!iY(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Wwe(a,s),i&&WV(a,i)),a.run()})}else iY(i,s)||this.modifyView(o=>{s&&Wwe(o,s),i&&WV(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=GV(this.props);this.resultPromise=rvn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;WV(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ci.createElement("div",{ref:this.containerRef,className:t,style:n})}}FI(pze,"propTypes",{className:Dde.string,onError:Dde.func});function PK(){return PK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PK.apply(this,arguments)}function DK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cvn={};class mze extends ci.PureComponent{constructor(){super(...arguments),DK(this,"vegaEmbed",ci.createRef()),DK(this,"handleNewView",t=>{this.update();const{onNewView:n=hze}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){iY(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{uvn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ci.createElement(pze,PK({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}DK(mze,"defaultProps",{data:cvn});function OK(){return OK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OK.apply(this,arguments)}function $K(e){return ci.createElement(mze,OK({},e,{mode:"vega-lite"}))}function fvn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=O4(!0),[o,a]=vh(),u=N.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=N.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=N.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(pC,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Wt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Wt,{align:"center",children:[e.type==="metadata"&&_.jsx(Slt,{size:20}),e.type==="numerical"&&_.jsx(Dlt,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(blt,{size:20}),e.type==="likert"&&_.jsx(Alt,{size:20}),e.type==="dropdown"&&_.jsx(Ult,{size:20}),e.type==="slider"&&_.jsx(plt,{size:20}),e.type==="radio"&&_.jsx(Llt,{size:20}),e.type==="checkbox"&&_.jsx(zlt,{size:20}),e.type==="iframe"&&_.jsx(Rlt,{size:20}),_.jsx(vs,{order:5,ml:4,children:e.id})]}),_.jsx(Elt,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(M4,{in:i,mah:400,children:[_.jsx(Ee,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(eT,{})}),_.jsxs(dJ,{cols:2,h:360,children:[_.jsx(o0,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx($K,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Wt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(KI,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(at,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Wt,{align:"center",gap:"xs",children:_.jsx(at,{children:f[e.id]})},d))]})]})}),_.jsx(o0,{mih:200,children:e.type==="metadata"?_.jsx($K,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(at,{fw:700,children:"Response Specification: "}),_.jsx(KI,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(at,{fw:700,children:"Correct Answer: "}),_.jsx(KI,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function dvn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&c$e(t.components[n],t),i=N.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Wt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(fvn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Wt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(at,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function hvn({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=N.useState([...n]),o=N.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=N.useMemo(()=>{let l=wv(e.sequence);return l=sZ(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=c0();return _.jsxs(pC,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Wt,{direction:"row",justify:"space-between",children:_.jsx(ql.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(Pi,{children:[_.jsx(ql,{value:"completed",label:"Completed"}),_.jsx(ql,{value:"inprogress",label:"In Progress"}),_.jsx(ql,{value:"rejected",label:"Rejected"})]})})}),_.jsx(eT,{my:"xs"}),i.length===0?_.jsx(Wt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(at,{children:"No data available."})}):_.jsxs(Wt,{direction:"row",children:[_.jsx(Ee,{w:340,children:_.jsx(X6,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(eT,{orientation:"vertical",mx:"md"}),_.jsx(dvn,{participantData:i,studyConfig:e,trialId:u})]})]})}function pvn({globalConfig:e}){const{studyId:t}=c0(),[n,r]=N.useState([]),[i,s]=N.useState(void 0),[o,a]=N.useState(!1),{storageEngine:u}=xo(),l=Fh(),{tab:c}=c0(),{user:f}=sx(),d=N.useCallback(async()=>{if(a(!0),t){const g=await Lj(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);N.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=N.useMemo(()=>{const g=n.filter(w=>!w.rejected&&w.completed),y=n.filter(w=>!w.rejected&&!w.completed),b=n.filter(w=>w.rejected);return[g,y,b]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Ik,{studyIds:e.configsList}),_.jsx(ss.Main,{children:_.jsxs(nd,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(Qc,{visible:o}),_.jsxs(Wt,{direction:"row",align:"center",children:[_.jsx(vs,{order:5,children:t}),_.jsx(tFe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(Hc,{h:"xs"}),_.jsxs(Qs,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(Qs.List,{children:[_.jsx(Qs.Tab,{value:"table",leftSection:_.jsx(Vlt,{size:16}),children:"Table View"}),_.jsx(Qs.Tab,{value:"stats",leftSection:_.jsx(wlt,{size:16}),children:"Trial Stats"}),_.jsx(Zi,{label:"Coming soon",position:"bottom",children:_.jsx(Qs.Tab,{value:"replay",leftSection:_.jsx(Mlt,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(Qs.Tab,{value:"manage",leftSection:_.jsx(mAe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(Qs.Panel,{value:"table",pt:"xs",children:i&&_.jsx(Rqt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(Qs.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(hvn,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(Qs.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(Qs.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(Fqt,{studyId:t,refresh:d}):_.jsx(nd,{mt:20,children:_.jsx(Hg,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(RJ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Gwe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=sx(),{storageEngine:o}=xo(),[a,u]=N.useState(!1),l=c0();return N.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Qc,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(AJ,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function gze(e,t){if(e instanceof Uf){t(!0);const n=new Ig,r=fF();try{await _9t(r,n,QMe)}catch(i){_F({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function mvn(){const{user:e}=sx(),[t,n]=N.useState(!1),{storageEngine:r}=xo();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&_F({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(AJ,{to:"/"}):_.jsx(nd,{children:_.jsx(zw,{padding:"lg",children:_.jsxs(Wt,{align:"center",direction:"column",justify:"center",children:[_.jsx(R1,{maw:200,mt:50,mb:100,src:`${il}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(at,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(wn,{onClick:()=>gze(r,n),leftSection:_.jsx(Hlt,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(Qc,{visible:t})]})})})}var yze={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ts,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var z=["th","st","nd","rd"],B=F%100;return"["+F+(z[(B-20)%10]||z[B]||z[0])+"]"}},w=function(F,z,B){var H=String(F);return!H||H.length>=z?F:""+Array(z+1-H.length).join(B)+F},E={s:w,z:function(F){var z=-F.utcOffset(),B=Math.abs(z),H=Math.floor(B/60),q=B%60;return(z<=0?"+":"-")+w(H,2,"0")+":"+w(q,2,"0")},m:function F(z,B){if(z.date()<B.date())return-F(B,z);var H=12*(B.year()-z.year())+(B.month()-z.month()),q=z.clone().add(H,f),Y=B-q<0,$=z.clone().add(H+(Y?-1:1),f);return+(-(H+(B-q)/(Y?q-$:$-q))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},S="en",T={};T[S]=b;var C="$isDayjsObject",I=function(F){return F instanceof L||!(!F||!F[C])},R=function F(z,B,H){var q;if(!z)return S;if(typeof z=="string"){var Y=z.toLowerCase();T[Y]&&(q=Y),B&&(T[Y]=B,q=Y);var $=z.split("-");if(!q&&$.length>1)return F($[0])}else{var W=z.name;T[W]=z,q=W}return!H&&q&&(S=q),q||!H&&S},P=function(F,z){if(I(F))return F.clone();var B=typeof z=="object"?z:{};return B.date=F,B.args=arguments,new L(B)},D=E;D.l=R,D.i=I,D.w=function(F,z){return P(F,{locale:z.$L,utc:z.$u,x:z.$x,$offset:z.$offset})};var L=function(){function F(B){this.$L=R(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[C]=!0}var z=F.prototype;return z.parse=function(B){this.$d=function(H){var q=H.date,Y=H.utc;if(q===null)return new Date(NaN);if(D.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var $=q.match(g);if($){var W=$[2]-1||0,X=($[7]||"0").substring(0,3);return Y?new Date(Date.UTC($[1],W,$[3]||1,$[4]||0,$[5]||0,$[6]||0,X)):new Date($[1],W,$[3]||1,$[4]||0,$[5]||0,$[6]||0,X)}}return new Date(q)}(B),this.init()},z.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},z.$utils=function(){return D},z.isValid=function(){return this.$d.toString()!==m},z.isSame=function(B,H){var q=P(B);return this.startOf(H)<=q&&q<=this.endOf(H)},z.isAfter=function(B,H){return P(B)<this.startOf(H)},z.isBefore=function(B,H){return this.endOf(H)<P(B)},z.$g=function(B,H,q){return D.u(B)?this[H]:this.set(q,B)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(B,H){var q=this,Y=!!D.u(H)||H,$=D.p(B),W=function(xe,ke){var je=D.w(q.$u?Date.UTC(q.$y,ke,xe):new Date(q.$y,ke,xe),q);return Y?je:je.endOf(l)},X=function(xe,ke){return D.w(q.toDate()[xe].apply(q.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(ke)),q)},V=this.$W,K=this.$M,J=this.$D,ue="set"+(this.$u?"UTC":"");switch($){case h:return Y?W(1,0):W(31,11);case f:return Y?W(1,K):W(0,K+1);case c:var _e=this.$locale().weekStart||0,be=(V<_e?V+7:V)-_e;return W(Y?J-be:J+(6-be),K);case l:case p:return X(ue+"Hours",0);case u:return X(ue+"Minutes",1);case a:return X(ue+"Seconds",2);case o:return X(ue+"Milliseconds",3);default:return this.clone()}},z.endOf=function(B){return this.startOf(B,!1)},z.$set=function(B,H){var q,Y=D.p(B),$="set"+(this.$u?"UTC":""),W=(q={},q[l]=$+"Date",q[p]=$+"Date",q[f]=$+"Month",q[h]=$+"FullYear",q[u]=$+"Hours",q[a]=$+"Minutes",q[o]=$+"Seconds",q[s]=$+"Milliseconds",q)[Y],X=Y===l?this.$D+(H-this.$W):H;if(Y===f||Y===h){var V=this.clone().set(p,1);V.$d[W](X),V.init(),this.$d=V.set(p,Math.min(this.$D,V.daysInMonth())).$d}else W&&this.$d[W](X);return this.init(),this},z.set=function(B,H){return this.clone().$set(B,H)},z.get=function(B){return this[D.p(B)]()},z.add=function(B,H){var q,Y=this;B=Number(B);var $=D.p(H),W=function(K){var J=P(Y);return D.w(J.date(J.date()+Math.round(K*B)),Y)};if($===f)return this.set(f,this.$M+B);if($===h)return this.set(h,this.$y+B);if($===l)return W(1);if($===c)return W(7);var X=(q={},q[a]=r,q[u]=i,q[o]=n,q)[$]||1,V=this.$d.getTime()+B*X;return D.w(V,this)},z.subtract=function(B,H){return this.add(-1*B,H)},z.format=function(B){var H=this,q=this.$locale();if(!this.isValid())return q.invalidDate||m;var Y=B||"YYYY-MM-DDTHH:mm:ssZ",$=D.z(this),W=this.$H,X=this.$m,V=this.$M,K=q.weekdays,J=q.months,ue=q.meridiem,_e=function(ke,je,Re,ft){return ke&&(ke[je]||ke(H,Y))||Re[je].slice(0,ft)},be=function(ke){return D.s(W%12||12,ke,"0")},xe=ue||function(ke,je,Re){var ft=ke<12?"AM":"PM";return Re?ft.toLowerCase():ft};return Y.replace(y,function(ke,je){return je||function(Re){switch(Re){case"YY":return String(H.$y).slice(-2);case"YYYY":return D.s(H.$y,4,"0");case"M":return V+1;case"MM":return D.s(V+1,2,"0");case"MMM":return _e(q.monthsShort,V,J,3);case"MMMM":return _e(J,V);case"D":return H.$D;case"DD":return D.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return _e(q.weekdaysMin,H.$W,K,2);case"ddd":return _e(q.weekdaysShort,H.$W,K,3);case"dddd":return K[H.$W];case"H":return String(W);case"HH":return D.s(W,2,"0");case"h":return be(1);case"hh":return be(2);case"a":return xe(W,X,!0);case"A":return xe(W,X,!1);case"m":return String(X);case"mm":return D.s(X,2,"0");case"s":return String(H.$s);case"ss":return D.s(H.$s,2,"0");case"SSS":return D.s(H.$ms,3,"0");case"Z":return $}return null}(ke)||$.replace(":","")})},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(B,H,q){var Y,$=this,W=D.p(H),X=P(B),V=(X.utcOffset()-this.utcOffset())*r,K=this-X,J=function(){return D.m($,X)};switch(W){case h:Y=J()/12;break;case f:Y=J();break;case d:Y=J()/3;break;case c:Y=(K-V)/6048e5;break;case l:Y=(K-V)/864e5;break;case u:Y=K/i;break;case a:Y=K/r;break;case o:Y=K/n;break;default:Y=K}return q?Y:D.a(Y)},z.daysInMonth=function(){return this.endOf(f).$D},z.$locale=function(){return T[this.$L]},z.locale=function(B,H){if(!B)return this.$L;var q=this.clone(),Y=R(B,H,!0);return Y&&(q.$L=Y),q},z.clone=function(){return D.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},F}(),M=L.prototype;return P.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(F){M[F[1]]=function(z){return this.$g(z,F[0],F[1])}}),P.extend=function(F,z){return F.$i||(F(z,L,P),F.$i=!0),P},P.locale=R,P.isDayjs=I,P.unix=function(F){return P(1e3*F)},P.en=T[S],P.Ls=T,P.p={},P})})(yze);var gvn=yze.exports;const Ht=cf(gvn);function yvn({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Ht(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function vvn({formatter:e,...t}){return(e||yvn)(t)}function bvn({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function vze({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=bvn({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?vze({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function _vn(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function wvn(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Eue({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=_vn(i.key);if(s){i.preventDefault();const o=wvn(e);vze({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var bze={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ts,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,b){b===void 0&&(b={});var w=b.timeZoneName||"short",E=y+"|"+w,S=r[E];return S||(S=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:w}),r[E]=S),S}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],b=y.type,w=y.value,E=n[b];E>=0&&(m[E]=parseInt(w,10))}var S=m[3],T=S===24?0:S,C=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",I=+d;return(o.utc(C).valueOf()-(I-=I%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),b=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var w=b.utcOffset();b=b.add(p-w,"minute")}return b.$x.$timezone=d,b},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var b=function(T,C,I){var R=T-60*C*1e3,P=l(R,I);if(C===P)return[R,C];var D=l(R-=60*(P-C)*1e3,I);return P===D?[R,P]:[T-60*Math.min(P,D)*1e3,Math.max(P,D)]}(o.utc(d,m).valueOf(),y,g),w=b[0],E=b[1],S=o(w).utcOffset(E);return S.$x.$timezone=g,S},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(bze);var xvn=bze.exports;const Evn=cf(xvn);var _ze={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ts,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(S){S===void 0&&(S="");var T=S.match(r);if(!T)return null;var C=(""+T[0]).match(i)||["-",0,0],I=C[0],R=60*+C[1]+ +C[2];return R===0?0:I==="+"?R:-R}(m),m===null))return this;var b=Math.abs(m)<=16?60*m:m,w=this;if(g)return w.$offset=b,w.$u=m===0,w;if(m!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(w=this.local().add(b+E,n)).$offset=b,w.$x.$localOffset=E}else w=this.utc();return w};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var b=this.local(),w=a(m).local();return p.call(b,w,g,y)}}})})(_ze);var Svn=_ze.exports;const Tvn=cf(Svn);Ht.extend(Tvn);Ht.extend(Evn);function Cvn(e,t){return t?Ht(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Ywe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=Cvn(e,t);return n==="remove"&&(r*=-1),Ht(e).add(r,"minutes").toDate()};function $v(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Ywe(i,n,e)):Ywe(t,n,e)}function Avn({minDate:e,maxDate:t,timezone:n}){const r=$v("add",new Date,n);return!e&&!t?r:e&&Ht(r).isBefore(e)?e:t&&Ht(r).isAfter(t)?t:r}const Ivn={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},kvn=N.createContext(Ivn);function mf(){const e=N.useContext(kvn),t=N.useCallback(o=>o||e.locale,[e.locale]),n=N.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=N.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=N.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=N.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Rvn(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function wze({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:Rvn(e,t),name:n,form:r})}wze.displayName="@mantine/dates/HiddenDatesInput";var xze={day:"m_396ce5cb"};const Nvn={},Pvn=(e,{size:t})=>({day:{"--day-size":Cn(t,"day-size")}}),Sue=Ye((e,t)=>{const n=Oe("Day",Nvn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:b,hidden:w,static:E,...S}=n,T=Nt({name:f||"Day",classes:xze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pvn,rootSelector:"day"}),C=mf();return _.jsx(bo,{...T("day",{style:w?{display:"none"}:void 0}),component:E?"div":"button",ref:t,disabled:c,"data-today":Ht(l).isSame($v("add",new Date,C.getTimezone()),"day")||void 0,"data-hidden":w||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":b&&!c||void 0,"data-static":E||void 0,unstyled:a,...S,children:(m==null?void 0:m(l))||l.getDate()})});Sue.classes=xze;Sue.displayName="@mantine/dates/Day";function Dvn({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Ht().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Ht(r).add(s,"days").locale(e).format(t)):i.push(t(Ht(r).add(s,"days").toDate()));return i}var Eze={weekday:"m_18a3eca"};const Ovn={},$vn=(e,{size:t})=>({weekdaysRow:{"--wr-fz":ha(t),"--wr-spacing":to(t)}}),Tue=Ye((e,t)=>{const n=Oe("WeekdaysRow",Ovn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=Nt({name:h||"WeekdaysRow",classes:Eze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$vn,rootSelector:"weekdaysRow"}),g=mf(),y=Dvn({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((b,w)=>_.jsx(d,{...m("weekday"),children:b},w));return _.jsx(Ee,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Tue.classes=Eze;Tue.displayName="@mantine/dates/WeekdaysRow";function Mvn(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Lvn(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function Fvn({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=Mvn(s,t),a=Lvn(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function Sze(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Tze(e,t){return t instanceof Date?Ht(e).isAfter(Ht(t).subtract(1,"day"),"day"):!0}function Cze(e,t){return t instanceof Date?Ht(e).isBefore(Ht(t).add(1,"day"),"day"):!0}function jvn(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return Cze(c,n)&&Tze(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||Sze(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Ht().isSame(c,"date"));return l||a[0]}var Aze={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const Bvn={withCellSpacing:!0},YB=Ye((e,t)=>{const n=Oe("Month",Bvn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:b,renderDay:w,hideOutsideDates:E,hideWeekdays:S,getDayAriaLabel:T,static:C,__getDayRef:I,__onDayKeyDown:R,__onDayClick:P,__onDayMouseEnter:D,__preventFocus:L,__stopPropagation:M,withCellSpacing:F,size:z,...B}=n,H=Nt({name:l||"Month",classes:Aze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),q=mf(),Y=Fvn({month:h,firstDayOfWeek:q.getFirstDayOfWeek(f),consistentWeeks:q.consistentWeeks}),$=jvn(Y,y,b,m,g,E,h),{resolvedClassNames:W,resolvedStyles:X}=D0({classNames:r,styles:o,props:n}),V=Y.map((K,J)=>{const ue=K.map((_e,be)=>{const xe=!Sze(_e,h),ke=(T==null?void 0:T(_e))||Ht(_e).locale(c||q.locale).format("D MMMM YYYY"),je=m==null?void 0:m(_e),Re=Ht(_e).isSame($,"date");return _.jsx("td",{...H("monthCell"),"data-with-spacing":F||void 0,children:_.jsx(Sue,{__staticSelector:l||"Month",classNames:W,styles:X,unstyled:a,"data-mantine-stop-propagation":M||void 0,renderDay:w,date:_e,size:z,weekend:q.getWeekendDays(p).includes(_e.getDay()),outside:xe,hidden:E?xe:!1,"aria-label":ke,static:C,disabled:(g==null?void 0:g(_e))||!Cze(_e,b)||!Tze(_e,y),ref:ft=>I==null?void 0:I(J,be,ft),...je,onKeyDown:ft=>{var Ze;(Ze=je==null?void 0:je.onKeyDown)==null||Ze.call(je,ft),R==null||R(ft,{rowIndex:J,cellIndex:be,date:_e})},onMouseEnter:ft=>{var Ze;(Ze=je==null?void 0:je.onMouseEnter)==null||Ze.call(je,ft),D==null||D(ft,_e)},onClick:ft=>{var Ze;(Ze=je==null?void 0:je.onClick)==null||Ze.call(je,ft),P==null||P(ft,_e)},onMouseDown:ft=>{var Ze;(Ze=je==null?void 0:je.onMouseDown)==null||Ze.call(je,ft),L&&ft.preventDefault()},tabIndex:L||!Re?-1:0})},_e.toString())});return _.jsx("tr",{...H("monthRow"),children:ue},J)});return _.jsxs(Ee,{component:"table",...H("month"),size:z,ref:t,...B,children:[!S&&_.jsx("thead",{...H("monthThead"),children:_.jsx(Tue,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:z,classNames:W,styles:X,unstyled:a})}),_.jsx("tbody",{...H("monthTbody"),children:V})]})});YB.classes=Aze;YB.displayName="@mantine/dates/Month";var Ize={pickerControl:"m_dc6a3c71"};const Uvn={},zvn=(e,{size:t})=>({pickerControl:{"--dpc-fz":ha(t),"--dpc-size":Cn(t,"dpc-size")}}),KB=Ye((e,t)=>{const n=Oe("PickerControl",Uvn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=Nt({name:d||"PickerControl",classes:Ize,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zvn,rootSelector:"pickerControl"});return _.jsx(bo,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});KB.classes=Ize;KB.displayName="@mantine/dates/PickerControl";function kze(e,t,n){return!t&&!n?!1:!!(t&&Ht(e).isBefore(t,"year")||n&&Ht(e).isAfter(n,"year"))}function Vvn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!kze(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ht().isSame(a,"year"));return o||i[0]}function Rze(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var Nze={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Hvn={yearsListFormat:"YYYY",withCellSpacing:!0},XB=Ye((e,t)=>{const n=Oe("YearsList",Hvn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:b,__onControlMouseEnter:w,__preventFocus:E,__stopPropagation:S,withCellSpacing:T,size:C,...I}=n,R=Nt({name:m||"YearsList",classes:Nze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),P=mf(),D=Rze(l),L=Vvn(D,d,h,p),M=D.map((F,z)=>{const B=F.map((H,q)=>{const Y=p==null?void 0:p(H),$=Ht(H).isSame(L,"year");return _.jsx("td",{...R("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(KB,{...R("yearsListControl"),size:C,unstyled:a,"data-mantine-stop-propagation":S||void 0,disabled:kze(H,d,h),ref:W=>g==null?void 0:g(z,q,W),...Y,onKeyDown:W=>{var X;(X=Y==null?void 0:Y.onKeyDown)==null||X.call(Y,W),y==null||y(W,{rowIndex:z,cellIndex:q,date:H})},onClick:W=>{var X;(X=Y==null?void 0:Y.onClick)==null||X.call(Y,W),b==null||b(W,H)},onMouseEnter:W=>{var X;(X=Y==null?void 0:Y.onMouseEnter)==null||X.call(Y,W),w==null||w(W,H)},onMouseDown:W=>{var X;(X=Y==null?void 0:Y.onMouseDown)==null||X.call(Y,W),E&&W.preventDefault()},tabIndex:E||!$?-1:0,children:Ht(H).locale(P.getLocale(f)).format(c)})},q)});return _.jsx("tr",{...R("yearsListRow"),children:B},z)});return _.jsx(Ee,{component:"table",ref:t,size:C,...R("yearsList"),...I,children:_.jsx("tbody",{children:M})})});XB.classes=Nze;XB.displayName="@mantine/dates/YearsList";function Pze(e,t,n){return!t&&!n?!1:!!(t&&Ht(e).isBefore(t,"month")||n&&Ht(e).isAfter(n,"month"))}function qvn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Pze(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ht().isSame(a,"month"));return o||i[0]}function Wvn(e){const t=Ht(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Ht(t).add(r,"months").toDate()),r+=1;return n}var Dze={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Gvn={monthsListFormat:"MMM",withCellSpacing:!0},QB=Ye((e,t)=>{const n=Oe("MonthsList",Gvn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:b,__onControlMouseEnter:w,__preventFocus:E,__stopPropagation:S,withCellSpacing:T,size:C,...I}=n,R=Nt({name:l||"MonthsList",classes:Dze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),P=mf(),D=Wvn(c),L=qvn(D,h,p,m),M=D.map((F,z)=>{const B=F.map((H,q)=>{const Y=m==null?void 0:m(H),$=Ht(H).isSame(L,"month");return _.jsx("td",{...R("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(KB,{...R("monthsListControl"),size:C,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":S||void 0,disabled:Pze(H,h,p),ref:W=>g==null?void 0:g(z,q,W),...Y,onKeyDown:W=>{var X;(X=Y==null?void 0:Y.onKeyDown)==null||X.call(Y,W),y==null||y(W,{rowIndex:z,cellIndex:q,date:H})},onClick:W=>{var X;(X=Y==null?void 0:Y.onClick)==null||X.call(Y,W),b==null||b(W,H)},onMouseEnter:W=>{var X;(X=Y==null?void 0:Y.onMouseEnter)==null||X.call(Y,W),w==null||w(W,H)},onMouseDown:W=>{var X;(X=Y==null?void 0:Y.onMouseDown)==null||X.call(Y,W),E&&W.preventDefault()},tabIndex:E||!$?-1:0,children:Ht(H).locale(P.getLocale(d)).format(f)})},q)});return _.jsx("tr",{...R("monthsListRow"),children:B},z)});return _.jsx(Ee,{component:"table",ref:t,size:C,...R("monthsList"),...I,children:_.jsx("tbody",{children:M})})});QB.classes=Dze;QB.displayName="@mantine/dates/MonthsList";var Oze={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Yvn={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Kvn=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Cn(t,"dch-control-size"),"--dch-fz":ha(t)}}),nb=Ye((e,t)=>{const n=Oe("CalendarHeader",Yvn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:b,hasNextLevel:w,levelControlAriaLabel:E,withNext:S,withPrevious:T,__staticSelector:C,__preventFocus:I,__stopPropagation:R,...P}=n,D=Nt({name:C||"CalendarHeader",classes:Oze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Kvn,rootSelector:"calendarHeader"}),L=I?M=>M.preventDefault():void 0;return _.jsxs(Ee,{...D("calendarHeader"),ref:t,...P,children:[T&&_.jsx(bo,{...D("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:L,disabled:b,"data-disabled":b||void 0,tabIndex:I||b?-1:0,"data-mantine-stop-propagation":R||void 0,children:c||_.jsx(JS,{...D("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(bo,{component:w?"button":"div",...D("calendarHeaderLevel"),onClick:w?m:void 0,unstyled:a,onMouseDown:w?L:void 0,disabled:!w,"data-static":!w||void 0,"aria-label":E,tabIndex:I||!w?-1:0,"data-mantine-stop-propagation":R||void 0,children:g}),S&&_.jsx(bo,{...D("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:L,disabled:y,"data-disabled":y||void 0,tabIndex:I||y?-1:0,"data-mantine-stop-propagation":R||void 0,children:l||_.jsx(JS,{...D("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});nb.classes=Oze;nb.displayName="@mantine/dates/CalendarHeader";function Xvn(e){const t=Rze(e);return[t[0][0],t[3][0]]}const Qvn={decadeLabelFormat:"YYYY"},JB=Ye((e,t)=>{const n=Oe("DecadeLevel",Qvn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:E,nextDisabled:S,previousDisabled:T,levelControlAriaLabel:C,withNext:I,withPrevious:R,decadeLabelFormat:P,classNames:D,styles:L,unstyled:M,__staticSelector:F,__stopPropagation:z,size:B,...H}=n,q=mf(),[Y,$]=Xvn(r),W={__staticSelector:F||"DecadeLevel",classNames:D,styles:L,unstyled:M,size:B},X=typeof S=="boolean"?S:o?!Ht($).endOf("year").isBefore(o):!1,V=typeof T=="boolean"?T:s?!Ht(Y).startOf("year").isAfter(s):!1,K=(J,ue)=>Ht(J).locale(i||q.locale).format(ue);return _.jsxs(Ee,{"data-decade-level":!0,size:B,ref:t,...H,children:[_.jsx(nb,{label:typeof P=="function"?P(Y,$):`${K(Y,P)}  ${K($,P)}`,__preventFocus:p,__stopPropagation:z,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:E,nextDisabled:X,previousDisabled:V,hasNextLevel:!1,levelControlAriaLabel:C,withNext:I,withPrevious:R,...W}),_.jsx(XB,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:z,withCellSpacing:h,...W})]})});JB.classes={...XB.classes,...nb.classes};JB.displayName="@mantine/dates/DecadeLevel";const Jvn={yearLabelFormat:"YYYY"},ZB=Ye((e,t)=>{const n=Oe("YearLevel",Jvn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:E,onLevelClick:S,nextDisabled:T,previousDisabled:C,hasNextLevel:I,levelControlAriaLabel:R,withNext:P,withPrevious:D,yearLabelFormat:L,__staticSelector:M,__stopPropagation:F,size:z,classNames:B,styles:H,unstyled:q,...Y}=n,$=mf(),W={__staticSelector:M||"YearLevel",classNames:B,styles:H,unstyled:q,size:z},X=typeof T=="boolean"?T:o?!Ht(r).endOf("year").isBefore(o):!1,V=typeof C=="boolean"?C:s?!Ht(r).startOf("year").isAfter(s):!1;return _.jsxs(Ee,{"data-year-level":!0,size:z,ref:t,...Y,children:[_.jsx(nb,{label:typeof L=="function"?L(r):Ht(r).locale(i||$.locale).format(L),__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:E,onLevelClick:S,nextDisabled:X,previousDisabled:V,hasNextLevel:I,levelControlAriaLabel:R,withNext:P,withPrevious:D,...W}),_.jsx(QB,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...W})]})});ZB.classes={...nb.classes,...QB.classes};ZB.displayName="@mantine/dates/YearLevel";const Zvn={monthLabelFormat:"MMMM YYYY"},e9=Ye((e,t)=>{const n=Oe("MonthLevel",Zvn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:b,__onDayMouseEnter:w,withCellSpacing:E,__preventFocus:S,__stopPropagation:T,nextIcon:C,previousIcon:I,nextLabel:R,previousLabel:P,onNext:D,onPrevious:L,onLevelClick:M,nextDisabled:F,previousDisabled:z,hasNextLevel:B,levelControlAriaLabel:H,withNext:q,withPrevious:Y,monthLabelFormat:$,classNames:W,styles:X,unstyled:V,__staticSelector:K,size:J,static:ue,..._e}=n,be=mf(),xe={__staticSelector:K||"MonthLevel",classNames:W,styles:X,unstyled:V,size:J},ke=typeof F=="boolean"?F:f?!Ht(r).endOf("month").isBefore(f):!1,je=typeof z=="boolean"?z:c?!Ht(r).startOf("month").isAfter(c):!1;return _.jsxs(Ee,{"data-month-level":!0,size:J,ref:t,..._e,children:[_.jsx(nb,{label:typeof $=="function"?$(r):Ht(r).locale(i||be.locale).format($),__preventFocus:S,__stopPropagation:T,nextIcon:C,previousIcon:I,nextLabel:R,previousLabel:P,onNext:D,onPrevious:L,onLevelClick:M,nextDisabled:ke,previousDisabled:je,hasNextLevel:B,levelControlAriaLabel:H,withNext:q,withPrevious:Y,...xe}),_.jsx(YB,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:b,__onDayMouseEnter:w,__preventFocus:S,__stopPropagation:T,static:ue,withCellSpacing:E,...xe})]})});e9.classes={...YB.classes,...nb.classes};e9.displayName="@mantine/dates/MonthLevel";var $ze={levelsGroup:"m_30b26e33"};const e1n={},rb=Ye((e,t)=>{const n=Oe("LevelsGroup",e1n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=Nt({name:l||"LevelsGroup",classes:$ze,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(Ee,{ref:t,...f("levelsGroup"),...c})});rb.classes=$ze;rb.displayName="@mantine/dates/LevelsGroup";const t1n={numberOfColumns:1},t9=Ye((e,t)=>{const n=Oe("DecadeLevelGroup",t1n,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,nextDisabled:w,previousDisabled:E,classNames:S,styles:T,unstyled:C,__staticSelector:I,__stopPropagation:R,numberOfColumns:P,levelControlAriaLabel:D,decadeLabelFormat:L,size:M,vars:F,...z}=n,B=N.useRef([]),H=Array(P).fill(0).map((q,Y)=>{const $=Ht(r).add(Y*10,"years").toDate();return _.jsx(JB,{size:M,yearsListFormat:a,decade:$,withNext:Y===P-1,withPrevious:Y===0,decadeLabelFormat:L,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(W,X)=>Eue({levelIndex:Y,rowIndex:X.rowIndex,cellIndex:X.cellIndex,event:W,controlsRef:B}),__getControlRef:(W,X,V)=>{Array.isArray(B.current[Y])||(B.current[Y]=[]),Array.isArray(B.current[Y][W])||(B.current[Y][W]=[]),B.current[Y][W][X]=V},levelControlAriaLabel:typeof D=="function"?D($):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:R,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,nextDisabled:w,previousDisabled:E,getYearControlProps:u,__staticSelector:I||"DecadeLevelGroup",classNames:S,styles:T,unstyled:C,withCellSpacing:f},Y)});return _.jsx(rb,{classNames:S,styles:T,__staticSelector:I||"DecadeLevelGroup",ref:t,size:M,unstyled:C,...z,children:H})});t9.classes={...rb.classes,...JB.classes};t9.displayName="@mantine/dates/DecadeLevelGroup";const n1n={numberOfColumns:1},n9=Ye((e,t)=>{const n=Oe("YearLevelGroup",n1n,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,onLevelClick:w,nextDisabled:E,previousDisabled:S,hasNextLevel:T,classNames:C,styles:I,unstyled:R,__staticSelector:P,__stopPropagation:D,numberOfColumns:L,levelControlAriaLabel:M,yearLabelFormat:F,size:z,vars:B,...H}=n,q=N.useRef([]),Y=Array(L).fill(0).map(($,W)=>{const X=Ht(r).add(W,"years").toDate();return _.jsx(ZB,{size:z,monthsListFormat:a,year:X,withNext:W===L-1,withPrevious:W===0,yearLabelFormat:F,__stopPropagation:D,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(V,K)=>Eue({levelIndex:W,rowIndex:K.rowIndex,cellIndex:K.cellIndex,event:V,controlsRef:q}),__getControlRef:(V,K,J)=>{Array.isArray(q.current[W])||(q.current[W]=[]),Array.isArray(q.current[W][V])||(q.current[W][V]=[]),q.current[W][V][K]=J},levelControlAriaLabel:typeof M=="function"?M(X):M,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,onLevelClick:w,nextDisabled:E,previousDisabled:S,hasNextLevel:T,getMonthControlProps:u,classNames:C,styles:I,unstyled:R,__staticSelector:P||"YearLevelGroup",withCellSpacing:f},W)});return _.jsx(rb,{classNames:C,styles:I,__staticSelector:P||"YearLevelGroup",ref:t,size:z,unstyled:R,...H,children:Y})});n9.classes={...ZB.classes,...rb.classes};n9.displayName="@mantine/dates/YearLevelGroup";const r1n={numberOfColumns:1},r9=Ye((e,t)=>{const n=Oe("MonthLevelGroup",r1n,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:b,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:T,previousLabel:C,onNext:I,onPrevious:R,onLevelClick:P,nextDisabled:D,previousDisabled:L,hasNextLevel:M,classNames:F,styles:z,unstyled:B,numberOfColumns:H,levelControlAriaLabel:q,monthLabelFormat:Y,__staticSelector:$,__stopPropagation:W,size:X,static:V,vars:K,...J}=n,ue=N.useRef([]),_e=Array(H).fill(0).map((be,xe)=>{const ke=Ht(r).add(xe,"months").toDate();return _.jsx(e9,{month:ke,withNext:xe===H-1,withPrevious:xe===0,monthLabelFormat:Y,__stopPropagation:W,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(je,Re)=>Eue({levelIndex:xe,rowIndex:Re.rowIndex,cellIndex:Re.cellIndex,event:je,controlsRef:ue}),__getDayRef:(je,Re,ft)=>{Array.isArray(ue.current[xe])||(ue.current[xe]=[]),Array.isArray(ue.current[xe][je])||(ue.current[xe][je]=[]),ue.current[xe][je][Re]=ft},levelControlAriaLabel:typeof q=="function"?q(ke):q,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:T,previousLabel:C,onNext:I,onPrevious:R,onLevelClick:P,nextDisabled:D,previousDisabled:L,hasNextLevel:M,classNames:F,styles:z,unstyled:B,__staticSelector:$||"MonthLevelGroup",size:X,static:V,withCellSpacing:b},xe)});return _.jsx(rb,{classNames:F,styles:z,__staticSelector:$||"MonthLevelGroup",ref:t,size:X,...J,children:_e})});r9.classes={...rb.classes,...e9.classes};r9.displayName="@mantine/dates/MonthLevelGroup";var Mze={input:"m_6fa5e2aa"};const i1n={},i9=Ye((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:b,rightSection:w,shouldClear:E,readOnly:S,disabled:T,value:C,name:I,form:R,type:P,...D}=ITe("PickerInputBase",i1n,e),L=w||(g&&E&&!S&&!T?_.jsx(M0,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...b}):null),M=()=>{P==="range"&&Array.isArray(C)&&C[0]&&!C[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!S&&_.jsx(Cs,{opened:p,onClose:M,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(os.Wrapper,{...r,children:_.jsxs(Ma,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||S,onClose:()=>{var F;(F=u==null?void 0:u.onClose)==null||F.call(u),M()},children:[_.jsx(Ma.Target,{children:_.jsx(os,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":S||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:F=>{m==null||m(F),h.toggle()},rightSection:L,...n,ref:t,classNames:{...s,input:Hs(Mze.input,s==null?void 0:s.input)},...D,children:d||_.jsx(os.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Ma.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(wze,{value:C,name:I,form:R,type:P})]})});i9.classes=Mze;i9.displayName="@mantine/dates/PickerInputBase";const Kwe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Cue({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=N.useRef(e),o=mf(),[a,u,l]=_o({value:$v("add",t,o.getTimezone(),!i),defaultValue:$v("add",n,o.getTimezone(),!i),finalValue:Kwe(e),onChange:f=>{r==null||r($v("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Kwe(e),u(c))),[c,u,l]}function YV(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function s1n(e){return e===0?"month":e===1?"year":"decade"}function W2(e,t,n){return s1n(Op(YV(e,0),YV(t,0),YV(n,2)))}const o1n={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},s9=Ye((e,t)=>{const n=Oe("Calendar",o1n,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:b,__updateDateOnYearSelect:w,__updateDateOnMonthSelect:E,firstDayOfWeek:S,weekdayFormat:T,weekendDays:C,getDayProps:I,excludeDate:R,renderDay:P,hideOutsideDates:D,hideWeekdays:L,getDayAriaLabel:M,monthLabelFormat:F,nextIcon:z,previousIcon:B,__onDayClick:H,__onDayMouseEnter:q,withCellSpacing:Y,monthsListFormat:$,getMonthControlProps:W,yearLabelFormat:X,yearsListFormat:V,getYearControlProps:K,decadeLabelFormat:J,classNames:ue,styles:_e,unstyled:be,minDate:xe,maxDate:ke,locale:je,__staticSelector:Re,size:ft,__preventFocus:Ze,__stopPropagation:It,onNextDecade:bt,onPreviousDecade:Ae,onNextYear:Be,onPreviousYear:st,onNextMonth:_t,onPreviousMonth:jt,static:ot,__timezoneApplied:Se,...kt}=n,{resolvedClassNames:Rt,resolvedStyles:Te}=D0({classNames:ue,styles:_e,props:n}),[$e,rt]=_o({value:a?W2(a,s,i):void 0,defaultValue:o?W2(o,s,i):void 0,finalValue:W2(void 0,s,i),onChange:u}),[St,Mt]=Cue({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!Se}),Zn={__staticSelector:Re||"Calendar",styles:Te,classNames:Rt,unstyled:be,size:ft},Br=mf(),er=h||d||1,yr=St||$v("add",new Date,Br.getTimezone()),kn=()=>{const Vn=Ht(yr).add(er,"month").toDate();_t==null||_t(Vn),Mt(Vn)},Un=()=>{const Vn=Ht(yr).subtract(er,"month").toDate();jt==null||jt(Vn),Mt(Vn)},pr=()=>{const Vn=Ht(yr).add(er,"year").toDate();Be==null||Be(Vn),Mt(Vn)},Tr=()=>{const Vn=Ht(yr).subtract(er,"year").toDate();st==null||st(Vn),Mt(Vn)},Yo=()=>{const Vn=Ht(yr).add(10*er,"year").toDate();bt==null||bt(Vn),Mt(Vn)},us=()=>{const Vn=Ht(yr).subtract(10*er,"year").toDate();Ae==null||Ae(Vn),Mt(Vn)};return _.jsxs(Ee,{ref:t,size:ft,"data-calendar":!0,...kt,children:[$e==="month"&&_.jsx(r9,{month:yr,minDate:xe,maxDate:ke,firstDayOfWeek:S,weekdayFormat:T,weekendDays:C,getDayProps:I,excludeDate:R,renderDay:P,hideOutsideDates:D,hideWeekdays:L,getDayAriaLabel:M,onNext:kn,onPrevious:Un,hasNextLevel:i!=="month",onLevelClick:()=>rt("year"),numberOfColumns:d,locale:je,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:z,previousLabel:p==null?void 0:p.previousMonth,previousIcon:B,monthLabelFormat:F,__onDayClick:H,__onDayMouseEnter:q,__preventFocus:Ze,__stopPropagation:It,static:ot,withCellSpacing:Y,...Zn}),$e==="year"&&_.jsx(n9,{year:yr,numberOfColumns:d,minDate:xe,maxDate:ke,monthsListFormat:$,getMonthControlProps:W,locale:je,onNext:pr,onPrevious:Tr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>rt("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:z,previousLabel:p==null?void 0:p.previousYear,previousIcon:B,yearLabelFormat:X,__onControlMouseEnter:b,__onControlClick:(Vn,Yi)=>{E&&Mt(Yi),rt(W2("month",s,i)),g==null||g(Yi)},__preventFocus:Ze,__stopPropagation:It,withCellSpacing:Y,...Zn}),$e==="decade"&&_.jsx(t9,{decade:yr,minDate:xe,maxDate:ke,yearsListFormat:V,getYearControlProps:K,locale:je,onNext:Yo,onPrevious:us,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:z,previousLabel:p==null?void 0:p.previousDecade,previousIcon:B,decadeLabelFormat:J,__onControlMouseEnter:y,__onControlClick:(Vn,Yi)=>{w&&Mt(Yi),rt(W2("year",s,i)),m==null||m(Yi)},__preventFocus:Ze,__stopPropagation:It,withCellSpacing:Y,...Zn})]})});s9.classes={...t9.classes,...n9.classes,...r9.classes};s9.displayName="@mantine/dates/Calendar";function a1n(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:b,onPreviousMonth:w,onNextYear:E,onPreviousYear:S,onNextDecade:T,onPreviousDecade:C,withCellSpacing:I,__updateDateOnYearSelect:R,__updateDateOnMonthSelect:P,firstDayOfWeek:D,weekdayFormat:L,weekendDays:M,getDayProps:F,excludeDate:z,renderDay:B,hideOutsideDates:H,hideWeekdays:q,getDayAriaLabel:Y,monthLabelFormat:$,monthsListFormat:W,getMonthControlProps:X,yearLabelFormat:V,yearsListFormat:K,getYearControlProps:J,decadeLabelFormat:ue,allowSingleDateInRange:_e,allowDeselect:be,minDate:xe,maxDate:ke,locale:je,...Re}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:b,onPreviousMonth:w,onNextYear:E,onPreviousYear:S,onNextDecade:T,onPreviousDecade:C,withCellSpacing:I,__updateDateOnYearSelect:R,__updateDateOnMonthSelect:P,firstDayOfWeek:D,weekdayFormat:L,weekendDays:M,getDayProps:F,excludeDate:z,renderDay:B,hideOutsideDates:H,hideWeekdays:q,getDayAriaLabel:Y,monthLabelFormat:$,monthsListFormat:W,getMonthControlProps:X,yearLabelFormat:V,yearsListFormat:K,getYearControlProps:J,decadeLabelFormat:ue,allowSingleDateInRange:_e,allowDeselect:be,minDate:xe,maxDate:ke,locale:je},others:Re}}function Xwe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Ht(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Ht(n[1]).endOf("day").add(1,"ms").isAfter(e)}function u1n({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Cue({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=N.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=N.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Ht(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const C=[T,f];C.sort((I,R)=>I.getTime()-R.getTime()),c(C),p(null),d(null);return}if(l[0]&&!l[1]&&Ht(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(C=>Ht(C).isSame(T,t))?c(l.filter(C=>!Ht(C).isSame(T,t))):c([...l,T]);return}l&&o&&Ht(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?Xwe(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Xwe(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,b=T=>l[0]instanceof Date&&Ht(T).isSame(l[0],t)?!(h&&Ht(h).isBefore(l[0])):!1,w=T=>l[1]instanceof Date?Ht(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Ht(h).isBefore(l[0])&&Ht(T).isSame(l[0],t),E=T=>{if(e==="range")return{selected:l.some(I=>I&&Ht(I).isSame(T,t)),inRange:g(T),firstInRange:b(T),lastInRange:w(T),"data-autofocus":!!l[0]&&Ht(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(I=>I&&Ht(I).isSame(T,t)),"data-autofocus":!!l[0]&&Ht(l[0]).isSame(T,t)||void 0};const C=Ht(l).isSame(T,t);return{selected:C,"data-autofocus":C||void 0}},S=e==="range"&&f?p:()=>{};return N.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:S,getControlProps:E,_value:l,setValue:c}}const l1n={type:"default",defaultLevel:"month",numberOfColumns:1},o9=Ye((e,t)=>{const n=Oe("DatePicker",l1n,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:b,__timezoneApplied:w,...E}=n,{onDateChange:S,onRootMouseLeave:T,onHoveredDateChange:C,getControlProps:I}=u1n({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!w}),{resolvedClassNames:R,resolvedStyles:P}=D0({classNames:r,styles:i,props:n}),D=mf();return _.jsx(s9,{ref:t,minLevel:"month",classNames:R,styles:P,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(L,M)=>{C(M),y==null||y(L,M)},__onDayClick:(L,M)=>{S(M),b==null||b(L,M)},getDayProps:L=>({...I(L),...f==null?void 0:f(L)}),...E,date:$v("add",E.date,D.getTimezone(),w),__timezoneApplied:!0})});o9.classes=s9.classes;o9.displayName="@mantine/dates/DatePicker";function c1n({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=mf(),[f,d]=O4(!1),[h,p]=Cue({type:e,value:t,defaultValue:n,onChange:r}),m=vvn({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=w=>{o&&(e==="default"&&d.close(),e==="range"&&w[0]&&w[1]&&d.close()),p(a&&e==="multiple"?[...w].sort((E,S)=>E.getTime()-S.getTime()):w)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),b=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:b,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const f1n={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Aue=Ye((e,t)=>{const n=Oe("DatePickerInput",f1n,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:b,maxDate:w,vars:E,defaultDate:S,valueFormatter:T,...C}=n,{resolvedClassNames:I,resolvedStyles:R}=D0({classNames:c,styles:f,props:n}),{calendarProps:P,others:D}=a1n(C),{_value:L,setValue:M,formattedValue:F,dropdownHandlers:z,dropdownOpened:B,onClear:H,shouldClear:q}=c1n({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),Y=Array.isArray(L)?L[0]||S:L||S,$=mf();return _.jsx(i9,{formattedValue:F,dropdownOpened:B,dropdownHandlers:z,classNames:I,styles:R,unstyled:d,ref:t,onClear:H,shouldClear:q,value:L,size:p,variant:m,dropdownType:g,...D,type:r,__staticSelector:"DatePickerInput",children:_.jsx(o9,{...P,size:p,variant:m,type:r,value:L,defaultDate:Y||Avn({maxDate:w,minDate:b,timezone:$.getTimezone()}),onChange:M,locale:l,classNames:I,styles:R,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:b,maxDate:w,date:$v("add",P.date,$.getTimezone()),__timezoneApplied:!0})})});Aue.classes={...i9.classes,...o9.classes};Aue.displayName="@mantine/dates/DatePickerInput";function d1n(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat().filter(r=>r!==-1);return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function h1n({studyId:e,allParticipants:t}){const n=Fh(),[r,i]=vh(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==-1))).filter(p=>Number.isFinite(p)),[o,a]=N.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=N.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>d1n(y.answers,o))]},[t,o]),d=N.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat().filter(y=>y!==-1))).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=N.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(nd,{children:_.jsxs(zw,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Wt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Wt,{direction:"row",align:"center",children:[_.jsx(vs,{order:5,children:e}),_.jsx(tFe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(Pi,{children:[_.jsx(jre,{allParticipants:t,studyId:e}),_.jsx(Zi,{label:"Analyze and manage study data",children:_.jsx(wn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${il}analysis/stats/${e}`,children:_.jsx(xlt,{})})})]})]}),_.jsx(Aue,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(at,{mt:16,children:"Finished Participants"}),_.jsx($K,{spec:h,actions:!1})]}):_.jsx(Ee,{h:293.4,children:_.jsx(Xc,{style:{height:"100%"},children:_.jsx(at,{children:"Not enough participants for chart"})})})]})})}function p1n({globalConfig:e}){const[t,n]=N.useState(!1),[r,i]=N.useState({}),[s,o]=N.useState({}),{storageEngine:a}=xo(),{user:u}=sx();N.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await Lj(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof Uf){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(Zu.Col,{span:{md:12,xl:6},children:_.jsx(h1n,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(Ik,{studyIds:e.configsList}),_.jsx(ss.Main,{children:_.jsx(nd,{fluid:!0,children:_.jsxs(Ee,{children:[_.jsx(vs,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Zu,{children:[l.length>0?l:_.jsx(nd,{mt:100,children:_.jsx(at,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Qc,{visible:t})]})]})})})]})}function m1n(){const{user:e,triggerAuth:t}=sx(),{storageEngine:n}=xo(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(!1),[y,b]=N.useState(""),[w,E]=N.useState(null),S=_Ie({initialValues:{email:""},validate:{email:xvt("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof Uf){const M=await(n==null?void 0:n.getUserManagementData("authentication"));i((M==null?void 0:M.isEnabled)||!1);const F=await(n==null?void 0:n.getUserManagementData("adminUsers"));F&&F.adminUsersList&&o(F==null?void 0:F.adminUsersList.map(z=>z.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof Uf){const L=await gze(n,u);L&&L.email?(E({email:L.email,uid:L.uid}),p(!0)):g(!0)}u(!1)},C=async L=>{u(!0),n instanceof Uf&&L&&(await n.changeAuth(!0),await n.addAdminUser(L),o([L.email]),i(!0),t()),p(!1),u(!1)},I=async()=>{if(u(!0),n instanceof Uf){await n.addAdminUser({email:S.values.email,uid:null});const L=await n.getUserManagementData("adminUsers");o((L==null?void 0:L.adminUsersList.map(M=>M.email))||[])}u(!1),c(!1),S.setValues({email:""})},R=L=>{d(!0),b(L)},P=async()=>{if(u(!0),n instanceof Uf){await n.removeAdminUser(y);const L=await n.getUserManagementData("adminUsers");o((L==null?void 0:L.adminUsersList.map(M=>M.email))||[])}d(!1),u(!1)},D=N.useMemo(()=>n instanceof Uf,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(nd,{children:_.jsxs(zw,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(vs,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Wt,{children:_.jsx(at,{children:"Authentication is enabled."})}):_.jsxs(Wt,{justify:"space-between",children:[_.jsx(Ee,{children:_.jsx(at,{children:"Authentication is currently disabled."})}),_.jsx(Zi,{label:"You can only enable auth when using Firebase",disabled:D,children:_.jsx(wn,{onClick:L=>D?T():L.preventDefault(),color:"green","data-disabled":D?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Wt,{mt:40,direction:"column",children:[_.jsxs(Wt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(vs,{order:6,children:"Enabled Users"}),_.jsx(NJ,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(L=>{var M;return _.jsxs(Wt,{justify:"space-between",mb:10,children:[_.jsx(at,{children:L}),L===((M=e.user)==null?void 0:M.email)?_.jsx(at,{color:"blue",size:"xs",children:"You"}):_.jsx(Bw,{variant:"subtle",onClick:()=>R(L),children:_.jsx(yAe,{color:"red"})})]},L)}):null]}):null]})}),_.jsx(Cs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ee,{component:"form",onSubmit:S.onSubmit(()=>I()),children:[_.jsx(Pg,{leftSection:_.jsx(ylt,{}),placeholder:"User Gmail Account",...S.getInputProps("email")}),_.jsxs(Wt,{mt:30,justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(wn,{type:"submit",children:"Save"})]})]})}),_.jsxs(Cs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(at,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(at,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Wt,{mt:40,justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(wn,{onClick:()=>P(),children:"Yes, I'm sure."})]})]}),_.jsxs(Cs,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(at,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(at,{mt:40,children:["User"," ",_.jsx("b",{children:w==null?void 0:w.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Wt,{mt:40,justify:"right",children:[_.jsx(wn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(wn,{onClick:()=>C(w),children:"Yes, I'm sure."})]})]}),_.jsxs(Cs,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(at,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(at,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Wt,{mt:40,justify:"right",children:_.jsx(wn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(Qc,{visible:a})]})}class g1n extends Z6e{constructor(){super("localStorage");Fu(this,"studyDatabase");Fu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await AE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await bF(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await bF(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await AE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=vF();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=AE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=vF();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await AE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await AE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function y1n(){let e,t=!1;{const n=new Uf;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new g1n;await n.connect(),e=n}return e}function pE({title:e}){const t=N1();return N.useEffect(()=>{document.title=e},[t,e]),null}async function v1n(){const t=await(await fetch(`${il}global.json`)).text();return Sjt(t)}function b1n(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function a(){e&&r(await Ijt(e))}a()},[e]),N.useEffect(()=>{e||v1n().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=xo();N.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await y1n();s(u)}a()},[s,i]);const o=async a=>i instanceof Uf?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(olt,{basename:il,children:_.jsx(Aqt,{children:_.jsx(dlt,{children:_.jsx(ss,{padding:"md",header:{height:70},children:_.jsxs(nlt,{children:[_.jsx(cg,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(pE,{title:"ReVISit | Home"}),_.jsx(Ik,{studyIds:e.configsList}),_.jsx(I0t,{globalConfig:e,studyConfigs:n})]})}),_.jsx(cg,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(pE,{title:"ReVISit | Study"}),_.jsx(kjt,{globalConfig:e})]})}),_.jsx(cg,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(pE,{title:"ReVISit | Analysis"}),_.jsx(p1n,{globalConfig:e})]})}),_.jsx(cg,{path:"/analysis",element:_.jsx(yG,{to:"/analysis/dashboard"})}),_.jsx(cg,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(pE,{title:"ReVISit | Analysis"}),_.jsx(Gwe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(pvn,{globalConfig:e})})]})}),_.jsx(cg,{path:"/analysis/stats/:studyId",element:_.jsx(yG,{to:"./table",replace:!0})}),_.jsx(cg,{path:"/settings",element:_.jsxs(Gwe,{children:[_.jsx(pE,{title:"ReVISit | Settings"}),_.jsx(Ik,{studyIds:e.configsList}),_.jsx(ss.Main,{children:_.jsx(m1n,{})})]})}),_.jsx(cg,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(pE,{title:"ReVISit | Login"}),_.jsx(Ik,{studyIds:e.configsList}),_.jsx(ss.Main,{children:_.jsx(mvn,{})})]})})]})})})})}):null}KV.createRoot(document.getElementById("root")).render(_.jsx(ci.StrictMode,{children:_.jsx(dut,{children:_.jsxs(PSe,{children:[_.jsx(U0,{}),_.jsx(b1n,{})]})})}))});export default _1n();
